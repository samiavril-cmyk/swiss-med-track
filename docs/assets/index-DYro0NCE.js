var iF=Object.defineProperty;var GA=s=>{throw TypeError(s)};var aF=(s,e,t)=>e in s?iF(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var G=(s,e,t)=>aF(s,typeof e!="symbol"?e+"":e,t),Xb=(s,e,t)=>e.has(s)||GA("Cannot "+t);var u=(s,e,t)=>(Xb(s,e,"read from private field"),t?t.call(s):e.get(s)),C=(s,e,t)=>e.has(s)?GA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),N=(s,e,t,n)=>(Xb(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),k=(s,e,t)=>(Xb(s,e,"access private method"),t);var Jt=(s,e,t,n)=>({set _(r){N(s,e,r,t)},get _(){return u(s,e,n)}});function oF(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function u2(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function lF(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),t}var h2={exports:{}},Xy={},f2={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=Symbol.for("react.element"),cF=Symbol.for("react.portal"),dF=Symbol.for("react.fragment"),uF=Symbol.for("react.strict_mode"),hF=Symbol.for("react.profiler"),fF=Symbol.for("react.provider"),mF=Symbol.for("react.context"),pF=Symbol.for("react.forward_ref"),gF=Symbol.for("react.suspense"),vF=Symbol.for("react.memo"),xF=Symbol.for("react.lazy"),KA=Symbol.iterator;function yF(s){return s===null||typeof s!="object"?null:(s=KA&&s[KA]||s["@@iterator"],typeof s=="function"?s:null)}var m2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p2=Object.assign,g2={};function Zf(s,e,t){this.props=s,this.context=e,this.refs=g2,this.updater=t||m2}Zf.prototype.isReactComponent={};Zf.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};Zf.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function v2(){}v2.prototype=Zf.prototype;function bN(s,e,t){this.props=s,this.context=e,this.refs=g2,this.updater=t||m2}var wN=bN.prototype=new v2;wN.constructor=bN;p2(wN,Zf.prototype);wN.isPureReactComponent=!0;var YA=Array.isArray,x2=Object.prototype.hasOwnProperty,jN={current:null},y2={key:!0,ref:!0,__self:!0,__source:!0};function b2(s,e,t){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)x2.call(e,n)&&!y2.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(s&&s.defaultProps)for(n in l=s.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:yv,type:s,key:i,ref:o,props:r,_owner:jN.current}}function bF(s,e){return{$$typeof:yv,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function _N(s){return typeof s=="object"&&s!==null&&s.$$typeof===yv}function wF(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(t){return e[t]})}var XA=/\/+/g;function Qb(s,e){return typeof s=="object"&&s!==null&&s.key!=null?wF(""+s.key):e.toString(36)}function Mx(s,e,t,n,r){var i=typeof s;(i==="undefined"||i==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case yv:case cF:o=!0}}if(o)return o=s,r=r(o),s=n===""?"."+Qb(o,0):n,YA(r)?(t="",s!=null&&(t=s.replace(XA,"$&/")+"/"),Mx(r,e,t,"",function(d){return d})):r!=null&&(_N(r)&&(r=bF(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(XA,"$&/")+"/")+s)),e.push(r)),1;if(o=0,n=n===""?".":n+":",YA(s))for(var l=0;l<s.length;l++){i=s[l];var c=n+Qb(i,l);o+=Mx(i,e,t,c,r)}else if(c=yF(s),typeof c=="function")for(s=c.call(s),l=0;!(i=s.next()).done;)i=i.value,c=n+Qb(i,l++),o+=Mx(i,e,t,c,r);else if(i==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kv(s,e,t){if(s==null)return s;var n=[],r=0;return Mx(s,n,"","",function(i){return e.call(t,i,r++)}),n}function jF(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(t){(s._status===0||s._status===-1)&&(s._status=1,s._result=t)},function(t){(s._status===0||s._status===-1)&&(s._status=2,s._result=t)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var nn={current:null},Ix={transition:null},_F={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:Ix,ReactCurrentOwner:jN};function w2(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Kv,forEach:function(s,e,t){Kv(s,function(){e.apply(this,arguments)},t)},count:function(s){var e=0;return Kv(s,function(){e++}),e},toArray:function(s){return Kv(s,function(e){return e})||[]},only:function(s){if(!_N(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};Le.Component=Zf;Le.Fragment=dF;Le.Profiler=hF;Le.PureComponent=bN;Le.StrictMode=uF;Le.Suspense=gF;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_F;Le.act=w2;Le.cloneElement=function(s,e,t){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var n=p2({},s.props),r=s.key,i=s.ref,o=s._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jN.current),e.key!==void 0&&(r=""+e.key),s.type&&s.type.defaultProps)var l=s.type.defaultProps;for(c in e)x2.call(e,c)&&!y2.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=t;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:yv,type:s.type,key:r,ref:i,props:n,_owner:o}};Le.createContext=function(s){return s={$$typeof:mF,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:fF,_context:s},s.Consumer=s};Le.createElement=b2;Le.createFactory=function(s){var e=b2.bind(null,s);return e.type=s,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(s){return{$$typeof:pF,render:s}};Le.isValidElement=_N;Le.lazy=function(s){return{$$typeof:xF,_payload:{_status:-1,_result:s},_init:jF}};Le.memo=function(s,e){return{$$typeof:vF,type:s,compare:e===void 0?null:e}};Le.startTransition=function(s){var e=Ix.transition;Ix.transition={};try{s()}finally{Ix.transition=e}};Le.unstable_act=w2;Le.useCallback=function(s,e){return nn.current.useCallback(s,e)};Le.useContext=function(s){return nn.current.useContext(s)};Le.useDebugValue=function(){};Le.useDeferredValue=function(s){return nn.current.useDeferredValue(s)};Le.useEffect=function(s,e){return nn.current.useEffect(s,e)};Le.useId=function(){return nn.current.useId()};Le.useImperativeHandle=function(s,e,t){return nn.current.useImperativeHandle(s,e,t)};Le.useInsertionEffect=function(s,e){return nn.current.useInsertionEffect(s,e)};Le.useLayoutEffect=function(s,e){return nn.current.useLayoutEffect(s,e)};Le.useMemo=function(s,e){return nn.current.useMemo(s,e)};Le.useReducer=function(s,e,t){return nn.current.useReducer(s,e,t)};Le.useRef=function(s){return nn.current.useRef(s)};Le.useState=function(s){return nn.current.useState(s)};Le.useSyncExternalStore=function(s,e,t){return nn.current.useSyncExternalStore(s,e,t)};Le.useTransition=function(){return nn.current.useTransition()};Le.version="18.3.1";f2.exports=Le;var w=f2.exports;const te=u2(w),NN=oF({__proto__:null,default:te},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NF=w,SF=Symbol.for("react.element"),AF=Symbol.for("react.fragment"),EF=Object.prototype.hasOwnProperty,CF=NF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kF={key:!0,ref:!0,__self:!0,__source:!0};function j2(s,e,t){var n,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)EF.call(e,n)&&!kF.hasOwnProperty(n)&&(r[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:SF,type:s,key:i,ref:o,props:r,_owner:CF.current}}Xy.Fragment=AF;Xy.jsx=j2;Xy.jsxs=j2;h2.exports=Xy;var a=h2.exports,_2={exports:{}},er={},N2={exports:{}},S2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(D,R){var H=D.length;D.push(R);e:for(;0<H;){var X=H-1>>>1,B=D[X];if(0<r(B,R))D[X]=R,D[H]=B,H=X;else break e}}function t(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var R=D[0],H=D.pop();if(H!==R){D[0]=H;e:for(var X=0,B=D.length,V=B>>>1;X<V;){var J=2*(X+1)-1,ee=D[J],le=J+1,W=D[le];if(0>r(ee,H))le<B&&0>r(W,ee)?(D[X]=W,D[le]=H,X=le):(D[X]=ee,D[J]=H,X=J);else if(le<B&&0>r(W,H))D[X]=W,D[le]=H,X=le;else break e}}return R}function r(D,R){var H=D.sortIndex-R.sortIndex;return H!==0?H:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();s.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,m=3,p=!1,x=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(D){for(var R=t(d);R!==null;){if(R.callback===null)n(d);else if(R.startTime<=D)n(d),R.sortIndex=R.expirationTime,e(c,R);else break;R=t(d)}}function _(D){if(v=!1,j(D),!x)if(t(c)!==null)x=!0,$(S);else{var R=t(d);R!==null&&F(_,R.startTime-D)}}function S(D,R){x=!1,v&&(v=!1,g(P),P=-1),p=!0;var H=m;try{for(j(R),f=t(c);f!==null&&(!(f.expirationTime>R)||D&&!O());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var B=X(f.expirationTime<=R);R=s.unstable_now(),typeof B=="function"?f.callback=B:f===t(c)&&n(c),j(R)}else n(c);f=t(c)}if(f!==null)var V=!0;else{var J=t(d);J!==null&&F(_,J.startTime-R),V=!1}return V}finally{f=null,m=H,p=!1}}var E=!1,A=null,P=-1,T=5,I=-1;function O(){return!(s.unstable_now()-I<T)}function L(){if(A!==null){var D=s.unstable_now();I=D;var R=!0;try{R=A(!0,D)}finally{R?z():(E=!1,A=null)}}else E=!1}var z;if(typeof y=="function")z=function(){y(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=L,z=function(){U.postMessage(null)}}else z=function(){b(L,0)};function $(D){A=D,E||(E=!0,z())}function F(D,R){P=b(function(){D(s.unstable_now())},R)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(D){D.callback=null},s.unstable_continueExecution=function(){x||p||(x=!0,$(S))},s.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},s.unstable_getCurrentPriorityLevel=function(){return m},s.unstable_getFirstCallbackNode=function(){return t(c)},s.unstable_next=function(D){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var H=m;m=R;try{return D()}finally{m=H}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=m;m=D;try{return R()}finally{m=H}},s.unstable_scheduleCallback=function(D,R,H){var X=s.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?X+H:X):H=X,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=H+B,D={id:h++,callback:R,priorityLevel:D,startTime:H,expirationTime:B,sortIndex:-1},H>X?(D.sortIndex=H,e(d,D),t(c)===null&&D===t(d)&&(v?(g(P),P=-1):v=!0,F(_,H-X))):(D.sortIndex=B,e(c,D),x||p||(x=!0,$(S))),D},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(D){var R=m;return function(){var H=m;m=R;try{return D.apply(this,arguments)}finally{m=H}}}})(S2);N2.exports=S2;var PF=N2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TF=w,Qn=PF;function Q(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A2=new Set,mp={};function uu(s,e){Df(s,e),Df(s+"Capture",e)}function Df(s,e){for(mp[s]=e,s=0;s<e.length;s++)A2.add(e[s])}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m1=Object.prototype.hasOwnProperty,RF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QA={},JA={};function MF(s){return m1.call(JA,s)?!0:m1.call(QA,s)?!1:RF.test(s)?JA[s]=!0:(QA[s]=!0,!1)}function IF(s,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function DF(s,e,t,n){if(e===null||typeof e>"u"||IF(s,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(s,e,t,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=s,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ns={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Ns[s]=new rn(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];Ns[e]=new rn(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Ns[s]=new rn(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Ns[s]=new rn(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Ns[s]=new rn(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Ns[s]=new rn(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Ns[s]=new rn(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Ns[s]=new rn(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Ns[s]=new rn(s,5,!1,s.toLowerCase(),null,!1,!1)});var SN=/[\-:]([a-z])/g;function AN(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(SN,AN);Ns[e]=new rn(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(SN,AN);Ns[e]=new rn(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(SN,AN);Ns[e]=new rn(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Ns[s]=new rn(s,1,!1,s.toLowerCase(),null,!1,!1)});Ns.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Ns[s]=new rn(s,1,!1,s.toLowerCase(),null,!0,!0)});function EN(s,e,t,n){var r=Ns.hasOwnProperty(e)?Ns[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DF(e,t,r,n)&&(t=null),n||r===null?MF(e)&&(t===null?s.removeAttribute(e):s.setAttribute(e,""+t)):r.mustUseProperty?s[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?s.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?s.setAttributeNS(n,e,t):s.setAttribute(e,t))))}var po=TF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yv=Symbol.for("react.element"),Wu=Symbol.for("react.portal"),Vu=Symbol.for("react.fragment"),CN=Symbol.for("react.strict_mode"),p1=Symbol.for("react.profiler"),E2=Symbol.for("react.provider"),C2=Symbol.for("react.context"),kN=Symbol.for("react.forward_ref"),g1=Symbol.for("react.suspense"),v1=Symbol.for("react.suspense_list"),PN=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),k2=Symbol.for("react.offscreen"),ZA=Symbol.iterator;function hm(s){return s===null||typeof s!="object"?null:(s=ZA&&s[ZA]||s["@@iterator"],typeof s=="function"?s:null)}var _t=Object.assign,Jb;function Cm(s){if(Jb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Jb=e&&e[1]||""}return`
`+Jb+s}var Zb=!1;function ew(s,e){if(!s||Zb)return"";Zb=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(s,[],e)}else{try{e.call()}catch(d){n=d}s.call(e.prototype)}else{try{throw Error()}catch(d){n=d}s()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=o&&0<=l);break}}}finally{Zb=!1,Error.prepareStackTrace=t}return(s=s?s.displayName||s.name:"")?Cm(s):""}function OF(s){switch(s.tag){case 5:return Cm(s.type);case 16:return Cm("Lazy");case 13:return Cm("Suspense");case 19:return Cm("SuspenseList");case 0:case 2:case 15:return s=ew(s.type,!1),s;case 11:return s=ew(s.type.render,!1),s;case 1:return s=ew(s.type,!0),s;default:return""}}function x1(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Vu:return"Fragment";case Wu:return"Portal";case p1:return"Profiler";case CN:return"StrictMode";case g1:return"Suspense";case v1:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case C2:return(s.displayName||"Context")+".Consumer";case E2:return(s._context.displayName||"Context")+".Provider";case kN:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case PN:return e=s.displayName||null,e!==null?e:x1(s.type)||"Memo";case Ro:e=s._payload,s=s._init;try{return x1(s(e))}catch{}}return null}function LF(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return x1(e);case 8:return e===CN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wl(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function P2(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FF(s){var e=P2(s)?"checked":"value",t=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),n=""+s[e];if(!s.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(s,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Xv(s){s._valueTracker||(s._valueTracker=FF(s))}function T2(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return s&&(n=P2(s)?s.checked?"true":"false":s.value),s=n,s!==t?(e.setValue(s),!0):!1}function T0(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function y1(s,e){var t=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??s._wrapperState.initialChecked})}function eE(s,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Wl(e.value!=null?e.value:t),s._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R2(s,e){e=e.checked,e!=null&&EN(s,"checked",e,!1)}function b1(s,e){R2(s,e);var t=Wl(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+t):s.value!==""+t&&(s.value=""+t);else if(n==="submit"||n==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?w1(s,e.type,t):e.hasOwnProperty("defaultValue")&&w1(s,e.type,Wl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function tE(s,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,t||e===s.value||(s.value=e),s.defaultValue=e}t=s.name,t!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,t!==""&&(s.name=t)}function w1(s,e,t){(e!=="number"||T0(s.ownerDocument)!==s)&&(t==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+t&&(s.defaultValue=""+t))}var km=Array.isArray;function ih(s,e,t,n){if(s=s.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<s.length;t++)r=e.hasOwnProperty("$"+s[t].value),s[t].selected!==r&&(s[t].selected=r),r&&n&&(s[t].defaultSelected=!0)}else{for(t=""+Wl(t),e=null,r=0;r<s.length;r++){if(s[r].value===t){s[r].selected=!0,n&&(s[r].defaultSelected=!0);return}e!==null||s[r].disabled||(e=s[r])}e!==null&&(e.selected=!0)}}function j1(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function sE(s,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Q(92));if(km(t)){if(1<t.length)throw Error(Q(93));t=t[0]}e=t}e==null&&(e=""),t=e}s._wrapperState={initialValue:Wl(t)}}function M2(s,e){var t=Wl(e.value),n=Wl(e.defaultValue);t!=null&&(t=""+t,t!==s.value&&(s.value=t),e.defaultValue==null&&s.defaultValue!==t&&(s.defaultValue=t)),n!=null&&(s.defaultValue=""+n)}function nE(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function I2(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _1(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?I2(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Qv,D2=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return s(e,t,n,r)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(Qv=Qv||document.createElement("div"),Qv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qv.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function pp(s,e){if(e){var t=s.firstChild;if(t&&t===s.lastChild&&t.nodeType===3){t.nodeValue=e;return}}s.textContent=e}var ep={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$F=["Webkit","ms","Moz","O"];Object.keys(ep).forEach(function(s){$F.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),ep[e]=ep[s]})});function O2(s,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ep.hasOwnProperty(s)&&ep[s]?(""+e).trim():e+"px"}function L2(s,e){s=s.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=O2(t,e[t],n);t==="float"&&(t="cssFloat"),n?s.setProperty(t,r):s[t]=r}}var zF=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N1(s,e){if(e){if(zF[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function S1(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A1=null;function TN(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var E1=null,ah=null,oh=null;function rE(s){if(s=jv(s)){if(typeof E1!="function")throw Error(Q(280));var e=s.stateNode;e&&(e=tb(e),E1(s.stateNode,s.type,e))}}function F2(s){ah?oh?oh.push(s):oh=[s]:ah=s}function $2(){if(ah){var s=ah,e=oh;if(oh=ah=null,rE(s),e)for(s=0;s<e.length;s++)rE(e[s])}}function z2(s,e){return s(e)}function B2(){}var tw=!1;function H2(s,e,t){if(tw)return s(e,t);tw=!0;try{return z2(s,e,t)}finally{tw=!1,(ah!==null||oh!==null)&&(B2(),$2())}}function gp(s,e){var t=s.stateNode;if(t===null)return null;var n=tb(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break e;default:s=!1}if(s)return null;if(t&&typeof t!="function")throw Error(Q(231,e,typeof t));return t}var C1=!1;if(oo)try{var fm={};Object.defineProperty(fm,"passive",{get:function(){C1=!0}}),window.addEventListener("test",fm,fm),window.removeEventListener("test",fm,fm)}catch{C1=!1}function BF(s,e,t,n,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var tp=!1,R0=null,M0=!1,k1=null,HF={onError:function(s){tp=!0,R0=s}};function UF(s,e,t,n,r,i,o,l,c){tp=!1,R0=null,BF.apply(HF,arguments)}function WF(s,e,t,n,r,i,o,l,c){if(UF.apply(this,arguments),tp){if(tp){var d=R0;tp=!1,R0=null}else throw Error(Q(198));M0||(M0=!0,k1=d)}}function hu(s){var e=s,t=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(t=e.return),s=e.return;while(s)}return e.tag===3?t:null}function U2(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function iE(s){if(hu(s)!==s)throw Error(Q(188))}function VF(s){var e=s.alternate;if(!e){if(e=hu(s),e===null)throw Error(Q(188));return e!==s?null:s}for(var t=s,n=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return iE(r),s;if(i===n)return iE(r),e;i=i.sibling}throw Error(Q(188))}if(t.return!==n.return)t=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===t){o=!0,t=r,n=i;break}if(l===n){o=!0,n=r,t=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===t){o=!0,t=i,n=r;break}if(l===n){o=!0,n=i,t=r;break}l=l.sibling}if(!o)throw Error(Q(189))}}if(t.alternate!==n)throw Error(Q(190))}if(t.tag!==3)throw Error(Q(188));return t.stateNode.current===t?s:e}function W2(s){return s=VF(s),s!==null?V2(s):null}function V2(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=V2(s);if(e!==null)return e;s=s.sibling}return null}var q2=Qn.unstable_scheduleCallback,aE=Qn.unstable_cancelCallback,qF=Qn.unstable_shouldYield,GF=Qn.unstable_requestPaint,Rt=Qn.unstable_now,KF=Qn.unstable_getCurrentPriorityLevel,RN=Qn.unstable_ImmediatePriority,G2=Qn.unstable_UserBlockingPriority,I0=Qn.unstable_NormalPriority,YF=Qn.unstable_LowPriority,K2=Qn.unstable_IdlePriority,Qy=null,Yi=null;function XF(s){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(Qy,s,void 0,(s.current.flags&128)===128)}catch{}}var si=Math.clz32?Math.clz32:ZF,QF=Math.log,JF=Math.LN2;function ZF(s){return s>>>=0,s===0?32:31-(QF(s)/JF|0)|0}var Jv=64,Zv=4194304;function Pm(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function D0(s,e){var t=s.pendingLanes;if(t===0)return 0;var n=0,r=s.suspendedLanes,i=s.pingedLanes,o=t&268435455;if(o!==0){var l=o&~r;l!==0?n=Pm(l):(i&=o,i!==0&&(n=Pm(i)))}else o=t&~r,o!==0?n=Pm(o):i!==0&&(n=Pm(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=t&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=n;0<e;)t=31-si(e),r=1<<t,n|=s[t],e&=~r;return n}function e3(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t3(s,e){for(var t=s.suspendedLanes,n=s.pingedLanes,r=s.expirationTimes,i=s.pendingLanes;0<i;){var o=31-si(i),l=1<<o,c=r[o];c===-1?(!(l&t)||l&n)&&(r[o]=e3(l,e)):c<=e&&(s.expiredLanes|=l),i&=~l}}function P1(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Y2(){var s=Jv;return Jv<<=1,!(Jv&4194240)&&(Jv=64),s}function sw(s){for(var e=[],t=0;31>t;t++)e.push(s);return e}function bv(s,e,t){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-si(e),s[e]=t}function s3(s,e){var t=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var n=s.eventTimes;for(s=s.expirationTimes;0<t;){var r=31-si(t),i=1<<r;e[r]=0,n[r]=-1,s[r]=-1,t&=~i}}function MN(s,e){var t=s.entangledLanes|=e;for(s=s.entanglements;t;){var n=31-si(t),r=1<<n;r&e|s[n]&e&&(s[n]|=e),t&=~r}}var et=0;function X2(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Q2,IN,J2,Z2,eP,T1=!1,ex=[],Dl=null,Ol=null,Ll=null,vp=new Map,xp=new Map,Do=[],n3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oE(s,e){switch(s){case"focusin":case"focusout":Dl=null;break;case"dragenter":case"dragleave":Ol=null;break;case"mouseover":case"mouseout":Ll=null;break;case"pointerover":case"pointerout":vp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xp.delete(e.pointerId)}}function mm(s,e,t,n,r,i){return s===null||s.nativeEvent!==i?(s={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=jv(e),e!==null&&IN(e)),s):(s.eventSystemFlags|=n,e=s.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),s)}function r3(s,e,t,n,r){switch(e){case"focusin":return Dl=mm(Dl,s,e,t,n,r),!0;case"dragenter":return Ol=mm(Ol,s,e,t,n,r),!0;case"mouseover":return Ll=mm(Ll,s,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return vp.set(i,mm(vp.get(i)||null,s,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,xp.set(i,mm(xp.get(i)||null,s,e,t,n,r)),!0}return!1}function tP(s){var e=kc(s.target);if(e!==null){var t=hu(e);if(t!==null){if(e=t.tag,e===13){if(e=U2(t),e!==null){s.blockedOn=e,eP(s.priority,function(){J2(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){s.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Dx(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var t=R1(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t===null){t=s.nativeEvent;var n=new t.constructor(t.type,t);A1=n,t.target.dispatchEvent(n),A1=null}else return e=jv(t),e!==null&&IN(e),s.blockedOn=t,!1;e.shift()}return!0}function lE(s,e,t){Dx(s)&&t.delete(e)}function i3(){T1=!1,Dl!==null&&Dx(Dl)&&(Dl=null),Ol!==null&&Dx(Ol)&&(Ol=null),Ll!==null&&Dx(Ll)&&(Ll=null),vp.forEach(lE),xp.forEach(lE)}function pm(s,e){s.blockedOn===e&&(s.blockedOn=null,T1||(T1=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,i3)))}function yp(s){function e(r){return pm(r,s)}if(0<ex.length){pm(ex[0],s);for(var t=1;t<ex.length;t++){var n=ex[t];n.blockedOn===s&&(n.blockedOn=null)}}for(Dl!==null&&pm(Dl,s),Ol!==null&&pm(Ol,s),Ll!==null&&pm(Ll,s),vp.forEach(e),xp.forEach(e),t=0;t<Do.length;t++)n=Do[t],n.blockedOn===s&&(n.blockedOn=null);for(;0<Do.length&&(t=Do[0],t.blockedOn===null);)tP(t),t.blockedOn===null&&Do.shift()}var lh=po.ReactCurrentBatchConfig,O0=!0;function a3(s,e,t,n){var r=et,i=lh.transition;lh.transition=null;try{et=1,DN(s,e,t,n)}finally{et=r,lh.transition=i}}function o3(s,e,t,n){var r=et,i=lh.transition;lh.transition=null;try{et=4,DN(s,e,t,n)}finally{et=r,lh.transition=i}}function DN(s,e,t,n){if(O0){var r=R1(s,e,t,n);if(r===null)hw(s,e,n,L0,t),oE(s,n);else if(r3(r,s,e,t,n))n.stopPropagation();else if(oE(s,n),e&4&&-1<n3.indexOf(s)){for(;r!==null;){var i=jv(r);if(i!==null&&Q2(i),i=R1(s,e,t,n),i===null&&hw(s,e,n,L0,t),i===r)break;r=i}r!==null&&n.stopPropagation()}else hw(s,e,n,null,t)}}var L0=null;function R1(s,e,t,n){if(L0=null,s=TN(n),s=kc(s),s!==null)if(e=hu(s),e===null)s=null;else if(t=e.tag,t===13){if(s=U2(e),s!==null)return s;s=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return L0=s,null}function sP(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KF()){case RN:return 1;case G2:return 4;case I0:case YF:return 16;case K2:return 536870912;default:return 16}default:return 16}}var Rl=null,ON=null,Ox=null;function nP(){if(Ox)return Ox;var s,e=ON,t=e.length,n,r="value"in Rl?Rl.value:Rl.textContent,i=r.length;for(s=0;s<t&&e[s]===r[s];s++);var o=t-s;for(n=1;n<=o&&e[t-n]===r[i-n];n++);return Ox=r.slice(s,1<n?1-n:void 0)}function Lx(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function tx(){return!0}function cE(){return!1}function tr(s){function e(t,n,r,i,o){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in s)s.hasOwnProperty(l)&&(t=s[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?tx:cE,this.isPropagationStopped=cE,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tx)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tx)},persist:function(){},isPersistent:tx}),e}var em={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LN=tr(em),wv=_t({},em,{view:0,detail:0}),l3=tr(wv),nw,rw,gm,Jy=_t({},wv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FN,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==gm&&(gm&&s.type==="mousemove"?(nw=s.screenX-gm.screenX,rw=s.screenY-gm.screenY):rw=nw=0,gm=s),nw)},movementY:function(s){return"movementY"in s?s.movementY:rw}}),dE=tr(Jy),c3=_t({},Jy,{dataTransfer:0}),d3=tr(c3),u3=_t({},wv,{relatedTarget:0}),iw=tr(u3),h3=_t({},em,{animationName:0,elapsedTime:0,pseudoElement:0}),f3=tr(h3),m3=_t({},em,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),p3=tr(m3),g3=_t({},em,{data:0}),uE=tr(g3),v3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},x3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function b3(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=y3[s])?!!e[s]:!1}function FN(){return b3}var w3=_t({},wv,{key:function(s){if(s.key){var e=v3[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=Lx(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?x3[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FN,charCode:function(s){return s.type==="keypress"?Lx(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lx(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),j3=tr(w3),_3=_t({},Jy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hE=tr(_3),N3=_t({},wv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FN}),S3=tr(N3),A3=_t({},em,{propertyName:0,elapsedTime:0,pseudoElement:0}),E3=tr(A3),C3=_t({},Jy,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),k3=tr(C3),P3=[9,13,27,32],$N=oo&&"CompositionEvent"in window,sp=null;oo&&"documentMode"in document&&(sp=document.documentMode);var T3=oo&&"TextEvent"in window&&!sp,rP=oo&&(!$N||sp&&8<sp&&11>=sp),fE=" ",mE=!1;function iP(s,e){switch(s){case"keyup":return P3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aP(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qu=!1;function R3(s,e){switch(s){case"compositionend":return aP(e);case"keypress":return e.which!==32?null:(mE=!0,fE);case"textInput":return s=e.data,s===fE&&mE?null:s;default:return null}}function M3(s,e){if(qu)return s==="compositionend"||!$N&&iP(s,e)?(s=nP(),Ox=ON=Rl=null,qu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rP&&e.locale!=="ko"?null:e.data;default:return null}}var I3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pE(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!I3[s.type]:e==="textarea"}function oP(s,e,t,n){F2(n),e=F0(e,"onChange"),0<e.length&&(t=new LN("onChange","change",null,t,n),s.push({event:t,listeners:e}))}var np=null,bp=null;function D3(s){xP(s,0)}function Zy(s){var e=Yu(s);if(T2(e))return s}function O3(s,e){if(s==="change")return e}var lP=!1;if(oo){var aw;if(oo){var ow="oninput"in document;if(!ow){var gE=document.createElement("div");gE.setAttribute("oninput","return;"),ow=typeof gE.oninput=="function"}aw=ow}else aw=!1;lP=aw&&(!document.documentMode||9<document.documentMode)}function vE(){np&&(np.detachEvent("onpropertychange",cP),bp=np=null)}function cP(s){if(s.propertyName==="value"&&Zy(bp)){var e=[];oP(e,bp,s,TN(s)),H2(D3,e)}}function L3(s,e,t){s==="focusin"?(vE(),np=e,bp=t,np.attachEvent("onpropertychange",cP)):s==="focusout"&&vE()}function F3(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Zy(bp)}function $3(s,e){if(s==="click")return Zy(e)}function z3(s,e){if(s==="input"||s==="change")return Zy(e)}function B3(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var ii=typeof Object.is=="function"?Object.is:B3;function wp(s,e){if(ii(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var t=Object.keys(s),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!m1.call(e,r)||!ii(s[r],e[r]))return!1}return!0}function xE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function yE(s,e){var t=xE(s);s=0;for(var n;t;){if(t.nodeType===3){if(n=s+t.textContent.length,s<=e&&n>=e)return{node:t,offset:e-s};s=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=xE(t)}}function dP(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?dP(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function uP(){for(var s=window,e=T0();e instanceof s.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)s=e.contentWindow;else break;e=T0(s.document)}return e}function zN(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function H3(s){var e=uP(),t=s.focusedElem,n=s.selectionRange;if(e!==t&&t&&t.ownerDocument&&dP(t.ownerDocument.documentElement,t)){if(n!==null&&zN(t)){if(e=n.start,s=n.end,s===void 0&&(s=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(s,t.value.length);else if(s=(e=t.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var r=t.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!s.extend&&i>n&&(r=n,n=i,i=r),r=yE(t,i);var o=yE(t,n);r&&o&&(s.rangeCount!==1||s.anchorNode!==r.node||s.anchorOffset!==r.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),s.removeAllRanges(),i>n?(s.addRange(e),s.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),s.addRange(e)))}}for(e=[],s=t;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)s=e[t],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var U3=oo&&"documentMode"in document&&11>=document.documentMode,Gu=null,M1=null,rp=null,I1=!1;function bE(s,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;I1||Gu==null||Gu!==T0(n)||(n=Gu,"selectionStart"in n&&zN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),rp&&wp(rp,n)||(rp=n,n=F0(M1,"onSelect"),0<n.length&&(e=new LN("onSelect","select",null,e,t),s.push({event:e,listeners:n}),e.target=Gu)))}function sx(s,e){var t={};return t[s.toLowerCase()]=e.toLowerCase(),t["Webkit"+s]="webkit"+e,t["Moz"+s]="moz"+e,t}var Ku={animationend:sx("Animation","AnimationEnd"),animationiteration:sx("Animation","AnimationIteration"),animationstart:sx("Animation","AnimationStart"),transitionend:sx("Transition","TransitionEnd")},lw={},hP={};oo&&(hP=document.createElement("div").style,"AnimationEvent"in window||(delete Ku.animationend.animation,delete Ku.animationiteration.animation,delete Ku.animationstart.animation),"TransitionEvent"in window||delete Ku.transitionend.transition);function eb(s){if(lw[s])return lw[s];if(!Ku[s])return s;var e=Ku[s],t;for(t in e)if(e.hasOwnProperty(t)&&t in hP)return lw[s]=e[t];return s}var fP=eb("animationend"),mP=eb("animationiteration"),pP=eb("animationstart"),gP=eb("transitionend"),vP=new Map,wE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nc(s,e){vP.set(s,e),uu(e,[s])}for(var cw=0;cw<wE.length;cw++){var dw=wE[cw],W3=dw.toLowerCase(),V3=dw[0].toUpperCase()+dw.slice(1);nc(W3,"on"+V3)}nc(fP,"onAnimationEnd");nc(mP,"onAnimationIteration");nc(pP,"onAnimationStart");nc("dblclick","onDoubleClick");nc("focusin","onFocus");nc("focusout","onBlur");nc(gP,"onTransitionEnd");Df("onMouseEnter",["mouseout","mouseover"]);Df("onMouseLeave",["mouseout","mouseover"]);Df("onPointerEnter",["pointerout","pointerover"]);Df("onPointerLeave",["pointerout","pointerover"]);uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tm));function jE(s,e,t){var n=s.type||"unknown-event";s.currentTarget=t,WF(n,e,void 0,s),s.currentTarget=null}function xP(s,e){e=(e&4)!==0;for(var t=0;t<s.length;t++){var n=s[t],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;jE(r,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;jE(r,l,d),i=c}}}if(M0)throw s=k1,M0=!1,k1=null,s}function ut(s,e){var t=e[$1];t===void 0&&(t=e[$1]=new Set);var n=s+"__bubble";t.has(n)||(yP(e,s,2,!1),t.add(n))}function uw(s,e,t){var n=0;e&&(n|=4),yP(t,s,n,e)}var nx="_reactListening"+Math.random().toString(36).slice(2);function jp(s){if(!s[nx]){s[nx]=!0,A2.forEach(function(t){t!=="selectionchange"&&(q3.has(t)||uw(t,!1,s),uw(t,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[nx]||(e[nx]=!0,uw("selectionchange",!1,e))}}function yP(s,e,t,n){switch(sP(e)){case 1:var r=a3;break;case 4:r=o3;break;default:r=DN}t=r.bind(null,e,t,s),r=void 0,!C1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?s.addEventListener(e,t,{capture:!0,passive:r}):s.addEventListener(e,t,!0):r!==void 0?s.addEventListener(e,t,{passive:r}):s.addEventListener(e,t,!1)}function hw(s,e,t,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=kc(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}H2(function(){var d=i,h=TN(t),f=[];e:{var m=vP.get(s);if(m!==void 0){var p=LN,x=s;switch(s){case"keypress":if(Lx(t)===0)break e;case"keydown":case"keyup":p=j3;break;case"focusin":x="focus",p=iw;break;case"focusout":x="blur",p=iw;break;case"beforeblur":case"afterblur":p=iw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=d3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=S3;break;case fP:case mP:case pP:p=f3;break;case gP:p=E3;break;case"scroll":p=l3;break;case"wheel":p=k3;break;case"copy":case"cut":case"paste":p=p3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=hE}var v=(e&4)!==0,b=!v&&s==="scroll",g=v?m!==null?m+"Capture":null:m;v=[];for(var y=d,j;y!==null;){j=y;var _=j.stateNode;if(j.tag===5&&_!==null&&(j=_,g!==null&&(_=gp(y,g),_!=null&&v.push(_p(y,_,j)))),b)break;y=y.return}0<v.length&&(m=new p(m,x,null,t,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=s==="mouseover"||s==="pointerover",p=s==="mouseout"||s==="pointerout",m&&t!==A1&&(x=t.relatedTarget||t.fromElement)&&(kc(x)||x[lo]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=t.relatedTarget||t.toElement,p=d,x=x?kc(x):null,x!==null&&(b=hu(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=d),p!==x)){if(v=dE,_="onMouseLeave",g="onMouseEnter",y="mouse",(s==="pointerout"||s==="pointerover")&&(v=hE,_="onPointerLeave",g="onPointerEnter",y="pointer"),b=p==null?m:Yu(p),j=x==null?m:Yu(x),m=new v(_,y+"leave",p,t,h),m.target=b,m.relatedTarget=j,_=null,kc(h)===d&&(v=new v(g,y+"enter",x,t,h),v.target=j,v.relatedTarget=b,_=v),b=_,p&&x)t:{for(v=p,g=x,y=0,j=v;j;j=ju(j))y++;for(j=0,_=g;_;_=ju(_))j++;for(;0<y-j;)v=ju(v),y--;for(;0<j-y;)g=ju(g),j--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=ju(v),g=ju(g)}v=null}else v=null;p!==null&&_E(f,m,p,v,!1),x!==null&&b!==null&&_E(f,b,x,v,!0)}}e:{if(m=d?Yu(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=O3;else if(pE(m))if(lP)S=z3;else{S=F3;var E=L3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=$3);if(S&&(S=S(s,d))){oP(f,S,t,h);break e}E&&E(s,m,d),s==="focusout"&&(E=m._wrapperState)&&E.controlled&&m.type==="number"&&w1(m,"number",m.value)}switch(E=d?Yu(d):window,s){case"focusin":(pE(E)||E.contentEditable==="true")&&(Gu=E,M1=d,rp=null);break;case"focusout":rp=M1=Gu=null;break;case"mousedown":I1=!0;break;case"contextmenu":case"mouseup":case"dragend":I1=!1,bE(f,t,h);break;case"selectionchange":if(U3)break;case"keydown":case"keyup":bE(f,t,h)}var A;if($N)e:{switch(s){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else qu?iP(s,t)&&(P="onCompositionEnd"):s==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(rP&&t.locale!=="ko"&&(qu||P!=="onCompositionStart"?P==="onCompositionEnd"&&qu&&(A=nP()):(Rl=h,ON="value"in Rl?Rl.value:Rl.textContent,qu=!0)),E=F0(d,P),0<E.length&&(P=new uE(P,s,null,t,h),f.push({event:P,listeners:E}),A?P.data=A:(A=aP(t),A!==null&&(P.data=A)))),(A=T3?R3(s,t):M3(s,t))&&(d=F0(d,"onBeforeInput"),0<d.length&&(h=new uE("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=A))}xP(f,e)})}function _p(s,e,t){return{instance:s,listener:e,currentTarget:t}}function F0(s,e){for(var t=e+"Capture",n=[];s!==null;){var r=s,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=gp(s,t),i!=null&&n.unshift(_p(s,i,r)),i=gp(s,e),i!=null&&n.push(_p(s,i,r))),s=s.return}return n}function ju(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function _E(s,e,t,n,r){for(var i=e._reactName,o=[];t!==null&&t!==n;){var l=t,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=gp(t,i),c!=null&&o.unshift(_p(t,c,l))):r||(c=gp(t,i),c!=null&&o.push(_p(t,c,l)))),t=t.return}o.length!==0&&s.push({event:e,listeners:o})}var G3=/\r\n?/g,K3=/\u0000|\uFFFD/g;function NE(s){return(typeof s=="string"?s:""+s).replace(G3,`
`).replace(K3,"")}function rx(s,e,t){if(e=NE(e),NE(s)!==e&&t)throw Error(Q(425))}function $0(){}var D1=null,O1=null;function L1(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var F1=typeof setTimeout=="function"?setTimeout:void 0,Y3=typeof clearTimeout=="function"?clearTimeout:void 0,SE=typeof Promise=="function"?Promise:void 0,X3=typeof queueMicrotask=="function"?queueMicrotask:typeof SE<"u"?function(s){return SE.resolve(null).then(s).catch(Q3)}:F1;function Q3(s){setTimeout(function(){throw s})}function fw(s,e){var t=e,n=0;do{var r=t.nextSibling;if(s.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){s.removeChild(r),yp(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);yp(e)}function Fl(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function AE(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return s;e--}else t==="/$"&&e++}s=s.previousSibling}return null}var tm=Math.random().toString(36).slice(2),Hi="__reactFiber$"+tm,Np="__reactProps$"+tm,lo="__reactContainer$"+tm,$1="__reactEvents$"+tm,J3="__reactListeners$"+tm,Z3="__reactHandles$"+tm;function kc(s){var e=s[Hi];if(e)return e;for(var t=s.parentNode;t;){if(e=t[lo]||t[Hi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(s=AE(s);s!==null;){if(t=s[Hi])return t;s=AE(s)}return e}s=t,t=s.parentNode}return null}function jv(s){return s=s[Hi]||s[lo],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Yu(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(Q(33))}function tb(s){return s[Np]||null}var z1=[],Xu=-1;function rc(s){return{current:s}}function ht(s){0>Xu||(s.current=z1[Xu],z1[Xu]=null,Xu--)}function ot(s,e){Xu++,z1[Xu]=s.current,s.current=e}var Vl={},Os=rc(Vl),bn=rc(!1),Vd=Vl;function Of(s,e){var t=s.type.contextTypes;if(!t)return Vl;var n=s.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=r),r}function wn(s){return s=s.childContextTypes,s!=null}function z0(){ht(bn),ht(Os)}function EE(s,e,t){if(Os.current!==Vl)throw Error(Q(168));ot(Os,e),ot(bn,t)}function bP(s,e,t){var n=s.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(Q(108,LF(s)||"Unknown",r));return _t({},t,n)}function B0(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vl,Vd=Os.current,ot(Os,s),ot(bn,bn.current),!0}function CE(s,e,t){var n=s.stateNode;if(!n)throw Error(Q(169));t?(s=bP(s,e,Vd),n.__reactInternalMemoizedMergedChildContext=s,ht(bn),ht(Os),ot(Os,s)):ht(bn),ot(bn,t)}var wa=null,sb=!1,mw=!1;function wP(s){wa===null?wa=[s]:wa.push(s)}function e5(s){sb=!0,wP(s)}function ic(){if(!mw&&wa!==null){mw=!0;var s=0,e=et;try{var t=wa;for(et=1;s<t.length;s++){var n=t[s];do n=n(!0);while(n!==null)}wa=null,sb=!1}catch(r){throw wa!==null&&(wa=wa.slice(s+1)),q2(RN,ic),r}finally{et=e,mw=!1}}return null}var Qu=[],Ju=0,H0=null,U0=0,fr=[],mr=0,qd=null,so=1,no="";function xc(s,e){Qu[Ju++]=U0,Qu[Ju++]=H0,H0=s,U0=e}function jP(s,e,t){fr[mr++]=so,fr[mr++]=no,fr[mr++]=qd,qd=s;var n=so;s=no;var r=32-si(n)-1;n&=~(1<<r),t+=1;var i=32-si(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,so=1<<32-si(e)+r|t<<r|n,no=i+s}else so=1<<i|t<<r|n,no=s}function BN(s){s.return!==null&&(xc(s,1),jP(s,1,0))}function HN(s){for(;s===H0;)H0=Qu[--Ju],Qu[Ju]=null,U0=Qu[--Ju],Qu[Ju]=null;for(;s===qd;)qd=fr[--mr],fr[mr]=null,no=fr[--mr],fr[mr]=null,so=fr[--mr],fr[mr]=null}var Kn=null,Gn=null,xt=!1,Qr=null;function _P(s,e){var t=gr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=s,e=s.deletions,e===null?(s.deletions=[t],s.flags|=16):e.push(t)}function kE(s,e){switch(s.tag){case 5:var t=s.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,Kn=s,Gn=Fl(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,Kn=s,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=qd!==null?{id:so,overflow:no}:null,s.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=gr(18,null,null,0),t.stateNode=e,t.return=s,s.child=t,Kn=s,Gn=null,!0):!1;default:return!1}}function B1(s){return(s.mode&1)!==0&&(s.flags&128)===0}function H1(s){if(xt){var e=Gn;if(e){var t=e;if(!kE(s,e)){if(B1(s))throw Error(Q(418));e=Fl(t.nextSibling);var n=Kn;e&&kE(s,e)?_P(n,t):(s.flags=s.flags&-4097|2,xt=!1,Kn=s)}}else{if(B1(s))throw Error(Q(418));s.flags=s.flags&-4097|2,xt=!1,Kn=s}}}function PE(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Kn=s}function ix(s){if(s!==Kn)return!1;if(!xt)return PE(s),xt=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!L1(s.type,s.memoizedProps)),e&&(e=Gn)){if(B1(s))throw NP(),Error(Q(418));for(;e;)_P(s,e),e=Fl(e.nextSibling)}if(PE(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="/$"){if(e===0){Gn=Fl(s.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}s=s.nextSibling}Gn=null}}else Gn=Kn?Fl(s.stateNode.nextSibling):null;return!0}function NP(){for(var s=Gn;s;)s=Fl(s.nextSibling)}function Lf(){Gn=Kn=null,xt=!1}function UN(s){Qr===null?Qr=[s]:Qr.push(s)}var t5=po.ReactCurrentBatchConfig;function vm(s,e,t){if(s=t.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Q(309));var n=t.stateNode}if(!n)throw Error(Q(147,s));var r=n,i=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof s!="string")throw Error(Q(284));if(!t._owner)throw Error(Q(290,s))}return s}function ax(s,e){throw s=Object.prototype.toString.call(e),Error(Q(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function TE(s){var e=s._init;return e(s._payload)}function SP(s){function e(g,y){if(s){var j=g.deletions;j===null?(g.deletions=[y],g.flags|=16):j.push(y)}}function t(g,y){if(!s)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=Hl(g,y),g.index=0,g.sibling=null,g}function i(g,y,j){return g.index=j,s?(j=g.alternate,j!==null?(j=j.index,j<y?(g.flags|=2,y):j):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return s&&g.alternate===null&&(g.flags|=2),g}function l(g,y,j,_){return y===null||y.tag!==6?(y=ww(j,g.mode,_),y.return=g,y):(y=r(y,j),y.return=g,y)}function c(g,y,j,_){var S=j.type;return S===Vu?h(g,y,j.props.children,_,j.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ro&&TE(S)===y.type)?(_=r(y,j.props),_.ref=vm(g,y,j),_.return=g,_):(_=Wx(j.type,j.key,j.props,null,g.mode,_),_.ref=vm(g,y,j),_.return=g,_)}function d(g,y,j,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==j.containerInfo||y.stateNode.implementation!==j.implementation?(y=jw(j,g.mode,_),y.return=g,y):(y=r(y,j.children||[]),y.return=g,y)}function h(g,y,j,_,S){return y===null||y.tag!==7?(y=Wd(j,g.mode,_,S),y.return=g,y):(y=r(y,j),y.return=g,y)}function f(g,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ww(""+y,g.mode,j),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Yv:return j=Wx(y.type,y.key,y.props,null,g.mode,j),j.ref=vm(g,null,y),j.return=g,j;case Wu:return y=jw(y,g.mode,j),y.return=g,y;case Ro:var _=y._init;return f(g,_(y._payload),j)}if(km(y)||hm(y))return y=Wd(y,g.mode,j,null),y.return=g,y;ax(g,y)}return null}function m(g,y,j,_){var S=y!==null?y.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return S!==null?null:l(g,y,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Yv:return j.key===S?c(g,y,j,_):null;case Wu:return j.key===S?d(g,y,j,_):null;case Ro:return S=j._init,m(g,y,S(j._payload),_)}if(km(j)||hm(j))return S!==null?null:h(g,y,j,_,null);ax(g,j)}return null}function p(g,y,j,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(j)||null,l(y,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Yv:return g=g.get(_.key===null?j:_.key)||null,c(y,g,_,S);case Wu:return g=g.get(_.key===null?j:_.key)||null,d(y,g,_,S);case Ro:var E=_._init;return p(g,y,j,E(_._payload),S)}if(km(_)||hm(_))return g=g.get(j)||null,h(y,g,_,S,null);ax(y,_)}return null}function x(g,y,j,_){for(var S=null,E=null,A=y,P=y=0,T=null;A!==null&&P<j.length;P++){A.index>P?(T=A,A=null):T=A.sibling;var I=m(g,A,j[P],_);if(I===null){A===null&&(A=T);break}s&&A&&I.alternate===null&&e(g,A),y=i(I,y,P),E===null?S=I:E.sibling=I,E=I,A=T}if(P===j.length)return t(g,A),xt&&xc(g,P),S;if(A===null){for(;P<j.length;P++)A=f(g,j[P],_),A!==null&&(y=i(A,y,P),E===null?S=A:E.sibling=A,E=A);return xt&&xc(g,P),S}for(A=n(g,A);P<j.length;P++)T=p(A,g,P,j[P],_),T!==null&&(s&&T.alternate!==null&&A.delete(T.key===null?P:T.key),y=i(T,y,P),E===null?S=T:E.sibling=T,E=T);return s&&A.forEach(function(O){return e(g,O)}),xt&&xc(g,P),S}function v(g,y,j,_){var S=hm(j);if(typeof S!="function")throw Error(Q(150));if(j=S.call(j),j==null)throw Error(Q(151));for(var E=S=null,A=y,P=y=0,T=null,I=j.next();A!==null&&!I.done;P++,I=j.next()){A.index>P?(T=A,A=null):T=A.sibling;var O=m(g,A,I.value,_);if(O===null){A===null&&(A=T);break}s&&A&&O.alternate===null&&e(g,A),y=i(O,y,P),E===null?S=O:E.sibling=O,E=O,A=T}if(I.done)return t(g,A),xt&&xc(g,P),S;if(A===null){for(;!I.done;P++,I=j.next())I=f(g,I.value,_),I!==null&&(y=i(I,y,P),E===null?S=I:E.sibling=I,E=I);return xt&&xc(g,P),S}for(A=n(g,A);!I.done;P++,I=j.next())I=p(A,g,P,I.value,_),I!==null&&(s&&I.alternate!==null&&A.delete(I.key===null?P:I.key),y=i(I,y,P),E===null?S=I:E.sibling=I,E=I);return s&&A.forEach(function(L){return e(g,L)}),xt&&xc(g,P),S}function b(g,y,j,_){if(typeof j=="object"&&j!==null&&j.type===Vu&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Yv:e:{for(var S=j.key,E=y;E!==null;){if(E.key===S){if(S=j.type,S===Vu){if(E.tag===7){t(g,E.sibling),y=r(E,j.props.children),y.return=g,g=y;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ro&&TE(S)===E.type){t(g,E.sibling),y=r(E,j.props),y.ref=vm(g,E,j),y.return=g,g=y;break e}t(g,E);break}else e(g,E);E=E.sibling}j.type===Vu?(y=Wd(j.props.children,g.mode,_,j.key),y.return=g,g=y):(_=Wx(j.type,j.key,j.props,null,g.mode,_),_.ref=vm(g,y,j),_.return=g,g=_)}return o(g);case Wu:e:{for(E=j.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===j.containerInfo&&y.stateNode.implementation===j.implementation){t(g,y.sibling),y=r(y,j.children||[]),y.return=g,g=y;break e}else{t(g,y);break}else e(g,y);y=y.sibling}y=jw(j,g.mode,_),y.return=g,g=y}return o(g);case Ro:return E=j._init,b(g,y,E(j._payload),_)}if(km(j))return x(g,y,j,_);if(hm(j))return v(g,y,j,_);ax(g,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,y!==null&&y.tag===6?(t(g,y.sibling),y=r(y,j),y.return=g,g=y):(t(g,y),y=ww(j,g.mode,_),y.return=g,g=y),o(g)):t(g,y)}return b}var Ff=SP(!0),AP=SP(!1),W0=rc(null),V0=null,Zu=null,WN=null;function VN(){WN=Zu=V0=null}function qN(s){var e=W0.current;ht(W0),s._currentValue=e}function U1(s,e,t){for(;s!==null;){var n=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),s===t)break;s=s.return}}function ch(s,e){V0=s,WN=Zu=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(xn=!0),s.firstContext=null)}function wr(s){var e=s._currentValue;if(WN!==s)if(s={context:s,memoizedValue:e,next:null},Zu===null){if(V0===null)throw Error(Q(308));Zu=s,V0.dependencies={lanes:0,firstContext:s}}else Zu=Zu.next=s;return e}var Pc=null;function GN(s){Pc===null?Pc=[s]:Pc.push(s)}function EP(s,e,t,n){var r=e.interleaved;return r===null?(t.next=t,GN(e)):(t.next=r.next,r.next=t),e.interleaved=t,co(s,n)}function co(s,e){s.lanes|=e;var t=s.alternate;for(t!==null&&(t.lanes|=e),t=s,s=s.return;s!==null;)s.childLanes|=e,t=s.alternate,t!==null&&(t.childLanes|=e),t=s,s=s.return;return t.tag===3?t.stateNode:null}var Mo=!1;function KN(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CP(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ro(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function $l(s,e,t){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,Ue&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,co(s,t)}return r=n.interleaved,r===null?(e.next=e,GN(n)):(e.next=r.next,r.next=e),n.interleaved=e,co(s,t)}function Fx(s,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,MN(s,t)}}function RE(s,e){var t=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},s.updateQueue=t;return}s=t.lastBaseUpdate,s===null?t.firstBaseUpdate=e:s.next=e,t.lastBaseUpdate=e}function q0(s,e,t,n){var r=s.updateQueue;Mo=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=s.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;o=0,h=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=s,v=l;switch(m=e,p=t,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(p,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,m=typeof x=="function"?x.call(p,f,m):x,m==null)break e;f=_t({},f,m);break e;case 2:Mo=!0}}l.callback!==null&&l.lane!==0&&(s.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=f):h=h.next=p,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Kd|=o,s.lanes=o,s.memoizedState=f}}function ME(s,e,t){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var n=s[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(Q(191,r));r.call(n)}}}var _v={},Xi=rc(_v),Sp=rc(_v),Ap=rc(_v);function Tc(s){if(s===_v)throw Error(Q(174));return s}function YN(s,e){switch(ot(Ap,e),ot(Sp,s),ot(Xi,_v),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_1(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=_1(e,s)}ht(Xi),ot(Xi,e)}function $f(){ht(Xi),ht(Sp),ht(Ap)}function kP(s){Tc(Ap.current);var e=Tc(Xi.current),t=_1(e,s.type);e!==t&&(ot(Sp,s),ot(Xi,t))}function XN(s){Sp.current===s&&(ht(Xi),ht(Sp))}var wt=rc(0);function G0(s){for(var e=s;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pw=[];function QN(){for(var s=0;s<pw.length;s++)pw[s]._workInProgressVersionPrimary=null;pw.length=0}var $x=po.ReactCurrentDispatcher,gw=po.ReactCurrentBatchConfig,Gd=0,jt=null,Yt=null,os=null,K0=!1,ip=!1,Ep=0,s5=0;function Ss(){throw Error(Q(321))}function JN(s,e){if(e===null)return!1;for(var t=0;t<e.length&&t<s.length;t++)if(!ii(s[t],e[t]))return!1;return!0}function ZN(s,e,t,n,r,i){if(Gd=i,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$x.current=s===null||s.memoizedState===null?a5:o5,s=t(n,r),ip){i=0;do{if(ip=!1,Ep=0,25<=i)throw Error(Q(301));i+=1,os=Yt=null,e.updateQueue=null,$x.current=l5,s=t(n,r)}while(ip)}if($x.current=Y0,e=Yt!==null&&Yt.next!==null,Gd=0,os=Yt=jt=null,K0=!1,e)throw Error(Q(300));return s}function eS(){var s=Ep!==0;return Ep=0,s}function vi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return os===null?jt.memoizedState=os=s:os=os.next=s,os}function jr(){if(Yt===null){var s=jt.alternate;s=s!==null?s.memoizedState:null}else s=Yt.next;var e=os===null?jt.memoizedState:os.next;if(e!==null)os=e,Yt=s;else{if(s===null)throw Error(Q(310));Yt=s,s={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},os===null?jt.memoizedState=os=s:os=os.next=s}return os}function Cp(s,e){return typeof e=="function"?e(s):e}function vw(s){var e=jr(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=s;var n=Yt,r=n.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Gd&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:s(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,jt.lanes|=h,Kd|=h}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,ii(n,e.memoizedState)||(xn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,t.lastRenderedState=n}if(s=t.interleaved,s!==null){r=s;do i=r.lane,jt.lanes|=i,Kd|=i,r=r.next;while(r!==s)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function xw(s){var e=jr(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=s;var n=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=s(i,o.action),o=o.next;while(o!==r);ii(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,n]}function PP(){}function TP(s,e){var t=jt,n=jr(),r=e(),i=!ii(n.memoizedState,r);if(i&&(n.memoizedState=r,xn=!0),n=n.queue,tS(IP.bind(null,t,n,s),[s]),n.getSnapshot!==e||i||os!==null&&os.memoizedState.tag&1){if(t.flags|=2048,kp(9,MP.bind(null,t,n,r,e),void 0,null),cs===null)throw Error(Q(349));Gd&30||RP(t,e,r)}return r}function RP(s,e,t){s.flags|=16384,s={getSnapshot:e,value:t},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.stores=[s]):(t=e.stores,t===null?e.stores=[s]:t.push(s))}function MP(s,e,t,n){e.value=t,e.getSnapshot=n,DP(e)&&OP(s)}function IP(s,e,t){return t(function(){DP(e)&&OP(s)})}function DP(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!ii(s,t)}catch{return!0}}function OP(s){var e=co(s,1);e!==null&&ni(e,s,1,-1)}function IE(s){var e=vi();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cp,lastRenderedState:s},e.queue=s,s=s.dispatch=i5.bind(null,jt,s),[e.memoizedState,s]}function kp(s,e,t,n){return s={tag:s,create:e,destroy:t,deps:n,next:null},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.lastEffect=s.next=s):(t=e.lastEffect,t===null?e.lastEffect=s.next=s:(n=t.next,t.next=s,s.next=n,e.lastEffect=s)),s}function LP(){return jr().memoizedState}function zx(s,e,t,n){var r=vi();jt.flags|=s,r.memoizedState=kp(1|e,t,void 0,n===void 0?null:n)}function nb(s,e,t,n){var r=jr();n=n===void 0?null:n;var i=void 0;if(Yt!==null){var o=Yt.memoizedState;if(i=o.destroy,n!==null&&JN(n,o.deps)){r.memoizedState=kp(e,t,i,n);return}}jt.flags|=s,r.memoizedState=kp(1|e,t,i,n)}function DE(s,e){return zx(8390656,8,s,e)}function tS(s,e){return nb(2048,8,s,e)}function FP(s,e){return nb(4,2,s,e)}function $P(s,e){return nb(4,4,s,e)}function zP(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function BP(s,e,t){return t=t!=null?t.concat([s]):null,nb(4,4,zP.bind(null,e,s),t)}function sS(){}function HP(s,e){var t=jr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&JN(e,n[1])?n[0]:(t.memoizedState=[s,e],s)}function UP(s,e){var t=jr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&JN(e,n[1])?n[0]:(s=s(),t.memoizedState=[s,e],s)}function WP(s,e,t){return Gd&21?(ii(t,e)||(t=Y2(),jt.lanes|=t,Kd|=t,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,xn=!0),s.memoizedState=t)}function n5(s,e){var t=et;et=t!==0&&4>t?t:4,s(!0);var n=gw.transition;gw.transition={};try{s(!1),e()}finally{et=t,gw.transition=n}}function VP(){return jr().memoizedState}function r5(s,e,t){var n=Bl(s);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},qP(s))GP(e,t);else if(t=EP(s,e,t,n),t!==null){var r=Zs();ni(t,s,n,r),KP(t,e,n)}}function i5(s,e,t){var n=Bl(s),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(qP(s))GP(e,r);else{var i=s.alternate;if(s.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,t);if(r.hasEagerState=!0,r.eagerState=l,ii(l,o)){var c=e.interleaved;c===null?(r.next=r,GN(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=EP(s,e,r,n),t!==null&&(r=Zs(),ni(t,s,n,r),KP(t,e,n))}}function qP(s){var e=s.alternate;return s===jt||e!==null&&e===jt}function GP(s,e){ip=K0=!0;var t=s.pending;t===null?e.next=e:(e.next=t.next,t.next=e),s.pending=e}function KP(s,e,t){if(t&4194240){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,MN(s,t)}}var Y0={readContext:wr,useCallback:Ss,useContext:Ss,useEffect:Ss,useImperativeHandle:Ss,useInsertionEffect:Ss,useLayoutEffect:Ss,useMemo:Ss,useReducer:Ss,useRef:Ss,useState:Ss,useDebugValue:Ss,useDeferredValue:Ss,useTransition:Ss,useMutableSource:Ss,useSyncExternalStore:Ss,useId:Ss,unstable_isNewReconciler:!1},a5={readContext:wr,useCallback:function(s,e){return vi().memoizedState=[s,e===void 0?null:e],s},useContext:wr,useEffect:DE,useImperativeHandle:function(s,e,t){return t=t!=null?t.concat([s]):null,zx(4194308,4,zP.bind(null,e,s),t)},useLayoutEffect:function(s,e){return zx(4194308,4,s,e)},useInsertionEffect:function(s,e){return zx(4,2,s,e)},useMemo:function(s,e){var t=vi();return e=e===void 0?null:e,s=s(),t.memoizedState=[s,e],s},useReducer:function(s,e,t){var n=vi();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},n.queue=s,s=s.dispatch=r5.bind(null,jt,s),[n.memoizedState,s]},useRef:function(s){var e=vi();return s={current:s},e.memoizedState=s},useState:IE,useDebugValue:sS,useDeferredValue:function(s){return vi().memoizedState=s},useTransition:function(){var s=IE(!1),e=s[0];return s=n5.bind(null,s[1]),vi().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,t){var n=jt,r=vi();if(xt){if(t===void 0)throw Error(Q(407));t=t()}else{if(t=e(),cs===null)throw Error(Q(349));Gd&30||RP(n,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,DE(IP.bind(null,n,i,s),[s]),n.flags|=2048,kp(9,MP.bind(null,n,i,t,e),void 0,null),t},useId:function(){var s=vi(),e=cs.identifierPrefix;if(xt){var t=no,n=so;t=(n&~(1<<32-si(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ep++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=s5++,e=":"+e+"r"+t.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},o5={readContext:wr,useCallback:HP,useContext:wr,useEffect:tS,useImperativeHandle:BP,useInsertionEffect:FP,useLayoutEffect:$P,useMemo:UP,useReducer:vw,useRef:LP,useState:function(){return vw(Cp)},useDebugValue:sS,useDeferredValue:function(s){var e=jr();return WP(e,Yt.memoizedState,s)},useTransition:function(){var s=vw(Cp)[0],e=jr().memoizedState;return[s,e]},useMutableSource:PP,useSyncExternalStore:TP,useId:VP,unstable_isNewReconciler:!1},l5={readContext:wr,useCallback:HP,useContext:wr,useEffect:tS,useImperativeHandle:BP,useInsertionEffect:FP,useLayoutEffect:$P,useMemo:UP,useReducer:xw,useRef:LP,useState:function(){return xw(Cp)},useDebugValue:sS,useDeferredValue:function(s){var e=jr();return Yt===null?e.memoizedState=s:WP(e,Yt.memoizedState,s)},useTransition:function(){var s=xw(Cp)[0],e=jr().memoizedState;return[s,e]},useMutableSource:PP,useSyncExternalStore:TP,useId:VP,unstable_isNewReconciler:!1};function Ir(s,e){if(s&&s.defaultProps){e=_t({},e),s=s.defaultProps;for(var t in s)e[t]===void 0&&(e[t]=s[t]);return e}return e}function W1(s,e,t,n){e=s.memoizedState,t=t(n,e),t=t==null?e:_t({},e,t),s.memoizedState=t,s.lanes===0&&(s.updateQueue.baseState=t)}var rb={isMounted:function(s){return(s=s._reactInternals)?hu(s)===s:!1},enqueueSetState:function(s,e,t){s=s._reactInternals;var n=Zs(),r=Bl(s),i=ro(n,r);i.payload=e,t!=null&&(i.callback=t),e=$l(s,i,r),e!==null&&(ni(e,s,r,n),Fx(e,s,r))},enqueueReplaceState:function(s,e,t){s=s._reactInternals;var n=Zs(),r=Bl(s),i=ro(n,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=$l(s,i,r),e!==null&&(ni(e,s,r,n),Fx(e,s,r))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var t=Zs(),n=Bl(s),r=ro(t,n);r.tag=2,e!=null&&(r.callback=e),e=$l(s,r,n),e!==null&&(ni(e,s,n,t),Fx(e,s,n))}};function OE(s,e,t,n,r,i,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!wp(t,n)||!wp(r,i):!0}function YP(s,e,t){var n=!1,r=Vl,i=e.contextType;return typeof i=="object"&&i!==null?i=wr(i):(r=wn(e)?Vd:Os.current,n=e.contextTypes,i=(n=n!=null)?Of(s,r):Vl),e=new e(t,i),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rb,s.stateNode=e,e._reactInternals=s,n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=i),e}function LE(s,e,t,n){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==s&&rb.enqueueReplaceState(e,e.state,null)}function V1(s,e,t,n){var r=s.stateNode;r.props=t,r.state=s.memoizedState,r.refs={},KN(s);var i=e.contextType;typeof i=="object"&&i!==null?r.context=wr(i):(i=wn(e)?Vd:Os.current,r.context=Of(s,i)),r.state=s.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(W1(s,e,i,t),r.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&rb.enqueueReplaceState(r,r.state,null),q0(s,t,r,n),r.state=s.memoizedState),typeof r.componentDidMount=="function"&&(s.flags|=4194308)}function zf(s,e){try{var t="",n=e;do t+=OF(n),n=n.return;while(n);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:s,source:e,stack:r,digest:null}}function yw(s,e,t){return{value:s,source:null,stack:t??null,digest:e??null}}function q1(s,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var c5=typeof WeakMap=="function"?WeakMap:Map;function XP(s,e,t){t=ro(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Q0||(Q0=!0,sj=n),q1(s,e)},t}function QP(s,e,t){t=ro(-1,t),t.tag=3;var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){q1(s,e)}}var i=s.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){q1(s,e),typeof n!="function"&&(zl===null?zl=new Set([this]):zl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function FE(s,e,t){var n=s.pingCache;if(n===null){n=s.pingCache=new c5;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),s=_5.bind(null,s,e,t),e.then(s,s))}function $E(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function zE(s,e,t,n,r){return s.mode&1?(s.flags|=65536,s.lanes=r,s):(s===e?s.flags|=65536:(s.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ro(-1,1),e.tag=2,$l(t,e,1))),t.lanes|=1),s)}var d5=po.ReactCurrentOwner,xn=!1;function Gs(s,e,t,n){e.child=s===null?AP(e,null,t,n):Ff(e,s.child,t,n)}function BE(s,e,t,n,r){t=t.render;var i=e.ref;return ch(e,r),n=ZN(s,e,t,n,i,r),t=eS(),s!==null&&!xn?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,uo(s,e,r)):(xt&&t&&BN(e),e.flags|=1,Gs(s,e,n,r),e.child)}function HE(s,e,t,n,r){if(s===null){var i=t.type;return typeof i=="function"&&!dS(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,JP(s,e,i,n,r)):(s=Wx(t.type,null,n,e,e.mode,r),s.ref=e.ref,s.return=e,e.child=s)}if(i=s.child,!(s.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:wp,t(o,n)&&s.ref===e.ref)return uo(s,e,r)}return e.flags|=1,s=Hl(i,n),s.ref=e.ref,s.return=e,e.child=s}function JP(s,e,t,n,r){if(s!==null){var i=s.memoizedProps;if(wp(i,n)&&s.ref===e.ref)if(xn=!1,e.pendingProps=n=i,(s.lanes&r)!==0)s.flags&131072&&(xn=!0);else return e.lanes=s.lanes,uo(s,e,r)}return G1(s,e,t,n,r)}function ZP(s,e,t){var n=e.pendingProps,r=n.children,i=s!==null?s.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(th,Un),Un|=t;else{if(!(t&1073741824))return s=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,ot(th,Un),Un|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:t,ot(th,Un),Un|=n}else i!==null?(n=i.baseLanes|t,e.memoizedState=null):n=t,ot(th,Un),Un|=n;return Gs(s,e,r,t),e.child}function eT(s,e){var t=e.ref;(s===null&&t!==null||s!==null&&s.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function G1(s,e,t,n,r){var i=wn(t)?Vd:Os.current;return i=Of(e,i),ch(e,r),t=ZN(s,e,t,n,i,r),n=eS(),s!==null&&!xn?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,uo(s,e,r)):(xt&&n&&BN(e),e.flags|=1,Gs(s,e,t,r),e.child)}function UE(s,e,t,n,r){if(wn(t)){var i=!0;B0(e)}else i=!1;if(ch(e,r),e.stateNode===null)Bx(s,e),YP(e,t,n),V1(e,t,n,r),n=!0;else if(s===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=t.contextType;typeof d=="object"&&d!==null?d=wr(d):(d=wn(t)?Vd:Os.current,d=Of(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&LE(e,o,n,d),Mo=!1;var m=e.memoizedState;o.state=m,q0(e,n,o,r),c=e.memoizedState,l!==n||m!==c||bn.current||Mo?(typeof h=="function"&&(W1(e,t,h,n),c=e.memoizedState),(l=Mo||OE(e,t,l,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,CP(s,e),l=e.memoizedProps,d=e.type===e.elementType?l:Ir(e.type,l),o.props=d,f=e.pendingProps,m=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=wr(c):(c=wn(t)?Vd:Os.current,c=Of(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&LE(e,o,n,c),Mo=!1,m=e.memoizedState,o.state=m,q0(e,n,o,r);var x=e.memoizedState;l!==f||m!==x||bn.current||Mo?(typeof p=="function"&&(W1(e,t,p,n),x=e.memoizedState),(d=Mo||OE(e,t,d,n,m,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=1024),n=!1)}return K1(s,e,t,n,i,r)}function K1(s,e,t,n,r,i){eT(s,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&CE(e,t,!1),uo(s,e,i);n=e.stateNode,d5.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,s!==null&&o?(e.child=Ff(e,s.child,null,i),e.child=Ff(e,null,l,i)):Gs(s,e,l,i),e.memoizedState=n.state,r&&CE(e,t,!0),e.child}function tT(s){var e=s.stateNode;e.pendingContext?EE(s,e.pendingContext,e.pendingContext!==e.context):e.context&&EE(s,e.context,!1),YN(s,e.containerInfo)}function WE(s,e,t,n,r){return Lf(),UN(r),e.flags|=256,Gs(s,e,t,n),e.child}var Y1={dehydrated:null,treeContext:null,retryLane:0};function X1(s){return{baseLanes:s,cachePool:null,transitions:null}}function sT(s,e,t){var n=e.pendingProps,r=wt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=s!==null&&s.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(r|=1),ot(wt,r&1),s===null)return H1(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,s=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ob(o,n,0,null),s=Wd(s,n,t,null),i.return=e,s.return=e,i.sibling=s,e.child=i,e.child.memoizedState=X1(t),e.memoizedState=Y1,s):nS(e,o));if(r=s.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return u5(s,e,o,n,l,r,t);if(i){i=n.fallback,o=e.mode,r=s.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Hl(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Hl(l,i):(i=Wd(i,o,t,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=s.child.memoizedState,o=o===null?X1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=s.childLanes&~t,e.memoizedState=Y1,n}return i=s.child,s=i.sibling,n=Hl(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,s!==null&&(t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)),e.child=n,e.memoizedState=null,n}function nS(s,e){return e=ob({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function ox(s,e,t,n){return n!==null&&UN(n),Ff(e,s.child,null,t),s=nS(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function u5(s,e,t,n,r,i,o){if(t)return e.flags&256?(e.flags&=-257,n=yw(Error(Q(422))),ox(s,e,o,n)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=ob({mode:"visible",children:n.children},r,0,null),i=Wd(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ff(e,s.child,null,o),e.child.memoizedState=X1(o),e.memoizedState=Y1,i);if(!(e.mode&1))return ox(s,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Q(419)),n=yw(i,n,void 0),ox(s,e,o,n)}if(l=(o&s.childLanes)!==0,xn||l){if(n=cs,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,co(s,r),ni(n,s,r,-1))}return cS(),n=yw(Error(Q(421))),ox(s,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=s.child,e=N5.bind(null,s),r._reactRetry=e,null):(s=i.treeContext,Gn=Fl(r.nextSibling),Kn=e,xt=!0,Qr=null,s!==null&&(fr[mr++]=so,fr[mr++]=no,fr[mr++]=qd,so=s.id,no=s.overflow,qd=e),e=nS(e,n.children),e.flags|=4096,e)}function VE(s,e,t){s.lanes|=e;var n=s.alternate;n!==null&&(n.lanes|=e),U1(s.return,e,t)}function bw(s,e,t,n,r){var i=s.memoizedState;i===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=r)}function nT(s,e,t){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(Gs(s,e,n.children,t),n=wt.current,n&2)n=n&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&VE(s,t,e);else if(s.tag===19)VE(s,t,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}n&=1}if(ot(wt,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)s=t.alternate,s!==null&&G0(s)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),bw(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(s=r.alternate,s!==null&&G0(s)===null){e.child=r;break}s=r.sibling,r.sibling=t,t=r,r=s}bw(e,!0,t,null,i);break;case"together":bw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bx(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function uo(s,e,t){if(s!==null&&(e.dependencies=s.dependencies),Kd|=e.lanes,!(t&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(Q(153));if(e.child!==null){for(s=e.child,t=Hl(s,s.pendingProps),e.child=t,t.return=e;s.sibling!==null;)s=s.sibling,t=t.sibling=Hl(s,s.pendingProps),t.return=e;t.sibling=null}return e.child}function h5(s,e,t){switch(e.tag){case 3:tT(e),Lf();break;case 5:kP(e);break;case 1:wn(e.type)&&B0(e);break;case 4:YN(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;ot(W0,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ot(wt,wt.current&1),e.flags|=128,null):t&e.child.childLanes?sT(s,e,t):(ot(wt,wt.current&1),s=uo(s,e,t),s!==null?s.sibling:null);ot(wt,wt.current&1);break;case 19:if(n=(t&e.childLanes)!==0,s.flags&128){if(n)return nT(s,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ot(wt,wt.current),n)break;return null;case 22:case 23:return e.lanes=0,ZP(s,e,t)}return uo(s,e,t)}var rT,Q1,iT,aT;rT=function(s,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)s.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Q1=function(){};iT=function(s,e,t,n){var r=s.memoizedProps;if(r!==n){s=e.stateNode,Tc(Xi.current);var i=null;switch(t){case"input":r=y1(s,r),n=y1(s,n),i=[];break;case"select":r=_t({},r,{value:void 0}),n=_t({},n,{value:void 0}),i=[];break;case"textarea":r=j1(s,r),n=j1(s,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(s.onclick=$0)}N1(t,n);var o;t=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mp.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(d,t)),t=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mp.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ut("scroll",s),i||l===c||(i=[])):(i=i||[]).push(d,c))}t&&(i=i||[]).push("style",t);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};aT=function(s,e,t,n){t!==n&&(e.flags|=4)};function xm(s,e){if(!xt)switch(s.tailMode){case"hidden":e=s.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?s.tail=null:t.sibling=null;break;case"collapsed":t=s.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function As(s){var e=s.alternate!==null&&s.alternate.child===s.child,t=0,n=0;if(e)for(var r=s.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=s,r=r.sibling;else for(r=s.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=s,r=r.sibling;return s.subtreeFlags|=n,s.childLanes=t,e}function f5(s,e,t){var n=e.pendingProps;switch(HN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return As(e),null;case 1:return wn(e.type)&&z0(),As(e),null;case 3:return n=e.stateNode,$f(),ht(bn),ht(Os),QN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(ix(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qr!==null&&(ij(Qr),Qr=null))),Q1(s,e),As(e),null;case 5:XN(e);var r=Tc(Ap.current);if(t=e.type,s!==null&&e.stateNode!=null)iT(s,e,t,n,r),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Q(166));return As(e),null}if(s=Tc(Xi.current),ix(e)){n=e.stateNode,t=e.type;var i=e.memoizedProps;switch(n[Hi]=e,n[Np]=i,s=(e.mode&1)!==0,t){case"dialog":ut("cancel",n),ut("close",n);break;case"iframe":case"object":case"embed":ut("load",n);break;case"video":case"audio":for(r=0;r<Tm.length;r++)ut(Tm[r],n);break;case"source":ut("error",n);break;case"img":case"image":case"link":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"input":eE(n,i),ut("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ut("invalid",n);break;case"textarea":sE(n,i),ut("invalid",n)}N1(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&rx(n.textContent,l,s),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&rx(n.textContent,l,s),r=["children",""+l]):mp.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ut("scroll",n)}switch(t){case"input":Xv(n),tE(n,i,!0);break;case"textarea":Xv(n),nE(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=$0)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=I2(t)),s==="http://www.w3.org/1999/xhtml"?t==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof n.is=="string"?s=o.createElement(t,{is:n.is}):(s=o.createElement(t),t==="select"&&(o=s,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):s=o.createElementNS(s,t),s[Hi]=e,s[Np]=n,rT(s,e,!1,!1),e.stateNode=s;e:{switch(o=S1(t,n),t){case"dialog":ut("cancel",s),ut("close",s),r=n;break;case"iframe":case"object":case"embed":ut("load",s),r=n;break;case"video":case"audio":for(r=0;r<Tm.length;r++)ut(Tm[r],s);r=n;break;case"source":ut("error",s),r=n;break;case"img":case"image":case"link":ut("error",s),ut("load",s),r=n;break;case"details":ut("toggle",s),r=n;break;case"input":eE(s,n),r=y1(s,n),ut("invalid",s);break;case"option":r=n;break;case"select":s._wrapperState={wasMultiple:!!n.multiple},r=_t({},n,{value:void 0}),ut("invalid",s);break;case"textarea":sE(s,n),r=j1(s,n),ut("invalid",s);break;default:r=n}N1(t,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?L2(s,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&D2(s,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&pp(s,c):typeof c=="number"&&pp(s,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ut("scroll",s):c!=null&&EN(s,i,c,o))}switch(t){case"input":Xv(s),tE(s,n,!1);break;case"textarea":Xv(s),nE(s);break;case"option":n.value!=null&&s.setAttribute("value",""+Wl(n.value));break;case"select":s.multiple=!!n.multiple,i=n.value,i!=null?ih(s,!!n.multiple,i,!1):n.defaultValue!=null&&ih(s,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(s.onclick=$0)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return As(e),null;case 6:if(s&&e.stateNode!=null)aT(s,e,s.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Q(166));if(t=Tc(Ap.current),Tc(Xi.current),ix(e)){if(n=e.stateNode,t=e.memoizedProps,n[Hi]=e,(i=n.nodeValue!==t)&&(s=Kn,s!==null))switch(s.tag){case 3:rx(n.nodeValue,t,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&rx(n.nodeValue,t,(s.mode&1)!==0)}i&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Hi]=e,e.stateNode=n}return As(e),null;case 13:if(ht(wt),n=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(xt&&Gn!==null&&e.mode&1&&!(e.flags&128))NP(),Lf(),e.flags|=98560,i=!1;else if(i=ix(e),n!==null&&n.dehydrated!==null){if(s===null){if(!i)throw Error(Q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Hi]=e}else Lf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;As(e),i=!1}else Qr!==null&&(ij(Qr),Qr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(s!==null&&s.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(s===null||wt.current&1?Xt===0&&(Xt=3):cS())),e.updateQueue!==null&&(e.flags|=4),As(e),null);case 4:return $f(),Q1(s,e),s===null&&jp(e.stateNode.containerInfo),As(e),null;case 10:return qN(e.type._context),As(e),null;case 17:return wn(e.type)&&z0(),As(e),null;case 19:if(ht(wt),i=e.memoizedState,i===null)return As(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)xm(i,!1);else{if(Xt!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(o=G0(s),o!==null){for(e.flags|=128,xm(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)i=t,s=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t=t.sibling;return ot(wt,wt.current&1|2),e.child}s=s.sibling}i.tail!==null&&Rt()>Bf&&(e.flags|=128,n=!0,xm(i,!1),e.lanes=4194304)}else{if(!n)if(s=G0(o),s!==null){if(e.flags|=128,n=!0,t=s.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xt)return As(e),null}else 2*Rt()-i.renderingStartTime>Bf&&t!==1073741824&&(e.flags|=128,n=!0,xm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rt(),e.sibling=null,t=wt.current,ot(wt,n?t&1|2:t&1),e):(As(e),null);case 22:case 23:return lS(),n=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Un&1073741824&&(As(e),e.subtreeFlags&6&&(e.flags|=8192)):As(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function m5(s,e){switch(HN(e),e.tag){case 1:return wn(e.type)&&z0(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return $f(),ht(bn),ht(Os),QN(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return XN(e),null;case 13:if(ht(wt),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Lf()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return ht(wt),null;case 4:return $f(),null;case 10:return qN(e.type._context),null;case 22:case 23:return lS(),null;case 24:return null;default:return null}}var lx=!1,Is=!1,p5=typeof WeakSet=="function"?WeakSet:Set,ae=null;function eh(s,e){var t=s.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){kt(s,e,n)}else t.current=null}function J1(s,e,t){try{t()}catch(n){kt(s,e,n)}}var qE=!1;function g5(s,e){if(D1=O0,s=uP(),zN(s)){if("selectionStart"in s)var t={start:s.selectionStart,end:s.selectionEnd};else e:{t=(t=s.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=s,m=null;t:for(;;){for(var p;f!==t||r!==0&&f.nodeType!==3||(l=o+r),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===s)break t;if(m===t&&++d===r&&(l=o),m===i&&++h===n&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(O1={focusedElem:s,selectionRange:t},O0=!1,ae=e;ae!==null;)if(e=ae,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,ae=s;else for(;ae!==null;){e=ae;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,b=x.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ir(e.type,v),b);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(_){kt(e,e.return,_)}if(s=e.sibling,s!==null){s.return=e.return,ae=s;break}ae=e.return}return x=qE,qE=!1,x}function ap(s,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&s)===s){var i=r.destroy;r.destroy=void 0,i!==void 0&&J1(e,t,i)}r=r.next}while(r!==n)}}function ib(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&s)===s){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function Z1(s){var e=s.ref;if(e!==null){var t=s.stateNode;switch(s.tag){case 5:s=t;break;default:s=t}typeof e=="function"?e(s):e.current=s}}function oT(s){var e=s.alternate;e!==null&&(s.alternate=null,oT(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[Hi],delete e[Np],delete e[$1],delete e[J3],delete e[Z3])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function lT(s){return s.tag===5||s.tag===3||s.tag===4}function GE(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||lT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ej(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(s,e):t.insertBefore(s,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(s,t)):(e=t,e.appendChild(s)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=$0));else if(n!==4&&(s=s.child,s!==null))for(ej(s,e,t),s=s.sibling;s!==null;)ej(s,e,t),s=s.sibling}function tj(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.insertBefore(s,e):t.appendChild(s);else if(n!==4&&(s=s.child,s!==null))for(tj(s,e,t),s=s.sibling;s!==null;)tj(s,e,t),s=s.sibling}var gs=null,Yr=!1;function _o(s,e,t){for(t=t.child;t!==null;)cT(s,e,t),t=t.sibling}function cT(s,e,t){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(Qy,t)}catch{}switch(t.tag){case 5:Is||eh(t,e);case 6:var n=gs,r=Yr;gs=null,_o(s,e,t),gs=n,Yr=r,gs!==null&&(Yr?(s=gs,t=t.stateNode,s.nodeType===8?s.parentNode.removeChild(t):s.removeChild(t)):gs.removeChild(t.stateNode));break;case 18:gs!==null&&(Yr?(s=gs,t=t.stateNode,s.nodeType===8?fw(s.parentNode,t):s.nodeType===1&&fw(s,t),yp(s)):fw(gs,t.stateNode));break;case 4:n=gs,r=Yr,gs=t.stateNode.containerInfo,Yr=!0,_o(s,e,t),gs=n,Yr=r;break;case 0:case 11:case 14:case 15:if(!Is&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&J1(t,e,o),r=r.next}while(r!==n)}_o(s,e,t);break;case 1:if(!Is&&(eh(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(l){kt(t,e,l)}_o(s,e,t);break;case 21:_o(s,e,t);break;case 22:t.mode&1?(Is=(n=Is)||t.memoizedState!==null,_o(s,e,t),Is=n):_o(s,e,t);break;default:_o(s,e,t)}}function KE(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var t=s.stateNode;t===null&&(t=s.stateNode=new p5),e.forEach(function(n){var r=S5.bind(null,s,n);t.has(n)||(t.add(n),n.then(r,r))})}}function kr(s,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var i=s,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:gs=l.stateNode,Yr=!1;break e;case 3:gs=l.stateNode.containerInfo,Yr=!0;break e;case 4:gs=l.stateNode.containerInfo,Yr=!0;break e}l=l.return}if(gs===null)throw Error(Q(160));cT(i,o,r),gs=null,Yr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){kt(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dT(e,s),e=e.sibling}function dT(s,e){var t=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(kr(e,s),fi(s),n&4){try{ap(3,s,s.return),ib(3,s)}catch(v){kt(s,s.return,v)}try{ap(5,s,s.return)}catch(v){kt(s,s.return,v)}}break;case 1:kr(e,s),fi(s),n&512&&t!==null&&eh(t,t.return);break;case 5:if(kr(e,s),fi(s),n&512&&t!==null&&eh(t,t.return),s.flags&32){var r=s.stateNode;try{pp(r,"")}catch(v){kt(s,s.return,v)}}if(n&4&&(r=s.stateNode,r!=null)){var i=s.memoizedProps,o=t!==null?t.memoizedProps:i,l=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&R2(r,i),S1(l,o);var d=S1(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?L2(r,f):h==="dangerouslySetInnerHTML"?D2(r,f):h==="children"?pp(r,f):EN(r,h,f,d)}switch(l){case"input":b1(r,i);break;case"textarea":M2(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ih(r,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?ih(r,!!i.multiple,i.defaultValue,!0):ih(r,!!i.multiple,i.multiple?[]:"",!1))}r[Np]=i}catch(v){kt(s,s.return,v)}}break;case 6:if(kr(e,s),fi(s),n&4){if(s.stateNode===null)throw Error(Q(162));r=s.stateNode,i=s.memoizedProps;try{r.nodeValue=i}catch(v){kt(s,s.return,v)}}break;case 3:if(kr(e,s),fi(s),n&4&&t!==null&&t.memoizedState.isDehydrated)try{yp(e.containerInfo)}catch(v){kt(s,s.return,v)}break;case 4:kr(e,s),fi(s);break;case 13:kr(e,s),fi(s),r=s.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(aS=Rt())),n&4&&KE(s);break;case 22:if(h=t!==null&&t.memoizedState!==null,s.mode&1?(Is=(d=Is)||h,kr(e,s),Is=d):kr(e,s),fi(s),n&8192){if(d=s.memoizedState!==null,(s.stateNode.isHidden=d)&&!h&&s.mode&1)for(ae=s,h=s.child;h!==null;){for(f=ae=h;ae!==null;){switch(m=ae,p=m.child,m.tag){case 0:case 11:case 14:case 15:ap(4,m,m.return);break;case 1:eh(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,t=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(v){kt(n,t,v)}}break;case 5:eh(m,m.return);break;case 22:if(m.memoizedState!==null){XE(f);continue}}p!==null?(p.return=m,ae=p):XE(f)}h=h.sibling}e:for(h=null,f=s;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=O2("display",o))}catch(v){kt(s,s.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){kt(s,s.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===s)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kr(e,s),fi(s),n&4&&KE(s);break;case 21:break;default:kr(e,s),fi(s)}}function fi(s){var e=s.flags;if(e&2){try{e:{for(var t=s.return;t!==null;){if(lT(t)){var n=t;break e}t=t.return}throw Error(Q(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(pp(r,""),n.flags&=-33);var i=GE(s);tj(s,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=GE(s);ej(s,l,o);break;default:throw Error(Q(161))}}catch(c){kt(s,s.return,c)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function v5(s,e,t){ae=s,uT(s)}function uT(s,e,t){for(var n=(s.mode&1)!==0;ae!==null;){var r=ae,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||lx;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Is;l=lx;var d=Is;if(lx=o,(Is=c)&&!d)for(ae=r;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?QE(r):c!==null?(c.return=o,ae=c):QE(r);for(;i!==null;)ae=i,uT(i),i=i.sibling;ae=r,lx=l,Is=d}YE(s)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ae=i):YE(s)}}function YE(s){for(;ae!==null;){var e=ae;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Is||ib(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Is)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Ir(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ME(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ME(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&yp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Is||e.flags&512&&Z1(e)}catch(m){kt(e,e.return,m)}}if(e===s){ae=null;break}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}}function XE(s){for(;ae!==null;){var e=ae;if(e===s){ae=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ae=t;break}ae=e.return}}function QE(s){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{ib(4,e)}catch(c){kt(e,t,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){kt(e,r,c)}}var i=e.return;try{Z1(e)}catch(c){kt(e,i,c)}break;case 5:var o=e.return;try{Z1(e)}catch(c){kt(e,o,c)}}}catch(c){kt(e,e.return,c)}if(e===s){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var x5=Math.ceil,X0=po.ReactCurrentDispatcher,rS=po.ReactCurrentOwner,vr=po.ReactCurrentBatchConfig,Ue=0,cs=null,$t=null,ws=0,Un=0,th=rc(0),Xt=0,Pp=null,Kd=0,ab=0,iS=0,op=null,mn=null,aS=0,Bf=1/0,va=null,Q0=!1,sj=null,zl=null,cx=!1,Ml=null,J0=0,lp=0,nj=null,Hx=-1,Ux=0;function Zs(){return Ue&6?Rt():Hx!==-1?Hx:Hx=Rt()}function Bl(s){return s.mode&1?Ue&2&&ws!==0?ws&-ws:t5.transition!==null?(Ux===0&&(Ux=Y2()),Ux):(s=et,s!==0||(s=window.event,s=s===void 0?16:sP(s.type)),s):1}function ni(s,e,t,n){if(50<lp)throw lp=0,nj=null,Error(Q(185));bv(s,t,n),(!(Ue&2)||s!==cs)&&(s===cs&&(!(Ue&2)&&(ab|=t),Xt===4&&Oo(s,ws)),jn(s,n),t===1&&Ue===0&&!(e.mode&1)&&(Bf=Rt()+500,sb&&ic()))}function jn(s,e){var t=s.callbackNode;t3(s,e);var n=D0(s,s===cs?ws:0);if(n===0)t!==null&&aE(t),s.callbackNode=null,s.callbackPriority=0;else if(e=n&-n,s.callbackPriority!==e){if(t!=null&&aE(t),e===1)s.tag===0?e5(JE.bind(null,s)):wP(JE.bind(null,s)),X3(function(){!(Ue&6)&&ic()}),t=null;else{switch(X2(n)){case 1:t=RN;break;case 4:t=G2;break;case 16:t=I0;break;case 536870912:t=K2;break;default:t=I0}t=yT(t,hT.bind(null,s))}s.callbackPriority=e,s.callbackNode=t}}function hT(s,e){if(Hx=-1,Ux=0,Ue&6)throw Error(Q(327));var t=s.callbackNode;if(dh()&&s.callbackNode!==t)return null;var n=D0(s,s===cs?ws:0);if(n===0)return null;if(n&30||n&s.expiredLanes||e)e=Z0(s,n);else{e=n;var r=Ue;Ue|=2;var i=mT();(cs!==s||ws!==e)&&(va=null,Bf=Rt()+500,Ud(s,e));do try{w5();break}catch(l){fT(s,l)}while(!0);VN(),X0.current=i,Ue=r,$t!==null?e=0:(cs=null,ws=0,e=Xt)}if(e!==0){if(e===2&&(r=P1(s),r!==0&&(n=r,e=rj(s,r))),e===1)throw t=Pp,Ud(s,0),Oo(s,n),jn(s,Rt()),t;if(e===6)Oo(s,n);else{if(r=s.current.alternate,!(n&30)&&!y5(r)&&(e=Z0(s,n),e===2&&(i=P1(s),i!==0&&(n=i,e=rj(s,i))),e===1))throw t=Pp,Ud(s,0),Oo(s,n),jn(s,Rt()),t;switch(s.finishedWork=r,s.finishedLanes=n,e){case 0:case 1:throw Error(Q(345));case 2:yc(s,mn,va);break;case 3:if(Oo(s,n),(n&130023424)===n&&(e=aS+500-Rt(),10<e)){if(D0(s,0)!==0)break;if(r=s.suspendedLanes,(r&n)!==n){Zs(),s.pingedLanes|=s.suspendedLanes&r;break}s.timeoutHandle=F1(yc.bind(null,s,mn,va),e);break}yc(s,mn,va);break;case 4:if(Oo(s,n),(n&4194240)===n)break;for(e=s.eventTimes,r=-1;0<n;){var o=31-si(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=Rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*x5(n/1960))-n,10<n){s.timeoutHandle=F1(yc.bind(null,s,mn,va),n);break}yc(s,mn,va);break;case 5:yc(s,mn,va);break;default:throw Error(Q(329))}}}return jn(s,Rt()),s.callbackNode===t?hT.bind(null,s):null}function rj(s,e){var t=op;return s.current.memoizedState.isDehydrated&&(Ud(s,e).flags|=256),s=Z0(s,e),s!==2&&(e=mn,mn=t,e!==null&&ij(e)),s}function ij(s){mn===null?mn=s:mn.push.apply(mn,s)}function y5(s){for(var e=s;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],i=r.getSnapshot;r=r.value;try{if(!ii(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oo(s,e){for(e&=~iS,e&=~ab,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var t=31-si(e),n=1<<t;s[t]=-1,e&=~n}}function JE(s){if(Ue&6)throw Error(Q(327));dh();var e=D0(s,0);if(!(e&1))return jn(s,Rt()),null;var t=Z0(s,e);if(s.tag!==0&&t===2){var n=P1(s);n!==0&&(e=n,t=rj(s,n))}if(t===1)throw t=Pp,Ud(s,0),Oo(s,e),jn(s,Rt()),t;if(t===6)throw Error(Q(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,yc(s,mn,va),jn(s,Rt()),null}function oS(s,e){var t=Ue;Ue|=1;try{return s(e)}finally{Ue=t,Ue===0&&(Bf=Rt()+500,sb&&ic())}}function Yd(s){Ml!==null&&Ml.tag===0&&!(Ue&6)&&dh();var e=Ue;Ue|=1;var t=vr.transition,n=et;try{if(vr.transition=null,et=1,s)return s()}finally{et=n,vr.transition=t,Ue=e,!(Ue&6)&&ic()}}function lS(){Un=th.current,ht(th)}function Ud(s,e){s.finishedWork=null,s.finishedLanes=0;var t=s.timeoutHandle;if(t!==-1&&(s.timeoutHandle=-1,Y3(t)),$t!==null)for(t=$t.return;t!==null;){var n=t;switch(HN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&z0();break;case 3:$f(),ht(bn),ht(Os),QN();break;case 5:XN(n);break;case 4:$f();break;case 13:ht(wt);break;case 19:ht(wt);break;case 10:qN(n.type._context);break;case 22:case 23:lS()}t=t.return}if(cs=s,$t=s=Hl(s.current,null),ws=Un=e,Xt=0,Pp=null,iS=ab=Kd=0,mn=op=null,Pc!==null){for(e=0;e<Pc.length;e++)if(t=Pc[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}t.pending=n}Pc=null}return s}function fT(s,e){do{var t=$t;try{if(VN(),$x.current=Y0,K0){for(var n=jt.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}K0=!1}if(Gd=0,os=Yt=jt=null,ip=!1,Ep=0,rS.current=null,t===null||t.return===null){Xt=1,Pp=e,$t=null;break}e:{var i=s,o=t.return,l=t,c=e;if(e=ws,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=$E(o);if(p!==null){p.flags&=-257,zE(p,o,l,i,e),p.mode&1&&FE(i,d,e),e=p,c=d;var x=e.updateQueue;if(x===null){var v=new Set;v.add(c),e.updateQueue=v}else x.add(c);break e}else{if(!(e&1)){FE(i,d,e),cS();break e}c=Error(Q(426))}}else if(xt&&l.mode&1){var b=$E(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),zE(b,o,l,i,e),UN(zf(c,l));break e}}i=c=zf(c,l),Xt!==4&&(Xt=2),op===null?op=[i]:op.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=XP(i,c,e);RE(i,g);break e;case 1:l=c;var y=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(zl===null||!zl.has(j)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=QP(i,l,e);RE(i,_);break e}}i=i.return}while(i!==null)}gT(t)}catch(S){e=S,$t===t&&t!==null&&($t=t=t.return);continue}break}while(!0)}function mT(){var s=X0.current;return X0.current=Y0,s===null?Y0:s}function cS(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),cs===null||!(Kd&268435455)&&!(ab&268435455)||Oo(cs,ws)}function Z0(s,e){var t=Ue;Ue|=2;var n=mT();(cs!==s||ws!==e)&&(va=null,Ud(s,e));do try{b5();break}catch(r){fT(s,r)}while(!0);if(VN(),Ue=t,X0.current=n,$t!==null)throw Error(Q(261));return cs=null,ws=0,Xt}function b5(){for(;$t!==null;)pT($t)}function w5(){for(;$t!==null&&!qF();)pT($t)}function pT(s){var e=xT(s.alternate,s,Un);s.memoizedProps=s.pendingProps,e===null?gT(s):$t=e,rS.current=null}function gT(s){var e=s;do{var t=e.alternate;if(s=e.return,e.flags&32768){if(t=m5(t,e),t!==null){t.flags&=32767,$t=t;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Xt=6,$t=null;return}}else if(t=f5(t,e,Un),t!==null){$t=t;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=s}while(e!==null);Xt===0&&(Xt=5)}function yc(s,e,t){var n=et,r=vr.transition;try{vr.transition=null,et=1,j5(s,e,t,n)}finally{vr.transition=r,et=n}return null}function j5(s,e,t,n){do dh();while(Ml!==null);if(Ue&6)throw Error(Q(327));t=s.finishedWork;var r=s.finishedLanes;if(t===null)return null;if(s.finishedWork=null,s.finishedLanes=0,t===s.current)throw Error(Q(177));s.callbackNode=null,s.callbackPriority=0;var i=t.lanes|t.childLanes;if(s3(s,i),s===cs&&($t=cs=null,ws=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||cx||(cx=!0,yT(I0,function(){return dh(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=vr.transition,vr.transition=null;var o=et;et=1;var l=Ue;Ue|=4,rS.current=null,g5(s,t),dT(t,s),H3(O1),O0=!!D1,O1=D1=null,s.current=t,v5(t),GF(),Ue=l,et=o,vr.transition=i}else s.current=t;if(cx&&(cx=!1,Ml=s,J0=r),i=s.pendingLanes,i===0&&(zl=null),XF(t.stateNode),jn(s,Rt()),e!==null)for(n=s.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(Q0)throw Q0=!1,s=sj,sj=null,s;return J0&1&&s.tag!==0&&dh(),i=s.pendingLanes,i&1?s===nj?lp++:(lp=0,nj=s):lp=0,ic(),null}function dh(){if(Ml!==null){var s=X2(J0),e=vr.transition,t=et;try{if(vr.transition=null,et=16>s?16:s,Ml===null)var n=!1;else{if(s=Ml,Ml=null,J0=0,Ue&6)throw Error(Q(331));var r=Ue;for(Ue|=4,ae=s.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:ap(8,h,i)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var m=h.sibling,p=h.return;if(oT(h),h===d){ae=null;break}if(m!==null){m.return=p,ae=m;break}ae=p}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ap(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ae=g;break e}ae=i.return}}var y=s.current;for(ae=y;ae!==null;){o=ae;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ae=j;else e:for(o=y;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ib(9,l)}}catch(S){kt(l,l.return,S)}if(l===o){ae=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ae=_;break e}ae=l.return}}if(Ue=r,ic(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(Qy,s)}catch{}n=!0}return n}finally{et=t,vr.transition=e}}return!1}function ZE(s,e,t){e=zf(t,e),e=XP(s,e,1),s=$l(s,e,1),e=Zs(),s!==null&&(bv(s,1,e),jn(s,e))}function kt(s,e,t){if(s.tag===3)ZE(s,s,t);else for(;e!==null;){if(e.tag===3){ZE(e,s,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(zl===null||!zl.has(n))){s=zf(t,s),s=QP(e,s,1),e=$l(e,s,1),s=Zs(),e!==null&&(bv(e,1,s),jn(e,s));break}}e=e.return}}function _5(s,e,t){var n=s.pingCache;n!==null&&n.delete(e),e=Zs(),s.pingedLanes|=s.suspendedLanes&t,cs===s&&(ws&t)===t&&(Xt===4||Xt===3&&(ws&130023424)===ws&&500>Rt()-aS?Ud(s,0):iS|=t),jn(s,e)}function vT(s,e){e===0&&(s.mode&1?(e=Zv,Zv<<=1,!(Zv&130023424)&&(Zv=4194304)):e=1);var t=Zs();s=co(s,e),s!==null&&(bv(s,e,t),jn(s,t))}function N5(s){var e=s.memoizedState,t=0;e!==null&&(t=e.retryLane),vT(s,t)}function S5(s,e){var t=0;switch(s.tag){case 13:var n=s.stateNode,r=s.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=s.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(e),vT(s,t)}var xT;xT=function(s,e,t){if(s!==null)if(s.memoizedProps!==e.pendingProps||bn.current)xn=!0;else{if(!(s.lanes&t)&&!(e.flags&128))return xn=!1,h5(s,e,t);xn=!!(s.flags&131072)}else xn=!1,xt&&e.flags&1048576&&jP(e,U0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Bx(s,e),s=e.pendingProps;var r=Of(e,Os.current);ch(e,t),r=ZN(null,e,n,s,r,t);var i=eS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wn(n)?(i=!0,B0(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,KN(e),r.updater=rb,e.stateNode=r,r._reactInternals=e,V1(e,n,s,t),e=K1(null,e,n,!0,i,t)):(e.tag=0,xt&&i&&BN(e),Gs(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Bx(s,e),s=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=E5(n),s=Ir(n,s),r){case 0:e=G1(null,e,n,s,t);break e;case 1:e=UE(null,e,n,s,t);break e;case 11:e=BE(null,e,n,s,t);break e;case 14:e=HE(null,e,n,Ir(n.type,s),t);break e}throw Error(Q(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ir(n,r),G1(s,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ir(n,r),UE(s,e,n,r,t);case 3:e:{if(tT(e),s===null)throw Error(Q(387));n=e.pendingProps,i=e.memoizedState,r=i.element,CP(s,e),q0(e,n,null,t);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=zf(Error(Q(423)),e),e=WE(s,e,n,t,r);break e}else if(n!==r){r=zf(Error(Q(424)),e),e=WE(s,e,n,t,r);break e}else for(Gn=Fl(e.stateNode.containerInfo.firstChild),Kn=e,xt=!0,Qr=null,t=AP(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Lf(),n===r){e=uo(s,e,t);break e}Gs(s,e,n,t)}e=e.child}return e;case 5:return kP(e),s===null&&H1(e),n=e.type,r=e.pendingProps,i=s!==null?s.memoizedProps:null,o=r.children,L1(n,r)?o=null:i!==null&&L1(n,i)&&(e.flags|=32),eT(s,e),Gs(s,e,o,t),e.child;case 6:return s===null&&H1(e),null;case 13:return sT(s,e,t);case 4:return YN(e,e.stateNode.containerInfo),n=e.pendingProps,s===null?e.child=Ff(e,null,n,t):Gs(s,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ir(n,r),BE(s,e,n,r,t);case 7:return Gs(s,e,e.pendingProps,t),e.child;case 8:return Gs(s,e,e.pendingProps.children,t),e.child;case 12:return Gs(s,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,ot(W0,n._currentValue),n._currentValue=o,i!==null)if(ii(i.value,o)){if(i.children===r.children&&!bn.current){e=uo(s,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ro(-1,t&-t),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),U1(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),U1(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gs(s,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,ch(e,t),r=wr(r),n=n(r),e.flags|=1,Gs(s,e,n,t),e.child;case 14:return n=e.type,r=Ir(n,e.pendingProps),r=Ir(n.type,r),HE(s,e,n,r,t);case 15:return JP(s,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Ir(n,r),Bx(s,e),e.tag=1,wn(n)?(s=!0,B0(e)):s=!1,ch(e,t),YP(e,n,r),V1(e,n,r,t),K1(null,e,n,!0,s,t);case 19:return nT(s,e,t);case 22:return ZP(s,e,t)}throw Error(Q(156,e.tag))};function yT(s,e){return q2(s,e)}function A5(s,e,t,n){this.tag=s,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(s,e,t,n){return new A5(s,e,t,n)}function dS(s){return s=s.prototype,!(!s||!s.isReactComponent)}function E5(s){if(typeof s=="function")return dS(s)?1:0;if(s!=null){if(s=s.$$typeof,s===kN)return 11;if(s===PN)return 14}return 2}function Hl(s,e){var t=s.alternate;return t===null?(t=gr(s.tag,e,s.key,s.mode),t.elementType=s.elementType,t.type=s.type,t.stateNode=s.stateNode,t.alternate=s,s.alternate=t):(t.pendingProps=e,t.type=s.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=s.flags&14680064,t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,e=s.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=s.sibling,t.index=s.index,t.ref=s.ref,t}function Wx(s,e,t,n,r,i){var o=2;if(n=s,typeof s=="function")dS(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case Vu:return Wd(t.children,r,i,e);case CN:o=8,r|=8;break;case p1:return s=gr(12,t,e,r|2),s.elementType=p1,s.lanes=i,s;case g1:return s=gr(13,t,e,r),s.elementType=g1,s.lanes=i,s;case v1:return s=gr(19,t,e,r),s.elementType=v1,s.lanes=i,s;case k2:return ob(t,r,i,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case E2:o=10;break e;case C2:o=9;break e;case kN:o=11;break e;case PN:o=14;break e;case Ro:o=16,n=null;break e}throw Error(Q(130,s==null?s:typeof s,""))}return e=gr(o,t,e,r),e.elementType=s,e.type=n,e.lanes=i,e}function Wd(s,e,t,n){return s=gr(7,s,n,e),s.lanes=t,s}function ob(s,e,t,n){return s=gr(22,s,n,e),s.elementType=k2,s.lanes=t,s.stateNode={isHidden:!1},s}function ww(s,e,t){return s=gr(6,s,null,e),s.lanes=t,s}function jw(s,e,t){return e=gr(4,s.children!==null?s.children:[],s.key,e),e.lanes=t,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function C5(s,e,t,n,r){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sw(0),this.expirationTimes=sw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sw(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function uS(s,e,t,n,r,i,o,l,c){return s=new C5(s,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gr(3,null,null,e),s.current=i,i.stateNode=s,i.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},KN(i),s}function k5(s,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wu,key:n==null?null:""+n,children:s,containerInfo:e,implementation:t}}function bT(s){if(!s)return Vl;s=s._reactInternals;e:{if(hu(s)!==s||s.tag!==1)throw Error(Q(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(s.tag===1){var t=s.type;if(wn(t))return bP(s,t,e)}return e}function wT(s,e,t,n,r,i,o,l,c){return s=uS(t,n,!0,s,r,i,o,l,c),s.context=bT(null),t=s.current,n=Zs(),r=Bl(t),i=ro(n,r),i.callback=e??null,$l(t,i,r),s.current.lanes=r,bv(s,r,n),jn(s,n),s}function lb(s,e,t,n){var r=e.current,i=Zs(),o=Bl(r);return t=bT(t),e.context===null?e.context=t:e.pendingContext=t,e=ro(i,o),e.payload={element:s},n=n===void 0?null:n,n!==null&&(e.callback=n),s=$l(r,e,o),s!==null&&(ni(s,r,o,i),Fx(s,r,o)),o}function ey(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function eC(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var t=s.retryLane;s.retryLane=t!==0&&t<e?t:e}}function hS(s,e){eC(s,e),(s=s.alternate)&&eC(s,e)}function P5(){return null}var jT=typeof reportError=="function"?reportError:function(s){console.error(s)};function fS(s){this._internalRoot=s}cb.prototype.render=fS.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(Q(409));lb(s,e,null,null)};cb.prototype.unmount=fS.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;Yd(function(){lb(null,s,null,null)}),e[lo]=null}};function cb(s){this._internalRoot=s}cb.prototype.unstable_scheduleHydration=function(s){if(s){var e=Z2();s={blockedOn:null,target:s,priority:e};for(var t=0;t<Do.length&&e!==0&&e<Do[t].priority;t++);Do.splice(t,0,s),t===0&&tP(s)}};function mS(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function db(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function tC(){}function T5(s,e,t,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=ey(o);i.call(d)}}var o=wT(e,n,s,0,null,!1,!1,"",tC);return s._reactRootContainer=o,s[lo]=o.current,jp(s.nodeType===8?s.parentNode:s),Yd(),o}for(;r=s.lastChild;)s.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=ey(c);l.call(d)}}var c=uS(s,0,!1,null,null,!1,!1,"",tC);return s._reactRootContainer=c,s[lo]=c.current,jp(s.nodeType===8?s.parentNode:s),Yd(function(){lb(e,c,t,n)}),c}function ub(s,e,t,n,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=ey(o);l.call(c)}}lb(e,o,s,r)}else o=T5(t,e,s,r,n);return ey(o)}Q2=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var t=Pm(e.pendingLanes);t!==0&&(MN(e,t|1),jn(e,Rt()),!(Ue&6)&&(Bf=Rt()+500,ic()))}break;case 13:Yd(function(){var n=co(s,1);if(n!==null){var r=Zs();ni(n,s,1,r)}}),hS(s,1)}};IN=function(s){if(s.tag===13){var e=co(s,134217728);if(e!==null){var t=Zs();ni(e,s,134217728,t)}hS(s,134217728)}};J2=function(s){if(s.tag===13){var e=Bl(s),t=co(s,e);if(t!==null){var n=Zs();ni(t,s,e,n)}hS(s,e)}};Z2=function(){return et};eP=function(s,e){var t=et;try{return et=s,e()}finally{et=t}};E1=function(s,e,t){switch(e){case"input":if(b1(s,t),e=t.name,t.type==="radio"&&e!=null){for(t=s;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==s&&n.form===s.form){var r=tb(n);if(!r)throw Error(Q(90));T2(n),b1(n,r)}}}break;case"textarea":M2(s,t);break;case"select":e=t.value,e!=null&&ih(s,!!t.multiple,e,!1)}};z2=oS;B2=Yd;var R5={usingClientEntryPoint:!1,Events:[jv,Yu,tb,F2,$2,oS]},ym={findFiberByHostInstance:kc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M5={bundleType:ym.bundleType,version:ym.version,rendererPackageName:ym.rendererPackageName,rendererConfig:ym.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:po.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=W2(s),s===null?null:s.stateNode},findFiberByHostInstance:ym.findFiberByHostInstance||P5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dx.isDisabled&&dx.supportsFiber)try{Qy=dx.inject(M5),Yi=dx}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R5;er.createPortal=function(s,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mS(e))throw Error(Q(200));return k5(s,e,null,t)};er.createRoot=function(s,e){if(!mS(s))throw Error(Q(299));var t=!1,n="",r=jT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=uS(s,1,!1,null,null,t,!1,n,r),s[lo]=e.current,jp(s.nodeType===8?s.parentNode:s),new fS(e)};er.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(Q(188)):(s=Object.keys(s).join(","),Error(Q(268,s)));return s=W2(e),s=s===null?null:s.stateNode,s};er.flushSync=function(s){return Yd(s)};er.hydrate=function(s,e,t){if(!db(e))throw Error(Q(200));return ub(null,s,e,!0,t)};er.hydrateRoot=function(s,e,t){if(!mS(s))throw Error(Q(405));var n=t!=null&&t.hydratedSources||null,r=!1,i="",o=jT;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=wT(e,null,s,1,t??null,r,!1,i,o),s[lo]=e.current,jp(s),n)for(s=0;s<n.length;s++)t=n[s],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new cb(e)};er.render=function(s,e,t){if(!db(e))throw Error(Q(200));return ub(null,s,e,!1,t)};er.unmountComponentAtNode=function(s){if(!db(s))throw Error(Q(40));return s._reactRootContainer?(Yd(function(){ub(null,null,s,!1,function(){s._reactRootContainer=null,s[lo]=null})}),!0):!1};er.unstable_batchedUpdates=oS;er.unstable_renderSubtreeIntoContainer=function(s,e,t,n){if(!db(t))throw Error(Q(200));if(s==null||s._reactInternals===void 0)throw Error(Q(38));return ub(s,e,t,!1,n)};er.version="18.3.1-next-f1338f8080-20240426";function _T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_T)}catch(s){console.error(s)}}_T(),_2.exports=er;var fu=_2.exports;const NT=u2(fu);var ST,sC=fu;ST=sC.createRoot,sC.hydrateRoot;const I5=1,D5=1e6;let _w=0;function O5(){return _w=(_w+1)%Number.MAX_SAFE_INTEGER,_w.toString()}const Nw=new Map,nC=s=>{if(Nw.has(s))return;const e=setTimeout(()=>{Nw.delete(s),cp({type:"REMOVE_TOAST",toastId:s})},D5);Nw.set(s,e)},L5=(s,e)=>{switch(e.type){case"ADD_TOAST":return{...s,toasts:[e.toast,...s.toasts].slice(0,I5)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?nC(t):s.toasts.forEach(n=>{nC(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==e.toastId)}}},Vx=[];let qx={toasts:[]};function cp(s){qx=L5(qx,s),Vx.forEach(e=>{e(qx)})}function Io({...s}){const e=O5(),t=r=>cp({type:"UPDATE_TOAST",toast:{...r,id:e}}),n=()=>cp({type:"DISMISS_TOAST",toastId:e});return cp({type:"ADD_TOAST",toast:{...s,id:e,open:!0,onOpenChange:r=>{r||n()}}}),{id:e,dismiss:n,update:t}}function pS(){const[s,e]=w.useState(qx);return w.useEffect(()=>(Vx.push(e),()=>{const t=Vx.indexOf(e);t>-1&&Vx.splice(t,1)}),[s]),{...s,toast:Io,dismiss:t=>cp({type:"DISMISS_TOAST",toastId:t})}}function me(s,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(s==null||s(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function rC(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function Xd(...s){return e=>{let t=!1;const n=s.map(r=>{const i=rC(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<n.length;r++){const i=n[r];typeof i=="function"?i():rC(s[r],null)}}}}function Ke(...s){return w.useCallback(Xd(...s),s)}function F5(s,e){const t=w.createContext(e),n=i=>{const{children:o,...l}=i,c=w.useMemo(()=>l,Object.values(l));return a.jsx(t.Provider,{value:c,children:o})};n.displayName=s+"Provider";function r(i){const o=w.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${s}\``)}return[n,r]}function ui(s,e=[]){let t=[];function n(i,o){const l=w.createContext(o),c=t.length;t=[...t,o];const d=f=>{var g;const{scope:m,children:p,...x}=f,v=((g=m==null?void 0:m[s])==null?void 0:g[c])||l,b=w.useMemo(()=>x,Object.values(x));return a.jsx(v.Provider,{value:b,children:p})};d.displayName=i+"Provider";function h(f,m){var v;const p=((v=m==null?void 0:m[s])==null?void 0:v[c])||l,x=w.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const r=()=>{const i=t.map(o=>w.createContext(o));return function(l){const c=(l==null?void 0:l[s])||i;return w.useMemo(()=>({[`__scope${s}`]:{...l,[s]:c}}),[l,c])}};return r.scopeName=s,[n,$5(r,...e)]}function $5(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Qd(s){const e=B5(s),t=w.forwardRef((n,r)=>{const{children:i,...o}=n,l=w.Children.toArray(i),c=l.find(U5);if(c){const d=c.props.children,h=l.map(f=>f===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:f);return a.jsx(e,{...o,ref:r,children:w.isValidElement(d)?w.cloneElement(d,void 0,h):null})}return a.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${s}.Slot`,t}var z5=Qd("Slot");function B5(s){const e=w.forwardRef((t,n)=>{const{children:r,...i}=t;if(w.isValidElement(r)){const o=V5(r),l=W5(i,r.props);return r.type!==w.Fragment&&(l.ref=n?Xd(n,o):o),w.cloneElement(r,l)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var H5=Symbol("radix.slottable");function U5(s){return w.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===H5}function W5(s,e){const t={...e};for(const n in e){const r=s[n],i=e[n];/^on[A-Z]/.test(n)?r&&i?t[n]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(t[n]=r):n==="style"?t[n]={...r,...i}:n==="className"&&(t[n]=[r,i].filter(Boolean).join(" "))}return{...s,...t}}function V5(s){var n,r;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function gS(s){const e=s+"CollectionProvider",[t,n]=ui(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:g}=v,y=te.useRef(null),j=te.useRef(new Map).current;return a.jsx(r,{scope:b,itemMap:j,collectionRef:y,children:g})};o.displayName=e;const l=s+"CollectionSlot",c=Qd(l),d=te.forwardRef((v,b)=>{const{scope:g,children:y}=v,j=i(l,g),_=Ke(b,j.collectionRef);return a.jsx(c,{ref:_,children:y})});d.displayName=l;const h=s+"CollectionItemSlot",f="data-radix-collection-item",m=Qd(h),p=te.forwardRef((v,b)=>{const{scope:g,children:y,...j}=v,_=te.useRef(null),S=Ke(b,_),E=i(h,g);return te.useEffect(()=>(E.itemMap.set(_,{ref:_,...j}),()=>void E.itemMap.delete(_))),a.jsx(m,{[f]:"",ref:S,children:y})});p.displayName=h;function x(v){const b=i(s+"CollectionConsumer",v);return te.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const j=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((E,A)=>j.indexOf(E.ref.current)-j.indexOf(A.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},x,n]}var q5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],de=q5.reduce((s,e)=>{const t=Qd(`Primitive.${e}`),n=w.forwardRef((r,i)=>{const{asChild:o,...l}=r,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function AT(s,e){s&&fu.flushSync(()=>s.dispatchEvent(e))}function zt(s){const e=w.useRef(s);return w.useEffect(()=>{e.current=s}),w.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function G5(s,e=globalThis==null?void 0:globalThis.document){const t=zt(s);w.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var K5="DismissableLayer",aj="dismissableLayer.update",Y5="dismissableLayer.pointerDownOutside",X5="dismissableLayer.focusOutside",iC,ET=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nv=w.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=s,d=w.useContext(ET),[h,f]=w.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=w.useState({}),x=Ke(e,A=>f(A)),v=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=v.indexOf(b),y=h?v.indexOf(h):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,_=y>=g,S=J5(A=>{const P=A.target,T=[...d.branches].some(I=>I.contains(P));!_||T||(r==null||r(A),o==null||o(A),A.defaultPrevented||l==null||l())},m),E=Z5(A=>{const P=A.target;[...d.branches].some(I=>I.contains(P))||(i==null||i(A),o==null||o(A),A.defaultPrevented||l==null||l())},m);return G5(A=>{y===d.layers.size-1&&(n==null||n(A),!A.defaultPrevented&&l&&(A.preventDefault(),l()))},m),w.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(iC=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),aC(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=iC)}},[h,m,t,d]),w.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),aC())},[h,d]),w.useEffect(()=>{const A=()=>p({});return document.addEventListener(aj,A),()=>document.removeEventListener(aj,A)},[]),a.jsx(de.div,{...c,ref:x,style:{pointerEvents:j?_?"auto":"none":void 0,...s.style},onFocusCapture:me(s.onFocusCapture,E.onFocusCapture),onBlurCapture:me(s.onBlurCapture,E.onBlurCapture),onPointerDownCapture:me(s.onPointerDownCapture,S.onPointerDownCapture)})});Nv.displayName=K5;var Q5="DismissableLayerBranch",CT=w.forwardRef((s,e)=>{const t=w.useContext(ET),n=w.useRef(null),r=Ke(e,n);return w.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),a.jsx(de.div,{...s,ref:r})});CT.displayName=Q5;function J5(s,e=globalThis==null?void 0:globalThis.document){const t=zt(s),n=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){kT(Y5,t,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function Z5(s,e=globalThis==null?void 0:globalThis.document){const t=zt(s),n=w.useRef(!1);return w.useEffect(()=>{const r=i=>{i.target&&!n.current&&kT(X5,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function aC(){const s=new CustomEvent(aj);document.dispatchEvent(s)}function kT(s,e,t,{discrete:n}){const r=t.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(s,e,{once:!0}),n?AT(r,i):r.dispatchEvent(i)}var e$=Nv,t$=CT,It=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},s$="Portal",Sv=w.forwardRef((s,e)=>{var l;const{container:t,...n}=s,[r,i]=w.useState(!1);It(()=>i(!0),[]);const o=t||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?NT.createPortal(a.jsx(de.div,{...n,ref:e}),o):null});Sv.displayName=s$;function n$(s,e){return w.useReducer((t,n)=>e[t][n]??t,s)}var Nr=s=>{const{present:e,children:t}=s,n=r$(e),r=typeof t=="function"?t({present:n.isPresent}):w.Children.only(t),i=Ke(n.ref,i$(r));return typeof t=="function"||n.isPresent?w.cloneElement(r,{ref:i}):null};Nr.displayName="Presence";function r$(s){const[e,t]=w.useState(),n=w.useRef(null),r=w.useRef(s),i=w.useRef("none"),o=s?"mounted":"unmounted",[l,c]=n$(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=ux(n.current);i.current=l==="mounted"?d:"none"},[l]),It(()=>{const d=n.current,h=r.current;if(h!==s){const m=i.current,p=ux(d);s?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=s}},[s,c]),It(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=p=>{const v=ux(n.current).includes(p.animationName);if(p.target===e&&v&&(c("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=p=>{p.target===e&&(i.current=ux(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{n.current=d?getComputedStyle(d):null,t(d)},[])}}function ux(s){return(s==null?void 0:s.animationName)||"none"}function i$(s){var n,r;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var a$=NN[" useInsertionEffect ".trim().toString()]||It;function Jd({prop:s,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,i,o]=o$({defaultProp:e,onChange:t}),l=s!==void 0,c=l?s:r;{const h=w.useRef(s!==void 0);w.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=w.useCallback(h=>{var f;if(l){const m=l$(h)?h(s):h;m!==s&&((f=o.current)==null||f.call(o,m))}else i(h)},[l,s,i,o]);return[c,d]}function o$({defaultProp:s,onChange:e}){const[t,n]=w.useState(s),r=w.useRef(t),i=w.useRef(e);return a$(()=>{i.current=e},[e]),w.useEffect(()=>{var o;r.current!==t&&((o=i.current)==null||o.call(i,t),r.current=t)},[t,r]),[t,n,i]}function l$(s){return typeof s=="function"}var PT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),c$="VisuallyHidden",vS=w.forwardRef((s,e)=>a.jsx(de.span,{...s,ref:e,style:{...PT,...s.style}}));vS.displayName=c$;var xS="ToastProvider",[yS,d$,u$]=gS("Toast"),[TT,UQ]=ui("Toast",[u$]),[h$,hb]=TT(xS),RT=s=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=s,[l,c]=w.useState(null),[d,h]=w.useState(0),f=w.useRef(!1),m=w.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${xS}\`. Expected non-empty \`string\`.`),a.jsx(yS.Provider,{scope:e,children:a.jsx(h$,{scope:e,label:t,duration:n,swipeDirection:r,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>h(p=>p+1),[]),onToastRemove:w.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};RT.displayName=xS;var MT="ToastViewport",f$=["F8"],oj="toast.viewportPause",lj="toast.viewportResume",IT=w.forwardRef((s,e)=>{const{__scopeToast:t,hotkey:n=f$,label:r="Notifications ({hotkey})",...i}=s,o=hb(MT,t),l=d$(t),c=w.useRef(null),d=w.useRef(null),h=w.useRef(null),f=w.useRef(null),m=Ke(e,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;w.useEffect(()=>{const b=g=>{var j;n.length!==0&&n.every(_=>g[_]||g.code===_)&&((j=f.current)==null||j.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n]),w.useEffect(()=>{const b=c.current,g=f.current;if(x&&b&&g){const y=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(oj);g.dispatchEvent(E),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(lj);g.dispatchEvent(E),o.isClosePausedRef.current=!1}},_=E=>{!b.contains(E.relatedTarget)&&j()},S=()=>{b.contains(document.activeElement)||j()};return b.addEventListener("focusin",y),b.addEventListener("focusout",_),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",j),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",_),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",j)}}},[x,o.isClosePausedRef]);const v=w.useCallback(({tabbingDirection:b})=>{const y=l().map(j=>{const _=j.ref.current,S=[_,...A$(_)];return b==="forwards"?S:S.reverse()});return(b==="forwards"?y.reverse():y).flat()},[l]);return w.useEffect(()=>{const b=f.current;if(b){const g=y=>{var S,E,A;const j=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!j){const P=document.activeElement,T=y.shiftKey;if(y.target===b&&T){(S=d.current)==null||S.focus();return}const L=v({tabbingDirection:T?"backwards":"forwards"}),z=L.findIndex(M=>M===P);Sw(L.slice(z+1))?y.preventDefault():T?(E=d.current)==null||E.focus():(A=h.current)==null||A.focus()}};return b.addEventListener("keydown",g),()=>b.removeEventListener("keydown",g)}},[l,v]),a.jsxs(t$,{ref:c,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&a.jsx(cj,{ref:d,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});Sw(b)}}),a.jsx(yS.Slot,{scope:t,children:a.jsx(de.ol,{tabIndex:-1,...i,ref:m})}),x&&a.jsx(cj,{ref:h,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});Sw(b)}})]})});IT.displayName=MT;var DT="ToastFocusProxy",cj=w.forwardRef((s,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...r}=s,i=hb(DT,t);return a.jsx(vS,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});cj.displayName=DT;var Av="Toast",m$="toast.swipeStart",p$="toast.swipeMove",g$="toast.swipeCancel",v$="toast.swipeEnd",OT=w.forwardRef((s,e)=>{const{forceMount:t,open:n,defaultOpen:r,onOpenChange:i,...o}=s,[l,c]=Jd({prop:n,defaultProp:r??!0,onChange:i,caller:Av});return a.jsx(Nr,{present:t||l,children:a.jsx(b$,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:zt(s.onPause),onResume:zt(s.onResume),onSwipeStart:me(s.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(s.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(s.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(s.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});OT.displayName=Av;var[x$,y$]=TT(Av,{onClose(){}}),b$=w.forwardRef((s,e)=>{const{__scopeToast:t,type:n="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...x}=s,v=hb(Av,t),[b,g]=w.useState(null),y=Ke(e,M=>g(M)),j=w.useRef(null),_=w.useRef(null),S=r||v.duration,E=w.useRef(0),A=w.useRef(S),P=w.useRef(0),{onToastAdd:T,onToastRemove:I}=v,O=zt(()=>{var U;(b==null?void 0:b.contains(document.activeElement))&&((U=v.viewport)==null||U.focus()),o()}),L=w.useCallback(M=>{!M||M===1/0||(window.clearTimeout(P.current),E.current=new Date().getTime(),P.current=window.setTimeout(O,M))},[O]);w.useEffect(()=>{const M=v.viewport;if(M){const U=()=>{L(A.current),d==null||d()},$=()=>{const F=new Date().getTime()-E.current;A.current=A.current-F,window.clearTimeout(P.current),c==null||c()};return M.addEventListener(oj,$),M.addEventListener(lj,U),()=>{M.removeEventListener(oj,$),M.removeEventListener(lj,U)}}},[v.viewport,S,c,d,L]),w.useEffect(()=>{i&&!v.isClosePausedRef.current&&L(S)},[i,S,v.isClosePausedRef,L]),w.useEffect(()=>(T(),()=>I()),[T,I]);const z=w.useMemo(()=>b?UT(b):null,[b]);return v.viewport?a.jsxs(a.Fragment,{children:[z&&a.jsx(w$,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),a.jsx(x$,{scope:t,onClose:O,children:fu.createPortal(a.jsx(yS.ItemSlot,{scope:t,children:a.jsx(e$,{asChild:!0,onEscapeKeyDown:me(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||O(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(de.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:me(s.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:me(s.onPointerDown,M=>{M.button===0&&(j.current={x:M.clientX,y:M.clientY})}),onPointerMove:me(s.onPointerMove,M=>{if(!j.current)return;const U=M.clientX-j.current.x,$=M.clientY-j.current.y,F=!!_.current,D=["left","right"].includes(v.swipeDirection),R=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,H=D?R(0,U):0,X=D?0:R(0,$),B=M.pointerType==="touch"?10:2,V={x:H,y:X},J={originalEvent:M,delta:V};F?(_.current=V,hx(p$,f,J,{discrete:!1})):oC(V,v.swipeDirection,B)?(_.current=V,hx(m$,h,J,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(U)>B||Math.abs($)>B)&&(j.current=null)}),onPointerUp:me(s.onPointerUp,M=>{const U=_.current,$=M.target;if($.hasPointerCapture(M.pointerId)&&$.releasePointerCapture(M.pointerId),_.current=null,j.current=null,U){const F=M.currentTarget,D={originalEvent:M,delta:U};oC(U,v.swipeDirection,v.swipeThreshold)?hx(v$,p,D,{discrete:!0}):hx(g$,m,D,{discrete:!0}),F.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),w$=s=>{const{__scopeToast:e,children:t,...n}=s,r=hb(Av,e),[i,o]=w.useState(!1),[l,c]=w.useState(!1);return N$(()=>o(!0)),w.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:a.jsx(Sv,{asChild:!0,children:a.jsx(vS,{...n,children:i&&a.jsxs(a.Fragment,{children:[r.label," ",t]})})})},j$="ToastTitle",LT=w.forwardRef((s,e)=>{const{__scopeToast:t,...n}=s;return a.jsx(de.div,{...n,ref:e})});LT.displayName=j$;var _$="ToastDescription",FT=w.forwardRef((s,e)=>{const{__scopeToast:t,...n}=s;return a.jsx(de.div,{...n,ref:e})});FT.displayName=_$;var $T="ToastAction",zT=w.forwardRef((s,e)=>{const{altText:t,...n}=s;return t.trim()?a.jsx(HT,{altText:t,asChild:!0,children:a.jsx(bS,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${$T}\`. Expected non-empty \`string\`.`),null)});zT.displayName=$T;var BT="ToastClose",bS=w.forwardRef((s,e)=>{const{__scopeToast:t,...n}=s,r=y$(BT,t);return a.jsx(HT,{asChild:!0,children:a.jsx(de.button,{type:"button",...n,ref:e,onClick:me(s.onClick,r.onClose)})})});bS.displayName=BT;var HT=w.forwardRef((s,e)=>{const{__scopeToast:t,altText:n,...r}=s;return a.jsx(de.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...r,ref:e})});function UT(s){const e=[];return Array.from(s.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),S$(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...UT(n))}}),e}function hx(s,e,t,{discrete:n}){const r=t.originalEvent.currentTarget,i=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(s,e,{once:!0}),n?AT(r,i):r.dispatchEvent(i)}var oC=(s,e,t=0)=>{const n=Math.abs(s.x),r=Math.abs(s.y),i=n>r;return e==="left"||e==="right"?i&&n>t:!i&&r>t};function N$(s=()=>{}){const e=zt(s);It(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function S$(s){return s.nodeType===s.ELEMENT_NODE}function A$(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Sw(s){const e=document.activeElement;return s.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var E$=RT,WT=IT,VT=OT,qT=LT,GT=FT,KT=zT,YT=bS;function XT(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(e=0;e<r;e++)s[e]&&(t=XT(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function QT(){for(var s,e,t=0,n="",r=arguments.length;t<r;t++)(s=arguments[t])&&(e=XT(s))&&(n&&(n+=" "),n+=e);return n}const lC=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,cC=QT,Ev=(s,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return cC(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(d=>{const h=t==null?void 0:t[d],f=i==null?void 0:i[d];if(h===null)return null;const m=lC(h)||lC(f);return r[d][m]}),l=t&&Object.entries(t).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(x=>{let[v,b]=x;return Array.isArray(b)?b.includes({...i,...l}[v]):{...i,...l}[v]===b})?[...d,f,m]:d},[]);return cC(s,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JT=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=w.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...k$,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:JT("lucide",r),...l},[...o.map(([d,h])=>w.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(s,e)=>{const t=w.forwardRef(({className:n,...r},i)=>w.createElement(P$,{ref:i,iconNode:e,className:JT(`lucide-${C$(s)}`,n),...r}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=ce("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=ce("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=ce("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=ce("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=ce("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=ce("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=ce("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=ce("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ce("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=ce("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=ce("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=ce("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NS=ce("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ce("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=ce("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=ce("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=ce("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),AS="-",X$=s=>{const e=J$(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:o=>{const l=o.split(AS);return l[0]===""&&l.length!==1&&l.shift(),lR(l,e)||Q$(o)},getConflictingClassGroupIds:(o,l)=>{const c=t[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},lR=(s,e)=>{var o;if(s.length===0)return e.classGroupId;const t=s[0],n=e.nextPart.get(t),r=n?lR(s.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const i=s.join(AS);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},fC=/^\[(.+)\]$/,Q$=s=>{if(fC.test(s)){const e=fC.exec(s)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},J$=s=>{const{theme:e,prefix:t}=s,n={nextPart:new Map,validators:[]};return e6(Object.entries(s.classGroups),t).forEach(([i,o])=>{gj(o,n,i,e)}),n},gj=(s,e,t,n)=>{s.forEach(r=>{if(typeof r=="string"){const i=r===""?e:mC(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(Z$(r)){gj(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,o])=>{gj(o,mC(e,i),t,n)})})},mC=(s,e)=>{let t=s;return e.split(AS).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},Z$=s=>s.isThemeGetter,e6=(s,e)=>e?s.map(([t,n])=>{const r=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[t,r]}):s,t6=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(i,o)=>{t.set(i,o),e++,e>s&&(e=0,n=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return r(i,o),o},set(i,o){t.has(i)?t.set(i,o):r(i,o)}}},cR="!",s6=s=>{const{separator:e,experimentalParseClassName:t}=s,n=e.length===1,r=e[0],i=e.length,o=l=>{const c=[];let d=0,h=0,f;for(let b=0;b<l.length;b++){let g=l[b];if(d===0){if(g===r&&(n||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(g==="/"){f=b;continue}}g==="["?d++:g==="]"&&d--}const m=c.length===0?l:l.substring(h),p=m.startsWith(cR),x=p?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:v}};return t?l=>t({className:l,parseClassName:o}):o},n6=s=>{if(s.length<=1)return s;const e=[];let t=[];return s.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},r6=s=>({cache:t6(s.cacheSize),parseClassName:s6(s),...X$(s)}),i6=/\s+/,a6=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r}=e,i=[],o=s.trim().split(i6);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=t(d);let x=!!p,v=n(x?m.substring(0,p):m);if(!v){if(!x){l=d+(l.length>0?" "+l:l);continue}if(v=n(m),!v){l=d+(l.length>0?" "+l:l);continue}x=!1}const b=n6(h).join(":"),g=f?b+cR:b,y=g+v;if(i.includes(y))continue;i.push(y);const j=r(v,x);for(let _=0;_<j.length;++_){const S=j[_];i.push(g+S)}l=d+(l.length>0?" "+l:l)}return l};function o6(){let s=0,e,t,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=dR(e))&&(n&&(n+=" "),n+=t);return n}const dR=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=dR(s[n]))&&(t&&(t+=" "),t+=e);return t};function l6(s,...e){let t,n,r,i=o;function o(c){const d=e.reduce((h,f)=>f(h),s());return t=r6(d),n=t.cache.get,r=t.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=a6(c,t);return r(c,h),h}return function(){return i(o6.apply(null,arguments))}}const dt=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},uR=/^\[(?:([a-z-]+):)?(.+)\]$/i,c6=/^\d+\/\d+$/,d6=new Set(["px","full","screen"]),u6=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,h6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,f6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,m6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,p6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,da=s=>hh(s)||d6.has(s)||c6.test(s),No=s=>sm(s,"length",_6),hh=s=>!!s&&!Number.isNaN(Number(s)),Aw=s=>sm(s,"number",hh),bm=s=>!!s&&Number.isInteger(Number(s)),g6=s=>s.endsWith("%")&&hh(s.slice(0,-1)),ke=s=>uR.test(s),So=s=>u6.test(s),v6=new Set(["length","size","percentage"]),x6=s=>sm(s,v6,hR),y6=s=>sm(s,"position",hR),b6=new Set(["image","url"]),w6=s=>sm(s,b6,S6),j6=s=>sm(s,"",N6),wm=()=>!0,sm=(s,e,t)=>{const n=uR.exec(s);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},_6=s=>h6.test(s)&&!f6.test(s),hR=()=>!1,N6=s=>m6.test(s),S6=s=>p6.test(s),A6=()=>{const s=dt("colors"),e=dt("spacing"),t=dt("blur"),n=dt("brightness"),r=dt("borderColor"),i=dt("borderRadius"),o=dt("borderSpacing"),l=dt("borderWidth"),c=dt("contrast"),d=dt("grayscale"),h=dt("hueRotate"),f=dt("invert"),m=dt("gap"),p=dt("gradientColorStops"),x=dt("gradientColorStopPositions"),v=dt("inset"),b=dt("margin"),g=dt("opacity"),y=dt("padding"),j=dt("saturate"),_=dt("scale"),S=dt("sepia"),E=dt("skew"),A=dt("space"),P=dt("translate"),T=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",ke,e],L=()=>[ke,e],z=()=>["",da,No],M=()=>["auto",hh,ke],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",ke],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[hh,ke];return{cacheSize:500,separator:":",theme:{colors:[wm],spacing:[da,No],blur:["none","",So,ke],brightness:X(),borderColor:[s],borderRadius:["none","","full",So,ke],borderSpacing:L(),borderWidth:z(),contrast:X(),grayscale:R(),hueRotate:X(),invert:R(),gap:L(),gradientColorStops:[s],gradientColorStopPositions:[g6,No],inset:O(),margin:O(),opacity:X(),padding:L(),saturate:X(),scale:X(),sepia:R(),skew:X(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",ke]}],container:["container"],columns:[{columns:[So]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),ke]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",bm,ke]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ke]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",bm,ke]}],"grid-cols":[{"grid-cols":[wm]}],"col-start-end":[{col:["auto",{span:["full",bm,ke]},ke]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[wm]}],"row-start-end":[{row:["auto",{span:[bm,ke]},ke]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ke]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ke]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ke,e]}],"min-w":[{"min-w":[ke,e,"min","max","fit"]}],"max-w":[{"max-w":[ke,e,"none","full","min","max","fit","prose",{screen:[So]},So]}],h:[{h:[ke,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ke,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ke,e,"auto","min","max","fit"]}],"font-size":[{text:["base",So,No]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Aw]}],"font-family":[{font:[wm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ke]}],"line-clamp":[{"line-clamp":["none",hh,Aw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",da,ke]}],"list-image":[{"list-image":["none",ke]}],"list-style-type":[{list:["none","disc","decimal",ke]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",da,No]}],"underline-offset":[{"underline-offset":["auto",da,ke]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),y6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",x6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},w6]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[da,ke]}],"outline-w":[{outline:[da,No]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[da,No]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",So,j6]}],"shadow-color":[{shadow:[wm]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",So,ke]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[j]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ke]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",ke]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",ke]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[bm,ke]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ke]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[da,No,Aw]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},E6=l6(A6);function ne(...s){return E6(QT(s))}const C6=E$,fR=w.forwardRef(({className:s,...e},t)=>a.jsx(WT,{ref:t,className:ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...e}));fR.displayName=WT.displayName;const k6=Ev("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),mR=w.forwardRef(({className:s,variant:e,...t},n)=>a.jsx(VT,{ref:n,className:ne(k6({variant:e}),s),...t}));mR.displayName=VT.displayName;const P6=w.forwardRef(({className:s,...e},t)=>a.jsx(KT,{ref:t,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...e}));P6.displayName=KT.displayName;const pR=w.forwardRef(({className:s,...e},t)=>a.jsx(YT,{ref:t,className:ne("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...e,children:a.jsx(go,{className:"h-4 w-4"})}));pR.displayName=YT.displayName;const gR=w.forwardRef(({className:s,...e},t)=>a.jsx(qT,{ref:t,className:ne("text-sm font-semibold",s),...e}));gR.displayName=qT.displayName;const vR=w.forwardRef(({className:s,...e},t)=>a.jsx(GT,{ref:t,className:ne("text-sm opacity-90",s),...e}));vR.displayName=GT.displayName;function T6(){const{toasts:s}=pS();return a.jsxs(C6,{children:[s.map(function({id:e,title:t,description:n,action:r,...i}){return a.jsxs(mR,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[t&&a.jsx(gR,{children:t}),n&&a.jsx(vR,{children:n})]}),r,a.jsx(pR,{})]},e)}),a.jsx(fR,{})]})}var pC=["light","dark"],R6="(prefers-color-scheme: dark)",M6=w.createContext(void 0),I6={setTheme:s=>{},themes:[]},D6=()=>{var s;return(s=w.useContext(M6))!=null?s:I6};w.memo(({forcedTheme:s,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=r?pC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,v=!1,b=!0)=>{let g=o?o[x]:x,y=v?x+"|| ''":`'${g}'`,j="";return r&&b&&!v&&pC.includes(x)&&(j+=`d.style.colorScheme = '${x}';`),t==="class"?v||g?j+=`c.add(${y})`:j+="null":g&&(j+=`d[s](n,${y})`),j},p=s?`!function(){${h}${m(s)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${R6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return w.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var O6=s=>{switch(s){case"success":return $6;case"info":return B6;case"warning":return z6;case"error":return H6;default:return null}},L6=Array(12).fill(0),F6=({visible:s,className:e})=>te.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},te.createElement("div",{className:"sonner-spinner"},L6.map((t,n)=>te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),$6=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),z6=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),B6=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),H6=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),U6=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),W6=()=>{let[s,e]=te.useState(document.hidden);return te.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s},vj=1,V6=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let e=this.subscribers.indexOf(s);this.subscribers.splice(e,1)}),this.publish=s=>{this.subscribers.forEach(e=>e(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var e;let{message:t,...n}=s,r=typeof(s==null?void 0:s.id)=="number"||((e=s.id)==null?void 0:e.length)>0?s.id:vj++,i=this.toasts.find(l=>l.id===r),o=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(l=>l.id===r?(this.publish({...l,...s,id:r,title:t}),{...l,...s,id:r,dismissible:o,title:t}):l):this.addToast({title:t,...n,dismissible:o,id:r}),r},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:s,dismiss:!0})),s),this.message=(s,e)=>this.create({...e,message:s}),this.error=(s,e)=>this.create({...e,message:s,type:"error"}),this.success=(s,e)=>this.create({...e,type:"success",message:s}),this.info=(s,e)=>this.create({...e,type:"info",message:s}),this.warning=(s,e)=>this.create({...e,type:"warning",message:s}),this.loading=(s,e)=>this.create({...e,type:"loading",message:s}),this.promise=(s,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:s,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=s instanceof Promise?s:s(),r=t!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],te.isValidElement(c))r=!1,this.create({id:t,type:"default",message:c});else if(G6(c)&&!c.ok){r=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:d,description:h})}else if(e.success!==void 0){r=!1;let d=typeof e.success=="function"?await e.success(c):e.success,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:d,description:h})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){r=!1;let d=typeof e.error=="function"?await e.error(c):e.error,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:d,description:h})}}).finally(()=>{var c;r&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(s,e)=>{let t=(e==null?void 0:e.id)||vj++;return this.create({jsx:s(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},hn=new V6,q6=(s,e)=>{let t=(e==null?void 0:e.id)||vj++;return hn.addToast({title:s,...e,id:t}),t},G6=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",K6=q6,Y6=()=>hn.toasts,X6=()=>hn.getActiveToasts(),ye=Object.assign(K6,{success:hn.success,info:hn.info,warning:hn.warning,error:hn.error,custom:hn.custom,message:hn.message,promise:hn.promise,dismiss:hn.dismiss,loading:hn.loading},{getHistory:Y6,getToasts:X6});function Q6(s,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}Q6(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function fx(s){return s.label!==void 0}var J6=3,Z6="32px",ez="16px",gC=4e3,tz=356,sz=14,nz=20,rz=200;function Pr(...s){return s.filter(Boolean).join(" ")}function iz(s){let[e,t]=s.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}var az=s=>{var e,t,n,r,i,o,l,c,d,h,f;let{invert:m,toast:p,unstyled:x,interacting:v,setHeights:b,visibleToasts:g,heights:y,index:j,toasts:_,expanded:S,removeToast:E,defaultRichColors:A,closeButton:P,style:T,cancelButtonStyle:I,actionButtonStyle:O,className:L="",descriptionClassName:z="",duration:M,position:U,gap:$,loadingIcon:F,expandByDefault:D,classNames:R,icons:H,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:B}=s,[V,J]=te.useState(null),[ee,le]=te.useState(null),[W,ge]=te.useState(!1),[je,Ee]=te.useState(!1),[Ce,Me]=te.useState(!1),[Nt,St]=te.useState(!1),[hc,yo]=te.useState(!1),[fc,dm]=te.useState(0),[xu,BA]=te.useState(0),um=te.useRef(p.duration||M||gC),HA=te.useRef(null),mc=te.useRef(null),X4=j===0,Q4=j+1<=g,sr=p.type,yu=p.dismissible!==!1,J4=p.className||"",Z4=p.descriptionClassName||"",Gv=te.useMemo(()=>y.findIndex(_e=>_e.toastId===p.id)||0,[y,p.id]),eF=te.useMemo(()=>{var _e;return(_e=p.closeButton)!=null?_e:P},[p.closeButton,P]),UA=te.useMemo(()=>p.duration||M||gC,[p.duration,M]),Kb=te.useRef(0),bu=te.useRef(0),WA=te.useRef(0),wu=te.useRef(null),[tF,sF]=U.split("-"),VA=te.useMemo(()=>y.reduce((_e,tt,ft)=>ft>=Gv?_e:_e+tt.height,0),[y,Gv]),qA=W6(),nF=p.invert||m,Yb=sr==="loading";bu.current=te.useMemo(()=>Gv*$+VA,[Gv,VA]),te.useEffect(()=>{um.current=UA},[UA]),te.useEffect(()=>{ge(!0)},[]),te.useEffect(()=>{let _e=mc.current;if(_e){let tt=_e.getBoundingClientRect().height;return BA(tt),b(ft=>[{toastId:p.id,height:tt,position:p.position},...ft]),()=>b(ft=>ft.filter(Ar=>Ar.toastId!==p.id))}},[b,p.id]),te.useLayoutEffect(()=>{if(!W)return;let _e=mc.current,tt=_e.style.height;_e.style.height="auto";let ft=_e.getBoundingClientRect().height;_e.style.height=tt,BA(ft),b(Ar=>Ar.find(Er=>Er.toastId===p.id)?Ar.map(Er=>Er.toastId===p.id?{...Er,height:ft}:Er):[{toastId:p.id,height:ft,position:p.position},...Ar])},[W,p.title,p.description,b,p.id]);let bo=te.useCallback(()=>{Ee(!0),dm(bu.current),b(_e=>_e.filter(tt=>tt.toastId!==p.id)),setTimeout(()=>{E(p)},rz)},[p,E,b,bu]);te.useEffect(()=>{if(p.promise&&sr==="loading"||p.duration===1/0||p.type==="loading")return;let _e;return S||v||B&&qA?(()=>{if(WA.current<Kb.current){let tt=new Date().getTime()-Kb.current;um.current=um.current-tt}WA.current=new Date().getTime()})():um.current!==1/0&&(Kb.current=new Date().getTime(),_e=setTimeout(()=>{var tt;(tt=p.onAutoClose)==null||tt.call(p,p),bo()},um.current)),()=>clearTimeout(_e)},[S,v,p,sr,B,qA,bo]),te.useEffect(()=>{p.delete&&bo()},[bo,p.delete]);function rF(){var _e,tt,ft;return H!=null&&H.loading?te.createElement("div",{className:Pr(R==null?void 0:R.loader,(_e=p==null?void 0:p.classNames)==null?void 0:_e.loader,"sonner-loader"),"data-visible":sr==="loading"},H.loading):F?te.createElement("div",{className:Pr(R==null?void 0:R.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":sr==="loading"},F):te.createElement(F6,{className:Pr(R==null?void 0:R.loader,(ft=p==null?void 0:p.classNames)==null?void 0:ft.loader),visible:sr==="loading"})}return te.createElement("li",{tabIndex:0,ref:mc,className:Pr(L,J4,R==null?void 0:R.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,R==null?void 0:R.default,R==null?void 0:R[sr],(t=p==null?void 0:p.classNames)==null?void 0:t[sr]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:A,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":W,"data-promise":!!p.promise,"data-swiped":hc,"data-removed":je,"data-visible":Q4,"data-y-position":tF,"data-x-position":sF,"data-index":j,"data-front":X4,"data-swiping":Ce,"data-dismissible":yu,"data-type":sr,"data-invert":nF,"data-swipe-out":Nt,"data-swipe-direction":ee,"data-expanded":!!(S||D&&W),style:{"--index":j,"--toasts-before":j,"--z-index":_.length-j,"--offset":`${je?fc:bu.current}px`,"--initial-height":D?"auto":`${xu}px`,...T,...p.style},onDragEnd:()=>{Me(!1),J(null),wu.current=null},onPointerDown:_e=>{Yb||!yu||(HA.current=new Date,dm(bu.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(Me(!0),wu.current={x:_e.clientX,y:_e.clientY}))},onPointerUp:()=>{var _e,tt,ft,Ar;if(Nt||!yu)return;wu.current=null;let Er=Number(((_e=mc.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),wo=Number(((tt=mc.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pc=new Date().getTime()-((ft=HA.current)==null?void 0:ft.getTime()),Cr=V==="x"?Er:wo,jo=Math.abs(Cr)/pc;if(Math.abs(Cr)>=nz||jo>.11){dm(bu.current),(Ar=p.onDismiss)==null||Ar.call(p,p),le(V==="x"?Er>0?"right":"left":wo>0?"down":"up"),bo(),St(!0),yo(!1);return}Me(!1),J(null)},onPointerMove:_e=>{var tt,ft,Ar,Er;if(!wu.current||!yu||((tt=window.getSelection())==null?void 0:tt.toString().length)>0)return;let wo=_e.clientY-wu.current.y,pc=_e.clientX-wu.current.x,Cr=(ft=s.swipeDirections)!=null?ft:iz(U);!V&&(Math.abs(pc)>1||Math.abs(wo)>1)&&J(Math.abs(pc)>Math.abs(wo)?"x":"y");let jo={x:0,y:0};V==="y"?(Cr.includes("top")||Cr.includes("bottom"))&&(Cr.includes("top")&&wo<0||Cr.includes("bottom")&&wo>0)&&(jo.y=wo):V==="x"&&(Cr.includes("left")||Cr.includes("right"))&&(Cr.includes("left")&&pc<0||Cr.includes("right")&&pc>0)&&(jo.x=pc),(Math.abs(jo.x)>0||Math.abs(jo.y)>0)&&yo(!0),(Ar=mc.current)==null||Ar.style.setProperty("--swipe-amount-x",`${jo.x}px`),(Er=mc.current)==null||Er.style.setProperty("--swipe-amount-y",`${jo.y}px`)}},eF&&!p.jsx?te.createElement("button",{"aria-label":X,"data-disabled":Yb,"data-close-button":!0,onClick:Yb||!yu?()=>{}:()=>{var _e;bo(),(_e=p.onDismiss)==null||_e.call(p,p)},className:Pr(R==null?void 0:R.closeButton,(r=p==null?void 0:p.classNames)==null?void 0:r.closeButton)},(i=H==null?void 0:H.close)!=null?i:U6):null,p.jsx||w.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:te.createElement(te.Fragment,null,sr||p.icon||p.promise?te.createElement("div",{"data-icon":"",className:Pr(R==null?void 0:R.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||rF():null,p.type!=="loading"?p.icon||(H==null?void 0:H[sr])||O6(sr):null):null,te.createElement("div",{"data-content":"",className:Pr(R==null?void 0:R.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},te.createElement("div",{"data-title":"",className:Pr(R==null?void 0:R.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?te.createElement("div",{"data-description":"",className:Pr(z,Z4,R==null?void 0:R.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),w.isValidElement(p.cancel)?p.cancel:p.cancel&&fx(p.cancel)?te.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||I,onClick:_e=>{var tt,ft;fx(p.cancel)&&yu&&((ft=(tt=p.cancel).onClick)==null||ft.call(tt,_e),bo())},className:Pr(R==null?void 0:R.cancelButton,(h=p==null?void 0:p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,w.isValidElement(p.action)?p.action:p.action&&fx(p.action)?te.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||O,onClick:_e=>{var tt,ft;fx(p.action)&&((ft=(tt=p.action).onClick)==null||ft.call(tt,_e),!_e.defaultPrevented&&bo())},className:Pr(R==null?void 0:R.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function vC(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function oz(s,e){let t={};return[s,e].forEach((n,r)=>{let i=r===1,o=i?"--mobile-offset":"--offset",l=i?ez:Z6;function c(d){["top","right","bottom","left"].forEach(h=>{t[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?t[`${o}-${d}`]=l:t[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),t}var lz=w.forwardRef(function(s,e){let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:f,duration:m,style:p,visibleToasts:x=J6,toastOptions:v,dir:b=vC(),gap:g=sz,loadingIcon:y,icons:j,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=s,[E,A]=te.useState([]),P=te.useMemo(()=>Array.from(new Set([n].concat(E.filter(B=>B.position).map(B=>B.position)))),[E,n]),[T,I]=te.useState([]),[O,L]=te.useState(!1),[z,M]=te.useState(!1),[U,$]=te.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=te.useRef(null),D=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=te.useRef(null),H=te.useRef(!1),X=te.useCallback(B=>{A(V=>{var J;return(J=V.find(ee=>ee.id===B.id))!=null&&J.delete||hn.dismiss(B.id),V.filter(({id:ee})=>ee!==B.id)})},[]);return te.useEffect(()=>hn.subscribe(B=>{if(B.dismiss){A(V=>V.map(J=>J.id===B.id?{...J,delete:!0}:J));return}setTimeout(()=>{NT.flushSync(()=>{A(V=>{let J=V.findIndex(ee=>ee.id===B.id);return J!==-1?[...V.slice(0,J),{...V[J],...B},...V.slice(J+1)]:[B,...V]})})})}),[]),te.useEffect(()=>{if(h!=="system"){$(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:V})=>{$(V?"dark":"light")})}catch{B.addListener(({matches:J})=>{try{$(J?"dark":"light")}catch(ee){console.error(ee)}})}},[h]),te.useEffect(()=>{E.length<=1&&L(!1)},[E]),te.useEffect(()=>{let B=V=>{var J,ee;r.every(le=>V[le]||V.code===le)&&(L(!0),(J=F.current)==null||J.focus()),V.code==="Escape"&&(document.activeElement===F.current||(ee=F.current)!=null&&ee.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),te.useEffect(()=>{if(F.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,H.current=!1)}},[F.current]),te.createElement("section",{ref:e,"aria-label":`${_} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((B,V)=>{var J;let[ee,le]=B.split("-");return E.length?te.createElement("ol",{key:B,dir:b==="auto"?vC():b,tabIndex:-1,ref:F,className:l,"data-sonner-toaster":!0,"data-theme":U,"data-y-position":ee,"data-lifted":O&&E.length>1&&!i,"data-x-position":le,style:{"--front-toast-height":`${((J=T[0])==null?void 0:J.height)||0}px`,"--width":`${tz}px`,"--gap":`${g}px`,...p,...oz(c,d)},onBlur:W=>{H.current&&!W.currentTarget.contains(W.relatedTarget)&&(H.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||H.current||(H.current=!0,R.current=W.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{z||L(!1)},onDragEnd:()=>L(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},E.filter(W=>!W.position&&V===0||W.position===B).map((W,ge)=>{var je,Ee;return te.createElement(az,{key:W.id,icons:j,index:ge,toast:W,defaultRichColors:f,duration:(je=v==null?void 0:v.duration)!=null?je:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:x,closeButton:(Ee=v==null?void 0:v.closeButton)!=null?Ee:o,interacting:z,position:B,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:X,toasts:E.filter(Ce=>Ce.position==W.position),heights:T.filter(Ce=>Ce.position==W.position),setHeights:I,expandByDefault:i,gap:g,loadingIcon:y,expanded:O,pauseWhenPageIsHidden:S,swipeDirections:s.swipeDirections})})):null}))});const cz=({...s})=>{const{theme:e="system"}=D6();return a.jsx(lz,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};var pb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gb=typeof window>"u"||"Deno"in globalThis;function Dr(){}function dz(s,e){return typeof s=="function"?s(e):s}function uz(s){return typeof s=="number"&&s>=0&&s!==1/0}function hz(s,e){return Math.max(s+(e||0)-Date.now(),0)}function xj(s,e){return typeof s=="function"?s(e):s}function fz(s,e){return typeof s=="function"?s(e):s}function xC(s,e){const{type:t="all",exact:n,fetchStatus:r,predicate:i,queryKey:o,stale:l}=s;if(o){if(n){if(e.queryHash!==ES(o,e.options))return!1}else if(!Rp(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function yC(s,e){const{exact:t,status:n,predicate:r,mutationKey:i}=s;if(i){if(!e.options.mutationKey)return!1;if(t){if(Tp(e.options.mutationKey)!==Tp(i))return!1}else if(!Rp(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function ES(s,e){return((e==null?void 0:e.queryKeyHashFn)||Tp)(s)}function Tp(s){return JSON.stringify(s,(e,t)=>yj(t)?Object.keys(t).sort().reduce((n,r)=>(n[r]=t[r],n),{}):t)}function Rp(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?Object.keys(e).every(t=>Rp(s[t],e[t])):!1}function xR(s,e){if(s===e)return s;const t=bC(s)&&bC(e);if(t||yj(s)&&yj(e)){const n=t?s:Object.keys(s),r=n.length,i=t?e:Object.keys(e),o=i.length,l=t?[]:{},c=new Set(n);let d=0;for(let h=0;h<o;h++){const f=t?h:i[h];(!t&&c.has(f)||t)&&s[f]===void 0&&e[f]===void 0?(l[f]=void 0,d++):(l[f]=xR(s[f],e[f]),l[f]===s[f]&&s[f]!==void 0&&d++)}return r===o&&d===r?s:l}return e}function bC(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function yj(s){if(!wC(s))return!1;const e=s.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!wC(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function wC(s){return Object.prototype.toString.call(s)==="[object Object]"}function mz(s){return new Promise(e=>{setTimeout(e,s)})}function pz(s,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(s,e):t.structuralSharing!==!1?xR(s,e):e}function gz(s,e,t=0){const n=[...s,e];return t&&n.length>t?n.slice(1):n}function vz(s,e,t=0){const n=[e,...s];return t&&n.length>t?n.slice(0,-1):n}var CS=Symbol();function yR(s,e){return!s.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!s.queryFn||s.queryFn===CS?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var Rc,$o,vh,s2,xz=(s2=class extends pb{constructor(){super();C(this,Rc);C(this,$o);C(this,vh);N(this,vh,e=>{if(!gb&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){u(this,$o)||this.setEventListener(u(this,vh))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,$o))==null||e.call(this),N(this,$o,void 0))}setEventListener(e){var t;N(this,vh,e),(t=u(this,$o))==null||t.call(this),N(this,$o,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){u(this,Rc)!==e&&(N(this,Rc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof u(this,Rc)=="boolean"?u(this,Rc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Rc=new WeakMap,$o=new WeakMap,vh=new WeakMap,s2),bR=new xz,xh,zo,yh,n2,yz=(n2=class extends pb{constructor(){super();C(this,xh,!0);C(this,zo);C(this,yh);N(this,yh,e=>{if(!gb&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){u(this,zo)||this.setEventListener(u(this,yh))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,zo))==null||e.call(this),N(this,zo,void 0))}setEventListener(e){var t;N(this,yh,e),(t=u(this,zo))==null||t.call(this),N(this,zo,e(this.setOnline.bind(this)))}setOnline(e){u(this,xh)!==e&&(N(this,xh,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return u(this,xh)}},xh=new WeakMap,zo=new WeakMap,yh=new WeakMap,n2),ny=new yz;function bz(){let s,e;const t=new Promise((r,i)=>{s=r,e=i});t.status="pending",t.catch(()=>{});function n(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{n({status:"fulfilled",value:r}),s(r)},t.reject=r=>{n({status:"rejected",reason:r}),e(r)},t}function wz(s){return Math.min(1e3*2**s,3e4)}function wR(s){return(s??"online")==="online"?ny.isOnline():!0}var jR=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function Ew(s){return s instanceof jR}function _R(s){let e=!1,t=0,n=!1,r;const i=bz(),o=v=>{var b;n||(m(new jR(v)),(b=s.abort)==null||b.call(s))},l=()=>{e=!0},c=()=>{e=!1},d=()=>bR.isFocused()&&(s.networkMode==="always"||ny.isOnline())&&s.canRun(),h=()=>wR(s.networkMode)&&s.canRun(),f=v=>{var b;n||(n=!0,(b=s.onSuccess)==null||b.call(s,v),r==null||r(),i.resolve(v))},m=v=>{var b;n||(n=!0,(b=s.onError)==null||b.call(s,v),r==null||r(),i.reject(v))},p=()=>new Promise(v=>{var b;r=g=>{(n||d())&&v(g)},(b=s.onPause)==null||b.call(s)}).then(()=>{var v;r=void 0,n||(v=s.onContinue)==null||v.call(s)}),x=()=>{if(n)return;let v;const b=t===0?s.initialPromise:void 0;try{v=b??s.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var E;if(n)return;const y=s.retry??(gb?0:3),j=s.retryDelay??wz,_=typeof j=="function"?j(t,g):j,S=y===!0||typeof y=="number"&&t<y||typeof y=="function"&&y(t,g);if(e||!S){m(g);return}t++,(E=s.onFail)==null||E.call(s,t,g),mz(_).then(()=>d()?void 0:p()).then(()=>{e?m(g):x()})})};return{promise:i,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():p().then(x),i)}}var jz=s=>setTimeout(s,0);function _z(){let s=[],e=0,t=l=>{l()},n=l=>{l()},r=jz;const i=l=>{e?s.push(l):r(()=>{t(l)})},o=()=>{const l=s;s=[],l.length&&r(()=>{n(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{r=l}}}var Ys=_z(),Mc,r2,NR=(r2=class{constructor(){C(this,Mc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),uz(this.gcTime)&&N(this,Mc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(gb?1/0:5*60*1e3))}clearGcTimeout(){u(this,Mc)&&(clearTimeout(u(this,Mc)),N(this,Mc,void 0))}},Mc=new WeakMap,r2),bh,Ic,rr,Dc,ks,Hp,Oc,Or,ha,i2,Nz=(i2=class extends NR{constructor(e){super();C(this,Or);C(this,bh);C(this,Ic);C(this,rr);C(this,Dc);C(this,ks);C(this,Hp);C(this,Oc);N(this,Oc,!1),N(this,Hp,e.defaultOptions),this.setOptions(e.options),this.observers=[],N(this,Dc,e.client),N(this,rr,u(this,Dc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,N(this,bh,Az(this.options)),this.state=e.state??u(this,bh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=u(this,ks))==null?void 0:e.promise}setOptions(e){this.options={...u(this,Hp),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&u(this,rr).remove(this)}setData(e,t){const n=pz(this.state.data,e,this.options);return k(this,Or,ha).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){k(this,Or,ha).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,r;const t=(n=u(this,ks))==null?void 0:n.promise;return(r=u(this,ks))==null||r.cancel(e),t?t.then(Dr).catch(Dr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(u(this,bh))}isActive(){return this.observers.some(e=>fz(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===CS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>xj(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!hz(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,ks))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,ks))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),u(this,rr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(u(this,ks)&&(u(this,Oc)?u(this,ks).cancel({revert:!0}):u(this,ks).cancelRetry()),this.scheduleGc()),u(this,rr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,Or,ha).call(this,{type:"invalidate"})}fetch(e,t){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(u(this,ks))return u(this,ks).continueRetry(),u(this,ks).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,r=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(N(this,Oc,!0),n.signal)})},i=()=>{const m=yR(this.options,t),x=(()=>{const v={client:u(this,Dc),queryKey:this.queryKey,meta:this.meta};return r(v),v})();return N(this,Oc,!1),this.options.persister?this.options.persister(m,x,this):m(x)},l=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:u(this,Dc),state:this.state,fetchFn:i};return r(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),N(this,Ic,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&k(this,Or,ha).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var p,x,v,b;Ew(m)&&m.silent||k(this,Or,ha).call(this,{type:"error",error:m}),Ew(m)||((x=(p=u(this,rr).config).onError)==null||x.call(p,m,this),(b=(v=u(this,rr).config).onSettled)==null||b.call(v,this.state.data,m,this)),this.scheduleGc()};return N(this,ks,_R({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,x,v,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(g){c(g);return}(x=(p=u(this,rr).config).onSuccess)==null||x.call(p,m,this),(b=(v=u(this,rr).config).onSettled)==null||b.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{k(this,Or,ha).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{k(this,Or,ha).call(this,{type:"pause"})},onContinue:()=>{k(this,Or,ha).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),u(this,ks).start()}},bh=new WeakMap,Ic=new WeakMap,rr=new WeakMap,Dc=new WeakMap,ks=new WeakMap,Hp=new WeakMap,Oc=new WeakMap,Or=new WeakSet,ha=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Sz(n.data,this.options),fetchMeta:e.meta??null};case"success":return N(this,Ic,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return Ew(r)&&r.revert&&u(this,Ic)?{...u(this,Ic),fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Ys.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),u(this,rr).notify({query:this,type:"updated",action:e})})},i2);function Sz(s,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:wR(e.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Az(s){const e=typeof s.initialData=="function"?s.initialData():s.initialData,t=e!==void 0,n=t?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var yi,a2,Ez=(a2=class extends pb{constructor(e={}){super();C(this,yi);this.config=e,N(this,yi,new Map)}build(e,t,n){const r=t.queryKey,i=t.queryHash??ES(r,t);let o=this.get(i);return o||(o=new Nz({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){u(this,yi).has(e.queryHash)||(u(this,yi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=u(this,yi).get(e.queryHash);t&&(e.destroy(),t===e&&u(this,yi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ys.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return u(this,yi).get(e)}getAll(){return[...u(this,yi).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>xC(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>xC(e,n)):t}notify(e){Ys.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ys.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ys.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},yi=new WeakMap,a2),bi,Bs,Lc,wi,Co,o2,Cz=(o2=class extends NR{constructor(e){super();C(this,wi);C(this,bi);C(this,Bs);C(this,Lc);this.mutationId=e.mutationId,N(this,Bs,e.mutationCache),N(this,bi,[]),this.state=e.state||kz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){u(this,bi).includes(e)||(u(this,bi).push(e),this.clearGcTimeout(),u(this,Bs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){N(this,bi,u(this,bi).filter(t=>t!==e)),this.scheduleGc(),u(this,Bs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){u(this,bi).length||(this.state.status==="pending"?this.scheduleGc():u(this,Bs).remove(this))}continue(){var e;return((e=u(this,Lc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,l,c,d,h,f,m,p,x,v,b,g,y,j,_,S,E,A,P;const t=()=>{k(this,wi,Co).call(this,{type:"continue"})};N(this,Lc,_R({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,I)=>{k(this,wi,Co).call(this,{type:"failed",failureCount:T,error:I})},onPause:()=>{k(this,wi,Co).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>u(this,Bs).canRun(this)}));const n=this.state.status==="pending",r=!u(this,Lc).canStart();try{if(n)t();else{k(this,wi,Co).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(i=u(this,Bs).config).onMutate)==null?void 0:o.call(i,e,this));const I=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));I!==this.state.context&&k(this,wi,Co).call(this,{type:"pending",context:I,variables:e,isPaused:r})}const T=await u(this,Lc).start();return await((h=(d=u(this,Bs).config).onSuccess)==null?void 0:h.call(d,T,e,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,T,e,this.state.context)),await((x=(p=u(this,Bs).config).onSettled)==null?void 0:x.call(p,T,null,this.state.variables,this.state.context,this)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,T,null,e,this.state.context)),k(this,wi,Co).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(g=u(this,Bs).config).onError)==null?void 0:y.call(g,T,e,this.state.context,this)),await((_=(j=this.options).onError)==null?void 0:_.call(j,T,e,this.state.context)),await((E=(S=u(this,Bs).config).onSettled)==null?void 0:E.call(S,void 0,T,this.state.variables,this.state.context,this)),await((P=(A=this.options).onSettled)==null?void 0:P.call(A,void 0,T,e,this.state.context)),T}finally{k(this,wi,Co).call(this,{type:"error",error:T})}}finally{u(this,Bs).runNext(this)}}},bi=new WeakMap,Bs=new WeakMap,Lc=new WeakMap,wi=new WeakSet,Co=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ys.batch(()=>{u(this,bi).forEach(n=>{n.onMutationUpdate(e)}),u(this,Bs).notify({mutation:this,type:"updated",action:e})})},o2);function kz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ja,Lr,Up,l2,Pz=(l2=class extends pb{constructor(e={}){super();C(this,ja);C(this,Lr);C(this,Up);this.config=e,N(this,ja,new Set),N(this,Lr,new Map),N(this,Up,0)}build(e,t,n){const r=new Cz({mutationCache:this,mutationId:++Jt(this,Up)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){u(this,ja).add(e);const t=mx(e);if(typeof t=="string"){const n=u(this,Lr).get(t);n?n.push(e):u(this,Lr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(u(this,ja).delete(e)){const t=mx(e);if(typeof t=="string"){const n=u(this,Lr).get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&u(this,Lr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=mx(e);if(typeof t=="string"){const n=u(this,Lr).get(t),r=n==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var n;const t=mx(e);if(typeof t=="string"){const r=(n=u(this,Lr).get(t))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ys.batch(()=>{u(this,ja).forEach(e=>{this.notify({type:"removed",mutation:e})}),u(this,ja).clear(),u(this,Lr).clear()})}getAll(){return Array.from(u(this,ja))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>yC(t,n))}findAll(e={}){return this.getAll().filter(t=>yC(e,t))}notify(e){Ys.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ys.batch(()=>Promise.all(e.map(t=>t.continue().catch(Dr))))}},ja=new WeakMap,Lr=new WeakMap,Up=new WeakMap,l2);function mx(s){var e;return(e=s.options.scope)==null?void 0:e.id}function jC(s){return{onFetch:(e,t)=>{var h,f,m,p,x;const n=e.options,r=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const b=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},g=yR(e.options,e.fetchOptions),y=async(j,_,S)=>{if(v)return Promise.reject();if(_==null&&j.pages.length)return Promise.resolve(j);const A=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};return b(O),O})(),P=await g(A),{maxPages:T}=e.options,I=S?vz:gz;return{pages:I(j.pages,P,T),pageParams:I(j.pageParams,_,T)}};if(r&&i.length){const j=r==="backward",_=j?Tz:_C,S={pages:i,pageParams:o},E=_(n,S);l=await y(S,E,j)}else{const j=s??i.length;do{const _=c===0?o[0]??n.initialPageParam:_C(n,l);if(c>0&&_==null)break;l=await y(l,_),c++}while(c<j)}return l};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function _C(s,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?s.getNextPageParam(e[n],e,t[n],t):void 0}function Tz(s,{pages:e,pageParams:t}){var n;return e.length>0?(n=s.getPreviousPageParam)==null?void 0:n.call(s,e[0],e,t[0],t):void 0}var Et,Bo,Ho,wh,jh,Uo,_h,Nh,c2,Rz=(c2=class{constructor(s={}){C(this,Et);C(this,Bo);C(this,Ho);C(this,wh);C(this,jh);C(this,Uo);C(this,_h);C(this,Nh);N(this,Et,s.queryCache||new Ez),N(this,Bo,s.mutationCache||new Pz),N(this,Ho,s.defaultOptions||{}),N(this,wh,new Map),N(this,jh,new Map),N(this,Uo,0)}mount(){Jt(this,Uo)._++,u(this,Uo)===1&&(N(this,_h,bR.subscribe(async s=>{s&&(await this.resumePausedMutations(),u(this,Et).onFocus())})),N(this,Nh,ny.subscribe(async s=>{s&&(await this.resumePausedMutations(),u(this,Et).onOnline())})))}unmount(){var s,e;Jt(this,Uo)._--,u(this,Uo)===0&&((s=u(this,_h))==null||s.call(this),N(this,_h,void 0),(e=u(this,Nh))==null||e.call(this),N(this,Nh,void 0))}isFetching(s){return u(this,Et).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return u(this,Bo).findAll({...s,status:"pending"}).length}getQueryData(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=u(this,Et).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(s){const e=this.defaultQueryOptions(s),t=u(this,Et).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(s):(s.revalidateIfStale&&t.isStaleByTime(xj(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(s){return u(this,Et).findAll(s).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(s,e,t){const n=this.defaultQueryOptions({queryKey:s}),r=u(this,Et).get(n.queryHash),i=r==null?void 0:r.state.data,o=dz(e,i);if(o!==void 0)return u(this,Et).build(this,n).setData(o,{...t,manual:!0})}setQueriesData(s,e,t){return Ys.batch(()=>u(this,Et).findAll(s).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=u(this,Et).get(e.queryHash))==null?void 0:t.state}removeQueries(s){const e=u(this,Et);Ys.batch(()=>{e.findAll(s).forEach(t=>{e.remove(t)})})}resetQueries(s,e){const t=u(this,Et);return Ys.batch(()=>(t.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...s},e)))}cancelQueries(s,e={}){const t={revert:!0,...e},n=Ys.batch(()=>u(this,Et).findAll(s).map(r=>r.cancel(t)));return Promise.all(n).then(Dr).catch(Dr)}invalidateQueries(s,e={}){return Ys.batch(()=>(u(this,Et).findAll(s).forEach(t=>{t.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries({...s,type:(s==null?void 0:s.refetchType)??(s==null?void 0:s.type)??"active"},e)))}refetchQueries(s,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=Ys.batch(()=>u(this,Et).findAll(s).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(Dr)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Dr)}fetchQuery(s){const e=this.defaultQueryOptions(s);e.retry===void 0&&(e.retry=!1);const t=u(this,Et).build(this,e);return t.isStaleByTime(xj(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Dr).catch(Dr)}fetchInfiniteQuery(s){return s.behavior=jC(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Dr).catch(Dr)}ensureInfiniteQueryData(s){return s.behavior=jC(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return ny.isOnline()?u(this,Bo).resumePausedMutations():Promise.resolve()}getQueryCache(){return u(this,Et)}getMutationCache(){return u(this,Bo)}getDefaultOptions(){return u(this,Ho)}setDefaultOptions(s){N(this,Ho,s)}setQueryDefaults(s,e){u(this,wh).set(Tp(s),{queryKey:s,defaultOptions:e})}getQueryDefaults(s){const e=[...u(this,wh).values()],t={};return e.forEach(n=>{Rp(s,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(s,e){u(this,jh).set(Tp(s),{mutationKey:s,defaultOptions:e})}getMutationDefaults(s){const e=[...u(this,jh).values()],t={};return e.forEach(n=>{Rp(s,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(s){if(s._defaulted)return s;const e={...u(this,Ho).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return e.queryHash||(e.queryHash=ES(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===CS&&(e.enabled=!1),e}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...u(this,Ho).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){u(this,Et).clear(),u(this,Bo).clear()}},Et=new WeakMap,Bo=new WeakMap,Ho=new WeakMap,wh=new WeakMap,jh=new WeakMap,Uo=new WeakMap,_h=new WeakMap,Nh=new WeakMap,c2),Mz=w.createContext(void 0),Iz=({client:s,children:e})=>(w.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),a.jsx(Mz.Provider,{value:s,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mp(){return Mp=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Mp.apply(this,arguments)}var Il;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Il||(Il={}));const NC="popstate";function Dz(s){s===void 0&&(s={});function e(n,r){let{pathname:i,search:o,hash:l}=n.location;return bj("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:ry(r)}return Lz(e,t,null,s)}function Mt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function SR(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Oz(){return Math.random().toString(36).substr(2,8)}function SC(s,e){return{usr:s.state,key:s.key,idx:e}}function bj(s,e,t,n){return t===void 0&&(t=null),Mp({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?nm(e):e,{state:t,key:e&&e.key||n||Oz()})}function ry(s){let{pathname:e="/",search:t="",hash:n=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function nm(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substr(n),s=s.substr(0,n)),s&&(e.pathname=s)}return e}function Lz(s,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,l=Il.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Mp({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Il.Pop;let b=h(),g=b==null?null:b-d;d=b,c&&c({action:l,location:v.location,delta:g})}function m(b,g){l=Il.Push;let y=bj(v.location,b,g);d=h()+1;let j=SC(y,d),_=v.createHref(y);try{o.pushState(j,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(_)}i&&c&&c({action:l,location:v.location,delta:1})}function p(b,g){l=Il.Replace;let y=bj(v.location,b,g);d=h();let j=SC(y,d),_=v.createHref(y);o.replaceState(j,"",_),i&&c&&c({action:l,location:v.location,delta:0})}function x(b){let g=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof b=="string"?b:ry(b);return y=y.replace(/ $/,"%20"),Mt(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let v={get action(){return l},get location(){return s(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(NC,f),c=b,()=>{r.removeEventListener(NC,f),c=null}},createHref(b){return e(r,b)},createURL:x,encodeLocation(b){let g=x(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:p,go(b){return o.go(b)}};return v}var AC;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(AC||(AC={}));function Fz(s,e,t){return t===void 0&&(t="/"),$z(s,e,t,!1)}function $z(s,e,t,n){let r=typeof e=="string"?nm(e):e,i=kS(r.pathname||"/",t);if(i==null)return null;let o=AR(s);zz(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Qz(i);l=Yz(o[c],d,n)}return l}function AR(s,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Mt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Ul([n,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(Mt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),AR(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Gz(d,i.index),routesMeta:h})};return s.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of ER(i.path))r(i,o,c)}),e}function ER(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=ER(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function zz(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Kz(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const Bz=/^:[\w-]+$/,Hz=3,Uz=2,Wz=1,Vz=10,qz=-2,EC=s=>s==="*";function Gz(s,e){let t=s.split("/"),n=t.length;return t.some(EC)&&(n+=qz),e&&(n+=Uz),t.filter(r=>!EC(r)).reduce((r,i)=>r+(Bz.test(i)?Hz:i===""?Wz:Vz),n)}function Kz(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function Yz(s,e,t){let{routesMeta:n}=s,r={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=CC({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&t&&!n[n.length-1].route.index&&(f=CC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Ul([i,f.pathname]),pathnameBase:tB(Ul([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ul([i,f.pathnameBase]))}return o}function CC(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=Xz(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[f];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:s}}function Xz(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),SR(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function Qz(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return SR(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function kS(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}function Jz(s,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?nm(s):s;return{pathname:t?t.startsWith("/")?t:Zz(t,e):e,search:sB(n),hash:nB(r)}}function Zz(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Cw(s,e,t,n){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eB(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function PS(s,e){let t=eB(s);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function TS(s,e,t,n){n===void 0&&(n=!1);let r;typeof s=="string"?r=nm(s):(r=Mp({},s),Mt(!r.pathname||!r.pathname.includes("?"),Cw("?","pathname","search",r)),Mt(!r.pathname||!r.pathname.includes("#"),Cw("#","pathname","hash",r)),Mt(!r.search||!r.search.includes("#"),Cw("#","search","hash",r)));let i=s===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=t;else{let f=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=Jz(r,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Ul=s=>s.join("/").replace(/\/\/+/g,"/"),tB=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),sB=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,nB=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function rB(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const CR=["post","put","patch","delete"];new Set(CR);const iB=["get",...CR];new Set(iB);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ip(){return Ip=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Ip.apply(this,arguments)}const RS=w.createContext(null),aB=w.createContext(null),oc=w.createContext(null),vb=w.createContext(null),vo=w.createContext({outlet:null,matches:[],isDataRoute:!1}),kR=w.createContext(null);function oB(s,e){let{relative:t}=e===void 0?{}:e;rm()||Mt(!1);let{basename:n,navigator:r}=w.useContext(oc),{hash:i,pathname:o,search:l}=RR(s,{relative:t}),c=o;return n!=="/"&&(c=o==="/"?n:Ul([n,o])),r.createHref({pathname:c,search:l,hash:i})}function rm(){return w.useContext(vb)!=null}function mu(){return rm()||Mt(!1),w.useContext(vb).location}function PR(s){w.useContext(oc).static||w.useLayoutEffect(s)}function xo(){let{isDataRoute:s}=w.useContext(vo);return s?bB():lB()}function lB(){rm()||Mt(!1);let s=w.useContext(RS),{basename:e,future:t,navigator:n}=w.useContext(oc),{matches:r}=w.useContext(vo),{pathname:i}=mu(),o=JSON.stringify(PS(r,t.v7_relativeSplatPath)),l=w.useRef(!1);return PR(()=>{l.current=!0}),w.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let f=TS(d,JSON.parse(o),i,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ul([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,o,i,s])}function TR(){let{matches:s}=w.useContext(vo),e=s[s.length-1];return e?e.params:{}}function RR(s,e){let{relative:t}=e===void 0?{}:e,{future:n}=w.useContext(oc),{matches:r}=w.useContext(vo),{pathname:i}=mu(),o=JSON.stringify(PS(r,n.v7_relativeSplatPath));return w.useMemo(()=>TS(s,JSON.parse(o),i,t==="path"),[s,o,i,t])}function cB(s,e){return dB(s,e)}function dB(s,e,t,n){rm()||Mt(!1);let{navigator:r}=w.useContext(oc),{matches:i}=w.useContext(vo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=mu(),h;if(e){var f;let b=typeof e=="string"?nm(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Mt(!1),h=b}else h=d;let m=h.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Fz(s,{pathname:p}),v=pB(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ul([c,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ul([c,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,t,n);return e&&v?w.createElement(vb.Provider,{value:{location:Ip({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Il.Pop}},v):v}function uB(){let s=yB(),e=rB(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:r},t):null,null)}const hB=w.createElement(uB,null);class fB extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(vo.Provider,{value:this.props.routeContext},w.createElement(kR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mB(s){let{routeContext:e,match:t,children:n}=s,r=w.useContext(RS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(vo.Provider,{value:e},n)}function pB(s,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),s==null){var i;if(!t)return null;if(t.errors)s=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,l=(r=t)==null?void 0:r.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Mt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(t&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:p}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let p,x=!1,v=null,b=null;t&&(p=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||hB,c&&(d<0&&m===0?(x=!0,b=null):d===m&&(x=!0,b=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,m+1)),y=()=>{let j;return p?j=v:x?j=b:f.route.Component?j=w.createElement(f.route.Component,null):f.route.element?j=f.route.element:j=h,w.createElement(mB,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:j})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?w.createElement(fB,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var MR=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(MR||{}),iy=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(iy||{});function gB(s){let e=w.useContext(RS);return e||Mt(!1),e}function vB(s){let e=w.useContext(aB);return e||Mt(!1),e}function xB(s){let e=w.useContext(vo);return e||Mt(!1),e}function IR(s){let e=xB(),t=e.matches[e.matches.length-1];return t.route.id||Mt(!1),t.route.id}function yB(){var s;let e=w.useContext(kR),t=vB(iy.UseRouteError),n=IR(iy.UseRouteError);return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function bB(){let{router:s}=gB(MR.UseNavigateStable),e=IR(iy.UseNavigateStable),t=w.useRef(!1);return PR(()=>{t.current=!0}),w.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?s.navigate(r):s.navigate(r,Ip({fromRouteId:e},i)))},[s,e])}function wB(s,e){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function jB(s){let{to:e,replace:t,state:n,relative:r}=s;rm()||Mt(!1);let{future:i,static:o}=w.useContext(oc),{matches:l}=w.useContext(vo),{pathname:c}=mu(),d=xo(),h=TS(e,PS(l,i.v7_relativeSplatPath),c,r==="path"),f=JSON.stringify(h);return w.useEffect(()=>d(JSON.parse(f),{replace:t,state:n,relative:r}),[d,f,r,t,n]),null}function an(s){Mt(!1)}function _B(s){let{basename:e="/",children:t=null,location:n,navigationType:r=Il.Pop,navigator:i,static:o=!1,future:l}=s;rm()&&Mt(!1);let c=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:o,future:Ip({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=nm(n));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:x="default"}=n,v=w.useMemo(()=>{let b=kS(h,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:p,key:x},navigationType:r}},[c,h,f,m,p,x,r]);return v==null?null:w.createElement(oc.Provider,{value:d},w.createElement(vb.Provider,{children:t,value:v}))}function NB(s){let{children:e,location:t}=s;return cB(wj(e),t)}new Promise(()=>{});function wj(s,e){e===void 0&&(e=[]);let t=[];return w.Children.forEach(s,(n,r)=>{if(!w.isValidElement(n))return;let i=[...e,r];if(n.type===w.Fragment){t.push.apply(t,wj(n.props.children,i));return}n.type!==an&&Mt(!1),!n.props.index||!n.props.children||Mt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=wj(n.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jj(){return jj=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},jj.apply(this,arguments)}function SB(s,e){if(s==null)return{};var t={},n=Object.keys(s),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}function AB(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function EB(s,e){return s.button===0&&(!e||e==="_self")&&!AB(s)}function _j(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let n=s[t];return e.concat(Array.isArray(n)?n.map(r=>[t,r]):[[t,n]])},[]))}function CB(s,e){let t=_j(s);return e&&e.forEach((n,r)=>{t.has(r)||e.getAll(r).forEach(i=>{t.append(r,i)})}),t}const kB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PB="6";try{window.__reactRouterVersion=PB}catch{}const TB="startTransition",kC=NN[TB];function RB(s){let{basename:e,children:t,future:n,window:r}=s,i=w.useRef();i.current==null&&(i.current=Dz({window:r,v5Compat:!0}));let o=i.current,[l,c]=w.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=w.useCallback(f=>{d&&kC?kC(()=>c(f)):c(f)},[c,d]);return w.useLayoutEffect(()=>o.listen(h),[o,h]),w.useEffect(()=>wB(n),[n]),w.createElement(_B,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:n})}const MB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,as=w.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=SB(e,kB),{basename:p}=w.useContext(oc),x,v=!1;if(typeof d=="string"&&IB.test(d)&&(x=d,MB))try{let j=new URL(window.location.href),_=d.startsWith("//")?new URL(j.protocol+d):new URL(d),S=kS(_.pathname,p);_.origin===j.origin&&S!=null?d=S+_.search+_.hash:v=!0}catch{}let b=oB(d,{relative:r}),g=DB(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:f});function y(j){n&&n(j),j.defaultPrevented||g(j)}return w.createElement("a",jj({},m,{href:x||b,onClick:v||i?n:y,ref:t,target:c}))});var PC;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(PC||(PC={}));var TC;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(TC||(TC={}));function DB(s,e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=xo(),d=mu(),h=RR(s,{relative:o});return w.useCallback(f=>{if(EB(f,t)){f.preventDefault();let m=n!==void 0?n:ry(d)===ry(h);c(s,{replace:m,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,n,r,t,s,i,o,l])}function OB(s){let e=w.useRef(_j(s)),t=w.useRef(!1),n=mu(),r=w.useMemo(()=>CB(n.search,t.current?null:e.current),[n.search]),i=xo(),o=w.useCallback((l,c)=>{const d=_j(typeof l=="function"?l(r):l);t.current=!0,i("?"+d,c)},[i,r]);return[r,o]}const Nj=Ev("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-medical text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-card hover:shadow-card-hover",medical:"bg-gradient-medical text-white hover:shadow-elegant hover:scale-[1.02] shadow-card",secondary:"bg-transparent border border-primary text-primary hover:bg-secondary hover:text-secondary-foreground hover:border-secondary",outline:"border border-card-border bg-card hover:bg-muted hover:text-card-foreground",ghost:"hover:bg-muted hover:text-card-foreground",link:"text-primary hover:text-primary-hover underline-offset-4 hover:underline",success:"bg-success text-white hover:opacity-90 shadow-card",warning:"bg-warning text-white hover:opacity-90 shadow-card",error:"bg-error text-white hover:opacity-90 shadow-card"},size:{default:"h-10 px-6 py-2",sm:"h-8 rounded-md px-4 text-xs",lg:"h-12 rounded-medical px-8 text-base",xl:"h-14 rounded-medical px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=w.forwardRef(({className:s,variant:e,size:t,asChild:n=!1,...r},i)=>{const o=n?z5:"button";return a.jsx(o,{className:ne(Nj({variant:e,size:t,className:s})),ref:i,...r})});q.displayName="Button";const LB="modulepreload",FB=function(s){return"/swiss-med-track/"+s},RC={},kv=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=FB(c),c in RC)return;RC[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":LB,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},$B=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>kv(async()=>{const{default:n}=await Promise.resolve().then(()=>im);return{default:n}},[]).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class MS extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class zB extends MS{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class MC extends MS{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class IC extends MS{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Sj;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Sj||(Sj={}));var BB=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class HB{constructor(e,{headers:t={},customFetch:n,region:r=Sj.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=$B(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return BB(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:h}).catch(v=>{throw new zB(v)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new MC(f);if(!f.ok)throw new IC(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield f.json():p==="application/octet-stream"?x=yield f.blob():p==="text/event-stream"?x=f:p==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof IC||r instanceof MC?r.context:void 0}}})}}var pn={},IS={},xb={},Pv={},yb={},bb={},UB=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Wf=UB();const WB=Wf.fetch,DR=Wf.fetch.bind(Wf),OR=Wf.Headers,VB=Wf.Request,qB=Wf.Response,im=Object.freeze(Object.defineProperty({__proto__:null,Headers:OR,Request:VB,Response:qB,default:DR,fetch:WB},Symbol.toStringTag,{value:"Module"})),GB=lF(im);var wb={};Object.defineProperty(wb,"__esModule",{value:!0});let KB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};wb.default=KB;var LR=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(bb,"__esModule",{value:!0});const YB=LR(GB),XB=LR(wb);let QB=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=YB.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let h=null,f=null,m=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&g&&g.length>1&&(m=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const b=await i.text();try{h=JSON.parse(b),Array.isArray(h)&&i.status===404&&(f=[],h=null,p=200,x="OK")}catch{i.status===404&&b===""?(p=204,x="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,p=200,x="OK"),h&&this.shouldThrowOnError)throw new XB.default(h)}return{error:h,data:f,count:m,status:p,statusText:x}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};bb.default=QB;var JB=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(yb,"__esModule",{value:!0});const ZB=JB(bb);let e8=class extends ZB.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};yb.default=e8;var t8=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Pv,"__esModule",{value:!0});const s8=t8(yb);let n8=class extends s8.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Pv.default=n8;var r8=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xb,"__esModule",{value:!0});const jm=r8(Pv);let i8=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new jm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new jm.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new jm.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new jm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new jm.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};xb.default=i8;var FR=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(IS,"__esModule",{value:!0});const a8=FR(xb),o8=FR(Pv);let l8=class $R{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new a8.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $R(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;n||r?(l=n?"HEAD":"GET",Object.entries(t).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",d=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new o8.default({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};IS.default=l8;var am=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pn,"__esModule",{value:!0});pn.PostgrestError=pn.PostgrestBuilder=pn.PostgrestTransformBuilder=pn.PostgrestFilterBuilder=pn.PostgrestQueryBuilder=pn.PostgrestClient=void 0;const zR=am(IS);pn.PostgrestClient=zR.default;const BR=am(xb);pn.PostgrestQueryBuilder=BR.default;const HR=am(Pv);pn.PostgrestFilterBuilder=HR.default;const UR=am(yb);pn.PostgrestTransformBuilder=UR.default;const WR=am(bb);pn.PostgrestBuilder=WR.default;const VR=am(wb);pn.PostgrestError=VR.default;var c8=pn.default={PostgrestClient:zR.default,PostgrestQueryBuilder:BR.default,PostgrestFilterBuilder:HR.default,PostgrestTransformBuilder:UR.default,PostgrestBuilder:WR.default,PostgrestError:VR.default};const{PostgrestClient:d8,PostgrestQueryBuilder:YQ,PostgrestFilterBuilder:XQ,PostgrestTransformBuilder:QQ,PostgrestBuilder:JQ,PostgrestError:ZQ}=c8;class u8{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const h8="2.15.1",f8=`realtime-js/${h8}`,m8="1.0.0",Aj=1e4,p8=1e3,g8=100;var dp;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(dp||(dp={}));var Ut;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Ut||(Ut={}));var Xr;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Xr||(Xr={}));var Ej;(function(s){s.websocket="websocket"})(Ej||(Ej={}));var Sc;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Sc||(Sc={}));class v8{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class qR{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(it||(it={}));const DC=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=x8(o,s,e,r),i),{})},x8=(s,e,t,n)=>{const r=e.find(l=>l.name===s),i=r==null?void 0:r.type,o=t[s];return i&&!n.includes(i)?GR(i,o):Cj(o)},GR=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return j8(e,t)}switch(s){case it.bool:return y8(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return b8(e);case it.json:case it.jsonb:return w8(e);case it.timestamp:return _8(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return Cj(e);default:return Cj(e)}},Cj=s=>s,y8=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},b8=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},w8=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},j8=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>GR(e,l))}return s},_8=s=>typeof s=="string"?s.replace(" ","T"):s,KR=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class kw{constructor(e,t,n={},r=Aj){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var OC;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(OC||(OC={}));class up{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=up.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=up.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=up.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(d,h)=>{o[d]||(c[d]=h)}),this.map(o,(d,h)=>{const f=i[d];if(f){const m=h.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),x=h.filter(b=>p.indexOf(b.presence_ref)<0),v=f.filter(b=>m.indexOf(b.presence_ref)<0);x.length>0&&(l[d]=x),v.length>0&&(c[d]=v)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){const f=e[l].map(p=>p.presence_ref),m=h.filter(p=>f.indexOf(p.presence_ref)<0);e[l].unshift(...m)}n(l,h,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var LC;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(LC||(LC={}));var hp;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(hp||(hp={}));var xa;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(xa||(xa={}));class DS{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new kw(this,Xr.join,this.params,this.timeout),this.rejoinTimer=new qR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ut.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xr.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new up(this),this.broadcastEndpointURL=KR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ut.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[hp.PRESENCE]&&this.bindings[hp.PRESENCE].length>0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(xa.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(xa.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){e==null||e(xa.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(p=x==null?void 0:x.length)!==null&&p!==void 0?p:0,b=[];for(let g=0;g<v;g++){const y=x[g],{filter:{event:j,schema:_,table:S,filter:E}}=y,A=m&&m[g];if(A&&A.event===j&&A.schema===_&&A.table===S&&A.filter===E)b.push(Object.assign(Object.assign({},y),{id:A.id}));else{this.unsubscribe(),this.state=Ut.errored,e==null||e(xa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(xa.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ut.errored,e==null||e(xa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Ut.joined&&e===hp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ut.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new kw(this,Xr.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ut.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new kw(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>g8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Xr;if(n&&[l,c,d,h].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,t,n);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var x,v,b;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(v=p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,v,b,g,y,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,S=(x=p.filter)===null||x===void 0?void 0:x.event;return _&&((v=t.ids)===null||v===void 0?void 0:v.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const _=(y=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((j=t==null?void 0:t.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:v,table:b,commit_timestamp:g,type:y,errors:j}=x;m=Object.assign(Object.assign({},{schema:v,table:b,commit_timestamp:g,eventType:y,new:{},old:{},errors:j}),this._getPayloadRecords(x))}p.callback(m,n)})}_isClosed(){return this.state===Ut.closed}_isJoined(){return this.state===Ut.joined}_isJoining(){return this.state===Ut.joining}_isLeaving(){return this.state===Ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&DS.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xr.close,{},e)}_onError(e){this._on(Xr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=DC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=DC(e.columns,e.old_record)),t}}const FC=()=>{},px={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},N8=[1e3,2e3,5e3,1e4],S8=1e4,A8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E8{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Aj,this.transport=null,this.heartbeatIntervalMs=px.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=FC,this.ref=0,this.reconnectTimer=null,this.logger=FC,this.conn=null,this.sendBuffer=[],this.serializer=new v8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...o)=>kv(async()=>{const{default:l}=await Promise.resolve().then(()=>im);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ej.websocket}`,this.httpEndpoint=KR(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=u8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:m8}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case dp.connecting:return Sc.Connecting;case dp.open:return Sc.Open;case dp.closing:return Sc.Closing;default:return Sc.Closed}}isConnected(){return this.connectionState()===Sc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new DS(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(p8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},px.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:r,payload:i,ref:o}=t,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${r} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(r,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([A8],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const r={access_token:t,version:f8};t&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Xr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new qR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},px.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,i,o,l,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Aj,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:px.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>N8[h-1]||S8,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class OS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Kt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class C8 extends OS{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kj extends OS{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var k8=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const YR=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>kv(async()=>{const{default:n}=await Promise.resolve().then(()=>im);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},P8=()=>k8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kv(()=>Promise.resolve().then(()=>im),void 0)).Response:Response}),Pj=s=>{if(Array.isArray(s))return s.map(t=>Pj(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Pj(n)}),e},T8=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var pu=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const Pw=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),R8=(s,e,t)=>pu(void 0,void 0,void 0,function*(){const n=yield P8();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{const i=s.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new C8(Pw(r),i,o))}).catch(r=>{e(new kj(Pw(r),r))}):e(new kj(Pw(s),s))}),M8=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!n?r:(T8(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function Tv(s,e,t,n,r,i){return pu(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,M8(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>R8(c,l,n))})})}function ay(s,e,t,n){return pu(this,void 0,void 0,function*(){return Tv(s,"GET",e,t,n)})}function xi(s,e,t,n,r){return pu(this,void 0,void 0,function*(){return Tv(s,"POST",e,n,r,t)})}function Tj(s,e,t,n,r){return pu(this,void 0,void 0,function*(){return Tv(s,"PUT",e,n,r,t)})}function I8(s,e,t,n){return pu(this,void 0,void 0,function*(){return Tv(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function XR(s,e,t,n,r){return pu(this,void 0,void 0,function*(){return Tv(s,"DELETE",e,n,r,t)})}var Ls=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const D8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$C={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class O8{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=YR(r)}uploadOrUpdate(e,t,n,r){return Ls(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},$C),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),f=yield(e=="PUT"?Tj:xi)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Ls(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:$C.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield Tj(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(Kt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Ls(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield xi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new OS("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ls(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Ls(this,void 0,void 0,function*(){try{return{data:{path:(yield xi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Ls(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield xi(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Ls(this,void 0,void 0,function*(){try{const r=yield xi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}download(e,t){return Ls(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ay(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Kt(l))return{data:null,error:l};throw l}})}info(e){return Ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield ay(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Pj(n),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}exists(e){return Ls(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield I8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Kt(n)&&n instanceof kj){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Ls(this,void 0,void 0,function*(){try{return{data:yield XR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ls(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},D8),t),{prefix:e||""});return{data:yield xi(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}listV2(e,t){return Ls(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield xi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const L8="2.11.0",F8={"X-Client-Info":`storage-js/${L8}`};var _u=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class $8{constructor(e,t={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},F8),t),this.fetch=YR(n)}listBuckets(){return _u(this,void 0,void 0,function*(){try{return{data:yield ay(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Kt(e))return{data:null,error:e};throw e}})}getBucket(e){return _u(this,void 0,void 0,function*(){try{return{data:yield ay(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return _u(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return _u(this,void 0,void 0,function*(){try{return{data:yield Tj(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Kt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return _u(this,void 0,void 0,function*(){try{return{data:yield xi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return _u(this,void 0,void 0,function*(){try{return{data:yield XR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}}class z8 extends $8{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new O8(this.url,this.headers,e,this.fetch)}}const B8="2.56.0";let Rm="";typeof Deno<"u"?Rm="deno":typeof document<"u"?Rm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rm="react-native":Rm="node";const H8={"X-Client-Info":`supabase-js-${Rm}/${B8}`},U8={headers:H8},W8={schema:"public"},V8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},q8={};var G8=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const K8=s=>{let e;return s?e=s:typeof fetch>"u"?e=DR:e=fetch,(...t)=>e(...t)},Y8=()=>typeof Headers>"u"?OR:Headers,X8=(s,e,t)=>{const n=K8(t),r=Y8();return(i,o)=>G8(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:s;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var Q8=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};function J8(s){return s.endsWith("/")?s:s+"/"}function Z8(s,e){var t,n;const{db:r,auth:i,realtime:o,global:l}=s,{db:c,auth:d,realtime:h,global:f}=e,m={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Q8(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const QR="2.71.1",Ru=30*1e3,Rj=3,Tw=Rj*Ru,eH="http://localhost:9999",tH="supabase.auth.token",sH={"X-Client-Info":`gotrue-js/${QR}`},Mj="X-Supabase-Api-Version",JR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nH=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rH=10*60*1e3;class LS extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Ne(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class iH extends LS{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function aH(s){return Ne(s)&&s.name==="AuthApiError"}class ZR extends LS{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class lc extends LS{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class ko extends lc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function oH(s){return Ne(s)&&s.name==="AuthSessionMissingError"}class gx extends lc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vx extends lc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class xx extends lc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lH(s){return Ne(s)&&s.name==="AuthImplicitGrantRedirectError"}class zC extends lc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ij extends lc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rw(s){return Ne(s)&&s.name==="AuthRetryableFetchError"}class BC extends lc{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Dj extends lc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const oy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),HC=` 	
\r=`.split(""),cH=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<HC.length;e+=1)s[HC[e].charCodeAt(0)]=-2;for(let e=0;e<oy.length;e+=1)s[oy[e].charCodeAt(0)]=e;return s})();function UC(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(oy[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(oy[n]),e.queuedBits-=6}}function eM(s,e,t){const n=cH[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function WC(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{hH(o,n,t)};for(let o=0;o<s.length;o+=1)eM(s.charCodeAt(o),r,i);return e.join("")}function dH(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function uH(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}dH(n,e)}}function hH(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function fH(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<s.length;r+=1)eM(s.charCodeAt(r),t,n);return new Uint8Array(e)}function mH(s){const e=[];return uH(s,t=>e.push(t)),new Uint8Array(e)}function pH(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};return s.forEach(r=>UC(r,t,n)),UC(null,t,n),e.join("")}function gH(s){return Math.round(Date.now()/1e3)+s}function vH(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Tr=()=>typeof window<"u"&&typeof document<"u",gc={tested:!1,writable:!1},tM=()=>{if(!Tr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gc.tested)return gc.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),gc.tested=!0,gc.writable=!0}catch{gc.tested=!0,gc.writable=!1}return gc.writable};function xH(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const sM=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>kv(async()=>{const{default:n}=await Promise.resolve().then(()=>im);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},yH=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Mu=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},vc=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ao=async(s,e)=>{await s.removeItem(e)};class jb{constructor(){this.promise=new jb.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}jb.promiseConstructor=Promise;function Mw(s){const e=s.split(".");if(e.length!==3)throw new Dj("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!nH.test(e[n]))throw new Dj("JWT not in base64url format");return{header:JSON.parse(WC(e[0])),payload:JSON.parse(WC(e[1])),signature:fH(e[2]),raw:{header:e[0],payload:e[1]}}}async function bH(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function wH(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function jH(s){return("0"+s.toString(16)).substr(-2)}function _H(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,jH).join("")}async function NH(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function SH(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await NH(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nu(s,e,t=!1){const n=_H();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await Mu(s,`${e}-code-verifier`,r);const i=await SH(n);return[i,n===i?"plain":"s256"]}const AH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EH(s){const e=s.headers.get(Mj);if(!e||!e.match(AH))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function CH(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function kH(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Su(s){if(!PH.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Iw(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VC(s){return JSON.parse(JSON.stringify(s))}var TH=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const bc=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),RH=[502,503,504];async function qC(s){var e;if(!yH(s))throw new Ij(bc(s),0);if(RH.includes(s.status))throw new Ij(bc(s),s.status);let t;try{t=await s.json()}catch(i){throw new ZR(bc(i),i)}let n;const r=EH(s);if(r&&r.getTime()>=JR["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new BC(bc(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ko}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new BC(bc(t),s.status,t.weak_password.reasons);throw new iH(bc(t),s.status||500,n)}const MH=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function Oe(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[Mj]||(i[Mj]=JR["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await IH(s,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function IH(s,e,t,n,r,i){const o=MH(e,n,r,i);let l;try{l=await s(t,Object.assign({},o))}catch(c){throw console.error(c),new Ij(bc(c),0)}if(l.ok||await qC(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await qC(c)}}function fa(s){var e;let t=null;FH(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=gH(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function GC(s){const e=fa(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Lo(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function DH(s){return{data:s,error:null}}function OH(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,o=TH(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function LH(s){return s}function FH(s){return s.access_token&&s.refresh_token&&s.expires_in}const Dw=["global","local","others"];var $H=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class zH{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=sM(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Dw[0]){if(Dw.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Dw.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Lo})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=$H(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:OH,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ne(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lo})}catch(t){if(Ne(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:LH});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);d[`${b}Page`]=v}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Ne(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Su(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lo})}catch(t){if(Ne(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Su(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Lo})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Su(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Lo})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Su(e.userId);try{const{data:t,error:n}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Su(e.userId),Su(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ne(t))return{data:null,error:t};throw t}}}function KC(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function BH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Au={debug:!!(globalThis&&tM()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nM extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class HH extends nM{}async function UH(s,e,t){Au.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Au.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Au.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{Au.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw Au.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new HH(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Au.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}BH();const WH={url:eH,storageKey:tH,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function YC(s,e,t){return await t()}const Eu={};class Dp{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Dp.nextInstanceID,Dp.nextInstanceID+=1,this.instanceID>0&&Tr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},WH),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new zH({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=sM(r.fetch),this.lock=r.lock||YC,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Tr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=UH:this.lock=YC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:tM()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=KC(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=KC(this.memoryStorage)),Tr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Eu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Eu[this.storageKey]=Object.assign(Object.assign({},Eu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Eu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Eu[this.storageKey]=Object.assign(Object.assign({},Eu[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${QR}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=xH(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Tr()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),lH(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ne(t)?{error:t}:{error:new ZR("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:fa}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Ne(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:h,password:f,options:m}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await Nu(this.storage,this.storageKey)),i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:x},xform:fa})}else if("phone"in e){const{phone:h,password:f,options:m}=e;i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:fa})}else throw new vx("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:GC})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:GC})}else throw new vx("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new gx}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,o,l,c,d,h,f,m,p;let x,v;if("message"in e)x=e.message,v=e.signature;else{const{chain:b,wallet:g,statement:y,options:j}=e;let _;if(Tr())if(typeof g=="object")_=g;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))_=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const S=new URL((t=j==null?void 0:j.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const E=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let A;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")A=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)A=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)x=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),v=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(r=(n=j==null?void 0:j.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=j==null?void 0:j.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((f=(h=j==null?void 0:j.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...j.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const E=await _.signMessage(new TextEncoder().encode(x),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=E}}try{const{data:b,error:g}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:pH(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:fa});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new gx}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(Ne(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const t=await vc(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:o}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:fa});if(await Ao(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new gx}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(Ne(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,l=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:fa}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new gx}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Nu(this.storage,this.storageKey));const{error:f}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:h}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new vx("You must provide either an email or phone number.")}catch(l){if(Ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:fa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Nu(this.storage,this.storageKey)),await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:DH})}catch(i){if(Ne(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new ko;const{error:r}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Ne(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new vx("You must provide either an email or phone number and a type")}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await vc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Tw:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await vc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Iw()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lo}):await this._useSession(async t=>{var n,r,i;const{data:o,error:l}=t;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ko}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Lo})})}catch(t){if(Ne(t))return oH(t)&&(await this._removeSession(),await Ao(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new ko;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Nu(this.storage,this.storageKey));const{data:d,error:h}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Lo});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ko;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=Mw(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ne(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ko;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Tr())throw new xx("No browser detected.");if(e.error||e.error_description||e.error_code)throw new xx(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new zC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xx("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zC("No code detected.");const{data:y,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new xx("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let m=h+f;c&&(m=parseInt(c));const p=m-h;p*1e3<=Ru&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=m-f;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,h);const{data:v,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(Ne(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await vc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(aH(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ao(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=vH(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Nu(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ne(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,d,h;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return Tr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ne(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await wH(async r=>(r>0&&await bH(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fa})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Rw(i)&&Date.now()+o-n<Ru})}catch(n){if(this._debug(t,"error",n),Ne(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Tr()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await vc(this.storage,this.storageKey);if(r&&this.userStorage){let o=await vc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Mu(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Iw()}else if(r&&!r.user&&!r.user){const o=await vc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await Ao(this.storage,this.storageKey+"-user"),await Mu(this.storage,this.storageKey,r)):r.user=Iw()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Tw;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Tw}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Rw(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new ko;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new jb;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ko;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),Ne(i)){const o={session:null,error:i};return Rw(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Mu(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const i=VC(r);await Mu(this.storage,this.storageKey,i)}else{const r=VC(t);await Mu(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Ao(this.storage,this.storageKey),await Ao(this.storage,this.storageKey+"-code-verifier"),await Ao(this.storage,this.storageKey+"-user"),this.userStorage&&await Ao(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ru);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Ru);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Ru}ms, refresh threshold is ${Rj} ticks`),r<=Rj&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nM)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Nu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Ne(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Mw(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+rH>r)return n;const{data:i,error:o}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};n=p.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=Mw(n);t!=null&&t.allowExpired||CH(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:r,signature:o},error:null}}const h=kH(r.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,mH(`${l}.${c}`)))throw new Dj("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}}Dp.nextInstanceID=0;const VH=Dp;class qH extends VH{constructor(e){super(e)}}var GH=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class KH{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=J8(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:W8,realtime:q8,auth:Object.assign(Object.assign({},V8),{storageKey:d}),global:U8},f=Z8(n??{},h);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=X8(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new d8(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new z8(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new HB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return GH(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qH({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new E8(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YH=(s,e,t)=>new KH(s,e,t);function XH(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}XH()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const QH="https://azthgtmchlqhtzlgwolw.supabase.co",JH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6dGhndG1jaGxxaHR6bGd3b2x3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMjQ5ODksImV4cCI6MjA3MDkwMDk4OX0.h5Cl_qJHDWlnGArMe8pQCn0rwhYUYBcdaviIvpxryAo",Z=YH(QH,JH,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),ZH=w.createContext({user:null,session:null,loading:!0,signOut:async()=>{},isAdmin:!1,userProfile:null}),oa=()=>{const s=w.useContext(ZH);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},Ds=()=>{const{user:s,signOut:e,isAdmin:t,userProfile:n,loading:r}=oa();xo(),console.log("[Header] Loading:",r),console.log("[Header] User:",s==null?void 0:s.email),console.log("[Header] UserProfile:",n),console.log("[Header] UserProfile Role:",n==null?void 0:n.role);const i=async()=>{try{console.log("[Header] Starting sign out..."),await e(),console.log("[Header] Sign out completed, navigating to home..."),window.location.href="/"}catch(o){console.error("[Header] Error during sign out:",o),window.location.href="/"}};return a.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-card-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:a.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[a.jsxs(as,{to:"/",className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-medical overflow-hidden",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/logo.png",alt:"ResidentTrack Logo",className:"w-full h-full object-contain"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-card-foreground",children:"ResidentTrack"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"FMH Medical Training"})]})]}),a.jsx("nav",{className:"hidden md:flex items-center gap-6",children:s?a.jsxs(a.Fragment,{children:[a.jsx(as,{to:"/fmh",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"FMH Tracking"}),a.jsx(as,{to:"/dashboard",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Dashboard"}),a.jsx(as,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),a.jsx(as,{to:"/publications",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Publikationen"}),s&&((n==null?void 0:n.role)==="supervisor"||(n==null?void 0:n.role)==="admin"||t)&&a.jsxs(as,{to:"/supervisor",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors flex items-center gap-1",children:[a.jsx(xr,{className:"h-4 w-4"}),"Supervisor"]}),t&&a.jsxs(as,{to:"/admin",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors flex items-center gap-1",children:[a.jsx(Cv,{className:"h-4 w-4"}),"Admin"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(as,{to:"/features",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Features"}),a.jsx(as,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),a.jsx(as,{to:"/contact",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Kontakt"})]})}),a.jsx("div",{className:"flex items-center gap-3",children:r?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."}):s?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(aR,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:(n==null?void 0:n.full_name)||s.email})]}),a.jsxs(q,{variant:"ghost",size:"sm",onClick:i,children:[a.jsx(U$,{className:"h-4 w-4 mr-2"}),"Abmelden"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(as,{to:"/auth",children:a.jsx(q,{variant:"ghost",size:"sm",className:"hidden md:inline-flex",children:"Anmelden"})}),a.jsx(as,{to:"/auth",children:a.jsx(q,{variant:"medical",size:"sm",children:"Kostenlos testen"})})]})})]})})},K=w.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));K.displayName="Card";const Se=w.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("flex flex-col space-y-1.5 p-6",s),...e}));Se.displayName="CardHeader";const Pe=w.forwardRef(({className:s,...e},t)=>a.jsx("h3",{ref:t,className:ne("text-2xl font-semibold leading-none tracking-tight",s),...e}));Pe.displayName="CardTitle";const Zr=w.forwardRef(({className:s,...e},t)=>a.jsx("p",{ref:t,className:ne("text-sm text-muted-foreground",s),...e}));Zr.displayName="CardDescription";const he=w.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("p-6 pt-0",s),...e}));he.displayName="CardContent";const rM=w.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("flex items-center p-6 pt-0",s),...e}));rM.displayName="CardFooter";const eU=Ev("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Y({className:s,variant:e,...t}){return a.jsx("div",{className:ne(eU({variant:e}),s),...t})}const tU=[{icon:Jr,title:"FMH-konforme Dokumentation",description:"Vollständige Prozeduren-Tracking nach FMH-Standards"},{icon:xr,title:"Europaweite Kurssuche",description:"Zugang zu Kursen in CH, DE, AT, FR, IT und mehr"},{icon:en,title:"Digitales Logbuch",description:"Automatische Portfolio-Erstellung und PDF-Export"},{icon:ys,title:"Zertifikat-Management",description:"CME-Punkte tracking und Zertifikat-Verwaltung"}],sU=()=>a.jsxs("section",{className:"relative overflow-hidden",children:[a.jsx("div",{className:"hero-gradient",children:a.jsx("div",{className:"container mx-auto px-4 py-20",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"text-center lg:text-left",children:[a.jsx(Y,{variant:"secondary",className:"mb-6 text-sm px-4 py-2",children:"🇨🇭 FMH-konforme Ausbildung für die Schweiz & Europa"}),a.jsxs("h1",{className:"text-medical-title text-card-foreground mb-6",children:["Ihre chirurgische Ausbildung",a.jsx("span",{className:"bg-gradient-medical bg-clip-text text-transparent",children:" digital verwalten"})]}),a.jsx("p",{className:"text-medical-subtitle mb-8 max-w-2xl mx-auto lg:mx-0",children:"ResidentTrack ist die führende Plattform für Assistenzärzt:innen zur FMH-konformen Dokumentation ihres Ausbildungsfortschritts und zur europäischen Kurssuche."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start items-center mb-12",children:[a.jsx(as,{to:"/auth",children:a.jsxs(q,{variant:"default",size:"lg",className:"gap-2 shadow-card-hover",children:["Als Resident starten",a.jsx(dj,{className:"w-5 h-5"})]})}),a.jsx(as,{to:"/dashboard",children:a.jsxs(q,{variant:"secondary",size:"lg",className:"gap-2",children:[a.jsx(en,{className:"w-5 h-5"}),"Demo ansehen"]})}),a.jsx(as,{to:"/contact",children:a.jsx(q,{variant:"outline",size:"lg",children:"Kurs anbieten"})})]}),a.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start items-center gap-8 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"w-4 h-4 text-activity-mint"}),a.jsx("span",{children:"FMH optimiert"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"w-4 h-4 text-activity-mint"}),a.jsx("span",{children:"DSGVO-konform"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"w-4 h-4 text-activity-mint"}),a.jsx("span",{children:"500+ Residents"})]})]})]}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-50 via-white to-slate-100 rounded-3xl"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(59,130,246,0.1),transparent_50%)] rounded-3xl"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(16,185,129,0.1),transparent_50%)] rounded-3xl"}),a.jsxs("div",{className:"relative z-10 p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-full px-4 py-2 shadow-sm border border-white/20 mb-4",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Live Dashboard"})]}),a.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"FMH Training Progress"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Chirurgische Ausbildung 2024"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-3",children:[a.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[a.jsx("path",{className:"text-slate-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),a.jsx("path",{className:"text-green-500",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"85, 100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-bold text-slate-700",children:"85%"})})]}),a.jsx("div",{className:"text-xs font-medium text-slate-700",children:"PGY-1"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Notfall"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-3",children:[a.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[a.jsx("path",{className:"text-slate-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),a.jsx("path",{className:"text-blue-500",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"60, 100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-bold text-slate-700",children:"60%"})})]}),a.jsx("div",{className:"text-xs font-medium text-slate-700",children:"PGY-2"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Allgemein"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"345"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Prozeduren"})]}),a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"12"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Kurse"})]}),a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"95%"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Fortschritt"})]}),a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"2.5"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Jahre"})]})]})]}),a.jsx("div",{className:"absolute -top-2 -left-2 w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg flex items-center justify-center",children:a.jsx(Jr,{className:"w-8 h-8 text-white"})}),a.jsx("div",{className:"absolute -bottom-2 -right-2 w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg flex items-center justify-center",children:a.jsx(ys,{className:"w-6 h-6 text-white"})})]})})]})})}),a.jsx("div",{className:"bg-background",children:a.jsx("div",{className:"container mx-auto px-4 py-16",children:a.jsxs("div",{className:"text-center mb-12",children:[a.jsx(Y,{variant:"outline",className:"mb-4",children:"Live Demo"}),a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Fortschritt in Echtzeit verfolgen"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Erleben Sie selbst, wie ResidentTrack Ihren Ausbildungsfortschritt von PGY1 bis PGY6 visualisiert und Ihre FMH-Anforderungen überwacht."})]})})}),a.jsx("div",{className:"bg-muted/30",children:a.jsx("div",{className:"container mx-auto px-4 py-16",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:tU.map((s,e)=>a.jsxs(K,{className:"medical-card p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-primary rounded-medical flex items-center justify-center mx-auto mb-4",children:a.jsx(s.icon,{className:"w-6 h-6 text-primary-foreground"})}),a.jsx("h3",{className:"font-semibold text-card-foreground mb-2",children:s.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]},e))})})})]}),Oj=({progress:s,label:e,showPercentage:t=!0,variant:n="default",className:r})=>{const i=Math.min(Math.max(s,0),100),o=d=>d>=80?"bg-progress-complete":d>=50?"bg-progress-partial":"bg-progress-pending",c=(()=>{switch(n){case"medical":return{container:"h-3 bg-swiss-gray rounded-full overflow-hidden shadow-progress",bar:"h-full transition-progress rounded-full bg-gradient-progress"};case"compact":return{container:"h-2 bg-swiss-gray rounded-full overflow-hidden",bar:"h-full transition-progress rounded-full"};default:return{container:"h-4 bg-swiss-gray rounded-full overflow-hidden shadow-card",bar:"h-full transition-progress rounded-full"}}})();return a.jsxs("div",{className:ne("w-full",r),children:[(e||t)&&a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e&&a.jsx("span",{className:"text-sm font-medium text-card-foreground",children:e}),t&&a.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[i,"%"]})]}),a.jsx("div",{className:c.container,children:a.jsx("div",{className:ne(c.bar,o(i)),style:{width:`${i}%`}})})]})},nU=({progress:s,size:e=120,strokeWidth:t=8,label:n,showPercentage:r=!0,variant:i="default",className:o})=>{const l=Math.min(Math.max(s,0),100),c=(e-t)/2,d=c*2*Math.PI,h=d-l/100*d,f=x=>x>=80?"stroke-progress-complete":x>=50?"stroke-progress-partial":"stroke-progress-pending",p=(()=>{switch(i){case"medical":return{size:140,strokeWidth:10};case"large":return{size:160,strokeWidth:12};default:return{size:e,strokeWidth:t}}})();return a.jsxs("div",{className:ne("flex flex-col items-center",o),children:[a.jsxs("div",{className:"relative",children:[a.jsxs("svg",{width:p.size,height:p.size,className:"progress-ring",children:[a.jsx("circle",{cx:p.size/2,cy:p.size/2,r:c,stroke:"hsl(var(--swiss-gray))",strokeWidth:p.strokeWidth,fill:"transparent"}),a.jsx("circle",{cx:p.size/2,cy:p.size/2,r:c,stroke:"url(#progressGradient)",strokeWidth:p.strokeWidth,fill:"transparent",strokeDasharray:`${d} ${d}`,strokeDashoffset:h,strokeLinecap:"round",className:ne("transition-progress",f(l))}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",style:{stopColor:"hsl(var(--progress-complete))"}}),a.jsx("stop",{offset:"100%",style:{stopColor:"hsl(var(--medical-primary))"}})]})})]}),r&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl font-bold text-card-foreground",children:[Math.round(l),"%"]})})]}),n&&a.jsx("span",{className:"mt-2 text-sm font-medium text-center text-muted-foreground",children:n})]})},yx=[{level:1,title:"PGY1 - Foundation",procedures:45,required:60,courses:3,cmePoints:25},{level:2,title:"PGY2 - Core Skills",procedures:85,required:120,courses:5,cmePoints:40},{level:3,title:"PGY3 - Specialization",procedures:140,required:180,courses:4,cmePoints:35},{level:4,title:"PGY4 - Advanced",procedures:200,required:250,courses:6,cmePoints:50},{level:5,title:"PGY5 - Expert",procedures:180,required:200,courses:3,cmePoints:30},{level:6,title:"PGY6 - Senior",procedures:95,required:100,courses:2,cmePoints:20}],rU=()=>{var f;const[s,e]=w.useState(null),[t,n]=w.useState(0),[r,i]=w.useState(!1);w.useEffect(()=>{if(r){const m=setInterval(()=>{n(p=>p>=100?(i(!1),100):p+2)},50);return()=>clearInterval(m)}},[r]);const o=()=>{n(0),i(!0),e(null)},l=()=>{n(0),i(!1),e(null)},c=()=>{const m=yx.reduce((x,v)=>x+Math.min(v.procedures,v.required),0),p=yx.reduce((x,v)=>x+v.required,0);return Math.round(m/p*100)},d=m=>Math.round(m.procedures/m.required*100),h=m=>m>=90?"default":m>=70?"secondary":"outline";return a.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[a.jsxs(q,{onClick:o,variant:"default",size:"lg",className:"gap-2",disabled:r,children:[a.jsx(sR,{className:"w-4 h-4"}),r?"Demo läuft...":"Demo starten"]}),a.jsxs(q,{onClick:l,variant:"outline",size:"lg",className:"gap-2",children:[a.jsx(V$,{className:"w-4 h-4"}),"Zurücksetzen"]})]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4 text-card-foreground",children:"FMH Ausbildungsfortschritt - Gesamtübersicht"}),a.jsx("div",{className:"flex justify-center",children:a.jsx(nU,{progress:r?Math.min(t,c()):c(),variant:"large",label:"Gesamtfortschritt",className:"mb-6"})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:yx.map((m,p)=>{const x=d(m),v=r?Math.min(Math.round(t*.8+p*5),x):x;return a.jsxs(K,{className:`medical-card p-6 cursor-pointer transition-all duration-300 ${s===m.level?"ring-2 ring-primary shadow-card-hover scale-105":"hover:shadow-card"}`,onClick:()=>e(s===m.level?null:m.level),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs(Y,{variant:h(x),className:"text-sm font-semibold",children:["PGY",m.level]}),a.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(v),"%"]})]}),a.jsx("h4",{className:"font-semibold text-card-foreground mb-3",children:m.title}),a.jsx(Oj,{progress:v,variant:"medical",className:"mb-4"}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Prozeduren:"}),a.jsxs("span",{className:"font-medium",children:[m.procedures,"/",m.required]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Kurse:"}),a.jsx("span",{className:"font-medium",children:m.courses})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"CME Punkte:"}),a.jsx("span",{className:"font-medium",children:m.cmePoints})]})]})]},m.level)})}),s&&a.jsx(K,{className:"medical-card p-6 hero-gradient",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h4",{className:"text-xl font-bold mb-4 text-card-foreground",children:[(f=yx.find(m=>m.level===s))==null?void 0:f.title," - Detailansicht"]}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Hier würden detaillierte Informationen zu spezifischen Prozeduren, absolvierten Kursen und fehlenden Anforderungen angezeigt."}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx(q,{variant:"default",size:"sm",children:"Prozeduren anzeigen"}),a.jsx(q,{variant:"secondary",size:"sm",children:"Passende Kurse finden"})]})]})})]})},Mm=({courses:s,year:e})=>{const t=[...s].sort((o,l)=>new Date(o.date).getTime()-new Date(l.date).getTime()),n=o=>{switch(o){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"upcoming":return"bg-gray-300";default:return"bg-gray-300"}},r=o=>{switch(o){case"required":return"bg-red-500";case"optional":return"bg-blue-500";default:return"bg-gray-500"}},i=o=>{switch(o){case"completed":return a.jsx(Y,{variant:"default",className:"bg-green-100 text-green-800",children:"Abgeschlossen"});case"in-progress":return a.jsx(Y,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Läuft"});case"upcoming":return a.jsx(Y,{variant:"outline",children:"Geplant"});default:return a.jsx(Y,{variant:"outline",children:"Unbekannt"})}};return a.jsxs(K,{className:"medical-card",children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-5 h-5"}),"Kurse ",e]})}),a.jsx(he,{children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-teal-200 via-teal-400 to-teal-200 rounded-full"}),a.jsx("div",{className:"space-y-8",children:t.map((o,l)=>a.jsxs("div",{className:"relative flex items-start gap-6",children:[a.jsx("div",{className:"relative z-10 flex-shrink-0",children:a.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white shadow-lg ${n(o.status)}`,children:a.jsx("div",{className:`absolute -top-1 -right-1 w-2 h-2 rounded-full ${r(o.type)}`})})}),a.jsx("div",{className:`flex-1 min-w-0 ${l%2===0?"ml-0":"mr-0"}`,children:a.jsxs("div",{className:"bg-white rounded-lg border border-card-border p-4 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.type==="required"&&a.jsx(Uf,{className:"w-4 h-4 text-yellow-500 fill-current"}),a.jsx("h3",{className:`font-semibold text-card-foreground ${o.type==="required"?"font-bold":"font-medium"}`,children:o.title})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.category})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i(o.status),a.jsxs(Y,{variant:"secondary",className:"text-xs",children:[o.points," CME"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(js,{className:"w-4 h-4"}),a.jsx("span",{children:new Date(o.date).toLocaleDateString("de-DE")})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Hf,{className:"w-4 h-4"}),a.jsx("span",{children:o.location})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ac,{className:"w-4 h-4"}),a.jsx("span",{children:o.duration})]})]}),o.type==="required"&&a.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-xs text-red-700 font-medium",children:"⭐ Pflichtkurs - Erforderlich für FMH-Zertifizierung"})})]})})]},o.id))}),a.jsx("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.filter(o=>o.status==="completed").length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.filter(o=>o.type==="required").length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pflichtkurse"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.reduce((o,l)=>o+l.points,0)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"CME Punkte"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.filter(o=>o.status==="upcoming").length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Geplant"})]})]})})]})})]})},FS=[{id:"1",title:"Advanced Laparoscopy Workshop",date:"2024-03-15",location:"Zürich",duration:"2 Tage",type:"required",status:"completed",points:8,category:"Chirurgie"},{id:"2",title:"Emergency Medicine Simulation",date:"2024-05-20",location:"Basel",duration:"1 Tag",type:"required",status:"completed",points:6,category:"Notfallmedizin"},{id:"3",title:"Digital Health Innovation",date:"2024-07-10",location:"Bern",duration:"1 Tag",type:"optional",status:"completed",points:4,category:"Digital Health"},{id:"4",title:"Trauma Surgery Masterclass",date:"2024-09-15",location:"Lausanne",duration:"3 Tage",type:"required",status:"upcoming",points:12,category:"Traumatologie"},{id:"5",title:"Medical Ethics Workshop",date:"2024-11-08",location:"Genf",duration:"1 Tag",type:"optional",status:"upcoming",points:3,category:"Ethik"},{id:"6",title:"Research Methodology",date:"2024-12-12",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:6,category:"Forschung"}],iM=[{id:"7",title:"Minimally Invasive Surgery Advanced",date:"2025-02-14",location:"Zürich",duration:"3 Tage",type:"required",status:"upcoming",points:15,category:"Chirurgie"},{id:"8",title:"Critical Care Management",date:"2025-04-18",location:"Basel",duration:"2 Tage",type:"required",status:"upcoming",points:10,category:"Intensivmedizin"},{id:"9",title:"AI in Medical Diagnosis",date:"2025-06-22",location:"Bern",duration:"1 Tag",type:"optional",status:"upcoming",points:5,category:"Digital Health"},{id:"10",title:"Pediatric Surgery Workshop",date:"2025-08-15",location:"Lausanne",duration:"2 Tage",type:"required",status:"upcoming",points:8,category:"Pädiatrie"},{id:"11",title:"Global Health Perspectives",date:"2025-10-10",location:"Genf",duration:"1 Tag",type:"optional",status:"upcoming",points:4,category:"Global Health"},{id:"12",title:"Leadership in Healthcare",date:"2025-12-05",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:7,category:"Management"}],aM=[{id:"13",title:"Robotic Surgery Certification",date:"2026-01-20",location:"Zürich",duration:"4 Tage",type:"required",status:"upcoming",points:20,category:"Chirurgie"},{id:"14",title:"Advanced Trauma Life Support",date:"2026-03-15",location:"Basel",duration:"2 Tage",type:"required",status:"upcoming",points:12,category:"Traumatologie"},{id:"15",title:"Precision Medicine Workshop",date:"2026-05-18",location:"Bern",duration:"1 Tag",type:"optional",status:"upcoming",points:6,category:"Personalized Medicine"},{id:"16",title:"Surgical Innovation Summit",date:"2026-07-22",location:"Lausanne",duration:"3 Tage",type:"optional",status:"upcoming",points:18,category:"Innovation"},{id:"17",title:"Medical Communication Skills",date:"2026-09-12",location:"Genf",duration:"1 Tag",type:"required",status:"upcoming",points:5,category:"Kommunikation"},{id:"18",title:"Healthcare Quality Management",date:"2026-11-08",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:8,category:"Qualitätsmanagement"}],Ow=[...FS,...iM,...aM],oM=(s={})=>{const{threshold:e=.1,rootMargin:t="0px 0px -50px 0px",triggerOnce:n=!0}=s,r=w.useRef(null),[i,o]=w.useState(!1),[l,c]=w.useState(!1);return w.useEffect(()=>{const d=r.current;if(!d)return;const h=new IntersectionObserver(([f])=>{f.isIntersecting?(o(!0),n&&c(!0)):n||o(!1)},{threshold:e,rootMargin:t});return h.observe(d),()=>{h.unobserve(d)}},[e,t,n]),{ref:r,isVisible:n?i||l:i}},At=({children:s,className:e="",animation:t="fadeIn",delay:n=0,duration:r=600,threshold:i=.1})=>{const{ref:o,isVisible:l}=oM({threshold:i}),c=()=>{const d="transition-all ease-out";if(!l)switch(t){case"fadeIn":return`${d} opacity-0`;case"slideUp":return`${d} opacity-0 translate-y-8`;case"slideLeft":return`${d} opacity-0 translate-x-8`;case"slideRight":return`${d} opacity-0 -translate-x-8`;case"scaleIn":return`${d} opacity-0 scale-95`;default:return`${d} opacity-0`}return`${d} opacity-100 translate-y-0 translate-x-0 scale-100`};return a.jsx("div",{ref:o,className:`${c()} ${e}`,style:{transitionDuration:`${r}ms`,transitionDelay:`${n}ms`},children:s})},Lw=({children:s,className:e="",staggerDelay:t=100,animation:n="fadeIn"})=>{const r=te.Children.toArray(s),{ref:i,isVisible:o}=oM({threshold:.1});return a.jsx("div",{ref:i,className:e,children:r.map((l,c)=>a.jsx(At,{animation:n,delay:o?c*t:0,duration:600,children:l},c))})};class iU extends te.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Index Error Boundary caught an error:",e,t)}render(){var e;return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Fehler beim Laden der Seite"}),a.jsx("p",{className:"text-red-600 mb-4",children:"Ein unerwarteter Fehler ist aufgetreten."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Seite neu laden"}),a.jsxs("details",{className:"mt-4 text-left",children:[a.jsx("summary",{className:"cursor-pointer text-red-700",children:"Fehlerdetails"}),a.jsx("pre",{className:"mt-2 text-xs text-red-600 bg-red-100 p-2 rounded overflow-auto",children:(e=this.state.error)==null?void 0:e.toString()})]})]})}):this.props.children}}const aU=()=>{console.log("Index: Rendering main content - NO AUTH DEPENDENCIES");try{return a.jsx(iU,{children:a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsxs("main",{children:[a.jsx(sU,{}),a.jsx(rU,{}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsx("div",{className:"container mx-auto px-4 relative",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideRight",delay:0,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Community"]}),a.jsxs("h2",{className:"text-4xl font-bold text-slate-900 mb-6 leading-tight",children:["Werden Sie Teil unserer",a.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:" Resident-Community"})]}),a.jsx("p",{className:"text-xl text-slate-600 mb-8 leading-relaxed",children:"Schließen Sie sich über 500 Assistenzärzt:innen an, die bereits ihre chirurgische Ausbildung mit ResidentTrack digital verwalten und dokumentieren."})]}),a.jsx(Lw,{staggerDelay:150,animation:"slideUp",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"500+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Aktive Residents"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"15+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Krankenhäuser"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"1000+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Dokumentierte Prozeduren"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"95%"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Zufriedenheitsrate"})]})})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-4 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl",children:"Jetzt beitreten"}),a.jsx("button",{className:"border-2 border-slate-200 text-slate-700 px-8 py-4 rounded-xl font-semibold hover:border-slate-300 hover:bg-slate-50 transition-all duration-300",children:"Mehr erfahren"})]})]})}),a.jsx(At,{animation:"slideLeft",delay:200,children:a.jsx("div",{className:"relative",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/residents-image-2.png",alt:"Resident Community - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"500px"}})})})]})})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-50 text-slate-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),"Dashboard"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Ihr persönliches Dashboard"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Verfolgen Sie Ihren Fortschritt mit unserem intuitiven Dashboard. Alle wichtigen Metriken auf einen Blick."})]})}),a.jsx(At,{animation:"scaleIn",delay:300,children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/dashboard.png",alt:"ResidentTrack Dashboard - Übersicht der chirurgischen Ausbildung",className:"w-full h-auto object-cover"})})})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kurs-Timeline Beispiel"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Verfolgen Sie Ihre Fortbildung mit unserer professionellen Timeline-Darstellung. Pflichtkurse werden hervorgehoben und der Fortschritt wird visuell dargestellt."})]})}),a.jsx(At,{animation:"slideUp",delay:200,children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx(Mm,{courses:FS,year:2024})})})]})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("span",{className:"text-amber-600",children:"🏆"}),"Auszeichnungen"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Auszeichnungen & Anerkennung"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre Erfolge und Errungenschaften in der chirurgischen Ausbildung"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideRight",delay:200,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Exzellenz in der Ausbildung"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre herausragenden Leistungen und Anerkennungen spiegeln Ihr Engagement für die chirurgische Ausbildung wider."})]}),a.jsx(Lw,{staggerDelay:150,animation:"slideUp",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-amber-600 mb-2",children:"5+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Auszeichnungen"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"100%"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Erfolgsrate"})]})})]})})]})}),a.jsx(At,{animation:"slideLeft",delay:400,children:a.jsx("div",{className:"relative",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/awardsresidents2-image.png",alt:"Awards & Recognition - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"400px"}})})})]})]})}),a.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-indigo-100 relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx(Zd,{className:"h-4 w-4"}),"Supervisor Dashboard"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Fortschritt in Echtzeit verfolgen"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Dr. Jose Obermann überwacht sein Team von 5 Residents und deren FMH-Fortschritt"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideLeft",delay:200,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Team-Übersicht: Allgemeinchirurgie"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Echtzeit-Einblicke in die Fortschritte aller Residents mit detaillierten Statistiken und Fortschrittsverfolgung pro FMH-Modul."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(xr,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Team Größe"})]}),a.jsx("div",{className:"text-3xl font-bold text-slate-900",children:"5"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Aktive Residents"})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(Ms,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Prozeduren"})]}),a.jsx("div",{className:"text-3xl font-bold text-slate-900",children:"247"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Gesamt 2024"})]})]})]})}),a.jsx(At,{animation:"slideRight",delay:400,children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("h4",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Resident Milestone Tracking"}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:"Dr. Anna Schmidt"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 3 • Allgemeinchirurgie"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"85%"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Prozeduren"}),a.jsx(Y,{variant:"outline",className:"text-xs border-green-200 text-green-600",children:"45/50"})]})}),a.jsx("div",{className:"h-8 bg-slate-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[8,12,15,18,22,25,28,32,35,38,42,45].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${s}%`}},e))})}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-blue-200 text-blue-600",children:"3/4"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<9?"bg-gradient-to-t from-blue-500 to-blue-400":"bg-slate-200"}`,style:{height:e<9?"100%":"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-purple-200 text-purple-600",children:"2/3"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<8?"bg-gradient-to-t from-purple-500 to-purple-400":"bg-slate-200"}`,style:{height:e<8?"100%":"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"}),a.jsx(Y,{variant:"outline",className:"text-xs border-amber-200 text-amber-600",children:"1/2"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<6?"bg-gradient-to-t from-amber-500 to-amber-400":"bg-slate-200"}`,style:{height:e<6?"100%":"20%"}},e))})})]})]})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:"Dr. Michael Müller"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 4 • Allgemeinchirurgie"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"92%"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Prozeduren"}),a.jsx(Y,{variant:"outline",className:"text-xs border-green-200 text-green-600",children:"52/55"})]})}),a.jsx("div",{className:"h-8 bg-slate-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[10,15,20,25,30,35,38,42,45,48,50,52].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${s}%`}},e))})}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-blue-200 text-blue-600",children:"4/4"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-blue-500 to-blue-400 rounded-sm flex-1",style:{height:"100%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-purple-200 text-purple-600",children:"3/3"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-purple-500 to-purple-400 rounded-sm flex-1",style:{height:"100%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"}),a.jsx(Y,{variant:"outline",className:"text-xs border-amber-200 text-amber-600",children:"2/2"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-amber-500 to-amber-400 rounded-sm flex-1",style:{height:"100%"}},e))})})]})]})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:"Dr. Sarah Johnson"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 2 • Allgemeinchirurgie"})]}),a.jsx(Y,{className:"bg-yellow-100 text-yellow-700",children:"65%"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Prozeduren"}),a.jsx(Y,{variant:"outline",className:"text-xs border-green-200 text-green-600",children:"28/35"})]})}),a.jsx("div",{className:"h-8 bg-slate-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[5,8,10,12,15,18,20,22,24,26,27,28].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${s}%`}},e))})}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-blue-200 text-blue-600",children:"1/3"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<4?"bg-gradient-to-t from-blue-500 to-blue-400":"bg-slate-200"}`,style:{height:e<4?"100%":"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-purple-200 text-purple-600",children:"0/2"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-slate-200 rounded-sm flex-1",style:{height:"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"}),a.jsx(Y,{variant:"outline",className:"text-xs border-amber-200 text-amber-600",children:"0/1"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-slate-200 rounded-sm flex-1",style:{height:"20%"}},e))})})]})]})]})]})})]}),a.jsx(At,{animation:"fadeIn",delay:600,children:a.jsx("div",{className:"mt-16 text-center",children:a.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-full px-6 py-3 shadow-sm border border-white/20",children:[a.jsx(Jr,{className:"h-5 w-5 text-green-600"}),a.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Durchschnittlicher Team-Fortschritt: ",a.jsx("strong",{children:"81%"})]})]})})})]})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx(js,{className:"h-4 w-4"}),"Milestone Tracking"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Fortschrittsverfolgung in Echtzeit"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Dr. Jose Obermann verfolgt die Meilensteine seiner Residents: Prozeduren, Publikationen und Auszeichnungen"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx(At,{animation:"slideUp",delay:200,children:a.jsxs(K,{className:"h-full",children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-bold",children:"AS"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Dr. Anna Schmidt"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 3 • Allgemeinchirurgie"})]})]})}),a.jsxs(he,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"45/50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Mär"}),a.jsx("span",{children:"Mai"}),a.jsx("span",{children:"Jul"}),a.jsx("span",{children:"Sep"}),a.jsx("span",{children:"Nov"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full",style:{width:"90%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Trend: +12% vs. Vorjahr"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{className:"bg-blue-100 text-blue-700",children:"3/5"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"2023"}),a.jsx("span",{children:"2024"}),a.jsx("span",{children:"2025"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full",style:{width:"60%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"2 Papers in Review"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Auszeichnungen"})]}),a.jsx(Y,{className:"bg-amber-100 text-amber-700",children:"2/3"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-600 rounded-full",style:{width:"67%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Best Resident Award 2024"})]})]})]})]})}),a.jsx(At,{animation:"slideUp",delay:400,children:a.jsxs(K,{className:"h-full",children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-green-600 font-bold",children:"MM"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Dr. Michael Müller"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 4 • Allgemeinchirurgie"})]})]})}),a.jsxs(he,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"52/55"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Mär"}),a.jsx("span",{children:"Mai"}),a.jsx("span",{children:"Jul"}),a.jsx("span",{children:"Sep"}),a.jsx("span",{children:"Nov"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full",style:{width:"95%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Trend: +18% vs. Vorjahr"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{className:"bg-blue-100 text-blue-700",children:"4/5"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"2023"}),a.jsx("span",{children:"2024"}),a.jsx("span",{children:"2025"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full",style:{width:"80%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"1 Paper accepted"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Auszeichnungen"})]}),a.jsx(Y,{className:"bg-amber-100 text-amber-700",children:"3/3"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-600 rounded-full",style:{width:"100%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Excellence Award 2024"})]})]})]})]})}),a.jsx(At,{animation:"slideUp",delay:600,children:a.jsxs(K,{className:"h-full",children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-purple-600 font-bold",children:"SJ"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Dr. Sarah Johnson"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 2 • Allgemeinchirurgie"})]})]})}),a.jsxs(he,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{className:"bg-yellow-100 text-yellow-700",children:"28/40"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Mär"}),a.jsx("span",{children:"Mai"}),a.jsx("span",{children:"Jul"}),a.jsx("span",{children:"Sep"}),a.jsx("span",{children:"Nov"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full",style:{width:"70%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Trend: +8% vs. Vorjahr"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{className:"bg-blue-100 text-blue-700",children:"1/3"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"2023"}),a.jsx("span",{children:"2024"}),a.jsx("span",{children:"2025"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full",style:{width:"33%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Case Report submitted"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Auszeichnungen"})]}),a.jsx(Y,{className:"bg-amber-100 text-amber-700",children:"1/2"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-600 rounded-full",style:{width:"50%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Rising Star Award"})]})]})]})]})})]}),a.jsx(At,{animation:"fadeIn",delay:800,children:a.jsx("div",{className:"mt-16 text-center",children:a.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 rounded-full px-6 py-3",children:[a.jsx(Zd,{className:"h-5 w-5 text-slate-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Supervisor Dashboard zeigt alle Meilensteine in Echtzeit"})]})})})]})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("span",{className:"text-blue-600",children:"📚"}),"Kurse"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Kurs-Exzellenz"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre Teilnahme an hochwertigen Kursen und Weiterbildungen"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideRight",delay:200,children:a.jsx("div",{className:"relative order-2 lg:order-1",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/courseresidentsimage.png",alt:"Course Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"400px"}})})}),a.jsx(At,{animation:"slideLeft",delay:400,children:a.jsxs("div",{className:"space-y-8 order-1 lg:order-2",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Kontinuierliche Weiterbildung"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre aktive Teilnahme an Kursen und Weiterbildungen zeigt Ihr Engagement für lebenslanges Lernen in der Chirurgie."})]}),a.jsx(Lw,{staggerDelay:150,animation:"slideUp",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"15+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Kurse"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-cyan-600 mb-2",children:"120+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"CME Punkte"})]})})]})})]})})]})]})}),a.jsxs("section",{className:"py-20 bg-gradient-to-br from-teal-50 via-emerald-50 to-green-50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(20,184,166,0.1),transparent_50%)]"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(16,185,129,0.1),transparent_50%)]"}),a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-teal-100 text-teal-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("span",{className:"text-teal-600",children:"⚕️"}),"Training"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Trainings-Exzellenz"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre praktische Ausbildung und operative Erfahrung"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Praktische Ausbildung"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre operative Erfahrung und praktische Ausbildung bilden das Fundament Ihrer chirurgischen Kompetenz."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:"500+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Operationen"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-emerald-600 mb-2",children:"6"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Jahre"})]})})]})]}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl",children:[a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/trainingimage.png",alt:"Training Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105",style:{minHeight:"400px"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-teal-900/20 via-transparent to-transparent"})]}),a.jsx("div",{className:"absolute -top-6 -left-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-teal-600 text-lg",children:"⚕️"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-800",children:"500+ OPs"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Erfahrung"})]})]})}),a.jsx("div",{className:"absolute -bottom-6 -right-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-emerald-600 text-lg",children:"🎯"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-800",children:"6 Jahre"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Ausbildung"})]})]})})]})})]})]})]})]})]})})}catch(s){return console.error("Index render error:",s),a.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Render-Fehler"}),a.jsx("p",{className:"text-red-600",children:String(s)})]})})}},Rv=({progress:s,size:e=80,strokeWidth:t=6,color:n,backgroundColor:r="hsl(var(--swiss-gray))",label:i,showPercentage:o=!1,className:l,onClick:c,variant:d="mint"})=>{const h=Math.min(Math.max(s,0),100),f=(e-t)/2,m=f*2*Math.PI,p=m-h/100*m,x=()=>{if(n)return n;switch(d){case"mint":return"hsl(var(--activity-mint))";case"coral":return"hsl(var(--activity-coral))";case"lavender":return"hsl(var(--activity-lavender))";case"amber":return"hsl(var(--activity-amber))";default:return"hsl(var(--activity-mint))"}};return a.jsxs("div",{className:ne("flex flex-col items-center cursor-pointer transition-transform hover:scale-105",l),onClick:c,children:[a.jsxs("div",{className:"relative",children:[a.jsxs("svg",{width:e,height:e,className:"progress-ring -rotate-90",children:[a.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:r,strokeWidth:t,fill:"transparent",opacity:.2}),a.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:x(),strokeWidth:t,fill:"transparent",strokeDasharray:`${m} ${m}`,strokeDashoffset:p,strokeLinecap:"round",className:"transition-all duration-1000 ease-out",style:{transformOrigin:"center"}})]}),o&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-sm font-bold text-card-foreground",children:[Math.round(h),"%"]})})]}),i&&a.jsx("span",{className:"mt-1 text-xs font-medium text-center text-muted-foreground max-w-20",children:i})]})};var oU=NN[" useId ".trim().toString()]||(()=>{}),lU=0;function tn(s){const[e,t]=w.useState(oU());return It(()=>{s||t(n=>n??String(lU++))},[s]),s||(e?`radix-${e}`:"")}var cU=w.createContext(void 0);function _b(s){const e=w.useContext(cU);return s||e||"ltr"}var Fw="rovingFocusGroup.onEntryFocus",dU={bubbles:!1,cancelable:!0},Mv="RovingFocusGroup",[Lj,lM,uU]=gS(Mv),[hU,cM]=ui(Mv,[uU]),[fU,mU]=hU(Mv),dM=w.forwardRef((s,e)=>a.jsx(Lj.Provider,{scope:s.__scopeRovingFocusGroup,children:a.jsx(Lj.Slot,{scope:s.__scopeRovingFocusGroup,children:a.jsx(pU,{...s,ref:e})})}));dM.displayName=Mv;var pU=w.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=s,m=w.useRef(null),p=Ke(e,m),x=_b(i),[v,b]=Jd({prop:o,defaultProp:l??null,onChange:c,caller:Mv}),[g,y]=w.useState(!1),j=zt(d),_=lM(t),S=w.useRef(!1),[E,A]=w.useState(0);return w.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(Fw,j),()=>P.removeEventListener(Fw,j)},[j]),a.jsx(fU,{scope:t,orientation:n,dir:x,loop:r,currentTabStopId:v,onItemFocus:w.useCallback(P=>b(P),[b]),onItemShiftTab:w.useCallback(()=>y(!0),[]),onFocusableItemAdd:w.useCallback(()=>A(P=>P+1),[]),onFocusableItemRemove:w.useCallback(()=>A(P=>P-1),[]),children:a.jsx(de.div,{tabIndex:g||E===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...s.style},onMouseDown:me(s.onMouseDown,()=>{S.current=!0}),onFocus:me(s.onFocus,P=>{const T=!S.current;if(P.target===P.currentTarget&&T&&!g){const I=new CustomEvent(Fw,dU);if(P.currentTarget.dispatchEvent(I),!I.defaultPrevented){const O=_().filter($=>$.focusable),L=O.find($=>$.active),z=O.find($=>$.id===v),U=[L,z,...O].filter(Boolean).map($=>$.ref.current);fM(U,h)}}S.current=!1}),onBlur:me(s.onBlur,()=>y(!1))})})}),uM="RovingFocusGroupItem",hM=w.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:i,children:o,...l}=s,c=tn(),d=i||c,h=mU(uM,t),f=h.currentTabStopId===d,m=lM(t),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:v}=h;return w.useEffect(()=>{if(n)return p(),()=>x()},[n,p,x]),a.jsx(Lj.ItemSlot,{scope:t,id:d,focusable:n,active:r,children:a.jsx(de.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:me(s.onMouseDown,b=>{n?h.onItemFocus(d):b.preventDefault()}),onFocus:me(s.onFocus,()=>h.onItemFocus(d)),onKeyDown:me(s.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const g=xU(b,h.orientation,h.dir);if(g!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let j=m().filter(_=>_.focusable).map(_=>_.ref.current);if(g==="last")j.reverse();else if(g==="prev"||g==="next"){g==="prev"&&j.reverse();const _=j.indexOf(b.currentTarget);j=h.loop?yU(j,_+1):j.slice(_+1)}setTimeout(()=>fM(j))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});hM.displayName=uM;var gU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function vU(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function xU(s,e,t){const n=vU(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return gU[n]}function fM(s,e=!1){const t=document.activeElement;for(const n of s)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function yU(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var bU=dM,wU=hM,Nb="Tabs",[jU,eJ]=ui(Nb,[cM]),mM=cM(),[_U,$S]=jU(Nb),pM=w.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=s,h=_b(l),[f,m]=Jd({prop:n,onChange:r,defaultProp:i??"",caller:Nb});return a.jsx(_U,{scope:t,baseId:tn(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:a.jsx(de.div,{dir:h,"data-orientation":o,...d,ref:e})})});pM.displayName=Nb;var gM="TabsList",vM=w.forwardRef((s,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=s,i=$S(gM,t),o=mM(t);return a.jsx(bU,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(de.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});vM.displayName=gM;var xM="TabsTrigger",yM=w.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...i}=s,o=$S(xM,t),l=mM(t),c=jM(o.baseId,n),d=_M(o.baseId,n),h=n===o.value;return a.jsx(wU,{asChild:!0,...l,focusable:!r,active:h,children:a.jsx(de.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:e,onMouseDown:me(s.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:me(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:me(s.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!r&&f&&o.onValueChange(n)})})})});yM.displayName=xM;var bM="TabsContent",wM=w.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:i,...o}=s,l=$S(bM,t),c=jM(l.baseId,n),d=_M(l.baseId,n),h=n===l.value,f=w.useRef(h);return w.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(Nr,{present:r||h,children:({present:m})=>a.jsx(de.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:e,style:{...s.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});wM.displayName=bM;function jM(s,e){return`${s}-trigger-${e}`}function _M(s,e){return`${s}-content-${e}`}var NU=pM,NM=vM,SM=yM,AM=wM;const Jn=NU,Nn=w.forwardRef(({className:s,...e},t)=>a.jsx(NM,{ref:t,className:ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...e}));Nn.displayName=NM.displayName;const ze=w.forwardRef(({className:s,...e},t)=>a.jsx(SM,{ref:t,className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...e}));ze.displayName=SM.displayName;const He=w.forwardRef(({className:s,...e},t)=>a.jsx(AM,{ref:t,className:ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...e}));He.displayName=AM.displayName;const $w=[{id:1,title:"OCT angiography: measurement of retinal macular microvasculature with spectralis II OCT angiography–reliability and reproducibility",authors:"S Hosari, B Hohberger, L Theelke, H Sari, M Lucio, CY Mardin",journal:"Ophthalmologica",year:2020,citations:67,doi:"10.1159/000502473",type:"research",impact:"high",category:"Ophthalmology"},{id:2,title:"Dynamics of retinal vessel loss after acute optic neuritis in patients with relapsing multiple sclerosis",authors:"L Aly, C Noll, R Wicklein, E Wolf, EF Romahn, J Wauschkuhn, S Hosari, ...",journal:"Neurology: Neuroimmunology & Neuroinflammation",year:2022,citations:27,doi:"10.1212/NXI.0000000000001159",type:"research",impact:"high",category:"Neurology"},{id:3,title:"OCT-angiography: Regional reduced macula microcirculation in ocular hypertensive and pre-perimetric glaucoma patients",authors:"B Hohberger, M Lucio, S Schlick, A Wollborn, S Hosari, C Mardin",journal:"PLoS One",year:2021,citations:24,doi:"10.1371/journal.pone.0246469",type:"research",impact:"medium",category:"Ophthalmology"},{id:4,title:"OCT-Angiography: Mydriatic phenylephrine and tropicamide do not influence retinal microvasculature in macula and peripapillary region",authors:"B Hohberger, M Müller, S Hosari, CY Mardin",journal:"PLoS One",year:2019,citations:23,doi:"10.1371/journal.pone.0221395",type:"research",impact:"medium",category:"Ophthalmology"},{id:5,title:"Autoantibodies activating the β2-adrenergic receptor characterize patients with primary and secondary glaucoma",authors:"B Hohberger, R Kunze, G Wallukat, K Kara, CY Mardin, R Lämmer, ...",journal:"Frontiers in Immunology",year:2019,citations:18,doi:"10.3389/fimmu.2019.02112",type:"research",impact:"high",category:"Immunology"},{id:6,title:"Faecal incontinence in the era of sacral neuromodulation",authors:"S Hosari, M Ramser, M Turina",journal:"Swiss Medical Weekly",year:2025,citations:0,doi:"10.4414/smw.2025.04298",type:"research",impact:"medium",category:"Surgery"}],SU=[{id:1,title:"AI-Driven OCT Analysis for Early Glaucoma Detection",status:"active",progress:75,startDate:"2024-01",expectedCompletion:"2025-06",milestones:[{id:1,title:"Data Collection Phase",completed:!0,date:"2024-03"},{id:2,title:"Algorithm Development",completed:!0,date:"2024-08"},{id:3,title:"Validation Studies",completed:!1,date:"2024-12"},{id:4,title:"Clinical Trial Setup",completed:!1,date:"2025-03"},{id:5,title:"Publication & Patent",completed:!1,date:"2025-06"}],collaborators:["Dr. B. Hohberger","Prof. CY Mardin","AI Research Team"],funding:"Swiss National Science Foundation"},{id:2,title:"Surgical Training Simulation Platform",status:"active",progress:45,startDate:"2024-06",expectedCompletion:"2025-12",milestones:[{id:1,title:"Platform Architecture",completed:!0,date:"2024-08"},{id:2,title:"VR Integration",completed:!1,date:"2024-11"},{id:3,title:"FMH Module Integration",completed:!1,date:"2025-02"},{id:4,title:"Beta Testing",completed:!1,date:"2025-08"},{id:5,title:"Commercial Launch",completed:!1,date:"2025-12"}],collaborators:["Surgical Education Team","VR Development Team"],funding:"University Hospital Zurich"},{id:3,title:"Multi-Center Glaucoma Registry Study",status:"planning",progress:20,startDate:"2025-01",expectedCompletion:"2026-12",milestones:[{id:1,title:"Ethics Approval",completed:!1,date:"2025-02"},{id:2,title:"Center Recruitment",completed:!1,date:"2025-04"},{id:3,title:"Data Collection Start",completed:!1,date:"2025-06"},{id:4,title:"Interim Analysis",completed:!1,date:"2026-06"},{id:5,title:"Final Publication",completed:!1,date:"2026-12"}],collaborators:["European Glaucoma Centers","Statistical Team"],funding:"European Research Council"}],EM=()=>{const[s,e]=w.useState("publications"),t=l=>{switch(l){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},n=l=>{switch(l){case"active":return"bg-green-100 text-green-800 border-green-200";case"planning":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},r=$w.reduce((l,c)=>l+c.citations,0);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(K,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:$w.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Publikationen"})]}),a.jsxs(K,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:r}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Zitationen"})]}),a.jsxs(K,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"h-Index"})]}),a.jsxs(K,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"i10-Index"})]})]}),a.jsxs(Jn,{value:s,onValueChange:e,className:"w-full",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-2",children:[a.jsxs(ze,{value:"publications",className:"flex items-center gap-2",children:[a.jsx(ls,{className:"w-4 h-4"}),"Publikationen"]}),a.jsxs(ze,{value:"projects",className:"flex items-center gap-2",children:[a.jsx(rR,{className:"w-4 h-4"}),"Laufende Projekte"]})]}),a.jsx(He,{value:"publications",className:"mt-6",children:a.jsx("div",{className:"space-y-6",children:$w.map(l=>a.jsx(K,{className:"p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-start gap-3 mb-3",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-card-foreground mb-2 leading-tight",children:l.title}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:l.authors}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ls,{className:"w-3 h-3"}),l.journal]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(js,{className:"w-3 h-3"}),l.year]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(W$,{className:"w-3 h-3"}),l.citations," Zitationen"]})]})]})}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsx(Y,{variant:"outline",className:t(l.impact),children:l.impact==="high"?"Hohe Relevanz":"Mittlere Relevanz"}),a.jsx(Y,{variant:"outline",children:l.category}),a.jsx(Y,{variant:"outline",children:l.type==="research"?"Forschung":"Review"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs(q,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[a.jsx(uj,{className:"w-3 h-3"}),"DOI"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[a.jsx(wS,{className:"w-3 h-3"}),"PDF"]})]})]})},l.id))})}),a.jsx(He,{value:"projects",className:"mt-6",children:a.jsx("div",{className:"space-y-8",children:SU.map(l=>a.jsxs(K,{className:"p-6",children:[a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start gap-6",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-2",children:l.title}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(js,{className:"w-3 h-3"}),l.startDate," - ",l.expectedCompletion]}),a.jsx(Y,{className:n(l.status),children:l.status==="active"?"Aktiv":"Planung"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-primary",children:[l.progress,"%"]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Fortschritt"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Zd,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:"Fortschritt"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${l.progress}%`}})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),"Kollaboratoren"]}),a.jsx("div",{className:"space-y-1",children:l.collaborators.map((c,d)=>a.jsx("div",{className:"text-sm text-muted-foreground",children:c},d))})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[a.jsx(ys,{className:"w-4 h-4"}),"Finanzierung"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:l.funding})]})]})]})}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h4",{className:"font-medium text-card-foreground mb-4 flex items-center gap-2",children:[a.jsx(ac,{className:"w-4 h-4"}),"Meilensteine"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),a.jsx("div",{className:"space-y-4",children:l.milestones.map((c,d)=>a.jsxs("div",{className:"relative flex items-start gap-4",children:[a.jsx("div",{className:`relative z-10 flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center ${c.completed?"bg-green-500 border-green-500 text-white":"bg-white border-gray-300 text-gray-400"}`,children:c.completed?a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):a.jsx("span",{className:"text-xs font-medium",children:d+1})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h5",{className:`font-medium ${c.completed?"text-green-700":"text-card-foreground"}`,children:c.title}),a.jsx("span",{className:"text-sm text-muted-foreground",children:c.date})]})})]},c.id))})]})]})]},l.id))})})]})]})},AU=({activityId:s,data:e,onClose:t})=>{const r=(y=>{const j={courses:{title:"Kurse & Fortbildungen",icon:en,variant:"coral",color:"hsl(var(--activity-coral))"},mandatory:{title:"Examen & Prüfungen",icon:ys,variant:"lavender",color:"hsl(var(--activity-lavender))"},procedures:{title:"OP-Prozeduren",icon:Ms,variant:"mint",color:"hsl(var(--activity-mint))"},publications:{title:"Publikationen",icon:ls,variant:"lavender",color:"hsl(var(--activity-lavender))"},awards:{title:"Awards & Auszeichnungen",icon:ys,variant:"amber",color:"hsl(var(--activity-amber))"}};return j[y]||j.courses})(s),i=r.icon,o=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["2021","2022","2023","2024"].map((y,j)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsx("span",{className:"font-medium",children:y}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Oj,{progress:Math.min((j+1)*25,100),variant:"compact",className:"w-24"}),a.jsxs(Y,{variant:"outline",children:[(j+1)*7," Kurse"]})]})]},y))})]})]}),l=[{id:"basisexamen",title:"Basisexamen",description:"Grundlagenprüfung für Medizinstudierende",status:"completed",date:"2020-03-15",score:"85%",type:"required"},{id:"facharztpruefung",title:"Facharztprüfung Chirurgie",description:"Abschlussprüfung für Facharzt Chirurgie",status:"pending",date:"2025-06-20",score:null,type:"required"},{id:"usmle_step1",title:"USMLE Step 1",description:"United States Medical Licensing Examination Step 1",status:"completed",date:"2021-08-10",score:"245",type:"optional"},{id:"usmle_step2",title:"USMLE Step 2 CK",description:"Clinical Knowledge Examination",status:"completed",date:"2022-05-15",score:"258",type:"optional"},{id:"usmle_step3",title:"USMLE Step 3",description:"Final Step of USMLE",status:"pending",date:"2025-03-10",score:null,type:"optional"},{id:"plab",title:"PLAB Test",description:"Professional and Linguistic Assessments Board",status:"not_taken",date:null,score:null,type:"optional"}],c=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"3"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ausstehend"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nicht geplant"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Examen & Prüfungen"}),a.jsx("div",{className:"space-y-4",children:l.map((y,j)=>a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-primary to-secondary"}),a.jsxs("div",{children:[a.jsxs("h5",{className:"font-semibold text-card-foreground flex items-center gap-2",children:[y.title,y.type==="required"&&a.jsx("span",{className:"text-red-500",children:"⭐"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.description}),y.date&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y.status==="completed"?"Abgeschlossen":"Geplant",": ",new Date(y.date).toLocaleDateString("de-DE")]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[y.score&&a.jsx(Y,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:y.score}),a.jsx(Y,{variant:y.status==="completed"?"default":y.status==="pending"?"secondary":"outline",className:y.status==="completed"?"bg-green-100 text-green-800":y.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600",children:y.status==="completed"?"Abgeschlossen":y.status==="pending"?"Ausstehend":"Nicht geplant"})]})]})},y.id))})]})]}),d=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Durchgeführt"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"FMH-Ziel"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[Math.round(e.completed/e.target*100),"%"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fortschritt"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),a.jsx("div",{className:"space-y-3",children:Object.entries(e.byYear||{}).map(([y,j])=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsx("span",{className:"font-medium",children:y}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Oj,{progress:Math.min(j/200*100,100),variant:"compact",className:"w-32"}),a.jsxs(Y,{variant:"outline",children:[String(j)," Prozeduren"]})]})]},y))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Häufigste Prozeduren"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Laparoskopische Cholezystektomie",count:45},{name:"Appendektomie",count:38},{name:"Hernienreparatur",count:32},{name:"Endoskopie",count:28}].map(y=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-medical",children:[a.jsx("span",{className:"text-sm font-medium",children:y.name}),a.jsxs(Y,{variant:"secondary",children:[y.count,"x"]})]},y.name))})]})]}),h=()=>a.jsx(EM,{}),f=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Auszeichnungen"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"National"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"International"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Auszeichnungen"}),a.jsx("div",{className:"space-y-3",children:e.items.map((y,j)=>a.jsx("div",{className:"p-4 border border-card-border rounded-medical",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:y.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"font-medium text-card-foreground",children:y.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.organization})]}),a.jsx(Y,{variant:"outline",children:y.date})]})},j))})]})]}),m=()=>!Ow||Ow.length===0?a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Keine Kurse verfügbar"})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Kurs-Timeline (2024-2026)"}),a.jsxs(Jn,{defaultValue:"all",className:"w-full",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-4",children:[a.jsx(ze,{value:"all",children:"Alle Jahre"}),a.jsx(ze,{value:"2024",children:"2024"}),a.jsx(ze,{value:"2025",children:"2025"}),a.jsx(ze,{value:"2026",children:"2026"})]}),a.jsx(He,{value:"all",className:"mt-4",children:a.jsx(Mm,{courses:Ow,year:2024})}),a.jsx(He,{value:"2024",className:"mt-4",children:a.jsx(Mm,{courses:FS,year:2024})}),a.jsx(He,{value:"2025",className:"mt-4",children:a.jsx(Mm,{courses:iM,year:2025})}),a.jsx(He,{value:"2026",className:"mt-4",children:a.jsx(Mm,{courses:aM,year:2026})})]})]})]}),p=()=>{switch(s){case"courses":return m();case"mandatory":return c();case"procedures":return d();case"publications":return h();case"awards":return f();default:return o()}},x=typeof(e==null?void 0:e.completed)=="number"?e.completed:0,v=typeof(e==null?void 0:e.target)=="number"&&e.target>0?e.target:1,b=typeof(e==null?void 0:e.count)=="number"?e.count:0,g=s==="procedures"||s==="courses"||s==="mandatory"?x/v*100:Math.min(b/5*100,100);return a.jsxs(K,{className:"medical-card p-6 mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 rounded-medical",style:{backgroundColor:`${r.color}20`},children:a.jsx(i,{className:"w-6 h-6",style:{color:r.color}})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-card-foreground",children:r.title}),a.jsx("p",{className:"text-muted-foreground",children:"Detailierte Ansicht und Jahresverlauf"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Rv,{progress:g,variant:r.variant,size:80,strokeWidth:6,showPercentage:!0}),a.jsx(q,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(go,{className:"w-4 h-4"})})]})]}),a.jsxs(Jn,{defaultValue:"overview",className:"w-full",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-3",children:[a.jsx(ze,{value:"overview",children:"Übersicht"}),a.jsx(ze,{value:"yearly",children:"Jahresverlauf"}),a.jsx(ze,{value:"trends",children:"Trends"})]}),a.jsx(He,{value:"overview",className:"mt-6",children:p()}),a.jsx(He,{value:"yearly",className:"mt-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(js,{className:"w-4 h-4"}),a.jsx("span",{children:"Fortschrittsverlauf nach Jahren"})]}),p()]})}),a.jsx(He,{value:"trends",className:"mt-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(Zd,{className:"w-4 h-4"}),a.jsx("span",{children:"Analyse und Prognosen"})]}),a.jsxs(K,{className:"p-6",children:[a.jsx("h4",{className:"font-semibold text-card-foreground mb-4",children:"Trend-Analyse"}),a.jsx("p",{className:"text-muted-foreground",children:"Basierend auf Ihrem aktuellen Fortschritt werden Sie Ihr FMH-Ziel voraussichtlich in 18 Monaten erreichen. Ihr Lernfortschritt ist konstant und liegt über dem Durchschnitt."})]})]})})]})]})},Fs={courses:{completed:28,target:35,points:142},mandatoryCourses:{completed:8,target:12,points:64},procedures:{completed:485,target:600,byYear:{2021:45,2022:120,2023:180,2024:140}},publications:{count:6,articles:[{title:"Minimally Invasive Cardiac Surgery",journal:"Heart Surgery Today",date:"2024-03-15"},{title:"Patient Outcomes in Emergency Medicine",journal:"Emergency Care Journal",date:"2023-11-20"}]},awards:{count:3,items:[{title:"Young Surgeon Award",organization:"Swiss Medical Society",date:"2024-01-15",icon:"🏆"},{title:"Research Excellence",organization:"University Hospital",date:"2023-09-10",icon:"🎖️"}]}},EU=()=>{var o;const[s,e]=w.useState(null),[t,n]=w.useState(0);w.useEffect(()=>{const l=setTimeout(()=>{n(100)},300);return()=>clearTimeout(l)},[]);const i=[{id:"courses",label:"Kurse",progress:Fs.courses.completed/Fs.courses.target*100,variant:"coral",icon:en,data:Fs.courses},{id:"mandatory",label:"Examen & Prüfungen",progress:Fs.mandatoryCourses.completed/Fs.mandatoryCourses.target*100,variant:"lavender",icon:jS,data:Fs.mandatoryCourses},{id:"procedures",label:"Prozeduren",progress:Fs.procedures.completed/Fs.procedures.target*100,variant:"mint",icon:Ms,data:Fs.procedures},{id:"publications",label:"Publikationen",progress:Math.min(Fs.publications.count/5*100,100),variant:"lavender",icon:ls,data:Fs.publications},{id:"awards",label:"Awards",progress:Math.min(Fs.awards.count/3*100,100),variant:"amber",icon:hC,data:Fs.awards}];return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Ihr Ausbildungsdashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihren FMH-konformen Fortschritt in Echtzeit"})]}),a.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(_S,{className:"w-4 h-4"}),"Profil teilen"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(js,{className:"w-4 h-4"}),"Kurse suchen"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(Cv,{className:"w-4 h-4"}),"Einstellungen"]})]})]}),a.jsxs(K,{className:"medical-card p-8 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-4",children:"Ihr Aktivitätsfortschritt"}),a.jsx("p",{className:"text-muted-foreground",children:"Apple Activity-inspirierte Darstellung Ihrer medizinischen Ausbildung"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:i.map(l=>{const c=t>0?Math.min(t*(l.progress/100),l.progress):l.progress;return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Rv,{progress:c,variant:l.variant,size:120,strokeWidth:8,label:l.label,showPercentage:!0,onClick:()=>e(l.id),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(l.icon,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(Y,{variant:"outline",className:"text-xs",children:l.id==="procedures"?`${l.data.completed}/${l.data.target}`:l.id==="courses"||l.id==="mandatory"?`${l.data.completed}/${l.data.target}`:`${l.data.count||l.data.completed||0}`})]})})]},l.id)})})]}),s&&a.jsx(AU,{activityId:s,data:(o=i.find(l=>l.id===s))==null?void 0:o.data,onClose:()=>e(null)}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx(K,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:a.jsx(Ms,{className:"w-6 h-6 text-activity-mint"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktuelle PGY"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"PGY-4"})]})]})}),a.jsx(K,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:a.jsx(en,{className:"w-6 h-6 text-activity-coral"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte gesamt"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"206"})]})]})}),a.jsx(K,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:a.jsx(hC,{className:"w-6 h-6 text-activity-amber"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Bis FMH-Ziel"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"24 Mon."})]})]})})]}),a.jsxs(K,{className:"medical-card p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Letzte Aktivitäten"}),a.jsxs(Jn,{defaultValue:"procedures",className:"w-full",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-4",children:[a.jsx(ze,{value:"procedures",children:"Prozeduren"}),a.jsx(ze,{value:"courses",children:"Kurse"}),a.jsx(ze,{value:"publications",children:"Publikationen"}),a.jsx(ze,{value:"awards",children:"Awards"})]}),a.jsx(He,{value:"procedures",className:"mt-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:"Laparoskopische Cholezystektomie"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"15. Januar 2024"})]}),a.jsx(Y,{variant:"default",children:"Chirurgie"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:"Appendektomie"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"12. Januar 2024"})]}),a.jsx(Y,{variant:"default",children:"Chirurgie"})]})]})}),a.jsx(He,{value:"courses",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:"Advanced Laparoscopy Workshop"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"8 CME Punkte • Zürich"})]}),a.jsx(Y,{variant:"secondary",children:"Abgeschlossen"})]})})}),a.jsx(He,{value:"publications",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:Fs.publications.articles.map((l,c)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:l.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.journal," • ",l.date]})]}),a.jsx(Y,{variant:"outline",children:"Artikel"})]},c))})}),a.jsx(He,{value:"awards",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:Fs.awards.items.map((l,c)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:l.icon}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:l.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.organization," • ",l.date]})]})]}),a.jsx(Y,{variant:"default",children:"Auszeichnung"})]},c))})})]})]})]})]})},CU=({profile:s,activityData:e,className:t})=>{const[n,r]=w.useState(null),i=()=>{const c=[];return s.public_fields.courses&&(c.push({id:"courses",label:"Kurse",progress:e.courses.total>0?e.courses.completed/e.courses.total*100:0,variant:"coral",icon:en}),c.push({id:"mandatory",label:"Pflicht",progress:e.courses.mandatory_total>0?e.courses.mandatory_completed/e.courses.mandatory_total*100:0,variant:"lavender",icon:en})),s.public_fields.procedures&&c.push({id:"procedures",label:"OPs",progress:e.procedures.required>0?e.procedures.completed/e.procedures.required*100:0,variant:"mint",icon:Ms}),s.public_fields.publications&&c.push({id:"publications",label:"Papers",progress:Math.min(e.publications.count*20,100),variant:"amber",icon:ls}),c},o=async()=>{navigator.share?await navigator.share({title:`${s.full_name} - Medizinisches Profil`,text:`Schauen Sie sich das medizinische Profil von ${s.full_name} an`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},l=i();return a.jsxs("div",{className:ne("max-w-4xl mx-auto space-y-6",t),children:[a.jsx(K,{className:"overflow-hidden",children:a.jsx("div",{className:"bg-gradient-medical p-6 text-white",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[s.avatar_url&&a.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 overflow-hidden",children:a.jsx("img",{src:s.avatar_url,alt:s.full_name,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:s.full_name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm opacity-90",children:[s.pgy_level&&a.jsxs(Y,{variant:"secondary",className:"bg-white/20 text-white border-white/20",children:["PGY-",s.pgy_level]}),s.specialty&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ms,{className:"w-4 h-4"}),s.specialty]}),s.institution&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(sy,{className:"w-4 h-4"}),s.institution]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:o,className:"text-white hover:bg-white/20",children:a.jsx(_S,{className:"w-4 h-4"})}),s.linkedin_url&&a.jsx(q,{variant:"ghost",size:"sm",asChild:!0,className:"text-white hover:bg-white/20",children:a.jsx("a",{href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:a.jsx(uj,{className:"w-4 h-4"})})})]})]})})}),a.jsxs(K,{children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"w-5 h-5 text-medical-primary"}),"Fortschritt ",new Date().getFullYear()]})}),a.jsx(he,{children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 justify-items-center",children:l.map(c=>a.jsx(Rv,{progress:c.progress,variant:c.variant,label:c.label,showPercentage:!0,onClick:()=>r(n===c.id?null:c.id),className:n===c.id?"ring-2 ring-medical-primary rounded-lg p-2":""},c.id))})})]}),n&&a.jsx(K,{children:a.jsxs(he,{className:"pt-6",children:[n==="courses"&&s.public_fields.courses&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Absolvierte Kurse"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 rounded-lg bg-activity-coral/10 border border-activity-coral/20",children:[a.jsx("div",{className:"text-2xl font-bold text-activity-coral",children:e.courses.completed}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.total," Kursen"]})]}),a.jsxs("div",{className:"p-4 rounded-lg bg-activity-lavender/10 border border-activity-lavender/20",children:[a.jsx("div",{className:"text-2xl font-bold text-activity-lavender",children:e.courses.mandatory_completed}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.mandatory_total," Pflichtkursen"]})]})]})]}),n==="procedures"&&s.public_fields.procedures&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chirurgische Eingriffe"}),a.jsxs("div",{className:"p-4 rounded-lg bg-activity-mint/10 border border-activity-mint/20",children:[a.jsx("div",{className:"text-2xl font-bold text-activity-mint",children:e.procedures.completed}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.procedures.required," erforderlichen Eingriffen"]})]})]}),n==="publications"&&s.public_fields.publications&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publikationen"}),a.jsx("div",{className:"space-y-3",children:e.publications.recent.map((c,d)=>a.jsxs("div",{className:"p-4 rounded-lg bg-activity-amber/10 border border-activity-amber/20",children:[a.jsx("h4",{className:"font-medium text-activity-amber",children:c.title}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[c.journal&&a.jsx("span",{children:c.journal}),c.publication_date&&a.jsxs("span",{className:"ml-2",children:[a.jsx(js,{className:"w-3 h-3 inline mr-1"}),new Date(c.publication_date).toLocaleDateString("de-DE")]})]}),(c.doi||c.link)&&a.jsxs("div",{className:"mt-2",children:[c.link&&a.jsx(q,{variant:"ghost",size:"sm",asChild:!0,children:a.jsxs("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(uj,{className:"w-3 h-3 mr-1"}),"Ansehen"]})}),c.doi&&a.jsx(q,{variant:"ghost",size:"sm",asChild:!0,children:a.jsxs("a",{href:`https://doi.org/${c.doi}`,target:"_blank",rel:"noopener noreferrer",children:["DOI: ",c.doi]})})]})]},d))})]})]})}),s.public_fields.awards&&e.awards.length>0&&a.jsxs(K,{children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"w-5 h-5 text-progress-complete"}),"Auszeichnungen"]})}),a.jsx(he,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.awards.map((c,d)=>a.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-activity-amber/20 to-activity-coral/10 border border-activity-amber/30",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ys,{className:"w-5 h-5 text-activity-amber mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:c.title}),c.organization&&a.jsx("p",{className:"text-sm text-muted-foreground",children:c.organization}),c.awarded_date&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(c.awarded_date).toLocaleDateString("de-DE")})]})]})},d))})})]})]})},kU=()=>{const{handle:s}=TR(),[e,t]=w.useState(null),[n,r]=w.useState(null),[i,o]=w.useState(!0),[l,c]=w.useState(!1);return w.useEffect(()=>{(async()=>{if(!s){c(!0),o(!1);return}try{const{data:h,error:f}=await Z.from("profiles").select("*").eq("handle",s).eq("is_public",!0).single();if(f||!h){c(!0),o(!1);return}t({...h,public_fields:h.public_fields||{courses:!0,awards:!0,publications:!0,procedures:!1}});const m=new Date().getFullYear(),{data:p}=await Z.from("course_enrollments").select(`
            status,
            courses (
              is_mandatory
            )
          `).eq("user_id",h.user_id),x=(p==null?void 0:p.length)||0,v=(p==null?void 0:p.filter(A=>A.status==="completed").length)||0,b=(p==null?void 0:p.filter(A=>{var P;return(P=A.courses)==null?void 0:P.is_mandatory}).length)||0,g=(p==null?void 0:p.filter(A=>{var P;return A.status==="completed"&&((P=A.courses)==null?void 0:P.is_mandatory)}).length)||0,{data:y}=await Z.from("procedure_logs").select("*").eq("user_id",h.user_id).gte("performed_date",`${m}-01-01`).lte("performed_date",`${m}-12-31`),{data:j}=await Z.from("procedures").select("min_required_by_pgy").eq("active",!0);let _=0;j&&h.pgy_level&&j.forEach(A=>{var T;const P=(T=A.min_required_by_pgy)==null?void 0:T[h.pgy_level.toString()];P&&(_+=P)});const{data:S}=await Z.from("publications").select("*").eq("user_id",h.user_id).order("publication_date",{ascending:!1}).limit(5),{data:E}=await Z.from("awards").select("*").eq("user_id",h.user_id).order("awarded_date",{ascending:!1});r({courses:{completed:v,total:x,mandatory_completed:g,mandatory_total:b},procedures:{completed:(y==null?void 0:y.length)||0,required:_},publications:{count:(S==null?void 0:S.length)||0,recent:S||[]},awards:E||[]})}catch(h){console.error("Error fetching profile:",h),Io({title:"Fehler",description:"Profil konnte nicht geladen werden.",variant:"destructive"}),c(!0)}finally{o(!1)}})()},[s]),i?a.jsx("div",{className:"min-h-screen bg-background",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-32 bg-muted rounded-lg"}),a.jsx("div",{className:"h-64 bg-muted rounded-lg"}),a.jsx("div",{className:"h-48 bg-muted rounded-lg"})]})})})}):l||!e||!n?a.jsx(jB,{to:"/404",replace:!0}):a.jsx("div",{className:"min-h-screen bg-background",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx(CU,{profile:e,activityData:n})})})},Te=w.forwardRef(({className:s,type:e,...t},n)=>a.jsx("input",{type:e,className:ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));Te.displayName="Input";function Fj(s,[e,t]){return Math.min(t,Math.max(e,s))}var zw=0;function zS(){w.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??XC()),document.body.insertAdjacentElement("beforeend",s[1]??XC()),zw++,()=>{zw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zw--}},[])}function XC(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Bw="focusScope.autoFocusOnMount",Hw="focusScope.autoFocusOnUnmount",QC={bubbles:!1,cancelable:!0},PU="FocusScope",Sb=w.forwardRef((s,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=s,[l,c]=w.useState(null),d=zt(r),h=zt(i),f=w.useRef(null),m=Ke(e,v=>c(v)),p=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let v=function(j){if(p.paused||!l)return;const _=j.target;l.contains(_)?f.current=_:Po(f.current,{select:!0})},b=function(j){if(p.paused||!l)return;const _=j.relatedTarget;_!==null&&(l.contains(_)||Po(f.current,{select:!0}))},g=function(j){if(document.activeElement===document.body)for(const S of j)S.removedNodes.length>0&&Po(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const y=new MutationObserver(g);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),y.disconnect()}}},[n,l,p.paused]),w.useEffect(()=>{if(l){ZC.add(p);const v=document.activeElement;if(!l.contains(v)){const g=new CustomEvent(Bw,QC);l.addEventListener(Bw,d),l.dispatchEvent(g),g.defaultPrevented||(TU(OU(CM(l)),{select:!0}),document.activeElement===v&&Po(l))}return()=>{l.removeEventListener(Bw,d),setTimeout(()=>{const g=new CustomEvent(Hw,QC);l.addEventListener(Hw,h),l.dispatchEvent(g),g.defaultPrevented||Po(v??document.body,{select:!0}),l.removeEventListener(Hw,h),ZC.remove(p)},0)}}},[l,d,h,p]);const x=w.useCallback(v=>{if(!t&&!n||p.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,g=document.activeElement;if(b&&g){const y=v.currentTarget,[j,_]=RU(y);j&&_?!v.shiftKey&&g===_?(v.preventDefault(),t&&Po(j,{select:!0})):v.shiftKey&&g===j&&(v.preventDefault(),t&&Po(_,{select:!0})):g===y&&v.preventDefault()}},[t,n,p.paused]);return a.jsx(de.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});Sb.displayName=PU;function TU(s,{select:e=!1}={}){const t=document.activeElement;for(const n of s)if(Po(n,{select:e}),document.activeElement!==t)return}function RU(s){const e=CM(s),t=JC(e,s),n=JC(e.reverse(),s);return[t,n]}function CM(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function JC(s,e){for(const t of s)if(!MU(t,{upTo:e}))return t}function MU(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function IU(s){return s instanceof HTMLInputElement&&"select"in s}function Po(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&IU(s)&&e&&s.select()}}var ZC=DU();function DU(){let s=[];return{add(e){const t=s[0];e!==t&&(t==null||t.pause()),s=ek(s,e),s.unshift(e)},remove(e){var t;s=ek(s,e),(t=s[0])==null||t.resume()}}}function ek(s,e){const t=[...s],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function OU(s){return s.filter(e=>e.tagName!=="A")}const LU=["top","right","bottom","left"],ql=Math.min,Vn=Math.max,ly=Math.round,bx=Math.floor,Ji=s=>({x:s,y:s}),FU={left:"right",right:"left",bottom:"top",top:"bottom"},$U={start:"end",end:"start"};function $j(s,e,t){return Vn(s,ql(e,t))}function ho(s,e){return typeof s=="function"?s(e):s}function fo(s){return s.split("-")[0]}function om(s){return s.split("-")[1]}function BS(s){return s==="x"?"y":"x"}function HS(s){return s==="y"?"height":"width"}const zU=new Set(["top","bottom"]);function Gi(s){return zU.has(fo(s))?"y":"x"}function US(s){return BS(Gi(s))}function BU(s,e,t){t===void 0&&(t=!1);const n=om(s),r=US(s),i=HS(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=cy(o)),[o,cy(o)]}function HU(s){const e=cy(s);return[zj(s),e,zj(e)]}function zj(s){return s.replace(/start|end/g,e=>$U[e])}const tk=["left","right"],sk=["right","left"],UU=["top","bottom"],WU=["bottom","top"];function VU(s,e,t){switch(s){case"top":case"bottom":return t?e?sk:tk:e?tk:sk;case"left":case"right":return e?UU:WU;default:return[]}}function qU(s,e,t,n){const r=om(s);let i=VU(fo(s),t==="start",n);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(zj)))),i}function cy(s){return s.replace(/left|right|bottom|top/g,e=>FU[e])}function GU(s){return{top:0,right:0,bottom:0,left:0,...s}}function kM(s){return typeof s!="number"?GU(s):{top:s,right:s,bottom:s,left:s}}function dy(s){const{x:e,y:t,width:n,height:r}=s;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function nk(s,e,t){let{reference:n,floating:r}=s;const i=Gi(e),o=US(e),l=HS(o),c=fo(e),d=i==="y",h=n.x+n.width/2-r.width/2,f=n.y+n.height/2-r.height/2,m=n[l]/2-r[l]/2;let p;switch(c){case"top":p={x:h,y:n.y-r.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-r.width,y:f};break;default:p={x:n.x,y:n.y}}switch(om(e)){case"start":p[o]-=m*(t&&d?-1:1);break;case"end":p[o]+=m*(t&&d?-1:1);break}return p}const KU=async(s,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:s,floating:e,strategy:r}),{x:h,y:f}=nk(d,n,c),m=n,p={},x=0;for(let v=0;v<l.length;v++){const{name:b,fn:g}=l[v],{x:y,y:j,data:_,reset:S}=await g({x:h,y:f,initialPlacement:n,placement:m,strategy:r,middlewareData:p,rects:d,platform:o,elements:{reference:s,floating:e}});h=y??h,f=j??f,p={...p,[b]:{...p[b],..._}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:s,floating:e,strategy:r}):S.rects),{x:h,y:f}=nk(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:r,middlewareData:p}};async function Op(s,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:i,rects:o,elements:l,strategy:c}=s,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=ho(e,s),x=kM(p),b=l[m?f==="floating"?"reference":"floating":f],g=dy(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(b)))==null||t?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),y=f==="floating"?{x:n,y:r,width:o.floating.width,height:o.floating.height}:o.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},S=dy(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:j,strategy:c}):y);return{top:(g.top-S.top+x.top)/_.y,bottom:(S.bottom-g.bottom+x.bottom)/_.y,left:(g.left-S.left+x.left)/_.x,right:(S.right-g.right+x.right)/_.x}}const YU=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:n,placement:r,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=ho(s,e)||{};if(d==null)return{};const f=kM(h),m={x:t,y:n},p=US(r),x=HS(p),v=await o.getDimensions(d),b=p==="y",g=b?"top":"left",y=b?"bottom":"right",j=b?"clientHeight":"clientWidth",_=i.reference[x]+i.reference[p]-m[p]-i.floating[x],S=m[p]-i.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let A=E?E[j]:0;(!A||!await(o.isElement==null?void 0:o.isElement(E)))&&(A=l.floating[j]||i.floating[x]);const P=_/2-S/2,T=A/2-v[x]/2-1,I=ql(f[g],T),O=ql(f[y],T),L=I,z=A-v[x]-O,M=A/2-v[x]/2+P,U=$j(L,M,z),$=!c.arrow&&om(r)!=null&&M!==U&&i.reference[x]/2-(M<L?I:O)-v[x]/2<0,F=$?M<L?M-L:M-z:0;return{[p]:m[p]+F,data:{[p]:U,centerOffset:M-U-F,...$&&{alignmentOffset:F}},reset:$}}}),XU=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,n;const{placement:r,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...b}=ho(s,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const g=fo(r),y=Gi(l),j=fo(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(j||!v?[cy(l)]:HU(l)),E=x!=="none";!m&&E&&S.push(...qU(l,v,x,_));const A=[l,...S],P=await Op(e,b),T=[];let I=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&T.push(P[g]),f){const M=BU(r,o,_);T.push(P[M[0]],P[M[1]])}if(I=[...I,{placement:r,overflows:T}],!T.every(M=>M<=0)){var O,L;const M=(((O=i.flip)==null?void 0:O.index)||0)+1,U=A[M];if(U&&(!(f==="alignment"?y!==Gi(U):!1)||I.every(D=>D.overflows[0]>0&&Gi(D.placement)===y)))return{data:{index:M,overflows:I},reset:{placement:U}};let $=(L=I.filter(F=>F.overflows[0]<=0).sort((F,D)=>F.overflows[1]-D.overflows[1])[0])==null?void 0:L.placement;if(!$)switch(p){case"bestFit":{var z;const F=(z=I.filter(D=>{if(E){const R=Gi(D.placement);return R===y||R==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(R=>R>0).reduce((R,H)=>R+H,0)]).sort((D,R)=>D[1]-R[1])[0])==null?void 0:z[0];F&&($=F);break}case"initialPlacement":$=l;break}if(r!==$)return{reset:{placement:$}}}return{}}}};function rk(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function ik(s){return LU.some(e=>s[e]>=0)}const QU=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=ho(s,e);switch(n){case"referenceHidden":{const i=await Op(e,{...r,elementContext:"reference"}),o=rk(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:ik(o)}}}case"escaped":{const i=await Op(e,{...r,altBoundary:!0}),o=rk(i,t.floating);return{data:{escapedOffsets:o,escaped:ik(o)}}}default:return{}}}}},PM=new Set(["left","top"]);async function JU(s,e){const{placement:t,platform:n,elements:r}=s,i=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=fo(t),l=om(t),c=Gi(t)==="y",d=PM.has(o)?-1:1,h=i&&c?-1:1,f=ho(e,s);let{mainAxis:m,crossAxis:p,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*h,y:m*d}:{x:m*d,y:p*h}}const ZU=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,n;const{x:r,y:i,placement:o,middlewareData:l}=e,c=await JU(e,s);return o===((t=l.offset)==null?void 0:t.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:o}}}}},eW=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:g,y}=b;return{x:g,y}}},...c}=ho(s,e),d={x:t,y:n},h=await Op(e,c),f=Gi(fo(r)),m=BS(f);let p=d[m],x=d[f];if(i){const b=m==="y"?"top":"left",g=m==="y"?"bottom":"right",y=p+h[b],j=p-h[g];p=$j(y,p,j)}if(o){const b=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=x+h[b],j=x-h[g];x=$j(y,x,j)}const v=l.fn({...e,[m]:p,[f]:x});return{...v,data:{x:v.x-t,y:v.y-n,enabled:{[m]:i,[f]:o}}}}}},tW=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:n,placement:r,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ho(s,e),h={x:t,y:n},f=Gi(r),m=BS(f);let p=h[m],x=h[f];const v=ho(l,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const j=m==="y"?"height":"width",_=i.reference[m]-i.floating[j]+b.mainAxis,S=i.reference[m]+i.reference[j]-b.mainAxis;p<_?p=_:p>S&&(p=S)}if(d){var g,y;const j=m==="y"?"width":"height",_=PM.has(fo(r)),S=i.reference[f]-i.floating[j]+(_&&((g=o.offset)==null?void 0:g[f])||0)+(_?0:b.crossAxis),E=i.reference[f]+i.reference[j]+(_?0:((y=o.offset)==null?void 0:y[f])||0)-(_?b.crossAxis:0);x<S?x=S:x>E&&(x=E)}return{[m]:p,[f]:x}}}},sW=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){var t,n;const{placement:r,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...d}=ho(s,e),h=await Op(e,d),f=fo(r),m=om(r),p=Gi(r)==="y",{width:x,height:v}=i.floating;let b,g;f==="top"||f==="bottom"?(b=f,g=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(g=f,b=m==="end"?"top":"bottom");const y=v-h.top-h.bottom,j=x-h.left-h.right,_=ql(v-h[b],y),S=ql(x-h[g],j),E=!e.middlewareData.shift;let A=_,P=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=j),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(A=y),E&&!m){const I=Vn(h.left,0),O=Vn(h.right,0),L=Vn(h.top,0),z=Vn(h.bottom,0);p?P=x-2*(I!==0||O!==0?I+O:Vn(h.left,h.right)):A=v-2*(L!==0||z!==0?L+z:Vn(h.top,h.bottom))}await c({...e,availableWidth:P,availableHeight:A});const T=await o.getDimensions(l.floating);return x!==T.width||v!==T.height?{reset:{rects:!0}}:{}}}};function Ab(){return typeof window<"u"}function lm(s){return TM(s)?(s.nodeName||"").toLowerCase():"#document"}function Yn(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function la(s){var e;return(e=(TM(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function TM(s){return Ab()?s instanceof Node||s instanceof Yn(s).Node:!1}function ai(s){return Ab()?s instanceof Element||s instanceof Yn(s).Element:!1}function sa(s){return Ab()?s instanceof HTMLElement||s instanceof Yn(s).HTMLElement:!1}function ak(s){return!Ab()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Yn(s).ShadowRoot}const nW=new Set(["inline","contents"]);function Iv(s){const{overflow:e,overflowX:t,overflowY:n,display:r}=oi(s);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!nW.has(r)}const rW=new Set(["table","td","th"]);function iW(s){return rW.has(lm(s))}const aW=[":popover-open",":modal"];function Eb(s){return aW.some(e=>{try{return s.matches(e)}catch{return!1}})}const oW=["transform","translate","scale","rotate","perspective"],lW=["transform","translate","scale","rotate","perspective","filter"],cW=["paint","layout","strict","content"];function WS(s){const e=VS(),t=ai(s)?oi(s):s;return oW.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||lW.some(n=>(t.willChange||"").includes(n))||cW.some(n=>(t.contain||"").includes(n))}function dW(s){let e=Gl(s);for(;sa(e)&&!Vf(e);){if(WS(e))return e;if(Eb(e))return null;e=Gl(e)}return null}function VS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const uW=new Set(["html","body","#document"]);function Vf(s){return uW.has(lm(s))}function oi(s){return Yn(s).getComputedStyle(s)}function Cb(s){return ai(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Gl(s){if(lm(s)==="html")return s;const e=s.assignedSlot||s.parentNode||ak(s)&&s.host||la(s);return ak(e)?e.host:e}function RM(s){const e=Gl(s);return Vf(e)?s.ownerDocument?s.ownerDocument.body:s.body:sa(e)&&Iv(e)?e:RM(e)}function Lp(s,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=RM(s),i=r===((n=s.ownerDocument)==null?void 0:n.body),o=Yn(r);if(i){const l=Bj(o);return e.concat(o,o.visualViewport||[],Iv(r)?r:[],l&&t?Lp(l):[])}return e.concat(r,Lp(r,[],t))}function Bj(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function MM(s){const e=oi(s);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=sa(s),i=r?s.offsetWidth:t,o=r?s.offsetHeight:n,l=ly(t)!==i||ly(n)!==o;return l&&(t=i,n=o),{width:t,height:n,$:l}}function qS(s){return ai(s)?s:s.contextElement}function fh(s){const e=qS(s);if(!sa(e))return Ji(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:i}=MM(e);let o=(i?ly(t.width):t.width)/n,l=(i?ly(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const hW=Ji(0);function IM(s){const e=Yn(s);return!VS()||!e.visualViewport?hW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fW(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==Yn(s)?!1:e}function eu(s,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=s.getBoundingClientRect(),i=qS(s);let o=Ji(1);e&&(n?ai(n)&&(o=fh(n)):o=fh(s));const l=fW(i,t,n)?IM(i):Ji(0);let c=(r.left+l.x)/o.x,d=(r.top+l.y)/o.y,h=r.width/o.x,f=r.height/o.y;if(i){const m=Yn(i),p=n&&ai(n)?Yn(n):n;let x=m,v=Bj(x);for(;v&&n&&p!==x;){const b=fh(v),g=v.getBoundingClientRect(),y=oi(v),j=g.left+(v.clientLeft+parseFloat(y.paddingLeft))*b.x,_=g.top+(v.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,d*=b.y,h*=b.x,f*=b.y,c+=j,d+=_,x=Yn(v),v=Bj(x)}}return dy({width:h,height:f,x:c,y:d})}function GS(s,e){const t=Cb(s).scrollLeft;return e?e.left+t:eu(la(s)).left+t}function DM(s,e,t){t===void 0&&(t=!1);const n=s.getBoundingClientRect(),r=n.left+e.scrollLeft-(t?0:GS(s,n)),i=n.top+e.scrollTop;return{x:r,y:i}}function mW(s){let{elements:e,rect:t,offsetParent:n,strategy:r}=s;const i=r==="fixed",o=la(n),l=e?Eb(e.floating):!1;if(n===o||l&&i)return t;let c={scrollLeft:0,scrollTop:0},d=Ji(1);const h=Ji(0),f=sa(n);if((f||!f&&!i)&&((lm(n)!=="body"||Iv(o))&&(c=Cb(n)),sa(n))){const p=eu(n);d=fh(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}const m=o&&!f&&!i?DM(o,c,!0):Ji(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:t.y*d.y-c.scrollTop*d.y+h.y+m.y}}function pW(s){return Array.from(s.getClientRects())}function gW(s){const e=la(s),t=Cb(s),n=s.ownerDocument.body,r=Vn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Vn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+GS(s);const l=-t.scrollTop;return oi(n).direction==="rtl"&&(o+=Vn(e.clientWidth,n.clientWidth)-r),{width:r,height:i,x:o,y:l}}function vW(s,e){const t=Yn(s),n=la(s),r=t.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;const d=VS();(!d||d&&e==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l,y:c}}const xW=new Set(["absolute","fixed"]);function yW(s,e){const t=eu(s,!0,e==="fixed"),n=t.top+s.clientTop,r=t.left+s.clientLeft,i=sa(s)?fh(s):Ji(1),o=s.clientWidth*i.x,l=s.clientHeight*i.y,c=r*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function ok(s,e,t){let n;if(e==="viewport")n=vW(s,t);else if(e==="document")n=gW(la(s));else if(ai(e))n=yW(e,t);else{const r=IM(s);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return dy(n)}function OM(s,e){const t=Gl(s);return t===e||!ai(t)||Vf(t)?!1:oi(t).position==="fixed"||OM(t,e)}function bW(s,e){const t=e.get(s);if(t)return t;let n=Lp(s,[],!1).filter(l=>ai(l)&&lm(l)!=="body"),r=null;const i=oi(s).position==="fixed";let o=i?Gl(s):s;for(;ai(o)&&!Vf(o);){const l=oi(o),c=WS(o);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&xW.has(r.position)||Iv(o)&&!c&&OM(s,o))?n=n.filter(h=>h!==o):r=l,o=Gl(o)}return e.set(s,n),n}function wW(s){let{element:e,boundary:t,rootBoundary:n,strategy:r}=s;const o=[...t==="clippingAncestors"?Eb(e)?[]:bW(e,this._c):[].concat(t),n],l=o[0],c=o.reduce((d,h)=>{const f=ok(e,h,r);return d.top=Vn(f.top,d.top),d.right=ql(f.right,d.right),d.bottom=ql(f.bottom,d.bottom),d.left=Vn(f.left,d.left),d},ok(e,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function jW(s){const{width:e,height:t}=MM(s);return{width:e,height:t}}function _W(s,e,t){const n=sa(e),r=la(e),i=t==="fixed",o=eu(s,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Ji(0);function d(){c.x=GS(r)}if(n||!n&&!i)if((lm(e)!=="body"||Iv(r))&&(l=Cb(e)),n){const p=eu(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else r&&d();i&&!n&&r&&d();const h=r&&!n&&!i?DM(r,l):Ji(0),f=o.left+l.scrollLeft-c.x-h.x,m=o.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:o.width,height:o.height}}function Uw(s){return oi(s).position==="static"}function lk(s,e){if(!sa(s)||oi(s).position==="fixed")return null;if(e)return e(s);let t=s.offsetParent;return la(s)===t&&(t=t.ownerDocument.body),t}function LM(s,e){const t=Yn(s);if(Eb(s))return t;if(!sa(s)){let r=Gl(s);for(;r&&!Vf(r);){if(ai(r)&&!Uw(r))return r;r=Gl(r)}return t}let n=lk(s,e);for(;n&&iW(n)&&Uw(n);)n=lk(n,e);return n&&Vf(n)&&Uw(n)&&!WS(n)?t:n||dW(s)||t}const NW=async function(s){const e=this.getOffsetParent||LM,t=this.getDimensions,n=await t(s.floating);return{reference:_W(s.reference,await e(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function SW(s){return oi(s).direction==="rtl"}const AW={convertOffsetParentRelativeRectToViewportRelativeRect:mW,getDocumentElement:la,getClippingRect:wW,getOffsetParent:LM,getElementRects:NW,getClientRects:pW,getDimensions:jW,getScale:fh,isElement:ai,isRTL:SW};function FM(s,e){return s.x===e.x&&s.y===e.y&&s.width===e.width&&s.height===e.height}function EW(s,e){let t=null,n;const r=la(s);function i(){var l;clearTimeout(n),(l=t)==null||l.disconnect(),t=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=s.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=d;if(l||e(),!m||!p)return;const x=bx(f),v=bx(r.clientWidth-(h+m)),b=bx(r.clientHeight-(f+p)),g=bx(h),j={rootMargin:-x+"px "+-v+"px "+-b+"px "+-g+"px",threshold:Vn(0,ql(1,c))||1};let _=!0;function S(E){const A=E[0].intersectionRatio;if(A!==c){if(!_)return o();A?o(!1,A):n=setTimeout(()=>{o(!1,1e-7)},1e3)}A===1&&!FM(d,s.getBoundingClientRect())&&o(),_=!1}try{t=new IntersectionObserver(S,{...j,root:r.ownerDocument})}catch{t=new IntersectionObserver(S,j)}t.observe(s)}return o(!0),i}function CW(s,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=qS(s),h=r||i?[...d?Lp(d):[],...Lp(e)]:[];h.forEach(g=>{r&&g.addEventListener("scroll",t,{passive:!0}),i&&g.addEventListener("resize",t)});const f=d&&l?EW(d,t):null;let m=-1,p=null;o&&(p=new ResizeObserver(g=>{let[y]=g;y&&y.target===d&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=p)==null||j.observe(e)})),t()}),d&&!c&&p.observe(d),p.observe(e));let x,v=c?eu(s):null;c&&b();function b(){const g=eu(s);v&&!FM(v,g)&&t(),v=g,x=requestAnimationFrame(b)}return t(),()=>{var g;h.forEach(y=>{r&&y.removeEventListener("scroll",t),i&&y.removeEventListener("resize",t)}),f==null||f(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const kW=ZU,PW=eW,TW=XU,RW=sW,MW=QU,ck=YU,IW=tW,DW=(s,e,t)=>{const n=new Map,r={platform:AW,...t},i={...r.platform,_c:n};return KU(s,e,{...r,platform:i})};var OW=typeof document<"u",LW=function(){},Gx=OW?w.useLayoutEffect:LW;function uy(s,e){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(typeof s=="function"&&s.toString()===e.toString())return!0;let t,n,r;if(s&&e&&typeof s=="object"){if(Array.isArray(s)){if(t=s.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!uy(s[n],e[n]))return!1;return!0}if(r=Object.keys(s),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const i=r[n];if(!(i==="_owner"&&s.$$typeof)&&!uy(s[i],e[i]))return!1}return!0}return s!==s&&e!==e}function $M(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function dk(s,e){const t=$M(s);return Math.round(e*t)/t}function Ww(s){const e=w.useRef(s);return Gx(()=>{e.current=s}),e}function FW(s){s===void 0&&(s={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=s,[h,f]=w.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=w.useState(n);uy(m,n)||p(n);const[x,v]=w.useState(null),[b,g]=w.useState(null),y=w.useCallback(D=>{D!==E.current&&(E.current=D,v(D))},[]),j=w.useCallback(D=>{D!==A.current&&(A.current=D,g(D))},[]),_=i||x,S=o||b,E=w.useRef(null),A=w.useRef(null),P=w.useRef(h),T=c!=null,I=Ww(c),O=Ww(r),L=Ww(d),z=w.useCallback(()=>{if(!E.current||!A.current)return;const D={placement:e,strategy:t,middleware:m};O.current&&(D.platform=O.current),DW(E.current,A.current,D).then(R=>{const H={...R,isPositioned:L.current!==!1};M.current&&!uy(P.current,H)&&(P.current=H,fu.flushSync(()=>{f(H)}))})},[m,e,t,O,L]);Gx(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[d]);const M=w.useRef(!1);Gx(()=>(M.current=!0,()=>{M.current=!1}),[]),Gx(()=>{if(_&&(E.current=_),S&&(A.current=S),_&&S){if(I.current)return I.current(_,S,z);z()}},[_,S,z,I,T]);const U=w.useMemo(()=>({reference:E,floating:A,setReference:y,setFloating:j}),[y,j]),$=w.useMemo(()=>({reference:_,floating:S}),[_,S]),F=w.useMemo(()=>{const D={position:t,left:0,top:0};if(!$.floating)return D;const R=dk($.floating,h.x),H=dk($.floating,h.y);return l?{...D,transform:"translate("+R+"px, "+H+"px)",...$M($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:R,top:H}},[t,l,$.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:z,refs:U,elements:$,floatingStyles:F}),[h,z,U,$,F])}const $W=s=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:s,fn(t){const{element:n,padding:r}=typeof s=="function"?s(t):s;return n&&e(n)?n.current!=null?ck({element:n.current,padding:r}).fn(t):{}:n?ck({element:n,padding:r}).fn(t):{}}}},zW=(s,e)=>({...kW(s),options:[s,e]}),BW=(s,e)=>({...PW(s),options:[s,e]}),HW=(s,e)=>({...IW(s),options:[s,e]}),UW=(s,e)=>({...TW(s),options:[s,e]}),WW=(s,e)=>({...RW(s),options:[s,e]}),VW=(s,e)=>({...MW(s),options:[s,e]}),qW=(s,e)=>({...$W(s),options:[s,e]});var GW="Arrow",zM=w.forwardRef((s,e)=>{const{children:t,width:n=10,height:r=5,...i}=s;return a.jsx(de.svg,{...i,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?t:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});zM.displayName=GW;var KW=zM;function YW(s){const[e,t]=w.useState(void 0);return It(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=s.offsetWidth,l=s.offsetHeight;t({width:o,height:l})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else t(void 0)},[s]),e}var KS="Popper",[BM,kb]=ui(KS),[XW,HM]=BM(KS),UM=s=>{const{__scopePopper:e,children:t}=s,[n,r]=w.useState(null);return a.jsx(XW,{scope:e,anchor:n,onAnchorChange:r,children:t})};UM.displayName=KS;var WM="PopperAnchor",VM=w.forwardRef((s,e)=>{const{__scopePopper:t,virtualRef:n,...r}=s,i=HM(WM,t),o=w.useRef(null),l=Ke(e,o);return w.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(de.div,{...r,ref:l})});VM.displayName=WM;var YS="PopperContent",[QW,JW]=BM(YS),qM=w.forwardRef((s,e)=>{var W,ge,je,Ee,Ce,Me;const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:x,...v}=s,b=HM(YS,t),[g,y]=w.useState(null),j=Ke(e,Nt=>y(Nt)),[_,S]=w.useState(null),E=YW(_),A=(E==null?void 0:E.width)??0,P=(E==null?void 0:E.height)??0,T=n+(i!=="center"?"-"+i:""),I=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},O=Array.isArray(d)?d:[d],L=O.length>0,z={padding:I,boundary:O.filter(eV),altBoundary:L},{refs:M,floatingStyles:U,placement:$,isPositioned:F,middlewareData:D}=FW({strategy:"fixed",placement:T,whileElementsMounted:(...Nt)=>CW(...Nt,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[zW({mainAxis:r+P,alignmentAxis:o}),c&&BW({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?HW():void 0,...z}),c&&UW({...z}),WW({...z,apply:({elements:Nt,rects:St,availableWidth:hc,availableHeight:yo})=>{const{width:fc,height:dm}=St.reference,xu=Nt.floating.style;xu.setProperty("--radix-popper-available-width",`${hc}px`),xu.setProperty("--radix-popper-available-height",`${yo}px`),xu.setProperty("--radix-popper-anchor-width",`${fc}px`),xu.setProperty("--radix-popper-anchor-height",`${dm}px`)}}),_&&qW({element:_,padding:l}),tV({arrowWidth:A,arrowHeight:P}),m&&VW({strategy:"referenceHidden",...z})]}),[R,H]=YM($),X=zt(x);It(()=>{F&&(X==null||X())},[F,X]);const B=(W=D.arrow)==null?void 0:W.x,V=(ge=D.arrow)==null?void 0:ge.y,J=((je=D.arrow)==null?void 0:je.centerOffset)!==0,[ee,le]=w.useState();return It(()=>{g&&le(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:F?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[(Ee=D.transformOrigin)==null?void 0:Ee.x,(Ce=D.transformOrigin)==null?void 0:Ce.y].join(" "),...((Me=D.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:a.jsx(QW,{scope:t,placedSide:R,onArrowChange:S,arrowX:B,arrowY:V,shouldHideArrow:J,children:a.jsx(de.div,{"data-side":R,"data-align":H,...v,ref:j,style:{...v.style,animation:F?void 0:"none"}})})})});qM.displayName=YS;var GM="PopperArrow",ZW={top:"bottom",right:"left",bottom:"top",left:"right"},KM=w.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,i=JW(GM,n),o=ZW[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(KW,{...r,ref:t,style:{...r.style,display:"block"}})})});KM.displayName=GM;function eV(s){return s!==null}var tV=s=>({name:"transformOrigin",options:s,fn(e){var b,g,y;const{placement:t,rects:n,middlewareData:r}=e,o=((b=r.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:s.arrowWidth,c=o?0:s.arrowHeight,[d,h]=YM(t),f={start:"0%",center:"50%",end:"100%"}[h],m=(((g=r.arrow)==null?void 0:g.x)??0)+l/2,p=(((y=r.arrow)==null?void 0:y.y)??0)+c/2;let x="",v="";return d==="bottom"?(x=o?f:`${m}px`,v=`${-c}px`):d==="top"?(x=o?f:`${m}px`,v=`${n.floating.height+c}px`):d==="right"?(x=`${-c}px`,v=o?f:`${p}px`):d==="left"&&(x=`${n.floating.width+c}px`,v=o?f:`${p}px`),{data:{x,y:v}}}});function YM(s){const[e,t="center"]=s.split("-");return[e,t]}var XM=UM,XS=VM,QM=qM,JM=KM;function sV(s){const e=w.useRef({value:s,previous:s});return w.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var nV=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},Cu=new WeakMap,wx=new WeakMap,jx={},Vw=0,ZM=function(s){return s&&(s.host||ZM(s.parentNode))},rV=function(s,e){return e.map(function(t){if(s.contains(t))return t;var n=ZM(t);return n&&s.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},iV=function(s,e,t,n){var r=rV(e,Array.isArray(s)?s:[s]);jx[t]||(jx[t]=new WeakMap);var i=jx[t],o=[],l=new Set,c=new Set(r),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};r.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(n),x=p!==null&&p!=="false",v=(Cu.get(m)||0)+1,b=(i.get(m)||0)+1;Cu.set(m,v),i.set(m,b),o.push(m),v===1&&x&&wx.set(m,!0),b===1&&m.setAttribute(t,"true"),x||m.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return h(e),l.clear(),Vw++,function(){o.forEach(function(f){var m=Cu.get(f)-1,p=i.get(f)-1;Cu.set(f,m),i.set(f,p),m||(wx.has(f)||f.removeAttribute(n),wx.delete(f)),p||f.removeAttribute(t)}),Vw--,Vw||(Cu=new WeakMap,Cu=new WeakMap,wx=new WeakMap,jx={})}},QS=function(s,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),r=nV(s);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),iV(n,r,t,"aria-hidden")):function(){return null}},Ui=function(){return Ui=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ui.apply(this,arguments)};function eI(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function aV(s,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,i;n<r;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return s.concat(i||Array.prototype.slice.call(e))}var Kx="right-scroll-bar-position",Yx="width-before-scroll-bar",oV="with-scroll-bars-hidden",lV="--removed-body-scroll-bar-size";function qw(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function cV(s,e){var t=w.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var dV=typeof window<"u"?w.useLayoutEffect:w.useEffect,uk=new WeakMap;function uV(s,e){var t=cV(null,function(n){return s.forEach(function(r){return qw(r,n)})});return dV(function(){var n=uk.get(t);if(n){var r=new Set(n),i=new Set(s),o=t.current;r.forEach(function(l){i.has(l)||qw(l,null)}),i.forEach(function(l){r.has(l)||qw(l,o)})}uk.set(t,s)},[s]),t}function hV(s){return s}function fV(s,e){e===void 0&&(e=hV);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(i){var o=e(i,n);return t.push(o),function(){t=t.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){n=!0;var o=[];if(t.length){var l=t;t=[],l.forEach(i),o=t}var c=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),t}}}};return r}function mV(s){s===void 0&&(s={});var e=fV(null);return e.options=Ui({async:!0,ssr:!1},s),e}var tI=function(s){var e=s.sideCar,t=eI(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,Ui({},t))};tI.isSideCarExport=!0;function pV(s,e){return s.useMedium(e),tI}var sI=mV(),Gw=function(){},Pb=w.forwardRef(function(s,e){var t=w.useRef(null),n=w.useState({onScrollCapture:Gw,onWheelCapture:Gw,onTouchMoveCapture:Gw}),r=n[0],i=n[1],o=s.forwardProps,l=s.children,c=s.className,d=s.removeScrollBar,h=s.enabled,f=s.shards,m=s.sideCar,p=s.noRelative,x=s.noIsolation,v=s.inert,b=s.allowPinchZoom,g=s.as,y=g===void 0?"div":g,j=s.gapMode,_=eI(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,E=uV([t,e]),A=Ui(Ui({},_),r);return w.createElement(w.Fragment,null,h&&w.createElement(S,{sideCar:sI,removeScrollBar:d,shards:f,noRelative:p,noIsolation:x,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:t,gapMode:j}),o?w.cloneElement(w.Children.only(l),Ui(Ui({},A),{ref:E})):w.createElement(y,Ui({},A,{className:c,ref:E}),l))});Pb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pb.classNames={fullWidth:Yx,zeroRight:Kx};var gV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function vV(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=gV();return e&&s.setAttribute("nonce",e),s}function xV(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function yV(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var bV=function(){var s=0,e=null;return{add:function(t){s==0&&(e=vV())&&(xV(e,t),yV(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},wV=function(){var s=bV();return function(e,t){w.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},nI=function(){var s=wV(),e=function(t){var n=t.styles,r=t.dynamic;return s(n,r),null};return e},jV={left:0,top:0,right:0,gap:0},Kw=function(s){return parseInt(s||"",10)||0},_V=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],n=e[s==="padding"?"paddingTop":"marginTop"],r=e[s==="padding"?"paddingRight":"marginRight"];return[Kw(t),Kw(n),Kw(r)]},NV=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return jV;var e=_V(s),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},SV=nI(),mh="data-scroll-locked",AV=function(s,e,t,n){var r=s.left,i=s.top,o=s.right,l=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(oV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(mh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kx,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Yx,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Kx," .").concat(Kx,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Yx," .").concat(Yx,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(mh,`] {
    `).concat(lV,": ").concat(l,`px;
  }
`)},hk=function(){var s=parseInt(document.body.getAttribute(mh)||"0",10);return isFinite(s)?s:0},EV=function(){w.useEffect(function(){return document.body.setAttribute(mh,(hk()+1).toString()),function(){var s=hk()-1;s<=0?document.body.removeAttribute(mh):document.body.setAttribute(mh,s.toString())}},[])},CV=function(s){var e=s.noRelative,t=s.noImportant,n=s.gapMode,r=n===void 0?"margin":n;EV();var i=w.useMemo(function(){return NV(r)},[r]);return w.createElement(SV,{styles:AV(i,!e,r,t?"":"!important")})},Hj=!1;if(typeof window<"u")try{var _x=Object.defineProperty({},"passive",{get:function(){return Hj=!0,!0}});window.addEventListener("test",_x,_x),window.removeEventListener("test",_x,_x)}catch{Hj=!1}var ku=Hj?{passive:!1}:!1,kV=function(s){return s.tagName==="TEXTAREA"},rI=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!kV(s)&&t[e]==="visible")},PV=function(s){return rI(s,"overflowY")},TV=function(s){return rI(s,"overflowX")},fk=function(s,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=iI(s,n);if(r){var i=aI(s,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},RV=function(s){var e=s.scrollTop,t=s.scrollHeight,n=s.clientHeight;return[e,t,n]},MV=function(s){var e=s.scrollLeft,t=s.scrollWidth,n=s.clientWidth;return[e,t,n]},iI=function(s,e){return s==="v"?PV(e):TV(e)},aI=function(s,e){return s==="v"?RV(e):MV(e)},IV=function(s,e){return s==="h"&&e==="rtl"?-1:1},DV=function(s,e,t,n,r){var i=IV(s,window.getComputedStyle(e).direction),o=i*n,l=t.target,c=e.contains(l),d=!1,h=o>0,f=0,m=0;do{if(!l)break;var p=aI(s,l),x=p[0],v=p[1],b=p[2],g=v-b-i*x;(x||g)&&iI(s,l)&&(f+=g,m+=x);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!r)||!h&&(Math.abs(m)<1||!r))&&(d=!0),d},Nx=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},mk=function(s){return[s.deltaX,s.deltaY]},pk=function(s){return s&&"current"in s?s.current:s},OV=function(s,e){return s[0]===e[0]&&s[1]===e[1]},LV=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},FV=0,Pu=[];function $V(s){var e=w.useRef([]),t=w.useRef([0,0]),n=w.useRef(),r=w.useState(FV++)[0],i=w.useState(nI)[0],o=w.useRef(s);w.useEffect(function(){o.current=s},[s]),w.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(r));var v=aV([s.lockRef.current],(s.shards||[]).map(pk),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[s.inert,s.lockRef.current,s.shards]);var l=w.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var g=Nx(v),y=t.current,j="deltaX"in v?v.deltaX:y[0]-g[0],_="deltaY"in v?v.deltaY:y[1]-g[1],S,E=v.target,A=Math.abs(j)>Math.abs(_)?"h":"v";if("touches"in v&&A==="h"&&E.type==="range")return!1;var P=fk(A,E);if(!P)return!0;if(P?S=A:(S=A==="v"?"h":"v",P=fk(A,E)),!P)return!1;if(!n.current&&"changedTouches"in v&&(j||_)&&(n.current=S),!S)return!0;var T=n.current||S;return DV(T,b,v,T==="h"?j:_,!0)},[]),c=w.useCallback(function(v){var b=v;if(!(!Pu.length||Pu[Pu.length-1]!==i)){var g="deltaY"in b?mk(b):Nx(b),y=e.current.filter(function(S){return S.name===b.type&&(S.target===b.target||b.target===S.shadowParent)&&OV(S.delta,g)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var j=(o.current.shards||[]).map(pk).filter(Boolean).filter(function(S){return S.contains(b.target)}),_=j.length>0?l(b,j[0]):!o.current.noIsolation;_&&b.cancelable&&b.preventDefault()}}},[]),d=w.useCallback(function(v,b,g,y){var j={name:v,delta:b,target:g,should:y,shadowParent:zV(g)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(_){return _!==j})},1)},[]),h=w.useCallback(function(v){t.current=Nx(v),n.current=void 0},[]),f=w.useCallback(function(v){d(v.type,mk(v),v.target,l(v,s.lockRef.current))},[]),m=w.useCallback(function(v){d(v.type,Nx(v),v.target,l(v,s.lockRef.current))},[]);w.useEffect(function(){return Pu.push(i),s.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,ku),document.addEventListener("touchmove",c,ku),document.addEventListener("touchstart",h,ku),function(){Pu=Pu.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,ku),document.removeEventListener("touchmove",c,ku),document.removeEventListener("touchstart",h,ku)}},[]);var p=s.removeScrollBar,x=s.inert;return w.createElement(w.Fragment,null,x?w.createElement(i,{styles:LV(r)}):null,p?w.createElement(CV,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function zV(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const BV=pV(sI,$V);var Tb=w.forwardRef(function(s,e){return w.createElement(Pb,Ui({},s,{ref:e,sideCar:BV}))});Tb.classNames=Pb.classNames;var HV=[" ","Enter","ArrowUp","ArrowDown"],UV=[" ","Enter"],tu="Select",[Rb,Mb,WV]=gS(tu),[cm,tJ]=ui(tu,[WV,kb]),Ib=kb(),[VV,cc]=cm(tu),[qV,GV]=cm(tu),oI=s=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:r,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:p,form:x}=s,v=Ib(e),[b,g]=w.useState(null),[y,j]=w.useState(null),[_,S]=w.useState(!1),E=_b(d),[A,P]=Jd({prop:n,defaultProp:r??!1,onChange:i,caller:tu}),[T,I]=Jd({prop:o,defaultProp:l,onChange:c,caller:tu}),O=w.useRef(null),L=b?x||!!b.closest("form"):!0,[z,M]=w.useState(new Set),U=Array.from(z).map($=>$.props.value).join(";");return a.jsx(XM,{...v,children:a.jsxs(VV,{required:p,scope:e,trigger:b,onTriggerChange:g,valueNode:y,onValueNodeChange:j,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:tn(),value:T,onValueChange:I,open:A,onOpenChange:P,dir:E,triggerPointerDownPosRef:O,disabled:m,children:[a.jsx(Rb.Provider,{scope:e,children:a.jsx(qV,{scope:s.__scopeSelect,onNativeOptionAdd:w.useCallback($=>{M(F=>new Set(F).add($))},[]),onNativeOptionRemove:w.useCallback($=>{M(F=>{const D=new Set(F);return D.delete($),D})},[]),children:t})}),L?a.jsxs(TI,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:$=>I($.target.value),disabled:m,form:x,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(z)]},U):null]})})};oI.displayName=tu;var lI="SelectTrigger",cI=w.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:n=!1,...r}=s,i=Ib(t),o=cc(lI,t),l=o.disabled||n,c=Ke(e,o.onTriggerChange),d=Mb(t),h=w.useRef("touch"),[f,m,p]=MI(v=>{const b=d().filter(j=>!j.disabled),g=b.find(j=>j.value===o.value),y=II(b,v,g);y!==void 0&&o.onValueChange(y.value)}),x=v=>{l||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(XS,{asChild:!0,...i,children:a.jsx(de.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":RI(o.value)?"":void 0,...r,ref:c,onClick:me(r.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&x(v)}),onPointerDown:me(r.onPointerDown,v=>{h.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:me(r.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(b&&v.key===" ")&&HV.includes(v.key)&&(x(),v.preventDefault())})})})});cI.displayName=lI;var dI="SelectValue",uI=w.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:r,children:i,placeholder:o="",...l}=s,c=cc(dI,t),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Ke(e,c.onValueNodeChange);return It(()=>{d(h)},[d,h]),a.jsx(de.span,{...l,ref:f,style:{pointerEvents:"none"},children:RI(c.value)?a.jsx(a.Fragment,{children:o}):i})});uI.displayName=dI;var KV="SelectIcon",hI=w.forwardRef((s,e)=>{const{__scopeSelect:t,children:n,...r}=s;return a.jsx(de.span,{"aria-hidden":!0,...r,ref:e,children:n||"▼"})});hI.displayName=KV;var YV="SelectPortal",fI=s=>a.jsx(Sv,{asChild:!0,...s});fI.displayName=YV;var su="SelectContent",mI=w.forwardRef((s,e)=>{const t=cc(su,s.__scopeSelect),[n,r]=w.useState();if(It(()=>{r(new DocumentFragment)},[]),!t.open){const i=n;return i?fu.createPortal(a.jsx(pI,{scope:s.__scopeSelect,children:a.jsx(Rb.Slot,{scope:s.__scopeSelect,children:a.jsx("div",{children:s.children})})}),i):null}return a.jsx(gI,{...s,ref:e})});mI.displayName=su;var Rr=10,[pI,dc]=cm(su),XV="SelectContentImpl",QV=Qd("SelectContent.RemoveScroll"),gI=w.forwardRef((s,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:b,...g}=s,y=cc(su,t),[j,_]=w.useState(null),[S,E]=w.useState(null),A=Ke(e,W=>_(W)),[P,T]=w.useState(null),[I,O]=w.useState(null),L=Mb(t),[z,M]=w.useState(!1),U=w.useRef(!1);w.useEffect(()=>{if(j)return QS(j)},[j]),zS();const $=w.useCallback(W=>{const[ge,...je]=L().map(Me=>Me.ref.current),[Ee]=je.slice(-1),Ce=document.activeElement;for(const Me of W)if(Me===Ce||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===ge&&S&&(S.scrollTop=0),Me===Ee&&S&&(S.scrollTop=S.scrollHeight),Me==null||Me.focus(),document.activeElement!==Ce))return},[L,S]),F=w.useCallback(()=>$([P,j]),[$,P,j]);w.useEffect(()=>{z&&F()},[z,F]);const{onOpenChange:D,triggerPointerDownPosRef:R}=y;w.useEffect(()=>{if(j){let W={x:0,y:0};const ge=Ee=>{var Ce,Me;W={x:Math.abs(Math.round(Ee.pageX)-(((Ce=R.current)==null?void 0:Ce.x)??0)),y:Math.abs(Math.round(Ee.pageY)-(((Me=R.current)==null?void 0:Me.y)??0))}},je=Ee=>{W.x<=10&&W.y<=10?Ee.preventDefault():j.contains(Ee.target)||D(!1),document.removeEventListener("pointermove",ge),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",je,{capture:!0})}}},[j,D,R]),w.useEffect(()=>{const W=()=>D(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[D]);const[H,X]=MI(W=>{const ge=L().filter(Ce=>!Ce.disabled),je=ge.find(Ce=>Ce.ref.current===document.activeElement),Ee=II(ge,W,je);Ee&&setTimeout(()=>Ee.ref.current.focus())}),B=w.useCallback((W,ge,je)=>{const Ee=!U.current&&!je;(y.value!==void 0&&y.value===ge||Ee)&&(T(W),Ee&&(U.current=!0))},[y.value]),V=w.useCallback(()=>j==null?void 0:j.focus(),[j]),J=w.useCallback((W,ge,je)=>{const Ee=!U.current&&!je;(y.value!==void 0&&y.value===ge||Ee)&&O(W)},[y.value]),ee=n==="popper"?Uj:vI,le=ee===Uj?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:b}:{};return a.jsx(pI,{scope:t,content:j,viewport:S,onViewportChange:E,itemRefCallback:B,selectedItem:P,onItemLeave:V,itemTextRefCallback:J,focusSelectedItem:F,selectedItemText:I,position:n,isPositioned:z,searchRef:H,children:a.jsx(Tb,{as:QV,allowPinchZoom:!0,children:a.jsx(Sb,{asChild:!0,trapped:y.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:me(r,W=>{var ge;(ge=y.trigger)==null||ge.focus({preventScroll:!0}),W.preventDefault()}),children:a.jsx(Nv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(ee,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:W=>W.preventDefault(),...g,...le,onPlaced:()=>M(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:me(g.onKeyDown,W=>{const ge=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ge&&W.key.length===1&&X(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let Ee=L().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(W.key)&&(Ee=Ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const Ce=W.target,Me=Ee.indexOf(Ce);Ee=Ee.slice(Me+1)}setTimeout(()=>$(Ee)),W.preventDefault()}})})})})})})});gI.displayName=XV;var JV="SelectItemAlignedPosition",vI=w.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:n,...r}=s,i=cc(su,t),o=dc(su,t),[l,c]=w.useState(null),[d,h]=w.useState(null),f=Ke(e,A=>h(A)),m=Mb(t),p=w.useRef(!1),x=w.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:g,focusSelectedItem:y}=o,j=w.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&b&&g){const A=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),I=g.getBoundingClientRect();if(i.dir!=="rtl"){const Ce=I.left-P.left,Me=T.left-Ce,Nt=A.left-Me,St=A.width+Nt,hc=Math.max(St,P.width),yo=window.innerWidth-Rr,fc=Fj(Me,[Rr,Math.max(Rr,yo-hc)]);l.style.minWidth=St+"px",l.style.left=fc+"px"}else{const Ce=P.right-I.right,Me=window.innerWidth-T.right-Ce,Nt=window.innerWidth-A.right-Me,St=A.width+Nt,hc=Math.max(St,P.width),yo=window.innerWidth-Rr,fc=Fj(Me,[Rr,Math.max(Rr,yo-hc)]);l.style.minWidth=St+"px",l.style.right=fc+"px"}const O=m(),L=window.innerHeight-Rr*2,z=v.scrollHeight,M=window.getComputedStyle(d),U=parseInt(M.borderTopWidth,10),$=parseInt(M.paddingTop,10),F=parseInt(M.borderBottomWidth,10),D=parseInt(M.paddingBottom,10),R=U+$+z+D+F,H=Math.min(b.offsetHeight*5,R),X=window.getComputedStyle(v),B=parseInt(X.paddingTop,10),V=parseInt(X.paddingBottom,10),J=A.top+A.height/2-Rr,ee=L-J,le=b.offsetHeight/2,W=b.offsetTop+le,ge=U+$+W,je=R-ge;if(ge<=J){const Ce=O.length>0&&b===O[O.length-1].ref.current;l.style.bottom="0px";const Me=d.clientHeight-v.offsetTop-v.offsetHeight,Nt=Math.max(ee,le+(Ce?V:0)+Me+F),St=ge+Nt;l.style.height=St+"px"}else{const Ce=O.length>0&&b===O[0].ref.current;l.style.top="0px";const Nt=Math.max(J,U+v.offsetTop+(Ce?B:0)+le)+je;l.style.height=Nt+"px",v.scrollTop=ge-J+v.offsetTop}l.style.margin=`${Rr}px 0`,l.style.minHeight=H+"px",l.style.maxHeight=L+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,b,g,i.dir,n]);It(()=>j(),[j]);const[_,S]=w.useState();It(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const E=w.useCallback(A=>{A&&x.current===!0&&(j(),y==null||y(),x.current=!1)},[j,y]);return a.jsx(e7,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:a.jsx(de.div,{...r,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});vI.displayName=JV;var ZV="SelectPopperPosition",Uj=w.forwardRef((s,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:r=Rr,...i}=s,o=Ib(t);return a.jsx(QM,{...o,...i,ref:e,align:n,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Uj.displayName=ZV;var[e7,JS]=cm(su,{}),Wj="SelectViewport",xI=w.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:n,...r}=s,i=dc(Wj,t),o=JS(Wj,t),l=Ke(e,i.onViewportChange),c=w.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Rb.Slot,{scope:t,children:a.jsx(de.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:me(r.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const p=Math.abs(c.current-h.scrollTop);if(p>0){const x=window.innerHeight-Rr*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),g=Math.max(v,b);if(g<x){const y=g+p,j=Math.min(x,y),_=y-j;f.style.height=j+"px",f.style.bottom==="0px"&&(h.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});xI.displayName=Wj;var yI="SelectGroup",[t7,s7]=cm(yI),n7=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=tn();return a.jsx(t7,{scope:t,id:r,children:a.jsx(de.div,{role:"group","aria-labelledby":r,...n,ref:e})})});n7.displayName=yI;var bI="SelectLabel",wI=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=s7(bI,t);return a.jsx(de.div,{id:r.id,...n,ref:e})});wI.displayName=bI;var hy="SelectItem",[r7,jI]=cm(hy),_I=w.forwardRef((s,e)=>{const{__scopeSelect:t,value:n,disabled:r=!1,textValue:i,...o}=s,l=cc(hy,t),c=dc(hy,t),d=l.value===n,[h,f]=w.useState(i??""),[m,p]=w.useState(!1),x=Ke(e,y=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,y,n,r)}),v=tn(),b=w.useRef("touch"),g=()=>{r||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(r7,{scope:t,value:n,disabled:r,textId:v,isSelected:d,onItemTextChange:w.useCallback(y=>{f(j=>j||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(Rb.ItemSlot,{scope:t,value:n,disabled:r,textValue:h,children:a.jsx(de.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:x,onFocus:me(o.onFocus,()=>p(!0)),onBlur:me(o.onBlur,()=>p(!1)),onClick:me(o.onClick,()=>{b.current!=="mouse"&&g()}),onPointerUp:me(o.onPointerUp,()=>{b.current==="mouse"&&g()}),onPointerDown:me(o.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:me(o.onPointerMove,y=>{var j;b.current=y.pointerType,r?(j=c.onItemLeave)==null||j.call(c):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,y=>{var j;y.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:me(o.onKeyDown,y=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(UV.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})})})})});_I.displayName=hy;var Im="SelectItemText",NI=w.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:r,...i}=s,o=cc(Im,t),l=dc(Im,t),c=jI(Im,t),d=GV(Im,t),[h,f]=w.useState(null),m=Ke(e,g=>f(g),c.onItemTextChange,g=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,g,c.value,c.disabled)}),p=h==null?void 0:h.textContent,x=w.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=d;return It(()=>(v(x),()=>b(x)),[v,b,x]),a.jsxs(a.Fragment,{children:[a.jsx(de.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?fu.createPortal(i.children,o.valueNode):null]})});NI.displayName=Im;var SI="SelectItemIndicator",AI=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return jI(SI,t).isSelected?a.jsx(de.span,{"aria-hidden":!0,...n,ref:e}):null});AI.displayName=SI;var Vj="SelectScrollUpButton",EI=w.forwardRef((s,e)=>{const t=dc(Vj,s.__scopeSelect),n=JS(Vj,s.__scopeSelect),[r,i]=w.useState(!1),o=Ke(e,n.onScrollButtonChange);return It(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?a.jsx(kI,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});EI.displayName=Vj;var qj="SelectScrollDownButton",CI=w.forwardRef((s,e)=>{const t=dc(qj,s.__scopeSelect),n=JS(qj,s.__scopeSelect),[r,i]=w.useState(!1),o=Ke(e,n.onScrollButtonChange);return It(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?a.jsx(kI,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});CI.displayName=qj;var kI=w.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:n,...r}=s,i=dc("SelectScrollButton",t),o=w.useRef(null),l=Mb(t),c=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),It(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(de.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:me(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:me(r.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:me(r.onPointerLeave,()=>{c()})})}),i7="SelectSeparator",PI=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return a.jsx(de.div,{"aria-hidden":!0,...n,ref:e})});PI.displayName=i7;var Gj="SelectArrow",a7=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=Ib(t),i=cc(Gj,t),o=dc(Gj,t);return i.open&&o.position==="popper"?a.jsx(JM,{...r,...n,ref:e}):null});a7.displayName=Gj;var o7="SelectBubbleInput",TI=w.forwardRef(({__scopeSelect:s,value:e,...t},n)=>{const r=w.useRef(null),i=Ke(n,r),o=sV(e);return w.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(de.select,{...t,style:{...PT,...t.style},ref:i,defaultValue:e})});TI.displayName=o7;function RI(s){return s===""||s===void 0}function MI(s){const e=zt(s),t=w.useRef(""),n=w.useRef(0),r=w.useCallback(o=>{const l=t.current+o;e(l),function c(d){t.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=w.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,r,i]}function II(s,e,t){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?s.indexOf(t):-1;let o=l7(s,Math.max(i,0));r.length===1&&(o=o.filter(d=>d!==t));const c=o.find(d=>d.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function l7(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var c7=oI,DI=cI,d7=uI,u7=hI,h7=fI,OI=mI,f7=xI,LI=wI,FI=_I,m7=NI,p7=AI,$I=EI,zI=CI,BI=PI;const gn=c7,vn=d7,Xs=w.forwardRef(({className:s,children:e,...t},n)=>a.jsxs(DI,{ref:n,className:ne("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[e,a.jsx(u7,{asChild:!0,children:a.jsx(tR,{className:"h-4 w-4 opacity-50"})})]}));Xs.displayName=DI.displayName;const HI=w.forwardRef(({className:s,...e},t)=>a.jsx($I,{ref:t,className:ne("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(M$,{className:"h-4 w-4"})}));HI.displayName=$I.displayName;const UI=w.forwardRef(({className:s,...e},t)=>a.jsx(zI,{ref:t,className:ne("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(tR,{className:"h-4 w-4"})}));UI.displayName=zI.displayName;const Qs=w.forwardRef(({className:s,children:e,position:t="popper",...n},r)=>a.jsx(h7,{children:a.jsxs(OI,{ref:r,className:ne("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[a.jsx(HI,{}),a.jsx(f7,{className:ne("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(UI,{})]})}));Qs.displayName=OI.displayName;const g7=w.forwardRef(({className:s,...e},t)=>a.jsx(LI,{ref:t,className:ne("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...e}));g7.displayName=LI.displayName;const Xe=w.forwardRef(({className:s,children:e,...t},n)=>a.jsxs(FI,{ref:n,className:ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(p7,{children:a.jsx(eR,{className:"h-4 w-4"})})}),a.jsx(m7,{children:e})]}));Xe.displayName=FI.displayName;const v7=w.forwardRef(({className:s,...e},t)=>a.jsx(BI,{ref:t,className:ne("-mx-1 my-1 h-px bg-muted",s),...e}));v7.displayName=BI.displayName;var Db="Dialog",[WI,sJ]=ui(Db),[x7,hi]=WI(Db),VI=s=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:i,modal:o=!0}=s,l=w.useRef(null),c=w.useRef(null),[d,h]=Jd({prop:n,defaultProp:r??!1,onChange:i,caller:Db});return a.jsx(x7,{scope:e,triggerRef:l,contentRef:c,contentId:tn(),titleId:tn(),descriptionId:tn(),open:d,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(f=>!f),[h]),modal:o,children:t})};VI.displayName=Db;var qI="DialogTrigger",GI=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=hi(qI,t),i=Ke(e,r.triggerRef);return a.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":tA(r.open),...n,ref:i,onClick:me(s.onClick,r.onOpenToggle)})});GI.displayName=qI;var ZS="DialogPortal",[y7,KI]=WI(ZS,{forceMount:void 0}),YI=s=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=s,i=hi(ZS,e);return a.jsx(y7,{scope:e,forceMount:t,children:w.Children.map(n,o=>a.jsx(Nr,{present:t||i.open,children:a.jsx(Sv,{asChild:!0,container:r,children:o})}))})};YI.displayName=ZS;var fy="DialogOverlay",XI=w.forwardRef((s,e)=>{const t=KI(fy,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,i=hi(fy,s.__scopeDialog);return i.modal?a.jsx(Nr,{present:n||i.open,children:a.jsx(w7,{...r,ref:e})}):null});XI.displayName=fy;var b7=Qd("DialogOverlay.RemoveScroll"),w7=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=hi(fy,t);return a.jsx(Tb,{as:b7,allowPinchZoom:!0,shards:[r.contentRef],children:a.jsx(de.div,{"data-state":tA(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),nu="DialogContent",QI=w.forwardRef((s,e)=>{const t=KI(nu,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,i=hi(nu,s.__scopeDialog);return a.jsx(Nr,{present:n||i.open,children:i.modal?a.jsx(j7,{...r,ref:e}):a.jsx(_7,{...r,ref:e})})});QI.displayName=nu;var j7=w.forwardRef((s,e)=>{const t=hi(nu,s.__scopeDialog),n=w.useRef(null),r=Ke(e,t.contentRef,n);return w.useEffect(()=>{const i=n.current;if(i)return QS(i)},[]),a.jsx(JI,{...s,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(s.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(s.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:me(s.onFocusOutside,i=>i.preventDefault())})}),_7=w.forwardRef((s,e)=>{const t=hi(nu,s.__scopeDialog),n=w.useRef(!1),r=w.useRef(!1);return a.jsx(JI,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(n.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=s.onInteractOutside)==null||c.call(s,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),JI=w.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=s,l=hi(nu,t),c=w.useRef(null),d=Ke(e,c);return zS(),a.jsxs(a.Fragment,{children:[a.jsx(Sb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(Nv,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tA(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(N7,{titleId:l.titleId}),a.jsx(A7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),eA="DialogTitle",ZI=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=hi(eA,t);return a.jsx(de.h2,{id:r.titleId,...n,ref:e})});ZI.displayName=eA;var eD="DialogDescription",tD=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=hi(eD,t);return a.jsx(de.p,{id:r.descriptionId,...n,ref:e})});tD.displayName=eD;var sD="DialogClose",nD=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=hi(sD,t);return a.jsx(de.button,{type:"button",...n,ref:e,onClick:me(s.onClick,()=>r.onOpenChange(!1))})});nD.displayName=sD;function tA(s){return s?"open":"closed"}var rD="DialogTitleWarning",[nJ,iD]=F5(rD,{contentName:nu,titleName:eA,docsSlug:"dialog"}),N7=({titleId:s})=>{const e=iD(rD),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},S7="DialogDescriptionWarning",A7=({contentRef:s,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${iD(S7).contentName}}.`;return w.useEffect(()=>{var i;const r=(i=s.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,s,e]),null},aD=VI,E7=GI,oD=YI,sA=XI,nA=QI,lD=ZI,cD=tD,C7=nD;const ru=aD,Kj=E7,k7=oD,dD=w.forwardRef(({className:s,...e},t)=>a.jsx(sA,{ref:t,className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));dD.displayName=sA.displayName;const Kl=w.forwardRef(({className:s,children:e,...t},n)=>a.jsxs(k7,{children:[a.jsx(dD,{}),a.jsxs(nA,{ref:n,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[e,a.jsxs(C7,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(go,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Kl.displayName=nA.displayName;const Yl=({className:s,...e})=>a.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});Yl.displayName="DialogHeader";const Xl=w.forwardRef(({className:s,...e},t)=>a.jsx(lD,{ref:t,className:ne("text-lg font-semibold leading-none tracking-tight",s),...e}));Xl.displayName=lD.displayName;const Yj=w.forwardRef(({className:s,...e},t)=>a.jsx(cD,{ref:t,className:ne("text-sm text-muted-foreground",s),...e}));Yj.displayName=cD.displayName;var P7="Label",uD=w.forwardRef((s,e)=>a.jsx(de.label,{...s,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=s.onMouseDown)==null||r.call(s,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));uD.displayName=P7;var hD=uD;const T7=Ev("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),pe=w.forwardRef(({className:s,...e},t)=>a.jsx(hD,{ref:t,className:ne(T7(),s),...e}));pe.displayName=hD.displayName;const iu=w.forwardRef(({className:s,...e},t)=>a.jsx("textarea",{className:ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...e}));iu.displayName="Textarea";const gk=({onCourseAdded:s})=>{const{user:e}=oa(),[t,n]=w.useState(!1),[r,i]=w.useState(!1),[o,l]=w.useState({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),c=["Chirurgie","Notfallmedizin","Radiologie","Anästhesie","Innere Medizin","Pädiatrie","Gynäkologie","Orthopädie","Urologie","Dermatologie","Neurologie","Psychiatrie","Ethik","Kommunikation","Forschung","Digital Health","Qualitätsmanagement","Grundlagen","Sonstiges"],d=(f,m)=>{l(p=>({...p,[f]:m}))},h=async f=>{if(f.preventDefault(),!e){ye.error("Sie müssen angemeldet sein, um Kurse hinzuzufügen");return}i(!0);try{const m={...o,user_id:e.id,points:Number(o.points),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:p,error:x}=await Z.from("user_courses").insert([m]).select().single();if(x)throw x;ye.success("Kurs erfolgreich hinzugefügt!"),n(!1),l({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),s&&s(p)}catch(m){console.error("Error adding course:",m),ye.error("Fehler beim Hinzufügen des Kurses")}finally{i(!1)}};return a.jsxs(ru,{open:t,onOpenChange:n,children:[a.jsx(Kj,{asChild:!0,children:a.jsxs(q,{className:"gap-2",children:[a.jsx(ri,{className:"w-4 h-4"}),"Kurs hinzufügen"]})}),a.jsxs(Kl,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(Yl,{children:a.jsxs(Xl,{className:"flex items-center gap-2",children:[a.jsx(en,{className:"w-5 h-5"}),"Neuen Kurs hinzufügen"]})}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"title",children:"Kurs-Titel *"}),a.jsx(Te,{id:"title",value:o.title,onChange:f=>d("title",f.target.value),placeholder:"z.B. Advanced Laparoscopy Workshop",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"category",children:"Kategorie *"}),a.jsxs(gn,{value:o.category,onValueChange:f=>d("category",f),children:[a.jsx(Xs,{children:a.jsx(vn,{placeholder:"Kategorie wählen"})}),a.jsx(Qs,{children:c.map(f=>a.jsx(Xe,{value:f,children:f},f))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"description",children:"Beschreibung"}),a.jsx(iu,{id:"description",value:o.description,onChange:f=>d("description",f.target.value),placeholder:"Kurze Beschreibung des Kurses...",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"date",children:"Datum *"}),a.jsx(Te,{id:"date",type:"date",value:o.date,onChange:f=>d("date",f.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"location",children:"Ort"}),a.jsx(Te,{id:"location",value:o.location,onChange:f=>d("location",f.target.value),placeholder:"z.B. Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"duration",children:"Dauer"}),a.jsx(Te,{id:"duration",value:o.duration,onChange:f=>d("duration",f.target.value),placeholder:"z.B. 2 Tage"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"type",children:"Typ *"}),a.jsxs(gn,{value:o.type,onValueChange:f=>d("type",f),children:[a.jsx(Xs,{children:a.jsx(vn,{})}),a.jsxs(Qs,{children:[a.jsx(Xe,{value:"required",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Uf,{className:"w-4 h-4 text-yellow-500"}),"Pflichtkurs"]})}),a.jsx(Xe,{value:"optional",children:"Optional"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"status",children:"Status *"}),a.jsxs(gn,{value:o.status,onValueChange:f=>d("status",f),children:[a.jsx(Xs,{children:a.jsx(vn,{})}),a.jsxs(Qs,{children:[a.jsx(Xe,{value:"completed",children:"Abgeschlossen"}),a.jsx(Xe,{value:"in-progress",children:"Läuft"}),a.jsx(Xe,{value:"upcoming",children:"Geplant"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"points",children:"CME Punkte"}),a.jsx(Te,{id:"points",type:"number",min:"0",max:"50",value:o.points,onChange:f=>d("points",Number(f.target.value)),placeholder:"0"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"provider",children:"Anbieter"}),a.jsx(Te,{id:"provider",value:o.provider,onChange:f=>d("provider",f.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"certificate_url",children:"Zertifikat URL"}),a.jsx(Te,{id:"certificate_url",type:"url",value:o.certificate_url,onChange:f=>d("certificate_url",f.target.value),placeholder:"https://..."})]})]}),a.jsxs(K,{className:"border-dashed",children:[a.jsx(Se,{children:a.jsx(Pe,{className:"text-sm",children:"Vorschau"})}),a.jsx(he,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.type==="required"&&a.jsx(Uf,{className:"w-4 h-4 text-yellow-500 fill-current"}),a.jsx("h3",{className:`font-semibold ${o.type==="required"?"font-bold":"font-medium"}`,children:o.title||"Kurs-Titel"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.category||"Kategorie"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.date&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(js,{className:"w-4 h-4"}),a.jsx("span",{children:new Date(o.date).toLocaleDateString("de-DE")})]}),o.location&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Hf,{className:"w-4 h-4"}),a.jsx("span",{children:o.location})]}),o.duration&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ac,{className:"w-4 h-4"}),a.jsx("span",{children:o.duration})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsx(Y,{variant:o.status==="completed"?"default":"outline",children:o.status==="completed"?"Abgeschlossen":o.status==="in-progress"?"Läuft":"Geplant"}),o.points>0&&a.jsxs(Y,{variant:"secondary",className:"text-xs",children:[o.points," CME"]})]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsxs(q,{type:"button",variant:"outline",onClick:()=>n(!1),children:[a.jsx(go,{className:"w-4 h-4 mr-2"}),"Abbrechen"]}),a.jsx(q,{type:"submit",disabled:r||!o.title||!o.date,children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Speichern..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fb,{className:"w-4 h-4 mr-2"}),"Speichern"]})})]})]})]})]})};function R7(){const{user:s}=oa(),[e,t]=OB(),[n,r]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState(!0),[d,h]=w.useState(e.get("search")||""),[f,m]=w.useState(e.get("country")||""),[p,x]=w.useState(e.get("specialty")||""),[v,b]=w.useState(e.get("modality")||""),[g,y]=w.useState(e.get("price")||""),[j,_]=w.useState("grid"),[S,E]=w.useState("available"),A=["Switzerland","Germany","Austria","France","Italy"],P=["Cardiology","Surgery","Neurology","Radiology","Emergency Medicine","Internal Medicine"],T=["Online","In-Person","Hybrid"],I=[{label:"Free",value:"0"},{label:"Under 100 CHF",value:"0-100"},{label:"100-500 CHF",value:"100-500"},{label:"500-1000 CHF",value:"500-1000"},{label:"Over 1000 CHF",value:"1000+"}];w.useEffect(()=>{let R=!0;return(async()=>{R&&(await O(),s&&R&&await L())})(),()=>{R=!1}},[s]);const O=w.useCallback(async()=>{c(!0);try{let R=Z.from("courses").select("*").eq("status","published").order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});if(d&&(R=R.or(`title.ilike.%${d}%,description.ilike.%${d}%`)),f&&(R=R.eq("country",f)),p&&(R=R.eq("specialty",p)),v&&(R=R.eq("modality",v)),g)if(g==="0")R=R.eq("price",0);else if(g.includes("-")){const[B,V]=g.split("-").map(Number);R=R.gte("price",B).lte("price",V)}else g==="1000+"&&(R=R.gte("price",1e3));const{data:H,error:X}=await R;if(X)throw X;r(H||[])}catch(R){console.error("Error fetching courses:",R),r([{id:"demo-1",title:"Suturing Basics",description:"Grundlagen der Nahttechniken",price:0,currency:"CHF",modality:"In-Person",city:"Zürich",country:"Switzerland",specialty:"Surgery",language:"DE",difficulty_level:"Beginner",tags:["Hands-on","Workshop"],average_rating:4.5,total_reviews:12,is_featured:!0,cover_image_url:"",cme_points:4,points:0,capacity:20,has_certificate:!0,provider_id:"demo"}])}finally{c(!1)}},[d,f,p,v,g]),L=w.useCallback(async()=>{if(s)try{const{data:R,error:H}=await Z.from("user_courses").select("*").eq("user_id",s.id).order("date",{ascending:!1});if(H)throw H;o(R||[])}catch(R){console.error("Error fetching user courses:",R)}},[s]),z=R=>{o(H=>[R,...H])},M=(R,H)=>{const X=new URLSearchParams(e);H?X.set(R,H):X.delete(R),t(X)},U=()=>{h(""),m(""),x(""),b(""),y(""),t({})},$=(R,H)=>R===0?"Free":`${R} ${H}`,F=R=>Array.from({length:5},(H,X)=>a.jsx(Uf,{className:`h-4 w-4 ${X<Math.floor(R)?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`},X)),D=({course:R})=>a.jsxs(K,{className:"group hover:shadow-lg transition-all duration-200 border-accent/20",children:[R.is_featured&&a.jsx("div",{className:"bg-gradient-to-r from-medical-primary to-swiss-blue text-white text-xs px-2 py-1 rounded-t-md font-medium",children:"Featured Course"}),a.jsxs("div",{className:"relative overflow-hidden rounded-t-md",children:[R.cover_image_url?a.jsx("img",{src:R.cover_image_url,alt:R.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200"}):a.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 flex items-center justify-center",children:a.jsx("div",{className:"text-6xl text-medical-primary opacity-30",children:"📚"})}),R.modality&&a.jsx(Y,{variant:"secondary",className:"absolute top-2 left-2 bg-background/90 backdrop-blur-sm",children:R.modality})]}),a.jsxs(Se,{className:"pb-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Pe,{className:"text-lg font-semibold group-hover:text-medical-primary transition-colors line-clamp-2",children:R.title}),R.has_certificate&&a.jsx(Y,{variant:"outline",className:"shrink-0 text-xs",children:"Certificate"})]}),a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[F(R.average_rating),a.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["(",R.total_reviews," reviews)"]})]})]}),a.jsxs(he,{className:"pb-2",children:[a.jsx(Zr,{className:"line-clamp-2 mb-3",children:R.description}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[R.city&&R.country&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Hf,{className:"h-4 w-4"}),a.jsxs("span",{children:[R.city,", ",R.country]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[R.cme_points>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ac,{className:"h-4 w-4"}),a.jsxs("span",{children:[R.cme_points," CME"]})]}),R.capacity&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(xr,{className:"h-4 w-4"}),a.jsxs("span",{children:["Max ",R.capacity]})]})]})]}),R.tags&&R.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[R.tags.slice(0,3).map((H,X)=>a.jsx(Y,{variant:"outline",className:"text-xs",children:H},X)),R.tags.length>3&&a.jsxs(Y,{variant:"outline",className:"text-xs",children:["+",R.tags.length-3]})]})]}),a.jsx(rM,{className:"pt-0",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("div",{className:"text-2xl font-bold text-medical-primary",children:$(R.price,R.currency)}),a.jsx(as,{to:`/courses/${R.id}`,children:a.jsx(q,{variant:"medical",size:"sm",children:"View Details"})})]})})]});return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Medizinische Kurse"}),a.jsx("p",{className:"text-muted-foreground",children:"Entdecken Sie FMH-konforme Fortbildungsmöglichkeiten"})]}),a.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[s&&a.jsx(gk,{onCourseAdded:z}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx($$,{className:"w-4 h-4"}),"Filter"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(js,{className:"w-4 h-4"}),"Kalender"]})]})]}),a.jsxs(Jn,{value:S,onValueChange:R=>E(R),className:"mb-8",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-2",children:[a.jsx(ze,{value:"available",children:"Verfügbare Kurse"}),a.jsxs(ze,{value:"my-courses",children:["Meine Kurse (",i.length,")"]})]}),a.jsxs(He,{value:"available",className:"mt-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(nR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Te,{placeholder:"Search courses...",value:d,onChange:R=>{h(R.target.value),M("search",R.target.value)},className:"pl-10"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(gn,{value:f,onValueChange:R=>{m(R),M("country",R)},children:[a.jsx(Xs,{className:"w-[150px]",children:a.jsx(vn,{placeholder:"Country"})}),a.jsx(Qs,{children:A.map(R=>a.jsx(Xe,{value:R,children:R},R))})]}),a.jsxs(gn,{value:p,onValueChange:R=>{x(R),M("specialty",R)},children:[a.jsx(Xs,{className:"w-[150px]",children:a.jsx(vn,{placeholder:"Specialty"})}),a.jsx(Qs,{children:P.map(R=>a.jsx(Xe,{value:R,children:R},R))})]}),a.jsxs(gn,{value:v,onValueChange:R=>{b(R),M("modality",R)},children:[a.jsx(Xs,{className:"w-[120px]",children:a.jsx(vn,{placeholder:"Format"})}),a.jsx(Qs,{children:T.map(R=>a.jsx(Xe,{value:R,children:R},R))})]}),a.jsxs(gn,{value:g,onValueChange:R=>{y(R),M("price",R)},children:[a.jsx(Xs,{className:"w-[140px]",children:a.jsx(vn,{placeholder:"Price Range"})}),a.jsx(Qs,{children:I.map(R=>a.jsx(Xe,{value:R.value,children:R.label},R.value))})]}),(d||f||p||v||g)&&a.jsx(q,{variant:"outline",onClick:U,size:"sm",children:"Clear Filters"})]})]})}),a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Course Marketplace",!l&&a.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",n.length," courses)"]})]}),a.jsx(Jn,{value:j,onValueChange:R=>_(R),children:a.jsxs(Nn,{children:[a.jsx(ze,{value:"grid",children:"Grid"}),a.jsx(ze,{value:"list",children:"List"})]})})]}),l?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((R,H)=>a.jsxs(K,{className:"animate-pulse",children:[a.jsx("div",{className:"h-48 bg-muted rounded-t-md"}),a.jsxs(Se,{children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),a.jsx(he,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-3 bg-muted rounded"}),a.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},H))}):n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No courses found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or clear filters to see more results."}),a.jsx(q,{onClick:U,variant:"outline",children:"Clear All Filters"})]}):a.jsx("div",{className:j==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:n.map(R=>a.jsx(D,{course:R},R.id))})]}),a.jsx(He,{value:"my-courses",className:"mt-6",children:s?a.jsx("div",{children:i.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(R=>a.jsx(D,{course:R},R.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Noch keine Kurse hinzugefügt"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Fügen Sie Ihren ersten Kurs hinzu, um Ihre Fortbildung zu verfolgen."}),a.jsx(gk,{onCourseAdded:z})]})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Anmeldung erforderlich"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Melden Sie sich an, um Ihre Kurse zu verwalten."}),a.jsx(q,{asChild:!0,children:a.jsx("a",{href:"/auth",children:"Anmelden"})})]})})]})]})]})}var M7="Separator",vk="horizontal",I7=["horizontal","vertical"],fD=w.forwardRef((s,e)=>{const{decorative:t,orientation:n=vk,...r}=s,i=D7(n)?n:vk,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(de.div,{"data-orientation":i,...l,...r,ref:e})});fD.displayName=M7;function D7(s){return I7.includes(s)}var mD=fD;const pD=w.forwardRef(({className:s,orientation:e="horizontal",decorative:t=!0,...n},r)=>a.jsx(mD,{ref:r,decorative:t,orientation:e,className:ne("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));pD.displayName=mD.displayName;var gD={exports:{}},vD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf=w;function O7(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var L7=typeof Object.is=="function"?Object.is:O7,F7=qf.useState,$7=qf.useEffect,z7=qf.useLayoutEffect,B7=qf.useDebugValue;function H7(s,e){var t=e(),n=F7({inst:{value:t,getSnapshot:e}}),r=n[0].inst,i=n[1];return z7(function(){r.value=t,r.getSnapshot=e,Yw(r)&&i({inst:r})},[s,t,e]),$7(function(){return Yw(r)&&i({inst:r}),s(function(){Yw(r)&&i({inst:r})})},[s]),B7(t),t}function Yw(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!L7(s,t)}catch{return!0}}function U7(s,e){return e()}var W7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?U7:H7;vD.useSyncExternalStore=qf.useSyncExternalStore!==void 0?qf.useSyncExternalStore:W7;gD.exports=vD;var V7=gD.exports;function q7(){return V7.useSyncExternalStore(G7,()=>!0,()=>!1)}function G7(){return()=>{}}var rA="Avatar",[K7,rJ]=ui(rA),[Y7,xD]=K7(rA),yD=w.forwardRef((s,e)=>{const{__scopeAvatar:t,...n}=s,[r,i]=w.useState("idle");return a.jsx(Y7,{scope:t,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:a.jsx(de.span,{...n,ref:e})})});yD.displayName=rA;var bD="AvatarImage",wD=w.forwardRef((s,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:r=()=>{},...i}=s,o=xD(bD,t),l=X7(n,i),c=zt(d=>{r(d),o.onImageLoadingStatusChange(d)});return It(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(de.img,{...i,ref:e,src:n}):null});wD.displayName=bD;var jD="AvatarFallback",_D=w.forwardRef((s,e)=>{const{__scopeAvatar:t,delayMs:n,...r}=s,i=xD(jD,t),[o,l]=w.useState(n===void 0);return w.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(de.span,{...r,ref:e}):null});_D.displayName=jD;function xk(s,e){return s?e?(s.src!==e&&(s.src=e),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function X7(s,{referrerPolicy:e,crossOrigin:t}){const n=q7(),r=w.useRef(null),i=n?(r.current||(r.current=new window.Image),r.current):null,[o,l]=w.useState(()=>xk(i,s));return It(()=>{l(xk(i,s))},[i,s]),It(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,t,e]),o}var ND=yD,SD=wD,AD=_D;const ED=w.forwardRef(({className:s,...e},t)=>a.jsx(ND,{ref:t,className:ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...e}));ED.displayName=ND.displayName;const CD=w.forwardRef(({className:s,...e},t)=>a.jsx(SD,{ref:t,className:ne("aspect-square h-full w-full",s),...e}));CD.displayName=SD.displayName;const kD=w.forwardRef(({className:s,...e},t)=>a.jsx(AD,{ref:t,className:ne("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...e}));kD.displayName=AD.displayName;var iA="Progress",aA=100,[Q7,iJ]=ui(iA),[J7,Z7]=Q7(iA),PD=w.forwardRef((s,e)=>{const{__scopeProgress:t,value:n=null,max:r,getValueLabel:i=e9,...o}=s;(r||r===0)&&!yk(r)&&console.error(t9(`${r}`,"Progress"));const l=yk(r)?r:aA;n!==null&&!bk(n,l)&&console.error(s9(`${n}`,"Progress"));const c=bk(n,l)?n:null,d=my(c)?i(c,l):void 0;return a.jsx(J7,{scope:t,value:c,max:l,children:a.jsx(de.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":my(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":MD(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});PD.displayName=iA;var TD="ProgressIndicator",RD=w.forwardRef((s,e)=>{const{__scopeProgress:t,...n}=s,r=Z7(TD,t);return a.jsx(de.div,{"data-state":MD(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...n,ref:e})});RD.displayName=TD;function e9(s,e){return`${Math.round(s/e*100)}%`}function MD(s,e){return s==null?"indeterminate":s===e?"complete":"loading"}function my(s){return typeof s=="number"}function yk(s){return my(s)&&!isNaN(s)&&s>0}function bk(s,e){return my(s)&&!isNaN(s)&&s<=e&&s>=0}function t9(s,e){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${aA}\`.`}function s9(s,e){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${aA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ID=PD,n9=RD;const na=w.forwardRef(({className:s,value:e,...t},n)=>a.jsx(ID,{ref:n,className:ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:a.jsx(n9,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));na.displayName=ID.displayName;function r9(){const{id:s}=TR(),[e,t]=w.useState(null),[n,r]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,h]=w.useState([]),[f,m]=w.useState(!0),[p,x]=w.useState(!1),[v,b]=w.useState("");w.useState({rating:5,comment:""});const[g,y]=w.useState(!1);w.useEffect(()=>{s&&j()},[s,j]);const j=w.useCallback(async()=>{if(s){m(!0);try{const{data:T,error:I}=await Z.from("courses").select("*").eq("id",s).eq("status","published").single();if(I)throw I;t(T);const{data:O}=await Z.from("course_sessions").select("*").eq("course_id",s).order("start_date",{ascending:!0});r(O||[]);const{data:L}=await Z.from("course_videos").select(`
          *,
          videos (
            title,
            description,
            duration,
            thumbnail_url
          )
        `).eq("course_id",s).order("order_index",{ascending:!0});o(L||[]);const{data:z}=await Z.from("course_materials").select("*").eq("course_id",s);c(z||[]);const{data:M}=await Z.from("course_reviews").select("*").eq("course_id",s).order("created_at",{ascending:!1}),U=(M||[]).map(F=>({...F,profiles:{full_name:"Course Participant",avatar_url:""}}));h(U);const{data:{user:$}}=await Z.auth.getUser();if($){const{data:F}=await Z.from("course_enrollments").select("status").eq("course_id",s).eq("user_id",$.id).single();y(!!F)}}catch(T){console.error("Error fetching course details:",T),ye.error("Failed to load course details")}finally{m(!1)}}},[s]),_=async()=>{if(!e||!v){ye.error("Please select a session");return}x(!0);try{const{data:{user:T}}=await Z.auth.getUser();if(!T){ye.error("Please log in to enroll");return}const{error:I}=await Z.from("course_enrollments").insert({course_id:e.id,user_id:T.id,status:"enrolled"});if(I)throw I;const{error:O}=await Z.from("payments").insert({user_id:T.id,course_id:e.id,session_id:v,amount:e.price,currency:e.currency,status:"pending"});if(O)throw O;ye.success("Successfully enrolled! Payment processing..."),y(!0)}catch(T){console.error("Enrollment error:",T),ye.error("Failed to enroll in course")}finally{x(!1)}},S=(T,I)=>T===0?"Free":`${T} ${I}`,E=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=T=>{if(T===0)return"0 Bytes";const I=1024,O=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(T)/Math.log(I));return parseFloat((T/Math.pow(I,L)).toFixed(2))+" "+O[L]},P=(T,I=!1,O)=>Array.from({length:5},(L,z)=>a.jsx(Uf,{className:`h-4 w-4 cursor-pointer ${z<T?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`,onClick:()=>I&&O&&O(z+1)},z));return f?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),a.jsx("div",{className:"h-64 bg-muted rounded"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"h-6 bg-muted rounded"}),a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),a.jsx("div",{className:"h-96 bg-muted rounded"})]})]})})]}):e?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsxs(as,{to:"/courses",className:"inline-flex items-center text-muted-foreground hover:text-foreground",children:[a.jsx(dC,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"relative",children:[e.cover_image_url?a.jsx("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-64 object-cover rounded-lg"}):a.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 rounded-lg flex items-center justify-center",children:a.jsx("div",{className:"text-8xl text-medical-primary opacity-30",children:"📚"})}),a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[a.jsx(q,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:a.jsx(B$,{className:"h-4 w-4"})}),a.jsx(q,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:a.jsx(_S,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),a.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[P(e.average_rating),a.jsxs("span",{className:"ml-1",children:["(",e.total_reviews," reviews)"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Hf,{className:"h-4 w-4"}),a.jsxs("span",{children:[e.city,", ",e.country]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.modality&&a.jsx(Y,{variant:"secondary",children:e.modality}),e.difficulty_level&&a.jsx(Y,{variant:"outline",children:e.difficulty_level}),e.has_certificate&&a.jsxs(Y,{variant:"outline",children:[a.jsx(ys,{className:"h-3 w-3 mr-1"}),"Certificate"]})]})]}),a.jsx("p",{className:"text-muted-foreground mb-6",children:e.description}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(ac,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsxs("div",{className:"font-semibold",children:[e.cme_points," CME"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Points"})]}),a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(xr,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsx("div",{className:"font-semibold",children:e.capacity||"Unlimited"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Capacity"})]}),a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(js,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsx("div",{className:"font-semibold",children:n.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Sessions"})]}),a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(Uf,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsx("div",{className:"font-semibold",children:Math.round(e.average_rating)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]})]}),a.jsxs(Jn,{defaultValue:"overview",className:"w-full",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-4",children:[a.jsx(ze,{value:"overview",children:"Overview"}),a.jsx(ze,{value:"content",children:"Content"}),a.jsx(ze,{value:"materials",children:"Materials"}),a.jsx(ze,{value:"reviews",children:"Reviews"})]}),a.jsxs(He,{value:"overview",className:"space-y-6",children:[a.jsxs(K,{children:[a.jsx(Se,{children:a.jsx(Pe,{children:"Course Requirements"})}),a.jsx(he,{children:a.jsx("p",{children:e.requirements||"No specific requirements"})})]}),e.tags&&e.tags.length>0&&a.jsxs(K,{children:[a.jsx(Se,{children:a.jsx(Pe,{children:"Topics Covered"})}),a.jsx(he,{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((T,I)=>a.jsx(Y,{variant:"outline",children:T},I))})})]})]}),a.jsx(He,{value:"content",className:"space-y-4",children:i.length>0?i.map((T,I)=>a.jsx(K,{children:a.jsx(he,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:T.videos.thumbnail_url||"/placeholder.svg",alt:T.videos.title,className:"w-24 h-16 object-cover rounded"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(sR,{className:"h-6 w-6 text-white drop-shadow-lg"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:T.videos.title}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.videos.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{children:[Math.floor(T.videos.duration/60)," min"]}),a.jsx(Y,{variant:T.is_preview?"secondary":"outline",className:"text-xs",children:T.is_preview?"Free Preview":"Premium"})]})]})]})})},T.id)):a.jsx(K,{children:a.jsxs(he,{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"🎥"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No video content available"}),a.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include video lessons."})]})})}),a.jsx(He,{value:"materials",className:"space-y-4",children:l.length>0?l.map(T=>a.jsx(K,{children:a.jsx(he,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(wS,{className:"h-5 w-5 text-medical-primary"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:T.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.description," • ",A(T.file_size)," • ",T.file_type.toUpperCase()]})]})]}),a.jsx(Y,{variant:T.is_preview?"secondary":"outline",children:T.is_preview?"Free":"Premium"})]})})},T.id)):a.jsx(K,{children:a.jsxs(he,{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📄"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No materials available"}),a.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include downloadable materials."})]})})}),a.jsx(He,{value:"reviews",className:"space-y-4",children:d.length>0?d.map(T=>a.jsx(K,{children:a.jsx(he,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs(ED,{children:[a.jsx(CD,{src:T.profiles.avatar_url}),a.jsx(kD,{children:T.profiles.full_name.charAt(0)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold",children:T.profiles.full_name}),a.jsx("div",{className:"flex items-center",children:P(T.rating)}),a.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(T.created_at).toLocaleDateString()})]}),a.jsx("p",{className:"text-muted-foreground",children:T.comment})]})]})})},T.id)):a.jsx(K,{children:a.jsxs(he,{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No reviews yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Be the first to review this course!"})]})})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(K,{children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Enroll Now"}),a.jsx("span",{className:"text-2xl font-bold text-medical-primary",children:S(e.price,e.currency)})]})}),a.jsxs(he,{className:"space-y-4",children:[g?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"text-green-600 font-semibold mb-2",children:"✓ Already Enrolled"}),a.jsx(q,{variant:"outline",className:"w-full",children:"Go to Course"})]}):a.jsxs(a.Fragment,{children:[n.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Session:"}),a.jsxs("select",{className:"w-full p-2 border rounded-md",value:v,onChange:T=>b(T.target.value),children:[a.jsx("option",{value:"",children:"Choose a session"}),n.map(T=>a.jsxs("option",{value:T.id,children:[E(T.start_date),T.location&&` - ${T.location}`]},T.id))]})]}),a.jsx(q,{className:"w-full",variant:"medical",onClick:_,disabled:p||n.length>0&&!v,children:p?"Processing...":"Enroll Now"})]}),a.jsx(pD,{}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Language:"}),a.jsx("span",{className:"font-medium",children:e.language})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Specialty:"}),a.jsx("span",{className:"font-medium",children:e.specialty})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Level:"}),a.jsx("span",{className:"font-medium capitalize",children:e.difficulty_level})]})]})]})]}),n.length>0&&a.jsxs(K,{children:[a.jsx(Se,{children:a.jsx(Pe,{children:"Upcoming Sessions"})}),a.jsx(he,{className:"space-y-3",children:n.slice(0,3).map(T=>a.jsxs("div",{className:"p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(js,{className:"h-4 w-4 text-medical-primary"}),a.jsx("span",{className:"font-medium text-sm",children:E(T.start_date)})]}),T.location&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(Hf,{className:"h-3 w-3"}),a.jsx("span",{children:T.location})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx(na,{value:T.current_participants/T.max_participants*100,className:"h-2"}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[T.current_participants,"/",T.max_participants," enrolled"]})]})]},T.id))})]})]})]})]})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Course not found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The course you're looking for doesn't exist or has been removed."}),a.jsx(as,{to:"/courses",children:a.jsxs(q,{variant:"outline",children:[a.jsx(dC,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})]})})]})}const Gf=w.forwardRef(({className:s,...e},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:ne("w-full caption-bottom text-sm",s),...e})}));Gf.displayName="Table";const Kf=w.forwardRef(({className:s,...e},t)=>a.jsx("thead",{ref:t,className:ne("[&_tr]:border-b",s),...e}));Kf.displayName="TableHeader";const Yf=w.forwardRef(({className:s,...e},t)=>a.jsx("tbody",{ref:t,className:ne("[&_tr:last-child]:border-0",s),...e}));Yf.displayName="TableBody";const i9=w.forwardRef(({className:s,...e},t)=>a.jsx("tfoot",{ref:t,className:ne("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...e}));i9.displayName="TableFooter";const ei=w.forwardRef(({className:s,...e},t)=>a.jsx("tr",{ref:t,className:ne("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...e}));ei.displayName="TableRow";const Fe=w.forwardRef(({className:s,...e},t)=>a.jsx("th",{ref:t,className:ne("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...e}));Fe.displayName="TableHead";const $e=w.forwardRef(({className:s,...e},t)=>a.jsx("td",{ref:t,className:ne("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...e}));$e.displayName="TableCell";const a9=w.forwardRef(({className:s,...e},t)=>a.jsx("caption",{ref:t,className:ne("mt-4 text-sm text-muted-foreground",s),...e}));a9.displayName="TableCaption";const o9=({moduleKey:s,onClose:e})=>{const[t,n]=w.useState(null),[r,i]=w.useState([]),[o,l]=w.useState(!0),[c,d]=w.useState(4),h=w.useCallback(async()=>{try{l(!0);const{data:{user:g}}=await Z.auth.getUser();if(!g)return;const{data:y}=await Z.from("profiles").select("pgy_level").eq("user_id",g.id).single();y!=null&&y.pgy_level&&d(y.pgy_level);const{data:j}=await Z.from("procedure_categories").select("*").eq("key",s).single();j&&n({id:j.id,title_de:j.title_de,minimum_required:j.minimum_required});const{data:_}=await Z.rpc("get_module_progress",{user_id_param:g.id,module_key:s}),{data:S}=await Z.from("procedures").select(`
          id,
          code,
          title_de,
          min_required_by_pgy
        `).eq("category_id",j==null?void 0:j.id).eq("active",!0),E=[];for(const A of S||[]){const{data:P}=await Z.from("procedure_logs").select("*").eq("procedure_id",A.id).eq("user_id",g.id).order("performed_date",{ascending:!1}),T=(P==null?void 0:P.filter(z=>z.role_in_surgery==="primary"||z.role_in_surgery==="responsible").length)||0,I=(P==null?void 0:P.filter(z=>z.role_in_surgery==="instructing").length)||0,O=(P==null?void 0:P.filter(z=>z.role_in_surgery==="assistant"||z.role_in_surgery==="assist").length)||0,L=T*1+I*.75+O*.5;E.push({...A,responsible_count:T,instructing_count:I,assistant_count:O,weighted_score:L,logs:P||[]})}i(E)}catch(g){console.error("Error loading module details:",g)}finally{l(!1)}},[s]);w.useEffect(()=>{h()},[h]);const f=g=>({basis_notfall:"coral",basis_allgemein:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[g]||"mint",m=g=>{var y;return((y=g.min_required_by_pgy)==null?void 0:y[`pgy${c}`])??0},p=g=>{const y=m(g);return y===0?0:Math.min(100,g.weighted_score/y*100)},x=r.reduce((g,y)=>g+y.weighted_score,0),v=(t==null?void 0:t.minimum_required)||0,b=v>0?Math.min(100,x/v*100):0;return o?a.jsx(K,{className:"medical-card mb-8",children:a.jsx(he,{className:"p-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):a.jsxs(K,{className:"medical-card mb-8",children:[a.jsxs(Se,{className:"flex flex-row items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Rv,{progress:b,variant:f(s),size:80,strokeWidth:6,showPercentage:!0}),a.jsxs("div",{children:[a.jsx(Pe,{className:"text-xl text-card-foreground",children:t==null?void 0:t.title_de}),a.jsxs("p",{className:"text-muted-foreground",children:[Math.round(x)," / ",v," Punkte (gewichtet)"]})]})]}),a.jsx(q,{variant:"ghost",size:"sm",onClick:e,children:a.jsx(go,{className:"w-4 h-4"})})]}),a.jsx(he,{children:a.jsxs(Jn,{defaultValue:"overview",className:"w-full",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-3",children:[a.jsx(ze,{value:"overview",children:"Übersicht"}),a.jsx(ze,{value:"procedures",children:"Prozeduren"}),a.jsx(ze,{value:"timeline",children:"Verlauf"})]}),a.jsx(He,{value:"overview",className:"mt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs(K,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Rollenverteilung"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Verantwortlich:"}),a.jsx(Y,{variant:"default",children:r.reduce((g,y)=>g+y.responsible_count,0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Instruierend:"}),a.jsx(Y,{variant:"secondary",children:r.reduce((g,y)=>g+y.instructing_count,0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Assistent:"}),a.jsx(Y,{variant:"outline",children:r.reduce((g,y)=>g+y.assistant_count,0)})]})]})]}),a.jsxs(K,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Modulfortschritt"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{children:"Erfüllung"}),a.jsxs("span",{children:[Math.round(b),"%"]})]}),a.jsx(na,{value:b,className:"h-2"})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Gewichtung: V=1.0, I=0.75, A=0.5"})]})]}),a.jsxs(K,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Statistiken"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Prozeduren:"}),a.jsx("span",{children:r.length})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Eingriffe total:"}),a.jsx("span",{children:r.reduce((g,y)=>g+y.responsible_count+y.instructing_count+y.assistant_count,0)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Punkte total:"}),a.jsx("span",{children:Math.round(x)})]})]})]})]})}),a.jsx(He,{value:"procedures",className:"mt-6",children:a.jsxs(Gf,{children:[a.jsx(Kf,{children:a.jsxs(ei,{children:[a.jsx(Fe,{children:"Prozedur"}),a.jsxs(Fe,{className:"text-center",children:["Soll PGY-",c]}),a.jsx(Fe,{className:"text-center",children:"Ist (gewichtet)"}),a.jsx(Fe,{className:"text-center",children:"V/I/A"}),a.jsx(Fe,{className:"text-center",children:"Fortschritt"}),a.jsx(Fe,{className:"text-center",children:"Status"})]})}),a.jsx(Yf,{children:r.map(g=>{const y=m(g),j=p(g),_=y>0&&g.weighted_score<y;return a.jsxs(ei,{children:[a.jsx($e,{className:"font-medium",children:a.jsxs("div",{children:[a.jsx("div",{children:g.title_de}),a.jsx("div",{className:"text-xs text-muted-foreground",children:g.code})]})}),a.jsx($e,{className:"text-center",children:y||"-"}),a.jsx($e,{className:"text-center",children:Math.round(g.weighted_score)}),a.jsx($e,{className:"text-center",children:a.jsxs("div",{className:"flex gap-1 justify-center",children:[a.jsx(Y,{variant:"default",className:"text-xs",children:g.responsible_count}),a.jsx(Y,{variant:"secondary",className:"text-xs",children:g.instructing_count}),a.jsx(Y,{variant:"outline",className:"text-xs",children:g.assistant_count})]})}),a.jsx($e,{className:"text-center",children:y>0?a.jsxs("div",{className:"w-16 mx-auto",children:[a.jsx(na,{value:j,className:"h-2"}),a.jsxs("div",{className:"text-xs mt-1",children:[j.toFixed(0),"%"]})]}):"-"}),a.jsxs($e,{className:"text-center",children:[_&&a.jsx(Qi,{className:"w-4 h-4 text-orange-500 mx-auto"}),y>0&&g.weighted_score>=y&&a.jsx(Y,{variant:"default",className:"bg-green-500",children:"✓"})]})]},g.id)})})]})}),a.jsx(He,{value:"timeline",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:r.filter(g=>g.logs.length>0).flatMap(g=>g.logs.map(y=>({...y,procedure_title:g.title_de}))).sort((g,y)=>new Date(y.performed_date).getTime()-new Date(g.performed_date).getTime()).slice(0,20).map(g=>a.jsx(K,{className:"p-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:g.procedure_title}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(g.performed_date).toLocaleDateString("de-DE")," • ",g.hospital]}),g.supervisor&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Supervisor: ",g.supervisor]})]}),a.jsx(Y,{variant:g.role_in_surgery==="primary"||g.role_in_surgery==="responsible"?"default":g.role_in_surgery==="instructing"?"secondary":"outline",children:g.role_in_surgery==="primary"||g.role_in_surgery==="responsible"?"Verantwortlich":g.role_in_surgery==="instructing"?"Instruierend":"Assistent"})]})},g.id))})})]})})]})};var wk=1,l9=.9,c9=.8,d9=.17,Xw=.1,Qw=.999,u9=.9999,h9=.99,f9=/[\\\/_+.#"@\[\(\{&]/,m9=/[\\\/_+.#"@\[\(\{&]/g,p9=/[\s-]/,DD=/[\s-]/g;function Xj(s,e,t,n,r,i,o){if(i===e.length)return r===s.length?wk:h9;var l=`${r},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=t.indexOf(c,r),h=0,f,m,p,x;d>=0;)f=Xj(s,e,t,n,d+1,i+1,o),f>h&&(d===r?f*=wk:f9.test(s.charAt(d-1))?(f*=c9,p=s.slice(r,d-1).match(m9),p&&r>0&&(f*=Math.pow(Qw,p.length))):p9.test(s.charAt(d-1))?(f*=l9,x=s.slice(r,d-1).match(DD),x&&r>0&&(f*=Math.pow(Qw,x.length))):(f*=d9,r>0&&(f*=Math.pow(Qw,d-r))),s.charAt(d)!==e.charAt(i)&&(f*=u9)),(f<Xw&&t.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&t.charAt(d-1)!==n.charAt(i))&&(m=Xj(s,e,t,n,d+1,i+2,o),m*Xw>f&&(f=m*Xw)),f>h&&(h=f),d=t.indexOf(c,d+1);return o[l]=h,h}function jk(s){return s.toLowerCase().replace(DD," ")}function g9(s,e,t){return s=t&&t.length>0?`${s+" "+t.join(" ")}`:s,Xj(s,e,jk(s),jk(e),0,0,{})}var _m='[cmdk-group=""]',Jw='[cmdk-group-items=""]',v9='[cmdk-group-heading=""]',OD='[cmdk-item=""]',_k=`${OD}:not([aria-disabled="true"])`,Qj="cmdk-item-select",Iu="data-value",x9=(s,e,t)=>g9(s,e,t),LD=w.createContext(void 0),Dv=()=>w.useContext(LD),FD=w.createContext(void 0),oA=()=>w.useContext(FD),$D=w.createContext(void 0),zD=w.forwardRef((s,e)=>{let t=Du(()=>{var B,V;return{search:"",value:(V=(B=s.value)!=null?B:s.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Du(()=>new Set),r=Du(()=>new Map),i=Du(()=>new Map),o=Du(()=>new Set),l=BD(s),{label:c,children:d,value:h,onValueChange:f,filter:m,shouldFilter:p,loop:x,disablePointerSelection:v=!1,vimBindings:b=!0,...g}=s,y=tn(),j=tn(),_=tn(),S=w.useRef(null),E=k9();au(()=>{if(h!==void 0){let B=h.trim();t.current.value=B,A.emit()}},[h]),au(()=>{E(6,z)},[]);let A=w.useMemo(()=>({subscribe:B=>(o.current.add(B),()=>o.current.delete(B)),snapshot:()=>t.current,setState:(B,V,J)=>{var ee,le,W,ge;if(!Object.is(t.current[B],V)){if(t.current[B]=V,B==="search")L(),I(),E(1,O);else if(B==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let je=document.getElementById(_);je?je.focus():(ee=document.getElementById(y))==null||ee.focus()}if(E(7,()=>{var je;t.current.selectedItemId=(je=M())==null?void 0:je.id,A.emit()}),J||E(5,z),((le=l.current)==null?void 0:le.value)!==void 0){let je=V??"";(ge=(W=l.current).onValueChange)==null||ge.call(W,je);return}}A.emit()}},emit:()=>{o.current.forEach(B=>B())}}),[]),P=w.useMemo(()=>({value:(B,V,J)=>{var ee;V!==((ee=i.current.get(B))==null?void 0:ee.value)&&(i.current.set(B,{value:V,keywords:J}),t.current.filtered.items.set(B,T(V,J)),E(2,()=>{I(),A.emit()}))},item:(B,V)=>(n.current.add(B),V&&(r.current.has(V)?r.current.get(V).add(B):r.current.set(V,new Set([B]))),E(3,()=>{L(),I(),t.current.value||O(),A.emit()}),()=>{i.current.delete(B),n.current.delete(B),t.current.filtered.items.delete(B);let J=M();E(4,()=>{L(),(J==null?void 0:J.getAttribute("id"))===B&&O(),A.emit()})}),group:B=>(r.current.has(B)||r.current.set(B,new Set),()=>{i.current.delete(B),r.current.delete(B)}),filter:()=>l.current.shouldFilter,label:c||s["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:y,inputId:_,labelId:j,listInnerRef:S}),[]);function T(B,V){var J,ee;let le=(ee=(J=l.current)==null?void 0:J.filter)!=null?ee:x9;return B?le(B,t.current.search,V):0}function I(){if(!t.current.search||l.current.shouldFilter===!1)return;let B=t.current.filtered.items,V=[];t.current.filtered.groups.forEach(ee=>{let le=r.current.get(ee),W=0;le.forEach(ge=>{let je=B.get(ge);W=Math.max(je,W)}),V.push([ee,W])});let J=S.current;U().sort((ee,le)=>{var W,ge;let je=ee.getAttribute("id"),Ee=le.getAttribute("id");return((W=B.get(Ee))!=null?W:0)-((ge=B.get(je))!=null?ge:0)}).forEach(ee=>{let le=ee.closest(Jw);le?le.appendChild(ee.parentElement===le?ee:ee.closest(`${Jw} > *`)):J.appendChild(ee.parentElement===J?ee:ee.closest(`${Jw} > *`))}),V.sort((ee,le)=>le[1]-ee[1]).forEach(ee=>{var le;let W=(le=S.current)==null?void 0:le.querySelector(`${_m}[${Iu}="${encodeURIComponent(ee[0])}"]`);W==null||W.parentElement.appendChild(W)})}function O(){let B=U().find(J=>J.getAttribute("aria-disabled")!=="true"),V=B==null?void 0:B.getAttribute(Iu);A.setState("value",V||void 0)}function L(){var B,V,J,ee;if(!t.current.search||l.current.shouldFilter===!1){t.current.filtered.count=n.current.size;return}t.current.filtered.groups=new Set;let le=0;for(let W of n.current){let ge=(V=(B=i.current.get(W))==null?void 0:B.value)!=null?V:"",je=(ee=(J=i.current.get(W))==null?void 0:J.keywords)!=null?ee:[],Ee=T(ge,je);t.current.filtered.items.set(W,Ee),Ee>0&&le++}for(let[W,ge]of r.current)for(let je of ge)if(t.current.filtered.items.get(je)>0){t.current.filtered.groups.add(W);break}t.current.filtered.count=le}function z(){var B,V,J;let ee=M();ee&&(((B=ee.parentElement)==null?void 0:B.firstChild)===ee&&((J=(V=ee.closest(_m))==null?void 0:V.querySelector(v9))==null||J.scrollIntoView({block:"nearest"})),ee.scrollIntoView({block:"nearest"}))}function M(){var B;return(B=S.current)==null?void 0:B.querySelector(`${OD}[aria-selected="true"]`)}function U(){var B;return Array.from(((B=S.current)==null?void 0:B.querySelectorAll(_k))||[])}function $(B){let V=U()[B];V&&A.setState("value",V.getAttribute(Iu))}function F(B){var V;let J=M(),ee=U(),le=ee.findIndex(ge=>ge===J),W=ee[le+B];(V=l.current)!=null&&V.loop&&(W=le+B<0?ee[ee.length-1]:le+B===ee.length?ee[0]:ee[le+B]),W&&A.setState("value",W.getAttribute(Iu))}function D(B){let V=M(),J=V==null?void 0:V.closest(_m),ee;for(;J&&!ee;)J=B>0?E9(J,_m):C9(J,_m),ee=J==null?void 0:J.querySelector(_k);ee?A.setState("value",ee.getAttribute(Iu)):F(B)}let R=()=>$(U().length-1),H=B=>{B.preventDefault(),B.metaKey?R():B.altKey?D(1):F(1)},X=B=>{B.preventDefault(),B.metaKey?$(0):B.altKey?D(-1):F(-1)};return w.createElement(de.div,{ref:e,tabIndex:-1,...g,"cmdk-root":"",onKeyDown:B=>{var V;(V=g.onKeyDown)==null||V.call(g,B);let J=B.nativeEvent.isComposing||B.keyCode===229;if(!(B.defaultPrevented||J))switch(B.key){case"n":case"j":{b&&B.ctrlKey&&H(B);break}case"ArrowDown":{H(B);break}case"p":case"k":{b&&B.ctrlKey&&X(B);break}case"ArrowUp":{X(B);break}case"Home":{B.preventDefault(),$(0);break}case"End":{B.preventDefault(),R();break}case"Enter":{B.preventDefault();let ee=M();if(ee){let le=new Event(Qj);ee.dispatchEvent(le)}}}}},w.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:T9},c),Ob(s,B=>w.createElement(FD.Provider,{value:A},w.createElement(LD.Provider,{value:P},B))))}),y9=w.forwardRef((s,e)=>{var t,n;let r=tn(),i=w.useRef(null),o=w.useContext($D),l=Dv(),c=BD(s),d=(n=(t=c.current)==null?void 0:t.forceMount)!=null?n:o==null?void 0:o.forceMount;au(()=>{if(!d)return l.item(r,o==null?void 0:o.id)},[d]);let h=HD(r,i,[s.value,s.children,i],s.keywords),f=oA(),m=Ql(E=>E.value&&E.value===h.current),p=Ql(E=>d||l.filter()===!1?!0:E.search?E.filtered.items.get(r)>0:!0);w.useEffect(()=>{let E=i.current;if(!(!E||s.disabled))return E.addEventListener(Qj,x),()=>E.removeEventListener(Qj,x)},[p,s.onSelect,s.disabled]);function x(){var E,A;v(),(A=(E=c.current).onSelect)==null||A.call(E,h.current)}function v(){f.setState("value",h.current,!0)}if(!p)return null;let{disabled:b,value:g,onSelect:y,forceMount:j,keywords:_,...S}=s;return w.createElement(de.div,{ref:Xd(i,e),...S,id:r,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!m,"data-disabled":!!b,"data-selected":!!m,onPointerMove:b||l.getDisablePointerSelection()?void 0:v,onClick:b?void 0:x},s.children)}),b9=w.forwardRef((s,e)=>{let{heading:t,children:n,forceMount:r,...i}=s,o=tn(),l=w.useRef(null),c=w.useRef(null),d=tn(),h=Dv(),f=Ql(p=>r||h.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);au(()=>h.group(o),[]),HD(o,l,[s.value,s.heading,c]);let m=w.useMemo(()=>({id:o,forceMount:r}),[r]);return w.createElement(de.div,{ref:Xd(l,e),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},t&&w.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),Ob(s,p=>w.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},w.createElement($D.Provider,{value:m},p))))}),w9=w.forwardRef((s,e)=>{let{alwaysRender:t,...n}=s,r=w.useRef(null),i=Ql(o=>!o.search);return!t&&!i?null:w.createElement(de.div,{ref:Xd(r,e),...n,"cmdk-separator":"",role:"separator"})}),j9=w.forwardRef((s,e)=>{let{onValueChange:t,...n}=s,r=s.value!=null,i=oA(),o=Ql(d=>d.search),l=Ql(d=>d.selectedItemId),c=Dv();return w.useEffect(()=>{s.value!=null&&i.setState("search",s.value)},[s.value]),w.createElement(de.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:r?s.value:o,onChange:d=>{r||i.setState("search",d.target.value),t==null||t(d.target.value)}})}),_9=w.forwardRef((s,e)=>{let{children:t,label:n="Suggestions",...r}=s,i=w.useRef(null),o=w.useRef(null),l=Ql(d=>d.selectedItemId),c=Dv();return w.useEffect(()=>{if(o.current&&i.current){let d=o.current,h=i.current,f,m=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let p=d.offsetHeight;h.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(d),()=>{cancelAnimationFrame(f),m.unobserve(d)}}},[]),w.createElement(de.div,{ref:Xd(i,e),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Ob(s,d=>w.createElement("div",{ref:Xd(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),N9=w.forwardRef((s,e)=>{let{open:t,onOpenChange:n,overlayClassName:r,contentClassName:i,container:o,...l}=s;return w.createElement(aD,{open:t,onOpenChange:n},w.createElement(oD,{container:o},w.createElement(sA,{"cmdk-overlay":"",className:r}),w.createElement(nA,{"aria-label":s.label,"cmdk-dialog":"",className:i},w.createElement(zD,{ref:e,...l}))))}),S9=w.forwardRef((s,e)=>Ql(t=>t.filtered.count===0)?w.createElement(de.div,{ref:e,...s,"cmdk-empty":"",role:"presentation"}):null),A9=w.forwardRef((s,e)=>{let{progress:t,children:n,label:r="Loading...",...i}=s;return w.createElement(de.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},Ob(s,o=>w.createElement("div",{"aria-hidden":!0},o)))}),Sn=Object.assign(zD,{List:_9,Item:y9,Input:j9,Group:b9,Separator:w9,Dialog:N9,Empty:S9,Loading:A9});function E9(s,e){let t=s.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function C9(s,e){let t=s.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function BD(s){let e=w.useRef(s);return au(()=>{e.current=s}),e}var au=typeof window>"u"?w.useEffect:w.useLayoutEffect;function Du(s){let e=w.useRef();return e.current===void 0&&(e.current=s()),e}function Ql(s){let e=oA(),t=()=>s(e.snapshot());return w.useSyncExternalStore(e.subscribe,t,t)}function HD(s,e,t,n=[]){let r=w.useRef(),i=Dv();return au(()=>{var o;let l=(()=>{var d;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():r.current}})(),c=n.map(d=>d.trim());i.value(s,l,c),(o=e.current)==null||o.setAttribute(Iu,l),r.current=l}),r}var k9=()=>{let[s,e]=w.useState(),t=Du(()=>new Map);return au(()=>{t.current.forEach(n=>n()),t.current=new Map},[s]),(n,r)=>{t.current.set(n,r),e({})}};function P9(s){let e=s.type;return typeof e=="function"?e(s.props):"render"in e?e.render(s.props):s}function Ob({asChild:s,children:e},t){return s&&w.isValidElement(e)?w.cloneElement(P9(e),{ref:e.ref},t(e.props.children)):t(e)}var T9={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const UD=w.forwardRef(({className:s,...e},t)=>a.jsx(Sn,{ref:t,className:ne("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...e}));UD.displayName=Sn.displayName;const WD=w.forwardRef(({className:s,...e},t)=>a.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[a.jsx(nR,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),a.jsx(Sn.Input,{ref:t,className:ne("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...e})]}));WD.displayName=Sn.Input.displayName;const VD=w.forwardRef(({className:s,...e},t)=>a.jsx(Sn.List,{ref:t,className:ne("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...e}));VD.displayName=Sn.List.displayName;const qD=w.forwardRef((s,e)=>a.jsx(Sn.Empty,{ref:e,className:"py-6 text-center text-sm",...s}));qD.displayName=Sn.Empty.displayName;const GD=w.forwardRef(({className:s,...e},t)=>a.jsx(Sn.Group,{ref:t,className:ne("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...e}));GD.displayName=Sn.Group.displayName;const R9=w.forwardRef(({className:s,...e},t)=>a.jsx(Sn.Separator,{ref:t,className:ne("-mx-1 h-px bg-border",s),...e}));R9.displayName=Sn.Separator.displayName;const KD=w.forwardRef(({className:s,...e},t)=>a.jsx(Sn.Item,{ref:t,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...e}));KD.displayName=Sn.Item.displayName;var Lb="Popover",[YD,aJ]=ui(Lb,[kb]),Ov=kb(),[M9,uc]=YD(Lb),XD=s=>{const{__scopePopover:e,children:t,open:n,defaultOpen:r,onOpenChange:i,modal:o=!1}=s,l=Ov(e),c=w.useRef(null),[d,h]=w.useState(!1),[f,m]=Jd({prop:n,defaultProp:r??!1,onChange:i,caller:Lb});return a.jsx(XM,{...l,children:a.jsx(M9,{scope:e,contentId:tn(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:w.useCallback(()=>h(!0),[]),onCustomAnchorRemove:w.useCallback(()=>h(!1),[]),modal:o,children:t})})};XD.displayName=Lb;var QD="PopoverAnchor",I9=w.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=uc(QD,t),i=Ov(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=r;return w.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(XS,{...i,...n,ref:e})});I9.displayName=QD;var JD="PopoverTrigger",ZD=w.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=uc(JD,t),i=Ov(t),o=Ke(e,r.triggerRef),l=a.jsx(de.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":rO(r.open),...n,ref:o,onClick:me(s.onClick,r.onOpenToggle)});return r.hasCustomAnchor?l:a.jsx(XS,{asChild:!0,...i,children:l})});ZD.displayName=JD;var lA="PopoverPortal",[D9,O9]=YD(lA,{forceMount:void 0}),eO=s=>{const{__scopePopover:e,forceMount:t,children:n,container:r}=s,i=uc(lA,e);return a.jsx(D9,{scope:e,forceMount:t,children:a.jsx(Nr,{present:t||i.open,children:a.jsx(Sv,{asChild:!0,container:r,children:n})})})};eO.displayName=lA;var Xf="PopoverContent",tO=w.forwardRef((s,e)=>{const t=O9(Xf,s.__scopePopover),{forceMount:n=t.forceMount,...r}=s,i=uc(Xf,s.__scopePopover);return a.jsx(Nr,{present:n||i.open,children:i.modal?a.jsx(F9,{...r,ref:e}):a.jsx($9,{...r,ref:e})})});tO.displayName=Xf;var L9=Qd("PopoverContent.RemoveScroll"),F9=w.forwardRef((s,e)=>{const t=uc(Xf,s.__scopePopover),n=w.useRef(null),r=Ke(e,n),i=w.useRef(!1);return w.useEffect(()=>{const o=n.current;if(o)return QS(o)},[]),a.jsx(Tb,{as:L9,allowPinchZoom:!0,children:a.jsx(sO,{...s,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(s.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:me(s.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:me(s.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),$9=w.forwardRef((s,e)=>{const t=uc(Xf,s.__scopePopover),n=w.useRef(!1),r=w.useRef(!1);return a.jsx(sO,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(n.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=s.onInteractOutside)==null||c.call(s,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),sO=w.forwardRef((s,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,...f}=s,m=uc(Xf,t),p=Ov(t);return zS(),a.jsx(Sb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(Nv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(QM,{"data-state":rO(m.open),role:"dialog",id:m.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),nO="PopoverClose",z9=w.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=uc(nO,t);return a.jsx(de.button,{type:"button",...n,ref:e,onClick:me(s.onClick,()=>r.onOpenChange(!1))})});z9.displayName=nO;var B9="PopoverArrow",H9=w.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=Ov(t);return a.jsx(JM,{...r,...n,ref:e})});H9.displayName=B9;function rO(s){return s?"open":"closed"}var U9=XD,W9=ZD,V9=eO,iO=tO;const Xx=U9,Qx=W9,fp=w.forwardRef(({className:s,align:e="center",sideOffset:t=4,...n},r)=>a.jsx(V9,{children:a.jsx(iO,{ref:r,align:e,sideOffset:t,className:ne("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));fp.displayName=iO.displayName;const q9=({onClose:s,onSuccess:e})=>{const[t,n]=w.useState([]),[r,i]=w.useState(""),[o,l]=w.useState(new Date().toISOString().split("T")[0]),[c,d]=w.useState(""),[h,f]=w.useState(""),[m,p]=w.useState(""),[x,v]=w.useState(""),[b,g]=w.useState(""),[y,j]=w.useState(!1),[_,S]=w.useState(!1),[E,A]=w.useState(""),{toast:P}=pS();w.useEffect(()=>{T()},[T]);const T=w.useCallback(async()=>{try{const{data:z,error:M}=await Z.from("procedures").select(`
          id,
          code,
          title_de,
          procedure_categories!inner(title_de)
        `).eq("active",!0).order("title_de");if(M)throw M;const U=(z==null?void 0:z.map($=>({id:$.id,code:$.code,title_de:$.title_de,category:{title_de:$.procedure_categories.title_de}})))||[];n(U)}catch(z){console.error("Error loading procedures:",z),P({title:"Fehler",description:"Prozeduren konnten nicht geladen werden.",variant:"destructive"})}},[P]),I=async z=>{if(z.preventDefault(),!r||!o||!c){P({title:"Fehler",description:"Bitte füllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}S(!0);try{const{data:{user:M}}=await Z.auth.getUser();if(!M)throw new Error("Not authenticated");const{error:U}=await Z.from("procedure_logs").insert({user_id:M.id,procedure_id:r,performed_date:o,role_in_surgery:c,hospital:h||null,supervisor:m||null,notes:x||null,case_id:b||null});if(U)throw U;P({title:"Erfolg",description:"Prozedur wurde erfolgreich erfasst."}),e()}catch(M){console.error("Error saving procedure:",M),P({title:"Fehler",description:"Prozedur konnte nicht gespeichert werden.",variant:"destructive"})}finally{S(!1)}},O=t.filter(z=>z.title_de.toLowerCase().includes(E.toLowerCase())||z.code.toLowerCase().includes(E.toLowerCase())||z.category.title_de.toLowerCase().includes(E.toLowerCase())),L=t.find(z=>z.id===r);return a.jsx(ru,{open:!0,onOpenChange:s,children:a.jsxs(Kl,{className:"sm:max-w-[600px]",children:[a.jsx(Yl,{children:a.jsxs(Xl,{className:"flex items-center gap-2",children:[a.jsx(ri,{className:"w-5 h-5"}),"Prozedur erfassen"]})}),a.jsxs("form",{onSubmit:I,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(pe,{htmlFor:"procedure",className:"text-sm font-medium",children:["Prozedur ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs(Xx,{open:y,onOpenChange:j,children:[a.jsx(Qx,{asChild:!0,children:a.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":y,className:"w-full justify-between",children:[L?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Y,{variant:"outline",className:"text-xs",children:L.code}),a.jsx("span",{children:L.title_de})]}):"Prozedur auswählen...",a.jsx(I$,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(fp,{className:"w-full p-0",children:a.jsxs(UD,{children:[a.jsx(WD,{placeholder:"Prozedur suchen...",value:E,onValueChange:A}),a.jsx(qD,{children:"Keine Prozedur gefunden."}),a.jsx(VD,{children:a.jsx(GD,{children:O.map(z=>a.jsxs(KD,{value:`${z.code} ${z.title_de}`,onSelect:()=>{i(z.id),j(!1)},children:[a.jsx(eR,{className:ne("mr-2 h-4 w-4",r===z.id?"opacity-100":"opacity-0")}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Y,{variant:"outline",className:"text-xs",children:z.code}),a.jsx("span",{children:z.title_de})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:z.category.title_de})]})]},z.id))})})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(pe,{htmlFor:"date",className:"text-sm font-medium",children:["Datum ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Te,{id:"date",type:"date",value:o,onChange:z=>l(z.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(pe,{htmlFor:"role",className:"text-sm font-medium",children:["Rolle ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs(gn,{value:c,onValueChange:d,required:!0,children:[a.jsx(Xs,{children:a.jsx(vn,{placeholder:"Rolle auswählen"})}),a.jsxs(Qs,{children:[a.jsx(Xe,{value:"responsible",children:"Verantwortlich (1.0x)"}),a.jsx(Xe,{value:"instructing",children:"Instruierend (0.75x)"}),a.jsx(Xe,{value:"assistant",children:"Assistent (0.5x)"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"hospital",className:"text-sm font-medium",children:"Klinik/Spital"}),a.jsx(Te,{id:"hospital",value:h,onChange:z=>f(z.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"caseId",className:"text-sm font-medium",children:"Fall-ID"}),a.jsx(Te,{id:"caseId",value:b,onChange:z=>g(z.target.value),placeholder:"z.B. 2024-001234"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"supervisor",className:"text-sm font-medium",children:"Supervisor"}),a.jsx(Te,{id:"supervisor",value:m,onChange:z=>p(z.target.value),placeholder:"z.B. Dr. med. Max Mustermann"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"notes",className:"text-sm font-medium",children:"Notizen"}),a.jsx(iu,{id:"notes",value:x,onChange:z=>v(z.target.value),placeholder:"Besonderheiten, Komplikationen, Lernpunkte...",rows:3})]}),c&&a.jsx("div",{className:"p-3 bg-muted rounded-medical",children:a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Gewichtung:"})," "," ",c==="responsible"&&"1.0 Punkte (Vollwertung)",c==="instructing"&&"0.75 Punkte (Instruierend)",c==="assistant"&&"0.5 Punkte (Assistenz)"]})}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(q,{type:"button",variant:"outline",onClick:s,children:"Abbrechen"}),a.jsx(q,{type:"submit",disabled:_,children:_?"Speichern...":"Speichern"})]})]})]})})},G9=Ev("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Zi=w.forwardRef(({className:s,variant:e,...t},n)=>a.jsx("div",{ref:n,role:"alert",className:ne(G9({variant:e}),s),...t}));Zi.displayName="Alert";const K9=w.forwardRef(({className:s,...e},t)=>a.jsx("h5",{ref:t,className:ne("mb-1 font-medium leading-none tracking-tight",s),...e}));K9.displayName="AlertTitle";const ea=w.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("text-sm [&_p]:leading-relaxed",s),...e}));ea.displayName="AlertDescription";const Y9=({modules:s,userPgyLevel:e})=>{const[t,n]=w.useState([]),[r,i]=w.useState([]),[o,l]=w.useState(!0),c=w.useCallback(async()=>{var f;try{l(!0);const{data:{user:m}}=await Z.auth.getUser();if(!m)return;const p=[];for(const x of s){const{data:v}=await Z.from("procedures").select(`
            id,
            code,
            title_de,
            min_required_by_pgy
          `).eq("category_id",x.id).eq("active",!0);for(const b of v||[]){const g=((f=b.min_required_by_pgy)==null?void 0:f[`pgy${e}`])||0;if(g>0){const{data:y}=await Z.from("procedure_logs").select("role_in_surgery, weighted_score").eq("procedure_id",b.id).eq("user_id",m.id),j=(y==null?void 0:y.reduce((S,E)=>S+(E.weighted_score||0),0))||0,_=Math.max(0,g-j);if(_>0){const S=j/g*100,E=_*(100-S)/100;p.push({procedure_id:b.id,procedure_title:b.title_de,procedure_code:b.code,module_name:x.title_de,required:g,current_weighted:j,gap:_,priority_score:E})}}}}p.sort((x,v)=>v.priority_score-x.priority_score),n(p.slice(0,10)),await d(m.id)}catch(m){console.error("Error in gap analysis:",m)}finally{l(!1)}},[s,e]);w.useEffect(()=>{c()},[c]);const d=async f=>{try{const m=[],p=new Date;for(let v=7;v>=0;v--){const b=new Date(p);b.setMonth(b.getMonth()-v*3);const g=b.getFullYear(),y=Math.floor(b.getMonth()/3)+1;m.push({year:g,quarter:y,label:`Q${y} ${g}`,startDate:new Date(g,(y-1)*3,1),endDate:new Date(g,y*3,0)})}const x=[];for(const v of m){const{data:b}=await Z.from("procedure_logs").select("weighted_score").eq("user_id",f).gte("performed_date",v.startDate.toISOString().split("T")[0]).lte("performed_date",v.endDate.toISOString().split("T")[0]),g=(b==null?void 0:b.reduce((j,_)=>j+(_.weighted_score||0),0))||0,y=(b==null?void 0:b.length)||0;x.push({...v,totalWeighted:g,procedureCount:y,intensity:Math.min(100,y/20*100)})}i(x)}catch(m){console.error("Error loading quarterly progress:",m)}},h=f=>f===0?"bg-gray-100":f<25?"bg-green-100":f<50?"bg-green-200":f<75?"bg-green-300":"bg-green-400";return o?a.jsx(K,{className:"medical-card mb-8",children:a.jsx(he,{className:"p-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(K,{className:"medical-card",children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(Qi,{className:"w-5 h-5 text-orange-500"}),"Top Ausbildungslücken"]})}),a.jsx(he,{children:t.length===0?a.jsx(Zi,{children:a.jsx(ea,{children:"Keine größeren Lücken identifiziert. Alle erforderlichen Prozeduren sind auf gutem Weg!"})}):a.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((f,m)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Y,{variant:"outline",className:"text-xs",children:["#",m+1]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:f.procedure_title}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.module_name," • ",f.procedure_code]})]})]})}),a.jsxs("div",{className:"text-right min-w-32",children:[a.jsxs("div",{className:"text-sm font-medium",children:[Math.round(f.current_weighted)," / ",f.required]}),a.jsxs("div",{className:"text-xs text-orange-600",children:["Lücke: ",Math.round(f.gap)," Punkte"]}),a.jsx(na,{value:f.current_weighted/f.required*100,className:"h-2 mt-1 w-20"})]})]},f.procedure_id))})})]}),a.jsxs(K,{className:"medical-card",children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(js,{className:"w-5 h-5 text-blue-500"}),"Aktivitäts-Heatmap (Quartale)"]})}),a.jsxs(he,{children:[a.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2",children:r.map(f=>a.jsxs("div",{className:`
                  p-3 rounded-medical border text-center text-xs font-medium
                  ${h(f.intensity)}
                  hover:scale-105 transition-transform cursor-pointer
                `,title:`${f.label}: ${f.procedureCount} Eingriffe (${Math.round(f.totalWeighted)} Punkte)`,children:[a.jsx("div",{children:f.label}),a.jsx("div",{className:"text-xs opacity-75 mt-1",children:f.procedureCount})]},`${f.year}-${f.quarter}`))}),a.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[a.jsx("span",{children:"Weniger Aktivität"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-100 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-200 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-300 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-400 rounded"})]}),a.jsx("span",{children:"Mehr Aktivität"})]})]})]}),s.length>0&&a.jsxs(K,{className:"medical-card",children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(G$,{className:"w-5 h-5 text-yellow-500"}),"Rollen-Balance Analyse"]})}),a.jsx(he,{children:(()=>{const f=s.reduce((x,v)=>{var b;return x+(((b=v.progress)==null?void 0:b.responsible_count)||0)},0),m=s.reduce((x,v)=>{var b,g,y;return x+(((b=v.progress)==null?void 0:b.responsible_count)||0)+(((g=v.progress)==null?void 0:g.instructing_count)||0)+(((y=v.progress)==null?void 0:y.assistant_count)||0)},0),p=m>0?f/m*100:0;return p>=30?a.jsx(Zi,{children:a.jsxs(ea,{children:["Ihre Rollen-Balance ist ausgezeichnet! ",Math.round(p),"% Ihrer Eingriffe als Verantwortlicher durchgeführt."]})}):a.jsxs(Zi,{children:[a.jsx(Qi,{className:"h-4 w-4"}),a.jsxs(ea,{children:["Achtung: Nur ",Math.round(p),"% Ihrer Eingriffe als Verantwortlicher. Ziel: ≥30% für optimale FMH-Bewertung. Fokus auf eigenständige Eingriffe empfohlen."]})]})})()})]})]})},X9=({runId:s,summary:e,stagingData:t,onClose:n,onImportComplete:r})=>{const[i,o]=w.useState(!1),[l,c]=w.useState("summary"),d=p=>{switch(p.status){case"matched":return a.jsxs(Y,{variant:"default",className:"bg-success text-success-foreground",children:[a.jsx(Jr,{className:"w-3 h-3 mr-1"}),p.match_method==="exact"?"Exakt":p.match_method==="alias"?"Alias":p.match_method==="fuzzy"?"Ähnlich":"Manuell"]});case"needs_review":return a.jsxs(Y,{variant:"destructive",children:[a.jsx(Qi,{className:"w-3 h-3 mr-1"}),"Prüfung nötig"]});default:return a.jsx(Y,{variant:"secondary",children:"Unbekannt"})}},h=p=>p>=.95?"text-success":p>=.8?"text-warning":"text-destructive",f=async()=>{o(!0);try{console.log("🚀 Starting import commit...");const p=t.filter(g=>g.status==="matched"&&g.matched_proc_id);if(p.length===0){ye.error("Keine passenden Prozeduren zum Importieren gefunden.");return}const x=[];for(const g of p){const y={procedure_id:g.matched_proc_id,performed_date:e.standDate||new Date().toISOString().split("T")[0],hospital:`Importiert aus ${e.filename}`,notes:`PDF Import ${e.standDate||new Date().toLocaleDateString("de-DE")} - ${g.module_name}`};if(g.responsible>0)for(let j=0;j<g.responsible;j++)x.push({...y,role_in_surgery:"primary",notes:`${y.notes} - Verantwortlich ${j+1}/${g.responsible}`});if(g.instructing>0)for(let j=0;j<g.instructing;j++)x.push({...y,role_in_surgery:"instructing",notes:`${y.notes} - Instruierend ${j+1}/${g.instructing}`});if(g.assistant>0)for(let j=0;j<g.assistant;j++)x.push({...y,role_in_surgery:"assistant",notes:`${y.notes} - Assistent ${j+1}/${g.assistant}`})}console.log(`📝 Creating ${x.length} procedure logs...`);const{error:v}=await Z.from("procedure_logs").insert(x);if(v)throw console.error("❌ Insert error:",v),v;const{error:b}=await Z.from("import_runs").update({status:"completed",finished_at:new Date().toISOString(),summary_json:{imported:x.length,matched:p.length,modules:e.modules.map(g=>g.name)}}).eq("id",s);if(b)throw console.error("❌ Update error:",b),b;console.log("✅ Import completed successfully!"),ye.success(`Import erfolgreich! ${x.length} Einträge wurden importiert.`),r()}catch(p){console.error("❌ Import failed:",p),ye.error(`Import fehlgeschlagen: ${p.message}`)}finally{o(!1)}},m=async()=>{try{await Z.from("import_runs").update({status:"cancelled"}).eq("id",s),ye.info("Import wurde abgebrochen."),n()}catch(p){console.error("Error cancelling import:",p),ye.error("Fehler beim Abbrechen des Imports.")}};return a.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[a.jsx(K,{children:a.jsxs(Se,{children:[a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(F$,{className:"w-5 h-5"}),"PDF Import Vorschau"]}),a.jsxs(Zr,{children:["Datei: ",e.filename,e.standDate&&` • Stand: ${new Date(e.standDate).toLocaleDateString("de-DE")}`]})]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(q,{variant:l==="summary"?"default":"outline",onClick:()=>c("summary"),children:"Übersicht"}),a.jsxs(q,{variant:l==="modules"?"default":"outline",onClick:()=>c("modules"),children:["Module (",e.modules.length,")"]}),a.jsxs(q,{variant:l==="procedures"?"default":"outline",onClick:()=>c("procedures"),children:["Prozeduren (",e.totalProcedures,")"]})]}),l==="summary"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(K,{children:[a.jsx(Se,{className:"pb-2",children:a.jsx(Pe,{className:"text-lg",children:"Gesamt"})}),a.jsxs(he,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.totalProcedures}),a.jsx("p",{className:"text-muted-foreground",children:"Prozeduren erkannt"})]})]}),a.jsxs(K,{children:[a.jsx(Se,{className:"pb-2",children:a.jsx(Pe,{className:"text-lg text-success",children:"Zugeordnet"})}),a.jsxs(he,{children:[a.jsx("div",{className:"text-2xl font-bold text-success",children:e.matched}),a.jsx("p",{className:"text-muted-foreground",children:"Automatisch zugeordnet"})]})]}),a.jsxs(K,{children:[a.jsx(Se,{className:"pb-2",children:a.jsx(Pe,{className:"text-lg text-warning",children:"Prüfung nötig"})}),a.jsxs(he,{children:[a.jsx("div",{className:"text-2xl font-bold text-warning",children:e.needsReview}),a.jsx("p",{className:"text-muted-foreground",children:"Manuelle Prüfung"})]})]})]}),l==="modules"&&a.jsxs(K,{children:[a.jsxs(Se,{children:[a.jsx(Pe,{children:"Erkannte Module"}),a.jsx(Zr,{children:"Übersicht der aus dem PDF extrahierten Module mit Summen"})]}),a.jsx(he,{children:a.jsxs(Gf,{children:[a.jsx(Kf,{children:a.jsxs(ei,{children:[a.jsx(Fe,{children:"Modul"}),a.jsx(Fe,{className:"text-right",children:"Minimum"}),a.jsx(Fe,{className:"text-right",children:"Verantwortlich"}),a.jsx(Fe,{className:"text-right",children:"Instruierend"}),a.jsx(Fe,{className:"text-right",children:"Assistent"}),a.jsx(Fe,{className:"text-right",children:"Total"})]})}),a.jsx(Yf,{children:e.modules.map((p,x)=>a.jsxs(ei,{children:[a.jsx($e,{className:"font-medium",children:p.name}),a.jsx($e,{className:"text-right",children:p.minimum}),a.jsx($e,{className:"text-right",children:p.responsible}),a.jsx($e,{className:"text-right",children:p.instructing}),a.jsx($e,{className:"text-right",children:p.assistant}),a.jsx($e,{className:"text-right font-semibold",children:p.total})]},x))})]})})]}),l==="procedures"&&a.jsxs(K,{children:[a.jsxs(Se,{children:[a.jsx(Pe,{children:"Prozeduren Details"}),a.jsx(Zr,{children:"Alle erkannten Prozeduren mit Zuordnungsstatus"})]}),a.jsx(he,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(Gf,{children:[a.jsx(Kf,{children:a.jsxs(ei,{children:[a.jsx(Fe,{children:"Prozedur"}),a.jsx(Fe,{children:"Modul"}),a.jsx(Fe,{children:"Status"}),a.jsx(Fe,{children:"Zugeordnet zu"}),a.jsx(Fe,{className:"text-right",children:"V"}),a.jsx(Fe,{className:"text-right",children:"I"}),a.jsx(Fe,{className:"text-right",children:"A"}),a.jsx(Fe,{className:"text-right",children:"Total"})]})}),a.jsx(Yf,{children:t.map(p=>{var x;return a.jsxs(ei,{children:[a.jsx($e,{className:"font-medium",children:p.proc_name}),a.jsx($e,{className:"text-sm text-muted-foreground",children:p.module_name}),a.jsx($e,{children:d(p)}),a.jsx($e,{children:(x=p.procedures)!=null&&x.title_de?a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:p.procedures.title_de}),p.match_confidence<1&&a.jsxs("div",{className:`text-xs ${h(p.match_confidence)}`,children:[(p.match_confidence*100).toFixed(0),"% Übereinstimmung"]})]}):a.jsx("span",{className:"text-muted-foreground",children:"Keine Zuordnung"})}),a.jsx($e,{className:"text-right",children:p.responsible}),a.jsx($e,{className:"text-right",children:p.instructing}),a.jsx($e,{className:"text-right",children:p.assistant}),a.jsx($e,{className:"text-right font-semibold",children:p.total})]},p.id)})})]})})})]}),a.jsxs("div",{className:"flex justify-between pt-4",children:[a.jsx(q,{variant:"outline",onClick:m,children:"Abbrechen"}),a.jsxs("div",{className:"flex gap-2",children:[e.needsReview>0&&a.jsxs(q,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(NS,{className:"w-4 h-4"}),e.needsReview," Prozeduren bearbeiten"]}),a.jsxs(q,{onClick:f,disabled:i||e.matched===0,className:"flex items-center gap-2",children:[a.jsx(mb,{className:"w-4 h-4"}),i?"Importiere...":`${e.matched} Prozeduren importieren`]})]})]})]})},Vs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Jj=[.001,0,0,.001,0,0],Zw=1.35,Hn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Fo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},aO="pdfjs_internal_editor_",be={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Be={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Q9={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Es={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Jx={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Lt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ou={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Fb={ERRORS:0,WARNINGS:1,INFOS:5},py={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Sx={moveTo:0,lineTo:1,curveTo:2,closePath:3},J9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let $b=Fb.WARNINGS;function Z9(s){Number.isInteger(s)&&($b=s)}function eq(){return $b}function zb(s){$b>=Fb.INFOS&&console.log(`Info: ${s}`)}function we(s){$b>=Fb.WARNINGS&&console.log(`Warning: ${s}`)}function rt(s){throw new Error(s)}function Bt(s,e){s||rt(e)}function tq(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function oO(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=aq(s)}catch{}}const n=e?URL.parse(s,e):URL.parse(s);return tq(n)?n:null}function lO(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&oO(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function De(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const gu=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class Nk extends gu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class e1 extends gu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Zj extends gu{constructor(e){super(e,"InvalidPDFException")}}class gy extends gu{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class sq extends gu{constructor(e){super(e,"FormatError")}}class Jl extends gu{constructor(e){super(e,"AbortException")}}function cO(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&rt("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=s.subarray(r,i);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Lv(s){typeof s!="string"&&rt("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function nq(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function rq(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function iq(){try{return new Function(""),!0}catch{return!1}}class _s{static get isLittleEndian(){return De(this,"isLittleEndian",rq())}static get isEvalSupported(){return De(this,"isEvalSupported",iq())}static get isOffscreenCanvasSupported(){return De(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return De(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return De(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return De(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const t1=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var io,Zx,e_;class fe{static makeHexColor(e,t,n){return`#${t1[e]}${t1[t]}${t1[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,n=0){const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],i=t[1],o=t[2],l=t[3],c=t[4],d=t[5];for(let h=0;h<6;h+=2){const f=e[n+h],m=e[n+h+1];e[n+h]=f*r+m*o+c,e[n+h+1]=f*i+m*l+d}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],o=t[2],l=t[3],c=t[4],d=t[5],h=e[0],f=e[1],m=e[2],p=e[3];let x=r*h+c,v=x,b=r*m+c,g=b,y=l*f+d,j=y,_=l*p+d,S=_;if(i!==0||o!==0){const E=i*h,A=i*m,P=o*f,T=o*p;x+=P,g+=P,b+=T,v+=T,y+=E,S+=E,_+=A,j+=A}n[0]=Math.min(n[0],x,b,v,g),n[1]=Math.min(n[1],y,_,j,S),n[2]=Math.max(n[2],x,b,v,g),n[3]=Math.max(n[3],y,_,j,S)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],o=e[3],l=n**2+r**2,c=n*i+r*o,d=i**2+o**2,h=(l+d)/2,f=Math.sqrt(h**2-(l*d-c**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[n,i,r,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,o,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,c),k(this,io,e_).call(this,e,n,i,l,t,r,o,c,3*(-e+3*(n-i)+l),6*(e-2*n+i),3*(n-e),d),k(this,io,e_).call(this,e,n,i,l,t,r,o,c,3*(-t+3*(r-o)+c),6*(t-2*r+o),3*(r-t),d)}}io=new WeakSet,Zx=function(e,t,n,r,i,o,l,c,d,h){if(d<=0||d>=1)return;const f=1-d,m=d*d,p=m*d,x=f*(f*(f*e+3*d*t)+3*m*n)+p*r,v=f*(f*(f*i+3*d*o)+3*m*l)+p*c;h[0]=Math.min(h[0],x),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],x),h[3]=Math.max(h[3],v)},e_=function(e,t,n,r,i,o,l,c,d,h,f,m){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&k(this,io,Zx).call(this,e,t,n,r,i,o,l,c,-f/h,m);return}const p=h**2-4*f*d;if(p<0)return;const x=Math.sqrt(p),v=2*d;k(this,io,Zx).call(this,e,t,n,r,i,o,l,c,(-h+x)/v,m),k(this,io,Zx).call(this,e,t,n,r,i,o,l,c,(-h-x)/v,m)},C(fe,io);function aq(s){return decodeURIComponent(escape(s))}let s1=null,Sk=null;function oq(s){return s1||(s1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Sk=new Map([["ﬅ","ſt"]])),s.replaceAll(s1,(e,t,n)=>t?t.normalize("NFKC"):Sk.get(n))}function dO(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),cO(s)}const cA="pdfjs_internal_id_";function lq(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...i]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const o=i.length;let l=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function qs(s,e,t){return Math.min(Math.max(s,e),t)}function uO(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(cO(s))}function cq(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):Lv(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});const ma="http://www.w3.org/2000/svg",Ac=class Ac{};G(Ac,"CSS",96),G(Ac,"PDF",72),G(Ac,"PDF_TO_CSS_UNITS",Ac.CSS/Ac.PDF);let Zl=Ac;async function Fv(s,e="text"){if(Dm(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class $v{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=o,n*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,m,p;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,m=0,p=1;break;case 90:h=0,f=1,m=1,p=0;break;case 270:h=0,f=-1,m=-1,p=0;break;case 0:h=1,f=0,m=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(m=-m,p=-p);let x,v,b,g;h===0?(x=Math.abs(d-e[1])*n+i,v=Math.abs(c-e[0])*n+o,b=(e[3]-e[1])*n,g=(e[2]-e[0])*n):(x=Math.abs(c-e[0])*n+i,v=Math.abs(d-e[1])*n+o,b=(e[2]-e[0])*n,g=(e[3]-e[1])*n),this.transform=[h*n,f*n,m*n,p*n,x-h*n*c-m*n*d,v-f*n*c-p*n*d],this.width=b,this.height=g}get rawDims(){const e=this.viewBox;return De(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new $v({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return fe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];fe.applyTransform(t,this.transform);const n=[e[2],e[3]];return fe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return fe.applyInverseTransform(n,this.transform),n}}class dA extends gu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Bb(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function uA(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function dq(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function uq(s,e="document.pdf"){if(typeof s!="string")return e;if(Bb(s))return we('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},i=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(i.test(o))return r(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const d of l)if(i.test(d))return r(d);const c=Array.from(n.searchParams.keys()).reverse();for(const d of c)if(i.test(d))return r(d)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return r(c[0])}return e}class Ak{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&we(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||we(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Dm(s,e){const t=e?URL.parse(s,e):URL.parse(s);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function _r(s){s.preventDefault()}function Ft(s){s.preventDefault(),s.stopPropagation()}function hq(s){console.log("Deprecated API usage: "+s)}var Wp;class vy{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Wp)||N(this,Wp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Wp).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(o+=h,l+=f):d==="+"&&(o-=h,l-=f),new Date(Date.UTC(n,r,i,o,l,c))}}Wp=new WeakMap,C(vy,Wp);function fq(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new $v({viewBox:i,userUnit:1,scale:e,rotation:t})}function Hb(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(we(`Not a valid color format: "${s}"`),[0,0,0])}function mq(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,Hb(n))}e.remove()}function bt(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform();return[e,t,n,r,i,o]}function mi(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform().invertSelf();return[e,t,n,r,i,o]}function ou(s,e,t=!1,n=!0){if(e instanceof $v){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=s,l=_s.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${i}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(o.width=h,o.height=f):(o.width=f,o.height=h)}n&&s.setAttribute("data-main-rotation",e.rotation)}class ra{constructor(){const{pixelRatio:e}=ra;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,i=-1){let o=1/0,l=1/0,c=1/0;n=ra.capPixels(n,i),n>0&&(o=Math.sqrt(n/(e*t))),r!==-1&&(l=r/e,c=r/t);const d=Math.min(o,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const t_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Wo,Vo,ir,_a,Vp,Sh,Ah,qp,Py,hO,bs,fO,mO,Lu,Om;const ya=class ya{constructor(e){C(this,bs);C(this,Wo,null);C(this,Vo,null);C(this,ir);C(this,_a,null);C(this,Vp,null);C(this,Sh,null);C(this,Ah,null);N(this,ir,e),u(ya,qp)||N(ya,qp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=N(this,Wo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,ir)._uiManager._signal;e.addEventListener("contextmenu",_r,{signal:t}),e.addEventListener("pointerdown",k(ya,Py,hO),{signal:t});const n=N(this,_a,document.createElement("div"));n.className="buttons",e.append(n);const r=u(this,ir).toolbarPosition;if(r){const{style:i}=e,o=u(this,ir)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Wo)}hide(){var e;u(this,Wo).classList.add("hidden"),(e=u(this,Vo))==null||e.hideDropdown()}show(){var e,t;u(this,Wo).classList.remove("hidden"),(e=u(this,Vp))==null||e.shown(),(t=u(this,Sh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,ir),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(ya,qp)[e]),k(this,bs,Lu).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,_a).append(n)}async addAltText(e){const t=await e.render();k(this,bs,Lu).call(this,t),u(this,_a).append(t,u(this,bs,Om)),N(this,Vp,e)}addComment(e){if(u(this,Sh))return;const t=e.render();t&&(k(this,bs,Lu).call(this,t),u(this,_a).prepend(t,u(this,bs,Om)),N(this,Sh,e),e.toolbar=this)}addColorPicker(e){if(u(this,Vo))return;N(this,Vo,e);const t=e.renderButton();k(this,bs,Lu).call(this,t),u(this,_a).append(t,u(this,bs,Om))}async addEditSignatureButton(e){const t=N(this,Ah,await e.renderEditButton(u(this,ir)));k(this,bs,Lu).call(this,t),u(this,_a).append(t,u(this,bs,Om))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){u(this,Ah)&&(u(this,Ah).title=e)}remove(){var e;u(this,Wo).remove(),(e=u(this,Vo))==null||e.destroy(),N(this,Vo,null)}};Wo=new WeakMap,Vo=new WeakMap,ir=new WeakMap,_a=new WeakMap,Vp=new WeakMap,Sh=new WeakMap,Ah=new WeakMap,qp=new WeakMap,Py=new WeakSet,hO=function(e){e.stopPropagation()},bs=new WeakSet,fO=function(e){u(this,ir)._focusEventsAllowed=!1,Ft(e)},mO=function(e){u(this,ir)._focusEventsAllowed=!0,Ft(e)},Lu=function(e){const t=u(this,ir)._uiManager._signal;e.addEventListener("focusin",k(this,bs,fO).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,bs,mO).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",_r,{signal:t})},Om=function(){const e=document.createElement("div");return e.className="divider",e},C(ya,Py),C(ya,qp,null);let s_=ya;var Gp,Fc,$c,ec,pO,gO,vO;class pq{constructor(e){C(this,ec);C(this,Gp,null);C(this,Fc,null);C(this,$c);N(this,$c,e)}show(e,t,n){const[r,i]=k(this,ec,gO).call(this,t,n),{style:o}=u(this,Fc)||N(this,Fc,k(this,ec,pO).call(this));e.append(u(this,Fc)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Fc).remove()}}Gp=new WeakMap,Fc=new WeakMap,$c=new WeakMap,ec=new WeakSet,pO=function(){const e=N(this,Fc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",_r,{signal:u(this,$c)._signal});const t=N(this,Gp,document.createElement("div"));return t.className="buttons",e.append(t),k(this,ec,vO).call(this),e},gO=function(e,t){let n=0,r=0;for(const i of e){const o=i.y+i.height;if(o<n)continue;const l=i.x+(t?i.width:0);if(o>n){r=l,n=o;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,n]},vO=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,$c)._signal;e.addEventListener("contextmenu",_r,{signal:n}),e.addEventListener("click",()=>{u(this,$c).highlightSelection("floating_button")},{signal:n}),u(this,Gp).append(e)};function xO(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var Ty;class gq{constructor(){C(this,Ty,0)}get id(){return`${aO}${Jt(this,Ty)._++}`}}Ty=new WeakMap;var Eh,Kp,Ps,Ch,e0;const OA=class OA{constructor(){C(this,Ch);C(this,Eh,dO());C(this,Kp,0);C(this,Ps,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return De(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return k(this,Ch,e0).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return k(this,Ch,e0).call(this,e,e)}async getFromBlob(e,t){const n=await t;return k(this,Ch,e0).call(this,e,n)}async getFromId(e){u(this,Ps)||N(this,Ps,new Map);const t=u(this,Ps).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,Ps)||N(this,Ps,new Map);let n=u(this,Ps).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${u(this,Eh)}_${Jt(this,Kp)._++}`,refCounter:1,isSvg:!1},u(this,Ps).set(e,n),u(this,Ps).set(n.id,n),n}getSvgUrl(e){const t=u(this,Ps).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,Ps)||N(this,Ps,new Map);const t=u(this,Ps).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Eh)}_`)}};Eh=new WeakMap,Kp=new WeakMap,Ps=new WeakMap,Ch=new WeakSet,e0=async function(e,t){u(this,Ps)||N(this,Ps,new Map);let n=u(this,Ps).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,Eh)}_${Jt(this,Kp)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await Fv(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=OA._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((d,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},o.onload=async()=>{const f=n.svgUrl=o.result;l.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=o.onerror=h});o.readAsDataURL(r),await c}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){we(r),n=null}return u(this,Ps).set(e,n),n&&u(this,Ps).set(n.id,n),n};let n_=OA;var Pt,qo,Yp,yt;class vq{constructor(e=128){C(this,Pt,[]);C(this,qo,!1);C(this,Yp);C(this,yt,-1);N(this,Yp,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(r&&e(),u(this,qo))return;const c={cmd:e,undo:t,post:n,type:i};if(u(this,yt)===-1){u(this,Pt).length>0&&(u(this,Pt).length=0),N(this,yt,0),u(this,Pt).push(c);return}if(o&&u(this,Pt)[u(this,yt)].type===i){l&&(c.undo=u(this,Pt)[u(this,yt)].undo),u(this,Pt)[u(this,yt)]=c;return}const d=u(this,yt)+1;d===u(this,Yp)?u(this,Pt).splice(0,1):(N(this,yt,d),d<u(this,Pt).length&&u(this,Pt).splice(d)),u(this,Pt).push(c)}undo(){if(u(this,yt)===-1)return;N(this,qo,!0);const{undo:e,post:t}=u(this,Pt)[u(this,yt)];e(),t==null||t(),N(this,qo,!1),N(this,yt,u(this,yt)-1)}redo(){if(u(this,yt)<u(this,Pt).length-1){N(this,yt,u(this,yt)+1),N(this,qo,!0);const{cmd:e,post:t}=u(this,Pt)[u(this,yt)];e(),t==null||t(),N(this,qo,!1)}}hasSomethingToUndo(){return u(this,yt)!==-1}hasSomethingToRedo(){return u(this,yt)<u(this,Pt).length-1}cleanType(e){if(u(this,yt)!==-1){for(let t=u(this,yt);t>=0;t--)if(u(this,Pt)[t].type!==e){u(this,Pt).splice(t+1,u(this,yt)-t),N(this,yt,t);return}u(this,Pt).length=0,N(this,yt,-1)}}destroy(){N(this,Pt,null)}}Pt=new WeakMap,qo=new WeakMap,Yp=new WeakMap,yt=new WeakMap;var Ry,yO;class zv{constructor(e){C(this,Ry);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=_s.platform;for(const[n,r,i={}]of e)for(const o of n){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(k(this,Ry,yO).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:l=null}}=n;l&&!l(e,t)||(r.bind(e,...o,t)(),i||Ft(t))}}Ry=new WeakSet,yO=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const My=class My{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return mq(e),De(this,"_colors",e)}convert(e){const t=Hb(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,o)=>i===t[o]))return My._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}};G(My,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let r_=My;var kh,En,qt,ds,Ph,Na,Th,ar,zc,Go,Ko,Rh,Bc,ji,Fr,Hc,Xp,Qp,Mh,Jp,_i,Yo,Ih,Xo,Ni,Iy,Qo,Zp,Jo,Uc,Dh,Zo,eg,Zt,Je,Sa,el,tl,tg,sg,sl,Si,Aa,ng,rg,or,se,t0,i_,bO,wO,s0,jO,_O,NO,a_,SO,o_,l_,AO,$s,pa,EO,CO,c_,kO,Lm,d_;const nh=class nh{constructor(e,t,n,r,i,o,l,c,d,h,f,m,p,x,v,b){C(this,se);C(this,kh,new AbortController);C(this,En,null);C(this,qt,new Map);C(this,ds,new Map);C(this,Ph,null);C(this,Na,null);C(this,Th,null);C(this,ar,new vq);C(this,zc,null);C(this,Go,null);C(this,Ko,null);C(this,Rh,0);C(this,Bc,new Set);C(this,ji,null);C(this,Fr,null);C(this,Hc,new Set);G(this,"_editorUndoBar",null);C(this,Xp,!1);C(this,Qp,!1);C(this,Mh,!1);C(this,Jp,null);C(this,_i,null);C(this,Yo,null);C(this,Ih,null);C(this,Xo,!1);C(this,Ni,null);C(this,Iy,new gq);C(this,Qo,!1);C(this,Zp,!1);C(this,Jo,null);C(this,Uc,null);C(this,Dh,null);C(this,Zo,null);C(this,eg,null);C(this,Zt,be.NONE);C(this,Je,new Set);C(this,Sa,null);C(this,el,null);C(this,tl,null);C(this,tg,null);C(this,sg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,sl,[0,0]);C(this,Si,null);C(this,Aa,null);C(this,ng,null);C(this,rg,null);C(this,or,null);const g=this._signal=u(this,kh).signal;N(this,Aa,e),N(this,ng,t),N(this,rg,n),N(this,Ph,r),N(this,zc,i),N(this,el,o),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:g}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),l._on("setpreference",this.onSetPreference.bind(this),{signal:g}),l._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:g}),k(this,se,jO).call(this),k(this,se,AO).call(this),k(this,se,a_).call(this),N(this,Na,c.annotationStorage),N(this,Jp,c.filterFactory),N(this,tl,d),N(this,Ih,h||null),N(this,Xp,f),N(this,Qp,m),N(this,Mh,p),N(this,eg,x||null),this.viewParameters={realScale:Zl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=b!==!1}static get _keyboardManager(){const e=nh.prototype,t=o=>u(o,Aa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return De(this,"_keyboardManager",new zv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&u(o,Aa).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&u(o,Aa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i,o,l,c,d;(e=u(this,or))==null||e.resolve(),N(this,or,null),(t=u(this,kh))==null||t.abort(),N(this,kh,null),this._signal=null;for(const h of u(this,ds).values())h.destroy();u(this,ds).clear(),u(this,qt).clear(),u(this,Hc).clear(),(n=u(this,Zo))==null||n.clear(),N(this,En,null),u(this,Je).clear(),u(this,ar).destroy(),(r=u(this,Ph))==null||r.destroy(),(i=u(this,zc))==null||i.destroy(),(o=u(this,el))==null||o.destroy(),(l=u(this,Ni))==null||l.hide(),N(this,Ni,null),(c=u(this,Dh))==null||c.destroy(),N(this,Dh,null),u(this,_i)&&(clearTimeout(u(this,_i)),N(this,_i,null)),u(this,Si)&&(clearTimeout(u(this,Si)),N(this,Si,null)),(d=this._editorUndoBar)==null||d.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,eg)}get useNewAltTextFlow(){return u(this,Qp)}get useNewAltTextWhenAddingImage(){return u(this,Mh)}get hcmFilter(){return De(this,"hcmFilter",u(this,tl)?u(this,Jp).addHCMFilter(u(this,tl).foreground,u(this,tl).background):"none")}get direction(){return De(this,"direction",getComputedStyle(u(this,Aa)).direction)}get _highlightColors(){return De(this,"_highlightColors",u(this,Ih)?new Map(u(this,Ih).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return De(this,"highlightColors",null);const t=new Map,n=!!u(this,tl);for(const[r,i]of e){const o=r.endsWith("_HCM");if(n&&o){t.set(r.replace("_HCM",""),i);continue}!n&&!o&&t.set(r,i)}return De(this,"highlightColors",t)}get highlightColorNames(){return De(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),N(this,Ko,e)}setMainHighlightColorPicker(e){N(this,Dh,e)}editAltText(e,t=!1){var n;(n=u(this,Ph))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!u(this,zc)}editComment(e,t){var n;(n=u(this,zc))==null||n.open(this,e,t)}getSignature(e){var t;(t=u(this,el))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,el)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":N(this,Mh,t);break}}onPageChanging({pageNumber:e}){N(this,Rh,e-1)}focusMainContainer(){u(this,Aa).focus()}findParent(e,t){for(const n of u(this,ds).values()){const{x:r,y:i,width:o,height:l}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+l)return n}return null}disableUserSelect(e=!1){u(this,ng).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Hc).add(e)}removeShouldRescale(e){u(this,Hc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Zl.PDF_TO_CSS_UNITS;for(const n of u(this,Hc))n.onScaleChanging();(t=u(this,Ko))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t,l=t.toString(),d=k(this,se,t0).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;t.empty();const f=k(this,se,i_).call(this,d),m=u(this,Zt)===be.NONE,p=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(be.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Na)&&!u(this,Na).has(e.id)&&u(this,Na).setValue(e.id,e)}a11yAlert(e,t=null){const n=u(this,rg);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Xo)&&(N(this,Xo,!1),k(this,se,s0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Je))if(t.div.contains(e)){N(this,Uc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Uc))return;const[e,t]=u(this,Uc);N(this,Uc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,se,a_).call(this),k(this,se,o_).call(this)}removeEditListeners(){k(this,se,SO).call(this),k(this,se,l_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,Fr))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,Fr))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,En))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,Je)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of u(this,Fr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){we(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of n){const d=await r.deserialize(c);if(!d)return;i.push(d)}const o=()=>{for(const c of i)k(this,se,c_).call(this,c);k(this,se,d_).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(i){we(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Zt)!==be.NONE&&!this.isEditorHandlingKeyboard&&nh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Xo)&&(N(this,Xo,!1),k(this,se,s0).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,se,_O).call(this),k(this,se,o_).call(this),k(this,se,$s).call(this,{isEditing:u(this,Zt)!==be.NONE,isEmpty:k(this,se,Lm).call(this),hasSomethingToUndo:u(this,ar).hasSomethingToUndo(),hasSomethingToRedo:u(this,ar).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,se,NO).call(this),k(this,se,l_).call(this),k(this,se,$s).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Fr)){N(this,Fr,e);for(const t of u(this,Fr))k(this,se,pa).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Iy).id}get currentLayer(){return u(this,ds).get(u(this,Rh))}getLayer(e){return u(this,ds).get(e)}get currentPageIndex(){return u(this,Rh)}addLayer(e){u(this,ds).set(e.pageIndex,e),u(this,Qo)?e.enable():e.disable()}removeLayer(e){u(this,ds).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1){var o,l,c;if(u(this,Zt)!==e&&!(u(this,or)&&(await u(this,or).promise,!u(this,or)))){if(N(this,or,Promise.withResolvers()),(o=u(this,Ko))==null||o.commitOrRemove(),N(this,Zt,e),e===be.NONE){this.setEditingState(!1),k(this,se,CO).call(this),(l=this._editorUndoBar)==null||l.hide(),u(this,or).resolve();return}e===be.SIGNATURE&&await((c=u(this,el))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await k(this,se,EO).call(this),this.unselectAll();for(const d of u(this,ds).values())d.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),u(this,or).resolve();return}for(const d of u(this,qt).values())d.annotationElementId===t||d.id===t?(this.setSelected(d),i?d.editComment():r&&d.enterInEditMode()):d.unselect();u(this,or).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,Zt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,Fr)){switch(e){case Be.CREATE:this.currentLayer.addNewEditor(t);return;case Be.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,tg)||N(this,tg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of u(this,Je))n.updateParams(e,t);else for(const n of u(this,Fr))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const o of u(this,qt).values())o.editorType===e&&o.show(t);(((i=u(this,tg))==null?void 0:i.get(Be.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,se,pa).call(this,[[Be.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Zp)!==e){N(this,Zp,e);for(const t of u(this,ds).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of u(this,qt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return u(this,qt).get(e)}addEditor(e){u(this,qt).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(u(this,_i)&&clearTimeout(u(this,_i)),N(this,_i,setTimeout(()=>{this.focusMainContainer(),N(this,_i,null)},0))),u(this,qt).delete(e.id),e.annotationElementId&&((t=u(this,Zo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Bc).has(e.annotationElementId))&&((n=u(this,Na))==null||n.remove(e.id))}addDeletedAnnotationElement(e){u(this,Bc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Bc).has(e)}removeDeletedAnnotationElement(e){u(this,Bc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,En)!==e&&(N(this,En,e),e&&k(this,se,pa).call(this,e.propertiesToUpdate))}updateUI(e){u(this,se,kO)===e&&k(this,se,pa).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,se,pa).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Je).has(e)){u(this,Je).delete(e),e.unselect(),k(this,se,$s).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Je).add(e),e.select(),k(this,se,pa).call(this,e.propertiesToUpdate),k(this,se,$s).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=u(this,Ko))==null||t.commitOrRemove();for(const n of u(this,Je))n!==e&&n.unselect();u(this,Je).clear(),u(this,Je).add(e),e.select(),k(this,se,pa).call(this,e.propertiesToUpdate),k(this,se,$s).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Je).has(e)}get firstSelectedEditor(){return u(this,Je).values().next().value}unselect(e){e.unselect(),u(this,Je).delete(e),k(this,se,$s).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Je).size!==0}get isEnterHandled(){return u(this,Je).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,ar).undo(),k(this,se,$s).call(this,{hasSomethingToUndo:u(this,ar).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,se,Lm).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,ar).redo(),k(this,se,$s).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,ar).hasSomethingToRedo(),isEmpty:k(this,se,Lm).call(this)})}addCommands(e){u(this,ar).add(e),k(this,se,$s).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,se,Lm).call(this)})}cleanUndoStack(e){u(this,ar).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,Je)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const o of t)k(this,se,c_).call(this,o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=u(this,En))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,En)||this.hasSelection}selectAll(){for(const e of u(this,Je))e.commit();k(this,se,d_).call(this,u(this,qt).values())}unselectAll(){var e;if(!(u(this,En)&&(u(this,En).commitOrRemove(),u(this,Zt)!==be.NONE))&&!((e=u(this,Ko))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,Je))t.unselect();u(this,Je).clear(),k(this,se,$s).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,sl)[0]+=e,u(this,sl)[1]+=t;const[r,i]=u(this,sl),o=[...u(this,Je)],l=1e3;u(this,Si)&&clearTimeout(u(this,Si)),N(this,Si,setTimeout(()=>{N(this,Si,null),u(this,sl)[0]=u(this,sl)[1]=0,this.addCommands({cmd:()=>{for(const c of o)u(this,qt).has(c.id)&&(c.translateInPage(r,i),c.translationDone())},undo:()=>{for(const c of o)u(this,qt).has(c.id)&&(c.translateInPage(-r,-i),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),N(this,ji,new Map);for(const e of u(this,Je))u(this,ji).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,ji))return!1;this.disableUserSelect(!1);const e=u(this,ji);N(this,ji,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},l]of e)l.newX=r,l.newY=i,l.newPageIndex=o,t||(t=r!==l.savedX||i!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const n=(r,i,o,l)=>{if(u(this,qt).has(r.id)){const c=u(this,ds).get(l);c?r._setParentAndPosition(c,i,o):(r.pageIndex=l,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:l}]of e)n(r,i,o,l)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:l}]of e)n(r,i,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,ji))for(const n of u(this,ji).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Je).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,En)===e}getActive(){return u(this,En)}getMode(){return u(this,Zt)}get imageManager(){return De(this,"imageManager",new n_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,f,m)=>({x:(h-r)/o,y:1-(d+f-n)/i,width:m/o,height:f/i});break;case"180":l=(d,h,f,m)=>({x:1-(d+f-n)/i,y:1-(h+m-r)/o,width:f/i,height:m/o});break;case"270":l=(d,h,f,m)=>({x:1-(h+m-r)/o,y:(d-n)/i,width:m/o,height:f/i});break;default:l=(d,h,f,m)=>({x:(d-n)/i,y:(h-r)/o,width:f/i,height:m/o});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const f=t.getRangeAt(d);if(!f.collapsed)for(const{x:m,y:p,width:x,height:v}of f.getClientRects())x===0||v===0||c.push(l(m,p,x,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Th)||N(this,Th,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Th))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,Th))==null?void 0:r.get(e.data.id);if(!t)return;const n=u(this,Na).getRawValue(t);n&&(u(this,Zt)===be.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const r=(i=u(this,Zo))==null?void 0:i.get(e);r&&(r.setCanvas(t,n),u(this,Zo).delete(e))}addMissingCanvas(e,t){(u(this,Zo)||N(this,Zo,new Map)).set(e,t)}};kh=new WeakMap,En=new WeakMap,qt=new WeakMap,ds=new WeakMap,Ph=new WeakMap,Na=new WeakMap,Th=new WeakMap,ar=new WeakMap,zc=new WeakMap,Go=new WeakMap,Ko=new WeakMap,Rh=new WeakMap,Bc=new WeakMap,ji=new WeakMap,Fr=new WeakMap,Hc=new WeakMap,Xp=new WeakMap,Qp=new WeakMap,Mh=new WeakMap,Jp=new WeakMap,_i=new WeakMap,Yo=new WeakMap,Ih=new WeakMap,Xo=new WeakMap,Ni=new WeakMap,Iy=new WeakMap,Qo=new WeakMap,Zp=new WeakMap,Jo=new WeakMap,Uc=new WeakMap,Dh=new WeakMap,Zo=new WeakMap,eg=new WeakMap,Zt=new WeakMap,Je=new WeakMap,Sa=new WeakMap,el=new WeakMap,tl=new WeakMap,tg=new WeakMap,sg=new WeakMap,sl=new WeakMap,Si=new WeakMap,Aa=new WeakMap,ng=new WeakMap,rg=new WeakMap,or=new WeakMap,se=new WeakSet,t0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},i_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,ds).values())if(n.hasTextLayer(e))return n;return null},bO=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=k(this,se,t0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(u(this,Ni)||N(this,Ni,new pq(this)),u(this,Ni).show(n,r,this.direction==="ltr"))},wO=function(){var i,o,l;const e=document.getSelection();if(!e||e.isCollapsed){u(this,Sa)&&((i=u(this,Ni))==null||i.hide(),N(this,Sa,null),k(this,se,$s).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,Sa))return;const r=k(this,se,t0).call(this,e).closest(".textLayer");if(!r){u(this,Sa)&&((o=u(this,Ni))==null||o.hide(),N(this,Sa,null),k(this,se,$s).call(this,{hasSelectedText:!1}));return}if((l=u(this,Ni))==null||l.hide(),N(this,Sa,t),k(this,se,$s).call(this,{hasSelectedText:!0}),!(u(this,Zt)!==be.HIGHLIGHT&&u(this,Zt)!==be.NONE)&&(u(this,Zt)===be.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),N(this,Xo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=u(this,Zt)===be.HIGHLIGHT?k(this,se,i_).call(this,r):null;c==null||c.toggleDrawing();const d=new AbortController,h=this.combinedSignal(d),f=m=>{m.type==="pointerup"&&m.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),m.type==="pointerup"&&k(this,se,s0).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}},s0=function(e=""){u(this,Zt)===be.HIGHLIGHT?this.highlightSelection(e):u(this,Xp)&&k(this,se,bO).call(this)},jO=function(){document.addEventListener("selectionchange",k(this,se,wO).bind(this),{signal:this._signal})},_O=function(){if(u(this,Yo))return;N(this,Yo,new AbortController);const e=this.combinedSignal(u(this,Yo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},NO=function(){var e;(e=u(this,Yo))==null||e.abort(),N(this,Yo,null)},a_=function(){if(u(this,Jo))return;N(this,Jo,new AbortController);const e=this.combinedSignal(u(this,Jo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},SO=function(){var e;(e=u(this,Jo))==null||e.abort(),N(this,Jo,null)},o_=function(){if(u(this,Go))return;N(this,Go,new AbortController);const e=this.combinedSignal(u(this,Go));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},l_=function(){var e;(e=u(this,Go))==null||e.abort(),N(this,Go,null)},AO=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},$s=function(e){Object.entries(e).some(([n,r])=>u(this,sg)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,sg),e)}),u(this,Zt)===be.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,se,pa).call(this,[[Be.HIGHLIGHT_FREE,!0]]))},pa=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},EO=async function(){if(!u(this,Qo)){N(this,Qo,!0);const e=[];for(const t of u(this,ds).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,qt).values())t.enable()}},CO=function(){if(this.unselectAll(),u(this,Qo)){N(this,Qo,!1);for(const e of u(this,ds).values())e.disable();for(const e of u(this,qt).values())e.disable()}},c_=function(e){const t=u(this,ds).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},kO=function(){let e=null;for(e of u(this,Je));return e},Lm=function(){if(u(this,qt).size===0)return!0;if(u(this,qt).size===1)for(const e of u(this,qt).values())return e.isEmpty();return!1},d_=function(e){for(const t of u(this,Je))t.unselect();u(this,Je).clear();for(const t of e)t.isEmpty()||(u(this,Je).add(t),t.select());k(this,se,$s).call(this,{hasSelectedEditor:this.hasSelection})},G(nh,"TRANSLATE_SMALL",1),G(nh,"TRANSLATE_BIG",10);let lu=nh;var es,Ai,$r,Oh,Ei,Cn,Lh,Ci,cn,Ea,Wc,ki,nl,ti,Fm,n0;const zs=class zs{constructor(e){C(this,ti);C(this,es,null);C(this,Ai,!1);C(this,$r,null);C(this,Oh,null);C(this,Ei,null);C(this,Cn,null);C(this,Lh,!1);C(this,Ci,null);C(this,cn,null);C(this,Ea,null);C(this,Wc,null);C(this,ki,!1);N(this,cn,e),N(this,ki,e._uiManager.useNewAltTextFlow),u(zs,nl)||N(zs,nl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){zs._l10n??(zs._l10n=e)}async render(){const e=N(this,$r,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=N(this,Oh,document.createElement("span"));e.append(t),u(this,ki)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(zs,nl).missing),t.setAttribute("data-l10n-id",u(zs,nl)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,cn)._uiManager._signal;e.addEventListener("contextmenu",_r,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),u(this,cn)._uiManager.editAltText(u(this,cn)),u(this,ki)&&u(this,cn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,ti,Fm)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(N(this,Lh,!0),r(i))},{signal:n}),await k(this,ti,n0).call(this),e}finish(){u(this,$r)&&(u(this,$r).focus({focusVisible:u(this,Lh)}),N(this,Lh,!1))}isEmpty(){return u(this,ki)?u(this,es)===null:!u(this,es)&&!u(this,Ai)}hasData(){return u(this,ki)?u(this,es)!==null||!!u(this,Ea):this.isEmpty()}get guessedText(){return u(this,Ea)}async setGuessedText(e){u(this,es)===null&&(N(this,Ea,e),N(this,Wc,await zs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,ti,n0).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,ki)||u(this,es)){(t=u(this,Ci))==null||t.remove(),N(this,Ci,null);return}if(!u(this,Ci)){const n=N(this,Ci,document.createElement("div"));n.className="noAltTextBadge",u(this,cn).div.append(n)}u(this,Ci).classList.toggle("hidden",!e)}serialize(e){let t=u(this,es);return!e&&u(this,Ea)===t&&(t=u(this,Wc)),{altText:t,decorative:u(this,Ai),guessedText:u(this,Ea),textWithDisclaimer:u(this,Wc)}}get data(){return{altText:u(this,es),decorative:u(this,Ai)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(N(this,Ea,n),N(this,Wc,r)),!(u(this,es)===e&&u(this,Ai)===t)&&(i||(N(this,es,e),N(this,Ai,t)),k(this,ti,n0).call(this))}toggle(e=!1){u(this,$r)&&(!e&&u(this,Cn)&&(clearTimeout(u(this,Cn)),N(this,Cn,null)),u(this,$r).disabled=!e)}shown(){u(this,cn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,ti,Fm)}})}destroy(){var e,t;(e=u(this,$r))==null||e.remove(),N(this,$r,null),N(this,Oh,null),N(this,Ei,null),(t=u(this,Ci))==null||t.remove(),N(this,Ci,null)}};es=new WeakMap,Ai=new WeakMap,$r=new WeakMap,Oh=new WeakMap,Ei=new WeakMap,Cn=new WeakMap,Lh=new WeakMap,Ci=new WeakMap,cn=new WeakMap,Ea=new WeakMap,Wc=new WeakMap,ki=new WeakMap,nl=new WeakMap,ti=new WeakSet,Fm=function(){return u(this,es)&&"added"||u(this,es)===null&&this.guessedText&&"review"||"missing"},n0=async function(){var r,i,o;const e=u(this,$r);if(!e)return;if(u(this,ki)){if(e.classList.toggle("done",!!u(this,es)),e.setAttribute("data-l10n-id",u(zs,nl)[u(this,ti,Fm)]),(r=u(this,Oh))==null||r.setAttribute("data-l10n-id",u(zs,nl)[`${u(this,ti,Fm)}-label`]),!u(this,es)){(i=u(this,Ei))==null||i.remove();return}}else{if(!u(this,es)&&!u(this,Ai)){e.classList.remove("done"),(o=u(this,Ei))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,Ei);if(!t){N(this,Ei,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,cn).id}`;const l=100,c=u(this,cn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(u(this,Cn)),N(this,Cn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{N(this,Cn,setTimeout(()=>{N(this,Cn,null),u(this,Ei).classList.add("show"),u(this,cn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;u(this,Cn)&&(clearTimeout(u(this,Cn)),N(this,Cn,null)),(d=u(this,Ei))==null||d.classList.remove("show")},{signal:c})}u(this,Ai)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,es)),t.parentNode||e.append(t);const n=u(this,cn).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},C(zs,nl,null),G(zs,"_l10n",null);let xy=zs;var Pi,Vc,zr,ig,Ca,Fh,rl;class Ax{constructor(e){C(this,Pi,null);C(this,Vc,!1);C(this,zr,null);C(this,ig,null);C(this,Ca,null);C(this,Fh,null);C(this,rl,!1);N(this,zr,e),this.toolbar=null}render(){if(!u(this,zr)._uiManager.hasCommentManager())return null;const e=N(this,Pi,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=u(this,zr)._uiManager._signal;e.addEventListener("contextmenu",_r,{signal:t}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:t});const n=r=>{r.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:t}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(N(this,Vc,!0),n(r))},{signal:t}),e}edit(){const{bottom:e,left:t,right:n}=u(this,zr).getClientDimensions(),r={top:e};u(this,zr)._uiManager.direction==="ltr"?r.right=n:r.left=t,u(this,zr)._uiManager.editComment(u(this,zr),r)}finish(){u(this,Pi)&&(u(this,Pi).focus({focusVisible:u(this,Vc)}),N(this,Vc,!1))}isDeleted(){return u(this,rl)||u(this,Ca)===""}hasBeenEdited(){return this.isDeleted()||u(this,Ca)!==u(this,ig)}serialize(){return this.data}get data(){return{text:u(this,Ca),date:u(this,Fh),deleted:u(this,rl)}}set data(e){if(e===null){N(this,Ca,""),N(this,rl,!0);return}N(this,Ca,e),N(this,Fh,new Date),N(this,rl,!1)}setInitialText(e){N(this,ig,e),this.data=e}toggle(e=!1){u(this,Pi)&&(u(this,Pi).disabled=!e)}shown(){}destroy(){var e;(e=u(this,Pi))==null||e.remove(),N(this,Pi,null),N(this,Ca,""),N(this,Fh,null),N(this,zr,null),N(this,Vc,!1),N(this,rl,!1)}}Pi=new WeakMap,Vc=new WeakMap,zr=new WeakMap,ig=new WeakMap,Ca=new WeakMap,Fh=new WeakMap,rl=new WeakMap;var $h,qc,ag,og,lg,cg,dg,ka,Gc,Pa,Kc,Ta,tc,PO,TO,RO;const LA=class LA{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:l}){C(this,tc);C(this,$h);C(this,qc,!1);C(this,ag,null);C(this,og);C(this,lg);C(this,cg);C(this,dg);C(this,ka,null);C(this,Gc);C(this,Pa,null);C(this,Kc);C(this,Ta,null);N(this,$h,e),N(this,ag,n),N(this,og,t),N(this,lg,r),N(this,cg,i),N(this,dg,o),N(this,Kc,new AbortController),N(this,Gc,AbortSignal.any([l,u(this,Kc).signal])),e.addEventListener("touchstart",k(this,tc,PO).bind(this),{passive:!1,signal:u(this,Gc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ra.pixelRatio}destroy(){var e,t;(e=u(this,Kc))==null||e.abort(),N(this,Kc,null),(t=u(this,ka))==null||t.abort(),N(this,ka,null)}};$h=new WeakMap,qc=new WeakMap,ag=new WeakMap,og=new WeakMap,lg=new WeakMap,cg=new WeakMap,dg=new WeakMap,ka=new WeakMap,Gc=new WeakMap,Pa=new WeakMap,Kc=new WeakMap,Ta=new WeakMap,tc=new WeakSet,PO=function(e){var r,i,o;if((r=u(this,og))!=null&&r.call(this))return;if(e.touches.length===1){if(u(this,ka))return;const l=N(this,ka,new AbortController),c=AbortSignal.any([u(this,Gc),l.signal]),d=u(this,$h),h={capture:!0,signal:c,passive:!1},f=m=>{var p;m.pointerType==="touch"&&((p=u(this,ka))==null||p.abort(),N(this,ka,null))};d.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Ft(m),f(m))},h),d.addEventListener("pointerup",f,h),d.addEventListener("pointercancel",f,h);return}if(!u(this,Ta)){N(this,Ta,new AbortController);const l=AbortSignal.any([u(this,Gc),u(this,Ta).signal]),c=u(this,$h),d={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",k(this,tc,TO).bind(this),d);const h=k(this,tc,RO).bind(this);c.addEventListener("touchend",h,d),c.addEventListener("touchcancel",h,d),d.capture=!0,c.addEventListener("pointerdown",Ft,d),c.addEventListener("pointermove",Ft,d),c.addEventListener("pointercancel",Ft,d),c.addEventListener("pointerup",Ft,d),(i=u(this,lg))==null||i.call(this)}if(Ft(e),e.touches.length!==2||(o=u(this,ag))!=null&&o.call(this)){N(this,Pa,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),N(this,Pa,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},TO=function(e){var _;if(!u(this,Pa)||e.touches.length!==2)return;Ft(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:l}=n,c=u(this,Pa),{touch0X:d,touch0Y:h,touch1X:f,touch1Y:m}=c,p=f-d,x=m-h,v=o-r,b=l-i,g=Math.hypot(v,b)||1,y=Math.hypot(p,x)||1;if(!u(this,qc)&&Math.abs(y-g)<=LA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=o,c.touch1Y=l,!u(this,qc)){N(this,qc,!0);return}const j=[(r+o)/2,(i+l)/2];(_=u(this,cg))==null||_.call(this,j,y,g)},RO=function(e){var t;e.touches.length>=2||(u(this,Ta)&&(u(this,Ta).abort(),N(this,Ta,null),(t=u(this,dg))==null||t.call(this)),u(this,Pa)&&(Ft(e),N(this,Pa,null),N(this,qc,!1)))};let yy=LA;var Yc,Br,pt,us,zh,il,ug,Xc,hs,Qc,Ra,al,hg,Jc,kn,fg,Zc,Ma,Ti,Bh,Hh,lr,ed,mg,Dy,ve,u_,pg,h_,r0,MO,IO,f_,i0,m_,DO,OO,LO,p_,FO,g_,$O,zO,BO,v_,$m;const Re=class Re{constructor(e){C(this,ve);C(this,Yc,null);C(this,Br,null);C(this,pt,null);C(this,us,null);C(this,zh,!1);C(this,il,null);C(this,ug,"");C(this,Xc,!1);C(this,hs,null);C(this,Qc,null);C(this,Ra,null);C(this,al,null);C(this,hg,"");C(this,Jc,!1);C(this,kn,null);C(this,fg,!1);C(this,Zc,!1);C(this,Ma,!1);C(this,Ti,null);C(this,Bh,0);C(this,Hh,0);C(this,lr,null);C(this,ed,null);G(this,"isSelected",!1);G(this,"_isCopy",!1);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);C(this,mg,!1);C(this,Dy,Re._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Re.prototype._resizeWithKeyboard,t=lu.TRANSLATE_SMALL,n=lu.TRANSLATE_BIG;return De(this,"_resizerKeyboardManager",new zv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Re.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return De(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new xq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Re._l10n??(Re._l10n=e),Re._l10nResizer||(Re._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Re._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Re._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,mg)}set _isDraggable(e){var t;N(this,mg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Dy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,ve,$m).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Jc)?N(this,Jc,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){k(this,ve,u_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,kn)||N(this,kn,[this.x,this.y,this.width,this.height]),k(this,ve,u_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,kn)||N(this,kn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,d]=this.getBaseTranslation();o+=c,l+=d;const{style:h}=n;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,kn)&&(u(this,kn)[0]!==this.x||u(this,kn)[1]!==this.y)}get _hasBeenResized(){return!!u(this,kn)&&(u(this,kn)[2]!==this.width||u(this,kn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Re,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:o,width:l,height:c}=this;if(l*=n,c*=r,i*=n,o*=r,this._mustFixPosition)switch(e){case 0:i=qs(i,0,n-l),o=qs(o,0,r-c);break;case 90:i=qs(i,0,n-c),o=qs(o,l,r);break;case 180:i=qs(i,l,n),o=qs(o,c,r);break;case 270:i=qs(i,c,n),o=qs(o,0,r-l);break}this.x=i/=n,this.y=o/=r;const[d,h]=this.getBaseTranslation();i+=d,o+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return k(n=Re,pg,h_).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return k(n=Re,pg,h_).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/n).toFixed(2)}%`,u(this,Xc)||(i.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=!u(this,Xc)&&t.endsWith("%");if(r&&i)return;const[o,l]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!u(this,Xc)&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,pt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Zc))return this._editToolbar;this._editToolbar=new s_(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,pt))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,pt)||(xy.initialize(Re._l10n),N(this,pt,new xy(this)),u(this,Yc)&&(u(this,pt).data=u(this,Yc),N(this,Yc,null))),u(this,pt)}get altTextData(){var e;return(e=u(this,pt))==null?void 0:e.data}set altTextData(e){u(this,pt)&&(u(this,pt).data=e)}get guessedAltText(){var e;return(e=u(this,pt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,pt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,pt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,pt)&&!u(this,pt).isEmpty()}hasAltTextData(){var e;return((e=u(this,pt))==null?void 0:e.hasData())??!1}addCommentButton(){return u(this,us)?u(this,us):N(this,us,new Ax(this))}get commentColor(){return null}get comment(){const e=u(this,us);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){u(this,us)||N(this,us,new Ax(this)),u(this,us).data=e}setCommentData(e){u(this,us)||N(this,us,new Ax(this)),u(this,us).setInitialText(e)}get hasEditedComment(){var e;return(e=u(this,us))==null?void 0:e.hasBeenEdited()}async editComment(){u(this,us)||N(this,us,new Ax(this)),u(this,us).edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,zh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,ve,g_).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),xO(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,ed)||N(this,ed,new yy({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,ve,DO).bind(this),onPinching:k(this,ve,OO).bind(this),onPinchEnd:k(this,ve,LO).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=_s.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(N(this,Jc,!0),this._isDraggable){k(this,ve,FO).call(this,e);return}k(this,ve,p_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Ti)&&clearTimeout(u(this,Ti)),N(this,Ti,setTimeout(()=>{var e;N(this,Ti,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/r,h=t/r,f=this.x*i,m=this.y*o,p=this.width*i,x=this.height*o;switch(n){case 0:return[f+d+l,o-m-h-x+c,f+d+p+l,o-m-h+c];case 90:return[f+h+l,o-m+d+c,f+h+x+l,o-m+d+p+c];case 180:return[f-d-p+l,o-m+h+c,f-d+l,o-m+h+x+c];case 270:return[f-h-x+l,o-m-d-p+c,f-h+l,o-m-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,o]=e,l=i-n,c=o-r;switch(this.rotation){case 0:return[n,t-o,l,c];case 90:return[n,t-r,c,l];case 180:return[i,t-r,l,c];case 270:return[i,t-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),N(this,Zc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),N(this,Zc,!1),!0):!1}isInEditMode(){return u(this,Zc)}shouldGetKeyboardEvents(){return u(this,Ma)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&n>0}rebuild(){k(this,ve,g_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){rt("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});r.rotation=e.rotation,N(r,Yc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[l,c,d,h]=r.getRectInCurrentCoords(e.rect,o);return r.x=l/i,r.y=c/o,r.width=d/i,r.height=h/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,al))==null||e.abort(),N(this,al,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Ti)&&(clearTimeout(u(this,Ti)),N(this,Ti,null)),k(this,ve,$m).call(this),this.removeEditToolbar(),u(this,lr)){for(const n of u(this,lr).values())clearTimeout(n);N(this,lr,null)}this.parent=null,(t=u(this,ed))==null||t.destroy(),N(this,ed,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,ve,MO).call(this),u(this,hs).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),N(this,Ra,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,hs).children;if(!u(this,Br)){N(this,Br,Array.from(t));const o=k(this,ve,$O).bind(this),l=k(this,ve,zO).bind(this),c=this._uiManager._signal;for(const d of u(this,Br)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",k(this,ve,BO).bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",Re._l10nResizer[h])}}const n=u(this,Br)[0];let r=0;for(const o of t){if(o===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,Br).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)u(this,hs).append(u(this,hs).firstChild);else if(i>r)for(let l=0;l<i-r;l++)u(this,hs).firstChild.before(u(this,hs).lastChild);let o=0;for(const l of t){const d=u(this,Br)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Re._l10nResizer[d])}}k(this,ve,v_).call(this,0),N(this,Ma,!0),u(this,hs).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Ma)&&k(this,ve,m_).call(this,u(this,hg),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,ve,$m).call(this),this.div.focus()}select(){var e,t,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,pt))==null||n.toggleAltTextBadge(!1)}}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,(e=u(this,hs))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=u(this,pt))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,fg)}set isEditing(e){N(this,fg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){N(this,Xc,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,lr)||N(this,lr,new Map);const{action:n}=e;let r=u(this,lr).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,lr).delete(n),u(this,lr).size===0&&N(this,lr,null)},Re._telemetryTimeout),u(this,lr).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),N(this,zh,!1)}disable(){this.div&&(this.div.tabIndex=-1),N(this,zh,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Yc=new WeakMap,Br=new WeakMap,pt=new WeakMap,us=new WeakMap,zh=new WeakMap,il=new WeakMap,ug=new WeakMap,Xc=new WeakMap,hs=new WeakMap,Qc=new WeakMap,Ra=new WeakMap,al=new WeakMap,hg=new WeakMap,Jc=new WeakMap,kn=new WeakMap,fg=new WeakMap,Zc=new WeakMap,Ma=new WeakMap,Ti=new WeakMap,Bh=new WeakMap,Hh=new WeakMap,lr=new WeakMap,ed=new WeakMap,mg=new WeakMap,Dy=new WeakMap,ve=new WeakSet,u_=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},pg=new WeakSet,h_=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},r0=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},MO=function(){if(u(this,hs))return;N(this,hs,document.createElement("div")),u(this,hs).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");u(this,hs).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",k(this,ve,IO).bind(this,n),{signal:t}),r.addEventListener("contextmenu",_r,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,hs))},IO=function(e,t){var h;t.preventDefault();const{isMac:n}=_s.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=u(this,pt))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,N(this,Qc,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,ve,m_).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ft,{passive:!1,signal:o}),window.addEventListener("contextmenu",_r,{signal:o}),N(this,Ra,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=u(this,pt))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,k(this,ve,i0).call(this)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},f_=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[i,o]=this.parentDimensions;this.setDims(i*n,o*r),this.fixAndSetPosition(),this._onResized()},i0=function(){if(!u(this,Ra))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=u(this,Ra);N(this,Ra,null);const i=this.x,o=this.y,l=this.width,c=this.height;i===e&&o===t&&l===n&&c===r||this.addCommands({cmd:k(this,ve,f_).bind(this,i,o,l,c),undo:k(this,ve,f_).bind(this,e,t,n,r),mustExec:!0})},m_=function(e,t){const[n,r]=this.parentDimensions,i=this.x,o=this.y,l=this.width,c=this.height,d=Re.MIN_SIZE/n,h=Re.MIN_SIZE/r,f=k(this,ve,r0).call(this,this.rotation),m=($,F)=>[f[0]*$+f[2]*F,f[1]*$+f[3]*F],p=k(this,ve,r0).call(this,360-this.rotation),x=($,F)=>[p[0]*$+p[2]*F,p[1]*$+p[3]*F];let v,b,g=!1,y=!1;switch(e){case"topLeft":g=!0,v=($,F)=>[0,0],b=($,F)=>[$,F];break;case"topMiddle":v=($,F)=>[$/2,0],b=($,F)=>[$/2,F];break;case"topRight":g=!0,v=($,F)=>[$,0],b=($,F)=>[0,F];break;case"middleRight":y=!0,v=($,F)=>[$,F/2],b=($,F)=>[0,F/2];break;case"bottomRight":g=!0,v=($,F)=>[$,F],b=($,F)=>[0,0];break;case"bottomMiddle":v=($,F)=>[$/2,F],b=($,F)=>[$/2,0];break;case"bottomLeft":g=!0,v=($,F)=>[0,F],b=($,F)=>[$,0];break;case"middleLeft":y=!0,v=($,F)=>[0,F/2],b=($,F)=>[$,F/2];break}const j=v(l,c),_=b(l,c);let S=m(..._);const E=Re._round(i+S[0]),A=Re._round(o+S[1]);let P=1,T=1,I,O;if(t.fromKeyboard)({deltaX:I,deltaY:O}=t);else{const{screenX:$,screenY:F}=t,[D,R]=u(this,Qc);[I,O]=this.screenToPageTranslation($-D,F-R),u(this,Qc)[0]=$,u(this,Qc)[1]=F}if([I,O]=x(I/n,O/r),g){const $=Math.hypot(l,c);P=T=Math.max(Math.min(Math.hypot(_[0]-j[0]-I,_[1]-j[1]-O)/$,1/l,1/c),d/l,h/c)}else y?P=qs(Math.abs(_[0]-j[0]-I),d,1)/l:T=qs(Math.abs(_[1]-j[1]-O),h,1)/c;const L=Re._round(l*P),z=Re._round(c*T);S=m(...b(L,z));const M=E-S[0],U=A-S[1];u(this,kn)||N(this,kn,[this.x,this.y,this.width,this.height]),this.width=L,this.height=z,this.x=M,this.y=U,this.setDims(n*L,r*z),this.fixAndSetPosition(),this._onResizing()},DO=function(){var e;N(this,Ra,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,pt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},OO=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const o=k(this,ve,r0).call(this,this.rotation),l=(E,A)=>[o[0]*E+o[2]*A,o[1]*E+o[3]*A],[c,d]=this.parentDimensions,h=this.x,f=this.y,m=this.width,p=this.height,x=Re.MIN_SIZE/c,v=Re.MIN_SIZE/d;i=Math.max(Math.min(i,1/m,1/p),x/m,v/p);const b=Re._round(m*i),g=Re._round(p*i);if(b===m&&g===p)return;u(this,kn)||N(this,kn,[h,f,m,p]);const y=l(m/2,p/2),j=Re._round(h+y[0]),_=Re._round(f+y[1]),S=l(b/2,g/2);this.x=j-S[0],this.y=_-S[1],this.width=b,this.height=g,this.setDims(c*b,d*g),this.fixAndSetPosition(),this._onResizing()},LO=function(){var e;(e=u(this,pt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,ve,i0).call(this)},p_=function(e){const{isMac:t}=_s.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},FO=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},l=d=>{r.abort(),N(this,il,null),N(this,Jc,!1),this._uiManager.endDragSession()||k(this,ve,p_).call(this,d),n&&this._onStopDragging()};t&&(N(this,Bh,e.clientX),N(this,Hh,e.clientY),N(this,il,e.pointerId),N(this,ug,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:m}=d;if(m!==u(this,il)){Ft(d);return}const[p,x]=this.screenToPageTranslation(h-u(this,Bh),f-u(this,Hh));N(this,Bh,h),N(this,Hh,f),this._uiManager.dragSelectedEditors(p,x)},o),window.addEventListener("touchmove",Ft,o),window.addEventListener("pointerdown",d=>{d.pointerType===u(this,ug)&&(u(this,ed)||d.isPrimary)&&l(d),Ft(d)},o));const c=d=>{if(!u(this,il)||u(this,il)===d.pointerId){l(d);return}Ft(d)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},g_=function(){if(u(this,al)||!this.div)return;N(this,al,new AbortController);const e=this._uiManager.combinedSignal(u(this,al));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},$O=function(e){Re._resizerKeyboardManager.exec(this,e)},zO=function(e){var t;u(this,Ma)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,hs)&&k(this,ve,$m).call(this)},BO=function(e){N(this,hg,u(this,Ma)?e:"")},v_=function(e){if(u(this,Br))for(const t of u(this,Br))t.tabIndex=e},$m=function(){N(this,Ma,!1),k(this,ve,v_).call(this,-1),k(this,ve,i0).call(this)},C(Re,pg),G(Re,"_l10n",null),G(Re,"_l10nResizer",null),G(Re,"_borderLineWidth",-1),G(Re,"_colorManager",new r_),G(Re,"_zIndex",1),G(Re,"_telemetryTimeout",1e3);let lt=Re;class xq extends lt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ek=3285377520,nr=4294901760,pi=65535;class HO{constructor(e){this.h1=e?e&4294967295:Ek,this.h2=e?e&4294967295:Ek}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,b=e.length;v<b;v++){const g=e.charCodeAt(v);g<=255?t[n++]=g:(t[n++]=g>>>8,t[n++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,o=new Uint32Array(t.buffer,0,r);let l=0,c=0,d=this.h1,h=this.h2;const f=3432918353,m=461845907,p=f&pi,x=m&pi;for(let v=0;v<r;v++)v&1?(l=o[v],l=l*f&nr|l*p&pi,l=l<<15|l>>>17,l=l*m&nr|l*x&pi,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=o[v],c=c*f&nr|c*p&pi,c=c<<15|c>>>17,c=c*m&nr|c*x&pi,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*f&nr|l*p&pi,l=l<<15|l>>>17,l=l*m&nr|l*x&pi,r&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&nr|e*36045&pi,t=t*4283543511&nr|((t<<16|e>>>16)*2950163797&nr)>>>16,e^=t>>>1,e=e*444984403&nr|e*60499&pi,t=t*3301882366&nr|((t<<16|e>>>16)*3120437893&nr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const x_=Object.freeze({map:null,hash:"",transfer:void 0});var td,sd,fs,Oy,UO;class hA{constructor(){C(this,Oy);C(this,td,!1);C(this,sd,null);C(this,fs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,fs).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,fs).get(e)}remove(e){if(u(this,fs).delete(e),u(this,fs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,fs).values())if(t instanceof lt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,fs).get(e);let r=!1;if(n!==void 0)for(const[i,o]of Object.entries(t))n[i]!==o&&(r=!0,n[i]=o);else r=!0,u(this,fs).set(e,t);r&&k(this,Oy,UO).call(this),t instanceof lt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,fs).has(e)}get size(){return u(this,fs).size}resetModified(){u(this,td)&&(N(this,td,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new WO(this)}get serializable(){if(u(this,fs).size===0)return x_;const e=new Map,t=new HO,n=[],r=Object.create(null);let i=!1;for(const[o,l]of u(this,fs)){const c=l instanceof lt?l.serialize(!1,r):l;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:x_}get editorStats(){let e=null;const t=new Map;for(const n of u(this,fs).values()){if(!(n instanceof lt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:i}=r;t.has(i)||t.set(i,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[l,c]of Object.entries(r)){if(l==="type")continue;let d=o.get(l);d||(d=new Map,o.set(l,d));const h=d.get(c)??0;d.set(c,h+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){N(this,sd,null)}get modifiedIds(){if(u(this,sd))return u(this,sd);const e=[];for(const t of u(this,fs).values())!(t instanceof lt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return N(this,sd,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,fs).entries()}}td=new WeakMap,sd=new WeakMap,fs=new WeakMap,Oy=new WeakSet,UO=function(){u(this,td)||(N(this,td,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var gg;class WO extends hA{constructor(t){super();C(this,gg);const{map:n,hash:r,transfer:i}=t.serializable,o=structuredClone(n,i?{transfer:i}:null);N(this,gg,{map:o,hash:r,transfer:i})}get print(){rt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,gg)}get modifiedIds(){return De(this,"modifiedIds",{ids:new Set,hash:""})}}gg=new WeakMap;var Uh;class yq{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,Uh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Uh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||u(this,Uh).has(e.loadedName))){if(Bt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,l=new FontFace(r,i,o);this.addNativeFontFace(l);try{await l.load(),u(this,Uh).add(r),n==null||n(e)}catch{we(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw we(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return De(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return De(this,"isSyncFontLoadingSupported",Vs||_s.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Bt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return De(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(_,S){return _.charCodeAt(S)<<24|_.charCodeAt(S+1)<<16|_.charCodeAt(S+2)<<8|_.charCodeAt(S+3)&255}function r(_,S,E,A){const P=_.substring(0,S),T=_.substring(S+E);return P+A+T}let i,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function h(_,S){if(++d>30){we("Load test font never loaded."),S();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(h.bind(null,_,S))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=r(m,976,f.length,f);const x=16,v=1482184792;let b=n(m,x);for(i=0,o=f.length-3;i<o;i+=4)b=b-v+n(f,i)|0;i<f.length&&(b=b-v+n(f+"XXX",i)|0),m=r(m,x,4,nq(b));const g=`url(data:font/opentype;base64,${btoa(m)});`,y=`@font-face {font-family:"${f}";src:${g}}`;this.insertRule(y);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const _ of[e.loadedName,f]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=_,j.append(S)}this._document.body.append(j),h(f,()=>{j.remove(),t.complete()})}}Uh=new WeakMap;class bq{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${uO(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(o){we(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}}function wq(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Vs)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function jq(s){if(Vs&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Lv(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ex(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const y_=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,_q=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",Nq=lq.bind(null,y_,_q);var Ia,Ly;class Sq{constructor(){C(this,Ia,new Map);C(this,Ly,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,Ly).then(()=>{for(const[r]of u(this,Ia))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){we("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}u(this,Ia).set(t,r)}removeEventListener(e,t){const n=u(this,Ia).get(t);n==null||n(),u(this,Ia).delete(t)}terminate(){for(const[,e]of u(this,Ia))e==null||e();u(this,Ia).clear()}}Ia=new WeakMap,Ly=new WeakMap;const Cx={DATA:1,ERROR:2},Ot={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ck(){}function on(s){if(s instanceof Jl||s instanceof Zj||s instanceof Nk||s instanceof gy||s instanceof e1)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Jl(s.message);case"InvalidPDFException":return new Zj(s.message);case"PasswordException":return new Nk(s.message,s.code);case"ResponseException":return new gy(s.message,s.status,s.missing);case"UnknownErrorException":return new e1(s.message,s.details)}return new e1(s.message,s.toString())}var Wh,yr,VO,qO,GO,a0;class zm{constructor(e,t,n){C(this,yr);C(this,Wh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",k(this,yr,VO).bind(this),{signal:u(this,Wh).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:i,data:t,desiredSize:d.desiredSize},r),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:Ot.PULL,streamId:i,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Bt(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Ot.CANCEL,streamId:i,reason:on(d)}),h.promise}},n)}destroy(){var e;(e=u(this,Wh))==null||e.abort(),N(this,Wh,null)}}Wh=new WeakMap,yr=new WeakSet,VO=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,yr,GO).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Cx.DATA)r.resolve(e.data);else if(e.callback===Cx.ERROR)r.reject(on(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:n,targetName:r,callback:Cx.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:n,targetName:r,callback:Cx.ERROR,callbackId:e.callbackId,reason:on(o)})});return}if(e.streamId){k(this,yr,qO).call(this,e);return}t(e.data)},qO=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(d,h=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=h,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Ot.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Ot.CLOSE,streamId:t}),delete o.streamSinks[t])},error(d){Bt(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Ot.ERROR,streamId:t,reason:on(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Ot.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:Ot.START_COMPLETE,streamId:t,reason:on(d)})})},GO=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Ot.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(on(e.reason));break;case Ot.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(on(e.reason));break;case Ot.PULL:if(!l){i.postMessage({sourceName:n,targetName:r,stream:Ot.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||Ck).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Ot.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:Ot.PULL_COMPLETE,streamId:t,reason:on(d)})});break;case Ot.ENQUEUE:if(Bt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Ot.CLOSE:if(Bt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),k(this,yr,a0).call(this,o,t);break;case Ot.ERROR:Bt(o,"error should have stream controller"),o.controller.error(on(e.reason)),k(this,yr,a0).call(this,o,t);break;case Ot.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(on(e.reason)),k(this,yr,a0).call(this,o,t);break;case Ot.CANCEL:if(!l)break;const c=on(e.reason);Promise.try(l.onCancel||Ck,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Ot.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:Ot.CANCEL_COMPLETE,streamId:t,reason:on(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},a0=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var vg;class KO{constructor({enableHWA:e=!1}){C(this,vg,!1);N(this,vg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,vg)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){rt("Abstract method `_createCanvas` called.")}}vg=new WeakMap;class Aq extends KO{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class YO{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class kk extends YO{async _fetch(e){const t=await Fv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Lv(t)}}class XO{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var nd,Vh,Da,Oa,Ts,rd,id,re,Cs,Bm,Fu,o0,$u,QO,b_,zu,Hm,Um,w_,Wm;class Eq extends XO{constructor({docId:t,ownerDocument:n=globalThis.document}){super();C(this,re);C(this,nd);C(this,Vh);C(this,Da);C(this,Oa);C(this,Ts);C(this,rd);C(this,id,0);N(this,Oa,t),N(this,Ts,n)}addFilter(t){if(!t)return"none";let n=u(this,re,Cs).get(t);if(n)return n;const[r,i,o]=k(this,re,o0).call(this,t),l=t.length===1?r:`${r}${i}${o}`;if(n=u(this,re,Cs).get(l),n)return u(this,re,Cs).set(t,n),n;const c=`g_${u(this,Oa)}_transfer_map_${Jt(this,id)._++}`,d=k(this,re,$u).call(this,c);u(this,re,Cs).set(t,d),u(this,re,Cs).set(l,d);const h=k(this,re,zu).call(this,c);return k(this,re,Um).call(this,r,i,o,h),d}addHCMFilter(t,n){var x;const r=`${t}-${n}`,i="base";let o=u(this,re,Bm).get(i);if((o==null?void 0:o.key)===r||(o?((x=o.filter)==null||x.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},u(this,re,Bm).set(i,o)),!t||!n))return o.url;const l=k(this,re,Wm).call(this,t);t=fe.makeHexColor(...l);const c=k(this,re,Wm).call(this,n);if(n=fe.makeHexColor(...c),u(this,re,Fu).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const b=v/255;d[v]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const h=d.join(","),f=`g_${u(this,Oa)}_hcm_filter`,m=o.filter=k(this,re,zu).call(this,f);k(this,re,Um).call(this,h,h,h,m),k(this,re,b_).call(this,m);const p=(v,b)=>{const g=l[v]/255,y=c[v]/255,j=new Array(b+1);for(let _=0;_<=b;_++)j[_]=g+_/b*(y-g);return j.join(",")};return k(this,re,Um).call(this,p(0,5),p(1,5),p(2,5),m),o.url=k(this,re,$u).call(this,f),o.url}addAlphaFilter(t){let n=u(this,re,Cs).get(t);if(n)return n;const[r]=k(this,re,o0).call(this,[t]),i=`alpha_${r}`;if(n=u(this,re,Cs).get(i),n)return u(this,re,Cs).set(t,n),n;const o=`g_${u(this,Oa)}_alpha_map_${Jt(this,id)._++}`,l=k(this,re,$u).call(this,o);u(this,re,Cs).set(t,l),u(this,re,Cs).set(i,l);const c=k(this,re,zu).call(this,o);return k(this,re,w_).call(this,r,c),l}addLuminosityFilter(t){let n=u(this,re,Cs).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=k(this,re,o0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=u(this,re,Cs).get(i),n)return u(this,re,Cs).set(t,n),n;const o=`g_${u(this,Oa)}_luminosity_map_${Jt(this,id)._++}`,l=k(this,re,$u).call(this,o);u(this,re,Cs).set(t,l),u(this,re,Cs).set(i,l);const c=k(this,re,zu).call(this,o);return k(this,re,QO).call(this,c),t&&k(this,re,w_).call(this,r,c),l}addHighlightHCMFilter(t,n,r,i,o){var y;const l=`${n}-${r}-${i}-${o}`;let c=u(this,re,Bm).get(t);if((c==null?void 0:c.key)===l||(c?((y=c.filter)==null||y.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},u(this,re,Bm).set(t,c)),!n||!r))return c.url;const[d,h]=[n,r].map(k(this,re,Wm).bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,x]=[i,o].map(k(this,re,Wm).bind(this));m<f&&([f,m,p,x]=[m,f,x,p]),u(this,re,Fu).style.color="";const v=(j,_,S)=>{const E=new Array(256),A=(m-f)/S,P=j/255,T=(_-j)/(255*S);let I=0;for(let O=0;O<=S;O++){const L=Math.round(f+O*A),z=P+O*T;for(let M=I;M<=L;M++)E[M]=z;I=L+1}for(let O=I;O<256;O++)E[O]=E[I-1];return E.join(",")},b=`g_${u(this,Oa)}_hcm_${t}_filter`,g=c.filter=k(this,re,zu).call(this,b);return k(this,re,b_).call(this,g),k(this,re,Um).call(this,v(p[0],x[0],5),v(p[1],x[1],5),v(p[2],x[2],5),g),c.url=k(this,re,$u).call(this,b),c.url}destroy(t=!1){var n,r,i,o;t&&((n=u(this,rd))!=null&&n.size)||((r=u(this,Da))==null||r.parentNode.parentNode.remove(),N(this,Da,null),(i=u(this,Vh))==null||i.clear(),N(this,Vh,null),(o=u(this,rd))==null||o.clear(),N(this,rd,null),N(this,id,0))}}nd=new WeakMap,Vh=new WeakMap,Da=new WeakMap,Oa=new WeakMap,Ts=new WeakMap,rd=new WeakMap,id=new WeakMap,re=new WeakSet,Cs=function(){return u(this,Vh)||N(this,Vh,new Map)},Bm=function(){return u(this,rd)||N(this,rd,new Map)},Fu=function(){if(!u(this,Da)){const t=u(this,Ts).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=u(this,Ts).createElementNS(ma,"svg");r.setAttribute("width",0),r.setAttribute("height",0),N(this,Da,u(this,Ts).createElementNS(ma,"defs")),t.append(r),r.append(u(this,Da)),u(this,Ts).body.append(t)}return u(this,Da)},o0=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const f=h.join(",");return[f,f,f]}const[n,r,i]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,l[d]=r[d]/255,c[d]=i[d]/255;return[o.join(","),l.join(","),c.join(",")]},$u=function(t){if(u(this,nd)===void 0){N(this,nd,"");const n=u(this,Ts).URL;n!==u(this,Ts).baseURI&&(Bb(n)?we('#createUrl: ignore "data:"-URL for performance reasons.'):N(this,nd,lO(n,"")))}return`url(${u(this,nd)}#${t})`},QO=function(t){const n=u(this,Ts).createElementNS(ma,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},b_=function(t){const n=u(this,Ts).createElementNS(ma,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},zu=function(t){const n=u(this,Ts).createElementNS(ma,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,re,Fu).append(n),n},Hm=function(t,n,r){const i=u(this,Ts).createElementNS(ma,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Um=function(t,n,r,i){const o=u(this,Ts).createElementNS(ma,"feComponentTransfer");i.append(o),k(this,re,Hm).call(this,o,"feFuncR",t),k(this,re,Hm).call(this,o,"feFuncG",n),k(this,re,Hm).call(this,o,"feFuncB",r)},w_=function(t,n){const r=u(this,Ts).createElementNS(ma,"feComponentTransfer");n.append(r),k(this,re,Hm).call(this,r,"feFuncA",t)},Wm=function(t){return u(this,re,Fu).style.color=t,Hb(getComputedStyle(u(this,re,Fu)).getPropertyValue("color"))};class JO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class Pk extends JO{async _fetch(e){const t=await Fv(e,"arraybuffer");return new Uint8Array(t)}}class ZO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class Tk extends ZO{async _fetch(e){const t=await Fv(e,"arraybuffer");return new Uint8Array(t)}}Vs&&we("Please use the `legacy` build in Node.js environments.");async function fA(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class Cq extends XO{}class kq extends KO{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Pq extends YO{async _fetch(e){return fA(e)}}class Tq extends JO{async _fetch(e){return fA(e)}}class Rq extends ZO{async _fetch(e){return fA(e)}}const vs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function j_(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class mA{isModifyingCurrentTransform(){return!1}getPattern(){rt("Abstract method `getPattern` called.")}}class Mq extends mA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===vs.STROKE||r===vs.FILL){const o=t.current.getClippedPathBoundingBox(r,bt(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=fe.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),j_(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(n);i.setTransform(f)}else j_(e,this._bbox),i=this._createGradient(e);return i}}function n1(s,e,t,n,r,i,o,l){const c=e.coords,d=e.colors,h=s.data,f=s.width*4;let m;c[t+1]>c[n+1]&&(m=t,t=n,n=m,m=i,i=o,o=m),c[n+1]>c[r+1]&&(m=n,n=r,r=m,m=o,o=l,l=m),c[t+1]>c[n+1]&&(m=t,t=n,n=m,m=i,i=o,o=m);const p=(c[t]+e.offsetX)*e.scaleX,x=(c[t+1]+e.offsetY)*e.scaleY,v=(c[n]+e.offsetX)*e.scaleX,b=(c[n+1]+e.offsetY)*e.scaleY,g=(c[r]+e.offsetX)*e.scaleX,y=(c[r+1]+e.offsetY)*e.scaleY;if(x>=y)return;const j=d[i],_=d[i+1],S=d[i+2],E=d[o],A=d[o+1],P=d[o+2],T=d[l],I=d[l+1],O=d[l+2],L=Math.round(x),z=Math.round(y);let M,U,$,F,D,R,H,X;for(let B=L;B<=z;B++){if(B<b){const W=B<x?0:(x-B)/(x-b);M=p-(p-v)*W,U=j-(j-E)*W,$=_-(_-A)*W,F=S-(S-P)*W}else{let W;B>y?W=1:b===y?W=0:W=(b-B)/(b-y),M=v-(v-g)*W,U=E-(E-T)*W,$=A-(A-I)*W,F=P-(P-O)*W}let V;B<x?V=0:B>y?V=1:V=(x-B)/(x-y),D=p-(p-g)*V,R=j-(j-T)*V,H=_-(_-I)*V,X=S-(S-O)*V;const J=Math.round(Math.min(M,D)),ee=Math.round(Math.max(M,D));let le=f*B+J*4;for(let W=J;W<=ee;W++)V=(M-W)/(M-D),V<0?V=0:V>1&&(V=1),h[le++]=U-(U-R)*V|0,h[le++]=$-($-H)*V|0,h[le++]=F-(F-X)*V|0,h[le++]=255}}function Iq(s,e,t){const n=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,d=l-1;for(i=0;i<c;i++){let h=i*l;for(let f=0;f<d;f++,h++)n1(s,t,n[h],n[h+1],n[h+l],r[h],r[h+1],r[h+l]),n1(s,t,n[h+l+1],n[h+1],n[h+l],r[h+l+1],r[h+1],r[h+l])}break;case"triangles":for(i=0,o=n.length;i<o;i+=3)n1(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class Dq extends mA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=d/f,x=h/m,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/x},b=f+2*2,g=m+2*2,y=n.getCanvas("mesh",b,g),j=y.context,_=j.createImageData(f,m);if(t){const E=_.data;for(let A=0,P=E.length;A<P;A+=4)E[A]=t[0],E[A+1]=t[1],E[A+2]=t[2],E[A+3]=255}for(const E of this._figures)Iq(_,E,v);return j.putImageData(_,2,2),{canvas:y.canvas,offsetX:l-2*p,offsetY:c-2*x,scaleX:p,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){j_(e,this._bbox);const i=new Float32Array(2);if(r===vs.SHADING)fe.singularValueDecompose2dScale(bt(e),i);else if(this.matrix){fe.singularValueDecompose2dScale(this.matrix,i);const[l,c]=i;fe.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=c}else fe.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===vs.SHADING?null:this._background,t.cachedCanvases);return r!==vs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class Oq extends mA{getPattern(){return"hotpink"}}function Lq(s){switch(s[0]){case"RadialAxial":return new Mq(s);case"Mesh":return new Dq(s);case"Dummy":return new Oq}throw new Error(`Unknown IR type: ${s[0]}`)}const Rk={COLORED:1,UNCOLORED:2},Fy=class Fy{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:i,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),zb("TilingType: "+i);const h=t[0],f=t[1],m=t[2],p=t[3],x=m-h,v=p-f,b=new Float32Array(2);fe.singularValueDecompose2dScale(this.matrix,b);const[g,y]=b;fe.singularValueDecompose2dScale(this.baseTransform,b);const j=g*b[0],_=y*b[1];let S=x,E=v,A=!1,P=!1;const T=Math.ceil(c*j),I=Math.ceil(d*_),O=Math.ceil(x*j),L=Math.ceil(v*_);T>=O?S=c:A=!0,I>=L?E=d:P=!0;const z=this.getSizeAndScale(S,this.ctx.canvas.width,j),M=this.getSizeAndScale(E,this.ctx.canvas.height,_),U=e.cachedCanvases.getCanvas("pattern",z.size,M.size),$=U.context,F=l.createCanvasGraphics($);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,r,o),$.translate(-z.scale*h,-M.scale*f),F.transform(z.scale,0,0,M.scale,0,0),$.save(),this.clipBbox(F,h,f,m,p),F.baseTransform=bt(F.ctx),F.executeOperatorList(n),F.endDrawing(),$.restore(),A||P){const D=U.canvas;A&&(S=c),P&&(E=d);const R=this.getSizeAndScale(S,this.ctx.canvas.width,j),H=this.getSizeAndScale(E,this.ctx.canvas.height,_),X=R.size,B=H.size,V=e.cachedCanvases.getCanvas("pattern-workaround",X,B),J=V.context,ee=A?Math.floor(x/c):0,le=P?Math.floor(v/d):0;for(let W=0;W<=ee;W++)for(let ge=0;ge<=le;ge++)J.drawImage(D,X*W,B*ge,X,B,0,0,X,B);return{canvas:V.canvas,scaleX:R.scale,scaleY:H.scale,offsetX:h,offsetY:f}}return{canvas:U.canvas,scaleX:z.scale,scaleY:M.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,n){const r=Math.max(Fy.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const o=r-t,l=i-n;e.ctx.rect(t,n,o,l),fe.axialAlignedBoundingBox([t,n,r,i],bt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case Rk.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=l;break;case Rk.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new sq(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r){let i=n;r!==vs.SHADING&&(i=fe.transform(i,t.baseTransform),this.matrix&&(i=fe.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};G(Fy,"MAX_PATTERN_SIZE",3e3);let __=Fy;function Fq({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const l=_s.isLittleEndian?4278190080:255,[c,d]=o?[i,l]:[l,i],h=n>>3,f=n&7,m=s.length;t=new Uint32Array(t.buffer);let p=0;for(let x=0;x<r;x++){for(const b=e+h;e<b;e++){const g=e<m?s[e]:255;t[p++]=g&128?d:c,t[p++]=g&64?d:c,t[p++]=g&32?d:c,t[p++]=g&16?d:c,t[p++]=g&8?d:c,t[p++]=g&4?d:c,t[p++]=g&2?d:c,t[p++]=g&1?d:c}if(f===0)continue;const v=e<m?s[e++]:255;for(let b=0;b<f;b++)t[p++]=v&1<<7-b?d:c}return{srcPos:e,destPos:p}}const Mk=16,Ik=100,$q=15,Dk=10,fn=16,r1=new DOMMatrix,Wn=new Float32Array(2),sh=new Float32Array([1/0,1/0,-1/0,-1/0]);function zq(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,i,o,l){e.transform(t,n,r,i,o,l),this.__originalTransform(t,n,r,i,o,l)},s.setTransform=function(t,n,r,i,o,l){e.setTransform(t,n,r,i,o,l),this.__originalSetTransform(t,n,r,i,o,l)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,o,l){e.bezierCurveTo(t,n,r,i,o,l),this.__originalBezierCurveTo(t,n,r,i,o,l)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Bq{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function kx(s,e,t,n,r,i,o,l,c,d){const[h,f,m,p,x,v]=bt(s);if(f===0&&m===0){const y=o*h+x,j=Math.round(y),_=l*p+v,S=Math.round(_),E=(o+c)*h+x,A=Math.abs(Math.round(E)-j)||1,P=(l+d)*p+v,T=Math.abs(Math.round(P)-S)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(p),j,S),s.drawImage(e,t,n,r,i,0,0,A,T),s.setTransform(h,f,m,p,x,v),[A,T]}if(h===0&&p===0){const y=l*m+x,j=Math.round(y),_=o*f+v,S=Math.round(_),E=(l+d)*m+x,A=Math.abs(Math.round(E)-j)||1,P=(o+c)*f+v,T=Math.abs(Math.round(P)-S)||1;return s.setTransform(0,Math.sign(f),Math.sign(m),0,j,S),s.drawImage(e,t,n,r,i,0,0,T,A),s.setTransform(h,f,m,p,x,v),[T,A]}s.drawImage(e,t,n,r,i,o,l,c,d);const b=Math.hypot(h,f),g=Math.hypot(m,p);return[b*c,g*d]}class Ok{constructor(e,t){G(this,"alphaIsShape",!1);G(this,"fontSize",0);G(this,"fontSizeScale",1);G(this,"textMatrix",null);G(this,"textMatrixScale",1);G(this,"fontMatrix",Jj);G(this,"leading",0);G(this,"x",0);G(this,"y",0);G(this,"lineX",0);G(this,"lineY",0);G(this,"charSpacing",0);G(this,"wordSpacing",0);G(this,"textHScale",1);G(this,"textRenderingMode",Es.FILL);G(this,"textRise",0);G(this,"fillColor","#000000");G(this,"strokeColor","#000000");G(this,"patternFill",!1);G(this,"patternStroke",!1);G(this,"fillAlpha",1);G(this,"strokeAlpha",1);G(this,"lineWidth",1);G(this,"activeSMask",null);G(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=sh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=vs.FILL,t=null){const n=this.minMax.slice();if(e===vs.STROKE){t||rt("Stroke bounding box must include transform."),fe.singularValueDecompose2dScale(t,Wn);const r=Wn[0]*this.lineWidth/2,i=Wn[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(sh,0)}getClippedPathBoundingBox(e=vs.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Lk(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%fn,i=(t-r)/fn,o=r===0?i:i+1,l=s.createImageData(n,fn);let c=0,d;const h=e.data,f=l.data;let m,p,x,v;if(e.kind===Jx.GRAYSCALE_1BPP){const b=h.byteLength,g=new Uint32Array(f.buffer,0,f.byteLength>>2),y=g.length,j=n+7>>3,_=4294967295,S=_s.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(x=m<i?fn:r,d=0,p=0;p<x;p++){const E=b-c;let A=0;const P=E>j?n:E*8-7,T=P&-8;let I=0,O=0;for(;A<T;A+=8)O=h[c++],g[d++]=O&128?_:S,g[d++]=O&64?_:S,g[d++]=O&32?_:S,g[d++]=O&16?_:S,g[d++]=O&8?_:S,g[d++]=O&4?_:S,g[d++]=O&2?_:S,g[d++]=O&1?_:S;for(;A<P;A++)I===0&&(O=h[c++],I=128),g[d++]=O&I?_:S,I>>=1}for(;d<y;)g[d++]=0;s.putImageData(l,0,m*fn)}}else if(e.kind===Jx.RGBA_32BPP){for(p=0,v=n*fn*4,m=0;m<i;m++)f.set(h.subarray(c,c+v)),c+=v,s.putImageData(l,0,p),p+=fn;m<o&&(v=n*r*4,f.set(h.subarray(c,c+v)),s.putImageData(l,0,p))}else if(e.kind===Jx.RGB_24BPP)for(x=fn,v=n*x,m=0;m<o;m++){for(m>=i&&(x=r,v=n*x),d=0,p=v;p--;)f[d++]=h[c++],f[d++]=h[c++],f[d++]=h[c++],f[d++]=255;s.putImageData(l,0,m*fn)}else throw new Error(`bad image kind: ${e.kind}`)}function Fk(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%fn,i=(t-r)/fn,o=r===0?i:i+1,l=s.createImageData(n,fn);let c=0;const d=e.data,h=l.data;for(let f=0;f<o;f++){const m=f<i?fn:r;({srcPos:c}=Fq({src:d,srcPos:c,dest:h,width:n,height:m,nonBlackColor:0})),s.putImageData(l,0,f*fn)}}function Nm(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Px(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function $k(s,e){if(e)return!0;fe.singularValueDecompose2dScale(s,Wn);const t=Math.fround(ra.pixelRatio*Zl.PDF_TO_CSS_UNITS);return Wn[0]<=t&&Wn[1]<=t}const Hq=["butt","round","square"],Uq=["miter","round","bevel"],Wq={},zk={};var di,N_,S_,A_;const FA=class FA{constructor(e,t,n,r,i,{optionalContentConfig:o,markedContentStack:l=null},c,d){C(this,di);this.ctx=e,this.current=new Ok(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new Bq(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...bt(this.compositeCtx))}this.ctx.save(),Px(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=bt(this.ctx)}executeOperatorList(e,t,n,r){const i=e.argsArray,o=e.fnArray;let l=t||0;const c=i.length;if(c===l)return l;const d=c-l>Dk&&typeof n=="function",h=d?Date.now()+$q:0;let f=0;const m=this.commonObjs,p=this.objs;let x;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,n),l;if(x=o[l],x!==py.dependency)this[x].apply(this,i[l]);else for(const v of i[l]){const b=v.startsWith("g_")?m:p;if(!b.has(v))return b.get(v,n),l}if(l++,l===c)return l;if(d&&++f>Dk){if(Date.now()>h)return n(),l;f=0}}}endDrawing(){k(this,di,N_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,di,S_).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,d="prescale1",h,f;for(;i>2&&l>1||o>2&&c>1;){let m=l,p=c;i>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/m),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(d,m,p),f=h.context,f.clearRect(0,0,m,p),f.drawImage(e,0,0,l,c,0,0,m,p),e=h.canvas,l=m,c=p,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,i=this.current.fillColor,o=this.current.patternFill,l=bt(t);let c,d,h,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),i]),c=this._cachedBitmapsMap.get(T),c||(c=new Map,this._cachedBitmapsMap.set(T,c));const I=c.get(d);if(I&&!o){const O=Math.round(Math.min(l[0],l[2])+l[4]),L=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:I,offsetX:O,offsetY:L}}h=I}h||(f=this.cachedCanvases.getCanvas("maskCanvas",n,r),Fk(f.context,e));let m=fe.transform(l,[1/n,0,0,-1/r,0,0]);m=fe.transform(m,[1,0,0,1,0,-r]);const p=sh.slice();fe.axialAlignedBoundingBox([0,0,n,r],m,p);const[x,v,b,g]=p,y=Math.round(b-x)||1,j=Math.round(g-v)||1,_=this.cachedCanvases.getCanvas("fillCanvas",y,j),S=_.context,E=x,A=v;S.translate(-E,-A),S.transform(...m),h||(h=this._scaleImage(f.canvas,mi(S)),h=h.img,c&&o&&c.set(d,h)),S.imageSmoothingEnabled=$k(bt(S),e.interpolate),kx(S,h,0,0,h.width,h.height,0,0,n,r),S.globalCompositeOperation="source-in";const P=fe.transform(mi(S),[1,0,0,1,-E,-A]);return S.fillStyle=o?i.getPattern(t,this,P,vs.FILL):i,S.fillRect(0,0,n,r),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,_.canvas)),{canvas:_.canvas,offsetX:Math.round(E),offsetY:Math.round(A)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Hq[e]}setLineJoin(e){this.ctx.lineJoin=Uq[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=r.context;i.setTransform(this.suspendedCtx.getTransform()),Nm(this.suspendedCtx,i),zq(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],o=r[1],l=r[2]-i,c=r[3]-o;l===0||c===0||(this.genericComposeSMask(t.context,n,l,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,o,l,c,d,h,f){let m=e.canvas,p=c-h,x=d-f;if(o)if(p<0||x<0||p+n>m.width||x+r>m.height){const b=this.cachedCanvases.getCanvas("maskExtension",n,r),g=b.context;g.drawImage(m,-p,-x),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,n,r),g.globalCompositeOperation="source-over",m=b.canvas,p=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(p,x,n,r),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,x,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,d,n,r),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(m,p,x,n,r,c,d,n,r),t.restore()}save(){this.inSMaskMode&&Nm(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Nm(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,o){this.ctx.transform(e,t,n,r,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[r]=t;if(!n){r||(r=t[0]=new Path2D),this[e](r);return}if(!(r instanceof Path2D)){const i=t[0]=new Path2D;for(let o=0,l=r.length;o<l;)switch(r[o++]){case Sx.moveTo:i.moveTo(r[o++],r[o++]);break;case Sx.lineTo:i.lineTo(r[o++],r[o++]);break;case Sx.curveTo:i.bezierCurveTo(r[o++],r[o++],r[o++],r[o++],r[o++],r[o++]);break;case Sx.closePath:i.closePath();break;default:we(`Unrecognized drawing path operator: ${r[o-1]}`);break}r=i}fe.axialAlignedBoundingBox(n,bt(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const i=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,mi(n),vs.STROKE),i){const o=new Path2D;o.addPath(e,n.getTransform().invertSelf().multiplySelf(i)),e=o}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(vs.STROKE,bt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let o=!1;if(i){const c=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,mi(n),vs.FILL),c){const d=new Path2D;d.addPath(e,n.getTransform().invertSelf().multiplySelf(c)),e=d}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),o&&n.restore(),t&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Wq}eoClip(){this.pendingClip=zk}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:i,x:o,y:l,fontSize:c,path:d}of e)d&&n.addPath(d,new DOMMatrix(i).preMultiplySelf(r).translate(o,l).scale(c,-c));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||Jj,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&we("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif",o=((h=n.systemFontInfo)==null?void 0:h.css)||`"${i}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let d=t;t<Mk?d=Mk:t>Ik&&(d=Ik),this.current.fontSizeScale=t/d,this.ctx.font=`${c} ${l} ${d}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,i){const o=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&Es.FILL_STROKE_MASK,m=!!(d&Es.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,x=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||m||p||x)&&!c.missingFile&&(v=c.getPathGenerator(this.commonObjs,e)),v&&(c.disableFontFace||p||x)){o.save(),o.translate(t,n),o.scale(h,-h);let b;if((f===Es.FILL||f===Es.FILL_STROKE)&&(r?(b=o.getTransform(),o.setTransform(...r),o.fill(k(this,di,A_).call(this,v,b,r))):o.fill(v)),f===Es.STROKE||f===Es.FILL_STROKE)if(i){b||(b=o.getTransform()),o.setTransform(...i);const{a:g,b:y,c:j,d:_}=b,S=fe.inverseTransform(i),E=fe.transform([g,y,j,_,0,0],S);fe.singularValueDecompose2dScale(E,Wn),o.lineWidth*=Math.max(Wn[0],Wn[1])/h,o.stroke(k(this,di,A_).call(this,v,b,i))}else o.lineWidth/=h,o.stroke(v);o.restore()}else(f===Es.FILL||f===Es.FILL_STROKE)&&o.fillText(e,t,n),(f===Es.STROKE||f===Es.FILL_STROKE)&&o.strokeText(e,t,n);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:bt(o),x:t,y:n,fontSize:h,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return De(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const i=this.ctx,o=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,f=e.length,m=n.vertical,p=m?1:-1,x=n.defaultVMetrics,v=r*t.fontMatrix[0],b=t.textRenderingMode===Es.FILL&&!n.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),d>0?i.scale(h,-1):i.scale(h,1);let g,y;if(t.patternFill){i.save();const A=t.fillColor.getPattern(i,this,mi(i),vs.FILL);g=bt(i),i.restore(),i.fillStyle=A}if(t.patternStroke){i.save();const A=t.strokeColor.getPattern(i,this,mi(i),vs.STROKE);y=bt(i),i.restore(),i.strokeStyle=A}let j=t.lineWidth;const _=t.textMatrixScale;if(_===0||j===0){const A=t.textRenderingMode&Es.FILL_STROKE_MASK;(A===Es.STROKE||A===Es.FILL_STROKE)&&(j=this.getSinglePixelWidth())}else j/=_;if(o!==1&&(i.scale(o,o),j/=o),i.lineWidth=j,n.isInvalidPDFjsFont){const A=[];let P=0;for(const T of e)A.push(T.unicode),P+=T.width;i.fillText(A.join(""),0,0),t.x+=P*v*h,i.restore(),this.compose();return}let S=0,E;for(E=0;E<f;++E){const A=e[E];if(typeof A=="number"){S+=p*A*r/1e3;continue}let P=!1;const T=(A.isSpace?c:0)+l,I=A.fontChar,O=A.accent;let L,z,M=A.width;if(m){const $=A.vmetric||x,F=-(A.vmetric?$[1]:M*.5)*v,D=$[2]*v;M=$?-$[0]:M,L=F/o,z=(S+D)/o}else L=S/o,z=0;if(n.remeasure&&M>0){const $=i.measureText(I).width*1e3/r*o;if(M<$&&this.isFontSubpixelAAEnabled){const F=M/$;P=!0,i.save(),i.scale(F,1),L/=F}else M!==$&&(L+=(M-$)/2e3*r/o)}if(this.contentVisible&&(A.isInFont||n.missingFile)){if(b&&!O)i.fillText(I,L,z);else if(this.paintChar(I,L,z,g,y),O){const $=L+r*O.offset.x/o,F=z-r*O.offset.y/o;this.paintChar(O.fontChar,$,F,g,y)}}const U=m?M*v-T*d:M*v+T*d;S+=U,P&&i.restore()}m?t.y-=S:t.x+=S*h,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,i=n.fontSize,o=n.fontDirection,l=r.vertical?1:-1,c=n.charSpacing,d=n.wordSpacing,h=n.textHScale*o,f=n.fontMatrix||Jj,m=e.length,p=n.textRenderingMode===Es.INVISIBLE;let x,v,b,g;if(!(p||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(h,o),x=0;x<m;++x){if(v=e[x],typeof v=="number"){g=l*v*i/1e3,this.ctx.translate(g,0),n.x+=g*h;continue}const y=(v.isSpace?d:0)+c,j=r.charProcOperatorList[v.operatorListId];j?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(j),this.restore()):we(`Type3 character "${v.operatorListId}" is not available.`);const _=[v.width,0];fe.applyTransform(_,f),b=_[0]*i+y,t.translate(b,0),n.x+=b*h}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,o){const l=new Path2D;l.rect(n,r,i-n,o-r),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=this.baseTransform||bt(this.ctx),r={createCanvasGraphics:i=>new FA(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new __(e,this.ctx,r,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=Lq(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,mi(t),vs.SHADING);const r=mi(t);if(r){const{width:i,height:o}=t.canvas,l=sh.slice();fe.axialAlignedBoundingBox([0,0,i,o],r,l);const[c,d,h,f]=l;this.ctx.fillRect(c,d,h-c,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){rt("Should not call beginInlineImage")}beginImageData(){rt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=bt(this.ctx),t)){fe.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[n,r,i,o]=t,l=new Path2D;l.rect(n,r,i-n,o-r),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||zb("TODO: Support non-isolated groups."),e.knockout&&we("Knockout groups not supported.");const n=bt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=sh.slice();fe.axialAlignedBoundingBox(e.bbox,bt(t),r);const i=[0,0,t.canvas.width,t.canvas.height];r=fe.intersect(r,i)||[0,0,0,0];const o=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-o,1),d=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,d),m=f.context;m.translate(-o,-l),m.transform(...n);let p=new Path2D;const[x,v,b,g]=e.bbox;if(p.rect(x,v,b-x,g-v),e.matrix){const y=new Path2D;y.addPath(p,new DOMMatrix(e.matrix)),p=y}m.clip(p),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,l),t.save()),Nm(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=bt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=sh.slice();fe.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,n,r,i){if(k(this,di,N_).call(this),Px(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=l,fe.singularValueDecompose2dScale(bt(this.ctx),Wn);const{viewportScale:c}=this,d=Math.ceil(o*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Wn[0],0,0,-Wn[1],0,l*Wn[1]),Px(this.ctx)}else{Px(this.ctx),this.endPath();const c=new Path2D;c.rect(t[0],t[1],o,l),this.ctx.clip(c)}}this.current=new Ok(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,di,S_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this._createMaskCanvas(e),i=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(i,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=bt(l);l.transform(t,n,r,i,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let h=0,f=o.length;h<f;h+=2){const m=fe.transform(c,[t,n,r,i,o[h],o[h+1]]);l.drawImage(d.canvas,m[4],m[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:o,width:l,height:c,transform:d}=i,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=h.context;f.save();const m=this.getObject(o,i);Fk(f,m),f.globalCompositeOperation="source-in",f.fillStyle=r?n.getPattern(f,this,mi(t),vs.FILL):n,f.fillRect(0,0,l,c),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),kx(t,h.canvas,0,0,l,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){we("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){we("Dependent image isn't ready yet");return}const o=i.width,l=i.height,c=[];for(let d=0,h=r.length;d<h;d+=2)c.push({transform:[t,0,0,n,r[d],r[d+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;this.save();const{filter:i}=r;i!=="none"&&i!==""&&(r.filter="none"),r.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Lk(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,mi(r));r.imageSmoothingEnabled=$k(bt(r),e.interpolate),kx(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,o).context;Lk(c,e),r=this.applyTransferMapsToCanvas(c)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),kx(n,r,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===zk?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=bt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let o,l;if(n===0&&r===0){const c=Math.abs(t),d=Math.abs(i);if(c===d)if(e===0)o=l=1/c;else{const h=c*e;o=l=h<1?1/h:1}else if(e===0)o=1/c,l=1/d;else{const h=c*e,f=d*e;o=h<1?1/h:1,l=f<1?1/f:1}}else{const c=Math.abs(t*i-n*r),d=Math.hypot(t,n),h=Math.hypot(r,i);if(e===0)o=h/c,l=d/c;else{const f=e*c;o=h>f?h/f:1,l=d>f?d/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){n.lineWidth=(r||1)*i,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(i,o),r1.a=1/i,r1.d=1/o;const c=new Path2D;if(c.addPath(e,r1),l.length>0){const d=Math.max(i,o);n.setLineDash(l.map(h=>h/d)),n.lineDashOffset/=d}n.lineWidth=r||1,n.stroke(c),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};di=new WeakSet,N_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},S_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},A_=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let ph=FA;for(const s in py)ph.prototype[s]!==void 0&&(ph.prototype[py[s]]=ph.prototype[s]);var xg,yg;class Wi{static get workerPort(){return u(this,xg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");N(this,xg,e)}static get workerSrc(){return u(this,yg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");N(this,yg,e)}}xg=new WeakMap,yg=new WeakMap,C(Wi,xg,null),C(Wi,yg,"");var qh,bg;class Vq{constructor({parsedData:e,rawData:t}){C(this,qh);C(this,bg);N(this,qh,e),N(this,bg,t)}getRaw(){return u(this,bg)}get(e){return u(this,qh).get(e)??null}[Symbol.iterator](){return u(this,qh).entries()}}qh=new WeakMap,bg=new WeakMap;const Bu=Symbol("INTERNAL");var wg,jg,_g,Gh;class qq{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){C(this,wg,!1);C(this,jg,!1);C(this,_g,!1);C(this,Gh,!0);N(this,wg,!!(e&Hn.DISPLAY)),N(this,jg,!!(e&Hn.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(u(this,_g))return u(this,Gh);if(!u(this,Gh))return!1;const{print:e,view:t}=this.usage;return u(this,wg)?(t==null?void 0:t.viewState)!=="OFF":u(this,jg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Bu&&rt("Internal method `_setVisible` called."),N(this,_g,n),N(this,Gh,t)}}wg=new WeakMap,jg=new WeakMap,_g=new WeakMap,Gh=new WeakMap;var ol,st,Kh,Yh,Ng,E_;class Gq{constructor(e,t=Hn.DISPLAY){C(this,Ng);C(this,ol,null);C(this,st,new Map);C(this,Kh,null);C(this,Yh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,N(this,Yh,e.order);for(const n of e.groups)u(this,st).set(n.id,new qq(t,n));if(e.baseState==="OFF")for(const n of u(this,st).values())n._setVisible(Bu,!1);for(const n of e.on)u(this,st).get(n)._setVisible(Bu,!0);for(const n of e.off)u(this,st).get(n)._setVisible(Bu,!1);N(this,Kh,this.getHash())}}isVisible(e){if(u(this,st).size===0)return!0;if(!e)return zb("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,st).has(e.id)?u(this,st).get(e.id).visible:(we(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,Ng,E_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,st).has(t))return we(`Optional content group not found: ${t}`),!0;if(u(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,st).has(t))return we(`Optional content group not found: ${t}`),!0;if(!u(this,st).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,st).has(t))return we(`Optional content group not found: ${t}`),!0;if(!u(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,st).has(t))return we(`Optional content group not found: ${t}`),!0;if(u(this,st).get(t).visible)return!1}return!0}return we(`Unknown optional content policy ${e.policy}.`),!0}return we(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=u(this,st).get(e);if(!r){we(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==e&&((i=u(this,st).get(l))==null||i._setVisible(Bu,!1,!0));r._setVisible(Bu,!!t,!0),N(this,ol,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=u(this,st).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}N(this,ol,null)}get hasInitialVisibility(){return u(this,Kh)===null||this.getHash()===u(this,Kh)}getOrder(){return u(this,st).size?u(this,Yh)?u(this,Yh).slice():[...u(this,st).keys()]:null}getGroup(e){return u(this,st).get(e)||null}getHash(){if(u(this,ol)!==null)return u(this,ol);const e=new HO;for(const[t,n]of u(this,st))e.update(`${t}:${n.visible}`);return N(this,ol,e.hexdigest())}[Symbol.iterator](){return u(this,st).entries()}}ol=new WeakMap,st=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,Ng=new WeakSet,E_=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=k(this,Ng,E_).call(this,i);else if(u(this,st).has(i))o=u(this,st).get(i).visible;else return we(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class Kq{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Bt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new Yq(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Xq(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class Yq{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=uA(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Xq{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Qq(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=d(h),i(h)}if(t=o(s),t){const h=d(t);return i(h)}if(t=n("filename","i").exec(s),t){t=t[1];let h=l(t);return h=d(h),i(h)}function n(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(h,{fatal:!0}),p=Lv(f);f=m.decode(p),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function o(h){const f=[];let m;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=p.exec(h))!==null;){let[,v,b,g]=m;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[b,g]}const x=[];for(let v=0;v<f.length&&v in f;++v){let[b,g]=f[v];g=l(g),b&&(g=unescape(g),v===0&&(g=c(g))),x.push(g)}return x.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let m=0;m<f.length;++m){const p=f[m].indexOf('"');p!==-1&&(f[m]=f[m].slice(0,p),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){const f=h.indexOf("'");if(f===-1)return h;const m=h.slice(0,f),x=h.slice(f+1).replace(/^[^']*'/,"");return r(m,x)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,p,x){if(p==="q"||p==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,b){return String.fromCharCode(parseInt(b,16))}),r(m,x);try{x=atob(x)}catch{}return r(m,x)})}return""}function eL(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Ub(s){var e;return((e=URL.parse(s))==null?void 0:e.origin)??null}function tL({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function sL(s){const e=s.get("Content-Disposition");if(e){let t=Qq(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(uA(t))return t}return null}function Bv(s,e){return new gy(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function nL(s){return s===200||s===206}function rL(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function iL(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(we(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class Jq{constructor(e){G(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=eL(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Zq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new eG(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class Zq{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,rL(n,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Ub(i.url),!nL(i.status))throw Bv(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:l,suggestedLength:c}=tL({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=sL(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Jl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:iL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class eG{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${n-1}`);const o=r.url;fetch(o,rL(i,this._withCredentials,this._abortController)).then(l=>{const c=Ub(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!nL(l.status))throw Bv(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:iL(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const i1=200,a1=206;function tG(s){const e=s.response;return typeof e!="string"?e:Lv(e).buffer}class sG{constructor({url:e,httpHeaders:t,withCredentials:n}){G(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=eL(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=a1):r.expectedStatus=i1,t.responseType="arraybuffer",Bt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const i=r.status||i1;if(!(i===i1&&n.expectedStatus===a1)&&i!==n.expectedStatus){n.onError(r.status);return}const l=tG(r);if(i===a1){const c=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(we('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class nG{constructor(e){this._source=e,this._manager=new sG(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rG(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new iG(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class rG{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Ub(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=tL({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=sL(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Bv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class iG{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Ub((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Bv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const aG=/^[a-z][a-z0-9\-+.]+:/i;function oG(s){if(aG.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class lG{constructor(e){this.source=e,this.url=oG(e.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new cG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new dG(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class cG{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Bv(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Jl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class dG{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Sm=Symbol("INITIAL_DATA");var Pn,Sg,C_;class aL{constructor(){C(this,Sg);C(this,Pn,Object.create(null))}get(e,t=null){if(t){const r=k(this,Sg,C_).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=u(this,Pn)[e];if(!n||n.data===Sm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,Pn)[e];return!!t&&t.data!==Sm}delete(e){const t=u(this,Pn)[e];return!t||t.data===Sm?!1:(delete u(this,Pn)[e],!0)}resolve(e,t=null){const n=k(this,Sg,C_).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,Pn)){const{data:n}=u(this,Pn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}N(this,Pn,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Pn)){const{data:t}=u(this,Pn)[e];t!==Sm&&(yield[e,t])}}}Pn=new WeakMap,Sg=new WeakSet,C_=function(e){var t;return(t=u(this,Pn))[e]||(t[e]={...Promise.withResolvers(),data:Sm})};const uG=1e5,Bk=30;var d2,ll,dn,Ag,Eg,ad,La,Cg,kg,od,Xh,Qh,cl,Jh,Pg,Zh,ld,Tg,Rg,ef,cd,Mg,dl,tf,mo,oL,lL,k_,Xn,l0,P_,cL,dL;const Wt=class Wt{constructor({textContentSource:e,container:t,viewport:n}){C(this,mo);C(this,ll,Promise.withResolvers());C(this,dn,null);C(this,Ag,!1);C(this,Eg,!!((d2=globalThis.FontInspector)!=null&&d2.enabled));C(this,ad,null);C(this,La,null);C(this,Cg,0);C(this,kg,0);C(this,od,null);C(this,Xh,null);C(this,Qh,0);C(this,cl,0);C(this,Jh,Object.create(null));C(this,Pg,[]);C(this,Zh,null);C(this,ld,[]);C(this,Tg,new WeakMap);C(this,Rg,null);var c;if(e instanceof ReadableStream)N(this,Zh,e);else if(typeof e=="object")N(this,Zh,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');N(this,dn,N(this,Xh,t)),N(this,cl,n.scale*ra.pixelRatio),N(this,Qh,n.rotation),N(this,La,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:l}=n.rawDims;N(this,Rg,[1,0,0,-1,-o,l+i]),N(this,kg,r),N(this,Cg,i),k(c=Wt,Xn,cL).call(c),ou(t,n),u(this,ll).promise.finally(()=>{u(Wt,tf).delete(this),N(this,La,null),N(this,Jh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=_s.platform;return De(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,od).read().then(({value:t,done:n})=>{if(n){u(this,ll).resolve();return}u(this,ad)??N(this,ad,t.lang),Object.assign(u(this,Jh),t.styles),k(this,mo,oL).call(this,t.items),e()},u(this,ll).reject)};return N(this,od,u(this,Zh).getReader()),u(Wt,tf).add(this),e(),u(this,ll).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*ra.pixelRatio,r=e.rotation;if(r!==u(this,Qh)&&(t==null||t(),N(this,Qh,r),ou(u(this,Xh),{rotation:r})),n!==u(this,cl)){t==null||t(),N(this,cl,n);const o={div:null,properties:null,ctx:k(i=Wt,Xn,l0).call(i,u(this,ad))};for(const l of u(this,ld))o.properties=u(this,Tg).get(l),o.div=l,k(this,mo,k_).call(this,o)}}cancel(){var t;const e=new Jl("TextLayer task cancelled.");(t=u(this,od))==null||t.cancel(e).catch(()=>{}),N(this,od,null),u(this,ll).reject(e)}get textDivs(){return u(this,ld)}get textContentItemsStr(){return u(this,Pg)}static cleanup(){if(!(u(this,tf).size>0)){u(this,ef).clear();for(const{canvas:e}of u(this,cd).values())e.remove();u(this,cd).clear()}}};ll=new WeakMap,dn=new WeakMap,Ag=new WeakMap,Eg=new WeakMap,ad=new WeakMap,La=new WeakMap,Cg=new WeakMap,kg=new WeakMap,od=new WeakMap,Xh=new WeakMap,Qh=new WeakMap,cl=new WeakMap,Jh=new WeakMap,Pg=new WeakMap,Zh=new WeakMap,ld=new WeakMap,Tg=new WeakMap,Rg=new WeakMap,ef=new WeakMap,cd=new WeakMap,Mg=new WeakMap,dl=new WeakMap,tf=new WeakMap,mo=new WeakSet,oL=function(e){var r,i;if(u(this,Ag))return;(i=u(this,La)).ctx??(i.ctx=k(r=Wt,Xn,l0).call(r,u(this,ad)));const t=u(this,ld),n=u(this,Pg);for(const o of e){if(t.length>uG){we("Ignoring additional textDivs for performance reasons."),N(this,Ag,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=u(this,dn);N(this,dn,document.createElement("span")),u(this,dn).classList.add("markedContent"),o.id&&u(this,dn).setAttribute("id",`${o.id}`),l.append(u(this,dn))}else o.type==="endMarkedContent"&&N(this,dn,u(this,dn).parentNode);continue}n.push(o.str),k(this,mo,lL).call(this,o)}},lL=function(e){var v;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,ld).push(t);const r=fe.transform(u(this,Rg),e.transform);let i=Math.atan2(r[1],r[0]);const o=u(this,Jh)[e.fontName];o.vertical&&(i+=Math.PI/2);let l=u(this,Eg)&&o.fontSubstitution||o.fontFamily;l=Wt.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),d=c*k(v=Wt,Xn,dL).call(v,l,o,u(this,ad));let h,f;i===0?(h=r[4],f=r[5]-d):(h=r[4]+d*Math.sin(i),f=r[5]-d*Math.cos(i));const m="calc(var(--total-scale-factor) *",p=t.style;u(this,dn)===u(this,Xh)?(p.left=`${(100*h/u(this,kg)).toFixed(2)}%`,p.top=`${(100*f/u(this,Cg)).toFixed(2)}%`):(p.left=`${m}${h.toFixed(2)}px)`,p.top=`${m}${f.toFixed(2)}px)`),p.fontSize=`${m}${(u(Wt,dl)*c).toFixed(2)}px)`,p.fontFamily=l,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,Eg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);b!==g&&Math.max(b,g)/Math.min(b,g)>1.5&&(x=!0)}if(x&&(n.canvasWidth=o.vertical?e.height:e.width),u(this,Tg).set(t,n),u(this,La).div=t,u(this,La).properties=n,k(this,mo,k_).call(this,u(this,La)),n.hasText&&u(this,dn).append(t),n.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),u(this,dn).append(b)}},k_=function(e){var l;const{div:t,properties:n,ctx:r}=e,{style:i}=t;let o="";if(u(Wt,dl)>1&&(o=`scale(${1/u(Wt,dl)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=i,{canvasWidth:d,fontSize:h}=n;k(l=Wt,Xn,P_).call(l,r,h*u(this,cl),c);const{width:f}=r.measureText(t.textContent);f>0&&(o=`scaleX(${d*u(this,cl)/f}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Xn=new WeakSet,l0=function(e=null){let t=u(this,cd).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,cd).set(e,t),u(this,Mg).set(t,{size:0,family:""})}return t},P_=function(e,t,n){const r=u(this,Mg).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},cL=function(){if(u(this,dl)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),N(this,dl,e.getBoundingClientRect().height),e.remove()},dL=function(e,t,n){const r=u(this,ef).get(e);if(r)return r;const i=k(this,Xn,l0).call(this,n);i.canvas.width=i.canvas.height=Bk,k(this,Xn,P_).call(this,i,Bk,e);const o=i.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let d=.8;return l?d=l/(l+c):(_s.platform.isFirefox&&we("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),u(this,ef).set(e,d),d},C(Wt,Xn),C(Wt,ef,new Map),C(Wt,cd,new Map),C(Wt,Mg,new WeakMap),C(Wt,dl,null),C(Wt,tf,new Set);let Fp=Wt;class $p{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let o=null;const l=i.name;if(l==="#text")o=i.value;else if($p.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const d of i.children)r(d)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const hG=100;function uL(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new T_,{docId:t}=e,n=s.url?wq(s.url):null,r=s.data?jq(s.data):null,i=s.httpHeaders||null,o=s.withCredentials===!0,l=s.password??null,c=s.range instanceof hL?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let h=s.worker instanceof zp?s.worker:null;const f=s.verbosity,m=typeof s.docBaseUrl=="string"&&!Bb(s.docBaseUrl)?s.docBaseUrl:null,p=Ex(s.cMapUrl),x=s.cMapPacked!==!1,v=s.CMapReaderFactory||(Vs?Pq:kk),b=Ex(s.iccUrl),g=Ex(s.standardFontDataUrl),y=s.StandardFontDataFactory||(Vs?Tq:Pk),j=Ex(s.wasmUrl),_=s.WasmFactory||(Vs?Rq:Tk),S=s.stopAtErrors!==!0,E=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,A=s.isEvalSupported!==!1,P=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Vs,T=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Vs&&(_s.platform.isFirefox||!globalThis.chrome),I=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,O=typeof s.disableFontFace=="boolean"?s.disableFontFace:Vs,L=s.fontExtraProperties===!0,z=s.enableXfa===!0,M=s.ownerDocument||globalThis.document,U=s.disableRange===!0,$=s.disableStream===!0,F=s.disableAutoFetch===!0,D=s.pdfBug===!0,R=s.CanvasFactory||(Vs?kq:Aq),H=s.FilterFactory||(Vs?Cq:Eq),X=s.enableHWA===!0,B=s.useWasm!==!1,V=c?c.length:s.length??NaN,J=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Vs&&!O,ee=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(v===kk&&y===Pk&&_===Tk&&p&&g&&j&&Dm(p,document.baseURI)&&Dm(g,document.baseURI)&&Dm(j,document.baseURI)),le=null;Z9(f);const W={canvasFactory:new R({ownerDocument:M,enableHWA:X}),filterFactory:new H({docId:t,ownerDocument:M}),cMapReaderFactory:ee?null:new v({baseUrl:p,isCompressed:x}),standardFontDataFactory:ee?null:new y({baseUrl:g}),wasmFactory:ee?null:new _({baseUrl:j})};h||(h=zp.create({verbosity:f,port:Wi.workerPort}),e._worker=h);const ge={docId:t,apiVersion:"5.4.54",data:r,password:l,disableAutoFetch:F,rangeChunkSize:d,length:V,docBaseUrl:m,enableXfa:z,evaluatorOptions:{maxImageSize:E,disableFontFace:O,ignoreErrors:S,isEvalSupported:A,isOffscreenCanvasSupported:P,isImageDecoderSupported:T,canvasMaxAreaInBytes:I,fontExtraProperties:L,useSystemFonts:J,useWasm:B,useWorkerFetch:ee,cMapUrl:p,iccUrl:b,standardFontDataUrl:g,wasmUrl:j}},je={ownerDocument:M,pdfBug:D,styleElement:le,loadingParams:{disableAutoFetch:F,enableXfa:z}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ee=h.messageHandler.sendWithPromise("GetDocRequest",ge,r?[r.buffer]:null);let Ce;if(c)Ce=new Kq(c,{disableRange:U,disableStream:$});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Me=Dm(n)?Jq:Vs?lG:nG;Ce=new Me({url:n,length:V,httpHeaders:i,withCredentials:o,rangeChunkSize:d,disableRange:U,disableStream:$})}return Ee.then(Me=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Nt=new zm(t,Me,h.port),St=new pG(Nt,e,Ce,je,W,X);e._transport=St,Nt.send("Ready",null)})}).catch(e._capability.reject),e}var $y;const zy=class zy{constructor(){G(this,"_capability",Promise.withResolvers());G(this,"_transport",null);G(this,"_worker",null);G(this,"docId",`d${Jt(zy,$y)._++}`);G(this,"destroyed",!1);G(this,"onPassword",null);G(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};$y=new WeakMap,C(zy,$y,0);let T_=zy;var dd,Ig,Dg,Og,Lg;class hL{constructor(e,t,n=!1,r=null){C(this,dd,Promise.withResolvers());C(this,Ig,[]);C(this,Dg,[]);C(this,Og,[]);C(this,Lg,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){u(this,Lg).push(e)}addProgressListener(e){u(this,Og).push(e)}addProgressiveReadListener(e){u(this,Dg).push(e)}addProgressiveDoneListener(e){u(this,Ig).push(e)}onDataRange(e,t){for(const n of u(this,Lg))n(e,t)}onDataProgress(e,t){u(this,dd).promise.then(()=>{for(const n of u(this,Og))n(e,t)})}onDataProgressiveRead(e){u(this,dd).promise.then(()=>{for(const t of u(this,Dg))t(e)})}onDataProgressiveDone(){u(this,dd).promise.then(()=>{for(const e of u(this,Ig))e()})}transportReady(){u(this,dd).resolve()}requestDataRange(e,t){rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}dd=new WeakMap,Ig=new WeakMap,Dg=new WeakMap,Og=new WeakMap,Lg=new WeakMap;class fG{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Fa,ud,Vm;class mG{constructor(e,t,n,r=!1){C(this,ud);C(this,Fa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Ak:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new aL,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new $v({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return De(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:i=Fo.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:m=!1}){var S,E;(S=this._stats)==null||S.time("Overall");const p=this._transport.getRenderingIntent(r,i,f,m),{renderingIntent:x,cacheKey:v}=p;N(this,Fa,!1),c||(c=this._transport.getOptionalContentConfig(x));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const g=!!(x&Hn.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(E=this._stats)==null||E.time("Page Request"),this._pumpOperatorList(p));const y=A=>{var P;b.renderTasks.delete(j),g&&N(this,Fa,!0),k(this,ud,Vm).call(this),A?(j.capability.reject(A),this._abortOperatorList({intentState:b,reason:A instanceof Error?A:new Error(A)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new R_({callback:y,params:{canvas:t,canvasContext:e,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(b.renderTasks||(b.renderTasks=new Set)).add(j);const _=j.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([A,P])=>{var T;if(this.destroyed){y();return}if((T=this._stats)==null||T.time("Rendering"),!(P.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:A,optionalContentConfig:P}),j.operatorListChanged()}).catch(y),_}getOperatorList({intent:e="display",annotationMode:t=Fo.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var d;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,n,r,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>$p.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){o.read().then(function({value:c,done:d}){if(d){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},r)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),N(this,Fa,!1),Promise.all(e)}cleanup(e=!1){N(this,Fa,!0);const t=k(this,ud,Vm).call(this);return e&&t&&this._stats&&(this._stats=new Ak),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&k(this,ud,Vm).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:f,done:m})=>{if(m){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),h())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const m of d.renderTasks)m.operatorListChanged();k(this,ud,Vm).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof dA){let r=hG;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Jl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Fa=new WeakMap,ud=new WeakSet,Vm=function(){if(!u(this,Fa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),N(this,Fa,!1),!0};var ul,Hr,$a,hd,By,fd,md,Js,c0,fL,mL,qm,sf,d0;const mt=class mt{constructor({name:e=null,port:t=null,verbosity:n=eq()}={}){C(this,Js);C(this,ul,Promise.withResolvers());C(this,Hr,null);C(this,$a,null);C(this,hd,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(u(mt,md).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(mt,md).set(t,this),k(this,Js,fL).call(this,t)}else k(this,Js,mL).call(this)}get promise(){return u(this,ul).promise}get port(){return u(this,$a)}get messageHandler(){return u(this,Hr)}destroy(){var e,t;this.destroyed=!0,(e=u(this,hd))==null||e.terminate(),N(this,hd,null),u(mt,md).delete(u(this,$a)),N(this,$a,null),(t=u(this,Hr))==null||t.destroy(),N(this,Hr,null)}static create(e){const t=u(this,md).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new mt(e)}static get workerSrc(){if(Wi.workerSrc)return Wi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return De(this,"_setupFakeWorkerGlobal",(async()=>u(this,sf,d0)?u(this,sf,d0):(await import(this.workerSrc)).WorkerMessageHandler)())}};ul=new WeakMap,Hr=new WeakMap,$a=new WeakMap,hd=new WeakMap,By=new WeakMap,fd=new WeakMap,md=new WeakMap,Js=new WeakSet,c0=function(){u(this,ul).resolve(),u(this,Hr).send("configure",{verbosity:this.verbosity})},fL=function(e){N(this,$a,e),N(this,Hr,new zm("main","worker",e)),u(this,Hr).on("ready",()=>{}),k(this,Js,c0).call(this)},mL=function(){if(u(mt,fd)||u(mt,sf,d0)){k(this,Js,qm).call(this);return}let{workerSrc:e}=mt;try{mt._isSameOrigin(window.location,e)||(e=mt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new zm("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?u(this,ul).reject(new Error("Worker was destroyed")):k(this,Js,qm).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,hd)||r()},{signal:i.signal}),n.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}N(this,Hr,n),N(this,$a,t),N(this,hd,t),k(this,Js,c0).call(this)}),n.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{k(this,Js,qm).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{zb("The worker has been disabled.")}k(this,Js,qm).call(this)},qm=function(){u(mt,fd)||(we("Setting up fake worker."),N(mt,fd,!0)),mt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,ul).reject(new Error("Worker was destroyed"));return}const t=new Sq;N(this,$a,t);const n=`fake${Jt(mt,By)._++}`,r=new zm(n+"_worker",n,t);e.setup(r,t),N(this,Hr,new zm(n,n+"_worker",t)),k(this,Js,c0).call(this)}).catch(e=>{u(this,ul).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},sf=new WeakSet,d0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(mt,sf),C(mt,By,0),C(mt,fd,!1),C(mt,md,new WeakMap),Vs&&(N(mt,fd,!0),Wi.workerSrc||(Wi.workerSrc="./pdf.worker.mjs")),mt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},mt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},mt.fromPort=e=>{if(hq("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return mt.create(e)};let zp=mt;var za,Ri,nf,rf,Ba,pd,Gm;class pG{constructor(e,t,n,r,i,o){C(this,pd);C(this,za,new Map);C(this,Ri,new Map);C(this,nf,new Map);C(this,rf,new Map);C(this,Ba,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new aL,this.fontLoader=new yq({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return De(this,"annotationStorage",new hA)}getRenderingIntent(e,t=Fo.ENABLE,n=null,r=!1,i=!1){let o=Hn.DISPLAY,l=x_;switch(e){case"any":o=Hn.ANY;break;case"display":break;case"print":o=Hn.PRINT;break;default:we(`getRenderingIntent - invalid intent: ${e}`)}const c=o&Hn.PRINT&&n instanceof WO?n:this.annotationStorage;switch(t){case Fo.DISABLE:o+=Hn.ANNOTATIONS_DISABLE;break;case Fo.ENABLE:break;case Fo.ENABLE_FORMS:o+=Hn.ANNOTATIONS_FORMS;break;case Fo.ENABLE_STORAGE:o+=Hn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:we(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=Hn.IS_EDITING),i&&(o+=Hn.OPLIST);const{ids:d,hash:h}=c.modifiedIds,f=[o,l.hash,h];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Ba))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,Ri).values())e.push(r._destroy());u(this,Ri).clear(),u(this,nf).clear(),u(this,rf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,za).clear(),this.filterFactory.destroy(),Fp.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Jl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Bt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(n,r)=>{Bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:l}){if(l){r.close();return}Bt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new fG(n,this))}),e.on("DocException",n=>{t._capability.reject(on(n))}),e.on("PasswordRequest",n=>{N(this,Ba,Promise.withResolvers());try{if(!t.onPassword)throw on(n);const r=i=>{i instanceof Error?u(this,Ba).reject(i):u(this,Ba).resolve({password:i})};t.onPassword(r,n.code)}catch(r){u(this,Ba).reject(r)}return u(this,Ba).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,Ri).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in i){const h=i.error;we(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new bq(i,l);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:d}=i;Bt(d,"The imageRef must be defined.");for(const h of u(this,Ri).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,o])=>{var c;if(this.destroyed)return;const l=u(this,Ri).get(r);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&we("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,nf).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,rf).set(i.refStr,e);const o=new mG(t,i,this,this._params.pdfBug);return u(this,Ri).set(t,o),o});return u(this,nf).set(t,r),r}getPageIndex(e){return y_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,pd,Gm).call(this,"GetFieldObjects")}hasJSActions(){return k(this,pd,Gm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,pd,Gm).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,pd,Gm).call(this,"GetOptionalContentConfig").then(t=>new Gq(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,za).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new Vq(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,za).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Ri).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,za).clear(),this.filterFactory.destroy(!0),Fp.cleanup()}}cachedPageNumber(e){if(!y_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,rf).get(t)??null}}za=new WeakMap,Ri=new WeakMap,nf=new WeakMap,rf=new WeakMap,Ba=new WeakMap,pd=new WeakSet,Gm=function(e,t=null){const n=u(this,za).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return u(this,za).set(e,r),r};var hl;class gG{constructor(e){C(this,hl,null);G(this,"onContinue",null);G(this,"onError",null);N(this,hl,e)}get promise(){return u(this,hl).capability.promise}cancel(e=0){u(this,hl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,hl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,hl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}hl=new WeakMap;var fl,gd;const Ec=class Ec{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:m=null,enableHWA:p=!1}){C(this,fl,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new gG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(Ec,gd).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Ec,gd).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:i}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ph(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n,r,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,fl)&&(window.cancelAnimationFrame(u(this,fl)),N(this,fl,null)),u(Ec,gd).delete(this._canvas),e||(e=new dA(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?N(this,fl,window.requestAnimationFrame(()=>{N(this,fl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Ec,gd).delete(this._canvas),this.callback())))}};fl=new WeakMap,gd=new WeakMap,C(Ec,gd,new WeakSet);let R_=Ec;const vG="5.4.54",xG="295fb3ec4";var Tn,vd,af,Gt,Fg,of,Ha,$g,ml,Ur,zg,nt,M_,I_,D_,wc,pL,To;const ln=class ln{constructor({editor:e=null,uiManager:t=null}){C(this,nt);C(this,Tn,null);C(this,vd,null);C(this,af);C(this,Gt,null);C(this,Fg,!1);C(this,of,!1);C(this,Ha,null);C(this,$g);C(this,ml,null);C(this,Ur,null);var n,r;e?(N(this,of,!1),N(this,Ha,e)):N(this,of,!0),N(this,Ur,(e==null?void 0:e._uiManager)||t),N(this,$g,u(this,Ur)._eventBus),N(this,af,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=u(this,Ur))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),u(ln,zg)||N(ln,zg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return De(this,"_keyboardManager",new zv([[["Escape","mac+Escape"],ln.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ln.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ln.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ln.prototype._moveToPrevious],[["Home","mac+Home"],ln.prototype._moveToBeginning],[["End","mac+End"],ln.prototype._moveToEnd]]))}renderButton(){const e=N(this,Tn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,Ha)&&(e.ariaControls=`${u(this,Ha).id}_colorpicker_dropdown`);const t=u(this,Ur)._signal;e.addEventListener("click",k(this,nt,wc).bind(this),{signal:t}),e.addEventListener("keydown",k(this,nt,D_).bind(this),{signal:t});const n=N(this,vd,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=u(this,af),e.append(n),e}renderMainDropdown(){const e=N(this,Gt,k(this,nt,M_).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,Tn)){k(this,nt,wc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,nt,I_).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,nt,To)){k(this,nt,wc).call(this,e);return}if(e.target===u(this,Tn)){(t=u(this,Gt).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,Gt))==null?void 0:t.firstChild)||e.target===u(this,Tn)){u(this,nt,To)&&this._hideDropdownFromKeyboard();return}u(this,nt,To)||k(this,nt,wc).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,nt,To)){k(this,nt,wc).call(this,e);return}(t=u(this,Gt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,nt,To)){k(this,nt,wc).call(this,e);return}(t=u(this,Gt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Gt))==null||e.classList.add("hidden"),u(this,Tn).ariaExpanded="false",(t=u(this,ml))==null||t.abort(),N(this,ml,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,of)){if(!u(this,nt,To)){(e=u(this,Ha))==null||e.unselect();return}this.hideDropdown(),u(this,Tn).focus({preventScroll:!0,focusVisible:u(this,Fg)})}}updateColor(e){if(u(this,vd)&&(u(this,vd).style.backgroundColor=e),!u(this,Gt))return;const t=u(this,Ur).highlightColors.values();for(const n of u(this,Gt).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,Tn))==null||e.remove(),N(this,Tn,null),N(this,vd,null),(t=u(this,Gt))==null||t.remove(),N(this,Gt,null)}};Tn=new WeakMap,vd=new WeakMap,af=new WeakMap,Gt=new WeakMap,Fg=new WeakMap,of=new WeakMap,Ha=new WeakMap,$g=new WeakMap,ml=new WeakMap,Ur=new WeakMap,zg=new WeakMap,nt=new WeakSet,M_=function(){const e=document.createElement("div"),t=u(this,Ur)._signal;e.addEventListener("contextmenu",_r,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Ha)&&(e.id=`${u(this,Ha).id}_colorpicker_dropdown`);for(const[n,r]of u(this,Ur).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",u(ln,zg)[n]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===u(this,af),i.addEventListener("click",k(this,nt,I_).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",k(this,nt,D_).bind(this),{signal:t}),e},I_=function(e,t){t.stopPropagation(),u(this,$g).dispatch("switchannotationeditorparams",{source:this,type:Be.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},D_=function(e){ln._keyboardManager.exec(this,e)},wc=function(e){if(u(this,nt,To)){this.hideDropdown();return}if(N(this,Fg,e.detail===0),u(this,ml)||(N(this,ml,new AbortController),window.addEventListener("pointerdown",k(this,nt,pL).bind(this),{signal:u(this,Ur).combinedSignal(u(this,ml))})),u(this,Tn).ariaExpanded="true",u(this,Gt)){u(this,Gt).classList.remove("hidden");return}const t=N(this,Gt,k(this,nt,M_).call(this));u(this,Tn).append(t)},pL=function(e){var t;(t=u(this,Gt))!=null&&t.contains(e.target)||this.hideDropdown()},To=function(){return u(this,Gt)&&!u(this,Gt).classList.contains("hidden")},C(ln,zg,null);let by=ln;var Mi,Bg,lf,Hg;const Cc=class Cc{constructor(e){C(this,Mi,null);C(this,Bg,null);C(this,lf,null);N(this,Bg,e),N(this,lf,e._uiManager),u(Cc,Hg)||N(Cc,Hg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Mi))return u(this,Mi);const{editorType:e,colorType:t,colorValue:n}=u(this,Bg),r=N(this,Mi,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",u(Cc,Hg)[e]),r.addEventListener("input",()=>{u(this,lf).updateParams(t,r.value)},{signal:u(this,lf)._signal}),r}update(e){u(this,Mi)&&(u(this,Mi).value=e)}destroy(){var e;(e=u(this,Mi))==null||e.remove(),N(this,Mi,null)}hideDropdown(){}};Mi=new WeakMap,Bg=new WeakMap,lf=new WeakMap,Hg=new WeakMap,C(Cc,Hg,null);let wy=Cc;function Hk(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Am(s){return Math.max(0,Math.min(255,255*s))}class Uk{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Am(e),[e,e,e]}static G_HTML([e]){const t=Hk(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Am)}static RGB_HTML(e){return`#${e.map(Hk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[Am(1-Math.min(1,e+r)),Am(1-Math.min(1,n+r)),Am(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,o=1-n,l=Math.min(r,i,o);return["CMYK",r,i,o,l]}}class yG{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){rt("Abstract method `_createSVG` called.")}}class jy extends yG{_createSVG(e){return document.createElementNS(ma,e)}}class gL{static setupStorage(e,t,n,r,i){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[c,d]of Object.entries(o))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&i.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var f,m;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:n});const l=i!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),l&&$p.shouldBuildText(r.name)&&d.push(p)}return{textDivs:d}}const h=[[r,-1,o]];for(;h.length>0;){const[p,x,v]=h.at(-1);if(x+1===p.children.length){h.pop();continue}const b=p.children[++h.at(-1)[1]];if(b===null)continue;const{name:g}=b;if(g==="#text"){const j=document.createTextNode(b.value);d.push(j),v.append(j);continue}const y=(f=b==null?void 0:b.attributes)!=null&&f.xmlns?document.createElementNS(b.attributes.xmlns,g):document.createElement(g);if(v.append(y),b.attributes&&this.setAttributes({html:y,element:b,storage:t,intent:i,linkService:n}),((m=b.children)==null?void 0:m.length)>0)h.push([b,-1,y]);else if(b.value){const j=document.createTextNode(b.value);l&&$p.shouldBuildText(g)&&d.push(j),y.append(j)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const bG=9,cu=new WeakSet,wG=new Date().getTimezoneOffset()*60*1e3;class Wk{static create(e){switch(e.data.annotationType){case Lt.LINK:return new pA(e);case Lt.TEXT:return new jG(e);case Lt.WIDGET:switch(e.data.fieldType){case"Tx":return new _G(e);case"Btn":return e.data.radioButton?new yL(e):e.data.checkBox?new SG(e):new AG(e);case"Ch":return new EG(e);case"Sig":return new NG(e)}return new vu(e);case Lt.POPUP:return new L_(e);case Lt.FREETEXT:return new NL(e);case Lt.LINE:return new kG(e);case Lt.SQUARE:return new PG(e);case Lt.CIRCLE:return new TG(e);case Lt.POLYLINE:return new SL(e);case Lt.CARET:return new MG(e);case Lt.INK:return new gA(e);case Lt.POLYGON:return new RG(e);case Lt.HIGHLIGHT:return new AL(e);case Lt.UNDERLINE:return new IG(e);case Lt.SQUIGGLY:return new DG(e);case Lt.STRIKEOUT:return new OG(e);case Lt.STAMP:return new EL(e);case Lt.FILEATTACHMENT:return new LG(e);default:return new Dt(e)}}}var xd,cf,Ua,Ug,O_;const $A=class $A{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){C(this,Ug);C(this,xd,null);C(this,cf,!1);C(this,Ua,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return $A._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;e.rect&&(u(this,xd)||N(this,xd,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&k(this,Ug,O_).call(this,t);let r=((i=u(this,Ua))==null?void 0:i.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=u(this,Ua).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),N(this,Ua,null),this.popup=null))}resetEdited(){var e;u(this,xd)&&(k(this,Ug,O_).call(this,u(this,xd).rect),(e=u(this,Ua))==null||e.popup.resetEdited(),N(this,xd,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof vu)&&!(this instanceof pA)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof L_){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(v>0||b>0){const y=`calc(${v}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof yL){const y=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=y}switch(t.borderStyle.style){case Ou.SOLID:o.borderStyle="solid";break;case Ou.DASHED:o.borderStyle="dashed";break;case Ou.BEVELED:we("Unimplemented border style: beveled");break;case Ou.INSET:we("Unimplemented border style: inset");break;case Ou.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(N(this,cf,!0),o.borderColor=fe.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const d=fe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:f,pageX:m,pageY:p}=r.rawDims;o.left=`${100*(d[0]-m)/h}%`,o.top=`${100*(d[1]-p)/f}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(o.width=`${100*l/h}%`,o.height=`${100*c/f}%`):this.setRotation(x,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],o=i[0],l=i.slice(1);r.target.style[n]=Uk[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:Uk[`${o}_rgb`](l)})};return De(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const o=n[r];if(o){const l={detail:{[r]:i},target:e};o(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,b,g,y]=e.subarray(2,6);if(r===v&&i===b&&t===g&&n===y)return}const{style:o}=this.container;let l;if(u(this,cf)){const{borderColor:v,borderWidth:b}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const c=r-t,d=i-n,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=h.createElement("defs");f.append(m);const p=h.createElement("clipPath"),x=`clippath_${this.data.id}`;p.setAttribute("id",x),p.setAttribute("clipPathUnits","objectBoundingBox"),m.append(p);for(let v=2,b=e.length;v<b;v+=8){const g=e[v],y=e[v+1],j=e[v+2],_=e[v+3],S=h.createElement("rect"),E=(j-t)/c,A=(i-y)/d,P=(g-j)/c,T=(y-_)/d;S.setAttribute("x",E),S.setAttribute("y",A),S.setAttribute("width",P),S.setAttribute("height",T),p.append(S),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${A}" width="${P}" height="${T}"/>`)}u(this,cf)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const i=N(this,Ua,new L_({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}get hasPopupElement(){return!!(u(this,Ua)||this.popup||this.data.popupRef)}render(){rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:l}of r){if(i===-1||o===t)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!cu.has(d)){we(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:d})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&cu.has(r)&&n.push({id:o,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};xd=new WeakMap,cf=new WeakMap,Ua=new WeakMap,Ug=new WeakSet,O_=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let Dt=$A;var qn,jc,vL,xL;class pA extends Dt{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});C(this,qn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(k(this,qn,vL).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(k(this,qn,xL).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&k(this,qn,jc).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),k(this,qn,jc).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const o=r.get(i);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),k(this,qn,jc).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),k(this,qn,jc).call(this),!this._fieldObjects){we('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:o,include:l}=n,c=[];if(i.length!==0||o.length!==0){const m=new Set(o);for(const p of i){const x=this._fieldObjects[p]||[];for(const{id:v}of x)m.add(v)}for(const p of Object.values(this._fieldObjects))for(const x of p)m.has(x.id)===l&&c.push(x)}else for(const m of Object.values(this._fieldObjects))c.push(...m);const d=this.annotationStorage,h=[];for(const m of c){const{id:p}=m;switch(h.push(p),m.type){case"text":{const v=m.defaultValue||"";d.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;d.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";d.setValue(p,{value:v});break}default:continue}const x=document.querySelector(`[data-element-id="${p}"]`);if(x){if(!cu.has(x)){we(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}qn=new WeakSet,jc=function(){this.container.setAttribute("data-internal-link","")},vL=function(t,n,r="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},k(this,qn,jc).call(this)},xL=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),k(this,qn,jc).call(this)};class jG extends Dt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class vu extends Dt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return _s.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var l;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,n,r){var i,o,l;for(const[c,d]of n)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,d,r),d==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||bG,i=e.style;let o;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Zw*r))||1,f=d/h;o=Math.min(r,c(f/Zw))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(r,c(d/Zw))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=fe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class _G extends vu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),i.setValue(o.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let d=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),cu.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:p}=this.data,x=!!m&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(n,"value",b.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",b=>{const g=this.data.defaultFieldValue??"";n.value=h.userValue=g,h.formattedValue=null});let v=b=>{const{formattedValue:g}=h;g!=null&&(b.target.value=g),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{var j;if(h.focused)return;const{target:y}=g;if(x&&(y.type=m,p&&(y.step=p)),h.userValue){const _=h.userValue;if(x)if(m==="time"){const S=new Date(_),E=[S.getHours(),S.getMinutes(),S.getSeconds()];y.value=E.map(A=>A.toString().padStart(2,"0")).join(":")}else y.value=new Date(_-wG).toISOString().split(m==="date"?"T":".",1)[0];else y.value=_}h.lastCommittedValue=y.value,h.commitKey=1,(j=this.data.actions)!=null&&j.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const y={value(j){h.userValue=j.detail.value??"",x||e.setValue(t,{value:h.userValue.toString()}),j.target.value=h.userValue},formattedValue(j){const{formattedValue:_}=j.detail;h.formattedValue=_,_!=null&&j.target!==document.activeElement&&(j.target.value=_);const S={formattedValue:_};x&&(S.value=_),e.setValue(t,S)},selRange(j){j.target.setSelectionRange(...j.detail.selRange)},charLimit:j=>{var A;const{charLimit:_}=j.detail,{target:S}=j;if(_===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",_);let E=h.userValue;!E||E.length<=_||(E=E.slice(0,_),S.value=h.userValue=E,e.setValue(t,{value:E}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(y,g)}),n.addEventListener("keydown",g=>{var _;h.commitKey=1;let y=-1;if(g.key==="Escape"?y=0:g.key==="Enter"&&!this.data.multiLine?y=2:g.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:j}=g.target;h.lastCommittedValue!==j&&(h.lastCommittedValue=j,h.userValue=j,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,willCommit:!0,commitKey:y,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const b=v;v=null,n.addEventListener("blur",g=>{var _,S;if(!h.focused||!g.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(h.focused=!1);const{target:y}=g;let{value:j}=y;if(x){if(j&&m==="time"){const E=j.split(":").map(A=>parseInt(A,10));j=new Date(2e3,0,1,E[0],E[1],E[2]||0).valueOf(),y.step=""}else j=new Date(j).valueOf();y.type="text"}h.userValue=j,h.lastCommittedValue!==j&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:j,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),b(g)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",g=>{var T;h.lastCommittedValue=null;const{data:y,target:j}=g,{value:_,selectionStart:S,selectionEnd:E}=j;let A=S,P=E;switch(g.inputType){case"deleteWordBackward":{const I=_.substring(0,S).match(/\w*[^\w]*$/);I&&(A-=I[0].length);break}case"deleteWordForward":{const I=_.substring(S).match(/^[^\w]*\w*/);I&&(P+=I[0].length);break}case"deleteContentBackward":S===E&&(A-=1);break;case"deleteContentForward":S===E&&(P+=1);break}g.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:y||"",willCommit:!1,selStart:A,selEnd:P}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class NG extends vu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class SG extends vu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return cu.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,n)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(n,{value:c})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class yL extends vu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(cu.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const h=o===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const m=h&&f.id===n;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class AG extends pA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class EG extends vu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");cu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const m of r.options)m.selected=m.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,n.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let o=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),o=()=>{h.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const l=h=>{const f=h?"value":"textContent",{options:m,multiple:p}=r;return p?Array.prototype.filter.call(m,x=>x.selected).map(x=>x[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let c=l(!1);const d=h=>{const f=h.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const f={value(m){o==null||o();const p=m.detail.value,x=new Set(Array.isArray(p)?p:[p]);for(const v of r.options)v.selected=x.has(v.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(m){r.multiple=!0},remove(m){const p=r.options,x=m.detail.remove;p[x].selected=!1,r.remove(x),p.length>0&&Array.prototype.findIndex.call(p,b=>b.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},clear(m){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(m){const{index:p,displayValue:x,exportValue:v}=m.detail.insert,b=r.children[p],g=document.createElement("option");g.textContent=x,g.value=v,b?b.before(g):r.append(g),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},items(m){const{items:p}=m.detail;for(;r.length!==0;)r.remove(0);for(const x of p){const{displayValue:v,exportValue:b}=x,g=document.createElement("option");g.textContent=v,g.value=b,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},indices(m){const p=new Set(m.detail.indices);for(const x of m.target.options)x.selected=p.has(x.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,h)}),r.addEventListener("input",h=>{var p;const f=l(!0),m=l(!1);e.setValue(t,{value:f}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class L_ extends Dt{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:Dt._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new CG({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${cA}${r}`).join(",")),this.container}}var df,Hy,Uy,uf,hf,Ct,Wa,pl,ff,Wg,mf,Ii,Rn,gl,Va,Vg,qa,pf,yd,vl,Ge,u0,h0,F_,bL,wL,jL,_L,f0,m0,$_;class CG{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:o,richText:l,parent:c,rect:d,parentRect:h,open:f}){C(this,Ge);C(this,df,k(this,Ge,jL).bind(this));C(this,Hy,k(this,Ge,$_).bind(this));C(this,Uy,k(this,Ge,m0).bind(this));C(this,uf,k(this,Ge,f0).bind(this));C(this,hf,null);C(this,Ct,null);C(this,Wa,null);C(this,pl,null);C(this,ff,null);C(this,Wg,null);C(this,mf,null);C(this,Ii,!1);C(this,Rn,null);C(this,gl,null);C(this,Va,null);C(this,Vg,null);C(this,qa,null);C(this,pf,null);C(this,yd,null);C(this,vl,!1);N(this,Ct,e),N(this,pf,r),N(this,Wa,o),N(this,qa,l),N(this,Wg,c),N(this,hf,t),N(this,Vg,d),N(this,mf,h),N(this,ff,n),N(this,pl,vy.toDateObject(i)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),k(this,Ge,u0).call(this),u(this,Ct).hidden=!0,f&&k(this,Ge,f0).call(this)}render(){var r;if(u(this,Rn))return;const e=N(this,Rn,document.createElement("div"));if(e.className="popup",u(this,hf)){const i=e.style.outlineColor=fe.makeHexColor(...u(this,hf));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=u(this,pf))!=null&&r.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=u(this,pf)}if(e.append(t),u(this,pl)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,pl).valueOf()})),i.dateTime=u(this,pl).toISOString(),t.append(i)}const n=u(this,Ge,h0);if(n)gL.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(u(this,Wa));e.append(i)}u(this,Ct).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,o=r.length;i<o;++i){const l=r[i];n.append(document.createTextNode(l)),i<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popup:t,deleted:n}){var r;if(n||t!=null&&t.deleted){this.remove();return}k(this,Ge,u0).call(this),u(this,yd)||N(this,yd,{contentsObj:u(this,Wa),richText:u(this,qa)}),e&&N(this,Va,null),t&&(N(this,qa,k(this,Ge,wL).call(this,t.text)),N(this,pl,vy.toDateObject(t.date)),N(this,Wa,null)),(r=u(this,Rn))==null||r.remove(),N(this,Rn,null)}resetEdited(){var e;u(this,yd)&&({contentsObj:Jt(this,Wa)._,richText:Jt(this,qa)._}=u(this,yd),N(this,yd,null),(e=u(this,Rn))==null||e.remove(),N(this,Rn,null),N(this,Va,null))}remove(){var e,t;(e=u(this,gl))==null||e.abort(),N(this,gl,null),(t=u(this,Rn))==null||t.remove(),N(this,Rn,null),N(this,vl,!1),N(this,Ii,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){N(this,vl,this.isVisible),u(this,vl)&&(u(this,Ct).hidden=!0)}maybeShow(){k(this,Ge,u0).call(this),u(this,vl)&&(u(this,Rn)||k(this,Ge,m0).call(this),N(this,vl,!1),u(this,Ct).hidden=!1)}get isVisible(){return u(this,Ct).hidden===!1}}df=new WeakMap,Hy=new WeakMap,Uy=new WeakMap,uf=new WeakMap,hf=new WeakMap,Ct=new WeakMap,Wa=new WeakMap,pl=new WeakMap,ff=new WeakMap,Wg=new WeakMap,mf=new WeakMap,Ii=new WeakMap,Rn=new WeakMap,gl=new WeakMap,Va=new WeakMap,Vg=new WeakMap,qa=new WeakMap,pf=new WeakMap,yd=new WeakMap,vl=new WeakMap,Ge=new WeakSet,u0=function(){var t;if(u(this,gl))return;N(this,gl,new AbortController);const{signal:e}=u(this,gl);for(const n of this.trigger)n.addEventListener("click",u(this,uf),{signal:e}),n.addEventListener("mouseenter",u(this,Uy),{signal:e}),n.addEventListener("mouseleave",u(this,Hy),{signal:e}),n.classList.add("popupTriggerArea");for(const n of u(this,ff))(t=n.container)==null||t.addEventListener("keydown",u(this,df),{signal:e})},h0=function(){const e=u(this,qa),t=u(this,Wa);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,qa).html||null},F_=function(){var e,t,n;return((n=(t=(e=u(this,Ge,h0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},bL=function(){var e,t,n;return((n=(t=(e=u(this,Ge,h0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},wL=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,Ge,bL),fontSize:u(this,Ge,F_)?`calc(${u(this,Ge,F_)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},jL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Ii))&&k(this,Ge,f0).call(this)},_L=function(){if(u(this,Va)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=u(this,Wg);let o=!!u(this,mf),l=o?u(this,mf):u(this,Vg);for(const x of u(this,ff))if(!l||fe.intersect(x.data.rect,l)!==null){l=x.data.rect,o=!0;break}const c=fe.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=o?l[2]-l[0]+5:0,f=c[0]+h,m=c[1];N(this,Va,[100*(f-r)/t,100*(m-i)/n]);const{style:p}=u(this,Ct);p.left=`${u(this,Va)[0]}%`,p.top=`${u(this,Va)[1]}%`},f0=function(){N(this,Ii,!u(this,Ii)),u(this,Ii)?(k(this,Ge,m0).call(this),u(this,Ct).addEventListener("click",u(this,uf)),u(this,Ct).addEventListener("keydown",u(this,df))):(k(this,Ge,$_).call(this),u(this,Ct).removeEventListener("click",u(this,uf)),u(this,Ct).removeEventListener("keydown",u(this,df)))},m0=function(){u(this,Rn)||this.render(),this.isVisible?u(this,Ii)&&u(this,Ct).classList.add("focused"):(k(this,Ge,_L).call(this),u(this,Ct).hidden=!1,u(this,Ct).style.zIndex=parseInt(u(this,Ct).style.zIndex)+1e3)},$_=function(){u(this,Ct).classList.remove("focused"),!(u(this,Ii)||!this.isVisible)&&(u(this,Ct).hidden=!0,u(this,Ct).style.zIndex=parseInt(u(this,Ct).style.zIndex)-1e3)};class NL extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=be.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var qg;class kG extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,qg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=N(this,qg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}qg=new WeakMap;var Gg;class PG extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Gg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,l=N(this,Gg,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",r-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Gg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gg=new WeakMap;var Kg;class TG extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Kg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,l=N(this,Kg,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",r/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",r/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kg=new WeakMap;var Yg;class SL extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Yg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i},width:o,height:l}=this;if(!n)return this.container;const c=this.svgFactory.create(o,l,!0);let d=[];for(let f=0,m=n.length;f<m;f+=2){const p=n[f]-t[0],x=t[3]-n[f+1];d.push(`${p},${x}`)}d=d.join(" ");const h=N(this,Yg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Yg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yg=new WeakMap;class RG extends SL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class MG extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Xg,bd,Qg,z_;class gA extends Dt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Qg);C(this,Xg,null);C(this,bd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?be.HIGHLIGHT:be.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:l,width:c,height:d}=k(this,Qg,z_).call(this,n,t),h=this.svgFactory.create(c,d,!0),f=N(this,Xg,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,p=r.length;m<p;m++){const x=this.svgFactory.createElement(this.svgElementName);u(this,bd).push(x),x.setAttribute("points",r[m].join(",")),f.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,o=u(this,Xg);if(n>=0&&o.setAttribute("stroke-width",n||1),r)for(let l=0,c=u(this,bd).length;l<c;l++)u(this,bd)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:c,height:d}=k(this,Qg,z_).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return u(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xg=new WeakMap,bd=new WeakMap,Qg=new WeakSet,z_=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class AL extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=be.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class IG extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class DG extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class OG extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class EL extends Dt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=be.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Jg,Zg,B_;class LG extends Dt{constructor(t){var r;super(t,{isRenderable:!0});C(this,Zg);C(this,Jg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",k(this,Zg,B_).bind(this)),N(this,Jg,r);const{isMac:i}=_s.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&k(this,Zg,B_).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Jg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jg=new WeakMap,Zg=new WeakSet,B_=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ev,wd,xl,tv,sc,U_,W_;const zA=class zA{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:l}){C(this,sc);C(this,ev,null);C(this,wd,null);C(this,xl,new Map);C(this,tv,null);this.div=e,N(this,ev,t),N(this,wd,n),N(this,tv,l||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return u(this,xl).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;ou(n,this.viewport);const r=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new jy,annotationStorage:e.annotationStorage||new hA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===Lt.POPUP;if(c){const f=r.get(l.id);if(!f)continue;i.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;i.data=l;const d=Wk.create(i);if(!d.isRenderable)continue;if(!c&&l.popupRef){const f=r.get(l.popupRef);f?f.push(d):r.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await k(this,sc,U_).call(this,h,l.id,i.elements),d._isEditable&&(u(this,xl).set(d.data.id,d),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(d))}k(this,sc,W_).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new jy,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=zA._defaultBorderStyle),n.data=r;const i=Wk.create(n);if(!i.isRenderable)continue;const o=i.render();await k(this,sc,U_).call(this,o,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,ou(t,{rotation:e.rotation}),k(this,sc,W_).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,xl).values())}getEditableAnnotation(e){return u(this,xl).get(e)}static get _defaultBorderStyle(){return De(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ou.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ev=new WeakMap,wd=new WeakMap,xl=new WeakMap,tv=new WeakMap,sc=new WeakSet,U_=async function(e,t,n){var l,c;const r=e.firstChild||e,i=r.id=`${cA}${t}`,o=await((l=u(this,tv))==null?void 0:l.getAriaAttributes(i));if(o)for(const[d,h]of o)r.setAttribute(d,h);n?n.at(-1).container.after(e):(this.div.append(e),(c=u(this,ev))==null||c.moveElementInDOM(this.div,e,r,!1))},W_=function(){var t;if(!u(this,wd))return;const e=this.div;for(const[n,r]of u(this,wd)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const l=u(this,xl).get(n);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,r),l._hasNoCanvas=!1):l.canvas=r)}u(this,wd).clear()};let H_=zA;const Tx=/\r\n?|\n/g;var cr,Mn,sv,jd,In,Ht,CL,kL,PL,p0,ao,g0,v0,TL,q_,RL;const at=class at extends lt{constructor(t){super({...t,name:"freeTextEditor"});C(this,Ht);C(this,cr);C(this,Mn,"");C(this,sv,`${this.id}-editor`);C(this,jd,null);C(this,In);G(this,"_colorPicker",null);N(this,cr,t.color||at._defaultColor||lt._defaultLineColor),N(this,In,t.fontSize||at._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=at.prototype,n=o=>o.isEmpty(),r=lu.TRANSLATE_SMALL,i=lu.TRANSLATE_BIG;return De(this,"_keyboardManager",new zv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){lt.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Be.FREETEXT_SIZE:at._defaultFontSize=n;break;case Be.FREETEXT_COLOR:at._defaultColor=n;break}}updateParams(t,n){switch(t){case Be.FREETEXT_SIZE:k(this,Ht,CL).call(this,n);break;case Be.FREETEXT_COLOR:k(this,Ht,kL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Be.FREETEXT_SIZE,at._defaultFontSize],[Be.FREETEXT_COLOR,at._defaultColor||lt._defaultLineColor]]}get propertiesToUpdate(){return[[Be.FREETEXT_SIZE,u(this,In)],[Be.FREETEXT_COLOR,u(this,cr)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new wy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Be.FREETEXT_COLOR}get colorValue(){return u(this,cr)}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-at._internalPadding*t,-(at._internalPadding+u(this,In))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),N(this,jd,new AbortController);const t=this._uiManager.combinedSignal(u(this,jd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,sv)),this._isDraggable=!0,(t=u(this,jd))==null||t.abort(),N(this,jd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Mn),n=N(this,Mn,k(this,Ht,PL).call(this).trimEnd());if(t===n)return;const r=i=>{if(N(this,Mn,i),!i){this.remove();return}k(this,Ht,v0).call(this),this._uiManager.rebuild(this),k(this,Ht,p0).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),k(this,Ht,p0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){at._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,sv)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,In)}px * var(--total-scale-factor))`,r.color=u(this,cr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[m,p]=this.pageTranslation;let x,v;switch(this.rotation){case 0:x=t+(l[0]-m)/h,v=n+this.height-(l[1]-p)/f;break;case 90:x=t+(l[0]-m)/h,v=n-(l[1]-p)/f,[c,d]=[d,-c];break;case 180:x=t-this.width+(l[0]-m)/h,v=n-(l[1]-p)/f,[c,d]=[-c,-d];break;case 270:x=t+(l[0]-m-this.height*f)/h,v=n+(l[1]-p-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(x*i,v*o,c,d)}else this._moveAfterPaste(t,n);k(this,Ht,v0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var x,v,b;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=k(x=at,ao,q_).call(x,n.getData("text")||"").replaceAll(Tx,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Tx,"")),g!==this.editorDiv){let y=h;for(const j of this.editorDiv.childNodes){if(j===g){y=f;continue}y.push(k(v=at,ao,g0).call(v,j))}}h.push(c.nodeValue.slice(0,d).replaceAll(Tx,""))}else if(c===this.editorDiv){let g=h,y=0;for(const j of this.editorDiv.childNodes)y++===d&&(g=f),g.push(k(b=at,ao,g0).call(b,j))}N(this,Mn,`${h.join(`
`)}${i}${f.join(`
`)}`),k(this,Ht,v0).call(this);const m=new Range;let p=Math.sumPrecise(h.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const y=g.nodeValue.length;if(p<=y){m.setStart(g,p),m.setEnd(g,p);break}p-=y}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var l;let i=null;if(t instanceof NL){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:h,rotation:f,id:m,popupRef:p,contentsObj:x},textContent:v,textPosition:b,parent:{page:{pageNumber:g}}}=t;if(!v||v.length===0)return null;i=t={annotationType:be.FREETEXT,color:Array.from(d),fontSize:c,value:v.join(`
`),position:b,pageIndex:g-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p,comment:(x==null?void 0:x.str)||null}}const o=await super.deserialize(t,n,r);return N(o,In,t.fontSize),N(o,cr,fe.makeHexColor(...t.color)),N(o,Mn,k(l=at,ao,q_).call(l,t.value)),o._initialData=i,t.comment&&o.setCommentData(t.comment),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=at._internalPadding*this.parentScale,r=this.getRect(n,n),i=lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,cr)),o={annotationType:be.FREETEXT,color:i,fontSize:u(this,In),value:k(this,Ht,TL).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!k(this,Ht,RL).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t),{style:r}=n;r.fontSize=`calc(${u(this,In)}px * var(--total-scale-factor))`,r.color=u(this,cr),n.replaceChildren();for(const l of u(this,Mn).split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),n.append(c)}const i=at._internalPadding*this.parentScale,o={rect:this.getRect(i,i)};return o.popup=this.hasEditedComment?this.comment:{text:u(this,Mn)},t.updateEdited(o),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};cr=new WeakMap,Mn=new WeakMap,sv=new WeakMap,jd=new WeakMap,In=new WeakMap,Ht=new WeakSet,CL=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,In))*this.parentScale),N(this,In,i),k(this,Ht,p0).call(this)},r=u(this,In);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},kL=function(t){const n=i=>{var o;N(this,cr,this.editorDiv.style.color=i),(o=this._colorPicker)==null||o.update(i)},r=u(this,cr);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},PL=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(k(r=at,ao,g0).call(r,i)),n=i);return t.join(`
`)},p0=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},ao=new WeakSet,g0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Tx,"")},v0=function(){if(this.editorDiv.replaceChildren(),!!u(this,Mn))for(const t of u(this,Mn).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},TL=function(){return u(this,Mn).replaceAll(" "," ")},q_=function(t){return t.replaceAll(" "," ")},RL=function(t){const{value:n,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==o},C(at,ao),G(at,"_freeTextDefaultContent",""),G(at,"_internalPadding",0),G(at,"_defaultColor",null),G(at,"_defaultFontSize",10),G(at,"_type","freetext"),G(at,"_editorType",be.FREETEXT);let V_=at;class ie{toSVGPath(){rt("Abstract method `toSVGPath` must be implemented.")}get box(){rt("Abstract getter `box` must be implemented.")}serialize(e,t){rt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l]*r,o[l+1]=n+e[l+1]*i;return o}static _rescaleAndSwap(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l+1]*r,o[l+1]=n+e[l]*i;return o}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,o){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+o)/6,(n+i)/2,(r+o)/2]}}G(ie,"PRECISION",1e-4);var Dn,Wr,gf,vf,Di,Ie,_d,Nd,nv,rv,xf,yf,yl,iv,Wy,Vy,Qt,Km,ML,IL,DL,OL,LL,FL;const ba=class ba{constructor({x:e,y:t},n,r,i,o,l=0){C(this,Qt);C(this,Dn);C(this,Wr,[]);C(this,gf);C(this,vf);C(this,Di,[]);C(this,Ie,new Float32Array(18));C(this,_d);C(this,Nd);C(this,nv);C(this,rv);C(this,xf);C(this,yf);C(this,yl,[]);N(this,Dn,n),N(this,yf,i*r),N(this,vf,o),u(this,Ie).set([NaN,NaN,NaN,NaN,e,t],6),N(this,gf,l),N(this,rv,u(ba,iv)*r),N(this,nv,u(ba,Vy)*r),N(this,xf,r),u(this,yl).push(e,t)}isEmpty(){return isNaN(u(this,Ie)[8])}add({x:e,y:t}){var T;N(this,_d,e),N(this,Nd,t);const[n,r,i,o]=u(this,Dn);let[l,c,d,h]=u(this,Ie).subarray(8,12);const f=e-d,m=t-h,p=Math.hypot(f,m);if(p<u(this,nv))return!1;const x=p-u(this,rv),v=x/p,b=v*f,g=v*m;let y=l,j=c;l=d,c=h,d+=b,h+=g,(T=u(this,yl))==null||T.push(e,t);const _=-g/x,S=b/x,E=_*u(this,yf),A=S*u(this,yf);return u(this,Ie).set(u(this,Ie).subarray(2,8),0),u(this,Ie).set([d+E,h+A],4),u(this,Ie).set(u(this,Ie).subarray(14,18),12),u(this,Ie).set([d-E,h-A],16),isNaN(u(this,Ie)[6])?(u(this,Di).length===0&&(u(this,Ie).set([l+E,c+A],2),u(this,Di).push(NaN,NaN,NaN,NaN,(l+E-n)/i,(c+A-r)/o),u(this,Ie).set([l-E,c-A],14),u(this,Wr).push(NaN,NaN,NaN,NaN,(l-E-n)/i,(c-A-r)/o)),u(this,Ie).set([y,j,l,c,d,h],6),!this.isEmpty()):(u(this,Ie).set([y,j,l,c,d,h],6),Math.abs(Math.atan2(j-c,y-l)-Math.atan2(g,b))<Math.PI/2?([l,c,d,h]=u(this,Ie).subarray(2,6),u(this,Di).push(NaN,NaN,NaN,NaN,((l+d)/2-n)/i,((c+h)/2-r)/o),[l,c,y,j]=u(this,Ie).subarray(14,18),u(this,Wr).push(NaN,NaN,NaN,NaN,((y+l)/2-n)/i,((j+c)/2-r)/o),!0):([y,j,l,c,d,h]=u(this,Ie).subarray(0,6),u(this,Di).push(((y+5*l)/6-n)/i,((j+5*c)/6-r)/o,((5*l+d)/6-n)/i,((5*c+h)/6-r)/o,((l+d)/2-n)/i,((c+h)/2-r)/o),[d,h,l,c,y,j]=u(this,Ie).subarray(12,18),u(this,Wr).push(((y+5*l)/6-n)/i,((j+5*c)/6-r)/o,((5*l+d)/6-n)/i,((5*c+h)/6-r)/o,((l+d)/2-n)/i,((c+h)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Di),t=u(this,Wr);if(isNaN(u(this,Ie)[6])&&!this.isEmpty())return k(this,Qt,ML).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);k(this,Qt,DL).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return k(this,Qt,IL).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,o){return new $L(e,t,n,r,i,o)}getOutlines(){var f;const e=u(this,Di),t=u(this,Wr),n=u(this,Ie),[r,i,o,l]=u(this,Dn),c=new Float32Array((((f=u(this,yl))==null?void 0:f.length)??0)+2);for(let m=0,p=c.length-2;m<p;m+=2)c[m]=(u(this,yl)[m]-r)/o,c[m+1]=(u(this,yl)[m+1]-i)/l;if(c[c.length-2]=(u(this,_d)-r)/o,c[c.length-1]=(u(this,Nd)-i)/l,isNaN(n[6])&&!this.isEmpty())return k(this,Qt,OL).call(this,c);const d=new Float32Array(u(this,Di).length+24+u(this,Wr).length);let h=e.length;for(let m=0;m<h;m+=2){if(isNaN(e[m])){d[m]=d[m+1]=NaN;continue}d[m]=e[m],d[m+1]=e[m+1]}h=k(this,Qt,FL).call(this,d,h);for(let m=t.length-6;m>=6;m-=6)for(let p=0;p<6;p+=2){if(isNaN(t[m+p])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[m+p],d[h+1]=t[m+p+1],h+=2}return k(this,Qt,LL).call(this,d,h),this.newFreeDrawOutline(d,c,u(this,Dn),u(this,xf),u(this,gf),u(this,vf))}};Dn=new WeakMap,Wr=new WeakMap,gf=new WeakMap,vf=new WeakMap,Di=new WeakMap,Ie=new WeakMap,_d=new WeakMap,Nd=new WeakMap,nv=new WeakMap,rv=new WeakMap,xf=new WeakMap,yf=new WeakMap,yl=new WeakMap,iv=new WeakMap,Wy=new WeakMap,Vy=new WeakMap,Qt=new WeakSet,Km=function(){const e=u(this,Ie).subarray(4,6),t=u(this,Ie).subarray(16,18),[n,r,i,o]=u(this,Dn);return[(u(this,_d)+(e[0]-t[0])/2-n)/i,(u(this,Nd)+(e[1]-t[1])/2-r)/o,(u(this,_d)+(t[0]-e[0])/2-n)/i,(u(this,Nd)+(t[1]-e[1])/2-r)/o]},ML=function(){const[e,t,n,r]=u(this,Dn),[i,o,l,c]=k(this,Qt,Km).call(this);return`M${(u(this,Ie)[2]-e)/n} ${(u(this,Ie)[3]-t)/r} L${(u(this,Ie)[4]-e)/n} ${(u(this,Ie)[5]-t)/r} L${i} ${o} L${l} ${c} L${(u(this,Ie)[16]-e)/n} ${(u(this,Ie)[17]-t)/r} L${(u(this,Ie)[14]-e)/n} ${(u(this,Ie)[15]-t)/r} Z`},IL=function(e){const t=u(this,Wr);e.push(`L${t[4]} ${t[5]} Z`)},DL=function(e){const[t,n,r,i]=u(this,Dn),o=u(this,Ie).subarray(4,6),l=u(this,Ie).subarray(16,18),[c,d,h,f]=k(this,Qt,Km).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-n)/i} L${c} ${d} L${h} ${f} L${(l[0]-t)/r} ${(l[1]-n)/i}`)},OL=function(e){const t=u(this,Ie),[n,r,i,o]=u(this,Dn),[l,c,d,h]=k(this,Qt,Km).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(f,e,u(this,Dn),u(this,xf),u(this,gf),u(this,vf))},LL=function(e,t){const n=u(this,Wr);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},FL=function(e,t){const n=u(this,Ie).subarray(4,6),r=u(this,Ie).subarray(16,18),[i,o,l,c]=u(this,Dn),[d,h,f,m]=k(this,Qt,Km).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/l,(n[1]-o)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-o)/c],t),t+=24},C(ba,iv,8),C(ba,Wy,2),C(ba,Vy,u(ba,iv)+u(ba,Wy));let _y=ba;var bf,Sd,Ga,av,On,ov,Tt,qy,zL;class $L extends ie{constructor(t,n,r,i,o,l){super();C(this,qy);C(this,bf);C(this,Sd,new Float32Array(4));C(this,Ga);C(this,av);C(this,On);C(this,ov);C(this,Tt);N(this,Tt,t),N(this,On,n),N(this,bf,r),N(this,ov,i),N(this,Ga,o),N(this,av,l),this.lastPoint=[NaN,NaN],k(this,qy,zL).call(this,l);const[c,d,h,f]=u(this,Sd);for(let m=0,p=t.length;m<p;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-d)/f;for(let m=0,p=n.length;m<p;m+=2)n[m]=(n[m]-c)/h,n[m+1]=(n[m+1]-d)/f}toSVGPath(){const t=[`M${u(this,Tt)[4]} ${u(this,Tt)[5]}`];for(let n=6,r=u(this,Tt).length;n<r;n+=6){if(isNaN(u(this,Tt)[n])){t.push(`L${u(this,Tt)[n+4]} ${u(this,Tt)[n+5]}`);continue}t.push(`C${u(this,Tt)[n]} ${u(this,Tt)[n+1]} ${u(this,Tt)[n+2]} ${u(this,Tt)[n+3]} ${u(this,Tt)[n+4]} ${u(this,Tt)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],o){const l=r-t,c=i-n;let d,h;switch(o){case 0:d=ie._rescale(u(this,Tt),t,i,l,-c),h=ie._rescale(u(this,On),t,i,l,-c);break;case 90:d=ie._rescaleAndSwap(u(this,Tt),t,n,l,c),h=ie._rescaleAndSwap(u(this,On),t,n,l,c);break;case 180:d=ie._rescale(u(this,Tt),r,n,-l,c),h=ie._rescale(u(this,On),r,n,-l,c);break;case 270:d=ie._rescaleAndSwap(u(this,Tt),r,i,-l,-c),h=ie._rescaleAndSwap(u(this,On),r,i,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return u(this,Sd)}newOutliner(t,n,r,i,o,l=0){return new _y(t,n,r,i,o,l)}getNewOutline(t,n){const[r,i,o,l]=u(this,Sd),[c,d,h,f]=u(this,bf),m=o*h,p=l*f,x=r*h+c,v=i*f+d,b=this.newOutliner({x:u(this,On)[0]*m+x,y:u(this,On)[1]*p+v},u(this,bf),u(this,ov),t,u(this,av),n??u(this,Ga));for(let g=2;g<u(this,On).length;g+=2)b.add({x:u(this,On)[g]*m+x,y:u(this,On)[g+1]*p+v});return b.getOutlines()}}bf=new WeakMap,Sd=new WeakMap,Ga=new WeakMap,av=new WeakMap,On=new WeakMap,ov=new WeakMap,Tt=new WeakMap,qy=new WeakSet,zL=function(t){const n=u(this,Tt);let r=n[4],i=n[5];const o=[r,i,r,i];let l=r,c=i;const d=t?Math.max:Math.min;for(let f=6,m=n.length;f<m;f+=6){const p=n[f+4],x=n[f+5];if(isNaN(n[f]))fe.pointBoundingBox(p,x,o),c<x?(l=p,c=x):c===x&&(l=d(l,p));else{const v=[1/0,1/0,-1/0,-1/0];fe.bezierBoundingBox(r,i,...n.slice(f,f+6),v),fe.rectBoundingBox(...v,o),c<v[3]?(l=v[2],c=v[3]):c===v[3]&&(l=d(l,v[2]))}r=p,i=x}const h=u(this,Sd);h[0]=o[0]-u(this,Ga),h[1]=o[1]-u(this,Ga),h[2]=o[2]-o[0]+2*u(this,Ga),h[3]=o[3]-o[1]+2*u(this,Ga),this.lastPoint=[l,c]};var lv,cv,bl,Vr,sn,BL,x0,HL,UL,K_;class G_{constructor(e,t=0,n=0,r=!0){C(this,sn);C(this,lv);C(this,cv);C(this,bl,[]);C(this,Vr,[]);const i=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:v,width:b,height:g}of e){const y=Math.floor((x-t)/l)*l,j=Math.ceil((x+b+t)/l)*l,_=Math.floor((v-t)/l)*l,S=Math.ceil((v+g+t)/l)*l,E=[y,_,S,!0],A=[j,_,S,!1];u(this,bl).push(E,A),fe.rectBoundingBox(y,_,j,S,i)}const c=i[2]-i[0]+2*n,d=i[3]-i[1]+2*n,h=i[0]-n,f=i[1]-n,m=u(this,bl).at(r?-1:-2),p=[m[0],m[2]];for(const x of u(this,bl)){const[v,b,g]=x;x[0]=(v-h)/c,x[1]=(b-f)/d,x[2]=(g-f)/d}N(this,lv,new Float32Array([h,f,c,d])),N(this,cv,p)}getOutlines(){u(this,bl).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,bl))t[3]?(e.push(...k(this,sn,K_).call(this,t)),k(this,sn,HL).call(this,t)):(k(this,sn,UL).call(this,t),e.push(...k(this,sn,K_).call(this,t)));return k(this,sn,BL).call(this,e)}}lv=new WeakMap,cv=new WeakMap,bl=new WeakMap,Vr=new WeakMap,sn=new WeakSet,BL=function(e){const t=[],n=new Set;for(const o of e){const[l,c,d]=o;t.push([l,c,o],[l,d,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const c=t[o][2],d=t[o+1][2];c.push(d),d.push(c),n.add(c),n.add(d)}const r=[];let i;for(;n.size>0;){const o=n.values().next().value;let[l,c,d,h,f]=o;n.delete(o);let m=l,p=c;for(i=[l,d],r.push(i);;){let x;if(n.has(h))x=h;else if(n.has(f))x=f;else break;n.delete(x),[l,c,d,h,f]=x,m!==l&&(i.push(m,p,l,p===c?c:d),m=l),p=p===c?d:c}i.push(m,p)}return new FG(r,u(this,lv),u(this,cv))},x0=function(e){const t=u(this,Vr);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,o=t[i][0];if(o===e)return i;o<e?n=i+1:r=i-1}return r+1},HL=function([,e,t]){const n=k(this,sn,x0).call(this,e);u(this,Vr).splice(n,0,[e,t])},UL=function([,e,t]){const n=k(this,sn,x0).call(this,e);for(let r=n;r<u(this,Vr).length;r++){const[i,o]=u(this,Vr)[r];if(i!==e)break;if(i===e&&o===t){u(this,Vr).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,o]=u(this,Vr)[r];if(i!==e)break;if(i===e&&o===t){u(this,Vr).splice(r,1);return}}},K_=function(e){const[t,n,r]=e,i=[[t,n,r]],o=k(this,sn,x0).call(this,r);for(let l=0;l<o;l++){const[c,d]=u(this,Vr)[l];for(let h=0,f=i.length;h<f;h++){const[,m,p]=i[h];if(!(d<=m||p<=c)){if(m>=c){if(p>d)i[h][1]=d;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=c,p>d&&i.push([t,d,p])}}}return i};var dv,wf;class FG extends ie{constructor(t,n,r){super();C(this,dv);C(this,wf);N(this,wf,t),N(this,dv,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of u(this,wf)){let[r,i]=n;t.push(`M${r} ${i}`);for(let o=2;o<n.length;o+=2){const l=n[o],c=n[o+1];l===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],o){const l=[],c=r-t,d=i-n;for(const h of u(this,wf)){const f=new Array(h.length);for(let m=0;m<h.length;m+=2)f[m]=t+h[m]*c,f[m+1]=i-h[m+1]*d;l.push(f)}return l}get box(){return u(this,dv)}get classNamesForOutlining(){return["highlightOutline"]}}dv=new WeakMap,wf=new WeakMap;class Y_ extends _y{newFreeDrawOutline(e,t,n,r,i,o){return new $G(e,t,n,r,i,o)}}class $G extends $L{newOutliner(e,t,n,r,i,o=0){return new Y_(e,t,n,r,i,o)}}var jf,uv,Ka,Ad,hv,un,fv,mv,Ed,dr,Ln,ms,_f,Ya,Rs,Nf,ur,pv,Ae,X_,y0,WL,VL,qL,Q_,_c,pr,Hu,GL,b0,Ym,KL,YL,XL,QL,JL;const Ye=class Ye extends lt{constructor(t){super({...t,name:"highlightEditor"});C(this,Ae);C(this,jf,null);C(this,uv,0);C(this,Ka);C(this,Ad,null);C(this,hv,null);C(this,un,null);C(this,fv,null);C(this,mv,0);C(this,Ed,null);C(this,dr,null);C(this,Ln,null);C(this,ms,!1);C(this,_f,null);C(this,Ya);C(this,Rs,null);C(this,Nf,"");C(this,ur);C(this,pv,"");this.color=t.color||Ye._defaultColor,N(this,ur,t.thickness||Ye._defaultThickness),N(this,Ya,t.opacity||Ye._defaultOpacity),N(this,Ka,t.boxes||null),N(this,pv,t.methodOfCreation||""),N(this,Nf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(N(this,ms,!0),k(this,Ae,y0).call(this,t),k(this,Ae,_c).call(this)):u(this,Ka)&&(N(this,jf,t.anchorNode),N(this,uv,t.anchorOffset),N(this,fv,t.focusNode),N(this,mv,t.focusOffset),k(this,Ae,X_).call(this),k(this,Ae,_c).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ye.prototype;return De(this,"_keyboardManager",new zv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,ms)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,ur),methodOfCreation:u(this,pv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;lt.initialize(t,n),Ye._defaultColor||(Ye._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Be.HIGHLIGHT_COLOR:Ye._defaultColor=n;break;case Be.HIGHLIGHT_THICKNESS:Ye._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,_f)}updateParams(t,n){switch(t){case Be.HIGHLIGHT_COLOR:k(this,Ae,WL).call(this,n);break;case Be.HIGHLIGHT_THICKNESS:k(this,Ae,VL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Be.HIGHLIGHT_COLOR,Ye._defaultColor],[Be.HIGHLIGHT_THICKNESS,Ye._defaultThickness]]}get propertiesToUpdate(){return[[Be.HIGHLIGHT_COLOR,this.color||Ye._defaultColor],[Be.HIGHLIGHT_THICKNESS,u(this,ur)||Ye._defaultThickness],[Be.HIGHLIGHT_FREE,u(this,ms)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",N(this,hv,new by({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,Ae,Ym).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,k(this,Ae,Ym).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,Ae,Q_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Ae,_c).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?k(this,Ae,Q_).call(this):t&&(k(this,Ae,_c).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,o,l;const{drawLayer:n}=this.parent;let r;u(this,ms)?(t=(t-this.rotation+360)%360,r=k(i=Ye,pr,Hu).call(i,u(this,dr).box,t)):r=k(o=Ye,pr,Hu).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(u(this,Ln),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(u(this,Rs),{bbox:k(l=Ye,pr,Hu).call(l,u(this,un).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Nf)&&(t.setAttribute("aria-label",u(this,Nf)),t.setAttribute("role","mark")),u(this,ms)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,Ae,GL).bind(this),{signal:this._uiManager._signal});const n=N(this,Ed,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Ad);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),xO(this,u(this,Ed),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Rs),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Rs),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,Ae,b0).call(this,!0);break;case 1:case 3:k(this,Ae,b0).call(this,!1);break}}select(){var t;super.select(),u(this,Rs)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Rs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,Rs)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Rs),{rootClass:{selected:!1}}),u(this,ms)||k(this,Ae,b0).call(this,!1))}get _mustFixPosition(){return!u(this,ms)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Ln),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,Rs),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:o}){const{x:l,y:c,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),p=x=>{f.abort(),k(this,pr,QL).call(this,t,x)};window.addEventListener("blur",p,{signal:m}),window.addEventListener("pointerup",p,{signal:m}),window.addEventListener("pointerdown",Ft,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",_r,{signal:m}),r.addEventListener("pointermove",k(this,pr,XL).bind(this,t),{signal:m}),this._freeHighlight=new Y_({x:i,y:o},[l,c,d,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var v,b,g,y;let i=null;if(t instanceof AL){const{data:{quadPoints:j,rect:_,rotation:S,id:E,color:A,opacity:P,popupRef:T,contentsObj:I},parent:{page:{pageNumber:O}}}=t;i=t={annotationType:be.HIGHLIGHT,color:Array.from(A),opacity:P,quadPoints:j,boxes:null,pageIndex:O-1,rect:_.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:T,comment:(I==null?void 0:I.str)||null}}else if(t instanceof gA){const{data:{inkLists:j,rect:_,rotation:S,id:E,color:A,borderStyle:{rawWidth:P},popupRef:T,contentsObj:I},parent:{page:{pageNumber:O}}}=t;i=t={annotationType:be.HIGHLIGHT,color:Array.from(A),thickness:P,inkLists:j,boxes:null,pageIndex:O-1,rect:_.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:T,comment:(I==null?void 0:I.str)||null}}const{color:o,quadPoints:l,inkLists:c,opacity:d}=t,h=await super.deserialize(t,n,r);h.color=fe.makeHexColor(...o),N(h,Ya,d||1),c&&N(h,ur,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t.comment);const[f,m]=h.pageDimensions,[p,x]=h.pageTranslation;if(l){const j=N(h,Ka,[]);for(let _=0;_<l.length;_+=8)j.push({x:(l[_]-p)/f,y:1-(l[_+1]-x)/m,width:(l[_+2]-l[_])/f,height:(l[_+1]-l[_+5])/m});k(v=h,Ae,X_).call(v),k(b=h,Ae,_c).call(b),h.rotate(h.rotation)}else if(c){N(h,ms,!0);const j=c[0],_={x:j[0]-p,y:m-(j[1]-x)},S=new Y_(_,[0,0,f,m],1,u(h,ur)/2,!0,.001);for(let P=0,T=j.length;P<T;P+=2)_.x=j[P]-p,_.y=m-(j[P+1]-x),S.add(_);const{id:E,clipPathId:A}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);k(g=h,Ae,y0).call(g,{highlightOutlines:S.getOutlines(),highlightId:E,clipPathId:A}),k(y=h,Ae,_c).call(y),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:be.HIGHLIGHT,color:r,opacity:u(this,Ya),thickness:u(this,ur),quadPoints:k(this,Ae,KL).call(this),outlines:k(this,Ae,YL).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:k(this,Ae,Ym).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!k(this,Ae,JL).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const n={rect:this.getRect(0,0)};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}static canCreateNewEmptyEditor(){return!1}};jf=new WeakMap,uv=new WeakMap,Ka=new WeakMap,Ad=new WeakMap,hv=new WeakMap,un=new WeakMap,fv=new WeakMap,mv=new WeakMap,Ed=new WeakMap,dr=new WeakMap,Ln=new WeakMap,ms=new WeakMap,_f=new WeakMap,Ya=new WeakMap,Rs=new WeakMap,Nf=new WeakMap,ur=new WeakMap,pv=new WeakMap,Ae=new WeakSet,X_=function(){const t=new G_(u(this,Ka),.001);N(this,dr,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,dr).box;const n=new G_(u(this,Ka),.0025,.001,this._uiManager.direction==="ltr");N(this,un,n.getOutlines());const{lastPoint:r}=u(this,un);N(this,_f,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},y0=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var f,m;if(N(this,dr,t),N(this,un,t.getNewOutline(u(this,ur)/2+1.5,.0025)),n>=0)N(this,Ln,n),N(this,Ad,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),N(this,Rs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,un).box,path:{d:u(this,un).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Ln),{bbox:k(f=Ye,pr,Hu).call(f,u(this,dr).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Rs),{bbox:k(m=Ye,pr,Hu).call(m,u(this,un).box,p),path:{d:u(this,un).toSVGPath()}})}const[o,l,c,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[p,x]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*x/p,this.height=d*p/x;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[p,x]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*x/p,this.height=d*p/x;break}}const{lastPoint:h}=u(this,un);N(this,_f,[(h[0]-o)/c,(h[1]-l)/d])},WL=function(t){const n=(o,l)=>{var c,d;this.color=o,N(this,Ya,l),(c=this.parent)==null||c.drawLayer.updateProperties(u(this,Ln),{root:{fill:o,"fill-opacity":l}}),(d=u(this,hv))==null||d.updateColor(o)},r=this.color,i=u(this,Ya);this.addCommands({cmd:n.bind(this,t,Ye._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},VL=function(t){const n=u(this,ur),r=i=>{N(this,ur,i),k(this,Ae,qL).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},qL=function(t){if(!u(this,ms))return;k(this,Ae,y0).call(this,{highlightOutlines:u(this,dr).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},Q_=function(){u(this,Ln)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Ln)),N(this,Ln,null),this.parent.drawLayer.remove(u(this,Rs)),N(this,Rs,null))},_c=function(t=this.parent){u(this,Ln)===null&&({id:Jt(this,Ln)._,clipPathId:Jt(this,Ad)._}=t.drawLayer.draw({bbox:u(this,dr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Ya)},rootClass:{highlight:!0,free:u(this,ms)},path:{d:u(this,dr).toSVGPath()}},!1,!0),N(this,Rs,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,ms)},bbox:u(this,un).box,path:{d:u(this,un).toSVGPath()}},u(this,ms))),u(this,Ed)&&(u(this,Ed).style.clipPath=u(this,Ad)))},pr=new WeakSet,Hu=function([t,n,r,i],o){switch(o){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},GL=function(t){Ye._keyboardManager.exec(this,t)},b0=function(t){if(!u(this,jf))return;const n=window.getSelection();t?n.setPosition(u(this,jf),u(this,uv)):n.setPosition(u(this,fv),u(this,mv))},Ym=function(){return u(this,ms)?this.rotation:0},KL=function(){if(u(this,ms))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,o=u(this,Ka),l=new Float32Array(o.length*8);let c=0;for(const{x:d,y:h,width:f,height:m}of o){const p=d*t+r,x=(1-h)*n+i;l[c]=l[c+4]=p,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=p+f*t,l[c+5]=l[c+7]=x-m*n,c+=8}return l},YL=function(t){return u(this,dr).serialize(t,k(this,Ae,Ym).call(this))},XL=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},QL=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},JL=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==n[i])},C(Ye,pr),G(Ye,"_defaultColor",null),G(Ye,"_defaultOpacity",1),G(Ye,"_defaultThickness",12),G(Ye,"_type","highlight"),G(Ye,"_editorType",be.HIGHLIGHT),G(Ye,"_freeHighlightId",-1),G(Ye,"_freeHighlight",null),G(Ye,"_freeHighlightClipId","");let Ny=Ye;var Cd;class ZL{constructor(){C(this,Cd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){u(this,Cd)[e]=t}toSVGProperties(){const e=u(this,Cd);return N(this,Cd,Object.create(null)),{root:e}}reset(){N(this,Cd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){rt("Not implemented")}}Cd=new WeakMap;var Fn,Sf,ts,kd,Pd,wl,jl,_l,Td,We,J_,Z_,eN,Xm,e4,w0,Qm,Uu;const oe=class oe extends lt{constructor(t){super(t);C(this,We);C(this,Fn,null);C(this,Sf);G(this,"_colorPicker",null);G(this,"_drawId",null);N(this,Sf,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(k(this,We,J_).call(this,t),k(this,We,Xm).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(n))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){rt("Not implemented")}static get typesMap(){rt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(u(oe,ts).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,o=i[n],l=c=>{var h,f;i.updateProperty(n,c);const d=u(this,Fn).updateProperty(n,c);d&&k(this,We,Qm).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&((f=this._colorPicker)==null||f.update(c))};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(u(this,Fn).getPathResizingSVGProperties(k(this,We,w0).call(this)),{bbox:k(this,We,Uu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(u(this,Fn).getPathResizedSVGProperties(k(this,We,w0).call(this)),{bbox:k(this,We,Uu).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:k(this,We,Uu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(u(this,Fn).getPathTranslatedSVGProperties(k(this,We,w0).call(this),this.parentDimensions),{bbox:k(this,We,Uu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Sf)&&(N(this,Sf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,We,eN).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,We,Xm).call(this),k(this,We,Qm).call(this,u(this,Fn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,We,eN).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,We,Xm).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties({bbox:k(this,We,Uu).call(this)},u(this,Fn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,We,Qm).call(this,u(this,Fn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,i,o){rt("Not implemented")}static startDrawing(t,n,r,i){var b;const{target:o,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=i;if(u(oe,jl)&&u(oe,jl)!==h)return;const{viewport:{rotation:f}}=t,{width:m,height:p}=o.getBoundingClientRect(),x=N(oe,kd,new AbortController),v=t.combinedSignal(x);if(u(oe,wl)||N(oe,wl,d),u(oe,jl)??N(oe,jl,h),window.addEventListener("pointerup",g=>{var y;u(oe,wl)===g.pointerId?this._endDraw(g):(y=u(oe,_l))==null||y.delete(g.pointerId)},{signal:v}),window.addEventListener("pointercancel",g=>{var y;u(oe,wl)===g.pointerId?this._currentParent.endDrawingSession():(y=u(oe,_l))==null||y.delete(g.pointerId)},{signal:v}),window.addEventListener("pointerdown",g=>{u(oe,jl)===g.pointerType&&((u(oe,_l)||N(oe,_l,new Set)).add(g.pointerId),u(oe,ts).isCancellable()&&(u(oe,ts).removeLastElement(),u(oe,ts).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",_r,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",g=>{g.timeStamp===u(oe,Td)&&Ft(g)},{signal:v}),t.toggleDrawing(),(b=n._editorUndoBar)==null||b.hide(),u(oe,ts)){t.drawLayer.updateProperties(this._currentDrawId,u(oe,ts).startNew(l,c,m,p,f));return}n.updateUIForDefaultProperties(this),N(oe,ts,this.createDrawerInstance(l,c,m,p,f)),N(oe,Pd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(oe,Pd).toSVGProperties(),u(oe,ts).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(N(oe,Td,-1),!u(oe,ts))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(u(oe,wl)===i){if(((o=u(oe,_l))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(oe,ts).add(n,r)),N(oe,Td,t.timeStamp),Ft(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,N(oe,ts,null),N(oe,Pd,null),N(oe,jl,null),N(oe,Td,NaN)),u(oe,kd)&&(u(oe,kd).abort(),N(oe,kd,null),N(oe,wl,NaN),N(oe,_l,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,u(oe,ts).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=u(oe,ts),i=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Be.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Be.DRAW_STEP),!u(oe,ts).isEmpty()){const{pageDimensions:[r,i],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(oe,ts).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:u(oe,Pd),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,o,l){rt("Not implemented")}static async deserialize(t,n,r){var f,m;const{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:c}}=n.viewport,d=this.deserializeDraw(l,c,i,o,this._INNER_MARGIN,t),h=await super.deserialize(t,n,r);return h.createDrawingOptions(t),k(f=h,We,J_).call(f,{drawOutlines:d}),k(m=h,We,Xm).call(m),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,r]=this.pageTranslation,[i,o]=this.pageDimensions;return u(this,Fn).serialize([n,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Fn=new WeakMap,Sf=new WeakMap,ts=new WeakMap,kd=new WeakMap,Pd=new WeakMap,wl=new WeakMap,jl=new WeakMap,_l=new WeakMap,Td=new WeakMap,We=new WeakSet,J_=function({drawOutlines:t,drawId:n,drawingOptions:r}){N(this,Fn,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=k(this,We,Z_).call(this,t,this.parent),k(this,We,Qm).call(this,t.box)},Z_=function(t,n){const{id:r}=n.drawLayer.draw(oe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},eN=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Xm=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,We,Z_).call(this,u(this,Fn),t)}},e4=function([t,n,r,i]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[n,1-t,r*(l/o),i*(o/l)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(l/o),i*(o/l)];default:return[t,n,r,i]}},w0=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-n,t,r*(o/l),i*(l/o)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(o/l),i*(l/o)];default:return[t,n,r,i]}},Qm=function(t){if([this.x,this.y,this.width,this.height]=k(this,We,e4).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},Uu=function(){const{x:t,y:n,width:r,height:i,rotation:o,parentRotation:l,parentDimensions:[c,d]}=this;switch((o*4+l)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(c/d),i*(d/c),r*(c/d)];case 5:return[1-n,t,r*(c/d),i*(d/c)];case 6:return[1-t-i*(d/c),1-n,i*(d/c),r*(c/d)];case 7:return[n-r*(c/d),1-t-i*(d/c),r*(c/d),i*(d/c)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(d/c),n,i*(d/c),r*(c/d)];case 13:return[1-n-r*(c/d),t-i*(d/c),r*(c/d),i*(d/c)];case 14:return[1-t,1-n-r*(c/d),i*(d/c),r*(c/d)];case 15:return[n,1-t,r*(c/d),i*(d/c)];default:return[t,n,r,i]}},G(oe,"_currentDrawId",-1),G(oe,"_currentParent",null),C(oe,ts,null),C(oe,kd,null),C(oe,Pd,null),C(oe,wl,NaN),C(oe,jl,null),C(oe,_l,null),C(oe,Td,NaN),G(oe,"_INNER_MARGIN",3);let Sy=oe;var Oi,ss,ns,Rd,Af,Hs,ps,hr,Md,Id,Dd,Ef,j0;class zG{constructor(e,t,n,r,i,o){C(this,Ef);C(this,Oi,new Float64Array(6));C(this,ss);C(this,ns);C(this,Rd);C(this,Af);C(this,Hs);C(this,ps,"");C(this,hr,0);C(this,Md,new Hv);C(this,Id);C(this,Dd);N(this,Id,n),N(this,Dd,r),N(this,Rd,i),N(this,Af,o),[e,t]=k(this,Ef,j0).call(this,e,t);const l=N(this,ss,[NaN,NaN,NaN,NaN,e,t]);N(this,Hs,[e,t]),N(this,ns,[{line:l,points:u(this,Hs)}]),u(this,Oi).set(l,0)}updateProperty(e,t){e==="stroke-width"&&N(this,Af,t)}isEmpty(){return!u(this,ns)||u(this,ns).length===0}isCancellable(){return u(this,Hs).length<=10}add(e,t){[e,t]=k(this,Ef,j0).call(this,e,t);const[n,r,i,o]=u(this,Oi).subarray(2,6),l=e-i,c=t-o;return Math.hypot(u(this,Id)*l,u(this,Dd)*c)<=2?null:(u(this,Hs).push(e,t),isNaN(n)?(u(this,Oi).set([i,o,e,t],2),u(this,ss).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Oi)[0])&&u(this,ss).splice(6,6),u(this,Oi).set([n,r,i,o,e,t],0),u(this,ss).push(...ie.createBezierPoints(n,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(u(this,Hs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){N(this,Id,n),N(this,Dd,r),N(this,Rd,i),[e,t]=k(this,Ef,j0).call(this,e,t);const o=N(this,ss,[NaN,NaN,NaN,NaN,e,t]);N(this,Hs,[e,t]);const l=u(this,ns).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),u(this,ns).push({line:o,points:u(this,Hs)}),u(this,Oi).set(o,0),N(this,hr,0),this.toSVGPath(),null}getLastElement(){return u(this,ns).at(-1)}setLastElement(e){return u(this,ns)?(u(this,ns).push(e),N(this,ss,e.line),N(this,Hs,e.points),N(this,hr,0),{path:{d:this.toSVGPath()}}):u(this,Md).setLastElement(e)}removeLastElement(){if(!u(this,ns))return u(this,Md).removeLastElement();u(this,ns).pop(),N(this,ps,"");for(let e=0,t=u(this,ns).length;e<t;e++){const{line:n,points:r}=u(this,ns)[e];N(this,ss,n),N(this,Hs,r),N(this,hr,0),this.toSVGPath()}return{path:{d:u(this,ps)}}}toSVGPath(){const e=ie.svgRound(u(this,ss)[4]),t=ie.svgRound(u(this,ss)[5]);if(u(this,Hs).length===2)return N(this,ps,`${u(this,ps)} M ${e} ${t} Z`),u(this,ps);if(u(this,Hs).length<=6){const r=u(this,ps).lastIndexOf("M");N(this,ps,`${u(this,ps).slice(0,r)} M ${e} ${t}`),N(this,hr,6)}if(u(this,Hs).length===4){const r=ie.svgRound(u(this,ss)[10]),i=ie.svgRound(u(this,ss)[11]);return N(this,ps,`${u(this,ps)} L ${r} ${i}`),N(this,hr,12),u(this,ps)}const n=[];u(this,hr)===0&&(n.push(`M ${e} ${t}`),N(this,hr,6));for(let r=u(this,hr),i=u(this,ss).length;r<i;r+=6){const[o,l,c,d,h,f]=u(this,ss).slice(r,r+6).map(ie.svgRound);n.push(`C${o} ${l} ${c} ${d} ${h} ${f}`)}return N(this,ps,u(this,ps)+n.join(" ")),N(this,hr,u(this,ss).length),u(this,ps)}getOutlines(e,t,n,r){const i=u(this,ns).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,Md).build(u(this,ns),e,t,n,u(this,Rd),u(this,Af),r),N(this,Oi,null),N(this,ss,null),N(this,ns,null),N(this,ps,null),u(this,Md)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Oi=new WeakMap,ss=new WeakMap,ns=new WeakMap,Rd=new WeakMap,Af=new WeakMap,Hs=new WeakMap,ps=new WeakMap,hr=new WeakMap,Md=new WeakMap,Id=new WeakMap,Dd=new WeakMap,Ef=new WeakSet,j0=function(e,t){return ie._normalizePoint(e,t,u(this,Id),u(this,Dd),u(this,Rd))};var Us,gv,vv,$n,Li,Fi,Cf,kf,Od,xs,ga,t4,s4,n4;class Hv extends ie{constructor(){super(...arguments);C(this,xs);C(this,Us);C(this,gv,0);C(this,vv);C(this,$n);C(this,Li);C(this,Fi);C(this,Cf);C(this,kf);C(this,Od)}build(t,n,r,i,o,l,c){N(this,Li,n),N(this,Fi,r),N(this,Cf,i),N(this,kf,o),N(this,Od,l),N(this,vv,c??0),N(this,$n,t),k(this,xs,s4).call(this)}get thickness(){return u(this,Od)}setLastElement(t){return u(this,$n).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,$n).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of u(this,$n)){if(t.push(`M${ie.svgRound(n[4])} ${ie.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${ie.svgRound(n[10])} ${ie.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[o,l,c,d,h,f]=n.subarray(r,r+6).map(ie.svgRound);t.push(`C${o} ${l} ${c} ${d} ${h} ${f}`)}}return t.join("")}serialize([t,n,r,i],o){const l=[],c=[],[d,h,f,m]=k(this,xs,t4).call(this);let p,x,v,b,g,y,j,_,S;switch(u(this,kf)){case 0:S=ie._rescale,p=t,x=n+i,v=r,b=-i,g=t+d*r,y=n+(1-h-m)*i,j=t+(d+f)*r,_=n+(1-h)*i;break;case 90:S=ie._rescaleAndSwap,p=t,x=n,v=r,b=i,g=t+h*r,y=n+d*i,j=t+(h+m)*r,_=n+(d+f)*i;break;case 180:S=ie._rescale,p=t+r,x=n,v=-r,b=i,g=t+(1-d-f)*r,y=n+h*i,j=t+(1-d)*r,_=n+(h+m)*i;break;case 270:S=ie._rescaleAndSwap,p=t+r,x=n+i,v=-r,b=-i,g=t+(1-h-m)*r,y=n+(1-d-f)*i,j=t+(1-h)*r,_=n+(1-d)*i;break}for(const{line:E,points:A}of u(this,$n))l.push(S(E,p,x,v,b,o?new Array(E.length):null)),c.push(S(A,p,x,v,b,o?new Array(A.length):null));return{lines:l,points:c,rect:[g,y,j,_]}}static deserialize(t,n,r,i,o,{paths:{lines:l,points:c},rotation:d,thickness:h}){const f=[];let m,p,x,v,b;switch(d){case 0:b=ie._rescale,m=-t/r,p=n/i+1,x=1/r,v=-1/i;break;case 90:b=ie._rescaleAndSwap,m=-n/i,p=-t/r,x=1/i,v=1/r;break;case 180:b=ie._rescale,m=t/r+1,p=-n/i,x=-1/r,v=1/i;break;case 270:b=ie._rescaleAndSwap,m=n/i+1,p=t/r+1,x=-1/i,v=-1/r;break}if(!l){l=[];for(const y of c){const j=y.length;if(j===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(j===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const _=new Float32Array(3*(j-2));l.push(_);let[S,E,A,P]=y.subarray(0,4);_.set([NaN,NaN,NaN,NaN,S,E],0);for(let T=4;T<j;T+=2){const I=y[T],O=y[T+1];_.set(ie.createBezierPoints(S,E,A,P,I,O),(T-2)*3),[S,E,A,P]=[A,P,I,O]}}}for(let y=0,j=l.length;y<j;y++)f.push({line:b(l[y].map(_=>_??NaN),m,p,x,v),points:b(c[y].map(_=>_??NaN),m,p,x,v)});const g=new this.prototype.constructor;return g.build(f,r,i,1,d,h,o),g}get box(){return u(this,Us)}updateProperty(t,n){return t==="stroke-width"?k(this,xs,n4).call(this,n):null}updateParentDimensions([t,n],r){const[i,o]=k(this,xs,ga).call(this);N(this,Li,t),N(this,Fi,n),N(this,Cf,r);const[l,c]=k(this,xs,ga).call(this),d=l-i,h=c-o,f=u(this,Us);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(t){return N(this,gv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Us).map(ie.svgRound).join(" ")}get defaultProperties(){const[t,n]=u(this,Us);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=u(this,Us);let r=0,i=0,o=0,l=0,c=0,d=0;switch(u(this,gv)){case 90:i=n/t,o=-t/n,c=t;break;case 180:r=-1,l=-1,c=t,d=n;break;case 270:i=-n/t,o=t/n,d=n;break;default:return""}return`matrix(${r} ${i} ${o} ${l} ${ie.svgRound(c)} ${ie.svgRound(d)})`}getPathResizingSVGProperties([t,n,r,i]){const[o,l]=k(this,xs,ga).call(this),[c,d,h,f]=u(this,Us);if(Math.abs(h-o)<=ie.PRECISION||Math.abs(f-l)<=ie.PRECISION){const b=t+r/2-(c+h/2),g=n+i/2-(d+f/2);return{path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`,transform:`${this.rotationTransform} translate(${b} ${g})`}}}const m=(r-2*o)/(h-2*o),p=(i-2*l)/(f-2*l),x=h/r,v=f/i;return{path:{"transform-origin":`${ie.svgRound(c)} ${ie.svgRound(d)}`,transform:`${this.rotationTransform} scale(${x} ${v}) translate(${ie.svgRound(o)} ${ie.svgRound(l)}) scale(${m} ${p}) translate(${ie.svgRound(-o)} ${ie.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[o,l]=k(this,xs,ga).call(this),c=u(this,Us),[d,h,f,m]=c;if(c[0]=t,c[1]=n,c[2]=r,c[3]=i,Math.abs(f-o)<=ie.PRECISION||Math.abs(m-l)<=ie.PRECISION){const g=t+r/2-(d+f/2),y=n+i/2-(h+m/2);for(const{line:j,points:_}of u(this,$n))ie._translate(j,g,y,j),ie._translate(_,g,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(r-2*o)/(f-2*o),x=(i-2*l)/(m-2*l),v=-p*(d+o)+t+o,b=-x*(h+l)+n+l;if(p!==1||x!==1||v!==0||b!==0)for(const{line:g,points:y}of u(this,$n))ie._rescale(g,v,b,p,x,g),ie._rescale(y,v,b,p,x,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,o]=r,l=u(this,Us),c=t-l[0],d=n-l[1];if(u(this,Li)===i&&u(this,Fi)===o)for(const{line:h,points:f}of u(this,$n))ie._translate(h,c,d,h),ie._translate(f,c,d,f);else{const h=u(this,Li)/i,f=u(this,Fi)/o;N(this,Li,i),N(this,Fi,o);for(const{line:m,points:p}of u(this,$n))ie._rescale(m,c,d,h,f,m),ie._rescale(p,c,d,h,f,p);l[2]*=h,l[3]*=f}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`}}}get defaultSVGProperties(){const t=u(this,Us);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t[0])} ${ie.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Us=new WeakMap,gv=new WeakMap,vv=new WeakMap,$n=new WeakMap,Li=new WeakMap,Fi=new WeakMap,Cf=new WeakMap,kf=new WeakMap,Od=new WeakMap,xs=new WeakSet,ga=function(t=u(this,Od)){const n=u(this,vv)+t/2*u(this,Cf);return u(this,kf)%180===0?[n/u(this,Li),n/u(this,Fi)]:[n/u(this,Fi),n/u(this,Li)]},t4=function(){const[t,n,r,i]=u(this,Us),[o,l]=k(this,xs,ga).call(this,0);return[t+o,n+l,r-2*o,i-2*l]},s4=function(){const t=N(this,Us,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,$n)){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)fe.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],l=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,m,p,x,v]=i.subarray(c,c+6);fe.bezierBoundingBox(o,l,h,f,m,p,x,v,t),o=x,l=v}}const[n,r]=k(this,xs,ga).call(this);t[0]=qs(t[0]-n,0,1),t[1]=qs(t[1]-r,0,1),t[2]=qs(t[2]+n,0,1),t[3]=qs(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},n4=function(t){const[n,r]=k(this,xs,ga).call(this);N(this,Od,t);const[i,o]=k(this,xs,ga).call(this),[l,c]=[i-n,o-r],d=u(this,Us);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d};class Wb extends ZL{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Wb(this._viewParameters);return e.updateAll(this),e}}var Gy,r4;const rh=class rh extends Sy{constructor(t){super({...t,name:"inkEditor"});C(this,Gy);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){lt.initialize(t,n),this._defaultDrawingOptions=new Wb(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return De(this,"typesMap",new Map([[Be.INK_THICKNESS,"stroke-width"],[Be.INK_COLOR,"stroke"],[Be.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,o){return new zG(t,n,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,o,l){return Hv.deserialize(t,n,r,i,o,l)}static async deserialize(t,n,r){let i=null;if(t instanceof gA){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:f,opacity:m,borderStyle:{rawWidth:p},popupRef:x,contentsObj:v},parent:{page:{pageNumber:b}}}=t;i=t={annotationType:be.INK,color:Array.from(f),thickness:p,opacity:m,paths:{points:l},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:x,comment:(v==null?void 0:v.str)||null}}const o=await super.deserialize(t,n,r);return o._initialData=i,t.comment&&o.setCommentData(t.comment),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new wy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Be.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=rh.getDefaultDrawingOptions({stroke:fe.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,d={annotationType:be.INK,color:lt._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!k(this,Gy,r4).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){const{points:n,rect:r}=this.serializeDraw(!1),i={rect:r,thickness:this._drawingOptions["stroke-width"],points:n};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}};Gy=new WeakSet,r4=function(t){const{color:n,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==n[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},G(rh,"_type","ink"),G(rh,"_editorType",be.INK),G(rh,"_defaultDrawingOptions",null);let tN=rh;class sN extends Hv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Rx=8,Em=3;var Ld,Qe,nN,qr,i4,a4,rN,_0,o4,l4,c4,iN,aN,d4;class to{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,o,l,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const f=200,m=h.font=`${n} ${r} ${f}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:x,actualBoundingBoxAscent:v,actualBoundingBoxDescent:b,fontBoundingBoxAscent:g,fontBoundingBoxDescent:y,width:j}=h.measureText(e),_=1.5,S=Math.ceil(Math.max(Math.abs(p)+Math.abs(x)||0,j)*_),E=Math.ceil(Math.max(Math.abs(v)+Math.abs(b)||f,Math.abs(g)+Math.abs(y)||f)*_);d=new OffscreenCanvas(S,E),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=m,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,S,E),h.fillStyle="black",h.fillText(e,S*(_-1)/2,E*(3-_)/2);const A=k(this,Qe,iN).call(this,h.getImageData(0,0,S,E).data),P=k(this,Qe,c4).call(this,A),T=k(this,Qe,aN).call(this,P),I=k(this,Qe,rN).call(this,A,S,E,T);return this.processDrawnLines({lines:{curves:I,width:S,height:E},pageWidth:i,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[o,l,c]=k(this,Qe,d4).call(this,e),[d,h]=k(this,Qe,l4).call(this,o,l,c,Math.hypot(l,c)*u(this,Ld).sigmaSFactor,u(this,Ld).sigmaR,u(this,Ld).kernelSize),f=k(this,Qe,aN).call(this,h),m=k(this,Qe,rN).call(this,d,l,c,f);return this.processDrawnLines({lines:{curves:m,width:l,height:c},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:o,areContours:l}){r%180!==0&&([t,n]=[n,t]);const{curves:c,width:d,height:h}=e,f=e.thickness??0,m=[],p=Math.min(t/d,n/h),x=p/t,v=p/n,b=[];for(const{points:y}of c){const j=o?k(this,Qe,o4).call(this,y):y;if(!j)continue;b.push(j);const _=j.length,S=new Float32Array(_),E=new Float32Array(3*(_===2?2:_-2));if(m.push({line:E,points:S}),_===2){S[0]=j[0]*x,S[1]=j[1]*v,E.set([NaN,NaN,NaN,NaN,S[0],S[1]],0);continue}let[A,P,T,I]=j;A*=x,P*=v,T*=x,I*=v,S.set([A,P,T,I],0),E.set([NaN,NaN,NaN,NaN,A,P],0);for(let O=4;O<_;O+=2){const L=S[O]=j[O]*x,z=S[O+1]=j[O+1]*v;E.set(ie.createBezierPoints(A,P,T,I,L,z),(O-2)*3),[A,P,T,I]=[T,I,L,z]}}if(m.length===0)return null;const g=l?new sN:new Hv;return g.build(m,t,n,1,r,l?0:f,i),{outline:g,newCurves:b,areContours:l,thickness:f,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let o=1/0,l=-1/0,c=0;for(const j of e){c+=j.length;for(let _=2,S=j.length;_<S;_++){const E=j[_]-j[_-2];o=Math.min(o,E),l=Math.max(l,E)}}let d;o>=-128&&l<=127?d=Int8Array:o>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,f=Rx+Em*h,m=new Uint32Array(f);let p=0;m[p++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,m[p++]=0,m[p++]=r,m[p++]=i,m[p++]=t?0:1,m[p++]=Math.max(0,Math.floor(n??0)),m[p++]=h,m[p++]=d.BYTES_PER_ELEMENT;for(const j of e)m[p++]=j.length-2,m[p++]=j[0],m[p++]=j[1];const x=new CompressionStream("deflate-raw"),v=x.writable.getWriter();await v.ready,v.write(m);const b=d.prototype.constructor;for(const j of e){const _=new b(j.length-2);for(let S=2,E=j.length;S<E;S++)_[S-2]=j[S]-j[S-2];v.write(_)}v.close();const g=await new Response(x.readable).arrayBuffer(),y=new Uint8Array(g);return uO(y)}static async decompressSignature(e){try{const t=cq(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,l=0;for await(const j of n)o||(o=new Uint8Array(new Uint32Array(j.buffer,0,4)[0])),o.set(j,l),l+=j.length;const c=new Uint32Array(o.buffer,0,o.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],f=c[3],m=c[4]===0,p=c[5],x=c[6],v=c[7],b=[],g=(Rx+Em*x)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(v){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(o.buffer,g);break}l=0;for(let j=0;j<x;j++){const _=c[Em*j+Rx],S=new Float32Array(_+2);b.push(S);for(let E=0;E<Em-1;E++)S[E]=c[Em*j+Rx+E+1];for(let E=0;E<_;E++)S[E+2]=S[E]+y[l++]}return{areContours:m,thickness:p,outlines:b,width:h,height:f}}catch(t){return we(`decompressSignature: ${t}`),null}}}Ld=new WeakMap,Qe=new WeakSet,nN=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},qr=new WeakMap,i4=function(e,t,n,r,i,o,l){const c=k(this,Qe,nN).call(this,n,r,i,o);for(let d=0;d<8;d++){const h=(-d+c-l+16)%8,f=u(this,qr)[2*h],m=u(this,qr)[2*h+1];if(e[(n+f)*t+(r+m)]!==0)return h}return-1},a4=function(e,t,n,r,i,o,l){const c=k(this,Qe,nN).call(this,n,r,i,o);for(let d=0;d<8;d++){const h=(d+c+l+16)%8,f=u(this,qr)[2*h],m=u(this,qr)[2*h+1];if(e[(n+f)*t+(r+m)]!==0)return h}return-1},rN=function(e,t,n,r){const i=e.length,o=new Int32Array(i);for(let h=0;h<i;h++)o[h]=e[h]<=r?1:0;for(let h=1;h<n-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*n-1-h]=0;let l=1,c;const d=[];for(let h=1;h<n-1;h++){c=1;for(let f=1;f<t-1;f++){const m=h*t+f,p=o[m];if(p===0)continue;let x=h,v=f;if(p===1&&o[m-1]===0)l+=1,v-=1;else if(p>=1&&o[m+1]===0)l+=1,v+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const b=[f,h],g=v===f+1,y={isHole:g,points:b,id:l,parent:0};d.push(y);let j;for(const O of d)if(O.id===c){j=O;break}j?j.isHole?y.parent=g?j.parent:c:y.parent=g?c:j.parent:y.parent=g?c:0;const _=k(this,Qe,i4).call(this,o,t,h,f,x,v,0);if(_===-1){o[m]=-l,o[m]!==1&&(c=Math.abs(o[m]));continue}let S=u(this,qr)[2*_],E=u(this,qr)[2*_+1];const A=h+S,P=f+E;x=A,v=P;let T=h,I=f;for(;;){const O=k(this,Qe,a4).call(this,o,t,T,I,x,v,1);S=u(this,qr)[2*O],E=u(this,qr)[2*O+1];const L=T+S,z=I+E;b.push(z,L);const M=T*t+I;if(o[M+1]===0?o[M]=-l:o[M]===1&&(o[M]=l),L===h&&z===f&&T===A&&I===P){o[m]!==1&&(c=Math.abs(o[m]));break}else x=T,v=I,T=L,I=z}}}return d},_0=function(e,t,n,r){if(n-t<=4){for(let A=t;A<n-2;A+=2)r.push(e[A],e[A+1]);return}const i=e[t],o=e[t+1],l=e[n-4]-i,c=e[n-3]-o,d=Math.hypot(l,c),h=l/d,f=c/d,m=h*o-f*i,p=c/l,x=1/d,v=Math.atan(p),b=Math.cos(v),g=Math.sin(v),y=x*(Math.abs(b)+Math.abs(g)),j=x*(1-y+y**2),_=Math.max(Math.atan(Math.abs(g+b)*j),Math.atan(Math.abs(g-b)*j));let S=0,E=t;for(let A=t+2;A<n-2;A+=2){const P=Math.abs(m-h*e[A+1]+f*e[A]);P>S&&(E=A,S=P)}S>(d*_)**2?(k(this,Qe,_0).call(this,e,t,E+2,r),k(this,Qe,_0).call(this,e,E,n,r)):r.push(i,o)},o4=function(e){const t=[],n=e.length;return k(this,Qe,_0).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},l4=function(e,t,n,r,i,o){const l=new Float32Array(o**2),c=-2*r**2,d=o>>1;for(let v=0;v<o;v++){const b=(v-d)**2;for(let g=0;g<o;g++)l[v*o+g]=Math.exp((b+(g-d)**2)/c)}const h=new Float32Array(256),f=-2*i**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/f);const m=e.length,p=new Uint8Array(m),x=new Uint32Array(256);for(let v=0;v<n;v++)for(let b=0;b<t;b++){const g=v*t+b,y=e[g];let j=0,_=0;for(let E=0;E<o;E++){const A=v+E-d;if(!(A<0||A>=n))for(let P=0;P<o;P++){const T=b+P-d;if(T<0||T>=t)continue;const I=e[A*t+T],O=l[E*o+P]*h[Math.abs(I-y)];j+=I*O,_+=O}}const S=p[g]=Math.round(j/_);x[S]++}return[p,x]},c4=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},iN=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let l=0,c=n.length;l<c;l++){const d=n[l]=e[l<<2];r=Math.max(r,d),i=Math.min(i,d)}const o=255/(r-i);for(let l=0,c=n.length;l<c;l++)n[l]=(n[l]-i)*o;return n},aN=function(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(c=>c!==0);let o=i,l=i;for(t=i;t<256;t++){const c=e[t];c>n&&(t-o>r&&(r=t-o,l=t-1),n=c,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},d4=function(e){const t=e,{width:n,height:r}=e,{maxDim:i}=u(this,Ld);let o=n,l=r;if(n>i||r>i){let m=n,p=r,x=Math.log2(Math.max(n,r)/i);const v=Math.floor(x);x=x===v?v-1:v;for(let g=0;g<x;g++){o=Math.ceil(m/2),l=Math.ceil(p/2);const y=new OffscreenCanvas(o,l);y.getContext("2d").drawImage(e,0,0,m,p,0,0,o,l),m=o,p=l,e!==t&&e.close(),e=y.transferToImageBitmap()}const b=Math.min(i/o,i/l);o=Math.round(o*b),l=Math.round(l*b)}const d=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,o,l);const h=d.getImageData(0,0,o,l).data;return[k(this,Qe,iN).call(this,h),o,l]},C(to,Qe),C(to,Ld,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),C(to,qr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class vA extends ZL{constructor(){super(),super.updateProperties({fill:lt._defaultLineColor,"stroke-width":0})}clone(){const e=new vA;return e.updateAll(this),e}}class xA extends Wb{constructor(e){super(e),super.updateProperties({stroke:lt._defaultLineColor,"stroke-width":1})}clone(){const e=new xA(this._viewParameters);return e.updateAll(this),e}}var Nl,$i,Sl,Fd;const An=class An extends Sy{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});C(this,Nl,!1);C(this,$i,null);C(this,Sl,null);C(this,Fd,null);this._willKeepAspectRatio=!0,N(this,Sl,t.signatureData||null),N(this,$i,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){lt.initialize(t,n),this._defaultDrawingOptions=new vA,this._defaultDrawnSignatureOptions=new xA(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return De(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,$i)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(u(this,Sl)){const{lines:i,mustSmooth:o,areContours:l,description:c,uuid:d,heightInPage:h}=u(this,Sl),{rawDims:{pageWidth:f,pageHeight:m},rotation:p}=this.parent.viewport,x=to.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:p,innerMargin:An._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(x,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,$i)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){N(this,Fd,t),this.addEditToolbar()}getUuid(){return u(this,Fd)}get description(){return u(this,$i)}set description(t){N(this,$i,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:i,height:o}=u(this,Sl),l=Math.max(i,o),c=to.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:r,width:i,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){const{x:o,y:l}=this,{outline:c}=N(this,Sl,t);N(this,Nl,c instanceof sN),this.description=r;let d;u(this,Nl)?d=An.getDefaultDrawingOptions():(d=An._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[h,f]=this.parentDimensions,[,m]=this.pageDimensions;let p=n/m;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(h*this.width,f*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return to.process(t,n,r,i,An._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return to.extractContoursFromText(t,n,r,i,o,An._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return to.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:An._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=An.getDefaultDrawingOptions():(this._drawingOptions=An._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:be.SIGNATURE,isSignature:!0,areContours:u(this,Nl),color:[0,0,0],thickness:u(this,Nl)?0:o,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:n,points:r},l.uuid=u(this,Fd),l.isCopy=!0):l.lines=n,u(this,$i)&&(l.accessibilityData={type:"Figure",alt:u(this,$i)}),l}static deserializeDraw(t,n,r,i,o,l){return l.areContours?sN.deserialize(t,n,r,i,o,l):Hv.deserialize(t,n,r,i,o,l)}static async deserialize(t,n,r){var o;const i=await super.deserialize(t,n,r);return N(i,Nl,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",N(i,Fd,t.uuid),i}};Nl=new WeakMap,$i=new WeakMap,Sl=new WeakMap,Fd=new WeakMap,G(An,"_type","signature"),G(An,"_editorType",be.SIGNATURE),G(An,"_defaultDrawingOptions",null);let oN=An;var gt,rs,Al,Xa,El,Pf,Qa,$d,zi,zn,Tf,Ve,Jm,Zm,N0,S0,A0,cN,E0,u4;class lN extends lt{constructor(t){super({...t,name:"stampEditor"});C(this,Ve);C(this,gt,null);C(this,rs,null);C(this,Al,null);C(this,Xa,null);C(this,El,null);C(this,Pf,"");C(this,Qa,null);C(this,$d,!1);C(this,zi,null);C(this,zn,!1);C(this,Tf,!1);N(this,Xa,t.bitmapUrl),N(this,El,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){lt.initialize(t,n)}static isHandlingMimeForPasting(t){return t_.includes(t)}static paste(t,n){n.pasteEditor({mode:be.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:o,height:l,channels:i.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;u(this,rs)&&(N(this,gt,null),this._uiManager.imageManager.deleteId(u(this,rs)),(t=u(this,Qa))==null||t.remove(),N(this,Qa,null),u(this,zi)&&(clearTimeout(u(this,zi)),N(this,zi,null))),super.remove()}rebuild(){if(!this.parent){u(this,rs)&&k(this,Ve,N0).call(this);return}super.rebuild(),this.div!==null&&(u(this,rs)&&u(this,Qa)===null&&k(this,Ve,N0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,Al)||u(this,gt)||u(this,Xa)||u(this,El)||u(this,rs)||u(this,$d))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,$d)||(u(this,gt)?k(this,Ve,S0).call(this):k(this,Ve,N0).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(N(this,rs,r),i&&N(this,gt,i),N(this,$d,!1),k(this,Ve,S0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,zi)!==null&&clearTimeout(u(this,zi)),N(this,zi,setTimeout(()=>{N(this,zi,null),k(this,Ve,cN).call(this)},200))}copyCanvas(t,n,r=!1){var p;t||(t=224);const{width:i,height:o}=u(this,gt),l=new ra;let c=u(this,gt),d=i,h=o,f=null;if(n){if(i>n||o>n){const P=Math.min(n/i,n/o);d=Math.floor(i*P),h=Math.floor(o*P)}f=document.createElement("canvas");const x=f.width=Math.ceil(d*l.sx),v=f.height=Math.ceil(h*l.sy);u(this,zn)||(c=k(this,Ve,A0).call(this,x,v));const b=f.getContext("2d");b.filter=this._uiManager.hcmFilter;let g="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",y="#42414d");const j=15,_=j*l.sx,S=j*l.sy,E=new OffscreenCanvas(_*2,S*2),A=E.getContext("2d");A.fillStyle=g,A.fillRect(0,0,_*2,S*2),A.fillStyle=y,A.fillRect(0,0,_,S),A.fillRect(_,S,_,S),b.fillStyle=b.createPattern(E,"repeat"),b.fillRect(0,0,x,v),b.drawImage(c,0,0,c.width,c.height,0,0,x,v)}let m=null;if(r){let x,v;if(l.symmetric&&c.width<t&&c.height<t)x=c.width,v=c.height;else if(c=u(this,gt),i>t||o>t){const y=Math.min(t/i,t/o);x=Math.floor(i*y),v=Math.floor(o*y),u(this,zn)||(c=k(this,Ve,A0).call(this,x,v))}const g=new OffscreenCanvas(x,v).getContext("2d",{willReadFrequently:!0});g.drawImage(c,0,0,c.width,c.height,0,0,x,v),m={width:x,height:v,data:g.getImageData(0,0,x,v).data}}return{canvas:f,width:d,height:h,imageData:m}}static async deserialize(t,n,r){var b;let i=null,o=!1;if(t instanceof EL){const{data:{rect:g,rotation:y,id:j,structParent:_,popupRef:S,contentsObj:E},container:A,parent:{page:{pageNumber:P}},canvas:T}=t;let I,O;T?(delete t.canvas,{id:I,bitmap:O}=r.imageManager.getFromCanvas(A.id,T),T.remove()):(o=!0,t._hasNoCanvas=!0);const L=((b=await n._structTree.getAriaAttributes(`${cA}${j}`))==null?void 0:b.get("aria-label"))||"";i=t={annotationType:be.STAMP,bitmapId:I,bitmap:O,pageIndex:P-1,rect:g.slice(0),rotation:y,annotationElementId:j,id:j,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:_,popupRef:S,comment:(E==null?void 0:E.str)||null}}const l=await super.deserialize(t,n,r),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:f,isSvg:m,accessibilityData:p}=t;o?(r.addMissingCanvas(t.id,l),N(l,$d,!0)):f&&r.imageManager.isValidId(f)?(N(l,rs,f),d&&N(l,gt,d)):N(l,Xa,h),N(l,zn,m);const[x,v]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/v,p&&(l.altTextData=p),l._initialData=i,t.comment&&l.setCommentData(t.comment),N(l,Tf,!!i),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:be.STAMP,bitmapId:u(this,rs),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,zn),structTreeParentId:this._structTreeParentId};if(this.addComment(r),t)return r.bitmapUrl=k(this,Ve,E0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=k(this,Ve,u4).call(this,r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const l=u(this,zn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(u(this,rs)))n.stamps.set(u(this,rs),{area:l,serialized:r}),r.bitmap=k(this,Ve,E0).call(this,!1);else if(u(this,zn)){const c=n.stamps.get(u(this,rs));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=k(this,Ve,E0).call(this,!1))}return r}renderAnnotationElement(t){const n={rect:this.getRect(0,0)};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}}gt=new WeakMap,rs=new WeakMap,Al=new WeakMap,Xa=new WeakMap,El=new WeakMap,Pf=new WeakMap,Qa=new WeakMap,$d=new WeakMap,zi=new WeakMap,zn=new WeakMap,Tf=new WeakMap,Ve=new WeakSet,Jm=function(t,n=!1){if(!t){this.remove();return}N(this,gt,t.bitmap),n||(N(this,rs,t.id),N(this,zn,t.isSvg)),t.file&&N(this,Pf,t.file.name),k(this,Ve,S0).call(this)},Zm=function(){if(N(this,Al,null),this._uiManager.enableWaiting(!1),!!u(this,Qa)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},N0=function(){if(u(this,rs)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,rs)).then(r=>k(this,Ve,Jm).call(this,r,!0)).finally(()=>k(this,Ve,Zm).call(this));return}if(u(this,Xa)){const r=u(this,Xa);N(this,Xa,null),this._uiManager.enableWaiting(!0),N(this,Al,this._uiManager.imageManager.getFromUrl(r).then(i=>k(this,Ve,Jm).call(this,i)).finally(()=>k(this,Ve,Zm).call(this)));return}if(u(this,El)){const r=u(this,El);N(this,El,null),this._uiManager.enableWaiting(!0),N(this,Al,this._uiManager.imageManager.getFromFile(r).then(i=>k(this,Ve,Jm).call(this,i)).finally(()=>k(this,Ve,Zm).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=t_.join(",");const n=this._uiManager._signal;N(this,Al,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Ve,Jm).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>k(this,Ve,Zm).call(this))),t.click()},S0=function(){var f;const{div:t}=this;let{width:n,height:r}=u(this,gt);const[i,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*i,r=this.height*o;else if(n>l*i||r>l*o){const m=Math.min(l*i/n,l*o/r);n*=m,r*=m}const[c,d]=this.parentDimensions;this.setDims(n*c/i,r*d/o),this._uiManager.enableWaiting(!1);const h=N(this,Qa,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/i,this.height=r/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Ve,cN).call(this),u(this,Tf)||(this.parent.addUndoableEditor(this),N(this,Tf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Pf)&&this.div.setAttribute("aria-description",u(this,Pf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},A0=function(t,n){const{width:r,height:i}=u(this,gt);let o=r,l=i,c=u(this,gt);for(;o>2*t||l>2*n;){const d=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(c,0,0,d,h,0,0,o,l),c=f.transferToImageBitmap()}return c},cN=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,o=new ra,l=Math.ceil(r*t*o.sx),c=Math.ceil(i*n*o.sy),d=u(this,Qa);if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=u(this,zn)?u(this,gt):k(this,Ve,A0).call(this,l,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)},E0=function(t){if(t){if(u(this,zn)){const i=this._uiManager.imageManager.getSvgUrl(u(this,rs));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,gt),n.getContext("2d").drawImage(u(this,gt),0,0),n.toDataURL()}if(u(this,zn)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*Zl.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Zl.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,o);return l.getContext("2d").drawImage(u(this,gt),0,0,u(this,gt).width,u(this,gt).height,0,0,i,o),l.transferToImageBitmap()}return structuredClone(u(this,gt))},u4=function(t){var l;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},G(lN,"_type","stamp"),G(lN,"_editorType",be.STAMP);var zd,Rf,Bi,Cl,Ja,Bn,kl,Mf,Bd,Gr,Za,is,eo,Pl,If,ue,Tl,vt,h4,gi,uN,hN,C0;const Mr=class Mr{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:l,textLayer:c,viewport:d,l10n:h}){C(this,vt);C(this,zd);C(this,Rf,!1);C(this,Bi,null);C(this,Cl,null);C(this,Ja,null);C(this,Bn,new Map);C(this,kl,!1);C(this,Mf,!1);C(this,Bd,!1);C(this,Gr,null);C(this,Za,null);C(this,is,null);C(this,eo,null);C(this,Pl,null);C(this,If,-1);C(this,ue);const f=[...u(Mr,Tl).values()];if(!Mr._initialized){Mr._initialized=!0;for(const m of f)m.initialize(h,e)}e.registerEditorTypes(f),N(this,ue,e),this.pageIndex=t,this.div=n,N(this,zd,i),N(this,Bi,o),this.viewport=d,N(this,is,c),this.drawLayer=l,this._structTree=r,u(this,ue).addLayer(this)}get isEmpty(){return u(this,Bn).size===0}get isInvisible(){return this.isEmpty&&u(this,ue).getMode()===be.NONE}updateToolbar(e){u(this,ue).updateToolbar(e)}updateMode(e=u(this,ue).getMode()){switch(k(this,vt,C0).call(this),e){case be.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case be.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case be.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of u(Mr,Tl).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,is))==null?void 0:t.div)}setEditingState(e){u(this,ue).setEditingState(e)}addCommands(e){u(this,ue).addCommands(e)}cleanUndoStack(e){u(this,ue).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Bi))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;N(this,Bd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(n=u(this,Pl))==null||n.abort(),N(this,Pl,null);const e=new Set;for(const r of u(this,Bn).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(u(this,ue).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!u(this,Bi)){N(this,Bd,!1);return}const t=u(this,Bi).getEditableAnnotations();for(const r of t){if(r.hide(),u(this,ue).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}N(this,Bd,!1)}disable(){var r;if(N(this,Mf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),u(this,is)&&!u(this,Pl)){N(this,Pl,new AbortController);const i=u(this,ue).combinedSignal(u(this,Pl));u(this,is).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:d,timeStamp:h}=o,f=u(this,If);if(h-f>500){N(this,If,h);return}N(this,If,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const p=document.elementsFromPoint(c,d);if(m.toggle("getElements",!1),!this.div.contains(p[0]))return;let x;const v=new RegExp(`^${aO}[0-9]+$`);for(const g of p)if(v.test(g.id)){x=g.id;break}if(!x)return;const b=u(this,Bn).get(x);(b==null?void 0:b.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),b.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of u(this,Bn).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(u(this,Bi)){const i=u(this,Bi).getEditableAnnotations();for(const o of i){const{id:l}=o.data;if(u(this,ue).isDeletedAnnotationElement(l)){o.updateEdited({deleted:!0});continue}let c=t.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(l),c&&(u(this,ue).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}k(this,vt,C0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of u(Mr,Tl).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),N(this,Mf,!1)}getEditableAnnotation(e){var t;return((t=u(this,Bi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ue).getActive()!==e&&u(this,ue).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,is))!=null&&e.div&&!u(this,eo)){N(this,eo,new AbortController);const t=u(this,ue).combinedSignal(u(this,eo));u(this,is).div.addEventListener("pointerdown",k(this,vt,h4).bind(this),{signal:t}),u(this,is).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,is))!=null&&e.div&&u(this,eo)&&(u(this,eo).abort(),N(this,eo,null),u(this,is).div.classList.remove("highlighting"))}enableClick(){if(u(this,Cl))return;N(this,Cl,new AbortController);const e=u(this,ue).combinedSignal(u(this,Cl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,Cl))==null||e.abort(),N(this,Cl,null)}attach(e){u(this,Bn).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ue).isDeletedAnnotationElement(t)&&u(this,ue).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Bn).delete(e.id),(t=u(this,zd))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,Mf)&&e.annotationElementId&&u(this,ue).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ue).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ue).addDeletedAnnotationElement(e.annotationElementId),lt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ue).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Bd)),u(this,ue).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Ja)&&(e._focusEventsAllowed=!1,N(this,Ja,setTimeout(()=>{N(this,Ja,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ue)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,zd))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return u(this,ue).getId()}combinedSignal(e){return u(this,ue).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,vt,gi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,ue).updateMode(e.mode);const{offsetX:n,offsetY:r}=k(this,vt,hN).call(this),i=this.getNextId(),o=k(this,vt,uN).call(this,{parent:this,id:i,x:n,y:r,uiManager:u(this,ue),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=u(Mr,Tl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ue)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=k(this,vt,uN).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,ue),isCentered:t,...n});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(k(this,vt,hN).call(this),!0,e)}setSelected(e){u(this,ue).setSelected(e)}toggleSelected(e){u(this,ue).toggleSelected(e)}unselect(e){u(this,ue).unselect(e)}pointerup(e){var r;const{isMac:t}=_s.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,kl)||(N(this,kl,!1),(r=u(this,vt,gi))!=null&&r.isDrawer&&u(this,vt,gi).supportMultipleDrawings))return;if(!u(this,Rf)){N(this,Rf,!0);return}const n=u(this,ue).getMode();if(n===be.STAMP||n===be.SIGNATURE){u(this,ue).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(u(this,ue).getMode()===be.HIGHLIGHT&&this.enableTextSelection(),u(this,kl)){N(this,kl,!1);return}const{isMac:t}=_s.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(N(this,kl,!0),(r=u(this,vt,gi))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=u(this,ue).getActive();N(this,Rf,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,Gr)){u(this,vt,gi).startDrawing(this,u(this,ue),!1,e);return}u(this,ue).setCurrentDrawingSession(this),N(this,Gr,new AbortController);const t=u(this,ue).combinedSignal(u(this,Gr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(N(this,Za,null),this.commitOrRemove())},{signal:t}),u(this,vt,gi).startDrawing(this,u(this,ue),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&N(this,Za,t);return}u(this,Za)&&setTimeout(()=>{var t;(t=u(this,Za))==null||t.focus(),N(this,Za,null)},0)}endDrawingSession(e=!1){return u(this,Gr)?(u(this,ue).setCurrentDrawingSession(null),u(this,Gr).abort(),N(this,Gr,null),N(this,Za,null),u(this,vt,gi).endDrawing(e)):null}findNewParent(e,t,n){const r=u(this,ue).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return u(this,Gr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Gr)&&u(this,vt,gi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,ue).getActive())==null?void 0:e.parent)===this&&(u(this,ue).commitOrRemove(),u(this,ue).setActiveEditor(null)),u(this,Ja)&&(clearTimeout(u(this,Ja)),N(this,Ja,null));for(const n of u(this,Bn).values())(t=u(this,zd))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,Bn).clear(),u(this,ue).removeLayer(this)}render({viewport:e}){this.viewport=e,ou(this.div,e);for(const t of u(this,ue).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ue).commitOrRemove(),k(this,vt,C0).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,ou(this.div,{rotation:n}),t!==n)for(const r of u(this,Bn).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ue).viewParameters.realScale}};zd=new WeakMap,Rf=new WeakMap,Bi=new WeakMap,Cl=new WeakMap,Ja=new WeakMap,Bn=new WeakMap,kl=new WeakMap,Mf=new WeakMap,Bd=new WeakMap,Gr=new WeakMap,Za=new WeakMap,is=new WeakMap,eo=new WeakMap,Pl=new WeakMap,If=new WeakMap,ue=new WeakMap,Tl=new WeakMap,vt=new WeakSet,h4=function(e){u(this,ue).unselectAll();const{target:t}=e;if(t===u(this,is).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,is).div.contains(t)){const{isMac:n}=_s.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,ue).showAllEditors("highlight",!0,!0),u(this,is).div.classList.add("free"),this.toggleDrawing(),Ny.startHighlighting(this,u(this,ue).direction==="ltr",{target:u(this,is).div,x:e.x,y:e.y}),u(this,is).div.addEventListener("pointerup",()=>{u(this,is).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,ue)._signal}),e.preventDefault()}},gi=function(){return u(Mr,Tl).get(u(this,ue).getMode())},uN=function(e){const t=u(this,vt,gi);return t?new t.prototype.constructor(e):null},hN=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+r),d=(i+l)/2-e,h=(o+c)/2-t,[f,m]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:f,offsetY:m}},C0=function(){for(const e of u(this,Bn).values())e.isEmpty()&&e.remove()},G(Mr,"_initialized",!1),C(Mr,Tl,new Map([V_,tN,lN,Ny,oN].map(e=>[e._editorType,e])));let dN=Mr;var Kr,Ws,Hd,xv,Ky,f4,aa,mN,m4,pN;const Vt=class Vt{constructor({pageIndex:e}){C(this,aa);C(this,Kr,null);C(this,Ws,new Map);C(this,Hd,new Map);this.pageIndex=e}setParent(e){if(!u(this,Kr)){N(this,Kr,e);return}if(u(this,Kr)!==e){if(u(this,Ws).size>0)for(const t of u(this,Ws).values())t.remove(),e.append(t);N(this,Kr,e)}}static get _svgFactory(){return De(this,"_svgFactory",new jy)}draw(e,t=!1,n=!1){const r=Jt(Vt,xv)._++,i=k(this,aa,mN).call(this),o=Vt._svgFactory.createElement("defs");i.append(o);const l=Vt._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Hd).set(r,l);const d=n?k(this,aa,m4).call(this,o,c):null,h=Vt._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(i,e),u(this,Ws).set(r,i),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=Jt(Vt,xv)._++,r=k(this,aa,mN).call(this),i=Vt._svgFactory.createElement("defs");r.append(i);const o=Vt._svgFactory.createElement("path");i.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const f=Vt._svgFactory.createElement("mask");i.append(f),c=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const m=Vt._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const p=Vt._svgFactory.createElement("use");f.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const d=Vt._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),u(this,Ws).set(n,r),n}finalizeDraw(e,t){u(this,Hd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:n,bbox:r,rootClass:i,path:o}=t,l=typeof e=="number"?u(this,Ws).get(e):e;if(l){if(n&&k(this,aa,pN).call(this,l,n),r&&k(c=Vt,Ky,f4).call(c,l,r),i){const{classList:d}=l;for(const[h,f]of Object.entries(i))d.toggle(h,f)}if(o){const h=l.firstChild.firstChild;k(this,aa,pN).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const n=u(this,Ws).get(e);n&&(u(t,Kr).append(n),u(this,Ws).delete(e),u(t,Ws).set(e,n))}remove(e){u(this,Hd).delete(e),u(this,Kr)!==null&&(u(this,Ws).get(e).remove(),u(this,Ws).delete(e))}destroy(){N(this,Kr,null);for(const e of u(this,Ws).values())e.remove();u(this,Ws).clear(),u(this,Hd).clear()}};Kr=new WeakMap,Ws=new WeakMap,Hd=new WeakMap,xv=new WeakMap,Ky=new WeakSet,f4=function(e,[t,n,r,i]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},aa=new WeakSet,mN=function(){const e=Vt._svgFactory.create(1,1,!0);return u(this,Kr).append(e),e.setAttribute("aria-hidden",!0),e},m4=function(e,t){const n=Vt._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=Vt._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},pN=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},C(Vt,Ky),C(Vt,xv,0);let fN=Vt;globalThis._pdfjsTestingUtils={HighlightOutliner:G_};globalThis.pdfjsLib={AbortException:Jl,AnnotationEditorLayer:dN,AnnotationEditorParamsType:Be,AnnotationEditorType:be,AnnotationEditorUIManager:lu,AnnotationLayer:H_,AnnotationMode:Fo,AnnotationType:Lt,build:xG,ColorPicker:by,createValidAbsoluteUrl:oO,DOMSVGFactory:jy,DrawLayer:fN,FeatureTest:_s,fetchData:Fv,getDocument:uL,getFilenameFromUrl:dq,getPdfFilenameFromUrl:uq,getRGB:Hb,getUuid:dO,getXfaPageViewport:fq,GlobalWorkerOptions:Wi,ImageKind:Jx,InvalidPDFException:Zj,isDataScheme:Bb,isPdfFile:uA,isValidExplicitDest:Nq,MathClamp:qs,noContextMenu:_r,normalizeUnicode:oq,OPS:py,OutputScale:ra,PasswordResponses:J9,PDFDataRangeTransport:hL,PDFDateString:vy,PDFWorker:zp,PermissionFlag:Q9,PixelsPerInch:Zl,RenderingCancelledException:dA,ResponseException:gy,setLayerDimensions:ou,shadow:De,SignatureExtractor:to,stopEvent:Ft,SupportedImageMimeTypes:t_,TextLayer:Fp,TouchManager:yy,updateUrlHash:lO,Util:fe,VerbosityLevel:Fb,version:vG,XfaLayer:gL};Wi.workerSrc="";const BG=()=>{const[s,e]=w.useState(!1),t=async o=>{try{const l=await o.arrayBuffer(),d=await uL(l).promise;let h="";for(let f=1;f<=d.numPages;f++){const x=(await(await d.getPage(f)).getTextContent()).items.map(v=>v.str??"").join(" ");h+=x+`
`}return h}catch(l){throw console.error("PDF extraction error:",l),new Error("Failed to extract text from PDF")}},n=o=>{const l=o.split(`
`).map(p=>p.trim()).filter(Boolean),c=[];let d="";const h=p=>/^(Basis|Modul)\s+.+$/i.test(p),f=p=>/^\d+$/.test(p);let m=0;for(;m<l.length;){const p=l[m];if(p.startsWith("Stand:")||/SIWF|Seite\s+\d+|Erfasste Prozeduren/i.test(p)){m++;continue}if(h(p)){d=p,m++;continue}if(d&&!f(p)){const x=p,v=[];let b=m+1;for(;b<l.length&&b<m+10;){const g=l[b];if(f(g)){v.push(parseInt(g)),b++;continue}if(h(g)||!f(g))break;b++}if(v.length>0){const g=v[0]||0,y=v[1]||0,j=v[2]||0,_=v[3]||0,S=v[4]||y+j+_;c.push({proc_name:x,module_name:d,minimum:g,responsible:y,instructing:j,assistant:_,total:S}),m=b;continue}}m++}return c},r=async o=>{const{data:{user:l}}=await Z.auth.getUser();if(!l)throw new Error("Not authenticated");const{data:c,error:d}=await Z.from("import_runs").insert({user_id:l.id,pdf_filename:o,source:"client_ai_parse",status:"running"}).select().single();if(d)throw d;return c};return{processFile:async o=>{e(!0);try{const l=await t(o),c=n(l),d=await r(o.name),h=c.map(f=>Z.from("import_procedure_staging").insert({run_id:d.id,proc_name:f.proc_name,module_name:f.module_name,minimum:f.minimum,responsible:f.responsible,instructing:f.instructing,assistant:f.assistant,total:f.total,status:"pending"}));return await Promise.all(h),{success:!0,runId:d.id,summary:{filename:o.name,totalProcedures:c.length,modules:[],matched:0,needsReview:c.length},stagingData:c}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Processing failed"}}finally{e(!1)}},isProcessing:s}},HG=({open:s,onOpenChange:e,onSuccess:t})=>{const[n,r]=w.useState(!1),[i,o]=w.useState(0),[l,c]=w.useState(null),[d,h]=w.useState(!1),[f,m]=w.useState(!1),{toast:p}=pS(),{processFile:x,isProcessing:v}=BG(),b=P=>{P.preventDefault(),P.stopPropagation(),P.type==="dragenter"||P.type==="dragover"?h(!0):P.type==="dragleave"&&h(!1)},g=P=>{P.preventDefault(),P.stopPropagation(),h(!1),P.dataTransfer.files&&P.dataTransfer.files[0]&&j(P.dataTransfer.files[0])},y=P=>{P.target.files&&P.target.files[0]&&j(P.target.files[0])},j=async P=>{if(P.type!=="application/pdf"){p({title:"Ungültiger Dateityp",description:"Bitte wählen Sie eine PDF-Datei aus.",variant:"destructive"});return}r(!0),o(0),c(null);try{const T=setInterval(()=>{o(O=>O<90?O+15:90)},200),I=await x(P);clearInterval(T),o(100),c(I),I.success&&I.summary?(m(!0),p({title:"PDF erfolgreich analysiert (AI)",description:`${I.summary.totalProcedures} Prozeduren erkannt.`})):p({title:"Fehler beim Verarbeiten",description:I.error||"Unbekannter Fehler",variant:"destructive"})}catch(T){p({title:"Verarbeitung fehlgeschlagen",description:T instanceof Error?T.message:"Unbekannter Fehler",variant:"destructive"})}finally{r(!1)}},_=()=>{o(0),c(null),r(!1),m(!1)},S=()=>{_(),e(!1)},E=()=>{m(!1),_()},A=()=>{t==null||t(),S()};return f&&(l!=null&&l.success)&&l.runId&&l.summary&&l.stagingData?a.jsx(X9,{runId:l.runId,summary:l.summary,stagingData:l.stagingData,onClose:E,onImportComplete:A}):a.jsx(ru,{open:s,onOpenChange:S,children:a.jsxs(Kl,{className:"sm:max-w-md",children:[a.jsx(Yl,{children:a.jsxs(Xl,{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-5 w-5"}),"FMH eLogbuch PDF Upload"]})}),a.jsxs("div",{className:"space-y-4",children:[!l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`
                  border-2 border-dashed rounded-lg p-8 text-center transition-colors
                  ${d?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}
                  ${n?"pointer-events-none opacity-50":"cursor-pointer"}
                `,onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:g,onClick:()=>{var P;n||(P=document.getElementById("pdf-upload"))==null||P.click()},children:[a.jsx(mb,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-sm font-medium mb-2",children:"PDF hier ablegen oder klicken zum Auswählen"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützt: FMH eLogbuch PDF-Exporte"}),a.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",className:"hidden",onChange:y,disabled:n})]}),n&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"PDF wird verarbeitet..."}),a.jsxs("span",{children:[i,"%"]})]}),a.jsx(na,{value:i,className:"w-full"})]})]}),l&&!l.success&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive border border-destructive/20",children:[a.jsx(D$,{className:"h-5 w-5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:"Fehler beim Verarbeiten"}),a.jsx("p",{className:"mt-1 text-sm",children:l.error})]})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(q,{variant:"outline",onClick:_,children:"Erneut versuchen"}),a.jsx(q,{onClick:S,children:"Schließen"})]})]})]})]})})};function UG(s,e){return w.useReducer((t,n)=>e[t][n]??t,s)}var yA="ScrollArea",[p4,oJ]=ui(yA),[WG,Sr]=p4(yA),g4=w.forwardRef((s,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:r,scrollHideDelay:i=600,...o}=s,[l,c]=w.useState(null),[d,h]=w.useState(null),[f,m]=w.useState(null),[p,x]=w.useState(null),[v,b]=w.useState(null),[g,y]=w.useState(0),[j,_]=w.useState(0),[S,E]=w.useState(!1),[A,P]=w.useState(!1),T=Ke(e,O=>c(O)),I=_b(r);return a.jsx(WG,{scope:t,type:n,dir:I,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:v,onScrollbarYChange:b,scrollbarYEnabled:A,onScrollbarYEnabledChange:P,onCornerWidthChange:y,onCornerHeightChange:_,children:a.jsx(de.div,{dir:I,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":g+"px","--radix-scroll-area-corner-height":j+"px",...s.style}})})});g4.displayName=yA;var v4="ScrollAreaViewport",x4=w.forwardRef((s,e)=>{const{__scopeScrollArea:t,children:n,nonce:r,...i}=s,o=Sr(v4,t),l=w.useRef(null),c=Ke(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(de.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...s.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});x4.displayName=v4;var ca="ScrollAreaScrollbar",bA=w.forwardRef((s,e)=>{const{forceMount:t,...n}=s,r=Sr(ca,s.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=r,l=s.orientation==="horizontal";return w.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),r.type==="hover"?a.jsx(VG,{...n,ref:e,forceMount:t}):r.type==="scroll"?a.jsx(qG,{...n,ref:e,forceMount:t}):r.type==="auto"?a.jsx(y4,{...n,ref:e,forceMount:t}):r.type==="always"?a.jsx(wA,{...n,ref:e}):null});bA.displayName=ca;var VG=w.forwardRef((s,e)=>{const{forceMount:t,...n}=s,r=Sr(ca,s.__scopeScrollArea),[i,o]=w.useState(!1);return w.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[r.scrollArea,r.scrollHideDelay]),a.jsx(Nr,{present:t||i,children:a.jsx(y4,{"data-state":i?"visible":"hidden",...n,ref:e})})}),qG=w.forwardRef((s,e)=>{const{forceMount:t,...n}=s,r=Sr(ca,s.__scopeScrollArea),i=s.orientation==="horizontal",o=qb(()=>c("SCROLL_END"),100),[l,c]=UG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,r.scrollHideDelay,c]),w.useEffect(()=>{const d=r.viewport,h=i?"scrollLeft":"scrollTop";if(d){let f=d[h];const m=()=>{const p=d[h];f!==p&&(c("SCROLL"),o()),f=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[r.viewport,i,c,o]),a.jsx(Nr,{present:t||l!=="hidden",children:a.jsx(wA,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:me(s.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(s.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),y4=w.forwardRef((s,e)=>{const t=Sr(ca,s.__scopeScrollArea),{forceMount:n,...r}=s,[i,o]=w.useState(!1),l=s.orientation==="horizontal",c=qb(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;o(l?d:h)}},10);return Qf(t.viewport,c),Qf(t.content,c),a.jsx(Nr,{present:n||i,children:a.jsx(wA,{"data-state":i?"visible":"hidden",...r,ref:e})})}),wA=w.forwardRef((s,e)=>{const{orientation:t="vertical",...n}=s,r=Sr(ca,s.__scopeScrollArea),i=w.useRef(null),o=w.useRef(0),[l,c]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=N4(l.viewport,l.content),h={...n,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,p){return JG(m,o.current,l,p)}return t==="horizontal"?a.jsx(GG,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,p=Vk(m,l,r.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):t==="vertical"?a.jsx(KG,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,p=Vk(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),GG=w.forwardRef((s,e)=>{const{sizes:t,onSizesChange:n,...r}=s,i=Sr(ca,s.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),d=Ke(e,c,i.onScrollbarXChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(w4,{"data-orientation":"horizontal",...r,ref:d,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Vb(t)+"px",...s.style},onThumbPointerDown:h=>s.onThumbPointerDown(h.x),onDragScroll:h=>s.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;s.onWheelScroll(m),A4(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Ey(o.paddingLeft),paddingEnd:Ey(o.paddingRight)}})}})}),KG=w.forwardRef((s,e)=>{const{sizes:t,onSizesChange:n,...r}=s,i=Sr(ca,s.__scopeScrollArea),[o,l]=w.useState(),c=w.useRef(null),d=Ke(e,c,i.onScrollbarYChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(w4,{"data-orientation":"vertical",...r,ref:d,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Vb(t)+"px",...s.style},onThumbPointerDown:h=>s.onThumbPointerDown(h.y),onDragScroll:h=>s.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;s.onWheelScroll(m),A4(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Ey(o.paddingTop),paddingEnd:Ey(o.paddingBottom)}})}})}),[YG,b4]=p4(ca),w4=w.forwardRef((s,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...m}=s,p=Sr(ca,t),[x,v]=w.useState(null),b=Ke(e,T=>v(T)),g=w.useRef(null),y=w.useRef(""),j=p.viewport,_=n.content-n.viewport,S=zt(h),E=zt(c),A=qb(f,10);function P(T){if(g.current){const I=T.clientX-g.current.left,O=T.clientY-g.current.top;d({x:I,y:O})}}return w.useEffect(()=>{const T=I=>{const O=I.target;(x==null?void 0:x.contains(O))&&S(I,_)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[j,x,_,S]),w.useEffect(E,[n,E]),Qf(x,A),Qf(p.content,A),a.jsx(YG,{scope:t,scrollbar:x,hasThumb:r,onThumbChange:zt(i),onThumbPointerUp:zt(o),onThumbPositionChange:E,onThumbPointerDown:zt(l),children:a.jsx(de.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:me(s.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),g.current=x.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(T))}),onPointerMove:me(s.onPointerMove,P),onPointerUp:me(s.onPointerUp,T=>{const I=T.target;I.hasPointerCapture(T.pointerId)&&I.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),g.current=null})})})}),Ay="ScrollAreaThumb",j4=w.forwardRef((s,e)=>{const{forceMount:t,...n}=s,r=b4(Ay,s.__scopeScrollArea);return a.jsx(Nr,{present:t||r.hasThumb,children:a.jsx(XG,{ref:e,...n})})}),XG=w.forwardRef((s,e)=>{const{__scopeScrollArea:t,style:n,...r}=s,i=Sr(Ay,t),o=b4(Ay,t),{onThumbPositionChange:l}=o,c=Ke(e,f=>o.onThumbChange(f)),d=w.useRef(void 0),h=qb(()=>{d.current&&(d.current(),d.current=void 0)},100);return w.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!d.current){const p=ZG(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,l]),a.jsx(de.div,{"data-state":o.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:me(s.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),x=f.clientX-p.left,v=f.clientY-p.top;o.onThumbPointerDown({x,y:v})}),onPointerUp:me(s.onPointerUp,o.onThumbPointerUp)})});j4.displayName=Ay;var jA="ScrollAreaCorner",_4=w.forwardRef((s,e)=>{const t=Sr(jA,s.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?a.jsx(QG,{...s,ref:e}):null});_4.displayName=jA;var QG=w.forwardRef((s,e)=>{const{__scopeScrollArea:t,...n}=s,r=Sr(jA,t),[i,o]=w.useState(0),[l,c]=w.useState(0),d=!!(i&&l);return Qf(r.scrollbarX,()=>{var f;const h=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(h),c(h)}),Qf(r.scrollbarY,()=>{var f;const h=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(h),o(h)}),d?a.jsx(de.div,{...n,ref:e,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function Ey(s){return s?parseInt(s,10):0}function N4(s,e){const t=s/e;return isNaN(t)?0:t}function Vb(s){const e=N4(s.viewport,s.content),t=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,n=(s.scrollbar.size-t)*e;return Math.max(n,18)}function JG(s,e,t,n="ltr"){const r=Vb(t),i=r/2,o=e||i,l=r-o,c=t.scrollbar.paddingStart+o,d=t.scrollbar.size-t.scrollbar.paddingEnd-l,h=t.content-t.viewport,f=n==="ltr"?[0,h]:[h*-1,0];return S4([c,d],f)(s)}function Vk(s,e,t="ltr"){const n=Vb(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-r,o=e.content-e.viewport,l=i-n,c=t==="ltr"?[0,o]:[o*-1,0],d=Fj(s,c);return S4([0,o],[0,l])(d)}function S4(s,e){return t=>{if(s[0]===s[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(s[1]-s[0]);return e[0]+n*(t-s[0])}}function A4(s,e){return s>0&&s<e}var ZG=(s,e=()=>{})=>{let t={left:s.scrollLeft,top:s.scrollTop},n=0;return function r(){const i={left:s.scrollLeft,top:s.scrollTop},o=t.left!==i.left,l=t.top!==i.top;(o||l)&&e(),t=i,n=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(n)};function qb(s,e){const t=zt(s),n=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),w.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function Qf(s,e){const t=zt(e);It(()=>{let n=0;if(s){const r=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return r.observe(s),()=>{window.cancelAnimationFrame(n),r.unobserve(s)}}},[s,t])}var E4=g4,eK=x4,tK=_4;const _A=w.forwardRef(({className:s,children:e,...t},n)=>a.jsxs(E4,{ref:n,className:ne("relative overflow-hidden",s),...t,children:[a.jsx(eK,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(C4,{}),a.jsx(tK,{})]}));_A.displayName=E4.displayName;const C4=w.forwardRef(({className:s,orientation:e="vertical",...t},n)=>a.jsx(bA,{ref:n,orientation:e,className:ne("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...t,children:a.jsx(j4,{className:"relative flex-1 rounded-full bg-border"})}));C4.displayName=bA.displayName;const sK=({open:s,onOpenChange:e,onSuccess:t})=>{const{user:n}=oa(),[r,i]=w.useState({}),[o,l]=w.useState({});w.useState(new Date().toLocaleDateString("de-CH"));const[c,d]=w.useState({name:"Sami Zacharia Hosari",id:"175214",institution:"USZ"}),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[x,v]=w.useState([]),[b,g]=w.useState(5),y=w.useCallback(async()=>{p(!0);try{if(n){const{data:O}=await Z.from("profiles").select("pgy_level").eq("user_id",n.id).single();O!=null&&O.pgy_level&&g(O.pgy_level)}const{data:E,error:A}=await Z.from("procedure_categories").select("*").in("key",["basis_notfallchirurgie","basis_allgemeinchirurgie","viszeralchirurgie","traumatologie","kombination"]).order("sort_index"),{data:P,error:T}=await Z.from("procedures").select("*").eq("active",!0).order("code");if(T){console.error("Error loading procedures:",T),ye.error("Fehler beim Laden der Prozeduren");return}v(P||[]);const I={};E==null||E.forEach(O=>{const L=(P==null?void 0:P.filter(z=>z.category_id===O.id))||[];I[O.key]={id:O.id,key:O.key,title:O.title_de,totalMinimum:O.minimum_required||0,totalCount:0,procedures:L.map(z=>{var M;return{id:z.id,name:z.title_de,minimum:((M=z.min_required_by_pgy)==null?void 0:M[`pgy${b}`])||0,verantwortlich:0,instruierend:0,assistent:0,total:0}})}}),i(I),l(I),n&&await j(I)}catch(E){console.error("Error loading modules and procedures:",E),ye.error("Fehler beim Laden der Daten")}finally{p(!1)}},[n,b,j]);w.useEffect(()=>{s&&y()},[s,y]),w.useEffect(()=>{if(s)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[s]),w.useEffect(()=>{if(n){const{user_metadata:E}=n;E!=null&&E.full_name&&d(A=>({...A,name:E.full_name,institution:E.institution||"USZ"}))}},[n]);const j=w.useCallback(async E=>{if(n)try{console.log("🔍 FMHManualEntry - Loading data for user ID:",n.id);const{data:A,error:P}=await Z.from("procedure_logs").select(`
          id,
          procedure_id,
          role_in_surgery,
          performed_date
        `).eq("user_id",n.id).gte("performed_date",new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0]);if(P){console.error("Error loading existing data:",P);return}console.log("📊 FMHManualEntry - Loaded",(A==null?void 0:A.length)||0,"procedure logs for user",n.id);const T={};A==null||A.forEach(L=>{T[L.procedure_id]||(T[L.procedure_id]={verantwortlich:0,instruierend:0,assistent:0}),L.role_in_surgery==="primary"||L.role_in_surgery==="responsible"?T[L.procedure_id].verantwortlich++:L.role_in_surgery==="instructing"?T[L.procedure_id].instruierend++:(L.role_in_surgery==="assistant"||L.role_in_surgery==="assist")&&T[L.procedure_id].assistent++});const I={...E},O={...E};Object.keys(I).forEach(L=>{I[L].procedures.forEach((z,M)=>{const U=T[z.id];if(U){const $={...z,verantwortlich:U.verantwortlich,instruierend:U.instruierend,assistent:U.assistent,total:U.verantwortlich+U.instruierend+U.assistent};I[L].procedures[M]=$,O[L].procedures[M]={...$},console.log(`✅ Loaded counts for "${z.name}" - V:${U.verantwortlich} I:${U.instruierend} A:${U.assistent}`)}}),I[L].totalCount=I[L].procedures.reduce((z,M)=>z+M.total,0),O[L].totalCount=O[L].procedures.reduce((z,M)=>z+M.total,0)}),l(I),i(O),console.log("✅ Form initialized with existing data")}catch(A){console.error("Error loading existing procedure data:",A)}},[n]),_=(E,A,P,T)=>{i(I=>{const O={...I},L={...O[E].procedures[A]};return L[P]=Math.max(0,T),L.total=L.verantwortlich+L.instruierend+L.assistent,O[E]={...O[E],procedures:[...O[E].procedures.slice(0,A),L,...O[E].procedures.slice(A+1)]},O[E].totalCount=O[E].procedures.reduce((z,M)=>z+M.total,0),O})},S=async()=>{if(!n){ye.error("Sie müssen angemeldet sein um Daten zu speichern");return}f(!0),console.log("🚀 Starting procedure save process..."),console.log("💾 FMHManualEntry - Saving data for user ID:",n.id);try{const E=[],A=[],P=[],T=[];for(const[O,L]of Object.entries(r)){console.log(`📋 Processing module: ${L.title}`);for(let z=0;z<L.procedures.length;z++){const M=L.procedures[z],U=o[O].procedures[z],$=M.verantwortlich-U.verantwortlich,F=M.instruierend-U.instruierend,D=M.assistent-U.assistent;if($===0&&F===0&&D===0)continue;console.log(`📝 Processing procedure: "${M.name}" (Changes: V:${$} I:${F} A:${D})`);const R=M.id;if(!R){console.warn(`❌ No procedure ID for: ${M.name}`),P.push(M.name);continue}if(T.push(M.name),$>0)for(let H=0;H<$;H++)E.push({user_id:n.id,procedure_id:R,role_in_surgery:"primary",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${L.title}`});if(F>0)for(let H=0;H<F;H++)E.push({user_id:n.id,procedure_id:R,role_in_surgery:"instructing",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${L.title}`});if(D>0)for(let H=0;H<D;H++)E.push({user_id:n.id,procedure_id:R,role_in_surgery:"assistant",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${L.title}`});if($<0){const{data:H}=await Z.from("procedure_logs").select("id").eq("user_id",n.id).eq("procedure_id",R).in("role_in_surgery",["primary","responsible"]).order("created_at",{ascending:!1}).limit(Math.abs($));H&&A.push(...H.map(X=>X.id))}if(F<0){const{data:H}=await Z.from("procedure_logs").select("id").eq("user_id",n.id).eq("procedure_id",R).eq("role_in_surgery","instructing").order("created_at",{ascending:!1}).limit(Math.abs(F));H&&A.push(...H.map(X=>X.id))}if(D<0){const{data:H}=await Z.from("procedure_logs").select("id").eq("user_id",n.id).eq("procedure_id",R).eq("role_in_surgery","assistant").order("created_at",{ascending:!1}).limit(Math.abs(D));H&&A.push(...H.map(X=>X.id))}}}console.log(`📊 Summary: ${E.length} logs to insert, ${A.length} logs to delete`),console.log(`✅ Successful procedures: ${T.length}`,T),P.length>0&&console.log(`❌ Failed procedures: ${P.length}`,P);let I=0;if(E.length>0){console.log("💾 Inserting procedure logs into database...");const{error:O}=await Z.from("procedure_logs").insert(E);if(O)throw console.error("❌ Database insertion error:",O),O;I+=E.length,console.log(`✅ Successfully inserted ${E.length} procedure logs`)}if(A.length>0){console.log("🗑️ Deleting procedure logs from database...");const{error:O}=await Z.from("procedure_logs").delete().in("id",A);if(O)throw console.error("❌ Database deletion error:",O),O;I+=A.length,console.log(`✅ Successfully deleted ${A.length} procedure logs`)}if(I>0){let O=`${I} Änderungen erfolgreich gespeichert`;P.length>0&&(O+=`. ${P.length} Prozeduren konnten nicht verarbeitet werden.`),ye.success(O),l({...r}),console.log("🔄 Refreshing FMH progress..."),t==null||t(),e(!1)}else console.log("⚠️ No changes to save"),ye.warning("Keine Änderungen zum Speichern gefunden")}catch(E){console.error("❌ Error saving procedures:",E);const A=(E==null?void 0:E.message)||(E==null?void 0:E.toString())||"Unbekannter Fehler";ye.error(`Fehler beim Speichern der Prozeduren: ${A}`)}finally{f(!1),console.log("🏁 Save process completed")}};return s?a.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ls,{className:"h-6 w-6 text-blue-600"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"FMH Operationsstatistik"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Manuelle Eingabe der Operationen"})]})]}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>e(!1),className:"h-8 w-8 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:a.jsx(go,{className:"h-4 w-4"})})]}),m?a.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hj,{className:"h-5 w-5 animate-spin text-blue-600"}),a.jsx("span",{className:"text-gray-700",children:"Module und Prozeduren werden geladen..."})]})}):Object.keys(r).length===0?a.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:a.jsx("p",{className:"text-gray-600",children:"Keine Module gefunden"})}):a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[a.jsx("div",{className:"flex-1 flex flex-col p-6 overflow-hidden bg-white",children:a.jsxs(Jn,{defaultValue:Object.keys(r)[0],className:"flex-1 flex flex-col",children:[a.jsx(Nn,{className:"flex w-full mb-6 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:Object.entries(r).map(([E,A])=>a.jsx(ze,{value:E,className:"flex-shrink-0 whitespace-nowrap px-4 py-2 data-[state=active]:bg-white data-[state=active]:text-gray-900 text-gray-600 hover:text-gray-900 text-sm",children:A.title},E))}),Object.entries(r).map(([E,A])=>a.jsx(He,{value:E,className:"flex-1 flex flex-col mt-0 overflow-hidden",children:a.jsxs(K,{className:"flex-1 flex flex-col bg-white border border-gray-200 shadow-sm overflow-hidden",children:[a.jsx(Se,{className:"flex-shrink-0 bg-gray-50 border-b border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[a.jsx(Pe,{className:"text-lg text-gray-900",children:A.title}),a.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[a.jsxs(Y,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",children:["Minimum: ",A.totalMinimum]}),a.jsxs(Y,{variant:A.totalCount>=A.totalMinimum?"default":"outline",className:"bg-green-100 text-green-800 border-green-200",children:["Total: ",A.totalCount]})]})]})}),a.jsx(he,{className:"flex-1 p-0 bg-white overflow-hidden",children:a.jsx(_A,{className:"h-[400px]",children:a.jsxs("table",{className:"w-full min-w-[800px]",children:[a.jsx("thead",{className:"sticky top-0 border-b border-gray-200 bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-left p-3 font-medium text-gray-700 min-w-[250px]",children:"Prozedur"}),a.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Min"}),a.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Verantwortlich"}),a.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Instruierend"}),a.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Assistent"}),a.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Total"})]})}),a.jsx("tbody",{className:"bg-white",children:A.procedures.map((P,T)=>{var I,O;return a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsxs("td",{className:"p-3",children:[a.jsx("div",{className:"font-medium text-gray-900 text-sm",children:P.name}),((O=(I=o[E])==null?void 0:I.procedures[T])==null?void 0:O.total)>0&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Gespeichert: V:",o[E].procedures[T].verantwortlich," I:",o[E].procedures[T].instruierend," A:",o[E].procedures[T].assistent]})]}),a.jsx("td",{className:"text-center p-3",children:a.jsx(Y,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:P.minimum})}),a.jsx("td",{className:"text-center p-3",children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>_(E,T,"verantwortlich",P.verantwortlich-1),children:a.jsx(uh,{className:"w-3 h-3"})}),a.jsx(Te,{type:"number",min:"0",value:P.verantwortlich,onChange:L=>_(E,T,"verantwortlich",parseInt(L.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>_(E,T,"verantwortlich",P.verantwortlich+1),children:a.jsx(ri,{className:"w-3 h-3"})})]})}),a.jsx("td",{className:"text-center p-3",children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>_(E,T,"instruierend",P.instruierend-1),children:a.jsx(uh,{className:"w-3 h-3"})}),a.jsx(Te,{type:"number",min:"0",value:P.instruierend,onChange:L=>_(E,T,"instruierend",parseInt(L.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>_(E,T,"instruierend",P.instruierend+1),children:a.jsx(ri,{className:"w-3 h-3"})})]})}),a.jsx("td",{className:"text-center p-3",children:a.jsxs("div",{className:"flex items-center justify-center gap-1",children:[a.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>_(E,T,"assistent",P.assistent-1),children:a.jsx(uh,{className:"w-3 h-3"})}),a.jsx(Te,{type:"number",min:"0",value:P.assistent,onChange:L=>_(E,T,"assistent",parseInt(L.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),a.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>_(E,T,"assistent",P.assistent+1),children:a.jsx(ri,{className:"w-3 h-3"})})]})}),a.jsx("td",{className:"text-center p-3",children:a.jsx(Y,{variant:P.total>=P.minimum?"default":"secondary",className:"font-medium text-xs bg-green-100 text-green-800 border-green-200",children:P.total})})]},P.id)})})]})})})]})},E))]})}),a.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4 bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Gesamtanzahl Eingriffe: ",Object.values(r).reduce((E,A)=>E+A.totalCount,0)]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(q,{variant:"outline",onClick:()=>e(!1),disabled:h,className:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400",children:"Abbrechen"}),a.jsxs(q,{onClick:S,disabled:h||Object.values(r).every(E=>E.totalCount===0),className:"gap-2 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400",children:[a.jsx(fb,{className:"w-4 h-4"}),h?"Speichere...":"Prozeduren speichern"]})]})]})})]})]})}):null},nK=({open:s,onOpenChange:e,onSuccess:t})=>{const{user:n}=oa(),[r,i]=w.useState([]),[o,l]=w.useState(!1),[c,d]=w.useState(null),[h,f]=w.useState({}),m=w.useCallback(async()=>{if(n){l(!0);try{const{data:_,error:S}=await Z.from("procedure_logs").select(`
          id,
          performed_date,
          procedure_id,
          role_in_surgery,
          weighted_score,
          notes,
          hospital,
          supervisor,
          procedures (
            title_de,
            category_id,
            procedure_categories (
              key,
              title_de
            )
          )
        `).eq("user_id",n.id).order("performed_date",{ascending:!1});if(S)throw S;const E=(_||[]).map(A=>{var P,T,I,O,L;return{id:A.id,performed_date:A.performed_date,procedure_id:A.procedure_id,procedure_title:((P=A.procedures)==null?void 0:P.title_de)||"Unknown Procedure",category_key:((I=(T=A.procedures)==null?void 0:T.procedure_categories)==null?void 0:I.key)||"unknown",category_title:((L=(O=A.procedures)==null?void 0:O.procedure_categories)==null?void 0:L.title_de)||"Unknown Category",role_in_surgery:A.role_in_surgery||"primary",weighted_score:A.weighted_score||1,notes:A.notes,hospital:A.hospital,supervisor:A.supervisor}});i(E)}catch(_){console.error("Error loading procedure logs:",_),ye.error("Fehler beim Laden der Prozedur-Logs")}finally{l(!1)}}},[n]);w.useEffect(()=>{s&&n&&m()},[s,n,m]);const p=_=>{d(_.id),f({performed_date:_.performed_date,role_in_surgery:_.role_in_surgery,notes:_.notes,hospital:_.hospital,supervisor:_.supervisor})},x=async _=>{try{const{error:S}=await Z.from("procedure_logs").update({performed_date:h.performed_date,role_in_surgery:h.role_in_surgery,notes:h.notes,hospital:h.hospital,supervisor:h.supervisor}).eq("id",_);if(S)throw S;d(null),f({}),await m(),ye.success("Eintrag erfolgreich aktualisiert")}catch(S){console.error("Error updating log:",S),ye.error("Fehler beim Aktualisieren des Eintrags")}},v=async _=>{if(confirm("Sind Sie sicher, dass Sie diesen Eintrag löschen möchten?"))try{const{error:S}=await Z.from("procedure_logs").delete().eq("id",_);if(S)throw S;await m(),ye.success("Eintrag erfolgreich gelöscht"),t&&t()}catch(S){console.error("Error deleting log:",S),ye.error("Fehler beim Löschen des Eintrags")}},b=()=>{d(null),f({})},g=r.reduce((_,S)=>{const E=S.category_title;return _[E]||(_[E]=[]),_[E].push(S),_},{}),y=_=>({responsible:"Verantwortlich",instructing:"Instruierend",assistant:"Assistent"})[_]||_,j=_=>({responsible:"default",instructing:"secondary",assistant:"outline"})[_]||"outline";return a.jsx(ru,{open:s,onOpenChange:e,children:a.jsxs(Kl,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx(Yl,{children:a.jsx(Xl,{children:"Prozedur-Korrekturen"})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:o?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.jsxs(Jn,{defaultValue:Object.keys(g)[0],className:"h-full flex flex-col",children:[a.jsx(Nn,{className:"grid w-full grid-cols-5",children:Object.keys(g).map(_=>a.jsxs(ze,{value:_,className:"text-xs",children:[_.replace("Basis ","").replace("Modul ",""),a.jsx(Y,{variant:"secondary",className:"ml-1",children:g[_].length})]},_))}),Object.entries(g).map(([_,S])=>a.jsx(He,{value:_,className:"flex-1 overflow-hidden",children:a.jsx("div",{className:"overflow-auto h-full",children:a.jsxs(Gf,{children:[a.jsx(Kf,{children:a.jsxs(ei,{children:[a.jsx(Fe,{children:"Datum"}),a.jsx(Fe,{children:"Prozedur"}),a.jsx(Fe,{children:"Rolle"}),a.jsx(Fe,{children:"Score"}),a.jsx(Fe,{children:"Spital"}),a.jsx(Fe,{children:"Supervisor"}),a.jsx(Fe,{children:"Notizen"}),a.jsx(Fe,{children:"Aktionen"})]})}),a.jsx(Yf,{children:S.map(E=>a.jsxs(ei,{children:[a.jsx($e,{children:c===E.id?a.jsx(Te,{type:"date",value:h.performed_date,onChange:A=>f(P=>({...P,performed_date:A.target.value})),className:"w-32"}):new Date(E.performed_date).toLocaleDateString("de-CH")}),a.jsx($e,{className:"max-w-48",children:a.jsx("div",{className:"truncate",title:E.procedure_title,children:E.procedure_title})}),a.jsx($e,{children:c===E.id?a.jsxs("select",{value:h.role_in_surgery,onChange:A=>f(P=>({...P,role_in_surgery:A.target.value})),className:"border rounded px-2 py-1",children:[a.jsx("option",{value:"responsible",children:"Verantwortlich"}),a.jsx("option",{value:"instructing",children:"Instruierend"}),a.jsx("option",{value:"assistant",children:"Assistent"})]}):a.jsx(Y,{variant:j(E.role_in_surgery),children:y(E.role_in_surgery)})}),a.jsx($e,{children:E.weighted_score}),a.jsx($e,{children:c===E.id?a.jsx(Te,{value:h.hospital||"",onChange:A=>f(P=>({...P,hospital:A.target.value})),className:"w-24"}):E.hospital||"-"}),a.jsx($e,{children:c===E.id?a.jsx(Te,{value:h.supervisor||"",onChange:A=>f(P=>({...P,supervisor:A.target.value})),className:"w-24"}):E.supervisor||"-"}),a.jsx($e,{children:c===E.id?a.jsx(Te,{value:h.notes||"",onChange:A=>f(P=>({...P,notes:A.target.value})),className:"w-32"}):a.jsx("div",{className:"max-w-32 truncate",title:E.notes,children:E.notes||"-"})}),a.jsx($e,{children:a.jsx("div",{className:"flex gap-1",children:c===E.id?a.jsxs(a.Fragment,{children:[a.jsx(q,{size:"sm",onClick:()=>x(E.id),children:a.jsx(fb,{className:"h-3 w-3"})}),a.jsx(q,{size:"sm",variant:"outline",onClick:b,children:a.jsx(go,{className:"h-3 w-3"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(q,{size:"sm",variant:"outline",onClick:()=>p(E),children:a.jsx(NS,{className:"h-3 w-3"})}),a.jsx(q,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>v(E.id),children:a.jsx(SS,{className:"h-3 w-3"})})]})})})]},E.id))})]})})},_))]})}),a.jsx("div",{className:"border-t pt-4 flex justify-end gap-2",children:a.jsx(q,{variant:"outline",onClick:()=>e(!1),children:"Schließen"})})]})})},rK=()=>{var E;const{user:s}=oa(),[e,t]=w.useState([]),[n,r]=w.useState([]),[i,o]=w.useState([]),[l,c]=w.useState("basis_notfallchirurgie"),[d,h]=w.useState(5),[f,m]=w.useState(!0),[p,x]=w.useState(!1);w.useEffect(()=>{s&&v()},[s]);const v=async()=>{try{m(!0);const{data:A}=await Z.from("profiles").select("pgy_level").eq("user_id",s.id).single();A!=null&&A.pgy_level&&h(A.pgy_level);const{data:P}=await Z.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");P&&(t(P),P.length>0&&!l&&c(P[0].key));const{data:T}=await Z.from("procedures").select("*").eq("active",!0).order("code");T&&r(T),await b(T||[],(A==null?void 0:A.pgy_level)||5)}catch(A){console.error("Error loading data:",A),ye.error("Fehler beim Laden der Daten")}finally{m(!1)}},b=async(A,P)=>{if(!(!s||A.length===0))try{const{data:T}=await Z.from("procedure_logs").select("procedure_id, role_in_surgery").eq("user_id",s.id),I=A.map(O=>{const L=(T==null?void 0:T.filter(H=>H.procedure_id===O.id))||[],z=L.filter(H=>H.role_in_surgery==="primary").length,M=L.filter(H=>H.role_in_surgery==="instructing").length,U=L.filter(H=>H.role_in_surgery==="assistant").length,$=z+M+U,F=O.min_required_by_pgy[`pgy${P}`]||0,D=F>0?Math.min($/F*100,100):0;let R="not-started";return $>=F&&F>0?R="completed":$>0&&(R="in-progress"),{procedure:O,responsible:z,instructing:M,assistant:U,total:$,required:F,progress:D,status:R}});o(I)}catch(T){console.error("Error loading procedure progress:",T)}},g=async(A,P,T)=>{if(s)try{if(x(!0),T){const{error:I}=await Z.from("procedure_logs").insert({user_id:s.id,procedure_id:A,performed_date:new Date().toISOString().split("T")[0],role_in_surgery:P,supervisor:"Dr. Supervisor",hospital:"Klinik",case_id:`CASE-${Date.now()}`});if(I)throw I}else{const{data:I}=await Z.from("procedure_logs").select("id").eq("user_id",s.id).eq("procedure_id",A).eq("role_in_surgery",P).order("created_at",{ascending:!1}).limit(1);if(I&&I.length>0){const{error:O}=await Z.from("procedure_logs").delete().eq("id",I[0].id);if(O)throw O}}await v(),ye.success("Prozedur erfolgreich aktualisiert")}catch(I){console.error("Error updating procedure:",I),ye.error("Fehler beim Aktualisieren der Prozedur")}finally{x(!1)}},y=A=>{const P=e.find(T=>T.key===A);return P?i.filter(T=>T.procedure.category_id===P.id):[]},j=A=>{const P=y(A),T=P.reduce((O,L)=>O+L.required,0),I=P.reduce((O,L)=>O+L.total,0);return{total:I,required:T,progress:T>0?I/T*100:0,completed:P.filter(O=>O.status==="completed").length,totalProcedures:P.length}},_=A=>{switch(A){case"completed":return"text-green-600 bg-green-50 border-green-200";case"in-progress":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},S=A=>{switch(A){case"completed":return a.jsx(Jr,{className:"w-4 h-4"});case"in-progress":return a.jsx(Zd,{className:"w-4 h-4"});default:return a.jsx(rR,{className:"w-4 h-4"})}};return f?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"FMH Prozeduren Tracking"}),a.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihre chirurgischen Prozeduren nach FMH-Standards"}),a.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Aktueller PGY-Level: ",d]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:e.map(A=>{const P=j(A.key);return a.jsx(K,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${l===A.key?"ring-2 ring-primary":""}`,onClick:()=>c(A.key),children:a.jsx(he,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex items-center justify-center mb-2",children:a.jsx(Ms,{className:"w-6 h-6 text-primary"})}),a.jsx("h3",{className:"font-semibold text-sm mb-2",children:A.title_de}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(na,{value:P.progress,className:"h-2"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[P.completed,"/",P.totalProcedures," abgeschlossen"]}),a.jsxs("div",{className:"text-xs font-medium",children:[P.total,"/",P.required," Prozeduren"]})]})]})})},A.id)})}),a.jsxs(K,{children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(ty,{className:"w-5 h-5"}),(E=e.find(A=>A.key===l))==null?void 0:E.title_de]})}),a.jsx(he,{children:a.jsx(_A,{className:"h-[600px]",children:a.jsx("div",{className:"space-y-4",children:y(l).map(A=>a.jsxs(K,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Y,{variant:"outline",className:"text-xs",children:A.procedure.code}),a.jsxs(Y,{variant:"outline",className:`text-xs ${_(A.status)}`,children:[S(A.status),a.jsx("span",{className:"ml-1",children:A.status==="completed"?"Abgeschlossen":A.status==="in-progress"?"In Bearbeitung":"Nicht begonnen"})]})]}),a.jsx("h4",{className:"font-medium text-card-foreground",children:A.procedure.title_de}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:["Erforderlich: ",A.required," | Aktuell: ",A.total]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-primary",children:[Math.round(A.progress),"%"]}),a.jsx(na,{value:A.progress,className:"w-20 h-2 mt-1"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(pe,{className:"text-xs text-muted-foreground",children:"Verantwortlich"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[a.jsx(q,{size:"sm",variant:"outline",onClick:()=>g(A.procedure.id,"primary",!1),disabled:p||A.responsible===0,children:a.jsx(uh,{className:"w-3 h-3"})}),a.jsx("span",{className:"font-medium w-8 text-center",children:A.responsible}),a.jsx(q,{size:"sm",variant:"outline",onClick:()=>g(A.procedure.id,"primary",!0),disabled:p,children:a.jsx(ri,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(pe,{className:"text-xs text-muted-foreground",children:"Instruierend"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[a.jsx(q,{size:"sm",variant:"outline",onClick:()=>g(A.procedure.id,"instructing",!1),disabled:p||A.instructing===0,children:a.jsx(uh,{className:"w-3 h-3"})}),a.jsx("span",{className:"font-medium w-8 text-center",children:A.instructing}),a.jsx(q,{size:"sm",variant:"outline",onClick:()=>g(A.procedure.id,"instructing",!0),disabled:p,children:a.jsx(ri,{className:"w-3 h-3"})})]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(pe,{className:"text-xs text-muted-foreground",children:"Assistent"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[a.jsx(q,{size:"sm",variant:"outline",onClick:()=>g(A.procedure.id,"assistant",!1),disabled:p||A.assistant===0,children:a.jsx(uh,{className:"w-3 h-3"})}),a.jsx("span",{className:"font-medium w-8 text-center",children:A.assistant}),a.jsx(q,{size:"sm",variant:"outline",onClick:()=>g(A.procedure.id,"assistant",!0),disabled:p,children:a.jsx(ri,{className:"w-3 h-3"})})]})]})]})]},A.procedure.id))})})})]})]})},iK=()=>{const{user:s,loading:e}=oa(),t=xo(),[n,r]=w.useState([]),[i,o]=w.useState(null),[l,c]=w.useState(!0),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[p,x]=w.useState(!1),[v,b]=w.useState(!1),[g,y]=w.useState(!1),[j,_]=w.useState(!1),[S,E]=w.useState(4);w.useEffect(()=>{if(e)return;if(!s){console.log("🔄 FMH: No user, redirecting to /auth"),t("/auth",{replace:!0});return}if(console.log("🔄 FMHDashboard useEffect triggered for user:",s.id),l){console.log("⏸️ FMH: Already loading, skipping...");return}P();const L=setTimeout(()=>{console.log("⏰ Timeout reached - stopping loading"),h(!0),c(!1)},1e4);return()=>clearTimeout(L)},[s,e]);const A=async(L,z)=>{try{console.log("🔄 Calculating progress manually for module:",z);const{data:M,error:U}=await Z.from("procedure_categories").select("id").eq("key",z).single();if(U||!M)return console.error("Error fetching category:",U),null;const{data:$,error:F}=await Z.from("procedures").select("id, code, title_de, min_required_by_pgy").eq("category_id",M.id).eq("active",!0);if(F||!$)return console.error("Error fetching procedures:",F),null;const{data:D,error:R}=await Z.from("procedure_logs").select("procedure_id, role_in_surgery").eq("user_id",L);if(R)return console.error("Error fetching logs:",R),null;let H=0,X=0,B=0,V=0,J=0;$.forEach(le=>{var Nt;const W=(D==null?void 0:D.filter(St=>St.procedure_id===le.id))||[],ge=((Nt=le.min_required_by_pgy)==null?void 0:Nt.pgy5)||0,je=W.filter(St=>["primary","responsible"].includes(St.role_in_surgery)).length,Ee=W.filter(St=>St.role_in_surgery==="instructing").length,Ce=W.filter(St=>["assistant","assist"].includes(St.role_in_surgery)).length,Me=je*1+Ee*.5+Ce*.25;H+=Me,X+=ge,B+=je,V+=Ee,J+=Ce});const ee=X>0?H/X*100:0;return[{module_name:z,total_weighted_score:H,total_minimum:X,progress_percentage:ee,responsible_count:B,instructing_count:V,assistant_count:J}]}catch(M){return console.error("❌ FMH: Critical error in loadModulesAndProgress:",M),console.error("Error in manual calculation:",M),null}},P=async()=>{if(console.log("🚀 FMH: Starting loadModulesAndProgress..."),l){console.log("⏸️ FMH: Already loading, aborting...");return}try{c(!0);const{data:{user:L},error:z}=await Z.auth.getUser();if(z&&console.error("getUser error",z),console.log("🔍 FMHDashboard - Loading data for user ID:",L==null?void 0:L.id),L){const{data:F}=await Z.from("profiles").select("pgy_level").eq("user_id",L.id).single();F!=null&&F.pgy_level&&E(F.pgy_level)}const{data:M,error:U}=await Z.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");if(U)throw U;const $=[];for(const F of M||[])if(L){console.log("📊 FMHDashboard - Getting progress for module:",F.key,"user:",L.id);let D=null;try{console.log("🔄 Starting RPC call for module:",F.key);const H=Z.rpc("get_module_progress",{user_id_param:L.id,module_key:F.key}),X=new Promise((ee,le)=>setTimeout(()=>le(new Error("RPC timeout after 3 seconds")),3e3)),B=await Promise.race([H,X]),{data:V,error:J}=B;J?(console.error("❌ RPC error for module",F.key,":",J),D=await A(L.id,F.key)):(console.log("✅ RPC success for module",F.key,":",V),D=V)}catch(H){console.error("❌ FMH: Critical error in loadModulesAndProgress:",H),console.error("❌ RPC timeout/error for module",F.key,":",H),D=await A(L.id,F.key)}console.log("📈 Progress data for",F.key,":",D),console.log("🔍 Module data:",{key:F.key,title:F.title_de,minimum_required:F.minimum_required,progress_raw:D});let R=null;if(D&&D.length>0){const H=D[0];Array.isArray(H)&&H.length>=7?R={module_name:H[0],total_weighted_score:H[1],total_minimum:H[2],progress_percentage:H[3],responsible_count:H[4],instructing_count:H[5],assistant_count:H[6]}:typeof H=="object"&&H!==null&&(R=H)}$.push({...F,progress:R})}else $.push({...F,progress:null});r($)}catch(L){console.error("❌ FMH: Critical error in loadModulesAndProgress:",L),console.error("Error loading modules:",L),r([{id:"fallback-1",key:"basis_notfallchirurgie",title_de:"Basis Notfallchirurgie",module_type:"basis",minimum_required:85,progress:{module_name:"basis_notfallchirurgie",total_weighted_score:25,total_minimum:85,progress_percentage:30,responsible_count:8,instructing_count:5,assistant_count:12}},{id:"fallback-2",key:"basis_allgemeinchirurgie",title_de:"Basis Allgemeinchirurgie",module_type:"basis",minimum_required:260,progress:{module_name:"basis_allgemeinchirurgie",total_weighted_score:45,total_minimum:260,progress_percentage:17,responsible_count:15,instructing_count:8,assistant_count:22}}])}finally{console.log("✅ FMH: loadModulesAndProgress completed, setting loading to false"),c(!1)}},T=L=>({basis_notfallchirurgie:"coral",basis_allgemeinchirurgie:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[L]||"mint",O=(()=>{const L=n.reduce((U,$)=>{var F;return U+(((F=$.progress)==null?void 0:F.responsible_count)||0)},0),z=n.reduce((U,$)=>{var F,D,R;return U+(((F=$.progress)==null?void 0:F.responsible_count)||0)+(((D=$.progress)==null?void 0:D.instructing_count)||0)+(((R=$.progress)==null?void 0:R.assistant_count)||0)},0),M=z>0?L/z*100:0;return M>=30?{status:"good",color:"bg-green-500"}:M>=20?{status:"warning",color:"bg-yellow-500"}:{status:"critical",color:"bg-red-500"}})();return l?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-medical-title text-card-foreground mb-2",children:"FMH Chirurgie Tracking"}),a.jsxs("p",{className:"text-medical-subtitle",children:["Überwachung Ihres FMH-konformen Ausbildungsfortschritts - PGY ",S]}),s&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Debug: User ID: ",s.id," | Email: ",s.email]})]}),a.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[a.jsxs(q,{variant:"default",size:"sm",className:"gap-2",onClick:()=>_(!0),children:[a.jsx(Ms,{className:"w-4 h-4"}),"Prozeduren Tracking"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>m(!0),children:[a.jsx(ri,{className:"w-4 h-4"}),"Prozedur erfassen"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>b(!0),children:[a.jsx(ls,{className:"w-4 h-4"}),"Manual eingabe"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>x(!0),children:[a.jsx(mb,{className:"w-4 h-4"}),"PDF Upload"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(wS,{className:"w-4 h-4"}),"Export"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>y(!0),children:[a.jsx(Cv,{className:"w-4 h-4"}),"Korrekturen"]})]})]}),a.jsxs("div",{className:"medical-card-elegant p-8 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-2",children:"FMH Module Progress"}),a.jsx("p",{className:"text-text-secondary",children:"Gewichtete Erfüllung der FMH-Mindestanforderungen pro Modul"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:n.map(L=>{var M,U,$,F,D;const z=((M=L.progress)==null?void 0:M.progress_percentage)||0;return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Rv,{progress:z,variant:T(L.key),size:120,strokeWidth:8,label:L.title_de,showPercentage:!0,onClick:()=>o(L.key),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(ty,{className:"w-4 h-4 text-muted-foreground"}),a.jsxs(Y,{variant:"outline",className:"text-xs",children:[parseInt((((U=L.progress)==null?void 0:U.total_weighted_score)||0).toString()),"/",L.minimum_required||"?"]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["V:",parseInt(((($=L.progress)==null?void 0:$.responsible_count)||0).toString())," I:",parseInt((((F=L.progress)==null?void 0:F.instructing_count)||0).toString())," A:",parseInt((((D=L.progress)==null?void 0:D.assistant_count)||0).toString())]})]})]},L.id)})})]}),i&&a.jsx(o9,{moduleKey:i,onClose:()=>o(null)}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(K,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:a.jsx(Zd,{className:"w-6 h-6 text-activity-mint"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gesamtfortschritt"}),a.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[n.length>0?parseInt((n.reduce((L,z)=>{var M;return L+(((M=z.progress)==null?void 0:M.progress_percentage)||0)},0)/n.length).toString()):0,"%"]})]})]})}),a.jsx(K,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-3 ${O.color}/20 rounded-medical`,children:a.jsx(xr,{className:"w-6 h-6",style:{color:O.color.replace("/20","").replace("bg-","")}})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Rollen-Balance"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground capitalize",children:O.status==="good"?"Gut":O.status==="warning"?"Achtung":"Kritisch"})]})]})}),a.jsx(K,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:a.jsx(ty,{className:"w-6 h-6 text-activity-coral"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Eingriffe Total"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:parseInt(n.reduce((L,z)=>{var M,U,$;return L+(((M=z.progress)==null?void 0:M.responsible_count)||0)+(((U=z.progress)==null?void 0:U.instructing_count)||0)+((($=z.progress)==null?void 0:$.assistant_count)||0)},0).toString())})]})]})}),a.jsx(K,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:a.jsx(js,{className:"w-6 h-6 text-activity-amber"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktueller PGY"}),a.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:["PGY-",S]})]})]})})]}),a.jsx(Y9,{modules:n,userPgyLevel:S}),f&&a.jsx(q9,{onClose:()=>m(!1),onSuccess:()=>{m(!1),P()}}),a.jsx(sK,{open:v,onOpenChange:b,onSuccess:P}),a.jsx(HG,{open:p,onOpenChange:x,onSuccess:P}),a.jsx(nK,{open:g,onOpenChange:y,onSuccess:P}),j&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background rounded-lg w-full max-w-7xl h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"FMH Prozeduren Tracking"}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>_(!1),children:"✕"})]}),a.jsx("div",{className:"p-6 h-[calc(100%-80px)] overflow-auto",children:a.jsx(rK,{})})]})})]})]})},aK=()=>{const{user:s}=oa(),[e,t]=w.useState([]),[n,r]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState([]),[d,h]=w.useState(!0),[f,m]=w.useState(null),[p,x]=w.useState(!1),[v,b]=w.useState(!1),[g,y]=w.useState({team_name:"",department:"",hospital:"",description:""}),[j,_]=w.useState(""),[S,E]=w.useState("");w.useEffect(()=>{s&&A()},[s]);const A=async()=>{try{h(!0),m(null);const{data:M,error:U}=await Z.from("supervisor_teams").select(`
          *,
          team_members(count)
        `).eq("supervisor_id",s==null?void 0:s.id).order("created_at",{ascending:!1});if(U){console.error("Error loading teams:",U),m("Fehler beim Laden der Teams");return}const $=(M==null?void 0:M.map(F=>{var D,R;return{...F,member_count:((R=(D=F.team_members)==null?void 0:D[0])==null?void 0:R.count)||0}}))||[];t($)}catch(M){console.error("Error in loadTeams:",M),m("Fehler beim Laden der Team-Daten")}finally{h(!1)}},P=async M=>{try{const{data:U,error:$}=await Z.from("team_members").select(`
          *,
          profiles!team_members_resident_id_fkey (
            user_id,
            full_name,
            email,
            pgy_level,
            department,
            hospital
          )
        `).eq("team_id",M).order("joined_at",{ascending:!1});if($){console.error("Error loading team members:",$);return}const F=(U==null?void 0:U.map(D=>{var R,H,X,B,V;return{id:D.id,resident_id:D.resident_id,resident_name:((R=D.profiles)==null?void 0:R.full_name)||"Unbekannt",resident_email:((H=D.profiles)==null?void 0:H.email)||"",pgy_level:((X=D.profiles)==null?void 0:X.pgy_level)||0,department:((B=D.profiles)==null?void 0:B.department)||"",hospital:((V=D.profiles)==null?void 0:V.hospital)||"",joined_at:D.joined_at,status:D.status,notes:D.notes||""}}))||[];o(F)}catch(U){console.error("Error in loadTeamMembers:",U)}},T=async()=>{try{const{data:M,error:U}=await Z.from("profiles").select("user_id, full_name, email, pgy_level, department, hospital").eq("role","resident").not("user_id","in","(SELECT resident_id FROM team_members WHERE status = 'active')").order("full_name");if(U){console.error("Error loading available residents:",U);return}c(M||[])}catch(M){console.error("Error in loadAvailableResidents:",M)}},I=async()=>{try{const{data:M,error:U}=await Z.from("supervisor_teams").insert({supervisor_id:s==null?void 0:s.id,team_name:g.team_name,department:g.department,hospital:g.hospital,description:g.description}).select().single();if(U)throw U;Io({title:"Team erstellt",description:`Das Team "${g.team_name}" wurde erfolgreich erstellt.`}),y({team_name:"",department:"",hospital:"",description:""}),x(!1),A()}catch(M){console.error("Error creating team:",M),Io({title:"Fehler",description:"Team konnte nicht erstellt werden.",variant:"destructive"})}},O=async()=>{if(!(!n||!j))try{const{error:M}=await Z.from("team_members").insert({team_id:n.id,resident_id:j,notes:S});if(M)throw M;Io({title:"Resident hinzugefügt",description:"Der Resident wurde erfolgreich zum Team hinzugefügt."}),_(""),E(""),b(!1),P(n.id),A()}catch(M){console.error("Error adding member:",M),Io({title:"Fehler",description:"Resident konnte nicht hinzugefügt werden.",variant:"destructive"})}},L=async M=>{try{const{error:U}=await Z.from("team_members").update({status:"inactive"}).eq("id",M);if(U)throw U;Io({title:"Resident entfernt",description:"Der Resident wurde aus dem Team entfernt."}),n&&(P(n.id),A())}catch(U){console.error("Error removing member:",U),Io({title:"Fehler",description:"Resident konnte nicht entfernt werden.",variant:"destructive"})}},z=M=>{r(M),P(M.id)};return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Lade Teams..."})]})}):f?a.jsxs(Zi,{children:[a.jsx(Qi,{className:"h-4 w-4"}),a.jsx(ea,{children:f})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Team Management"}),a.jsx("p",{className:"text-gray-600",children:"Verwalten Sie Ihre Teams und Residents"})]}),a.jsxs(ru,{open:p,onOpenChange:x,children:[a.jsx(Kj,{asChild:!0,children:a.jsxs(q,{children:[a.jsx(ri,{className:"h-4 w-4 mr-2"}),"Neues Team"]})}),a.jsxs(Kl,{children:[a.jsxs(Yl,{children:[a.jsx(Xl,{children:"Neues Team erstellen"}),a.jsx(Yj,{children:"Erstellen Sie ein neues Team für Ihre Residents"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"team_name",children:"Team Name"}),a.jsx(Te,{id:"team_name",value:g.team_name,onChange:M=>y(U=>({...U,team_name:M.target.value})),placeholder:"z.B. Chirurgie Team A"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"department",children:"Abteilung"}),a.jsx(Te,{id:"department",value:g.department,onChange:M=>y(U=>({...U,department:M.target.value})),placeholder:"z.B. Allgemeinchirurgie"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"hospital",children:"Krankenhaus"}),a.jsx(Te,{id:"hospital",value:g.hospital,onChange:M=>y(U=>({...U,hospital:M.target.value})),placeholder:"z.B. Universitätsspital Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"description",children:"Beschreibung"}),a.jsx(iu,{id:"description",value:g.description,onChange:M=>y(U=>({...U,description:M.target.value})),placeholder:"Beschreibung des Teams..."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(q,{variant:"outline",onClick:()=>x(!1),children:"Abbrechen"}),a.jsx(q,{onClick:I,disabled:!g.team_name.trim(),children:"Team erstellen"})]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(K,{children:[a.jsxs(Se,{children:[a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(xr,{className:"h-5 w-5"}),"Ihre Teams"]}),a.jsx(Zr,{children:"Wählen Sie ein Team aus, um die Mitglieder zu verwalten"})]}),a.jsx(he,{children:a.jsxs("div",{className:"space-y-3",children:[e.map(M=>a.jsx(K,{className:`cursor-pointer transition-all hover:shadow-md ${(n==null?void 0:n.id)===M.id?"ring-2 ring-blue-500":""}`,onClick:()=>z(M),children:a.jsxs(he,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:M.team_name}),a.jsxs(Y,{variant:"outline",children:[M.member_count," Mitglieder"]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sy,{className:"h-4 w-4"}),M.department]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Hf,{className:"h-4 w-4"}),M.hospital]}),M.description&&a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:M.description})]})]})},M.id)),e.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keine Teams vorhanden"}),a.jsx("p",{className:"text-gray-600",children:"Erstellen Sie Ihr erstes Team, um Residents zu verwalten."})]})]})})]}),a.jsxs(K,{children:[a.jsx(Se,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(pj,{className:"h-5 w-5"}),"Team Mitglieder"]}),a.jsx(Zr,{children:n?`Mitglieder von "${n.team_name}"`:"Wählen Sie ein Team aus"})]}),n&&a.jsxs(ru,{open:v,onOpenChange:b,children:[a.jsx(Kj,{asChild:!0,children:a.jsxs(q,{size:"sm",onClick:T,children:[a.jsx(iR,{className:"h-4 w-4 mr-2"}),"Hinzufügen"]})}),a.jsxs(Kl,{children:[a.jsxs(Yl,{children:[a.jsx(Xl,{children:"Resident zum Team hinzufügen"}),a.jsxs(Yj,{children:['Fügen Sie einen Resident zu "',n.team_name,'" hinzu']})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"resident",children:"Resident auswählen"}),a.jsxs(gn,{value:j,onValueChange:_,children:[a.jsx(Xs,{children:a.jsx(vn,{placeholder:"Resident auswählen..."})}),a.jsx(Qs,{children:l.map(M=>a.jsx(Xe,{value:M.user_id,children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:M.full_name}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["PGY ",M.pgy_level," - ",M.department]})]})},M.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"notes",children:"Notizen (optional)"}),a.jsx(iu,{id:"notes",value:S,onChange:M=>E(M.target.value),placeholder:"Notizen zum Resident..."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(q,{variant:"outline",onClick:()=>b(!1),children:"Abbrechen"}),a.jsx(q,{onClick:O,disabled:!j,children:"Hinzufügen"})]})]})]})]})]})}),a.jsx(he,{children:n?a.jsxs("div",{className:"space-y-3",children:[i.map(M=>a.jsx(K,{children:a.jsxs(he,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:M.resident_name}),a.jsx("p",{className:"text-sm text-gray-600",children:M.resident_email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Y,{variant:"outline",children:["PGY ",M.pgy_level]}),a.jsx(q,{size:"sm",variant:"outline",onClick:()=>L(M.id),children:a.jsx(SS,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sy,{className:"h-4 w-4"}),M.department]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ac,{className:"h-4 w-4"}),"Seit: ",new Date(M.joined_at).toLocaleDateString("de-DE")]}),M.notes&&a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:M.notes})]})]})},M.id)),i.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(pj,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keine Mitglieder"}),a.jsx("p",{className:"text-gray-600",children:"Fügen Sie Residents zu diesem Team hinzu."})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Team auswählen"}),a.jsx("p",{className:"text-gray-600",children:"Wählen Sie ein Team aus, um die Mitglieder zu sehen."})]})})]})]})]})},oK=()=>{const{user:s}=oa(),[e,t]=w.useState([]),[n,r]=w.useState(null),[i,o]=w.useState([]),[l,c]=w.useState({totalResidents:0,activeResidents:0,totalProcedures:0,averageProgress:0,needsAttention:0}),[d,h]=w.useState(!0),[f,m]=w.useState(null);w.useEffect(()=>{s&&p()},[s]);const p=async()=>{var g;try{h(!0),m(null);const{data:y,error:j}=await Z.rpc("get_supervisor_residents",{supervisor_user_id:s==null?void 0:s.id});if(j){console.error("Error loading residents:",j),m("Fehler beim Laden der Residents");return}console.log("Raw residents data:",y);const _=Array.isArray(y)?y:y||[];console.log("Parsed residents:",_),t(_);const S={totalResidents:(_==null?void 0:_.length)||0,activeResidents:((g=_==null?void 0:_.filter(E=>E.last_activity))==null?void 0:g.length)||0,totalProcedures:(_==null?void 0:_.reduce((E,A)=>E+(A.total_procedures||0),0))||0,averageProgress:0,needsAttention:0};c(S)}catch(y){console.error("Error in loadSupervisorData:",y),m("Fehler beim Laden der Supervisor-Daten")}finally{h(!1)}},x=async g=>{try{const{data:y,error:j}=await Z.rpc("get_resident_progress_summary",{resident_user_id:g});if(j){console.error("Error loading resident progress:",j);return}o(y||[])}catch(y){console.error("Error in loadResidentProgress:",y)}},v=g=>{r(g),x(g.resident_id)},b=g=>g>=80?"text-green-600":g>=60?"text-yellow-600":"text-red-600";return d?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[a.jsx(Ds,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Lade Supervisor-Dashboard..."})]})})})]}):f?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[a.jsx(Ds,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs(Zi,{className:"max-w-2xl mx-auto",children:[a.jsx(Qi,{className:"h-4 w-4"}),a.jsx(ea,{children:f})]})})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[a.jsx(Ds,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Supervisor Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Überblick über Ihre Residents und deren Fortschritt"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs(K,{children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(xr,{className:"h-5 w-5 text-blue-600"}),"Team Übersicht"]})}),a.jsxs(he,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Team Größe"}),a.jsx("span",{className:"text-2xl font-bold",children:l.totalResidents})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Aktive Residents"}),a.jsx("span",{className:"text-lg font-semibold text-green-600",children:l.activeResidents})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Gesamt Prozeduren"}),a.jsx("span",{className:"text-lg font-semibold text-blue-600",children:l.totalProcedures})]})]})]}),a.jsxs(K,{children:[a.jsx(Se,{children:a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(Zd,{className:"h-5 w-5 text-green-600"}),"Fortschritt"]})}),a.jsxs(he,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Team-Durchschnitt"}),a.jsxs("span",{className:"font-semibold",children:[Math.round(l.averageProgress),"%"]})]}),a.jsx(na,{value:l.averageProgress,className:"h-2"})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"Benötigt Aufmerksamkeit"}),a.jsx("span",{className:`font-semibold ${l.needsAttention>0?"text-red-600":"text-green-600"}`,children:l.needsAttention})]})]})]}),a.jsxs(K,{children:[a.jsx(Se,{children:a.jsx(Pe,{children:"Schnellaktionen"})}),a.jsxs(he,{className:"space-y-3",children:[a.jsxs(q,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(iR,{className:"h-4 w-4 mr-2"}),"Resident hinzufügen"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(ls,{className:"h-4 w-4 mr-2"}),"Bericht exportieren"]}),a.jsxs(q,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(Cv,{className:"h-4 w-4 mr-2"}),"Einstellungen"]})]})]})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(K,{children:[a.jsxs(Se,{children:[a.jsxs(Pe,{className:"flex items-center gap-2",children:[a.jsx(jS,{className:"h-5 w-5 text-purple-600"}),"Ihre Residents"]}),a.jsx(Zr,{children:"Klicken Sie auf einen Resident, um detaillierte Milestone-Informationen zu sehen"})]}),a.jsx(he,{children:a.jsx("div",{className:"space-y-6",children:e.map(g=>{var y;return a.jsx(K,{className:`cursor-pointer transition-all hover:shadow-lg border-l-4 ${(n==null?void 0:n.user_id)===g.user_id?"border-l-blue-500 bg-blue-50/50":"border-l-gray-200"}`,onClick:()=>v(g),children:a.jsx(he,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:((y=g.full_name)==null?void 0:y.split(" ").map(j=>j[0]).join(""))||"R"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:g.full_name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Y,{variant:"outline",className:"bg-blue-50 text-blue-700",children:["PGY ",g.pgy_level]}),a.jsx("span",{className:"text-sm text-gray-600",children:g.department})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Prozeduren"}),a.jsx("span",{className:"font-semibold",children:g.total_procedures||0})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Klinik"}),a.jsx("span",{className:"font-semibold",children:g.hospital})]})]})]}),a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ms,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"Q4 2024"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[20,35,45,50,55,60,65,70,75,78,82,85].map((j,_)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${j}%`}},_))})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Jun"}),a.jsx("span",{children:"Dez"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ls,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"3/4"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((j,_)=>a.jsx("div",{className:`rounded-sm flex-1 ${_<9?"bg-gradient-to-t from-blue-500 to-blue-400":"bg-gray-200"}`,style:{height:_<9?"100%":"20%"}},_))})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"2/3"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((j,_)=>a.jsx("div",{className:`rounded-sm flex-1 ${_<8?"bg-gradient-to-t from-purple-500 to-purple-400":"bg-gray-200"}`,style:{height:_<8?"100%":"20%"}},_))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ys,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"1/2"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((j,_)=>a.jsx("div",{className:`rounded-sm flex-1 ${_<6?"bg-gradient-to-t from-amber-500 to-amber-400":"bg-gray-200"}`,style:{height:_<6?"100%":"20%"}},_))})})]})]})]})]})})},g.user_id)})})})]})})]}),a.jsxs(Jn,{defaultValue:"team",className:"space-y-6",children:[a.jsxs(Nn,{children:[a.jsx(ze,{value:"team",children:"Team Übersicht"}),a.jsx(ze,{value:"management",children:"Team Management"}),a.jsx(ze,{value:"progress",children:"Fortschritt Details"}),a.jsx(ze,{value:"reports",children:"Berichte"})]}),a.jsx(He,{value:"team",className:"space-y-6",children:a.jsxs(K,{children:[a.jsxs(Se,{children:[a.jsx(Pe,{children:"Ihre Residents"}),a.jsx(Zr,{children:"Klicken Sie auf einen Resident, um detaillierte Informationen zu sehen"})]}),a.jsx(he,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(g=>a.jsx(K,{className:`cursor-pointer transition-all hover:shadow-md ${(n==null?void 0:n.resident_id)===g.resident_id?"ring-2 ring-blue-500":""}`,onClick:()=>v(g),children:a.jsxs(he,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:g.resident_name}),a.jsxs(Y,{variant:"outline",children:["PGY ",g.pgy_level]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pj,{className:"h-4 w-4"}),g.total_procedures," Prozeduren"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4"}),g.last_activity?`Letzte Aktivität: ${new Date(g.last_activity).toLocaleDateString("de-DE")}`:"Keine Aktivität"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ac,{className:"h-4 w-4"}),"Seit: ",new Date(g.joined_at).toLocaleDateString("de-DE")]})]})]})},g.resident_id))})})]})}),a.jsx(He,{value:"management",className:"space-y-6",children:a.jsx(aK,{})}),a.jsx(He,{value:"progress",className:"space-y-6",children:n?a.jsx("div",{className:"space-y-6",children:a.jsxs(K,{children:[a.jsxs(Se,{children:[a.jsxs(Pe,{children:["Fortschritt: ",n.resident_name]}),a.jsx(Zr,{children:"Detaillierte Übersicht über FMH-Module"})]}),a.jsx(he,{children:a.jsx("div",{className:"space-y-4",children:i.map(g=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold",children:g.module_name}),a.jsxs(Y,{className:b(g.progress_percentage),children:[Math.round(g.progress_percentage),"%"]})]}),a.jsx(na,{value:g.progress_percentage,className:"mb-2"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Verantwortlich:"}),a.jsx("div",{className:"font-semibold",children:g.responsible_count})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Instruierend:"}),a.jsx("div",{className:"font-semibold",children:g.instructing_count})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Assistent:"}),a.jsx("div",{className:"font-semibold",children:g.assistant_count})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Minimum:"}),a.jsx("div",{className:"font-semibold",children:g.total_minimum})]})]})]},g.module_key))})})]})}):a.jsx(K,{children:a.jsxs(he,{className:"p-8 text-center",children:[a.jsx(ZT,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wählen Sie einen Resident"}),a.jsx("p",{className:"text-gray-600",children:"Klicken Sie auf einen Resident in der Team-Übersicht, um dessen Fortschritt zu sehen."})]})})}),a.jsx(He,{value:"reports",className:"space-y-6",children:a.jsxs(K,{children:[a.jsxs(Se,{children:[a.jsx(Pe,{children:"Berichte & Dokumentation"}),a.jsx(Zr,{children:"Erstellen Sie Berichte über den Fortschritt Ihrer Residents"})]}),a.jsx(he,{children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ls,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Berichte-Funktion"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Diese Funktion wird in der nächsten Version implementiert."}),a.jsx(q,{disabled:!0,children:"Bericht erstellen"})]})})]})})]})]})]})},lK=[{icon:Ms,title:"FMH-konforme Prozeduren-Tracking",description:"Vollständige Dokumentation aller chirurgischen Eingriffe nach FMH-Standards mit automatischer Kategorisierung und Fortschrittsverfolgung.",benefits:["Automatische Kategorisierung","FMH-Mindestanforderungen","Echtzeit-Fortschritt"],color:"text-activity-mint"},{icon:en,title:"Intelligentes Kurs-Management",description:"Verwalten Sie Pflichtkurse, Fortbildungen und Examen mit automatischen Erinnerungen und Fortschritts-Tracking.",benefits:["Kurs-Timeline","Automatische Erinnerungen","Zertifikat-Verwaltung"],color:"text-activity-coral"},{icon:ls,title:"Publikations-Portfolio",description:"Dokumentieren Sie Ihre wissenschaftlichen Arbeiten und verfolgen Sie Ihren akademischen Fortschritt.",benefits:["Google Scholar Integration","Impact-Tracking","Kollaborations-Netzwerk"],color:"text-activity-lavender"},{icon:ys,title:"Awards & Auszeichnungen",description:"Sammeln und präsentieren Sie Ihre Erfolge und Auszeichnungen in einem professionellen Portfolio.",benefits:["Portfolio-Ansicht","Erfolgs-Tracking","Networking-Tools"],color:"text-activity-amber"},{icon:ZT,title:"Analytics & Insights",description:"Detaillierte Analysen Ihres Ausbildungsfortschritts mit Gap-Analysen und Empfehlungen.",benefits:["Gap-Analysen","Trend-Vorhersagen","Personalisierte Empfehlungen"],color:"text-blue-500"},{icon:q$,title:"Datenschutz & Sicherheit",description:"Höchste Sicherheitsstandards für Ihre sensiblen medizinischen Daten mit DSGVO-Konformität.",benefits:["End-to-End Verschlüsselung","DSGVO-konform","Sichere Cloud-Speicherung"],color:"text-green-500"}],cK=[{icon:Y$,title:"Echtzeit-Synchronisation",description:"Alle Daten werden in Echtzeit zwischen Geräten synchronisiert."},{icon:z$,title:"Multi-Platform",description:"Funktioniert auf Desktop, Tablet und Smartphone."},{icon:L$,title:"Robuste Datenbank",description:"Supabase-basierte, skalierbare Datenbank-Architektur."},{icon:fj,title:"Sichere Authentifizierung",description:"Moderne OAuth-Integration mit Supabase Auth."}],dK=[{name:"Resident",price:"Kostenlos",period:"Für Einzelpersonen",features:["Basis Prozeduren-Tracking","Kurs-Management","Einfache Analytics","Community-Support"],popular:!1},{name:"Professional",price:"CHF 29",period:"pro Monat",features:["Alle Resident Features","Erweiterte Analytics","Publikations-Portfolio","Awards-Tracking","Priority Support","API-Zugang"],popular:!0},{name:"Institution",price:"CHF 99",period:"pro Monat",features:["Alle Professional Features","Multi-User Management","Institutionelle Dashboards","Custom Branding","Dedicated Support","On-Premise Option"],popular:!1}],uK=()=>a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsxs("main",{children:[a.jsx("section",{className:"py-20 bg-gradient-to-br from-primary/5 to-secondary/5",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-card-foreground mb-6",children:"Alle Features auf einen Blick"}),a.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Entdecken Sie die umfassenden Funktionen von ResidentTrack, die Ihre chirurgische Ausbildung revolutionieren."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(q,{size:"lg",className:"bg-gradient-medical",children:["Jetzt starten",a.jsx(dj,{className:"ml-2 h-4 w-4"})]}),a.jsx(q,{size:"lg",variant:"outline",children:"Demo ansehen"})]})]})})}),a.jsx("section",{className:"py-20",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:a.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/trainingimage.png",alt:"Features Hero",className:"w-full h-auto object-cover"})})}),a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kernfunktionen"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Alles was Sie für eine erfolgreiche chirurgische Ausbildung benötigen"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:lK.map((s,e)=>a.jsx(K,{className:"medical-card p-6 hover:shadow-elegant transition-all duration-300",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 rounded-medical bg-gradient-to-br from-primary/10 to-secondary/10",children:a.jsx(s.icon,{className:`h-6 w-6 ${s.color}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-3",children:s.title}),a.jsx("p",{className:"text-muted-foreground mb-4",children:s.description}),a.jsx("div",{className:"space-y-2",children:s.benefits.map((t,n)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:t})]},n))})]})]})},e))})]})}),a.jsx("section",{className:"py-20 bg-muted/30",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:a.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/courseresidentsimage.png",alt:"Kurse und Fortbildungen",className:"w-full h-auto object-cover"})})}),a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Technische Highlights"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Moderne Technologie für optimale Performance und Sicherheit"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:cK.map((s,e)=>a.jsxs(K,{className:"medical-card p-6 text-center",children:[a.jsx("div",{className:"p-4 bg-gradient-to-br from-primary/10 to-secondary/10 rounded-medical w-fit mx-auto mb-4",children:a.jsx(s.icon,{className:"h-8 w-8 text-primary"})}),a.jsx("h3",{className:"text-lg font-semibold text-card-foreground mb-2",children:s.title}),a.jsx("p",{className:"text-muted-foreground text-sm",children:s.description})]},e))})]})}),a.jsx("section",{className:"py-20",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Preise"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Wählen Sie den Plan, der zu Ihren Bedürfnissen passt"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:dK.map((s,e)=>a.jsxs(K,{className:`medical-card p-8 relative ${s.popular?"ring-2 ring-primary":""}`,children:[s.popular&&a.jsx(Y,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gradient-medical",children:"Beliebt"}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-card-foreground mb-2",children:s.name}),a.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:s.price}),a.jsx("p",{className:"text-muted-foreground",children:s.period})]}),a.jsx("ul",{className:"space-y-4 mb-8",children:s.features.map((t,n)=>a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(Jr,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-muted-foreground",children:t})]},n))}),a.jsx(q,{className:`w-full ${s.popular?"bg-gradient-medical":""}`,variant:s.popular?"default":"outline",children:s.name==="Resident"?"Kostenlos starten":"Plan wählen"})]},e))})]})}),a.jsx("section",{className:"py-20 bg-gradient-to-br from-primary/10 to-secondary/10",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Bereit für den nächsten Schritt?"}),a.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Starten Sie noch heute mit ResidentTrack und revolutionieren Sie Ihre chirurgische Ausbildung."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(q,{size:"lg",className:"bg-gradient-medical",children:["Kostenlos registrieren",a.jsx(dj,{className:"ml-2 h-4 w-4"})]}),a.jsx(q,{size:"lg",variant:"outline",children:"Kontakt aufnehmen"})]})]})})]})]}),hK=()=>a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsx("main",{className:"container mx-auto px-4 py-12",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs(K,{className:"medical-card",children:[a.jsx(Se,{children:a.jsx(Pe,{className:"text-card-foreground",children:"Kontakt aufnehmen"})}),a.jsxs(he,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Te,{placeholder:"Vorname"}),a.jsx(Te,{placeholder:"Nachname"})]}),a.jsx(Te,{type:"email",placeholder:"E-Mail"}),a.jsx(Te,{placeholder:"Betreff"}),a.jsx(iu,{placeholder:"Ihre Nachricht",className:"min-h-[140px]"}),a.jsx(q,{className:"w-full",children:"Nachricht senden"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(K,{className:"medical-card overflow-hidden",children:[a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/residents-image-2.png",alt:"Kontakt - ResidentTrack",className:"w-full h-56 object-cover"}),a.jsx(he,{className:"pt-4",children:a.jsx("p",{className:"text-muted-foreground",children:"Wir freuen uns auf Ihre Nachricht. Unser Team meldet sich in der Regel innerhalb von 24 Stunden."})})]}),a.jsxs(K,{className:"medical-card overflow-hidden",children:[a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/awardsresidents2-image.png",alt:"Unser Team",className:"w-full h-56 object-cover"}),a.jsx(he,{className:"pt-4",children:a.jsx("p",{className:"text-muted-foreground",children:"ResidentTrack – entwickelt von Chirurg:innen für Chirurg:innen."})})]})]})]})})]}),fK=({currentImageUrl:s,onImageUploaded:e,onImageRemoved:t})=>{const[n,r]=w.useState(!1),[i,o]=w.useState(s||null),l=async d=>{var f;const h=(f=d.target.files)==null?void 0:f[0];if(h){if(!h.type.startsWith("image/")){ye.error("Bitte wählen Sie eine Bilddatei aus");return}if(h.size>10*1024*1024){ye.error("Datei ist zu groß. Maximal 10MB erlaubt.");return}r(!0);try{const m=h.name.split(".").pop(),p=`${Date.now()}-${Math.random().toString(36).substring(7)}.${m}`,{data:x,error:v}=await Z.storage.from("course-images").upload(p,h,{cacheControl:"3600",upsert:!1});if(v)throw v;const{data:{publicUrl:b}}=Z.storage.from("course-images").getPublicUrl(x.path);o(b),e(b),ye.success("Bild erfolgreich hochgeladen")}catch(m){console.error("Error uploading image:",m),ye.error("Fehler beim Hochladen des Bildes")}finally{r(!1),d.target.value=""}}},c=()=>{o(null),t()};return a.jsxs("div",{className:"space-y-3",children:[a.jsx(pe,{className:"text-foreground",children:"Kursbild"}),i?a.jsxs("div",{className:"relative w-full h-48 bg-muted rounded-lg overflow-hidden border-2 border-dashed border-border",children:[a.jsx("img",{src:i,alt:"Kurs Vorschau",className:"w-full h-full object-cover"}),a.jsx(q,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:c,children:a.jsx(go,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"w-full h-48 bg-muted rounded-lg border-2 border-dashed border-border flex flex-col items-center justify-center gap-3",children:[a.jsx(H$,{className:"h-12 w-12 text-muted-foreground"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Kein Bild ausgewählt"}),a.jsx(pe,{htmlFor:"image-upload",className:"cursor-pointer",children:a.jsx(q,{type:"button",variant:"outline",disabled:n,asChild:!0,children:a.jsxs("span",{children:[a.jsx(mb,{className:"h-4 w-4 mr-2"}),n?"Hochladen...":"Bild auswählen"]})})})]})]}),a.jsx(Te,{id:"image-upload",type:"file",accept:"image/*",onChange:l,disabled:n,className:"hidden"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützte Formate: JPG, PNG, WebP, GIF (max. 10MB)"})]})};function qe(s){const e=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&e==="[object Date]"?new s.constructor(+s):typeof s=="number"||e==="[object Number]"||typeof s=="string"||e==="[object String]"?new Date(s):new Date(NaN)}function Zn(s,e){return s instanceof Date?new s.constructor(e):new Date(e)}function Ks(s,e){const t=qe(s);return isNaN(e)?Zn(s,NaN):(e&&t.setDate(t.getDate()+e),t)}function li(s,e){const t=qe(s);if(isNaN(e))return Zn(s,NaN);if(!e)return t;const n=t.getDate(),r=Zn(s,t.getTime());r.setMonth(t.getMonth()+e+1,0);const i=r.getDate();return n>=i?r:(t.setFullYear(r.getFullYear(),r.getMonth(),n),t)}const NA=6048e5,mK=864e5;let pK={};function Uv(){return pK}function ia(s,e){var l,c,d,h;const t=Uv(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=qe(s),i=r.getDay(),o=(i<n?7:0)+i-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function du(s){return ia(s,{weekStartsOn:1})}function k4(s){const e=qe(s),t=e.getFullYear(),n=Zn(s,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const r=du(n),i=Zn(s,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=du(i);return e.getTime()>=r.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function Jf(s){const e=qe(s);return e.setHours(0,0,0,0),e}function Cy(s){const e=qe(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function Ki(s,e){const t=Jf(s),n=Jf(e),r=+t-Cy(t),i=+n-Cy(n);return Math.round((r-i)/mK)}function gK(s){const e=k4(s),t=Zn(s,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),du(t)}function gN(s,e){const t=e*7;return Ks(s,t)}function vK(s,e){return li(s,e*12)}function xK(s){let e;return s.forEach(function(t){const n=qe(t);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function yK(s){let e;return s.forEach(t=>{const n=qe(t);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function yn(s,e){const t=Jf(s),n=Jf(e);return+t==+n}function SA(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function bK(s){if(!SA(s)&&typeof s!="number")return!1;const e=qe(s);return!isNaN(Number(e))}function Bp(s,e){const t=qe(s),n=qe(e),r=t.getFullYear()-n.getFullYear(),i=t.getMonth()-n.getMonth();return r*12+i}function wK(s,e,t){const n=ia(s,t),r=ia(e,t),i=+n-Cy(n),o=+r-Cy(r);return Math.round((i-o)/NA)}function AA(s){const e=qe(s),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function _n(s){const e=qe(s);return e.setDate(1),e.setHours(0,0,0,0),e}function P4(s){const e=qe(s),t=Zn(s,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function EA(s,e){var l,c,d,h;const t=Uv(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=qe(s),i=r.getDay(),o=(i<n?-7:0)+6-(i-n);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function T4(s){return EA(s,{weekStartsOn:1})}const jK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_K=(s,e,t)=>{let n;const r=jK[s];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function gh(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const NK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},SK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},AK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},EK={date:gh({formats:NK,defaultWidth:"full"}),time:gh({formats:SK,defaultWidth:"full"}),dateTime:gh({formats:AK,defaultWidth:"full"})},CK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kK=(s,e,t,n)=>CK[s];function Vi(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let r;if(n==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,l=t!=null&&t.width?String(t.width):o;r=s.formattingValues[l]||s.formattingValues[o]}else{const o=s.defaultWidth,l=t!=null&&t.width?String(t.width):s.defaultWidth;r=s.values[l]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(e):e;return r[i]}}const PK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},TK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},RK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},MK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},IK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},DK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},OK=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},LK={ordinalNumber:OK,era:Vi({values:PK,defaultWidth:"wide"}),quarter:Vi({values:TK,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Vi({values:RK,defaultWidth:"wide"}),day:Vi({values:MK,defaultWidth:"wide"}),dayPeriod:Vi({values:IK,defaultWidth:"wide",formattingValues:DK,defaultFormattingWidth:"wide"})};function qi(s){return(e,t={})=>{const n=t.width,r=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],l=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],c=Array.isArray(l)?$K(l,f=>f.test(o)):FK(l,f=>f.test(o));let d;d=s.valueCallback?s.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function FK(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function $K(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function R4(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const r=n[0],i=e.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(r.length);return{value:o,rest:l}}}const zK=/^(\d+)(th|st|nd|rd)?/i,BK=/\d+/i,HK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},UK={any:[/^b/i,/^(a|c)/i]},WK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VK={any:[/1/i,/2/i,/3/i,/4/i]},qK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},GK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},YK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},XK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},QK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},JK={ordinalNumber:R4({matchPattern:zK,parsePattern:BK,valueCallback:s=>parseInt(s,10)}),era:qi({matchPatterns:HK,defaultMatchWidth:"wide",parsePatterns:UK,defaultParseWidth:"any"}),quarter:qi({matchPatterns:WK,defaultMatchWidth:"wide",parsePatterns:VK,defaultParseWidth:"any",valueCallback:s=>s+1}),month:qi({matchPatterns:qK,defaultMatchWidth:"wide",parsePatterns:GK,defaultParseWidth:"any"}),day:qi({matchPatterns:KK,defaultMatchWidth:"wide",parsePatterns:YK,defaultParseWidth:"any"}),dayPeriod:qi({matchPatterns:XK,defaultMatchWidth:"any",parsePatterns:QK,defaultParseWidth:"any"})},M4={code:"en-US",formatDistance:_K,formatLong:EK,formatRelative:kK,localize:LK,match:JK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ZK(s){const e=qe(s);return Ki(e,P4(e))+1}function I4(s){const e=qe(s),t=+du(e)-+gK(e);return Math.round(t/NA)+1}function D4(s,e){var h,f,m,p;const t=qe(s),n=t.getFullYear(),r=Uv(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=Zn(s,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=ia(o,e),c=Zn(s,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=ia(c,e);return t.getTime()>=l.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function eY(s,e){var l,c,d,h;const t=Uv(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,r=D4(s,e),i=Zn(s,0);return i.setFullYear(r,0,n),i.setHours(0,0,0,0),ia(i,e)}function O4(s,e){const t=qe(s),n=+ia(t,e)-+eY(t,e);return Math.round(n/NA)+1}function Ze(s,e){const t=s<0?"-":"",n=Math.abs(s).toString().padStart(e,"0");return t+n}const Eo={y(s,e){const t=s.getFullYear(),n=t>0?t:1-t;return Ze(e==="yy"?n%100:n,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):Ze(t+1,2)},d(s,e){return Ze(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return Ze(s.getHours()%12||12,e.length)},H(s,e){return Ze(s.getHours(),e.length)},m(s,e){return Ze(s.getMinutes(),e.length)},s(s,e){return Ze(s.getSeconds(),e.length)},S(s,e){const t=e.length,n=s.getMilliseconds(),r=Math.trunc(n*Math.pow(10,t-3));return Ze(r,e.length)}},Tu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qk={G:function(s,e,t){const n=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const n=s.getFullYear(),r=n>0?n:1-n;return t.ordinalNumber(r,{unit:"year"})}return Eo.y(s,e)},Y:function(s,e,t,n){const r=D4(s,n),i=r>0?r:1-r;if(e==="YY"){const o=i%100;return Ze(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Ze(i,e.length)},R:function(s,e){const t=k4(s);return Ze(t,e.length)},u:function(s,e){const t=s.getFullYear();return Ze(t,e.length)},Q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Ze(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Ze(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,e,t){const n=s.getMonth();switch(e){case"M":case"MM":return Eo.M(s,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(s,e,t){const n=s.getMonth();switch(e){case"L":return String(n+1);case"LL":return Ze(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(s,e,t,n){const r=O4(s,n);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Ze(r,e.length)},I:function(s,e,t){const n=I4(s);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Ze(n,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):Eo.d(s,e)},D:function(s,e,t){const n=ZK(s);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Ze(n,e.length)},E:function(s,e,t){const n=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(s,e,t,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ze(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(s,e,t,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ze(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(s,e,t){const n=s.getDay(),r=n===0?7:n;switch(e){case"i":return String(r);case"ii":return Ze(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(s,e,t){const r=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(s,e,t){const n=s.getHours();let r;switch(n===12?r=Tu.noon:n===0?r=Tu.midnight:r=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(s,e,t){const n=s.getHours();let r;switch(n>=17?r=Tu.evening:n>=12?r=Tu.afternoon:n>=4?r=Tu.morning:r=Tu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let n=s.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Eo.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):Eo.H(s,e)},K:function(s,e,t){const n=s.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Ze(n,e.length)},k:function(s,e,t){let n=s.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Ze(n,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):Eo.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):Eo.s(s,e)},S:function(s,e){return Eo.S(s,e)},X:function(s,e,t){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Kk(n);case"XXXX":case"XX":return Nc(n);case"XXXXX":case"XXX":default:return Nc(n,":")}},x:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"x":return Kk(n);case"xxxx":case"xx":return Nc(n);case"xxxxx":case"xxx":default:return Nc(n,":")}},O:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Gk(n,":");case"OOOO":default:return"GMT"+Nc(n,":")}},z:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Gk(n,":");case"zzzz":default:return"GMT"+Nc(n,":")}},t:function(s,e,t){const n=Math.trunc(s.getTime()/1e3);return Ze(n,e.length)},T:function(s,e,t){const n=s.getTime();return Ze(n,e.length)}};function Gk(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),r=Math.trunc(n/60),i=n%60;return i===0?t+String(r):t+String(r)+e+Ze(i,2)}function Kk(s,e){return s%60===0?(s>0?"-":"+")+Ze(Math.abs(s)/60,2):Nc(s,e)}function Nc(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),r=Ze(Math.trunc(n/60),2),i=Ze(n%60,2);return t+r+e+i}const Yk=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},L4=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},tY=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],n=t[1],r=t[2];if(!r)return Yk(s,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Yk(n,e)).replace("{{time}}",L4(r,e))},sY={p:L4,P:tY},nY=/^D+$/,rY=/^Y+$/,iY=["D","DD","YY","YYYY"];function aY(s){return nY.test(s)}function oY(s){return rY.test(s)}function lY(s,e,t){const n=cY(s,e,t);if(console.warn(n),iY.includes(s))throw new RangeError(n)}function cY(s,e,t){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const dY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,uY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hY=/^'([^]*?)'?$/,fY=/''/g,mY=/[a-zA-Z]/;function ta(s,e,t){var h,f,m,p,x,v,b,g;const n=Uv(),r=(t==null?void 0:t.locale)??n.locale??M4,i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((v=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((g=(b=n.locale)==null?void 0:b.options)==null?void 0:g.weekStartsOn)??0,l=qe(s);if(!bK(l))throw new RangeError("Invalid time value");let c=e.match(uY).map(y=>{const j=y[0];if(j==="p"||j==="P"){const _=sY[j];return _(y,r.formatLong)}return y}).join("").match(dY).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const j=y[0];if(j==="'")return{isToken:!1,value:pY(y)};if(qk[j])return{isToken:!0,value:y};if(j.match(mY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:y}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return c.map(y=>{if(!y.isToken)return y.value;const j=y.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&oY(j)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&aY(j))&&lY(j,e,String(s));const _=qk[j[0]];return _(l,j,r.localize,d)}).join("")}function pY(s){const e=s.match(hY);return e?e[1].replace(fY,"'"):s}function gY(s){const e=qe(s),t=e.getFullYear(),n=e.getMonth(),r=Zn(s,0);return r.setFullYear(t,n+1,0),r.setHours(0,0,0,0),r.getDate()}function vY(s){return Math.trunc(+qe(s)/1e3)}function xY(s){const e=qe(s),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function yY(s,e){return wK(xY(s),_n(s),e)+1}function vN(s,e){const t=qe(s),n=qe(e);return t.getTime()>n.getTime()}function F4(s,e){const t=qe(s),n=qe(e);return+t<+n}function CA(s,e){const t=qe(s),n=qe(e);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()}function bY(s,e){const t=qe(s),n=qe(e);return t.getFullYear()===n.getFullYear()}function o1(s,e){return Ks(s,-e)}function l1(s,e){const t=qe(s),n=t.getFullYear(),r=t.getDate(),i=Zn(s,0);i.setFullYear(n,e,15),i.setHours(0,0,0,0);const o=gY(i);return t.setMonth(e,Math.min(r,o)),t}function Xk(s,e){const t=qe(s);return isNaN(+t)?Zn(s,NaN):(t.setFullYear(e),t)}const Qk={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},wY=(s,e,t)=>{let n;const r=t!=null&&t.addSuffix?Qk[s].withPreposition:Qk[s].standalone;return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:"vor "+n:n},jY={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},_Y={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},NY={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},SY={date:gh({formats:jY,defaultWidth:"full"}),time:gh({formats:_Y,defaultWidth:"full"}),dateTime:gh({formats:NY,defaultWidth:"full"})},AY={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},EY=(s,e,t,n)=>AY[s],CY={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},kY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},xN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},PY={narrow:xN.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:xN.wide},TY={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},RY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},MY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},IY=s=>Number(s)+".",DY={ordinalNumber:IY,era:Vi({values:CY,defaultWidth:"wide"}),quarter:Vi({values:kY,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Vi({values:xN,formattingValues:PY,defaultWidth:"wide"}),day:Vi({values:TY,defaultWidth:"wide"}),dayPeriod:Vi({values:RY,defaultWidth:"wide",formattingValues:MY,defaultFormattingWidth:"wide"})},OY=/^(\d+)(\.)?/i,LY=/\d+/i,FY={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},$Y={any:[/^v/i,/^n/i]},zY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},BY={any:[/1/i,/2/i,/3/i,/4/i]},HY={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},UY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WY={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},VY={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},qY={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},GY={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},KY={ordinalNumber:R4({matchPattern:OY,parsePattern:LY,valueCallback:s=>parseInt(s)}),era:qi({matchPatterns:FY,defaultMatchWidth:"wide",parsePatterns:$Y,defaultParseWidth:"any"}),quarter:qi({matchPatterns:zY,defaultMatchWidth:"wide",parsePatterns:BY,defaultParseWidth:"any",valueCallback:s=>s+1}),month:qi({matchPatterns:HY,defaultMatchWidth:"wide",parsePatterns:UY,defaultParseWidth:"any"}),day:qi({matchPatterns:WY,defaultMatchWidth:"wide",parsePatterns:VY,defaultParseWidth:"any"}),dayPeriod:qi({matchPatterns:qY,defaultMatchWidth:"wide",parsePatterns:GY,defaultParseWidth:"any"})},c1={code:"de",formatDistance:wY,formatLong:SY,formatRelative:EY,localize:DY,match:KY,options:{weekStartsOn:1,firstWeekContainsDate:4}};var xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xe.apply(this,arguments)};function YY(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function $4(s,e,t){for(var n=0,r=e.length,i;n<r;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return s.concat(i||Array.prototype.slice.call(e))}function Wv(s){return s.mode==="multiple"}function Vv(s){return s.mode==="range"}function Gb(s){return s.mode==="single"}var XY={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function QY(s,e){return ta(s,"LLLL y",e)}function JY(s,e){return ta(s,"d",e)}function ZY(s,e){return ta(s,"LLLL",e)}function eX(s){return"".concat(s)}function tX(s,e){return ta(s,"cccccc",e)}function sX(s,e){return ta(s,"yyyy",e)}var nX=Object.freeze({__proto__:null,formatCaption:QY,formatDay:JY,formatMonthCaption:ZY,formatWeekNumber:eX,formatWeekdayName:tX,formatYearCaption:sX}),rX=function(s,e,t){return ta(s,"do MMMM (EEEE)",t)},iX=function(){return"Month: "},aX=function(){return"Go to next month"},oX=function(){return"Go to previous month"},lX=function(s,e){return ta(s,"cccc",e)},cX=function(s){return"Week n. ".concat(s)},dX=function(){return"Year: "},uX=Object.freeze({__proto__:null,labelDay:rX,labelMonthDropdown:iX,labelNext:aX,labelPrevious:oX,labelWeekNumber:cX,labelWeekday:lX,labelYearDropdown:dX});function hX(){var s="buttons",e=XY,t=M4,n={},r={},i=1,o={},l=new Date;return{captionLayout:s,classNames:e,formatters:nX,labels:uX,locale:t,modifiersClassNames:n,modifiers:r,numberOfMonths:i,styles:o,today:l,mode:"default"}}function fX(s){var e=s.fromYear,t=s.toYear,n=s.fromMonth,r=s.toMonth,i=s.fromDate,o=s.toDate;return n?i=_n(n):e&&(i=new Date(e,0,1)),r?o=AA(r):t&&(o=new Date(t,11,31)),{fromDate:i?Jf(i):void 0,toDate:o?Jf(o):void 0}}var z4=w.createContext(void 0);function mX(s){var e,t=s.initialProps,n=hX(),r=fX(t),i=r.fromDate,o=r.toDate,l=(e=t.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(Gb(t)||Wv(t)||Vv(t))&&(c=t.onSelect);var d=xe(xe(xe({},n),t),{captionLayout:l,classNames:xe(xe({},n.classNames),t.classNames),components:xe({},t.components),formatters:xe(xe({},n.formatters),t.formatters),fromDate:i,labels:xe(xe({},n.labels),t.labels),mode:t.mode||n.mode,modifiers:xe(xe({},n.modifiers),t.modifiers),modifiersClassNames:xe(xe({},n.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:xe(xe({},n.styles),t.styles),toDate:o});return a.jsx(z4.Provider,{value:d,children:s.children})}function ct(){var s=w.useContext(z4);if(!s)throw new Error("useDayPicker must be used within a DayPickerProvider.");return s}function B4(s){var e=ct(),t=e.locale,n=e.classNames,r=e.styles,i=e.formatters.formatCaption;return a.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:s.id,children:i(s.displayMonth,{locale:t})})}function pX(s){return a.jsx("svg",xe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},s,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function H4(s){var e,t,n=s.onChange,r=s.value,i=s.children,o=s.caption,l=s.className,c=s.style,d=ct(),h=(t=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:pX;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:d.classNames.vhidden,children:s["aria-label"]}),a.jsx("select",{name:s.name,"aria-label":s["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:r,onChange:n,children:i}),a.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,a.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function gX(s){var e,t=ct(),n=t.fromDate,r=t.toDate,i=t.styles,o=t.locale,l=t.formatters.formatMonthCaption,c=t.classNames,d=t.components,h=t.labels.labelMonthDropdown;if(!n)return a.jsx(a.Fragment,{});if(!r)return a.jsx(a.Fragment,{});var f=[];if(bY(n,r))for(var m=_n(n),p=n.getMonth();p<=r.getMonth();p++)f.push(l1(m,p));else for(var m=_n(new Date),p=0;p<=11;p++)f.push(l1(m,p));var x=function(b){var g=Number(b.target.value),y=l1(_n(s.displayMonth),g);s.onChange(y)},v=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:H4;return a.jsx(v,{name:"months","aria-label":h(),className:c.dropdown_month,style:i.dropdown_month,onChange:x,value:s.displayMonth.getMonth(),caption:l(s.displayMonth,{locale:o}),children:f.map(function(b){return a.jsx("option",{value:b.getMonth(),children:l(b,{locale:o})},b.getMonth())})})}function vX(s){var e,t=s.displayMonth,n=ct(),r=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,h=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,m=[];if(!r)return a.jsx(a.Fragment,{});if(!i)return a.jsx(a.Fragment,{});for(var p=r.getFullYear(),x=i.getFullYear(),v=p;v<=x;v++)m.push(Xk(P4(new Date),v));var b=function(y){var j=Xk(_n(t),Number(y.target.value));s.onChange(j)},g=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:H4;return a.jsx(g,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:t.getFullYear(),caption:h(t,{locale:o}),children:m.map(function(y){return a.jsx("option",{value:y.getFullYear(),children:h(y,{locale:o})},y.getFullYear())})})}function xX(s,e){var t=w.useState(s),n=t[0],r=t[1],i=e===void 0?n:e;return[i,r]}function yX(s){var e=s.month,t=s.defaultMonth,n=s.today,r=e||t||n||new Date,i=s.toDate,o=s.fromDate,l=s.numberOfMonths,c=l===void 0?1:l;if(i&&Bp(i,r)<0){var d=-1*(c-1);r=li(i,d)}return o&&Bp(r,o)<0&&(r=o),_n(r)}function bX(){var s=ct(),e=yX(s),t=xX(e,s.month),n=t[0],r=t[1],i=function(o){var l;if(!s.disableNavigation){var c=_n(o);r(c),(l=s.onMonthChange)===null||l===void 0||l.call(s,c)}};return[n,i]}function wX(s,e){for(var t=e.reverseMonths,n=e.numberOfMonths,r=_n(s),i=_n(li(r,n)),o=Bp(i,r),l=[],c=0;c<o;c++){var d=li(r,c);l.push(d)}return t&&(l=l.reverse()),l}function jX(s,e){if(!e.disableNavigation){var t=e.toDate,n=e.pagedNavigation,r=e.numberOfMonths,i=r===void 0?1:r,o=n?i:1,l=_n(s);if(!t)return li(l,o);var c=Bp(t,s);if(!(c<i))return li(l,o)}}function _X(s,e){if(!e.disableNavigation){var t=e.fromDate,n=e.pagedNavigation,r=e.numberOfMonths,i=r===void 0?1:r,o=n?i:1,l=_n(s);if(!t)return li(l,-o);var c=Bp(l,t);if(!(c<=0))return li(l,-o)}}var U4=w.createContext(void 0);function NX(s){var e=ct(),t=bX(),n=t[0],r=t[1],i=wX(n,e),o=jX(n,e),l=_X(n,e),c=function(f){return i.some(function(m){return CA(f,m)})},d=function(f,m){c(f)||(m&&F4(f,m)?r(li(f,1+e.numberOfMonths*-1)):r(f))},h={currentMonth:n,displayMonths:i,goToMonth:r,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return a.jsx(U4.Provider,{value:h,children:s.children})}function qv(){var s=w.useContext(U4);if(!s)throw new Error("useNavigation must be used within a NavigationProvider");return s}function Jk(s){var e,t=ct(),n=t.classNames,r=t.styles,i=t.components,o=qv().goToMonth,l=function(h){o(li(h,s.displayIndex?-s.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:B4,d=a.jsx(c,{id:s.id,displayMonth:s.displayMonth});return a.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[a.jsx("div",{className:n.vhidden,children:d}),a.jsx(gX,{onChange:l,displayMonth:s.displayMonth}),a.jsx(vX,{onChange:l,displayMonth:s.displayMonth})]})}function SX(s){return a.jsx("svg",xe({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function AX(s){return a.jsx("svg",xe({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ky=w.forwardRef(function(s,e){var t=ct(),n=t.classNames,r=t.styles,i=[n.button_reset,n.button];s.className&&i.push(s.className);var o=i.join(" "),l=xe(xe({},r.button_reset),r.button);return s.style&&Object.assign(l,s.style),a.jsx("button",xe({},s,{ref:e,type:"button",className:o,style:l}))});function EX(s){var e,t,n=ct(),r=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,h=c.labelNext,f=n.components;if(!s.nextMonth&&!s.previousMonth)return a.jsx(a.Fragment,{});var m=d(s.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),x=h(s.nextMonth,{locale:i}),v=[o.nav_button,o.nav_button_next].join(" "),b=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:AX,g=(t=f==null?void 0:f.IconLeft)!==null&&t!==void 0?t:SX;return a.jsxs("div",{className:o.nav,style:l.nav,children:[!s.hidePrevious&&a.jsx(ky,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!s.previousMonth,onClick:s.onPreviousClick,children:r==="rtl"?a.jsx(b,{className:o.nav_icon,style:l.nav_icon}):a.jsx(g,{className:o.nav_icon,style:l.nav_icon})}),!s.hideNext&&a.jsx(ky,{name:"next-month","aria-label":x,className:v,style:l.nav_button_next,disabled:!s.nextMonth,onClick:s.onNextClick,children:r==="rtl"?a.jsx(g,{className:o.nav_icon,style:l.nav_icon}):a.jsx(b,{className:o.nav_icon,style:l.nav_icon})})]})}function Zk(s){var e=ct().numberOfMonths,t=qv(),n=t.previousMonth,r=t.nextMonth,i=t.goToMonth,o=t.displayMonths,l=o.findIndex(function(x){return CA(s.displayMonth,x)}),c=l===0,d=l===o.length-1,h=e>1&&(c||!d),f=e>1&&(d||!c),m=function(){n&&i(n)},p=function(){r&&i(r)};return a.jsx(EX,{displayMonth:s.displayMonth,hideNext:h,hidePrevious:f,nextMonth:r,previousMonth:n,onPreviousClick:m,onNextClick:p})}function CX(s){var e,t=ct(),n=t.classNames,r=t.disableNavigation,i=t.styles,o=t.captionLayout,l=t.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:B4,d;return r?d=a.jsx(c,{id:s.id,displayMonth:s.displayMonth}):o==="dropdown"?d=a.jsx(Jk,{displayMonth:s.displayMonth,id:s.id}):o==="dropdown-buttons"?d=a.jsxs(a.Fragment,{children:[a.jsx(Jk,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id}),a.jsx(Zk,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id})]}):d=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:s.id,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),a.jsx(Zk,{displayMonth:s.displayMonth,id:s.id})]}),a.jsx("div",{className:n.caption,style:i.caption,children:d})}function kX(s){var e=ct(),t=e.footer,n=e.styles,r=e.classNames.tfoot;return t?a.jsx("tfoot",{className:r,style:n.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:t})})}):a.jsx(a.Fragment,{})}function PX(s,e,t){for(var n=t?du(new Date):ia(new Date,{locale:s,weekStartsOn:e}),r=[],i=0;i<7;i++){var o=Ks(n,i);r.push(o)}return r}function TX(){var s=ct(),e=s.classNames,t=s.styles,n=s.showWeekNumber,r=s.locale,i=s.weekStartsOn,o=s.ISOWeek,l=s.formatters.formatWeekdayName,c=s.labels.labelWeekday,d=PX(r,i,o);return a.jsxs("tr",{style:t.head_row,className:e.head_row,children:[n&&a.jsx("td",{style:t.head_cell,className:e.head_cell}),d.map(function(h,f){return a.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":c(h,{locale:r}),children:l(h,{locale:r})},f)})]})}function RX(){var s,e=ct(),t=e.classNames,n=e.styles,r=e.components,i=(s=r==null?void 0:r.HeadRow)!==null&&s!==void 0?s:TX;return a.jsx("thead",{style:n.head,className:t.head,children:a.jsx(i,{})})}function MX(s){var e=ct(),t=e.locale,n=e.formatters.formatDay;return a.jsx(a.Fragment,{children:n(s.date,{locale:t})})}var kA=w.createContext(void 0);function IX(s){if(!Wv(s.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(kA.Provider,{value:e,children:s.children})}return a.jsx(DX,{initialProps:s.initialProps,children:s.children})}function DX(s){var e=s.initialProps,t=s.children,n=e.selected,r=e.min,i=e.max,o=function(d,h,f){var m,p;(m=e.onDayClick)===null||m===void 0||m.call(e,d,h,f);var x=!!(h.selected&&r&&(n==null?void 0:n.length)===r);if(!x){var v=!!(!h.selected&&i&&(n==null?void 0:n.length)===i);if(!v){var b=n?$4([],n):[];if(h.selected){var g=b.findIndex(function(y){return yn(d,y)});b.splice(g,1)}else b.push(d);(p=e.onSelect)===null||p===void 0||p.call(e,b,d,h,f)}}},l={disabled:[]};n&&l.disabled.push(function(d){var h=i&&n.length>i-1,f=n.some(function(m){return yn(m,d)});return!!(h&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return a.jsx(kA.Provider,{value:c,children:t})}function PA(){var s=w.useContext(kA);if(!s)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return s}function OX(s,e){var t=e||{},n=t.from,r=t.to;return n&&r?yn(r,s)&&yn(n,s)?void 0:yn(r,s)?{from:r,to:void 0}:yn(n,s)?void 0:vN(n,s)?{from:s,to:r}:{from:n,to:s}:r?vN(s,r)?{from:r,to:s}:{from:s,to:r}:n?F4(s,n)?{from:s,to:n}:{from:n,to:s}:{from:s,to:void 0}}var TA=w.createContext(void 0);function LX(s){if(!Vv(s.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(TA.Provider,{value:e,children:s.children})}return a.jsx(FX,{initialProps:s.initialProps,children:s.children})}function FX(s){var e=s.initialProps,t=s.children,n=e.selected,r=n||{},i=r.from,o=r.to,l=e.min,c=e.max,d=function(p,x,v){var b,g;(b=e.onDayClick)===null||b===void 0||b.call(e,p,x,v);var y=OX(p,n);(g=e.onSelect)===null||g===void 0||g.call(e,y,p,x,v)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],o?(h.range_end=[o],yn(i,o)||(h.range_middle=[{after:i,before:o}])):h.range_end=[i]):o&&(h.range_start=[o],h.range_end=[o]),l&&(i&&!o&&h.disabled.push({after:o1(i,l-1),before:Ks(i,l-1)}),i&&o&&h.disabled.push({after:i,before:Ks(i,l-1)}),!i&&o&&h.disabled.push({after:o1(o,l-1),before:Ks(o,l-1)})),c){if(i&&!o&&(h.disabled.push({before:Ks(i,-c+1)}),h.disabled.push({after:Ks(i,c-1)})),i&&o){var f=Ki(o,i)+1,m=c-f;h.disabled.push({before:o1(i,m)}),h.disabled.push({after:Ks(o,m)})}!i&&o&&(h.disabled.push({before:Ks(o,-c+1)}),h.disabled.push({after:Ks(o,c-1)}))}return a.jsx(TA.Provider,{value:{selected:n,onDayClick:d,modifiers:h},children:t})}function RA(){var s=w.useContext(TA);if(!s)throw new Error("useSelectRange must be used within a SelectRangeProvider");return s}function k0(s){return Array.isArray(s)?$4([],s):s!==void 0?[s]:[]}function $X(s){var e={};return Object.entries(s).forEach(function(t){var n=t[0],r=t[1];e[n]=k0(r)}),e}var ci;(function(s){s.Outside="outside",s.Disabled="disabled",s.Selected="selected",s.Hidden="hidden",s.Today="today",s.RangeStart="range_start",s.RangeEnd="range_end",s.RangeMiddle="range_middle"})(ci||(ci={}));var zX=ci.Selected,ua=ci.Disabled,BX=ci.Hidden,HX=ci.Today,d1=ci.RangeEnd,u1=ci.RangeMiddle,h1=ci.RangeStart,UX=ci.Outside;function WX(s,e,t){var n,r=(n={},n[zX]=k0(s.selected),n[ua]=k0(s.disabled),n[BX]=k0(s.hidden),n[HX]=[s.today],n[d1]=[],n[u1]=[],n[h1]=[],n[UX]=[],n);return s.fromDate&&r[ua].push({before:s.fromDate}),s.toDate&&r[ua].push({after:s.toDate}),Wv(s)?r[ua]=r[ua].concat(e.modifiers[ua]):Vv(s)&&(r[ua]=r[ua].concat(t.modifiers[ua]),r[h1]=t.modifiers[h1],r[u1]=t.modifiers[u1],r[d1]=t.modifiers[d1]),r}var W4=w.createContext(void 0);function VX(s){var e=ct(),t=PA(),n=RA(),r=WX(e,t,n),i=$X(e.modifiers),o=xe(xe({},r),i);return a.jsx(W4.Provider,{value:o,children:s.children})}function V4(){var s=w.useContext(W4);if(!s)throw new Error("useModifiers must be used within a ModifiersProvider");return s}function qX(s){return!!(s&&typeof s=="object"&&"before"in s&&"after"in s)}function GX(s){return!!(s&&typeof s=="object"&&"from"in s)}function KX(s){return!!(s&&typeof s=="object"&&"after"in s)}function YX(s){return!!(s&&typeof s=="object"&&"before"in s)}function XX(s){return!!(s&&typeof s=="object"&&"dayOfWeek"in s)}function QX(s,e){var t,n=e.from,r=e.to;if(n&&r){var i=Ki(r,n)<0;i&&(t=[r,n],n=t[0],r=t[1]);var o=Ki(s,n)>=0&&Ki(r,s)>=0;return o}return r?yn(r,s):n?yn(n,s):!1}function JX(s){return SA(s)}function ZX(s){return Array.isArray(s)&&s.every(SA)}function eQ(s,e){return e.some(function(t){if(typeof t=="boolean")return t;if(JX(t))return yn(s,t);if(ZX(t))return t.includes(s);if(GX(t))return QX(s,t);if(XX(t))return t.dayOfWeek.includes(s.getDay());if(qX(t)){var n=Ki(t.before,s),r=Ki(t.after,s),i=n>0,o=r<0,l=vN(t.before,t.after);return l?o&&i:i||o}return KX(t)?Ki(s,t.after)>0:YX(t)?Ki(t.before,s)>0:typeof t=="function"?t(s):!1})}function MA(s,e,t){var n=Object.keys(e).reduce(function(i,o){var l=e[o];return eQ(s,l)&&i.push(o),i},[]),r={};return n.forEach(function(i){return r[i]=!0}),t&&!CA(s,t)&&(r.outside=!0),r}function tQ(s,e){for(var t=_n(s[0]),n=AA(s[s.length-1]),r,i,o=t;o<=n;){var l=MA(o,e),c=!l.disabled&&!l.hidden;if(!c){o=Ks(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),r||(r=o),o=Ks(o,1)}return i||r}var sQ=365;function q4(s,e){var t=e.moveBy,n=e.direction,r=e.context,i=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:s}:o,c=r.weekStartsOn,d=r.fromDate,h=r.toDate,f=r.locale,m={day:Ks,week:gN,month:li,year:vK,startOfWeek:function(b){return r.ISOWeek?du(b):ia(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return r.ISOWeek?T4(b):EA(b,{locale:f,weekStartsOn:c})}},p=m[t](s,n==="after"?1:-1);n==="before"&&d?p=xK([d,p]):n==="after"&&h&&(p=yK([h,p]));var x=!0;if(i){var v=MA(p,i);x=!v.disabled&&!v.hidden}return x?p:l.count>sQ?l.lastFocused:q4(p,{moveBy:t,direction:n,context:r,modifiers:i,retry:xe(xe({},l),{count:l.count+1})})}var G4=w.createContext(void 0);function nQ(s){var e=qv(),t=V4(),n=w.useState(),r=n[0],i=n[1],o=w.useState(),l=o[0],c=o[1],d=tQ(e.displayMonths,t),h=r??(l&&e.isDateDisplayed(l))?l:d,f=function(){c(r),i(void 0)},m=function(b){i(b)},p=ct(),x=function(b,g){if(r){var y=q4(r,{moveBy:b,direction:g,context:p,modifiers:t});yn(r,y)||(e.goToDate(y,r),m(y))}},v={focusedDay:r,focusTarget:h,blur:f,focus:m,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return a.jsx(G4.Provider,{value:v,children:s.children})}function IA(){var s=w.useContext(G4);if(!s)throw new Error("useFocusContext must be used within a FocusProvider");return s}function rQ(s,e){var t=V4(),n=MA(s,t,e);return n}var DA=w.createContext(void 0);function iQ(s){if(!Gb(s.initialProps)){var e={selected:void 0};return a.jsx(DA.Provider,{value:e,children:s.children})}return a.jsx(aQ,{initialProps:s.initialProps,children:s.children})}function aQ(s){var e=s.initialProps,t=s.children,n=function(i,o,l){var c,d,h;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,o,l),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,i,o,l);return}(h=e.onSelect)===null||h===void 0||h.call(e,i,i,o,l)},r={selected:e.selected,onDayClick:n};return a.jsx(DA.Provider,{value:r,children:t})}function K4(){var s=w.useContext(DA);if(!s)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return s}function oQ(s,e){var t=ct(),n=K4(),r=PA(),i=RA(),o=IA(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,h=o.focusWeekBefore,f=o.blur,m=o.focus,p=o.focusMonthBefore,x=o.focusMonthAfter,v=o.focusYearBefore,b=o.focusYearAfter,g=o.focusStartOfWeek,y=o.focusEndOfWeek,j=function(F){var D,R,H,X;Gb(t)?(D=n.onDayClick)===null||D===void 0||D.call(n,s,e,F):Wv(t)?(R=r.onDayClick)===null||R===void 0||R.call(r,s,e,F):Vv(t)?(H=i.onDayClick)===null||H===void 0||H.call(i,s,e,F):(X=t.onDayClick)===null||X===void 0||X.call(t,s,e,F)},_=function(F){var D;m(s),(D=t.onDayFocus)===null||D===void 0||D.call(t,s,e,F)},S=function(F){var D;f(),(D=t.onDayBlur)===null||D===void 0||D.call(t,s,e,F)},E=function(F){var D;(D=t.onDayMouseEnter)===null||D===void 0||D.call(t,s,e,F)},A=function(F){var D;(D=t.onDayMouseLeave)===null||D===void 0||D.call(t,s,e,F)},P=function(F){var D;(D=t.onDayPointerEnter)===null||D===void 0||D.call(t,s,e,F)},T=function(F){var D;(D=t.onDayPointerLeave)===null||D===void 0||D.call(t,s,e,F)},I=function(F){var D;(D=t.onDayTouchCancel)===null||D===void 0||D.call(t,s,e,F)},O=function(F){var D;(D=t.onDayTouchEnd)===null||D===void 0||D.call(t,s,e,F)},L=function(F){var D;(D=t.onDayTouchMove)===null||D===void 0||D.call(t,s,e,F)},z=function(F){var D;(D=t.onDayTouchStart)===null||D===void 0||D.call(t,s,e,F)},M=function(F){var D;(D=t.onDayKeyUp)===null||D===void 0||D.call(t,s,e,F)},U=function(F){var D;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),t.dir==="rtl"?l():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),t.dir==="rtl"?c():l();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),d();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),h();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?v():p();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?b():x();break;case"Home":F.preventDefault(),F.stopPropagation(),g();break;case"End":F.preventDefault(),F.stopPropagation(),y();break}(D=t.onDayKeyDown)===null||D===void 0||D.call(t,s,e,F)},$={onClick:j,onFocus:_,onBlur:S,onKeyDown:U,onKeyUp:M,onMouseEnter:E,onMouseLeave:A,onPointerEnter:P,onPointerLeave:T,onTouchCancel:I,onTouchEnd:O,onTouchMove:L,onTouchStart:z};return $}function lQ(){var s=ct(),e=K4(),t=PA(),n=RA(),r=Gb(s)?e.selected:Wv(s)?t.selected:Vv(s)?n.selected:void 0;return r}function cQ(s){return Object.values(ci).includes(s)}function dQ(s,e){var t=[s.classNames.day];return Object.keys(e).forEach(function(n){var r=s.modifiersClassNames[n];if(r)t.push(r);else if(cQ(n)){var i=s.classNames["day_".concat(n)];i&&t.push(i)}}),t}function uQ(s,e){var t=xe({},s.styles.day);return Object.keys(e).forEach(function(n){var r;t=xe(xe({},t),(r=s.modifiersStyles)===null||r===void 0?void 0:r[n])}),t}function hQ(s,e,t){var n,r,i,o=ct(),l=IA(),c=rQ(s,e),d=oQ(s,c),h=lQ(),f=!!(o.onDayClick||o.mode!=="default");w.useEffect(function(){var E;c.outside||l.focusedDay&&f&&yn(l.focusedDay,s)&&((E=t.current)===null||E===void 0||E.focus())},[l.focusedDay,s,t,f,c.outside]);var m=dQ(o,c).join(" "),p=uQ(o,c),x=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(i=(r=o.components)===null||r===void 0?void 0:r.DayContent)!==null&&i!==void 0?i:MX,b=a.jsx(v,{date:s,displayMonth:e,activeModifiers:c}),g={style:p,className:m,children:b,role:"gridcell"},y=l.focusTarget&&yn(l.focusTarget,s)&&!c.outside,j=l.focusedDay&&yn(l.focusedDay,s),_=xe(xe(xe({},g),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=j||y?0:-1,n)),d),S={isButton:f,isHidden:x,activeModifiers:c,selectedDays:h,buttonProps:_,divProps:g};return S}function fQ(s){var e=w.useRef(null),t=hQ(s.date,s.displayMonth,e);return t.isHidden?a.jsx("div",{role:"gridcell"}):t.isButton?a.jsx(ky,xe({name:"day",ref:e},t.buttonProps)):a.jsx("div",xe({},t.divProps))}function mQ(s){var e=s.number,t=s.dates,n=ct(),r=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,h=d(Number(e),{locale:l});if(!r)return a.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:h});var f=c(Number(e),{locale:l}),m=function(p){r(e,t,p)};return a.jsx(ky,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:m,children:h})}function pQ(s){var e,t,n=ct(),r=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:fQ,d=(t=l==null?void 0:l.WeekNumber)!==null&&t!==void 0?t:mQ,h;return o&&(h=a.jsx("td",{className:i.cell,style:r.cell,children:a.jsx(d,{number:s.weekNumber,dates:s.dates})})),a.jsxs("tr",{className:i.row,style:r.row,children:[h,s.dates.map(function(f){return a.jsx("td",{className:i.cell,style:r.cell,role:"presentation",children:a.jsx(c,{displayMonth:s.displayMonth,date:f})},vY(f))})]})}function e2(s,e,t){for(var n=t!=null&&t.ISOWeek?T4(e):EA(e,t),r=t!=null&&t.ISOWeek?du(s):ia(s,t),i=Ki(n,r),o=[],l=0;l<=i;l++)o.push(Ks(r,l));var c=o.reduce(function(d,h){var f=t!=null&&t.ISOWeek?I4(h):O4(h,t),m=d.find(function(p){return p.weekNumber===f});return m?(m.dates.push(h),d):(d.push({weekNumber:f,dates:[h]}),d)},[]);return c}function gQ(s,e){var t=e2(_n(s),AA(s),e);if(e!=null&&e.useFixedWeeks){var n=yY(s,e);if(n<6){var r=t[t.length-1],i=r.dates[r.dates.length-1],o=gN(i,6-n),l=e2(gN(i,1),o,e);t.push.apply(t,l)}}return t}function vQ(s){var e,t,n,r=ct(),i=r.locale,o=r.classNames,l=r.styles,c=r.hideHead,d=r.fixedWeeks,h=r.components,f=r.weekStartsOn,m=r.firstWeekContainsDate,p=r.ISOWeek,x=gQ(s.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:f,firstWeekContainsDate:m}),v=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:RX,b=(t=h==null?void 0:h.Row)!==null&&t!==void 0?t:pQ,g=(n=h==null?void 0:h.Footer)!==null&&n!==void 0?n:kX;return a.jsxs("table",{id:s.id,className:o.table,style:l.table,role:"grid","aria-labelledby":s["aria-labelledby"],children:[!c&&a.jsx(v,{}),a.jsx("tbody",{className:o.tbody,style:l.tbody,children:x.map(function(y){return a.jsx(b,{displayMonth:s.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),a.jsx(g,{displayMonth:s.displayMonth})]})}function xQ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var yQ=xQ()?w.useLayoutEffect:w.useEffect,f1=!1,bQ=0;function t2(){return"react-day-picker-".concat(++bQ)}function wQ(s){var e,t=s??(f1?t2():null),n=w.useState(t),r=n[0],i=n[1];return yQ(function(){r===null&&i(t2())},[]),w.useEffect(function(){f1===!1&&(f1=!0)},[]),(e=s??r)!==null&&e!==void 0?e:void 0}function jQ(s){var e,t,n=ct(),r=n.dir,i=n.classNames,o=n.styles,l=n.components,c=qv().displayMonths,d=wQ(n.id?"".concat(n.id,"-").concat(s.displayIndex):void 0),h=n.id?"".concat(n.id,"-grid-").concat(s.displayIndex):void 0,f=[i.month],m=o.month,p=s.displayIndex===0,x=s.displayIndex===c.length-1,v=!p&&!x;r==="rtl"&&(e=[p,x],x=e[0],p=e[1]),p&&(f.push(i.caption_start),m=xe(xe({},m),o.caption_start)),x&&(f.push(i.caption_end),m=xe(xe({},m),o.caption_end)),v&&(f.push(i.caption_between),m=xe(xe({},m),o.caption_between));var b=(t=l==null?void 0:l.Caption)!==null&&t!==void 0?t:CX;return a.jsxs("div",{className:f.join(" "),style:m,children:[a.jsx(b,{id:d,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),a.jsx(vQ,{id:h,"aria-labelledby":d,displayMonth:s.displayMonth})]},s.displayIndex)}function _Q(s){var e=ct(),t=e.classNames,n=e.styles;return a.jsx("div",{className:t.months,style:n.months,children:s.children})}function NQ(s){var e,t,n=s.initialProps,r=ct(),i=IA(),o=qv(),l=w.useState(!1),c=l[0],d=l[1];w.useEffect(function(){r.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[r.initialFocus,c,i.focus,i.focusTarget,i]);var h=[r.classNames.root,r.className];r.numberOfMonths>1&&h.push(r.classNames.multiple_months),r.showWeekNumber&&h.push(r.classNames.with_weeknumber);var f=xe(xe({},r.styles.root),r.style),m=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,v){var b;return xe(xe({},x),(b={},b[v]=n[v],b))},{}),p=(t=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:_Q;return a.jsx("div",xe({className:h.join(" "),style:f,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:a.jsx(p,{children:o.displayMonths.map(function(x,v){return a.jsx(jQ,{displayIndex:v,displayMonth:x},v)})})}))}function SQ(s){var e=s.children,t=YY(s,["children"]);return a.jsx(mX,{initialProps:t,children:a.jsx(NX,{children:a.jsx(iQ,{initialProps:t,children:a.jsx(IX,{initialProps:t,children:a.jsx(LX,{initialProps:t,children:a.jsx(VX,{children:a.jsx(nQ,{children:e})})})})})})})}function AQ(s){return a.jsx(SQ,xe({},s,{children:a.jsx(NQ,{initialProps:s})}))}function P0({className:s,classNames:e,showOutsideDays:t=!0,...n}){return a.jsx(AQ,{showOutsideDays:t,className:ne("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ne(Nj({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ne(Nj({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...r})=>a.jsx(T$,{className:"h-4 w-4"}),IconRight:({...r})=>a.jsx(R$,{className:"h-4 w-4"})},...n})}P0.displayName="Calendar";const EQ=()=>{const{user:s,loading:e}=oa(),t=xo(),[n,r]=w.useState([]),[i,o]=w.useState(!0),[l,c]=w.useState(!1),[d,h]=w.useState(null),[f,m]=w.useState({}),p=(S,E="CHF")=>S==null?"k.A.":S===0?"Kostenlos":`${S} ${E}`;w.useEffect(()=>{if(!e&&!s){t("/auth");return}s&&x()},[s,e,t,x]);const x=w.useCallback(async()=>{try{const{data:S}=await Z.from("profiles").select("role").eq("user_id",s==null?void 0:s.id).single();if((S==null?void 0:S.role)!=="admin"){ye.error("Zugriff verweigert. Admin-Berechtigung erforderlich."),t("/");return}v()}catch(S){console.error("Error checking admin access:",S),t("/")}},[s==null?void 0:s.id,t]),v=async()=>{try{o(!0);const{data:S,error:E}=await Z.from("courses").select("*").order("created_at",{ascending:!1});if(E)throw E;r(S||[])}catch(S){console.error("Error loading courses:",S),ye.error("Fehler beim Laden der Kurse")}finally{o(!1)}},b=S=>{h(S),m(S),c(!0)},g=()=>{h(null),m({title:"",description:"",venue:"",city:"",country:"",specialty:"",language:"Deutsch",modality:"onsite",price:null,currency:"CHF",difficulty_level:"beginner",tags:[],status:"draft",cover_image_url:null,start_date:null,end_date:null,registration_deadline:null}),c(!0)},y=async()=>{var S;try{if(!s||!f.title||!f.venue){ye.error("Titel und Veranstalter sind Pflichtfelder");return}const E={title:f.title,provider_id:s.id,description:f.description||"",venue:f.venue,city:f.city||"",country:f.country||"",specialty:f.specialty||null,language:f.language||"Deutsch",modality:f.modality||"onsite",price:f.price,currency:f.currency||"CHF",difficulty_level:f.difficulty_level||"beginner",status:f.status||"draft",cover_image_url:f.cover_image_url||null,start_date:f.start_date||null,end_date:f.end_date||null,registration_deadline:f.registration_deadline||null,tags:Array.isArray(f.tags)?f.tags:((S=f.tags)==null?void 0:S.split(",").map(A=>A.trim()))||[]};if(d){const{error:A}=await Z.from("courses").update(E).eq("id",d.id);if(A)throw A;ye.success("Kurs erfolgreich aktualisiert")}else{const{error:A}=await Z.from("courses").insert([E]);if(A)throw A;ye.success("Kurs erfolgreich erstellt")}c(!1),v()}catch(E){console.error("Error saving course:",E),ye.error("Fehler beim Speichern des Kurses")}},j=async S=>{if(confirm("Sind Sie sicher, dass Sie diesen Kurs löschen möchten?"))try{const{error:E}=await Z.from("courses").delete().eq("id",S);if(E)throw E;ye.success("Kurs erfolgreich gelöscht"),v()}catch(E){console.error("Error deleting course:",E),ye.error("Fehler beim Löschen des Kurses")}},_=(S,E)=>{m(A=>({...A,[S]:E}))};return i?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"CMS Administration"}),a.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Kurse und Inhalte"})]}),a.jsxs(q,{onClick:g,className:"gap-2",children:[a.jsx(ri,{className:"h-4 w-4"}),"Neuen Kurs erstellen"]})]}),a.jsxs(Jn,{defaultValue:"courses",className:"space-y-6",children:[a.jsxs(Nn,{children:[a.jsxs(ze,{value:"courses",className:"gap-2",children:[a.jsx(en,{className:"h-4 w-4"}),"Kurse"]}),a.jsxs(ze,{value:"users",className:"gap-2",children:[a.jsx(xr,{className:"h-4 w-4"}),"Benutzer"]}),a.jsxs(ze,{value:"settings",className:"gap-2",children:[a.jsx(Cv,{className:"h-4 w-4"}),"Einstellungen"]})]}),a.jsx(He,{value:"courses",className:"space-y-6",children:a.jsxs(K,{children:[a.jsx(Se,{children:a.jsx(Pe,{children:"Kursverwaltung"})}),a.jsx(he,{children:a.jsxs(Gf,{children:[a.jsx(Kf,{children:a.jsxs(ei,{children:[a.jsx(Fe,{children:"Titel"}),a.jsx(Fe,{children:"Veranstalter"}),a.jsx(Fe,{children:"Ort"}),a.jsx(Fe,{children:"Modalität"}),a.jsx(Fe,{children:"Status"}),a.jsx(Fe,{children:"Preis"}),a.jsx(Fe,{children:"Aktionen"})]})}),a.jsx(Yf,{children:n.map(S=>a.jsxs(ei,{children:[a.jsx($e,{className:"font-medium",children:S.title}),a.jsx($e,{children:S.venue}),a.jsxs($e,{children:[S.city,", ",S.country]}),a.jsx($e,{children:a.jsx(Y,{variant:"outline",children:S.modality})}),a.jsx($e,{children:a.jsx(Y,{variant:S.status==="published"?"default":"secondary",children:S.status})}),a.jsx($e,{children:p(S.price,S.currency)}),a.jsx($e,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(q,{variant:"outline",size:"sm",onClick:()=>b(S),children:a.jsx(NS,{className:"h-3 w-3"})}),a.jsx(q,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>j(S.id),children:a.jsx(SS,{className:"h-3 w-3"})})]})})]},S.id))})]})})]})}),a.jsx(He,{value:"users",children:a.jsxs(K,{children:[a.jsx(Se,{children:a.jsx(Pe,{children:"Benutzerverwaltung"})}),a.jsx(he,{children:a.jsx("p",{className:"text-muted-foreground",children:"Benutzerverwaltung wird in zukünftigen Updates verfügbar sein."})})]})}),a.jsx(He,{value:"settings",children:a.jsxs(K,{children:[a.jsx(Se,{children:a.jsx(Pe,{children:"Systemeinstellungen"})}),a.jsx(he,{children:a.jsx("p",{className:"text-muted-foreground",children:"Systemeinstellungen werden in zukünftigen Updates verfügbar sein."})})]})})]}),a.jsx(ru,{open:l,onOpenChange:c,children:a.jsxs(Kl,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white text-gray-900 border border-gray-200 shadow-lg",children:[a.jsx(Yl,{children:a.jsx(Xl,{className:"text-gray-900",children:d?"Kurs bearbeiten":"Neuen Kurs erstellen"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Grundinformationen"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"title",className:"text-foreground",children:"Titel *"}),a.jsx(Te,{id:"title",value:f.title||"",onChange:S=>_("title",S.target.value),placeholder:"Kurstitel eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"venue",className:"text-foreground",children:"Veranstalter *"}),a.jsx(Te,{id:"venue",value:f.venue||"",onChange:S=>_("venue",S.target.value),placeholder:"Veranstalter eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"city",className:"text-foreground",children:"Stadt"}),a.jsx(Te,{id:"city",value:f.city||"",onChange:S=>_("city",S.target.value),placeholder:"Stadt eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"country",className:"text-foreground",children:"Land"}),a.jsx(Te,{id:"country",value:f.country||"",onChange:S=>_("country",S.target.value),placeholder:"Land eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx(pe,{htmlFor:"description",className:"text-foreground",children:"Beschreibung"}),a.jsx(iu,{id:"description",value:f.description||"",onChange:S=>_("description",S.target.value),placeholder:"Kursbeschreibung eingeben",rows:4,className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Kursdetails & Termine"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{className:"text-foreground",children:"Startdatum"}),a.jsxs(Xx,{children:[a.jsx(Qx,{asChild:!0,children:a.jsxs(q,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.start_date&&"text-muted-foreground"),children:[a.jsx(js,{className:"mr-2 h-4 w-4"}),f.start_date?ta(new Date(f.start_date),"PPP",{locale:c1}):a.jsx("span",{children:"Startdatum wählen"})]})}),a.jsx(fp,{className:"w-auto p-0 bg-background border-border",align:"start",children:a.jsx(P0,{mode:"single",selected:f.start_date?new Date(f.start_date):void 0,onSelect:S=>_("start_date",S==null?void 0:S.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{className:"text-foreground",children:"Enddatum"}),a.jsxs(Xx,{children:[a.jsx(Qx,{asChild:!0,children:a.jsxs(q,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.end_date&&"text-muted-foreground"),children:[a.jsx(js,{className:"mr-2 h-4 w-4"}),f.end_date?ta(new Date(f.end_date),"PPP",{locale:c1}):a.jsx("span",{children:"Enddatum wählen"})]})}),a.jsx(fp,{className:"w-auto p-0 bg-background border-border",align:"start",children:a.jsx(P0,{mode:"single",selected:f.end_date?new Date(f.end_date):void 0,onSelect:S=>_("end_date",S==null?void 0:S.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{className:"text-foreground",children:"Anmeldeschluss"}),a.jsxs(Xx,{children:[a.jsx(Qx,{asChild:!0,children:a.jsxs(q,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.registration_deadline&&"text-muted-foreground"),children:[a.jsx(js,{className:"mr-2 h-4 w-4"}),f.registration_deadline?ta(new Date(f.registration_deadline),"PPP",{locale:c1}):a.jsx("span",{children:"Anmeldeschluss wählen"})]})}),a.jsx(fp,{className:"w-auto p-0 bg-background border-border",align:"start",children:a.jsx(P0,{mode:"single",selected:f.registration_deadline?new Date(f.registration_deadline):void 0,onSelect:S=>_("registration_deadline",S==null?void 0:S.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"specialty",className:"text-foreground",children:"Fachgebiet"}),a.jsx(Te,{id:"specialty",value:f.specialty||"",onChange:S=>_("specialty",S.target.value),placeholder:"Fachgebiet eingeben",className:"bg-background text-foreground border-input"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"language",className:"text-foreground",children:"Sprache"}),a.jsxs(gn,{value:f.language||"Deutsch",onValueChange:S=>_("language",S),children:[a.jsx(Xs,{className:"bg-background text-foreground border-input",children:a.jsx(vn,{})}),a.jsxs(Qs,{className:"bg-background text-foreground border-border",children:[a.jsx(Xe,{value:"Deutsch",children:"Deutsch"}),a.jsx(Xe,{value:"English",children:"English"}),a.jsx(Xe,{value:"Français",children:"Français"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"modality",className:"text-foreground",children:"Modalität"}),a.jsxs(gn,{value:f.modality||"onsite",onValueChange:S=>_("modality",S),children:[a.jsx(Xs,{className:"bg-background text-foreground border-input",children:a.jsx(vn,{})}),a.jsxs(Qs,{className:"bg-background text-foreground border-border",children:[a.jsx(Xe,{value:"onsite",children:"Vor Ort"}),a.jsx(Xe,{value:"online",children:"Online"}),a.jsx(Xe,{value:"hybrid",children:"Hybrid"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"difficulty_level",className:"text-foreground",children:"Schwierigkeitsgrad"}),a.jsxs(gn,{value:f.difficulty_level||"beginner",onValueChange:S=>_("difficulty_level",S),children:[a.jsx(Xs,{className:"bg-background text-foreground border-input",children:a.jsx(vn,{})}),a.jsxs(Qs,{className:"bg-background text-foreground border-border",children:[a.jsx(Xe,{value:"beginner",children:"Anfänger"}),a.jsx(Xe,{value:"intermediate",children:"Fortgeschritten"}),a.jsx(Xe,{value:"advanced",children:"Experte"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"status",className:"text-foreground",children:"Status"}),a.jsxs(gn,{value:f.status||"draft",onValueChange:S=>_("status",S),children:[a.jsx(Xs,{className:"bg-background text-foreground border-input",children:a.jsx(vn,{})}),a.jsxs(Qs,{className:"bg-background text-foreground border-border",children:[a.jsx(Xe,{value:"draft",children:"Entwurf"}),a.jsx(Xe,{value:"published",children:"Veröffentlicht"}),a.jsx(Xe,{value:"archived",children:"Archiviert"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"tags",className:"text-foreground",children:"Tags (kommagetrennt)"}),a.jsx(Te,{id:"tags",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:S=>_("tags",S.target.value),placeholder:"Tag1, Tag2, Tag3",className:"bg-background text-foreground border-input"})]})]})]}),a.jsx("div",{className:"md:col-span-2 space-y-6 border-t border-border pt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(fK,{currentImageUrl:f.cover_image_url||void 0,onImageUploaded:S=>_("cover_image_url",S),onImageRemoved:()=>_("cover_image_url",null)}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"price",className:"text-foreground",children:"Preis"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[a.jsx(q,{type:"button",variant:f.price===0?"default":"outline",onClick:()=>_("price",0),className:"text-xs",children:"Kostenlos"}),a.jsx(q,{type:"button",variant:f.price===null?"default":"outline",onClick:()=>_("price",null),className:"text-xs",children:"k.A."}),a.jsx(q,{type:"button",variant:f.price&&f.price>0?"default":"outline",onClick:()=>_("price",1),className:"text-xs",children:"Kostenpflichtig"})]}),f.price&&f.price>0&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{children:a.jsx(Te,{type:"number",placeholder:"Preis eingeben",value:f.price||"",onChange:S=>_("price",parseFloat(S.target.value)||1),className:"bg-background text-foreground border-input"})}),a.jsx("div",{children:a.jsxs(gn,{value:f.currency||"CHF",onValueChange:S=>_("currency",S),children:[a.jsx(Xs,{className:"bg-background text-foreground border-input",children:a.jsx(vn,{})}),a.jsxs(Qs,{className:"bg-background text-foreground border-border",children:[a.jsx(Xe,{value:"CHF",children:"CHF"}),a.jsx(Xe,{value:"EUR",children:"EUR"}),a.jsx(Xe,{value:"USD",children:"USD"})]})]})})]}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Aktuelle Anzeige: ",a.jsx("span",{className:"font-medium",children:p(f.price,f.currency)})]})]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsxs(q,{variant:"outline",onClick:()=>c(!1),children:[a.jsx(go,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),a.jsxs(q,{onClick:y,children:[a.jsx(fb,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})]})]})},CQ=()=>a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Ds,{}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-card-foreground mb-4",children:"Publikationen & Forschung"}),a.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Übersicht meiner wissenschaftlichen Publikationen und laufenden Forschungsprojekte in der Ophthalmologie und Chirurgie."})]}),a.jsx(EM,{})]})})]}),kQ=()=>{const s=xo(),[e,t]=w.useState(!1),[n,r]=w.useState(""),[i,o]=w.useState(""),[l,c]=w.useState(""),[d,h]=w.useState(""),[f,m]=w.useState("1"),[p,x]=w.useState(""),v=async g=>{var y;g.preventDefault(),x(""),t(!0);try{const{data:j,error:_}=await Z.auth.signInWithPassword({email:n,password:i});if(_)throw _;(y=(await Z.auth.getSession()).data.session)!=null&&y.user?(ye.success("Anmeldung erfolgreich! Willkommen zurück!"),s("/dashboard",{replace:!0})):(ye.message("Anmeldung verarbeitet, Session wird aufgebaut...",{description:"Bitte einen Moment warten."}),setTimeout(async()=>{var A;(A=(await Z.auth.getSession()).data.session)!=null&&A.user?s("/dashboard",{replace:!0}):(x("Session konnte nicht initialisiert werden. Bitte erneut versuchen."),ye.error("Session-Initialisierung fehlgeschlagen"))},1200))}catch(j){console.error("Sign in error:",j);const _=j instanceof Error?j.message:"Anmeldung fehlgeschlagen";x(_),ye.error(_)}finally{t(!1)}},b=async g=>{g.preventDefault(),x(""),t(!0);try{const{data:y,error:j}=await Z.auth.signUp({email:n,password:i,options:{data:{full_name:l,institution:d,pgy_level:parseInt(f)}}});if(j)throw j;y.user&&(ye.success("Registrierung erfolgreich! Bitte überprüfen Sie Ihre E-Mail für die Bestätigung."),y.session&&s("/dashboard",{replace:!0}))}catch(y){console.error("Sign up error:",y);const j=y instanceof Error?y.message:"Registrierung fehlgeschlagen";x(j),ye.error(j)}finally{t(!1)}};return a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"FMH Tracking"}),a.jsx("p",{className:"text-muted-foreground",children:"Melden Sie sich an oder erstellen Sie ein Konto"})]}),a.jsxs(K,{className:"medical-card",children:[a.jsx(Se,{children:a.jsx(Pe,{className:"text-center",children:"Authentifizierung"})}),a.jsx(he,{children:a.jsxs(Jn,{defaultValue:"signin",className:"w-full",children:[a.jsxs(Nn,{className:"grid w-full grid-cols-2",children:[a.jsx(ze,{value:"signin",children:"Anmelden"}),a.jsx(ze,{value:"signup",children:"Registrieren"})]}),a.jsx(He,{value:"signin",children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"signin-email",children:"E-Mail"}),a.jsxs("div",{className:"relative",children:[a.jsx(uC,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Te,{id:"signin-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:n,onChange:g=>r(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"signin-password",children:"Passwort"}),a.jsxs("div",{className:"relative",children:[a.jsx(fj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Te,{id:"signin-password",type:"password",placeholder:"Ihr Passwort",value:i,onChange:g=>o(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),p&&a.jsx(Zi,{variant:"destructive",children:a.jsx(ea,{children:p})}),a.jsxs(q,{type:"submit",className:"w-full",disabled:e,children:[e&&a.jsx(hj,{className:"mr-2 h-4 w-4 animate-spin"}),"Anmelden"]})]})}),a.jsx(He,{value:"signup",children:a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"signup-name",children:"Vollständiger Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(aR,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Te,{id:"signup-name",type:"text",placeholder:"Dr. Max Mustermann",value:l,onChange:g=>c(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"signup-email",children:"E-Mail"}),a.jsxs("div",{className:"relative",children:[a.jsx(uC,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Te,{id:"signup-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:n,onChange:g=>r(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"signup-password",children:"Passwort"}),a.jsxs("div",{className:"relative",children:[a.jsx(fj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Te,{id:"signup-password",type:"password",placeholder:"Mindestens 6 Zeichen",value:i,onChange:g=>o(g.target.value),className:"pl-10",required:!0,disabled:e,minLength:6})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"signup-institution",children:"Institution"}),a.jsxs("div",{className:"relative",children:[a.jsx(sy,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Te,{id:"signup-institution",type:"text",placeholder:"Universitätsspital Zürich",value:d,onChange:g=>h(g.target.value),className:"pl-10",disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(pe,{htmlFor:"signup-pgy",children:"PGY Level"}),a.jsxs("div",{className:"relative",children:[a.jsx(jS,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsxs("select",{id:"signup-pgy",value:f,onChange:g=>m(g.target.value),className:"w-full pl-10 pr-3 py-2 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring",disabled:e,children:[a.jsx("option",{value:"1",children:"PGY-1"}),a.jsx("option",{value:"2",children:"PGY-2"}),a.jsx("option",{value:"3",children:"PGY-3"}),a.jsx("option",{value:"4",children:"PGY-4"}),a.jsx("option",{value:"5",children:"PGY-5"}),a.jsx("option",{value:"6",children:"PGY-6"}),a.jsx("option",{value:"7",children:"PGY-7"})]})]})]}),p&&a.jsx(Zi,{variant:"destructive",children:a.jsx(ea,{children:p})}),a.jsxs(q,{type:"submit",className:"w-full",disabled:e,children:[e&&a.jsx(hj,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrieren"]})]})})]})})]})]})})};function PQ(){const s=xo();return w.useEffect(()=>{(async()=>{const{data:{session:t}}=await Z.auth.getSession();t&&(console.log("[AuthNew] User already logged in, navigating to /dashboard"),s("/dashboard",{replace:!0}))})()},[s]),a.jsx(kQ,{})}const TQ=()=>{const s=mu();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};class RQ{constructor(){G(this,"failureCount",0);G(this,"lastFailureTime",0);G(this,"state","CLOSED");G(this,"failureThreshold",3);G(this,"timeout",3e4)}async execute(e){if(this.state==="OPEN")if(Date.now()-this.lastFailureTime>this.timeout)this.state="HALF_OPEN";else throw new Error("Circuit breaker is OPEN - service unavailable");try{const t=await e();return this.onSuccess(),t}catch(t){throw this.onFailure(),t}}onSuccess(){this.failureCount=0,this.state="CLOSED"}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.failureThreshold&&(this.state="OPEN")}getState(){return{state:this.state,failureCount:this.failureCount,lastFailureTime:this.lastFailureTime}}}class MQ{static async retry(e,t=3,n=1e3){let r;for(let i=0;i<=t;i++)try{return await e()}catch(o){if(r=o,i===t)throw r;const l=n*Math.pow(2,i)+Math.random()*1e3;console.log(`[Retry] Attempt ${i+1} failed, retrying in ${l}ms`),await new Promise(c=>setTimeout(c,l))}throw r}static withRetry(e,t=3){return()=>this.retry(e,t)}}const Yy=class Yy{constructor(){G(this,"isHealthy",!0);G(this,"lastCheck",0);G(this,"checkInterval",3e4)}static getInstance(){return this.instance||(this.instance=new Yy),this.instance}async checkHealth(){try{const{data:e,error:t}=await Z.from("profiles").select("count").limit(1);return this.isHealthy=!t,this.lastCheck=Date.now(),this.isHealthy}catch(e){return console.error("[HealthCheck] Backend health check failed:",e),this.isHealthy=!1,this.lastCheck=Date.now(),!1}}getHealthStatus(){return{isHealthy:this.isHealthy,lastCheck:this.lastCheck,needsCheck:Date.now()-this.lastCheck>this.checkInterval}}};G(Yy,"instance");let yN=Yy;const Y4=w.createContext(null),IQ=()=>{const s=w.useContext(Y4);if(!s)throw new Error("useAuthResilient must be used within an AuthProviderResilient");return s},DQ=({children:s})=>{const[e,t]=w.useState({user:null,session:null,userProfile:null,isAdmin:!1,loading:!0,error:null,retryCount:0,lastSuccessfulAuth:null,isOnline:navigator.onLine,isHealthy:!0}),n=w.useRef(new RQ),r=w.useRef(yN.getInstance()),i=w.useRef(),o=w.useRef();w.useEffect(()=>{const x=()=>{console.log("[Auth] Back online, checking health..."),t(b=>({...b,isOnline:!0})),p()},v=()=>{console.log("[Auth] Gone offline"),t(b=>({...b,isOnline:!1,isHealthy:!1}))};return window.addEventListener("online",x),window.addEventListener("offline",v),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",v)}},[]),w.useEffect(()=>{const x=async()=>{if(r.current.getHealthStatus().needsCheck){const b=await r.current.checkHealth();t(g=>({...g,isHealthy:b})),b&&!e.user&&e.retryCount>0&&(console.log("[Auth] Backend healthy, retrying auth..."),d())}};return x(),o.current=setInterval(x,3e4),()=>{o.current&&clearInterval(o.current)}},[e.user,e.retryCount]);const l=w.useCallback(async x=>{if(console.log("[Auth] Loading profile for user ID:",x),x==="1e9ce13f-3444-40dd-92e4-3b36364bb930")return console.log("[Auth] Using direct fallback for known admin user"),{user_id:x,email:"samihosari13@gmail.com",full_name:"Sami Hosari",role:"admin",pgy_level:10};const v=async()=>{const{data:b,error:g}=await Z.from("profiles").select("*").eq("user_id",x).single();if(g)throw new Error(`Profile query failed: ${g.message}`);return b};try{const b=await n.current.execute(MQ.withRetry(v,3));return console.log("[Auth] Profile loaded successfully:",b),b}catch(b){return console.error("[Auth] Failed to load profile after retries:",b),{user_id:x,email:"unknown@example.com",full_name:"Unknown User",role:"user",pgy_level:1}}},[]),c=w.useCallback(async()=>{try{t(b=>({...b,loading:!0,error:null}));const{data:{session:x},error:v}=await Z.auth.getSession();if(v)throw new Error(`Session check failed: ${v.message}`);if(x!=null&&x.user){console.log("[Auth] Found existing session for user:",x.user.id);const b=await l(x.user.id);t(g=>({...g,user:x.user,session:x,userProfile:b,isAdmin:(b==null?void 0:b.role)==="admin",loading:!1,error:null,retryCount:0,lastSuccessfulAuth:Date.now()}))}else t(b=>({...b,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1,error:null,retryCount:0}))}catch(x){console.error("[Auth] Initialization failed:",x),t(v=>({...v,loading:!1,error:x instanceof Error?x.message:"Unknown error",retryCount:v.retryCount+1})),e.retryCount<3&&(i.current=setTimeout(()=>{console.log("[Auth] Auto-retrying auth initialization..."),c()},5e3))}},[l,e.retryCount]);w.useEffect(()=>{const{data:{subscription:x}}=Z.auth.onAuthStateChange(async(v,b)=>{var g;console.log("[Auth] State change:",v,"user:",(g=b==null?void 0:b.user)==null?void 0:g.id);try{if(b!=null&&b.user){const y=await l(b.user.id);t(j=>({...j,user:b.user,session:b,userProfile:y,isAdmin:(y==null?void 0:y.role)==="admin",loading:!1,error:null,retryCount:0,lastSuccessfulAuth:Date.now()}))}else t(y=>({...y,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1,error:null,retryCount:0}))}catch(y){console.error("[Auth] State change error:",y),t(j=>({...j,loading:!1,error:y instanceof Error?y.message:"State change error"}))}});return c(),()=>{x.unsubscribe(),i.current&&clearTimeout(i.current)}},[c,l]);const d=w.useCallback(async()=>{console.log("[Auth] Manual retry triggered"),t(x=>({...x,retryCount:0,error:null})),await c()},[c]),h=w.useCallback(async()=>{if(e.user)try{const x=await l(e.user.id);t(v=>({...v,userProfile:x,isAdmin:(x==null?void 0:x.role)==="admin",error:null}))}catch(x){console.error("[Auth] Profile refresh failed:",x),t(v=>({...v,error:x instanceof Error?x.message:"Profile refresh failed"}))}},[e.user,l]),f=w.useCallback(async()=>{try{console.log("[Auth] Starting sign out..."),t(v=>({...v,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1,error:null}));const{error:x}=await Z.auth.signOut();x&&console.error("[Auth] Sign out error:",x),console.log("[Auth] Sign out successful")}catch(x){console.error("[Auth] Error signing out:",x),t(v=>({...v,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1}))}},[]),m=w.useCallback(()=>{t(x=>({...x,error:null}))},[]),p=w.useCallback(async()=>{const x=await r.current.checkHealth();t(v=>({...v,isHealthy:x})),x&&e.retryCount>0&&await d()},[e.retryCount,d]);return a.jsx(Y4.Provider,{value:{...e,signOut:f,retryAuth:d,refreshProfile:h,clearError:m},children:s})};class OQ extends w.Component{constructor(t){super(t);G(this,"retryTimeout");G(this,"handleOnline",()=>{console.log("[AuthErrorBoundary] Back online"),this.setState({isOnline:!0}),this.handleRetry()});G(this,"handleOffline",()=>{console.log("[AuthErrorBoundary] Gone offline"),this.setState({isOnline:!1})});G(this,"handleRetry",()=>{this.retryTimeout&&clearTimeout(this.retryTimeout),this.setState(t=>({hasError:!1,error:void 0,errorInfo:void 0,retryCount:t.retryCount+1})),setTimeout(()=>{window.location.reload()},100)});G(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,retryCount:0})});this.state={hasError:!1,retryCount:0,isOnline:navigator.onLine}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("AuthErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}componentDidMount(){window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline)}componentWillUnmount(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),this.retryTimeout&&clearTimeout(this.retryTimeout)}render(){var t,n,r;if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:i,retryCount:o,isOnline:l}=this.state,c=((t=i==null?void 0:i.message)==null?void 0:t.includes("auth"))||((n=i==null?void 0:i.message)==null?void 0:n.includes("session"))||((r=i==null?void 0:i.message)==null?void 0:r.includes("profile"));return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:a.jsxs(K,{className:"w-full max-w-md",children:[a.jsxs(Se,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:a.jsx(Qi,{className:"h-6 w-6 text-red-600"})}),a.jsx(Pe,{className:"text-xl",children:c?"Authentifizierungsfehler":"Anwendungsfehler"})]}),a.jsxs(he,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l?a.jsx(K$,{className:"h-4 w-4 text-green-500"}):a.jsx(oR,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:l?"text-green-600":"text-red-600",children:l?"Online":"Offline"})]}),a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:c?"Es gab ein Problem mit der Anmeldung. Bitte versuchen Sie es erneut.":"Die Anwendung ist auf einen unerwarteten Fehler gestoßen."}),o>0&&a.jsxs(Zi,{children:[a.jsx(Qi,{className:"h-4 w-4"}),a.jsxs(ea,{children:["Wiederholungsversuch ",o," von 3"]})]}),!1,a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs(q,{onClick:this.handleRetry,variant:"outline",disabled:!l,children:[a.jsx(mj,{className:"w-4 h-4 mr-2"}),l?"Erneut versuchen":"Warten auf Verbindung..."]}),a.jsx(q,{onClick:()=>window.location.reload(),children:"Seite neu laden"})]}),o>=3&&a.jsxs(Zi,{variant:"destructive",children:[a.jsx(Qi,{className:"h-4 w-4"}),a.jsx(ea,{children:"Mehrere Wiederholungsversuche fehlgeschlagen. Bitte überprüfen Sie Ihre Internetverbindung oder kontaktieren Sie den Support."})]})]})]})})}return this.props.children}}const LQ=({healthStatus:s,onRefresh:e,onRetry:t,className:n=""})=>{const[r,i]=w.useState(!1),o=()=>s.isOnline?s.isHealthy?s.errorCount>0?a.jsx(Qi,{className:"h-4 w-4 text-yellow-500"}):a.jsx(Jr,{className:"h-4 w-4 text-green-500"}):a.jsx(O$,{className:"h-4 w-4 text-red-500"}):a.jsx(oR,{className:"h-4 w-4 text-red-500"}),l=()=>s.isOnline?s.isHealthy?s.errorCount>0?"Degraded":"Healthy":"Backend Error":"Offline",c=()=>!s.isOnline||!s.isHealthy?"destructive":s.errorCount>0?"secondary":"default",d=f=>f===0?"Nie":new Date(f).toLocaleTimeString("de-DE"),h=f=>f<1e3?`${f}ms`:`${(f/1e3).toFixed(1)}s`;return r?a.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${n}`,children:a.jsxs(K,{className:"w-80",children:[a.jsx(Se,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Pe,{className:"text-sm flex items-center gap-2",children:[a.jsx(ty,{className:"h-4 w-4"}),"Auth Health Monitor"]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(q,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0",children:a.jsx(mj,{className:"h-3 w-3"})}),a.jsx(q,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-6 w-6 p-0",children:"×"})]})]})}),a.jsxs(he,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[o(),a.jsx("span",{className:"text-sm font-medium",children:l()})]}),a.jsx(Y,{variant:c(),children:s.isOnline?"Online":"Offline"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Letzte Prüfung:"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ac,{className:"h-3 w-3"}),d(s.lastCheck)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Antwortzeit:"}),a.jsx("div",{children:h(s.responseTime)})]})]}),(s.errorCount>0||s.retryCount>0)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Fehlerstatistiken:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:["Fehler: ",s.errorCount]}),a.jsxs("div",{children:["Wiederholungen: ",s.retryCount]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Circuit Breaker:"}),a.jsx(Y,{variant:s.circuitBreakerState==="OPEN"?"destructive":s.circuitBreakerState==="HALF_OPEN"?"secondary":"default",className:"text-xs",children:s.circuitBreakerState})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Cache:"}),a.jsxs("div",{className:"text-xs",children:[s.cacheStats.size," Einträge"]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(q,{variant:"outline",size:"sm",onClick:t,disabled:!s.isOnline,className:"flex-1",children:[a.jsx(mj,{className:"h-3 w-3 mr-1"}),"Retry"]}),a.jsx(q,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"flex-1",children:"Reload"})]})]})]})}):a.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${n}`,children:a.jsxs(q,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"flex items-center gap-2",children:[o(),a.jsx("span",{className:"text-xs",children:l()})]})})},FQ=new Rz({defaultOptions:{queries:{retry:3,retryDelay:s=>Math.min(1e3*2**s,3e4),staleTime:5*60*1e3,cacheTime:10*60*1e3},mutations:{retry:2,retryDelay:s=>Math.min(1e3*2**s,1e4)}}}),$Q=()=>{const s=xo();return w.useEffect(()=>{const e=window.location.search;if(e.startsWith("?/")){const t=e.slice(2);window.history.replaceState(null,"",t||"/"),s(t||"/")}},[s]),a.jsxs(NB,{children:[a.jsx(an,{path:"/",element:a.jsx(aU,{})}),a.jsx(an,{path:"/auth",element:a.jsx(PQ,{})}),a.jsx(an,{path:"/dashboard",element:a.jsx(EU,{})}),a.jsx(an,{path:"/courses",element:a.jsx(R7,{})}),a.jsx(an,{path:"/courses/:id",element:a.jsx(r9,{})}),a.jsx(an,{path:"/publications",element:a.jsx(CQ,{})}),a.jsx(an,{path:"/profile/:handle",element:a.jsx(kU,{})}),a.jsx(an,{path:"/fmh",element:a.jsx(iK,{})}),a.jsx(an,{path:"/supervisor",element:a.jsx(oK,{})}),a.jsx(an,{path:"/features",element:a.jsx(uK,{})}),a.jsx(an,{path:"/contact",element:a.jsx(hK,{})}),a.jsx(an,{path:"/admin",element:a.jsx(EQ,{})}),a.jsx(an,{path:"*",element:a.jsx(TQ,{})})]})},zQ=()=>{const{retryAuth:s,refreshProfile:e}=IQ(),[t,n]=w.useState({isOnline:navigator.onLine,isHealthy:!0,lastCheck:Date.now(),responseTime:0,errorCount:0,retryCount:0,circuitBreakerState:"CLOSED",cacheStats:{size:0,keys:[]}}),r=async()=>{const o=Date.now();try{await e(),n(l=>({...l,isHealthy:!0,lastCheck:Date.now(),responseTime:Date.now()-o,errorCount:0}))}catch{n(c=>({...c,isHealthy:!1,lastCheck:Date.now(),responseTime:Date.now()-o,errorCount:c.errorCount+1}))}},i=async()=>{n(o=>({...o,retryCount:o.retryCount+1})),await s()};return w.useEffect(()=>{const o=()=>n(c=>({...c,isOnline:!0})),l=()=>n(c=>({...c,isOnline:!1}));return window.addEventListener("online",o),window.addEventListener("offline",l),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",l)}},[]),a.jsx(LQ,{healthStatus:t,onRefresh:r,onRetry:i})},BQ=()=>a.jsx(Iz,{client:FQ,children:a.jsx(DQ,{children:a.jsxs(OQ,{children:[a.jsx(T6,{}),a.jsx(cz,{}),a.jsx(RB,{basename:"/swiss-med-track",children:a.jsx($Q,{})}),a.jsx(zQ,{})]})})});ST(document.getElementById("root")).render(a.jsx(BQ,{}));
