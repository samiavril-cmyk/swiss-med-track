var OF=Object.defineProperty;var EC=n=>{throw TypeError(n)};var LF=(n,e,t)=>e in n?OF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var q=(n,e,t)=>LF(n,typeof e!="symbol"?e+"":e,t),Fw=(n,e,t)=>e.has(n)||EC("Cannot "+t);var d=(n,e,t)=>(Fw(n,e,"read from private field"),t?t.call(n):e.get(n)),k=(n,e,t)=>e.has(n)?EC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),S=(n,e,t,r)=>(Fw(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),j=(n,e,t)=>(Fw(n,e,"access private method"),t);var Xt=(n,e,t,r)=>({set _(s){S(n,e,s,t)},get _(){return d(n,e,r)}});function FF(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var ss=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wj(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function $F(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Vj={exports:{}},Ox={},Gj={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rv=Symbol.for("react.element"),BF=Symbol.for("react.portal"),zF=Symbol.for("react.fragment"),UF=Symbol.for("react.strict_mode"),HF=Symbol.for("react.profiler"),WF=Symbol.for("react.provider"),VF=Symbol.for("react.context"),GF=Symbol.for("react.forward_ref"),qF=Symbol.for("react.suspense"),YF=Symbol.for("react.memo"),KF=Symbol.for("react.lazy"),AC=Symbol.iterator;function XF(n){return n===null||typeof n!="object"?null:(n=AC&&n[AC]||n["@@iterator"],typeof n=="function"?n:null)}var qj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yj=Object.assign,Kj={};function If(n,e,t){this.props=n,this.context=e,this.refs=Kj,this.updater=t||qj}If.prototype.isReactComponent={};If.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};If.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Xj(){}Xj.prototype=If.prototype;function eE(n,e,t){this.props=n,this.context=e,this.refs=Kj,this.updater=t||qj}var tE=eE.prototype=new Xj;tE.constructor=eE;Yj(tE,If.prototype);tE.isPureReactComponent=!0;var CC=Array.isArray,Qj=Object.prototype.hasOwnProperty,nE={current:null},Jj={key:!0,ref:!0,__self:!0,__source:!0};function Zj(n,e,t){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Qj.call(e,r)&&!Jj.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:rv,type:n,key:i,ref:a,props:s,_owner:nE.current}}function QF(n,e){return{$$typeof:rv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function rE(n){return typeof n=="object"&&n!==null&&n.$$typeof===rv}function JF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var NC=/\/+/g;function $w(n,e){return typeof n=="object"&&n!==null&&n.key!=null?JF(""+n.key):e.toString(36)}function by(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case rv:case BF:a=!0}}if(a)return a=n,s=s(a),n=r===""?"."+$w(a,0):r,CC(s)?(t="",n!=null&&(t=n.replace(NC,"$&/")+"/"),by(s,e,t,"",function(u){return u})):s!=null&&(rE(s)&&(s=QF(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(NC,"$&/")+"/")+n)),e.push(s)),1;if(a=0,r=r===""?".":r+":",CC(n))for(var o=0;o<n.length;o++){i=n[o];var l=r+$w(i,o);a+=by(i,e,t,l,s)}else if(l=XF(n),typeof l=="function")for(n=l.call(n),o=0;!(i=n.next()).done;)i=i.value,l=r+$w(i,o++),a+=by(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ov(n,e,t){if(n==null)return n;var r=[],s=0;return by(n,r,"","",function(i){return e.call(t,i,s++)}),r}function ZF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var qn={current:null},_y={transition:null},e4={ReactCurrentDispatcher:qn,ReactCurrentBatchConfig:_y,ReactCurrentOwner:nE};function eP(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Ov,forEach:function(n,e,t){Ov(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ov(n,function(){e++}),e},toArray:function(n){return Ov(n,function(e){return e})||[]},only:function(n){if(!rE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pe.Component=If;Pe.Fragment=zF;Pe.Profiler=HF;Pe.PureComponent=eE;Pe.StrictMode=UF;Pe.Suspense=qF;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e4;Pe.act=eP;Pe.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Yj({},n.props),s=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=nE.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)Qj.call(e,l)&&!Jj.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:rv,type:n.type,key:s,ref:i,props:r,_owner:a}};Pe.createContext=function(n){return n={$$typeof:VF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:WF,_context:n},n.Consumer=n};Pe.createElement=Zj;Pe.createFactory=function(n){var e=Zj.bind(null,n);return e.type=n,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(n){return{$$typeof:GF,render:n}};Pe.isValidElement=rE;Pe.lazy=function(n){return{$$typeof:KF,_payload:{_status:-1,_result:n},_init:ZF}};Pe.memo=function(n,e){return{$$typeof:YF,type:n,compare:e===void 0?null:e}};Pe.startTransition=function(n){var e=_y.transition;_y.transition={};try{n()}finally{_y.transition=e}};Pe.unstable_act=eP;Pe.useCallback=function(n,e){return qn.current.useCallback(n,e)};Pe.useContext=function(n){return qn.current.useContext(n)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(n){return qn.current.useDeferredValue(n)};Pe.useEffect=function(n,e){return qn.current.useEffect(n,e)};Pe.useId=function(){return qn.current.useId()};Pe.useImperativeHandle=function(n,e,t){return qn.current.useImperativeHandle(n,e,t)};Pe.useInsertionEffect=function(n,e){return qn.current.useInsertionEffect(n,e)};Pe.useLayoutEffect=function(n,e){return qn.current.useLayoutEffect(n,e)};Pe.useMemo=function(n,e){return qn.current.useMemo(n,e)};Pe.useReducer=function(n,e,t){return qn.current.useReducer(n,e,t)};Pe.useRef=function(n){return qn.current.useRef(n)};Pe.useState=function(n){return qn.current.useState(n)};Pe.useSyncExternalStore=function(n,e,t){return qn.current.useSyncExternalStore(n,e,t)};Pe.useTransition=function(){return qn.current.useTransition()};Pe.version="18.3.1";Gj.exports=Pe;var _=Gj.exports;const K=Wj(_),sE=FF({__proto__:null,default:K},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t4=_,n4=Symbol.for("react.element"),r4=Symbol.for("react.fragment"),s4=Object.prototype.hasOwnProperty,i4=t4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a4={key:!0,ref:!0,__self:!0,__source:!0};function tP(n,e,t){var r,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)s4.call(e,r)&&!a4.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:n4,type:n,key:i,ref:a,props:s,_owner:i4.current}}Ox.Fragment=r4;Ox.jsx=tP;Ox.jsxs=tP;Vj.exports=Ox;var c=Vj.exports,nP={exports:{}},$r={},rP={exports:{}},sP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,z){var H=D.length;D.push(z);e:for(;0<H;){var Z=H-1>>>1,$=D[Z];if(0<s($,z))D[Z]=z,D[H]=$,H=Z;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var z=D[0],H=D.pop();if(H!==z){D[0]=H;e:for(var Z=0,$=D.length,W=$>>>1;Z<W;){var X=2*(Z+1)-1,Y=D[X],le=X+1,U=D[le];if(0>s(Y,H))le<$&&0>s(U,Y)?(D[Z]=U,D[le]=H,Z=le):(D[Z]=Y,D[X]=H,Z=X);else if(le<$&&0>s(U,H))D[Z]=U,D[le]=H,Z=le;else break e}}return z}function s(D,z){var H=D.sortIndex-z.sortIndex;return H!==0?H:D.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,f=null,p=3,m=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(D){for(var z=t(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=D)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=t(u)}}function E(D){if(g=!1,b(D),!y)if(t(l)!==null)y=!0,B(A);else{var z=t(u);z!==null&&L(E,z.startTime-D)}}function A(D,z){y=!1,g&&(g=!1,v(P),P=-1),m=!0;var H=p;try{for(b(z),f=t(l);f!==null&&(!(f.expirationTime>z)||D&&!I());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,p=f.priorityLevel;var $=Z(f.expirationTime<=z);z=n.unstable_now(),typeof $=="function"?f.callback=$:f===t(l)&&r(l),b(z)}else r(l);f=t(l)}if(f!==null)var W=!0;else{var X=t(u);X!==null&&L(E,X.startTime-z),W=!1}return W}finally{f=null,p=H,m=!1}}var C=!1,N=null,P=-1,T=5,M=-1;function I(){return!(n.unstable_now()-M<T)}function R(){if(N!==null){var D=n.unstable_now();M=D;var z=!0;try{z=N(!0,D)}finally{z?F():(C=!1,N=null)}}else C=!1}var F;if(typeof x=="function")F=function(){x(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,V=O.port2;O.port1.onmessage=R,F=function(){V.postMessage(null)}}else F=function(){w(R,0)};function B(D){N=D,C||(C=!0,F())}function L(D,z){P=w(function(){D(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,B(A))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var H=p;p=z;try{return D()}finally{p=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=p;p=D;try{return z()}finally{p=H}},n.unstable_scheduleCallback=function(D,z,H){var Z=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,D){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=H+$,D={id:h++,callback:z,priorityLevel:D,startTime:H,expirationTime:$,sortIndex:-1},H>Z?(D.sortIndex=H,e(u,D),t(l)===null&&D===t(u)&&(g?(v(P),P=-1):g=!0,L(E,H-Z))):(D.sortIndex=$,e(l,D),y||m||(y=!0,B(A))),D},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(D){var z=p;return function(){var H=p;p=z;try{return D.apply(this,arguments)}finally{p=H}}}})(sP);rP.exports=sP;var o4=rP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4=_,Lr=o4;function G(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iP=new Set,Qp={};function Hu(n,e){vf(n,e),vf(n+"Capture",e)}function vf(n,e){for(Qp[n]=e,n=0;n<e.length;n++)iP.add(e[n])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),e1=Object.prototype.hasOwnProperty,c4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kC={},jC={};function u4(n){return e1.call(jC,n)?!0:e1.call(kC,n)?!1:c4.test(n)?jC[n]=!0:(kC[n]=!0,!1)}function d4(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function h4(n,e,t,r){if(e===null||typeof e>"u"||d4(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yn(n,e,t,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xn[n]=new Yn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];xn[e]=new Yn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xn[n]=new Yn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xn[n]=new Yn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xn[n]=new Yn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xn[n]=new Yn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xn[n]=new Yn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xn[n]=new Yn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xn[n]=new Yn(n,5,!1,n.toLowerCase(),null,!1,!1)});var iE=/[\-:]([a-z])/g;function aE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(iE,aE);xn[e]=new Yn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(iE,aE);xn[e]=new Yn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(iE,aE);xn[e]=new Yn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xn[n]=new Yn(n,1,!1,n.toLowerCase(),null,!1,!1)});xn.xlinkHref=new Yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xn[n]=new Yn(n,1,!1,n.toLowerCase(),null,!0,!0)});function oE(n,e,t,r){var s=xn.hasOwnProperty(e)?xn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h4(e,t,s,r)&&(t=null),r||s===null?u4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var eo=l4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lv=Symbol.for("react.element"),Sd=Symbol.for("react.portal"),Ed=Symbol.for("react.fragment"),lE=Symbol.for("react.strict_mode"),t1=Symbol.for("react.profiler"),aP=Symbol.for("react.provider"),oP=Symbol.for("react.context"),cE=Symbol.for("react.forward_ref"),n1=Symbol.for("react.suspense"),r1=Symbol.for("react.suspense_list"),uE=Symbol.for("react.memo"),vo=Symbol.for("react.lazy"),lP=Symbol.for("react.offscreen"),PC=Symbol.iterator;function Yf(n){return n===null||typeof n!="object"?null:(n=PC&&n[PC]||n["@@iterator"],typeof n=="function"?n:null)}var _t=Object.assign,Bw;function up(n){if(Bw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Bw=e&&e[1]||""}return`
`+Bw+n}var zw=!1;function Uw(n,e){if(!n||zw)return"";zw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{zw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?up(n):""}function f4(n){switch(n.tag){case 5:return up(n.type);case 16:return up("Lazy");case 13:return up("Suspense");case 19:return up("SuspenseList");case 0:case 2:case 15:return n=Uw(n.type,!1),n;case 11:return n=Uw(n.type.render,!1),n;case 1:return n=Uw(n.type,!0),n;default:return""}}function s1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ed:return"Fragment";case Sd:return"Portal";case t1:return"Profiler";case lE:return"StrictMode";case n1:return"Suspense";case r1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case oP:return(n.displayName||"Context")+".Consumer";case aP:return(n._context.displayName||"Context")+".Provider";case cE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case uE:return e=n.displayName||null,e!==null?e:s1(n.type)||"Memo";case vo:e=n._payload,n=n._init;try{return s1(n(e))}catch{}}return null}function p4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return s1(e);case 8:return e===lE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function cP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m4(n){var e=cP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Fv(n){n._valueTracker||(n._valueTracker=m4(n))}function uP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=cP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function x0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function i1(n,e){var t=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function TC(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=kl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dP(n,e){e=e.checked,e!=null&&oE(n,"checked",e,!1)}function a1(n,e){dP(n,e);var t=kl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?o1(n,e.type,t):e.hasOwnProperty("defaultValue")&&o1(n,e.type,kl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function RC(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function o1(n,e,t){(e!=="number"||x0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var dp=Array.isArray;function Fd(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+kl(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function l1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function MC(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(G(92));if(dp(t)){if(1<t.length)throw Error(G(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:kl(t)}}function hP(n,e){var t=kl(e.value),r=kl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function IC(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function fP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function c1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?fP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $v,pP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for($v=$v||document.createElement("div"),$v.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$v.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Jp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Dp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g4=["Webkit","ms","Moz","O"];Object.keys(Dp).forEach(function(n){g4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Dp[e]=Dp[n]})});function mP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Dp.hasOwnProperty(n)&&Dp[n]?(""+e).trim():e+"px"}function gP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=mP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var v4=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u1(n,e){if(e){if(v4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function d1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h1=null;function dE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var f1=null,$d=null,Bd=null;function DC(n){if(n=av(n)){if(typeof f1!="function")throw Error(G(280));var e=n.stateNode;e&&(e=zx(e),f1(n.stateNode,n.type,e))}}function vP(n){$d?Bd?Bd.push(n):Bd=[n]:$d=n}function yP(){if($d){var n=$d,e=Bd;if(Bd=$d=null,DC(n),e)for(n=0;n<e.length;n++)DC(e[n])}}function xP(n,e){return n(e)}function wP(){}var Hw=!1;function bP(n,e,t){if(Hw)return n(e,t);Hw=!0;try{return xP(n,e,t)}finally{Hw=!1,($d!==null||Bd!==null)&&(wP(),yP())}}function Zp(n,e){var t=n.stateNode;if(t===null)return null;var r=zx(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(G(231,e,typeof t));return t}var p1=!1;if(Ga)try{var Kf={};Object.defineProperty(Kf,"passive",{get:function(){p1=!0}}),window.addEventListener("test",Kf,Kf),window.removeEventListener("test",Kf,Kf)}catch{p1=!1}function y4(n,e,t,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Op=!1,w0=null,b0=!1,m1=null,x4={onError:function(n){Op=!0,w0=n}};function w4(n,e,t,r,s,i,a,o,l){Op=!1,w0=null,y4.apply(x4,arguments)}function b4(n,e,t,r,s,i,a,o,l){if(w4.apply(this,arguments),Op){if(Op){var u=w0;Op=!1,w0=null}else throw Error(G(198));b0||(b0=!0,m1=u)}}function Wu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _P(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function OC(n){if(Wu(n)!==n)throw Error(G(188))}function _4(n){var e=n.alternate;if(!e){if(e=Wu(n),e===null)throw Error(G(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return OC(s),n;if(i===r)return OC(s),e;i=i.sibling}throw Error(G(188))}if(t.return!==r.return)t=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a)throw Error(G(189))}}if(t.alternate!==r)throw Error(G(190))}if(t.tag!==3)throw Error(G(188));return t.stateNode.current===t?n:e}function SP(n){return n=_4(n),n!==null?EP(n):null}function EP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=EP(n);if(e!==null)return e;n=n.sibling}return null}var AP=Lr.unstable_scheduleCallback,LC=Lr.unstable_cancelCallback,S4=Lr.unstable_shouldYield,E4=Lr.unstable_requestPaint,jt=Lr.unstable_now,A4=Lr.unstable_getCurrentPriorityLevel,hE=Lr.unstable_ImmediatePriority,CP=Lr.unstable_UserBlockingPriority,_0=Lr.unstable_NormalPriority,C4=Lr.unstable_LowPriority,NP=Lr.unstable_IdlePriority,Lx=null,Oi=null;function N4(n){if(Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(Lx,n,void 0,(n.current.flags&128)===128)}catch{}}var zs=Math.clz32?Math.clz32:P4,k4=Math.log,j4=Math.LN2;function P4(n){return n>>>=0,n===0?32:31-(k4(n)/j4|0)|0}var Bv=64,zv=4194304;function hp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function S0(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?r=hp(o):(i&=a,i!==0&&(r=hp(i)))}else a=t&~s,a!==0?r=hp(a):i!==0&&(r=hp(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-zs(e),s=1<<t,r|=n[t],e&=~s;return r}function T4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R4(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-zs(i),o=1<<a,l=s[a];l===-1?(!(o&t)||o&r)&&(s[a]=T4(o,e)):l<=e&&(n.expiredLanes|=o),i&=~o}}function g1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function kP(){var n=Bv;return Bv<<=1,!(Bv&4194240)&&(Bv=64),n}function Ww(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function sv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-zs(e),n[e]=t}function M4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-zs(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function fE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-zs(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Ye=0;function jP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var PP,pE,TP,RP,MP,v1=!1,Uv=[],xl=null,wl=null,bl=null,em=new Map,tm=new Map,xo=[],I4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FC(n,e){switch(n){case"focusin":case"focusout":xl=null;break;case"dragenter":case"dragleave":wl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":em.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tm.delete(e.pointerId)}}function Xf(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=av(e),e!==null&&pE(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function D4(n,e,t,r,s){switch(e){case"focusin":return xl=Xf(xl,n,e,t,r,s),!0;case"dragenter":return wl=Xf(wl,n,e,t,r,s),!0;case"mouseover":return bl=Xf(bl,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return em.set(i,Xf(em.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,tm.set(i,Xf(tm.get(i)||null,n,e,t,r,s)),!0}return!1}function IP(n){var e=uc(n.target);if(e!==null){var t=Wu(e);if(t!==null){if(e=t.tag,e===13){if(e=_P(t),e!==null){n.blockedOn=e,MP(n.priority,function(){TP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=y1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);h1=r,t.target.dispatchEvent(r),h1=null}else return e=av(t),e!==null&&pE(e),n.blockedOn=t,!1;e.shift()}return!0}function $C(n,e,t){Sy(n)&&t.delete(e)}function O4(){v1=!1,xl!==null&&Sy(xl)&&(xl=null),wl!==null&&Sy(wl)&&(wl=null),bl!==null&&Sy(bl)&&(bl=null),em.forEach($C),tm.forEach($C)}function Qf(n,e){n.blockedOn===e&&(n.blockedOn=null,v1||(v1=!0,Lr.unstable_scheduleCallback(Lr.unstable_NormalPriority,O4)))}function nm(n){function e(s){return Qf(s,n)}if(0<Uv.length){Qf(Uv[0],n);for(var t=1;t<Uv.length;t++){var r=Uv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(xl!==null&&Qf(xl,n),wl!==null&&Qf(wl,n),bl!==null&&Qf(bl,n),em.forEach(e),tm.forEach(e),t=0;t<xo.length;t++)r=xo[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<xo.length&&(t=xo[0],t.blockedOn===null);)IP(t),t.blockedOn===null&&xo.shift()}var zd=eo.ReactCurrentBatchConfig,E0=!0;function L4(n,e,t,r){var s=Ye,i=zd.transition;zd.transition=null;try{Ye=1,mE(n,e,t,r)}finally{Ye=s,zd.transition=i}}function F4(n,e,t,r){var s=Ye,i=zd.transition;zd.transition=null;try{Ye=4,mE(n,e,t,r)}finally{Ye=s,zd.transition=i}}function mE(n,e,t,r){if(E0){var s=y1(n,e,t,r);if(s===null)eb(n,e,r,A0,t),FC(n,r);else if(D4(s,n,e,t,r))r.stopPropagation();else if(FC(n,r),e&4&&-1<I4.indexOf(n)){for(;s!==null;){var i=av(s);if(i!==null&&PP(i),i=y1(n,e,t,r),i===null&&eb(n,e,r,A0,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else eb(n,e,r,null,t)}}var A0=null;function y1(n,e,t,r){if(A0=null,n=dE(r),n=uc(n),n!==null)if(e=Wu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_P(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return A0=n,null}function DP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A4()){case hE:return 1;case CP:return 4;case _0:case C4:return 16;case NP:return 536870912;default:return 16}default:return 16}}var gl=null,gE=null,Ey=null;function OP(){if(Ey)return Ey;var n,e=gE,t=e.length,r,s="value"in gl?gl.value:gl.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===s[i-r];r++);return Ey=s.slice(n,1<r?1-r:void 0)}function Ay(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Hv(){return!0}function BC(){return!1}function Br(n){function e(t,r,s,i,a){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hv:BC,this.isPropagationStopped=BC,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Hv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Hv)},persist:function(){},isPersistent:Hv}),e}var Df={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vE=Br(Df),iv=_t({},Df,{view:0,detail:0}),$4=Br(iv),Vw,Gw,Jf,Fx=_t({},iv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jf&&(Jf&&n.type==="mousemove"?(Vw=n.screenX-Jf.screenX,Gw=n.screenY-Jf.screenY):Gw=Vw=0,Jf=n),Vw)},movementY:function(n){return"movementY"in n?n.movementY:Gw}}),zC=Br(Fx),B4=_t({},Fx,{dataTransfer:0}),z4=Br(B4),U4=_t({},iv,{relatedTarget:0}),qw=Br(U4),H4=_t({},Df,{animationName:0,elapsedTime:0,pseudoElement:0}),W4=Br(H4),V4=_t({},Df,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),G4=Br(V4),q4=_t({},Df,{data:0}),UC=Br(q4),Y4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=X4[n])?!!e[n]:!1}function yE(){return Q4}var J4=_t({},iv,{key:function(n){if(n.key){var e=Y4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ay(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?K4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yE,charCode:function(n){return n.type==="keypress"?Ay(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ay(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Z4=Br(J4),e$=_t({},Fx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HC=Br(e$),t$=_t({},iv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yE}),n$=Br(t$),r$=_t({},Df,{propertyName:0,elapsedTime:0,pseudoElement:0}),s$=Br(r$),i$=_t({},Fx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),a$=Br(i$),o$=[9,13,27,32],xE=Ga&&"CompositionEvent"in window,Lp=null;Ga&&"documentMode"in document&&(Lp=document.documentMode);var l$=Ga&&"TextEvent"in window&&!Lp,LP=Ga&&(!xE||Lp&&8<Lp&&11>=Lp),WC=" ",VC=!1;function FP(n,e){switch(n){case"keyup":return o$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $P(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ad=!1;function c$(n,e){switch(n){case"compositionend":return $P(e);case"keypress":return e.which!==32?null:(VC=!0,WC);case"textInput":return n=e.data,n===WC&&VC?null:n;default:return null}}function u$(n,e){if(Ad)return n==="compositionend"||!xE&&FP(n,e)?(n=OP(),Ey=gE=gl=null,Ad=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LP&&e.locale!=="ko"?null:e.data;default:return null}}var d$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!d$[n.type]:e==="textarea"}function BP(n,e,t,r){vP(r),e=C0(e,"onChange"),0<e.length&&(t=new vE("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Fp=null,rm=null;function h$(n){QP(n,0)}function $x(n){var e=kd(n);if(uP(e))return n}function f$(n,e){if(n==="change")return e}var zP=!1;if(Ga){var Yw;if(Ga){var Kw="oninput"in document;if(!Kw){var qC=document.createElement("div");qC.setAttribute("oninput","return;"),Kw=typeof qC.oninput=="function"}Yw=Kw}else Yw=!1;zP=Yw&&(!document.documentMode||9<document.documentMode)}function YC(){Fp&&(Fp.detachEvent("onpropertychange",UP),rm=Fp=null)}function UP(n){if(n.propertyName==="value"&&$x(rm)){var e=[];BP(e,rm,n,dE(n)),bP(h$,e)}}function p$(n,e,t){n==="focusin"?(YC(),Fp=e,rm=t,Fp.attachEvent("onpropertychange",UP)):n==="focusout"&&YC()}function m$(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $x(rm)}function g$(n,e){if(n==="click")return $x(e)}function v$(n,e){if(n==="input"||n==="change")return $x(e)}function y$(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Hs=typeof Object.is=="function"?Object.is:y$;function sm(n,e){if(Hs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!e1.call(e,s)||!Hs(n[s],e[s]))return!1}return!0}function KC(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function XC(n,e){var t=KC(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=KC(t)}}function HP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?HP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function WP(){for(var n=window,e=x0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=x0(n.document)}return e}function wE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function x$(n){var e=WP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&HP(t.ownerDocument.documentElement,t)){if(r!==null&&wE(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=XC(t,i);var a=XC(t,r);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var w$=Ga&&"documentMode"in document&&11>=document.documentMode,Cd=null,x1=null,$p=null,w1=!1;function QC(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;w1||Cd==null||Cd!==x0(r)||(r=Cd,"selectionStart"in r&&wE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$p&&sm($p,r)||($p=r,r=C0(x1,"onSelect"),0<r.length&&(e=new vE("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Cd)))}function Wv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Nd={animationend:Wv("Animation","AnimationEnd"),animationiteration:Wv("Animation","AnimationIteration"),animationstart:Wv("Animation","AnimationStart"),transitionend:Wv("Transition","TransitionEnd")},Xw={},VP={};Ga&&(VP=document.createElement("div").style,"AnimationEvent"in window||(delete Nd.animationend.animation,delete Nd.animationiteration.animation,delete Nd.animationstart.animation),"TransitionEvent"in window||delete Nd.transitionend.transition);function Bx(n){if(Xw[n])return Xw[n];if(!Nd[n])return n;var e=Nd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in VP)return Xw[n]=e[t];return n}var GP=Bx("animationend"),qP=Bx("animationiteration"),YP=Bx("animationstart"),KP=Bx("transitionend"),XP=new Map,JC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(n,e){XP.set(n,e),Hu(e,[n])}for(var Qw=0;Qw<JC.length;Qw++){var Jw=JC[Qw],b$=Jw.toLowerCase(),_$=Jw[0].toUpperCase()+Jw.slice(1);Fl(b$,"on"+_$)}Fl(GP,"onAnimationEnd");Fl(qP,"onAnimationIteration");Fl(YP,"onAnimationStart");Fl("dblclick","onDoubleClick");Fl("focusin","onFocus");Fl("focusout","onBlur");Fl(KP,"onTransitionEnd");vf("onMouseEnter",["mouseout","mouseover"]);vf("onMouseLeave",["mouseout","mouseover"]);vf("onPointerEnter",["pointerout","pointerover"]);vf("onPointerLeave",["pointerout","pointerover"]);Hu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S$=new Set("cancel close invalid load scroll toggle".split(" ").concat(fp));function ZC(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,b4(r,e,void 0,n),n.currentTarget=null}function QP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;ZC(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;ZC(s,o,u),i=l}}}if(b0)throw n=m1,b0=!1,m1=null,n}function at(n,e){var t=e[A1];t===void 0&&(t=e[A1]=new Set);var r=n+"__bubble";t.has(r)||(JP(e,n,2,!1),t.add(r))}function Zw(n,e,t){var r=0;e&&(r|=4),JP(t,n,r,e)}var Vv="_reactListening"+Math.random().toString(36).slice(2);function im(n){if(!n[Vv]){n[Vv]=!0,iP.forEach(function(t){t!=="selectionchange"&&(S$.has(t)||Zw(t,!1,n),Zw(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Vv]||(e[Vv]=!0,Zw("selectionchange",!1,e))}}function JP(n,e,t,r){switch(DP(e)){case 1:var s=L4;break;case 4:s=F4;break;default:s=mE}t=s.bind(null,e,t,n),s=void 0,!p1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function eb(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=uc(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}bP(function(){var u=i,h=dE(t),f=[];e:{var p=XP.get(n);if(p!==void 0){var m=vE,y=n;switch(n){case"keypress":if(Ay(t)===0)break e;case"keydown":case"keyup":m=Z4;break;case"focusin":y="focus",m=qw;break;case"focusout":y="blur",m=qw;break;case"beforeblur":case"afterblur":m=qw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=zC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=z4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=n$;break;case GP:case qP:case YP:m=W4;break;case KP:m=s$;break;case"scroll":m=$4;break;case"wheel":m=a$;break;case"copy":case"cut":case"paste":m=G4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=HC}var g=(e&4)!==0,w=!g&&n==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var x=u,b;x!==null;){b=x;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,v!==null&&(E=Zp(x,v),E!=null&&g.push(am(x,E,b)))),w)break;x=x.return}0<g.length&&(p=new m(p,y,null,t,h),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==h1&&(y=t.relatedTarget||t.fromElement)&&(uc(y)||y[qa]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?uc(y):null,y!==null&&(w=Wu(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=zC,E="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(g=HC,E="onPointerLeave",v="onPointerEnter",x="pointer"),w=m==null?p:kd(m),b=y==null?p:kd(y),p=new g(E,x+"leave",m,t,h),p.target=w,p.relatedTarget=b,E=null,uc(h)===u&&(g=new g(v,x+"enter",y,t,h),g.target=b,g.relatedTarget=w,E=g),w=E,m&&y)t:{for(g=m,v=y,x=0,b=g;b;b=td(b))x++;for(b=0,E=v;E;E=td(E))b++;for(;0<x-b;)g=td(g),x--;for(;0<b-x;)v=td(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=td(g),v=td(v)}g=null}else g=null;m!==null&&eN(f,p,m,g,!1),y!==null&&w!==null&&eN(f,w,y,g,!0)}}e:{if(p=u?kd(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=f$;else if(GC(p))if(zP)A=v$;else{A=m$;var C=p$}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=g$);if(A&&(A=A(n,u))){BP(f,A,t,h);break e}C&&C(n,p,u),n==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&o1(p,"number",p.value)}switch(C=u?kd(u):window,n){case"focusin":(GC(C)||C.contentEditable==="true")&&(Cd=C,x1=u,$p=null);break;case"focusout":$p=x1=Cd=null;break;case"mousedown":w1=!0;break;case"contextmenu":case"mouseup":case"dragend":w1=!1,QC(f,t,h);break;case"selectionchange":if(w$)break;case"keydown":case"keyup":QC(f,t,h)}var N;if(xE)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ad?FP(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(LP&&t.locale!=="ko"&&(Ad||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ad&&(N=OP()):(gl=h,gE="value"in gl?gl.value:gl.textContent,Ad=!0)),C=C0(u,P),0<C.length&&(P=new UC(P,n,null,t,h),f.push({event:P,listeners:C}),N?P.data=N:(N=$P(t),N!==null&&(P.data=N)))),(N=l$?c$(n,t):u$(n,t))&&(u=C0(u,"onBeforeInput"),0<u.length&&(h=new UC("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=N))}QP(f,e)})}function am(n,e,t){return{instance:n,listener:e,currentTarget:t}}function C0(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zp(n,t),i!=null&&r.unshift(am(n,i,s)),i=Zp(n,e),i!=null&&r.push(am(n,i,s))),n=n.return}return r}function td(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function eN(n,e,t,r,s){for(var i=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=Zp(t,i),l!=null&&a.unshift(am(t,l,o))):s||(l=Zp(t,i),l!=null&&a.push(am(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var E$=/\r\n?/g,A$=/\u0000|\uFFFD/g;function tN(n){return(typeof n=="string"?n:""+n).replace(E$,`
`).replace(A$,"")}function Gv(n,e,t){if(e=tN(e),tN(n)!==e&&t)throw Error(G(425))}function N0(){}var b1=null,_1=null;function S1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var E1=typeof setTimeout=="function"?setTimeout:void 0,C$=typeof clearTimeout=="function"?clearTimeout:void 0,nN=typeof Promise=="function"?Promise:void 0,N$=typeof queueMicrotask=="function"?queueMicrotask:typeof nN<"u"?function(n){return nN.resolve(null).then(n).catch(k$)}:E1;function k$(n){setTimeout(function(){throw n})}function tb(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),nm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);nm(e)}function _l(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function rN(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Of=Math.random().toString(36).slice(2),Ni="__reactFiber$"+Of,om="__reactProps$"+Of,qa="__reactContainer$"+Of,A1="__reactEvents$"+Of,j$="__reactListeners$"+Of,P$="__reactHandles$"+Of;function uc(n){var e=n[Ni];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qa]||t[Ni]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=rN(n);n!==null;){if(t=n[Ni])return t;n=rN(n)}return e}n=t,t=n.parentNode}return null}function av(n){return n=n[Ni]||n[qa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function kd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(G(33))}function zx(n){return n[om]||null}var C1=[],jd=-1;function $l(n){return{current:n}}function ot(n){0>jd||(n.current=C1[jd],C1[jd]=null,jd--)}function nt(n,e){jd++,C1[jd]=n.current,n.current=e}var jl={},jn=$l(jl),or=$l(!1),Cu=jl;function yf(n,e){var t=n.type.contextTypes;if(!t)return jl;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function lr(n){return n=n.childContextTypes,n!=null}function k0(){ot(or),ot(jn)}function sN(n,e,t){if(jn.current!==jl)throw Error(G(168));nt(jn,e),nt(or,t)}function ZP(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,p4(n)||"Unknown",s));return _t({},t,r)}function j0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||jl,Cu=jn.current,nt(jn,n),nt(or,or.current),!0}function iN(n,e,t){var r=n.stateNode;if(!r)throw Error(G(169));t?(n=ZP(n,e,Cu),r.__reactInternalMemoizedMergedChildContext=n,ot(or),ot(jn),nt(jn,n)):ot(or),nt(or,t)}var aa=null,Ux=!1,nb=!1;function eT(n){aa===null?aa=[n]:aa.push(n)}function T$(n){Ux=!0,eT(n)}function Bl(){if(!nb&&aa!==null){nb=!0;var n=0,e=Ye;try{var t=aa;for(Ye=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}aa=null,Ux=!1}catch(s){throw aa!==null&&(aa=aa.slice(n+1)),AP(hE,Bl),s}finally{Ye=e,nb=!1}}return null}var Pd=[],Td=0,P0=null,T0=0,Jr=[],Zr=0,Nu=null,za=1,Ua="";function Zl(n,e){Pd[Td++]=T0,Pd[Td++]=P0,P0=n,T0=e}function tT(n,e,t){Jr[Zr++]=za,Jr[Zr++]=Ua,Jr[Zr++]=Nu,Nu=n;var r=za;n=Ua;var s=32-zs(r)-1;r&=~(1<<s),t+=1;var i=32-zs(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,za=1<<32-zs(e)+s|t<<s|r,Ua=i+n}else za=1<<i|t<<s|r,Ua=n}function bE(n){n.return!==null&&(Zl(n,1),tT(n,1,0))}function _E(n){for(;n===P0;)P0=Pd[--Td],Pd[Td]=null,T0=Pd[--Td],Pd[Td]=null;for(;n===Nu;)Nu=Jr[--Zr],Jr[Zr]=null,Ua=Jr[--Zr],Jr[Zr]=null,za=Jr[--Zr],Jr[Zr]=null}var Ir=null,Mr=null,ft=!1,Os=null;function nT(n,e){var t=ts(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function aN(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ir=n,Mr=_l(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ir=n,Mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Nu!==null?{id:za,overflow:Ua}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ts(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ir=n,Mr=null,!0):!1;default:return!1}}function N1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function k1(n){if(ft){var e=Mr;if(e){var t=e;if(!aN(n,e)){if(N1(n))throw Error(G(418));e=_l(t.nextSibling);var r=Ir;e&&aN(n,e)?nT(r,t):(n.flags=n.flags&-4097|2,ft=!1,Ir=n)}}else{if(N1(n))throw Error(G(418));n.flags=n.flags&-4097|2,ft=!1,Ir=n}}}function oN(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ir=n}function qv(n){if(n!==Ir)return!1;if(!ft)return oN(n),ft=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!S1(n.type,n.memoizedProps)),e&&(e=Mr)){if(N1(n))throw rT(),Error(G(418));for(;e;)nT(n,e),e=_l(e.nextSibling)}if(oN(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(G(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Mr=_l(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Mr=null}}else Mr=Ir?_l(n.stateNode.nextSibling):null;return!0}function rT(){for(var n=Mr;n;)n=_l(n.nextSibling)}function xf(){Mr=Ir=null,ft=!1}function SE(n){Os===null?Os=[n]:Os.push(n)}var R$=eo.ReactCurrentBatchConfig;function Zf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(G(309));var r=t.stateNode}if(!r)throw Error(G(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error(G(284));if(!t._owner)throw Error(G(290,n))}return n}function Yv(n,e){throw n=Object.prototype.toString.call(e),Error(G(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function lN(n){var e=n._init;return e(n._payload)}function sT(n){function e(v,x){if(n){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function t(v,x){if(!n)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Cl(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,n?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,x,b,E){return x===null||x.tag!==6?(x=cb(b,v.mode,E),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,E){var A=b.type;return A===Ed?h(v,x,b.props.children,E,b.key):x!==null&&(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===vo&&lN(A)===x.type)?(E=s(x,b.props),E.ref=Zf(v,x,b),E.return=v,E):(E=Ry(b.type,b.key,b.props,null,v.mode,E),E.ref=Zf(v,x,b),E.return=v,E)}function u(v,x,b,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=ub(b,v.mode,E),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function h(v,x,b,E,A){return x===null||x.tag!==7?(x=Au(b,v.mode,E,A),x.return=v,x):(x=s(x,b),x.return=v,x)}function f(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=cb(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lv:return b=Ry(x.type,x.key,x.props,null,v.mode,b),b.ref=Zf(v,null,x),b.return=v,b;case Sd:return x=ub(x,v.mode,b),x.return=v,x;case vo:var E=x._init;return f(v,E(x._payload),b)}if(dp(x)||Yf(x))return x=Au(x,v.mode,b,null),x.return=v,x;Yv(v,x)}return null}function p(v,x,b,E){var A=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:o(v,x,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Lv:return b.key===A?l(v,x,b,E):null;case Sd:return b.key===A?u(v,x,b,E):null;case vo:return A=b._init,p(v,x,A(b._payload),E)}if(dp(b)||Yf(b))return A!==null?null:h(v,x,b,E,null);Yv(v,b)}return null}function m(v,x,b,E,A){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(b)||null,o(x,v,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Lv:return v=v.get(E.key===null?b:E.key)||null,l(x,v,E,A);case Sd:return v=v.get(E.key===null?b:E.key)||null,u(x,v,E,A);case vo:var C=E._init;return m(v,x,b,C(E._payload),A)}if(dp(E)||Yf(E))return v=v.get(b)||null,h(x,v,E,A,null);Yv(x,E)}return null}function y(v,x,b,E){for(var A=null,C=null,N=x,P=x=0,T=null;N!==null&&P<b.length;P++){N.index>P?(T=N,N=null):T=N.sibling;var M=p(v,N,b[P],E);if(M===null){N===null&&(N=T);break}n&&N&&M.alternate===null&&e(v,N),x=i(M,x,P),C===null?A=M:C.sibling=M,C=M,N=T}if(P===b.length)return t(v,N),ft&&Zl(v,P),A;if(N===null){for(;P<b.length;P++)N=f(v,b[P],E),N!==null&&(x=i(N,x,P),C===null?A=N:C.sibling=N,C=N);return ft&&Zl(v,P),A}for(N=r(v,N);P<b.length;P++)T=m(N,v,P,b[P],E),T!==null&&(n&&T.alternate!==null&&N.delete(T.key===null?P:T.key),x=i(T,x,P),C===null?A=T:C.sibling=T,C=T);return n&&N.forEach(function(I){return e(v,I)}),ft&&Zl(v,P),A}function g(v,x,b,E){var A=Yf(b);if(typeof A!="function")throw Error(G(150));if(b=A.call(b),b==null)throw Error(G(151));for(var C=A=null,N=x,P=x=0,T=null,M=b.next();N!==null&&!M.done;P++,M=b.next()){N.index>P?(T=N,N=null):T=N.sibling;var I=p(v,N,M.value,E);if(I===null){N===null&&(N=T);break}n&&N&&I.alternate===null&&e(v,N),x=i(I,x,P),C===null?A=I:C.sibling=I,C=I,N=T}if(M.done)return t(v,N),ft&&Zl(v,P),A;if(N===null){for(;!M.done;P++,M=b.next())M=f(v,M.value,E),M!==null&&(x=i(M,x,P),C===null?A=M:C.sibling=M,C=M);return ft&&Zl(v,P),A}for(N=r(v,N);!M.done;P++,M=b.next())M=m(N,v,P,M.value,E),M!==null&&(n&&M.alternate!==null&&N.delete(M.key===null?P:M.key),x=i(M,x,P),C===null?A=M:C.sibling=M,C=M);return n&&N.forEach(function(R){return e(v,R)}),ft&&Zl(v,P),A}function w(v,x,b,E){if(typeof b=="object"&&b!==null&&b.type===Ed&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Lv:e:{for(var A=b.key,C=x;C!==null;){if(C.key===A){if(A=b.type,A===Ed){if(C.tag===7){t(v,C.sibling),x=s(C,b.props.children),x.return=v,v=x;break e}}else if(C.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===vo&&lN(A)===C.type){t(v,C.sibling),x=s(C,b.props),x.ref=Zf(v,C,b),x.return=v,v=x;break e}t(v,C);break}else e(v,C);C=C.sibling}b.type===Ed?(x=Au(b.props.children,v.mode,E,b.key),x.return=v,v=x):(E=Ry(b.type,b.key,b.props,null,v.mode,E),E.ref=Zf(v,x,b),E.return=v,v=E)}return a(v);case Sd:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){t(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=ub(b,v.mode,E),x.return=v,v=x}return a(v);case vo:return C=b._init,w(v,x,C(b._payload),E)}if(dp(b))return y(v,x,b,E);if(Yf(b))return g(v,x,b,E);Yv(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(t(v,x.sibling),x=s(x,b),x.return=v,v=x):(t(v,x),x=cb(b,v.mode,E),x.return=v,v=x),a(v)):t(v,x)}return w}var wf=sT(!0),iT=sT(!1),R0=$l(null),M0=null,Rd=null,EE=null;function AE(){EE=Rd=M0=null}function CE(n){var e=R0.current;ot(R0),n._currentValue=e}function j1(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ud(n,e){M0=n,EE=Rd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ir=!0),n.firstContext=null)}function is(n){var e=n._currentValue;if(EE!==n)if(n={context:n,memoizedValue:e,next:null},Rd===null){if(M0===null)throw Error(G(308));Rd=n,M0.dependencies={lanes:0,firstContext:n}}else Rd=Rd.next=n;return e}var dc=null;function NE(n){dc===null?dc=[n]:dc.push(n)}function aT(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,NE(e)):(t.next=s.next,s.next=t),e.interleaved=t,Ya(n,r)}function Ya(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var yo=!1;function kE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ha(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Sl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ya(n,t)}return s=r.interleaved,s===null?(e.next=e,NE(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ya(n,t)}function Cy(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fE(n,t)}}function cN(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function I0(n,e,t,r){var s=n.updateQueue;yo=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;a=0,h=u=l=null,o=i;do{var p=o.lane,m=o.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=n,g=o;switch(p=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=_t({},f,p);break e;case 2:yo=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=m,l=f):h=h.next=m,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ju|=a,n.lanes=a,n.memoizedState=f}}function uN(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var ov={},Li=$l(ov),lm=$l(ov),cm=$l(ov);function hc(n){if(n===ov)throw Error(G(174));return n}function jE(n,e){switch(nt(cm,e),nt(lm,n),nt(Li,ov),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:c1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=c1(e,n)}ot(Li),nt(Li,e)}function bf(){ot(Li),ot(lm),ot(cm)}function lT(n){hc(cm.current);var e=hc(Li.current),t=c1(e,n.type);e!==t&&(nt(lm,n),nt(Li,t))}function PE(n){lm.current===n&&(ot(Li),ot(lm))}var xt=$l(0);function D0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rb=[];function TE(){for(var n=0;n<rb.length;n++)rb[n]._workInProgressVersionPrimary=null;rb.length=0}var Ny=eo.ReactCurrentDispatcher,sb=eo.ReactCurrentBatchConfig,ku=0,bt=null,qt=null,sn=null,O0=!1,Bp=!1,um=0,M$=0;function wn(){throw Error(G(321))}function RE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Hs(n[t],e[t]))return!1;return!0}function ME(n,e,t,r,s,i){if(ku=i,bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ny.current=n===null||n.memoizedState===null?L$:F$,n=t(r,s),Bp){i=0;do{if(Bp=!1,um=0,25<=i)throw Error(G(301));i+=1,sn=qt=null,e.updateQueue=null,Ny.current=$$,n=t(r,s)}while(Bp)}if(Ny.current=L0,e=qt!==null&&qt.next!==null,ku=0,sn=qt=bt=null,O0=!1,e)throw Error(G(300));return n}function IE(){var n=um!==0;return um=0,n}function ni(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?bt.memoizedState=sn=n:sn=sn.next=n,sn}function as(){if(qt===null){var n=bt.alternate;n=n!==null?n.memoizedState:null}else n=qt.next;var e=sn===null?bt.memoizedState:sn.next;if(e!==null)sn=e,qt=n;else{if(n===null)throw Error(G(310));qt=n,n={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},sn===null?bt.memoizedState=sn=n:sn=sn.next=n}return sn}function dm(n,e){return typeof e=="function"?e(n):e}function ib(n){var e=as(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=qt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var h=u.lane;if((ku&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,a=r):l=l.next=f,bt.lanes|=h,ju|=h}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,Hs(r,e.memoizedState)||(ir=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,bt.lanes|=i,ju|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ab(n){var e=as(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do i=n(i,a.action),a=a.next;while(a!==s);Hs(i,e.memoizedState)||(ir=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function cT(){}function uT(n,e){var t=bt,r=as(),s=e(),i=!Hs(r.memoizedState,s);if(i&&(r.memoizedState=s,ir=!0),r=r.queue,DE(fT.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||sn!==null&&sn.memoizedState.tag&1){if(t.flags|=2048,hm(9,hT.bind(null,t,r,s,e),void 0,null),an===null)throw Error(G(349));ku&30||dT(t,e,s)}return s}function dT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function hT(n,e,t,r){e.value=t,e.getSnapshot=r,pT(e)&&mT(n)}function fT(n,e,t){return t(function(){pT(e)&&mT(n)})}function pT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Hs(n,t)}catch{return!0}}function mT(n){var e=Ya(n,1);e!==null&&Us(e,n,1,-1)}function dN(n){var e=ni();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dm,lastRenderedState:n},e.queue=n,n=n.dispatch=O$.bind(null,bt,n),[e.memoizedState,n]}function hm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function gT(){return as().memoizedState}function ky(n,e,t,r){var s=ni();bt.flags|=n,s.memoizedState=hm(1|e,t,void 0,r===void 0?null:r)}function Hx(n,e,t,r){var s=as();r=r===void 0?null:r;var i=void 0;if(qt!==null){var a=qt.memoizedState;if(i=a.destroy,r!==null&&RE(r,a.deps)){s.memoizedState=hm(e,t,i,r);return}}bt.flags|=n,s.memoizedState=hm(1|e,t,i,r)}function hN(n,e){return ky(8390656,8,n,e)}function DE(n,e){return Hx(2048,8,n,e)}function vT(n,e){return Hx(4,2,n,e)}function yT(n,e){return Hx(4,4,n,e)}function xT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function wT(n,e,t){return t=t!=null?t.concat([n]):null,Hx(4,4,xT.bind(null,e,n),t)}function OE(){}function bT(n,e){var t=as();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&RE(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function _T(n,e){var t=as();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&RE(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function ST(n,e,t){return ku&21?(Hs(t,e)||(t=kP(),bt.lanes|=t,ju|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ir=!0),n.memoizedState=t)}function I$(n,e){var t=Ye;Ye=t!==0&&4>t?t:4,n(!0);var r=sb.transition;sb.transition={};try{n(!1),e()}finally{Ye=t,sb.transition=r}}function ET(){return as().memoizedState}function D$(n,e,t){var r=Al(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},AT(n))CT(e,t);else if(t=aT(n,e,t,r),t!==null){var s=Wn();Us(t,n,r,s),NT(t,e,r)}}function O$(n,e,t){var r=Al(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(AT(n))CT(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,t);if(s.hasEagerState=!0,s.eagerState=o,Hs(o,a)){var l=e.interleaved;l===null?(s.next=s,NE(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=aT(n,e,s,r),t!==null&&(s=Wn(),Us(t,n,r,s),NT(t,e,r))}}function AT(n){var e=n.alternate;return n===bt||e!==null&&e===bt}function CT(n,e){Bp=O0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function NT(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fE(n,t)}}var L0={readContext:is,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},L$={readContext:is,useCallback:function(n,e){return ni().memoizedState=[n,e===void 0?null:e],n},useContext:is,useEffect:hN,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ky(4194308,4,xT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ky(4194308,4,n,e)},useInsertionEffect:function(n,e){return ky(4,2,n,e)},useMemo:function(n,e){var t=ni();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ni();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=D$.bind(null,bt,n),[r.memoizedState,n]},useRef:function(n){var e=ni();return n={current:n},e.memoizedState=n},useState:dN,useDebugValue:OE,useDeferredValue:function(n){return ni().memoizedState=n},useTransition:function(){var n=dN(!1),e=n[0];return n=I$.bind(null,n[1]),ni().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=bt,s=ni();if(ft){if(t===void 0)throw Error(G(407));t=t()}else{if(t=e(),an===null)throw Error(G(349));ku&30||dT(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,hN(fT.bind(null,r,i,n),[n]),r.flags|=2048,hm(9,hT.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=ni(),e=an.identifierPrefix;if(ft){var t=Ua,r=za;t=(r&~(1<<32-zs(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=um++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=M$++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},F$={readContext:is,useCallback:bT,useContext:is,useEffect:DE,useImperativeHandle:wT,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:_T,useReducer:ib,useRef:gT,useState:function(){return ib(dm)},useDebugValue:OE,useDeferredValue:function(n){var e=as();return ST(e,qt.memoizedState,n)},useTransition:function(){var n=ib(dm)[0],e=as().memoizedState;return[n,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:ET,unstable_isNewReconciler:!1},$$={readContext:is,useCallback:bT,useContext:is,useEffect:DE,useImperativeHandle:wT,useInsertionEffect:vT,useLayoutEffect:yT,useMemo:_T,useReducer:ab,useRef:gT,useState:function(){return ab(dm)},useDebugValue:OE,useDeferredValue:function(n){var e=as();return qt===null?e.memoizedState=n:ST(e,qt.memoizedState,n)},useTransition:function(){var n=ab(dm)[0],e=as().memoizedState;return[n,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:ET,unstable_isNewReconciler:!1};function ys(n,e){if(n&&n.defaultProps){e=_t({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function P1(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:_t({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Wx={isMounted:function(n){return(n=n._reactInternals)?Wu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Wn(),s=Al(n),i=Ha(r,s);i.payload=e,t!=null&&(i.callback=t),e=Sl(n,i,s),e!==null&&(Us(e,n,s,r),Cy(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Wn(),s=Al(n),i=Ha(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Sl(n,i,s),e!==null&&(Us(e,n,s,r),Cy(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Wn(),r=Al(n),s=Ha(t,r);s.tag=2,e!=null&&(s.callback=e),e=Sl(n,s,r),e!==null&&(Us(e,n,r,t),Cy(e,n,r))}};function fN(n,e,t,r,s,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!sm(t,r)||!sm(s,i):!0}function kT(n,e,t){var r=!1,s=jl,i=e.contextType;return typeof i=="object"&&i!==null?i=is(i):(s=lr(e)?Cu:jn.current,r=e.contextTypes,i=(r=r!=null)?yf(n,s):jl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wx,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function pN(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Wx.enqueueReplaceState(e,e.state,null)}function T1(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},kE(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=is(i):(i=lr(e)?Cu:jn.current,s.context=yf(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(P1(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wx.enqueueReplaceState(s,s.state,null),I0(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function _f(n,e){try{var t="",r=e;do t+=f4(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function ob(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function R1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var B$=typeof WeakMap=="function"?WeakMap:Map;function jT(n,e,t){t=Ha(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){$0||($0=!0,U1=r),R1(n,e)},t}function PT(n,e,t){t=Ha(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){R1(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){R1(n,e),typeof r!="function"&&(El===null?El=new Set([this]):El.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function mN(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new B$;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=e3.bind(null,n,e,t),e.then(n,n))}function gN(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function vN(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ha(-1,1),e.tag=2,Sl(t,e,1))),t.lanes|=1),n)}var z$=eo.ReactCurrentOwner,ir=!1;function Bn(n,e,t,r){e.child=n===null?iT(e,null,t,r):wf(e,n.child,t,r)}function yN(n,e,t,r,s){t=t.render;var i=e.ref;return Ud(e,s),r=ME(n,e,t,r,i,s),t=IE(),n!==null&&!ir?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ka(n,e,s)):(ft&&t&&bE(e),e.flags|=1,Bn(n,e,r,s),e.child)}function xN(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!WE(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,TT(n,e,i,r,s)):(n=Ry(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:sm,t(a,r)&&n.ref===e.ref)return Ka(n,e,s)}return e.flags|=1,n=Cl(i,r),n.ref=e.ref,n.return=e,e.child=n}function TT(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(sm(i,r)&&n.ref===e.ref)if(ir=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(ir=!0);else return e.lanes=n.lanes,Ka(n,e,s)}return M1(n,e,t,r,s)}function RT(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Id,jr),jr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,nt(Id,jr),jr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,nt(Id,jr),jr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,nt(Id,jr),jr|=r;return Bn(n,e,s,t),e.child}function MT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function M1(n,e,t,r,s){var i=lr(t)?Cu:jn.current;return i=yf(e,i),Ud(e,s),t=ME(n,e,t,r,i,s),r=IE(),n!==null&&!ir?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ka(n,e,s)):(ft&&r&&bE(e),e.flags|=1,Bn(n,e,t,s),e.child)}function wN(n,e,t,r,s){if(lr(t)){var i=!0;j0(e)}else i=!1;if(Ud(e,s),e.stateNode===null)jy(n,e),kT(e,t,r),T1(e,t,r,s),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=is(u):(u=lr(t)?Cu:jn.current,u=yf(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&pN(e,a,r,u),yo=!1;var p=e.memoizedState;a.state=p,I0(e,r,a,s),l=e.memoizedState,o!==r||p!==l||or.current||yo?(typeof h=="function"&&(P1(e,t,h,r),l=e.memoizedState),(o=yo||fN(e,t,o,r,p,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,oT(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:ys(e.type,o),a.props=u,f=e.pendingProps,p=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=is(l):(l=lr(t)?Cu:jn.current,l=yf(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==l)&&pN(e,a,r,l),yo=!1,p=e.memoizedState,a.state=p,I0(e,r,a,s);var y=e.memoizedState;o!==f||p!==y||or.current||yo?(typeof m=="function"&&(P1(e,t,m,r),y=e.memoizedState),(u=yo||fN(e,t,u,r,p,y,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return I1(n,e,t,r,i,s)}function I1(n,e,t,r,s,i){MT(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&iN(e,t,!1),Ka(n,e,i);r=e.stateNode,z$.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=wf(e,n.child,null,i),e.child=wf(e,null,o,i)):Bn(n,e,o,i),e.memoizedState=r.state,s&&iN(e,t,!0),e.child}function IT(n){var e=n.stateNode;e.pendingContext?sN(n,e.pendingContext,e.pendingContext!==e.context):e.context&&sN(n,e.context,!1),jE(n,e.containerInfo)}function bN(n,e,t,r,s){return xf(),SE(s),e.flags|=256,Bn(n,e,t,r),e.child}var D1={dehydrated:null,treeContext:null,retryLane:0};function O1(n){return{baseLanes:n,cachePool:null,transitions:null}}function DT(n,e,t){var r=e.pendingProps,s=xt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),nt(xt,s&1),n===null)return k1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=qx(a,r,0,null),n=Au(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=O1(t),e.memoizedState=D1,n):LE(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return U$(n,e,a,r,o,s,t);if(i){i=r.fallback,a=e.mode,s=n.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Cl(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Cl(o,i):(i=Au(i,a,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=n.child.memoizedState,a=a===null?O1(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=D1,r}return i=n.child,n=i.sibling,r=Cl(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function LE(n,e){return e=qx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Kv(n,e,t,r){return r!==null&&SE(r),wf(e,n.child,null,t),n=LE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function U$(n,e,t,r,s,i,a){if(t)return e.flags&256?(e.flags&=-257,r=ob(Error(G(422))),Kv(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=qx({mode:"visible",children:r.children},s,0,null),i=Au(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&wf(e,n.child,null,a),e.child.memoizedState=O1(a),e.memoizedState=D1,i);if(!(e.mode&1))return Kv(n,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(G(419)),r=ob(i,r,void 0),Kv(n,e,a,r)}if(o=(a&n.childLanes)!==0,ir||o){if(r=an,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ya(n,s),Us(r,n,s,-1))}return HE(),r=ob(Error(G(421))),Kv(n,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=t3.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,Mr=_l(s.nextSibling),Ir=e,ft=!0,Os=null,n!==null&&(Jr[Zr++]=za,Jr[Zr++]=Ua,Jr[Zr++]=Nu,za=n.id,Ua=n.overflow,Nu=e),e=LE(e,r.children),e.flags|=4096,e)}function _N(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),j1(n.return,e,t)}function lb(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function OT(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Bn(n,e,r.children,t),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&_N(n,t,e);else if(n.tag===19)_N(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(nt(xt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&D0(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),lb(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&D0(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}lb(e,!0,t,null,i);break;case"together":lb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ka(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ju|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(G(153));if(e.child!==null){for(n=e.child,t=Cl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Cl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function H$(n,e,t){switch(e.tag){case 3:IT(e),xf();break;case 5:lT(e);break;case 1:lr(e.type)&&j0(e);break;case 4:jE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nt(R0,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(xt,xt.current&1),e.flags|=128,null):t&e.child.childLanes?DT(n,e,t):(nt(xt,xt.current&1),n=Ka(n,e,t),n!==null?n.sibling:null);nt(xt,xt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return OT(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nt(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,RT(n,e,t)}return Ka(n,e,t)}var LT,L1,FT,$T;LT=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};L1=function(){};FT=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,hc(Li.current);var i=null;switch(t){case"input":s=i1(n,s),r=i1(n,r),i=[];break;case"select":s=_t({},s,{value:void 0}),r=_t({},r,{value:void 0}),i=[];break;case"textarea":s=l1(n,s),r=l1(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=N0)}u1(t,r);var a;t=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(i||(i=[]),i.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&at("scroll",n),i||o===l||(i=[])):(i=i||[]).push(u,l))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};$T=function(n,e,t,r){t!==r&&(e.flags|=4)};function ep(n,e){if(!ft)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function bn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function W$(n,e,t){var r=e.pendingProps;switch(_E(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return lr(e.type)&&k0(),bn(e),null;case 3:return r=e.stateNode,bf(),ot(or),ot(jn),TE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(qv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Os!==null&&(V1(Os),Os=null))),L1(n,e),bn(e),null;case 5:PE(e);var s=hc(cm.current);if(t=e.type,n!==null&&e.stateNode!=null)FT(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return bn(e),null}if(n=hc(Li.current),qv(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Ni]=e,r[om]=i,n=(e.mode&1)!==0,t){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(s=0;s<fp.length;s++)at(fp[s],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":TC(r,i),at("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},at("invalid",r);break;case"textarea":MC(r,i),at("invalid",r)}u1(t,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Gv(r.textContent,o,n),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Gv(r.textContent,o,n),s=["children",""+o]):Qp.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&at("scroll",r)}switch(t){case"input":Fv(r),RC(r,i,!0);break;case"textarea":Fv(r),IC(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=N0)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=fP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[Ni]=e,n[om]=r,LT(n,e,!1,!1),e.stateNode=n;e:{switch(a=d1(t,r),t){case"dialog":at("cancel",n),at("close",n),s=r;break;case"iframe":case"object":case"embed":at("load",n),s=r;break;case"video":case"audio":for(s=0;s<fp.length;s++)at(fp[s],n);s=r;break;case"source":at("error",n),s=r;break;case"img":case"image":case"link":at("error",n),at("load",n),s=r;break;case"details":at("toggle",n),s=r;break;case"input":TC(n,r),s=i1(n,r),at("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=_t({},r,{value:void 0}),at("invalid",n);break;case"textarea":MC(n,r),s=l1(n,r),at("invalid",n);break;default:s=r}u1(t,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?gP(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pP(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Jp(n,l):typeof l=="number"&&Jp(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&at("scroll",n):l!=null&&oE(n,i,l,a))}switch(t){case"input":Fv(n),RC(n,r,!1);break;case"textarea":Fv(n),IC(n);break;case"option":r.value!=null&&n.setAttribute("value",""+kl(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Fd(n,!!r.multiple,i,!1):r.defaultValue!=null&&Fd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=N0)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bn(e),null;case 6:if(n&&e.stateNode!=null)$T(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(t=hc(cm.current),hc(Li.current),qv(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ni]=e,(i=r.nodeValue!==t)&&(n=Ir,n!==null))switch(n.tag){case 3:Gv(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Gv(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ni]=e,e.stateNode=r}return bn(e),null;case 13:if(ot(xt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ft&&Mr!==null&&e.mode&1&&!(e.flags&128))rT(),xf(),e.flags|=98560,i=!1;else if(i=qv(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Ni]=e}else xf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),i=!1}else Os!==null&&(V1(Os),Os=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||xt.current&1?Yt===0&&(Yt=3):HE())),e.updateQueue!==null&&(e.flags|=4),bn(e),null);case 4:return bf(),L1(n,e),n===null&&im(e.stateNode.containerInfo),bn(e),null;case 10:return CE(e.type._context),bn(e),null;case 17:return lr(e.type)&&k0(),bn(e),null;case 19:if(ot(xt),i=e.memoizedState,i===null)return bn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ep(i,!1);else{if(Yt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=D0(n),a!==null){for(e.flags|=128,ep(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return nt(xt,xt.current&1|2),e.child}n=n.sibling}i.tail!==null&&jt()>Sf&&(e.flags|=128,r=!0,ep(i,!1),e.lanes=4194304)}else{if(!r)if(n=D0(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ep(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ft)return bn(e),null}else 2*jt()-i.renderingStartTime>Sf&&t!==1073741824&&(e.flags|=128,r=!0,ep(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=jt(),e.sibling=null,t=xt.current,nt(xt,r?t&1|2:t&1),e):(bn(e),null);case 22:case 23:return UE(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jr&1073741824&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function V$(n,e){switch(_E(e),e.tag){case 1:return lr(e.type)&&k0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return bf(),ot(or),ot(jn),TE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return PE(e),null;case 13:if(ot(xt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(G(340));xf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ot(xt),null;case 4:return bf(),null;case 10:return CE(e.type._context),null;case 22:case 23:return UE(),null;case 24:return null;default:return null}}var Xv=!1,kn=!1,G$=typeof WeakSet=="function"?WeakSet:Set,re=null;function Md(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){At(n,e,r)}else t.current=null}function F1(n,e,t){try{t()}catch(r){At(n,e,r)}}var SN=!1;function q$(n,e){if(b1=E0,n=WP(),wE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||s!==0&&f.nodeType!==3||(o=a+s),f!==i||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++u===s&&(o=a),p===i&&++h===r&&(l=a),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(_1={focusedElem:n,selectionRange:t},E0=!1,re=e;re!==null;)if(e=re,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,re=n;else for(;re!==null;){e=re;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ys(e.type,g),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(E){At(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}return y=SN,SN=!1,y}function zp(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&F1(e,t,i)}s=s.next}while(s!==r)}}function Vx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function $1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function BT(n){var e=n.alternate;e!==null&&(n.alternate=null,BT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ni],delete e[om],delete e[A1],delete e[j$],delete e[P$])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function zT(n){return n.tag===5||n.tag===3||n.tag===4}function EN(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function B1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=N0));else if(r!==4&&(n=n.child,n!==null))for(B1(n,e,t),n=n.sibling;n!==null;)B1(n,e,t),n=n.sibling}function z1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(z1(n,e,t),n=n.sibling;n!==null;)z1(n,e,t),n=n.sibling}var fn=null,Is=!1;function oo(n,e,t){for(t=t.child;t!==null;)UT(n,e,t),t=t.sibling}function UT(n,e,t){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(Lx,t)}catch{}switch(t.tag){case 5:kn||Md(t,e);case 6:var r=fn,s=Is;fn=null,oo(n,e,t),fn=r,Is=s,fn!==null&&(Is?(n=fn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):fn.removeChild(t.stateNode));break;case 18:fn!==null&&(Is?(n=fn,t=t.stateNode,n.nodeType===8?tb(n.parentNode,t):n.nodeType===1&&tb(n,t),nm(n)):tb(fn,t.stateNode));break;case 4:r=fn,s=Is,fn=t.stateNode.containerInfo,Is=!0,oo(n,e,t),fn=r,Is=s;break;case 0:case 11:case 14:case 15:if(!kn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&F1(t,e,a),s=s.next}while(s!==r)}oo(n,e,t);break;case 1:if(!kn&&(Md(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){At(t,e,o)}oo(n,e,t);break;case 21:oo(n,e,t);break;case 22:t.mode&1?(kn=(r=kn)||t.memoizedState!==null,oo(n,e,t),kn=r):oo(n,e,t);break;default:oo(n,e,t)}}function AN(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new G$),e.forEach(function(r){var s=n3.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function fs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:fn=o.stateNode,Is=!1;break e;case 3:fn=o.stateNode.containerInfo,Is=!0;break e;case 4:fn=o.stateNode.containerInfo,Is=!0;break e}o=o.return}if(fn===null)throw Error(G(160));UT(i,a,s),fn=null,Is=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){At(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HT(e,n),e=e.sibling}function HT(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(fs(e,n),Qs(n),r&4){try{zp(3,n,n.return),Vx(3,n)}catch(g){At(n,n.return,g)}try{zp(5,n,n.return)}catch(g){At(n,n.return,g)}}break;case 1:fs(e,n),Qs(n),r&512&&t!==null&&Md(t,t.return);break;case 5:if(fs(e,n),Qs(n),r&512&&t!==null&&Md(t,t.return),n.flags&32){var s=n.stateNode;try{Jp(s,"")}catch(g){At(n,n.return,g)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&dP(s,i),d1(o,a);var u=d1(o,i);for(a=0;a<l.length;a+=2){var h=l[a],f=l[a+1];h==="style"?gP(s,f):h==="dangerouslySetInnerHTML"?pP(s,f):h==="children"?Jp(s,f):oE(s,h,f,u)}switch(o){case"input":a1(s,i);break;case"textarea":hP(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Fd(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Fd(s,!!i.multiple,i.defaultValue,!0):Fd(s,!!i.multiple,i.multiple?[]:"",!1))}s[om]=i}catch(g){At(n,n.return,g)}}break;case 6:if(fs(e,n),Qs(n),r&4){if(n.stateNode===null)throw Error(G(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(g){At(n,n.return,g)}}break;case 3:if(fs(e,n),Qs(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{nm(e.containerInfo)}catch(g){At(n,n.return,g)}break;case 4:fs(e,n),Qs(n);break;case 13:fs(e,n),Qs(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(BE=jt())),r&4&&AN(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(kn=(u=kn)||h,fs(e,n),kn=u):fs(e,n),Qs(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(re=n,h=n.child;h!==null;){for(f=re=h;re!==null;){switch(p=re,m=p.child,p.tag){case 0:case 11:case 14:case 15:zp(4,p,p.return);break;case 1:Md(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){At(r,t,g)}}break;case 5:Md(p,p.return);break;case 22:if(p.memoizedState!==null){NN(f);continue}}m!==null?(m.return=p,re=m):NN(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=mP("display",a))}catch(g){At(n,n.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){At(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fs(e,n),Qs(n),r&4&&AN(n);break;case 21:break;default:fs(e,n),Qs(n)}}function Qs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(zT(t)){var r=t;break e}t=t.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Jp(s,""),r.flags&=-33);var i=EN(n);z1(n,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=EN(n);B1(n,o,a);break;default:throw Error(G(161))}}catch(l){At(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Y$(n,e,t){re=n,WT(n)}function WT(n,e,t){for(var r=(n.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Xv;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||kn;o=Xv;var u=kn;if(Xv=a,(kn=l)&&!u)for(re=s;re!==null;)a=re,l=a.child,a.tag===22&&a.memoizedState!==null?kN(s):l!==null?(l.return=a,re=l):kN(s);for(;i!==null;)re=i,WT(i),i=i.sibling;re=s,Xv=o,kn=u}CN(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):CN(n)}}function CN(n){for(;re!==null;){var e=re;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kn||Vx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ys(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uN(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}uN(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&nm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}kn||e.flags&512&&$1(e)}catch(p){At(e,e.return,p)}}if(e===n){re=null;break}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}}function NN(n){for(;re!==null;){var e=re;if(e===n){re=null;break}var t=e.sibling;if(t!==null){t.return=e.return,re=t;break}re=e.return}}function kN(n){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Vx(4,e)}catch(l){At(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){At(e,s,l)}}var i=e.return;try{$1(e)}catch(l){At(e,i,l)}break;case 5:var a=e.return;try{$1(e)}catch(l){At(e,a,l)}}}catch(l){At(e,e.return,l)}if(e===n){re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,re=o;break}re=e.return}}var K$=Math.ceil,F0=eo.ReactCurrentDispatcher,FE=eo.ReactCurrentOwner,ns=eo.ReactCurrentBatchConfig,Oe=0,an=null,Ot=null,vn=0,jr=0,Id=$l(0),Yt=0,fm=null,ju=0,Gx=0,$E=0,Up=null,rr=null,BE=0,Sf=1/0,na=null,$0=!1,U1=null,El=null,Qv=!1,vl=null,B0=0,Hp=0,H1=null,Py=-1,Ty=0;function Wn(){return Oe&6?jt():Py!==-1?Py:Py=jt()}function Al(n){return n.mode&1?Oe&2&&vn!==0?vn&-vn:R$.transition!==null?(Ty===0&&(Ty=kP()),Ty):(n=Ye,n!==0||(n=window.event,n=n===void 0?16:DP(n.type)),n):1}function Us(n,e,t,r){if(50<Hp)throw Hp=0,H1=null,Error(G(185));sv(n,t,r),(!(Oe&2)||n!==an)&&(n===an&&(!(Oe&2)&&(Gx|=t),Yt===4&&wo(n,vn)),cr(n,r),t===1&&Oe===0&&!(e.mode&1)&&(Sf=jt()+500,Ux&&Bl()))}function cr(n,e){var t=n.callbackNode;R4(n,e);var r=S0(n,n===an?vn:0);if(r===0)t!==null&&LC(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&LC(t),e===1)n.tag===0?T$(jN.bind(null,n)):eT(jN.bind(null,n)),N$(function(){!(Oe&6)&&Bl()}),t=null;else{switch(jP(r)){case 1:t=hE;break;case 4:t=CP;break;case 16:t=_0;break;case 536870912:t=NP;break;default:t=_0}t=JT(t,VT.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function VT(n,e){if(Py=-1,Ty=0,Oe&6)throw Error(G(327));var t=n.callbackNode;if(Hd()&&n.callbackNode!==t)return null;var r=S0(n,n===an?vn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=z0(n,r);else{e=r;var s=Oe;Oe|=2;var i=qT();(an!==n||vn!==e)&&(na=null,Sf=jt()+500,Eu(n,e));do try{J$();break}catch(o){GT(n,o)}while(!0);AE(),F0.current=i,Oe=s,Ot!==null?e=0:(an=null,vn=0,e=Yt)}if(e!==0){if(e===2&&(s=g1(n),s!==0&&(r=s,e=W1(n,s))),e===1)throw t=fm,Eu(n,0),wo(n,r),cr(n,jt()),t;if(e===6)wo(n,r);else{if(s=n.current.alternate,!(r&30)&&!X$(s)&&(e=z0(n,r),e===2&&(i=g1(n),i!==0&&(r=i,e=W1(n,i))),e===1))throw t=fm,Eu(n,0),wo(n,r),cr(n,jt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:ec(n,rr,na);break;case 3:if(wo(n,r),(r&130023424)===r&&(e=BE+500-jt(),10<e)){if(S0(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Wn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=E1(ec.bind(null,n,rr,na),e);break}ec(n,rr,na);break;case 4:if(wo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var a=31-zs(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*K$(r/1960))-r,10<r){n.timeoutHandle=E1(ec.bind(null,n,rr,na),r);break}ec(n,rr,na);break;case 5:ec(n,rr,na);break;default:throw Error(G(329))}}}return cr(n,jt()),n.callbackNode===t?VT.bind(null,n):null}function W1(n,e){var t=Up;return n.current.memoizedState.isDehydrated&&(Eu(n,e).flags|=256),n=z0(n,e),n!==2&&(e=rr,rr=t,e!==null&&V1(e)),n}function V1(n){rr===null?rr=n:rr.push.apply(rr,n)}function X$(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!Hs(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wo(n,e){for(e&=~$E,e&=~Gx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-zs(e),r=1<<t;n[t]=-1,e&=~r}}function jN(n){if(Oe&6)throw Error(G(327));Hd();var e=S0(n,0);if(!(e&1))return cr(n,jt()),null;var t=z0(n,e);if(n.tag!==0&&t===2){var r=g1(n);r!==0&&(e=r,t=W1(n,r))}if(t===1)throw t=fm,Eu(n,0),wo(n,e),cr(n,jt()),t;if(t===6)throw Error(G(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ec(n,rr,na),cr(n,jt()),null}function zE(n,e){var t=Oe;Oe|=1;try{return n(e)}finally{Oe=t,Oe===0&&(Sf=jt()+500,Ux&&Bl())}}function Pu(n){vl!==null&&vl.tag===0&&!(Oe&6)&&Hd();var e=Oe;Oe|=1;var t=ns.transition,r=Ye;try{if(ns.transition=null,Ye=1,n)return n()}finally{Ye=r,ns.transition=t,Oe=e,!(Oe&6)&&Bl()}}function UE(){jr=Id.current,ot(Id)}function Eu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,C$(t)),Ot!==null)for(t=Ot.return;t!==null;){var r=t;switch(_E(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&k0();break;case 3:bf(),ot(or),ot(jn),TE();break;case 5:PE(r);break;case 4:bf();break;case 13:ot(xt);break;case 19:ot(xt);break;case 10:CE(r.type._context);break;case 22:case 23:UE()}t=t.return}if(an=n,Ot=n=Cl(n.current,null),vn=jr=e,Yt=0,fm=null,$E=Gx=ju=0,rr=Up=null,dc!==null){for(e=0;e<dc.length;e++)if(t=dc[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}t.pending=r}dc=null}return n}function GT(n,e){do{var t=Ot;try{if(AE(),Ny.current=L0,O0){for(var r=bt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}O0=!1}if(ku=0,sn=qt=bt=null,Bp=!1,um=0,FE.current=null,t===null||t.return===null){Yt=1,fm=e,Ot=null;break}e:{var i=n,a=t.return,o=t,l=e;if(e=vn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=gN(a);if(m!==null){m.flags&=-257,vN(m,a,o,i,e),m.mode&1&&mN(i,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){mN(i,u,e),HE();break e}l=Error(G(426))}}else if(ft&&o.mode&1){var w=gN(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),vN(w,a,o,i,e),SE(_f(l,o));break e}}i=l=_f(l,o),Yt!==4&&(Yt=2),Up===null?Up=[i]:Up.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=jT(i,l,e);cN(i,v);break e;case 1:o=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(El===null||!El.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=PT(i,o,e);cN(i,E);break e}}i=i.return}while(i!==null)}KT(t)}catch(A){e=A,Ot===t&&t!==null&&(Ot=t=t.return);continue}break}while(!0)}function qT(){var n=F0.current;return F0.current=L0,n===null?L0:n}function HE(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),an===null||!(ju&268435455)&&!(Gx&268435455)||wo(an,vn)}function z0(n,e){var t=Oe;Oe|=2;var r=qT();(an!==n||vn!==e)&&(na=null,Eu(n,e));do try{Q$();break}catch(s){GT(n,s)}while(!0);if(AE(),Oe=t,F0.current=r,Ot!==null)throw Error(G(261));return an=null,vn=0,Yt}function Q$(){for(;Ot!==null;)YT(Ot)}function J$(){for(;Ot!==null&&!S4();)YT(Ot)}function YT(n){var e=QT(n.alternate,n,jr);n.memoizedProps=n.pendingProps,e===null?KT(n):Ot=e,FE.current=null}function KT(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=V$(t,e),t!==null){t.flags&=32767,Ot=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Yt=6,Ot=null;return}}else if(t=W$(t,e,jr),t!==null){Ot=t;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=n}while(e!==null);Yt===0&&(Yt=5)}function ec(n,e,t){var r=Ye,s=ns.transition;try{ns.transition=null,Ye=1,Z$(n,e,t,r)}finally{ns.transition=s,Ye=r}return null}function Z$(n,e,t,r){do Hd();while(vl!==null);if(Oe&6)throw Error(G(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(G(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(M4(n,i),n===an&&(Ot=an=null,vn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Qv||(Qv=!0,JT(_0,function(){return Hd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=ns.transition,ns.transition=null;var a=Ye;Ye=1;var o=Oe;Oe|=4,FE.current=null,q$(n,t),HT(t,n),x$(_1),E0=!!b1,_1=b1=null,n.current=t,Y$(t),E4(),Oe=o,Ye=a,ns.transition=i}else n.current=t;if(Qv&&(Qv=!1,vl=n,B0=s),i=n.pendingLanes,i===0&&(El=null),N4(t.stateNode),cr(n,jt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if($0)throw $0=!1,n=U1,U1=null,n;return B0&1&&n.tag!==0&&Hd(),i=n.pendingLanes,i&1?n===H1?Hp++:(Hp=0,H1=n):Hp=0,Bl(),null}function Hd(){if(vl!==null){var n=jP(B0),e=ns.transition,t=Ye;try{if(ns.transition=null,Ye=16>n?16:n,vl===null)var r=!1;else{if(n=vl,vl=null,B0=0,Oe&6)throw Error(G(331));var s=Oe;for(Oe|=4,re=n.current;re!==null;){var i=re,a=i.child;if(re.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(re=u;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:zp(8,h,i)}var f=h.child;if(f!==null)f.return=h,re=f;else for(;re!==null;){h=re;var p=h.sibling,m=h.return;if(BT(h),h===u){re=null;break}if(p!==null){p.return=m,re=p;break}re=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}re=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,re=a;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,re=v;break e}re=i.return}}var x=n.current;for(re=x;re!==null;){a=re;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,re=b;else e:for(a=x;re!==null;){if(o=re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Vx(9,o)}}catch(A){At(o,o.return,A)}if(o===a){re=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,re=E;break e}re=o.return}}if(Oe=s,Bl(),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(Lx,n)}catch{}r=!0}return r}finally{Ye=t,ns.transition=e}}return!1}function PN(n,e,t){e=_f(t,e),e=jT(n,e,1),n=Sl(n,e,1),e=Wn(),n!==null&&(sv(n,1,e),cr(n,e))}function At(n,e,t){if(n.tag===3)PN(n,n,t);else for(;e!==null;){if(e.tag===3){PN(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(El===null||!El.has(r))){n=_f(t,n),n=PT(e,n,1),e=Sl(e,n,1),n=Wn(),e!==null&&(sv(e,1,n),cr(e,n));break}}e=e.return}}function e3(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Wn(),n.pingedLanes|=n.suspendedLanes&t,an===n&&(vn&t)===t&&(Yt===4||Yt===3&&(vn&130023424)===vn&&500>jt()-BE?Eu(n,0):$E|=t),cr(n,e)}function XT(n,e){e===0&&(n.mode&1?(e=zv,zv<<=1,!(zv&130023424)&&(zv=4194304)):e=1);var t=Wn();n=Ya(n,e),n!==null&&(sv(n,e,t),cr(n,t))}function t3(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),XT(n,t)}function n3(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),XT(n,t)}var QT;QT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||or.current)ir=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ir=!1,H$(n,e,t);ir=!!(n.flags&131072)}else ir=!1,ft&&e.flags&1048576&&tT(e,T0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jy(n,e),n=e.pendingProps;var s=yf(e,jn.current);Ud(e,t),s=ME(null,e,r,n,s,t);var i=IE();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lr(r)?(i=!0,j0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kE(e),s.updater=Wx,e.stateNode=s,s._reactInternals=e,T1(e,r,n,t),e=I1(null,e,r,!0,i,t)):(e.tag=0,ft&&i&&bE(e),Bn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(jy(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=s3(r),n=ys(r,n),s){case 0:e=M1(null,e,r,n,t);break e;case 1:e=wN(null,e,r,n,t);break e;case 11:e=yN(null,e,r,n,t);break e;case 14:e=xN(null,e,r,ys(r.type,n),t);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),M1(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),wN(n,e,r,s,t);case 3:e:{if(IT(e),n===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,oT(n,e),I0(e,r,null,t);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=_f(Error(G(423)),e),e=bN(n,e,r,t,s);break e}else if(r!==s){s=_f(Error(G(424)),e),e=bN(n,e,r,t,s);break e}else for(Mr=_l(e.stateNode.containerInfo.firstChild),Ir=e,ft=!0,Os=null,t=iT(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xf(),r===s){e=Ka(n,e,t);break e}Bn(n,e,r,t)}e=e.child}return e;case 5:return lT(e),n===null&&k1(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,a=s.children,S1(r,s)?a=null:i!==null&&S1(r,i)&&(e.flags|=32),MT(n,e),Bn(n,e,a,t),e.child;case 6:return n===null&&k1(e),null;case 13:return DT(n,e,t);case 4:return jE(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=wf(e,null,r,t):Bn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),yN(n,e,r,s,t);case 7:return Bn(n,e,e.pendingProps,t),e.child;case 8:return Bn(n,e,e.pendingProps.children,t),e.child;case 12:return Bn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,nt(R0,r._currentValue),r._currentValue=a,i!==null)if(Hs(i.value,a)){if(i.children===s.children&&!or.current){e=Ka(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ha(-1,t&-t),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),j1(i.return,t,e),o.lanes|=t;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(G(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),j1(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Bn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ud(e,t),s=is(s),r=r(s),e.flags|=1,Bn(n,e,r,t),e.child;case 14:return r=e.type,s=ys(r,e.pendingProps),s=ys(r.type,s),xN(n,e,r,s,t);case 15:return TT(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),jy(n,e),e.tag=1,lr(r)?(n=!0,j0(e)):n=!1,Ud(e,t),kT(e,r,s),T1(e,r,s,t),I1(null,e,r,!0,n,t);case 19:return OT(n,e,t);case 22:return RT(n,e,t)}throw Error(G(156,e.tag))};function JT(n,e){return AP(n,e)}function r3(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(n,e,t,r){return new r3(n,e,t,r)}function WE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function s3(n){if(typeof n=="function")return WE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===cE)return 11;if(n===uE)return 14}return 2}function Cl(n,e){var t=n.alternate;return t===null?(t=ts(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ry(n,e,t,r,s,i){var a=2;if(r=n,typeof n=="function")WE(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Ed:return Au(t.children,s,i,e);case lE:a=8,s|=8;break;case t1:return n=ts(12,t,e,s|2),n.elementType=t1,n.lanes=i,n;case n1:return n=ts(13,t,e,s),n.elementType=n1,n.lanes=i,n;case r1:return n=ts(19,t,e,s),n.elementType=r1,n.lanes=i,n;case lP:return qx(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case aP:a=10;break e;case oP:a=9;break e;case cE:a=11;break e;case uE:a=14;break e;case vo:a=16,r=null;break e}throw Error(G(130,n==null?n:typeof n,""))}return e=ts(a,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function Au(n,e,t,r){return n=ts(7,n,r,e),n.lanes=t,n}function qx(n,e,t,r){return n=ts(22,n,r,e),n.elementType=lP,n.lanes=t,n.stateNode={isHidden:!1},n}function cb(n,e,t){return n=ts(6,n,null,e),n.lanes=t,n}function ub(n,e,t){return e=ts(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function i3(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ww(0),this.expirationTimes=Ww(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ww(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function VE(n,e,t,r,s,i,a,o,l){return n=new i3(n,e,t,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ts(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},kE(i),n}function a3(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function ZT(n){if(!n)return jl;n=n._reactInternals;e:{if(Wu(n)!==n||n.tag!==1)throw Error(G(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(n.tag===1){var t=n.type;if(lr(t))return ZP(n,t,e)}return e}function eR(n,e,t,r,s,i,a,o,l){return n=VE(t,r,!0,n,s,i,a,o,l),n.context=ZT(null),t=n.current,r=Wn(),s=Al(t),i=Ha(r,s),i.callback=e??null,Sl(t,i,s),n.current.lanes=s,sv(n,s,r),cr(n,r),n}function Yx(n,e,t,r){var s=e.current,i=Wn(),a=Al(s);return t=ZT(t),e.context===null?e.context=t:e.pendingContext=t,e=Ha(i,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Sl(s,e,a),n!==null&&(Us(n,s,a,i),Cy(n,s,a)),a}function U0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function TN(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function GE(n,e){TN(n,e),(n=n.alternate)&&TN(n,e)}function o3(){return null}var tR=typeof reportError=="function"?reportError:function(n){console.error(n)};function qE(n){this._internalRoot=n}Kx.prototype.render=qE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(G(409));Yx(n,e,null,null)};Kx.prototype.unmount=qE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Pu(function(){Yx(null,n,null,null)}),e[qa]=null}};function Kx(n){this._internalRoot=n}Kx.prototype.unstable_scheduleHydration=function(n){if(n){var e=RP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xo.length&&e!==0&&e<xo[t].priority;t++);xo.splice(t,0,n),t===0&&IP(n)}};function YE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Xx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function RN(){}function l3(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=U0(a);i.call(u)}}var a=eR(e,r,n,0,null,!1,!1,"",RN);return n._reactRootContainer=a,n[qa]=a.current,im(n.nodeType===8?n.parentNode:n),Pu(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=U0(l);o.call(u)}}var l=VE(n,0,!1,null,null,!1,!1,"",RN);return n._reactRootContainer=l,n[qa]=l.current,im(n.nodeType===8?n.parentNode:n),Pu(function(){Yx(e,l,t,r)}),l}function Qx(n,e,t,r,s){var i=t._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=U0(a);o.call(l)}}Yx(e,a,n,s)}else a=l3(t,e,n,s,r);return U0(a)}PP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=hp(e.pendingLanes);t!==0&&(fE(e,t|1),cr(e,jt()),!(Oe&6)&&(Sf=jt()+500,Bl()))}break;case 13:Pu(function(){var r=Ya(n,1);if(r!==null){var s=Wn();Us(r,n,1,s)}}),GE(n,1)}};pE=function(n){if(n.tag===13){var e=Ya(n,134217728);if(e!==null){var t=Wn();Us(e,n,134217728,t)}GE(n,134217728)}};TP=function(n){if(n.tag===13){var e=Al(n),t=Ya(n,e);if(t!==null){var r=Wn();Us(t,n,e,r)}GE(n,e)}};RP=function(){return Ye};MP=function(n,e){var t=Ye;try{return Ye=n,e()}finally{Ye=t}};f1=function(n,e,t){switch(e){case"input":if(a1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=zx(r);if(!s)throw Error(G(90));uP(r),a1(r,s)}}}break;case"textarea":hP(n,t);break;case"select":e=t.value,e!=null&&Fd(n,!!t.multiple,e,!1)}};xP=zE;wP=Pu;var c3={usingClientEntryPoint:!1,Events:[av,kd,zx,vP,yP,zE]},tp={findFiberByHostInstance:uc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},u3={bundleType:tp.bundleType,version:tp.version,rendererPackageName:tp.rendererPackageName,rendererConfig:tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=SP(n),n===null?null:n.stateNode},findFiberByHostInstance:tp.findFiberByHostInstance||o3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jv.isDisabled&&Jv.supportsFiber)try{Lx=Jv.inject(u3),Oi=Jv}catch{}}$r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c3;$r.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!YE(e))throw Error(G(200));return a3(n,e,null,t)};$r.createRoot=function(n,e){if(!YE(n))throw Error(G(299));var t=!1,r="",s=tR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=VE(n,1,!1,null,null,t,!1,r,s),n[qa]=e.current,im(n.nodeType===8?n.parentNode:n),new qE(e)};$r.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(G(188)):(n=Object.keys(n).join(","),Error(G(268,n)));return n=SP(e),n=n===null?null:n.stateNode,n};$r.flushSync=function(n){return Pu(n)};$r.hydrate=function(n,e,t){if(!Xx(e))throw Error(G(200));return Qx(null,n,e,!0,t)};$r.hydrateRoot=function(n,e,t){if(!YE(n))throw Error(G(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",a=tR;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=eR(e,null,n,1,t??null,s,!1,i,a),n[qa]=e.current,im(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Kx(e)};$r.render=function(n,e,t){if(!Xx(e))throw Error(G(200));return Qx(null,n,e,!1,t)};$r.unmountComponentAtNode=function(n){if(!Xx(n))throw Error(G(40));return n._reactRootContainer?(Pu(function(){Qx(null,null,n,!1,function(){n._reactRootContainer=null,n[qa]=null})}),!0):!1};$r.unstable_batchedUpdates=zE;$r.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Xx(t))throw Error(G(200));if(n==null||n._reactInternals===void 0)throw Error(G(38));return Qx(n,e,t,!1,r)};$r.version="18.3.1-next-f1338f8080-20240426";function nR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nR)}catch(n){console.error(n)}}nR(),nP.exports=$r;var Vu=nP.exports;const rR=Wj(Vu);var sR,MN=Vu;sR=MN.createRoot,MN.hydrateRoot;const d3=1,h3=1e6;let db=0;function f3(){return db=(db+1)%Number.MAX_SAFE_INTEGER,db.toString()}const hb=new Map,IN=n=>{if(hb.has(n))return;const e=setTimeout(()=>{hb.delete(n),Wp({type:"REMOVE_TOAST",toastId:n})},h3);hb.set(n,e)},p3=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,d3)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?IN(t):n.toasts.forEach(r=>{IN(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},My=[];let Iy={toasts:[]};function Wp(n){Iy=p3(Iy,n),My.forEach(e=>{e(Iy)})}function iR({...n}){const e=f3(),t=s=>Wp({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Wp({type:"DISMISS_TOAST",toastId:e});return Wp({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function Jx(){const[n,e]=_.useState(Iy);return _.useEffect(()=>(My.push(e),()=>{const t=My.indexOf(e);t>-1&&My.splice(t,1)}),[n]),{...n,toast:iR,dismiss:t=>Wp({type:"DISMISS_TOAST",toastId:t})}}function de(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function DN(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Tu(...n){return e=>{let t=!1;const r=n.map(s=>{const i=DN(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():DN(n[s],null)}}}}function He(...n){return _.useCallback(Tu(...n),n)}function m3(n,e){const t=_.createContext(e),r=i=>{const{children:a,...o}=i,l=_.useMemo(()=>o,Object.values(o));return c.jsx(t.Provider,{value:l,children:a})};r.displayName=n+"Provider";function s(i){const a=_.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function Ks(n,e=[]){let t=[];function r(i,a){const o=_.createContext(a),l=t.length;t=[...t,a];const u=f=>{var v;const{scope:p,children:m,...y}=f,g=((v=p==null?void 0:p[n])==null?void 0:v[l])||o,w=_.useMemo(()=>y,Object.values(y));return c.jsx(g.Provider,{value:w,children:m})};u.displayName=i+"Provider";function h(f,p){var g;const m=((g=p==null?void 0:p[n])==null?void 0:g[l])||o,y=_.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=t.map(a=>_.createContext(a));return function(o){const l=(o==null?void 0:o[n])||i;return _.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return s.scopeName=n,[r,g3(s,...e)]}function g3(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((o,{useScope:l,scopeName:u})=>{const f=l(i)[`__scope${u}`];return{...o,...f}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Ru(n){const e=y3(n),t=_.forwardRef((r,s)=>{const{children:i,...a}=r,o=_.Children.toArray(i),l=o.find(w3);if(l){const u=l.props.children,h=o.map(f=>f===l?_.Children.count(u)>1?_.Children.only(null):_.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...a,ref:s,children:_.isValidElement(u)?_.cloneElement(u,void 0,h):null})}return c.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var v3=Ru("Slot");function y3(n){const e=_.forwardRef((t,r)=>{const{children:s,...i}=t;if(_.isValidElement(s)){const a=_3(s),o=b3(i,s.props);return s.type!==_.Fragment&&(o.ref=r?Tu(r,a):a),_.cloneElement(s,o)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var x3=Symbol("radix.slottable");function w3(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===x3}function b3(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...o)=>{const l=i(...o);return s(...o),l}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function _3(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function KE(n){const e=n+"CollectionProvider",[t,r]=Ks(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:v}=g,x=K.useRef(null),b=K.useRef(new Map).current;return c.jsx(s,{scope:w,itemMap:b,collectionRef:x,children:v})};a.displayName=e;const o=n+"CollectionSlot",l=Ru(o),u=K.forwardRef((g,w)=>{const{scope:v,children:x}=g,b=i(o,v),E=He(w,b.collectionRef);return c.jsx(l,{ref:E,children:x})});u.displayName=o;const h=n+"CollectionItemSlot",f="data-radix-collection-item",p=Ru(h),m=K.forwardRef((g,w)=>{const{scope:v,children:x,...b}=g,E=K.useRef(null),A=He(w,E),C=i(h,v);return K.useEffect(()=>(C.itemMap.set(E,{ref:E,...b}),()=>void C.itemMap.delete(E))),c.jsx(p,{[f]:"",ref:A,children:x})});m.displayName=h;function y(g){const w=i(n+"CollectionConsumer",g);return K.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((C,N)=>b.indexOf(C.ref.current)-b.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:u,ItemSlot:m},y,r]}var S3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oe=S3.reduce((n,e)=>{const t=Ru(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function aR(n,e){n&&Vu.flushSync(()=>n.dispatchEvent(e))}function Lt(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function E3(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var A3="DismissableLayer",G1="dismissableLayer.update",C3="dismissableLayer.pointerDownOutside",N3="dismissableLayer.focusOutside",ON,oR=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lv=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...l}=n,u=_.useContext(oR),[h,f]=_.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=_.useState({}),y=He(e,N=>f(N)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),x=h?g.indexOf(h):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,E=x>=v,A=j3(N=>{const P=N.target,T=[...u.branches].some(M=>M.contains(P));!E||T||(s==null||s(N),a==null||a(N),N.defaultPrevented||o==null||o())},p),C=P3(N=>{const P=N.target;[...u.branches].some(M=>M.contains(P))||(i==null||i(N),a==null||a(N),N.defaultPrevented||o==null||o())},p);return E3(N=>{x===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&o&&(N.preventDefault(),o()))},p),_.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ON=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),LN(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=ON)}},[h,p,t,u]),_.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),LN())},[h,u]),_.useEffect(()=>{const N=()=>m({});return document.addEventListener(G1,N),()=>document.removeEventListener(G1,N)},[]),c.jsx(oe.div,{...l,ref:y,style:{pointerEvents:b?E?"auto":"none":void 0,...n.style},onFocusCapture:de(n.onFocusCapture,C.onFocusCapture),onBlurCapture:de(n.onBlurCapture,C.onBlurCapture),onPointerDownCapture:de(n.onPointerDownCapture,A.onPointerDownCapture)})});lv.displayName=A3;var k3="DismissableLayerBranch",lR=_.forwardRef((n,e)=>{const t=_.useContext(oR),r=_.useRef(null),s=He(e,r);return _.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),c.jsx(oe.div,{...n,ref:s})});lR.displayName=k3;function j3(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){cR(C3,t,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function P3(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&cR(N3,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function LN(){const n=new CustomEvent(G1);document.dispatchEvent(n)}function cR(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?aR(s,i):s.dispatchEvent(i)}var T3=lv,R3=lR,Tt=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},M3="Portal",cv=_.forwardRef((n,e)=>{var o;const{container:t,...r}=n,[s,i]=_.useState(!1);Tt(()=>i(!0),[]);const a=t||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?rR.createPortal(c.jsx(oe.div,{...r,ref:e}),a):null});cv.displayName=M3;function I3(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var ls=n=>{const{present:e,children:t}=n,r=D3(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),i=He(r.ref,O3(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};ls.displayName="Presence";function D3(n){const[e,t]=_.useState(),r=_.useRef(null),s=_.useRef(n),i=_.useRef("none"),a=n?"mounted":"unmounted",[o,l]=I3(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const u=Zv(r.current);i.current=o==="mounted"?u:"none"},[o]),Tt(()=>{const u=r.current,h=s.current;if(h!==n){const p=i.current,m=Zv(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Tt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=m=>{const g=Zv(r.current).includes(m.animationName);if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=m=>{m.target===e&&(i.current=Zv(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:_.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function Zv(n){return(n==null?void 0:n.animationName)||"none"}function O3(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var L3=sE[" useInsertionEffect ".trim().toString()]||Tt;function Mu({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,a]=F3({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:s;{const h=_.useRef(n!==void 0);_.useEffect(()=>{const f=h.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=o},[o,r])}const u=_.useCallback(h=>{var f;if(o){const p=$3(h)?h(n):h;p!==n&&((f=a.current)==null||f.call(a,p))}else i(h)},[o,n,i,a]);return[l,u]}function F3({defaultProp:n,onChange:e}){const[t,r]=_.useState(n),s=_.useRef(t),i=_.useRef(e);return L3(()=>{i.current=e},[e]),_.useEffect(()=>{var a;s.current!==t&&((a=i.current)==null||a.call(i,t),s.current=t)},[t,s]),[t,r,i]}function $3(n){return typeof n=="function"}var uR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),B3="VisuallyHidden",XE=_.forwardRef((n,e)=>c.jsx(oe.span,{...n,ref:e,style:{...uR,...n.style}}));XE.displayName=B3;var QE="ToastProvider",[JE,z3,U3]=KE("Toast"),[dR,KX]=Ks("Toast",[U3]),[H3,Zx]=dR(QE),hR=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=n,[o,l]=_.useState(null),[u,h]=_.useState(0),f=_.useRef(!1),p=_.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${QE}\`. Expected non-empty \`string\`.`),c.jsx(JE.Provider,{scope:e,children:c.jsx(H3,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:o,onViewportChange:l,onToastAdd:_.useCallback(()=>h(m=>m+1),[]),onToastRemove:_.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};hR.displayName=QE;var fR="ToastViewport",W3=["F8"],q1="toast.viewportPause",Y1="toast.viewportResume",pR=_.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=W3,label:s="Notifications ({hotkey})",...i}=n,a=Zx(fR,t),o=z3(t),l=_.useRef(null),u=_.useRef(null),h=_.useRef(null),f=_.useRef(null),p=He(e,f,a.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;_.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(E=>v[E]||v.code===E)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),_.useEffect(()=>{const w=l.current,v=f.current;if(y&&w&&v){const x=()=>{if(!a.isClosePausedRef.current){const C=new CustomEvent(q1);v.dispatchEvent(C),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const C=new CustomEvent(Y1);v.dispatchEvent(C),a.isClosePausedRef.current=!1}},E=C=>{!w.contains(C.relatedTarget)&&b()},A=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",E),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",A),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",E),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",A),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,a.isClosePausedRef]);const g=_.useCallback(({tabbingDirection:w})=>{const x=o().map(b=>{const E=b.ref.current,A=[E,...r5(E)];return w==="forwards"?A:A.reverse()});return(w==="forwards"?x.reverse():x).flat()},[o]);return _.useEffect(()=>{const w=f.current;if(w){const v=x=>{var A,C,N;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const P=document.activeElement,T=x.shiftKey;if(x.target===w&&T){(A=u.current)==null||A.focus();return}const R=g({tabbingDirection:T?"backwards":"forwards"}),F=R.findIndex(O=>O===P);fb(R.slice(F+1))?x.preventDefault():T?(C=u.current)==null||C.focus():(N=h.current)==null||N.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[o,g]),c.jsxs(R3,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&c.jsx(K1,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});fb(w)}}),c.jsx(JE.Slot,{scope:t,children:c.jsx(oe.ol,{tabIndex:-1,...i,ref:p})}),y&&c.jsx(K1,{ref:h,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});fb(w)}})]})});pR.displayName=fR;var mR="ToastFocusProxy",K1=_.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=Zx(mR,t);return c.jsx(XE,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(o))&&r()}})});K1.displayName=mR;var uv="Toast",V3="toast.swipeStart",G3="toast.swipeMove",q3="toast.swipeCancel",Y3="toast.swipeEnd",gR=_.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...a}=n,[o,l]=Mu({prop:r,defaultProp:s??!0,onChange:i,caller:uv});return c.jsx(ls,{present:t||o,children:c.jsx(Q3,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:Lt(n.onPause),onResume:Lt(n.onResume),onSwipeStart:de(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(n.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:de(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(n.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});gR.displayName=uv;var[K3,X3]=dR(uv,{onClose(){}}),Q3=_.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...y}=n,g=Zx(uv,t),[w,v]=_.useState(null),x=He(e,O=>v(O)),b=_.useRef(null),E=_.useRef(null),A=s||g.duration,C=_.useRef(0),N=_.useRef(A),P=_.useRef(0),{onToastAdd:T,onToastRemove:M}=g,I=Lt(()=>{var V;(w==null?void 0:w.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),a()}),R=_.useCallback(O=>{!O||O===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(I,O))},[I]);_.useEffect(()=>{const O=g.viewport;if(O){const V=()=>{R(N.current),u==null||u()},B=()=>{const L=new Date().getTime()-C.current;N.current=N.current-L,window.clearTimeout(P.current),l==null||l()};return O.addEventListener(q1,B),O.addEventListener(Y1,V),()=>{O.removeEventListener(q1,B),O.removeEventListener(Y1,V)}}},[g.viewport,A,l,u,R]),_.useEffect(()=>{i&&!g.isClosePausedRef.current&&R(A)},[i,A,g.isClosePausedRef,R]),_.useEffect(()=>(T(),()=>M()),[T,M]);const F=_.useMemo(()=>w?SR(w):null,[w]);return g.viewport?c.jsxs(c.Fragment,{children:[F&&c.jsx(J3,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:F}),c.jsx(K3,{scope:t,onClose:I,children:Vu.createPortal(c.jsx(JE.ItemSlot,{scope:t,children:c.jsx(T3,{asChild:!0,onEscapeKeyDown:de(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:de(n.onKeyDown,O=>{O.key==="Escape"&&(o==null||o(O.nativeEvent),O.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:de(n.onPointerDown,O=>{O.button===0&&(b.current={x:O.clientX,y:O.clientY})}),onPointerMove:de(n.onPointerMove,O=>{if(!b.current)return;const V=O.clientX-b.current.x,B=O.clientY-b.current.y,L=!!E.current,D=["left","right"].includes(g.swipeDirection),z=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,H=D?z(0,V):0,Z=D?0:z(0,B),$=O.pointerType==="touch"?10:2,W={x:H,y:Z},X={originalEvent:O,delta:W};L?(E.current=W,ey(G3,f,X,{discrete:!1})):FN(W,g.swipeDirection,$)?(E.current=W,ey(V3,h,X,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(V)>$||Math.abs(B)>$)&&(b.current=null)}),onPointerUp:de(n.onPointerUp,O=>{const V=E.current,B=O.target;if(B.hasPointerCapture(O.pointerId)&&B.releasePointerCapture(O.pointerId),E.current=null,b.current=null,V){const L=O.currentTarget,D={originalEvent:O,delta:V};FN(V,g.swipeDirection,g.swipeThreshold)?ey(Y3,m,D,{discrete:!0}):ey(q3,p,D,{discrete:!0}),L.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),J3=n=>{const{__scopeToast:e,children:t,...r}=n,s=Zx(uv,e),[i,a]=_.useState(!1),[o,l]=_.useState(!1);return t5(()=>a(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:c.jsx(cv,{asChild:!0,children:c.jsx(XE,{...r,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",t]})})})},Z3="ToastTitle",vR=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return c.jsx(oe.div,{...r,ref:e})});vR.displayName=Z3;var e5="ToastDescription",yR=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return c.jsx(oe.div,{...r,ref:e})});yR.displayName=e5;var xR="ToastAction",wR=_.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?c.jsx(_R,{altText:t,asChild:!0,children:c.jsx(ZE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${xR}\`. Expected non-empty \`string\`.`),null)});wR.displayName=xR;var bR="ToastClose",ZE=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=X3(bR,t);return c.jsx(_R,{asChild:!0,children:c.jsx(oe.button,{type:"button",...r,ref:e,onClick:de(n.onClick,s.onClose)})})});ZE.displayName=bR;var _R=_.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return c.jsx(oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function SR(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),n5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...SR(r))}}),e}function ey(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?aR(s,i):s.dispatchEvent(i)}var FN=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function t5(n=()=>{}){const e=Lt(n);Tt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function n5(n){return n.nodeType===n.ELEMENT_NODE}function r5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function fb(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var s5=hR,ER=pR,AR=gR,CR=vR,NR=yR,kR=wR,jR=ZE;function PR(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=PR(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function TR(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=PR(n))&&(r&&(r+=" "),r+=e);return r}const $N=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,BN=TR,dv=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return BN(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const h=t==null?void 0:t[u],f=i==null?void 0:i[u];if(h===null)return null;const p=$N(h)||$N(f);return s[u][p]}),o=t&&Object.entries(t).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...i,...o}[g]):{...i,...o}[g]===w})?[...u,f,p]:u},[]);return BN(n,a,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RR=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},l)=>_.createElement("svg",{ref:l,...a5,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:RR("lucide",s),...o},[...a.map(([u,h])=>_.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(n,e)=>{const t=_.forwardRef(({className:r,...s},i)=>_.createElement(o5,{ref:i,iconNode:e,className:RR(`lucide-${i5(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=ge("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=ge("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ge("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=ge("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=ge("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=ge("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=ge("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=ge("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=ge("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=ge("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=ge("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=ge("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=ge("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ge("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pm=ge("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=ge("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=ge("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sA="-",b5=n=>{const e=S5(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const o=a.split(sA);return o[0]===""&&o.length!==1&&o.shift(),UR(o,e)||_5(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},UR=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?UR(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(sA);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},qN=/^\[(.+)\]$/,_5=n=>{if(qN.test(n)){const e=qN.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},S5=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return A5(Object.entries(n.classGroups),t).forEach(([i,a])=>{Z1(a,r,i,e)}),r},Z1=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:YN(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(E5(s)){Z1(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{Z1(a,YN(e,i),t,r)})})},YN=(n,e)=>{let t=n;return e.split(sA).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},E5=n=>n.isThemeGetter,A5=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[t,s]}):n,C5=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},HR="!",N5=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,a=o=>{const l=[];let u=0,h=0,f;for(let w=0;w<o.length;w++){let v=o[w];if(u===0){if(v===s&&(r||o.slice(w,w+i)===e)){l.push(o.slice(h,w)),h=w+i;continue}if(v==="/"){f=w;continue}}v==="["?u++:v==="]"&&u--}const p=l.length===0?o:o.substring(h),m=p.startsWith(HR),y=m?p.substring(1):p,g=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return t?o=>t({className:o,parseClassName:a}):a},k5=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},j5=n=>({cache:C5(n.cacheSize),parseClassName:N5(n),...b5(n)}),P5=/\s+/,T5=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=n.trim().split(P5);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);let y=!!m,g=r(y?p.substring(0,m):p);if(!g){if(!y){o=u+(o.length>0?" "+o:o);continue}if(g=r(p),!g){o=u+(o.length>0?" "+o:o);continue}y=!1}const w=k5(h).join(":"),v=f?w+HR:w,x=v+g;if(i.includes(x))continue;i.push(x);const b=s(g,y);for(let E=0;E<b.length;++E){const A=b[E];i.push(v+A)}o=u+(o.length>0?" "+o:o)}return o};function R5(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=WR(e))&&(r&&(r+=" "),r+=t);return r}const WR=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=WR(n[r]))&&(t&&(t+=" "),t+=e);return t};function M5(n,...e){let t,r,s,i=a;function a(l){const u=e.reduce((h,f)=>f(h),n());return t=j5(u),r=t.cache.get,s=t.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const h=T5(l,t);return s(l,h),h}return function(){return i(R5.apply(null,arguments))}}const it=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},VR=/^\[(?:([a-z-]+):)?(.+)\]$/i,I5=/^\d+\/\d+$/,D5=new Set(["px","full","screen"]),O5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,L5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,F5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,B5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ki=n=>Gd(n)||D5.has(n)||I5.test(n),lo=n=>Ff(n,"length",Y5),Gd=n=>!!n&&!Number.isNaN(Number(n)),mb=n=>Ff(n,"number",Gd),np=n=>!!n&&Number.isInteger(Number(n)),z5=n=>n.endsWith("%")&&Gd(n.slice(0,-1)),_e=n=>VR.test(n),co=n=>O5.test(n),U5=new Set(["length","size","percentage"]),H5=n=>Ff(n,U5,GR),W5=n=>Ff(n,"position",GR),V5=new Set(["image","url"]),G5=n=>Ff(n,V5,X5),q5=n=>Ff(n,"",K5),rp=()=>!0,Ff=(n,e,t)=>{const r=VR.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},Y5=n=>L5.test(n)&&!F5.test(n),GR=()=>!1,K5=n=>$5.test(n),X5=n=>B5.test(n),Q5=()=>{const n=it("colors"),e=it("spacing"),t=it("blur"),r=it("brightness"),s=it("borderColor"),i=it("borderRadius"),a=it("borderSpacing"),o=it("borderWidth"),l=it("contrast"),u=it("grayscale"),h=it("hueRotate"),f=it("invert"),p=it("gap"),m=it("gradientColorStops"),y=it("gradientColorStopPositions"),g=it("inset"),w=it("margin"),v=it("opacity"),x=it("padding"),b=it("saturate"),E=it("scale"),A=it("sepia"),C=it("skew"),N=it("space"),P=it("translate"),T=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",_e,e],R=()=>[_e,e],F=()=>["",Ki,lo],O=()=>["auto",Gd,_e],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",_e],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[Gd,_e];return{cacheSize:500,separator:":",theme:{colors:[rp],spacing:[Ki,lo],blur:["none","",co,_e],brightness:Z(),borderColor:[n],borderRadius:["none","","full",co,_e],borderSpacing:R(),borderWidth:F(),contrast:Z(),grayscale:z(),hueRotate:Z(),invert:z(),gap:R(),gradientColorStops:[n],gradientColorStopPositions:[z5,lo],inset:I(),margin:I(),opacity:Z(),padding:R(),saturate:Z(),scale:Z(),sepia:z(),skew:Z(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[co]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),_e]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",np,_e]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",np,_e]}],"grid-cols":[{"grid-cols":[rp]}],"col-start-end":[{col:["auto",{span:["full",np,_e]},_e]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[rp]}],"row-start-end":[{row:["auto",{span:[np,_e]},_e]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[co]},co]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",co,lo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mb]}],"font-family":[{font:[rp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",Gd,mb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ki,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ki,lo]}],"underline-offset":[{"underline-offset":["auto",Ki,_e]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),W5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",H5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},G5]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Ki,_e]}],"outline-w":[{outline:[Ki,lo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:F()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ki,lo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",co,q5]}],"shadow-color":[{shadow:[rp]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",co,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[np,_e]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Ki,lo,mb]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},J5=M5(Q5);function ee(...n){return J5(TR(n))}const Z5=s5,qR=_.forwardRef(({className:n,...e},t)=>c.jsx(ER,{ref:t,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));qR.displayName=ER.displayName;const eB=dv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),YR=_.forwardRef(({className:n,variant:e,...t},r)=>c.jsx(AR,{ref:r,className:ee(eB({variant:e}),n),...t}));YR.displayName=AR.displayName;const tB=_.forwardRef(({className:n,...e},t)=>c.jsx(kR,{ref:t,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));tB.displayName=kR.displayName;const KR=_.forwardRef(({className:n,...e},t)=>c.jsx(jR,{ref:t,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:c.jsx(zl,{className:"h-4 w-4"})}));KR.displayName=jR.displayName;const XR=_.forwardRef(({className:n,...e},t)=>c.jsx(CR,{ref:t,className:ee("text-sm font-semibold",n),...e}));XR.displayName=CR.displayName;const QR=_.forwardRef(({className:n,...e},t)=>c.jsx(NR,{ref:t,className:ee("text-sm opacity-90",n),...e}));QR.displayName=NR.displayName;function nB(){const{toasts:n}=Jx();return c.jsxs(Z5,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return c.jsxs(YR,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[t&&c.jsx(XR,{children:t}),r&&c.jsx(QR,{children:r})]}),s,c.jsx(KR,{})]},e)}),c.jsx(qR,{})]})}var KN=["light","dark"],rB="(prefers-color-scheme: dark)",sB=_.createContext(void 0),iB={setTheme:n=>{},themes:[]},aB=()=>{var n;return(n=_.useContext(sB))!=null?n:iB};_.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:o,nonce:l})=>{let u=i==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=s?KN.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(y,g=!1,w=!0)=>{let v=a?a[y]:y,x=g?y+"|| ''":`'${v}'`,b="";return s&&w&&!g&&KN.includes(y)&&(b+=`d.style.colorScheme = '${y}';`),t==="class"?g||v?b+=`c.add(${x})`:b+="null":v&&(b+=`d[s](n,${x})`),b},m=n?`!function(){${h}${p(n)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${rB}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}${u?"":"else{"+p(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${f}}catch(t){}}();`;return _.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var oB=n=>{switch(n){case"success":return uB;case"info":return hB;case"warning":return dB;case"error":return fB;default:return null}},lB=Array(12).fill(0),cB=({visible:n,className:e})=>K.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},K.createElement("div",{className:"sonner-spinner"},lB.map((t,r)=>K.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),uB=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),dB=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),hB=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fB=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},K.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),pB=K.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},K.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),K.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),mB=()=>{let[n,e]=K.useState(document.hidden);return K.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},e_=1,gB=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:e_++,i=this.toasts.find(o=>o.id===s),a=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(o=>o.id===s?(this.publish({...o,...n,id:s,title:t}),{...o,...n,id:s,dismissible:a,title:t}):o):this.addToast({title:t,...r,dismissible:a,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),s=t!==void 0,i,a=r.then(async l=>{if(i=["resolve",l],K.isValidElement(l))s=!1,this.create({id:t,type:"default",message:l});else if(yB(l)&&!l.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:u,description:h})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(l):e.success,h=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:u,description:h})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(l):e.error,h=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:u,description:h})}}).finally(()=>{var l;s&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),o=()=>new Promise((l,u)=>a.then(()=>i[0]==="reject"?u(i[1]):l(i[1])).catch(u));return typeof t!="string"&&typeof t!="number"?{unwrap:o}:Object.assign(t,{unwrap:o})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||e_++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},tr=new gB,vB=(n,e)=>{let t=(e==null?void 0:e.id)||e_++;return tr.addToast({title:n,...e,id:t}),t},yB=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",xB=vB,wB=()=>tr.toasts,bB=()=>tr.getActiveToasts(),De=Object.assign(xB,{success:tr.success,info:tr.info,warning:tr.warning,error:tr.error,custom:tr.custom,message:tr.message,promise:tr.promise,dismiss:tr.dismiss,loading:tr.loading},{getHistory:wB,getToasts:bB});function _B(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}_B(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ty(n){return n.label!==void 0}var SB=3,EB="32px",AB="16px",XN=4e3,CB=356,NB=14,kB=20,jB=200;function ps(...n){return n.filter(Boolean).join(" ")}function PB(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var TB=n=>{var e,t,r,s,i,a,o,l,u,h,f;let{invert:p,toast:m,unstyled:y,interacting:g,setHeights:w,visibleToasts:v,heights:x,index:b,toasts:E,expanded:A,removeToast:C,defaultRichColors:N,closeButton:P,style:T,cancelButtonStyle:M,actionButtonStyle:I,className:R="",descriptionClassName:F="",duration:O,position:V,gap:B,loadingIcon:L,expandByDefault:D,classNames:z,icons:H,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:$}=n,[W,X]=K.useState(null),[Y,le]=K.useState(null),[U,fe]=K.useState(!1),[Se,Ae]=K.useState(!1),[Ce,Te]=K.useState(!1),[Bt,Kn]=K.useState(!1),[ql,ro]=K.useState(!1),[Yl,Gf]=K.useState(0),[Qu,yC]=K.useState(0),qf=K.useRef(m.duration||O||XN),xC=K.useRef(null),Kl=K.useRef(null),NF=b===0,kF=b+1<=v,zr=m.type,Ju=m.dismissible!==!1,jF=m.className||"",PF=m.descriptionClassName||"",Dv=K.useMemo(()=>x.findIndex(xe=>xe.toastId===m.id)||0,[x,m.id]),TF=K.useMemo(()=>{var xe;return(xe=m.closeButton)!=null?xe:P},[m.closeButton,P]),wC=K.useMemo(()=>m.duration||O||XN,[m.duration,O]),Ow=K.useRef(0),Zu=K.useRef(0),bC=K.useRef(0),ed=K.useRef(null),[RF,MF]=V.split("-"),_C=K.useMemo(()=>x.reduce((xe,Ke,lt)=>lt>=Dv?xe:xe+Ke.height,0),[x,Dv]),SC=mB(),IF=m.invert||p,Lw=zr==="loading";Zu.current=K.useMemo(()=>Dv*B+_C,[Dv,_C]),K.useEffect(()=>{qf.current=wC},[wC]),K.useEffect(()=>{fe(!0)},[]),K.useEffect(()=>{let xe=Kl.current;if(xe){let Ke=xe.getBoundingClientRect().height;return yC(Ke),w(lt=>[{toastId:m.id,height:Ke,position:m.position},...lt]),()=>w(lt=>lt.filter(us=>us.toastId!==m.id))}},[w,m.id]),K.useLayoutEffect(()=>{if(!U)return;let xe=Kl.current,Ke=xe.style.height;xe.style.height="auto";let lt=xe.getBoundingClientRect().height;xe.style.height=Ke,yC(lt),w(us=>us.find(ds=>ds.toastId===m.id)?us.map(ds=>ds.toastId===m.id?{...ds,height:lt}:ds):[{toastId:m.id,height:lt,position:m.position},...us])},[U,m.title,m.description,w,m.id]);let so=K.useCallback(()=>{Ae(!0),Gf(Zu.current),w(xe=>xe.filter(Ke=>Ke.toastId!==m.id)),setTimeout(()=>{C(m)},jB)},[m,C,w,Zu]);K.useEffect(()=>{if(m.promise&&zr==="loading"||m.duration===1/0||m.type==="loading")return;let xe;return A||g||$&&SC?(()=>{if(bC.current<Ow.current){let Ke=new Date().getTime()-Ow.current;qf.current=qf.current-Ke}bC.current=new Date().getTime()})():qf.current!==1/0&&(Ow.current=new Date().getTime(),xe=setTimeout(()=>{var Ke;(Ke=m.onAutoClose)==null||Ke.call(m,m),so()},qf.current)),()=>clearTimeout(xe)},[A,g,m,zr,$,SC,so]),K.useEffect(()=>{m.delete&&so()},[so,m.delete]);function DF(){var xe,Ke,lt;return H!=null&&H.loading?K.createElement("div",{className:ps(z==null?void 0:z.loader,(xe=m==null?void 0:m.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":zr==="loading"},H.loading):L?K.createElement("div",{className:ps(z==null?void 0:z.loader,(Ke=m==null?void 0:m.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":zr==="loading"},L):K.createElement(cB,{className:ps(z==null?void 0:z.loader,(lt=m==null?void 0:m.classNames)==null?void 0:lt.loader),visible:zr==="loading"})}return K.createElement("li",{tabIndex:0,ref:Kl,className:ps(R,jF,z==null?void 0:z.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,z==null?void 0:z.default,z==null?void 0:z[zr],(t=m==null?void 0:m.classNames)==null?void 0:t[zr]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:N,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":U,"data-promise":!!m.promise,"data-swiped":ql,"data-removed":Se,"data-visible":kF,"data-y-position":RF,"data-x-position":MF,"data-index":b,"data-front":NF,"data-swiping":Ce,"data-dismissible":Ju,"data-type":zr,"data-invert":IF,"data-swipe-out":Bt,"data-swipe-direction":Y,"data-expanded":!!(A||D&&U),style:{"--index":b,"--toasts-before":b,"--z-index":E.length-b,"--offset":`${Se?Yl:Zu.current}px`,"--initial-height":D?"auto":`${Qu}px`,...T,...m.style},onDragEnd:()=>{Te(!1),X(null),ed.current=null},onPointerDown:xe=>{Lw||!Ju||(xC.current=new Date,Gf(Zu.current),xe.target.setPointerCapture(xe.pointerId),xe.target.tagName!=="BUTTON"&&(Te(!0),ed.current={x:xe.clientX,y:xe.clientY}))},onPointerUp:()=>{var xe,Ke,lt,us;if(Bt||!Ju)return;ed.current=null;let ds=Number(((xe=Kl.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),io=Number(((Ke=Kl.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Xl=new Date().getTime()-((lt=xC.current)==null?void 0:lt.getTime()),hs=W==="x"?ds:io,ao=Math.abs(hs)/Xl;if(Math.abs(hs)>=kB||ao>.11){Gf(Zu.current),(us=m.onDismiss)==null||us.call(m,m),le(W==="x"?ds>0?"right":"left":io>0?"down":"up"),so(),Kn(!0),ro(!1);return}Te(!1),X(null)},onPointerMove:xe=>{var Ke,lt,us,ds;if(!ed.current||!Ju||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;let io=xe.clientY-ed.current.y,Xl=xe.clientX-ed.current.x,hs=(lt=n.swipeDirections)!=null?lt:PB(V);!W&&(Math.abs(Xl)>1||Math.abs(io)>1)&&X(Math.abs(Xl)>Math.abs(io)?"x":"y");let ao={x:0,y:0};W==="y"?(hs.includes("top")||hs.includes("bottom"))&&(hs.includes("top")&&io<0||hs.includes("bottom")&&io>0)&&(ao.y=io):W==="x"&&(hs.includes("left")||hs.includes("right"))&&(hs.includes("left")&&Xl<0||hs.includes("right")&&Xl>0)&&(ao.x=Xl),(Math.abs(ao.x)>0||Math.abs(ao.y)>0)&&ro(!0),(us=Kl.current)==null||us.style.setProperty("--swipe-amount-x",`${ao.x}px`),(ds=Kl.current)==null||ds.style.setProperty("--swipe-amount-y",`${ao.y}px`)}},TF&&!m.jsx?K.createElement("button",{"aria-label":Z,"data-disabled":Lw,"data-close-button":!0,onClick:Lw||!Ju?()=>{}:()=>{var xe;so(),(xe=m.onDismiss)==null||xe.call(m,m)},className:ps(z==null?void 0:z.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=H==null?void 0:H.close)!=null?i:pB):null,m.jsx||_.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:K.createElement(K.Fragment,null,zr||m.icon||m.promise?K.createElement("div",{"data-icon":"",className:ps(z==null?void 0:z.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||DF():null,m.type!=="loading"?m.icon||(H==null?void 0:H[zr])||oB(zr):null):null,K.createElement("div",{"data-content":"",className:ps(z==null?void 0:z.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},K.createElement("div",{"data-title":"",className:ps(z==null?void 0:z.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?K.createElement("div",{"data-description":"",className:ps(F,PF,z==null?void 0:z.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),_.isValidElement(m.cancel)?m.cancel:m.cancel&&ty(m.cancel)?K.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||M,onClick:xe=>{var Ke,lt;ty(m.cancel)&&Ju&&((lt=(Ke=m.cancel).onClick)==null||lt.call(Ke,xe),so())},className:ps(z==null?void 0:z.cancelButton,(h=m==null?void 0:m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,_.isValidElement(m.action)?m.action:m.action&&ty(m.action)?K.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||I,onClick:xe=>{var Ke,lt;ty(m.action)&&((lt=(Ke=m.action).onClick)==null||lt.call(Ke,xe),!xe.defaultPrevented&&so())},className:ps(z==null?void 0:z.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function QN(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function RB(n,e){let t={};return[n,e].forEach((r,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",o=i?AB:EB;function l(u){["top","right","bottom","left"].forEach(h=>{t[`${a}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?t[`${a}-${u}`]=o:t[`${a}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),t}var MB=_.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:l,mobileOffset:u,theme:h="light",richColors:f,duration:p,style:m,visibleToasts:y=SB,toastOptions:g,dir:w=QN(),gap:v=NB,loadingIcon:x,icons:b,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:A}=n,[C,N]=K.useState([]),P=K.useMemo(()=>Array.from(new Set([r].concat(C.filter($=>$.position).map($=>$.position)))),[C,r]),[T,M]=K.useState([]),[I,R]=K.useState(!1),[F,O]=K.useState(!1),[V,B]=K.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=K.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=K.useRef(null),H=K.useRef(!1),Z=K.useCallback($=>{N(W=>{var X;return(X=W.find(Y=>Y.id===$.id))!=null&&X.delete||tr.dismiss($.id),W.filter(({id:Y})=>Y!==$.id)})},[]);return K.useEffect(()=>tr.subscribe($=>{if($.dismiss){N(W=>W.map(X=>X.id===$.id?{...X,delete:!0}:X));return}setTimeout(()=>{rR.flushSync(()=>{N(W=>{let X=W.findIndex(Y=>Y.id===$.id);return X!==-1?[...W.slice(0,X),{...W[X],...$},...W.slice(X+1)]:[$,...W]})})})}),[]),K.useEffect(()=>{if(h!=="system"){B(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:W})=>{B(W?"dark":"light")})}catch{$.addListener(({matches:X})=>{try{B(X?"dark":"light")}catch(Y){console.error(Y)}})}},[h]),K.useEffect(()=>{C.length<=1&&R(!1)},[C]),K.useEffect(()=>{let $=W=>{var X,Y;s.every(le=>W[le]||W.code===le)&&(R(!0),(X=L.current)==null||X.focus()),W.code==="Escape"&&(document.activeElement===L.current||(Y=L.current)!=null&&Y.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[s]),K.useEffect(()=>{if(L.current)return()=>{z.current&&(z.current.focus({preventScroll:!0}),z.current=null,H.current=!1)}},[L.current]),K.createElement("section",{ref:e,"aria-label":`${E} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map(($,W)=>{var X;let[Y,le]=$.split("-");return C.length?K.createElement("ol",{key:$,dir:w==="auto"?QN():w,tabIndex:-1,ref:L,className:o,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":Y,"data-lifted":I&&C.length>1&&!i,"data-x-position":le,style:{"--front-toast-height":`${((X=T[0])==null?void 0:X.height)||0}px`,"--width":`${CB}px`,"--gap":`${v}px`,...m,...RB(l,u)},onBlur:U=>{H.current&&!U.currentTarget.contains(U.relatedTarget)&&(H.current=!1,z.current&&(z.current.focus({preventScroll:!0}),z.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||H.current||(H.current=!0,z.current=U.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{F||R(!1)},onDragEnd:()=>R(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},C.filter(U=>!U.position&&W===0||U.position===$).map((U,fe)=>{var Se,Ae;return K.createElement(TB,{key:U.id,icons:b,index:fe,toast:U,defaultRichColors:f,duration:(Se=g==null?void 0:g.duration)!=null?Se:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:y,closeButton:(Ae=g==null?void 0:g.closeButton)!=null?Ae:a,interacting:F,position:$,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:Z,toasts:C.filter(Ce=>Ce.position==U.position),heights:T.filter(Ce=>Ce.position==U.position),setHeights:M,expandByDefault:i,gap:v,loadingIcon:x,expanded:I,pauseWhenPageIsHidden:A,swipeDirections:n.swipeDirections})})):null}))});const IB=({...n})=>{const{theme:e="system"}=aB();return c.jsx(MB,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var nw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rw=typeof window>"u"||"Deno"in globalThis;function xs(){}function DB(n,e){return typeof n=="function"?n(e):n}function OB(n){return typeof n=="number"&&n>=0&&n!==1/0}function LB(n,e){return Math.max(n+(e||0)-Date.now(),0)}function t_(n,e){return typeof n=="function"?n(e):n}function FB(n,e){return typeof n=="function"?n(e):n}function JN(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:o}=n;if(a){if(r){if(e.queryHash!==iA(a,e.options))return!1}else if(!gm(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||s&&s!==e.state.fetchStatus||i&&!i(e))}function ZN(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(mm(e.options.mutationKey)!==mm(i))return!1}else if(!gm(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function iA(n,e){return((e==null?void 0:e.queryKeyHashFn)||mm)(n)}function mm(n){return JSON.stringify(n,(e,t)=>n_(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function gm(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>gm(n[t],e[t])):!1}function JR(n,e){if(n===e)return n;const t=ek(n)&&ek(e);if(t||n_(n)&&n_(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),a=i.length,o=t?[]:{},l=new Set(r);let u=0;for(let h=0;h<a;h++){const f=t?h:i[h];(!t&&l.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(o[f]=void 0,u++):(o[f]=JR(n[f],e[f]),o[f]===n[f]&&n[f]!==void 0&&u++)}return s===a&&u===s?n:o}return e}function ek(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function n_(n){if(!tk(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!tk(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function tk(n){return Object.prototype.toString.call(n)==="[object Object]"}function $B(n){return new Promise(e=>{setTimeout(e,n)})}function BB(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?JR(n,e):e}function zB(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function UB(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var aA=Symbol();function ZR(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===aA?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var fc,So,Zd,Dj,HB=(Dj=class extends nw{constructor(){super();k(this,fc);k(this,So);k(this,Zd);S(this,Zd,e=>{if(!rw&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){d(this,So)||this.setEventListener(d(this,Zd))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,So))==null||e.call(this),S(this,So,void 0))}setEventListener(e){var t;S(this,Zd,e),(t=d(this,So))==null||t.call(this),S(this,So,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){d(this,fc)!==e&&(S(this,fc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof d(this,fc)=="boolean"?d(this,fc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},fc=new WeakMap,So=new WeakMap,Zd=new WeakMap,Dj),e2=new HB,eh,Eo,th,Oj,WB=(Oj=class extends nw{constructor(){super();k(this,eh,!0);k(this,Eo);k(this,th);S(this,th,e=>{if(!rw&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){d(this,Eo)||this.setEventListener(d(this,th))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,Eo))==null||e.call(this),S(this,Eo,void 0))}setEventListener(e){var t;S(this,th,e),(t=d(this,Eo))==null||t.call(this),S(this,Eo,e(this.setOnline.bind(this)))}setOnline(e){d(this,eh)!==e&&(S(this,eh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return d(this,eh)}},eh=new WeakMap,Eo=new WeakMap,th=new WeakMap,Oj),W0=new WB;function VB(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function GB(n){return Math.min(1e3*2**n,3e4)}function t2(n){return(n??"online")==="online"?W0.isOnline():!0}var n2=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function gb(n){return n instanceof n2}function r2(n){let e=!1,t=0,r=!1,s;const i=VB(),a=g=>{var w;r||(p(new n2(g)),(w=n.abort)==null||w.call(n))},o=()=>{e=!0},l=()=>{e=!1},u=()=>e2.isFocused()&&(n.networkMode==="always"||W0.isOnline())&&n.canRun(),h=()=>t2(n.networkMode)&&n.canRun(),f=g=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,g),s==null||s(),i.resolve(g))},p=g=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var w;s=v=>{(r||u())&&g(v)},(w=n.onPause)==null||w.call(n)}).then(()=>{var g;s=void 0,r||(g=n.onContinue)==null||g.call(n)}),y=()=>{if(r)return;let g;const w=t===0?n.initialPromise:void 0;try{g=w??n.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var C;if(r)return;const x=n.retry??(rw?0:3),b=n.retryDelay??GB,E=typeof b=="function"?b(t,v):b,A=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,v);if(e||!A){p(v);return}t++,(C=n.onFail)==null||C.call(n,t,v),$B(E).then(()=>u()?void 0:m()).then(()=>{e?p(v):y()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:o,continueRetry:l,canStart:h,start:()=>(h()?y():m().then(y),i)}}var qB=n=>setTimeout(n,0);function YB(){let n=[],e=0,t=o=>{o()},r=o=>{o()},s=qB;const i=o=>{e?n.push(o):s(()=>{t(o)})},a=()=>{const o=n;n=[],o.length&&s(()=>{r(()=>{o.forEach(l=>{t(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{s=o}}}var Un=YB(),pc,Lj,s2=(Lj=class{constructor(){k(this,pc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),OB(this.gcTime)&&S(this,pc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(rw?1/0:5*60*1e3))}clearGcTimeout(){d(this,pc)&&(clearTimeout(d(this,pc)),S(this,pc,void 0))}},pc=new WeakMap,Lj),nh,mc,Hr,gc,En,Cm,vc,bs,Qi,Fj,KB=(Fj=class extends s2{constructor(e){super();k(this,bs);k(this,nh);k(this,mc);k(this,Hr);k(this,gc);k(this,En);k(this,Cm);k(this,vc);S(this,vc,!1),S(this,Cm,e.defaultOptions),this.setOptions(e.options),this.observers=[],S(this,gc,e.client),S(this,Hr,d(this,gc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,S(this,nh,QB(this.options)),this.state=e.state??d(this,nh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=d(this,En))==null?void 0:e.promise}setOptions(e){this.options={...d(this,Cm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,Hr).remove(this)}setData(e,t){const r=BB(this.state.data,e,this.options);return j(this,bs,Qi).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){j(this,bs,Qi).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=d(this,En))==null?void 0:r.promise;return(s=d(this,En))==null||s.cancel(e),t?t.then(xs).catch(xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,nh))}isActive(){return this.observers.some(e=>FB(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>t_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!LB(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,En))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,En))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),d(this,Hr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(d(this,En)&&(d(this,vc)?d(this,En).cancel({revert:!0}):d(this,En).cancelRetry()),this.scheduleGc()),d(this,Hr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||j(this,bs,Qi).call(this,{type:"invalidate"})}fetch(e,t){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(d(this,En))return d(this,En).continueRetry(),d(this,En).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(S(this,vc,!0),r.signal)})},i=()=>{const p=ZR(this.options,t),y=(()=>{const g={client:d(this,gc),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return S(this,vc,!1),this.options.persister?this.options.persister(p,y,this):p(y)},o=(()=>{const p={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:d(this,gc),state:this.state,fetchFn:i};return s(p),p})();(u=this.options.behavior)==null||u.onFetch(o,this),S(this,mc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&j(this,bs,Qi).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const l=p=>{var m,y,g,w;gb(p)&&p.silent||j(this,bs,Qi).call(this,{type:"error",error:p}),gb(p)||((y=(m=d(this,Hr).config).onError)==null||y.call(m,p,this),(w=(g=d(this,Hr).config).onSettled)==null||w.call(g,this.state.data,p,this)),this.scheduleGc()};return S(this,En,r2({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,y,g,w;if(p===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(v){l(v);return}(y=(m=d(this,Hr).config).onSuccess)==null||y.call(m,p,this),(w=(g=d(this,Hr).config).onSettled)==null||w.call(g,p,this.state.error,this),this.scheduleGc()},onError:l,onFail:(p,m)=>{j(this,bs,Qi).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{j(this,bs,Qi).call(this,{type:"pause"})},onContinue:()=>{j(this,bs,Qi).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),d(this,En).start()}},nh=new WeakMap,mc=new WeakMap,Hr=new WeakMap,gc=new WeakMap,En=new WeakMap,Cm=new WeakMap,vc=new WeakMap,bs=new WeakSet,Qi=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...XB(r.data,this.options),fetchMeta:e.meta??null};case"success":return S(this,mc,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return gb(s)&&s.revert&&d(this,mc)?{...d(this,mc),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Un.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),d(this,Hr).notify({query:this,type:"updated",action:e})})},Fj);function XB(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:t2(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function QB(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var si,$j,JB=($j=class extends nw{constructor(e={}){super();k(this,si);this.config=e,S(this,si,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??iA(s,t);let a=this.get(i);return a||(a=new KB({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){d(this,si).has(e.queryHash)||(d(this,si).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=d(this,si).get(e.queryHash);t&&(e.destroy(),t===e&&d(this,si).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return d(this,si).get(e)}getAll(){return[...d(this,si).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>JN(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>JN(e,r)):t}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},si=new WeakMap,$j),ii,In,yc,ai,fo,Bj,ZB=(Bj=class extends s2{constructor(e){super();k(this,ai);k(this,ii);k(this,In);k(this,yc);this.mutationId=e.mutationId,S(this,In,e.mutationCache),S(this,ii,[]),this.state=e.state||ez(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){d(this,ii).includes(e)||(d(this,ii).push(e),this.clearGcTimeout(),d(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){S(this,ii,d(this,ii).filter(t=>t!==e)),this.scheduleGc(),d(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){d(this,ii).length||(this.state.status==="pending"?this.scheduleGc():d(this,In).remove(this))}continue(){var e;return((e=d(this,yc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,l,u,h,f,p,m,y,g,w,v,x,b,E,A,C,N,P;const t=()=>{j(this,ai,fo).call(this,{type:"continue"})};S(this,yc,r2({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,M)=>{j(this,ai,fo).call(this,{type:"failed",failureCount:T,error:M})},onPause:()=>{j(this,ai,fo).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,In).canRun(this)}));const r=this.state.status==="pending",s=!d(this,yc).canStart();try{if(r)t();else{j(this,ai,fo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(i=d(this,In).config).onMutate)==null?void 0:a.call(i,e,this));const M=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));M!==this.state.context&&j(this,ai,fo).call(this,{type:"pending",context:M,variables:e,isPaused:s})}const T=await d(this,yc).start();return await((h=(u=d(this,In).config).onSuccess)==null?void 0:h.call(u,T,e,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,e,this.state.context)),await((y=(m=d(this,In).config).onSettled)==null?void 0:y.call(m,T,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,T,null,e,this.state.context)),j(this,ai,fo).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(v=d(this,In).config).onError)==null?void 0:x.call(v,T,e,this.state.context,this)),await((E=(b=this.options).onError)==null?void 0:E.call(b,T,e,this.state.context)),await((C=(A=d(this,In).config).onSettled)==null?void 0:C.call(A,void 0,T,this.state.variables,this.state.context,this)),await((P=(N=this.options).onSettled)==null?void 0:P.call(N,void 0,T,e,this.state.context)),T}finally{j(this,ai,fo).call(this,{type:"error",error:T})}}finally{d(this,In).runNext(this)}}},ii=new WeakMap,In=new WeakMap,yc=new WeakMap,ai=new WeakSet,fo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Un.batch(()=>{d(this,ii).forEach(r=>{r.onMutationUpdate(e)}),d(this,In).notify({mutation:this,type:"updated",action:e})})},Bj);function ez(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var oa,_s,Nm,zj,tz=(zj=class extends nw{constructor(e={}){super();k(this,oa);k(this,_s);k(this,Nm);this.config=e,S(this,oa,new Set),S(this,_s,new Map),S(this,Nm,0)}build(e,t,r){const s=new ZB({mutationCache:this,mutationId:++Xt(this,Nm)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){d(this,oa).add(e);const t=ny(e);if(typeof t=="string"){const r=d(this,_s).get(t);r?r.push(e):d(this,_s).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(d(this,oa).delete(e)){const t=ny(e);if(typeof t=="string"){const r=d(this,_s).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&d(this,_s).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ny(e);if(typeof t=="string"){const r=d(this,_s).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=ny(e);if(typeof t=="string"){const s=(r=d(this,_s).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Un.batch(()=>{d(this,oa).forEach(e=>{this.notify({type:"removed",mutation:e})}),d(this,oa).clear(),d(this,_s).clear()})}getAll(){return Array.from(d(this,oa))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>ZN(t,r))}findAll(e={}){return this.getAll().filter(t=>ZN(e,t))}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Un.batch(()=>Promise.all(e.map(t=>t.continue().catch(xs))))}},oa=new WeakMap,_s=new WeakMap,Nm=new WeakMap,zj);function ny(n){var e;return(e=n.options.scope)==null?void 0:e.id}function nk(n){return{onFetch:(e,t)=>{var h,f,p,m,y;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=ZR(e.options,e.fetchOptions),x=async(b,E,A)=>{if(g)return Promise.reject();if(E==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:E,direction:A?"backward":"forward",meta:e.options.meta};return w(I),I})(),P=await v(N),{maxPages:T}=e.options,M=A?UB:zB;return{pages:M(b.pages,P,T),pageParams:M(b.pageParams,E,T)}};if(s&&i.length){const b=s==="backward",E=b?nz:rk,A={pages:i,pageParams:a},C=E(r,A);o=await x(A,C,b)}else{const b=n??i.length;do{const E=l===0?a[0]??r.initialPageParam:rk(r,o);if(l>0&&E==null)break;o=await x(o,E),l++}while(l<b)}return o};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function rk(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function nz(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var St,Ao,Co,rh,sh,No,ih,ah,Uj,rz=(Uj=class{constructor(n={}){k(this,St);k(this,Ao);k(this,Co);k(this,rh);k(this,sh);k(this,No);k(this,ih);k(this,ah);S(this,St,n.queryCache||new JB),S(this,Ao,n.mutationCache||new tz),S(this,Co,n.defaultOptions||{}),S(this,rh,new Map),S(this,sh,new Map),S(this,No,0)}mount(){Xt(this,No)._++,d(this,No)===1&&(S(this,ih,e2.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,St).onFocus())})),S(this,ah,W0.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,St).onOnline())})))}unmount(){var n,e;Xt(this,No)._--,d(this,No)===0&&((n=d(this,ih))==null||n.call(this),S(this,ih,void 0),(e=d(this,ah))==null||e.call(this),S(this,ah,void 0))}isFetching(n){return d(this,St).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return d(this,Ao).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,St).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=d(this,St).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(t_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return d(this,St).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=d(this,St).get(r.queryHash),i=s==null?void 0:s.state.data,a=DB(e,i);if(a!==void 0)return d(this,St).build(this,r).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Un.batch(()=>d(this,St).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,St).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=d(this,St);Un.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=d(this,St);return Un.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Un.batch(()=>d(this,St).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(xs).catch(xs)}invalidateQueries(n,e={}){return Un.batch(()=>(d(this,St).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Un.batch(()=>d(this,St).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(xs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(xs)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=d(this,St).build(this,e);return t.isStaleByTime(t_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(xs).catch(xs)}fetchInfiniteQuery(n){return n.behavior=nk(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(xs).catch(xs)}ensureInfiniteQueryData(n){return n.behavior=nk(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return W0.isOnline()?d(this,Ao).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,St)}getMutationCache(){return d(this,Ao)}getDefaultOptions(){return d(this,Co)}setDefaultOptions(n){S(this,Co,n)}setQueryDefaults(n,e){d(this,rh).set(mm(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...d(this,rh).values()],t={};return e.forEach(r=>{gm(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){d(this,sh).set(mm(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...d(this,sh).values()],t={};return e.forEach(r=>{gm(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...d(this,Co).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=iA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===aA&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...d(this,Co).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){d(this,St).clear(),d(this,Ao).clear()}},St=new WeakMap,Ao=new WeakMap,Co=new WeakMap,rh=new WeakMap,sh=new WeakMap,No=new WeakMap,ih=new WeakMap,ah=new WeakMap,Uj),sz=_.createContext(void 0),iz=({client:n,children:e})=>(_.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),c.jsx(sz.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vm(){return vm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vm.apply(this,arguments)}var yl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(yl||(yl={}));const sk="popstate";function az(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return r_("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:V0(s)}return lz(e,t,null,n)}function Pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function i2(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oz(){return Math.random().toString(36).substr(2,8)}function ik(n,e){return{usr:n.state,key:n.key,idx:e}}function r_(n,e,t,r){return t===void 0&&(t=null),vm({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?$f(e):e,{state:t,key:e&&e.key||r||oz()})}function V0(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $f(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function lz(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=yl.Pop,l=null,u=h();u==null&&(u=0,a.replaceState(vm({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function f(){o=yl.Pop;let w=h(),v=w==null?null:w-u;u=w,l&&l({action:o,location:g.location,delta:v})}function p(w,v){o=yl.Push;let x=r_(g.location,w,v);u=h()+1;let b=ik(x,u),E=g.createHref(x);try{a.pushState(b,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(E)}i&&l&&l({action:o,location:g.location,delta:1})}function m(w,v){o=yl.Replace;let x=r_(g.location,w,v);u=h();let b=ik(x,u),E=g.createHref(x);a.replaceState(b,"",E),i&&l&&l({action:o,location:g.location,delta:0})}function y(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:V0(w);return x=x.replace(/ $/,"%20"),Pt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return o},get location(){return n(s,a)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(sk,f),l=w,()=>{s.removeEventListener(sk,f),l=null}},createHref(w){return e(s,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(w){return a.go(w)}};return g}var ak;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ak||(ak={}));function cz(n,e,t){return t===void 0&&(t="/"),uz(n,e,t,!1)}function uz(n,e,t,r){let s=typeof e=="string"?$f(e):e,i=oA(s.pathname||"/",t);if(i==null)return null;let a=a2(n);dz(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=_z(i);o=wz(a[l],u,r)}return o}function a2(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Pt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Nl([r,l.relativePath]),h=t.concat(l);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),a2(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:yz(u,i.index),routesMeta:h})};return n.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of o2(i.path))s(i,a,l)}),e}function o2(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=o2(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function dz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:xz(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const hz=/^:[\w-]+$/,fz=3,pz=2,mz=1,gz=10,vz=-2,ok=n=>n==="*";function yz(n,e){let t=n.split("/"),r=t.length;return t.some(ok)&&(r+=vz),e&&(r+=pz),t.filter(s=>!ok(s)).reduce((s,i)=>s+(hz.test(i)?fz:i===""?mz:gz),r)}function xz(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function wz(n,e,t){let{routesMeta:r}=n,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=lk({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=lk({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Nl([i,f.pathname]),pathnameBase:Cz(Nl([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Nl([i,f.pathnameBase]))}return a}function lk(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=bz(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let g=o[f]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=o[f];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:n}}function bz(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),i2(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _z(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return i2(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function oA(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Sz(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?$f(n):n;return{pathname:t?t.startsWith("/")?t:Ez(t,e):e,search:Nz(r),hash:kz(s)}}function Ez(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function vb(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Az(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function lA(n,e){let t=Az(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function cA(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=$f(n):(s=vm({},n),Pt(!s.pathname||!s.pathname.includes("?"),vb("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),vb("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),vb("#","search","hash",s)));let i=n===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=t;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}o=f>=0?e[f]:"/"}let l=Sz(s,o),u=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Nl=n=>n.join("/").replace(/\/\/+/g,"/"),Cz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Nz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const l2=["post","put","patch","delete"];new Set(l2);const Pz=["get",...l2];new Set(Pz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ym(){return ym=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ym.apply(this,arguments)}const uA=_.createContext(null),Tz=_.createContext(null),Ul=_.createContext(null),sw=_.createContext(null),to=_.createContext({outlet:null,matches:[],isDataRoute:!1}),c2=_.createContext(null);function Rz(n,e){let{relative:t}=e===void 0?{}:e;Bf()||Pt(!1);let{basename:r,navigator:s}=_.useContext(Ul),{hash:i,pathname:a,search:o}=h2(n,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:Nl([r,a])),s.createHref({pathname:l,search:o,hash:i})}function Bf(){return _.useContext(sw)!=null}function Gu(){return Bf()||Pt(!1),_.useContext(sw).location}function u2(n){_.useContext(Ul).static||_.useLayoutEffect(n)}function qu(){let{isDataRoute:n}=_.useContext(to);return n?Vz():Mz()}function Mz(){Bf()||Pt(!1);let n=_.useContext(uA),{basename:e,future:t,navigator:r}=_.useContext(Ul),{matches:s}=_.useContext(to),{pathname:i}=Gu(),a=JSON.stringify(lA(s,t.v7_relativeSplatPath)),o=_.useRef(!1);return u2(()=>{o.current=!0}),_.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=cA(u,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Nl([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,n])}function d2(){let{matches:n}=_.useContext(to),e=n[n.length-1];return e?e.params:{}}function h2(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=_.useContext(Ul),{matches:s}=_.useContext(to),{pathname:i}=Gu(),a=JSON.stringify(lA(s,r.v7_relativeSplatPath));return _.useMemo(()=>cA(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function Iz(n,e){return Dz(n,e)}function Dz(n,e,t,r){Bf()||Pt(!1);let{navigator:s}=_.useContext(Ul),{matches:i}=_.useContext(to),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=Gu(),h;if(e){var f;let w=typeof e=="string"?$f(e):e;l==="/"||(f=w.pathname)!=null&&f.startsWith(l)||Pt(!1),h=w}else h=u;let p=h.pathname||"/",m=p;if(l!=="/"){let w=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=cz(n,{pathname:m}),g=Bz(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Nl([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Nl([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,r);return e&&g?_.createElement(sw.Provider,{value:{location:ym({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:yl.Pop}},g):g}function Oz(){let n=Wz(),e=jz(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:s},t):null,null)}const Lz=_.createElement(Oz,null);class Fz extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_.createElement(to.Provider,{value:this.props.routeContext},_.createElement(c2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $z(n){let{routeContext:e,match:t,children:r}=n,s=_.useContext(uA);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(to.Provider,{value:e},r)}function Bz(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(s=t)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);h>=0||Pt(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:m}=t,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let m,y=!1,g=null,w=null;t&&(m=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||Lz,l&&(u<0&&p===0?(y=!0,w=null):u===p&&(y=!0,w=f.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,p+1)),x=()=>{let b;return m?b=g:y?b=w:f.route.Component?b=_.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,_.createElement($z,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:b})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?_.createElement(Fz,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var f2=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(f2||{}),G0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(G0||{});function zz(n){let e=_.useContext(uA);return e||Pt(!1),e}function Uz(n){let e=_.useContext(Tz);return e||Pt(!1),e}function Hz(n){let e=_.useContext(to);return e||Pt(!1),e}function p2(n){let e=Hz(),t=e.matches[e.matches.length-1];return t.route.id||Pt(!1),t.route.id}function Wz(){var n;let e=_.useContext(c2),t=Uz(G0.UseRouteError),r=p2(G0.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function Vz(){let{router:n}=zz(f2.UseNavigateStable),e=p2(G0.UseNavigateStable),t=_.useRef(!1);return u2(()=>{t.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,ym({fromRouteId:e},i)))},[n,e])}function Gz(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function qz(n){let{to:e,replace:t,state:r,relative:s}=n;Bf()||Pt(!1);let{future:i,static:a}=_.useContext(Ul),{matches:o}=_.useContext(to),{pathname:l}=Gu(),u=qu(),h=cA(e,lA(o,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return _.useEffect(()=>u(JSON.parse(f),{replace:t,state:r,relative:s}),[u,f,s,t,r]),null}function ei(n){Pt(!1)}function Yz(n){let{basename:e="/",children:t=null,location:r,navigationType:s=yl.Pop,navigator:i,static:a=!1,future:o}=n;Bf()&&Pt(!1);let l=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:l,navigator:i,static:a,future:ym({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=$f(r));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,g=_.useMemo(()=>{let w=oA(h,l);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:y},navigationType:s}},[l,h,f,p,m,y,s]);return g==null?null:_.createElement(Ul.Provider,{value:u},_.createElement(sw.Provider,{children:t,value:g}))}function Kz(n){let{children:e,location:t}=n;return Iz(s_(e),t)}new Promise(()=>{});function s_(n,e){e===void 0&&(e=[]);let t=[];return _.Children.forEach(n,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){t.push.apply(t,s_(r.props.children,i));return}r.type!==ei&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=s_(r.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i_(){return i_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},i_.apply(this,arguments)}function Xz(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function Qz(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Jz(n,e){return n.button===0&&(!e||e==="_self")&&!Qz(n)}function a_(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function Zz(n,e){let t=a_(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(i=>{t.append(s,i)})}),t}const e6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],t6="6";try{window.__reactRouterVersion=t6}catch{}const n6="startTransition",ck=sE[n6];function r6(n){let{basename:e,children:t,future:r,window:s}=n,i=_.useRef();i.current==null&&(i.current=az({window:s,v5Compat:!0}));let a=i.current,[o,l]=_.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},h=_.useCallback(f=>{u&&ck?ck(()=>l(f)):l(f)},[l,u]);return _.useLayoutEffect(()=>a.listen(h),[a,h]),_.useEffect(()=>Gz(r),[r]),_.createElement(Yz,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:r})}const s6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ws=_.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,p=Xz(e,e6),{basename:m}=_.useContext(Ul),y,g=!1;if(typeof u=="string"&&i6.test(u)&&(y=u,s6))try{let b=new URL(window.location.href),E=u.startsWith("//")?new URL(b.protocol+u):new URL(u),A=oA(E.pathname,m);E.origin===b.origin&&A!=null?u=A+E.search+E.hash:g=!0}catch{}let w=Rz(u,{relative:s}),v=a6(u,{replace:a,state:o,target:l,preventScrollReset:h,relative:s,viewTransition:f});function x(b){r&&r(b),b.defaultPrevented||v(b)}return _.createElement("a",i_({},p,{href:y||w,onClick:g||i?r:x,ref:t,target:l}))});var uk;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(uk||(uk={}));var dk;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(dk||(dk={}));function a6(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=qu(),u=Gu(),h=h2(n,{relative:a});return _.useCallback(f=>{if(Jz(f,t)){f.preventDefault();let p=r!==void 0?r:V0(u)===V0(h);l(n,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,h,r,s,t,n,i,a,o])}function o6(n){let e=_.useRef(a_(n)),t=_.useRef(!1),r=Gu(),s=_.useMemo(()=>Zz(r.search,t.current?null:e.current),[r.search]),i=qu(),a=_.useCallback((o,l)=>{const u=a_(typeof o=="function"?o(s):o);t.current=!0,i("?"+u,l)},[i,s]);return[s,a]}const o_=dv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-medical text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-card hover:shadow-card-hover",medical:"bg-gradient-medical text-white hover:shadow-elegant hover:scale-[1.02] shadow-card",secondary:"bg-transparent border border-primary text-primary hover:bg-secondary hover:text-secondary-foreground hover:border-secondary",outline:"border border-card-border bg-card hover:bg-muted hover:text-card-foreground",ghost:"hover:bg-muted hover:text-card-foreground",link:"text-primary hover:text-primary-hover underline-offset-4 hover:underline",success:"bg-success text-white hover:opacity-90 shadow-card",warning:"bg-warning text-white hover:opacity-90 shadow-card",error:"bg-error text-white hover:opacity-90 shadow-card"},size:{default:"h-10 px-6 py-2",sm:"h-8 rounded-md px-4 text-xs",lg:"h-12 rounded-medical px-8 text-base",xl:"h-14 rounded-medical px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=_.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?v3:"button";return c.jsx(a,{className:ee(o_({variant:e,size:t,className:n})),ref:i,...s})});J.displayName="Button";const l6="modulepreload",c6=function(n){return"/swiss-med-track/"+n},hk={},fv=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=c6(l),l in hk)return;hk[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":l6,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},u6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fv(async()=>{const{default:r}=await Promise.resolve().then(()=>zf);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class dA extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class d6 extends dA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fk extends dA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pk extends dA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var l_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(l_||(l_={}));var h6=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class f6{constructor(e,{headers:t={},customFetch:r,region:s=l_.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=u6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return h6(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(o["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(o["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:h}).catch(g=>{throw new d6(g)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new fk(f);if(!f.ok)throw new pk(f);let m=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield f.json():m==="application/octet-stream"?y=yield f.blob():m==="text/event-stream"?y=f:m==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof pk||s instanceof fk?s.context:void 0}}})}}var sr={},hA={},iw={},pv={},aw={},ow={},p6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ef=p6();const m6=Ef.fetch,m2=Ef.fetch.bind(Ef),g2=Ef.Headers,g6=Ef.Request,v6=Ef.Response,zf=Object.freeze(Object.defineProperty({__proto__:null,Headers:g2,Request:g6,Response:v6,default:m2,fetch:m6},Symbol.toStringTag,{value:"Module"})),y6=$F(zf);var lw={};Object.defineProperty(lw,"__esModule",{value:!0});let x6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};lw.default=x6;var v2=ss&&ss.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ow,"__esModule",{value:!0});const w6=v2(y6),b6=v2(lw);let _6=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=w6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l,u;let h=null,f=null,p=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=x:f=JSON.parse(x))}const w=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{h=JSON.parse(w),Array.isArray(h)&&i.status===404&&(f=[],h=null,m=200,y="OK")}catch{i.status===404&&w===""?(m=204,y="No Content"):h={message:w}}if(h&&this.isMaybeSingle&&(!((u=h==null?void 0:h.details)===null||u===void 0)&&u.includes("0 rows"))&&(h=null,m=200,y="OK"),h&&this.shouldThrowOnError)throw new b6.default(h)}return{error:h,data:f,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};ow.default=_6;var S6=ss&&ss.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(aw,"__esModule",{value:!0});const E6=S6(ow);let A6=class extends E6.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};aw.default=A6;var C6=ss&&ss.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pv,"__esModule",{value:!0});const N6=C6(aw);let k6=class extends N6.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};pv.default=k6;var j6=ss&&ss.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(iw,"__esModule",{value:!0});const sp=j6(pv);let P6=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new sp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new sp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new sp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new sp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new sp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};iw.default=P6;var y2=ss&&ss.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(hA,"__esModule",{value:!0});const T6=y2(iw),R6=y2(pv);let M6=class x2{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new T6.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new x2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(o="POST",u=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new R6.default({method:o,url:l,headers:h,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};hA.default=M6;var Uf=ss&&ss.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sr,"__esModule",{value:!0});sr.PostgrestError=sr.PostgrestBuilder=sr.PostgrestTransformBuilder=sr.PostgrestFilterBuilder=sr.PostgrestQueryBuilder=sr.PostgrestClient=void 0;const w2=Uf(hA);sr.PostgrestClient=w2.default;const b2=Uf(iw);sr.PostgrestQueryBuilder=b2.default;const _2=Uf(pv);sr.PostgrestFilterBuilder=_2.default;const S2=Uf(aw);sr.PostgrestTransformBuilder=S2.default;const E2=Uf(ow);sr.PostgrestBuilder=E2.default;const A2=Uf(lw);sr.PostgrestError=A2.default;var I6=sr.default={PostgrestClient:w2.default,PostgrestQueryBuilder:b2.default,PostgrestFilterBuilder:_2.default,PostgrestTransformBuilder:S2.default,PostgrestBuilder:E2.default,PostgrestError:A2.default};const{PostgrestClient:D6,PostgrestQueryBuilder:tQ,PostgrestFilterBuilder:nQ,PostgrestTransformBuilder:rQ,PostgrestBuilder:sQ,PostgrestError:iQ}=I6;class O6{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const L6="2.15.1",F6=`realtime-js/${L6}`,$6="1.0.0",c_=1e4,B6=1e3,z6=100;var Gp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Gp||(Gp={}));var zt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(zt||(zt={}));var Ds;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ds||(Ds={}));var u_;(function(n){n.websocket="websocket"})(u_||(u_={}));var ac;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ac||(ac={}));class U6{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class C2{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(et||(et={}));const mk=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=H6(a,n,e,s),i),{})},H6=(n,e,t,r)=>{const s=e.find(o=>o.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?N2(i,a):d_(a)},N2=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return q6(e,t)}switch(n){case et.bool:return W6(e);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return V6(e);case et.json:case et.jsonb:return G6(e);case et.timestamp:return Y6(e);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return d_(e);default:return d_(e)}},d_=n=>n,W6=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},V6=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},G6=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},q6=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>N2(e,o))}return n},Y6=n=>typeof n=="string"?n.replace(" ","T"):n,k2=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class yb{constructor(e,t,r={},s=c_){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gk;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(gk||(gk={}));class qp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qp.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=qp.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=qp.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,h)=>{a[u]||(l[u]=h)}),this.map(a,(u,h)=>{const f=i[u];if(f){const p=h.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),y=h.filter(w=>m.indexOf(w.presence_ref)<0),g=f.filter(w=>p.indexOf(w.presence_ref)<0);y.length>0&&(o[u]=y),g.length>0&&(l[u]=g)}else o[u]=h}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const h=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),h.length>0){const f=e[o].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);e[o].unshift(...p)}r(o,h,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const h=l.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vk;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(vk||(vk={}));var Yp;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Yp||(Yp={}));var ra;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ra||(ra={}));class fA{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new yb(this,Ds.join,this.params,this.timeout),this.rejoinTimer=new C2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ds.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new qp(this),this.broadcastEndpointURL=k2(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[Yp.PRESENCE]&&this.bindings[Yp.PRESENCE].length>0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(ra.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ra.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(ra.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,g=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,w=[];for(let v=0;v<g;v++){const x=y[v],{filter:{event:b,schema:E,table:A,filter:C}}=x,N=p&&p[v];if(N&&N.event===b&&N.schema===E&&N.table===A&&N.filter===C)w.push(Object.assign(Object.assign({},x),{id:N.id}));else{this.unsubscribe(),this.state=zt.errored,e==null||e(ra.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(ra.SUBSCRIBED);return}}).receive("error",p=>{this.state=zt.errored,e==null||e(ra.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ra.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===zt.joined&&e===Yp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ds.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new yb(this,Ds.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new yb(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>z6){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:h}=Ds;if(r&&[o,l,u,h].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,g,w;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(m=>m.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var y,g,w,v,x,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const E=m.id,A=(y=m.filter)===null||y===void 0?void 0:y.event;return E&&((g=t.ids)===null||g===void 0?void 0:g.includes(E))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return E==="*"||E===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:w,commit_timestamp:v,type:x,errors:b}=y;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}m.callback(p,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&fA.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ds.close,{},e)}_onError(e){this._on(Ds.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=mk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=mk(e.columns,e.old_record)),t}}const yk=()=>{},ry={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},K6=[1e3,2e3,5e3,1e4],X6=1e4,Q6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class J6{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=c_,this.transport=null,this.heartbeatIntervalMs=ry.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yk,this.ref=0,this.reconnectTimer=null,this.logger=yk,this.conn=null,this.sendBuffer=[],this.serializer=new U6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>fv(async()=>{const{default:o}=await Promise.resolve().then(()=>zf);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${u_.websocket}`,this.httpEndpoint=k2(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=O6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:$6}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Gp.connecting:return ac.Connecting;case Gp.open:return ac.Open;case Gp.closing:return ac.Closing;default:return ac.Closed}}isConnected(){return this.connectionState()===ac.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new fA(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(B6,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ry.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=t,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ds.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Q6],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:F6};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Ds.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new C2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ry.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,a,o,l,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:c_,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ry.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:h=>K6[h-1]||X6,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(h,f)=>f(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class pA extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Gt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Z6 extends pA{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class h_ extends pA{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var eU=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const j2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fv(async()=>{const{default:r}=await Promise.resolve().then(()=>zf);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},tU=()=>eU(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fv(()=>Promise.resolve().then(()=>zf),void 0)).Response:Response}),f_=n=>{if(Array.isArray(n))return n.map(t=>f_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=f_(r)}),e},nU=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Yu=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const xb=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),rU=(n,e,t)=>Yu(void 0,void 0,void 0,function*(){const r=yield tU();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new Z6(xb(s),i,a))}).catch(s=>{e(new h_(xb(s),s))}):e(new h_(xb(n),n))}),sU=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(nU(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function mv(n,e,t,r,s,i){return Yu(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,sU(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>rU(l,o,r))})})}function q0(n,e,t,r){return Yu(this,void 0,void 0,function*(){return mv(n,"GET",e,t,r)})}function ri(n,e,t,r,s){return Yu(this,void 0,void 0,function*(){return mv(n,"POST",e,r,s,t)})}function p_(n,e,t,r,s){return Yu(this,void 0,void 0,function*(){return mv(n,"PUT",e,r,s,t)})}function iU(n,e,t,r){return Yu(this,void 0,void 0,function*(){return mv(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function P2(n,e,t,r,s){return Yu(this,void 0,void 0,function*(){return mv(n,"DELETE",e,r,s,t)})}var Pn=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const aU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class oU{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=j2(s)}uploadOrUpdate(e,t,r,s){return Pn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},xk),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),f=yield(e=="PUT"?p_:ri)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Gt(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Pn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:xk.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield p_(this.fetch,o.toString(),l,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(Gt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Pn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield ri(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new pA("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}update(e,t,r){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Pn(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return Pn(this,void 0,void 0,function*(){try{return{data:{path:(yield ri(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return Pn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ri(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Pn(this,void 0,void 0,function*(){try{const s=yield ri(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}download(e,t){return Pn(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield q0(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Gt(o))return{data:null,error:o};throw o}})}info(e){return Pn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield q0(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:f_(r),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}exists(e){return Pn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield iU(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Gt(r)&&r instanceof h_){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return Pn(this,void 0,void 0,function*(){try{return{data:yield P2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}list(e,t,r){return Pn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},aU),t),{prefix:e||""});return{data:yield ri(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}listV2(e,t){return Pn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ri(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const lU="2.11.0",cU={"X-Client-Info":`storage-js/${lU}`};var nd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class uU{constructor(e,t={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},cU),t),this.fetch=j2(r)}listBuckets(){return nd(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Gt(e))return{data:null,error:e};throw e}})}getBucket(e){return nd(this,void 0,void 0,function*(){try{return{data:yield q0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return nd(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return nd(this,void 0,void 0,function*(){try{return{data:yield p_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return nd(this,void 0,void 0,function*(){try{return{data:yield ri(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return nd(this,void 0,void 0,function*(){try{return{data:yield P2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}}class dU extends uU{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new oU(this.url,this.headers,e,this.fetch)}}const hU="2.56.0";let pp="";typeof Deno<"u"?pp="deno":typeof document<"u"?pp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pp="react-native":pp="node";const fU={"X-Client-Info":`supabase-js-${pp}/${hU}`},pU={headers:fU},mU={schema:"public"},gU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vU={};var yU=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const xU=n=>{let e;return n?e=n:typeof fetch>"u"?e=m2:e=fetch,(...t)=>e(...t)},wU=()=>typeof Headers>"u"?g2:Headers,bU=(n,e,t)=>{const r=xU(t),s=wU();return(i,a)=>yU(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var _U=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};function SU(n){return n.endsWith("/")?n:n+"/"}function EU(n,e){var t,r;const{db:s,auth:i,realtime:a,global:o}=n,{db:l,auth:u,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>_U(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}const T2="2.71.1",dd=30*1e3,m_=3,wb=m_*dd,AU="http://localhost:9999",CU="supabase.auth.token",NU={"X-Client-Info":`gotrue-js/${T2}`},g_="X-Supabase-Api-Version",R2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jU=10*60*1e3;class mA extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function we(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class PU extends mA{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function TU(n){return we(n)&&n.name==="AuthApiError"}class M2 extends mA{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Hl extends mA{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class po extends Hl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RU(n){return we(n)&&n.name==="AuthSessionMissingError"}class sy extends Hl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class iy extends Hl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ay extends Hl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MU(n){return we(n)&&n.name==="AuthImplicitGrantRedirectError"}class wk extends Hl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class v_ extends Hl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function bb(n){return we(n)&&n.name==="AuthRetryableFetchError"}class bk extends Hl{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class y_ extends Hl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_k=` 	
\r=`.split(""),IU=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<_k.length;e+=1)n[_k[e].charCodeAt(0)]=-2;for(let e=0;e<Y0.length;e+=1)n[Y0[e].charCodeAt(0)]=e;return n})();function Sk(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Y0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Y0[r]),e.queuedBits-=6}}function I2(n,e,t){const r=IU[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ek(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{LU(a,r,t)};for(let a=0;a<n.length;a+=1)I2(n.charCodeAt(a),s,i);return e.join("")}function DU(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function OU(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}DU(r,e)}}function LU(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function FU(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)I2(n.charCodeAt(s),t,r);return new Uint8Array(e)}function $U(n){const e=[];return OU(n,t=>e.push(t)),new Uint8Array(e)}function BU(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>Sk(s,t,r)),Sk(null,t,r),e.join("")}function zU(n){return Math.round(Date.now()/1e3)+n}function UU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ms=()=>typeof window<"u"&&typeof document<"u",Ql={tested:!1,writable:!1},D2=()=>{if(!ms())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ql.tested)return Ql.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ql.tested=!0,Ql.writable=!0}catch{Ql.tested=!0,Ql.writable=!1}return Ql.writable};function HU(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const O2=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fv(async()=>{const{default:r}=await Promise.resolve().then(()=>zf);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},WU=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",hd=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Jl=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},uo=async(n,e)=>{await n.removeItem(e)};class cw{constructor(){this.promise=new cw.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}cw.promiseConstructor=Promise;function _b(n){const e=n.split(".");if(e.length!==3)throw new y_("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!kU.test(e[r]))throw new y_("JWT not in base64url format");return{header:JSON.parse(Ek(e[0])),payload:JSON.parse(Ek(e[1])),signature:FU(e[2]),raw:{header:e[0],payload:e[1]}}}async function VU(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function GU(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function qU(n){return("0"+n.toString(16)).substr(-2)}function YU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,qU).join("")}async function KU(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function XU(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await KU(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rd(n,e,t=!1){const r=YU();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await hd(n,`${e}-code-verifier`,s);const i=await XU(r);return[i,r===i?"plain":"s256"]}const QU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function JU(n){const e=n.headers.get(g_);if(!e||!e.match(QU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ZU(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function eH(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sd(n){if(!tH.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sb(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ak(n){return JSON.parse(JSON.stringify(n))}var nH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const tc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),rH=[502,503,504];async function Ck(n){var e;if(!WU(n))throw new v_(tc(n),0);if(rH.includes(n.status))throw new v_(tc(n),n.status);let t;try{t=await n.json()}catch(i){throw new M2(tc(i),i)}let r;const s=JU(n);if(s&&s.getTime()>=R2["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new bk(tc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new po}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new bk(tc(t),n.status,t.weak_password.reasons);throw new PU(tc(t),n.status||500,r)}const sH=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function je(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[g_]||(i[g_]=R2["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await iH(n,e,t+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function iH(n,e,t,r,s,i){const a=sH(e,r,s,i);let o;try{o=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new v_(tc(l),0)}if(o.ok||await Ck(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Ck(l)}}function Ji(n){var e;let t=null;cH(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=zU(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Nk(n){const e=Ji(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function bo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function aH(n){return{data:n,error:null}}function oH(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=nH(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function lH(n){return n}function cH(n){return n.access_token&&n.refresh_token&&n.expires_in}const Eb=["global","local","others"];var uH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class dH{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=O2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Eb[0]){if(Eb.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Eb.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:bo})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=uH(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:oH,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(we(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:bo})}catch(t){if(we(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},h=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:lH});if(h.error)throw h.error;const f=await h.json(),p=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(we(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){sd(e);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:bo})}catch(t){if(we(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){sd(e);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:bo})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){sd(e);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:bo})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){sd(e.userId);try{const{data:t,error:r}=await je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(we(t))return{data:null,error:t};throw t}}async _deleteFactor(e){sd(e.userId),sd(e.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}}}function kk(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function hH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const id={debug:!!(globalThis&&D2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class L2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class fH extends L2{}async function pH(n,e,t){id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),id.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){id.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{id.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw id.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new fH(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(id.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}hH();const mH={url:AU,storageKey:CU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:NU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function jk(n,e,t){return await t()}const ad={};class xm{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xm.nextInstanceID,xm.nextInstanceID+=1,this.instanceID>0&&ms()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},mH),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new dH({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=O2(s.fetch),this.lock=s.lock||jk,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ms()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=pH:this.lock=jk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:D2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kk(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=kk(this.memoryStorage)),ms()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ad[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ad[this.storageKey]=Object.assign(Object.assign({},ad[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ad[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ad[this.storageKey]=Object.assign(Object.assign({},ad[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${T2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=HU(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),ms()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),MU(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return we(t)?{error:t}:{error:new M2("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ji}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:h,password:f,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await rd(this.storage,this.storageKey)),i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:Ji})}else if("phone"in e){const{phone:h,password:f,options:p}=e;i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ji})}else throw new iy("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(we(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Nk})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Nk})}else throw new iy("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new sy}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,a,o,l,u,h,f,p,m;let y,g;if("message"in e)y=e.message,g=e.signature;else{const{chain:w,wallet:v,statement:x,options:b}=e;let E;if(ms())if(typeof v=="object")E=v;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))E=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=v}const A=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const C=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),x?{statement:x}:null));let N;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")N=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)N=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${A.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const C=await E.signMessage(new TextEncoder().encode(y),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:w,error:v}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:BU(g)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ji});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new sy}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(we(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await Jl(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ji});if(await uo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new sy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(we(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,o=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Ji}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new sy}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await rd(this.storage,this.storageKey));const{error:f}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new iy("You must provide either an email or phone number.")}catch(o){if(we(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ji});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(we(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await rd(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:aH})}catch(i){if(we(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new po;const{error:s}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(we(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await je(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await je(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new iy("You must provide either an email or phone number and a type")}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Jl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wb:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Jl(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Sb()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,h)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:bo}):await this._useSession(async t=>{var r,s,i;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new po}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:bo})})}catch(t){if(we(t))return RU(t)&&(await this._removeSession(),await uo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new po;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await rd(this.storage,this.storageKey));const{data:u,error:h}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:bo});if(h)throw h;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new po;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=_b(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(we(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new po;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(we(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ms())throw new ay("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ay(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new wk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ay("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wk("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new ay("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(o);let p=h+f;l&&(p=parseInt(l));const m=p-h;m*1e3<=dd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(we(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Jl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(TU(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await uo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=UU(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await rd(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(we(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(we(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,h;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return ms()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(we(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(we(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await GU(async s=>(s>0&&await VU(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ji})),(s,i)=>{const a=200*Math.pow(2,s);return i&&bb(i)&&Date.now()+a-r<dd})}catch(r){if(this._debug(t,"error",r),we(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),ms()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Jl(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Jl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await hd(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Sb()}else if(s&&!s.user&&!s.user){const a=await Jl(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await uo(this.storage,this.storageKey+"-user"),await hd(this.storage,this.storageKey,s)):s.user=Sb()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<wb;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${wb}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),bb(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new po;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new cw;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new po;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),we(i)){const a={session:null,error:i};return bb(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await hd(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=Ak(s);await hd(this.storage,this.storageKey,i)}else{const s=Ak(t);await hd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await uo(this.storage,this.storageKey),await uo(this.storage,this.storageKey+"-code-verifier"),await uo(this.storage,this.storageKey+"-user"),this.userStorage&&await uo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ms()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/dd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${dd}ms, refresh threshold is ${m_} ticks`),s<=m_&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof L2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ms()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await rd(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(we(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await je(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(we(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(we(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(we(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=_b(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+jU>s)return r;const{data:i,error:a}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};r=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=_b(r);t!=null&&t.allowExpired||ZU(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const h=eH(s.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,a,$U(`${o}.${l}`)))throw new y_("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}}xm.nextInstanceID=0;const gH=xm;class vH extends gH{constructor(e){super(e)}}var yH=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class xH{constructor(e,t,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=SU(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:mU,realtime:vU,auth:Object.assign(Object.assign({},gU),{storageKey:u}),global:pU},f=EU(r??{},h);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=bU(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new D6(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new dU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new f6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return yH(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vH({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new J6(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wH=(n,e,t)=>new xH(n,e,t);function bH(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}bH()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _H="https://azthgtmchlqhtzlgwolw.supabase.co",SH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6dGhndG1jaGxxaHR6bGd3b2x3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMjQ5ODksImV4cCI6MjA3MDkwMDk4OX0.h5Cl_qJHDWlnGArMe8pQCn0rwhYUYBcdaviIvpxryAo",se=wH(_H,SH,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),F2=_.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),gv=()=>{const n=_.useContext(F2);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},EH=({children:n})=>{const[e,t]=_.useState(null),[r,s]=_.useState(null),[i,a]=_.useState(!0);_.useEffect(()=>{const{data:{subscription:u}}=se.auth.onAuthStateChange((h,f)=>{var p;console.log("Auth state change:",h,(p=f==null?void 0:f.user)==null?void 0:p.id),s(f),t((f==null?void 0:f.user)??null),a(!1)});return se.auth.getSession().then(({data:{session:h}})=>{s(h),t((h==null?void 0:h.user)??null),a(!1)}),()=>u.unsubscribe()},[]);const l={user:e,session:r,loading:i,signOut:async()=>{try{await se.auth.signOut(),t(null),s(null)}catch(u){console.error("Error signing out:",u)}}};return c.jsx(F2.Provider,{value:l,children:n})},$i=()=>{const{user:n,signOut:e}=gv(),[t,r]=_.useState(!1);_.useEffect(()=>{n&&s()},[n,s]);const s=_.useCallback(async()=>{try{const{data:a}=await se.from("profiles").select("role").eq("user_id",n==null?void 0:n.id).single();r((a==null?void 0:a.role)==="admin")}catch(a){console.error("Error checking admin role:",a)}},[n==null?void 0:n.id]),i=async()=>{await e(),window.location.href="/"};return c.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-card-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:c.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[c.jsxs(ws,{to:"/",className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-medical rounded-medical flex items-center justify-center",children:c.jsx(eA,{className:"w-6 h-6 text-primary-foreground"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-card-foreground",children:"ResidentTrack"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"FMH Medical Training"})]})]}),c.jsx("nav",{className:"hidden md:flex items-center gap-6",children:n?c.jsxs(c.Fragment,{children:[c.jsx(ws,{to:"/fmh",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"FMH Tracking"}),c.jsx(ws,{to:"/dashboard",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Dashboard"}),c.jsx(ws,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),t&&c.jsxs(ws,{to:"/admin",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors flex items-center gap-1",children:[c.jsx(ew,{className:"h-4 w-4"}),"Admin"]})]}):c.jsxs(c.Fragment,{children:[c.jsx("a",{href:"#features",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Features"}),c.jsx(ws,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),c.jsx("a",{href:"#contact",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Kontakt"})]})}),c.jsx("div",{className:"flex items-center gap-3",children:n?c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Willkommen zurück!"}),c.jsxs(J,{variant:"ghost",size:"sm",onClick:i,children:[c.jsx(v5,{className:"h-4 w-4 mr-2"}),"Abmelden"]})]}):c.jsxs(c.Fragment,{children:[c.jsx(ws,{to:"/auth",children:c.jsx(J,{variant:"ghost",size:"sm",className:"hidden md:inline-flex",children:"Anmelden"})}),c.jsx(ws,{to:"/auth",children:c.jsx(J,{variant:"medical",size:"sm",children:"Kostenlos testen"})})]})})]})})},ae=_.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ae.displayName="Card";const pt=_.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("flex flex-col space-y-1.5 p-6",n),...e}));pt.displayName="CardHeader";const wt=_.forwardRef(({className:n,...e},t)=>c.jsx("h3",{ref:t,className:ee("text-2xl font-semibold leading-none tracking-tight",n),...e}));wt.displayName="CardTitle";const Kp=_.forwardRef(({className:n,...e},t)=>c.jsx("p",{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));Kp.displayName="CardDescription";const ze=_.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("p-6 pt-0",n),...e}));ze.displayName="CardContent";const $2=_.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("flex items-center p-6 pt-0",n),...e}));$2.displayName="CardFooter";const AH=dv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function me({className:n,variant:e,...t}){return c.jsx("div",{className:ee(AH({variant:e}),n),...t})}const x_=({progress:n,label:e,showPercentage:t=!0,variant:r="default",className:s})=>{const i=Math.min(Math.max(n,0),100),a=u=>u>=80?"bg-progress-complete":u>=50?"bg-progress-partial":"bg-progress-pending",l=(()=>{switch(r){case"medical":return{container:"h-3 bg-swiss-gray rounded-full overflow-hidden shadow-progress",bar:"h-full transition-progress rounded-full bg-gradient-progress"};case"compact":return{container:"h-2 bg-swiss-gray rounded-full overflow-hidden",bar:"h-full transition-progress rounded-full"};default:return{container:"h-4 bg-swiss-gray rounded-full overflow-hidden shadow-card",bar:"h-full transition-progress rounded-full"}}})();return c.jsxs("div",{className:ee("w-full",s),children:[(e||t)&&c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e&&c.jsx("span",{className:"text-sm font-medium text-card-foreground",children:e}),t&&c.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[i,"%"]})]}),c.jsx("div",{className:l.container,children:c.jsx("div",{className:ee(l.bar,a(i)),style:{width:`${i}%`}})})]})},CH=({progress:n,size:e=120,strokeWidth:t=8,label:r,showPercentage:s=!0,variant:i="default",className:a})=>{const o=Math.min(Math.max(n,0),100),l=(e-t)/2,u=l*2*Math.PI,h=u-o/100*u,f=y=>y>=80?"stroke-progress-complete":y>=50?"stroke-progress-partial":"stroke-progress-pending",m=(()=>{switch(i){case"medical":return{size:140,strokeWidth:10};case"large":return{size:160,strokeWidth:12};default:return{size:e,strokeWidth:t}}})();return c.jsxs("div",{className:ee("flex flex-col items-center",a),children:[c.jsxs("div",{className:"relative",children:[c.jsxs("svg",{width:m.size,height:m.size,className:"progress-ring",children:[c.jsx("circle",{cx:m.size/2,cy:m.size/2,r:l,stroke:"hsl(var(--swiss-gray))",strokeWidth:m.strokeWidth,fill:"transparent"}),c.jsx("circle",{cx:m.size/2,cy:m.size/2,r:l,stroke:"url(#progressGradient)",strokeWidth:m.strokeWidth,fill:"transparent",strokeDasharray:`${u} ${u}`,strokeDashoffset:h,strokeLinecap:"round",className:ee("transition-progress",f(o))}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"hsl(var(--progress-complete))"}}),c.jsx("stop",{offset:"100%",style:{stopColor:"hsl(var(--medical-primary))"}})]})})]}),s&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-xl font-bold text-card-foreground",children:[Math.round(o),"%"]})})]}),r&&c.jsx("span",{className:"mt-2 text-sm font-medium text-center text-muted-foreground",children:r})]})},oy=[{level:1,title:"PGY1 - Foundation",procedures:45,required:60,courses:3,cmePoints:25},{level:2,title:"PGY2 - Core Skills",procedures:85,required:120,courses:5,cmePoints:40},{level:3,title:"PGY3 - Specialization",procedures:140,required:180,courses:4,cmePoints:35},{level:4,title:"PGY4 - Advanced",procedures:200,required:250,courses:6,cmePoints:50},{level:5,title:"PGY5 - Expert",procedures:180,required:200,courses:3,cmePoints:30},{level:6,title:"PGY6 - Senior",procedures:95,required:100,courses:2,cmePoints:20}],B2=()=>{var f;const[n,e]=_.useState(null),[t,r]=_.useState(0),[s,i]=_.useState(!1);_.useEffect(()=>{if(s){const p=setInterval(()=>{r(m=>m>=100?(i(!1),100):m+2)},50);return()=>clearInterval(p)}},[s]);const a=()=>{r(0),i(!0),e(null)},o=()=>{r(0),i(!1),e(null)},l=()=>{const p=oy.reduce((y,g)=>y+Math.min(g.procedures,g.required),0),m=oy.reduce((y,g)=>y+g.required,0);return Math.round(p/m*100)},u=p=>Math.round(p.procedures/p.required*100),h=p=>p>=90?"default":p>=70?"secondary":"outline";return c.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[c.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[c.jsxs(J,{onClick:a,variant:"default",size:"lg",className:"gap-2",disabled:s,children:[c.jsx(FR,{className:"w-4 h-4"}),s?"Demo läuft...":"Demo starten"]}),c.jsxs(J,{onClick:o,variant:"outline",size:"lg",className:"gap-2",children:[c.jsx(y5,{className:"w-4 h-4"}),"Zurücksetzen"]})]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h3",{className:"text-2xl font-bold mb-4 text-card-foreground",children:"FMH Ausbildungsfortschritt - Gesamtübersicht"}),c.jsx("div",{className:"flex justify-center",children:c.jsx(CH,{progress:s?Math.min(t,l()):l(),variant:"large",label:"Gesamtfortschritt",className:"mb-6"})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:oy.map((p,m)=>{const y=u(p),g=s?Math.min(t*.8+m*5,y):y;return c.jsxs(ae,{className:`medical-card p-6 cursor-pointer transition-all duration-300 ${n===p.level?"ring-2 ring-primary shadow-card-hover scale-105":"hover:shadow-card"}`,onClick:()=>e(n===p.level?null:p.level),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs(me,{variant:h(y),className:"text-sm font-semibold",children:["PGY",p.level]}),c.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(g),"%"]})]}),c.jsx("h4",{className:"font-semibold text-card-foreground mb-3",children:p.title}),c.jsx(x_,{progress:g,variant:"medical",className:"mb-4"}),c.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Prozeduren:"}),c.jsxs("span",{className:"font-medium",children:[p.procedures,"/",p.required]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Kurse:"}),c.jsx("span",{className:"font-medium",children:p.courses})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"CME Punkte:"}),c.jsx("span",{className:"font-medium",children:p.cmePoints})]})]})]},p.level)})}),n&&c.jsx(ae,{className:"medical-card p-6 hero-gradient",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("h4",{className:"text-xl font-bold mb-4 text-card-foreground",children:[(f=oy.find(p=>p.level===n))==null?void 0:f.title," - Detailansicht"]}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Hier würden detaillierte Informationen zu spezifischen Prozeduren, absolvierten Kursen und fehlenden Anforderungen angezeigt."}),c.jsxs("div",{className:"flex justify-center gap-4",children:[c.jsx(J,{variant:"default",size:"sm",children:"Prozeduren anzeigen"}),c.jsx(J,{variant:"secondary",size:"sm",children:"Passende Kurse finden"})]})]})})]})},NH=[{icon:Vp,title:"FMH-konforme Dokumentation",description:"Vollständige Prozeduren-Tracking nach FMH-Standards"},{icon:hv,title:"Europaweite Kurssuche",description:"Zugang zu Kursen in CH, DE, AT, FR, IT und mehr"},{icon:Xa,title:"Digitales Logbuch",description:"Automatische Portfolio-Erstellung und PDF-Export"},{icon:Wd,title:"Zertifikat-Management",description:"CME-Punkte tracking und Zertifikat-Verwaltung"}],kH=()=>c.jsxs("section",{className:"relative overflow-hidden",children:[c.jsx("div",{className:"hero-gradient",children:c.jsx("div",{className:"container mx-auto px-4 py-20",children:c.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-16",children:[c.jsx(me,{variant:"secondary",className:"mb-6 text-sm px-4 py-2",children:"🇨🇭 FMH-konforme Ausbildung für die Schweiz & Europa"}),c.jsxs("h1",{className:"text-medical-title text-card-foreground mb-6",children:["Ihre chirurgische Ausbildung",c.jsx("span",{className:"bg-gradient-medical bg-clip-text text-transparent",children:" digital verwalten"})]}),c.jsx("p",{className:"text-medical-subtitle mb-8 max-w-2xl mx-auto",children:"ResidentTrack ist die führende Plattform für Assistenzärzt:innen zur FMH-konformen Dokumentation ihres Ausbildungsfortschritts und zur europäischen Kurssuche."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[c.jsxs(J,{variant:"default",size:"lg",className:"gap-2 shadow-card-hover",children:["Als Resident starten",c.jsx(l5,{className:"w-5 h-5"})]}),c.jsxs(J,{variant:"secondary",size:"lg",className:"gap-2",children:[c.jsx(Xa,{className:"w-5 h-5"}),"Demo ansehen"]}),c.jsx(J,{variant:"outline",size:"lg",children:"Kurs anbieten"})]}),c.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vp,{className:"w-4 h-4 text-activity-mint"}),c.jsx("span",{children:"FMH optimiert"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vp,{className:"w-4 h-4 text-activity-mint"}),c.jsx("span",{children:"DSGVO-konform"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Vp,{className:"w-4 h-4 text-activity-mint"}),c.jsx("span",{children:"500+ Residents"})]})]})]})})}),c.jsx("div",{className:"bg-background",children:c.jsxs("div",{className:"container mx-auto px-4 py-16",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(me,{variant:"outline",className:"mb-4",children:"Live Demo"}),c.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Fortschritt in Echtzeit verfolgen"}),c.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Erleben Sie selbst, wie ResidentTrack Ihren Ausbildungsfortschritt von PGY1 bis PGY6 visualisiert und Ihre FMH-Anforderungen überwacht."})]}),c.jsx(B2,{})]})}),c.jsx("div",{className:"bg-muted/30",children:c.jsx("div",{className:"container mx-auto px-4 py-16",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:NH.map((n,e)=>c.jsxs(ae,{className:"medical-card p-6 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-primary rounded-medical flex items-center justify-center mx-auto mb-4",children:c.jsx(n.icon,{className:"w-6 h-6 text-primary-foreground"})}),c.jsx("h3",{className:"font-semibold text-card-foreground mb-2",children:n.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]},e))})})})]}),jH=()=>(console.log("Index: Rendering main content - NO AUTH DEPENDENCIES"),c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsxs("main",{children:[c.jsx(kH,{}),c.jsx(B2,{})]})]})),vv=({progress:n,size:e=80,strokeWidth:t=6,color:r,backgroundColor:s="hsl(var(--swiss-gray))",label:i,showPercentage:a=!1,className:o,onClick:l,variant:u="mint"})=>{const h=Math.min(Math.max(n,0),100),f=(e-t)/2,p=f*2*Math.PI,m=p-h/100*p,y=()=>{if(r)return r;switch(u){case"mint":return"hsl(var(--activity-mint))";case"coral":return"hsl(var(--activity-coral))";case"lavender":return"hsl(var(--activity-lavender))";case"amber":return"hsl(var(--activity-amber))";default:return"hsl(var(--activity-mint))"}};return c.jsxs("div",{className:ee("flex flex-col items-center cursor-pointer transition-transform hover:scale-105",o),onClick:l,children:[c.jsxs("div",{className:"relative",children:[c.jsxs("svg",{width:e,height:e,className:"progress-ring -rotate-90",children:[c.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:s,strokeWidth:t,fill:"transparent",opacity:.2}),c.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:y(),strokeWidth:t,fill:"transparent",strokeDasharray:`${p} ${p}`,strokeDashoffset:m,strokeLinecap:"round",className:"transition-all duration-1000 ease-out",style:{transformOrigin:"center"}})]}),a&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-sm font-bold text-card-foreground",children:[Math.round(h),"%"]})})]}),i&&c.jsx("span",{className:"mt-1 text-xs font-medium text-center text-muted-foreground max-w-20",children:i})]})};var PH=sE[" useId ".trim().toString()]||(()=>{}),TH=0;function Vn(n){const[e,t]=_.useState(PH());return Tt(()=>{n||t(r=>r??String(TH++))},[n]),n||(e?`radix-${e}`:"")}var RH=_.createContext(void 0);function uw(n){const e=_.useContext(RH);return n||e||"ltr"}var Ab="rovingFocusGroup.onEntryFocus",MH={bubbles:!1,cancelable:!0},yv="RovingFocusGroup",[w_,z2,IH]=KE(yv),[DH,U2]=Ks(yv,[IH]),[OH,LH]=DH(yv),H2=_.forwardRef((n,e)=>c.jsx(w_.Provider,{scope:n.__scopeRovingFocusGroup,children:c.jsx(w_.Slot,{scope:n.__scopeRovingFocusGroup,children:c.jsx(FH,{...n,ref:e})})}));H2.displayName=yv;var FH=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=n,p=_.useRef(null),m=He(e,p),y=uw(i),[g,w]=Mu({prop:a,defaultProp:o??null,onChange:l,caller:yv}),[v,x]=_.useState(!1),b=Lt(u),E=z2(t),A=_.useRef(!1),[C,N]=_.useState(0);return _.useEffect(()=>{const P=p.current;if(P)return P.addEventListener(Ab,b),()=>P.removeEventListener(Ab,b)},[b]),c.jsx(OH,{scope:t,orientation:r,dir:y,loop:s,currentTabStopId:g,onItemFocus:_.useCallback(P=>w(P),[w]),onItemShiftTab:_.useCallback(()=>x(!0),[]),onFocusableItemAdd:_.useCallback(()=>N(P=>P+1),[]),onFocusableItemRemove:_.useCallback(()=>N(P=>P-1),[]),children:c.jsx(oe.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:de(n.onMouseDown,()=>{A.current=!0}),onFocus:de(n.onFocus,P=>{const T=!A.current;if(P.target===P.currentTarget&&T&&!v){const M=new CustomEvent(Ab,MH);if(P.currentTarget.dispatchEvent(M),!M.defaultPrevented){const I=E().filter(B=>B.focusable),R=I.find(B=>B.active),F=I.find(B=>B.id===g),V=[R,F,...I].filter(Boolean).map(B=>B.ref.current);G2(V,h)}}A.current=!1}),onBlur:de(n.onBlur,()=>x(!1))})})}),W2="RovingFocusGroupItem",V2=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...o}=n,l=Vn(),u=i||l,h=LH(W2,t),f=h.currentTabStopId===u,p=z2(t),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=h;return _.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),c.jsx(w_.ItemSlot,{scope:t,id:u,focusable:r,active:s,children:c.jsx(oe.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:de(n.onMouseDown,w=>{r?h.onItemFocus(u):w.preventDefault()}),onFocus:de(n.onFocus,()=>h.onItemFocus(u)),onKeyDown:de(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=zH(w,h.orientation,h.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=p().filter(E=>E.focusable).map(E=>E.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const E=b.indexOf(w.currentTarget);b=h.loop?UH(b,E+1):b.slice(E+1)}setTimeout(()=>G2(b))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:g!=null}):a})})});V2.displayName=W2;var $H={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BH(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function zH(n,e,t){const r=BH(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return $H[r]}function G2(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function UH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var HH=H2,WH=V2,dw="Tabs",[VH,aQ]=Ks(dw,[U2]),q2=U2(),[GH,gA]=VH(dw),Y2=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:l="automatic",...u}=n,h=uw(o),[f,p]=Mu({prop:r,onChange:s,defaultProp:i??"",caller:dw});return c.jsx(GH,{scope:t,baseId:Vn(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:l,children:c.jsx(oe.div,{dir:h,"data-orientation":a,...u,ref:e})})});Y2.displayName=dw;var K2="TabsList",X2=_.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,i=gA(K2,t),a=q2(t);return c.jsx(HH,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:c.jsx(oe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});X2.displayName=K2;var Q2="TabsTrigger",J2=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...i}=n,a=gA(Q2,t),o=q2(t),l=tM(a.baseId,r),u=nM(a.baseId,r),h=r===a.value;return c.jsx(WH,{asChild:!0,...o,focusable:!s,active:h,children:c.jsx(oe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:de(n.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:de(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:de(n.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});J2.displayName=Q2;var Z2="TabsContent",eM=_.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:i,...a}=n,o=gA(Z2,t),l=tM(o.baseId,r),u=nM(o.baseId,r),h=r===o.value,f=_.useRef(h);return _.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),c.jsx(ls,{present:s||h,children:({present:p})=>c.jsx(oe.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});eM.displayName=Z2;function tM(n,e){return`${n}-trigger-${e}`}function nM(n,e){return`${n}-content-${e}`}var qH=Y2,rM=X2,sM=J2,iM=eM;const no=qH,Gi=_.forwardRef(({className:n,...e},t)=>c.jsx(rM,{ref:t,className:ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));Gi.displayName=rM.displayName;const mt=_.forwardRef(({className:n,...e},t)=>c.jsx(sM,{ref:t,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));mt.displayName=sM.displayName;const Ct=_.forwardRef(({className:n,...e},t)=>c.jsx(iM,{ref:t,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Ct.displayName=iM.displayName;const YH=({activityId:n,data:e,onClose:t})=>{const s=(p=>{const m={courses:{title:"Kurse & Fortbildungen",icon:Xa,variant:"coral",color:"hsl(var(--activity-coral))"},mandatory:{title:"Pflichtkurse",icon:Xa,variant:"lavender",color:"hsl(var(--activity-lavender))"},procedures:{title:"OP-Prozeduren",icon:pm,variant:"mint",color:"hsl(var(--activity-mint))"},publications:{title:"Publikationen",icon:Lf,variant:"lavender",color:"hsl(var(--activity-lavender))"},awards:{title:"Awards & Auszeichnungen",icon:Wd,variant:"amber",color:"hsl(var(--activity-amber))"}};return m[p]||m.courses})(n),i=s.icon,a=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["2021","2022","2023","2024"].map((p,m)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsx("span",{className:"font-medium",children:p}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(x_,{progress:Math.min((m+1)*25,100),variant:"compact",className:"w-24"}),c.jsxs(me,{variant:"outline",children:[(m+1)*7," Kurse"]})]})]},p))})]})]}),o=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Durchgeführt"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"FMH-Ziel"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[Math.round(e.completed/e.target*100),"%"]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Fortschritt"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),c.jsx("div",{className:"space-y-3",children:Object.entries(e.byYear||{}).map(([p,m])=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsx("span",{className:"font-medium",children:p}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(x_,{progress:Math.min(m/200*100,100),variant:"compact",className:"w-32"}),c.jsxs(me,{variant:"outline",children:[String(m)," Prozeduren"]})]})]},p))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Häufigste Prozeduren"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Laparoskopische Cholezystektomie",count:45},{name:"Appendektomie",count:38},{name:"Hernienreparatur",count:32},{name:"Endoskopie",count:28}].map(p=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-medical",children:[c.jsx("span",{className:"text-sm font-medium",children:p.name}),c.jsxs(me,{variant:"secondary",children:[p.count,"x"]})]},p.name))})]})]}),l=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Publikationen"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"4"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Peer-reviewed"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2.4"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø Impact Factor"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Publikationen"}),c.jsx("div",{className:"space-y-3",children:e.articles.map((p,m)=>c.jsxs("div",{className:"p-4 border border-card-border rounded-medical",children:[c.jsx("h5",{className:"font-medium text-card-foreground mb-2",children:p.title}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:p.journal}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(me,{variant:"outline",children:p.date}),p.doi&&c.jsx(J,{variant:"ghost",size:"sm",className:"text-xs",children:"DOI"})]})]})]},m))})]})]}),u=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Auszeichnungen"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"National"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"International"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Auszeichnungen"}),c.jsx("div",{className:"space-y-3",children:e.items.map((p,m)=>c.jsx("div",{className:"p-4 border border-card-border rounded-medical",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:p.icon}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h5",{className:"font-medium text-card-foreground",children:p.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:p.organization})]}),c.jsx(me,{variant:"outline",children:p.date})]})},m))})]})]}),h=()=>{switch(n){case"courses":case"mandatory":return a();case"procedures":return o();case"publications":return l();case"awards":return u();default:return a()}},f=n==="procedures"||n==="courses"||n==="mandatory"?e.completed/e.target*100:Math.min(e.count/5*100,100);return c.jsxs(ae,{className:"medical-card p-6 mb-8 animate-fade-in",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 rounded-medical",style:{backgroundColor:`${s.color}20`},children:c.jsx(i,{className:"w-6 h-6",style:{color:s.color}})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-card-foreground",children:s.title}),c.jsx("p",{className:"text-muted-foreground",children:"Detailierte Ansicht und Jahresverlauf"})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(vv,{progress:f,variant:s.variant,size:80,strokeWidth:6,showPercentage:!0}),c.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:c.jsx(zl,{className:"w-4 h-4"})})]})]}),c.jsxs(no,{defaultValue:"overview",className:"w-full",children:[c.jsxs(Gi,{className:"grid w-full grid-cols-3",children:[c.jsx(mt,{value:"overview",children:"Übersicht"}),c.jsx(mt,{value:"yearly",children:"Jahresverlauf"}),c.jsx(mt,{value:"trends",children:"Trends"})]}),c.jsx(Ct,{value:"overview",className:"mt-6",children:h()}),c.jsx(Ct,{value:"yearly",className:"mt-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(Fi,{className:"w-4 h-4"}),c.jsx("span",{children:"Fortschrittsverlauf nach Jahren"})]}),h()]})}),c.jsx(Ct,{value:"trends",className:"mt-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(zR,{className:"w-4 h-4"}),c.jsx("span",{children:"Analyse und Prognosen"})]}),c.jsxs(ae,{className:"p-6",children:[c.jsx("h4",{className:"font-semibold text-card-foreground mb-4",children:"Trend-Analyse"}),c.jsx("p",{className:"text-muted-foreground",children:"Basierend auf Ihrem aktuellen Fortschritt werden Sie Ihr FMH-Ziel voraussichtlich in 18 Monaten erreichen. Ihr Lernfortschritt ist konstant und liegt über dem Durchschnitt."})]})]})})]})]})},Tn={courses:{completed:28,target:35,points:142},mandatoryCourses:{completed:8,target:12,points:64},procedures:{completed:485,target:600,byYear:{2021:45,2022:120,2023:180,2024:140}},publications:{count:6,articles:[{title:"Minimally Invasive Cardiac Surgery",journal:"Heart Surgery Today",date:"2024-03-15"},{title:"Patient Outcomes in Emergency Medicine",journal:"Emergency Care Journal",date:"2023-11-20"}]},awards:{count:3,items:[{title:"Young Surgeon Award",organization:"Swiss Medical Society",date:"2024-01-15",icon:"🏆"},{title:"Research Excellence",organization:"University Hospital",date:"2023-09-10",icon:"🎖️"}]}},KH=()=>{var a;const[n,e]=_.useState(null),[t,r]=_.useState(0);_.useEffect(()=>{const o=setTimeout(()=>{r(100)},300);return()=>clearTimeout(o)},[]);const i=[{id:"courses",label:"Kurse",progress:Tn.courses.completed/Tn.courses.target*100,variant:"coral",icon:Xa,data:Tn.courses},{id:"mandatory",label:"Pflichtkurse",progress:Tn.mandatoryCourses.completed/Tn.mandatoryCourses.target*100,variant:"lavender",icon:eA,data:Tn.mandatoryCourses},{id:"procedures",label:"Prozeduren",progress:Tn.procedures.completed/Tn.procedures.target*100,variant:"mint",icon:pm,data:Tn.procedures},{id:"publications",label:"Publikationen",progress:Math.min(Tn.publications.count/5*100,100),variant:"lavender",icon:Lf,data:Tn.publications},{id:"awards",label:"Awards",progress:Math.min(Tn.awards.count/3*100,100),variant:"amber",icon:GN,data:Tn.awards}];return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsxs("main",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Ihr Ausbildungsdashboard"}),c.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihren FMH-konformen Fortschritt in Echtzeit"})]}),c.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[c.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(nA,{className:"w-4 h-4"}),"Profil teilen"]}),c.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(Fi,{className:"w-4 h-4"}),"Kurse suchen"]}),c.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(ew,{className:"w-4 h-4"}),"Einstellungen"]})]})]}),c.jsxs(ae,{className:"medical-card p-8 mb-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-4",children:"Ihr Aktivitätsfortschritt"}),c.jsx("p",{className:"text-muted-foreground",children:"Apple Activity-inspirierte Darstellung Ihrer medizinischen Ausbildung"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:i.map(o=>{const l=t>0?Math.min(t*(o.progress/100),o.progress):o.progress;return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(vv,{progress:l,variant:o.variant,size:120,strokeWidth:8,label:o.label,showPercentage:!0,onClick:()=>e(o.id),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[c.jsx(o.icon,{className:"w-4 h-4 text-muted-foreground"}),c.jsx(me,{variant:"outline",className:"text-xs",children:o.id==="procedures"?`${o.data.completed}/${o.data.target}`:o.id==="courses"||o.id==="mandatory"?`${o.data.completed}/${o.data.target}`:`${o.data.count||o.data.completed||0}`})]})})]},o.id)})})]}),n&&c.jsx(YH,{activityId:n,data:(a=i.find(o=>o.id===n))==null?void 0:a.data,onClose:()=>e(null)}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:c.jsx(pm,{className:"w-6 h-6 text-activity-mint"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktuelle PGY"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"PGY-4"})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:c.jsx(Xa,{className:"w-6 h-6 text-activity-coral"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte gesamt"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"206"})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:c.jsx(GN,{className:"w-6 h-6 text-activity-amber"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Bis FMH-Ziel"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"24 Mon."})]})]})})]}),c.jsxs(ae,{className:"medical-card p-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Letzte Aktivitäten"}),c.jsxs(no,{defaultValue:"procedures",className:"w-full",children:[c.jsxs(Gi,{className:"grid w-full grid-cols-4",children:[c.jsx(mt,{value:"procedures",children:"Prozeduren"}),c.jsx(mt,{value:"courses",children:"Kurse"}),c.jsx(mt,{value:"publications",children:"Publikationen"}),c.jsx(mt,{value:"awards",children:"Awards"})]}),c.jsx(Ct,{value:"procedures",className:"mt-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:"Laparoskopische Cholezystektomie"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"15. Januar 2024"})]}),c.jsx(me,{variant:"default",children:"Chirurgie"})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:"Appendektomie"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"12. Januar 2024"})]}),c.jsx(me,{variant:"default",children:"Chirurgie"})]})]})}),c.jsx(Ct,{value:"courses",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:"Advanced Laparoscopy Workshop"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"8 CME Punkte • Zürich"})]}),c.jsx(me,{variant:"secondary",children:"Abgeschlossen"})]})})}),c.jsx(Ct,{value:"publications",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:Tn.publications.articles.map((o,l)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:o.title}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.journal," • ",o.date]})]}),c.jsx(me,{variant:"outline",children:"Artikel"})]},l))})}),c.jsx(Ct,{value:"awards",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:Tn.awards.items.map((o,l)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:o.icon}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:o.title}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.organization," • ",o.date]})]})]}),c.jsx(me,{variant:"default",children:"Auszeichnung"})]},l))})})]})]})]})]})},XH=({profile:n,activityData:e,className:t})=>{const[r,s]=_.useState(null),i=()=>{const l=[];return n.public_fields.courses&&(l.push({id:"courses",label:"Kurse",progress:e.courses.total>0?e.courses.completed/e.courses.total*100:0,variant:"coral",icon:Xa}),l.push({id:"mandatory",label:"Pflicht",progress:e.courses.mandatory_total>0?e.courses.mandatory_completed/e.courses.mandatory_total*100:0,variant:"lavender",icon:Xa})),n.public_fields.procedures&&l.push({id:"procedures",label:"OPs",progress:e.procedures.required>0?e.procedures.completed/e.procedures.required*100:0,variant:"mint",icon:pm}),n.public_fields.publications&&l.push({id:"publications",label:"Papers",progress:Math.min(e.publications.count*20,100),variant:"amber",icon:Lf}),l},a=async()=>{navigator.share?await navigator.share({title:`${n.full_name} - Medizinisches Profil`,text:`Schauen Sie sich das medizinische Profil von ${n.full_name} an`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},o=i();return c.jsxs("div",{className:ee("max-w-4xl mx-auto space-y-6",t),children:[c.jsx(ae,{className:"overflow-hidden",children:c.jsx("div",{className:"bg-gradient-medical p-6 text-white",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[n.avatar_url&&c.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 overflow-hidden",children:c.jsx("img",{src:n.avatar_url,alt:n.full_name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-2xl font-bold mb-2",children:n.full_name}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm opacity-90",children:[n.pgy_level&&c.jsxs(me,{variant:"secondary",className:"bg-white/20 text-white border-white/20",children:["PGY-",n.pgy_level]}),n.specialty&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(pm,{className:"w-4 h-4"}),n.specialty]}),n.institution&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(MR,{className:"w-4 h-4"}),n.institution]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(J,{variant:"ghost",size:"sm",onClick:a,className:"text-white hover:bg-white/20",children:c.jsx(nA,{className:"w-4 h-4"})}),n.linkedin_url&&c.jsx(J,{variant:"ghost",size:"sm",asChild:!0,className:"text-white hover:bg-white/20",children:c.jsx("a",{href:n.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:c.jsx(HN,{className:"w-4 h-4"})})})]})]})})}),c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(Wd,{className:"w-5 h-5 text-medical-primary"}),"Fortschritt ",new Date().getFullYear()]})}),c.jsx(ze,{children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 justify-items-center",children:o.map(l=>c.jsx(vv,{progress:l.progress,variant:l.variant,label:l.label,showPercentage:!0,onClick:()=>s(r===l.id?null:l.id),className:r===l.id?"ring-2 ring-medical-primary rounded-lg p-2":""},l.id))})})]}),r&&c.jsx(ae,{children:c.jsxs(ze,{className:"pt-6",children:[r==="courses"&&n.public_fields.courses&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Absolvierte Kurse"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-activity-coral/10 border border-activity-coral/20",children:[c.jsx("div",{className:"text-2xl font-bold text-activity-coral",children:e.courses.completed}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.total," Kursen"]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-activity-lavender/10 border border-activity-lavender/20",children:[c.jsx("div",{className:"text-2xl font-bold text-activity-lavender",children:e.courses.mandatory_completed}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.mandatory_total," Pflichtkursen"]})]})]})]}),r==="procedures"&&n.public_fields.procedures&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chirurgische Eingriffe"}),c.jsxs("div",{className:"p-4 rounded-lg bg-activity-mint/10 border border-activity-mint/20",children:[c.jsx("div",{className:"text-2xl font-bold text-activity-mint",children:e.procedures.completed}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.procedures.required," erforderlichen Eingriffen"]})]})]}),r==="publications"&&n.public_fields.publications&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publikationen"}),c.jsx("div",{className:"space-y-3",children:e.publications.recent.map((l,u)=>c.jsxs("div",{className:"p-4 rounded-lg bg-activity-amber/10 border border-activity-amber/20",children:[c.jsx("h4",{className:"font-medium text-activity-amber",children:l.title}),c.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.journal&&c.jsx("span",{children:l.journal}),l.publication_date&&c.jsxs("span",{className:"ml-2",children:[c.jsx(Fi,{className:"w-3 h-3 inline mr-1"}),new Date(l.publication_date).toLocaleDateString("de-DE")]})]}),(l.doi||l.link)&&c.jsxs("div",{className:"mt-2",children:[l.link&&c.jsx(J,{variant:"ghost",size:"sm",asChild:!0,children:c.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(HN,{className:"w-3 h-3 mr-1"}),"Ansehen"]})}),l.doi&&c.jsx(J,{variant:"ghost",size:"sm",asChild:!0,children:c.jsxs("a",{href:`https://doi.org/${l.doi}`,target:"_blank",rel:"noopener noreferrer",children:["DOI: ",l.doi]})})]})]},u))})]})]})}),n.public_fields.awards&&e.awards.length>0&&c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(Wd,{className:"w-5 h-5 text-progress-complete"}),"Auszeichnungen"]})}),c.jsx(ze,{children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.awards.map((l,u)=>c.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-activity-amber/20 to-activity-coral/10 border border-activity-amber/30",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Wd,{className:"w-5 h-5 text-activity-amber mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium",children:l.title}),l.organization&&c.jsx("p",{className:"text-sm text-muted-foreground",children:l.organization}),l.awarded_date&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(l.awarded_date).toLocaleDateString("de-DE")})]})]})},u))})})]})]})},QH=()=>{const{handle:n}=d2(),[e,t]=_.useState(null),[r,s]=_.useState(null),[i,a]=_.useState(!0),[o,l]=_.useState(!1);return _.useEffect(()=>{(async()=>{if(!n){l(!0),a(!1);return}try{const{data:h,error:f}=await se.from("profiles").select("*").eq("handle",n).eq("is_public",!0).single();if(f||!h){l(!0),a(!1);return}t({...h,public_fields:h.public_fields||{courses:!0,awards:!0,publications:!0,procedures:!1}});const p=new Date().getFullYear(),{data:m}=await se.from("course_enrollments").select(`
            status,
            courses (
              is_mandatory
            )
          `).eq("user_id",h.user_id),y=(m==null?void 0:m.length)||0,g=(m==null?void 0:m.filter(N=>N.status==="completed").length)||0,w=(m==null?void 0:m.filter(N=>{var P;return(P=N.courses)==null?void 0:P.is_mandatory}).length)||0,v=(m==null?void 0:m.filter(N=>{var P;return N.status==="completed"&&((P=N.courses)==null?void 0:P.is_mandatory)}).length)||0,{data:x}=await se.from("procedure_logs").select("*").eq("user_id",h.user_id).gte("performed_date",`${p}-01-01`).lte("performed_date",`${p}-12-31`),{data:b}=await se.from("procedures").select("min_required_by_pgy").eq("active",!0);let E=0;b&&h.pgy_level&&b.forEach(N=>{var T;const P=(T=N.min_required_by_pgy)==null?void 0:T[h.pgy_level.toString()];P&&(E+=P)});const{data:A}=await se.from("publications").select("*").eq("user_id",h.user_id).order("publication_date",{ascending:!1}).limit(5),{data:C}=await se.from("awards").select("*").eq("user_id",h.user_id).order("awarded_date",{ascending:!1});s({courses:{completed:g,total:y,mandatory_completed:v,mandatory_total:w},procedures:{completed:(x==null?void 0:x.length)||0,required:E},publications:{count:(A==null?void 0:A.length)||0,recent:A||[]},awards:C||[]})}catch(h){console.error("Error fetching profile:",h),iR({title:"Fehler",description:"Profil konnte nicht geladen werden.",variant:"destructive"}),l(!0)}finally{a(!1)}})()},[n]),i?c.jsx("div",{className:"min-h-screen bg-background",children:c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsx("div",{className:"h-32 bg-muted rounded-lg"}),c.jsx("div",{className:"h-64 bg-muted rounded-lg"}),c.jsx("div",{className:"h-48 bg-muted rounded-lg"})]})})})}):o||!e||!r?c.jsx(qz,{to:"/404",replace:!0}):c.jsx("div",{className:"min-h-screen bg-background",children:c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsx(XH,{profile:e,activityData:r})})})},Ze=_.forwardRef(({className:n,type:e,...t},r)=>c.jsx("input",{type:e,className:ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Ze.displayName="Input";function b_(n,[e,t]){return Math.min(t,Math.max(e,n))}var Cb=0;function vA(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Pk()),document.body.insertAdjacentElement("beforeend",n[1]??Pk()),Cb++,()=>{Cb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Cb--}},[])}function Pk(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Nb="focusScope.autoFocusOnMount",kb="focusScope.autoFocusOnUnmount",Tk={bubbles:!1,cancelable:!0},JH="FocusScope",hw=_.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=n,[o,l]=_.useState(null),u=Lt(s),h=Lt(i),f=_.useRef(null),p=He(e,g=>l(g)),m=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let g=function(b){if(m.paused||!o)return;const E=b.target;o.contains(E)?f.current=E:mo(f.current,{select:!0})},w=function(b){if(m.paused||!o)return;const E=b.relatedTarget;E!==null&&(o.contains(E)||mo(f.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const A of b)A.removedNodes.length>0&&mo(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(v);return o&&x.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[r,o,m.paused]),_.useEffect(()=>{if(o){Mk.add(m);const g=document.activeElement;if(!o.contains(g)){const v=new CustomEvent(Nb,Tk);o.addEventListener(Nb,u),o.dispatchEvent(v),v.defaultPrevented||(ZH(s8(aM(o)),{select:!0}),document.activeElement===g&&mo(o))}return()=>{o.removeEventListener(Nb,u),setTimeout(()=>{const v=new CustomEvent(kb,Tk);o.addEventListener(kb,h),o.dispatchEvent(v),v.defaultPrevented||mo(g??document.body,{select:!0}),o.removeEventListener(kb,h),Mk.remove(m)},0)}}},[o,u,h,m]);const y=_.useCallback(g=>{if(!t&&!r||m.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const x=g.currentTarget,[b,E]=e8(x);b&&E?!g.shiftKey&&v===E?(g.preventDefault(),t&&mo(b,{select:!0})):g.shiftKey&&v===b&&(g.preventDefault(),t&&mo(E,{select:!0})):v===x&&g.preventDefault()}},[t,r,m.paused]);return c.jsx(oe.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});hw.displayName=JH;function ZH(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(mo(r,{select:e}),document.activeElement!==t)return}function e8(n){const e=aM(n),t=Rk(e,n),r=Rk(e.reverse(),n);return[t,r]}function aM(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Rk(n,e){for(const t of n)if(!t8(t,{upTo:e}))return t}function t8(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function n8(n){return n instanceof HTMLInputElement&&"select"in n}function mo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&n8(n)&&e&&n.select()}}var Mk=r8();function r8(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=Ik(n,e),n.unshift(e)},remove(e){var t;n=Ik(n,e),(t=n[0])==null||t.resume()}}}function Ik(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function s8(n){return n.filter(e=>e.tagName!=="A")}const i8=["top","right","bottom","left"],Pl=Math.min,Tr=Math.max,K0=Math.round,ly=Math.floor,Bi=n=>({x:n,y:n}),a8={left:"right",right:"left",bottom:"top",top:"bottom"},o8={start:"end",end:"start"};function __(n,e,t){return Tr(n,Pl(e,t))}function Qa(n,e){return typeof n=="function"?n(e):n}function Ja(n){return n.split("-")[0]}function Hf(n){return n.split("-")[1]}function yA(n){return n==="x"?"y":"x"}function xA(n){return n==="y"?"height":"width"}const l8=new Set(["top","bottom"]);function Ii(n){return l8.has(Ja(n))?"y":"x"}function wA(n){return yA(Ii(n))}function c8(n,e,t){t===void 0&&(t=!1);const r=Hf(n),s=wA(n),i=xA(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=X0(a)),[a,X0(a)]}function u8(n){const e=X0(n);return[S_(n),e,S_(e)]}function S_(n){return n.replace(/start|end/g,e=>o8[e])}const Dk=["left","right"],Ok=["right","left"],d8=["top","bottom"],h8=["bottom","top"];function f8(n,e,t){switch(n){case"top":case"bottom":return t?e?Ok:Dk:e?Dk:Ok;case"left":case"right":return e?d8:h8;default:return[]}}function p8(n,e,t,r){const s=Hf(n);let i=f8(Ja(n),t==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(S_)))),i}function X0(n){return n.replace(/left|right|bottom|top/g,e=>a8[e])}function m8(n){return{top:0,right:0,bottom:0,left:0,...n}}function oM(n){return typeof n!="number"?m8(n):{top:n,right:n,bottom:n,left:n}}function Q0(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function Lk(n,e,t){let{reference:r,floating:s}=n;const i=Ii(e),a=wA(e),o=xA(a),l=Ja(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[o]/2-s[o]/2;let m;switch(l){case"top":m={x:h,y:r.y-s.height};break;case"bottom":m={x:h,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(Hf(e)){case"start":m[a]-=p*(t&&u?-1:1);break;case"end":m[a]+=p*(t&&u?-1:1);break}return m}const g8=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=t,o=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:h,y:f}=Lk(u,r,l),p=r,m={},y=0;for(let g=0;g<o.length;g++){const{name:w,fn:v}=o[g],{x,y:b,data:E,reset:A}=await v({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:u,platform:a,elements:{reference:n,floating:e}});h=x??h,f=b??f,m={...m,[w]:{...m[w],...E}},A&&y<=50&&(y++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(u=A.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):A.rects),{x:h,y:f}=Lk(u,p,l)),g=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:m}};async function wm(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Qa(e,n),y=oM(m),w=o[p?f==="floating"?"reference":"floating":f],v=Q0(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:h,strategy:l})),x=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),E=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},A=Q0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:b,strategy:l}):x);return{top:(v.top-A.top+y.top)/E.y,bottom:(A.bottom-v.bottom+y.bottom)/E.y,left:(v.left-A.left+y.left)/E.x,right:(A.right-v.right+y.right)/E.x}}const v8=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:h=0}=Qa(n,e)||{};if(u==null)return{};const f=oM(h),p={x:t,y:r},m=wA(s),y=xA(m),g=await a.getDimensions(u),w=m==="y",v=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",E=i.reference[y]+i.reference[m]-p[m]-i.floating[y],A=p[m]-i.reference[m],C=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=C?C[b]:0;(!N||!await(a.isElement==null?void 0:a.isElement(C)))&&(N=o.floating[b]||i.floating[y]);const P=E/2-A/2,T=N/2-g[y]/2-1,M=Pl(f[v],T),I=Pl(f[x],T),R=M,F=N-g[y]-I,O=N/2-g[y]/2+P,V=__(R,O,F),B=!l.arrow&&Hf(s)!=null&&O!==V&&i.reference[y]/2-(O<R?M:I)-g[y]/2<0,L=B?O<R?O-R:O-F:0;return{[m]:p[m]+L,data:{[m]:V,centerOffset:O-V-L,...B&&{alignmentOffset:L}},reset:B}}}),y8=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...w}=Qa(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=Ja(s),x=Ii(o),b=Ja(o)===o,E=await(l.isRTL==null?void 0:l.isRTL(u.floating)),A=p||(b||!g?[X0(o)]:u8(o)),C=y!=="none";!p&&C&&A.push(...p8(o,g,y,E));const N=[o,...A],P=await wm(e,w),T=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(P[v]),f){const O=c8(s,a,E);T.push(P[O[0]],P[O[1]])}if(M=[...M,{placement:s,overflows:T}],!T.every(O=>O<=0)){var I,R;const O=(((I=i.flip)==null?void 0:I.index)||0)+1,V=N[O];if(V&&(!(f==="alignment"?x!==Ii(V):!1)||M.every(D=>D.overflows[0]>0&&Ii(D.placement)===x)))return{data:{index:O,overflows:M},reset:{placement:V}};let B=(R=M.filter(L=>L.overflows[0]<=0).sort((L,D)=>L.overflows[1]-D.overflows[1])[0])==null?void 0:R.placement;if(!B)switch(m){case"bestFit":{var F;const L=(F=M.filter(D=>{if(C){const z=Ii(D.placement);return z===x||z==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(z=>z>0).reduce((z,H)=>z+H,0)]).sort((D,z)=>D[1]-z[1])[0])==null?void 0:F[0];L&&(B=L);break}case"initialPlacement":B=o;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function Fk(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function $k(n){return i8.some(e=>n[e]>=0)}const x8=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Qa(n,e);switch(r){case"referenceHidden":{const i=await wm(e,{...s,elementContext:"reference"}),a=Fk(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:$k(a)}}}case"escaped":{const i=await wm(e,{...s,altBoundary:!0}),a=Fk(i,t.floating);return{data:{escapedOffsets:a,escaped:$k(a)}}}default:return{}}}}},lM=new Set(["left","top"]);async function w8(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Ja(t),o=Hf(t),l=Ii(t)==="y",u=lM.has(a)?-1:1,h=i&&l?-1:1,f=Qa(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),l?{x:m*h,y:p*u}:{x:p*u,y:m*h}}const b8=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:a,middlewareData:o}=e,l=await w8(e,n);return a===((t=o.offset)==null?void 0:t.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:a}}}}},_8=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...l}=Qa(n,e),u={x:t,y:r},h=await wm(e,l),f=Ii(Ja(s)),p=yA(f);let m=u[p],y=u[f];if(i){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",x=m+h[w],b=m-h[v];m=__(x,m,b)}if(a){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=y+h[w],b=y-h[v];y=__(x,y,b)}const g=o.fn({...e,[p]:m,[f]:y});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[p]:i,[f]:a}}}}}},S8=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=Qa(n,e),h={x:t,y:r},f=Ii(s),p=yA(f);let m=h[p],y=h[f];const g=Qa(o,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const b=p==="y"?"height":"width",E=i.reference[p]-i.floating[b]+w.mainAxis,A=i.reference[p]+i.reference[b]-w.mainAxis;m<E?m=E:m>A&&(m=A)}if(u){var v,x;const b=p==="y"?"width":"height",E=lM.has(Ja(s)),A=i.reference[f]-i.floating[b]+(E&&((v=a.offset)==null?void 0:v[f])||0)+(E?0:w.crossAxis),C=i.reference[f]+i.reference[b]+(E?0:((x=a.offset)==null?void 0:x[f])||0)-(E?w.crossAxis:0);y<A?y=A:y>C&&(y=C)}return{[p]:m,[f]:y}}}},E8=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:a,elements:o}=e,{apply:l=()=>{},...u}=Qa(n,e),h=await wm(e,u),f=Ja(s),p=Hf(s),m=Ii(s)==="y",{width:y,height:g}=i.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=f,w=p==="end"?"top":"bottom");const x=g-h.top-h.bottom,b=y-h.left-h.right,E=Pl(g-h[w],x),A=Pl(y-h[v],b),C=!e.middlewareData.shift;let N=E,P=A;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=x),C&&!p){const M=Tr(h.left,0),I=Tr(h.right,0),R=Tr(h.top,0),F=Tr(h.bottom,0);m?P=y-2*(M!==0||I!==0?M+I:Tr(h.left,h.right)):N=g-2*(R!==0||F!==0?R+F:Tr(h.top,h.bottom))}await l({...e,availableWidth:P,availableHeight:N});const T=await a.getDimensions(o.floating);return y!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function fw(){return typeof window<"u"}function Wf(n){return cM(n)?(n.nodeName||"").toLowerCase():"#document"}function Dr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function qi(n){var e;return(e=(cM(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function cM(n){return fw()?n instanceof Node||n instanceof Dr(n).Node:!1}function Ws(n){return fw()?n instanceof Element||n instanceof Dr(n).Element:!1}function Ui(n){return fw()?n instanceof HTMLElement||n instanceof Dr(n).HTMLElement:!1}function Bk(n){return!fw()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Dr(n).ShadowRoot}const A8=new Set(["inline","contents"]);function xv(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Vs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!A8.has(s)}const C8=new Set(["table","td","th"]);function N8(n){return C8.has(Wf(n))}const k8=[":popover-open",":modal"];function pw(n){return k8.some(e=>{try{return n.matches(e)}catch{return!1}})}const j8=["transform","translate","scale","rotate","perspective"],P8=["transform","translate","scale","rotate","perspective","filter"],T8=["paint","layout","strict","content"];function bA(n){const e=_A(),t=Ws(n)?Vs(n):n;return j8.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||P8.some(r=>(t.willChange||"").includes(r))||T8.some(r=>(t.contain||"").includes(r))}function R8(n){let e=Tl(n);for(;Ui(e)&&!Af(e);){if(bA(e))return e;if(pw(e))return null;e=Tl(e)}return null}function _A(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const M8=new Set(["html","body","#document"]);function Af(n){return M8.has(Wf(n))}function Vs(n){return Dr(n).getComputedStyle(n)}function mw(n){return Ws(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Tl(n){if(Wf(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Bk(n)&&n.host||qi(n);return Bk(e)?e.host:e}function uM(n){const e=Tl(n);return Af(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ui(e)&&xv(e)?e:uM(e)}function bm(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=uM(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),a=Dr(s);if(i){const o=E_(a);return e.concat(a,a.visualViewport||[],xv(s)?s:[],o&&t?bm(o):[])}return e.concat(s,bm(s,[],t))}function E_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function dM(n){const e=Vs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Ui(n),i=s?n.offsetWidth:t,a=s?n.offsetHeight:r,o=K0(t)!==i||K0(r)!==a;return o&&(t=i,r=a),{width:t,height:r,$:o}}function SA(n){return Ws(n)?n:n.contextElement}function qd(n){const e=SA(n);if(!Ui(e))return Bi(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=dM(e);let a=(i?K0(t.width):t.width)/r,o=(i?K0(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const I8=Bi(0);function hM(n){const e=Dr(n);return!_A()||!e.visualViewport?I8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function D8(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Dr(n)?!1:e}function Iu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=SA(n);let a=Bi(1);e&&(r?Ws(r)&&(a=qd(r)):a=qd(n));const o=D8(i,t,r)?hM(i):Bi(0);let l=(s.left+o.x)/a.x,u=(s.top+o.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=Dr(i),m=r&&Ws(r)?Dr(r):r;let y=p,g=E_(y);for(;g&&r&&m!==y;){const w=qd(g),v=g.getBoundingClientRect(),x=Vs(g),b=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*w.x,E=v.top+(g.clientTop+parseFloat(x.paddingTop))*w.y;l*=w.x,u*=w.y,h*=w.x,f*=w.y,l+=b,u+=E,y=Dr(g),g=E_(y)}}return Q0({width:h,height:f,x:l,y:u})}function EA(n,e){const t=mw(n).scrollLeft;return e?e.left+t:Iu(qi(n)).left+t}function fM(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:EA(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function O8(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",a=qi(r),o=e?pw(e.floating):!1;if(r===a||o&&i)return t;let l={scrollLeft:0,scrollTop:0},u=Bi(1);const h=Bi(0),f=Ui(r);if((f||!f&&!i)&&((Wf(r)!=="body"||xv(a))&&(l=mw(r)),Ui(r))){const m=Iu(r);u=qd(r),h.x=m.x+r.clientLeft,h.y=m.y+r.clientTop}const p=a&&!f&&!i?fM(a,l,!0):Bi(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+h.x+p.x,y:t.y*u.y-l.scrollTop*u.y+h.y+p.y}}function L8(n){return Array.from(n.getClientRects())}function F8(n){const e=qi(n),t=mw(n),r=n.ownerDocument.body,s=Tr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Tr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+EA(n);const o=-t.scrollTop;return Vs(r).direction==="rtl"&&(a+=Tr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}function $8(n,e){const t=Dr(n),r=qi(n),s=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;const u=_A();(!u||u&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:i,height:a,x:o,y:l}}const B8=new Set(["absolute","fixed"]);function z8(n,e){const t=Iu(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=Ui(n)?qd(n):Bi(1),a=n.clientWidth*i.x,o=n.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:a,height:o,x:l,y:u}}function zk(n,e,t){let r;if(e==="viewport")r=$8(n,t);else if(e==="document")r=F8(qi(n));else if(Ws(e))r=z8(e,t);else{const s=hM(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Q0(r)}function pM(n,e){const t=Tl(n);return t===e||!Ws(t)||Af(t)?!1:Vs(t).position==="fixed"||pM(t,e)}function U8(n,e){const t=e.get(n);if(t)return t;let r=bm(n,[],!1).filter(o=>Ws(o)&&Wf(o)!=="body"),s=null;const i=Vs(n).position==="fixed";let a=i?Tl(n):n;for(;Ws(a)&&!Af(a);){const o=Vs(a),l=bA(a);!l&&o.position==="fixed"&&(s=null),(i?!l&&!s:!l&&o.position==="static"&&!!s&&B8.has(s.position)||xv(a)&&!l&&pM(n,a))?r=r.filter(h=>h!==a):s=o,a=Tl(a)}return e.set(n,r),r}function H8(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?pw(e)?[]:U8(e,this._c):[].concat(t),r],o=a[0],l=a.reduce((u,h)=>{const f=zk(e,h,s);return u.top=Tr(f.top,u.top),u.right=Pl(f.right,u.right),u.bottom=Pl(f.bottom,u.bottom),u.left=Tr(f.left,u.left),u},zk(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function W8(n){const{width:e,height:t}=dM(n);return{width:e,height:t}}function V8(n,e,t){const r=Ui(e),s=qi(e),i=t==="fixed",a=Iu(n,!0,i,e);let o={scrollLeft:0,scrollTop:0};const l=Bi(0);function u(){l.x=EA(s)}if(r||!r&&!i)if((Wf(e)!=="body"||xv(s))&&(o=mw(e)),r){const m=Iu(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&u();i&&!r&&s&&u();const h=s&&!r&&!i?fM(s,o):Bi(0),f=a.left+o.scrollLeft-l.x-h.x,p=a.top+o.scrollTop-l.y-h.y;return{x:f,y:p,width:a.width,height:a.height}}function jb(n){return Vs(n).position==="static"}function Uk(n,e){if(!Ui(n)||Vs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return qi(n)===t&&(t=t.ownerDocument.body),t}function mM(n,e){const t=Dr(n);if(pw(n))return t;if(!Ui(n)){let s=Tl(n);for(;s&&!Af(s);){if(Ws(s)&&!jb(s))return s;s=Tl(s)}return t}let r=Uk(n,e);for(;r&&N8(r)&&jb(r);)r=Uk(r,e);return r&&Af(r)&&jb(r)&&!bA(r)?t:r||R8(n)||t}const G8=async function(n){const e=this.getOffsetParent||mM,t=this.getDimensions,r=await t(n.floating);return{reference:V8(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function q8(n){return Vs(n).direction==="rtl"}const Y8={convertOffsetParentRelativeRectToViewportRelativeRect:O8,getDocumentElement:qi,getClippingRect:H8,getOffsetParent:mM,getElementRects:G8,getClientRects:L8,getDimensions:W8,getScale:qd,isElement:Ws,isRTL:q8};function gM(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function K8(n,e){let t=null,r;const s=qi(n);function i(){var o;clearTimeout(r),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=n.getBoundingClientRect(),{left:h,top:f,width:p,height:m}=u;if(o||e(),!p||!m)return;const y=ly(f),g=ly(s.clientWidth-(h+p)),w=ly(s.clientHeight-(f+m)),v=ly(h),b={rootMargin:-y+"px "+-g+"px "+-w+"px "+-v+"px",threshold:Tr(0,Pl(1,l))||1};let E=!0;function A(C){const N=C[0].intersectionRatio;if(N!==l){if(!E)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!gM(u,n.getBoundingClientRect())&&a(),E=!1}try{t=new IntersectionObserver(A,{...b,root:s.ownerDocument})}catch{t=new IntersectionObserver(A,b)}t.observe(n)}return a(!0),i}function X8(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=SA(n),h=s||i?[...u?bm(u):[],...bm(e)]:[];h.forEach(v=>{s&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const f=u&&o?K8(u,t):null;let p=-1,m=null;a&&(m=new ResizeObserver(v=>{let[x]=v;x&&x.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),t()}),u&&!l&&m.observe(u),m.observe(e));let y,g=l?Iu(n):null;l&&w();function w(){const v=Iu(n);g&&!gM(g,v)&&t(),g=v,y=requestAnimationFrame(w)}return t(),()=>{var v;h.forEach(x=>{s&&x.removeEventListener("scroll",t),i&&x.removeEventListener("resize",t)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const Q8=b8,J8=_8,Z8=y8,eW=E8,tW=x8,Hk=v8,nW=S8,rW=(n,e,t)=>{const r=new Map,s={platform:Y8,...t},i={...s.platform,_c:r};return g8(n,e,{...s,platform:i})};var sW=typeof document<"u",iW=function(){},Dy=sW?_.useLayoutEffect:iW;function J0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!J0(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!J0(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function vM(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function Wk(n,e){const t=vM(n);return Math.round(e*t)/t}function Pb(n){const e=_.useRef(n);return Dy(()=>{e.current=n}),e}function aW(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=n,[h,f]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=_.useState(r);J0(p,r)||m(r);const[y,g]=_.useState(null),[w,v]=_.useState(null),x=_.useCallback(D=>{D!==C.current&&(C.current=D,g(D))},[]),b=_.useCallback(D=>{D!==N.current&&(N.current=D,v(D))},[]),E=i||y,A=a||w,C=_.useRef(null),N=_.useRef(null),P=_.useRef(h),T=l!=null,M=Pb(l),I=Pb(s),R=Pb(u),F=_.useCallback(()=>{if(!C.current||!N.current)return;const D={placement:e,strategy:t,middleware:p};I.current&&(D.platform=I.current),rW(C.current,N.current,D).then(z=>{const H={...z,isPositioned:R.current!==!1};O.current&&!J0(P.current,H)&&(P.current=H,Vu.flushSync(()=>{f(H)}))})},[p,e,t,I,R]);Dy(()=>{u===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[u]);const O=_.useRef(!1);Dy(()=>(O.current=!0,()=>{O.current=!1}),[]),Dy(()=>{if(E&&(C.current=E),A&&(N.current=A),E&&A){if(M.current)return M.current(E,A,F);F()}},[E,A,F,M,T]);const V=_.useMemo(()=>({reference:C,floating:N,setReference:x,setFloating:b}),[x,b]),B=_.useMemo(()=>({reference:E,floating:A}),[E,A]),L=_.useMemo(()=>{const D={position:t,left:0,top:0};if(!B.floating)return D;const z=Wk(B.floating,h.x),H=Wk(B.floating,h.y);return o?{...D,transform:"translate("+z+"px, "+H+"px)",...vM(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:z,top:H}},[t,o,B.floating,h.x,h.y]);return _.useMemo(()=>({...h,update:F,refs:V,elements:B,floatingStyles:L}),[h,F,V,B,L])}const oW=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?Hk({element:r.current,padding:s}).fn(t):{}:r?Hk({element:r,padding:s}).fn(t):{}}}},lW=(n,e)=>({...Q8(n),options:[n,e]}),cW=(n,e)=>({...J8(n),options:[n,e]}),uW=(n,e)=>({...nW(n),options:[n,e]}),dW=(n,e)=>({...Z8(n),options:[n,e]}),hW=(n,e)=>({...eW(n),options:[n,e]}),fW=(n,e)=>({...tW(n),options:[n,e]}),pW=(n,e)=>({...oW(n),options:[n,e]});var mW="Arrow",yM=_.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return c.jsx(oe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});yM.displayName=mW;var gW=yM;function vW(n){const[e,t]=_.useState(void 0);return Tt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=n.offsetWidth,o=n.offsetHeight;t({width:a,height:o})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var AA="Popper",[xM,gw]=Ks(AA),[yW,wM]=xM(AA),bM=n=>{const{__scopePopper:e,children:t}=n,[r,s]=_.useState(null);return c.jsx(yW,{scope:e,anchor:r,onAnchorChange:s,children:t})};bM.displayName=AA;var _M="PopperAnchor",SM=_.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=wM(_M,t),a=_.useRef(null),o=He(e,a);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:c.jsx(oe.div,{...s,ref:o})});SM.displayName=_M;var CA="PopperContent",[xW,wW]=xM(CA),EM=_.forwardRef((n,e)=>{var U,fe,Se,Ae,Ce,Te;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=n,w=wM(CA,t),[v,x]=_.useState(null),b=He(e,Bt=>x(Bt)),[E,A]=_.useState(null),C=vW(E),N=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,T=r+(i!=="center"?"-"+i:""),M=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(u)?u:[u],R=I.length>0,F={padding:M,boundary:I.filter(_W),altBoundary:R},{refs:O,floatingStyles:V,placement:B,isPositioned:L,middlewareData:D}=aW({strategy:"fixed",placement:T,whileElementsMounted:(...Bt)=>X8(...Bt,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[lW({mainAxis:s+P,alignmentAxis:a}),l&&cW({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?uW():void 0,...F}),l&&dW({...F}),hW({...F,apply:({elements:Bt,rects:Kn,availableWidth:ql,availableHeight:ro})=>{const{width:Yl,height:Gf}=Kn.reference,Qu=Bt.floating.style;Qu.setProperty("--radix-popper-available-width",`${ql}px`),Qu.setProperty("--radix-popper-available-height",`${ro}px`),Qu.setProperty("--radix-popper-anchor-width",`${Yl}px`),Qu.setProperty("--radix-popper-anchor-height",`${Gf}px`)}}),E&&pW({element:E,padding:o}),SW({arrowWidth:N,arrowHeight:P}),p&&fW({strategy:"referenceHidden",...F})]}),[z,H]=NM(B),Z=Lt(y);Tt(()=>{L&&(Z==null||Z())},[L,Z]);const $=(U=D.arrow)==null?void 0:U.x,W=(fe=D.arrow)==null?void 0:fe.y,X=((Se=D.arrow)==null?void 0:Se.centerOffset)!==0,[Y,le]=_.useState();return Tt(()=>{v&&le(window.getComputedStyle(v).zIndex)},[v]),c.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:L?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(Ae=D.transformOrigin)==null?void 0:Ae.x,(Ce=D.transformOrigin)==null?void 0:Ce.y].join(" "),...((Te=D.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:c.jsx(xW,{scope:t,placedSide:z,onArrowChange:A,arrowX:$,arrowY:W,shouldHideArrow:X,children:c.jsx(oe.div,{"data-side":z,"data-align":H,...g,ref:b,style:{...g.style,animation:L?void 0:"none"}})})})});EM.displayName=CA;var AM="PopperArrow",bW={top:"bottom",right:"left",bottom:"top",left:"right"},CM=_.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=wW(AM,r),a=bW[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(gW,{...s,ref:t,style:{...s.style,display:"block"}})})});CM.displayName=AM;function _W(n){return n!==null}var SW=n=>({name:"transformOrigin",options:n,fn(e){var w,v,x;const{placement:t,rects:r,middlewareData:s}=e,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,o=a?0:n.arrowWidth,l=a?0:n.arrowHeight,[u,h]=NM(t),f={start:"0%",center:"50%",end:"100%"}[h],p=(((v=s.arrow)==null?void 0:v.x)??0)+o/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let y="",g="";return u==="bottom"?(y=a?f:`${p}px`,g=`${-l}px`):u==="top"?(y=a?f:`${p}px`,g=`${r.floating.height+l}px`):u==="right"?(y=`${-l}px`,g=a?f:`${m}px`):u==="left"&&(y=`${r.floating.width+l}px`,g=a?f:`${m}px`),{data:{x:y,y:g}}}});function NM(n){const[e,t="center"]=n.split("-");return[e,t]}var kM=bM,NA=SM,jM=EM,PM=CM;function EW(n){const e=_.useRef({value:n,previous:n});return _.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var AW=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},od=new WeakMap,cy=new WeakMap,uy={},Tb=0,TM=function(n){return n&&(n.host||TM(n.parentNode))},CW=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=TM(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},NW=function(n,e,t,r){var s=CW(e,Array.isArray(n)?n:[n]);uy[t]||(uy[t]=new WeakMap);var i=uy[t],a=[],o=new Set,l=new Set(s),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))h(p);else try{var m=p.getAttribute(r),y=m!==null&&m!=="false",g=(od.get(p)||0)+1,w=(i.get(p)||0)+1;od.set(p,g),i.set(p,w),a.push(p),g===1&&y&&cy.set(p,!0),w===1&&p.setAttribute(t,"true"),y||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return h(e),o.clear(),Tb++,function(){a.forEach(function(f){var p=od.get(f)-1,m=i.get(f)-1;od.set(f,p),i.set(f,m),p||(cy.has(f)||f.removeAttribute(r),cy.delete(f)),m||f.removeAttribute(t)}),Tb--,Tb||(od=new WeakMap,od=new WeakMap,cy=new WeakMap,uy={})}},kA=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=AW(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),NW(r,s,t,"aria-hidden")):function(){return null}},ki=function(){return ki=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ki.apply(this,arguments)};function RM(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function kW(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var Oy="right-scroll-bar-position",Ly="width-before-scroll-bar",jW="with-scroll-bars-hidden",PW="--removed-body-scroll-bar-size";function Rb(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function TW(n,e){var t=_.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var RW=typeof window<"u"?_.useLayoutEffect:_.useEffect,Vk=new WeakMap;function MW(n,e){var t=TW(null,function(r){return n.forEach(function(s){return Rb(s,r)})});return RW(function(){var r=Vk.get(t);if(r){var s=new Set(r),i=new Set(n),a=t.current;s.forEach(function(o){i.has(o)||Rb(o,null)}),i.forEach(function(o){s.has(o)||Rb(o,a)})}Vk.set(t,n)},[n]),t}function IW(n){return n}function DW(n,e){e===void 0&&(e=IW);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(o){return i(o)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var o=t;t=[],o.forEach(i),a=t}var l=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),t}}}};return s}function OW(n){n===void 0&&(n={});var e=DW(null);return e.options=ki({async:!0,ssr:!1},n),e}var MM=function(n){var e=n.sideCar,t=RM(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,ki({},t))};MM.isSideCarExport=!0;function LW(n,e){return n.useMedium(e),MM}var IM=OW(),Mb=function(){},vw=_.forwardRef(function(n,e){var t=_.useRef(null),r=_.useState({onScrollCapture:Mb,onWheelCapture:Mb,onTouchMoveCapture:Mb}),s=r[0],i=r[1],a=n.forwardProps,o=n.children,l=n.className,u=n.removeScrollBar,h=n.enabled,f=n.shards,p=n.sideCar,m=n.noRelative,y=n.noIsolation,g=n.inert,w=n.allowPinchZoom,v=n.as,x=v===void 0?"div":v,b=n.gapMode,E=RM(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=p,C=MW([t,e]),N=ki(ki({},E),s);return _.createElement(_.Fragment,null,h&&_.createElement(A,{sideCar:IM,removeScrollBar:u,shards:f,noRelative:m,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:b}),a?_.cloneElement(_.Children.only(o),ki(ki({},N),{ref:C})):_.createElement(x,ki({},N,{className:l,ref:C}),o))});vw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vw.classNames={fullWidth:Ly,zeroRight:Oy};var FW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $W(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=FW();return e&&n.setAttribute("nonce",e),n}function BW(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function zW(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var UW=function(){var n=0,e=null;return{add:function(t){n==0&&(e=$W())&&(BW(e,t),zW(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},HW=function(){var n=UW();return function(e,t){_.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},DM=function(){var n=HW(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},WW={left:0,top:0,right:0,gap:0},Ib=function(n){return parseInt(n||"",10)||0},VW=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[Ib(t),Ib(r),Ib(s)]},GW=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return WW;var e=VW(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},qW=DM(),Yd="data-scroll-locked",YW=function(n,e,t,r){var s=n.left,i=n.top,a=n.right,o=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(jW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Yd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Oy,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Ly,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Oy," .").concat(Oy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ly," .").concat(Ly,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Yd,`] {
    `).concat(PW,": ").concat(o,`px;
  }
`)},Gk=function(){var n=parseInt(document.body.getAttribute(Yd)||"0",10);return isFinite(n)?n:0},KW=function(){_.useEffect(function(){return document.body.setAttribute(Yd,(Gk()+1).toString()),function(){var n=Gk()-1;n<=0?document.body.removeAttribute(Yd):document.body.setAttribute(Yd,n.toString())}},[])},XW=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;KW();var i=_.useMemo(function(){return GW(s)},[s]);return _.createElement(qW,{styles:YW(i,!e,s,t?"":"!important")})},A_=!1;if(typeof window<"u")try{var dy=Object.defineProperty({},"passive",{get:function(){return A_=!0,!0}});window.addEventListener("test",dy,dy),window.removeEventListener("test",dy,dy)}catch{A_=!1}var ld=A_?{passive:!1}:!1,QW=function(n){return n.tagName==="TEXTAREA"},OM=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!QW(n)&&t[e]==="visible")},JW=function(n){return OM(n,"overflowY")},ZW=function(n){return OM(n,"overflowX")},qk=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=LM(n,r);if(s){var i=FM(n,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},eV=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},tV=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},LM=function(n,e){return n==="v"?JW(e):ZW(e)},FM=function(n,e){return n==="v"?eV(e):tV(e)},nV=function(n,e){return n==="h"&&e==="rtl"?-1:1},rV=function(n,e,t,r,s){var i=nV(n,window.getComputedStyle(e).direction),a=i*r,o=t.target,l=e.contains(o),u=!1,h=a>0,f=0,p=0;do{if(!o)break;var m=FM(n,o),y=m[0],g=m[1],w=m[2],v=g-w-i*y;(y||v)&&LM(n,o)&&(f+=v,p+=y);var x=o.parentNode;o=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},hy=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},Yk=function(n){return[n.deltaX,n.deltaY]},Kk=function(n){return n&&"current"in n?n.current:n},sV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},iV=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},aV=0,cd=[];function oV(n){var e=_.useRef([]),t=_.useRef([0,0]),r=_.useRef(),s=_.useState(aV++)[0],i=_.useState(DM)[0],a=_.useRef(n);_.useEffect(function(){a.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var g=kW([n.lockRef.current],(n.shards||[]).map(Kk),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var o=_.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=hy(g),x=t.current,b="deltaX"in g?g.deltaX:x[0]-v[0],E="deltaY"in g?g.deltaY:x[1]-v[1],A,C=g.target,N=Math.abs(b)>Math.abs(E)?"h":"v";if("touches"in g&&N==="h"&&C.type==="range")return!1;var P=qk(N,C);if(!P)return!0;if(P?A=N:(A=N==="v"?"h":"v",P=qk(N,C)),!P)return!1;if(!r.current&&"changedTouches"in g&&(b||E)&&(r.current=A),!A)return!0;var T=r.current||A;return rV(T,w,g,T==="h"?b:E,!0)},[]),l=_.useCallback(function(g){var w=g;if(!(!cd.length||cd[cd.length-1]!==i)){var v="deltaY"in w?Yk(w):hy(w),x=e.current.filter(function(A){return A.name===w.type&&(A.target===w.target||w.target===A.shadowParent)&&sV(A.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(a.current.shards||[]).map(Kk).filter(Boolean).filter(function(A){return A.contains(w.target)}),E=b.length>0?o(w,b[0]):!a.current.noIsolation;E&&w.cancelable&&w.preventDefault()}}},[]),u=_.useCallback(function(g,w,v,x){var b={name:g,delta:w,target:v,should:x,shadowParent:lV(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(E){return E!==b})},1)},[]),h=_.useCallback(function(g){t.current=hy(g),r.current=void 0},[]),f=_.useCallback(function(g){u(g.type,Yk(g),g.target,o(g,n.lockRef.current))},[]),p=_.useCallback(function(g){u(g.type,hy(g),g.target,o(g,n.lockRef.current))},[]);_.useEffect(function(){return cd.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,ld),document.addEventListener("touchmove",l,ld),document.addEventListener("touchstart",h,ld),function(){cd=cd.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,ld),document.removeEventListener("touchmove",l,ld),document.removeEventListener("touchstart",h,ld)}},[]);var m=n.removeScrollBar,y=n.inert;return _.createElement(_.Fragment,null,y?_.createElement(i,{styles:iV(s)}):null,m?_.createElement(XW,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function lV(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const cV=LW(IM,oV);var yw=_.forwardRef(function(n,e){return _.createElement(vw,ki({},n,{ref:e,sideCar:cV}))});yw.classNames=vw.classNames;var uV=[" ","Enter","ArrowUp","ArrowDown"],dV=[" ","Enter"],Du="Select",[xw,ww,hV]=KE(Du),[Vf,oQ]=Ks(Du,[hV,gw]),bw=gw(),[fV,Wl]=Vf(Du),[pV,mV]=Vf(Du),$M=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:o,onValueChange:l,dir:u,name:h,autoComplete:f,disabled:p,required:m,form:y}=n,g=bw(e),[w,v]=_.useState(null),[x,b]=_.useState(null),[E,A]=_.useState(!1),C=uw(u),[N,P]=Mu({prop:r,defaultProp:s??!1,onChange:i,caller:Du}),[T,M]=Mu({prop:a,defaultProp:o,onChange:l,caller:Du}),I=_.useRef(null),R=w?y||!!w.closest("form"):!0,[F,O]=_.useState(new Set),V=Array.from(F).map(B=>B.props.value).join(";");return c.jsx(kM,{...g,children:c.jsxs(fV,{required:m,scope:e,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:E,onValueNodeHasChildrenChange:A,contentId:Vn(),value:T,onValueChange:M,open:N,onOpenChange:P,dir:C,triggerPointerDownPosRef:I,disabled:p,children:[c.jsx(xw.Provider,{scope:e,children:c.jsx(pV,{scope:n.__scopeSelect,onNativeOptionAdd:_.useCallback(B=>{O(L=>new Set(L).add(B))},[]),onNativeOptionRemove:_.useCallback(B=>{O(L=>{const D=new Set(L);return D.delete(B),D})},[]),children:t})}),R?c.jsxs(cI,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:B=>M(B.target.value),disabled:p,form:y,children:[T===void 0?c.jsx("option",{value:""}):null,Array.from(F)]},V):null]})})};$M.displayName=Du;var BM="SelectTrigger",zM=_.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=bw(t),a=Wl(BM,t),o=a.disabled||r,l=He(e,a.onTriggerChange),u=ww(t),h=_.useRef("touch"),[f,p,m]=dI(g=>{const w=u().filter(b=>!b.disabled),v=w.find(b=>b.value===a.value),x=hI(w,g,v);x!==void 0&&a.onValueChange(x.value)}),y=g=>{o||(a.onOpenChange(!0),m()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return c.jsx(NA,{asChild:!0,...i,children:c.jsx(oe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":uI(a.value)?"":void 0,...s,ref:l,onClick:de(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&y(g)}),onPointerDown:de(s.onPointerDown,g=>{h.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:de(s.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(w&&g.key===" ")&&uV.includes(g.key)&&(y(),g.preventDefault())})})})});zM.displayName=BM;var UM="SelectValue",HM=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:a="",...o}=n,l=Wl(UM,t),{onValueNodeHasChildrenChange:u}=l,h=i!==void 0,f=He(e,l.onValueNodeChange);return Tt(()=>{u(h)},[u,h]),c.jsx(oe.span,{...o,ref:f,style:{pointerEvents:"none"},children:uI(l.value)?c.jsx(c.Fragment,{children:a}):i})});HM.displayName=UM;var gV="SelectIcon",WM=_.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return c.jsx(oe.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});WM.displayName=gV;var vV="SelectPortal",VM=n=>c.jsx(cv,{asChild:!0,...n});VM.displayName=vV;var Ou="SelectContent",GM=_.forwardRef((n,e)=>{const t=Wl(Ou,n.__scopeSelect),[r,s]=_.useState();if(Tt(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?Vu.createPortal(c.jsx(qM,{scope:n.__scopeSelect,children:c.jsx(xw.Slot,{scope:n.__scopeSelect,children:c.jsx("div",{children:n.children})})}),i):null}return c.jsx(YM,{...n,ref:e})});GM.displayName=Ou;var gs=10,[qM,Vl]=Vf(Ou),yV="SelectContentImpl",xV=Ru("SelectContent.RemoveScroll"),YM=_.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:o,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:w,...v}=n,x=Wl(Ou,t),[b,E]=_.useState(null),[A,C]=_.useState(null),N=He(e,U=>E(U)),[P,T]=_.useState(null),[M,I]=_.useState(null),R=ww(t),[F,O]=_.useState(!1),V=_.useRef(!1);_.useEffect(()=>{if(b)return kA(b)},[b]),vA();const B=_.useCallback(U=>{const[fe,...Se]=R().map(Te=>Te.ref.current),[Ae]=Se.slice(-1),Ce=document.activeElement;for(const Te of U)if(Te===Ce||(Te==null||Te.scrollIntoView({block:"nearest"}),Te===fe&&A&&(A.scrollTop=0),Te===Ae&&A&&(A.scrollTop=A.scrollHeight),Te==null||Te.focus(),document.activeElement!==Ce))return},[R,A]),L=_.useCallback(()=>B([P,b]),[B,P,b]);_.useEffect(()=>{F&&L()},[F,L]);const{onOpenChange:D,triggerPointerDownPosRef:z}=x;_.useEffect(()=>{if(b){let U={x:0,y:0};const fe=Ae=>{var Ce,Te;U={x:Math.abs(Math.round(Ae.pageX)-(((Ce=z.current)==null?void 0:Ce.x)??0)),y:Math.abs(Math.round(Ae.pageY)-(((Te=z.current)==null?void 0:Te.y)??0))}},Se=Ae=>{U.x<=10&&U.y<=10?Ae.preventDefault():b.contains(Ae.target)||D(!1),document.removeEventListener("pointermove",fe),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",Se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",Se,{capture:!0})}}},[b,D,z]),_.useEffect(()=>{const U=()=>D(!1);return window.addEventListener("blur",U),window.addEventListener("resize",U),()=>{window.removeEventListener("blur",U),window.removeEventListener("resize",U)}},[D]);const[H,Z]=dI(U=>{const fe=R().filter(Ce=>!Ce.disabled),Se=fe.find(Ce=>Ce.ref.current===document.activeElement),Ae=hI(fe,U,Se);Ae&&setTimeout(()=>Ae.ref.current.focus())}),$=_.useCallback((U,fe,Se)=>{const Ae=!V.current&&!Se;(x.value!==void 0&&x.value===fe||Ae)&&(T(U),Ae&&(V.current=!0))},[x.value]),W=_.useCallback(()=>b==null?void 0:b.focus(),[b]),X=_.useCallback((U,fe,Se)=>{const Ae=!V.current&&!Se;(x.value!==void 0&&x.value===fe||Ae)&&I(U)},[x.value]),Y=r==="popper"?C_:KM,le=Y===C_?{side:o,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:w}:{};return c.jsx(qM,{scope:t,content:b,viewport:A,onViewportChange:C,itemRefCallback:$,selectedItem:P,onItemLeave:W,itemTextRefCallback:X,focusSelectedItem:L,selectedItemText:M,position:r,isPositioned:F,searchRef:H,children:c.jsx(yw,{as:xV,allowPinchZoom:!0,children:c.jsx(hw,{asChild:!0,trapped:x.open,onMountAutoFocus:U=>{U.preventDefault()},onUnmountAutoFocus:de(s,U=>{var fe;(fe=x.trigger)==null||fe.focus({preventScroll:!0}),U.preventDefault()}),children:c.jsx(lv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:U=>U.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:c.jsx(Y,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:U=>U.preventDefault(),...v,...le,onPlaced:()=>O(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:de(v.onKeyDown,U=>{const fe=U.ctrlKey||U.altKey||U.metaKey;if(U.key==="Tab"&&U.preventDefault(),!fe&&U.key.length===1&&Z(U.key),["ArrowUp","ArrowDown","Home","End"].includes(U.key)){let Ae=R().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(U.key)&&(Ae=Ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(U.key)){const Ce=U.target,Te=Ae.indexOf(Ce);Ae=Ae.slice(Te+1)}setTimeout(()=>B(Ae)),U.preventDefault()}})})})})})})});YM.displayName=yV;var wV="SelectItemAlignedPosition",KM=_.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=Wl(Ou,t),a=Vl(Ou,t),[o,l]=_.useState(null),[u,h]=_.useState(null),f=He(e,N=>h(N)),p=ww(t),m=_.useRef(!1),y=_.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=a,b=_.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&g&&w&&v){const N=i.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),M=v.getBoundingClientRect();if(i.dir!=="rtl"){const Ce=M.left-P.left,Te=T.left-Ce,Bt=N.left-Te,Kn=N.width+Bt,ql=Math.max(Kn,P.width),ro=window.innerWidth-gs,Yl=b_(Te,[gs,Math.max(gs,ro-ql)]);o.style.minWidth=Kn+"px",o.style.left=Yl+"px"}else{const Ce=P.right-M.right,Te=window.innerWidth-T.right-Ce,Bt=window.innerWidth-N.right-Te,Kn=N.width+Bt,ql=Math.max(Kn,P.width),ro=window.innerWidth-gs,Yl=b_(Te,[gs,Math.max(gs,ro-ql)]);o.style.minWidth=Kn+"px",o.style.right=Yl+"px"}const I=p(),R=window.innerHeight-gs*2,F=g.scrollHeight,O=window.getComputedStyle(u),V=parseInt(O.borderTopWidth,10),B=parseInt(O.paddingTop,10),L=parseInt(O.borderBottomWidth,10),D=parseInt(O.paddingBottom,10),z=V+B+F+D+L,H=Math.min(w.offsetHeight*5,z),Z=window.getComputedStyle(g),$=parseInt(Z.paddingTop,10),W=parseInt(Z.paddingBottom,10),X=N.top+N.height/2-gs,Y=R-X,le=w.offsetHeight/2,U=w.offsetTop+le,fe=V+B+U,Se=z-fe;if(fe<=X){const Ce=I.length>0&&w===I[I.length-1].ref.current;o.style.bottom="0px";const Te=u.clientHeight-g.offsetTop-g.offsetHeight,Bt=Math.max(Y,le+(Ce?W:0)+Te+L),Kn=fe+Bt;o.style.height=Kn+"px"}else{const Ce=I.length>0&&w===I[0].ref.current;o.style.top="0px";const Bt=Math.max(X,V+g.offsetTop+(Ce?$:0)+le)+Se;o.style.height=Bt+"px",g.scrollTop=fe-X+g.offsetTop}o.style.margin=`${gs}px 0`,o.style.minHeight=H+"px",o.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,o,u,g,w,v,i.dir,r]);Tt(()=>b(),[b]);const[E,A]=_.useState();Tt(()=>{u&&A(window.getComputedStyle(u).zIndex)},[u]);const C=_.useCallback(N=>{N&&y.current===!0&&(b(),x==null||x(),y.current=!1)},[b,x]);return c.jsx(_V,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:C,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:c.jsx(oe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});KM.displayName=wV;var bV="SelectPopperPosition",C_=_.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=gs,...i}=n,a=bw(t);return c.jsx(jM,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});C_.displayName=bV;var[_V,jA]=Vf(Ou,{}),N_="SelectViewport",XM=_.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Vl(N_,t),a=jA(N_,t),o=He(e,i.onViewportChange),l=_.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(xw.Slot,{scope:t,children:c.jsx(oe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:de(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const m=Math.abs(l.current-h.scrollTop);if(m>0){const y=window.innerHeight-gs*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),v=Math.max(g,w);if(v<y){const x=v+m,b=Math.min(y,x),E=x-b;f.style.height=b+"px",f.style.bottom==="0px"&&(h.scrollTop=E>0?E:0,f.style.justifyContent="flex-end")}}}l.current=h.scrollTop})})})]})});XM.displayName=N_;var QM="SelectGroup",[SV,EV]=Vf(QM),AV=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Vn();return c.jsx(SV,{scope:t,id:s,children:c.jsx(oe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});AV.displayName=QM;var JM="SelectLabel",ZM=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=EV(JM,t);return c.jsx(oe.div,{id:s.id,...r,ref:e})});ZM.displayName=JM;var Z0="SelectItem",[CV,eI]=Vf(Z0),tI=_.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...a}=n,o=Wl(Z0,t),l=Vl(Z0,t),u=o.value===r,[h,f]=_.useState(i??""),[p,m]=_.useState(!1),y=He(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,r,s)}),g=Vn(),w=_.useRef("touch"),v=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(CV,{scope:t,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:_.useCallback(x=>{f(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:c.jsx(xw.ItemSlot,{scope:t,value:r,disabled:s,textValue:h,children:c.jsx(oe.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:de(a.onFocus,()=>m(!0)),onBlur:de(a.onBlur,()=>m(!1)),onClick:de(a.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:de(a.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:de(a.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:de(a.onPointerMove,x=>{var b;w.current=x.pointerType,s?(b=l.onItemLeave)==null||b.call(l):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(a.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:de(a.onKeyDown,x=>{var E;((E=l.searchRef)==null?void 0:E.current)!==""&&x.key===" "||(dV.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});tI.displayName=Z0;var mp="SelectItemText",nI=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,a=Wl(mp,t),o=Vl(mp,t),l=eI(mp,t),u=mV(mp,t),[h,f]=_.useState(null),p=He(e,v=>f(v),l.onItemTextChange,v=>{var x;return(x=o.itemTextRefCallback)==null?void 0:x.call(o,v,l.value,l.disabled)}),m=h==null?void 0:h.textContent,y=_.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=u;return Tt(()=>(g(y),()=>w(y)),[g,w,y]),c.jsxs(c.Fragment,{children:[c.jsx(oe.span,{id:l.textId,...i,ref:p}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Vu.createPortal(i.children,a.valueNode):null]})});nI.displayName=mp;var rI="SelectItemIndicator",sI=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return eI(rI,t).isSelected?c.jsx(oe.span,{"aria-hidden":!0,...r,ref:e}):null});sI.displayName=rI;var k_="SelectScrollUpButton",iI=_.forwardRef((n,e)=>{const t=Vl(k_,n.__scopeSelect),r=jA(k_,n.__scopeSelect),[s,i]=_.useState(!1),a=He(e,r.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),s?c.jsx(oI,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});iI.displayName=k_;var j_="SelectScrollDownButton",aI=_.forwardRef((n,e)=>{const t=Vl(j_,n.__scopeSelect),r=jA(j_,n.__scopeSelect),[s,i]=_.useState(!1),a=He(e,r.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,h=Math.ceil(l.scrollTop)<u;i(h)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),s?c.jsx(oI,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});aI.displayName=j_;var oI=_.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Vl("SelectScrollButton",t),a=_.useRef(null),o=ww(t),l=_.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return _.useEffect(()=>()=>l(),[l]),Tt(()=>{var h;const u=o().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[o]),c.jsx(oe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:de(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:de(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:de(s.onPointerLeave,()=>{l()})})}),NV="SelectSeparator",lI=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return c.jsx(oe.div,{"aria-hidden":!0,...r,ref:e})});lI.displayName=NV;var P_="SelectArrow",kV=_.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=bw(t),i=Wl(P_,t),a=Vl(P_,t);return i.open&&a.position==="popper"?c.jsx(PM,{...s,...r,ref:e}):null});kV.displayName=P_;var jV="SelectBubbleInput",cI=_.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=_.useRef(null),i=He(r,s),a=EW(e);return _.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(o,e),o.dispatchEvent(f)}},[a,e]),c.jsx(oe.select,{...t,style:{...uR,...t.style},ref:i,defaultValue:e})});cI.displayName=jV;function uI(n){return n===""||n===void 0}function dI(n){const e=Lt(n),t=_.useRef(""),r=_.useRef(0),s=_.useCallback(a=>{const o=t.current+a;e(o),function l(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),i=_.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function hI(n,e,t){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=PV(n,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==t));const l=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function PV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var TV=$M,fI=zM,RV=HM,MV=WM,IV=VM,pI=GM,DV=XM,mI=ZM,gI=tI,OV=nI,LV=sI,vI=iI,yI=aI,xI=lI;const ji=TV,Pi=RV,Ls=_.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(fI,{ref:r,className:ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,c.jsx(MV,{asChild:!0,children:c.jsx(DR,{className:"h-4 w-4 opacity-50"})})]}));Ls.displayName=fI.displayName;const wI=_.forwardRef(({className:n,...e},t)=>c.jsx(vI,{ref:t,className:ee("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(d5,{className:"h-4 w-4"})}));wI.displayName=vI.displayName;const bI=_.forwardRef(({className:n,...e},t)=>c.jsx(yI,{ref:t,className:ee("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(DR,{className:"h-4 w-4"})}));bI.displayName=yI.displayName;const Fs=_.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>c.jsx(IV,{children:c.jsxs(pI,{ref:s,className:ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[c.jsx(wI,{}),c.jsx(DV,{className:ee("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(bI,{})]})}));Fs.displayName=pI.displayName;const FV=_.forwardRef(({className:n,...e},t)=>c.jsx(mI,{ref:t,className:ee("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));FV.displayName=mI.displayName;const yt=_.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(gI,{ref:r,className:ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(LV,{children:c.jsx(IR,{className:"h-4 w-4"})})}),c.jsx(OV,{children:e})]}));yt.displayName=gI.displayName;const $V=_.forwardRef(({className:n,...e},t)=>c.jsx(xI,{ref:t,className:ee("-mx-1 my-1 h-px bg-muted",n),...e}));$V.displayName=xI.displayName;function BV(){const[n,e]=o6(),[t,r]=_.useState([]),[s,i]=_.useState(!0),[a,o]=_.useState(n.get("search")||""),[l,u]=_.useState(n.get("country")||""),[h,f]=_.useState(n.get("specialty")||""),[p,m]=_.useState(n.get("modality")||""),[y,g]=_.useState(n.get("price")||""),[w,v]=_.useState("grid"),x=["Switzerland","Germany","Austria","France","Italy"],b=["Cardiology","Surgery","Neurology","Radiology","Emergency Medicine","Internal Medicine"],E=["Online","In-Person","Hybrid"],A=[{label:"Free",value:"0"},{label:"Under 100 CHF",value:"0-100"},{label:"100-500 CHF",value:"100-500"},{label:"500-1000 CHF",value:"500-1000"},{label:"Over 1000 CHF",value:"1000+"}];_.useEffect(()=>{C()},[C]);const C=_.useCallback(async()=>{i(!0);try{let R=se.from("courses").select("*").eq("status","published").order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});if(a&&(R=R.or(`title.ilike.%${a}%,description.ilike.%${a}%`)),l&&(R=R.eq("country",l)),h&&(R=R.eq("specialty",h)),p&&(R=R.eq("modality",p)),y)if(y==="0")R=R.eq("price",0);else if(y.includes("-")){const[V,B]=y.split("-").map(Number);R=R.gte("price",V).lte("price",B)}else y==="1000+"&&(R=R.gte("price",1e3));const{data:F,error:O}=await R;if(O)throw O;r(F||[])}catch(R){console.error("Error fetching courses:",R)}finally{i(!1)}},[a,l,h,p,y]),N=(R,F)=>{const O=new URLSearchParams(n);F?O.set(R,F):O.delete(R),e(O)},P=()=>{o(""),u(""),f(""),m(""),g(""),e({})},T=(R,F)=>R===0?"Free":`${R} ${F}`,M=R=>Array.from({length:5},(F,O)=>c.jsx(J1,{className:`h-4 w-4 ${O<Math.floor(R)?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`},O)),I=({course:R})=>c.jsxs(ae,{className:"group hover:shadow-lg transition-all duration-200 border-accent/20",children:[R.is_featured&&c.jsx("div",{className:"bg-gradient-to-r from-medical-primary to-swiss-blue text-white text-xs px-2 py-1 rounded-t-md font-medium",children:"Featured Course"}),c.jsxs("div",{className:"relative overflow-hidden rounded-t-md",children:[R.cover_image_url?c.jsx("img",{src:R.cover_image_url,alt:R.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200"}):c.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 flex items-center justify-center",children:c.jsx("div",{className:"text-6xl text-medical-primary opacity-30",children:"📚"})}),R.modality&&c.jsx(me,{variant:"secondary",className:"absolute top-2 left-2 bg-background/90 backdrop-blur-sm",children:R.modality})]}),c.jsxs(pt,{className:"pb-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx(wt,{className:"text-lg font-semibold group-hover:text-medical-primary transition-colors line-clamp-2",children:R.title}),R.has_certificate&&c.jsx(me,{variant:"outline",className:"shrink-0 text-xs",children:"Certificate"})]}),c.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[M(R.average_rating),c.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["(",R.total_reviews," reviews)"]})]})]}),c.jsxs(ze,{className:"pb-2",children:[c.jsx(Kp,{className:"line-clamp-2 mb-3",children:R.description}),c.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[R.city&&R.country&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Q1,{className:"h-4 w-4"}),c.jsxs("span",{children:[R.city,", ",R.country]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[R.cme_points>0&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(OR,{className:"h-4 w-4"}),c.jsxs("span",{children:[R.cme_points," CME"]})]}),R.capacity&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(hv,{className:"h-4 w-4"}),c.jsxs("span",{children:["Max ",R.capacity]})]})]})]}),R.tags&&R.tags.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[R.tags.slice(0,3).map((F,O)=>c.jsx(me,{variant:"outline",className:"text-xs",children:F},O)),R.tags.length>3&&c.jsxs(me,{variant:"outline",className:"text-xs",children:["+",R.tags.length-3]})]})]}),c.jsx($2,{className:"pt-0",children:c.jsxs("div",{className:"flex items-center justify-between w-full",children:[c.jsx("div",{className:"text-2xl font-bold text-medical-primary",children:T(R.price,R.currency)}),c.jsx(ws,{to:`/courses/${R.id}`,children:c.jsx(J,{variant:"medical",size:"sm",children:"View Details"})})]})})]});return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx($R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),c.jsx(Ze,{placeholder:"Search courses...",value:a,onChange:R=>{o(R.target.value),N("search",R.target.value)},className:"pl-10"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(ji,{value:l,onValueChange:R=>{u(R),N("country",R)},children:[c.jsx(Ls,{className:"w-[150px]",children:c.jsx(Pi,{placeholder:"Country"})}),c.jsx(Fs,{children:x.map(R=>c.jsx(yt,{value:R,children:R},R))})]}),c.jsxs(ji,{value:h,onValueChange:R=>{f(R),N("specialty",R)},children:[c.jsx(Ls,{className:"w-[150px]",children:c.jsx(Pi,{placeholder:"Specialty"})}),c.jsx(Fs,{children:b.map(R=>c.jsx(yt,{value:R,children:R},R))})]}),c.jsxs(ji,{value:p,onValueChange:R=>{m(R),N("modality",R)},children:[c.jsx(Ls,{className:"w-[120px]",children:c.jsx(Pi,{placeholder:"Format"})}),c.jsx(Fs,{children:E.map(R=>c.jsx(yt,{value:R,children:R},R))})]}),c.jsxs(ji,{value:y,onValueChange:R=>{g(R),N("price",R)},children:[c.jsx(Ls,{className:"w-[140px]",children:c.jsx(Pi,{placeholder:"Price Range"})}),c.jsx(Fs,{children:A.map(R=>c.jsx(yt,{value:R.value,children:R.label},R.value))})]}),(a||l||h||p||y)&&c.jsx(J,{variant:"outline",onClick:P,size:"sm",children:"Clear Filters"})]})]})}),c.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[c.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Course Marketplace",!s&&c.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",t.length," courses)"]})]}),c.jsx(no,{value:w,onValueChange:R=>v(R),children:c.jsxs(Gi,{children:[c.jsx(mt,{value:"grid",children:"Grid"}),c.jsx(mt,{value:"list",children:"List"})]})})]}),s?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((R,F)=>c.jsxs(ae,{className:"animate-pulse",children:[c.jsx("div",{className:"h-48 bg-muted rounded-t-md"}),c.jsxs(pt,{children:[c.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),c.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),c.jsx(ze,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 bg-muted rounded"}),c.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},F))}):t.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No courses found"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or clear filters to see more results."}),c.jsx(J,{onClick:P,variant:"outline",children:"Clear All Filters"})]}):c.jsx("div",{className:w==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:t.map(R=>c.jsx(I,{course:R},R.id))})]})]})}var zV="Separator",Xk="horizontal",UV=["horizontal","vertical"],_I=_.forwardRef((n,e)=>{const{decorative:t,orientation:r=Xk,...s}=n,i=HV(r)?r:Xk,o=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c.jsx(oe.div,{"data-orientation":i,...o,...s,ref:e})});_I.displayName=zV;function HV(n){return UV.includes(n)}var SI=_I;const EI=_.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},s)=>c.jsx(SI,{ref:s,decorative:t,orientation:e,className:ee("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));EI.displayName=SI.displayName;var AI={exports:{}},CI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf=_;function WV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var VV=typeof Object.is=="function"?Object.is:WV,GV=Cf.useState,qV=Cf.useEffect,YV=Cf.useLayoutEffect,KV=Cf.useDebugValue;function XV(n,e){var t=e(),r=GV({inst:{value:t,getSnapshot:e}}),s=r[0].inst,i=r[1];return YV(function(){s.value=t,s.getSnapshot=e,Db(s)&&i({inst:s})},[n,t,e]),qV(function(){return Db(s)&&i({inst:s}),n(function(){Db(s)&&i({inst:s})})},[n]),KV(t),t}function Db(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!VV(n,t)}catch{return!0}}function QV(n,e){return e()}var JV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QV:XV;CI.useSyncExternalStore=Cf.useSyncExternalStore!==void 0?Cf.useSyncExternalStore:JV;AI.exports=CI;var ZV=AI.exports;function eG(){return ZV.useSyncExternalStore(tG,()=>!0,()=>!1)}function tG(){return()=>{}}var PA="Avatar",[nG,lQ]=Ks(PA),[rG,NI]=nG(PA),kI=_.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=_.useState("idle");return c.jsx(rG,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:c.jsx(oe.span,{...r,ref:e})})});kI.displayName=PA;var jI="AvatarImage",PI=_.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,a=NI(jI,t),o=sG(r,i),l=Lt(u=>{s(u),a.onImageLoadingStatusChange(u)});return Tt(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?c.jsx(oe.img,{...i,ref:e,src:r}):null});PI.displayName=jI;var TI="AvatarFallback",RI=_.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=NI(TI,t),[a,o]=_.useState(r===void 0);return _.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(l)}},[r]),a&&i.imageLoadingStatus!=="loaded"?c.jsx(oe.span,{...s,ref:e}):null});RI.displayName=TI;function Qk(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function sG(n,{referrerPolicy:e,crossOrigin:t}){const r=eG(),s=_.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,o]=_.useState(()=>Qk(i,n));return Tt(()=>{o(Qk(i,n))},[i,n]),Tt(()=>{const l=f=>()=>{o(f)};if(!i)return;const u=l("loaded"),h=l("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,t,e]),a}var MI=kI,II=PI,DI=RI;const OI=_.forwardRef(({className:n,...e},t)=>c.jsx(MI,{ref:t,className:ee("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));OI.displayName=MI.displayName;const LI=_.forwardRef(({className:n,...e},t)=>c.jsx(II,{ref:t,className:ee("aspect-square h-full w-full",n),...e}));LI.displayName=II.displayName;const FI=_.forwardRef(({className:n,...e},t)=>c.jsx(DI,{ref:t,className:ee("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));FI.displayName=DI.displayName;var TA="Progress",RA=100,[iG,cQ]=Ks(TA),[aG,oG]=iG(TA),$I=_.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:i=lG,...a}=n;(s||s===0)&&!Jk(s)&&console.error(cG(`${s}`,"Progress"));const o=Jk(s)?s:RA;r!==null&&!Zk(r,o)&&console.error(uG(`${r}`,"Progress"));const l=Zk(r,o)?r:null,u=ex(l)?i(l,o):void 0;return c.jsx(aG,{scope:t,value:l,max:o,children:c.jsx(oe.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":ex(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":UI(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});$I.displayName=TA;var BI="ProgressIndicator",zI=_.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=oG(BI,t);return c.jsx(oe.div,{"data-state":UI(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});zI.displayName=BI;function lG(n,e){return`${Math.round(n/e*100)}%`}function UI(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function ex(n){return typeof n=="number"}function Jk(n){return ex(n)&&!isNaN(n)&&n>0}function Zk(n,e){return ex(n)&&!isNaN(n)&&n<=e&&n>=0}function cG(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${RA}\`.`}function uG(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${RA} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var HI=$I,dG=zI;const Nf=_.forwardRef(({className:n,value:e,...t},r)=>c.jsx(HI,{ref:r,className:ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:c.jsx(dG,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Nf.displayName=HI.displayName;function hG(){const{id:n}=d2(),[e,t]=_.useState(null),[r,s]=_.useState([]),[i,a]=_.useState([]),[o,l]=_.useState([]),[u,h]=_.useState([]),[f,p]=_.useState(!0),[m,y]=_.useState(!1),[g,w]=_.useState("");_.useState({rating:5,comment:""});const[v,x]=_.useState(!1);_.useEffect(()=>{n&&b()},[n,b]);const b=_.useCallback(async()=>{if(n){p(!0);try{const{data:T,error:M}=await se.from("courses").select("*").eq("id",n).eq("status","published").single();if(M)throw M;t(T);const{data:I}=await se.from("course_sessions").select("*").eq("course_id",n).order("start_date",{ascending:!0});s(I||[]);const{data:R}=await se.from("course_videos").select(`
          *,
          videos (
            title,
            description,
            duration,
            thumbnail_url
          )
        `).eq("course_id",n).order("order_index",{ascending:!0});a(R||[]);const{data:F}=await se.from("course_materials").select("*").eq("course_id",n);l(F||[]);const{data:O}=await se.from("course_reviews").select("*").eq("course_id",n).order("created_at",{ascending:!1}),V=(O||[]).map(L=>({...L,profiles:{full_name:"Course Participant",avatar_url:""}}));h(V);const{data:{user:B}}=await se.auth.getUser();if(B){const{data:L}=await se.from("course_enrollments").select("status").eq("course_id",n).eq("user_id",B.id).single();x(!!L)}}catch(T){console.error("Error fetching course details:",T),De.error("Failed to load course details")}finally{p(!1)}}},[n]),E=async()=>{if(!e||!g){De.error("Please select a session");return}y(!0);try{const{data:{user:T}}=await se.auth.getUser();if(!T){De.error("Please log in to enroll");return}const{error:M}=await se.from("course_enrollments").insert({course_id:e.id,user_id:T.id,status:"enrolled"});if(M)throw M;const{error:I}=await se.from("payments").insert({user_id:T.id,course_id:e.id,session_id:g,amount:e.price,currency:e.currency,status:"pending"});if(I)throw I;De.success("Successfully enrolled! Payment processing..."),x(!0)}catch(T){console.error("Enrollment error:",T),De.error("Failed to enroll in course")}finally{y(!1)}},A=(T,M)=>T===0?"Free":`${T} ${M}`,C=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),N=T=>{if(T===0)return"0 Bytes";const M=1024,I=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(T)/Math.log(M));return parseFloat((T/Math.pow(M,R)).toFixed(2))+" "+I[R]},P=(T,M=!1,I)=>Array.from({length:5},(R,F)=>c.jsx(J1,{className:`h-4 w-4 cursor-pointer ${F<T?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`,onClick:()=>M&&I&&I(F+1)},F));return f?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),c.jsx("div",{className:"h-64 bg-muted rounded"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[c.jsx("div",{className:"h-6 bg-muted rounded"}),c.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),c.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),c.jsx("div",{className:"h-96 bg-muted rounded"})]})]})})]}):e?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx("div",{className:"mb-6",children:c.jsxs(ws,{to:"/courses",className:"inline-flex items-center text-muted-foreground hover:text-foreground",children:[c.jsx(UN,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"relative",children:[e.cover_image_url?c.jsx("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-64 object-cover rounded-lg"}):c.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 rounded-lg flex items-center justify-center",children:c.jsx("div",{className:"text-8xl text-medical-primary opacity-30",children:"📚"})}),c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[c.jsx(J,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:c.jsx(m5,{className:"h-4 w-4"})}),c.jsx(J,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:c.jsx(nA,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),c.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[P(e.average_rating),c.jsxs("span",{className:"ml-1",children:["(",e.total_reviews," reviews)"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Q1,{className:"h-4 w-4"}),c.jsxs("span",{children:[e.city,", ",e.country]})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.modality&&c.jsx(me,{variant:"secondary",children:e.modality}),e.difficulty_level&&c.jsx(me,{variant:"outline",children:e.difficulty_level}),e.has_certificate&&c.jsxs(me,{variant:"outline",children:[c.jsx(Wd,{className:"h-3 w-3 mr-1"}),"Certificate"]})]})]}),c.jsx("p",{className:"text-muted-foreground mb-6",children:e.description}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(OR,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsxs("div",{className:"font-semibold",children:[e.cme_points," CME"]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Points"})]}),c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(hv,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsx("div",{className:"font-semibold",children:e.capacity||"Unlimited"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Capacity"})]}),c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(Fi,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsx("div",{className:"font-semibold",children:r.length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Sessions"})]}),c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(J1,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsx("div",{className:"font-semibold",children:e.average_rating.toFixed(1)}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]})]}),c.jsxs(no,{defaultValue:"overview",className:"w-full",children:[c.jsxs(Gi,{className:"grid w-full grid-cols-4",children:[c.jsx(mt,{value:"overview",children:"Overview"}),c.jsx(mt,{value:"content",children:"Content"}),c.jsx(mt,{value:"materials",children:"Materials"}),c.jsx(mt,{value:"reviews",children:"Reviews"})]}),c.jsxs(Ct,{value:"overview",className:"space-y-6",children:[c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsx(wt,{children:"Course Requirements"})}),c.jsx(ze,{children:c.jsx("p",{children:e.requirements||"No specific requirements"})})]}),e.tags&&e.tags.length>0&&c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsx(wt,{children:"Topics Covered"})}),c.jsx(ze,{children:c.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((T,M)=>c.jsx(me,{variant:"outline",children:T},M))})})]})]}),c.jsx(Ct,{value:"content",className:"space-y-4",children:i.length>0?i.map((T,M)=>c.jsx(ae,{children:c.jsx(ze,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T.videos.thumbnail_url||"/placeholder.svg",alt:T.videos.title,className:"w-24 h-16 object-cover rounded"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(FR,{className:"h-6 w-6 text-white drop-shadow-lg"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold",children:T.videos.title}),c.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.videos.description}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[c.jsxs("span",{children:[Math.floor(T.videos.duration/60)," min"]}),c.jsx(me,{variant:T.is_preview?"secondary":"outline",className:"text-xs",children:T.is_preview?"Free Preview":"Premium"})]})]})]})})},T.id)):c.jsx(ae,{children:c.jsxs(ze,{className:"p-8 text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"🎥"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No video content available"}),c.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include video lessons."})]})})}),c.jsx(Ct,{value:"materials",className:"space-y-4",children:o.length>0?o.map(T=>c.jsx(ae,{children:c.jsx(ze,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(LR,{className:"h-5 w-5 text-medical-primary"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:T.title}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.description," • ",N(T.file_size)," • ",T.file_type.toUpperCase()]})]})]}),c.jsx(me,{variant:T.is_preview?"secondary":"outline",children:T.is_preview?"Free":"Premium"})]})})},T.id)):c.jsx(ae,{children:c.jsxs(ze,{className:"p-8 text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"📄"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No materials available"}),c.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include downloadable materials."})]})})}),c.jsx(Ct,{value:"reviews",className:"space-y-4",children:u.length>0?u.map(T=>c.jsx(ae,{children:c.jsx(ze,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs(OI,{children:[c.jsx(LI,{src:T.profiles.avatar_url}),c.jsx(FI,{children:T.profiles.full_name.charAt(0)})]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"font-semibold",children:T.profiles.full_name}),c.jsx("div",{className:"flex items-center",children:P(T.rating)}),c.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(T.created_at).toLocaleDateString()})]}),c.jsx("p",{className:"text-muted-foreground",children:T.comment})]})]})})},T.id)):c.jsx(ae,{children:c.jsxs(ze,{className:"p-8 text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No reviews yet"}),c.jsx("p",{className:"text-muted-foreground",children:"Be the first to review this course!"})]})})})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsxs(wt,{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Enroll Now"}),c.jsx("span",{className:"text-2xl font-bold text-medical-primary",children:A(e.price,e.currency)})]})}),c.jsxs(ze,{className:"space-y-4",children:[v?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-green-600 font-semibold mb-2",children:"✓ Already Enrolled"}),c.jsx(J,{variant:"outline",className:"w-full",children:"Go to Course"})]}):c.jsxs(c.Fragment,{children:[r.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Session:"}),c.jsxs("select",{className:"w-full p-2 border rounded-md",value:g,onChange:T=>w(T.target.value),children:[c.jsx("option",{value:"",children:"Choose a session"}),r.map(T=>c.jsxs("option",{value:T.id,children:[C(T.start_date),T.location&&` - ${T.location}`]},T.id))]})]}),c.jsx(J,{className:"w-full",variant:"medical",onClick:E,disabled:m||r.length>0&&!g,children:m?"Processing...":"Enroll Now"})]}),c.jsx(EI,{}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Language:"}),c.jsx("span",{className:"font-medium",children:e.language})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Specialty:"}),c.jsx("span",{className:"font-medium",children:e.specialty})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Level:"}),c.jsx("span",{className:"font-medium capitalize",children:e.difficulty_level})]})]})]})]}),r.length>0&&c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsx(wt,{children:"Upcoming Sessions"})}),c.jsx(ze,{className:"space-y-3",children:r.slice(0,3).map(T=>c.jsxs("div",{className:"p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(Fi,{className:"h-4 w-4 text-medical-primary"}),c.jsx("span",{className:"font-medium text-sm",children:C(T.start_date)})]}),T.location&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx(Q1,{className:"h-3 w-3"}),c.jsx("span",{children:T.location})]}),c.jsxs("div",{className:"mt-2",children:[c.jsx(Nf,{value:T.current_participants/T.max_participants*100,className:"h-2"}),c.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[T.current_participants,"/",T.max_participants," enrolled"]})]})]},T.id))})]})]})]})]})]}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Course not found"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"The course you're looking for doesn't exist or has been removed."}),c.jsx(ws,{to:"/courses",children:c.jsxs(J,{variant:"outline",children:[c.jsx(UN,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})]})})]})}const kf=_.forwardRef(({className:n,...e},t)=>c.jsx("div",{className:"relative w-full overflow-auto",children:c.jsx("table",{ref:t,className:ee("w-full caption-bottom text-sm",n),...e})}));kf.displayName="Table";const jf=_.forwardRef(({className:n,...e},t)=>c.jsx("thead",{ref:t,className:ee("[&_tr]:border-b",n),...e}));jf.displayName="TableHeader";const Pf=_.forwardRef(({className:n,...e},t)=>c.jsx("tbody",{ref:t,className:ee("[&_tr:last-child]:border-0",n),...e}));Pf.displayName="TableBody";const fG=_.forwardRef(({className:n,...e},t)=>c.jsx("tfoot",{ref:t,className:ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));fG.displayName="TableFooter";const $s=_.forwardRef(({className:n,...e},t)=>c.jsx("tr",{ref:t,className:ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));$s.displayName="TableRow";const Re=_.forwardRef(({className:n,...e},t)=>c.jsx("th",{ref:t,className:ee("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Re.displayName="TableHead";const Me=_.forwardRef(({className:n,...e},t)=>c.jsx("td",{ref:t,className:ee("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));Me.displayName="TableCell";const pG=_.forwardRef(({className:n,...e},t)=>c.jsx("caption",{ref:t,className:ee("mt-4 text-sm text-muted-foreground",n),...e}));pG.displayName="TableCaption";const mG=({moduleKey:n,onClose:e})=>{const[t,r]=_.useState(null),[s,i]=_.useState([]),[a,o]=_.useState(!0),[l,u]=_.useState(4),h=_.useCallback(async()=>{try{o(!0);const{data:{user:v}}=await se.auth.getUser();if(!v)return;const{data:x}=await se.from("profiles").select("pgy_level").eq("user_id",v.id).single();x!=null&&x.pgy_level&&u(x.pgy_level);const{data:b}=await se.from("procedure_categories").select("*").eq("key",n).single();b&&r({id:b.id,title_de:b.title_de,minimum_required:b.minimum_required});const{data:E}=await se.rpc("get_module_progress",{user_id_param:v.id,module_key:n}),{data:A}=await se.from("procedures").select(`
          id,
          code,
          title_de,
          min_required_by_pgy
        `).eq("category_id",b==null?void 0:b.id).eq("active",!0),C=[];for(const N of A||[]){const{data:P}=await se.from("procedure_logs").select("*").eq("procedure_id",N.id).eq("user_id",v.id).order("performed_date",{ascending:!1}),T=(P==null?void 0:P.filter(F=>F.role_in_surgery==="responsible").length)||0,M=(P==null?void 0:P.filter(F=>F.role_in_surgery==="instructing").length)||0,I=(P==null?void 0:P.filter(F=>F.role_in_surgery==="assistant").length)||0,R=T*1+M*.75+I*.5;C.push({...N,responsible_count:T,instructing_count:M,assistant_count:I,weighted_score:R,logs:P||[]})}i(C)}catch(v){console.error("Error loading module details:",v)}finally{o(!1)}},[n]);_.useEffect(()=>{h()},[h]);const f=v=>({basis_notfall:"coral",basis_allgemein:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[v]||"mint",p=v=>{var x;return((x=v.min_required_by_pgy)==null?void 0:x[`pgy${l}`])??0},m=v=>{const x=p(v);return x===0?0:Math.min(100,v.weighted_score/x*100)},y=s.reduce((v,x)=>v+x.weighted_score,0),g=(t==null?void 0:t.minimum_required)||0,w=g>0?Math.min(100,y/g*100):0;return a?c.jsx(ae,{className:"medical-card mb-8",children:c.jsx(ze,{className:"p-8",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):c.jsxs(ae,{className:"medical-card mb-8",children:[c.jsxs(pt,{className:"flex flex-row items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(vv,{progress:w,variant:f(n),size:80,strokeWidth:6,showPercentage:!0}),c.jsxs("div",{children:[c.jsx(wt,{className:"text-xl text-card-foreground",children:t==null?void 0:t.title_de}),c.jsxs("p",{className:"text-muted-foreground",children:[y.toFixed(1)," / ",g," Punkte (gewichtet)"]})]})]}),c.jsx(J,{variant:"ghost",size:"sm",onClick:e,children:c.jsx(zl,{className:"w-4 h-4"})})]}),c.jsx(ze,{children:c.jsxs(no,{defaultValue:"overview",className:"w-full",children:[c.jsxs(Gi,{className:"grid w-full grid-cols-3",children:[c.jsx(mt,{value:"overview",children:"Übersicht"}),c.jsx(mt,{value:"procedures",children:"Prozeduren"}),c.jsx(mt,{value:"timeline",children:"Verlauf"})]}),c.jsx(Ct,{value:"overview",className:"mt-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs(ae,{className:"p-4",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Rollenverteilung"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm",children:"Verantwortlich:"}),c.jsx(me,{variant:"default",children:s.reduce((v,x)=>v+x.responsible_count,0)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm",children:"Instruierend:"}),c.jsx(me,{variant:"secondary",children:s.reduce((v,x)=>v+x.instructing_count,0)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm",children:"Assistent:"}),c.jsx(me,{variant:"outline",children:s.reduce((v,x)=>v+x.assistant_count,0)})]})]})]}),c.jsxs(ae,{className:"p-4",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Modulfortschritt"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Erfüllung"}),c.jsxs("span",{children:[w.toFixed(1),"%"]})]}),c.jsx(Nf,{value:w,className:"h-2"})]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Gewichtung: V=1.0, I=0.75, A=0.5"})]})]}),c.jsxs(ae,{className:"p-4",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Statistiken"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Prozeduren:"}),c.jsx("span",{children:s.length})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Eingriffe total:"}),c.jsx("span",{children:s.reduce((v,x)=>v+x.responsible_count+x.instructing_count+x.assistant_count,0)})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Punkte total:"}),c.jsx("span",{children:y.toFixed(1)})]})]})]})]})}),c.jsx(Ct,{value:"procedures",className:"mt-6",children:c.jsxs(kf,{children:[c.jsx(jf,{children:c.jsxs($s,{children:[c.jsx(Re,{children:"Prozedur"}),c.jsxs(Re,{className:"text-center",children:["Soll PGY-",l]}),c.jsx(Re,{className:"text-center",children:"Ist (gewichtet)"}),c.jsx(Re,{className:"text-center",children:"V/I/A"}),c.jsx(Re,{className:"text-center",children:"Fortschritt"}),c.jsx(Re,{className:"text-center",children:"Status"})]})}),c.jsx(Pf,{children:s.map(v=>{const x=p(v),b=m(v),E=x>0&&v.weighted_score<x;return c.jsxs($s,{children:[c.jsx(Me,{className:"font-medium",children:c.jsxs("div",{children:[c.jsx("div",{children:v.title_de}),c.jsx("div",{className:"text-xs text-muted-foreground",children:v.code})]})}),c.jsx(Me,{className:"text-center",children:x||"-"}),c.jsx(Me,{className:"text-center",children:v.weighted_score.toFixed(1)}),c.jsx(Me,{className:"text-center",children:c.jsxs("div",{className:"flex gap-1 justify-center",children:[c.jsx(me,{variant:"default",className:"text-xs",children:v.responsible_count}),c.jsx(me,{variant:"secondary",className:"text-xs",children:v.instructing_count}),c.jsx(me,{variant:"outline",className:"text-xs",children:v.assistant_count})]})}),c.jsx(Me,{className:"text-center",children:x>0?c.jsxs("div",{className:"w-16 mx-auto",children:[c.jsx(Nf,{value:b,className:"h-2"}),c.jsxs("div",{className:"text-xs mt-1",children:[b.toFixed(0),"%"]})]}):"-"}),c.jsxs(Me,{className:"text-center",children:[E&&c.jsx(H0,{className:"w-4 h-4 text-orange-500 mx-auto"}),x>0&&v.weighted_score>=x&&c.jsx(me,{variant:"default",className:"bg-green-500",children:"✓"})]})]},v.id)})})]})}),c.jsx(Ct,{value:"timeline",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:s.filter(v=>v.logs.length>0).flatMap(v=>v.logs.map(x=>({...x,procedure_title:v.title_de}))).sort((v,x)=>new Date(x.performed_date).getTime()-new Date(v.performed_date).getTime()).slice(0,20).map(v=>c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:v.procedure_title}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(v.performed_date).toLocaleDateString("de-DE")," • ",v.hospital]}),v.supervisor&&c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Supervisor: ",v.supervisor]})]}),c.jsx(me,{variant:v.role_in_surgery==="responsible"?"default":v.role_in_surgery==="instructing"?"secondary":"outline",children:v.role_in_surgery==="responsible"?"Verantwortlich":v.role_in_surgery==="instructing"?"Instruierend":"Assistent"})]})},v.id))})})]})})]})};var _w="Dialog",[WI,uQ]=Ks(_w),[gG,Xs]=WI(_w),VI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=n,o=_.useRef(null),l=_.useRef(null),[u,h]=Mu({prop:r,defaultProp:s??!1,onChange:i,caller:_w});return c.jsx(gG,{scope:e,triggerRef:o,contentRef:l,contentId:Vn(),titleId:Vn(),descriptionId:Vn(),open:u,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(f=>!f),[h]),modal:a,children:t})};VI.displayName=_w;var GI="DialogTrigger",vG=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Xs(GI,t),i=He(e,s.triggerRef);return c.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":DA(s.open),...r,ref:i,onClick:de(n.onClick,s.onOpenToggle)})});vG.displayName=GI;var MA="DialogPortal",[yG,qI]=WI(MA,{forceMount:void 0}),YI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=Xs(MA,e);return c.jsx(yG,{scope:e,forceMount:t,children:_.Children.map(r,a=>c.jsx(ls,{present:t||i.open,children:c.jsx(cv,{asChild:!0,container:s,children:a})}))})};YI.displayName=MA;var tx="DialogOverlay",KI=_.forwardRef((n,e)=>{const t=qI(tx,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Xs(tx,n.__scopeDialog);return i.modal?c.jsx(ls,{present:r||i.open,children:c.jsx(wG,{...s,ref:e})}):null});KI.displayName=tx;var xG=Ru("DialogOverlay.RemoveScroll"),wG=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Xs(tx,t);return c.jsx(yw,{as:xG,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(oe.div,{"data-state":DA(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Lu="DialogContent",XI=_.forwardRef((n,e)=>{const t=qI(Lu,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=Xs(Lu,n.__scopeDialog);return c.jsx(ls,{present:r||i.open,children:i.modal?c.jsx(bG,{...s,ref:e}):c.jsx(_G,{...s,ref:e})})});XI.displayName=Lu;var bG=_.forwardRef((n,e)=>{const t=Xs(Lu,n.__scopeDialog),r=_.useRef(null),s=He(e,t.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return kA(i)},[]),c.jsx(QI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(n.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:de(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:de(n.onFocusOutside,i=>i.preventDefault())})}),_G=_.forwardRef((n,e)=>{const t=Xs(Lu,n.__scopeDialog),r=_.useRef(!1),s=_.useRef(!1);return c.jsx(QI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(r.current||(o=t.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),QI=_.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=n,o=Xs(Lu,t),l=_.useRef(null),u=He(e,l);return vA(),c.jsxs(c.Fragment,{children:[c.jsx(hw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(lv,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":DA(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(SG,{titleId:o.titleId}),c.jsx(AG,{contentRef:l,descriptionId:o.descriptionId})]})]})}),IA="DialogTitle",JI=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Xs(IA,t);return c.jsx(oe.h2,{id:s.titleId,...r,ref:e})});JI.displayName=IA;var ZI="DialogDescription",eD=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Xs(ZI,t);return c.jsx(oe.p,{id:s.descriptionId,...r,ref:e})});eD.displayName=ZI;var tD="DialogClose",nD=_.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=Xs(tD,t);return c.jsx(oe.button,{type:"button",...r,ref:e,onClick:de(n.onClick,()=>s.onOpenChange(!1))})});nD.displayName=tD;function DA(n){return n?"open":"closed"}var rD="DialogTitleWarning",[dQ,sD]=m3(rD,{contentName:Lu,titleName:IA,docsSlug:"dialog"}),SG=({titleId:n})=>{const e=sD(rD),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},EG="DialogDescriptionWarning",AG=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sD(EG).contentName}}.`;return _.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},iD=VI,aD=YI,OA=KI,LA=XI,oD=JI,lD=eD,CG=nD;const Sw=iD,NG=aD,cD=_.forwardRef(({className:n,...e},t)=>c.jsx(OA,{ref:t,className:ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));cD.displayName=OA.displayName;const wv=_.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(NG,{children:[c.jsx(cD,{}),c.jsxs(LA,{ref:r,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,c.jsxs(CG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(zl,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wv.displayName=LA.displayName;const bv=({className:n,...e})=>c.jsx("div",{className:ee("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});bv.displayName="DialogHeader";const _v=_.forwardRef(({className:n,...e},t)=>c.jsx(oD,{ref:t,className:ee("text-lg font-semibold leading-none tracking-tight",n),...e}));_v.displayName=oD.displayName;const kG=_.forwardRef(({className:n,...e},t)=>c.jsx(lD,{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));kG.displayName=lD.displayName;var jG="Label",uD=_.forwardRef((n,e)=>c.jsx(oe.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));uD.displayName=jG;var dD=uD;const PG=dv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=_.forwardRef(({className:n,...e},t)=>c.jsx(dD,{ref:t,className:ee(PG(),n),...e}));Be.displayName=dD.displayName;const FA=_.forwardRef(({className:n,...e},t)=>c.jsx("textarea",{className:ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));FA.displayName="Textarea";var ej=1,TG=.9,RG=.8,MG=.17,Ob=.1,Lb=.999,IG=.9999,DG=.99,OG=/[\\\/_+.#"@\[\(\{&]/,LG=/[\\\/_+.#"@\[\(\{&]/g,FG=/[\s-]/,hD=/[\s-]/g;function T_(n,e,t,r,s,i,a){if(i===e.length)return s===n.length?ej:DG;var o=`${s},${i}`;if(a[o]!==void 0)return a[o];for(var l=r.charAt(i),u=t.indexOf(l,s),h=0,f,p,m,y;u>=0;)f=T_(n,e,t,r,u+1,i+1,a),f>h&&(u===s?f*=ej:OG.test(n.charAt(u-1))?(f*=RG,m=n.slice(s,u-1).match(LG),m&&s>0&&(f*=Math.pow(Lb,m.length))):FG.test(n.charAt(u-1))?(f*=TG,y=n.slice(s,u-1).match(hD),y&&s>0&&(f*=Math.pow(Lb,y.length))):(f*=MG,s>0&&(f*=Math.pow(Lb,u-s))),n.charAt(u)!==e.charAt(i)&&(f*=IG)),(f<Ob&&t.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&t.charAt(u-1)!==r.charAt(i))&&(p=T_(n,e,t,r,u+1,i+2,a),p*Ob>f&&(f=p*Ob)),f>h&&(h=f),u=t.indexOf(l,u+1);return a[o]=h,h}function tj(n){return n.toLowerCase().replace(hD," ")}function $G(n,e,t){return n=t&&t.length>0?`${n+" "+t.join(" ")}`:n,T_(n,e,tj(n),tj(e),0,0,{})}var ip='[cmdk-group=""]',Fb='[cmdk-group-items=""]',BG='[cmdk-group-heading=""]',fD='[cmdk-item=""]',nj=`${fD}:not([aria-disabled="true"])`,R_="cmdk-item-select",fd="data-value",zG=(n,e,t)=>$G(n,e,t),pD=_.createContext(void 0),Sv=()=>_.useContext(pD),mD=_.createContext(void 0),$A=()=>_.useContext(mD),gD=_.createContext(void 0),vD=_.forwardRef((n,e)=>{let t=pd(()=>{var $,W;return{search:"",value:(W=($=n.value)!=null?$:n.defaultValue)!=null?W:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=pd(()=>new Set),s=pd(()=>new Map),i=pd(()=>new Map),a=pd(()=>new Set),o=yD(n),{label:l,children:u,value:h,onValueChange:f,filter:p,shouldFilter:m,loop:y,disablePointerSelection:g=!1,vimBindings:w=!0,...v}=n,x=Vn(),b=Vn(),E=Vn(),A=_.useRef(null),C=JG();Fu(()=>{if(h!==void 0){let $=h.trim();t.current.value=$,N.emit()}},[h]),Fu(()=>{C(6,F)},[]);let N=_.useMemo(()=>({subscribe:$=>(a.current.add($),()=>a.current.delete($)),snapshot:()=>t.current,setState:($,W,X)=>{var Y,le,U,fe;if(!Object.is(t.current[$],W)){if(t.current[$]=W,$==="search")R(),M(),C(1,I);else if($==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Se=document.getElementById(E);Se?Se.focus():(Y=document.getElementById(x))==null||Y.focus()}if(C(7,()=>{var Se;t.current.selectedItemId=(Se=O())==null?void 0:Se.id,N.emit()}),X||C(5,F),((le=o.current)==null?void 0:le.value)!==void 0){let Se=W??"";(fe=(U=o.current).onValueChange)==null||fe.call(U,Se);return}}N.emit()}},emit:()=>{a.current.forEach($=>$())}}),[]),P=_.useMemo(()=>({value:($,W,X)=>{var Y;W!==((Y=i.current.get($))==null?void 0:Y.value)&&(i.current.set($,{value:W,keywords:X}),t.current.filtered.items.set($,T(W,X)),C(2,()=>{M(),N.emit()}))},item:($,W)=>(r.current.add($),W&&(s.current.has(W)?s.current.get(W).add($):s.current.set(W,new Set([$]))),C(3,()=>{R(),M(),t.current.value||I(),N.emit()}),()=>{i.current.delete($),r.current.delete($),t.current.filtered.items.delete($);let X=O();C(4,()=>{R(),(X==null?void 0:X.getAttribute("id"))===$&&I(),N.emit()})}),group:$=>(s.current.has($)||s.current.set($,new Set),()=>{i.current.delete($),s.current.delete($)}),filter:()=>o.current.shouldFilter,label:l||n["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:x,inputId:E,labelId:b,listInnerRef:A}),[]);function T($,W){var X,Y;let le=(Y=(X=o.current)==null?void 0:X.filter)!=null?Y:zG;return $?le($,t.current.search,W):0}function M(){if(!t.current.search||o.current.shouldFilter===!1)return;let $=t.current.filtered.items,W=[];t.current.filtered.groups.forEach(Y=>{let le=s.current.get(Y),U=0;le.forEach(fe=>{let Se=$.get(fe);U=Math.max(Se,U)}),W.push([Y,U])});let X=A.current;V().sort((Y,le)=>{var U,fe;let Se=Y.getAttribute("id"),Ae=le.getAttribute("id");return((U=$.get(Ae))!=null?U:0)-((fe=$.get(Se))!=null?fe:0)}).forEach(Y=>{let le=Y.closest(Fb);le?le.appendChild(Y.parentElement===le?Y:Y.closest(`${Fb} > *`)):X.appendChild(Y.parentElement===X?Y:Y.closest(`${Fb} > *`))}),W.sort((Y,le)=>le[1]-Y[1]).forEach(Y=>{var le;let U=(le=A.current)==null?void 0:le.querySelector(`${ip}[${fd}="${encodeURIComponent(Y[0])}"]`);U==null||U.parentElement.appendChild(U)})}function I(){let $=V().find(X=>X.getAttribute("aria-disabled")!=="true"),W=$==null?void 0:$.getAttribute(fd);N.setState("value",W||void 0)}function R(){var $,W,X,Y;if(!t.current.search||o.current.shouldFilter===!1){t.current.filtered.count=r.current.size;return}t.current.filtered.groups=new Set;let le=0;for(let U of r.current){let fe=(W=($=i.current.get(U))==null?void 0:$.value)!=null?W:"",Se=(Y=(X=i.current.get(U))==null?void 0:X.keywords)!=null?Y:[],Ae=T(fe,Se);t.current.filtered.items.set(U,Ae),Ae>0&&le++}for(let[U,fe]of s.current)for(let Se of fe)if(t.current.filtered.items.get(Se)>0){t.current.filtered.groups.add(U);break}t.current.filtered.count=le}function F(){var $,W,X;let Y=O();Y&&((($=Y.parentElement)==null?void 0:$.firstChild)===Y&&((X=(W=Y.closest(ip))==null?void 0:W.querySelector(BG))==null||X.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function O(){var $;return($=A.current)==null?void 0:$.querySelector(`${fD}[aria-selected="true"]`)}function V(){var $;return Array.from((($=A.current)==null?void 0:$.querySelectorAll(nj))||[])}function B($){let W=V()[$];W&&N.setState("value",W.getAttribute(fd))}function L($){var W;let X=O(),Y=V(),le=Y.findIndex(fe=>fe===X),U=Y[le+$];(W=o.current)!=null&&W.loop&&(U=le+$<0?Y[Y.length-1]:le+$===Y.length?Y[0]:Y[le+$]),U&&N.setState("value",U.getAttribute(fd))}function D($){let W=O(),X=W==null?void 0:W.closest(ip),Y;for(;X&&!Y;)X=$>0?XG(X,ip):QG(X,ip),Y=X==null?void 0:X.querySelector(nj);Y?N.setState("value",Y.getAttribute(fd)):L($)}let z=()=>B(V().length-1),H=$=>{$.preventDefault(),$.metaKey?z():$.altKey?D(1):L(1)},Z=$=>{$.preventDefault(),$.metaKey?B(0):$.altKey?D(-1):L(-1)};return _.createElement(oe.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:$=>{var W;(W=v.onKeyDown)==null||W.call(v,$);let X=$.nativeEvent.isComposing||$.keyCode===229;if(!($.defaultPrevented||X))switch($.key){case"n":case"j":{w&&$.ctrlKey&&H($);break}case"ArrowDown":{H($);break}case"p":case"k":{w&&$.ctrlKey&&Z($);break}case"ArrowUp":{Z($);break}case"Home":{$.preventDefault(),B(0);break}case"End":{$.preventDefault(),z();break}case"Enter":{$.preventDefault();let Y=O();if(Y){let le=new Event(R_);Y.dispatchEvent(le)}}}}},_.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:eq},l),Ew(n,$=>_.createElement(mD.Provider,{value:N},_.createElement(pD.Provider,{value:P},$))))}),UG=_.forwardRef((n,e)=>{var t,r;let s=Vn(),i=_.useRef(null),a=_.useContext(gD),o=Sv(),l=yD(n),u=(r=(t=l.current)==null?void 0:t.forceMount)!=null?r:a==null?void 0:a.forceMount;Fu(()=>{if(!u)return o.item(s,a==null?void 0:a.id)},[u]);let h=xD(s,i,[n.value,n.children,i],n.keywords),f=$A(),p=Rl(C=>C.value&&C.value===h.current),m=Rl(C=>u||o.filter()===!1?!0:C.search?C.filtered.items.get(s)>0:!0);_.useEffect(()=>{let C=i.current;if(!(!C||n.disabled))return C.addEventListener(R_,y),()=>C.removeEventListener(R_,y)},[m,n.onSelect,n.disabled]);function y(){var C,N;g(),(N=(C=l.current).onSelect)==null||N.call(C,h.current)}function g(){f.setState("value",h.current,!0)}if(!m)return null;let{disabled:w,value:v,onSelect:x,forceMount:b,keywords:E,...A}=n;return _.createElement(oe.div,{ref:Tu(i,e),...A,id:s,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!p,"data-disabled":!!w,"data-selected":!!p,onPointerMove:w||o.getDisablePointerSelection()?void 0:g,onClick:w?void 0:y},n.children)}),HG=_.forwardRef((n,e)=>{let{heading:t,children:r,forceMount:s,...i}=n,a=Vn(),o=_.useRef(null),l=_.useRef(null),u=Vn(),h=Sv(),f=Rl(m=>s||h.filter()===!1?!0:m.search?m.filtered.groups.has(a):!0);Fu(()=>h.group(a),[]),xD(a,o,[n.value,n.heading,l]);let p=_.useMemo(()=>({id:a,forceMount:s}),[s]);return _.createElement(oe.div,{ref:Tu(o,e),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},t&&_.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),Ew(n,m=>_.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},_.createElement(gD.Provider,{value:p},m))))}),WG=_.forwardRef((n,e)=>{let{alwaysRender:t,...r}=n,s=_.useRef(null),i=Rl(a=>!a.search);return!t&&!i?null:_.createElement(oe.div,{ref:Tu(s,e),...r,"cmdk-separator":"",role:"separator"})}),VG=_.forwardRef((n,e)=>{let{onValueChange:t,...r}=n,s=n.value!=null,i=$A(),a=Rl(u=>u.search),o=Rl(u=>u.selectedItemId),l=Sv();return _.useEffect(()=>{n.value!=null&&i.setState("search",n.value)},[n.value]),_.createElement(oe.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:s?n.value:a,onChange:u=>{s||i.setState("search",u.target.value),t==null||t(u.target.value)}})}),GG=_.forwardRef((n,e)=>{let{children:t,label:r="Suggestions",...s}=n,i=_.useRef(null),a=_.useRef(null),o=Rl(u=>u.selectedItemId),l=Sv();return _.useEffect(()=>{if(a.current&&i.current){let u=a.current,h=i.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=u.offsetHeight;h.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(f),p.unobserve(u)}}},[]),_.createElement(oe.div,{ref:Tu(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},Ew(n,u=>_.createElement("div",{ref:Tu(a,l.listInnerRef),"cmdk-list-sizer":""},u)))}),qG=_.forwardRef((n,e)=>{let{open:t,onOpenChange:r,overlayClassName:s,contentClassName:i,container:a,...o}=n;return _.createElement(iD,{open:t,onOpenChange:r},_.createElement(aD,{container:a},_.createElement(OA,{"cmdk-overlay":"",className:s}),_.createElement(LA,{"aria-label":n.label,"cmdk-dialog":"",className:i},_.createElement(vD,{ref:e,...o}))))}),YG=_.forwardRef((n,e)=>Rl(t=>t.filtered.count===0)?_.createElement(oe.div,{ref:e,...n,"cmdk-empty":"",role:"presentation"}):null),KG=_.forwardRef((n,e)=>{let{progress:t,children:r,label:s="Loading...",...i}=n;return _.createElement(oe.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ew(n,a=>_.createElement("div",{"aria-hidden":!0},a)))}),dr=Object.assign(vD,{List:GG,Item:UG,Input:VG,Group:HG,Separator:WG,Dialog:qG,Empty:YG,Loading:KG});function XG(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function QG(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function yD(n){let e=_.useRef(n);return Fu(()=>{e.current=n}),e}var Fu=typeof window>"u"?_.useEffect:_.useLayoutEffect;function pd(n){let e=_.useRef();return e.current===void 0&&(e.current=n()),e}function Rl(n){let e=$A(),t=()=>n(e.snapshot());return _.useSyncExternalStore(e.subscribe,t,t)}function xD(n,e,t,r=[]){let s=_.useRef(),i=Sv();return Fu(()=>{var a;let o=(()=>{var u;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(u=h.current.textContent)==null?void 0:u.trim():s.current}})(),l=r.map(u=>u.trim());i.value(n,o,l),(a=e.current)==null||a.setAttribute(fd,o),s.current=o}),s}var JG=()=>{let[n,e]=_.useState(),t=pd(()=>new Map);return Fu(()=>{t.current.forEach(r=>r()),t.current=new Map},[n]),(r,s)=>{t.current.set(r,s),e({})}};function ZG(n){let e=n.type;return typeof e=="function"?e(n.props):"render"in e?e.render(n.props):n}function Ew({asChild:n,children:e},t){return n&&_.isValidElement(e)?_.cloneElement(ZG(e),{ref:e.ref},t(e.props.children)):t(e)}var eq={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const wD=_.forwardRef(({className:n,...e},t)=>c.jsx(dr,{ref:t,className:ee("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...e}));wD.displayName=dr.displayName;const bD=_.forwardRef(({className:n,...e},t)=>c.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[c.jsx($R,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),c.jsx(dr.Input,{ref:t,className:ee("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...e})]}));bD.displayName=dr.Input.displayName;const _D=_.forwardRef(({className:n,...e},t)=>c.jsx(dr.List,{ref:t,className:ee("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...e}));_D.displayName=dr.List.displayName;const SD=_.forwardRef((n,e)=>c.jsx(dr.Empty,{ref:e,className:"py-6 text-center text-sm",...n}));SD.displayName=dr.Empty.displayName;const ED=_.forwardRef(({className:n,...e},t)=>c.jsx(dr.Group,{ref:t,className:ee("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...e}));ED.displayName=dr.Group.displayName;const tq=_.forwardRef(({className:n,...e},t)=>c.jsx(dr.Separator,{ref:t,className:ee("-mx-1 h-px bg-border",n),...e}));tq.displayName=dr.Separator.displayName;const AD=_.forwardRef(({className:n,...e},t)=>c.jsx(dr.Item,{ref:t,className:ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",n),...e}));AD.displayName=dr.Item.displayName;var Aw="Popover",[CD,hQ]=Ks(Aw,[gw]),Ev=gw(),[nq,Gl]=CD(Aw),ND=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=n,o=Ev(e),l=_.useRef(null),[u,h]=_.useState(!1),[f,p]=Mu({prop:r,defaultProp:s??!1,onChange:i,caller:Aw});return c.jsx(kM,{...o,children:c.jsx(nq,{scope:e,contentId:Vn(),triggerRef:l,open:f,onOpenChange:p,onOpenToggle:_.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:u,onCustomAnchorAdd:_.useCallback(()=>h(!0),[]),onCustomAnchorRemove:_.useCallback(()=>h(!1),[]),modal:a,children:t})})};ND.displayName=Aw;var kD="PopoverAnchor",rq=_.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Gl(kD,t),i=Ev(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=s;return _.useEffect(()=>(a(),()=>o()),[a,o]),c.jsx(NA,{...i,...r,ref:e})});rq.displayName=kD;var jD="PopoverTrigger",PD=_.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Gl(jD,t),i=Ev(t),a=He(e,s.triggerRef),o=c.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":DD(s.open),...r,ref:a,onClick:de(n.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:c.jsx(NA,{asChild:!0,...i,children:o})});PD.displayName=jD;var BA="PopoverPortal",[sq,iq]=CD(BA,{forceMount:void 0}),TD=n=>{const{__scopePopover:e,forceMount:t,children:r,container:s}=n,i=Gl(BA,e);return c.jsx(sq,{scope:e,forceMount:t,children:c.jsx(ls,{present:t||i.open,children:c.jsx(cv,{asChild:!0,container:s,children:r})})})};TD.displayName=BA;var Tf="PopoverContent",RD=_.forwardRef((n,e)=>{const t=iq(Tf,n.__scopePopover),{forceMount:r=t.forceMount,...s}=n,i=Gl(Tf,n.__scopePopover);return c.jsx(ls,{present:r||i.open,children:i.modal?c.jsx(oq,{...s,ref:e}):c.jsx(lq,{...s,ref:e})})});RD.displayName=Tf;var aq=Ru("PopoverContent.RemoveScroll"),oq=_.forwardRef((n,e)=>{const t=Gl(Tf,n.__scopePopover),r=_.useRef(null),s=He(e,r),i=_.useRef(!1);return _.useEffect(()=>{const a=r.current;if(a)return kA(a)},[]),c.jsx(yw,{as:aq,allowPinchZoom:!0,children:c.jsx(MD,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(n.onCloseAutoFocus,a=>{var o;a.preventDefault(),i.current||(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:de(n.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:de(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),lq=_.forwardRef((n,e)=>{const t=Gl(Tf,n.__scopePopover),r=_.useRef(!1),s=_.useRef(!1);return c.jsx(MD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(r.current||(o=t.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),MD=_.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:h,...f}=n,p=Gl(Tf,t),m=Ev(t);return vA(),c.jsx(hw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(lv,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:c.jsx(jM,{"data-state":DD(p.open),role:"dialog",id:p.contentId,...m,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ID="PopoverClose",cq=_.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Gl(ID,t);return c.jsx(oe.button,{type:"button",...r,ref:e,onClick:de(n.onClick,()=>s.onOpenChange(!1))})});cq.displayName=ID;var uq="PopoverArrow",dq=_.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Ev(t);return c.jsx(PM,{...s,...r,ref:e})});dq.displayName=uq;function DD(n){return n?"open":"closed"}var hq=ND,fq=PD,pq=TD,OD=RD;const Fy=hq,$y=fq,Xp=_.forwardRef(({className:n,align:e="center",sideOffset:t=4,...r},s)=>c.jsx(pq,{children:c.jsx(OD,{ref:s,align:e,sideOffset:t,className:ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}));Xp.displayName=OD.displayName;const mq=({onClose:n,onSuccess:e})=>{const[t,r]=_.useState([]),[s,i]=_.useState(""),[a,o]=_.useState(new Date().toISOString().split("T")[0]),[l,u]=_.useState(""),[h,f]=_.useState(""),[p,m]=_.useState(""),[y,g]=_.useState(""),[w,v]=_.useState(""),[x,b]=_.useState(!1),[E,A]=_.useState(!1),[C,N]=_.useState(""),{toast:P}=Jx();_.useEffect(()=>{T()},[T]);const T=_.useCallback(async()=>{try{const{data:F,error:O}=await se.from("procedures").select(`
          id,
          code,
          title_de,
          procedure_categories!inner(title_de)
        `).eq("active",!0).order("title_de");if(O)throw O;const V=(F==null?void 0:F.map(B=>({id:B.id,code:B.code,title_de:B.title_de,category:{title_de:B.procedure_categories.title_de}})))||[];r(V)}catch(F){console.error("Error loading procedures:",F),P({title:"Fehler",description:"Prozeduren konnten nicht geladen werden.",variant:"destructive"})}},[P]),M=async F=>{if(F.preventDefault(),!s||!a||!l){P({title:"Fehler",description:"Bitte füllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}A(!0);try{const{data:{user:O}}=await se.auth.getUser();if(!O)throw new Error("Not authenticated");const{error:V}=await se.from("procedure_logs").insert({user_id:O.id,procedure_id:s,performed_date:a,role_in_surgery:l,hospital:h||null,supervisor:p||null,notes:y||null,case_id:w||null});if(V)throw V;P({title:"Erfolg",description:"Prozedur wurde erfolgreich erfasst."}),e()}catch(O){console.error("Error saving procedure:",O),P({title:"Fehler",description:"Prozedur konnte nicht gespeichert werden.",variant:"destructive"})}finally{A(!1)}},I=t.filter(F=>F.title_de.toLowerCase().includes(C.toLowerCase())||F.code.toLowerCase().includes(C.toLowerCase())||F.category.title_de.toLowerCase().includes(C.toLowerCase())),R=t.find(F=>F.id===s);return c.jsx(Sw,{open:!0,onOpenChange:n,children:c.jsxs(wv,{className:"sm:max-w-[600px]",children:[c.jsx(bv,{children:c.jsxs(_v,{className:"flex items-center gap-2",children:[c.jsx(Vd,{className:"w-5 h-5"}),"Prozedur erfassen"]})}),c.jsxs("form",{onSubmit:M,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Be,{htmlFor:"procedure",className:"text-sm font-medium",children:["Prozedur ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs(Fy,{open:x,onOpenChange:b,children:[c.jsx($y,{asChild:!0,children:c.jsxs(J,{variant:"outline",role:"combobox","aria-expanded":x,className:"w-full justify-between",children:[R?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(me,{variant:"outline",className:"text-xs",children:R.code}),c.jsx("span",{children:R.title_de})]}):"Prozedur auswählen...",c.jsx(h5,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),c.jsx(Xp,{className:"w-full p-0",children:c.jsxs(wD,{children:[c.jsx(bD,{placeholder:"Prozedur suchen...",value:C,onValueChange:N}),c.jsx(SD,{children:"Keine Prozedur gefunden."}),c.jsx(_D,{children:c.jsx(ED,{children:I.map(F=>c.jsxs(AD,{value:`${F.code} ${F.title_de}`,onSelect:()=>{i(F.id),b(!1)},children:[c.jsx(IR,{className:ee("mr-2 h-4 w-4",s===F.id?"opacity-100":"opacity-0")}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(me,{variant:"outline",className:"text-xs",children:F.code}),c.jsx("span",{children:F.title_de})]}),c.jsx("span",{className:"text-xs text-muted-foreground",children:F.category.title_de})]})]},F.id))})})]})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Be,{htmlFor:"date",className:"text-sm font-medium",children:["Datum ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Ze,{id:"date",type:"date",value:a,onChange:F=>o(F.target.value),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(Be,{htmlFor:"role",className:"text-sm font-medium",children:["Rolle ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs(ji,{value:l,onValueChange:u,required:!0,children:[c.jsx(Ls,{children:c.jsx(Pi,{placeholder:"Rolle auswählen"})}),c.jsxs(Fs,{children:[c.jsx(yt,{value:"responsible",children:"Verantwortlich (1.0x)"}),c.jsx(yt,{value:"instructing",children:"Instruierend (0.75x)"}),c.jsx(yt,{value:"assistant",children:"Assistent (0.5x)"})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"hospital",className:"text-sm font-medium",children:"Klinik/Spital"}),c.jsx(Ze,{id:"hospital",value:h,onChange:F=>f(F.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"caseId",className:"text-sm font-medium",children:"Fall-ID"}),c.jsx(Ze,{id:"caseId",value:w,onChange:F=>v(F.target.value),placeholder:"z.B. 2024-001234"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"supervisor",className:"text-sm font-medium",children:"Supervisor"}),c.jsx(Ze,{id:"supervisor",value:p,onChange:F=>m(F.target.value),placeholder:"z.B. Dr. med. Max Mustermann"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"notes",className:"text-sm font-medium",children:"Notizen"}),c.jsx(FA,{id:"notes",value:y,onChange:F=>g(F.target.value),placeholder:"Besonderheiten, Komplikationen, Lernpunkte...",rows:3})]}),l&&c.jsx("div",{className:"p-3 bg-muted rounded-medical",children:c.jsxs("div",{className:"text-sm",children:[c.jsx("strong",{children:"Gewichtung:"})," "," ",l==="responsible"&&"1.0 Punkte (Vollwertung)",l==="instructing"&&"0.75 Punkte (Instruierend)",l==="assistant"&&"0.5 Punkte (Assistenz)"]})}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(J,{type:"button",variant:"outline",onClick:n,children:"Abbrechen"}),c.jsx(J,{type:"submit",disabled:E,children:E?"Speichern...":"Speichern"})]})]})]})})},gq=dv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Kd=_.forwardRef(({className:n,variant:e,...t},r)=>c.jsx("div",{ref:r,role:"alert",className:ee(gq({variant:e}),n),...t}));Kd.displayName="Alert";const vq=_.forwardRef(({className:n,...e},t)=>c.jsx("h5",{ref:t,className:ee("mb-1 font-medium leading-none tracking-tight",n),...e}));vq.displayName="AlertTitle";const Xd=_.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("text-sm [&_p]:leading-relaxed",n),...e}));Xd.displayName="AlertDescription";const yq=({modules:n,userPgyLevel:e})=>{const[t,r]=_.useState([]),[s,i]=_.useState([]),[a,o]=_.useState(!0),l=_.useCallback(async()=>{var f;try{o(!0);const{data:{user:p}}=await se.auth.getUser();if(!p)return;const m=[];for(const y of n){const{data:g}=await se.from("procedures").select(`
            id,
            code,
            title_de,
            min_required_by_pgy
          `).eq("category_id",y.id).eq("active",!0);for(const w of g||[]){const v=((f=w.min_required_by_pgy)==null?void 0:f[`pgy${e}`])||0;if(v>0){const{data:x}=await se.from("procedure_logs").select("role_in_surgery, weighted_score").eq("procedure_id",w.id).eq("user_id",p.id),b=(x==null?void 0:x.reduce((A,C)=>A+(C.weighted_score||0),0))||0,E=Math.max(0,v-b);if(E>0){const A=b/v*100,C=E*(100-A)/100;m.push({procedure_id:w.id,procedure_title:w.title_de,procedure_code:w.code,module_name:y.title_de,required:v,current_weighted:b,gap:E,priority_score:C})}}}}m.sort((y,g)=>g.priority_score-y.priority_score),r(m.slice(0,10)),await u(p.id)}catch(p){console.error("Error in gap analysis:",p)}finally{o(!1)}},[n,e]);_.useEffect(()=>{l()},[l]);const u=async f=>{try{const p=[],m=new Date;for(let g=7;g>=0;g--){const w=new Date(m);w.setMonth(w.getMonth()-g*3);const v=w.getFullYear(),x=Math.floor(w.getMonth()/3)+1;p.push({year:v,quarter:x,label:`Q${x} ${v}`,startDate:new Date(v,(x-1)*3,1),endDate:new Date(v,x*3,0)})}const y=[];for(const g of p){const{data:w}=await se.from("procedure_logs").select("weighted_score").eq("user_id",f).gte("performed_date",g.startDate.toISOString().split("T")[0]).lte("performed_date",g.endDate.toISOString().split("T")[0]),v=(w==null?void 0:w.reduce((b,E)=>b+(E.weighted_score||0),0))||0,x=(w==null?void 0:w.length)||0;y.push({...g,totalWeighted:v,procedureCount:x,intensity:Math.min(100,x/20*100)})}i(y)}catch(p){console.error("Error loading quarterly progress:",p)}},h=f=>f===0?"bg-gray-100":f<25?"bg-green-100":f<50?"bg-green-200":f<75?"bg-green-300":"bg-green-400";return a?c.jsx(ae,{className:"medical-card mb-8",children:c.jsx(ze,{className:"p-8",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ae,{className:"medical-card",children:[c.jsx(pt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(H0,{className:"w-5 h-5 text-orange-500"}),"Top Ausbildungslücken"]})}),c.jsx(ze,{children:t.length===0?c.jsx(Kd,{children:c.jsx(Xd,{children:"Keine größeren Lücken identifiziert. Alle erforderlichen Prozeduren sind auf gutem Weg!"})}):c.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((f,p)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs(me,{variant:"outline",className:"text-xs",children:["#",p+1]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:f.procedure_title}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.module_name," • ",f.procedure_code]})]})]})}),c.jsxs("div",{className:"text-right min-w-32",children:[c.jsxs("div",{className:"text-sm font-medium",children:[f.current_weighted.toFixed(1)," / ",f.required]}),c.jsxs("div",{className:"text-xs text-orange-600",children:["Lücke: ",f.gap.toFixed(1)," Punkte"]}),c.jsx(Nf,{value:f.current_weighted/f.required*100,className:"h-2 mt-1 w-20"})]})]},f.procedure_id))})})]}),c.jsxs(ae,{className:"medical-card",children:[c.jsx(pt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(Fi,{className:"w-5 h-5 text-blue-500"}),"Aktivitäts-Heatmap (Quartale)"]})}),c.jsxs(ze,{children:[c.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2",children:s.map(f=>c.jsxs("div",{className:`
                  p-3 rounded-medical border text-center text-xs font-medium
                  ${h(f.intensity)}
                  hover:scale-105 transition-transform cursor-pointer
                `,title:`${f.label}: ${f.procedureCount} Eingriffe (${f.totalWeighted.toFixed(1)} Punkte)`,children:[c.jsx("div",{children:f.label}),c.jsx("div",{className:"text-xs opacity-75 mt-1",children:f.procedureCount})]},`${f.year}-${f.quarter}`))}),c.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[c.jsx("span",{children:"Weniger Aktivität"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-100 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-200 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-300 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-400 rounded"})]}),c.jsx("span",{children:"Mehr Aktivität"})]})]})]}),n.length>0&&c.jsxs(ae,{className:"medical-card",children:[c.jsx(pt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(x5,{className:"w-5 h-5 text-yellow-500"}),"Rollen-Balance Analyse"]})}),c.jsx(ze,{children:(()=>{const f=n.reduce((y,g)=>{var w;return y+(((w=g.progress)==null?void 0:w.responsible_count)||0)},0),p=n.reduce((y,g)=>{var w,v,x;return y+(((w=g.progress)==null?void 0:w.responsible_count)||0)+(((v=g.progress)==null?void 0:v.instructing_count)||0)+(((x=g.progress)==null?void 0:x.assistant_count)||0)},0),m=p>0?f/p*100:0;return m>=30?c.jsx(Kd,{children:c.jsxs(Xd,{children:["Ihre Rollen-Balance ist ausgezeichnet! ",m.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher durchgeführt."]})}):c.jsxs(Kd,{children:[c.jsx(H0,{className:"h-4 w-4"}),c.jsxs(Xd,{children:["Achtung: Nur ",m.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher. Ziel: ≥30% für optimale FMH-Bewertung. Fokus auf eigenständige Eingriffe empfohlen."]})]})})()})]})]})},xq=({runId:n,summary:e,stagingData:t,onClose:r,onImportComplete:s})=>{const[i,a]=_.useState(!1),[o,l]=_.useState("summary"),u=m=>{switch(m.status){case"matched":return c.jsxs(me,{variant:"default",className:"bg-success text-success-foreground",children:[c.jsx(Vp,{className:"w-3 h-3 mr-1"}),m.match_method==="exact"?"Exakt":m.match_method==="alias"?"Alias":m.match_method==="fuzzy"?"Ähnlich":"Manuell"]});case"needs_review":return c.jsxs(me,{variant:"destructive",children:[c.jsx(H0,{className:"w-3 h-3 mr-1"}),"Prüfung nötig"]});default:return c.jsx(me,{variant:"secondary",children:"Unbekannt"})}},h=m=>m>=.95?"text-success":m>=.8?"text-warning":"text-destructive",f=async()=>{a(!0);try{console.log("🚀 Starting import commit...");const m=t.filter(v=>v.status==="matched"&&v.matched_proc_id);if(m.length===0){De.error("Keine passenden Prozeduren zum Importieren gefunden.");return}const y=[];for(const v of m){const x={procedure_id:v.matched_proc_id,performed_date:e.standDate||new Date().toISOString().split("T")[0],hospital:`Importiert aus ${e.filename}`,notes:`PDF Import ${e.standDate||new Date().toLocaleDateString("de-DE")} - ${v.module_name}`};if(v.responsible>0)for(let b=0;b<v.responsible;b++)y.push({...x,role_in_surgery:"responsible",notes:`${x.notes} - Verantwortlich ${b+1}/${v.responsible}`});if(v.instructing>0)for(let b=0;b<v.instructing;b++)y.push({...x,role_in_surgery:"instructing",notes:`${x.notes} - Instruierend ${b+1}/${v.instructing}`});if(v.assistant>0)for(let b=0;b<v.assistant;b++)y.push({...x,role_in_surgery:"assistant",notes:`${x.notes} - Assistent ${b+1}/${v.assistant}`})}console.log(`📝 Creating ${y.length} procedure logs...`);const{error:g}=await se.from("procedure_logs").insert(y);if(g)throw console.error("❌ Insert error:",g),g;const{error:w}=await se.from("import_runs").update({status:"completed",finished_at:new Date().toISOString(),summary_json:{imported:y.length,matched:m.length,modules:e.modules.map(v=>v.name)}}).eq("id",n);if(w)throw console.error("❌ Update error:",w),w;console.log("✅ Import completed successfully!"),De.success(`Import erfolgreich! ${y.length} Einträge wurden importiert.`),s()}catch(m){console.error("❌ Import failed:",m),De.error(`Import fehlgeschlagen: ${m.message}`)}finally{a(!1)}},p=async()=>{try{await se.from("import_runs").update({status:"cancelled"}).eq("id",n),De.info("Import wurde abgebrochen."),r()}catch(m){console.error("Error cancelling import:",m),De.error("Fehler beim Abbrechen des Imports.")}};return c.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[c.jsx(ae,{children:c.jsxs(pt,{children:[c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(p5,{className:"w-5 h-5"}),"PDF Import Vorschau"]}),c.jsxs(Kp,{children:["Datei: ",e.filename,e.standDate&&` • Stand: ${new Date(e.standDate).toLocaleDateString("de-DE")}`]})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(J,{variant:o==="summary"?"default":"outline",onClick:()=>l("summary"),children:"Übersicht"}),c.jsxs(J,{variant:o==="modules"?"default":"outline",onClick:()=>l("modules"),children:["Module (",e.modules.length,")"]}),c.jsxs(J,{variant:o==="procedures"?"default":"outline",onClick:()=>l("procedures"),children:["Prozeduren (",e.totalProcedures,")"]})]}),o==="summary"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs(ae,{children:[c.jsx(pt,{className:"pb-2",children:c.jsx(wt,{className:"text-lg",children:"Gesamt"})}),c.jsxs(ze,{children:[c.jsx("div",{className:"text-2xl font-bold",children:e.totalProcedures}),c.jsx("p",{className:"text-muted-foreground",children:"Prozeduren erkannt"})]})]}),c.jsxs(ae,{children:[c.jsx(pt,{className:"pb-2",children:c.jsx(wt,{className:"text-lg text-success",children:"Zugeordnet"})}),c.jsxs(ze,{children:[c.jsx("div",{className:"text-2xl font-bold text-success",children:e.matched}),c.jsx("p",{className:"text-muted-foreground",children:"Automatisch zugeordnet"})]})]}),c.jsxs(ae,{children:[c.jsx(pt,{className:"pb-2",children:c.jsx(wt,{className:"text-lg text-warning",children:"Prüfung nötig"})}),c.jsxs(ze,{children:[c.jsx("div",{className:"text-2xl font-bold text-warning",children:e.needsReview}),c.jsx("p",{className:"text-muted-foreground",children:"Manuelle Prüfung"})]})]})]}),o==="modules"&&c.jsxs(ae,{children:[c.jsxs(pt,{children:[c.jsx(wt,{children:"Erkannte Module"}),c.jsx(Kp,{children:"Übersicht der aus dem PDF extrahierten Module mit Summen"})]}),c.jsx(ze,{children:c.jsxs(kf,{children:[c.jsx(jf,{children:c.jsxs($s,{children:[c.jsx(Re,{children:"Modul"}),c.jsx(Re,{className:"text-right",children:"Minimum"}),c.jsx(Re,{className:"text-right",children:"Verantwortlich"}),c.jsx(Re,{className:"text-right",children:"Instruierend"}),c.jsx(Re,{className:"text-right",children:"Assistent"}),c.jsx(Re,{className:"text-right",children:"Total"})]})}),c.jsx(Pf,{children:e.modules.map((m,y)=>c.jsxs($s,{children:[c.jsx(Me,{className:"font-medium",children:m.name}),c.jsx(Me,{className:"text-right",children:m.minimum}),c.jsx(Me,{className:"text-right",children:m.responsible}),c.jsx(Me,{className:"text-right",children:m.instructing}),c.jsx(Me,{className:"text-right",children:m.assistant}),c.jsx(Me,{className:"text-right font-semibold",children:m.total})]},y))})]})})]}),o==="procedures"&&c.jsxs(ae,{children:[c.jsxs(pt,{children:[c.jsx(wt,{children:"Prozeduren Details"}),c.jsx(Kp,{children:"Alle erkannten Prozeduren mit Zuordnungsstatus"})]}),c.jsx(ze,{children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs(kf,{children:[c.jsx(jf,{children:c.jsxs($s,{children:[c.jsx(Re,{children:"Prozedur"}),c.jsx(Re,{children:"Modul"}),c.jsx(Re,{children:"Status"}),c.jsx(Re,{children:"Zugeordnet zu"}),c.jsx(Re,{className:"text-right",children:"V"}),c.jsx(Re,{className:"text-right",children:"I"}),c.jsx(Re,{className:"text-right",children:"A"}),c.jsx(Re,{className:"text-right",children:"Total"})]})}),c.jsx(Pf,{children:t.map(m=>{var y;return c.jsxs($s,{children:[c.jsx(Me,{className:"font-medium",children:m.proc_name}),c.jsx(Me,{className:"text-sm text-muted-foreground",children:m.module_name}),c.jsx(Me,{children:u(m)}),c.jsx(Me,{children:(y=m.procedures)!=null&&y.title_de?c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:m.procedures.title_de}),m.match_confidence<1&&c.jsxs("div",{className:`text-xs ${h(m.match_confidence)}`,children:[(m.match_confidence*100).toFixed(0),"% Übereinstimmung"]})]}):c.jsx("span",{className:"text-muted-foreground",children:"Keine Zuordnung"})}),c.jsx(Me,{className:"text-right",children:m.responsible}),c.jsx(Me,{className:"text-right",children:m.instructing}),c.jsx(Me,{className:"text-right",children:m.assistant}),c.jsx(Me,{className:"text-right font-semibold",children:m.total})]},m.id)})})]})})})]}),c.jsxs("div",{className:"flex justify-between pt-4",children:[c.jsx(J,{variant:"outline",onClick:p,children:"Abbrechen"}),c.jsxs("div",{className:"flex gap-2",children:[e.needsReview>0&&c.jsxs(J,{variant:"outline",className:"flex items-center gap-2",children:[c.jsx(rA,{className:"w-4 h-4"}),e.needsReview," Prozeduren bearbeiten"]}),c.jsxs(J,{onClick:f,disabled:i||e.matched===0,className:"flex items-center gap-2",children:[c.jsx(tw,{className:"w-4 h-4"}),i?"Importiere...":`${e.matched} Prozeduren importieren`]})]})]})]})},Fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),M_=[.001,0,0,.001,0,0],$b=1.35,kr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_o={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},LD="pdfjs_internal_editor_",ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Ie={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},wq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},By={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},It={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},md={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Cw={ERRORS:0,WARNINGS:1,INFOS:5},nx={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},fy={moveTo:0,lineTo:1,curveTo:2,closePath:3},bq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Nw=Cw.WARNINGS;function _q(n){Number.isInteger(n)&&(Nw=n)}function Sq(){return Nw}function kw(n){Nw>=Cw.INFOS&&console.log(`Info: ${n}`)}function ye(n){Nw>=Cw.WARNINGS&&console.log(`Warning: ${n}`)}function Je(n){throw new Error(n)}function Ft(n,e){n||Je(e)}function Eq(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function FD(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=jq(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return Eq(r)?r:null}function $D(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&FD(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ke(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Ku=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class rj extends Ku{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Bb extends Ku{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class I_ extends Ku{constructor(e){super(e,"InvalidPDFException")}}class rx extends Ku{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class Aq extends Ku{constructor(e){super(e,"FormatError")}}class Ml extends Ku{constructor(e){super(e,"AbortException")}}function BD(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Je("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function Av(n){typeof n!="string"&&Je("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function Cq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Nq(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function kq(){try{return new Function(""),!0}catch{return!1}}class yn{static get isLittleEndian(){return ke(this,"isLittleEndian",Nq())}static get isEvalSupported(){return ke(this,"isEvalSupported",kq())}static get isOffscreenCanvasSupported(){return ke(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ke(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ke(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ke(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const zb=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Wa,zy,D_;class ue{static makeHexColor(e,t,r){return`#${zb[e]}${zb[t]}${zb[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5];for(let h=0;h<6;h+=2){const f=e[r+h],p=e[r+h+1];e[r+h]=f*s+p*a+l,e[r+h+1]=f*i+p*o+u}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],h=e[0],f=e[1],p=e[2],m=e[3];let y=s*h+l,g=y,w=s*p+l,v=w,x=o*f+u,b=x,E=o*m+u,A=E;if(i!==0||a!==0){const C=i*h,N=i*p,P=a*f,T=a*m;y+=P,v+=P,w+=T,g+=T,x+=C,A+=C,E+=N,b+=N}r[0]=Math.min(r[0],y,w,g,v),r[1]=Math.min(r[1],x,E,b,A),r[2]=Math.max(r[2],y,w,g,v),r[3]=Math.max(r[3],x,E,b,A)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],a=e[3],o=r**2+s**2,l=r*i+s*a,u=i**2+a**2,h=(o+u)/2,f=Math.sqrt(h**2-(o*u-l**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,a,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l),j(this,Wa,D_).call(this,e,r,i,o,t,s,a,l,3*(-e+3*(r-i)+o),6*(e-2*r+i),3*(r-e),u),j(this,Wa,D_).call(this,e,r,i,o,t,s,a,l,3*(-t+3*(s-a)+l),6*(t-2*s+a),3*(s-t),u)}}Wa=new WeakSet,zy=function(e,t,r,s,i,a,o,l,u,h){if(u<=0||u>=1)return;const f=1-u,p=u*u,m=p*u,y=f*(f*(f*e+3*u*t)+3*p*r)+m*s,g=f*(f*(f*i+3*u*a)+3*p*o)+m*l;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],g)},D_=function(e,t,r,s,i,a,o,l,u,h,f,p){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&j(this,Wa,zy).call(this,e,t,r,s,i,a,o,l,-f/h,p);return}const m=h**2-4*f*u;if(m<0)return;const y=Math.sqrt(m),g=2*u;j(this,Wa,zy).call(this,e,t,r,s,i,a,o,l,(-h+y)/g,p),j(this,Wa,zy).call(this,e,t,r,s,i,a,o,l,(-h-y)/g,p)},k(ue,Wa);function jq(n){return decodeURIComponent(escape(n))}let Ub=null,sj=null;function Pq(n){return Ub||(Ub=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,sj=new Map([["ﬅ","ſt"]])),n.replaceAll(Ub,(e,t,r)=>t?t.normalize("NFKC"):sj.get(r))}function zD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),BD(n)}const zA="pdfjs_internal_id_";function Tq(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const a=i.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function $n(n,e,t){return Math.min(Math.max(n,e),t)}function UD(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(BD(n))}function Rq(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Av(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const Zi="http://www.w3.org/2000/svg",oc=class oc{};q(oc,"CSS",96),q(oc,"PDF",72),q(oc,"PDF_TO_CSS_UNITS",oc.CSS/oc.PDF);let Il=oc;async function Cv(n,e="text"){if(gp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Nv{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=a,r*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,f,p,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,f=0,p=0,m=1;break;case 90:h=0,f=1,p=1,m=0;break;case 270:h=0,f=-1,p=-1,m=0;break;case 0:h=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let y,g,w,v;h===0?(y=Math.abs(u-e[1])*r+i,g=Math.abs(l-e[0])*r+a,w=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(y=Math.abs(l-e[0])*r+i,g=Math.abs(u-e[1])*r+a,w=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[h*r,f*r,p*r,m*r,y-h*r*l-p*r*u,g-f*r*l-m*r*u],this.width=w,this.height=v}get rawDims(){const e=this.viewBox;return ke(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Nv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return ue.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];ue.applyTransform(t,this.transform);const r=[e[2],e[3]];return ue.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return ue.applyInverseTransform(r,this.transform),r}}class UA extends Ku{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function jw(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function HA(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Mq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Iq(n,e="document.pdf"){if(typeof n!="string")return e;if(jw(n))return ye('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},i=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(i.test(a))return s(a);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const u of o)if(i.test(u))return s(u);const l=Array.from(r.searchParams.keys()).reverse();for(const u of l)if(i.test(u))return s(u)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return s(l[0])}return e}class ij{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&ye(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ye(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function gp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function os(n){n.preventDefault()}function Dt(n){n.preventDefault(),n.stopPropagation()}function Dq(n){console.log("Deprecated API usage: "+n)}var km;class sx{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;d(this,km)||S(this,km,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,km).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(a+=h,o+=f):u==="+"&&(a-=h,o-=f),new Date(Date.UTC(r,s,i,a,o,l))}}km=new WeakMap,k(sx,km);function Oq(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Nv({viewBox:i,userUnit:1,scale:e,rotation:t})}function Pw(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ye(`Not a valid color format: "${n}"`),[0,0,0])}function Lq(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Pw(r))}e.remove()}function vt(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function Js(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function $u(n,e,t=!1,r=!0){if(e instanceof Nv){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,o=yn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${i}px`,h=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Hi{constructor(){const{pixelRatio:e}=Hi;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let a=1/0,o=1/0,l=1/0;r=Hi.capPixels(r,i),r>0&&(a=Math.sqrt(r/(e*t))),s!==-1&&(o=s/e,l=s/t);const u=Math.min(a,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const O_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var ko,jo,Wr,la,jm,oh,lh,Pm,vx,HD,gn,WD,VD,gd,vp;const sa=class sa{constructor(e){k(this,gn);k(this,ko,null);k(this,jo,null);k(this,Wr);k(this,la,null);k(this,jm,null);k(this,oh,null);k(this,lh,null);S(this,Wr,e),d(sa,Pm)||S(sa,Pm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,ko,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,Wr)._uiManager._signal;e.addEventListener("contextmenu",os,{signal:t}),e.addEventListener("pointerdown",j(sa,vx,HD),{signal:t});const r=S(this,la,document.createElement("div"));r.className="buttons",e.append(r);const s=d(this,Wr).toolbarPosition;if(s){const{style:i}=e,a=d(this,Wr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,ko)}hide(){var e;d(this,ko).classList.add("hidden"),(e=d(this,jo))==null||e.hideDropdown()}show(){var e,t;d(this,ko).classList.remove("hidden"),(e=d(this,jm))==null||e.shown(),(t=d(this,oh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=d(this,Wr),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",d(sa,Pm)[e]),j(this,gn,gd).call(this,r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),d(this,la).append(r)}async addAltText(e){const t=await e.render();j(this,gn,gd).call(this,t),d(this,la).append(t,d(this,gn,vp)),S(this,jm,e)}addComment(e){if(d(this,oh))return;const t=e.render();t&&(j(this,gn,gd).call(this,t),d(this,la).prepend(t,d(this,gn,vp)),S(this,oh,e),e.toolbar=this)}addColorPicker(e){if(d(this,jo))return;S(this,jo,e);const t=e.renderButton();j(this,gn,gd).call(this,t),d(this,la).append(t,d(this,gn,vp))}async addEditSignatureButton(e){const t=S(this,lh,await e.renderEditButton(d(this,Wr)));j(this,gn,gd).call(this,t),d(this,la).append(t,d(this,gn,vp))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){d(this,lh)&&(d(this,lh).title=e)}remove(){var e;d(this,ko).remove(),(e=d(this,jo))==null||e.destroy(),S(this,jo,null)}};ko=new WeakMap,jo=new WeakMap,Wr=new WeakMap,la=new WeakMap,jm=new WeakMap,oh=new WeakMap,lh=new WeakMap,Pm=new WeakMap,vx=new WeakSet,HD=function(e){e.stopPropagation()},gn=new WeakSet,WD=function(e){d(this,Wr)._focusEventsAllowed=!1,Dt(e)},VD=function(e){d(this,Wr)._focusEventsAllowed=!0,Dt(e)},gd=function(e){const t=d(this,Wr)._uiManager._signal;e.addEventListener("focusin",j(this,gn,WD).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",j(this,gn,VD).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",os,{signal:t})},vp=function(){const e=document.createElement("div");return e.className="divider",e},k(sa,vx),k(sa,Pm,null);let L_=sa;var Tm,xc,wc,Dl,GD,qD,YD;class Fq{constructor(e){k(this,Dl);k(this,Tm,null);k(this,xc,null);k(this,wc);S(this,wc,e)}show(e,t,r){const[s,i]=j(this,Dl,qD).call(this,t,r),{style:a}=d(this,xc)||S(this,xc,j(this,Dl,GD).call(this));e.append(d(this,xc)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,xc).remove()}}Tm=new WeakMap,xc=new WeakMap,wc=new WeakMap,Dl=new WeakSet,GD=function(){const e=S(this,xc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",os,{signal:d(this,wc)._signal});const t=S(this,Tm,document.createElement("div"));return t.className="buttons",e.append(t),j(this,Dl,YD).call(this),e},qD=function(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const o=i.x+(t?i.width:0);if(a>r){s=o,r=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,r]},YD=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=d(this,wc)._signal;e.addEventListener("contextmenu",os,{signal:r}),e.addEventListener("click",()=>{d(this,wc).highlightSelection("floating_button")},{signal:r}),d(this,Tm).append(e)};function KD(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var yx;class $q{constructor(){k(this,yx,0)}get id(){return`${LD}${Xt(this,yx)._++}`}}yx=new WeakMap;var ch,Rm,An,uh,Uy;const fC=class fC{constructor(){k(this,uh);k(this,ch,zD());k(this,Rm,0);k(this,An,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return ke(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return j(this,uh,Uy).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return j(this,uh,Uy).call(this,e,e)}async getFromBlob(e,t){const r=await t;return j(this,uh,Uy).call(this,e,r)}async getFromId(e){d(this,An)||S(this,An,new Map);const t=d(this,An).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,An)||S(this,An,new Map);let r=d(this,An).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${d(this,ch)}_${Xt(this,Rm)._++}`,refCounter:1,isSvg:!1},d(this,An).set(e,r),d(this,An).set(r.id,r),r}getSvgUrl(e){const t=d(this,An).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;d(this,An)||S(this,An,new Map);const t=d(this,An).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,ch)}_`)}};ch=new WeakMap,Rm=new WeakMap,An=new WeakMap,uh=new WeakSet,Uy=async function(e,t){d(this,An)||S(this,An,new Map);let r=d(this,An).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${d(this,ch)}_${Xt(this,Rm)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await Cv(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=fC._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,h)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,u()},a.onload=async()=>{const f=r.svgUrl=a.result;o.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=a.onerror=h});a.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){ye(s),r=null}return d(this,An).set(e,r),r&&d(this,An).set(r.id,r),r};let F_=fC;var Nt,Po,Mm,gt;class Bq{constructor(e=128){k(this,Nt,[]);k(this,Po,!1);k(this,Mm);k(this,gt,-1);S(this,Mm,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),d(this,Po))return;const l={cmd:e,undo:t,post:r,type:i};if(d(this,gt)===-1){d(this,Nt).length>0&&(d(this,Nt).length=0),S(this,gt,0),d(this,Nt).push(l);return}if(a&&d(this,Nt)[d(this,gt)].type===i){o&&(l.undo=d(this,Nt)[d(this,gt)].undo),d(this,Nt)[d(this,gt)]=l;return}const u=d(this,gt)+1;u===d(this,Mm)?d(this,Nt).splice(0,1):(S(this,gt,u),u<d(this,Nt).length&&d(this,Nt).splice(u)),d(this,Nt).push(l)}undo(){if(d(this,gt)===-1)return;S(this,Po,!0);const{undo:e,post:t}=d(this,Nt)[d(this,gt)];e(),t==null||t(),S(this,Po,!1),S(this,gt,d(this,gt)-1)}redo(){if(d(this,gt)<d(this,Nt).length-1){S(this,gt,d(this,gt)+1),S(this,Po,!0);const{cmd:e,post:t}=d(this,Nt)[d(this,gt)];e(),t==null||t(),S(this,Po,!1)}}hasSomethingToUndo(){return d(this,gt)!==-1}hasSomethingToRedo(){return d(this,gt)<d(this,Nt).length-1}cleanType(e){if(d(this,gt)!==-1){for(let t=d(this,gt);t>=0;t--)if(d(this,Nt)[t].type!==e){d(this,Nt).splice(t+1,d(this,gt)-t),S(this,gt,t);return}d(this,Nt).length=0,S(this,gt,-1)}}destroy(){S(this,Nt,null)}}Nt=new WeakMap,Po=new WeakMap,Mm=new WeakMap,gt=new WeakMap;var xx,XD;class kv{constructor(e){k(this,xx);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=yn.platform;for(const[r,s,i={}]of e)for(const a of r){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(j(this,xx,XD).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=r;o&&!o(e,t)||(s.bind(e,...a,t)(),i||Dt(t))}}xx=new WeakSet,XD=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const wx=class wx{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Lq(e),ke(this,"_colors",e)}convert(e){const t=Pw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return wx._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ue.makeHexColor(...t):e}};q(wx,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let $_=wx;var dh,fr,Wt,on,hh,ca,fh,Vr,bc,To,Ro,ph,_c,oi,Ss,Sc,Im,Dm,mh,Om,li,Mo,gh,Io,ci,bx,Do,Lm,Oo,Ec,vh,Lo,Fm,Qt,Ge,ua,Fo,$o,$m,Bm,Bo,ui,da,zm,Um,Gr,Q,Hy,B_,QD,JD,Wy,ZD,eO,tO,z_,nO,U_,H_,rO,Rn,ea,sO,iO,W_,aO,yp,V_;const Od=class Od{constructor(e,t,r,s,i,a,o,l,u,h,f,p,m,y,g,w){k(this,Q);k(this,dh,new AbortController);k(this,fr,null);k(this,Wt,new Map);k(this,on,new Map);k(this,hh,null);k(this,ca,null);k(this,fh,null);k(this,Vr,new Bq);k(this,bc,null);k(this,To,null);k(this,Ro,null);k(this,ph,0);k(this,_c,new Set);k(this,oi,null);k(this,Ss,null);k(this,Sc,new Set);q(this,"_editorUndoBar",null);k(this,Im,!1);k(this,Dm,!1);k(this,mh,!1);k(this,Om,null);k(this,li,null);k(this,Mo,null);k(this,gh,null);k(this,Io,!1);k(this,ci,null);k(this,bx,new $q);k(this,Do,!1);k(this,Lm,!1);k(this,Oo,null);k(this,Ec,null);k(this,vh,null);k(this,Lo,null);k(this,Fm,null);k(this,Qt,ve.NONE);k(this,Ge,new Set);k(this,ua,null);k(this,Fo,null);k(this,$o,null);k(this,$m,null);k(this,Bm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,Bo,[0,0]);k(this,ui,null);k(this,da,null);k(this,zm,null);k(this,Um,null);k(this,Gr,null);const v=this._signal=d(this,dh).signal;S(this,da,e),S(this,zm,t),S(this,Um,r),S(this,hh,s),S(this,bc,i),S(this,Fo,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),j(this,Q,ZD).call(this),j(this,Q,rO).call(this),j(this,Q,z_).call(this),S(this,ca,l.annotationStorage),S(this,Om,l.filterFactory),S(this,$o,u),S(this,gh,h||null),S(this,Im,f),S(this,Dm,p),S(this,mh,m),S(this,Fm,y||null),this.viewParameters={realScale:Il.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const e=Od.prototype,t=a=>d(a,da).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return ke(this,"_keyboardManager",new kv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,da).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,da).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,a,o,l,u;(e=d(this,Gr))==null||e.resolve(),S(this,Gr,null),(t=d(this,dh))==null||t.abort(),S(this,dh,null),this._signal=null;for(const h of d(this,on).values())h.destroy();d(this,on).clear(),d(this,Wt).clear(),d(this,Sc).clear(),(r=d(this,Lo))==null||r.clear(),S(this,fr,null),d(this,Ge).clear(),d(this,Vr).destroy(),(s=d(this,hh))==null||s.destroy(),(i=d(this,bc))==null||i.destroy(),(a=d(this,Fo))==null||a.destroy(),(o=d(this,ci))==null||o.hide(),S(this,ci,null),(l=d(this,vh))==null||l.destroy(),S(this,vh,null),d(this,li)&&(clearTimeout(d(this,li)),S(this,li,null)),d(this,ui)&&(clearTimeout(d(this,ui)),S(this,ui,null)),(u=this._editorUndoBar)==null||u.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,Fm)}get useNewAltTextFlow(){return d(this,Dm)}get useNewAltTextWhenAddingImage(){return d(this,mh)}get hcmFilter(){return ke(this,"hcmFilter",d(this,$o)?d(this,Om).addHCMFilter(d(this,$o).foreground,d(this,$o).background):"none")}get direction(){return ke(this,"direction",getComputedStyle(d(this,da)).direction)}get _highlightColors(){return ke(this,"_highlightColors",d(this,gh)?new Map(d(this,gh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ke(this,"highlightColors",null);const t=new Map,r=!!d(this,$o);for(const[s,i]of e){const a=s.endsWith("_HCM");if(r&&a){t.set(s.replace("_HCM",""),i);continue}!r&&!a&&t.set(s,i)}return ke(this,"highlightColors",t)}get highlightColorNames(){return ke(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Ro,e)}setMainHighlightColorPicker(e){S(this,vh,e)}editAltText(e,t=!1){var r;(r=d(this,hh))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!d(this,bc)}editComment(e,t){var r;(r=d(this,bc))==null||r.open(this,e,t)}getSignature(e){var t;(t=d(this,Fo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,Fo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,mh,t);break}}onPageChanging({pageNumber:e}){S(this,ph,e-1)}focusMainContainer(){d(this,da).focus()}findParent(e,t){for(const r of d(this,on).values()){const{x:s,y:i,width:a,height:o}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return r}return null}disableUserSelect(e=!1){d(this,zm).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,Sc).add(e)}removeShouldRescale(e){d(this,Sc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Il.PDF_TO_CSS_UNITS;for(const r of d(this,Sc))r.onScaleChanging();(t=d(this,Ro))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a}=t,o=t.toString(),u=j(this,Q,Hy).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const f=j(this,Q,B_).call(this,u),p=d(this,Qt)===ve.NONE,m=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a,text:o}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(ve.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,ca)&&!d(this,ca).has(e.id)&&d(this,ca).setValue(e.id,e)}a11yAlert(e,t=null){const r=d(this,Um);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,Io)&&(S(this,Io,!1),j(this,Q,Wy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,Ge))if(t.div.contains(e)){S(this,Ec,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,Ec))return;const[e,t]=d(this,Ec);S(this,Ec,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){j(this,Q,z_).call(this),j(this,Q,U_).call(this)}removeEditListeners(){j(this,Q,nO).call(this),j(this,Q,H_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of d(this,Ss))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of d(this,Ss))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=d(this,fr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of d(this,Ge)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of d(this,Ss))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){ye(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const u=await s.deserialize(l);if(!u)return;i.push(u)}const a=()=>{for(const l of i)j(this,Q,W_).call(this,l);j(this,Q,V_).call(this,i)},o=()=>{for(const l of i)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){ye(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,Qt)!==ve.NONE&&!this.isEditorHandlingKeyboard&&Od._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,Io)&&(S(this,Io,!1),j(this,Q,Wy).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(j(this,Q,eO).call(this),j(this,Q,U_).call(this),j(this,Q,Rn).call(this,{isEditing:d(this,Qt)!==ve.NONE,isEmpty:j(this,Q,yp).call(this),hasSomethingToUndo:d(this,Vr).hasSomethingToUndo(),hasSomethingToRedo:d(this,Vr).hasSomethingToRedo(),hasSelectedEditor:!1})):(j(this,Q,tO).call(this),j(this,Q,H_).call(this),j(this,Q,Rn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,Ss)){S(this,Ss,e);for(const t of d(this,Ss))j(this,Q,ea).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,bx).id}get currentLayer(){return d(this,on).get(d(this,ph))}getLayer(e){return d(this,on).get(e)}get currentPageIndex(){return d(this,ph)}addLayer(e){d(this,on).set(e.pageIndex,e),d(this,Do)?e.enable():e.disable()}removeLayer(e){d(this,on).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){var a,o,l;if(d(this,Qt)!==e&&!(d(this,Gr)&&(await d(this,Gr).promise,!d(this,Gr)))){if(S(this,Gr,Promise.withResolvers()),(a=d(this,Ro))==null||a.commitOrRemove(),S(this,Qt,e),e===ve.NONE){this.setEditingState(!1),j(this,Q,iO).call(this),(o=this._editorUndoBar)==null||o.hide(),d(this,Gr).resolve();return}e===ve.SIGNATURE&&await((l=d(this,Fo))==null?void 0:l.loadSignatures()),this.setEditingState(!0),await j(this,Q,sO).call(this),this.unselectAll();for(const u of d(this,on).values())u.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),d(this,Gr).resolve();return}for(const u of d(this,Wt).values())u.annotationElementId===t||u.id===t?(this.setSelected(u),i?u.editComment():s&&u.enterInEditMode()):u.unselect();d(this,Gr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,Qt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(d(this,Ss)){switch(e){case Ie.CREATE:this.currentLayer.addNewEditor(t);return;case Ie.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,$m)||S(this,$m,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of d(this,Ge))r.updateParams(e,t);else for(const r of d(this,Ss))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const a of d(this,Wt).values())a.editorType===e&&a.show(t);(((i=d(this,$m))==null?void 0:i.get(Ie.HIGHLIGHT_SHOW_ALL))??!0)!==t&&j(this,Q,ea).call(this,[[Ie.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,Lm)!==e){S(this,Lm,e);for(const t of d(this,on).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of d(this,Wt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return d(this,Wt).get(e)}addEditor(e){d(this,Wt).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(d(this,li)&&clearTimeout(d(this,li)),S(this,li,setTimeout(()=>{this.focusMainContainer(),S(this,li,null)},0))),d(this,Wt).delete(e.id),e.annotationElementId&&((t=d(this,Lo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,_c).has(e.annotationElementId))&&((r=d(this,ca))==null||r.remove(e.id))}addDeletedAnnotationElement(e){d(this,_c).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,_c).has(e)}removeDeletedAnnotationElement(e){d(this,_c).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,fr)!==e&&(S(this,fr,e),e&&j(this,Q,ea).call(this,e.propertiesToUpdate))}updateUI(e){d(this,Q,aO)===e&&j(this,Q,ea).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){j(this,Q,ea).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,Ge).has(e)){d(this,Ge).delete(e),e.unselect(),j(this,Q,Rn).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,Ge).add(e),e.select(),j(this,Q,ea).call(this,e.propertiesToUpdate),j(this,Q,Rn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=d(this,Ro))==null||t.commitOrRemove();for(const r of d(this,Ge))r!==e&&r.unselect();d(this,Ge).clear(),d(this,Ge).add(e),e.select(),j(this,Q,ea).call(this,e.propertiesToUpdate),j(this,Q,Rn).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,Ge).has(e)}get firstSelectedEditor(){return d(this,Ge).values().next().value}unselect(e){e.unselect(),d(this,Ge).delete(e),j(this,Q,Rn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,Ge).size!==0}get isEnterHandled(){return d(this,Ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,Vr).undo(),j(this,Q,Rn).call(this,{hasSomethingToUndo:d(this,Vr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:j(this,Q,yp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,Vr).redo(),j(this,Q,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,Vr).hasSomethingToRedo(),isEmpty:j(this,Q,yp).call(this)})}addCommands(e){d(this,Vr).add(e),j(this,Q,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:j(this,Q,yp).call(this)})}cleanUndoStack(e){d(this,Vr).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,Ge)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const a of t)j(this,Q,W_).call(this,a)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=d(this,fr))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,fr)||this.hasSelection}selectAll(){for(const e of d(this,Ge))e.commit();j(this,Q,V_).call(this,d(this,Wt).values())}unselectAll(){var e;if(!(d(this,fr)&&(d(this,fr).commitOrRemove(),d(this,Qt)!==ve.NONE))&&!((e=d(this,Ro))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,Ge))t.unselect();d(this,Ge).clear(),j(this,Q,Rn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;d(this,Bo)[0]+=e,d(this,Bo)[1]+=t;const[s,i]=d(this,Bo),a=[...d(this,Ge)],o=1e3;d(this,ui)&&clearTimeout(d(this,ui)),S(this,ui,setTimeout(()=>{S(this,ui,null),d(this,Bo)[0]=d(this,Bo)[1]=0,this.addCommands({cmd:()=>{for(const l of a)d(this,Wt).has(l.id)&&(l.translateInPage(s,i),l.translationDone())},undo:()=>{for(const l of a)d(this,Wt).has(l.id)&&(l.translateInPage(-s,-i),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,oi,new Map);for(const e of d(this,Ge))d(this,oi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,oi))return!1;this.disableUserSelect(!1);const e=d(this,oi);S(this,oi,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const r=(s,i,a,o)=>{if(d(this,Wt).has(s.id)){const l=d(this,on).get(o);l?s._setParentAndPosition(l,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)r(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)r(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,oi))for(const r of d(this,oi).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,Ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,fr)===e}getActive(){return d(this,fr)}getMode(){return d(this,Qt)}get imageManager(){return ke(this,"imageManager",new F_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,f,p)=>({x:(h-s)/a,y:1-(u+f-r)/i,width:p/a,height:f/i});break;case"180":o=(u,h,f,p)=>({x:1-(u+f-r)/i,y:1-(h+p-s)/a,width:f/i,height:p/a});break;case"270":o=(u,h,f,p)=>({x:1-(h+p-s)/a,y:(u-r)/i,width:p/a,height:f/i});break;default:o=(u,h,f,p)=>({x:(u-r)/i,y:(h-s)/a,width:f/i,height:p/a});break}const l=[];for(let u=0,h=t.rangeCount;u<h;u++){const f=t.getRangeAt(u);if(!f.collapsed)for(const{x:p,y:m,width:y,height:g}of f.getClientRects())y===0||g===0||l.push(o(p,m,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,fh)||S(this,fh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,fh))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=d(this,fh))==null?void 0:s.get(e.data.id);if(!t)return;const r=d(this,ca).getRawValue(t);r&&(d(this,Qt)===ve.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=d(this,Lo))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),d(this,Lo).delete(e))}addMissingCanvas(e,t){(d(this,Lo)||S(this,Lo,new Map)).set(e,t)}};dh=new WeakMap,fr=new WeakMap,Wt=new WeakMap,on=new WeakMap,hh=new WeakMap,ca=new WeakMap,fh=new WeakMap,Vr=new WeakMap,bc=new WeakMap,To=new WeakMap,Ro=new WeakMap,ph=new WeakMap,_c=new WeakMap,oi=new WeakMap,Ss=new WeakMap,Sc=new WeakMap,Im=new WeakMap,Dm=new WeakMap,mh=new WeakMap,Om=new WeakMap,li=new WeakMap,Mo=new WeakMap,gh=new WeakMap,Io=new WeakMap,ci=new WeakMap,bx=new WeakMap,Do=new WeakMap,Lm=new WeakMap,Oo=new WeakMap,Ec=new WeakMap,vh=new WeakMap,Lo=new WeakMap,Fm=new WeakMap,Qt=new WeakMap,Ge=new WeakMap,ua=new WeakMap,Fo=new WeakMap,$o=new WeakMap,$m=new WeakMap,Bm=new WeakMap,Bo=new WeakMap,ui=new WeakMap,da=new WeakMap,zm=new WeakMap,Um=new WeakMap,Gr=new WeakMap,Q=new WeakSet,Hy=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},B_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of d(this,on).values())if(r.hasTextLayer(e))return r;return null},QD=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=j(this,Q,Hy).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(d(this,ci)||S(this,ci,new Fq(this)),d(this,ci).show(r,s,this.direction==="ltr"))},JD=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){d(this,ua)&&((i=d(this,ci))==null||i.hide(),S(this,ua,null),j(this,Q,Rn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,ua))return;const s=j(this,Q,Hy).call(this,e).closest(".textLayer");if(!s){d(this,ua)&&((a=d(this,ci))==null||a.hide(),S(this,ua,null),j(this,Q,Rn).call(this,{hasSelectedText:!1}));return}if((o=d(this,ci))==null||o.hide(),S(this,ua,t),j(this,Q,Rn).call(this,{hasSelectedText:!0}),!(d(this,Qt)!==ve.HIGHLIGHT&&d(this,Qt)!==ve.NONE)&&(d(this,Qt)===ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Io,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,Qt)===ve.HIGHLIGHT?j(this,Q,B_).call(this,s):null;l==null||l.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),f=p=>{p.type==="pointerup"&&p.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),p.type==="pointerup"&&j(this,Q,Wy).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}},Wy=function(e=""){d(this,Qt)===ve.HIGHLIGHT?this.highlightSelection(e):d(this,Im)&&j(this,Q,QD).call(this)},ZD=function(){document.addEventListener("selectionchange",j(this,Q,JD).bind(this),{signal:this._signal})},eO=function(){if(d(this,Mo))return;S(this,Mo,new AbortController);const e=this.combinedSignal(d(this,Mo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},tO=function(){var e;(e=d(this,Mo))==null||e.abort(),S(this,Mo,null)},z_=function(){if(d(this,Oo))return;S(this,Oo,new AbortController);const e=this.combinedSignal(d(this,Oo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},nO=function(){var e;(e=d(this,Oo))==null||e.abort(),S(this,Oo,null)},U_=function(){if(d(this,To))return;S(this,To,new AbortController);const e=this.combinedSignal(d(this,To));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},H_=function(){var e;(e=d(this,To))==null||e.abort(),S(this,To,null)},rO=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Rn=function(e){Object.entries(e).some(([r,s])=>d(this,Bm)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,Bm),e)}),d(this,Qt)===ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&j(this,Q,ea).call(this,[[Ie.HIGHLIGHT_FREE,!0]]))},ea=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},sO=async function(){if(!d(this,Do)){S(this,Do,!0);const e=[];for(const t of d(this,on).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,Wt).values())t.enable()}},iO=function(){if(this.unselectAll(),d(this,Do)){S(this,Do,!1);for(const e of d(this,on).values())e.disable();for(const e of d(this,Wt).values())e.disable()}},W_=function(e){const t=d(this,on).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},aO=function(){let e=null;for(e of d(this,Ge));return e},yp=function(){if(d(this,Wt).size===0)return!0;if(d(this,Wt).size===1)for(const e of d(this,Wt).values())return e.isEmpty();return!1},V_=function(e){for(const t of d(this,Ge))t.unselect();d(this,Ge).clear();for(const t of e)t.isEmpty()||(d(this,Ge).add(t),t.select());j(this,Q,Rn).call(this,{hasSelectedEditor:this.hasSelection})},q(Od,"TRANSLATE_SMALL",1),q(Od,"TRANSLATE_BIG",10);let Bu=Od;var Jt,di,Es,yh,hi,pr,xh,fi,Jn,ha,Ac,pi,zo,Bs,xp,Vy;const Mn=class Mn{constructor(e){k(this,Bs);k(this,Jt,null);k(this,di,!1);k(this,Es,null);k(this,yh,null);k(this,hi,null);k(this,pr,null);k(this,xh,!1);k(this,fi,null);k(this,Jn,null);k(this,ha,null);k(this,Ac,null);k(this,pi,!1);S(this,Jn,e),S(this,pi,e._uiManager.useNewAltTextFlow),d(Mn,zo)||S(Mn,zo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Mn._l10n??(Mn._l10n=e)}async render(){const e=S(this,Es,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,yh,document.createElement("span"));e.append(t),d(this,pi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(Mn,zo).missing),t.setAttribute("data-l10n-id",d(Mn,zo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=d(this,Jn)._uiManager._signal;e.addEventListener("contextmenu",os,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),d(this,Jn)._uiManager.editAltText(d(this,Jn)),d(this,pi)&&d(this,Jn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Bs,xp)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,xh,!0),s(i))},{signal:r}),await j(this,Bs,Vy).call(this),e}finish(){d(this,Es)&&(d(this,Es).focus({focusVisible:d(this,xh)}),S(this,xh,!1))}isEmpty(){return d(this,pi)?d(this,Jt)===null:!d(this,Jt)&&!d(this,di)}hasData(){return d(this,pi)?d(this,Jt)!==null||!!d(this,ha):this.isEmpty()}get guessedText(){return d(this,ha)}async setGuessedText(e){d(this,Jt)===null&&(S(this,ha,e),S(this,Ac,await Mn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),j(this,Bs,Vy).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,pi)||d(this,Jt)){(t=d(this,fi))==null||t.remove(),S(this,fi,null);return}if(!d(this,fi)){const r=S(this,fi,document.createElement("div"));r.className="noAltTextBadge",d(this,Jn).div.append(r)}d(this,fi).classList.toggle("hidden",!e)}serialize(e){let t=d(this,Jt);return!e&&d(this,ha)===t&&(t=d(this,Ac)),{altText:t,decorative:d(this,di),guessedText:d(this,ha),textWithDisclaimer:d(this,Ac)}}get data(){return{altText:d(this,Jt),decorative:d(this,di)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(S(this,ha,r),S(this,Ac,s)),!(d(this,Jt)===e&&d(this,di)===t)&&(i||(S(this,Jt,e),S(this,di,t)),j(this,Bs,Vy).call(this))}toggle(e=!1){d(this,Es)&&(!e&&d(this,pr)&&(clearTimeout(d(this,pr)),S(this,pr,null)),d(this,Es).disabled=!e)}shown(){d(this,Jn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Bs,xp)}})}destroy(){var e,t;(e=d(this,Es))==null||e.remove(),S(this,Es,null),S(this,yh,null),S(this,hi,null),(t=d(this,fi))==null||t.remove(),S(this,fi,null)}};Jt=new WeakMap,di=new WeakMap,Es=new WeakMap,yh=new WeakMap,hi=new WeakMap,pr=new WeakMap,xh=new WeakMap,fi=new WeakMap,Jn=new WeakMap,ha=new WeakMap,Ac=new WeakMap,pi=new WeakMap,zo=new WeakMap,Bs=new WeakSet,xp=function(){return d(this,Jt)&&"added"||d(this,Jt)===null&&this.guessedText&&"review"||"missing"},Vy=async function(){var s,i,a;const e=d(this,Es);if(!e)return;if(d(this,pi)){if(e.classList.toggle("done",!!d(this,Jt)),e.setAttribute("data-l10n-id",d(Mn,zo)[d(this,Bs,xp)]),(s=d(this,yh))==null||s.setAttribute("data-l10n-id",d(Mn,zo)[`${d(this,Bs,xp)}-label`]),!d(this,Jt)){(i=d(this,hi))==null||i.remove();return}}else{if(!d(this,Jt)&&!d(this,di)){e.classList.remove("done"),(a=d(this,hi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,hi);if(!t){S(this,hi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,Jn).id}`;const o=100,l=d(this,Jn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,pr)),S(this,pr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,pr,setTimeout(()=>{S(this,pr,null),d(this,hi).classList.add("show"),d(this,Jn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;d(this,pr)&&(clearTimeout(d(this,pr)),S(this,pr,null)),(u=d(this,hi))==null||u.classList.remove("show")},{signal:l})}d(this,di)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,Jt)),t.parentNode||e.append(t);const r=d(this,Jn).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},k(Mn,zo,null),q(Mn,"_l10n",null);let ix=Mn;var mi,Cc,As,Hm,fa,wh,Uo;class py{constructor(e){k(this,mi,null);k(this,Cc,!1);k(this,As,null);k(this,Hm,null);k(this,fa,null);k(this,wh,null);k(this,Uo,!1);S(this,As,e),this.toolbar=null}render(){if(!d(this,As)._uiManager.hasCommentManager())return null;const e=S(this,mi,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=d(this,As)._uiManager._signal;e.addEventListener("contextmenu",os,{signal:t}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:t});const r=s=>{s.preventDefault(),this.edit()};return e.addEventListener("click",r,{capture:!0,signal:t}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(S(this,Cc,!0),r(s))},{signal:t}),e}edit(){const{bottom:e,left:t,right:r}=d(this,As).getClientDimensions(),s={top:e};d(this,As)._uiManager.direction==="ltr"?s.right=r:s.left=t,d(this,As)._uiManager.editComment(d(this,As),s)}finish(){d(this,mi)&&(d(this,mi).focus({focusVisible:d(this,Cc)}),S(this,Cc,!1))}isDeleted(){return d(this,Uo)||d(this,fa)===""}hasBeenEdited(){return this.isDeleted()||d(this,fa)!==d(this,Hm)}serialize(){return this.data}get data(){return{text:d(this,fa),date:d(this,wh),deleted:d(this,Uo)}}set data(e){if(e===null){S(this,fa,""),S(this,Uo,!0);return}S(this,fa,e),S(this,wh,new Date),S(this,Uo,!1)}setInitialText(e){S(this,Hm,e),this.data=e}toggle(e=!1){d(this,mi)&&(d(this,mi).disabled=!e)}shown(){}destroy(){var e;(e=d(this,mi))==null||e.remove(),S(this,mi,null),S(this,fa,""),S(this,wh,null),S(this,As,null),S(this,Cc,!1),S(this,Uo,!1)}}mi=new WeakMap,Cc=new WeakMap,As=new WeakMap,Hm=new WeakMap,fa=new WeakMap,wh=new WeakMap,Uo=new WeakMap;var bh,Nc,Wm,Vm,Gm,qm,Ym,pa,kc,ma,jc,ga,Ol,oO,lO,cO;const pC=class pC{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:a=null,signal:o}){k(this,Ol);k(this,bh);k(this,Nc,!1);k(this,Wm,null);k(this,Vm);k(this,Gm);k(this,qm);k(this,Ym);k(this,pa,null);k(this,kc);k(this,ma,null);k(this,jc);k(this,ga,null);S(this,bh,e),S(this,Wm,r),S(this,Vm,t),S(this,Gm,s),S(this,qm,i),S(this,Ym,a),S(this,jc,new AbortController),S(this,kc,AbortSignal.any([o,d(this,jc).signal])),e.addEventListener("touchstart",j(this,Ol,oO).bind(this),{passive:!1,signal:d(this,kc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Hi.pixelRatio}destroy(){var e,t;(e=d(this,jc))==null||e.abort(),S(this,jc,null),(t=d(this,pa))==null||t.abort(),S(this,pa,null)}};bh=new WeakMap,Nc=new WeakMap,Wm=new WeakMap,Vm=new WeakMap,Gm=new WeakMap,qm=new WeakMap,Ym=new WeakMap,pa=new WeakMap,kc=new WeakMap,ma=new WeakMap,jc=new WeakMap,ga=new WeakMap,Ol=new WeakSet,oO=function(e){var s,i,a;if((s=d(this,Vm))!=null&&s.call(this))return;if(e.touches.length===1){if(d(this,pa))return;const o=S(this,pa,new AbortController),l=AbortSignal.any([d(this,kc),o.signal]),u=d(this,bh),h={capture:!0,signal:l,passive:!1},f=p=>{var m;p.pointerType==="touch"&&((m=d(this,pa))==null||m.abort(),S(this,pa,null))};u.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Dt(p),f(p))},h),u.addEventListener("pointerup",f,h),u.addEventListener("pointercancel",f,h);return}if(!d(this,ga)){S(this,ga,new AbortController);const o=AbortSignal.any([d(this,kc),d(this,ga).signal]),l=d(this,bh),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",j(this,Ol,lO).bind(this),u);const h=j(this,Ol,cO).bind(this);l.addEventListener("touchend",h,u),l.addEventListener("touchcancel",h,u),u.capture=!0,l.addEventListener("pointerdown",Dt,u),l.addEventListener("pointermove",Dt,u),l.addEventListener("pointercancel",Dt,u),l.addEventListener("pointerup",Dt,u),(i=d(this,Gm))==null||i.call(this)}if(Dt(e),e.touches.length!==2||(a=d(this,Wm))!=null&&a.call(this)){S(this,ma,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),S(this,ma,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},lO=function(e){var E;if(!d(this,ma)||e.touches.length!==2)return;Dt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:a,screenY:o}=r,l=d(this,ma),{touch0X:u,touch0Y:h,touch1X:f,touch1Y:p}=l,m=f-u,y=p-h,g=a-s,w=o-i,v=Math.hypot(g,w)||1,x=Math.hypot(m,y)||1;if(!d(this,Nc)&&Math.abs(x-v)<=pC.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=i,l.touch1X=a,l.touch1Y=o,!d(this,Nc)){S(this,Nc,!0);return}const b=[(s+a)/2,(i+o)/2];(E=d(this,qm))==null||E.call(this,b,x,v)},cO=function(e){var t;e.touches.length>=2||(d(this,ga)&&(d(this,ga).abort(),S(this,ga,null),(t=d(this,Ym))==null||t.call(this)),d(this,ma)&&(Dt(e),S(this,ma,null),S(this,Nc,!1)))};let ax=pC;var Pc,Cs,ut,ln,_h,Ho,Km,Tc,cn,Rc,va,Wo,Xm,Mc,mr,Qm,Ic,ya,gi,Sh,Eh,qr,Dc,Jm,_x,he,G_,Zm,q_,Gy,uO,dO,Y_,qy,K_,hO,fO,pO,X_,mO,Q_,gO,vO,yO,J_,wp;const Ee=class Ee{constructor(e){k(this,he);k(this,Pc,null);k(this,Cs,null);k(this,ut,null);k(this,ln,null);k(this,_h,!1);k(this,Ho,null);k(this,Km,"");k(this,Tc,!1);k(this,cn,null);k(this,Rc,null);k(this,va,null);k(this,Wo,null);k(this,Xm,"");k(this,Mc,!1);k(this,mr,null);k(this,Qm,!1);k(this,Ic,!1);k(this,ya,!1);k(this,gi,null);k(this,Sh,0);k(this,Eh,0);k(this,qr,null);k(this,Dc,null);q(this,"isSelected",!1);q(this,"_isCopy",!1);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);k(this,Jm,!1);k(this,_x,Ee._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ee.prototype._resizeWithKeyboard,t=Bu.TRANSLATE_SMALL,r=Bu.TRANSLATE_BIG;return ke(this,"_resizerKeyboardManager",new kv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Ee.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ke(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new zq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ee._l10n??(Ee._l10n=e),Ee._l10nResizer||(Ee._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ee._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Ee._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Je("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,Jm)}set _isDraggable(e){var t;S(this,Jm,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,_x)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):j(this,he,wp).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,Mc)?S(this,Mc,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){j(this,he,G_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,mr)||S(this,mr,[this.x,this.y,this.width,this.height]),j(this,he,G_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,mr)||S(this,mr,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:h}=r;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,mr)&&(d(this,mr)[0]!==this.x||d(this,mr)[1]!==this.y)}get _hasBeenResized(){return!!d(this,mr)&&(d(this,mr)[2]!==this.width||d(this,mr)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Ee,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:a,width:o,height:l}=this;if(o*=r,l*=s,i*=r,a*=s,this._mustFixPosition)switch(e){case 0:i=$n(i,0,r-o),a=$n(a,0,s-l);break;case 90:i=$n(i,0,r-l),a=$n(a,o,s);break;case 180:i=$n(i,o,r),a=$n(a,l,s);break;case 270:i=$n(i,l,r),a=$n(a,0,s-o);break}this.x=i/=r,this.y=a/=s;const[u,h]=this.getBaseTranslation();i+=u,a+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return j(r=Ee,Zm,q_).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return j(r=Ee,Zm,q_).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,d(this,Tc)||(i.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!d(this,Tc)&&t.endsWith("%");if(s&&i)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!d(this,Tc)&&!i&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,ut))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,Ic))return this._editToolbar;this._editToolbar=new L_(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,ut))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,ut)||(ix.initialize(Ee._l10n),S(this,ut,new ix(this)),d(this,Pc)&&(d(this,ut).data=d(this,Pc),S(this,Pc,null))),d(this,ut)}get altTextData(){var e;return(e=d(this,ut))==null?void 0:e.data}set altTextData(e){d(this,ut)&&(d(this,ut).data=e)}get guessedAltText(){var e;return(e=d(this,ut))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,ut))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,ut))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,ut)&&!d(this,ut).isEmpty()}hasAltTextData(){var e;return((e=d(this,ut))==null?void 0:e.hasData())??!1}addCommentButton(){return d(this,ln)?d(this,ln):S(this,ln,new py(this))}get commentColor(){return null}get comment(){const e=d(this,ln);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){d(this,ln)||S(this,ln,new py(this)),d(this,ln).data=e}setCommentData(e){d(this,ln)||S(this,ln,new py(this)),d(this,ln).setInitialText(e)}get hasEditedComment(){var e;return(e=d(this,ln))==null?void 0:e.hasBeenEdited()}async editComment(){d(this,ln)||S(this,ln,new py(this)),d(this,ln).edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,_h)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),j(this,he,Q_).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),KD(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,Dc)||S(this,Dc,new ax({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:j(this,he,hO).bind(this),onPinching:j(this,he,fO).bind(this),onPinchEnd:j(this,he,pO).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,Mc,!0),this._isDraggable){j(this,he,mO).call(this,e);return}j(this,he,X_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,gi)&&clearTimeout(d(this,gi)),S(this,gi,setTimeout(()=>{var e;S(this,gi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/s,h=t/s,f=this.x*i,p=this.y*a,m=this.width*i,y=this.height*a;switch(r){case 0:return[f+u+o,a-p-h-y+l,f+u+m+o,a-p-h+l];case 90:return[f+h+o,a-p+u+l,f+h+y+o,a-p+u+m+l];case 180:return[f-u-m+o,a-p+h+l,f-u+o,a-p+h+y+l];case 270:return[f-h-y+o,a-p-u-m+l,f-h+o,a-p-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,o=i-r,l=a-s;switch(this.rotation){case 0:return[r,t-a,o,l];case 90:return[r,t-s,l,o];case 180:return[i,t-s,o,l];case 270:return[i,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,Ic,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,Ic,!1),!0):!1}isInEditMode(){return d(this,Ic)}shouldGetKeyboardEvents(){return d(this,ya)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&s>0&&e<i&&r>0}rebuild(){j(this,he,Q_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Je("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});s.rotation=e.rotation,S(s,Pc,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,a]=s.pageDimensions,[o,l,u,h]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=l/a,s.width=u/i,s.height=h/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,Wo))==null||e.abort(),S(this,Wo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,gi)&&(clearTimeout(d(this,gi)),S(this,gi,null)),j(this,he,wp).call(this),this.removeEditToolbar(),d(this,qr)){for(const r of d(this,qr).values())clearTimeout(r);S(this,qr,null)}this.parent=null,(t=d(this,Dc))==null||t.destroy(),S(this,Dc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(j(this,he,uO).call(this),d(this,cn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,va,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,cn).children;if(!d(this,Cs)){S(this,Cs,Array.from(t));const a=j(this,he,gO).bind(this),o=j(this,he,vO).bind(this),l=this._uiManager._signal;for(const u of d(this,Cs)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",j(this,he,yO).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",Ee._l10nResizer[h])}}const r=d(this,Cs)[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(d(this,Cs).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)d(this,cn).append(d(this,cn).firstChild);else if(i>s)for(let o=0;o<i-s;o++)d(this,cn).firstChild.before(d(this,cn).lastChild);let a=0;for(const o of t){const u=d(this,Cs)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ee._l10nResizer[u])}}j(this,he,J_).call(this,0),S(this,ya,!0),d(this,cn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,ya)&&j(this,he,K_).call(this,d(this,Xm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){j(this,he,wp).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=d(this,ut))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=d(this,cn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=d(this,ut))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,Qm)}set isEditing(e){S(this,Qm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){S(this,Tc,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,qr)||S(this,qr,new Map);const{action:r}=e;let s=d(this,qr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),d(this,qr).delete(r),d(this,qr).size===0&&S(this,qr,null)},Ee._telemetryTimeout),d(this,qr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,_h,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,_h,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Pc=new WeakMap,Cs=new WeakMap,ut=new WeakMap,ln=new WeakMap,_h=new WeakMap,Ho=new WeakMap,Km=new WeakMap,Tc=new WeakMap,cn=new WeakMap,Rc=new WeakMap,va=new WeakMap,Wo=new WeakMap,Xm=new WeakMap,Mc=new WeakMap,mr=new WeakMap,Qm=new WeakMap,Ic=new WeakMap,ya=new WeakMap,gi=new WeakMap,Sh=new WeakMap,Eh=new WeakMap,qr=new WeakMap,Dc=new WeakMap,Jm=new WeakMap,_x=new WeakMap,he=new WeakSet,G_=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Zm=new WeakSet,q_=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Gy=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},uO=function(){if(d(this,cn))return;S(this,cn,document.createElement("div")),d(this,cn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");d(this,cn).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",j(this,he,dO).bind(this,r),{signal:t}),s.addEventListener("contextmenu",os,{signal:t}),s.tabIndex=-1}this.div.prepend(d(this,cn))},dO=function(e,t){var h;t.preventDefault();const{isMac:r}=yn.platform;if(t.button!==0||t.ctrlKey&&r)return;(h=d(this,ut))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,S(this,Rc,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",j(this,he,K_).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Dt,{passive:!1,signal:a}),window.addEventListener("contextmenu",os,{signal:a}),S(this,va,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=d(this,ut))==null||f.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,j(this,he,qy).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},Y_=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*r,a*s),this.fixAndSetPosition(),this._onResized()},qy=function(){if(!d(this,va))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=d(this,va);S(this,va,null);const i=this.x,a=this.y,o=this.width,l=this.height;i===e&&a===t&&o===r&&l===s||this.addCommands({cmd:j(this,he,Y_).bind(this,i,a,o,l),undo:j(this,he,Y_).bind(this,e,t,r,s),mustExec:!0})},K_=function(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,l=this.height,u=Ee.MIN_SIZE/r,h=Ee.MIN_SIZE/s,f=j(this,he,Gy).call(this,this.rotation),p=(B,L)=>[f[0]*B+f[2]*L,f[1]*B+f[3]*L],m=j(this,he,Gy).call(this,360-this.rotation),y=(B,L)=>[m[0]*B+m[2]*L,m[1]*B+m[3]*L];let g,w,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(B,L)=>[0,0],w=(B,L)=>[B,L];break;case"topMiddle":g=(B,L)=>[B/2,0],w=(B,L)=>[B/2,L];break;case"topRight":v=!0,g=(B,L)=>[B,0],w=(B,L)=>[0,L];break;case"middleRight":x=!0,g=(B,L)=>[B,L/2],w=(B,L)=>[0,L/2];break;case"bottomRight":v=!0,g=(B,L)=>[B,L],w=(B,L)=>[0,0];break;case"bottomMiddle":g=(B,L)=>[B/2,L],w=(B,L)=>[B/2,0];break;case"bottomLeft":v=!0,g=(B,L)=>[0,L],w=(B,L)=>[B,0];break;case"middleLeft":x=!0,g=(B,L)=>[0,L/2],w=(B,L)=>[B,L/2];break}const b=g(o,l),E=w(o,l);let A=p(...E);const C=Ee._round(i+A[0]),N=Ee._round(a+A[1]);let P=1,T=1,M,I;if(t.fromKeyboard)({deltaX:M,deltaY:I}=t);else{const{screenX:B,screenY:L}=t,[D,z]=d(this,Rc);[M,I]=this.screenToPageTranslation(B-D,L-z),d(this,Rc)[0]=B,d(this,Rc)[1]=L}if([M,I]=y(M/r,I/s),v){const B=Math.hypot(o,l);P=T=Math.max(Math.min(Math.hypot(E[0]-b[0]-M,E[1]-b[1]-I)/B,1/o,1/l),u/o,h/l)}else x?P=$n(Math.abs(E[0]-b[0]-M),u,1)/o:T=$n(Math.abs(E[1]-b[1]-I),h,1)/l;const R=Ee._round(o*P),F=Ee._round(l*T);A=p(...w(R,F));const O=C-A[0],V=N-A[1];d(this,mr)||S(this,mr,[this.x,this.y,this.width,this.height]),this.width=R,this.height=F,this.x=O,this.y=V,this.setDims(r*R,s*F),this.fixAndSetPosition(),this._onResizing()},hO=function(){var e;S(this,va,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,ut))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},fO=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const a=j(this,he,Gy).call(this,this.rotation),o=(C,N)=>[a[0]*C+a[2]*N,a[1]*C+a[3]*N],[l,u]=this.parentDimensions,h=this.x,f=this.y,p=this.width,m=this.height,y=Ee.MIN_SIZE/l,g=Ee.MIN_SIZE/u;i=Math.max(Math.min(i,1/p,1/m),y/p,g/m);const w=Ee._round(p*i),v=Ee._round(m*i);if(w===p&&v===m)return;d(this,mr)||S(this,mr,[h,f,p,m]);const x=o(p/2,m/2),b=Ee._round(h+x[0]),E=Ee._round(f+x[1]),A=o(w/2,v/2);this.x=b-A[0],this.y=E-A[1],this.width=w,this.height=v,this.setDims(l*w,u*v),this.fixAndSetPosition(),this._onResizing()},pO=function(){var e;(e=d(this,ut))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),j(this,he,qy).call(this)},X_=function(e){const{isMac:t}=yn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},mO=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:i},o=u=>{s.abort(),S(this,Ho,null),S(this,Mc,!1),this._uiManager.endDragSession()||j(this,he,X_).call(this,u),r&&this._onStopDragging()};t&&(S(this,Sh,e.clientX),S(this,Eh,e.clientY),S(this,Ho,e.pointerId),S(this,Km,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:p}=u;if(p!==d(this,Ho)){Dt(u);return}const[m,y]=this.screenToPageTranslation(h-d(this,Sh),f-d(this,Eh));S(this,Sh,h),S(this,Eh,f),this._uiManager.dragSelectedEditors(m,y)},a),window.addEventListener("touchmove",Dt,a),window.addEventListener("pointerdown",u=>{u.pointerType===d(this,Km)&&(d(this,Dc)||u.isPrimary)&&o(u),Dt(u)},a));const l=u=>{if(!d(this,Ho)||d(this,Ho)===u.pointerId){o(u);return}Dt(u)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},Q_=function(){if(d(this,Wo)||!this.div)return;S(this,Wo,new AbortController);const e=this._uiManager.combinedSignal(d(this,Wo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},gO=function(e){Ee._resizerKeyboardManager.exec(this,e)},vO=function(e){var t;d(this,ya)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,cn)&&j(this,he,wp).call(this)},yO=function(e){S(this,Xm,d(this,ya)?e:"")},J_=function(e){if(d(this,Cs))for(const t of d(this,Cs))t.tabIndex=e},wp=function(){S(this,ya,!1),j(this,he,J_).call(this,-1),j(this,he,qy).call(this)},k(Ee,Zm),q(Ee,"_l10n",null),q(Ee,"_l10nResizer",null),q(Ee,"_borderLineWidth",-1),q(Ee,"_colorManager",new $_),q(Ee,"_zIndex",1),q(Ee,"_telemetryTimeout",1e3);let rt=Ee;class zq extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const aj=3285377520,Ur=4294901760,Zs=65535;class xO{constructor(e){this.h1=e?e&4294967295:aj,this.h2=e?e&4294967295:aj}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,w=e.length;g<w;g++){const v=e.charCodeAt(g);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,l=0,u=this.h1,h=this.h2;const f=3432918353,p=461845907,m=f&Zs,y=p&Zs;for(let g=0;g<s;g++)g&1?(o=a[g],o=o*f&Ur|o*m&Zs,o=o<<15|o>>>17,o=o*p&Ur|o*y&Zs,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[g],l=l*f&Ur|l*m&Zs,l=l<<15|l>>>17,l=l*p&Ur|l*y&Zs,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*f&Ur|o*m&Zs,o=o<<15|o>>>17,o=o*p&Ur|o*y&Zs,s&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ur|e*36045&Zs,t=t*4283543511&Ur|((t<<16|e>>>16)*2950163797&Ur)>>>16,e^=t>>>1,e=e*444984403&Ur|e*60499&Zs,t=t*3301882366&Ur|((t<<16|e>>>16)*3120437893&Ur)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Z_=Object.freeze({map:null,hash:"",transfer:void 0});var Oc,Lc,un,Sx,wO;class WA{constructor(){k(this,Sx);k(this,Oc,!1);k(this,Lc,null);k(this,un,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=d(this,un).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return d(this,un).get(e)}remove(e){if(d(this,un).delete(e),d(this,un).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,un).values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=d(this,un).get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,d(this,un).set(e,t);s&&j(this,Sx,wO).call(this),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,un).has(e)}get size(){return d(this,un).size}resetModified(){d(this,Oc)&&(S(this,Oc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new bO(this)}get serializable(){if(d(this,un).size===0)return Z_;const e=new Map,t=new xO,r=[],s=Object.create(null);let i=!1;for(const[a,o]of d(this,un)){const l=o instanceof rt?o.serialize(!1,s):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Z_}get editorStats(){let e=null;const t=new Map;for(const r of d(this,un).values()){if(!(r instanceof rt))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[o,l]of Object.entries(s)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){S(this,Lc,null)}get modifiedIds(){if(d(this,Lc))return d(this,Lc);const e=[];for(const t of d(this,un).values())!(t instanceof rt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return S(this,Lc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,un).entries()}}Oc=new WeakMap,Lc=new WeakMap,un=new WeakMap,Sx=new WeakSet,wO=function(){d(this,Oc)||(S(this,Oc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var eg;class bO extends WA{constructor(t){super();k(this,eg);const{map:r,hash:s,transfer:i}=t.serializable,a=structuredClone(r,i?{transfer:i}:null);S(this,eg,{map:a,hash:s,transfer:i})}get print(){Je("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,eg)}get modifiedIds(){return ke(this,"modifiedIds",{ids:new Set,hash:""})}}eg=new WeakMap;var Ah;class Uq{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){k(this,Ah,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Ah).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||d(this,Ah).has(e.loadedName))){if(Ft(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:a}=e,o=new FontFace(s,i,a);this.addNativeFontFace(o);try{await o.load(),d(this,Ah).add(s),r==null||r(e)}catch{ye(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Je("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw ye(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ke(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ke(this,"isSyncFontLoadingSupported",Fn||yn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ft(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ke(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(E,A){return E.charCodeAt(A)<<24|E.charCodeAt(A+1)<<16|E.charCodeAt(A+2)<<8|E.charCodeAt(A+3)&255}function s(E,A,C,N){const P=E.substring(0,A),T=E.substring(A+C);return P+N+T}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function h(E,A){if(++u>30){ye("Load test font never loaded."),A();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){A();return}setTimeout(h.bind(null,E,A))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const y=16,g=1482184792;let w=r(p,y);for(i=0,a=f.length-3;i<a;i+=4)w=w-g+r(f,i)|0;i<f.length&&(w=w-g+r(f+"XXX",i)|0),p=s(p,y,4,Cq(w));const v=`url(data:font/opentype;base64,${btoa(p)});`,x=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(x);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const E of[e.loadedName,f]){const A=this._document.createElement("span");A.textContent="Hi",A.style.fontFamily=E,b.append(A)}this._document.body.append(b),h(f,()=>{b.remove(),t.complete()})}}Ah=new WeakMap;class Hq{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${UD(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(a){ye(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}function Wq(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Fn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Vq(n){if(Fn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Av(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function my(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const eS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,Gq=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",qq=Tq.bind(null,eS,Gq);var xa,Ex;class Yq{constructor(){k(this,xa,new Map);k(this,Ex,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};d(this,Ex).then(()=>{for(const[s]of d(this,xa))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){ye("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}d(this,xa).set(t,s)}removeEventListener(e,t){const r=d(this,xa).get(t);r==null||r(),d(this,xa).delete(t)}terminate(){for(const[,e]of d(this,xa))e==null||e();d(this,xa).clear()}}xa=new WeakMap,Ex=new WeakMap;const gy={DATA:1,ERROR:2},Mt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function oj(){}function Xn(n){if(n instanceof Ml||n instanceof I_||n instanceof rj||n instanceof rx||n instanceof Bb)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Je('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ml(n.message);case"InvalidPDFException":return new I_(n.message);case"PasswordException":return new rj(n.message,n.code);case"ResponseException":return new rx(n.message,n.status,n.missing);case"UnknownErrorException":return new Bb(n.message,n.details)}return new Bb(n.message,n.toString())}var Ch,rs,_O,SO,EO,Yy;class bp{constructor(e,t,r){k(this,rs);k(this,Ch,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",j(this,rs,_O).bind(this),{signal:d(this,Ch).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:Mt.PULL,streamId:i,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ft(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Mt.CANCEL,streamId:i,reason:Xn(u)}),h.promise}},r)}destroy(){var e;(e=d(this,Ch))==null||e.abort(),S(this,Ch,null)}}Ch=new WeakMap,rs=new WeakSet,_O=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){j(this,rs,EO).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===gy.DATA)s.resolve(e.data);else if(e.callback===gy.ERROR)s.reject(Xn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:gy.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:gy.ERROR,callbackId:e.callbackId,reason:Xn(a)})});return}if(e.streamId){j(this,rs,SO).call(this,e);return}t(e.data)},SO=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,h=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=h,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:Mt.ENQUEUE,streamId:t,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Mt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Ft(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Mt.ERROR,streamId:t,reason:Xn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Mt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:Mt.START_COMPLETE,streamId:t,reason:Xn(u)})})},EO=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Mt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Xn(e.reason));break;case Mt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Xn(e.reason));break;case Mt.PULL:if(!o){i.postMessage({sourceName:r,targetName:s,stream:Mt.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||oj).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Mt.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:Mt.PULL_COMPLETE,streamId:t,reason:Xn(u)})});break;case Mt.ENQUEUE:if(Ft(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Mt.CLOSE:if(Ft(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),j(this,rs,Yy).call(this,a,t);break;case Mt.ERROR:Ft(a,"error should have stream controller"),a.controller.error(Xn(e.reason)),j(this,rs,Yy).call(this,a,t);break;case Mt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Xn(e.reason)),j(this,rs,Yy).call(this,a,t);break;case Mt.CANCEL:if(!o)break;const l=Xn(e.reason);Promise.try(o.onCancel||oj,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Mt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:Mt.CANCEL_COMPLETE,streamId:t,reason:Xn(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Yy=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var tg;class AO{constructor({enableHWA:e=!1}){k(this,tg,!1);S(this,tg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!d(this,tg)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Je("Abstract method `_createCanvas` called.")}}tg=new WeakMap;class Kq extends AO{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class CO{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Je("Abstract method `_fetch` called.")}}class lj extends CO{async _fetch(e){const t=await Cv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Av(t)}}class NO{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var Fc,Nh,wa,ba,Cn,$c,Bc,te,Sn,_p,vd,Ky,yd,kO,tS,xd,Sp,Ep,nS,Ap;class Xq extends NO{constructor({docId:t,ownerDocument:r=globalThis.document}){super();k(this,te);k(this,Fc);k(this,Nh);k(this,wa);k(this,ba);k(this,Cn);k(this,$c);k(this,Bc,0);S(this,ba,t),S(this,Cn,r)}addFilter(t){if(!t)return"none";let r=d(this,te,Sn).get(t);if(r)return r;const[s,i,a]=j(this,te,Ky).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(r=d(this,te,Sn).get(o),r)return d(this,te,Sn).set(t,r),r;const l=`g_${d(this,ba)}_transfer_map_${Xt(this,Bc)._++}`,u=j(this,te,yd).call(this,l);d(this,te,Sn).set(t,u),d(this,te,Sn).set(o,u);const h=j(this,te,xd).call(this,l);return j(this,te,Ep).call(this,s,i,a,h),u}addHCMFilter(t,r){var y;const s=`${t}-${r}`,i="base";let a=d(this,te,_p).get(i);if((a==null?void 0:a.key)===s||(a?((y=a.filter)==null||y.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},d(this,te,_p).set(i,a)),!t||!r))return a.url;const o=j(this,te,Ap).call(this,t);t=ue.makeHexColor(...o);const l=j(this,te,Ap).call(this,r);if(r=ue.makeHexColor(...l),d(this,te,vd).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return a.url;const u=new Array(256);for(let g=0;g<=255;g++){const w=g/255;u[g]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=u.join(","),f=`g_${d(this,ba)}_hcm_filter`,p=a.filter=j(this,te,xd).call(this,f);j(this,te,Ep).call(this,h,h,h,p),j(this,te,tS).call(this,p);const m=(g,w)=>{const v=o[g]/255,x=l[g]/255,b=new Array(w+1);for(let E=0;E<=w;E++)b[E]=v+E/w*(x-v);return b.join(",")};return j(this,te,Ep).call(this,m(0,5),m(1,5),m(2,5),p),a.url=j(this,te,yd).call(this,f),a.url}addAlphaFilter(t){let r=d(this,te,Sn).get(t);if(r)return r;const[s]=j(this,te,Ky).call(this,[t]),i=`alpha_${s}`;if(r=d(this,te,Sn).get(i),r)return d(this,te,Sn).set(t,r),r;const a=`g_${d(this,ba)}_alpha_map_${Xt(this,Bc)._++}`,o=j(this,te,yd).call(this,a);d(this,te,Sn).set(t,o),d(this,te,Sn).set(i,o);const l=j(this,te,xd).call(this,a);return j(this,te,nS).call(this,s,l),o}addLuminosityFilter(t){let r=d(this,te,Sn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=j(this,te,Ky).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=d(this,te,Sn).get(i),r)return d(this,te,Sn).set(t,r),r;const a=`g_${d(this,ba)}_luminosity_map_${Xt(this,Bc)._++}`,o=j(this,te,yd).call(this,a);d(this,te,Sn).set(t,o),d(this,te,Sn).set(i,o);const l=j(this,te,xd).call(this,a);return j(this,te,kO).call(this,l),t&&j(this,te,nS).call(this,s,l),o}addHighlightHCMFilter(t,r,s,i,a){var x;const o=`${r}-${s}-${i}-${a}`;let l=d(this,te,_p).get(t);if((l==null?void 0:l.key)===o||(l?((x=l.filter)==null||x.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},d(this,te,_p).set(t,l)),!r||!s))return l.url;const[u,h]=[r,s].map(j(this,te,Ap).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[i,a].map(j(this,te,Ap).bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),d(this,te,vd).style.color="";const g=(b,E,A)=>{const C=new Array(256),N=(p-f)/A,P=b/255,T=(E-b)/(255*A);let M=0;for(let I=0;I<=A;I++){const R=Math.round(f+I*N),F=P+I*T;for(let O=M;O<=R;O++)C[O]=F;M=R+1}for(let I=M;I<256;I++)C[I]=C[M-1];return C.join(",")},w=`g_${d(this,ba)}_hcm_${t}_filter`,v=l.filter=j(this,te,xd).call(this,w);return j(this,te,tS).call(this,v),j(this,te,Ep).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),l.url=j(this,te,yd).call(this,w),l.url}destroy(t=!1){var r,s,i,a;t&&((r=d(this,$c))!=null&&r.size)||((s=d(this,wa))==null||s.parentNode.parentNode.remove(),S(this,wa,null),(i=d(this,Nh))==null||i.clear(),S(this,Nh,null),(a=d(this,$c))==null||a.clear(),S(this,$c,null),S(this,Bc,0))}}Fc=new WeakMap,Nh=new WeakMap,wa=new WeakMap,ba=new WeakMap,Cn=new WeakMap,$c=new WeakMap,Bc=new WeakMap,te=new WeakSet,Sn=function(){return d(this,Nh)||S(this,Nh,new Map)},_p=function(){return d(this,$c)||S(this,$c,new Map)},vd=function(){if(!d(this,wa)){const t=d(this,Cn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=d(this,Cn).createElementNS(Zi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),S(this,wa,d(this,Cn).createElementNS(Zi,"defs")),t.append(s),s.append(d(this,wa)),d(this,Cn).body.append(t)}return d(this,wa)},Ky=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=u[p]/255;const f=h.join(",");return[f,f,f]}const[r,s,i]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=r[u]/255,o[u]=s[u]/255,l[u]=i[u]/255;return[a.join(","),o.join(","),l.join(",")]},yd=function(t){if(d(this,Fc)===void 0){S(this,Fc,"");const r=d(this,Cn).URL;r!==d(this,Cn).baseURI&&(jw(r)?ye('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,Fc,$D(r,"")))}return`url(${d(this,Fc)}#${t})`},kO=function(t){const r=d(this,Cn).createElementNS(Zi,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},tS=function(t){const r=d(this,Cn).createElementNS(Zi,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},xd=function(t){const r=d(this,Cn).createElementNS(Zi,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),d(this,te,vd).append(r),r},Sp=function(t,r,s){const i=d(this,Cn).createElementNS(Zi,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Ep=function(t,r,s,i){const a=d(this,Cn).createElementNS(Zi,"feComponentTransfer");i.append(a),j(this,te,Sp).call(this,a,"feFuncR",t),j(this,te,Sp).call(this,a,"feFuncG",r),j(this,te,Sp).call(this,a,"feFuncB",s)},nS=function(t,r){const s=d(this,Cn).createElementNS(Zi,"feComponentTransfer");r.append(s),j(this,te,Sp).call(this,s,"feFuncA",t)},Ap=function(t){return d(this,te,vd).style.color=t,Pw(getComputedStyle(d(this,te,vd)).getPropertyValue("color"))};class jO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Je("Abstract method `_fetch` called.")}}class cj extends jO{async _fetch(e){const t=await Cv(e,"arraybuffer");return new Uint8Array(t)}}class PO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Je("Abstract method `_fetch` called.")}}class uj extends PO{async _fetch(e){const t=await Cv(e,"arraybuffer");return new Uint8Array(t)}}Fn&&ye("Please use the `legacy` build in Node.js environments.");async function VA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Qq extends NO{}class Jq extends AO{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Zq extends CO{async _fetch(e){return VA(e)}}class e7 extends jO{async _fetch(e){return VA(e)}}class t7 extends PO{async _fetch(e){return VA(e)}}const pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function rS(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class GA{isModifyingCurrentTransform(){return!1}getPattern(){Je("Abstract method `getPattern` called.")}}class n7 extends GA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===pn.STROKE||s===pn.FILL){const a=t.current.getClippedPathBoundingBox(s,vt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),r=ue.transform(r,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),rS(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else rS(e,this._bbox),i=this._createGradient(e);return i}}function Hb(n,e,t,r,s,i,a,o){const l=e.coords,u=e.colors,h=n.data,f=n.width*4;let p;l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p),l[r+1]>l[s+1]&&(p=r,r=s,s=p,p=a,a=o,o=p),l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p);const m=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,w=(l[r+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,x=(l[s+1]+e.offsetY)*e.scaleY;if(y>=x)return;const b=u[i],E=u[i+1],A=u[i+2],C=u[a],N=u[a+1],P=u[a+2],T=u[o],M=u[o+1],I=u[o+2],R=Math.round(y),F=Math.round(x);let O,V,B,L,D,z,H,Z;for(let $=R;$<=F;$++){if($<w){const U=$<y?0:(y-$)/(y-w);O=m-(m-g)*U,V=b-(b-C)*U,B=E-(E-N)*U,L=A-(A-P)*U}else{let U;$>x?U=1:w===x?U=0:U=(w-$)/(w-x),O=g-(g-v)*U,V=C-(C-T)*U,B=N-(N-M)*U,L=P-(P-I)*U}let W;$<y?W=0:$>x?W=1:W=(y-$)/(y-x),D=m-(m-v)*W,z=b-(b-T)*W,H=E-(E-M)*W,Z=A-(A-I)*W;const X=Math.round(Math.min(O,D)),Y=Math.round(Math.max(O,D));let le=f*$+X*4;for(let U=X;U<=Y;U++)W=(O-U)/(O-D),W<0?W=0:W>1&&(W=1),h[le++]=V-(V-z)*W|0,h[le++]=B-(B-H)*W|0,h[le++]=L-(L-Z)*W|0,h[le++]=255}}function r7(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,u=o-1;for(i=0;i<l;i++){let h=i*o;for(let f=0;f<u;f++,h++)Hb(n,t,r[h],r[h+1],r[h+o],s[h],s[h+1],s[h+o]),Hb(n,t,r[h+o+1],r[h+1],r[h+o],s[h+o+1],s[h+1],s[h+o])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)Hb(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class s7 extends GA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=u/f,y=h/p,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/m,scaleY:1/y},w=f+2*2,v=p+2*2,x=r.getCanvas("mesh",w,v),b=x.context,E=b.createImageData(f,p);if(t){const C=E.data;for(let N=0,P=C.length;N<P;N+=4)C[N]=t[0],C[N+1]=t[1],C[N+2]=t[2],C[N+3]=255}for(const C of this._figures)r7(E,C,g);return b.putImageData(E,2,2),{canvas:x.canvas,offsetX:o-2*m,offsetY:l-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){rS(e,this._bbox);const i=new Float32Array(2);if(s===pn.SHADING)ue.singularValueDecompose2dScale(vt(e),i);else if(this.matrix){ue.singularValueDecompose2dScale(this.matrix,i);const[o,l]=i;ue.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=o,i[1]*=l}else ue.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,s===pn.SHADING?null:this._background,t.cachedCanvases);return s!==pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class i7 extends GA{getPattern(){return"hotpink"}}function a7(n){switch(n[0]){case"RadialAxial":return new n7(n);case"Mesh":return new s7(n);case"Dummy":return new i7}throw new Error(`Unknown IR type: ${n[0]}`)}const dj={COLORED:1,UNCOLORED:2},Ax=class Ax{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),kw("TilingType: "+i);const h=t[0],f=t[1],p=t[2],m=t[3],y=p-h,g=m-f,w=new Float32Array(2);ue.singularValueDecompose2dScale(this.matrix,w);const[v,x]=w;ue.singularValueDecompose2dScale(this.baseTransform,w);const b=v*w[0],E=x*w[1];let A=y,C=g,N=!1,P=!1;const T=Math.ceil(l*b),M=Math.ceil(u*E),I=Math.ceil(y*b),R=Math.ceil(g*E);T>=I?A=l:N=!0,M>=R?C=u:P=!0;const F=this.getSizeAndScale(A,this.ctx.canvas.width,b),O=this.getSizeAndScale(C,this.ctx.canvas.height,E),V=e.cachedCanvases.getCanvas("pattern",F.size,O.size),B=V.context,L=o.createCanvasGraphics(B);if(L.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(L,s,a),B.translate(-F.scale*h,-O.scale*f),L.transform(F.scale,0,0,O.scale,0,0),B.save(),this.clipBbox(L,h,f,p,m),L.baseTransform=vt(L.ctx),L.executeOperatorList(r),L.endDrawing(),B.restore(),N||P){const D=V.canvas;N&&(A=l),P&&(C=u);const z=this.getSizeAndScale(A,this.ctx.canvas.width,b),H=this.getSizeAndScale(C,this.ctx.canvas.height,E),Z=z.size,$=H.size,W=e.cachedCanvases.getCanvas("pattern-workaround",Z,$),X=W.context,Y=N?Math.floor(y/l):0,le=P?Math.floor(g/u):0;for(let U=0;U<=Y;U++)for(let fe=0;fe<=le;fe++)X.drawImage(D,Z*U,$*fe,Z,$,0,0,Z,$);return{canvas:W.canvas,scaleX:z.scale,scaleY:H.scale,offsetX:h,offsetY:f}}return{canvas:V.canvas,scaleX:F.scale,scaleY:O.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const s=Math.max(Ax.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,o=i-r;e.ctx.rect(t,r,a,o),ue.axialAlignedBoundingBox([t,r,s,i],vt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case dj.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;s.fillStyle=i.fillColor=a,s.strokeStyle=i.strokeColor=o;break;case dj.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new Aq(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s){let i=r;s!==pn.SHADING&&(i=ue.transform(i,t.baseTransform),this.matrix&&(i=ue.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(i);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};q(Ax,"MAX_PATTERN_SIZE",3e3);let sS=Ax;function o7({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=yn.isLittleEndian?4278190080:255,[l,u]=a?[i,o]:[o,i],h=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<s;y++){for(const w=e+h;e<w;e++){const v=e<p?n[e]:255;t[m++]=v&128?u:l,t[m++]=v&64?u:l,t[m++]=v&32?u:l,t[m++]=v&16?u:l,t[m++]=v&8?u:l,t[m++]=v&4?u:l,t[m++]=v&2?u:l,t[m++]=v&1?u:l}if(f===0)continue;const g=e<p?n[e++]:255;for(let w=0;w<f;w++)t[m++]=g&1<<7-w?u:l}return{srcPos:e,destPos:m}}const hj=16,fj=100,l7=15,pj=10,nr=16,Wb=new DOMMatrix,Pr=new Float32Array(2),Dd=new Float32Array([1/0,1/0,-1/0,-1/0]);function c7(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,a,o){e.transform(t,r,s,i,a,o),this.__originalTransform(t,r,s,i,a,o)},n.setTransform=function(t,r,s,i,a,o){e.setTransform(t,r,s,i,a,o),this.__originalSetTransform(t,r,s,i,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,o){e.bezierCurveTo(t,r,s,i,a,o),this.__originalBezierCurveTo(t,r,s,i,a,o)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class u7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function vy(n,e,t,r,s,i,a,o,l,u){const[h,f,p,m,y,g]=vt(n);if(f===0&&p===0){const x=a*h+y,b=Math.round(x),E=o*m+g,A=Math.round(E),C=(a+l)*h+y,N=Math.abs(Math.round(C)-b)||1,P=(o+u)*m+g,T=Math.abs(Math.round(P)-A)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),b,A),n.drawImage(e,t,r,s,i,0,0,N,T),n.setTransform(h,f,p,m,y,g),[N,T]}if(h===0&&m===0){const x=o*p+y,b=Math.round(x),E=a*f+g,A=Math.round(E),C=(o+u)*p+y,N=Math.abs(Math.round(C)-b)||1,P=(a+l)*f+g,T=Math.abs(Math.round(P)-A)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,b,A),n.drawImage(e,t,r,s,i,0,0,T,N),n.setTransform(h,f,p,m,y,g),[T,N]}n.drawImage(e,t,r,s,i,a,o,l,u);const w=Math.hypot(h,f),v=Math.hypot(p,m);return[w*l,v*u]}class mj{constructor(e,t){q(this,"alphaIsShape",!1);q(this,"fontSize",0);q(this,"fontSizeScale",1);q(this,"textMatrix",null);q(this,"textMatrixScale",1);q(this,"fontMatrix",M_);q(this,"leading",0);q(this,"x",0);q(this,"y",0);q(this,"lineX",0);q(this,"lineY",0);q(this,"charSpacing",0);q(this,"wordSpacing",0);q(this,"textHScale",1);q(this,"textRenderingMode",_n.FILL);q(this,"textRise",0);q(this,"fillColor","#000000");q(this,"strokeColor","#000000");q(this,"patternFill",!1);q(this,"patternStroke",!1);q(this,"fillAlpha",1);q(this,"strokeAlpha",1);q(this,"lineWidth",1);q(this,"activeSMask",null);q(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Dd.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=pn.FILL,t=null){const r=this.minMax.slice();if(e===pn.STROKE){t||Je("Stroke bounding box must include transform."),ue.singularValueDecompose2dScale(t,Pr);const s=Pr[0]*this.lineWidth/2,i=Pr[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=ue.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Dd,0)}getClippedPathBoundingBox(e=pn.FILL,t=null){return ue.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function gj(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%nr,i=(t-s)/nr,a=s===0?i:i+1,o=n.createImageData(r,nr);let l=0,u;const h=e.data,f=o.data;let p,m,y,g;if(e.kind===By.GRAYSCALE_1BPP){const w=h.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),x=v.length,b=r+7>>3,E=4294967295,A=yn.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(y=p<i?nr:s,u=0,m=0;m<y;m++){const C=w-l;let N=0;const P=C>b?r:C*8-7,T=P&-8;let M=0,I=0;for(;N<T;N+=8)I=h[l++],v[u++]=I&128?E:A,v[u++]=I&64?E:A,v[u++]=I&32?E:A,v[u++]=I&16?E:A,v[u++]=I&8?E:A,v[u++]=I&4?E:A,v[u++]=I&2?E:A,v[u++]=I&1?E:A;for(;N<P;N++)M===0&&(I=h[l++],M=128),v[u++]=I&M?E:A,M>>=1}for(;u<x;)v[u++]=0;n.putImageData(o,0,p*nr)}}else if(e.kind===By.RGBA_32BPP){for(m=0,g=r*nr*4,p=0;p<i;p++)f.set(h.subarray(l,l+g)),l+=g,n.putImageData(o,0,m),m+=nr;p<a&&(g=r*s*4,f.set(h.subarray(l,l+g)),n.putImageData(o,0,m))}else if(e.kind===By.RGB_24BPP)for(y=nr,g=r*y,p=0;p<a;p++){for(p>=i&&(y=s,g=r*y),u=0,m=g;m--;)f[u++]=h[l++],f[u++]=h[l++],f[u++]=h[l++],f[u++]=255;n.putImageData(o,0,p*nr)}else throw new Error(`bad image kind: ${e.kind}`)}function vj(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%nr,i=(t-s)/nr,a=s===0?i:i+1,o=n.createImageData(r,nr);let l=0;const u=e.data,h=o.data;for(let f=0;f<a;f++){const p=f<i?nr:s;({srcPos:l}=o7({src:u,srcPos:l,dest:h,width:r,height:p,nonBlackColor:0})),n.putImageData(o,0,f*nr)}}function ap(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function yy(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function yj(n,e){if(e)return!0;ue.singularValueDecompose2dScale(n,Pr);const t=Math.fround(Hi.pixelRatio*Il.PDF_TO_CSS_UNITS);return Pr[0]<=t&&Pr[1]<=t}const d7=["butt","round","square"],h7=["miter","round","bevel"],f7={},xj={};var Ys,iS,aS,oS;const mC=class mC{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:o=null},l,u){k(this,Ys);this.ctx=e,this.current=new mj(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new u7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...vt(this.compositeCtx))}this.ctx.save(),yy(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=vt(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,a=e.fnArray;let o=t||0;const l=i.length;if(l===o)return o;const u=l-o>pj&&typeof r=="function",h=u?Date.now()+l7:0;let f=0;const p=this.commonObjs,m=this.objs;let y;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,r),o;if(y=a[o],y!==nx.dependency)this[y].apply(this,i[o]);else for(const g of i[o]){const w=g.startsWith("g_")?p:m;if(!w.has(g))return w.get(g,r),o}if(o++,o===l)return o;if(u&&++f>pj){if(Date.now()>h)return r(),o;f=0}}}endDrawing(){j(this,Ys,iS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),j(this,Ys,aS).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=r,l=s,u="prescale1",h,f;for(;i>2&&o>1||a>2&&l>1;){let p=o,m=l;i>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/p),a>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/m),h=this.cachedCanvases.getCanvas(u,p,m),f=h.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,o,l,0,0,p,m),e=h.canvas,o=p,l=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,o=vt(t);let l,u,h,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),i]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const M=l.get(u);if(M&&!a){const I=Math.round(Math.min(o[0],o[2])+o[4]),R=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:M,offsetX:I,offsetY:R}}h=M}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),vj(f.context,e));let p=ue.transform(o,[1/r,0,0,-1/s,0,0]);p=ue.transform(p,[1,0,0,1,0,-s]);const m=Dd.slice();ue.axialAlignedBoundingBox([0,0,r,s],p,m);const[y,g,w,v]=m,x=Math.round(w-y)||1,b=Math.round(v-g)||1,E=this.cachedCanvases.getCanvas("fillCanvas",x,b),A=E.context,C=y,N=g;A.translate(-C,-N),A.transform(...p),h||(h=this._scaleImage(f.canvas,Js(A)),h=h.img,l&&a&&l.set(u,h)),A.imageSmoothingEnabled=yj(vt(A),e.interpolate),vy(A,h,0,0,h.width,h.height,0,0,r,s),A.globalCompositeOperation="source-in";const P=ue.transform(Js(A),[1,0,0,1,-C,-N]);return A.fillStyle=a?i.getPattern(t,this,P,pn.FILL):i,A.fillRect(0,0,r,s),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,E.canvas)),{canvas:E.canvas,offsetX:Math.round(C),offsetY:Math.round(N)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=d7[e]}setLineJoin(e){this.ctx.lineJoin=h7[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=s.context;i.setTransform(this.suspendedCtx.getTransform()),ap(this.suspendedCtx,i),c7(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ap(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],o=s[2]-i,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,r,o,l,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,o,l,u,h,f){let p=e.canvas,m=l-h,y=u-f;if(a)if(m<0||y<0||m+r>p.width||y+s>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,s),v=w.context;v.drawImage(p,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,r,s),v.globalCompositeOperation="source-over",p=w.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,y,r,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,y,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,u,r,s),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(p,m,y,r,s,l,u,r,s),t.restore()}save(){this.inSMaskMode&&ap(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ap(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,a){this.ctx.transform(e,t,r,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let[s]=t;if(!r){s||(s=t[0]=new Path2D),this[e](s);return}if(!(s instanceof Path2D)){const i=t[0]=new Path2D;for(let a=0,o=s.length;a<o;)switch(s[a++]){case fy.moveTo:i.moveTo(s[a++],s[a++]);break;case fy.lineTo:i.lineTo(s[a++],s[a++]);break;case fy.curveTo:i.bezierCurveTo(s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case fy.closePath:i.closePath();break;default:ye(`Unrecognized drawing path operator: ${s[a-1]}`);break}s=i}ue.axialAlignedBoundingBox(r,vt(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const i=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,Js(r),pn.STROKE),i){const a=new Path2D;a.addPath(e,r.getTransform().invertSelf().multiplySelf(i)),e=a}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(pn.STROKE,vt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let a=!1;if(i){const l=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=s.getPattern(r,this,Js(r),pn.FILL),l){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=u}a=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),a&&r.restore(),t&&this.consumePath(e,o)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=f7}eoClip(){this.pendingClip=xj}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const r=new Path2D,s=t.getTransform().invertSelf();for(const{transform:i,x:a,y:o,fontSize:l,path:u}of e)u&&r.addPath(u,new DOMMatrix(i).preMultiplySelf(s).translate(a,o).scale(l,-l));t.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||M_,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ye("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",a=((h=r.systemFontInfo)==null?void 0:h.css)||`"${i}", ${r.fallbackName}`;let o="normal";r.black?o="900":r.bold&&(o="bold");const l=r.italic?"italic":"normal";let u=t;t<hj?u=hj:t>fj&&(u=fj),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s,i){const a=this.ctx,o=this.current,l=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,f=u&_n.FILL_STROKE_MASK,p=!!(u&_n.ADD_TO_PATH_FLAG),m=o.patternFill&&!l.missingFile,y=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||p||m||y)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,e)),g&&(l.disableFontFace||m||y)){a.save(),a.translate(t,r),a.scale(h,-h);let w;if((f===_n.FILL||f===_n.FILL_STROKE)&&(s?(w=a.getTransform(),a.setTransform(...s),a.fill(j(this,Ys,oS).call(this,g,w,s))):a.fill(g)),f===_n.STROKE||f===_n.FILL_STROKE)if(i){w||(w=a.getTransform()),a.setTransform(...i);const{a:v,b:x,c:b,d:E}=w,A=ue.inverseTransform(i),C=ue.transform([v,x,b,E,0,0],A);ue.singularValueDecompose2dScale(C,Pr),a.lineWidth*=Math.max(Pr[0],Pr[1])/h,a.stroke(j(this,Ys,oS).call(this,g,w,i))}else a.lineWidth/=h,a.stroke(g);a.restore()}else(f===_n.FILL||f===_n.FILL_STROKE)&&a.fillText(e,t,r),(f===_n.STROKE||f===_n.FILL_STROKE)&&a.strokeText(e,t,r);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:vt(a),x:t,y:r,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return ke(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,f=e.length,p=r.vertical,m=p?1:-1,y=r.defaultVMetrics,g=s*t.fontMatrix[0],w=t.textRenderingMode===_n.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),u>0?i.scale(h,-1):i.scale(h,1);let v,x;if(t.patternFill){i.save();const N=t.fillColor.getPattern(i,this,Js(i),pn.FILL);v=vt(i),i.restore(),i.fillStyle=N}if(t.patternStroke){i.save();const N=t.strokeColor.getPattern(i,this,Js(i),pn.STROKE);x=vt(i),i.restore(),i.strokeStyle=N}let b=t.lineWidth;const E=t.textMatrixScale;if(E===0||b===0){const N=t.textRenderingMode&_n.FILL_STROKE_MASK;(N===_n.STROKE||N===_n.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=E;if(a!==1&&(i.scale(a,a),b/=a),i.lineWidth=b,r.isInvalidPDFjsFont){const N=[];let P=0;for(const T of e)N.push(T.unicode),P+=T.width;i.fillText(N.join(""),0,0),t.x+=P*g*h,i.restore(),this.compose();return}let A=0,C;for(C=0;C<f;++C){const N=e[C];if(typeof N=="number"){A+=m*N*s/1e3;continue}let P=!1;const T=(N.isSpace?l:0)+o,M=N.fontChar,I=N.accent;let R,F,O=N.width;if(p){const B=N.vmetric||y,L=-(N.vmetric?B[1]:O*.5)*g,D=B[2]*g;O=B?-B[0]:O,R=L/a,F=(A+D)/a}else R=A/a,F=0;if(r.remeasure&&O>0){const B=i.measureText(M).width*1e3/s*a;if(O<B&&this.isFontSubpixelAAEnabled){const L=O/B;P=!0,i.save(),i.scale(L,1),R/=L}else O!==B&&(R+=(O-B)/2e3*s/a)}if(this.contentVisible&&(N.isInFont||r.missingFile)){if(w&&!I)i.fillText(M,R,F);else if(this.paintChar(M,R,F,v,x),I){const B=R+s*I.offset.x/a,L=F-s*I.offset.y/a;this.paintChar(I.fontChar,B,L,v,x)}}const V=p?O*g-T*u:O*g+T*u;A+=V,P&&i.restore()}p?t.y-=A:t.x+=A*h,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,a=r.fontDirection,o=s.vertical?1:-1,l=r.charSpacing,u=r.wordSpacing,h=r.textHScale*a,f=r.fontMatrix||M_,p=e.length,m=r.textRenderingMode===_n.INVISIBLE;let y,g,w,v;if(!(m||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),r.textMatrix&&t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(h,a),y=0;y<p;++y){if(g=e[y],typeof g=="number"){v=o*g*i/1e3,this.ctx.translate(v,0),r.x+=v*h;continue}const x=(g.isSpace?u:0)+l,b=s.charProcOperatorList[g.operatorListId];b?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(b),this.restore()):ye(`Type3 character "${g.operatorListId}" is not available.`);const E=[g.width,0];ue.applyTransform(E,f),w=E[0]*i+x,t.translate(w,0),r.x+=w*h}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,a){const o=new Path2D;o.rect(r,s,i-r,a-s),this.ctx.clip(o),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=this.baseTransform||vt(this.ctx),s={createCanvasGraphics:i=>new mC(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new sS(e,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=a7(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,Js(t),pn.SHADING);const s=Js(t);if(s){const{width:i,height:a}=t.canvas,o=Dd.slice();ue.axialAlignedBoundingBox([0,0,i,a],s,o);const[l,u,h,f]=o;this.ctx.fillRect(l,u,h-l,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Je("Should not call beginInlineImage")}beginImageData(){Je("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=vt(this.ctx),t)){ue.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[r,s,i,a]=t,o=new Path2D;o.rect(r,s,i-r,a-s),this.ctx.clip(o),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||kw("TODO: Support non-isolated groups."),e.knockout&&ye("Knockout groups not supported.");const r=vt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Dd.slice();ue.axialAlignedBoundingBox(e.bbox,vt(t),s);const i=[0,0,t.canvas.width,t.canvas.height];s=ue.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,l,u),p=f.context;p.translate(-a,-o),p.transform(...r);let m=new Path2D;const[y,g,w,v]=e.bbox;if(m.rect(y,g,w-y,v-g),e.matrix){const x=new Path2D;x.addPath(m,new DOMMatrix(e.matrix)),m=x}p.clip(m),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),ap(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=vt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=Dd.slice();ue.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(j(this,Ys,iS).call(this),yy(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o,ue.singularValueDecompose2dScale(vt(this.ctx),Pr);const{viewportScale:l}=this,u=Math.ceil(a*this.outputScaleX*l),h=Math.ceil(o*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(u,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Pr[0],0,0,-Pr[1],0,o*Pr[1]),yy(this.ctx)}else{yy(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],a,o),this.ctx.clip(l)}}this.current=new mj(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),j(this,Ys,aS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this._createMaskCanvas(e),i=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(i,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=vt(o);o.transform(t,r,s,i,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,f=a.length;h<f;h+=2){const p=ue.transform(l,[t,r,s,i,a[h],a[h+1]]);o.drawImage(u.canvas,p[4],p[5])}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:o,height:l,transform:u}=i,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),f=h.context;f.save();const p=this.getObject(a,i);vj(f,p),f.globalCompositeOperation="source-in",f.fillStyle=s?r.getPattern(f,this,Js(t),pn.FILL):r,f.fillRect(0,0,o,l),f.restore(),t.save(),t.transform(...u),t.scale(1,-1),vy(t,h.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ye("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){ye("Dependent image isn't ready yet");return}const a=i.width,o=i.height,l=[];for(let u=0,h=s.length;u<h;u+=2)l.push({transform:[t,0,0,r,s[u],s[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;this.save();const{filter:i}=s;i!=="none"&&i!==""&&(s.filter="none"),s.scale(1/t,-1/r);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,r).context;gj(u,e),a=this.applyTransferMapsToCanvas(u)}const o=this._scaleImage(a,Js(s));s.imageSmoothingEnabled=yj(vt(s),e.interpolate),vy(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,a).context;gj(l,e),s=this.applyTransferMapsToCanvas(l)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),vy(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(r||(this.pendingClip===xj?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=vt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,o;if(r===0&&s===0){const l=Math.abs(t),u=Math.abs(i);if(l===u)if(e===0)a=o=1/l;else{const h=l*e;a=o=h<1?1/h:1}else if(e===0)a=1/l,o=1/u;else{const h=l*e,f=u*e;a=h<1?1/h:1,o=f<1?1/f:1}}else{const l=Math.abs(t*i-r*s),u=Math.hypot(t,r),h=Math.hypot(s,i);if(e===0)a=h/l,o=u/l;else{const f=e*l;a=h>f?h/f:1,o=u>f?u/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,a]=this.getScaleForStroking();if(i===a){r.lineWidth=(s||1)*i,r.stroke(e);return}const o=r.getLineDash();t&&r.save(),r.scale(i,a),Wb.a=1/i,Wb.d=1/a;const l=new Path2D;if(l.addPath(e,Wb),o.length>0){const u=Math.max(i,a);r.setLineDash(o.map(h=>h/u)),r.lineDashOffset/=u}r.lineWidth=s||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ys=new WeakSet,iS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},aS=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},oS=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Qd=mC;for(const n in nx)Qd.prototype[n]!==void 0&&(Qd.prototype[nx[n]]=Qd.prototype[n]);var ng,rg;class Ti{static get workerPort(){return d(this,ng)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,ng,e)}static get workerSrc(){return d(this,rg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,rg,e)}}ng=new WeakMap,rg=new WeakMap,k(Ti,ng,null),k(Ti,rg,"");var kh,sg;class p7{constructor({parsedData:e,rawData:t}){k(this,kh);k(this,sg);S(this,kh,e),S(this,sg,t)}getRaw(){return d(this,sg)}get(e){return d(this,kh).get(e)??null}[Symbol.iterator](){return d(this,kh).entries()}}kh=new WeakMap,sg=new WeakMap;const wd=Symbol("INTERNAL");var ig,ag,og,jh;class m7{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){k(this,ig,!1);k(this,ag,!1);k(this,og,!1);k(this,jh,!0);S(this,ig,!!(e&kr.DISPLAY)),S(this,ag,!!(e&kr.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(d(this,og))return d(this,jh);if(!d(this,jh))return!1;const{print:e,view:t}=this.usage;return d(this,ig)?(t==null?void 0:t.viewState)!=="OFF":d(this,ag)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==wd&&Je("Internal method `_setVisible` called."),S(this,og,r),S(this,jh,t)}}ig=new WeakMap,ag=new WeakMap,og=new WeakMap,jh=new WeakMap;var Vo,Xe,Ph,Th,lg,lS;class g7{constructor(e,t=kr.DISPLAY){k(this,lg);k(this,Vo,null);k(this,Xe,new Map);k(this,Ph,null);k(this,Th,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,Th,e.order);for(const r of e.groups)d(this,Xe).set(r.id,new m7(t,r));if(e.baseState==="OFF")for(const r of d(this,Xe).values())r._setVisible(wd,!1);for(const r of e.on)d(this,Xe).get(r)._setVisible(wd,!0);for(const r of e.off)d(this,Xe).get(r)._setVisible(wd,!1);S(this,Ph,this.getHash())}}isVisible(e){if(d(this,Xe).size===0)return!0;if(!e)return kw("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,Xe).has(e.id)?d(this,Xe).get(e.id).visible:(ye(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return j(this,lg,lS).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,Xe).has(t))return ye(`Optional content group not found: ${t}`),!0;if(d(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,Xe).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!d(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,Xe).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!d(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,Xe).has(t))return ye(`Optional content group not found: ${t}`),!0;if(d(this,Xe).get(t).visible)return!1}return!0}return ye(`Unknown optional content policy ${e.policy}.`),!0}return ye(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=d(this,Xe).get(e);if(!s){ye(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((i=d(this,Xe).get(o))==null||i._setVisible(wd,!1,!0));s._setVisible(wd,!!t,!0),S(this,Vo,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=d(this,Xe).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}S(this,Vo,null)}get hasInitialVisibility(){return d(this,Ph)===null||this.getHash()===d(this,Ph)}getOrder(){return d(this,Xe).size?d(this,Th)?d(this,Th).slice():[...d(this,Xe).keys()]:null}getGroup(e){return d(this,Xe).get(e)||null}getHash(){if(d(this,Vo)!==null)return d(this,Vo);const e=new xO;for(const[t,r]of d(this,Xe))e.update(`${t}:${r.visible}`);return S(this,Vo,e.hexdigest())}[Symbol.iterator](){return d(this,Xe).entries()}}Vo=new WeakMap,Xe=new WeakMap,Ph=new WeakMap,Th=new WeakMap,lg=new WeakSet,lS=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=j(this,lg,lS).call(this,i);else if(d(this,Xe).has(i))a=d(this,Xe).get(i).visible;else return ye(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class v7{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Ft(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Ft(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ft(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new y7(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new x7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class y7{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=HA(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class x7{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function w7(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=l(h),h=u(h),i(h)}if(t=a(n),t){const h=u(t);return i(h)}if(t=r("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),i(h)}function r(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(h,{fatal:!0}),m=Av(f);f=p.decode(m),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function a(h){const f=[];let p;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(h))!==null;){let[,g,w,v]=p;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[w,v]}const y=[];for(let g=0;g<f.length&&g in f;++g){let[w,v]=f[g];v=o(v),w&&(v=unescape(v),g===0&&(v=l(v))),y.push(v)}return y.join("")}function o(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function l(h){const f=h.indexOf("'");if(f===-1)return h;const p=h.slice(0,f),y=h.slice(f+1).replace(/^[^']*'/,"");return s(p,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),s(p,y);try{y=atob(y)}catch{}return s(p,y)})}return""}function TO(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function Tw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function RO({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function MO(n){const e=n.get("Content-Disposition");if(e){let t=w7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(HA(t))return t}return null}function jv(n,e){return new rx(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function IO(n){return n===200||n===206}function DO(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function OO(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ye(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class b7{constructor(e){q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=TO(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new _7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new S7(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class _7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,DO(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Tw(i.url),!IO(i.status))throw jv(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:o,suggestedLength:l}=RO({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=MO(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ml("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:OO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class S7{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,DO(i,this._withCredentials,this._abortController)).then(o=>{const l=Tw(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!IO(o.status))throw jv(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:OO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Vb=200,Gb=206;function E7(n){const e=n.response;return typeof e!="string"?e:Av(e).buffer}class A7{constructor({url:e,httpHeaders:t,withCredentials:r}){q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=TO(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Gb):s.expectedStatus=Vb,t.responseType="arraybuffer",Ft(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||Vb;if(!(i===Vb&&r.expectedStatus===Gb)&&i!==r.expectedStatus){r.onError(s.status);return}const o=E7(s);if(i===Gb){const l=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?r.onDone({begin:parseInt(u[1],10),chunk:o}):(ye('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class C7{constructor(e){this._source=e,this._manager=new A7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ft(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new N7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new k7(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class N7{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Tw(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=RO({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=MO(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=jv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class k7{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Tw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=jv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const j7=/^[a-z][a-z0-9\-+.]+:/i;function P7(n){if(j7.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class T7{constructor(e){this.source=e,this.url=P7(e.url),Ft(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new R7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new M7(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class R7{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=jv(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ml("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class M7{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const op=Symbol("INITIAL_DATA");var gr,cg,cS;class LO{constructor(){k(this,cg);k(this,gr,Object.create(null))}get(e,t=null){if(t){const s=j(this,cg,cS).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=d(this,gr)[e];if(!r||r.data===op)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=d(this,gr)[e];return!!t&&t.data!==op}delete(e){const t=d(this,gr)[e];return!t||t.data===op?!1:(delete d(this,gr)[e],!0)}resolve(e,t=null){const r=j(this,cg,cS).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in d(this,gr)){const{data:r}=d(this,gr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}S(this,gr,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,gr)){const{data:t}=d(this,gr)[e];t!==op&&(yield[e,t])}}}gr=new WeakMap,cg=new WeakSet,cS=function(e){var t;return(t=d(this,gr))[e]||(t[e]={...Promise.withResolvers(),data:op})};const I7=1e5,wj=30;var Hj,Go,Zn,ug,dg,zc,_a,hg,fg,Uc,Rh,Mh,qo,Ih,pg,Dh,Hc,mg,gg,Oh,Wc,vg,Yo,Lh,Za,FO,$O,uS,Or,Xy,dS,BO,zO;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:r}){k(this,Za);k(this,Go,Promise.withResolvers());k(this,Zn,null);k(this,ug,!1);k(this,dg,!!((Hj=globalThis.FontInspector)!=null&&Hj.enabled));k(this,zc,null);k(this,_a,null);k(this,hg,0);k(this,fg,0);k(this,Uc,null);k(this,Rh,null);k(this,Mh,0);k(this,qo,0);k(this,Ih,Object.create(null));k(this,pg,[]);k(this,Dh,null);k(this,Hc,[]);k(this,mg,new WeakMap);k(this,gg,null);var l;if(e instanceof ReadableStream)S(this,Dh,e);else if(typeof e=="object")S(this,Dh,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,Zn,S(this,Rh,t)),S(this,qo,r.scale*Hi.pixelRatio),S(this,Mh,r.rotation),S(this,_a,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=r.rawDims;S(this,gg,[1,0,0,-1,-a,o+i]),S(this,fg,s),S(this,hg,i),j(l=Ut,Or,BO).call(l),$u(t,r),d(this,Go).promise.finally(()=>{d(Ut,Lh).delete(this),S(this,_a,null),S(this,Ih,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=yn.platform;return ke(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,Uc).read().then(({value:t,done:r})=>{if(r){d(this,Go).resolve();return}d(this,zc)??S(this,zc,t.lang),Object.assign(d(this,Ih),t.styles),j(this,Za,FO).call(this,t.items),e()},d(this,Go).reject)};return S(this,Uc,d(this,Dh).getReader()),d(Ut,Lh).add(this),e(),d(this,Go).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*Hi.pixelRatio,s=e.rotation;if(s!==d(this,Mh)&&(t==null||t(),S(this,Mh,s),$u(d(this,Rh),{rotation:s})),r!==d(this,qo)){t==null||t(),S(this,qo,r);const a={div:null,properties:null,ctx:j(i=Ut,Or,Xy).call(i,d(this,zc))};for(const o of d(this,Hc))a.properties=d(this,mg).get(o),a.div=o,j(this,Za,uS).call(this,a)}}cancel(){var t;const e=new Ml("TextLayer task cancelled.");(t=d(this,Uc))==null||t.cancel(e).catch(()=>{}),S(this,Uc,null),d(this,Go).reject(e)}get textDivs(){return d(this,Hc)}get textContentItemsStr(){return d(this,pg)}static cleanup(){if(!(d(this,Lh).size>0)){d(this,Oh).clear();for(const{canvas:e}of d(this,Wc).values())e.remove();d(this,Wc).clear()}}};Go=new WeakMap,Zn=new WeakMap,ug=new WeakMap,dg=new WeakMap,zc=new WeakMap,_a=new WeakMap,hg=new WeakMap,fg=new WeakMap,Uc=new WeakMap,Rh=new WeakMap,Mh=new WeakMap,qo=new WeakMap,Ih=new WeakMap,pg=new WeakMap,Dh=new WeakMap,Hc=new WeakMap,mg=new WeakMap,gg=new WeakMap,Oh=new WeakMap,Wc=new WeakMap,vg=new WeakMap,Yo=new WeakMap,Lh=new WeakMap,Za=new WeakSet,FO=function(e){var s,i;if(d(this,ug))return;(i=d(this,_a)).ctx??(i.ctx=j(s=Ut,Or,Xy).call(s,d(this,zc)));const t=d(this,Hc),r=d(this,pg);for(const a of e){if(t.length>I7){ye("Ignoring additional textDivs for performance reasons."),S(this,ug,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=d(this,Zn);S(this,Zn,document.createElement("span")),d(this,Zn).classList.add("markedContent"),a.id&&d(this,Zn).setAttribute("id",`${a.id}`),o.append(d(this,Zn))}else a.type==="endMarkedContent"&&S(this,Zn,d(this,Zn).parentNode);continue}r.push(a.str),j(this,Za,$O).call(this,a)}},$O=function(e){var g;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,Hc).push(t);const s=ue.transform(d(this,gg),e.transform);let i=Math.atan2(s[1],s[0]);const a=d(this,Ih)[e.fontName];a.vertical&&(i+=Math.PI/2);let o=d(this,dg)&&a.fontSubstitution||a.fontFamily;o=Ut.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),u=l*j(g=Ut,Or,zO).call(g,o,a,d(this,zc));let h,f;i===0?(h=s[4],f=s[5]-u):(h=s[4]+u*Math.sin(i),f=s[5]-u*Math.cos(i));const p="calc(var(--total-scale-factor) *",m=t.style;d(this,Zn)===d(this,Rh)?(m.left=`${(100*h/d(this,fg)).toFixed(2)}%`,m.top=`${(100*f/d(this,hg)).toFixed(2)}%`):(m.left=`${p}${h.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(d(Ut,Yo)*l).toFixed(2)}px)`,m.fontFamily=o,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,dg)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(y=!0)}if(y&&(r.canvasWidth=a.vertical?e.height:e.width),d(this,mg).set(t,r),d(this,_a).div=t,d(this,_a).properties=r,j(this,Za,uS).call(this,d(this,_a)),r.hasText&&d(this,Zn).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),d(this,Zn).append(w)}},uS=function(e){var o;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(d(Ut,Yo)>1&&(a=`scale(${1/d(Ut,Yo)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=i,{canvasWidth:u,fontSize:h}=r;j(o=Ut,Or,dS).call(o,s,h*d(this,qo),l);const{width:f}=s.measureText(t.textContent);f>0&&(a=`scaleX(${u*d(this,qo)/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Or=new WeakSet,Xy=function(e=null){let t=d(this,Wc).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,Wc).set(e,t),d(this,vg).set(t,{size:0,family:""})}return t},dS=function(e,t,r){const s=d(this,vg).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},BO=function(){if(d(this,Yo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,Yo,e.getBoundingClientRect().height),e.remove()},zO=function(e,t,r){const s=d(this,Oh).get(e);if(s)return s;const i=j(this,Or,Xy).call(this,r);i.canvas.width=i.canvas.height=wj,j(this,Or,dS).call(this,i,wj,e);const a=i.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return o?u=o/(o+l):(yn.platform.isFirefox&&ye("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),d(this,Oh).set(e,u),u},k(Ut,Or),k(Ut,Oh,new Map),k(Ut,Wc,new Map),k(Ut,vg,new WeakMap),k(Ut,Yo,null),k(Ut,Lh,new Set);let _m=Ut;class Sm{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(Sm.shouldBuildText(o))(l=i==null?void 0:i.attributes)!=null&&l.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const u of i.children)s(u)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const D7=100;function UO(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new hS,{docId:t}=e,r=n.url?Wq(n.url):null,s=n.data?Vq(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof HO?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Em?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!jw(n.docBaseUrl)?n.docBaseUrl:null,m=my(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(Fn?Zq:lj),w=my(n.iccUrl),v=my(n.standardFontDataUrl),x=n.StandardFontDataFactory||(Fn?e7:cj),b=my(n.wasmUrl),E=n.WasmFactory||(Fn?t7:uj),A=n.stopAtErrors!==!0,C=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Fn,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Fn&&(yn.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:Fn,R=n.fontExtraProperties===!0,F=n.enableXfa===!0,O=n.ownerDocument||globalThis.document,V=n.disableRange===!0,B=n.disableStream===!0,L=n.disableAutoFetch===!0,D=n.pdfBug===!0,z=n.CanvasFactory||(Fn?Jq:Kq),H=n.FilterFactory||(Fn?Qq:Xq),Z=n.enableHWA===!0,$=n.useWasm!==!1,W=l?l.length:n.length??NaN,X=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Fn&&!I,Y=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===lj&&x===cj&&E===uj&&m&&v&&b&&gp(m,document.baseURI)&&gp(v,document.baseURI)&&gp(b,document.baseURI)),le=null;_q(f);const U={canvasFactory:new z({ownerDocument:O,enableHWA:Z}),filterFactory:new H({docId:t,ownerDocument:O}),cMapReaderFactory:Y?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:Y?null:new x({baseUrl:v}),wasmFactory:Y?null:new E({baseUrl:b})};h||(h=Em.create({verbosity:f,port:Ti.workerPort}),e._worker=h);const fe={docId:t,apiVersion:"5.4.54",data:s,password:o,disableAutoFetch:L,rangeChunkSize:u,length:W,docBaseUrl:p,enableXfa:F,evaluatorOptions:{maxImageSize:C,disableFontFace:I,ignoreErrors:A,isEvalSupported:N,isOffscreenCanvasSupported:P,isImageDecoderSupported:T,canvasMaxAreaInBytes:M,fontExtraProperties:R,useSystemFonts:X,useWasm:$,useWorkerFetch:Y,cMapUrl:m,iccUrl:w,standardFontDataUrl:v,wasmUrl:b}},Se={ownerDocument:O,pdfBug:D,styleElement:le,loadingParams:{disableAutoFetch:L,enableXfa:F}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ae=h.messageHandler.sendWithPromise("GetDocRequest",fe,s?[s.buffer]:null);let Ce;if(l)Ce=new v7(l,{disableRange:V,disableStream:B});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Te=gp(r)?b7:Fn?T7:C7;Ce=new Te({url:r,length:W,httpHeaders:i,withCredentials:a,rangeChunkSize:u,disableRange:V,disableStream:B})}return Ae.then(Te=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Bt=new bp(t,Te,h.port),Kn=new F7(Bt,e,Ce,Se,U,Z);e._transport=Kn,Bt.send("Ready",null)})}).catch(e._capability.reject),e}var Cx;const Nx=class Nx{constructor(){q(this,"_capability",Promise.withResolvers());q(this,"_transport",null);q(this,"_worker",null);q(this,"docId",`d${Xt(Nx,Cx)._++}`);q(this,"destroyed",!1);q(this,"onPassword",null);q(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Cx=new WeakMap,k(Nx,Cx,0);let hS=Nx;var Vc,yg,xg,wg,bg;class HO{constructor(e,t,r=!1,s=null){k(this,Vc,Promise.withResolvers());k(this,yg,[]);k(this,xg,[]);k(this,wg,[]);k(this,bg,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){d(this,bg).push(e)}addProgressListener(e){d(this,wg).push(e)}addProgressiveReadListener(e){d(this,xg).push(e)}addProgressiveDoneListener(e){d(this,yg).push(e)}onDataRange(e,t){for(const r of d(this,bg))r(e,t)}onDataProgress(e,t){d(this,Vc).promise.then(()=>{for(const r of d(this,wg))r(e,t)})}onDataProgressiveRead(e){d(this,Vc).promise.then(()=>{for(const t of d(this,xg))t(e)})}onDataProgressiveDone(){d(this,Vc).promise.then(()=>{for(const e of d(this,yg))e()})}transportReady(){d(this,Vc).resolve()}requestDataRange(e,t){Je("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Vc=new WeakMap,yg=new WeakMap,xg=new WeakMap,wg=new WeakMap,bg=new WeakMap;class O7{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ke(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Sa,Gc,Cp;class L7{constructor(e,t,r,s=!1){k(this,Gc);k(this,Sa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new ij:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new LO,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Nv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ke(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=_o.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:p=!1}){var A,C;(A=this._stats)==null||A.time("Overall");const m=this._transport.getRenderingIntent(s,i,f,p),{renderingIntent:y,cacheKey:g}=m;S(this,Sa,!1),l||(l=this._transport.getOptionalContentConfig(y));let w=this._intentStates.get(g);w||(w=Object.create(null),this._intentStates.set(g,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const v=!!(y&kr.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(m));const x=N=>{var P;w.renderTasks.delete(b),v&&S(this,Sa,!0),j(this,Gc,Cp).call(this),N?(b.capability.reject(N),this._abortOperatorList({intentState:w,reason:N instanceof Error?N:new Error(N)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new fS({callback:x,params:{canvas:t,canvasContext:e,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(w.renderTasks||(w.renderTasks=new Set)).add(b);const E=b.task;return Promise.all([w.displayReadyCapability.promise,l]).then(([N,P])=>{var T;if(this.destroyed){x();return}if((T=this._stats)==null||T.time("Rendering"),!(P.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:N,optionalContentConfig:P}),b.operatorListChanged()}).catch(x),E}getOperatorList({intent:e="display",annotationMode:t=_o.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var u;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Sm.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:l,done:u}){if(u){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),S(this,Sa,!1),Promise.all(e)}cleanup(e=!1){S(this,Sa,!0);const t=j(this,Gc,Cp).call(this);return e&&t&&this._stats&&(this._stats=new ij),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&j(this,Gc,Cp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const h=()=>{l.read().then(({value:f,done:p})=>{if(p){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),h())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const p of u.renderTasks)p.operatorListChanged();j(this,Gc,Cp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof UA){let s=D7;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Ml(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Sa=new WeakMap,Gc=new WeakSet,Cp=function(){if(!d(this,Sa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Sa,!1),!0};var Ko,Ns,Ea,qc,kx,Yc,Kc,Hn,Qy,WO,VO,Np,Fh,Jy;const ct=class ct{constructor({name:e=null,port:t=null,verbosity:r=Sq()}={}){k(this,Hn);k(this,Ko,Promise.withResolvers());k(this,Ns,null);k(this,Ea,null);k(this,qc,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(d(ct,Kc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(ct,Kc).set(t,this),j(this,Hn,WO).call(this,t)}else j(this,Hn,VO).call(this)}get promise(){return d(this,Ko).promise}get port(){return d(this,Ea)}get messageHandler(){return d(this,Ns)}destroy(){var e,t;this.destroyed=!0,(e=d(this,qc))==null||e.terminate(),S(this,qc,null),d(ct,Kc).delete(d(this,Ea)),S(this,Ea,null),(t=d(this,Ns))==null||t.destroy(),S(this,Ns,null)}static create(e){const t=d(this,Kc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ct(e)}static get workerSrc(){if(Ti.workerSrc)return Ti.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ke(this,"_setupFakeWorkerGlobal",(async()=>d(this,Fh,Jy)?d(this,Fh,Jy):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ko=new WeakMap,Ns=new WeakMap,Ea=new WeakMap,qc=new WeakMap,kx=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,Hn=new WeakSet,Qy=function(){d(this,Ko).resolve(),d(this,Ns).send("configure",{verbosity:this.verbosity})},WO=function(e){S(this,Ea,e),S(this,Ns,new bp("main","worker",e)),d(this,Ns).on("ready",()=>{}),j(this,Hn,Qy).call(this)},VO=function(){if(d(ct,Yc)||d(ct,Fh,Jy)){j(this,Hn,Np).call(this);return}let{workerSrc:e}=ct;try{ct._isSameOrigin(window.location,e)||(e=ct._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new bp("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?d(this,Ko).reject(new Error("Worker was destroyed")):j(this,Hn,Np).call(this)},i=new AbortController;t.addEventListener("error",()=>{d(this,qc)||s()},{signal:i.signal}),r.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}S(this,Ns,r),S(this,Ea,t),S(this,qc,t),j(this,Hn,Qy).call(this)}),r.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{j(this,Hn,Np).call(this)}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{kw("The worker has been disabled.")}j(this,Hn,Np).call(this)},Np=function(){d(ct,Yc)||(ye("Setting up fake worker."),S(ct,Yc,!0)),ct._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,Ko).reject(new Error("Worker was destroyed"));return}const t=new Yq;S(this,Ea,t);const r=`fake${Xt(ct,kx)._++}`,s=new bp(r+"_worker",r,t);e.setup(s,t),S(this,Ns,new bp(r,r+"_worker",t)),j(this,Hn,Qy).call(this)}).catch(e=>{d(this,Ko).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Fh=new WeakSet,Jy=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(ct,Fh),k(ct,kx,0),k(ct,Yc,!1),k(ct,Kc,new WeakMap),Fn&&(S(ct,Yc,!0),Ti.workerSrc||(Ti.workerSrc="./pdf.worker.mjs")),ct._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},ct._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ct.fromPort=e=>{if(Dq("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ct.create(e)};let Em=ct;var Aa,vi,$h,Bh,Ca,Xc,kp;class F7{constructor(e,t,r,s,i,a){k(this,Xc);k(this,Aa,new Map);k(this,vi,new Map);k(this,$h,new Map);k(this,Bh,new Map);k(this,Ca,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new LO,this.fontLoader=new Uq({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return ke(this,"annotationStorage",new WA)}getRenderingIntent(e,t=_o.ENABLE,r=null,s=!1,i=!1){let a=kr.DISPLAY,o=Z_;switch(e){case"any":a=kr.ANY;break;case"display":break;case"print":a=kr.PRINT;break;default:ye(`getRenderingIntent - invalid intent: ${e}`)}const l=a&kr.PRINT&&r instanceof bO?r:this.annotationStorage;switch(t){case _o.DISABLE:a+=kr.ANNOTATIONS_DISABLE;break;case _o.ENABLE:break;case _o.ENABLE_FORMS:a+=kr.ANNOTATIONS_FORMS;break;case _o.ENABLE_STORAGE:a+=kr.ANNOTATIONS_STORAGE,o=l.serializable;break;default:ye(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=kr.IS_EDITING),i&&(a+=kr.OPLIST);const{ids:u,hash:h}=l.modifiedIds,f=[a,o.hash,h];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=d(this,Ca))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of d(this,vi).values())e.push(s._destroy());d(this,vi).clear(),d(this,$h).clear(),d(this,Bh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),d(this,Aa).clear(),this.filterFactory.destroy(),_m.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ml("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Ft(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Ft(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{Ft(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}Ft(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new O7(r,this))}),e.on("DocException",r=>{t._capability.reject(Xn(r))}),e.on("PasswordRequest",r=>{S(this,Ca,Promise.withResolvers());try{if(!t.onPassword)throw Xn(r);const s=i=>{i instanceof Error?d(this,Ca).reject(i):d(this,Ca).resolve({password:i})};t.onPassword(s,r.code)}catch(s){d(this,Ca).reject(s)}return d(this,Ca).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;d(this,vi).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const h=i.error;ye(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const o=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,l=new Hq(i,o);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(r,l)});break;case"CopyLocalImage":const{imageRef:u}=i;Ft(u,"The imageRef must be defined.");for(const h of d(this,vi).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===u)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{var l;if(this.destroyed)return;const o=d(this,vi).get(s);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&ye("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=d(this,$h).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&d(this,Bh).set(i.refStr,e);const a=new L7(t,i,this,this._params.pdfBug);return d(this,vi).set(t,a),a});return d(this,$h).set(t,s),s}getPageIndex(e){return eS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return j(this,Xc,kp).call(this,"GetFieldObjects")}hasJSActions(){return j(this,Xc,kp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return j(this,Xc,kp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return j(this,Xc,kp).call(this,"GetOptionalContentConfig").then(t=>new g7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,Aa).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new p7(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return d(this,Aa).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,vi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,Aa).clear(),this.filterFactory.destroy(!0),_m.cleanup()}}cachedPageNumber(e){if(!eS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,Bh).get(t)??null}}Aa=new WeakMap,vi=new WeakMap,$h=new WeakMap,Bh=new WeakMap,Ca=new WeakMap,Xc=new WeakSet,kp=function(e,t=null){const r=d(this,Aa).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return d(this,Aa).set(e,s),s};var Xo;class $7{constructor(e){k(this,Xo,null);q(this,"onContinue",null);q(this,"onError",null);S(this,Xo,e)}get promise(){return d(this,Xo).capability.promise}cancel(e=0){d(this,Xo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,Xo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,Xo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Xo=new WeakMap;var Qo,Qc;const lc=class lc{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:p=null,enableHWA:m=!1}){k(this,Qo,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new $7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(d(lc,Qc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(lc,Qc).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Qd(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),d(this,Qo)&&(window.cancelAnimationFrame(d(this,Qo)),S(this,Qo,null)),d(lc,Qc).delete(this._canvas),e||(e=new UA(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Qo,window.requestAnimationFrame(()=>{S(this,Qo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(lc,Qc).delete(this._canvas),this.callback())))}};Qo=new WeakMap,Qc=new WeakMap,k(lc,Qc,new WeakSet);let fS=lc;const B7="5.4.54",z7="295fb3ec4";var vr,Jc,zh,Vt,_g,Uh,Na,Sg,Jo,ks,Eg,Qe,pS,mS,gS,nc,GO,go;const Qn=class Qn{constructor({editor:e=null,uiManager:t=null}){k(this,Qe);k(this,vr,null);k(this,Jc,null);k(this,zh);k(this,Vt,null);k(this,_g,!1);k(this,Uh,!1);k(this,Na,null);k(this,Sg);k(this,Jo,null);k(this,ks,null);var r,s;e?(S(this,Uh,!1),S(this,Na,e)):S(this,Uh,!0),S(this,ks,(e==null?void 0:e._uiManager)||t),S(this,Sg,d(this,ks)._eventBus),S(this,zh,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=d(this,ks))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),d(Qn,Eg)||S(Qn,Eg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ke(this,"_keyboardManager",new kv([[["Escape","mac+Escape"],Qn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qn.prototype._moveToPrevious],[["Home","mac+Home"],Qn.prototype._moveToBeginning],[["End","mac+End"],Qn.prototype._moveToEnd]]))}renderButton(){const e=S(this,vr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,Na)&&(e.ariaControls=`${d(this,Na).id}_colorpicker_dropdown`);const t=d(this,ks)._signal;e.addEventListener("click",j(this,Qe,nc).bind(this),{signal:t}),e.addEventListener("keydown",j(this,Qe,gS).bind(this),{signal:t});const r=S(this,Jc,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=d(this,zh),e.append(r),e}renderMainDropdown(){const e=S(this,Vt,j(this,Qe,pS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,vr)){j(this,Qe,nc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&j(this,Qe,mS).call(this,t,e)}_moveToNext(e){var t,r;if(!d(this,Qe,go)){j(this,Qe,nc).call(this,e);return}if(e.target===d(this,vr)){(t=d(this,Vt).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=d(this,Vt))==null?void 0:t.firstChild)||e.target===d(this,vr)){d(this,Qe,go)&&this._hideDropdownFromKeyboard();return}d(this,Qe,go)||j(this,Qe,nc).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!d(this,Qe,go)){j(this,Qe,nc).call(this,e);return}(t=d(this,Vt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,Qe,go)){j(this,Qe,nc).call(this,e);return}(t=d(this,Vt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,Vt))==null||e.classList.add("hidden"),d(this,vr).ariaExpanded="false",(t=d(this,Jo))==null||t.abort(),S(this,Jo,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,Uh)){if(!d(this,Qe,go)){(e=d(this,Na))==null||e.unselect();return}this.hideDropdown(),d(this,vr).focus({preventScroll:!0,focusVisible:d(this,_g)})}}updateColor(e){if(d(this,Jc)&&(d(this,Jc).style.backgroundColor=e),!d(this,Vt))return;const t=d(this,ks).highlightColors.values();for(const r of d(this,Vt).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=d(this,vr))==null||e.remove(),S(this,vr,null),S(this,Jc,null),(t=d(this,Vt))==null||t.remove(),S(this,Vt,null)}};vr=new WeakMap,Jc=new WeakMap,zh=new WeakMap,Vt=new WeakMap,_g=new WeakMap,Uh=new WeakMap,Na=new WeakMap,Sg=new WeakMap,Jo=new WeakMap,ks=new WeakMap,Eg=new WeakMap,Qe=new WeakSet,pS=function(){const e=document.createElement("div"),t=d(this,ks)._signal;e.addEventListener("contextmenu",os,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,Na)&&(e.id=`${d(this,Na).id}_colorpicker_dropdown`);for(const[r,s]of d(this,ks).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",d(Qn,Eg)[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.ariaSelected=s===d(this,zh),i.addEventListener("click",j(this,Qe,mS).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",j(this,Qe,gS).bind(this),{signal:t}),e},mS=function(e,t){t.stopPropagation(),d(this,Sg).dispatch("switchannotationeditorparams",{source:this,type:Ie.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},gS=function(e){Qn._keyboardManager.exec(this,e)},nc=function(e){if(d(this,Qe,go)){this.hideDropdown();return}if(S(this,_g,e.detail===0),d(this,Jo)||(S(this,Jo,new AbortController),window.addEventListener("pointerdown",j(this,Qe,GO).bind(this),{signal:d(this,ks).combinedSignal(d(this,Jo))})),d(this,vr).ariaExpanded="true",d(this,Vt)){d(this,Vt).classList.remove("hidden");return}const t=S(this,Vt,j(this,Qe,pS).call(this));d(this,vr).append(t)},GO=function(e){var t;(t=d(this,Vt))!=null&&t.contains(e.target)||this.hideDropdown()},go=function(){return d(this,Vt)&&!d(this,Vt).classList.contains("hidden")},k(Qn,Eg,null);let ox=Qn;var yi,Ag,Hh,Cg;const cc=class cc{constructor(e){k(this,yi,null);k(this,Ag,null);k(this,Hh,null);S(this,Ag,e),S(this,Hh,e._uiManager),d(cc,Cg)||S(cc,Cg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(d(this,yi))return d(this,yi);const{editorType:e,colorType:t,colorValue:r}=d(this,Ag),s=S(this,yi,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",d(cc,Cg)[e]),s.addEventListener("input",()=>{d(this,Hh).updateParams(t,s.value)},{signal:d(this,Hh)._signal}),s}update(e){d(this,yi)&&(d(this,yi).value=e)}destroy(){var e;(e=d(this,yi))==null||e.remove(),S(this,yi,null)}hideDropdown(){}};yi=new WeakMap,Ag=new WeakMap,Hh=new WeakMap,Cg=new WeakMap,k(cc,Cg,null);let lx=cc;function bj(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function lp(n){return Math.max(0,Math.min(255,255*n))}class _j{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=lp(e),[e,e,e]}static G_HTML([e]){const t=bj(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(lp)}static RGB_HTML(e){return`#${e.map(bj).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[lp(1-Math.min(1,e+s)),lp(1-Math.min(1,r+s)),lp(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class U7{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Je("Abstract method `_createSVG` called.")}}class cx extends U7{_createSVG(e){return document.createElementNS(Zi,e)}}class qO{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const o=i!=="richText",l=e.div;if(l.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);a.append(m),o&&Sm.shouldBuildText(s.name)&&u.push(m)}return{textDivs:u}}const h=[[s,-1,a]];for(;h.length>0;){const[m,y,g]=h.at(-1);if(y+1===m.children.length){h.pop();continue}const w=m.children[++h.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const b=document.createTextNode(w.value);u.push(b),g.append(b);continue}const x=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(g.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:t,intent:i,linkService:r}),((p=w.children)==null?void 0:p.length)>0)h.push([w,-1,x]);else if(w.value){const b=document.createTextNode(w.value);o&&Sm.shouldBuildText(v)&&u.push(b),x.append(b)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const H7=9,zu=new WeakSet,W7=new Date().getTimezoneOffset()*60*1e3;class Sj{static create(e){switch(e.data.annotationType){case It.LINK:return new qA(e);case It.TEXT:return new V7(e);case It.WIDGET:switch(e.data.fieldType){case"Tx":return new G7(e);case"Btn":return e.data.radioButton?new XO(e):e.data.checkBox?new Y7(e):new K7(e);case"Ch":return new X7(e);case"Sig":return new q7(e)}return new Xu(e);case It.POPUP:return new yS(e);case It.FREETEXT:return new tL(e);case It.LINE:return new J7(e);case It.SQUARE:return new Z7(e);case It.CIRCLE:return new e9(e);case It.POLYLINE:return new nL(e);case It.CARET:return new n9(e);case It.INK:return new YA(e);case It.POLYGON:return new t9(e);case It.HIGHLIGHT:return new rL(e);case It.UNDERLINE:return new r9(e);case It.SQUIGGLY:return new s9(e);case It.STRIKEOUT:return new i9(e);case It.STAMP:return new sL(e);case It.FILEATTACHMENT:return new a9(e);default:return new Rt(e)}}}var Zc,Wh,ka,Ng,vS;const gC=class gC{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){k(this,Ng);k(this,Zc,null);k(this,Wh,!1);k(this,ka,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return gC._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;e.rect&&(d(this,Zc)||S(this,Zc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&j(this,Ng,vS).call(this,t);let s=((i=d(this,ka))==null?void 0:i.popup)||this.popup;!s&&(r!=null&&r.text)&&(this._createPopup(r),s=d(this,ka).popup),s&&(s.updateEdited(e),r!=null&&r.deleted&&(s.remove(),S(this,ka,null),this.popup=null))}resetEdited(){var e;d(this,Zc)&&(j(this,Ng,vS).call(this,d(this,Zc).rect),(e=d(this,ka))==null||e.popup.resetEdited(),S(this,Zc,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof Xu)&&!(this instanceof qA)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof yS){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(g>0||w>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof XO){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case md.SOLID:a.borderStyle="solid";break;case md.DASHED:a.borderStyle="dashed";break;case md.BEVELED:ye("Unimplemented border style: beveled");break;case md.INSET:ye("Unimplemented border style: inset");break;case md.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(S(this,Wh,!0),a.borderColor=ue.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=ue.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:f,pageX:p,pageY:m}=s.rawDims;a.left=`${100*(u[0]-p)/h}%`,a.top=`${100*(u[1]-m)/f}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(a.width=`${100*o/h}%`,a.height=`${100*l/f}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*a/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[r]=_j[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:_j[`${a}_rgb`](o)})};return ke(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,w,v,x]=e.subarray(2,6);if(s===g&&i===w&&t===v&&r===x)return}const{style:a}=this.container;let o;if(d(this,Wh)){const{borderColor:g,borderWidth:w}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=s-t,u=i-r,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const p=h.createElement("defs");f.append(p);const m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let g=2,w=e.length;g<w;g+=8){const v=e[g],x=e[g+1],b=e[g+2],E=e[g+3],A=h.createElement("rect"),C=(b-t)/l,N=(i-x)/u,P=(v-b)/l,T=(x-E)/u;A.setAttribute("x",C),A.setAttribute("y",N),A.setAttribute("width",P),A.setAttribute("height",T),m.append(A),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${N}" width="${P}" height="${T}"/>`)}d(this,Wh)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate);const i=S(this,ka,new yS({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}get hasPopupElement(){return!!(d(this,ka)||this.popup||this.data.popupRef)}render(){Je("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!zu.has(u)){ye(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:u})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&zu.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Zc=new WeakMap,Wh=new WeakMap,ka=new WeakMap,Ng=new WeakSet,vS=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+l)/a}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(s)};let Rt=gC;var Rr,rc,YO,KO;class qA extends Rt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});k(this,Rr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(j(this,Rr,YO).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(j(this,Rr,KO).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r,s=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&j(this,Rr,rc).call(this),s&&(t.title=s)}_bindNamedAction(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),s&&(t.title=s),j(this,Rr,rc).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),j(this,Rr,rc).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),j(this,Rr,rc).call(this),!this._fieldObjects){ye('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:a,include:o}=r,l=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:g}of y)p.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===o&&l.push(y)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const u=this.annotationStorage,h=[];for(const p of l){const{id:m}=p;switch(h.push(m),p.type){case"text":{const g=p.defaultValue||"";u.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=p.defaultValue===p.exportValues;u.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=p.defaultValue||"";u.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!zu.has(y)){ye(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Rr=new WeakSet,rc=function(){this.container.setAttribute("data-internal-link","")},YO=function(t,r,s="",i=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:s&&(t.title=s),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,i),!1},j(this,Rr,rc).call(this)},KO=function(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),s&&(t.title=s),j(this,Rr,rc).call(this)};class V7 extends Rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Xu extends Rt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return yn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,r,s){var i,a,o;for(const[l,u]of r)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,s),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ue.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||H7,i=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/($b*s))||1,f=u/h;a=Math.min(s,l(f/$b))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(u/$b))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=ue.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class G7 extends Xu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),zu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;f&&(r.title=f),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(r,"value",w.target.value,"value"),h.formattedValue=null}),r.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";r.value=h.userValue=v,h.formattedValue=null});let g=w=>{const{formattedValue:v}=h;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var b;if(h.focused)return;const{target:x}=v;if(y&&(x.type=p,m&&(x.step=m)),h.userValue){const E=h.userValue;if(y)if(p==="time"){const A=new Date(E),C=[A.getHours(),A.getMinutes(),A.getSeconds()];x.value=C.map(N=>N.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-W7).toISOString().split(p==="date"?"T":".",1)[0];else x.value=E}h.lastCommittedValue=x.value,h.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(h.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(b){h.userValue=b.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:E}=b.detail;h.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E);const A={formattedValue:E};y&&(A.value=E),e.setValue(t,A)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var N;const{charLimit:E}=b.detail,{target:A}=b;if(E===0){A.removeAttribute("maxLength");return}A.setAttribute("maxLength",E);let C=h.userValue;!C||C.length<=E||(C=C.slice(0,E),A.value=h.userValue=C,e.setValue(t,{value:C}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:A.selectionStart,selEnd:A.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),r.addEventListener("keydown",v=>{var E;h.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(h.commitKey=3),x===-1)return;const{value:b}=v.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=g;g=null,r.addEventListener("blur",v=>{var E,A;if(!h.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(h.focused=!1);const{target:x}=v;let{value:b}=x;if(y){if(b&&p==="time"){const C=b.split(":").map(N=>parseInt(N,10));b=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),x.step=""}else b=new Date(b).valueOf();x.type="text"}h.userValue=b,h.lastCommittedValue!==b&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),w(v)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",v=>{var T;h.lastCommittedValue=null;const{data:x,target:b}=v,{value:E,selectionStart:A,selectionEnd:C}=b;let N=A,P=C;switch(v.inputType){case"deleteWordBackward":{const M=E.substring(0,A).match(/\w*[^\w]*$/);M&&(N-=M[0].length);break}case"deleteWordForward":{const M=E.substring(A).match(/^[^\w]*\w*/);M&&(P+=M[0].length);break}case"deleteContentBackward":A===C&&(N-=1);break;case"deleteContentForward":A===C&&(P+=1);break}v.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:x||"",willCommit:!1,selStart:N,selEnd:P}})}),this._setEventListeners(r,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&r.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class q7 extends Xu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Y7 extends Xu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return zu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,r)){const h=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class XO extends Xu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(zu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const h=a===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const p=h&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class K7 extends qA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class X7 extends Xu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");zu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,r.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let a=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),a=()=>{h.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=h=>{const f=h?"value":"textContent",{options:p,multiple:m}=s;return m?Array.prototype.filter.call(p,y=>y.selected).map(y=>y[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=o(!1);const u=h=>{const f=h.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const f={value(p){a==null||a();const m=p.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of s.options)g.selected=y.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(p){s.multiple=!0},remove(p){const m=s.options,y=p.detail.remove;m[y].selected=!1,s.remove(y),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},clear(p){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(p){const{index:m,displayValue:y,exportValue:g}=p.detail.insert,w=s.children[m],v=document.createElement("option");v.textContent=y,v.value=g,w?w.before(v):s.append(v),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},items(p){const{items:m}=p.detail;for(;s.length!==0;)s.remove(0);for(const y of m){const{displayValue:g,exportValue:w}=y,v=document.createElement("option");v.textContent=g,v.value=w,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},indices(p){const m=new Set(p.detail.indices);for(const y of p.target.options)y.selected=m.has(y.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,h)}),s.addEventListener("input",h=>{var m;const f=o(!0),p=o(!1);e.setValue(t,{value:f}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class yS extends Rt{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Rt._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Q7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${zA}${s}`).join(",")),this.container}}var Vh,jx,Px,Gh,qh,Et,ja,Zo,Yh,kg,Kh,xi,yr,el,Pa,jg,Ta,Xh,eu,tl,Ue,Zy,e0,xS,QO,JO,ZO,eL,t0,n0,wS;class Q7{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:l,rect:u,parentRect:h,open:f}){k(this,Ue);k(this,Vh,j(this,Ue,ZO).bind(this));k(this,jx,j(this,Ue,wS).bind(this));k(this,Px,j(this,Ue,n0).bind(this));k(this,Gh,j(this,Ue,t0).bind(this));k(this,qh,null);k(this,Et,null);k(this,ja,null);k(this,Zo,null);k(this,Yh,null);k(this,kg,null);k(this,Kh,null);k(this,xi,!1);k(this,yr,null);k(this,el,null);k(this,Pa,null);k(this,jg,null);k(this,Ta,null);k(this,Xh,null);k(this,eu,null);k(this,tl,!1);S(this,Et,e),S(this,Xh,s),S(this,ja,a),S(this,Ta,o),S(this,kg,l),S(this,qh,t),S(this,jg,u),S(this,Kh,h),S(this,Yh,r),S(this,Zo,sx.toDateObject(i)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),j(this,Ue,Zy).call(this),d(this,Et).hidden=!0,f&&j(this,Ue,t0).call(this)}render(){var s;if(d(this,yr))return;const e=S(this,yr,document.createElement("div"));if(e.className="popup",d(this,qh)){const i=e.style.outlineColor=ue.makeHexColor(...d(this,qh));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=d(this,Xh))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=d(this,Xh)}if(e.append(t),d(this,Zo)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Zo).valueOf()})),i.dateTime=d(this,Zo).toISOString(),t.append(i)}const r=d(this,Ue,e0);if(r)qO.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(d(this,ja));e.append(i)}d(this,Et).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const o=s[i];r.append(document.createTextNode(o)),i<a-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popup:t,deleted:r}){var s;if(r||t!=null&&t.deleted){this.remove();return}j(this,Ue,Zy).call(this),d(this,eu)||S(this,eu,{contentsObj:d(this,ja),richText:d(this,Ta)}),e&&S(this,Pa,null),t&&(S(this,Ta,j(this,Ue,JO).call(this,t.text)),S(this,Zo,sx.toDateObject(t.date)),S(this,ja,null)),(s=d(this,yr))==null||s.remove(),S(this,yr,null)}resetEdited(){var e;d(this,eu)&&({contentsObj:Xt(this,ja)._,richText:Xt(this,Ta)._}=d(this,eu),S(this,eu,null),(e=d(this,yr))==null||e.remove(),S(this,yr,null),S(this,Pa,null))}remove(){var e,t;(e=d(this,el))==null||e.abort(),S(this,el,null),(t=d(this,yr))==null||t.remove(),S(this,yr,null),S(this,tl,!1),S(this,xi,!1);for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){S(this,tl,this.isVisible),d(this,tl)&&(d(this,Et).hidden=!0)}maybeShow(){j(this,Ue,Zy).call(this),d(this,tl)&&(d(this,yr)||j(this,Ue,n0).call(this),S(this,tl,!1),d(this,Et).hidden=!1)}get isVisible(){return d(this,Et).hidden===!1}}Vh=new WeakMap,jx=new WeakMap,Px=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Et=new WeakMap,ja=new WeakMap,Zo=new WeakMap,Yh=new WeakMap,kg=new WeakMap,Kh=new WeakMap,xi=new WeakMap,yr=new WeakMap,el=new WeakMap,Pa=new WeakMap,jg=new WeakMap,Ta=new WeakMap,Xh=new WeakMap,eu=new WeakMap,tl=new WeakMap,Ue=new WeakSet,Zy=function(){var t;if(d(this,el))return;S(this,el,new AbortController);const{signal:e}=d(this,el);for(const r of this.trigger)r.addEventListener("click",d(this,Gh),{signal:e}),r.addEventListener("mouseenter",d(this,Px),{signal:e}),r.addEventListener("mouseleave",d(this,jx),{signal:e}),r.classList.add("popupTriggerArea");for(const r of d(this,Yh))(t=r.container)==null||t.addEventListener("keydown",d(this,Vh),{signal:e})},e0=function(){const e=d(this,Ta),t=d(this,ja);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,Ta).html||null},xS=function(){var e,t,r;return((r=(t=(e=d(this,Ue,e0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},QO=function(){var e,t,r;return((r=(t=(e=d(this,Ue,e0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},JO=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:d(this,Ue,QO),fontSize:d(this,Ue,xS)?`calc(${d(this,Ue,xS)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},ZO=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,xi))&&j(this,Ue,t0).call(this)},eL=function(){if(d(this,Pa)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=d(this,kg);let a=!!d(this,Kh),o=a?d(this,Kh):d(this,jg);for(const y of d(this,Yh))if(!o||ue.intersect(y.data.rect,o)!==null){o=y.data.rect,a=!0;break}const l=ue.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,f=l[0]+h,p=l[1];S(this,Pa,[100*(f-s)/t,100*(p-i)/r]);const{style:m}=d(this,Et);m.left=`${d(this,Pa)[0]}%`,m.top=`${d(this,Pa)[1]}%`},t0=function(){S(this,xi,!d(this,xi)),d(this,xi)?(j(this,Ue,n0).call(this),d(this,Et).addEventListener("click",d(this,Gh)),d(this,Et).addEventListener("keydown",d(this,Vh))):(j(this,Ue,wS).call(this),d(this,Et).removeEventListener("click",d(this,Gh)),d(this,Et).removeEventListener("keydown",d(this,Vh)))},n0=function(){d(this,yr)||this.render(),this.isVisible?d(this,xi)&&d(this,Et).classList.add("focused"):(j(this,Ue,eL).call(this),d(this,Et).hidden=!1,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)+1e3)},wS=function(){d(this,Et).classList.remove("focused"),!(d(this,xi)||!this.isVisible)&&(d(this,Et).hidden=!0,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)-1e3)};class tL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Pg;class J7 extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Pg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=S(this,Pg,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Pg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pg=new WeakMap;var Tg;class Z7 extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Tg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=S(this,Tg,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Tg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tg=new WeakMap;var Rg;class e9 extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Rg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=S(this,Rg,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",s/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Rg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rg=new WeakMap;var Mg;class nL extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Mg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let u=[];for(let f=0,p=r.length;f<p;f+=2){const m=r[f]-t[0],y=t[3]-r[f+1];u.push(`${m},${y}`)}u=u.join(" ");const h=S(this,Mg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Mg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mg=new WeakMap;class t9 extends nL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class n9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Ig,tu,Dg,bS;class YA extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Dg);k(this,Ig,null);k(this,tu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ve.HIGHLIGHT:ve.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:l,height:u}=j(this,Dg,bS).call(this,r,t),h=this.svgFactory.create(l,u,!0),f=S(this,Ig,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let p=0,m=s.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);d(this,tu).push(y),y.setAttribute("points",s[p].join(",")),f.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,a=d(this,Ig);if(r>=0&&a.setAttribute("stroke-width",r||1),s)for(let o=0,l=d(this,tu).length;o<l;o++)d(this,tu)[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:l,height:u}=j(this,Dg,bS).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return d(this,tu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ig=new WeakMap,tu=new WeakMap,Dg=new WeakSet,bS=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class rL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ve.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class r9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class s9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class i9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class sL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Og,Lg,_S;class a9 extends Rt{constructor(t){var s;super(t,{isRenderable:!0});k(this,Lg);k(this,Og,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",j(this,Lg,_S).bind(this)),S(this,Og,s);const{isMac:i}=yn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&j(this,Lg,_S).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return d(this,Og)}addHighlightArea(){this.container.classList.add("highlightArea")}}Og=new WeakMap,Lg=new WeakSet,_S=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Fg,nu,nl,$g,Ll,ES,AS;const vC=class vC{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:o}){k(this,Ll);k(this,Fg,null);k(this,nu,null);k(this,nl,new Map);k(this,$g,null);this.div=e,S(this,Fg,t),S(this,nu,r),S(this,$g,o||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return d(this,nl).size>0}async render(e){var a;const{annotations:t}=e,r=this.div;$u(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new cx,annotationStorage:e.annotationStorage||new WA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===It.POPUP;if(l){const f=s.get(o.id);if(!f)continue;i.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;i.data=o;const u=Sj.create(i);if(!u.isRenderable)continue;if(!l&&o.popupRef){const f=s.get(o.popupRef);f?f.push(u):s.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await j(this,Ll,ES).call(this,h,o.id,i.elements),u._isEditable&&(d(this,nl).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}j(this,Ll,AS).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new cx,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=vC._defaultBorderStyle),r.data=s;const i=Sj.create(r);if(!i.isRenderable)continue;const a=i.render();await j(this,Ll,ES).call(this,a,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,$u(t,{rotation:e.rotation}),j(this,Ll,AS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,nl).values())}getEditableAnnotation(e){return d(this,nl).get(e)}static get _defaultBorderStyle(){return ke(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:md.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Fg=new WeakMap,nu=new WeakMap,nl=new WeakMap,$g=new WeakMap,Ll=new WeakSet,ES=async function(e,t,r){var o,l;const s=e.firstChild||e,i=s.id=`${zA}${t}`,a=await((o=d(this,$g))==null?void 0:o.getAriaAttributes(i));if(a)for(const[u,h]of a)s.setAttribute(u,h);r?r.at(-1).container.after(e):(this.div.append(e),(l=d(this,Fg))==null||l.moveElementInDOM(this.div,e,s,!1))},AS=function(){var t;if(!d(this,nu))return;const e=this.div;for(const[r,s]of d(this,nu)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=d(this,nl).get(r);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}d(this,nu).clear()};let SS=vC;const xy=/\r\n?|\n/g;var Yr,xr,Bg,ru,wr,$t,iL,aL,oL,r0,Va,s0,i0,lL,NS,cL;const tt=class tt extends rt{constructor(t){super({...t,name:"freeTextEditor"});k(this,$t);k(this,Yr);k(this,xr,"");k(this,Bg,`${this.id}-editor`);k(this,ru,null);k(this,wr);q(this,"_colorPicker",null);S(this,Yr,t.color||tt._defaultColor||rt._defaultLineColor),S(this,wr,t.fontSize||tt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=tt.prototype,r=a=>a.isEmpty(),s=Bu.TRANSLATE_SMALL,i=Bu.TRANSLATE_BIG;return ke(this,"_keyboardManager",new kv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){rt.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case Ie.FREETEXT_SIZE:tt._defaultFontSize=r;break;case Ie.FREETEXT_COLOR:tt._defaultColor=r;break}}updateParams(t,r){switch(t){case Ie.FREETEXT_SIZE:j(this,$t,iL).call(this,r);break;case Ie.FREETEXT_COLOR:j(this,$t,aL).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ie.FREETEXT_SIZE,tt._defaultFontSize],[Ie.FREETEXT_COLOR,tt._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[Ie.FREETEXT_SIZE,d(this,wr)],[Ie.FREETEXT_COLOR,d(this,Yr)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new lx(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ie.FREETEXT_COLOR}get colorValue(){return d(this,Yr)}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-tt._internalPadding*t,-(tt._internalPadding+d(this,wr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,ru,new AbortController);const t=this._uiManager.combinedSignal(d(this,ru));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,Bg)),this._isDraggable=!0,(t=d(this,ru))==null||t.abort(),S(this,ru,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,xr),r=S(this,xr,j(this,$t,oL).call(this).trimEnd());if(t===r)return;const s=i=>{if(S(this,xr,i),!i){this.remove();return}j(this,$t,i0).call(this),this._uiManager.rebuild(this),j(this,$t,r0).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),j(this,$t,r0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){tt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,Bg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${d(this,wr)}px * var(--total-scale-factor))`,s.color=d(this,Yr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(o[0]-p)/h,g=r+this.height-(o[1]-m)/f;break;case 90:y=t+(o[0]-p)/h,g=r-(o[1]-m)/f,[l,u]=[u,-l];break;case 180:y=t-this.width+(o[0]-p)/h,g=r-(o[1]-m)/f,[l,u]=[-l,-u];break;case 270:y=t+(o[0]-p-this.height*f)/h,g=r+(o[1]-m-this.width*h)/f,[l,u]=[-u,l];break}this.setAt(y*i,g*a,l,u)}else this._moveAfterPaste(t,r);j(this,$t,i0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,w;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=j(y=tt,Va,NS).call(y,r.getData("text")||"").replaceAll(xy,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,h=[],f=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(f.push(l.nodeValue.slice(u).replaceAll(xy,"")),v!==this.editorDiv){let x=h;for(const b of this.editorDiv.childNodes){if(b===v){x=f;continue}x.push(j(g=tt,Va,s0).call(g,b))}}h.push(l.nodeValue.slice(0,u).replaceAll(xy,""))}else if(l===this.editorDiv){let v=h,x=0;for(const b of this.editorDiv.childNodes)x++===u&&(v=f),v.push(j(w=tt,Va,s0).call(w,b))}S(this,xr,`${h.join(`
`)}${i}${f.join(`
`)}`),j(this,$t,i0).call(this);const p=new Range;let m=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(m<=x){p.setStart(v,m),p.setEnd(v,m);break}m-=x}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,s){var o;let i=null;if(t instanceof tL){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:f,id:p,popupRef:m,contentsObj:y},textContent:g,textPosition:w,parent:{page:{pageNumber:v}}}=t;if(!g||g.length===0)return null;i=t={annotationType:ve.FREETEXT,color:Array.from(u),fontSize:l,value:g.join(`
`),position:w,pageIndex:v-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:(y==null?void 0:y.str)||null}}const a=await super.deserialize(t,r,s);return S(a,wr,t.fontSize),S(a,Yr,ue.makeHexColor(...t.color)),S(a,xr,j(o=tt,Va,NS).call(o,t.value)),a._initialData=i,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=tt._internalPadding*this.parentScale,s=this.getRect(r,r),i=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,Yr)),a={annotationType:ve.FREETEXT,color:i,fontSize:d(this,wr),value:j(this,$t,lL).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!j(this,$t,cL).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t),{style:s}=r;s.fontSize=`calc(${d(this,wr)}px * var(--total-scale-factor))`,s.color=d(this,Yr),r.replaceChildren();for(const o of d(this,xr).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),r.append(l)}const i=tt._internalPadding*this.parentScale,a={rect:this.getRect(i,i)};return a.popup=this.hasEditedComment?this.comment:{text:d(this,xr)},t.updateEdited(a),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Yr=new WeakMap,xr=new WeakMap,Bg=new WeakMap,ru=new WeakMap,wr=new WeakMap,$t=new WeakSet,iL=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-d(this,wr))*this.parentScale),S(this,wr,i),j(this,$t,r0).call(this)},s=d(this,wr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},aL=function(t){const r=i=>{var a;S(this,Yr,this.editorDiv.style.color=i),(a=this._colorPicker)==null||a.update(i)},s=d(this,Yr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},oL=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(j(s=tt,Va,s0).call(s,i)),r=i);return t.join(`
`)},r0=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Va=new WeakSet,s0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(xy,"")},i0=function(){if(this.editorDiv.replaceChildren(),!!d(this,xr))for(const t of d(this,xr).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},lL=function(){return d(this,xr).replaceAll(" "," ")},NS=function(t){return t.replaceAll(" "," ")},cL=function(t){const{value:r,fontSize:s,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((o,l)=>o!==i[l])||t.pageIndex!==a},k(tt,Va),q(tt,"_freeTextDefaultContent",""),q(tt,"_internalPadding",0),q(tt,"_defaultColor",null),q(tt,"_defaultFontSize",10),q(tt,"_type","freetext"),q(tt,"_editorType",ve.FREETEXT);let CS=tt;class ne{toSVGPath(){Je("Abstract method `toSVGPath` must be implemented.")}get box(){Je("Abstract getter `box` must be implemented.")}serialize(e,t){Je("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*s,a[o+1]=r+e[o+1]*i;return a}static _rescaleAndSwap(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*s,a[o+1]=r+e[o]*i;return a}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,a){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+a)/6,(r+i)/2,(s+a)/2]}}q(ne,"PRECISION",1e-4);var br,js,Qh,Jh,wi,Ne,su,iu,zg,Ug,Zh,ef,rl,Hg,Tx,Rx,Kt,jp,uL,dL,hL,fL,pL,mL;const ia=class ia{constructor({x:e,y:t},r,s,i,a,o=0){k(this,Kt);k(this,br);k(this,js,[]);k(this,Qh);k(this,Jh);k(this,wi,[]);k(this,Ne,new Float32Array(18));k(this,su);k(this,iu);k(this,zg);k(this,Ug);k(this,Zh);k(this,ef);k(this,rl,[]);S(this,br,r),S(this,ef,i*s),S(this,Jh,a),d(this,Ne).set([NaN,NaN,NaN,NaN,e,t],6),S(this,Qh,o),S(this,Ug,d(ia,Hg)*s),S(this,zg,d(ia,Rx)*s),S(this,Zh,s),d(this,rl).push(e,t)}isEmpty(){return isNaN(d(this,Ne)[8])}add({x:e,y:t}){var T;S(this,su,e),S(this,iu,t);const[r,s,i,a]=d(this,br);let[o,l,u,h]=d(this,Ne).subarray(8,12);const f=e-u,p=t-h,m=Math.hypot(f,p);if(m<d(this,zg))return!1;const y=m-d(this,Ug),g=y/m,w=g*f,v=g*p;let x=o,b=l;o=u,l=h,u+=w,h+=v,(T=d(this,rl))==null||T.push(e,t);const E=-v/y,A=w/y,C=E*d(this,ef),N=A*d(this,ef);return d(this,Ne).set(d(this,Ne).subarray(2,8),0),d(this,Ne).set([u+C,h+N],4),d(this,Ne).set(d(this,Ne).subarray(14,18),12),d(this,Ne).set([u-C,h-N],16),isNaN(d(this,Ne)[6])?(d(this,wi).length===0&&(d(this,Ne).set([o+C,l+N],2),d(this,wi).push(NaN,NaN,NaN,NaN,(o+C-r)/i,(l+N-s)/a),d(this,Ne).set([o-C,l-N],14),d(this,js).push(NaN,NaN,NaN,NaN,(o-C-r)/i,(l-N-s)/a)),d(this,Ne).set([x,b,o,l,u,h],6),!this.isEmpty()):(d(this,Ne).set([x,b,o,l,u,h],6),Math.abs(Math.atan2(b-l,x-o)-Math.atan2(v,w))<Math.PI/2?([o,l,u,h]=d(this,Ne).subarray(2,6),d(this,wi).push(NaN,NaN,NaN,NaN,((o+u)/2-r)/i,((l+h)/2-s)/a),[o,l,x,b]=d(this,Ne).subarray(14,18),d(this,js).push(NaN,NaN,NaN,NaN,((x+o)/2-r)/i,((b+l)/2-s)/a),!0):([x,b,o,l,u,h]=d(this,Ne).subarray(0,6),d(this,wi).push(((x+5*o)/6-r)/i,((b+5*l)/6-s)/a,((5*o+u)/6-r)/i,((5*l+h)/6-s)/a,((o+u)/2-r)/i,((l+h)/2-s)/a),[u,h,o,l,x,b]=d(this,Ne).subarray(12,18),d(this,js).push(((x+5*o)/6-r)/i,((b+5*l)/6-s)/a,((5*o+u)/6-r)/i,((5*l+h)/6-s)/a,((o+u)/2-r)/i,((l+h)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,wi),t=d(this,js);if(isNaN(d(this,Ne)[6])&&!this.isEmpty())return j(this,Kt,uL).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);j(this,Kt,hL).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return j(this,Kt,dL).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,a){return new gL(e,t,r,s,i,a)}getOutlines(){var f;const e=d(this,wi),t=d(this,js),r=d(this,Ne),[s,i,a,o]=d(this,br),l=new Float32Array((((f=d(this,rl))==null?void 0:f.length)??0)+2);for(let p=0,m=l.length-2;p<m;p+=2)l[p]=(d(this,rl)[p]-s)/a,l[p+1]=(d(this,rl)[p+1]-i)/o;if(l[l.length-2]=(d(this,su)-s)/a,l[l.length-1]=(d(this,iu)-i)/o,isNaN(r[6])&&!this.isEmpty())return j(this,Kt,fL).call(this,l);const u=new Float32Array(d(this,wi).length+24+d(this,js).length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){u[p]=u[p+1]=NaN;continue}u[p]=e[p],u[p+1]=e[p+1]}h=j(this,Kt,mL).call(this,u,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[p+m],u[h+1]=t[p+m+1],h+=2}return j(this,Kt,pL).call(this,u,h),this.newFreeDrawOutline(u,l,d(this,br),d(this,Zh),d(this,Qh),d(this,Jh))}};br=new WeakMap,js=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,wi=new WeakMap,Ne=new WeakMap,su=new WeakMap,iu=new WeakMap,zg=new WeakMap,Ug=new WeakMap,Zh=new WeakMap,ef=new WeakMap,rl=new WeakMap,Hg=new WeakMap,Tx=new WeakMap,Rx=new WeakMap,Kt=new WeakSet,jp=function(){const e=d(this,Ne).subarray(4,6),t=d(this,Ne).subarray(16,18),[r,s,i,a]=d(this,br);return[(d(this,su)+(e[0]-t[0])/2-r)/i,(d(this,iu)+(e[1]-t[1])/2-s)/a,(d(this,su)+(t[0]-e[0])/2-r)/i,(d(this,iu)+(t[1]-e[1])/2-s)/a]},uL=function(){const[e,t,r,s]=d(this,br),[i,a,o,l]=j(this,Kt,jp).call(this);return`M${(d(this,Ne)[2]-e)/r} ${(d(this,Ne)[3]-t)/s} L${(d(this,Ne)[4]-e)/r} ${(d(this,Ne)[5]-t)/s} L${i} ${a} L${o} ${l} L${(d(this,Ne)[16]-e)/r} ${(d(this,Ne)[17]-t)/s} L${(d(this,Ne)[14]-e)/r} ${(d(this,Ne)[15]-t)/s} Z`},dL=function(e){const t=d(this,js);e.push(`L${t[4]} ${t[5]} Z`)},hL=function(e){const[t,r,s,i]=d(this,br),a=d(this,Ne).subarray(4,6),o=d(this,Ne).subarray(16,18),[l,u,h,f]=j(this,Kt,jp).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${l} ${u} L${h} ${f} L${(o[0]-t)/s} ${(o[1]-r)/i}`)},fL=function(e){const t=d(this,Ne),[r,s,i,a]=d(this,br),[o,l,u,h]=j(this,Kt,jp).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(f,e,d(this,br),d(this,Zh),d(this,Qh),d(this,Jh))},pL=function(e,t){const r=d(this,js);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},mL=function(e,t){const r=d(this,Ne).subarray(4,6),s=d(this,Ne).subarray(16,18),[i,a,o,l]=d(this,br),[u,h,f,p]=j(this,Kt,jp).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/l],t),t+=24},k(ia,Hg,8),k(ia,Tx,2),k(ia,Rx,d(ia,Hg)+d(ia,Tx));let ux=ia;var tf,au,Ra,Wg,_r,Vg,kt,Mx,vL;class gL extends ne{constructor(t,r,s,i,a,o){super();k(this,Mx);k(this,tf);k(this,au,new Float32Array(4));k(this,Ra);k(this,Wg);k(this,_r);k(this,Vg);k(this,kt);S(this,kt,t),S(this,_r,r),S(this,tf,s),S(this,Vg,i),S(this,Ra,a),S(this,Wg,o),this.lastPoint=[NaN,NaN],j(this,Mx,vL).call(this,o);const[l,u,h,f]=d(this,au);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-l)/h,t[p+1]=(t[p+1]-u)/f;for(let p=0,m=r.length;p<m;p+=2)r[p]=(r[p]-l)/h,r[p+1]=(r[p+1]-u)/f}toSVGPath(){const t=[`M${d(this,kt)[4]} ${d(this,kt)[5]}`];for(let r=6,s=d(this,kt).length;r<s;r+=6){if(isNaN(d(this,kt)[r])){t.push(`L${d(this,kt)[r+4]} ${d(this,kt)[r+5]}`);continue}t.push(`C${d(this,kt)[r]} ${d(this,kt)[r+1]} ${d(this,kt)[r+2]} ${d(this,kt)[r+3]} ${d(this,kt)[r+4]} ${d(this,kt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],a){const o=s-t,l=i-r;let u,h;switch(a){case 0:u=ne._rescale(d(this,kt),t,i,o,-l),h=ne._rescale(d(this,_r),t,i,o,-l);break;case 90:u=ne._rescaleAndSwap(d(this,kt),t,r,o,l),h=ne._rescaleAndSwap(d(this,_r),t,r,o,l);break;case 180:u=ne._rescale(d(this,kt),s,r,-o,l),h=ne._rescale(d(this,_r),s,r,-o,l);break;case 270:u=ne._rescaleAndSwap(d(this,kt),s,i,-o,-l),h=ne._rescaleAndSwap(d(this,_r),s,i,-o,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return d(this,au)}newOutliner(t,r,s,i,a,o=0){return new ux(t,r,s,i,a,o)}getNewOutline(t,r){const[s,i,a,o]=d(this,au),[l,u,h,f]=d(this,tf),p=a*h,m=o*f,y=s*h+l,g=i*f+u,w=this.newOutliner({x:d(this,_r)[0]*p+y,y:d(this,_r)[1]*m+g},d(this,tf),d(this,Vg),t,d(this,Wg),r??d(this,Ra));for(let v=2;v<d(this,_r).length;v+=2)w.add({x:d(this,_r)[v]*p+y,y:d(this,_r)[v+1]*m+g});return w.getOutlines()}}tf=new WeakMap,au=new WeakMap,Ra=new WeakMap,Wg=new WeakMap,_r=new WeakMap,Vg=new WeakMap,kt=new WeakMap,Mx=new WeakSet,vL=function(t){const r=d(this,kt);let s=r[4],i=r[5];const a=[s,i,s,i];let o=s,l=i;const u=t?Math.max:Math.min;for(let f=6,p=r.length;f<p;f+=6){const m=r[f+4],y=r[f+5];if(isNaN(r[f]))ue.pointBoundingBox(m,y,a),l<y?(o=m,l=y):l===y&&(o=u(o,m));else{const g=[1/0,1/0,-1/0,-1/0];ue.bezierBoundingBox(s,i,...r.slice(f,f+6),g),ue.rectBoundingBox(...g,a),l<g[3]?(o=g[2],l=g[3]):l===g[3]&&(o=u(o,g[2]))}s=m,i=y}const h=d(this,au);h[0]=a[0]-d(this,Ra),h[1]=a[1]-d(this,Ra),h[2]=a[2]-a[0]+2*d(this,Ra),h[3]=a[3]-a[1]+2*d(this,Ra),this.lastPoint=[o,l]};var Gg,qg,sl,Ps,Gn,yL,a0,xL,wL,jS;class kS{constructor(e,t=0,r=0,s=!0){k(this,Gn);k(this,Gg);k(this,qg);k(this,sl,[]);k(this,Ps,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:y,y:g,width:w,height:v}of e){const x=Math.floor((y-t)/o)*o,b=Math.ceil((y+w+t)/o)*o,E=Math.floor((g-t)/o)*o,A=Math.ceil((g+v+t)/o)*o,C=[x,E,A,!0],N=[b,E,A,!1];d(this,sl).push(C,N),ue.rectBoundingBox(x,E,b,A,i)}const l=i[2]-i[0]+2*r,u=i[3]-i[1]+2*r,h=i[0]-r,f=i[1]-r,p=d(this,sl).at(s?-1:-2),m=[p[0],p[2]];for(const y of d(this,sl)){const[g,w,v]=y;y[0]=(g-h)/l,y[1]=(w-f)/u,y[2]=(v-f)/u}S(this,Gg,new Float32Array([h,f,l,u])),S(this,qg,m)}getOutlines(){d(this,sl).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of d(this,sl))t[3]?(e.push(...j(this,Gn,jS).call(this,t)),j(this,Gn,xL).call(this,t)):(j(this,Gn,wL).call(this,t),e.push(...j(this,Gn,jS).call(this,t)));return j(this,Gn,yL).call(this,e)}}Gg=new WeakMap,qg=new WeakMap,sl=new WeakMap,Ps=new WeakMap,Gn=new WeakSet,yL=function(e){const t=[],r=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),r.add(l),r.add(u)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[o,l,u,h,f]=a;r.delete(a);let p=o,m=l;for(i=[o,u],s.push(i);;){let y;if(r.has(h))y=h;else if(r.has(f))y=f;else break;r.delete(y),[o,l,u,h,f]=y,p!==o&&(i.push(p,m,o,m===l?l:u),p=o),m=m===l?u:l}i.push(p,m)}return new o9(s,d(this,Gg),d(this,qg))},a0=function(e){const t=d(this,Ps);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1},xL=function([,e,t]){const r=j(this,Gn,a0).call(this,e);d(this,Ps).splice(r,0,[e,t])},wL=function([,e,t]){const r=j(this,Gn,a0).call(this,e);for(let s=r;s<d(this,Ps).length;s++){const[i,a]=d(this,Ps)[s];if(i!==e)break;if(i===e&&a===t){d(this,Ps).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=d(this,Ps)[s];if(i!==e)break;if(i===e&&a===t){d(this,Ps).splice(s,1);return}}},jS=function(e){const[t,r,s]=e,i=[[t,r,s]],a=j(this,Gn,a0).call(this,s);for(let o=0;o<a;o++){const[l,u]=d(this,Ps)[o];for(let h=0,f=i.length;h<f;h++){const[,p,m]=i[h];if(!(u<=p||m<=l)){if(p>=l){if(m>u)i[h][1]=u;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=l,m>u&&i.push([t,u,m])}}}return i};var Yg,nf;class o9 extends ne{constructor(t,r,s){super();k(this,Yg);k(this,nf);S(this,nf,t),S(this,Yg,r),this.lastPoint=s}toSVGPath(){const t=[];for(const r of d(this,nf)){let[s,i]=r;t.push(`M${s} ${i}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],a){const o=[],l=s-t,u=i-r;for(const h of d(this,nf)){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=t+h[p]*l,f[p+1]=i-h[p+1]*u;o.push(f)}return o}get box(){return d(this,Yg)}get classNamesForOutlining(){return["highlightOutline"]}}Yg=new WeakMap,nf=new WeakMap;class PS extends ux{newFreeDrawOutline(e,t,r,s,i,a){return new l9(e,t,r,s,i,a)}}class l9 extends gL{newOutliner(e,t,r,s,i,a=0){return new PS(e,t,r,s,i,a)}}var rf,Kg,Ma,ou,Xg,er,Qg,Jg,lu,Kr,Sr,dn,sf,Ia,Nn,af,Xr,Zg,be,TS,o0,bL,_L,SL,RS,sc,es,bd,EL,l0,Pp,AL,CL,NL,kL,jL;const We=class We extends rt{constructor(t){super({...t,name:"highlightEditor"});k(this,be);k(this,rf,null);k(this,Kg,0);k(this,Ma);k(this,ou,null);k(this,Xg,null);k(this,er,null);k(this,Qg,null);k(this,Jg,0);k(this,lu,null);k(this,Kr,null);k(this,Sr,null);k(this,dn,!1);k(this,sf,null);k(this,Ia);k(this,Nn,null);k(this,af,"");k(this,Xr);k(this,Zg,"");this.color=t.color||We._defaultColor,S(this,Xr,t.thickness||We._defaultThickness),S(this,Ia,t.opacity||We._defaultOpacity),S(this,Ma,t.boxes||null),S(this,Zg,t.methodOfCreation||""),S(this,af,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(S(this,dn,!0),j(this,be,o0).call(this,t),j(this,be,sc).call(this)):d(this,Ma)&&(S(this,rf,t.anchorNode),S(this,Kg,t.anchorOffset),S(this,Qg,t.focusNode),S(this,Jg,t.focusOffset),j(this,be,TS).call(this),j(this,be,sc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=We.prototype;return ke(this,"_keyboardManager",new kv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,dn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:d(this,Xr),methodOfCreation:d(this,Zg)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;rt.initialize(t,r),We._defaultColor||(We._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case Ie.HIGHLIGHT_COLOR:We._defaultColor=r;break;case Ie.HIGHLIGHT_THICKNESS:We._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return d(this,sf)}updateParams(t,r){switch(t){case Ie.HIGHLIGHT_COLOR:j(this,be,bL).call(this,r);break;case Ie.HIGHLIGHT_THICKNESS:j(this,be,_L).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Ie.HIGHLIGHT_COLOR,We._defaultColor],[Ie.HIGHLIGHT_THICKNESS,We._defaultThickness]]}get propertiesToUpdate(){return[[Ie.HIGHLIGHT_COLOR,this.color||We._defaultColor],[Ie.HIGHLIGHT_THICKNESS,d(this,Xr)||We._defaultThickness],[Ie.HIGHLIGHT_FREE,d(this,dn)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,Xg,new ox({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(j(this,be,Pp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,j(this,be,Pp).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){j(this,be,RS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(j(this,be,sc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?j(this,be,RS).call(this):t&&(j(this,be,sc).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,a,o;const{drawLayer:r}=this.parent;let s;d(this,dn)?(t=(t-this.rotation+360)%360,s=j(i=We,es,bd).call(i,d(this,Kr).box,t)):s=j(a=We,es,bd).call(a,[this.x,this.y,this.width,this.height],t),r.updateProperties(d(this,Sr),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(d(this,Nn),{bbox:j(o=We,es,bd).call(o,d(this,er).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,af)&&(t.setAttribute("aria-label",d(this,af)),t.setAttribute("role","mark")),d(this,dn)?t.classList.add("free"):this.div.addEventListener("keydown",j(this,be,EL).bind(this),{signal:this._uiManager._signal});const r=S(this,lu,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=d(this,ou);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),KD(this,d(this,lu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,Nn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,Nn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:j(this,be,l0).call(this,!0);break;case 1:case 3:j(this,be,l0).call(this,!1);break}}select(){var t;super.select(),d(this,Nn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,Nn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,Nn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,Nn),{rootClass:{selected:!1}}),d(this,dn)||j(this,be,l0).call(this,!1))}get _mustFixPosition(){return!d(this,dn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,Sr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,Nn),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:a}){const{x:o,y:l,width:u,height:h}=s.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),j(this,es,kL).call(this,t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",Dt,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",os,{signal:p}),s.addEventListener("pointermove",j(this,es,NL).bind(this,t),{signal:p}),this._freeHighlight=new PS({x:i,y:a},[o,l,u,h],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var g,w,v,x;let i=null;if(t instanceof rL){const{data:{quadPoints:b,rect:E,rotation:A,id:C,color:N,opacity:P,popupRef:T,contentsObj:M},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ve.HIGHLIGHT,color:Array.from(N),opacity:P,quadPoints:b,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:A,annotationElementId:C,id:C,deleted:!1,popupRef:T,comment:(M==null?void 0:M.str)||null}}else if(t instanceof YA){const{data:{inkLists:b,rect:E,rotation:A,id:C,color:N,borderStyle:{rawWidth:P},popupRef:T,contentsObj:M},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ve.HIGHLIGHT,color:Array.from(N),thickness:P,inkLists:b,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:A,annotationElementId:C,id:C,deleted:!1,popupRef:T,comment:(M==null?void 0:M.str)||null}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,h=await super.deserialize(t,r,s);h.color=ue.makeHexColor(...a),S(h,Ia,u||1),l&&S(h,Xr,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t.comment);const[f,p]=h.pageDimensions,[m,y]=h.pageTranslation;if(o){const b=S(h,Ma,[]);for(let E=0;E<o.length;E+=8)b.push({x:(o[E]-m)/f,y:1-(o[E+1]-y)/p,width:(o[E+2]-o[E])/f,height:(o[E+1]-o[E+5])/p});j(g=h,be,TS).call(g),j(w=h,be,sc).call(w),h.rotate(h.rotation)}else if(l){S(h,dn,!0);const b=l[0],E={x:b[0]-m,y:p-(b[1]-y)},A=new PS(E,[0,0,f,p],1,d(h,Xr)/2,!0,.001);for(let P=0,T=b.length;P<T;P+=2)E.x=b[P]-m,E.y=p-(b[P+1]-y),A.add(E);const{id:C,clipPathId:N}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:A.toSVGPath()}},!0,!0);j(v=h,be,o0).call(v,{highlightOutlines:A.getOutlines(),highlightId:C,clipPathId:N}),j(x=h,be,sc).call(x),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),s=rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:ve.HIGHLIGHT,color:s,opacity:d(this,Ia),thickness:d(this,Xr),quadPoints:j(this,be,AL).call(this),outlines:j(this,be,CL).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:j(this,be,Pp).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!j(this,be,jL).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}static canCreateNewEmptyEditor(){return!1}};rf=new WeakMap,Kg=new WeakMap,Ma=new WeakMap,ou=new WeakMap,Xg=new WeakMap,er=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,lu=new WeakMap,Kr=new WeakMap,Sr=new WeakMap,dn=new WeakMap,sf=new WeakMap,Ia=new WeakMap,Nn=new WeakMap,af=new WeakMap,Xr=new WeakMap,Zg=new WeakMap,be=new WeakSet,TS=function(){const t=new kS(d(this,Ma),.001);S(this,Kr,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,Kr).box;const r=new kS(d(this,Ma),.0025,.001,this._uiManager.direction==="ltr");S(this,er,r.getOutlines());const{lastPoint:s}=d(this,er);S(this,sf,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},o0=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(S(this,Kr,t),S(this,er,t.getNewOutline(d(this,Xr)/2+1.5,.0025)),r>=0)S(this,Sr,r),S(this,ou,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),S(this,Nn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,er).box,path:{d:d(this,er).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,Sr),{bbox:j(f=We,es,bd).call(f,d(this,Kr).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,Nn),{bbox:j(p=We,es,bd).call(p,d(this,er).box,m),path:{d:d(this,er).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[m,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*y/m,this.height=u*m/y;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*y/m,this.height=u*m/y;break}}const{lastPoint:h}=d(this,er);S(this,sf,[(h[0]-a)/l,(h[1]-o)/u])},bL=function(t){const r=(a,o)=>{var l,u;this.color=a,S(this,Ia,o),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,Sr),{root:{fill:a,"fill-opacity":o}}),(u=d(this,Xg))==null||u.updateColor(a)},s=this.color,i=d(this,Ia);this.addCommands({cmd:r.bind(this,t,We._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},_L=function(t){const r=d(this,Xr),s=i=>{S(this,Xr,i),j(this,be,SL).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ie.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},SL=function(t){if(!d(this,dn))return;j(this,be,o0).call(this,{highlightOutlines:d(this,Kr).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},RS=function(){d(this,Sr)===null||!this.parent||(this.parent.drawLayer.remove(d(this,Sr)),S(this,Sr,null),this.parent.drawLayer.remove(d(this,Nn)),S(this,Nn,null))},sc=function(t=this.parent){d(this,Sr)===null&&({id:Xt(this,Sr)._,clipPathId:Xt(this,ou)._}=t.drawLayer.draw({bbox:d(this,Kr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,Ia)},rootClass:{highlight:!0,free:d(this,dn)},path:{d:d(this,Kr).toSVGPath()}},!1,!0),S(this,Nn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,dn)},bbox:d(this,er).box,path:{d:d(this,er).toSVGPath()}},d(this,dn))),d(this,lu)&&(d(this,lu).style.clipPath=d(this,ou)))},es=new WeakSet,bd=function([t,r,s,i],a){switch(a){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},EL=function(t){We._keyboardManager.exec(this,t)},l0=function(t){if(!d(this,rf))return;const r=window.getSelection();t?r.setPosition(d(this,rf),d(this,Kg)):r.setPosition(d(this,Qg),d(this,Jg))},Pp=function(){return d(this,dn)?this.rotation:0},AL=function(){if(d(this,dn))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,a=d(this,Ma),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:h,width:f,height:p}of a){const m=u*t+s,y=(1-h)*r+i;o[l]=o[l+4]=m,o[l+1]=o[l+3]=y,o[l+2]=o[l+6]=m+f*t,o[l+5]=o[l+7]=y-p*r,l+=8}return o},CL=function(t){return d(this,Kr).serialize(t,j(this,be,Pp).call(this))},NL=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},kL=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},jL=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==r[i])},k(We,es),q(We,"_defaultColor",null),q(We,"_defaultOpacity",1),q(We,"_defaultThickness",12),q(We,"_type","highlight"),q(We,"_editorType",ve.HIGHLIGHT),q(We,"_freeHighlightId",-1),q(We,"_freeHighlight",null),q(We,"_freeHighlightClipId","");let dx=We;var cu;class PL{constructor(){k(this,cu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){d(this,cu)[e]=t}toSVGProperties(){const e=d(this,cu);return S(this,cu,Object.create(null)),{root:e}}reset(){S(this,cu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Je("Not implemented")}}cu=new WeakMap;var Er,of,Zt,uu,du,il,al,ol,hu,Le,MS,IS,DS,Tp,TL,c0,Rp,_d;const ie=class ie extends rt{constructor(t){super(t);k(this,Le);k(this,Er,null);k(this,of);q(this,"_colorPicker",null);q(this,"_drawId",null);S(this,of,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(j(this,Le,MS).call(this,t),j(this,Le,Tp).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,a]of Object.entries(r))s.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Je("Not implemented")}static get typesMap(){Je("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(d(ie,Zt).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,a=i[r],o=l=>{var h,f;i.updateProperty(r,l);const u=d(this,Er).updateProperty(r,l);u&&j(this,Le,Rp).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&((f=this._colorPicker)==null||f.update(l))};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,Er).getPathResizingSVGProperties(j(this,Le,c0).call(this)),{bbox:j(this,Le,_d).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,Er).getPathResizedSVGProperties(j(this,Le,c0).call(this)),{bbox:j(this,Le,_d).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:j(this,Le,_d).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,Er).getPathTranslatedSVGProperties(j(this,Le,c0).call(this),this.parentDimensions),{bbox:j(this,Le,_d).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,of)&&(S(this,of,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){j(this,Le,DS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(j(this,Le,Tp).call(this),j(this,Le,Rp).call(this,d(this,Er).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),j(this,Le,DS).call(this)):t&&(this._uiManager.addShouldRescale(this),j(this,Le,Tp).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties({bbox:j(this,Le,_d).call(this)},d(this,Er).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&j(this,Le,Rp).call(this,d(this,Er).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,a){Je("Not implemented")}static startDrawing(t,r,s,i){var w;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:h}=i;if(d(ie,al)&&d(ie,al)!==h)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=a.getBoundingClientRect(),y=S(ie,uu,new AbortController),g=t.combinedSignal(y);if(d(ie,il)||S(ie,il,u),d(ie,al)??S(ie,al,h),window.addEventListener("pointerup",v=>{var x;d(ie,il)===v.pointerId?this._endDraw(v):(x=d(ie,ol))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var x;d(ie,il)===v.pointerId?this._currentParent.endDrawingSession():(x=d(ie,ol))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{d(ie,al)===v.pointerType&&((d(ie,ol)||S(ie,ol,new Set)).add(v.pointerId),d(ie,Zt).isCancellable()&&(d(ie,Zt).removeLastElement(),d(ie,Zt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",os,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{v.timeStamp===d(ie,hu)&&Dt(v)},{signal:g}),t.toggleDrawing(),(w=r._editorUndoBar)==null||w.hide(),d(ie,Zt)){t.drawLayer.updateProperties(this._currentDrawId,d(ie,Zt).startNew(o,l,p,m,f));return}r.updateUIForDefaultProperties(this),S(ie,Zt,this.createDrawerInstance(o,l,p,m,f)),S(ie,du,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(ie,du).toSVGProperties(),d(ie,Zt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(S(ie,hu,-1),!d(ie,Zt))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(d(ie,il)===i){if(((a=d(ie,ol))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(ie,Zt).add(r,s)),S(ie,hu,t.timeStamp),Dt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,S(ie,Zt,null),S(ie,du,null),S(ie,al,null),S(ie,hu,NaN)),d(ie,uu)&&(d(ie,uu).abort(),S(ie,uu,null),S(ie,il,NaN),S(ie,ol,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,d(ie,Zt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=d(ie,Zt),i=this._currentDrawId,a=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Ie.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Ie.DRAW_STEP),!d(ie,Zt).isEmpty()){const{pageDimensions:[s,i],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(ie,Zt).getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:d(ie,du),mustBeCommitted:!t});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,a,o){Je("Not implemented")}static async deserialize(t,r,s){var f,p;const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=r.viewport,u=this.deserializeDraw(o,l,i,a,this._INNER_MARGIN,t),h=await super.deserialize(t,r,s);return h.createDrawingOptions(t),j(f=h,Le,MS).call(f,{drawOutlines:u}),j(p=h,Le,Tp).call(p),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[r,s]=this.pageTranslation,[i,a]=this.pageDimensions;return d(this,Er).serialize([r,s,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Er=new WeakMap,of=new WeakMap,Zt=new WeakMap,uu=new WeakMap,du=new WeakMap,il=new WeakMap,al=new WeakMap,ol=new WeakMap,hu=new WeakMap,Le=new WeakSet,MS=function({drawOutlines:t,drawId:r,drawingOptions:s}){S(this,Er,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=j(this,Le,IS).call(this,t,this.parent),j(this,Le,Rp).call(this,t.box)},IS=function(t,r){const{id:s}=r.drawLayer.draw(ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},DS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Tp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=j(this,Le,IS).call(this,d(this,Er),t)}},TL=function([t,r,s,i]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},c0=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},Rp=function(t){if([this.x,this.y,this.width,this.height]=j(this,Le,TL).call(this,t),this.div){this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}this._onResized()},_d=function(){const{x:t,y:r,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(l/u),i*(u/l),s*(l/u)];case 5:return[1-r,t,s*(l/u),i*(u/l)];case 6:return[1-t-i*(u/l),1-r,i*(u/l),s*(l/u)];case 7:return[r-s*(l/u),1-t-i*(u/l),s*(l/u),i*(u/l)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(u/l),r,i*(u/l),s*(l/u)];case 13:return[1-r-s*(l/u),t-i*(u/l),s*(l/u),i*(u/l)];case 14:return[1-t,1-r-s*(l/u),i*(u/l),s*(l/u)];case 15:return[r,1-t,s*(l/u),i*(u/l)];default:return[t,r,s,i]}},q(ie,"_currentDrawId",-1),q(ie,"_currentParent",null),k(ie,Zt,null),k(ie,uu,null),k(ie,du,null),k(ie,il,NaN),k(ie,al,null),k(ie,ol,null),k(ie,hu,NaN),q(ie,"_INNER_MARGIN",3);let hx=ie;var bi,en,tn,fu,lf,Dn,hn,Qr,pu,mu,gu,cf,u0;class c9{constructor(e,t,r,s,i,a){k(this,cf);k(this,bi,new Float64Array(6));k(this,en);k(this,tn);k(this,fu);k(this,lf);k(this,Dn);k(this,hn,"");k(this,Qr,0);k(this,pu,new Pv);k(this,mu);k(this,gu);S(this,mu,r),S(this,gu,s),S(this,fu,i),S(this,lf,a),[e,t]=j(this,cf,u0).call(this,e,t);const o=S(this,en,[NaN,NaN,NaN,NaN,e,t]);S(this,Dn,[e,t]),S(this,tn,[{line:o,points:d(this,Dn)}]),d(this,bi).set(o,0)}updateProperty(e,t){e==="stroke-width"&&S(this,lf,t)}isEmpty(){return!d(this,tn)||d(this,tn).length===0}isCancellable(){return d(this,Dn).length<=10}add(e,t){[e,t]=j(this,cf,u0).call(this,e,t);const[r,s,i,a]=d(this,bi).subarray(2,6),o=e-i,l=t-a;return Math.hypot(d(this,mu)*o,d(this,gu)*l)<=2?null:(d(this,Dn).push(e,t),isNaN(r)?(d(this,bi).set([i,a,e,t],2),d(this,en).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,bi)[0])&&d(this,en).splice(6,6),d(this,bi).set([r,s,i,a,e,t],0),d(this,en).push(...ne.createBezierPoints(r,s,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(d(this,Dn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){S(this,mu,r),S(this,gu,s),S(this,fu,i),[e,t]=j(this,cf,u0).call(this,e,t);const a=S(this,en,[NaN,NaN,NaN,NaN,e,t]);S(this,Dn,[e,t]);const o=d(this,tn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),d(this,tn).push({line:a,points:d(this,Dn)}),d(this,bi).set(a,0),S(this,Qr,0),this.toSVGPath(),null}getLastElement(){return d(this,tn).at(-1)}setLastElement(e){return d(this,tn)?(d(this,tn).push(e),S(this,en,e.line),S(this,Dn,e.points),S(this,Qr,0),{path:{d:this.toSVGPath()}}):d(this,pu).setLastElement(e)}removeLastElement(){if(!d(this,tn))return d(this,pu).removeLastElement();d(this,tn).pop(),S(this,hn,"");for(let e=0,t=d(this,tn).length;e<t;e++){const{line:r,points:s}=d(this,tn)[e];S(this,en,r),S(this,Dn,s),S(this,Qr,0),this.toSVGPath()}return{path:{d:d(this,hn)}}}toSVGPath(){const e=ne.svgRound(d(this,en)[4]),t=ne.svgRound(d(this,en)[5]);if(d(this,Dn).length===2)return S(this,hn,`${d(this,hn)} M ${e} ${t} Z`),d(this,hn);if(d(this,Dn).length<=6){const s=d(this,hn).lastIndexOf("M");S(this,hn,`${d(this,hn).slice(0,s)} M ${e} ${t}`),S(this,Qr,6)}if(d(this,Dn).length===4){const s=ne.svgRound(d(this,en)[10]),i=ne.svgRound(d(this,en)[11]);return S(this,hn,`${d(this,hn)} L ${s} ${i}`),S(this,Qr,12),d(this,hn)}const r=[];d(this,Qr)===0&&(r.push(`M ${e} ${t}`),S(this,Qr,6));for(let s=d(this,Qr),i=d(this,en).length;s<i;s+=6){const[a,o,l,u,h,f]=d(this,en).slice(s,s+6).map(ne.svgRound);r.push(`C${a} ${o} ${l} ${u} ${h} ${f}`)}return S(this,hn,d(this,hn)+r.join(" ")),S(this,Qr,d(this,en).length),d(this,hn)}getOutlines(e,t,r,s){const i=d(this,tn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),d(this,pu).build(d(this,tn),e,t,r,d(this,fu),d(this,lf),s),S(this,bi,null),S(this,en,null),S(this,tn,null),S(this,hn,null),d(this,pu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}bi=new WeakMap,en=new WeakMap,tn=new WeakMap,fu=new WeakMap,lf=new WeakMap,Dn=new WeakMap,hn=new WeakMap,Qr=new WeakMap,pu=new WeakMap,mu=new WeakMap,gu=new WeakMap,cf=new WeakSet,u0=function(e,t){return ne._normalizePoint(e,t,d(this,mu),d(this,gu),d(this,fu))};var On,ev,tv,Ar,_i,Si,uf,df,vu,mn,ta,RL,ML,IL;class Pv extends ne{constructor(){super(...arguments);k(this,mn);k(this,On);k(this,ev,0);k(this,tv);k(this,Ar);k(this,_i);k(this,Si);k(this,uf);k(this,df);k(this,vu)}build(t,r,s,i,a,o,l){S(this,_i,r),S(this,Si,s),S(this,uf,i),S(this,df,a),S(this,vu,o),S(this,tv,l??0),S(this,Ar,t),j(this,mn,ML).call(this)}get thickness(){return d(this,vu)}setLastElement(t){return d(this,Ar).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,Ar).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of d(this,Ar)){if(t.push(`M${ne.svgRound(r[4])} ${ne.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${ne.svgRound(r[10])} ${ne.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[a,o,l,u,h,f]=r.subarray(s,s+6).map(ne.svgRound);t.push(`C${a} ${o} ${l} ${u} ${h} ${f}`)}}return t.join("")}serialize([t,r,s,i],a){const o=[],l=[],[u,h,f,p]=j(this,mn,RL).call(this);let m,y,g,w,v,x,b,E,A;switch(d(this,df)){case 0:A=ne._rescale,m=t,y=r+i,g=s,w=-i,v=t+u*s,x=r+(1-h-p)*i,b=t+(u+f)*s,E=r+(1-h)*i;break;case 90:A=ne._rescaleAndSwap,m=t,y=r,g=s,w=i,v=t+h*s,x=r+u*i,b=t+(h+p)*s,E=r+(u+f)*i;break;case 180:A=ne._rescale,m=t+s,y=r,g=-s,w=i,v=t+(1-u-f)*s,x=r+h*i,b=t+(1-u)*s,E=r+(h+p)*i;break;case 270:A=ne._rescaleAndSwap,m=t+s,y=r+i,g=-s,w=-i,v=t+(1-h-p)*s,x=r+(1-u-f)*i,b=t+(1-h)*s,E=r+(1-u)*i;break}for(const{line:C,points:N}of d(this,Ar))o.push(A(C,m,y,g,w,a?new Array(C.length):null)),l.push(A(N,m,y,g,w,a?new Array(N.length):null));return{lines:o,points:l,rect:[v,x,b,E]}}static deserialize(t,r,s,i,a,{paths:{lines:o,points:l},rotation:u,thickness:h}){const f=[];let p,m,y,g,w;switch(u){case 0:w=ne._rescale,p=-t/s,m=r/i+1,y=1/s,g=-1/i;break;case 90:w=ne._rescaleAndSwap,p=-r/i,m=-t/s,y=1/i,g=1/s;break;case 180:w=ne._rescale,p=t/s+1,m=-r/i,y=-1/s,g=1/i;break;case 270:w=ne._rescaleAndSwap,p=r/i+1,m=t/s+1,y=-1/i,g=-1/s;break}if(!o){o=[];for(const x of l){const b=x.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const E=new Float32Array(3*(b-2));o.push(E);let[A,C,N,P]=x.subarray(0,4);E.set([NaN,NaN,NaN,NaN,A,C],0);for(let T=4;T<b;T+=2){const M=x[T],I=x[T+1];E.set(ne.createBezierPoints(A,C,N,P,M,I),(T-2)*3),[A,C,N,P]=[N,P,M,I]}}}for(let x=0,b=o.length;x<b;x++)f.push({line:w(o[x].map(E=>E??NaN),p,m,y,g),points:w(l[x].map(E=>E??NaN),p,m,y,g)});const v=new this.prototype.constructor;return v.build(f,s,i,1,u,h,a),v}get box(){return d(this,On)}updateProperty(t,r){return t==="stroke-width"?j(this,mn,IL).call(this,r):null}updateParentDimensions([t,r],s){const[i,a]=j(this,mn,ta).call(this);S(this,_i,t),S(this,Si,r),S(this,uf,s);const[o,l]=j(this,mn,ta).call(this),u=o-i,h=l-a,f=d(this,On);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(t){return S(this,ev,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,On).map(ne.svgRound).join(" ")}get defaultProperties(){const[t,r]=d(this,On);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=d(this,On);let s=0,i=0,a=0,o=0,l=0,u=0;switch(d(this,ev)){case 90:i=r/t,a=-t/r,l=t;break;case 180:s=-1,o=-1,l=t,u=r;break;case 270:i=-r/t,a=t/r,u=r;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${ne.svgRound(l)} ${ne.svgRound(u)})`}getPathResizingSVGProperties([t,r,s,i]){const[a,o]=j(this,mn,ta).call(this),[l,u,h,f]=d(this,On);if(Math.abs(h-a)<=ne.PRECISION||Math.abs(f-o)<=ne.PRECISION){const w=t+s/2-(l+h/2),v=r+i/2-(u+f/2);return{path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const p=(s-2*a)/(h-2*a),m=(i-2*o)/(f-2*o),y=h/s,g=f/i;return{path:{"transform-origin":`${ne.svgRound(l)} ${ne.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${ne.svgRound(a)} ${ne.svgRound(o)}) scale(${p} ${m}) translate(${ne.svgRound(-a)} ${ne.svgRound(-o)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[a,o]=j(this,mn,ta).call(this),l=d(this,On),[u,h,f,p]=l;if(l[0]=t,l[1]=r,l[2]=s,l[3]=i,Math.abs(f-a)<=ne.PRECISION||Math.abs(p-o)<=ne.PRECISION){const v=t+s/2-(u+f/2),x=r+i/2-(h+p/2);for(const{line:b,points:E}of d(this,Ar))ne._translate(b,v,x,b),ne._translate(E,v,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(s-2*a)/(f-2*a),y=(i-2*o)/(p-2*o),g=-m*(u+a)+t+a,w=-y*(h+o)+r+o;if(m!==1||y!==1||g!==0||w!==0)for(const{line:v,points:x}of d(this,Ar))ne._rescale(v,g,w,m,y,v),ne._rescale(x,g,w,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,a]=s,o=d(this,On),l=t-o[0],u=r-o[1];if(d(this,_i)===i&&d(this,Si)===a)for(const{line:h,points:f}of d(this,Ar))ne._translate(h,l,u,h),ne._translate(f,l,u,f);else{const h=d(this,_i)/i,f=d(this,Si)/a;S(this,_i,i),S(this,Si,a);for(const{line:p,points:m}of d(this,Ar))ne._rescale(p,l,u,h,f,p),ne._rescale(m,l,u,h,f,m);o[2]*=h,o[3]*=f}return o[0]=t,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`}}}get defaultSVGProperties(){const t=d(this,On);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(t[0])} ${ne.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}On=new WeakMap,ev=new WeakMap,tv=new WeakMap,Ar=new WeakMap,_i=new WeakMap,Si=new WeakMap,uf=new WeakMap,df=new WeakMap,vu=new WeakMap,mn=new WeakSet,ta=function(t=d(this,vu)){const r=d(this,tv)+t/2*d(this,uf);return d(this,df)%180===0?[r/d(this,_i),r/d(this,Si)]:[r/d(this,Si),r/d(this,_i)]},RL=function(){const[t,r,s,i]=d(this,On),[a,o]=j(this,mn,ta).call(this,0);return[t+a,r+o,s-2*a,i-2*o]},ML=function(){const t=S(this,On,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of d(this,Ar)){if(i.length<=12){for(let l=4,u=i.length;l<u;l+=6)ue.pointBoundingBox(i[l],i[l+1],t);continue}let a=i[4],o=i[5];for(let l=6,u=i.length;l<u;l+=6){const[h,f,p,m,y,g]=i.subarray(l,l+6);ue.bezierBoundingBox(a,o,h,f,p,m,y,g,t),a=y,o=g}}const[r,s]=j(this,mn,ta).call(this);t[0]=$n(t[0]-r,0,1),t[1]=$n(t[1]-s,0,1),t[2]=$n(t[2]+r,0,1),t[3]=$n(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},IL=function(t){const[r,s]=j(this,mn,ta).call(this);S(this,vu,t);const[i,a]=j(this,mn,ta).call(this),[o,l]=[i-r,a-s],u=d(this,On);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class Rw extends PL{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Rw(this._viewParameters);return e.updateAll(this),e}}var Ix,DL;const Ld=class Ld extends hx{constructor(t){super({...t,name:"inkEditor"});k(this,Ix);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){rt.initialize(t,r),this._defaultDrawingOptions=new Rw(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return ke(this,"typesMap",new Map([[Ie.INK_THICKNESS,"stroke-width"],[Ie.INK_COLOR,"stroke"],[Ie.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,a){return new c9(t,r,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,a,o){return Pv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){let i=null;if(t instanceof YA){const{data:{inkLists:o,rect:l,rotation:u,id:h,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,contentsObj:g},parent:{page:{pageNumber:w}}}=t;i=t={annotationType:ve.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:o},boxes:null,pageIndex:w-1,rect:l.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,comment:(g==null?void 0:g.str)||null}}const a=await super.deserialize(t,r,s);return a._initialData=i,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new lx(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Ie.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Ld.getDefaultDrawingOptions({stroke:ue.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u={annotationType:ve.INK,color:rt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:r,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!j(this,Ix,DL).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:r,rect:s}=this.serializeDraw(!1),i={rect:s,thickness:this._drawingOptions["stroke-width"],points:r};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}};Ix=new WeakSet,DL=function(t){const{color:r,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==r[l])||t.thickness!==s||t.opacity!==i||t.pageIndex!==a},q(Ld,"_type","ink"),q(Ld,"_editorType",ve.INK),q(Ld,"_defaultDrawingOptions",null);let OS=Ld;class LS extends Pv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const wy=8,cp=3;var yu,Ve,FS,Ts,OL,LL,$S,d0,FL,$L,BL,BS,zS,zL;class Ba{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,a,o,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const f=200,p=h.font=`${r} ${s} ${f}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:w,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:b}=h.measureText(e),E=1.5,A=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,b)*E),C=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||f,Math.abs(v)+Math.abs(x)||f)*E);u=new OffscreenCanvas(A,C),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=p,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,A,C),h.fillStyle="black",h.fillText(e,A*(E-1)/2,C*(3-E)/2);const N=j(this,Ve,BS).call(this,h.getImageData(0,0,A,C).data),P=j(this,Ve,BL).call(this,N),T=j(this,Ve,zS).call(this,P),M=j(this,Ve,$S).call(this,N,A,C,T);return this.processDrawnLines({lines:{curves:M,width:A,height:C},pageWidth:i,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[a,o,l]=j(this,Ve,zL).call(this,e),[u,h]=j(this,Ve,$L).call(this,a,o,l,Math.hypot(o,l)*d(this,yu).sigmaSFactor,d(this,yu).sigmaR,d(this,yu).kernelSize),f=j(this,Ve,zS).call(this,h),p=j(this,Ve,$S).call(this,u,o,l,f);return this.processDrawnLines({lines:{curves:p,width:o,height:l},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:a,areContours:o}){s%180!==0&&([t,r]=[r,t]);const{curves:l,width:u,height:h}=e,f=e.thickness??0,p=[],m=Math.min(t/u,r/h),y=m/t,g=m/r,w=[];for(const{points:x}of l){const b=a?j(this,Ve,FL).call(this,x):x;if(!b)continue;w.push(b);const E=b.length,A=new Float32Array(E),C=new Float32Array(3*(E===2?2:E-2));if(p.push({line:C,points:A}),E===2){A[0]=b[0]*y,A[1]=b[1]*g,C.set([NaN,NaN,NaN,NaN,A[0],A[1]],0);continue}let[N,P,T,M]=b;N*=y,P*=g,T*=y,M*=g,A.set([N,P,T,M],0),C.set([NaN,NaN,NaN,NaN,N,P],0);for(let I=4;I<E;I+=2){const R=A[I]=b[I]*y,F=A[I+1]=b[I+1]*g;C.set(ne.createBezierPoints(N,P,T,M,R,F),(I-2)*3),[N,P,T,M]=[T,M,R,F]}}if(p.length===0)return null;const v=o?new LS:new Pv;return v.build(p,t,r,1,s,o?0:f,i),{outline:v,newCurves:w,areContours:o,thickness:f,width:u,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let a=1/0,o=-1/0,l=0;for(const b of e){l+=b.length;for(let E=2,A=b.length;E<A;E++){const C=b[E]-b[E-2];a=Math.min(a,C),o=Math.max(o,C)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const h=e.length,f=wy+cp*h,p=new Uint32Array(f);let m=0;p[m++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,p[m++]=0,p[m++]=s,p[m++]=i,p[m++]=t?0:1,p[m++]=Math.max(0,Math.floor(r??0)),p[m++]=h,p[m++]=u.BYTES_PER_ELEMENT;for(const b of e)p[m++]=b.length-2,p[m++]=b[0],p[m++]=b[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(p);const w=u.prototype.constructor;for(const b of e){const E=new w(b.length-2);for(let A=2,C=b.length;A<C;A++)E[A-2]=b[A]-b[A-2];g.write(E)}g.close();const v=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(v);return UD(x)}static async decompressSignature(e){try{const t=Rq(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,o=0;for await(const b of r)a||(a=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),a.set(b,o),o+=b.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],f=l[3],p=l[4]===0,m=l[5],y=l[6],g=l[7],w=[],v=(wy+cp*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,v);break}o=0;for(let b=0;b<y;b++){const E=l[cp*b+wy],A=new Float32Array(E+2);w.push(A);for(let C=0;C<cp-1;C++)A[C]=l[cp*b+wy+C+1];for(let C=0;C<E;C++)A[C+2]=A[C]+x[o++]}return{areContours:p,thickness:m,outlines:w,width:h,height:f}}catch(t){return ye(`decompressSignature: ${t}`),null}}}yu=new WeakMap,Ve=new WeakSet,FS=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},Ts=new WeakMap,OL=function(e,t,r,s,i,a,o){const l=j(this,Ve,FS).call(this,r,s,i,a);for(let u=0;u<8;u++){const h=(-u+l-o+16)%8,f=d(this,Ts)[2*h],p=d(this,Ts)[2*h+1];if(e[(r+f)*t+(s+p)]!==0)return h}return-1},LL=function(e,t,r,s,i,a,o){const l=j(this,Ve,FS).call(this,r,s,i,a);for(let u=0;u<8;u++){const h=(u+l+o+16)%8,f=d(this,Ts)[2*h],p=d(this,Ts)[2*h+1];if(e[(r+f)*t+(s+p)]!==0)return h}return-1},$S=function(e,t,r,s){const i=e.length,a=new Int32Array(i);for(let h=0;h<i;h++)a[h]=e[h]<=s?1:0;for(let h=1;h<r-1;h++)a[h*t]=a[h*t+t-1]=0;for(let h=0;h<t;h++)a[h]=a[t*r-1-h]=0;let o=1,l;const u=[];for(let h=1;h<r-1;h++){l=1;for(let f=1;f<t-1;f++){const p=h*t+f,m=a[p];if(m===0)continue;let y=h,g=f;if(m===1&&a[p-1]===0)o+=1,g-=1;else if(m>=1&&a[p+1]===0)o+=1,g+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const w=[f,h],v=g===f+1,x={isHole:v,points:w,id:o,parent:0};u.push(x);let b;for(const I of u)if(I.id===l){b=I;break}b?b.isHole?x.parent=v?b.parent:l:x.parent=v?l:b.parent:x.parent=v?l:0;const E=j(this,Ve,OL).call(this,a,t,h,f,y,g,0);if(E===-1){a[p]=-o,a[p]!==1&&(l=Math.abs(a[p]));continue}let A=d(this,Ts)[2*E],C=d(this,Ts)[2*E+1];const N=h+A,P=f+C;y=N,g=P;let T=h,M=f;for(;;){const I=j(this,Ve,LL).call(this,a,t,T,M,y,g,1);A=d(this,Ts)[2*I],C=d(this,Ts)[2*I+1];const R=T+A,F=M+C;w.push(F,R);const O=T*t+M;if(a[O+1]===0?a[O]=-o:a[O]===1&&(a[O]=o),R===h&&F===f&&T===N&&M===P){a[p]!==1&&(l=Math.abs(a[p]));break}else y=T,g=M,T=R,M=F}}}return u},d0=function(e,t,r,s){if(r-t<=4){for(let N=t;N<r-2;N+=2)s.push(e[N],e[N+1]);return}const i=e[t],a=e[t+1],o=e[r-4]-i,l=e[r-3]-a,u=Math.hypot(o,l),h=o/u,f=l/u,p=h*a-f*i,m=l/o,y=1/u,g=Math.atan(m),w=Math.cos(g),v=Math.sin(g),x=y*(Math.abs(w)+Math.abs(v)),b=y*(1-x+x**2),E=Math.max(Math.atan(Math.abs(v+w)*b),Math.atan(Math.abs(v-w)*b));let A=0,C=t;for(let N=t+2;N<r-2;N+=2){const P=Math.abs(p-h*e[N+1]+f*e[N]);P>A&&(C=N,A=P)}A>(u*E)**2?(j(this,Ve,d0).call(this,e,t,C+2,s),j(this,Ve,d0).call(this,e,C,r,s)):s.push(i,a)},FL=function(e){const t=[],r=e.length;return j(this,Ve,d0).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},$L=function(e,t,r,s,i,a){const o=new Float32Array(a**2),l=-2*s**2,u=a>>1;for(let g=0;g<a;g++){const w=(g-u)**2;for(let v=0;v<a;v++)o[g*a+v]=Math.exp((w+(v-u)**2)/l)}const h=new Float32Array(256),f=-2*i**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/f);const p=e.length,m=new Uint8Array(p),y=new Uint32Array(256);for(let g=0;g<r;g++)for(let w=0;w<t;w++){const v=g*t+w,x=e[v];let b=0,E=0;for(let C=0;C<a;C++){const N=g+C-u;if(!(N<0||N>=r))for(let P=0;P<a;P++){const T=w+P-u;if(T<0||T>=t)continue;const M=e[N*t+T],I=o[C*a+P]*h[Math.abs(M-x)];b+=M*I,E+=I}}const A=m[v]=Math.round(b/E);y[A]++}return[m,y]},BL=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},BS=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let o=0,l=r.length;o<l;o++){const u=r[o]=e[o<<2];s=Math.max(s,u),i=Math.min(i,u)}const a=255/(s-i);for(let o=0,l=r.length;o<l;o++)r[o]=(r[o]-i)*a;return r},zS=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(l=>l!==0);let a=i,o=i;for(t=i;t<256;t++){const l=e[t];l>r&&(t-a>s&&(s=t-a,o=t-1),r=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},zL=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=d(this,yu);let a=r,o=s;if(r>i||s>i){let p=r,m=s,y=Math.log2(Math.max(r,s)/i);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){a=Math.ceil(p/2),o=Math.ceil(m/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(e,0,0,p,m,0,0,a,o),p=a,m=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const w=Math.min(i/a,i/o);a=Math.round(a*w),o=Math.round(o*w)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,o);const h=u.getImageData(0,0,a,o).data;return[j(this,Ve,BS).call(this,h),a,o]},k(Ba,Ve),k(Ba,yu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(Ba,Ts,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class KA extends PL{constructor(){super(),super.updateProperties({fill:rt._defaultLineColor,"stroke-width":0})}clone(){const e=new KA;return e.updateAll(this),e}}class XA extends Rw{constructor(e){super(e),super.updateProperties({stroke:rt._defaultLineColor,"stroke-width":1})}clone(){const e=new XA(this._viewParameters);return e.updateAll(this),e}}var ll,Ei,cl,xu;const hr=class hr extends hx{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});k(this,ll,!1);k(this,Ei,null);k(this,cl,null);k(this,xu,null);this._willKeepAspectRatio=!0,S(this,cl,t.signatureData||null),S(this,Ei,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){rt.initialize(t,r),this._defaultDrawingOptions=new KA,this._defaultDrawnSignatureOptions=new XA(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return ke(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,Ei)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(d(this,cl)){const{lines:i,mustSmooth:a,areContours:o,description:l,uuid:u,heightInPage:h}=d(this,cl),{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=Ba.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:m,innerMargin:hr._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(y,h,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:d(this,Ei)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){S(this,xu,t),this.addEditToolbar()}getUuid(){return d(this,xu)}get description(){return d(this,Ei)}set description(t){S(this,Ei,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:a}=d(this,cl),o=Math.max(i,a),l=Ba.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:a,y:o}=this,{outline:l}=S(this,cl,t);S(this,ll,l instanceof LS),this.description=s;let u;d(this,ll)?u=hr.getDefaultDrawingOptions():(u=hr._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[h,f]=this.parentDimensions,[,p]=this.pageDimensions;let m=r/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(h*this.width,f*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Ba.process(t,r,s,i,hr._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return Ba.extractContoursFromText(t,r,s,i,a,hr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Ba.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:hr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=hr.getDefaultDrawingOptions():(this._drawingOptions=hr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:ve.SIGNATURE,isSignature:!0,areContours:d(this,ll),color:[0,0,0],thickness:d(this,ll)?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.paths={lines:r,points:s},o.uuid=d(this,xu),o.isCopy=!0):o.lines=r,d(this,Ei)&&(o.accessibilityData={type:"Figure",alt:d(this,Ei)}),o}static deserializeDraw(t,r,s,i,a,o){return o.areContours?LS.deserialize(t,r,s,i,a,o):Pv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){var a;const i=await super.deserialize(t,r,s);return S(i,ll,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",S(i,xu,t.uuid),i}};ll=new WeakMap,Ei=new WeakMap,cl=new WeakMap,xu=new WeakMap,q(hr,"_type","signature"),q(hr,"_editorType",ve.SIGNATURE),q(hr,"_defaultDrawingOptions",null);let US=hr;var dt,nn,ul,Da,dl,hf,Oa,wu,Ai,Cr,ff,Fe,Mp,Ip,h0,f0,p0,WS,m0,UL;class HS extends rt{constructor(t){super({...t,name:"stampEditor"});k(this,Fe);k(this,dt,null);k(this,nn,null);k(this,ul,null);k(this,Da,null);k(this,dl,null);k(this,hf,"");k(this,Oa,null);k(this,wu,!1);k(this,Ai,null);k(this,Cr,!1);k(this,ff,!1);S(this,Da,t.bitmapUrl),S(this,dl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){rt.initialize(t,r)}static isHandlingMimeForPasting(t){return O_.includes(t)}static paste(t,r){r.pasteEditor({mode:ve.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;d(this,nn)&&(S(this,dt,null),this._uiManager.imageManager.deleteId(d(this,nn)),(t=d(this,Oa))==null||t.remove(),S(this,Oa,null),d(this,Ai)&&(clearTimeout(d(this,Ai)),S(this,Ai,null))),super.remove()}rebuild(){if(!this.parent){d(this,nn)&&j(this,Fe,h0).call(this);return}super.rebuild(),this.div!==null&&(d(this,nn)&&d(this,Oa)===null&&j(this,Fe,h0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,ul)||d(this,dt)||d(this,Da)||d(this,dl)||d(this,nn)||d(this,wu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,wu)||(d(this,dt)?j(this,Fe,f0).call(this):j(this,Fe,h0).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(S(this,nn,s),i&&S(this,dt,i),S(this,wu,!1),j(this,Fe,f0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,Ai)!==null&&clearTimeout(d(this,Ai)),S(this,Ai,setTimeout(()=>{S(this,Ai,null),j(this,Fe,WS).call(this)},200))}copyCanvas(t,r,s=!1){var m;t||(t=224);const{width:i,height:a}=d(this,dt),o=new Hi;let l=d(this,dt),u=i,h=a,f=null;if(r){if(i>r||a>r){const P=Math.min(r/i,r/a);u=Math.floor(i*P),h=Math.floor(a*P)}f=document.createElement("canvas");const y=f.width=Math.ceil(u*o.sx),g=f.height=Math.ceil(h*o.sy);d(this,Cr)||(l=j(this,Fe,p0).call(this,y,g));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",x="#42414d");const b=15,E=b*o.sx,A=b*o.sy,C=new OffscreenCanvas(E*2,A*2),N=C.getContext("2d");N.fillStyle=v,N.fillRect(0,0,E*2,A*2),N.fillStyle=x,N.fillRect(0,0,E,A),N.fillRect(E,A,E,A),w.fillStyle=w.createPattern(C,"repeat"),w.fillRect(0,0,y,g),w.drawImage(l,0,0,l.width,l.height,0,0,y,g)}let p=null;if(s){let y,g;if(o.symmetric&&l.width<t&&l.height<t)y=l.width,g=l.height;else if(l=d(this,dt),i>t||a>t){const x=Math.min(t/i,t/a);y=Math.floor(i*x),g=Math.floor(a*x),d(this,Cr)||(l=j(this,Fe,p0).call(this,y,g))}const v=new OffscreenCanvas(y,g).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,y,g),p={width:y,height:g,data:v.getImageData(0,0,y,g).data}}return{canvas:f,width:u,height:h,imageData:p}}static async deserialize(t,r,s){var w;let i=null,a=!1;if(t instanceof sL){const{data:{rect:v,rotation:x,id:b,structParent:E,popupRef:A,contentsObj:C},container:N,parent:{page:{pageNumber:P}},canvas:T}=t;let M,I;T?(delete t.canvas,{id:M,bitmap:I}=s.imageManager.getFromCanvas(N.id,T),T.remove()):(a=!0,t._hasNoCanvas=!0);const R=((w=await r._structTree.getAriaAttributes(`${zA}${b}`))==null?void 0:w.get("aria-label"))||"";i=t={annotationType:ve.STAMP,bitmapId:M,bitmap:I,pageIndex:P-1,rect:v.slice(0),rotation:x,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:R},isSvg:!1,structParent:E,popupRef:A,comment:(C==null?void 0:C.str)||null}}const o=await super.deserialize(t,r,s),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:m}=t;a?(s.addMissingCanvas(t.id,o),S(o,wu,!0)):f&&s.imageManager.isValidId(f)?(S(o,nn,f),u&&S(o,dt,u)):S(o,Da,h),S(o,Cr,p);const[y,g]=o.pageDimensions;return o.width=(l[2]-l[0])/y,o.height=(l[3]-l[1])/g,m&&(o.altTextData=m),o._initialData=i,t.comment&&o.setCommentData(t.comment),S(o,ff,!!i),o}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:ve.STAMP,bitmapId:d(this,nn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Cr),structTreeParentId:this._structTreeParentId};if(this.addComment(s),t)return s.bitmapUrl=j(this,Fe,m0).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=j(this,Fe,UL).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,r===null)return s;r.stamps||(r.stamps=new Map);const o=d(this,Cr)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(d(this,nn)))r.stamps.set(d(this,nn),{area:o,serialized:s}),s.bitmap=j(this,Fe,m0).call(this,!1);else if(d(this,Cr)){const l=r.stamps.get(d(this,nn));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=j(this,Fe,m0).call(this,!1))}return s}renderAnnotationElement(t){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}}dt=new WeakMap,nn=new WeakMap,ul=new WeakMap,Da=new WeakMap,dl=new WeakMap,hf=new WeakMap,Oa=new WeakMap,wu=new WeakMap,Ai=new WeakMap,Cr=new WeakMap,ff=new WeakMap,Fe=new WeakSet,Mp=function(t,r=!1){if(!t){this.remove();return}S(this,dt,t.bitmap),r||(S(this,nn,t.id),S(this,Cr,t.isSvg)),t.file&&S(this,hf,t.file.name),j(this,Fe,f0).call(this)},Ip=function(){if(S(this,ul,null),this._uiManager.enableWaiting(!1),!!d(this,Oa)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,dt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,dt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},h0=function(){if(d(this,nn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,nn)).then(s=>j(this,Fe,Mp).call(this,s,!0)).finally(()=>j(this,Fe,Ip).call(this));return}if(d(this,Da)){const s=d(this,Da);S(this,Da,null),this._uiManager.enableWaiting(!0),S(this,ul,this._uiManager.imageManager.getFromUrl(s).then(i=>j(this,Fe,Mp).call(this,i)).finally(()=>j(this,Fe,Ip).call(this)));return}if(d(this,dl)){const s=d(this,dl);S(this,dl,null),this._uiManager.enableWaiting(!0),S(this,ul,this._uiManager.imageManager.getFromFile(s).then(i=>j(this,Fe,Mp).call(this,i)).finally(()=>j(this,Fe,Ip).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=O_.join(",");const r=this._uiManager._signal;S(this,ul,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),j(this,Fe,Mp).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>j(this,Fe,Ip).call(this))),t.click()},f0=function(){var f;const{div:t}=this;let{width:r,height:s}=d(this,dt);const[i,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*i,s=this.height*a;else if(r>o*i||s>o*a){const p=Math.min(o*i/r,o*a/s);r*=p,s*=p}const[l,u]=this.parentDimensions;this.setDims(r*l/i,s*u/a),this._uiManager.enableWaiting(!1);const h=S(this,Oa,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=r/i,this.height=s/a,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),j(this,Fe,WS).call(this),d(this,ff)||(this.parent.addUndoableEditor(this),S(this,ff,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,hf)&&this.div.setAttribute("aria-description",d(this,hf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},p0=function(t,r){const{width:s,height:i}=d(this,dt);let a=s,o=i,l=d(this,dt);for(;a>2*t||o>2*r;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(a,o);f.getContext("2d").drawImage(l,0,0,u,h,0,0,a,o),l=f.transferToImageBitmap()}return l},WS=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,a=new Hi,o=Math.ceil(s*t*a.sx),l=Math.ceil(i*r*a.sy),u=d(this,Oa);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const h=d(this,Cr)?d(this,dt):j(this,Fe,p0).call(this,o,l),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,o,l)},m0=function(t){if(t){if(d(this,Cr)){const i=this._uiManager.imageManager.getSvgUrl(d(this,nn));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=d(this,dt),r.getContext("2d").drawImage(d(this,dt),0,0),r.toDataURL()}if(d(this,Cr)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Il.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Il.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(d(this,dt),0,0,d(this,dt).width,d(this,dt).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(d(this,dt))},UL=function(t){var o;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},q(HS,"_type","stamp"),q(HS,"_editorType",ve.STAMP);var bu,pf,Ci,hl,La,Nr,fl,mf,_u,Rs,Fa,rn,$a,pl,gf,ce,ml,ht,HL,ti,GS,qS,g0;const vs=class vs{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:h}){k(this,ht);k(this,bu);k(this,pf,!1);k(this,Ci,null);k(this,hl,null);k(this,La,null);k(this,Nr,new Map);k(this,fl,!1);k(this,mf,!1);k(this,_u,!1);k(this,Rs,null);k(this,Fa,null);k(this,rn,null);k(this,$a,null);k(this,pl,null);k(this,gf,-1);k(this,ce);const f=[...d(vs,ml).values()];if(!vs._initialized){vs._initialized=!0;for(const p of f)p.initialize(h,e)}e.registerEditorTypes(f),S(this,ce,e),this.pageIndex=t,this.div=r,S(this,bu,i),S(this,Ci,a),this.viewport=u,S(this,rn,l),this.drawLayer=o,this._structTree=s,d(this,ce).addLayer(this)}get isEmpty(){return d(this,Nr).size===0}get isInvisible(){return this.isEmpty&&d(this,ce).getMode()===ve.NONE}updateToolbar(e){d(this,ce).updateToolbar(e)}updateMode(e=d(this,ce).getMode()){switch(j(this,ht,g0).call(this),e){case ve.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ve.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of d(vs,ml).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,rn))==null?void 0:t.div)}setEditingState(e){d(this,ce).setEditingState(e)}addCommands(e){d(this,ce).addCommands(e)}cleanUndoStack(e){d(this,ce).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,Ci))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;S(this,_u,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=d(this,pl))==null||r.abort(),S(this,pl,null);const e=new Set;for(const s of d(this,Nr).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(d(this,ce).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!d(this,Ci)){S(this,_u,!1);return}const t=d(this,Ci).getEditableAnnotations();for(const s of t){if(s.hide(),d(this,ce).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}S(this,_u,!1)}disable(){var s;if(S(this,mf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,rn)&&!d(this,pl)){S(this,pl,new AbortController);const i=d(this,ce).combinedSignal(d(this,pl));d(this,rn).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:h}=a,f=d(this,gf);if(h-f>500){S(this,gf,h);return}S(this,gf,-1);const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(l,u);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const g=new RegExp(`^${LD}[0-9]+$`);for(const v of m)if(g.test(v.id)){y=v.id;break}if(!y)return;const w=d(this,Nr).get(y);(w==null?void 0:w.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of d(this,Nr).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(d(this,Ci)){const i=d(this,Ci).getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(d(this,ce).isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(d(this,ce).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}j(this,ht,g0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of d(vs,ml).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,mf,!1)}getEditableAnnotation(e){var t;return((t=d(this,Ci))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,ce).getActive()!==e&&d(this,ce).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,rn))!=null&&e.div&&!d(this,$a)){S(this,$a,new AbortController);const t=d(this,ce).combinedSignal(d(this,$a));d(this,rn).div.addEventListener("pointerdown",j(this,ht,HL).bind(this),{signal:t}),d(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,rn))!=null&&e.div&&d(this,$a)&&(d(this,$a).abort(),S(this,$a,null),d(this,rn).div.classList.remove("highlighting"))}enableClick(){if(d(this,hl))return;S(this,hl,new AbortController);const e=d(this,ce).combinedSignal(d(this,hl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,hl))==null||e.abort(),S(this,hl,null)}attach(e){d(this,Nr).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,ce).isDeletedAnnotationElement(t)&&d(this,ce).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,Nr).delete(e.id),(t=d(this,bu))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,mf)&&e.annotationElementId&&d(this,ce).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,ce).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,ce).addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,ce).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,_u)),d(this,ce).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,La)&&(e._focusEventsAllowed=!1,S(this,La,setTimeout(()=>{S(this,La,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,ce)._signal}),t.focus())},0))),e._structTreeParentId=(r=d(this,bu))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return d(this,ce).getId()}combinedSignal(e){return d(this,ce).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,ht,ti))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,ce).updateMode(e.mode);const{offsetX:r,offsetY:s}=j(this,ht,qS).call(this),i=this.getNextId(),a=j(this,ht,GS).call(this,{parent:this,id:i,x:r,y:s,uiManager:d(this,ce),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=d(vs,ml).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,ce)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=j(this,ht,GS).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:d(this,ce),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(j(this,ht,qS).call(this),!0,e)}setSelected(e){d(this,ce).setSelected(e)}toggleSelected(e){d(this,ce).toggleSelected(e)}unselect(e){d(this,ce).unselect(e)}pointerup(e){var s;const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,fl)||(S(this,fl,!1),(s=d(this,ht,ti))!=null&&s.isDrawer&&d(this,ht,ti).supportMultipleDrawings))return;if(!d(this,pf)){S(this,pf,!0);return}const r=d(this,ce).getMode();if(r===ve.STAMP||r===ve.SIGNATURE){d(this,ce).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(d(this,ce).getMode()===ve.HIGHLIGHT&&this.enableTextSelection(),d(this,fl)){S(this,fl,!1);return}const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(S(this,fl,!0),(s=d(this,ht,ti))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=d(this,ce).getActive();S(this,pf,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,Rs)){d(this,ht,ti).startDrawing(this,d(this,ce),!1,e);return}d(this,ce).setCurrentDrawingSession(this),S(this,Rs,new AbortController);const t=d(this,ce).combinedSignal(d(this,Rs));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(S(this,Fa,null),this.commitOrRemove())},{signal:t}),d(this,ht,ti).startDrawing(this,d(this,ce),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&S(this,Fa,t);return}d(this,Fa)&&setTimeout(()=>{var t;(t=d(this,Fa))==null||t.focus(),S(this,Fa,null)},0)}endDrawingSession(e=!1){return d(this,Rs)?(d(this,ce).setCurrentDrawingSession(null),d(this,Rs).abort(),S(this,Rs,null),S(this,Fa,null),d(this,ht,ti).endDrawing(e)):null}findNewParent(e,t,r){const s=d(this,ce).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return d(this,Rs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Rs)&&d(this,ht,ti).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,ce).getActive())==null?void 0:e.parent)===this&&(d(this,ce).commitOrRemove(),d(this,ce).setActiveEditor(null)),d(this,La)&&(clearTimeout(d(this,La)),S(this,La,null));for(const r of d(this,Nr).values())(t=d(this,bu))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,d(this,Nr).clear(),d(this,ce).removeLayer(this)}render({viewport:e}){this.viewport=e,$u(this.div,e);for(const t of d(this,ce).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,ce).commitOrRemove(),j(this,ht,g0).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,$u(this.div,{rotation:r}),t!==r)for(const s of d(this,Nr).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,ce).viewParameters.realScale}};bu=new WeakMap,pf=new WeakMap,Ci=new WeakMap,hl=new WeakMap,La=new WeakMap,Nr=new WeakMap,fl=new WeakMap,mf=new WeakMap,_u=new WeakMap,Rs=new WeakMap,Fa=new WeakMap,rn=new WeakMap,$a=new WeakMap,pl=new WeakMap,gf=new WeakMap,ce=new WeakMap,ml=new WeakMap,ht=new WeakSet,HL=function(e){d(this,ce).unselectAll();const{target:t}=e;if(t===d(this,rn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,rn).div.contains(t)){const{isMac:r}=yn.platform;if(e.button!==0||e.ctrlKey&&r)return;d(this,ce).showAllEditors("highlight",!0,!0),d(this,rn).div.classList.add("free"),this.toggleDrawing(),dx.startHighlighting(this,d(this,ce).direction==="ltr",{target:d(this,rn).div,x:e.x,y:e.y}),d(this,rn).div.addEventListener("pointerup",()=>{d(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,ce)._signal}),e.preventDefault()}},ti=function(){return d(vs,ml).get(d(this,ce).getMode())},GS=function(e){const t=d(this,ht,ti);return t?new t.prototype.constructor(e):null},qS=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),u=(i+o)/2-e,h=(a+l)/2-t,[f,p]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:f,offsetY:p}},g0=function(){for(const e of d(this,Nr).values())e.isEmpty()&&e.remove()},q(vs,"_initialized",!1),k(vs,ml,new Map([CS,OS,HS,dx,US].map(e=>[e._editorType,e])));let VS=vs;var Ms,Ln,Su,nv,Dx,WL,Vi,KS,VL,XS;const Ht=class Ht{constructor({pageIndex:e}){k(this,Vi);k(this,Ms,null);k(this,Ln,new Map);k(this,Su,new Map);this.pageIndex=e}setParent(e){if(!d(this,Ms)){S(this,Ms,e);return}if(d(this,Ms)!==e){if(d(this,Ln).size>0)for(const t of d(this,Ln).values())t.remove(),e.append(t);S(this,Ms,e)}}static get _svgFactory(){return ke(this,"_svgFactory",new cx)}draw(e,t=!1,r=!1){const s=Xt(Ht,nv)._++,i=j(this,Vi,KS).call(this),a=Ht._svgFactory.createElement("defs");i.append(a);const o=Ht._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,Su).set(s,o);const u=r?j(this,Vi,VL).call(this,a,l):null,h=Ht._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(i,e),d(this,Ln).set(s,i),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=Xt(Ht,nv)._++,s=j(this,Vi,KS).call(this),i=Ht._svgFactory.createElement("defs");s.append(i);const a=Ht._svgFactory.createElement("path");i.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=Ht._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${r}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const p=Ht._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=Ht._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=Ht._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),d(this,Ln).set(r,s),r}finalizeDraw(e,t){d(this,Su).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:s,rootClass:i,path:a}=t,o=typeof e=="number"?d(this,Ln).get(e):e;if(o){if(r&&j(this,Vi,XS).call(this,o,r),s&&j(l=Ht,Dx,WL).call(l,o,s),i){const{classList:u}=o;for(const[h,f]of Object.entries(i))u.toggle(h,f)}if(a){const h=o.firstChild.firstChild;j(this,Vi,XS).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const r=d(this,Ln).get(e);r&&(d(t,Ms).append(r),d(this,Ln).delete(e),d(t,Ln).set(e,r))}remove(e){d(this,Su).delete(e),d(this,Ms)!==null&&(d(this,Ln).get(e).remove(),d(this,Ln).delete(e))}destroy(){S(this,Ms,null);for(const e of d(this,Ln).values())e.remove();d(this,Ln).clear(),d(this,Su).clear()}};Ms=new WeakMap,Ln=new WeakMap,Su=new WeakMap,nv=new WeakMap,Dx=new WeakSet,WL=function(e,[t,r,s,i]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},Vi=new WeakSet,KS=function(){const e=Ht._svgFactory.create(1,1,!0);return d(this,Ms).append(e),e.setAttribute("aria-hidden",!0),e},VL=function(e,t){const r=Ht._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Ht._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},XS=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},k(Ht,Dx),k(Ht,nv,0);let YS=Ht;globalThis._pdfjsTestingUtils={HighlightOutliner:kS};globalThis.pdfjsLib={AbortException:Ml,AnnotationEditorLayer:VS,AnnotationEditorParamsType:Ie,AnnotationEditorType:ve,AnnotationEditorUIManager:Bu,AnnotationLayer:SS,AnnotationMode:_o,AnnotationType:It,build:z7,ColorPicker:ox,createValidAbsoluteUrl:FD,DOMSVGFactory:cx,DrawLayer:YS,FeatureTest:yn,fetchData:Cv,getDocument:UO,getFilenameFromUrl:Mq,getPdfFilenameFromUrl:Iq,getRGB:Pw,getUuid:zD,getXfaPageViewport:Oq,GlobalWorkerOptions:Ti,ImageKind:By,InvalidPDFException:I_,isDataScheme:jw,isPdfFile:HA,isValidExplicitDest:qq,MathClamp:$n,noContextMenu:os,normalizeUnicode:Pq,OPS:nx,OutputScale:Hi,PasswordResponses:bq,PDFDataRangeTransport:HO,PDFDateString:sx,PDFWorker:Em,PermissionFlag:wq,PixelsPerInch:Il,RenderingCancelledException:UA,ResponseException:rx,setLayerDimensions:$u,shadow:ke,SignatureExtractor:Ba,stopEvent:Dt,SupportedImageMimeTypes:O_,TextLayer:_m,TouchManager:ax,updateUrlHash:$D,Util:ue,VerbosityLevel:Cw,version:B7,XfaLayer:qO};Ti.workerSrc="";const u9=()=>{const[n,e]=_.useState(!1),t=async a=>{try{const o=await a.arrayBuffer(),u=await UO(o).promise;let h="";for(let f=1;f<=u.numPages;f++){const y=(await(await u.getPage(f)).getTextContent()).items.map(g=>g.str??"").join(" ");h+=y+`
`}return h}catch(o){throw console.error("PDF extraction error:",o),new Error("Failed to extract text from PDF")}},r=a=>{const o=a.split(`
`).map(m=>m.trim()).filter(Boolean),l=[];let u="";const h=m=>/^(Basis|Modul)\s+.+$/i.test(m),f=m=>/^\d+$/.test(m);let p=0;for(;p<o.length;){const m=o[p];if(m.startsWith("Stand:")||/SIWF|Seite\s+\d+|Erfasste Prozeduren/i.test(m)){p++;continue}if(h(m)){u=m,p++;continue}if(u&&!f(m)){const y=m,g=[];let w=p+1;for(;w<o.length&&w<p+10;){const v=o[w];if(f(v)){g.push(parseInt(v)),w++;continue}if(h(v)||!f(v))break;w++}if(g.length>0){const v=g[0]||0,x=g[1]||0,b=g[2]||0,E=g[3]||0,A=g[4]||x+b+E;l.push({proc_name:y,module_name:u,minimum:v,responsible:x,instructing:b,assistant:E,total:A}),p=w;continue}}p++}return l},s=async a=>{const{data:{user:o}}=await se.auth.getUser();if(!o)throw new Error("Not authenticated");const{data:l,error:u}=await se.from("import_runs").insert({user_id:o.id,pdf_filename:a,source:"client_ai_parse",status:"running"}).select().single();if(u)throw u;return l};return{processFile:async a=>{e(!0);try{const o=await t(a),l=r(o),u=await s(a.name),h=l.map(f=>se.from("import_procedure_staging").insert({run_id:u.id,proc_name:f.proc_name,module_name:f.module_name,minimum:f.minimum,responsible:f.responsible,instructing:f.instructing,assistant:f.assistant,total:f.total,status:"pending"}));return await Promise.all(h),{success:!0,runId:u.id,summary:{filename:a.name,totalProcedures:l.length,modules:[],matched:0,needsReview:l.length},stagingData:l}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Processing failed"}}finally{e(!1)}},isProcessing:n}},d9=({open:n,onOpenChange:e,onSuccess:t})=>{const[r,s]=_.useState(!1),[i,a]=_.useState(0),[o,l]=_.useState(null),[u,h]=_.useState(!1),[f,p]=_.useState(!1),{toast:m}=Jx(),{processFile:y,isProcessing:g}=u9(),w=P=>{P.preventDefault(),P.stopPropagation(),P.type==="dragenter"||P.type==="dragover"?h(!0):P.type==="dragleave"&&h(!1)},v=P=>{P.preventDefault(),P.stopPropagation(),h(!1),P.dataTransfer.files&&P.dataTransfer.files[0]&&b(P.dataTransfer.files[0])},x=P=>{P.target.files&&P.target.files[0]&&b(P.target.files[0])},b=async P=>{if(P.type!=="application/pdf"){m({title:"Ungültiger Dateityp",description:"Bitte wählen Sie eine PDF-Datei aus.",variant:"destructive"});return}s(!0),a(0),l(null);try{const T=setInterval(()=>{a(I=>I<90?I+15:90)},200),M=await y(P);clearInterval(T),a(100),l(M),M.success&&M.summary?(p(!0),m({title:"PDF erfolgreich analysiert (AI)",description:`${M.summary.totalProcedures} Prozeduren erkannt.`})):m({title:"Fehler beim Verarbeiten",description:M.error||"Unbekannter Fehler",variant:"destructive"})}catch(T){m({title:"Verarbeitung fehlgeschlagen",description:T instanceof Error?T.message:"Unbekannter Fehler",variant:"destructive"})}finally{s(!1)}},E=()=>{a(0),l(null),s(!1),p(!1)},A=()=>{E(),e(!1)},C=()=>{p(!1),E()},N=()=>{t==null||t(),A()};return f&&(o!=null&&o.success)&&o.runId&&o.summary&&o.stagingData?c.jsx(xq,{runId:o.runId,summary:o.summary,stagingData:o.stagingData,onClose:C,onImportComplete:N}):c.jsx(Sw,{open:n,onOpenChange:A,children:c.jsxs(wv,{className:"sm:max-w-md",children:[c.jsx(bv,{children:c.jsxs(_v,{className:"flex items-center gap-2",children:[c.jsx(Lf,{className:"h-5 w-5"}),"FMH eLogbuch PDF Upload"]})}),c.jsxs("div",{className:"space-y-4",children:[!o&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`
                  border-2 border-dashed rounded-lg p-8 text-center transition-colors
                  ${u?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}
                  ${r?"pointer-events-none opacity-50":"cursor-pointer"}
                `,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:v,onClick:()=>{var P;r||(P=document.getElementById("pdf-upload"))==null||P.click()},children:[c.jsx(tw,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("p",{className:"text-sm font-medium mb-2",children:"PDF hier ablegen oder klicken zum Auswählen"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützt: FMH eLogbuch PDF-Exporte"}),c.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",className:"hidden",onChange:x,disabled:r})]}),r&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"PDF wird verarbeitet..."}),c.jsxs("span",{children:[i,"%"]})]}),c.jsx(Nf,{value:i,className:"w-full"})]})]}),o&&!o.success&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive border border-destructive/20",children:[c.jsx(f5,{className:"h-5 w-5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Fehler beim Verarbeiten"}),c.jsx("p",{className:"mt-1 text-sm",children:o.error})]})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(J,{variant:"outline",onClick:E,children:"Erneut versuchen"}),c.jsx(J,{onClick:A,children:"Schließen"})]})]})]})]})})};function h9(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var QA="ScrollArea",[GL,fQ]=Ks(QA),[f9,cs]=GL(QA),qL=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=n,[o,l]=_.useState(null),[u,h]=_.useState(null),[f,p]=_.useState(null),[m,y]=_.useState(null),[g,w]=_.useState(null),[v,x]=_.useState(0),[b,E]=_.useState(0),[A,C]=_.useState(!1),[N,P]=_.useState(!1),T=He(e,I=>l(I)),M=uw(s);return c.jsx(f9,{scope:t,type:r,dir:M,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:h,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:A,onScrollbarXEnabledChange:C,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:N,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:E,children:c.jsx(oe.div,{dir:M,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":b+"px",...n.style}})})});qL.displayName=QA;var YL="ScrollAreaViewport",KL=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,a=cs(YL,t),o=_.useRef(null),l=He(e,o,a.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(oe.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:c.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});KL.displayName=YL;var Yi="ScrollAreaScrollbar",JA=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=cs(Yi,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,o=n.orientation==="horizontal";return _.useEffect(()=>(o?i(!0):a(!0),()=>{o?i(!1):a(!1)}),[o,i,a]),s.type==="hover"?c.jsx(p9,{...r,ref:e,forceMount:t}):s.type==="scroll"?c.jsx(m9,{...r,ref:e,forceMount:t}):s.type==="auto"?c.jsx(XL,{...r,ref:e,forceMount:t}):s.type==="always"?c.jsx(ZA,{...r,ref:e}):null});JA.displayName=Yi;var p9=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=cs(Yi,n.__scopeScrollArea),[i,a]=_.useState(!1);return _.useEffect(()=>{const o=s.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),a(!0)},h=()=>{l=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",h),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(ls,{present:t||i,children:c.jsx(XL,{"data-state":i?"visible":"hidden",...r,ref:e})})}),m9=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=cs(Yi,n.__scopeScrollArea),i=n.orientation==="horizontal",a=Iw(()=>l("SCROLL_END"),100),[o,l]=h9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,s.scrollHideDelay,l]),_.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const p=()=>{const m=u[h];f!==m&&(l("SCROLL"),a()),f=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,l,a]),c.jsx(ls,{present:t||o!=="hidden",children:c.jsx(ZA,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:de(n.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:de(n.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),XL=_.forwardRef((n,e)=>{const t=cs(Yi,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,a]=_.useState(!1),o=n.orientation==="horizontal",l=Iw(()=>{if(t.viewport){const u=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;a(o?u:h)}},10);return Rf(t.viewport,l),Rf(t.content,l),c.jsx(ls,{present:r||i,children:c.jsx(ZA,{"data-state":i?"visible":"hidden",...s,ref:e})})}),ZA=_.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=cs(Yi,n.__scopeScrollArea),i=_.useRef(null),a=_.useRef(0),[o,l]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=tF(o.viewport,o.content),h={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function f(p,m){return b9(p,a.current,o,m)}return t==="horizontal"?c.jsx(g9,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,m=Ej(p,o,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):t==="vertical"?c.jsx(v9,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,m=Ej(p,o);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),g9=_.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=cs(Yi,n.__scopeScrollArea),[a,o]=_.useState(),l=_.useRef(null),u=He(e,l,i.onScrollbarXChange);return _.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(JL,{"data-orientation":"horizontal",...s,ref:u,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Mw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;n.onWheelScroll(p),rF(p,f)&&h.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:px(a.paddingLeft),paddingEnd:px(a.paddingRight)}})}})}),v9=_.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=cs(Yi,n.__scopeScrollArea),[a,o]=_.useState(),l=_.useRef(null),u=He(e,l,i.onScrollbarYChange);return _.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(JL,{"data-orientation":"vertical",...s,ref:u,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Mw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;n.onWheelScroll(p),rF(p,f)&&h.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:px(a.paddingTop),paddingEnd:px(a.paddingBottom)}})}})}),[y9,QL]=GL(Yi),JL=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:h,onResize:f,...p}=n,m=cs(Yi,t),[y,g]=_.useState(null),w=He(e,T=>g(T)),v=_.useRef(null),x=_.useRef(""),b=m.viewport,E=r.content-r.viewport,A=Lt(h),C=Lt(l),N=Iw(f,10);function P(T){if(v.current){const M=T.clientX-v.current.left,I=T.clientY-v.current.top;u({x:M,y:I})}}return _.useEffect(()=>{const T=M=>{const I=M.target;(y==null?void 0:y.contains(I))&&A(M,E)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[b,y,E,A]),_.useEffect(C,[r,C]),Rf(y,N),Rf(m.content,N),c.jsx(y9,{scope:t,scrollbar:y,hasThumb:s,onThumbChange:Lt(i),onThumbPointerUp:Lt(a),onThumbPositionChange:C,onThumbPointerDown:Lt(o),children:c.jsx(oe.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:de(n.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),v.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(T))}),onPointerMove:de(n.onPointerMove,P),onPointerUp:de(n.onPointerUp,T=>{const M=T.target;M.hasPointerCapture(T.pointerId)&&M.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),fx="ScrollAreaThumb",ZL=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=QL(fx,n.__scopeScrollArea);return c.jsx(ls,{present:t||s.hasThumb,children:c.jsx(x9,{ref:e,...r})})}),x9=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=cs(fx,t),a=QL(fx,t),{onThumbPositionChange:o}=a,l=He(e,f=>a.onThumbChange(f)),u=_.useRef(void 0),h=Iw(()=>{u.current&&(u.current(),u.current=void 0)},100);return _.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(h(),!u.current){const m=_9(f,o);u.current=m,o()}};return o(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,h,o]),c.jsx(oe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:de(n.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),y=f.clientX-m.left,g=f.clientY-m.top;a.onThumbPointerDown({x:y,y:g})}),onPointerUp:de(n.onPointerUp,a.onThumbPointerUp)})});ZL.displayName=fx;var eC="ScrollAreaCorner",eF=_.forwardRef((n,e)=>{const t=cs(eC,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?c.jsx(w9,{...n,ref:e}):null});eF.displayName=eC;var w9=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=cs(eC,t),[i,a]=_.useState(0),[o,l]=_.useState(0),u=!!(i&&o);return Rf(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),l(h)}),Rf(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),u?c.jsx(oe.div,{...r,ref:e,style:{width:i,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function px(n){return n?parseInt(n,10):0}function tF(n,e){const t=n/e;return isNaN(t)?0:t}function Mw(n){const e=tF(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function b9(n,e,t,r="ltr"){const s=Mw(t),i=s/2,a=e||i,o=s-a,l=t.scrollbar.paddingStart+a,u=t.scrollbar.size-t.scrollbar.paddingEnd-o,h=t.content-t.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return nF([l,u],f)(n)}function Ej(n,e,t="ltr"){const r=Mw(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,o=i-r,l=t==="ltr"?[0,a]:[a*-1,0],u=b_(n,l);return nF([0,a],[0,o])(u)}function nF(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function rF(n,e){return n>0&&n<e}var _9=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},a=t.left!==i.left,o=t.top!==i.top;(a||o)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Iw(n,e){const t=Lt(n),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Rf(n,e){const t=Lt(e);Tt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var sF=qL,S9=KL,E9=eF;const iF=_.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(sF,{ref:r,className:ee("relative overflow-hidden",n),...t,children:[c.jsx(S9,{className:"h-full w-full rounded-[inherit]",children:e}),c.jsx(aF,{}),c.jsx(E9,{})]}));iF.displayName=sF.displayName;const aF=_.forwardRef(({className:n,orientation:e="vertical",...t},r)=>c.jsx(JA,{ref:r,orientation:e,className:ee("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:c.jsx(ZL,{className:"relative flex-1 rounded-full bg-border"})}));aF.displayName=JA.displayName;const A9=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:r}=gv(),[s,i]=_.useState({}),[a,o]=_.useState({});_.useState(new Date().toLocaleDateString("de-CH"));const[l,u]=_.useState({name:"Sami Zacharia Hosari",id:"175214",institution:"USZ"}),[h,f]=_.useState(!1),[p,m]=_.useState(!1),[y,g]=_.useState([]),[w,v]=_.useState(5),x=_.useCallback(async()=>{m(!0);try{if(r){const{data:I}=await se.from("profiles").select("pgy_level").eq("user_id",r.id).single();I!=null&&I.pgy_level&&v(I.pgy_level)}const{data:C,error:N}=await se.from("procedure_categories").select("*").in("key",["basis_notfallchirurgie","basis_allgemeinchirurgie","viszeralchirurgie","traumatologie","kombination"]).order("sort_index"),{data:P,error:T}=await se.from("procedures").select("*").eq("active",!0).order("code");if(T){console.error("Error loading procedures:",T),De.error("Fehler beim Laden der Prozeduren");return}g(P||[]);const M={};C==null||C.forEach(I=>{const R=(P==null?void 0:P.filter(F=>F.category_id===I.id))||[];M[I.key]={id:I.id,key:I.key,title:I.title_de,totalMinimum:I.minimum_required||0,totalCount:0,procedures:R.map(F=>{var O;return{id:F.id,name:F.title_de,minimum:((O=F.min_required_by_pgy)==null?void 0:O[`pgy${w}`])||0,verantwortlich:0,instruierend:0,assistent:0,total:0}})}}),i(M),o(M),r&&await b(M)}catch(C){console.error("Error loading modules and procedures:",C),De.error("Fehler beim Laden der Daten")}finally{m(!1)}},[r,w,b]);_.useEffect(()=>{n&&x()},[n,x]),_.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[n]),_.useEffect(()=>{if(r){const{user_metadata:C}=r;C!=null&&C.full_name&&u(N=>({...N,name:C.full_name,institution:C.institution||"USZ"}))}},[r]);const b=_.useCallback(async C=>{if(r)try{console.log("🔍 FMHManualEntry - Loading data for user ID:",r.id);const{data:N,error:P}=await se.from("procedure_logs").select(`
          id,
          procedure_id,
          role_in_surgery,
          performed_date
        `).eq("user_id",r.id).gte("performed_date",new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0]);if(P){console.error("Error loading existing data:",P);return}console.log("📊 FMHManualEntry - Loaded",(N==null?void 0:N.length)||0,"procedure logs for user",r.id);const T={};N==null||N.forEach(R=>{T[R.procedure_id]||(T[R.procedure_id]={verantwortlich:0,instruierend:0,assistent:0}),R.role_in_surgery==="responsible"?T[R.procedure_id].verantwortlich++:R.role_in_surgery==="instructing"?T[R.procedure_id].instruierend++:R.role_in_surgery==="assistant"&&T[R.procedure_id].assistent++});const M={...C},I={...C};Object.keys(M).forEach(R=>{M[R].procedures.forEach((F,O)=>{const V=T[F.id];if(V){const B={...F,verantwortlich:V.verantwortlich,instruierend:V.instruierend,assistent:V.assistent,total:V.verantwortlich+V.instruierend+V.assistent};M[R].procedures[O]=B,I[R].procedures[O]={...B},console.log(`✅ Loaded counts for "${F.name}" - V:${V.verantwortlich} I:${V.instruierend} A:${V.assistent}`)}}),M[R].totalCount=M[R].procedures.reduce((F,O)=>F+O.total,0),I[R].totalCount=I[R].procedures.reduce((F,O)=>F+O.total,0)}),o(M),i(I),console.log("✅ Form initialized with existing data")}catch(N){console.error("Error loading existing procedure data:",N)}},[r]),E=(C,N,P,T)=>{i(M=>{const I={...M},R={...I[C].procedures[N]};return R[P]=Math.max(0,T),R.total=R.verantwortlich+R.instruierend+R.assistent,I[C]={...I[C],procedures:[...I[C].procedures.slice(0,N),R,...I[C].procedures.slice(N+1)]},I[C].totalCount=I[C].procedures.reduce((F,O)=>F+O.total,0),I})},A=async()=>{if(!r){De.error("Sie müssen angemeldet sein um Daten zu speichern");return}f(!0),console.log("🚀 Starting procedure save process..."),console.log("💾 FMHManualEntry - Saving data for user ID:",r.id);try{const C=[],N=[],P=[],T=[];for(const[I,R]of Object.entries(s)){console.log(`📋 Processing module: ${R.title}`);for(let F=0;F<R.procedures.length;F++){const O=R.procedures[F],V=a[I].procedures[F],B=O.verantwortlich-V.verantwortlich,L=O.instruierend-V.instruierend,D=O.assistent-V.assistent;if(B===0&&L===0&&D===0)continue;console.log(`📝 Processing procedure: "${O.name}" (Changes: V:${B} I:${L} A:${D})`);const z=O.id;if(!z){console.warn(`❌ No procedure ID for: ${O.name}`),P.push(O.name);continue}if(T.push(O.name),B>0)for(let H=0;H<B;H++)C.push({user_id:r.id,procedure_id:z,role_in_surgery:"responsible",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${R.title}`});if(L>0)for(let H=0;H<L;H++)C.push({user_id:r.id,procedure_id:z,role_in_surgery:"instructing",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${R.title}`});if(D>0)for(let H=0;H<D;H++)C.push({user_id:r.id,procedure_id:z,role_in_surgery:"assistant",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${R.title}`});if(B<0){const{data:H}=await se.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",z).eq("role_in_surgery","responsible").order("created_at",{ascending:!1}).limit(Math.abs(B));H&&N.push(...H.map(Z=>Z.id))}if(L<0){const{data:H}=await se.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",z).eq("role_in_surgery","instructing").order("created_at",{ascending:!1}).limit(Math.abs(L));H&&N.push(...H.map(Z=>Z.id))}if(D<0){const{data:H}=await se.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",z).eq("role_in_surgery","assistant").order("created_at",{ascending:!1}).limit(Math.abs(D));H&&N.push(...H.map(Z=>Z.id))}}}console.log(`📊 Summary: ${C.length} logs to insert, ${N.length} logs to delete`),console.log(`✅ Successful procedures: ${T.length}`,T),P.length>0&&console.log(`❌ Failed procedures: ${P.length}`,P);let M=0;if(C.length>0){console.log("💾 Inserting procedure logs into database...");const{error:I}=await se.from("procedure_logs").insert(C);if(I)throw console.error("❌ Database insertion error:",I),I;M+=C.length,console.log(`✅ Successfully inserted ${C.length} procedure logs`)}if(N.length>0){console.log("🗑️ Deleting procedure logs from database...");const{error:I}=await se.from("procedure_logs").delete().in("id",N);if(I)throw console.error("❌ Database deletion error:",I),I;M+=N.length,console.log(`✅ Successfully deleted ${N.length} procedure logs`)}if(M>0){let I=`${M} Änderungen erfolgreich gespeichert`;P.length>0&&(I+=`. ${P.length} Prozeduren konnten nicht verarbeitet werden.`),De.success(I),o({...s}),console.log("🔄 Refreshing FMH progress..."),t==null||t(),e(!1)}else console.log("⚠️ No changes to save"),De.warning("Keine Änderungen zum Speichern gefunden")}catch(C){console.error("❌ Error saving procedures:",C);const N=(C==null?void 0:C.message)||(C==null?void 0:C.toString())||"Unbekannter Fehler";De.error(`Fehler beim Speichern der Prozeduren: ${N}`)}finally{f(!1),console.log("🏁 Save process completed")}};return n?c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Lf,{className:"h-6 w-6 text-blue-600"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"FMH Operationsstatistik"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manuelle Eingabe der Operationen"})]})]}),c.jsx(J,{variant:"ghost",size:"sm",onClick:()=>e(!1),className:"h-8 w-8 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:c.jsx(zl,{className:"h-4 w-4"})})]}),p?c.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(X1,{className:"h-5 w-5 animate-spin text-blue-600"}),c.jsx("span",{className:"text-gray-700",children:"Module und Prozeduren werden geladen..."})]})}):Object.keys(s).length===0?c.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:c.jsx("p",{className:"text-gray-600",children:"Keine Module gefunden"})}):c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[c.jsx("div",{className:"flex-1 flex flex-col p-6 overflow-hidden bg-white",children:c.jsxs(no,{defaultValue:Object.keys(s)[0],className:"flex-1 flex flex-col",children:[c.jsx(Gi,{className:"flex w-full mb-6 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:Object.entries(s).map(([C,N])=>c.jsx(mt,{value:C,className:"flex-shrink-0 whitespace-nowrap px-4 py-2 data-[state=active]:bg-white data-[state=active]:text-gray-900 text-gray-600 hover:text-gray-900 text-sm",children:N.title},C))}),Object.entries(s).map(([C,N])=>c.jsx(Ct,{value:C,className:"flex-1 flex flex-col mt-0 overflow-hidden",children:c.jsxs(ae,{className:"flex-1 flex flex-col bg-white border border-gray-200 shadow-sm overflow-hidden",children:[c.jsx(pt,{className:"flex-shrink-0 bg-gray-50 border-b border-gray-200 p-4",children:c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[c.jsx(wt,{className:"text-lg text-gray-900",children:N.title}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs(me,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",children:["Minimum: ",N.totalMinimum]}),c.jsxs(me,{variant:N.totalCount>=N.totalMinimum?"default":"outline",className:"bg-green-100 text-green-800 border-green-200",children:["Total: ",N.totalCount]})]})]})}),c.jsx(ze,{className:"flex-1 p-0 bg-white overflow-hidden",children:c.jsx(iF,{className:"h-[400px]",children:c.jsxs("table",{className:"w-full min-w-[800px]",children:[c.jsx("thead",{className:"sticky top-0 border-b border-gray-200 bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left p-3 font-medium text-gray-700 min-w-[250px]",children:"Prozedur"}),c.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Min"}),c.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Verantwortlich"}),c.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Instruierend"}),c.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Assistent"}),c.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white",children:N.procedures.map((P,T)=>{var M,I;return c.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"p-3",children:[c.jsx("div",{className:"font-medium text-gray-900 text-sm",children:P.name}),((I=(M=a[C])==null?void 0:M.procedures[T])==null?void 0:I.total)>0&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Gespeichert: V:",a[C].procedures[T].verantwortlich," I:",a[C].procedures[T].instruierend," A:",a[C].procedures[T].assistent]})]}),c.jsx("td",{className:"text-center p-3",children:c.jsx(me,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:P.minimum})}),c.jsx("td",{className:"text-center p-3",children:c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>E(C,T,"verantwortlich",P.verantwortlich-1),children:c.jsx(pb,{className:"w-3 h-3"})}),c.jsx(Ze,{type:"number",min:"0",value:P.verantwortlich,onChange:R=>E(C,T,"verantwortlich",parseInt(R.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),c.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>E(C,T,"verantwortlich",P.verantwortlich+1),children:c.jsx(Vd,{className:"w-3 h-3"})})]})}),c.jsx("td",{className:"text-center p-3",children:c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>E(C,T,"instruierend",P.instruierend-1),children:c.jsx(pb,{className:"w-3 h-3"})}),c.jsx(Ze,{type:"number",min:"0",value:P.instruierend,onChange:R=>E(C,T,"instruierend",parseInt(R.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),c.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>E(C,T,"instruierend",P.instruierend+1),children:c.jsx(Vd,{className:"w-3 h-3"})})]})}),c.jsx("td",{className:"text-center p-3",children:c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>E(C,T,"assistent",P.assistent-1),children:c.jsx(pb,{className:"w-3 h-3"})}),c.jsx(Ze,{type:"number",min:"0",value:P.assistent,onChange:R=>E(C,T,"assistent",parseInt(R.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),c.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>E(C,T,"assistent",P.assistent+1),children:c.jsx(Vd,{className:"w-3 h-3"})})]})}),c.jsx("td",{className:"text-center p-3",children:c.jsx(me,{variant:P.total>=P.minimum?"default":"secondary",className:"font-medium text-xs bg-green-100 text-green-800 border-green-200",children:P.total})})]},P.id)})})]})})})]})},C))]})}),c.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4 bg-gray-50",children:c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[c.jsxs("div",{className:"text-sm text-gray-600",children:["Gesamtanzahl Eingriffe: ",Object.values(s).reduce((C,N)=>C+N.totalCount,0)]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(J,{variant:"outline",onClick:()=>e(!1),disabled:h,className:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400",children:"Abbrechen"}),c.jsxs(J,{onClick:A,disabled:h||Object.values(s).every(C=>C.totalCount===0),className:"gap-2 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400",children:[c.jsx(tA,{className:"w-4 h-4"}),h?"Speichere...":"Prozeduren speichern"]})]})]})})]})]})}):null},C9=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:r}=gv(),[s,i]=_.useState([]),[a,o]=_.useState(!1),[l,u]=_.useState(null),[h,f]=_.useState({}),p=_.useCallback(async()=>{if(r){o(!0);try{const{data:E,error:A}=await se.from("procedure_logs").select(`
          id,
          performed_date,
          procedure_id,
          role_in_surgery,
          weighted_score,
          notes,
          hospital,
          supervisor,
          procedures (
            title_de,
            category_id,
            procedure_categories (
              key,
              title_de
            )
          )
        `).eq("user_id",r.id).order("performed_date",{ascending:!1});if(A)throw A;const C=(E||[]).map(N=>{var P,T,M,I,R;return{id:N.id,performed_date:N.performed_date,procedure_id:N.procedure_id,procedure_title:((P=N.procedures)==null?void 0:P.title_de)||"Unknown Procedure",category_key:((M=(T=N.procedures)==null?void 0:T.procedure_categories)==null?void 0:M.key)||"unknown",category_title:((R=(I=N.procedures)==null?void 0:I.procedure_categories)==null?void 0:R.title_de)||"Unknown Category",role_in_surgery:N.role_in_surgery||"responsible",weighted_score:N.weighted_score||1,notes:N.notes,hospital:N.hospital,supervisor:N.supervisor}});i(C)}catch(E){console.error("Error loading procedure logs:",E),De.error("Fehler beim Laden der Prozedur-Logs")}finally{o(!1)}}},[r]);_.useEffect(()=>{n&&r&&p()},[n,r,p]);const m=E=>{u(E.id),f({performed_date:E.performed_date,role_in_surgery:E.role_in_surgery,notes:E.notes,hospital:E.hospital,supervisor:E.supervisor})},y=async E=>{try{const{error:A}=await se.from("procedure_logs").update({performed_date:h.performed_date,role_in_surgery:h.role_in_surgery,notes:h.notes,hospital:h.hospital,supervisor:h.supervisor}).eq("id",E);if(A)throw A;u(null),f({}),await p(),De.success("Eintrag erfolgreich aktualisiert")}catch(A){console.error("Error updating log:",A),De.error("Fehler beim Aktualisieren des Eintrags")}},g=async E=>{if(confirm("Sind Sie sicher, dass Sie diesen Eintrag löschen möchten?"))try{const{error:A}=await se.from("procedure_logs").delete().eq("id",E);if(A)throw A;await p(),De.success("Eintrag erfolgreich gelöscht"),t&&t()}catch(A){console.error("Error deleting log:",A),De.error("Fehler beim Löschen des Eintrags")}},w=()=>{u(null),f({})},v=s.reduce((E,A)=>{const C=A.category_title;return E[C]||(E[C]=[]),E[C].push(A),E},{}),x=E=>({responsible:"Verantwortlich",instructing:"Instruierend",assistant:"Assistent"})[E]||E,b=E=>({responsible:"default",instructing:"secondary",assistant:"outline"})[E]||"outline";return c.jsx(Sw,{open:n,onOpenChange:e,children:c.jsxs(wv,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsx(bv,{children:c.jsx(_v,{children:"Prozedur-Korrekturen"})}),c.jsx("div",{className:"flex-1 overflow-hidden",children:a?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):c.jsxs(no,{defaultValue:Object.keys(v)[0],className:"h-full flex flex-col",children:[c.jsx(Gi,{className:"grid w-full grid-cols-5",children:Object.keys(v).map(E=>c.jsxs(mt,{value:E,className:"text-xs",children:[E.replace("Basis ","").replace("Modul ",""),c.jsx(me,{variant:"secondary",className:"ml-1",children:v[E].length})]},E))}),Object.entries(v).map(([E,A])=>c.jsx(Ct,{value:E,className:"flex-1 overflow-hidden",children:c.jsx("div",{className:"overflow-auto h-full",children:c.jsxs(kf,{children:[c.jsx(jf,{children:c.jsxs($s,{children:[c.jsx(Re,{children:"Datum"}),c.jsx(Re,{children:"Prozedur"}),c.jsx(Re,{children:"Rolle"}),c.jsx(Re,{children:"Score"}),c.jsx(Re,{children:"Spital"}),c.jsx(Re,{children:"Supervisor"}),c.jsx(Re,{children:"Notizen"}),c.jsx(Re,{children:"Aktionen"})]})}),c.jsx(Pf,{children:A.map(C=>c.jsxs($s,{children:[c.jsx(Me,{children:l===C.id?c.jsx(Ze,{type:"date",value:h.performed_date,onChange:N=>f(P=>({...P,performed_date:N.target.value})),className:"w-32"}):new Date(C.performed_date).toLocaleDateString("de-CH")}),c.jsx(Me,{className:"max-w-48",children:c.jsx("div",{className:"truncate",title:C.procedure_title,children:C.procedure_title})}),c.jsx(Me,{children:l===C.id?c.jsxs("select",{value:h.role_in_surgery,onChange:N=>f(P=>({...P,role_in_surgery:N.target.value})),className:"border rounded px-2 py-1",children:[c.jsx("option",{value:"responsible",children:"Verantwortlich"}),c.jsx("option",{value:"instructing",children:"Instruierend"}),c.jsx("option",{value:"assistant",children:"Assistent"})]}):c.jsx(me,{variant:b(C.role_in_surgery),children:x(C.role_in_surgery)})}),c.jsx(Me,{children:C.weighted_score}),c.jsx(Me,{children:l===C.id?c.jsx(Ze,{value:h.hospital||"",onChange:N=>f(P=>({...P,hospital:N.target.value})),className:"w-24"}):C.hospital||"-"}),c.jsx(Me,{children:l===C.id?c.jsx(Ze,{value:h.supervisor||"",onChange:N=>f(P=>({...P,supervisor:N.target.value})),className:"w-24"}):C.supervisor||"-"}),c.jsx(Me,{children:l===C.id?c.jsx(Ze,{value:h.notes||"",onChange:N=>f(P=>({...P,notes:N.target.value})),className:"w-32"}):c.jsx("div",{className:"max-w-32 truncate",title:C.notes,children:C.notes||"-"})}),c.jsx(Me,{children:c.jsx("div",{className:"flex gap-1",children:l===C.id?c.jsxs(c.Fragment,{children:[c.jsx(J,{size:"sm",onClick:()=>y(C.id),children:c.jsx(tA,{className:"h-3 w-3"})}),c.jsx(J,{size:"sm",variant:"outline",onClick:w,children:c.jsx(zl,{className:"h-3 w-3"})})]}):c.jsxs(c.Fragment,{children:[c.jsx(J,{size:"sm",variant:"outline",onClick:()=>m(C),children:c.jsx(rA,{className:"h-3 w-3"})}),c.jsx(J,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>g(C.id),children:c.jsx(BR,{className:"h-3 w-3"})})]})})})]},C.id))})]})})},E))]})}),c.jsx("div",{className:"border-t pt-4 flex justify-end gap-2",children:c.jsx(J,{variant:"outline",onClick:()=>e(!1),children:"Schließen"})})]})})},N9=()=>{const{user:n,loading:e}=gv(),t=qu(),[r,s]=_.useState([]),[i,a]=_.useState(null),[o,l]=_.useState(!0),[u,h]=_.useState(!1),[f,p]=_.useState(!1),[m,y]=_.useState(!1),[g,w]=_.useState(!1),[v,x]=_.useState(4);_.useEffect(()=>{if(!e&&!n){t("/auth");return}n&&b()},[n,e,t]);const b=async()=>{try{l(!0);const{data:{user:N}}=await se.auth.getUser();if(console.log("🔍 FMHDashboard - Loading data for user ID:",N==null?void 0:N.id),N){const{data:I}=await se.from("profiles").select("pgy_level").eq("user_id",N.id).single();I!=null&&I.pgy_level&&x(I.pgy_level)}const{data:P,error:T}=await se.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");if(T)throw T;const M=[];for(const I of P||[])if(N){console.log("📊 FMHDashboard - Getting progress for module:",I.key,"user:",N.id);const{data:R}=await se.rpc("get_module_progress",{user_id_param:N.id,module_key:I.key});console.log("📈 Progress data for",I.key,":",R),console.log("🔍 Module data:",{key:I.key,title:I.title_de,minimum_required:I.minimum_required,progress_raw:R});let F=null;if(R&&R.length>0){const O=R[0];Array.isArray(O)&&O.length>=7?F={module_name:O[0],total_weighted_score:O[1],total_minimum:O[2],progress_percentage:O[3],responsible_count:O[4],instructing_count:O[5],assistant_count:O[6]}:typeof O=="object"&&O!==null&&(F=O)}M.push({...I,progress:F})}else M.push({...I,progress:null});s(M)}catch(N){console.error("Error loading modules:",N)}finally{l(!1)}},E=N=>({basis_notfallchirurgie:"coral",basis_allgemeinchirurgie:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[N]||"mint",C=(()=>{const N=r.reduce((M,I)=>{var R;return M+(((R=I.progress)==null?void 0:R.responsible_count)||0)},0),P=r.reduce((M,I)=>{var R,F,O;return M+(((R=I.progress)==null?void 0:R.responsible_count)||0)+(((F=I.progress)==null?void 0:F.instructing_count)||0)+(((O=I.progress)==null?void 0:O.assistant_count)||0)},0),T=P>0?N/P*100:0;return T>=30?{status:"good",color:"bg-green-500"}:T>=20?{status:"warning",color:"bg-yellow-500"}:{status:"critical",color:"bg-red-500"}})();return o?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsx("main",{className:"container mx-auto px-4 py-8",children:c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsxs("main",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-medical-title text-card-foreground mb-2",children:"FMH Chirurgie Tracking"}),c.jsxs("p",{className:"text-medical-subtitle",children:["Überwachung Ihres FMH-konformen Ausbildungsfortschritts - PGY ",v]}),n&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Debug: User ID: ",n.id," | Email: ",n.email]})]}),c.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[c.jsxs(J,{variant:"default",size:"sm",className:"gap-2",onClick:()=>h(!0),children:[c.jsx(Vd,{className:"w-4 h-4"}),"Prozedur erfassen"]}),c.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>y(!0),children:[c.jsx(Lf,{className:"w-4 h-4"}),"Manual eingabe"]}),c.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>p(!0),children:[c.jsx(tw,{className:"w-4 h-4"}),"PDF Upload"]}),c.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(LR,{className:"w-4 h-4"}),"Export"]}),c.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>w(!0),children:[c.jsx(ew,{className:"w-4 h-4"}),"Korrekturen"]})]})]}),c.jsxs("div",{className:"medical-card-elegant p-8 mb-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-2",children:"FMH Module Progress"}),c.jsx("p",{className:"text-text-secondary",children:"Gewichtete Erfüllung der FMH-Mindestanforderungen pro Modul"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:r.map(N=>{var T,M,I,R,F;const P=((T=N.progress)==null?void 0:T.progress_percentage)||0;return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(vv,{progress:P,variant:E(N.key),size:120,strokeWidth:8,label:N.title_de,showPercentage:!0,onClick:()=>a(N.key),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[c.jsx(zN,{className:"w-4 h-4 text-muted-foreground"}),c.jsxs(me,{variant:"outline",className:"text-xs",children:[parseInt((((M=N.progress)==null?void 0:M.total_weighted_score)||0).toString()),"/",N.minimum_required||"?"]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["V:",parseInt((((I=N.progress)==null?void 0:I.responsible_count)||0).toString())," I:",parseInt((((R=N.progress)==null?void 0:R.instructing_count)||0).toString())," A:",parseInt((((F=N.progress)==null?void 0:F.assistant_count)||0).toString())]})]})]},N.id)})})]}),i&&c.jsx(mG,{moduleKey:i,onClose:()=>a(null)}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:c.jsx(zR,{className:"w-6 h-6 text-activity-mint"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Gesamtfortschritt"}),c.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[r.length>0?parseInt((r.reduce((N,P)=>{var T;return N+(((T=P.progress)==null?void 0:T.progress_percentage)||0)},0)/r.length).toString()):0,"%"]})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`p-3 ${C.color}/20 rounded-medical`,children:c.jsx(hv,{className:"w-6 h-6",style:{color:C.color.replace("/20","").replace("bg-","")}})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Rollen-Balance"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground capitalize",children:C.status==="good"?"Gut":C.status==="warning"?"Achtung":"Kritisch"})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:c.jsx(zN,{className:"w-6 h-6 text-activity-coral"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Eingriffe Total"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:parseInt(r.reduce((N,P)=>{var T,M,I;return N+(((T=P.progress)==null?void 0:T.responsible_count)||0)+(((M=P.progress)==null?void 0:M.instructing_count)||0)+(((I=P.progress)==null?void 0:I.assistant_count)||0)},0).toString())})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:c.jsx(Fi,{className:"w-6 h-6 text-activity-amber"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktueller PGY"}),c.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:["PGY-",v]})]})]})})]}),c.jsx(yq,{modules:r,userPgyLevel:v}),u&&c.jsx(mq,{onClose:()=>h(!1),onSuccess:()=>{h(!1),b()}}),c.jsx(A9,{open:m,onOpenChange:y,onSuccess:b}),c.jsx(d9,{open:f,onOpenChange:p,onSuccess:b}),c.jsx(C9,{open:g,onOpenChange:w,onSuccess:b})]})]})},k9=({currentImageUrl:n,onImageUploaded:e,onImageRemoved:t})=>{const[r,s]=_.useState(!1),[i,a]=_.useState(n||null),o=async u=>{var f;const h=(f=u.target.files)==null?void 0:f[0];if(h){if(!h.type.startsWith("image/")){De.error("Bitte wählen Sie eine Bilddatei aus");return}if(h.size>10*1024*1024){De.error("Datei ist zu groß. Maximal 10MB erlaubt.");return}s(!0);try{const p=h.name.split(".").pop(),m=`${Date.now()}-${Math.random().toString(36).substring(7)}.${p}`,{data:y,error:g}=await se.storage.from("course-images").upload(m,h,{cacheControl:"3600",upsert:!1});if(g)throw g;const{data:{publicUrl:w}}=se.storage.from("course-images").getPublicUrl(y.path);a(w),e(w),De.success("Bild erfolgreich hochgeladen")}catch(p){console.error("Error uploading image:",p),De.error("Fehler beim Hochladen des Bildes")}finally{s(!1),u.target.value=""}}},l=()=>{a(null),t()};return c.jsxs("div",{className:"space-y-3",children:[c.jsx(Be,{className:"text-foreground",children:"Kursbild"}),i?c.jsxs("div",{className:"relative w-full h-48 bg-muted rounded-lg overflow-hidden border-2 border-dashed border-border",children:[c.jsx("img",{src:i,alt:"Kurs Vorschau",className:"w-full h-full object-cover"}),c.jsx(J,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:l,children:c.jsx(zl,{className:"h-4 w-4"})})]}):c.jsxs("div",{className:"w-full h-48 bg-muted rounded-lg border-2 border-dashed border-border flex flex-col items-center justify-center gap-3",children:[c.jsx(g5,{className:"h-12 w-12 text-muted-foreground"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Kein Bild ausgewählt"}),c.jsx(Be,{htmlFor:"image-upload",className:"cursor-pointer",children:c.jsx(J,{type:"button",variant:"outline",disabled:r,asChild:!0,children:c.jsxs("span",{children:[c.jsx(tw,{className:"h-4 w-4 mr-2"}),r?"Hochladen...":"Bild auswählen"]})})})]})]}),c.jsx(Ze,{id:"image-upload",type:"file",accept:"image/*",onChange:o,disabled:r,className:"hidden"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützte Formate: JPG, PNG, WebP, GIF (max. 10MB)"})]})};function $e(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Fr(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function zn(n,e){const t=$e(n);return isNaN(e)?Fr(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function Gs(n,e){const t=$e(n);if(isNaN(e))return Fr(n,NaN);if(!e)return t;const r=t.getDate(),s=Fr(n,t.getTime());s.setMonth(t.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}const tC=6048e5,j9=864e5;let P9={};function Tv(){return P9}function Wi(n,e){var o,l,u,h;const t=Tv(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=$e(n),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Uu(n){return Wi(n,{weekStartsOn:1})}function oF(n){const e=$e(n),t=e.getFullYear(),r=Fr(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const s=Uu(r),i=Fr(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Uu(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Mf(n){const e=$e(n);return e.setHours(0,0,0,0),e}function mx(n){const e=$e(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Di(n,e){const t=Mf(n),r=Mf(e),s=+t-mx(t),i=+r-mx(r);return Math.round((s-i)/j9)}function T9(n){const e=oF(n),t=Fr(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Uu(t)}function QS(n,e){const t=e*7;return zn(n,t)}function R9(n,e){return Gs(n,e*12)}function M9(n){let e;return n.forEach(function(t){const r=$e(t);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function I9(n){let e;return n.forEach(t=>{const r=$e(t);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function ar(n,e){const t=Mf(n),r=Mf(e);return+t==+r}function nC(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function D9(n){if(!nC(n)&&typeof n!="number")return!1;const e=$e(n);return!isNaN(Number(e))}function Am(n,e){const t=$e(n),r=$e(e),s=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return s*12+i}function O9(n,e,t){const r=Wi(n,t),s=Wi(e,t),i=+r-mx(r),a=+s-mx(s);return Math.round((i-a)/tC)}function rC(n){const e=$e(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function ur(n){const e=$e(n);return e.setDate(1),e.setHours(0,0,0,0),e}function lF(n){const e=$e(n),t=Fr(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function sC(n,e){var o,l,u,h;const t=Tv(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=$e(n),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function cF(n){return sC(n,{weekStartsOn:1})}const L9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},F9=(n,e,t)=>{let r;const s=L9[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Jd(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const $9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},B9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},z9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},U9={date:Jd({formats:$9,defaultWidth:"full"}),time:Jd({formats:B9,defaultWidth:"full"}),dateTime:Jd({formats:z9,defaultWidth:"full"})},H9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},W9=(n,e,t,r)=>H9[n];function Ri(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[o]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const V9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},G9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},q9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Y9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},K9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},X9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Q9=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},J9={ordinalNumber:Q9,era:Ri({values:V9,defaultWidth:"wide"}),quarter:Ri({values:G9,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ri({values:q9,defaultWidth:"wide"}),day:Ri({values:Y9,defaultWidth:"wide"}),dayPeriod:Ri({values:K9,defaultWidth:"wide",formattingValues:X9,defaultFormattingWidth:"wide"})};function Mi(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?eY(o,f=>f.test(a)):Z9(o,f=>f.test(a));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}function Z9(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function eY(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function uF(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const tY=/^(\d+)(th|st|nd|rd)?/i,nY=/\d+/i,rY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sY={any:[/^b/i,/^(a|c)/i]},iY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aY={any:[/1/i,/2/i,/3/i,/4/i]},oY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fY={ordinalNumber:uF({matchPattern:tY,parsePattern:nY,valueCallback:n=>parseInt(n,10)}),era:Mi({matchPatterns:rY,defaultMatchWidth:"wide",parsePatterns:sY,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:iY,defaultMatchWidth:"wide",parsePatterns:aY,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Mi({matchPatterns:oY,defaultMatchWidth:"wide",parsePatterns:lY,defaultParseWidth:"any"}),day:Mi({matchPatterns:cY,defaultMatchWidth:"wide",parsePatterns:uY,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:dY,defaultMatchWidth:"any",parsePatterns:hY,defaultParseWidth:"any"})},dF={code:"en-US",formatDistance:F9,formatLong:U9,formatRelative:W9,localize:J9,match:fY,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pY(n){const e=$e(n);return Di(e,lF(e))+1}function hF(n){const e=$e(n),t=+Uu(e)-+T9(e);return Math.round(t/tC)+1}function fF(n,e){var h,f,p,m;const t=$e(n),r=t.getFullYear(),s=Tv(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=Fr(n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Wi(a,e),l=Fr(n,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Wi(l,e);return t.getTime()>=o.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function mY(n,e){var o,l,u,h;const t=Tv(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=fF(n,e),i=Fr(n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Wi(i,e)}function pF(n,e){const t=$e(n),r=+Wi(t,e)-+mY(t,e);return Math.round(r/tC)+1}function qe(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const ho={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return qe(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):qe(t+1,2)},d(n,e){return qe(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return qe(n.getHours()%12||12,e.length)},H(n,e){return qe(n.getHours(),e.length)},m(n,e){return qe(n.getMinutes(),e.length)},s(n,e){return qe(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return qe(s,e.length)}},ud={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Aj={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return ho.y(n,e)},Y:function(n,e,t,r){const s=fF(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return qe(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):qe(i,e.length)},R:function(n,e){const t=oF(n);return qe(t,e.length)},u:function(n,e){const t=n.getFullYear();return qe(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qe(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qe(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return ho.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return qe(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=pF(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):qe(s,e.length)},I:function(n,e,t){const r=hF(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):qe(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ho.d(n,e)},D:function(n,e,t){const r=pY(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):qe(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return qe(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return qe(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return qe(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=ud.noon:r===0?s=ud.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=ud.evening:r>=12?s=ud.afternoon:r>=4?s=ud.morning:s=ud.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ho.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ho.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ho.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ho.s(n,e)},S:function(n,e){return ho.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Nj(r);case"XXXX":case"XX":return ic(r);case"XXXXX":case"XXX":default:return ic(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return Nj(r);case"xxxx":case"xx":return ic(r);case"xxxxx":case"xxx":default:return ic(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Cj(r,":");case"OOOO":default:return"GMT"+ic(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Cj(r,":");case"zzzz":default:return"GMT"+ic(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return qe(r,e.length)},T:function(n,e,t){const r=n.getTime();return qe(r,e.length)}};function Cj(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+qe(i,2)}function Nj(n,e){return n%60===0?(n>0?"-":"+")+qe(Math.abs(n)/60,2):ic(n,e)}function ic(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=qe(Math.trunc(r/60),2),i=qe(r%60,2);return t+s+e+i}const kj=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},mF=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gY=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return kj(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",kj(r,e)).replace("{{time}}",mF(s,e))},vY={p:mF,P:gY},yY=/^D+$/,xY=/^Y+$/,wY=["D","DD","YY","YYYY"];function bY(n){return yY.test(n)}function _Y(n){return xY.test(n)}function SY(n,e,t){const r=EY(n,e,t);if(console.warn(r),wY.includes(n))throw new RangeError(r)}function EY(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const AY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NY=/^'([^]*?)'?$/,kY=/''/g,jY=/[a-zA-Z]/;function zi(n,e,t){var h,f,p,m,y,g,w,v;const r=Tv(),s=(t==null?void 0:t.locale)??r.locale??dF,i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((g=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(w=r.locale)==null?void 0:w.options)==null?void 0:v.weekStartsOn)??0,o=$e(n);if(!D9(o))throw new RangeError("Invalid time value");let l=e.match(CY).map(x=>{const b=x[0];if(b==="p"||b==="P"){const E=vY[b];return E(x,s.formatLong)}return x}).join("").match(AY).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const b=x[0];if(b==="'")return{isToken:!1,value:PY(x)};if(Aj[b])return{isToken:!0,value:x};if(b.match(jY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(x=>{if(!x.isToken)return x.value;const b=x.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&_Y(b)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&bY(b))&&SY(b,e,String(n));const E=Aj[b[0]];return E(o,b,s.localize,u)}).join("")}function PY(n){const e=n.match(NY);return e?e[1].replace(kY,"'"):n}function TY(n){const e=$e(n),t=e.getFullYear(),r=e.getMonth(),s=Fr(n,0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function RY(n){return Math.trunc(+$e(n)/1e3)}function MY(n){const e=$e(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function IY(n,e){return O9(MY(n),ur(n),e)+1}function JS(n,e){const t=$e(n),r=$e(e);return t.getTime()>r.getTime()}function gF(n,e){const t=$e(n),r=$e(e);return+t<+r}function iC(n,e){const t=$e(n),r=$e(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function DY(n,e){const t=$e(n),r=$e(e);return t.getFullYear()===r.getFullYear()}function qb(n,e){return zn(n,-e)}function Yb(n,e){const t=$e(n),r=t.getFullYear(),s=t.getDate(),i=Fr(n,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const a=TY(i);return t.setMonth(e,Math.min(s,a)),t}function jj(n,e){const t=$e(n);return isNaN(+t)?Fr(n,NaN):(t.setFullYear(e),t)}const Pj={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},OY=(n,e,t)=>{let r;const s=t!=null&&t.addSuffix?Pj[n].withPreposition:Pj[n].standalone;return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:"vor "+r:r},LY={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},FY={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},$Y={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},BY={date:Jd({formats:LY,defaultWidth:"full"}),time:Jd({formats:FY,defaultWidth:"full"}),dateTime:Jd({formats:$Y,defaultWidth:"full"})},zY={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},UY=(n,e,t,r)=>zY[n],HY={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},WY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},ZS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},VY={narrow:ZS.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:ZS.wide},GY={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},qY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},YY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},KY=n=>Number(n)+".",XY={ordinalNumber:KY,era:Ri({values:HY,defaultWidth:"wide"}),quarter:Ri({values:WY,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ri({values:ZS,formattingValues:VY,defaultWidth:"wide"}),day:Ri({values:GY,defaultWidth:"wide"}),dayPeriod:Ri({values:qY,defaultWidth:"wide",formattingValues:YY,defaultFormattingWidth:"wide"})},QY=/^(\d+)(\.)?/i,JY=/\d+/i,ZY={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},eK={any:[/^v/i,/^n/i]},tK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},nK={any:[/1/i,/2/i,/3/i,/4/i]},rK={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},sK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iK={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},aK={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},oK={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},lK={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},cK={ordinalNumber:uF({matchPattern:QY,parsePattern:JY,valueCallback:n=>parseInt(n)}),era:Mi({matchPatterns:ZY,defaultMatchWidth:"wide",parsePatterns:eK,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:tK,defaultMatchWidth:"wide",parsePatterns:nK,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Mi({matchPatterns:rK,defaultMatchWidth:"wide",parsePatterns:sK,defaultParseWidth:"any"}),day:Mi({matchPatterns:iK,defaultMatchWidth:"wide",parsePatterns:aK,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:oK,defaultMatchWidth:"wide",parsePatterns:lK,defaultParseWidth:"any"})},Kb={code:"de",formatDistance:OY,formatLong:BY,formatRelative:UY,localize:XY,match:cK,options:{weekStartsOn:1,firstWeekContainsDate:4}};var pe=function(){return pe=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pe.apply(this,arguments)};function uK(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function vF(n,e,t){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function Rv(n){return n.mode==="multiple"}function Mv(n){return n.mode==="range"}function Dw(n){return n.mode==="single"}var dK={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function hK(n,e){return zi(n,"LLLL y",e)}function fK(n,e){return zi(n,"d",e)}function pK(n,e){return zi(n,"LLLL",e)}function mK(n){return"".concat(n)}function gK(n,e){return zi(n,"cccccc",e)}function vK(n,e){return zi(n,"yyyy",e)}var yK=Object.freeze({__proto__:null,formatCaption:hK,formatDay:fK,formatMonthCaption:pK,formatWeekNumber:mK,formatWeekdayName:gK,formatYearCaption:vK}),xK=function(n,e,t){return zi(n,"do MMMM (EEEE)",t)},wK=function(){return"Month: "},bK=function(){return"Go to next month"},_K=function(){return"Go to previous month"},SK=function(n,e){return zi(n,"cccc",e)},EK=function(n){return"Week n. ".concat(n)},AK=function(){return"Year: "},CK=Object.freeze({__proto__:null,labelDay:xK,labelMonthDropdown:wK,labelNext:bK,labelPrevious:_K,labelWeekNumber:EK,labelWeekday:SK,labelYearDropdown:AK});function NK(){var n="buttons",e=dK,t=dF,r={},s={},i=1,a={},o=new Date;return{captionLayout:n,classNames:e,formatters:yK,labels:CK,locale:t,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:a,today:o,mode:"default"}}function kK(n){var e=n.fromYear,t=n.toYear,r=n.fromMonth,s=n.toMonth,i=n.fromDate,a=n.toDate;return r?i=ur(r):e&&(i=new Date(e,0,1)),s?a=rC(s):t&&(a=new Date(t,11,31)),{fromDate:i?Mf(i):void 0,toDate:a?Mf(a):void 0}}var yF=_.createContext(void 0);function jK(n){var e,t=n.initialProps,r=NK(),s=kK(t),i=s.fromDate,a=s.toDate,o=(e=t.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!i||!a)&&(o="buttons");var l;(Dw(t)||Rv(t)||Mv(t))&&(l=t.onSelect);var u=pe(pe(pe({},r),t),{captionLayout:o,classNames:pe(pe({},r.classNames),t.classNames),components:pe({},t.components),formatters:pe(pe({},r.formatters),t.formatters),fromDate:i,labels:pe(pe({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:pe(pe({},r.modifiers),t.modifiers),modifiersClassNames:pe(pe({},r.modifiersClassNames),t.modifiersClassNames),onSelect:l,styles:pe(pe({},r.styles),t.styles),toDate:a});return c.jsx(yF.Provider,{value:u,children:n.children})}function st(){var n=_.useContext(yF);if(!n)throw new Error("useDayPicker must be used within a DayPickerProvider.");return n}function xF(n){var e=st(),t=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return c.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:n.id,children:i(n.displayMonth,{locale:t})})}function PK(n){return c.jsx("svg",pe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},n,{children:c.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function wF(n){var e,t,r=n.onChange,s=n.value,i=n.children,a=n.caption,o=n.className,l=n.style,u=st(),h=(t=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:PK;return c.jsxs("div",{className:o,style:l,children:[c.jsx("span",{className:u.classNames.vhidden,children:n["aria-label"]}),c.jsx("select",{name:n.name,"aria-label":n["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r,children:i}),c.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[a,c.jsx(h,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function TK(n){var e,t=st(),r=t.fromDate,s=t.toDate,i=t.styles,a=t.locale,o=t.formatters.formatMonthCaption,l=t.classNames,u=t.components,h=t.labels.labelMonthDropdown;if(!r)return c.jsx(c.Fragment,{});if(!s)return c.jsx(c.Fragment,{});var f=[];if(DY(r,s))for(var p=ur(r),m=r.getMonth();m<=s.getMonth();m++)f.push(Yb(p,m));else for(var p=ur(new Date),m=0;m<=11;m++)f.push(Yb(p,m));var y=function(w){var v=Number(w.target.value),x=Yb(ur(n.displayMonth),v);n.onChange(x)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:wF;return c.jsx(g,{name:"months","aria-label":h(),className:l.dropdown_month,style:i.dropdown_month,onChange:y,value:n.displayMonth.getMonth(),caption:o(n.displayMonth,{locale:a}),children:f.map(function(w){return c.jsx("option",{value:w.getMonth(),children:o(w,{locale:a})},w.getMonth())})})}function RK(n){var e,t=n.displayMonth,r=st(),s=r.fromDate,i=r.toDate,a=r.locale,o=r.styles,l=r.classNames,u=r.components,h=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,p=[];if(!s)return c.jsx(c.Fragment,{});if(!i)return c.jsx(c.Fragment,{});for(var m=s.getFullYear(),y=i.getFullYear(),g=m;g<=y;g++)p.push(jj(lF(new Date),g));var w=function(x){var b=jj(ur(t),Number(x.target.value));n.onChange(b)},v=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:wF;return c.jsx(v,{name:"years","aria-label":f(),className:l.dropdown_year,style:o.dropdown_year,onChange:w,value:t.getFullYear(),caption:h(t,{locale:a}),children:p.map(function(x){return c.jsx("option",{value:x.getFullYear(),children:h(x,{locale:a})},x.getFullYear())})})}function MK(n,e){var t=_.useState(n),r=t[0],s=t[1],i=e===void 0?r:e;return[i,s]}function IK(n){var e=n.month,t=n.defaultMonth,r=n.today,s=e||t||r||new Date,i=n.toDate,a=n.fromDate,o=n.numberOfMonths,l=o===void 0?1:o;if(i&&Am(i,s)<0){var u=-1*(l-1);s=Gs(i,u)}return a&&Am(s,a)<0&&(s=a),ur(s)}function DK(){var n=st(),e=IK(n),t=MK(e,n.month),r=t[0],s=t[1],i=function(a){var o;if(!n.disableNavigation){var l=ur(a);s(l),(o=n.onMonthChange)===null||o===void 0||o.call(n,l)}};return[r,i]}function OK(n,e){for(var t=e.reverseMonths,r=e.numberOfMonths,s=ur(n),i=ur(Gs(s,r)),a=Am(i,s),o=[],l=0;l<a;l++){var u=Gs(s,l);o.push(u)}return t&&(o=o.reverse()),o}function LK(n,e){if(!e.disableNavigation){var t=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,o=ur(n);if(!t)return Gs(o,a);var l=Am(t,n);if(!(l<i))return Gs(o,a)}}function FK(n,e){if(!e.disableNavigation){var t=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,o=ur(n);if(!t)return Gs(o,-a);var l=Am(o,t);if(!(l<=0))return Gs(o,-a)}}var bF=_.createContext(void 0);function $K(n){var e=st(),t=DK(),r=t[0],s=t[1],i=OK(r,e),a=LK(r,e),o=FK(r,e),l=function(f){return i.some(function(p){return iC(f,p)})},u=function(f,p){l(f)||(p&&gF(f,p)?s(Gs(f,1+e.numberOfMonths*-1)):s(f))},h={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:u,previousMonth:o,nextMonth:a,isDateDisplayed:l};return c.jsx(bF.Provider,{value:h,children:n.children})}function Iv(){var n=_.useContext(bF);if(!n)throw new Error("useNavigation must be used within a NavigationProvider");return n}function Tj(n){var e,t=st(),r=t.classNames,s=t.styles,i=t.components,a=Iv().goToMonth,o=function(h){a(Gs(h,n.displayIndex?-n.displayIndex:0))},l=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:xF,u=c.jsx(l,{id:n.id,displayMonth:n.displayMonth});return c.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[c.jsx("div",{className:r.vhidden,children:u}),c.jsx(TK,{onChange:o,displayMonth:n.displayMonth}),c.jsx(RK,{onChange:o,displayMonth:n.displayMonth})]})}function BK(n){return c.jsx("svg",pe({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:c.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function zK(n){return c.jsx("svg",pe({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:c.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var gx=_.forwardRef(function(n,e){var t=st(),r=t.classNames,s=t.styles,i=[r.button_reset,r.button];n.className&&i.push(n.className);var a=i.join(" "),o=pe(pe({},s.button_reset),s.button);return n.style&&Object.assign(o,n.style),c.jsx("button",pe({},n,{ref:e,type:"button",className:a,style:o}))});function UK(n){var e,t,r=st(),s=r.dir,i=r.locale,a=r.classNames,o=r.styles,l=r.labels,u=l.labelPrevious,h=l.labelNext,f=r.components;if(!n.nextMonth&&!n.previousMonth)return c.jsx(c.Fragment,{});var p=u(n.previousMonth,{locale:i}),m=[a.nav_button,a.nav_button_previous].join(" "),y=h(n.nextMonth,{locale:i}),g=[a.nav_button,a.nav_button_next].join(" "),w=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:zK,v=(t=f==null?void 0:f.IconLeft)!==null&&t!==void 0?t:BK;return c.jsxs("div",{className:a.nav,style:o.nav,children:[!n.hidePrevious&&c.jsx(gx,{name:"previous-month","aria-label":p,className:m,style:o.nav_button_previous,disabled:!n.previousMonth,onClick:n.onPreviousClick,children:s==="rtl"?c.jsx(w,{className:a.nav_icon,style:o.nav_icon}):c.jsx(v,{className:a.nav_icon,style:o.nav_icon})}),!n.hideNext&&c.jsx(gx,{name:"next-month","aria-label":y,className:g,style:o.nav_button_next,disabled:!n.nextMonth,onClick:n.onNextClick,children:s==="rtl"?c.jsx(v,{className:a.nav_icon,style:o.nav_icon}):c.jsx(w,{className:a.nav_icon,style:o.nav_icon})})]})}function Rj(n){var e=st().numberOfMonths,t=Iv(),r=t.previousMonth,s=t.nextMonth,i=t.goToMonth,a=t.displayMonths,o=a.findIndex(function(y){return iC(n.displayMonth,y)}),l=o===0,u=o===a.length-1,h=e>1&&(l||!u),f=e>1&&(u||!l),p=function(){r&&i(r)},m=function(){s&&i(s)};return c.jsx(UK,{displayMonth:n.displayMonth,hideNext:h,hidePrevious:f,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:m})}function HK(n){var e,t=st(),r=t.classNames,s=t.disableNavigation,i=t.styles,a=t.captionLayout,o=t.components,l=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:xF,u;return s?u=c.jsx(l,{id:n.id,displayMonth:n.displayMonth}):a==="dropdown"?u=c.jsx(Tj,{displayMonth:n.displayMonth,id:n.id}):a==="dropdown-buttons"?u=c.jsxs(c.Fragment,{children:[c.jsx(Tj,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id}),c.jsx(Rj,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id})]}):u=c.jsxs(c.Fragment,{children:[c.jsx(l,{id:n.id,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),c.jsx(Rj,{displayMonth:n.displayMonth,id:n.id})]}),c.jsx("div",{className:r.caption,style:i.caption,children:u})}function WK(n){var e=st(),t=e.footer,r=e.styles,s=e.classNames.tfoot;return t?c.jsx("tfoot",{className:s,style:r.tfoot,children:c.jsx("tr",{children:c.jsx("td",{colSpan:8,children:t})})}):c.jsx(c.Fragment,{})}function VK(n,e,t){for(var r=t?Uu(new Date):Wi(new Date,{locale:n,weekStartsOn:e}),s=[],i=0;i<7;i++){var a=zn(r,i);s.push(a)}return s}function GK(){var n=st(),e=n.classNames,t=n.styles,r=n.showWeekNumber,s=n.locale,i=n.weekStartsOn,a=n.ISOWeek,o=n.formatters.formatWeekdayName,l=n.labels.labelWeekday,u=VK(s,i,a);return c.jsxs("tr",{style:t.head_row,className:e.head_row,children:[r&&c.jsx("td",{style:t.head_cell,className:e.head_cell}),u.map(function(h,f){return c.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":l(h,{locale:s}),children:o(h,{locale:s})},f)})]})}function qK(){var n,e=st(),t=e.classNames,r=e.styles,s=e.components,i=(n=s==null?void 0:s.HeadRow)!==null&&n!==void 0?n:GK;return c.jsx("thead",{style:r.head,className:t.head,children:c.jsx(i,{})})}function YK(n){var e=st(),t=e.locale,r=e.formatters.formatDay;return c.jsx(c.Fragment,{children:r(n.date,{locale:t})})}var aC=_.createContext(void 0);function KK(n){if(!Rv(n.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return c.jsx(aC.Provider,{value:e,children:n.children})}return c.jsx(XK,{initialProps:n.initialProps,children:n.children})}function XK(n){var e=n.initialProps,t=n.children,r=e.selected,s=e.min,i=e.max,a=function(u,h,f){var p,m;(p=e.onDayClick)===null||p===void 0||p.call(e,u,h,f);var y=!!(h.selected&&s&&(r==null?void 0:r.length)===s);if(!y){var g=!!(!h.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var w=r?vF([],r):[];if(h.selected){var v=w.findIndex(function(x){return ar(u,x)});w.splice(v,1)}else w.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,w,u,h,f)}}},o={disabled:[]};r&&o.disabled.push(function(u){var h=i&&r.length>i-1,f=r.some(function(p){return ar(p,u)});return!!(h&&!f)});var l={selected:r,onDayClick:a,modifiers:o};return c.jsx(aC.Provider,{value:l,children:t})}function oC(){var n=_.useContext(aC);if(!n)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return n}function QK(n,e){var t=e||{},r=t.from,s=t.to;return r&&s?ar(s,n)&&ar(r,n)?void 0:ar(s,n)?{from:s,to:void 0}:ar(r,n)?void 0:JS(r,n)?{from:n,to:s}:{from:r,to:n}:s?JS(n,s)?{from:s,to:n}:{from:n,to:s}:r?gF(n,r)?{from:n,to:r}:{from:r,to:n}:{from:n,to:void 0}}var lC=_.createContext(void 0);function JK(n){if(!Mv(n.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return c.jsx(lC.Provider,{value:e,children:n.children})}return c.jsx(ZK,{initialProps:n.initialProps,children:n.children})}function ZK(n){var e=n.initialProps,t=n.children,r=e.selected,s=r||{},i=s.from,a=s.to,o=e.min,l=e.max,u=function(m,y,g){var w,v;(w=e.onDayClick)===null||w===void 0||w.call(e,m,y,g);var x=QK(m,r);(v=e.onSelect)===null||v===void 0||v.call(e,x,m,y,g)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],a?(h.range_end=[a],ar(i,a)||(h.range_middle=[{after:i,before:a}])):h.range_end=[i]):a&&(h.range_start=[a],h.range_end=[a]),o&&(i&&!a&&h.disabled.push({after:qb(i,o-1),before:zn(i,o-1)}),i&&a&&h.disabled.push({after:i,before:zn(i,o-1)}),!i&&a&&h.disabled.push({after:qb(a,o-1),before:zn(a,o-1)})),l){if(i&&!a&&(h.disabled.push({before:zn(i,-l+1)}),h.disabled.push({after:zn(i,l-1)})),i&&a){var f=Di(a,i)+1,p=l-f;h.disabled.push({before:qb(i,p)}),h.disabled.push({after:zn(a,p)})}!i&&a&&(h.disabled.push({before:zn(a,-l+1)}),h.disabled.push({after:zn(a,l-1)}))}return c.jsx(lC.Provider,{value:{selected:r,onDayClick:u,modifiers:h},children:t})}function cC(){var n=_.useContext(lC);if(!n)throw new Error("useSelectRange must be used within a SelectRangeProvider");return n}function v0(n){return Array.isArray(n)?vF([],n):n!==void 0?[n]:[]}function eX(n){var e={};return Object.entries(n).forEach(function(t){var r=t[0],s=t[1];e[r]=v0(s)}),e}var qs;(function(n){n.Outside="outside",n.Disabled="disabled",n.Selected="selected",n.Hidden="hidden",n.Today="today",n.RangeStart="range_start",n.RangeEnd="range_end",n.RangeMiddle="range_middle"})(qs||(qs={}));var tX=qs.Selected,Xi=qs.Disabled,nX=qs.Hidden,rX=qs.Today,Xb=qs.RangeEnd,Qb=qs.RangeMiddle,Jb=qs.RangeStart,sX=qs.Outside;function iX(n,e,t){var r,s=(r={},r[tX]=v0(n.selected),r[Xi]=v0(n.disabled),r[nX]=v0(n.hidden),r[rX]=[n.today],r[Xb]=[],r[Qb]=[],r[Jb]=[],r[sX]=[],r);return n.fromDate&&s[Xi].push({before:n.fromDate}),n.toDate&&s[Xi].push({after:n.toDate}),Rv(n)?s[Xi]=s[Xi].concat(e.modifiers[Xi]):Mv(n)&&(s[Xi]=s[Xi].concat(t.modifiers[Xi]),s[Jb]=t.modifiers[Jb],s[Qb]=t.modifiers[Qb],s[Xb]=t.modifiers[Xb]),s}var _F=_.createContext(void 0);function aX(n){var e=st(),t=oC(),r=cC(),s=iX(e,t,r),i=eX(e.modifiers),a=pe(pe({},s),i);return c.jsx(_F.Provider,{value:a,children:n.children})}function SF(){var n=_.useContext(_F);if(!n)throw new Error("useModifiers must be used within a ModifiersProvider");return n}function oX(n){return!!(n&&typeof n=="object"&&"before"in n&&"after"in n)}function lX(n){return!!(n&&typeof n=="object"&&"from"in n)}function cX(n){return!!(n&&typeof n=="object"&&"after"in n)}function uX(n){return!!(n&&typeof n=="object"&&"before"in n)}function dX(n){return!!(n&&typeof n=="object"&&"dayOfWeek"in n)}function hX(n,e){var t,r=e.from,s=e.to;if(r&&s){var i=Di(s,r)<0;i&&(t=[s,r],r=t[0],s=t[1]);var a=Di(n,r)>=0&&Di(s,n)>=0;return a}return s?ar(s,n):r?ar(r,n):!1}function fX(n){return nC(n)}function pX(n){return Array.isArray(n)&&n.every(nC)}function mX(n,e){return e.some(function(t){if(typeof t=="boolean")return t;if(fX(t))return ar(n,t);if(pX(t))return t.includes(n);if(lX(t))return hX(n,t);if(dX(t))return t.dayOfWeek.includes(n.getDay());if(oX(t)){var r=Di(t.before,n),s=Di(t.after,n),i=r>0,a=s<0,o=JS(t.before,t.after);return o?a&&i:i||a}return cX(t)?Di(n,t.after)>0:uX(t)?Di(t.before,n)>0:typeof t=="function"?t(n):!1})}function uC(n,e,t){var r=Object.keys(e).reduce(function(i,a){var o=e[a];return mX(n,o)&&i.push(a),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),t&&!iC(n,t)&&(s.outside=!0),s}function gX(n,e){for(var t=ur(n[0]),r=rC(n[n.length-1]),s,i,a=t;a<=r;){var o=uC(a,e),l=!o.disabled&&!o.hidden;if(!l){a=zn(a,1);continue}if(o.selected)return a;o.today&&!i&&(i=a),s||(s=a),a=zn(a,1)}return i||s}var vX=365;function EF(n,e){var t=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,a=e.retry,o=a===void 0?{count:0,lastFocused:n}:a,l=s.weekStartsOn,u=s.fromDate,h=s.toDate,f=s.locale,p={day:zn,week:QS,month:Gs,year:R9,startOfWeek:function(w){return s.ISOWeek?Uu(w):Wi(w,{locale:f,weekStartsOn:l})},endOfWeek:function(w){return s.ISOWeek?cF(w):sC(w,{locale:f,weekStartsOn:l})}},m=p[t](n,r==="after"?1:-1);r==="before"&&u?m=M9([u,m]):r==="after"&&h&&(m=I9([h,m]));var y=!0;if(i){var g=uC(m,i);y=!g.disabled&&!g.hidden}return y?m:o.count>vX?o.lastFocused:EF(m,{moveBy:t,direction:r,context:s,modifiers:i,retry:pe(pe({},o),{count:o.count+1})})}var AF=_.createContext(void 0);function yX(n){var e=Iv(),t=SF(),r=_.useState(),s=r[0],i=r[1],a=_.useState(),o=a[0],l=a[1],u=gX(e.displayMonths,t),h=s??(o&&e.isDateDisplayed(o))?o:u,f=function(){l(s),i(void 0)},p=function(w){i(w)},m=st(),y=function(w,v){if(s){var x=EF(s,{moveBy:w,direction:v,context:m,modifiers:t});ar(s,x)||(e.goToDate(x,s),p(x))}},g={focusedDay:s,focusTarget:h,blur:f,focus:p,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return c.jsx(AF.Provider,{value:g,children:n.children})}function dC(){var n=_.useContext(AF);if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n}function xX(n,e){var t=SF(),r=uC(n,t,e);return r}var hC=_.createContext(void 0);function wX(n){if(!Dw(n.initialProps)){var e={selected:void 0};return c.jsx(hC.Provider,{value:e,children:n.children})}return c.jsx(bX,{initialProps:n.initialProps,children:n.children})}function bX(n){var e=n.initialProps,t=n.children,r=function(i,a,o){var l,u,h;if((l=e.onDayClick)===null||l===void 0||l.call(e,i,a,o),a.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,i,a,o);return}(h=e.onSelect)===null||h===void 0||h.call(e,i,i,a,o)},s={selected:e.selected,onDayClick:r};return c.jsx(hC.Provider,{value:s,children:t})}function CF(){var n=_.useContext(hC);if(!n)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return n}function _X(n,e){var t=st(),r=CF(),s=oC(),i=cC(),a=dC(),o=a.focusDayAfter,l=a.focusDayBefore,u=a.focusWeekAfter,h=a.focusWeekBefore,f=a.blur,p=a.focus,m=a.focusMonthBefore,y=a.focusMonthAfter,g=a.focusYearBefore,w=a.focusYearAfter,v=a.focusStartOfWeek,x=a.focusEndOfWeek,b=function(L){var D,z,H,Z;Dw(t)?(D=r.onDayClick)===null||D===void 0||D.call(r,n,e,L):Rv(t)?(z=s.onDayClick)===null||z===void 0||z.call(s,n,e,L):Mv(t)?(H=i.onDayClick)===null||H===void 0||H.call(i,n,e,L):(Z=t.onDayClick)===null||Z===void 0||Z.call(t,n,e,L)},E=function(L){var D;p(n),(D=t.onDayFocus)===null||D===void 0||D.call(t,n,e,L)},A=function(L){var D;f(),(D=t.onDayBlur)===null||D===void 0||D.call(t,n,e,L)},C=function(L){var D;(D=t.onDayMouseEnter)===null||D===void 0||D.call(t,n,e,L)},N=function(L){var D;(D=t.onDayMouseLeave)===null||D===void 0||D.call(t,n,e,L)},P=function(L){var D;(D=t.onDayPointerEnter)===null||D===void 0||D.call(t,n,e,L)},T=function(L){var D;(D=t.onDayPointerLeave)===null||D===void 0||D.call(t,n,e,L)},M=function(L){var D;(D=t.onDayTouchCancel)===null||D===void 0||D.call(t,n,e,L)},I=function(L){var D;(D=t.onDayTouchEnd)===null||D===void 0||D.call(t,n,e,L)},R=function(L){var D;(D=t.onDayTouchMove)===null||D===void 0||D.call(t,n,e,L)},F=function(L){var D;(D=t.onDayTouchStart)===null||D===void 0||D.call(t,n,e,L)},O=function(L){var D;(D=t.onDayKeyUp)===null||D===void 0||D.call(t,n,e,L)},V=function(L){var D;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),t.dir==="rtl"?o():l();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),t.dir==="rtl"?l():o();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),u();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),h();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?g():m();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?w():y();break;case"Home":L.preventDefault(),L.stopPropagation(),v();break;case"End":L.preventDefault(),L.stopPropagation(),x();break}(D=t.onDayKeyDown)===null||D===void 0||D.call(t,n,e,L)},B={onClick:b,onFocus:E,onBlur:A,onKeyDown:V,onKeyUp:O,onMouseEnter:C,onMouseLeave:N,onPointerEnter:P,onPointerLeave:T,onTouchCancel:M,onTouchEnd:I,onTouchMove:R,onTouchStart:F};return B}function SX(){var n=st(),e=CF(),t=oC(),r=cC(),s=Dw(n)?e.selected:Rv(n)?t.selected:Mv(n)?r.selected:void 0;return s}function EX(n){return Object.values(qs).includes(n)}function AX(n,e){var t=[n.classNames.day];return Object.keys(e).forEach(function(r){var s=n.modifiersClassNames[r];if(s)t.push(s);else if(EX(r)){var i=n.classNames["day_".concat(r)];i&&t.push(i)}}),t}function CX(n,e){var t=pe({},n.styles.day);return Object.keys(e).forEach(function(r){var s;t=pe(pe({},t),(s=n.modifiersStyles)===null||s===void 0?void 0:s[r])}),t}function NX(n,e,t){var r,s,i,a=st(),o=dC(),l=xX(n,e),u=_X(n,l),h=SX(),f=!!(a.onDayClick||a.mode!=="default");_.useEffect(function(){var C;l.outside||o.focusedDay&&f&&ar(o.focusedDay,n)&&((C=t.current)===null||C===void 0||C.focus())},[o.focusedDay,n,t,f,l.outside]);var p=AX(a,l).join(" "),m=CX(a,l),y=!!(l.outside&&!a.showOutsideDays||l.hidden),g=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:YK,w=c.jsx(g,{date:n,displayMonth:e,activeModifiers:l}),v={style:m,className:p,children:w,role:"gridcell"},x=o.focusTarget&&ar(o.focusTarget,n)&&!l.outside,b=o.focusedDay&&ar(o.focusedDay,n),E=pe(pe(pe({},v),(r={disabled:l.disabled,role:"gridcell"},r["aria-selected"]=l.selected,r.tabIndex=b||x?0:-1,r)),u),A={isButton:f,isHidden:y,activeModifiers:l,selectedDays:h,buttonProps:E,divProps:v};return A}function kX(n){var e=_.useRef(null),t=NX(n.date,n.displayMonth,e);return t.isHidden?c.jsx("div",{role:"gridcell"}):t.isButton?c.jsx(gx,pe({name:"day",ref:e},t.buttonProps)):c.jsx("div",pe({},t.divProps))}function jX(n){var e=n.number,t=n.dates,r=st(),s=r.onWeekNumberClick,i=r.styles,a=r.classNames,o=r.locale,l=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,h=u(Number(e),{locale:o});if(!s)return c.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:h});var f=l(Number(e),{locale:o}),p=function(m){s(e,t,m)};return c.jsx(gx,{name:"week-number","aria-label":f,className:a.weeknumber,style:i.weeknumber,onClick:p,children:h})}function PX(n){var e,t,r=st(),s=r.styles,i=r.classNames,a=r.showWeekNumber,o=r.components,l=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:kX,u=(t=o==null?void 0:o.WeekNumber)!==null&&t!==void 0?t:jX,h;return a&&(h=c.jsx("td",{className:i.cell,style:s.cell,children:c.jsx(u,{number:n.weekNumber,dates:n.dates})})),c.jsxs("tr",{className:i.row,style:s.row,children:[h,n.dates.map(function(f){return c.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:c.jsx(l,{displayMonth:n.displayMonth,date:f})},RY(f))})]})}function Mj(n,e,t){for(var r=t!=null&&t.ISOWeek?cF(e):sC(e,t),s=t!=null&&t.ISOWeek?Uu(n):Wi(n,t),i=Di(r,s),a=[],o=0;o<=i;o++)a.push(zn(s,o));var l=a.reduce(function(u,h){var f=t!=null&&t.ISOWeek?hF(h):pF(h,t),p=u.find(function(m){return m.weekNumber===f});return p?(p.dates.push(h),u):(u.push({weekNumber:f,dates:[h]}),u)},[]);return l}function TX(n,e){var t=Mj(ur(n),rC(n),e);if(e!=null&&e.useFixedWeeks){var r=IY(n,e);if(r<6){var s=t[t.length-1],i=s.dates[s.dates.length-1],a=QS(i,6-r),o=Mj(QS(i,1),a,e);t.push.apply(t,o)}}return t}function RX(n){var e,t,r,s=st(),i=s.locale,a=s.classNames,o=s.styles,l=s.hideHead,u=s.fixedWeeks,h=s.components,f=s.weekStartsOn,p=s.firstWeekContainsDate,m=s.ISOWeek,y=TX(n.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:p}),g=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:qK,w=(t=h==null?void 0:h.Row)!==null&&t!==void 0?t:PX,v=(r=h==null?void 0:h.Footer)!==null&&r!==void 0?r:WK;return c.jsxs("table",{id:n.id,className:a.table,style:o.table,role:"grid","aria-labelledby":n["aria-labelledby"],children:[!l&&c.jsx(g,{}),c.jsx("tbody",{className:a.tbody,style:o.tbody,children:y.map(function(x){return c.jsx(w,{displayMonth:n.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),c.jsx(v,{displayMonth:n.displayMonth})]})}function MX(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var IX=MX()?_.useLayoutEffect:_.useEffect,Zb=!1,DX=0;function Ij(){return"react-day-picker-".concat(++DX)}function OX(n){var e,t=n??(Zb?Ij():null),r=_.useState(t),s=r[0],i=r[1];return IX(function(){s===null&&i(Ij())},[]),_.useEffect(function(){Zb===!1&&(Zb=!0)},[]),(e=n??s)!==null&&e!==void 0?e:void 0}function LX(n){var e,t,r=st(),s=r.dir,i=r.classNames,a=r.styles,o=r.components,l=Iv().displayMonths,u=OX(r.id?"".concat(r.id,"-").concat(n.displayIndex):void 0),h=r.id?"".concat(r.id,"-grid-").concat(n.displayIndex):void 0,f=[i.month],p=a.month,m=n.displayIndex===0,y=n.displayIndex===l.length-1,g=!m&&!y;s==="rtl"&&(e=[m,y],y=e[0],m=e[1]),m&&(f.push(i.caption_start),p=pe(pe({},p),a.caption_start)),y&&(f.push(i.caption_end),p=pe(pe({},p),a.caption_end)),g&&(f.push(i.caption_between),p=pe(pe({},p),a.caption_between));var w=(t=o==null?void 0:o.Caption)!==null&&t!==void 0?t:HK;return c.jsxs("div",{className:f.join(" "),style:p,children:[c.jsx(w,{id:u,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),c.jsx(RX,{id:h,"aria-labelledby":u,displayMonth:n.displayMonth})]},n.displayIndex)}function FX(n){var e=st(),t=e.classNames,r=e.styles;return c.jsx("div",{className:t.months,style:r.months,children:n.children})}function $X(n){var e,t,r=n.initialProps,s=st(),i=dC(),a=Iv(),o=_.useState(!1),l=o[0],u=o[1];_.useEffect(function(){s.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),u(!0)))},[s.initialFocus,l,i.focus,i.focusTarget,i]);var h=[s.classNames.root,s.className];s.numberOfMonths>1&&h.push(s.classNames.multiple_months),s.showWeekNumber&&h.push(s.classNames.with_weeknumber);var f=pe(pe({},s.styles.root),s.style),p=Object.keys(r).filter(function(y){return y.startsWith("data-")}).reduce(function(y,g){var w;return pe(pe({},y),(w={},w[g]=r[g],w))},{}),m=(t=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:FX;return c.jsx("div",pe({className:h.join(" "),style:f,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:c.jsx(m,{children:a.displayMonths.map(function(y,g){return c.jsx(LX,{displayIndex:g,displayMonth:y},g)})})}))}function BX(n){var e=n.children,t=uK(n,["children"]);return c.jsx(jK,{initialProps:t,children:c.jsx($K,{children:c.jsx(wX,{initialProps:t,children:c.jsx(KK,{initialProps:t,children:c.jsx(JK,{initialProps:t,children:c.jsx(aX,{children:c.jsx(yX,{children:e})})})})})})})}function zX(n){return c.jsx(BX,pe({},n,{children:c.jsx($X,{initialProps:n})}))}function y0({className:n,classNames:e,showOutsideDays:t=!0,...r}){return c.jsx(zX,{showOutsideDays:t,className:ee("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ee(o_({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ee(o_({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>c.jsx(c5,{className:"h-4 w-4"}),IconRight:({...s})=>c.jsx(u5,{className:"h-4 w-4"})},...r})}y0.displayName="Calendar";const UX=()=>{const{user:n,loading:e}=gv(),t=qu(),[r,s]=_.useState([]),[i,a]=_.useState(!0),[o,l]=_.useState(!1),[u,h]=_.useState(null),[f,p]=_.useState({}),m=(A,C="CHF")=>A==null?"k.A.":A===0?"Kostenlos":`${A} ${C}`;_.useEffect(()=>{if(!e&&!n){t("/auth");return}n&&y()},[n,e,t,y]);const y=_.useCallback(async()=>{try{const{data:A}=await se.from("profiles").select("role").eq("user_id",n==null?void 0:n.id).single();if((A==null?void 0:A.role)!=="admin"){De.error("Zugriff verweigert. Admin-Berechtigung erforderlich."),t("/");return}g()}catch(A){console.error("Error checking admin access:",A),t("/")}},[n==null?void 0:n.id,t]),g=async()=>{try{a(!0);const{data:A,error:C}=await se.from("courses").select("*").order("created_at",{ascending:!1});if(C)throw C;s(A||[])}catch(A){console.error("Error loading courses:",A),De.error("Fehler beim Laden der Kurse")}finally{a(!1)}},w=A=>{h(A),p(A),l(!0)},v=()=>{h(null),p({title:"",description:"",venue:"",city:"",country:"",specialty:"",language:"Deutsch",modality:"onsite",price:null,currency:"CHF",difficulty_level:"beginner",tags:[],status:"draft",cover_image_url:null,start_date:null,end_date:null,registration_deadline:null}),l(!0)},x=async()=>{var A;try{if(!n||!f.title||!f.venue){De.error("Titel und Veranstalter sind Pflichtfelder");return}const C={title:f.title,provider_id:n.id,description:f.description||"",venue:f.venue,city:f.city||"",country:f.country||"",specialty:f.specialty||null,language:f.language||"Deutsch",modality:f.modality||"onsite",price:f.price,currency:f.currency||"CHF",difficulty_level:f.difficulty_level||"beginner",status:f.status||"draft",cover_image_url:f.cover_image_url||null,start_date:f.start_date||null,end_date:f.end_date||null,registration_deadline:f.registration_deadline||null,tags:Array.isArray(f.tags)?f.tags:((A=f.tags)==null?void 0:A.split(",").map(N=>N.trim()))||[]};if(u){const{error:N}=await se.from("courses").update(C).eq("id",u.id);if(N)throw N;De.success("Kurs erfolgreich aktualisiert")}else{const{error:N}=await se.from("courses").insert([C]);if(N)throw N;De.success("Kurs erfolgreich erstellt")}l(!1),g()}catch(C){console.error("Error saving course:",C),De.error("Fehler beim Speichern des Kurses")}},b=async A=>{if(confirm("Sind Sie sicher, dass Sie diesen Kurs löschen möchten?"))try{const{error:C}=await se.from("courses").delete().eq("id",A);if(C)throw C;De.success("Kurs erfolgreich gelöscht"),g()}catch(C){console.error("Error deleting course:",C),De.error("Fehler beim Löschen des Kurses")}},E=(A,C)=>{p(N=>({...N,[A]:C}))};return i?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsx("main",{className:"container mx-auto px-4 py-8",children:c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx($i,{}),c.jsxs("main",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"CMS Administration"}),c.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Kurse und Inhalte"})]}),c.jsxs(J,{onClick:v,className:"gap-2",children:[c.jsx(Vd,{className:"h-4 w-4"}),"Neuen Kurs erstellen"]})]}),c.jsxs(no,{defaultValue:"courses",className:"space-y-6",children:[c.jsxs(Gi,{children:[c.jsxs(mt,{value:"courses",className:"gap-2",children:[c.jsx(Xa,{className:"h-4 w-4"}),"Kurse"]}),c.jsxs(mt,{value:"users",className:"gap-2",children:[c.jsx(hv,{className:"h-4 w-4"}),"Benutzer"]}),c.jsxs(mt,{value:"settings",className:"gap-2",children:[c.jsx(ew,{className:"h-4 w-4"}),"Einstellungen"]})]}),c.jsx(Ct,{value:"courses",className:"space-y-6",children:c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsx(wt,{children:"Kursverwaltung"})}),c.jsx(ze,{children:c.jsxs(kf,{children:[c.jsx(jf,{children:c.jsxs($s,{children:[c.jsx(Re,{children:"Titel"}),c.jsx(Re,{children:"Veranstalter"}),c.jsx(Re,{children:"Ort"}),c.jsx(Re,{children:"Modalität"}),c.jsx(Re,{children:"Status"}),c.jsx(Re,{children:"Preis"}),c.jsx(Re,{children:"Aktionen"})]})}),c.jsx(Pf,{children:r.map(A=>c.jsxs($s,{children:[c.jsx(Me,{className:"font-medium",children:A.title}),c.jsx(Me,{children:A.venue}),c.jsxs(Me,{children:[A.city,", ",A.country]}),c.jsx(Me,{children:c.jsx(me,{variant:"outline",children:A.modality})}),c.jsx(Me,{children:c.jsx(me,{variant:A.status==="published"?"default":"secondary",children:A.status})}),c.jsx(Me,{children:m(A.price,A.currency)}),c.jsx(Me,{children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(J,{variant:"outline",size:"sm",onClick:()=>w(A),children:c.jsx(rA,{className:"h-3 w-3"})}),c.jsx(J,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>b(A.id),children:c.jsx(BR,{className:"h-3 w-3"})})]})})]},A.id))})]})})]})}),c.jsx(Ct,{value:"users",children:c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsx(wt,{children:"Benutzerverwaltung"})}),c.jsx(ze,{children:c.jsx("p",{className:"text-muted-foreground",children:"Benutzerverwaltung wird in zukünftigen Updates verfügbar sein."})})]})}),c.jsx(Ct,{value:"settings",children:c.jsxs(ae,{children:[c.jsx(pt,{children:c.jsx(wt,{children:"Systemeinstellungen"})}),c.jsx(ze,{children:c.jsx("p",{className:"text-muted-foreground",children:"Systemeinstellungen werden in zukünftigen Updates verfügbar sein."})})]})})]}),c.jsx(Sw,{open:o,onOpenChange:l,children:c.jsxs(wv,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white text-gray-900 border border-gray-200 shadow-lg",children:[c.jsx(bv,{children:c.jsx(_v,{className:"text-gray-900",children:u?"Kurs bearbeiten":"Neuen Kurs erstellen"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Grundinformationen"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"title",className:"text-foreground",children:"Titel *"}),c.jsx(Ze,{id:"title",value:f.title||"",onChange:A=>E("title",A.target.value),placeholder:"Kurstitel eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"venue",className:"text-foreground",children:"Veranstalter *"}),c.jsx(Ze,{id:"venue",value:f.venue||"",onChange:A=>E("venue",A.target.value),placeholder:"Veranstalter eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"city",className:"text-foreground",children:"Stadt"}),c.jsx(Ze,{id:"city",value:f.city||"",onChange:A=>E("city",A.target.value),placeholder:"Stadt eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"country",className:"text-foreground",children:"Land"}),c.jsx(Ze,{id:"country",value:f.country||"",onChange:A=>E("country",A.target.value),placeholder:"Land eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),c.jsxs("div",{className:"space-y-2 md:col-span-2",children:[c.jsx(Be,{htmlFor:"description",className:"text-foreground",children:"Beschreibung"}),c.jsx(FA,{id:"description",value:f.description||"",onChange:A=>E("description",A.target.value),placeholder:"Kursbeschreibung eingeben",rows:4,className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Kursdetails & Termine"}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{className:"text-foreground",children:"Startdatum"}),c.jsxs(Fy,{children:[c.jsx($y,{asChild:!0,children:c.jsxs(J,{variant:"outline",className:ee("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.start_date&&"text-muted-foreground"),children:[c.jsx(Fi,{className:"mr-2 h-4 w-4"}),f.start_date?zi(new Date(f.start_date),"PPP",{locale:Kb}):c.jsx("span",{children:"Startdatum wählen"})]})}),c.jsx(Xp,{className:"w-auto p-0 bg-background border-border",align:"start",children:c.jsx(y0,{mode:"single",selected:f.start_date?new Date(f.start_date):void 0,onSelect:A=>E("start_date",A==null?void 0:A.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{className:"text-foreground",children:"Enddatum"}),c.jsxs(Fy,{children:[c.jsx($y,{asChild:!0,children:c.jsxs(J,{variant:"outline",className:ee("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.end_date&&"text-muted-foreground"),children:[c.jsx(Fi,{className:"mr-2 h-4 w-4"}),f.end_date?zi(new Date(f.end_date),"PPP",{locale:Kb}):c.jsx("span",{children:"Enddatum wählen"})]})}),c.jsx(Xp,{className:"w-auto p-0 bg-background border-border",align:"start",children:c.jsx(y0,{mode:"single",selected:f.end_date?new Date(f.end_date):void 0,onSelect:A=>E("end_date",A==null?void 0:A.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{className:"text-foreground",children:"Anmeldeschluss"}),c.jsxs(Fy,{children:[c.jsx($y,{asChild:!0,children:c.jsxs(J,{variant:"outline",className:ee("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.registration_deadline&&"text-muted-foreground"),children:[c.jsx(Fi,{className:"mr-2 h-4 w-4"}),f.registration_deadline?zi(new Date(f.registration_deadline),"PPP",{locale:Kb}):c.jsx("span",{children:"Anmeldeschluss wählen"})]})}),c.jsx(Xp,{className:"w-auto p-0 bg-background border-border",align:"start",children:c.jsx(y0,{mode:"single",selected:f.registration_deadline?new Date(f.registration_deadline):void 0,onSelect:A=>E("registration_deadline",A==null?void 0:A.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"specialty",className:"text-foreground",children:"Fachgebiet"}),c.jsx(Ze,{id:"specialty",value:f.specialty||"",onChange:A=>E("specialty",A.target.value),placeholder:"Fachgebiet eingeben",className:"bg-background text-foreground border-input"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"language",className:"text-foreground",children:"Sprache"}),c.jsxs(ji,{value:f.language||"Deutsch",onValueChange:A=>E("language",A),children:[c.jsx(Ls,{className:"bg-background text-foreground border-input",children:c.jsx(Pi,{})}),c.jsxs(Fs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"Deutsch",children:"Deutsch"}),c.jsx(yt,{value:"English",children:"English"}),c.jsx(yt,{value:"Français",children:"Français"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"modality",className:"text-foreground",children:"Modalität"}),c.jsxs(ji,{value:f.modality||"onsite",onValueChange:A=>E("modality",A),children:[c.jsx(Ls,{className:"bg-background text-foreground border-input",children:c.jsx(Pi,{})}),c.jsxs(Fs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"onsite",children:"Vor Ort"}),c.jsx(yt,{value:"online",children:"Online"}),c.jsx(yt,{value:"hybrid",children:"Hybrid"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"difficulty_level",className:"text-foreground",children:"Schwierigkeitsgrad"}),c.jsxs(ji,{value:f.difficulty_level||"beginner",onValueChange:A=>E("difficulty_level",A),children:[c.jsx(Ls,{className:"bg-background text-foreground border-input",children:c.jsx(Pi,{})}),c.jsxs(Fs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"beginner",children:"Anfänger"}),c.jsx(yt,{value:"intermediate",children:"Fortgeschritten"}),c.jsx(yt,{value:"advanced",children:"Experte"})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"status",className:"text-foreground",children:"Status"}),c.jsxs(ji,{value:f.status||"draft",onValueChange:A=>E("status",A),children:[c.jsx(Ls,{className:"bg-background text-foreground border-input",children:c.jsx(Pi,{})}),c.jsxs(Fs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"draft",children:"Entwurf"}),c.jsx(yt,{value:"published",children:"Veröffentlicht"}),c.jsx(yt,{value:"archived",children:"Archiviert"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"tags",className:"text-foreground",children:"Tags (kommagetrennt)"}),c.jsx(Ze,{id:"tags",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:A=>E("tags",A.target.value),placeholder:"Tag1, Tag2, Tag3",className:"bg-background text-foreground border-input"})]})]})]}),c.jsx("div",{className:"md:col-span-2 space-y-6 border-t border-border pt-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(k9,{currentImageUrl:f.cover_image_url||void 0,onImageUploaded:A=>E("cover_image_url",A),onImageRemoved:()=>E("cover_image_url",null)}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"price",className:"text-foreground",children:"Preis"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[c.jsx(J,{type:"button",variant:f.price===0?"default":"outline",onClick:()=>E("price",0),className:"text-xs",children:"Kostenlos"}),c.jsx(J,{type:"button",variant:f.price===null?"default":"outline",onClick:()=>E("price",null),className:"text-xs",children:"k.A."}),c.jsx(J,{type:"button",variant:f.price&&f.price>0?"default":"outline",onClick:()=>E("price",1),className:"text-xs",children:"Kostenpflichtig"})]}),f.price&&f.price>0&&c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("div",{children:c.jsx(Ze,{type:"number",placeholder:"Preis eingeben",value:f.price||"",onChange:A=>E("price",parseFloat(A.target.value)||1),className:"bg-background text-foreground border-input"})}),c.jsx("div",{children:c.jsxs(ji,{value:f.currency||"CHF",onValueChange:A=>E("currency",A),children:[c.jsx(Ls,{className:"bg-background text-foreground border-input",children:c.jsx(Pi,{})}),c.jsxs(Fs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"CHF",children:"CHF"}),c.jsx(yt,{value:"EUR",children:"EUR"}),c.jsx(yt,{value:"USD",children:"USD"})]})]})})]}),c.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Aktuelle Anzeige: ",c.jsx("span",{className:"font-medium",children:m(f.price,f.currency)})]})]})]})})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsxs(J,{variant:"outline",onClick:()=>l(!1),children:[c.jsx(zl,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),c.jsxs(J,{onClick:x,children:[c.jsx(tA,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})]})]})};function HX(){const[n,e]=_.useState(!1),[t,r]=_.useState(""),[s,i]=_.useState(""),[a,o]=_.useState(""),[l,u]=_.useState(""),[h,f]=_.useState("1"),[p,m]=_.useState(""),y=qu(),{toast:g}=Jx();_.useEffect(()=>{(async()=>{const{data:{session:b}}=await se.auth.getSession();b&&y("/")})()},[y]);const w=async x=>{x.preventDefault(),m(""),e(!0);try{const{data:b,error:E}=await se.auth.signInWithPassword({email:t,password:s});if(E)throw E;b.user&&(g({title:"Anmeldung erfolgreich",description:"Willkommen zurück!"}),y("/"))}catch(b){console.error("Sign in error:",b);const E=b instanceof Error?b.message:"Anmeldung fehlgeschlagen";m(E)}finally{e(!1)}},v=async x=>{x.preventDefault(),m(""),e(!0);try{const b=`${window.location.origin}/`,{data:E,error:A}=await se.auth.signUp({email:t,password:s,options:{emailRedirectTo:b,data:{full_name:a,institution:l,pgy_level:parseInt(h)}}});if(A)throw A;E.user&&(g({title:"Registrierung erfolgreich",description:"Bitte überprüfen Sie Ihre E-Mail für die Bestätigung."}),E.session&&y("/"))}catch(b){console.error("Sign up error:",b);const E=b instanceof Error?b.message:"Registrierung fehlgeschlagen";m(E)}finally{e(!1)}};return c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"FMH Tracking"}),c.jsx("p",{className:"text-muted-foreground",children:"Melden Sie sich an oder erstellen Sie ein Konto"})]}),c.jsxs(ae,{className:"medical-card",children:[c.jsx(pt,{children:c.jsx(wt,{className:"text-center",children:"Authentifizierung"})}),c.jsx(ze,{children:c.jsxs(no,{defaultValue:"signin",className:"w-full",children:[c.jsxs(Gi,{className:"grid w-full grid-cols-2",children:[c.jsx(mt,{value:"signin",children:"Anmelden"}),c.jsx(mt,{value:"signup",children:"Registrieren"})]}),c.jsx(Ct,{value:"signin",children:c.jsxs("form",{onSubmit:w,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"signin-email",children:"E-Mail"}),c.jsxs("div",{className:"relative",children:[c.jsx(VN,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),c.jsx(Ze,{id:"signin-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:t,onChange:x=>r(x.target.value),className:"pl-10",required:!0,disabled:n})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"signin-password",children:"Passwort"}),c.jsxs("div",{className:"relative",children:[c.jsx(WN,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),c.jsx(Ze,{id:"signin-password",type:"password",placeholder:"Ihr Passwort",value:s,onChange:x=>i(x.target.value),className:"pl-10",required:!0,disabled:n})]})]}),p&&c.jsx(Kd,{variant:"destructive",children:c.jsx(Xd,{children:p})}),c.jsxs(J,{type:"submit",className:"w-full",disabled:n,children:[n&&c.jsx(X1,{className:"mr-2 h-4 w-4 animate-spin"}),"Anmelden"]})]})}),c.jsx(Ct,{value:"signup",children:c.jsxs("form",{onSubmit:v,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"signup-name",children:"Vollständiger Name"}),c.jsxs("div",{className:"relative",children:[c.jsx(w5,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),c.jsx(Ze,{id:"signup-name",type:"text",placeholder:"Dr. Max Mustermann",value:a,onChange:x=>o(x.target.value),className:"pl-10",required:!0,disabled:n})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"signup-email",children:"E-Mail"}),c.jsxs("div",{className:"relative",children:[c.jsx(VN,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),c.jsx(Ze,{id:"signup-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:t,onChange:x=>r(x.target.value),className:"pl-10",required:!0,disabled:n})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"signup-password",children:"Passwort"}),c.jsxs("div",{className:"relative",children:[c.jsx(WN,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),c.jsx(Ze,{id:"signup-password",type:"password",placeholder:"Mindestens 6 Zeichen",value:s,onChange:x=>i(x.target.value),className:"pl-10",required:!0,disabled:n,minLength:6})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"signup-institution",children:"Institution"}),c.jsxs("div",{className:"relative",children:[c.jsx(MR,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),c.jsx(Ze,{id:"signup-institution",type:"text",placeholder:"Universitätsspital Zürich",value:l,onChange:x=>u(x.target.value),className:"pl-10",disabled:n})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(Be,{htmlFor:"signup-pgy",children:"PGY Level"}),c.jsxs("div",{className:"relative",children:[c.jsx(eA,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),c.jsxs("select",{id:"signup-pgy",value:h,onChange:x=>f(x.target.value),className:"w-full pl-10 pr-3 py-2 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring",disabled:n,children:[c.jsx("option",{value:"1",children:"PGY-1"}),c.jsx("option",{value:"2",children:"PGY-2"}),c.jsx("option",{value:"3",children:"PGY-3"}),c.jsx("option",{value:"4",children:"PGY-4"}),c.jsx("option",{value:"5",children:"PGY-5"}),c.jsx("option",{value:"6",children:"PGY-6"}),c.jsx("option",{value:"7",children:"PGY-7"})]})]})]}),p&&c.jsx(Kd,{variant:"destructive",children:c.jsx(Xd,{children:p})}),c.jsxs(J,{type:"submit",className:"w-full",disabled:n,children:[n&&c.jsx(X1,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrieren"]})]})})]})})]})]})})}const WX=()=>{const n=Gu();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),c.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},VX=new rz,GX=()=>{const n=qu();return _.useEffect(()=>{const e=sessionStorage.getItem("intendedRoute");e&&(sessionStorage.removeItem("intendedRoute"),n(e))},[n]),c.jsxs(Kz,{children:[c.jsx(ei,{path:"/",element:c.jsx(jH,{})}),c.jsx(ei,{path:"/auth",element:c.jsx(HX,{})}),c.jsx(ei,{path:"/dashboard",element:c.jsx(KH,{})}),c.jsx(ei,{path:"/courses",element:c.jsx(BV,{})}),c.jsx(ei,{path:"/courses/:id",element:c.jsx(hG,{})}),c.jsx(ei,{path:"/profile/:handle",element:c.jsx(QH,{})}),c.jsx(ei,{path:"/fmh",element:c.jsx(N9,{})}),c.jsx(ei,{path:"/admin",element:c.jsx(UX,{})}),c.jsx(ei,{path:"*",element:c.jsx(WX,{})})]})},qX=()=>c.jsx(iz,{client:VX,children:c.jsxs(EH,{children:[c.jsx(nB,{}),c.jsx(IB,{}),c.jsx(r6,{basename:"/swiss-med-track",children:c.jsx(GX,{})})]})});sR(document.getElementById("root")).render(c.jsx(qX,{}));
