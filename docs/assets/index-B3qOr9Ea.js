var HF=Object.defineProperty;var kA=n=>{throw TypeError(n)};var WF=(n,e,t)=>e in n?HF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var q=(n,e,t)=>WF(n,typeof e!="symbol"?e+"":e,t),Hw=(n,e,t)=>e.has(n)||kA("Cannot "+t);var u=(n,e,t)=>(Hw(n,e,"read from private field"),t?t.call(n):e.get(n)),C=(n,e,t)=>e.has(n)?kA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),S=(n,e,t,r)=>(Hw(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),k=(n,e,t)=>(Hw(n,e,"access private method"),t);var Xt=(n,e,t,r)=>({set _(s){S(n,e,s,t)},get _(){return u(n,e,r)}});function VF(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var ds=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function GF(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Xk={exports:{}},B0={},Qk={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dv=Symbol.for("react.element"),qF=Symbol.for("react.portal"),KF=Symbol.for("react.fragment"),YF=Symbol.for("react.strict_mode"),XF=Symbol.for("react.profiler"),QF=Symbol.for("react.provider"),JF=Symbol.for("react.context"),ZF=Symbol.for("react.forward_ref"),e4=Symbol.for("react.suspense"),t4=Symbol.for("react.memo"),n4=Symbol.for("react.lazy"),PA=Symbol.iterator;function r4(n){return n===null||typeof n!="object"?null:(n=PA&&n[PA]||n["@@iterator"],typeof n=="function"?n:null)}var Jk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zk=Object.assign,eP={};function Ff(n,e,t){this.props=n,this.context=e,this.refs=eP,this.updater=t||Jk}Ff.prototype.isReactComponent={};Ff.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ff.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function tP(){}tP.prototype=Ff.prototype;function sN(n,e,t){this.props=n,this.context=e,this.refs=eP,this.updater=t||Jk}var iN=sN.prototype=new tP;iN.constructor=sN;Zk(iN,Ff.prototype);iN.isPureReactComponent=!0;var TA=Array.isArray,nP=Object.prototype.hasOwnProperty,aN={current:null},rP={key:!0,ref:!0,__self:!0,__source:!0};function sP(n,e,t){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)nP.call(e,r)&&!rP.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];s.children=c}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:dv,type:n,key:i,ref:a,props:s,_owner:aN.current}}function s4(n,e){return{$$typeof:dv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function oN(n){return typeof n=="object"&&n!==null&&n.$$typeof===dv}function i4(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var RA=/\/+/g;function Ww(n,e){return typeof n=="object"&&n!==null&&n.key!=null?i4(""+n.key):e.toString(36)}function Ey(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case dv:case qF:a=!0}}if(a)return a=n,s=s(a),n=r===""?"."+Ww(a,0):r,TA(s)?(t="",n!=null&&(t=n.replace(RA,"$&/")+"/"),Ey(s,e,t,"",function(d){return d})):s!=null&&(oN(s)&&(s=s4(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(RA,"$&/")+"/")+n)),e.push(s)),1;if(a=0,r=r===""?".":r+":",TA(n))for(var o=0;o<n.length;o++){i=n[o];var c=r+Ww(i,o);a+=Ey(i,e,t,c,s)}else if(c=r4(n),typeof c=="function")for(n=c.call(n),o=0;!(i=n.next()).done;)i=i.value,c=r+Ww(i,o++),a+=Ey(i,e,t,c,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function zv(n,e,t){if(n==null)return n;var r=[],s=0;return Ey(n,r,"","",function(i){return e.call(t,i,s++)}),r}function a4(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Kn={current:null},Ay={transition:null},o4={ReactCurrentDispatcher:Kn,ReactCurrentBatchConfig:Ay,ReactCurrentOwner:aN};function iP(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:zv,forEach:function(n,e,t){zv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return zv(n,function(){e++}),e},toArray:function(n){return zv(n,function(e){return e})||[]},only:function(n){if(!oN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Re.Component=Ff;Re.Fragment=KF;Re.Profiler=XF;Re.PureComponent=sN;Re.StrictMode=YF;Re.Suspense=e4;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o4;Re.act=iP;Re.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=Zk({},n.props),s=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=aN.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(c in e)nP.call(e,c)&&!rP.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:dv,type:n.type,key:s,ref:i,props:r,_owner:a}};Re.createContext=function(n){return n={$$typeof:JF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:QF,_context:n},n.Consumer=n};Re.createElement=sP;Re.createFactory=function(n){var e=sP.bind(null,n);return e.type=n,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(n){return{$$typeof:ZF,render:n}};Re.isValidElement=oN;Re.lazy=function(n){return{$$typeof:n4,_payload:{_status:-1,_result:n},_init:a4}};Re.memo=function(n,e){return{$$typeof:t4,type:n,compare:e===void 0?null:e}};Re.startTransition=function(n){var e=Ay.transition;Ay.transition={};try{n()}finally{Ay.transition=e}};Re.unstable_act=iP;Re.useCallback=function(n,e){return Kn.current.useCallback(n,e)};Re.useContext=function(n){return Kn.current.useContext(n)};Re.useDebugValue=function(){};Re.useDeferredValue=function(n){return Kn.current.useDeferredValue(n)};Re.useEffect=function(n,e){return Kn.current.useEffect(n,e)};Re.useId=function(){return Kn.current.useId()};Re.useImperativeHandle=function(n,e,t){return Kn.current.useImperativeHandle(n,e,t)};Re.useInsertionEffect=function(n,e){return Kn.current.useInsertionEffect(n,e)};Re.useLayoutEffect=function(n,e){return Kn.current.useLayoutEffect(n,e)};Re.useMemo=function(n,e){return Kn.current.useMemo(n,e)};Re.useReducer=function(n,e,t){return Kn.current.useReducer(n,e,t)};Re.useRef=function(n){return Kn.current.useRef(n)};Re.useState=function(n){return Kn.current.useState(n)};Re.useSyncExternalStore=function(n,e,t){return Kn.current.useSyncExternalStore(n,e,t)};Re.useTransition=function(){return Kn.current.useTransition()};Re.version="18.3.1";Qk.exports=Re;var b=Qk.exports;const Y=Yk(b),lN=VF({__proto__:null,default:Y},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4=b,c4=Symbol.for("react.element"),d4=Symbol.for("react.fragment"),u4=Object.prototype.hasOwnProperty,h4=l4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f4={key:!0,ref:!0,__self:!0,__source:!0};function aP(n,e,t){var r,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)u4.call(e,r)&&!f4.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:c4,type:n,key:i,ref:a,props:s,_owner:h4.current}}B0.Fragment=d4;B0.jsx=aP;B0.jsxs=aP;Xk.exports=B0;var l=Xk.exports,oP={exports:{}},Wr={},lP={exports:{}},cP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,M){var U=D.length;D.push(M);e:for(;0<U;){var X=U-1>>>1,$=D[X];if(0<s($,M))D[X]=M,D[U]=$,U=X;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var M=D[0],U=D.pop();if(U!==M){D[0]=U;e:for(var X=0,$=D.length,W=$>>>1;X<W;){var Q=2*(X+1)-1,K=D[Q],le=Q+1,H=D[le];if(0>s(K,U))le<$&&0>s(H,K)?(D[X]=H,D[le]=U,X=le):(D[X]=K,D[Q]=U,X=Q);else if(le<$&&0>s(H,U))D[X]=H,D[le]=U,X=le;else break e}}return M}function s(D,M){var U=D.sortIndex-M.sortIndex;return U!==0?U:D.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],d=[],h=1,f=null,p=3,m=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var M=t(d);M!==null;){if(M.callback===null)r(d);else if(M.startTime<=D)r(d),M.sortIndex=M.expirationTime,e(c,M);else break;M=t(d)}}function N(D){if(g=!1,_(D),!y)if(t(c)!==null)y=!0,B(E);else{var M=t(d);M!==null&&F(N,M.startTime-D)}}function E(D,M){y=!1,g&&(g=!1,v(P),P=-1),m=!0;var U=p;try{for(_(M),f=t(c);f!==null&&(!(f.expirationTime>M)||D&&!I());){var X=f.callback;if(typeof X=="function"){f.callback=null,p=f.priorityLevel;var $=X(f.expirationTime<=M);M=n.unstable_now(),typeof $=="function"?f.callback=$:f===t(c)&&r(c),_(M)}else r(c);f=t(c)}if(f!==null)var W=!0;else{var Q=t(d);Q!==null&&F(N,Q.startTime-M),W=!1}return W}finally{f=null,p=U,m=!1}}var A=!1,j=null,P=-1,T=5,R=-1;function I(){return!(n.unstable_now()-R<T)}function O(){if(j!==null){var D=n.unstable_now();R=D;var M=!0;try{M=j(!0,D)}finally{M?z():(A=!1,j=null)}}else A=!1}var z;if(typeof x=="function")z=function(){x(O)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,V=L.port2;L.port1.onmessage=O,z=function(){V.postMessage(null)}}else z=function(){w(O,0)};function B(D){j=D,A||(A=!0,z())}function F(D,M){P=w(function(){D(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,B(E))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(p){case 1:case 2:case 3:var M=3;break;default:M=p}var U=p;p=M;try{return D()}finally{p=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,M){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=p;p=D;try{return M()}finally{p=U}},n.unstable_scheduleCallback=function(D,M,U){var X=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?X+U:X):U=X,D){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=U+$,D={id:h++,callback:M,priorityLevel:D,startTime:U,expirationTime:$,sortIndex:-1},U>X?(D.sortIndex=U,e(d,D),t(c)===null&&D===t(d)&&(g?(v(P),P=-1):g=!0,F(N,U-X))):(D.sortIndex=$,e(c,D),y||m||(y=!0,B(E))),D},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(D){var M=p;return function(){var U=p;p=M;try{return D.apply(this,arguments)}finally{p=U}}}})(cP);lP.exports=cP;var p4=lP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4=b,Ur=p4;function G(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dP=new Set,rm={};function qd(n,e){wf(n,e),wf(n+"Capture",e)}function wf(n,e){for(rm[n]=e,n=0;n<e.length;n++)dP.add(e[n])}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a1=Object.prototype.hasOwnProperty,g4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,MA={},IA={};function v4(n){return a1.call(IA,n)?!0:a1.call(MA,n)?!1:g4.test(n)?IA[n]=!0:(MA[n]=!0,!1)}function y4(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function x4(n,e,t,r){if(e===null||typeof e>"u"||y4(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yn(n,e,t,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){xn[n]=new Yn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];xn[e]=new Yn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){xn[n]=new Yn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){xn[n]=new Yn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){xn[n]=new Yn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){xn[n]=new Yn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){xn[n]=new Yn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){xn[n]=new Yn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){xn[n]=new Yn(n,5,!1,n.toLowerCase(),null,!1,!1)});var cN=/[\-:]([a-z])/g;function dN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(cN,dN);xn[e]=new Yn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(cN,dN);xn[e]=new Yn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(cN,dN);xn[e]=new Yn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){xn[n]=new Yn(n,1,!1,n.toLowerCase(),null,!1,!1)});xn.xlinkHref=new Yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){xn[n]=new Yn(n,1,!1,n.toLowerCase(),null,!0,!0)});function uN(n,e,t,r){var s=xn.hasOwnProperty(e)?xn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(x4(e,t,s,r)&&(t=null),r||s===null?v4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var to=m4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bv=Symbol.for("react.element"),ju=Symbol.for("react.portal"),Cu=Symbol.for("react.fragment"),hN=Symbol.for("react.strict_mode"),o1=Symbol.for("react.profiler"),uP=Symbol.for("react.provider"),hP=Symbol.for("react.context"),fN=Symbol.for("react.forward_ref"),l1=Symbol.for("react.suspense"),c1=Symbol.for("react.suspense_list"),pN=Symbol.for("react.memo"),xo=Symbol.for("react.lazy"),fP=Symbol.for("react.offscreen"),DA=Symbol.iterator;function tp(n){return n===null||typeof n!="object"?null:(n=DA&&n[DA]||n["@@iterator"],typeof n=="function"?n:null)}var St=Object.assign,Vw;function vp(n){if(Vw===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Vw=e&&e[1]||""}return`
`+Vw+n}var Gw=!1;function qw(n,e){if(!n||Gw)return"";Gw=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){r=d}n.call(e.prototype)}else{try{throw Error()}catch(d){r=d}n()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var c=`
`+s[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=o);break}}}finally{Gw=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?vp(n):""}function w4(n){switch(n.tag){case 5:return vp(n.type);case 16:return vp("Lazy");case 13:return vp("Suspense");case 19:return vp("SuspenseList");case 0:case 2:case 15:return n=qw(n.type,!1),n;case 11:return n=qw(n.type.render,!1),n;case 1:return n=qw(n.type,!0),n;default:return""}}function d1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Cu:return"Fragment";case ju:return"Portal";case o1:return"Profiler";case hN:return"StrictMode";case l1:return"Suspense";case c1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case hP:return(n.displayName||"Context")+".Consumer";case uP:return(n._context.displayName||"Context")+".Provider";case fN:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case pN:return e=n.displayName||null,e!==null?e:d1(n.type)||"Memo";case xo:e=n._payload,n=n._init;try{return d1(n(e))}catch{}}return null}function b4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return d1(e);case 8:return e===hN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _4(n){var e=pP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Uv(n){n._valueTracker||(n._valueTracker=_4(n))}function mP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=pP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Nx(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function u1(n,e){var t=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function OA(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Tl(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gP(n,e){e=e.checked,e!=null&&uN(n,"checked",e,!1)}function h1(n,e){gP(n,e);var t=Tl(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?f1(n,e.type,t):e.hasOwnProperty("defaultValue")&&f1(n,e.type,Tl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function LA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function f1(n,e,t){(e!=="number"||Nx(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var yp=Array.isArray;function Hu(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Tl(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function p1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function FA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(G(92));if(yp(t)){if(1<t.length)throw Error(G(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Tl(t)}}function vP(n,e){var t=Tl(e.value),r=Tl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function $A(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function yP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function m1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?yP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hv,xP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Hv=Hv||document.createElement("div"),Hv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function sm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Up={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S4=["Webkit","ms","Moz","O"];Object.keys(Up).forEach(function(n){S4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Up[e]=Up[n]})});function wP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Up.hasOwnProperty(n)&&Up[n]?(""+e).trim():e+"px"}function bP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=wP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var N4=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g1(n,e){if(e){if(N4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function v1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y1=null;function mN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var x1=null,Wu=null,Vu=null;function zA(n){if(n=fv(n)){if(typeof x1!="function")throw Error(G(280));var e=n.stateNode;e&&(e=G0(e),x1(n.stateNode,n.type,e))}}function _P(n){Wu?Vu?Vu.push(n):Vu=[n]:Wu=n}function SP(){if(Wu){var n=Wu,e=Vu;if(Vu=Wu=null,zA(n),e)for(n=0;n<e.length;n++)zA(e[n])}}function NP(n,e){return n(e)}function EP(){}var Kw=!1;function AP(n,e,t){if(Kw)return n(e,t);Kw=!0;try{return NP(n,e,t)}finally{Kw=!1,(Wu!==null||Vu!==null)&&(EP(),SP())}}function im(n,e){var t=n.stateNode;if(t===null)return null;var r=G0(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(G(231,e,typeof t));return t}var w1=!1;if(Ka)try{var np={};Object.defineProperty(np,"passive",{get:function(){w1=!0}}),window.addEventListener("test",np,np),window.removeEventListener("test",np,np)}catch{w1=!1}function E4(n,e,t,r,s,i,a,o,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var Hp=!1,Ex=null,Ax=!1,b1=null,A4={onError:function(n){Hp=!0,Ex=n}};function j4(n,e,t,r,s,i,a,o,c){Hp=!1,Ex=null,E4.apply(A4,arguments)}function C4(n,e,t,r,s,i,a,o,c){if(j4.apply(this,arguments),Hp){if(Hp){var d=Ex;Hp=!1,Ex=null}else throw Error(G(198));Ax||(Ax=!0,b1=d)}}function Kd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function jP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function BA(n){if(Kd(n)!==n)throw Error(G(188))}function k4(n){var e=n.alternate;if(!e){if(e=Kd(n),e===null)throw Error(G(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return BA(s),n;if(i===r)return BA(s),e;i=i.sibling}throw Error(G(188))}if(t.return!==r.return)t=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a)throw Error(G(189))}}if(t.alternate!==r)throw Error(G(190))}if(t.tag!==3)throw Error(G(188));return t.stateNode.current===t?n:e}function CP(n){return n=k4(n),n!==null?kP(n):null}function kP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=kP(n);if(e!==null)return e;n=n.sibling}return null}var PP=Ur.unstable_scheduleCallback,UA=Ur.unstable_cancelCallback,P4=Ur.unstable_shouldYield,T4=Ur.unstable_requestPaint,kt=Ur.unstable_now,R4=Ur.unstable_getCurrentPriorityLevel,gN=Ur.unstable_ImmediatePriority,TP=Ur.unstable_UserBlockingPriority,jx=Ur.unstable_NormalPriority,M4=Ur.unstable_LowPriority,RP=Ur.unstable_IdlePriority,U0=null,zi=null;function I4(n){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(U0,n,void 0,(n.current.flags&128)===128)}catch{}}var Gs=Math.clz32?Math.clz32:L4,D4=Math.log,O4=Math.LN2;function L4(n){return n>>>=0,n===0?32:31-(D4(n)/O4|0)|0}var Wv=64,Vv=4194304;function xp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Cx(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?r=xp(o):(i&=a,i!==0&&(r=xp(i)))}else a=t&~s,a!==0?r=xp(a):i!==0&&(r=xp(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Gs(e),s=1<<t,r|=n[t],e&=~s;return r}function F4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $4(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-Gs(i),o=1<<a,c=s[a];c===-1?(!(o&t)||o&r)&&(s[a]=F4(o,e)):c<=e&&(n.expiredLanes|=o),i&=~o}}function _1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function MP(){var n=Wv;return Wv<<=1,!(Wv&4194240)&&(Wv=64),n}function Yw(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function uv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Gs(e),n[e]=t}function z4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Gs(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function vN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Gs(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Xe=0;function IP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var DP,yN,OP,LP,FP,S1=!1,Gv=[],bl=null,_l=null,Sl=null,am=new Map,om=new Map,bo=[],B4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HA(n,e){switch(n){case"focusin":case"focusout":bl=null;break;case"dragenter":case"dragleave":_l=null;break;case"mouseover":case"mouseout":Sl=null;break;case"pointerover":case"pointerout":am.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":om.delete(e.pointerId)}}function rp(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=fv(e),e!==null&&yN(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function U4(n,e,t,r,s){switch(e){case"focusin":return bl=rp(bl,n,e,t,r,s),!0;case"dragenter":return _l=rp(_l,n,e,t,r,s),!0;case"mouseover":return Sl=rp(Sl,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return am.set(i,rp(am.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,om.set(i,rp(om.get(i)||null,n,e,t,r,s)),!0}return!1}function $P(n){var e=fc(n.target);if(e!==null){var t=Kd(e);if(t!==null){if(e=t.tag,e===13){if(e=jP(t),e!==null){n.blockedOn=e,FP(n.priority,function(){OP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jy(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=N1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);y1=r,t.target.dispatchEvent(r),y1=null}else return e=fv(t),e!==null&&yN(e),n.blockedOn=t,!1;e.shift()}return!0}function WA(n,e,t){jy(n)&&t.delete(e)}function H4(){S1=!1,bl!==null&&jy(bl)&&(bl=null),_l!==null&&jy(_l)&&(_l=null),Sl!==null&&jy(Sl)&&(Sl=null),am.forEach(WA),om.forEach(WA)}function sp(n,e){n.blockedOn===e&&(n.blockedOn=null,S1||(S1=!0,Ur.unstable_scheduleCallback(Ur.unstable_NormalPriority,H4)))}function lm(n){function e(s){return sp(s,n)}if(0<Gv.length){sp(Gv[0],n);for(var t=1;t<Gv.length;t++){var r=Gv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(bl!==null&&sp(bl,n),_l!==null&&sp(_l,n),Sl!==null&&sp(Sl,n),am.forEach(e),om.forEach(e),t=0;t<bo.length;t++)r=bo[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<bo.length&&(t=bo[0],t.blockedOn===null);)$P(t),t.blockedOn===null&&bo.shift()}var Gu=to.ReactCurrentBatchConfig,kx=!0;function W4(n,e,t,r){var s=Xe,i=Gu.transition;Gu.transition=null;try{Xe=1,xN(n,e,t,r)}finally{Xe=s,Gu.transition=i}}function V4(n,e,t,r){var s=Xe,i=Gu.transition;Gu.transition=null;try{Xe=4,xN(n,e,t,r)}finally{Xe=s,Gu.transition=i}}function xN(n,e,t,r){if(kx){var s=N1(n,e,t,r);if(s===null)ib(n,e,r,Px,t),HA(n,r);else if(U4(s,n,e,t,r))r.stopPropagation();else if(HA(n,r),e&4&&-1<B4.indexOf(n)){for(;s!==null;){var i=fv(s);if(i!==null&&DP(i),i=N1(n,e,t,r),i===null&&ib(n,e,r,Px,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else ib(n,e,r,null,t)}}var Px=null;function N1(n,e,t,r){if(Px=null,n=mN(r),n=fc(n),n!==null)if(e=Kd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=jP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Px=n,null}function zP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R4()){case gN:return 1;case TP:return 4;case jx:case M4:return 16;case RP:return 536870912;default:return 16}default:return 16}}var yl=null,wN=null,Cy=null;function BP(){if(Cy)return Cy;var n,e=wN,t=e.length,r,s="value"in yl?yl.value:yl.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===s[i-r];r++);return Cy=s.slice(n,1<r?1-r:void 0)}function ky(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function qv(){return!0}function VA(){return!1}function Vr(n){function e(t,r,s,i,a){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qv:VA,this.isPropagationStopped=VA,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=qv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=qv)},persist:function(){},isPersistent:qv}),e}var $f={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bN=Vr($f),hv=St({},$f,{view:0,detail:0}),G4=Vr(hv),Xw,Qw,ip,H0=St({},hv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_N,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ip&&(ip&&n.type==="mousemove"?(Xw=n.screenX-ip.screenX,Qw=n.screenY-ip.screenY):Qw=Xw=0,ip=n),Xw)},movementY:function(n){return"movementY"in n?n.movementY:Qw}}),GA=Vr(H0),q4=St({},H0,{dataTransfer:0}),K4=Vr(q4),Y4=St({},hv,{relatedTarget:0}),Jw=Vr(Y4),X4=St({},$f,{animationName:0,elapsedTime:0,pseudoElement:0}),Q4=Vr(X4),J4=St({},$f,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Z4=Vr(J4),e3=St({},$f,{data:0}),qA=Vr(e3),t3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s3(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=r3[n])?!!e[n]:!1}function _N(){return s3}var i3=St({},hv,{key:function(n){if(n.key){var e=t3[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ky(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?n3[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_N,charCode:function(n){return n.type==="keypress"?ky(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ky(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),a3=Vr(i3),o3=St({},H0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KA=Vr(o3),l3=St({},hv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_N}),c3=Vr(l3),d3=St({},$f,{propertyName:0,elapsedTime:0,pseudoElement:0}),u3=Vr(d3),h3=St({},H0,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),f3=Vr(h3),p3=[9,13,27,32],SN=Ka&&"CompositionEvent"in window,Wp=null;Ka&&"documentMode"in document&&(Wp=document.documentMode);var m3=Ka&&"TextEvent"in window&&!Wp,UP=Ka&&(!SN||Wp&&8<Wp&&11>=Wp),YA=" ",XA=!1;function HP(n,e){switch(n){case"keyup":return p3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ku=!1;function g3(n,e){switch(n){case"compositionend":return WP(e);case"keypress":return e.which!==32?null:(XA=!0,YA);case"textInput":return n=e.data,n===YA&&XA?null:n;default:return null}}function v3(n,e){if(ku)return n==="compositionend"||!SN&&HP(n,e)?(n=BP(),Cy=wN=yl=null,ku=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UP&&e.locale!=="ko"?null:e.data;default:return null}}var y3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!y3[n.type]:e==="textarea"}function VP(n,e,t,r){_P(r),e=Tx(e,"onChange"),0<e.length&&(t=new bN("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Vp=null,cm=null;function x3(n){nT(n,0)}function W0(n){var e=Ru(n);if(mP(e))return n}function w3(n,e){if(n==="change")return e}var GP=!1;if(Ka){var Zw;if(Ka){var eb="oninput"in document;if(!eb){var JA=document.createElement("div");JA.setAttribute("oninput","return;"),eb=typeof JA.oninput=="function"}Zw=eb}else Zw=!1;GP=Zw&&(!document.documentMode||9<document.documentMode)}function ZA(){Vp&&(Vp.detachEvent("onpropertychange",qP),cm=Vp=null)}function qP(n){if(n.propertyName==="value"&&W0(cm)){var e=[];VP(e,cm,n,mN(n)),AP(x3,e)}}function b3(n,e,t){n==="focusin"?(ZA(),Vp=e,cm=t,Vp.attachEvent("onpropertychange",qP)):n==="focusout"&&ZA()}function _3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return W0(cm)}function S3(n,e){if(n==="click")return W0(e)}function N3(n,e){if(n==="input"||n==="change")return W0(e)}function E3(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ks=typeof Object.is=="function"?Object.is:E3;function dm(n,e){if(Ks(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!a1.call(e,s)||!Ks(n[s],e[s]))return!1}return!0}function ej(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function tj(n,e){var t=ej(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ej(t)}}function KP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?KP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function YP(){for(var n=window,e=Nx();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Nx(n.document)}return e}function NN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function A3(n){var e=YP(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&KP(t.ownerDocument.documentElement,t)){if(r!==null&&NN(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=tj(t,i);var a=tj(t,r);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var j3=Ka&&"documentMode"in document&&11>=document.documentMode,Pu=null,E1=null,Gp=null,A1=!1;function nj(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;A1||Pu==null||Pu!==Nx(r)||(r=Pu,"selectionStart"in r&&NN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gp&&dm(Gp,r)||(Gp=r,r=Tx(E1,"onSelect"),0<r.length&&(e=new bN("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Pu)))}function Kv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Tu={animationend:Kv("Animation","AnimationEnd"),animationiteration:Kv("Animation","AnimationIteration"),animationstart:Kv("Animation","AnimationStart"),transitionend:Kv("Transition","TransitionEnd")},tb={},XP={};Ka&&(XP=document.createElement("div").style,"AnimationEvent"in window||(delete Tu.animationend.animation,delete Tu.animationiteration.animation,delete Tu.animationstart.animation),"TransitionEvent"in window||delete Tu.transitionend.transition);function V0(n){if(tb[n])return tb[n];if(!Tu[n])return n;var e=Tu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in XP)return tb[n]=e[t];return n}var QP=V0("animationend"),JP=V0("animationiteration"),ZP=V0("animationstart"),eT=V0("transitionend"),tT=new Map,rj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ul(n,e){tT.set(n,e),qd(e,[n])}for(var nb=0;nb<rj.length;nb++){var rb=rj[nb],C3=rb.toLowerCase(),k3=rb[0].toUpperCase()+rb.slice(1);Ul(C3,"on"+k3)}Ul(QP,"onAnimationEnd");Ul(JP,"onAnimationIteration");Ul(ZP,"onAnimationStart");Ul("dblclick","onDoubleClick");Ul("focusin","onFocus");Ul("focusout","onBlur");Ul(eT,"onTransitionEnd");wf("onMouseEnter",["mouseout","mouseover"]);wf("onMouseLeave",["mouseout","mouseover"]);wf("onPointerEnter",["pointerout","pointerover"]);wf("onPointerLeave",["pointerout","pointerover"]);qd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qd("onBeforeInput",["compositionend","keypress","textInput","paste"]);qd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P3=new Set("cancel close invalid load scroll toggle".split(" ").concat(wp));function sj(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,C4(r,e,void 0,n),n.currentTarget=null}function nT(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==i&&s.isPropagationStopped())break e;sj(s,o,d),i=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,d=o.currentTarget,o=o.listener,c!==i&&s.isPropagationStopped())break e;sj(s,o,d),i=c}}}if(Ax)throw n=b1,Ax=!1,b1=null,n}function dt(n,e){var t=e[T1];t===void 0&&(t=e[T1]=new Set);var r=n+"__bubble";t.has(r)||(rT(e,n,2,!1),t.add(r))}function sb(n,e,t){var r=0;e&&(r|=4),rT(t,n,r,e)}var Yv="_reactListening"+Math.random().toString(36).slice(2);function um(n){if(!n[Yv]){n[Yv]=!0,dP.forEach(function(t){t!=="selectionchange"&&(P3.has(t)||sb(t,!1,n),sb(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Yv]||(e[Yv]=!0,sb("selectionchange",!1,e))}}function rT(n,e,t,r){switch(zP(e)){case 1:var s=W4;break;case 4:s=V4;break;default:s=xN}t=s.bind(null,e,t,n),s=void 0,!w1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function ib(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;o!==null;){if(a=fc(o),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}o=o.parentNode}}r=r.return}AP(function(){var d=i,h=mN(t),f=[];e:{var p=tT.get(n);if(p!==void 0){var m=bN,y=n;switch(n){case"keypress":if(ky(t)===0)break e;case"keydown":case"keyup":m=a3;break;case"focusin":y="focus",m=Jw;break;case"focusout":y="blur",m=Jw;break;case"beforeblur":case"afterblur":m=Jw;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=GA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=K4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=c3;break;case QP:case JP:case ZP:m=Q4;break;case eT:m=u3;break;case"scroll":m=G4;break;case"wheel":m=f3;break;case"copy":case"cut":case"paste":m=Z4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=KA}var g=(e&4)!==0,w=!g&&n==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var x=d,_;x!==null;){_=x;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,v!==null&&(N=im(x,v),N!=null&&g.push(hm(x,N,_)))),w)break;x=x.return}0<g.length&&(p=new m(p,y,null,t,h),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==y1&&(y=t.relatedTarget||t.fromElement)&&(fc(y)||y[Ya]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=d,y=y?fc(y):null,y!==null&&(w=Kd(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=d),m!==y)){if(g=GA,N="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(g=KA,N="onPointerLeave",v="onPointerEnter",x="pointer"),w=m==null?p:Ru(m),_=y==null?p:Ru(y),p=new g(N,x+"leave",m,t,h),p.target=w,p.relatedTarget=_,N=null,fc(h)===d&&(g=new g(v,x+"enter",y,t,h),g.target=_,g.relatedTarget=w,N=g),w=N,m&&y)t:{for(g=m,v=y,x=0,_=g;_;_=iu(_))x++;for(_=0,N=v;N;N=iu(N))_++;for(;0<x-_;)g=iu(g),x--;for(;0<_-x;)v=iu(v),_--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=iu(g),v=iu(v)}g=null}else g=null;m!==null&&ij(f,p,m,g,!1),y!==null&&w!==null&&ij(f,w,y,g,!0)}}e:{if(p=d?Ru(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var E=w3;else if(QA(p))if(GP)E=N3;else{E=_3;var A=b3}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=S3);if(E&&(E=E(n,d))){VP(f,E,t,h);break e}A&&A(n,p,d),n==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&f1(p,"number",p.value)}switch(A=d?Ru(d):window,n){case"focusin":(QA(A)||A.contentEditable==="true")&&(Pu=A,E1=d,Gp=null);break;case"focusout":Gp=E1=Pu=null;break;case"mousedown":A1=!0;break;case"contextmenu":case"mouseup":case"dragend":A1=!1,nj(f,t,h);break;case"selectionchange":if(j3)break;case"keydown":case"keyup":nj(f,t,h)}var j;if(SN)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ku?HP(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(UP&&t.locale!=="ko"&&(ku||P!=="onCompositionStart"?P==="onCompositionEnd"&&ku&&(j=BP()):(yl=h,wN="value"in yl?yl.value:yl.textContent,ku=!0)),A=Tx(d,P),0<A.length&&(P=new qA(P,n,null,t,h),f.push({event:P,listeners:A}),j?P.data=j:(j=WP(t),j!==null&&(P.data=j)))),(j=m3?g3(n,t):v3(n,t))&&(d=Tx(d,"onBeforeInput"),0<d.length&&(h=new qA("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=j))}nT(f,e)})}function hm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Tx(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=im(n,t),i!=null&&r.unshift(hm(n,i,s)),i=im(n,e),i!=null&&r.push(hm(n,i,s))),n=n.return}return r}function iu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ij(n,e,t,r,s){for(var i=e._reactName,a=[];t!==null&&t!==r;){var o=t,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,s?(c=im(t,i),c!=null&&a.unshift(hm(t,c,o))):s||(c=im(t,i),c!=null&&a.push(hm(t,c,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var T3=/\r\n?/g,R3=/\u0000|\uFFFD/g;function aj(n){return(typeof n=="string"?n:""+n).replace(T3,`
`).replace(R3,"")}function Xv(n,e,t){if(e=aj(e),aj(n)!==e&&t)throw Error(G(425))}function Rx(){}var j1=null,C1=null;function k1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var P1=typeof setTimeout=="function"?setTimeout:void 0,M3=typeof clearTimeout=="function"?clearTimeout:void 0,oj=typeof Promise=="function"?Promise:void 0,I3=typeof queueMicrotask=="function"?queueMicrotask:typeof oj<"u"?function(n){return oj.resolve(null).then(n).catch(D3)}:P1;function D3(n){setTimeout(function(){throw n})}function ab(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),lm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);lm(e)}function Nl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function lj(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var zf=Math.random().toString(36).slice(2),Mi="__reactFiber$"+zf,fm="__reactProps$"+zf,Ya="__reactContainer$"+zf,T1="__reactEvents$"+zf,O3="__reactListeners$"+zf,L3="__reactHandles$"+zf;function fc(n){var e=n[Mi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ya]||t[Mi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=lj(n);n!==null;){if(t=n[Mi])return t;n=lj(n)}return e}n=t,t=n.parentNode}return null}function fv(n){return n=n[Mi]||n[Ya],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ru(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(G(33))}function G0(n){return n[fm]||null}var R1=[],Mu=-1;function Hl(n){return{current:n}}function ht(n){0>Mu||(n.current=R1[Mu],R1[Mu]=null,Mu--)}function it(n,e){Mu++,R1[Mu]=n.current,n.current=e}var Rl={},kn=Hl(Rl),dr=Hl(!1),Pd=Rl;function bf(n,e){var t=n.type.contextTypes;if(!t)return Rl;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function ur(n){return n=n.childContextTypes,n!=null}function Mx(){ht(dr),ht(kn)}function cj(n,e,t){if(kn.current!==Rl)throw Error(G(168));it(kn,e),it(dr,t)}function sT(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,b4(n)||"Unknown",s));return St({},t,r)}function Ix(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Rl,Pd=kn.current,it(kn,n),it(dr,dr.current),!0}function dj(n,e,t){var r=n.stateNode;if(!r)throw Error(G(169));t?(n=sT(n,e,Pd),r.__reactInternalMemoizedMergedChildContext=n,ht(dr),ht(kn),it(kn,n)):ht(dr),it(dr,t)}var la=null,q0=!1,ob=!1;function iT(n){la===null?la=[n]:la.push(n)}function F3(n){q0=!0,iT(n)}function Wl(){if(!ob&&la!==null){ob=!0;var n=0,e=Xe;try{var t=la;for(Xe=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}la=null,q0=!1}catch(s){throw la!==null&&(la=la.slice(n+1)),PP(gN,Wl),s}finally{Xe=e,ob=!1}}return null}var Iu=[],Du=0,Dx=null,Ox=0,ss=[],is=0,Td=null,Ha=1,Wa="";function nc(n,e){Iu[Du++]=Ox,Iu[Du++]=Dx,Dx=n,Ox=e}function aT(n,e,t){ss[is++]=Ha,ss[is++]=Wa,ss[is++]=Td,Td=n;var r=Ha;n=Wa;var s=32-Gs(r)-1;r&=~(1<<s),t+=1;var i=32-Gs(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ha=1<<32-Gs(e)+s|t<<s|r,Wa=i+n}else Ha=1<<i|t<<s|r,Wa=n}function EN(n){n.return!==null&&(nc(n,1),aT(n,1,0))}function AN(n){for(;n===Dx;)Dx=Iu[--Du],Iu[Du]=null,Ox=Iu[--Du],Iu[Du]=null;for(;n===Td;)Td=ss[--is],ss[is]=null,Wa=ss[--is],ss[is]=null,Ha=ss[--is],ss[is]=null}var $r=null,Fr=null,yt=!1,Hs=null;function oT(n,e){var t=os(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function uj(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,$r=n,Fr=Nl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,$r=n,Fr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Td!==null?{id:Ha,overflow:Wa}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=os(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,$r=n,Fr=null,!0):!1;default:return!1}}function M1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function I1(n){if(yt){var e=Fr;if(e){var t=e;if(!uj(n,e)){if(M1(n))throw Error(G(418));e=Nl(t.nextSibling);var r=$r;e&&uj(n,e)?oT(r,t):(n.flags=n.flags&-4097|2,yt=!1,$r=n)}}else{if(M1(n))throw Error(G(418));n.flags=n.flags&-4097|2,yt=!1,$r=n}}}function hj(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;$r=n}function Qv(n){if(n!==$r)return!1;if(!yt)return hj(n),yt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!k1(n.type,n.memoizedProps)),e&&(e=Fr)){if(M1(n))throw lT(),Error(G(418));for(;e;)oT(n,e),e=Nl(e.nextSibling)}if(hj(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(G(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Fr=Nl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Fr=null}}else Fr=$r?Nl(n.stateNode.nextSibling):null;return!0}function lT(){for(var n=Fr;n;)n=Nl(n.nextSibling)}function _f(){Fr=$r=null,yt=!1}function jN(n){Hs===null?Hs=[n]:Hs.push(n)}var $3=to.ReactCurrentBatchConfig;function ap(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(G(309));var r=t.stateNode}if(!r)throw Error(G(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error(G(284));if(!t._owner)throw Error(G(290,n))}return n}function Jv(n,e){throw n=Object.prototype.toString.call(e),Error(G(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function fj(n){var e=n._init;return e(n._payload)}function cT(n){function e(v,x){if(n){var _=v.deletions;_===null?(v.deletions=[x],v.flags|=16):_.push(x)}}function t(v,x){if(!n)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Cl(v,x),v.index=0,v.sibling=null,v}function i(v,x,_){return v.index=_,n?(_=v.alternate,_!==null?(_=_.index,_<x?(v.flags|=2,x):_):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,x,_,N){return x===null||x.tag!==6?(x=pb(_,v.mode,N),x.return=v,x):(x=s(x,_),x.return=v,x)}function c(v,x,_,N){var E=_.type;return E===Cu?h(v,x,_.props.children,N,_.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xo&&fj(E)===x.type)?(N=s(x,_.props),N.ref=ap(v,x,_),N.return=v,N):(N=Oy(_.type,_.key,_.props,null,v.mode,N),N.ref=ap(v,x,_),N.return=v,N)}function d(v,x,_,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=mb(_,v.mode,N),x.return=v,x):(x=s(x,_.children||[]),x.return=v,x)}function h(v,x,_,N,E){return x===null||x.tag!==7?(x=Cd(_,v.mode,N,E),x.return=v,x):(x=s(x,_),x.return=v,x)}function f(v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=pb(""+x,v.mode,_),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bv:return _=Oy(x.type,x.key,x.props,null,v.mode,_),_.ref=ap(v,null,x),_.return=v,_;case ju:return x=mb(x,v.mode,_),x.return=v,x;case xo:var N=x._init;return f(v,N(x._payload),_)}if(yp(x)||tp(x))return x=Cd(x,v.mode,_,null),x.return=v,x;Jv(v,x)}return null}function p(v,x,_,N){var E=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:o(v,x,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bv:return _.key===E?c(v,x,_,N):null;case ju:return _.key===E?d(v,x,_,N):null;case xo:return E=_._init,p(v,x,E(_._payload),N)}if(yp(_)||tp(_))return E!==null?null:h(v,x,_,N,null);Jv(v,_)}return null}function m(v,x,_,N,E){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(_)||null,o(x,v,""+N,E);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Bv:return v=v.get(N.key===null?_:N.key)||null,c(x,v,N,E);case ju:return v=v.get(N.key===null?_:N.key)||null,d(x,v,N,E);case xo:var A=N._init;return m(v,x,_,A(N._payload),E)}if(yp(N)||tp(N))return v=v.get(_)||null,h(x,v,N,E,null);Jv(x,N)}return null}function y(v,x,_,N){for(var E=null,A=null,j=x,P=x=0,T=null;j!==null&&P<_.length;P++){j.index>P?(T=j,j=null):T=j.sibling;var R=p(v,j,_[P],N);if(R===null){j===null&&(j=T);break}n&&j&&R.alternate===null&&e(v,j),x=i(R,x,P),A===null?E=R:A.sibling=R,A=R,j=T}if(P===_.length)return t(v,j),yt&&nc(v,P),E;if(j===null){for(;P<_.length;P++)j=f(v,_[P],N),j!==null&&(x=i(j,x,P),A===null?E=j:A.sibling=j,A=j);return yt&&nc(v,P),E}for(j=r(v,j);P<_.length;P++)T=m(j,v,P,_[P],N),T!==null&&(n&&T.alternate!==null&&j.delete(T.key===null?P:T.key),x=i(T,x,P),A===null?E=T:A.sibling=T,A=T);return n&&j.forEach(function(I){return e(v,I)}),yt&&nc(v,P),E}function g(v,x,_,N){var E=tp(_);if(typeof E!="function")throw Error(G(150));if(_=E.call(_),_==null)throw Error(G(151));for(var A=E=null,j=x,P=x=0,T=null,R=_.next();j!==null&&!R.done;P++,R=_.next()){j.index>P?(T=j,j=null):T=j.sibling;var I=p(v,j,R.value,N);if(I===null){j===null&&(j=T);break}n&&j&&I.alternate===null&&e(v,j),x=i(I,x,P),A===null?E=I:A.sibling=I,A=I,j=T}if(R.done)return t(v,j),yt&&nc(v,P),E;if(j===null){for(;!R.done;P++,R=_.next())R=f(v,R.value,N),R!==null&&(x=i(R,x,P),A===null?E=R:A.sibling=R,A=R);return yt&&nc(v,P),E}for(j=r(v,j);!R.done;P++,R=_.next())R=m(j,v,P,R.value,N),R!==null&&(n&&R.alternate!==null&&j.delete(R.key===null?P:R.key),x=i(R,x,P),A===null?E=R:A.sibling=R,A=R);return n&&j.forEach(function(O){return e(v,O)}),yt&&nc(v,P),E}function w(v,x,_,N){if(typeof _=="object"&&_!==null&&_.type===Cu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Bv:e:{for(var E=_.key,A=x;A!==null;){if(A.key===E){if(E=_.type,E===Cu){if(A.tag===7){t(v,A.sibling),x=s(A,_.props.children),x.return=v,v=x;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xo&&fj(E)===A.type){t(v,A.sibling),x=s(A,_.props),x.ref=ap(v,A,_),x.return=v,v=x;break e}t(v,A);break}else e(v,A);A=A.sibling}_.type===Cu?(x=Cd(_.props.children,v.mode,N,_.key),x.return=v,v=x):(N=Oy(_.type,_.key,_.props,null,v.mode,N),N.ref=ap(v,x,_),N.return=v,v=N)}return a(v);case ju:e:{for(A=_.key;x!==null;){if(x.key===A)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){t(v,x.sibling),x=s(x,_.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=mb(_,v.mode,N),x.return=v,v=x}return a(v);case xo:return A=_._init,w(v,x,A(_._payload),N)}if(yp(_))return y(v,x,_,N);if(tp(_))return g(v,x,_,N);Jv(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(t(v,x.sibling),x=s(x,_),x.return=v,v=x):(t(v,x),x=pb(_,v.mode,N),x.return=v,v=x),a(v)):t(v,x)}return w}var Sf=cT(!0),dT=cT(!1),Lx=Hl(null),Fx=null,Ou=null,CN=null;function kN(){CN=Ou=Fx=null}function PN(n){var e=Lx.current;ht(Lx),n._currentValue=e}function D1(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function qu(n,e){Fx=n,CN=Ou=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(lr=!0),n.firstContext=null)}function us(n){var e=n._currentValue;if(CN!==n)if(n={context:n,memoizedValue:e,next:null},Ou===null){if(Fx===null)throw Error(G(308));Ou=n,Fx.dependencies={lanes:0,firstContext:n}}else Ou=Ou.next=n;return e}var pc=null;function TN(n){pc===null?pc=[n]:pc.push(n)}function uT(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,TN(e)):(t.next=s.next,s.next=t),e.interleaved=t,Xa(n,r)}function Xa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var wo=!1;function RN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hT(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Va(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function El(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Xa(n,t)}return s=r.interleaved,s===null?(e.next=e,TN(r)):(e.next=s.next,s.next=e),r.interleaved=e,Xa(n,t)}function Py(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,vN(n,t)}}function pj(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function $x(n,e,t,r){var s=n.updateQueue;wo=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=d=c=null,o=i;do{var p=o.lane,m=o.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=n,g=o;switch(p=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=St({},f,p);break e;case 2:wo=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=m,c=f):h=h.next=m,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Md|=a,n.lanes=a,n.memoizedState=f}}function mj(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var pv={},Bi=Hl(pv),pm=Hl(pv),mm=Hl(pv);function mc(n){if(n===pv)throw Error(G(174));return n}function MN(n,e){switch(it(mm,e),it(pm,n),it(Bi,pv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:m1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=m1(e,n)}ht(Bi),it(Bi,e)}function Nf(){ht(Bi),ht(pm),ht(mm)}function fT(n){mc(mm.current);var e=mc(Bi.current),t=m1(e,n.type);e!==t&&(it(pm,n),it(Bi,t))}function IN(n){pm.current===n&&(ht(Bi),ht(pm))}var bt=Hl(0);function zx(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lb=[];function DN(){for(var n=0;n<lb.length;n++)lb[n]._workInProgressVersionPrimary=null;lb.length=0}var Ty=to.ReactCurrentDispatcher,cb=to.ReactCurrentBatchConfig,Rd=0,_t=null,qt=null,sn=null,Bx=!1,qp=!1,gm=0,z3=0;function wn(){throw Error(G(321))}function ON(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ks(n[t],e[t]))return!1;return!0}function LN(n,e,t,r,s,i){if(Rd=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ty.current=n===null||n.memoizedState===null?W3:V3,n=t(r,s),qp){i=0;do{if(qp=!1,gm=0,25<=i)throw Error(G(301));i+=1,sn=qt=null,e.updateQueue=null,Ty.current=G3,n=t(r,s)}while(qp)}if(Ty.current=Ux,e=qt!==null&&qt.next!==null,Rd=0,sn=qt=_t=null,Bx=!1,e)throw Error(G(300));return n}function FN(){var n=gm!==0;return gm=0,n}function li(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?_t.memoizedState=sn=n:sn=sn.next=n,sn}function hs(){if(qt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=qt.next;var e=sn===null?_t.memoizedState:sn.next;if(e!==null)sn=e,qt=n;else{if(n===null)throw Error(G(310));qt=n,n={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},sn===null?_t.memoizedState=sn=n:sn=sn.next=n}return sn}function vm(n,e){return typeof e=="function"?e(n):e}function db(n){var e=hs(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=qt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,c=null,d=i;do{var h=d.lane;if((Rd&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:n(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=f,a=r):c=c.next=f,_t.lanes|=h,Md|=h}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=o,Ks(r,e.memoizedState)||(lr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,_t.lanes|=i,Md|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ub(n){var e=hs(),t=e.queue;if(t===null)throw Error(G(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do i=n(i,a.action),a=a.next;while(a!==s);Ks(i,e.memoizedState)||(lr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function pT(){}function mT(n,e){var t=_t,r=hs(),s=e(),i=!Ks(r.memoizedState,s);if(i&&(r.memoizedState=s,lr=!0),r=r.queue,$N(yT.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||sn!==null&&sn.memoizedState.tag&1){if(t.flags|=2048,ym(9,vT.bind(null,t,r,s,e),void 0,null),an===null)throw Error(G(349));Rd&30||gT(t,e,s)}return s}function gT(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function vT(n,e,t,r){e.value=t,e.getSnapshot=r,xT(e)&&wT(n)}function yT(n,e,t){return t(function(){xT(e)&&wT(n)})}function xT(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ks(n,t)}catch{return!0}}function wT(n){var e=Xa(n,1);e!==null&&qs(e,n,1,-1)}function gj(n){var e=li();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:n},e.queue=n,n=n.dispatch=H3.bind(null,_t,n),[e.memoizedState,n]}function ym(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function bT(){return hs().memoizedState}function Ry(n,e,t,r){var s=li();_t.flags|=n,s.memoizedState=ym(1|e,t,void 0,r===void 0?null:r)}function K0(n,e,t,r){var s=hs();r=r===void 0?null:r;var i=void 0;if(qt!==null){var a=qt.memoizedState;if(i=a.destroy,r!==null&&ON(r,a.deps)){s.memoizedState=ym(e,t,i,r);return}}_t.flags|=n,s.memoizedState=ym(1|e,t,i,r)}function vj(n,e){return Ry(8390656,8,n,e)}function $N(n,e){return K0(2048,8,n,e)}function _T(n,e){return K0(4,2,n,e)}function ST(n,e){return K0(4,4,n,e)}function NT(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function ET(n,e,t){return t=t!=null?t.concat([n]):null,K0(4,4,NT.bind(null,e,n),t)}function zN(){}function AT(n,e){var t=hs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ON(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function jT(n,e){var t=hs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&ON(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function CT(n,e,t){return Rd&21?(Ks(t,e)||(t=MP(),_t.lanes|=t,Md|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,lr=!0),n.memoizedState=t)}function B3(n,e){var t=Xe;Xe=t!==0&&4>t?t:4,n(!0);var r=cb.transition;cb.transition={};try{n(!1),e()}finally{Xe=t,cb.transition=r}}function kT(){return hs().memoizedState}function U3(n,e,t){var r=jl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},PT(n))TT(e,t);else if(t=uT(n,e,t,r),t!==null){var s=Wn();qs(t,n,r,s),RT(t,e,r)}}function H3(n,e,t){var r=jl(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(PT(n))TT(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,t);if(s.hasEagerState=!0,s.eagerState=o,Ks(o,a)){var c=e.interleaved;c===null?(s.next=s,TN(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=uT(n,e,s,r),t!==null&&(s=Wn(),qs(t,n,r,s),RT(t,e,r))}}function PT(n){var e=n.alternate;return n===_t||e!==null&&e===_t}function TT(n,e){qp=Bx=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function RT(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,vN(n,t)}}var Ux={readContext:us,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},W3={readContext:us,useCallback:function(n,e){return li().memoizedState=[n,e===void 0?null:e],n},useContext:us,useEffect:vj,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ry(4194308,4,NT.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ry(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ry(4,2,n,e)},useMemo:function(n,e){var t=li();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=li();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=U3.bind(null,_t,n),[r.memoizedState,n]},useRef:function(n){var e=li();return n={current:n},e.memoizedState=n},useState:gj,useDebugValue:zN,useDeferredValue:function(n){return li().memoizedState=n},useTransition:function(){var n=gj(!1),e=n[0];return n=B3.bind(null,n[1]),li().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=_t,s=li();if(yt){if(t===void 0)throw Error(G(407));t=t()}else{if(t=e(),an===null)throw Error(G(349));Rd&30||gT(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,vj(yT.bind(null,r,i,n),[n]),r.flags|=2048,ym(9,vT.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=li(),e=an.identifierPrefix;if(yt){var t=Wa,r=Ha;t=(r&~(1<<32-Gs(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=gm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=z3++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},V3={readContext:us,useCallback:AT,useContext:us,useEffect:$N,useImperativeHandle:ET,useInsertionEffect:_T,useLayoutEffect:ST,useMemo:jT,useReducer:db,useRef:bT,useState:function(){return db(vm)},useDebugValue:zN,useDeferredValue:function(n){var e=hs();return CT(e,qt.memoizedState,n)},useTransition:function(){var n=db(vm)[0],e=hs().memoizedState;return[n,e]},useMutableSource:pT,useSyncExternalStore:mT,useId:kT,unstable_isNewReconciler:!1},G3={readContext:us,useCallback:AT,useContext:us,useEffect:$N,useImperativeHandle:ET,useInsertionEffect:_T,useLayoutEffect:ST,useMemo:jT,useReducer:ub,useRef:bT,useState:function(){return ub(vm)},useDebugValue:zN,useDeferredValue:function(n){var e=hs();return qt===null?e.memoizedState=n:CT(e,qt.memoizedState,n)},useTransition:function(){var n=ub(vm)[0],e=hs().memoizedState;return[n,e]},useMutableSource:pT,useSyncExternalStore:mT,useId:kT,unstable_isNewReconciler:!1};function As(n,e){if(n&&n.defaultProps){e=St({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function O1(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:St({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Y0={isMounted:function(n){return(n=n._reactInternals)?Kd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Wn(),s=jl(n),i=Va(r,s);i.payload=e,t!=null&&(i.callback=t),e=El(n,i,s),e!==null&&(qs(e,n,s,r),Py(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Wn(),s=jl(n),i=Va(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=El(n,i,s),e!==null&&(qs(e,n,s,r),Py(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Wn(),r=jl(n),s=Va(t,r);s.tag=2,e!=null&&(s.callback=e),e=El(n,s,r),e!==null&&(qs(e,n,r,t),Py(e,n,r))}};function yj(n,e,t,r,s,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!dm(t,r)||!dm(s,i):!0}function MT(n,e,t){var r=!1,s=Rl,i=e.contextType;return typeof i=="object"&&i!==null?i=us(i):(s=ur(e)?Pd:kn.current,r=e.contextTypes,i=(r=r!=null)?bf(n,s):Rl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Y0,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function xj(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Y0.enqueueReplaceState(e,e.state,null)}function L1(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},RN(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=us(i):(i=ur(e)?Pd:kn.current,s.context=bf(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(O1(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Y0.enqueueReplaceState(s,s.state,null),$x(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Ef(n,e){try{var t="",r=e;do t+=w4(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function hb(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function F1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var q3=typeof WeakMap=="function"?WeakMap:Map;function IT(n,e,t){t=Va(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Wx||(Wx=!0,K1=r),F1(n,e)},t}function DT(n,e,t){t=Va(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){F1(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){F1(n,e),typeof r!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function wj(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new q3;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=o$.bind(null,n,e,t),e.then(n,n))}function bj(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function _j(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Va(-1,1),e.tag=2,El(t,e,1))),t.lanes|=1),n)}var K3=to.ReactCurrentOwner,lr=!1;function zn(n,e,t,r){e.child=n===null?dT(e,null,t,r):Sf(e,n.child,t,r)}function Sj(n,e,t,r,s){t=t.render;var i=e.ref;return qu(e,s),r=LN(n,e,t,r,i,s),t=FN(),n!==null&&!lr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Qa(n,e,s)):(yt&&t&&EN(e),e.flags|=1,zn(n,e,r,s),e.child)}function Nj(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!KN(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,OT(n,e,i,r,s)):(n=Oy(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:dm,t(a,r)&&n.ref===e.ref)return Qa(n,e,s)}return e.flags|=1,n=Cl(i,r),n.ref=e.ref,n.return=e,e.child=n}function OT(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(dm(i,r)&&n.ref===e.ref)if(lr=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(lr=!0);else return e.lanes=n.lanes,Qa(n,e,s)}return $1(n,e,t,r,s)}function LT(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Fu,Rr),Rr|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,it(Fu,Rr),Rr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,it(Fu,Rr),Rr|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,it(Fu,Rr),Rr|=r;return zn(n,e,s,t),e.child}function FT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function $1(n,e,t,r,s){var i=ur(t)?Pd:kn.current;return i=bf(e,i),qu(e,s),t=LN(n,e,t,r,i,s),r=FN(),n!==null&&!lr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Qa(n,e,s)):(yt&&r&&EN(e),e.flags|=1,zn(n,e,t,s),e.child)}function Ej(n,e,t,r,s){if(ur(t)){var i=!0;Ix(e)}else i=!1;if(qu(e,s),e.stateNode===null)My(n,e),MT(e,t,r),L1(e,t,r,s),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,d=t.contextType;typeof d=="object"&&d!==null?d=us(d):(d=ur(t)?Pd:kn.current,d=bf(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==d)&&xj(e,a,r,d),wo=!1;var p=e.memoizedState;a.state=p,$x(e,r,a,s),c=e.memoizedState,o!==r||p!==c||dr.current||wo?(typeof h=="function"&&(O1(e,t,h,r),c=e.memoizedState),(o=wo||yj(e,t,o,r,p,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,hT(n,e),o=e.memoizedProps,d=e.type===e.elementType?o:As(e.type,o),a.props=d,f=e.pendingProps,p=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=us(c):(c=ur(t)?Pd:kn.current,c=bf(e,c));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==c)&&xj(e,a,r,c),wo=!1,p=e.memoizedState,a.state=p,$x(e,r,a,s);var y=e.memoizedState;o!==f||p!==y||dr.current||wo?(typeof m=="function"&&(O1(e,t,m,r),y=e.memoizedState),(d=wo||yj(e,t,d,r,p,y,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return z1(n,e,t,r,i,s)}function z1(n,e,t,r,s,i){FT(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&dj(e,t,!1),Qa(n,e,i);r=e.stateNode,K3.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=Sf(e,n.child,null,i),e.child=Sf(e,null,o,i)):zn(n,e,o,i),e.memoizedState=r.state,s&&dj(e,t,!0),e.child}function $T(n){var e=n.stateNode;e.pendingContext?cj(n,e.pendingContext,e.pendingContext!==e.context):e.context&&cj(n,e.context,!1),MN(n,e.containerInfo)}function Aj(n,e,t,r,s){return _f(),jN(s),e.flags|=256,zn(n,e,t,r),e.child}var B1={dehydrated:null,treeContext:null,retryLane:0};function U1(n){return{baseLanes:n,cachePool:null,transitions:null}}function zT(n,e,t){var r=e.pendingProps,s=bt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),it(bt,s&1),n===null)return I1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=J0(a,r,0,null),n=Cd(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=U1(t),e.memoizedState=B1,n):BN(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return Y3(n,e,a,r,o,s,t);if(i){i=r.fallback,a=e.mode,s=n.child,o=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Cl(s,c),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Cl(o,i):(i=Cd(i,a,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=n.child.memoizedState,a=a===null?U1(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=B1,r}return i=n.child,n=i.sibling,r=Cl(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function BN(n,e){return e=J0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Zv(n,e,t,r){return r!==null&&jN(r),Sf(e,n.child,null,t),n=BN(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Y3(n,e,t,r,s,i,a){if(t)return e.flags&256?(e.flags&=-257,r=hb(Error(G(422))),Zv(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=J0({mode:"visible",children:r.children},s,0,null),i=Cd(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Sf(e,n.child,null,a),e.child.memoizedState=U1(a),e.memoizedState=B1,i);if(!(e.mode&1))return Zv(n,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(G(419)),r=hb(i,r,void 0),Zv(n,e,a,r)}if(o=(a&n.childLanes)!==0,lr||o){if(r=an,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Xa(n,s),qs(r,n,s,-1))}return qN(),r=hb(Error(G(421))),Zv(n,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=l$.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,Fr=Nl(s.nextSibling),$r=e,yt=!0,Hs=null,n!==null&&(ss[is++]=Ha,ss[is++]=Wa,ss[is++]=Td,Ha=n.id,Wa=n.overflow,Td=e),e=BN(e,r.children),e.flags|=4096,e)}function jj(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),D1(n.return,e,t)}function fb(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function BT(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(zn(n,e,r.children,t),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&jj(n,t,e);else if(n.tag===19)jj(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(it(bt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&zx(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),fb(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&zx(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}fb(e,!0,t,null,i);break;case"together":fb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function My(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Qa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Md|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(G(153));if(e.child!==null){for(n=e.child,t=Cl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Cl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function X3(n,e,t){switch(e.tag){case 3:$T(e),_f();break;case 5:fT(e);break;case 1:ur(e.type)&&Ix(e);break;case 4:MN(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;it(Lx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(it(bt,bt.current&1),e.flags|=128,null):t&e.child.childLanes?zT(n,e,t):(it(bt,bt.current&1),n=Qa(n,e,t),n!==null?n.sibling:null);it(bt,bt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return BT(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),it(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,LT(n,e,t)}return Qa(n,e,t)}var UT,H1,HT,WT;UT=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};H1=function(){};HT=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,mc(Bi.current);var i=null;switch(t){case"input":s=u1(n,s),r=u1(n,r),i=[];break;case"select":s=St({},s,{value:void 0}),r=St({},r,{value:void 0}),i=[];break;case"textarea":s=p1(n,s),r=p1(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Rx)}g1(t,r);var a;t=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var o=s[d];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(rm.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(i||(i=[]),i.push(d,t)),t=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(rm.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&dt("scroll",n),i||o===c||(i=[])):(i=i||[]).push(d,c))}t&&(i=i||[]).push("style",t);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};WT=function(n,e,t,r){t!==r&&(e.flags|=4)};function op(n,e){if(!yt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function bn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Q3(n,e,t){var r=e.pendingProps;switch(AN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return ur(e.type)&&Mx(),bn(e),null;case 3:return r=e.stateNode,Nf(),ht(dr),ht(kn),DN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Qv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hs!==null&&(Q1(Hs),Hs=null))),H1(n,e),bn(e),null;case 5:IN(e);var s=mc(mm.current);if(t=e.type,n!==null&&e.stateNode!=null)HT(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return bn(e),null}if(n=mc(Bi.current),Qv(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Mi]=e,r[fm]=i,n=(e.mode&1)!==0,t){case"dialog":dt("cancel",r),dt("close",r);break;case"iframe":case"object":case"embed":dt("load",r);break;case"video":case"audio":for(s=0;s<wp.length;s++)dt(wp[s],r);break;case"source":dt("error",r);break;case"img":case"image":case"link":dt("error",r),dt("load",r);break;case"details":dt("toggle",r);break;case"input":OA(r,i),dt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},dt("invalid",r);break;case"textarea":FA(r,i),dt("invalid",r)}g1(t,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&Xv(r.textContent,o,n),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Xv(r.textContent,o,n),s=["children",""+o]):rm.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&dt("scroll",r)}switch(t){case"input":Uv(r),LA(r,i,!0);break;case"textarea":Uv(r),$A(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Rx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[Mi]=e,n[fm]=r,UT(n,e,!1,!1),e.stateNode=n;e:{switch(a=v1(t,r),t){case"dialog":dt("cancel",n),dt("close",n),s=r;break;case"iframe":case"object":case"embed":dt("load",n),s=r;break;case"video":case"audio":for(s=0;s<wp.length;s++)dt(wp[s],n);s=r;break;case"source":dt("error",n),s=r;break;case"img":case"image":case"link":dt("error",n),dt("load",n),s=r;break;case"details":dt("toggle",n),s=r;break;case"input":OA(n,r),s=u1(n,r),dt("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=St({},r,{value:void 0}),dt("invalid",n);break;case"textarea":FA(n,r),s=p1(n,r),dt("invalid",n);break;default:s=r}g1(t,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var c=o[i];i==="style"?bP(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xP(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&sm(n,c):typeof c=="number"&&sm(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(rm.hasOwnProperty(i)?c!=null&&i==="onScroll"&&dt("scroll",n):c!=null&&uN(n,i,c,a))}switch(t){case"input":Uv(n),LA(n,r,!1);break;case"textarea":Uv(n),$A(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Tl(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Hu(n,!!r.multiple,i,!1):r.defaultValue!=null&&Hu(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Rx)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bn(e),null;case 6:if(n&&e.stateNode!=null)WT(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(t=mc(mm.current),mc(Bi.current),Qv(e)){if(r=e.stateNode,t=e.memoizedProps,r[Mi]=e,(i=r.nodeValue!==t)&&(n=$r,n!==null))switch(n.tag){case 3:Xv(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Xv(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Mi]=e,e.stateNode=r}return bn(e),null;case 13:if(ht(bt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yt&&Fr!==null&&e.mode&1&&!(e.flags&128))lT(),_f(),e.flags|=98560,i=!1;else if(i=Qv(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[Mi]=e}else _f(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),i=!1}else Hs!==null&&(Q1(Hs),Hs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||bt.current&1?Kt===0&&(Kt=3):qN())),e.updateQueue!==null&&(e.flags|=4),bn(e),null);case 4:return Nf(),H1(n,e),n===null&&um(e.stateNode.containerInfo),bn(e),null;case 10:return PN(e.type._context),bn(e),null;case 17:return ur(e.type)&&Mx(),bn(e),null;case 19:if(ht(bt),i=e.memoizedState,i===null)return bn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)op(i,!1);else{if(Kt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=zx(n),a!==null){for(e.flags|=128,op(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return it(bt,bt.current&1|2),e.child}n=n.sibling}i.tail!==null&&kt()>Af&&(e.flags|=128,r=!0,op(i,!1),e.lanes=4194304)}else{if(!r)if(n=zx(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),op(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!yt)return bn(e),null}else 2*kt()-i.renderingStartTime>Af&&t!==1073741824&&(e.flags|=128,r=!0,op(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,t=bt.current,it(bt,r?t&1|2:t&1),e):(bn(e),null);case 22:case 23:return GN(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rr&1073741824&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function J3(n,e){switch(AN(e),e.tag){case 1:return ur(e.type)&&Mx(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Nf(),ht(dr),ht(kn),DN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return IN(e),null;case 13:if(ht(bt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(G(340));_f()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ht(bt),null;case 4:return Nf(),null;case 10:return PN(e.type._context),null;case 22:case 23:return GN(),null;case 24:return null;default:return null}}var ey=!1,Cn=!1,Z3=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Lu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){At(n,e,r)}else t.current=null}function W1(n,e,t){try{t()}catch(r){At(n,e,r)}}var Cj=!1;function e$(n,e){if(j1=kx,n=YP(),NN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,o=-1,c=-1,d=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||s!==0&&f.nodeType!==3||(o=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++d===s&&(o=a),p===i&&++h===r&&(c=a),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=o===-1||c===-1?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(C1={focusedElem:n,selectionRange:t},kx=!1,ie=e;ie!==null;)if(e=ie,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ie=n;else for(;ie!==null;){e=ie;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:As(e.type,g),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(N){At(e,e.return,N)}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}return y=Cj,Cj=!1,y}function Kp(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&W1(e,t,i)}s=s.next}while(s!==r)}}function X0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function V1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function VT(n){var e=n.alternate;e!==null&&(n.alternate=null,VT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Mi],delete e[fm],delete e[T1],delete e[O3],delete e[L3])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function GT(n){return n.tag===5||n.tag===3||n.tag===4}function kj(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||GT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function G1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Rx));else if(r!==4&&(n=n.child,n!==null))for(G1(n,e,t),n=n.sibling;n!==null;)G1(n,e,t),n=n.sibling}function q1(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(q1(n,e,t),n=n.sibling;n!==null;)q1(n,e,t),n=n.sibling}var fn=null,Bs=!1;function co(n,e,t){for(t=t.child;t!==null;)qT(n,e,t),t=t.sibling}function qT(n,e,t){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(U0,t)}catch{}switch(t.tag){case 5:Cn||Lu(t,e);case 6:var r=fn,s=Bs;fn=null,co(n,e,t),fn=r,Bs=s,fn!==null&&(Bs?(n=fn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):fn.removeChild(t.stateNode));break;case 18:fn!==null&&(Bs?(n=fn,t=t.stateNode,n.nodeType===8?ab(n.parentNode,t):n.nodeType===1&&ab(n,t),lm(n)):ab(fn,t.stateNode));break;case 4:r=fn,s=Bs,fn=t.stateNode.containerInfo,Bs=!0,co(n,e,t),fn=r,Bs=s;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&W1(t,e,a),s=s.next}while(s!==r)}co(n,e,t);break;case 1:if(!Cn&&(Lu(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){At(t,e,o)}co(n,e,t);break;case 21:co(n,e,t);break;case 22:t.mode&1?(Cn=(r=Cn)||t.memoizedState!==null,co(n,e,t),Cn=r):co(n,e,t);break;default:co(n,e,t)}}function Pj(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Z3),e.forEach(function(r){var s=c$.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function ws(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:fn=o.stateNode,Bs=!1;break e;case 3:fn=o.stateNode.containerInfo,Bs=!0;break e;case 4:fn=o.stateNode.containerInfo,Bs=!0;break e}o=o.return}if(fn===null)throw Error(G(160));qT(i,a,s),fn=null,Bs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){At(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KT(e,n),e=e.sibling}function KT(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ws(e,n),si(n),r&4){try{Kp(3,n,n.return),X0(3,n)}catch(g){At(n,n.return,g)}try{Kp(5,n,n.return)}catch(g){At(n,n.return,g)}}break;case 1:ws(e,n),si(n),r&512&&t!==null&&Lu(t,t.return);break;case 5:if(ws(e,n),si(n),r&512&&t!==null&&Lu(t,t.return),n.flags&32){var s=n.stateNode;try{sm(s,"")}catch(g){At(n,n.return,g)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,o=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&gP(s,i),v1(o,a);var d=v1(o,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?bP(s,f):h==="dangerouslySetInnerHTML"?xP(s,f):h==="children"?sm(s,f):uN(s,h,f,d)}switch(o){case"input":h1(s,i);break;case"textarea":vP(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Hu(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Hu(s,!!i.multiple,i.defaultValue,!0):Hu(s,!!i.multiple,i.multiple?[]:"",!1))}s[fm]=i}catch(g){At(n,n.return,g)}}break;case 6:if(ws(e,n),si(n),r&4){if(n.stateNode===null)throw Error(G(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(g){At(n,n.return,g)}}break;case 3:if(ws(e,n),si(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{lm(e.containerInfo)}catch(g){At(n,n.return,g)}break;case 4:ws(e,n),si(n);break;case 13:ws(e,n),si(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(WN=kt())),r&4&&Pj(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Cn=(d=Cn)||h,ws(e,n),Cn=d):ws(e,n),si(n),r&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!h&&n.mode&1)for(ie=n,h=n.child;h!==null;){for(f=ie=h;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Kp(4,p,p.return);break;case 1:Lu(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){At(r,t,g)}}break;case 5:Lu(p,p.return);break;case 22:if(p.memoizedState!==null){Rj(f);continue}}m!==null?(m.return=p,ie=m):Rj(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=wP("display",a))}catch(g){At(n,n.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){At(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ws(e,n),si(n),r&4&&Pj(n);break;case 21:break;default:ws(e,n),si(n)}}function si(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(GT(t)){var r=t;break e}t=t.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(sm(s,""),r.flags&=-33);var i=kj(n);q1(n,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=kj(n);G1(n,o,a);break;default:throw Error(G(161))}}catch(c){At(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function t$(n,e,t){ie=n,YT(n)}function YT(n,e,t){for(var r=(n.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ey;if(!a){var o=s.alternate,c=o!==null&&o.memoizedState!==null||Cn;o=ey;var d=Cn;if(ey=a,(Cn=c)&&!d)for(ie=s;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?Mj(s):c!==null?(c.return=a,ie=c):Mj(s);for(;i!==null;)ie=i,YT(i),i=i.sibling;ie=s,ey=o,Cn=d}Tj(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):Tj(n)}}function Tj(n){for(;ie!==null;){var e=ie;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||X0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:As(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&mj(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}mj(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&lm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Cn||e.flags&512&&V1(e)}catch(p){At(e,e.return,p)}}if(e===n){ie=null;break}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}}function Rj(n){for(;ie!==null;){var e=ie;if(e===n){ie=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ie=t;break}ie=e.return}}function Mj(n){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{X0(4,e)}catch(c){At(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){At(e,s,c)}}var i=e.return;try{V1(e)}catch(c){At(e,i,c)}break;case 5:var a=e.return;try{V1(e)}catch(c){At(e,a,c)}}}catch(c){At(e,e.return,c)}if(e===n){ie=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ie=o;break}ie=e.return}}var n$=Math.ceil,Hx=to.ReactCurrentDispatcher,UN=to.ReactCurrentOwner,ls=to.ReactCurrentBatchConfig,$e=0,an=null,Ot=null,vn=0,Rr=0,Fu=Hl(0),Kt=0,xm=null,Md=0,Q0=0,HN=0,Yp=null,sr=null,WN=0,Af=1/0,sa=null,Wx=!1,K1=null,Al=null,ty=!1,xl=null,Vx=0,Xp=0,Y1=null,Iy=-1,Dy=0;function Wn(){return $e&6?kt():Iy!==-1?Iy:Iy=kt()}function jl(n){return n.mode&1?$e&2&&vn!==0?vn&-vn:$3.transition!==null?(Dy===0&&(Dy=MP()),Dy):(n=Xe,n!==0||(n=window.event,n=n===void 0?16:zP(n.type)),n):1}function qs(n,e,t,r){if(50<Xp)throw Xp=0,Y1=null,Error(G(185));uv(n,t,r),(!($e&2)||n!==an)&&(n===an&&(!($e&2)&&(Q0|=t),Kt===4&&_o(n,vn)),hr(n,r),t===1&&$e===0&&!(e.mode&1)&&(Af=kt()+500,q0&&Wl()))}function hr(n,e){var t=n.callbackNode;$4(n,e);var r=Cx(n,n===an?vn:0);if(r===0)t!==null&&UA(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&UA(t),e===1)n.tag===0?F3(Ij.bind(null,n)):iT(Ij.bind(null,n)),I3(function(){!($e&6)&&Wl()}),t=null;else{switch(IP(r)){case 1:t=gN;break;case 4:t=TP;break;case 16:t=jx;break;case 536870912:t=RP;break;default:t=jx}t=r2(t,XT.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function XT(n,e){if(Iy=-1,Dy=0,$e&6)throw Error(G(327));var t=n.callbackNode;if(Ku()&&n.callbackNode!==t)return null;var r=Cx(n,n===an?vn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Gx(n,r);else{e=r;var s=$e;$e|=2;var i=JT();(an!==n||vn!==e)&&(sa=null,Af=kt()+500,jd(n,e));do try{i$();break}catch(o){QT(n,o)}while(!0);kN(),Hx.current=i,$e=s,Ot!==null?e=0:(an=null,vn=0,e=Kt)}if(e!==0){if(e===2&&(s=_1(n),s!==0&&(r=s,e=X1(n,s))),e===1)throw t=xm,jd(n,0),_o(n,r),hr(n,kt()),t;if(e===6)_o(n,r);else{if(s=n.current.alternate,!(r&30)&&!r$(s)&&(e=Gx(n,r),e===2&&(i=_1(n),i!==0&&(r=i,e=X1(n,i))),e===1))throw t=xm,jd(n,0),_o(n,r),hr(n,kt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:rc(n,sr,sa);break;case 3:if(_o(n,r),(r&130023424)===r&&(e=WN+500-kt(),10<e)){if(Cx(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Wn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=P1(rc.bind(null,n,sr,sa),e);break}rc(n,sr,sa);break;case 4:if(_o(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var a=31-Gs(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*n$(r/1960))-r,10<r){n.timeoutHandle=P1(rc.bind(null,n,sr,sa),r);break}rc(n,sr,sa);break;case 5:rc(n,sr,sa);break;default:throw Error(G(329))}}}return hr(n,kt()),n.callbackNode===t?XT.bind(null,n):null}function X1(n,e){var t=Yp;return n.current.memoizedState.isDehydrated&&(jd(n,e).flags|=256),n=Gx(n,e),n!==2&&(e=sr,sr=t,e!==null&&Q1(e)),n}function Q1(n){sr===null?sr=n:sr.push.apply(sr,n)}function r$(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!Ks(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _o(n,e){for(e&=~HN,e&=~Q0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Gs(e),r=1<<t;n[t]=-1,e&=~r}}function Ij(n){if($e&6)throw Error(G(327));Ku();var e=Cx(n,0);if(!(e&1))return hr(n,kt()),null;var t=Gx(n,e);if(n.tag!==0&&t===2){var r=_1(n);r!==0&&(e=r,t=X1(n,r))}if(t===1)throw t=xm,jd(n,0),_o(n,e),hr(n,kt()),t;if(t===6)throw Error(G(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,rc(n,sr,sa),hr(n,kt()),null}function VN(n,e){var t=$e;$e|=1;try{return n(e)}finally{$e=t,$e===0&&(Af=kt()+500,q0&&Wl())}}function Id(n){xl!==null&&xl.tag===0&&!($e&6)&&Ku();var e=$e;$e|=1;var t=ls.transition,r=Xe;try{if(ls.transition=null,Xe=1,n)return n()}finally{Xe=r,ls.transition=t,$e=e,!($e&6)&&Wl()}}function GN(){Rr=Fu.current,ht(Fu)}function jd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,M3(t)),Ot!==null)for(t=Ot.return;t!==null;){var r=t;switch(AN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mx();break;case 3:Nf(),ht(dr),ht(kn),DN();break;case 5:IN(r);break;case 4:Nf();break;case 13:ht(bt);break;case 19:ht(bt);break;case 10:PN(r.type._context);break;case 22:case 23:GN()}t=t.return}if(an=n,Ot=n=Cl(n.current,null),vn=Rr=e,Kt=0,xm=null,HN=Q0=Md=0,sr=Yp=null,pc!==null){for(e=0;e<pc.length;e++)if(t=pc[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}t.pending=r}pc=null}return n}function QT(n,e){do{var t=Ot;try{if(kN(),Ty.current=Ux,Bx){for(var r=_t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bx=!1}if(Rd=0,sn=qt=_t=null,qp=!1,gm=0,UN.current=null,t===null||t.return===null){Kt=1,xm=e,Ot=null;break}e:{var i=n,a=t.return,o=t,c=e;if(e=vn,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=bj(a);if(m!==null){m.flags&=-257,_j(m,a,o,i,e),m.mode&1&&wj(i,d,e),e=m,c=d;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){wj(i,d,e),qN();break e}c=Error(G(426))}}else if(yt&&o.mode&1){var w=bj(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),_j(w,a,o,i,e),jN(Ef(c,o));break e}}i=c=Ef(c,o),Kt!==4&&(Kt=2),Yp===null?Yp=[i]:Yp.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=IT(i,c,e);pj(i,v);break e;case 1:o=c;var x=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Al===null||!Al.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=DT(i,o,e);pj(i,N);break e}}i=i.return}while(i!==null)}e2(t)}catch(E){e=E,Ot===t&&t!==null&&(Ot=t=t.return);continue}break}while(!0)}function JT(){var n=Hx.current;return Hx.current=Ux,n===null?Ux:n}function qN(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),an===null||!(Md&268435455)&&!(Q0&268435455)||_o(an,vn)}function Gx(n,e){var t=$e;$e|=2;var r=JT();(an!==n||vn!==e)&&(sa=null,jd(n,e));do try{s$();break}catch(s){QT(n,s)}while(!0);if(kN(),$e=t,Hx.current=r,Ot!==null)throw Error(G(261));return an=null,vn=0,Kt}function s$(){for(;Ot!==null;)ZT(Ot)}function i$(){for(;Ot!==null&&!P4();)ZT(Ot)}function ZT(n){var e=n2(n.alternate,n,Rr);n.memoizedProps=n.pendingProps,e===null?e2(n):Ot=e,UN.current=null}function e2(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=J3(t,e),t!==null){t.flags&=32767,Ot=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Kt=6,Ot=null;return}}else if(t=Q3(t,e,Rr),t!==null){Ot=t;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=n}while(e!==null);Kt===0&&(Kt=5)}function rc(n,e,t){var r=Xe,s=ls.transition;try{ls.transition=null,Xe=1,a$(n,e,t,r)}finally{ls.transition=s,Xe=r}return null}function a$(n,e,t,r){do Ku();while(xl!==null);if($e&6)throw Error(G(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(G(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(z4(n,i),n===an&&(Ot=an=null,vn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ty||(ty=!0,r2(jx,function(){return Ku(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=ls.transition,ls.transition=null;var a=Xe;Xe=1;var o=$e;$e|=4,UN.current=null,e$(n,t),KT(t,n),A3(C1),kx=!!j1,C1=j1=null,n.current=t,t$(t),T4(),$e=o,Xe=a,ls.transition=i}else n.current=t;if(ty&&(ty=!1,xl=n,Vx=s),i=n.pendingLanes,i===0&&(Al=null),I4(t.stateNode),hr(n,kt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wx)throw Wx=!1,n=K1,K1=null,n;return Vx&1&&n.tag!==0&&Ku(),i=n.pendingLanes,i&1?n===Y1?Xp++:(Xp=0,Y1=n):Xp=0,Wl(),null}function Ku(){if(xl!==null){var n=IP(Vx),e=ls.transition,t=Xe;try{if(ls.transition=null,Xe=16>n?16:n,xl===null)var r=!1;else{if(n=xl,xl=null,Vx=0,$e&6)throw Error(G(331));var s=$e;for($e|=4,ie=n.current;ie!==null;){var i=ie,a=i.child;if(ie.flags&16){var o=i.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(ie=d;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Kp(8,h,i)}var f=h.child;if(f!==null)f.return=h,ie=f;else for(;ie!==null;){h=ie;var p=h.sibling,m=h.return;if(VT(h),h===d){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}ie=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ie=a;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Kp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ie=v;break e}ie=i.return}}var x=n.current;for(ie=x;ie!==null;){a=ie;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,ie=_;else e:for(a=x;ie!==null;){if(o=ie,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:X0(9,o)}}catch(E){At(o,o.return,E)}if(o===a){ie=null;break e}var N=o.sibling;if(N!==null){N.return=o.return,ie=N;break e}ie=o.return}}if($e=s,Wl(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(U0,n)}catch{}r=!0}return r}finally{Xe=t,ls.transition=e}}return!1}function Dj(n,e,t){e=Ef(t,e),e=IT(n,e,1),n=El(n,e,1),e=Wn(),n!==null&&(uv(n,1,e),hr(n,e))}function At(n,e,t){if(n.tag===3)Dj(n,n,t);else for(;e!==null;){if(e.tag===3){Dj(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Al===null||!Al.has(r))){n=Ef(t,n),n=DT(e,n,1),e=El(e,n,1),n=Wn(),e!==null&&(uv(e,1,n),hr(e,n));break}}e=e.return}}function o$(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Wn(),n.pingedLanes|=n.suspendedLanes&t,an===n&&(vn&t)===t&&(Kt===4||Kt===3&&(vn&130023424)===vn&&500>kt()-WN?jd(n,0):HN|=t),hr(n,e)}function t2(n,e){e===0&&(n.mode&1?(e=Vv,Vv<<=1,!(Vv&130023424)&&(Vv=4194304)):e=1);var t=Wn();n=Xa(n,e),n!==null&&(uv(n,e,t),hr(n,t))}function l$(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),t2(n,t)}function c$(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),t2(n,t)}var n2;n2=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||dr.current)lr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return lr=!1,X3(n,e,t);lr=!!(n.flags&131072)}else lr=!1,yt&&e.flags&1048576&&aT(e,Ox,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;My(n,e),n=e.pendingProps;var s=bf(e,kn.current);qu(e,t),s=LN(null,e,r,n,s,t);var i=FN();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ur(r)?(i=!0,Ix(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,RN(e),s.updater=Y0,e.stateNode=s,s._reactInternals=e,L1(e,r,n,t),e=z1(null,e,r,!0,i,t)):(e.tag=0,yt&&i&&EN(e),zn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(My(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=u$(r),n=As(r,n),s){case 0:e=$1(null,e,r,n,t);break e;case 1:e=Ej(null,e,r,n,t);break e;case 11:e=Sj(null,e,r,n,t);break e;case 14:e=Nj(null,e,r,As(r.type,n),t);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),$1(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),Ej(n,e,r,s,t);case 3:e:{if($T(e),n===null)throw Error(G(387));r=e.pendingProps,i=e.memoizedState,s=i.element,hT(n,e),$x(e,r,null,t);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ef(Error(G(423)),e),e=Aj(n,e,r,t,s);break e}else if(r!==s){s=Ef(Error(G(424)),e),e=Aj(n,e,r,t,s);break e}else for(Fr=Nl(e.stateNode.containerInfo.firstChild),$r=e,yt=!0,Hs=null,t=dT(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(_f(),r===s){e=Qa(n,e,t);break e}zn(n,e,r,t)}e=e.child}return e;case 5:return fT(e),n===null&&I1(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,a=s.children,k1(r,s)?a=null:i!==null&&k1(r,i)&&(e.flags|=32),FT(n,e),zn(n,e,a,t),e.child;case 6:return n===null&&I1(e),null;case 13:return zT(n,e,t);case 4:return MN(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Sf(e,null,r,t):zn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),Sj(n,e,r,s,t);case 7:return zn(n,e,e.pendingProps,t),e.child;case 8:return zn(n,e,e.pendingProps.children,t),e.child;case 12:return zn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,it(Lx,r._currentValue),r._currentValue=a,i!==null)if(Ks(i.value,a)){if(i.children===s.children&&!dr.current){e=Qa(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Va(-1,t&-t),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),D1(i.return,t,e),o.lanes|=t;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(G(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),D1(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}zn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qu(e,t),s=us(s),r=r(s),e.flags|=1,zn(n,e,r,t),e.child;case 14:return r=e.type,s=As(r,e.pendingProps),s=As(r.type,s),Nj(n,e,r,s,t);case 15:return OT(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:As(r,s),My(n,e),e.tag=1,ur(r)?(n=!0,Ix(e)):n=!1,qu(e,t),MT(e,r,s),L1(e,r,s,t),z1(null,e,r,!0,n,t);case 19:return BT(n,e,t);case 22:return LT(n,e,t)}throw Error(G(156,e.tag))};function r2(n,e){return PP(n,e)}function d$(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(n,e,t,r){return new d$(n,e,t,r)}function KN(n){return n=n.prototype,!(!n||!n.isReactComponent)}function u$(n){if(typeof n=="function")return KN(n)?1:0;if(n!=null){if(n=n.$$typeof,n===fN)return 11;if(n===pN)return 14}return 2}function Cl(n,e){var t=n.alternate;return t===null?(t=os(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Oy(n,e,t,r,s,i){var a=2;if(r=n,typeof n=="function")KN(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Cu:return Cd(t.children,s,i,e);case hN:a=8,s|=8;break;case o1:return n=os(12,t,e,s|2),n.elementType=o1,n.lanes=i,n;case l1:return n=os(13,t,e,s),n.elementType=l1,n.lanes=i,n;case c1:return n=os(19,t,e,s),n.elementType=c1,n.lanes=i,n;case fP:return J0(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case uP:a=10;break e;case hP:a=9;break e;case fN:a=11;break e;case pN:a=14;break e;case xo:a=16,r=null;break e}throw Error(G(130,n==null?n:typeof n,""))}return e=os(a,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function Cd(n,e,t,r){return n=os(7,n,r,e),n.lanes=t,n}function J0(n,e,t,r){return n=os(22,n,r,e),n.elementType=fP,n.lanes=t,n.stateNode={isHidden:!1},n}function pb(n,e,t){return n=os(6,n,null,e),n.lanes=t,n}function mb(n,e,t){return e=os(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function h$(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yw(0),this.expirationTimes=Yw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yw(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function YN(n,e,t,r,s,i,a,o,c){return n=new h$(n,e,t,o,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=os(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},RN(i),n}function f$(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ju,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function s2(n){if(!n)return Rl;n=n._reactInternals;e:{if(Kd(n)!==n||n.tag!==1)throw Error(G(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ur(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(n.tag===1){var t=n.type;if(ur(t))return sT(n,t,e)}return e}function i2(n,e,t,r,s,i,a,o,c){return n=YN(t,r,!0,n,s,i,a,o,c),n.context=s2(null),t=n.current,r=Wn(),s=jl(t),i=Va(r,s),i.callback=e??null,El(t,i,s),n.current.lanes=s,uv(n,s,r),hr(n,r),n}function Z0(n,e,t,r){var s=e.current,i=Wn(),a=jl(s);return t=s2(t),e.context===null?e.context=t:e.pendingContext=t,e=Va(i,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=El(s,e,a),n!==null&&(qs(n,s,a,i),Py(n,s,a)),a}function qx(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Oj(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function XN(n,e){Oj(n,e),(n=n.alternate)&&Oj(n,e)}function p$(){return null}var a2=typeof reportError=="function"?reportError:function(n){console.error(n)};function QN(n){this._internalRoot=n}ew.prototype.render=QN.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(G(409));Z0(n,e,null,null)};ew.prototype.unmount=QN.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Id(function(){Z0(null,n,null,null)}),e[Ya]=null}};function ew(n){this._internalRoot=n}ew.prototype.unstable_scheduleHydration=function(n){if(n){var e=LP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<bo.length&&e!==0&&e<bo[t].priority;t++);bo.splice(t,0,n),t===0&&$P(n)}};function JN(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function tw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Lj(){}function m$(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=qx(a);i.call(d)}}var a=i2(e,r,n,0,null,!1,!1,"",Lj);return n._reactRootContainer=a,n[Ya]=a.current,um(n.nodeType===8?n.parentNode:n),Id(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var d=qx(c);o.call(d)}}var c=YN(n,0,!1,null,null,!1,!1,"",Lj);return n._reactRootContainer=c,n[Ya]=c.current,um(n.nodeType===8?n.parentNode:n),Id(function(){Z0(e,c,t,r)}),c}function nw(n,e,t,r,s){var i=t._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var c=qx(a);o.call(c)}}Z0(e,a,n,s)}else a=m$(t,e,n,s,r);return qx(a)}DP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=xp(e.pendingLanes);t!==0&&(vN(e,t|1),hr(e,kt()),!($e&6)&&(Af=kt()+500,Wl()))}break;case 13:Id(function(){var r=Xa(n,1);if(r!==null){var s=Wn();qs(r,n,1,s)}}),XN(n,1)}};yN=function(n){if(n.tag===13){var e=Xa(n,134217728);if(e!==null){var t=Wn();qs(e,n,134217728,t)}XN(n,134217728)}};OP=function(n){if(n.tag===13){var e=jl(n),t=Xa(n,e);if(t!==null){var r=Wn();qs(t,n,e,r)}XN(n,e)}};LP=function(){return Xe};FP=function(n,e){var t=Xe;try{return Xe=n,e()}finally{Xe=t}};x1=function(n,e,t){switch(e){case"input":if(h1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=G0(r);if(!s)throw Error(G(90));mP(r),h1(r,s)}}}break;case"textarea":vP(n,t);break;case"select":e=t.value,e!=null&&Hu(n,!!t.multiple,e,!1)}};NP=VN;EP=Id;var g$={usingClientEntryPoint:!1,Events:[fv,Ru,G0,_P,SP,VN]},lp={findFiberByHostInstance:fc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v$={bundleType:lp.bundleType,version:lp.version,rendererPackageName:lp.rendererPackageName,rendererConfig:lp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:to.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=CP(n),n===null?null:n.stateNode},findFiberByHostInstance:lp.findFiberByHostInstance||p$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{U0=ny.inject(v$),zi=ny}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g$;Wr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!JN(e))throw Error(G(200));return f$(n,e,null,t)};Wr.createRoot=function(n,e){if(!JN(n))throw Error(G(299));var t=!1,r="",s=a2;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=YN(n,1,!1,null,null,t,!1,r,s),n[Ya]=e.current,um(n.nodeType===8?n.parentNode:n),new QN(e)};Wr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(G(188)):(n=Object.keys(n).join(","),Error(G(268,n)));return n=CP(e),n=n===null?null:n.stateNode,n};Wr.flushSync=function(n){return Id(n)};Wr.hydrate=function(n,e,t){if(!tw(e))throw Error(G(200));return nw(null,n,e,!0,t)};Wr.hydrateRoot=function(n,e,t){if(!JN(n))throw Error(G(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",a=a2;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=i2(e,null,n,1,t??null,s,!1,i,a),n[Ya]=e.current,um(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new ew(e)};Wr.render=function(n,e,t){if(!tw(e))throw Error(G(200));return nw(null,n,e,!1,t)};Wr.unmountComponentAtNode=function(n){if(!tw(n))throw Error(G(40));return n._reactRootContainer?(Id(function(){nw(null,null,n,!1,function(){n._reactRootContainer=null,n[Ya]=null})}),!0):!1};Wr.unstable_batchedUpdates=VN;Wr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!tw(t))throw Error(G(200));if(n==null||n._reactInternals===void 0)throw Error(G(38));return nw(n,e,t,!1,r)};Wr.version="18.3.1-next-f1338f8080-20240426";function o2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o2)}catch(n){console.error(n)}}o2(),oP.exports=Wr;var Yd=oP.exports;const l2=Yk(Yd);var c2,Fj=Yd;c2=Fj.createRoot,Fj.hydrateRoot;const y$=1,x$=1e6;let gb=0;function w$(){return gb=(gb+1)%Number.MAX_SAFE_INTEGER,gb.toString()}const vb=new Map,$j=n=>{if(vb.has(n))return;const e=setTimeout(()=>{vb.delete(n),Qp({type:"REMOVE_TOAST",toastId:n})},x$);vb.set(n,e)},b$=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,y$)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?$j(t):n.toasts.forEach(r=>{$j(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Ly=[];let Fy={toasts:[]};function Qp(n){Fy=b$(Fy,n),Ly.forEach(e=>{e(Fy)})}function d2({...n}){const e=w$(),t=s=>Qp({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Qp({type:"DISMISS_TOAST",toastId:e});return Qp({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function ZN(){const[n,e]=b.useState(Fy);return b.useEffect(()=>(Ly.push(e),()=>{const t=Ly.indexOf(e);t>-1&&Ly.splice(t,1)}),[n]),{...n,toast:d2,dismiss:t=>Qp({type:"DISMISS_TOAST",toastId:t})}}function he(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function zj(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Dd(...n){return e=>{let t=!1;const r=n.map(s=>{const i=zj(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():zj(n[s],null)}}}}function We(...n){return b.useCallback(Dd(...n),n)}function _$(n,e){const t=b.createContext(e),r=i=>{const{children:a,...o}=i,c=b.useMemo(()=>o,Object.values(o));return l.jsx(t.Provider,{value:c,children:a})};r.displayName=n+"Provider";function s(i){const a=b.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function ni(n,e=[]){let t=[];function r(i,a){const o=b.createContext(a),c=t.length;t=[...t,a];const d=f=>{var v;const{scope:p,children:m,...y}=f,g=((v=p==null?void 0:p[n])==null?void 0:v[c])||o,w=b.useMemo(()=>y,Object.values(y));return l.jsx(g.Provider,{value:w,children:m})};d.displayName=i+"Provider";function h(f,p){var g;const m=((g=p==null?void 0:p[n])==null?void 0:g[c])||o,y=b.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=t.map(a=>b.createContext(a));return function(o){const c=(o==null?void 0:o[n])||i;return b.useMemo(()=>({[`__scope${n}`]:{...o,[n]:c}}),[o,c])}};return s.scopeName=n,[r,S$(s,...e)]}function S$(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((o,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...o,...f}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Od(n){const e=E$(n),t=b.forwardRef((r,s)=>{const{children:i,...a}=r,o=b.Children.toArray(i),c=o.find(j$);if(c){const d=c.props.children,h=o.map(f=>f===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:f);return l.jsx(e,{...a,ref:s,children:b.isValidElement(d)?b.cloneElement(d,void 0,h):null})}return l.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var N$=Od("Slot");function E$(n){const e=b.forwardRef((t,r)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const a=k$(s),o=C$(i,s.props);return s.type!==b.Fragment&&(o.ref=r?Dd(r,a):a),b.cloneElement(s,o)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var A$=Symbol("radix.slottable");function j$(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===A$}function C$(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...o)=>{const c=i(...o);return s(...o),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function k$(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function eE(n){const e=n+"CollectionProvider",[t,r]=ni(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:v}=g,x=Y.useRef(null),_=Y.useRef(new Map).current;return l.jsx(s,{scope:w,itemMap:_,collectionRef:x,children:v})};a.displayName=e;const o=n+"CollectionSlot",c=Od(o),d=Y.forwardRef((g,w)=>{const{scope:v,children:x}=g,_=i(o,v),N=We(w,_.collectionRef);return l.jsx(c,{ref:N,children:x})});d.displayName=o;const h=n+"CollectionItemSlot",f="data-radix-collection-item",p=Od(h),m=Y.forwardRef((g,w)=>{const{scope:v,children:x,..._}=g,N=Y.useRef(null),E=We(w,N),A=i(h,v);return Y.useEffect(()=>(A.itemMap.set(N,{ref:N,..._}),()=>void A.itemMap.delete(N))),l.jsx(p,{[f]:"",ref:E,children:x})});m.displayName=h;function y(g){const w=i(n+"CollectionConsumer",g);return Y.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((A,j)=>_.indexOf(A.ref.current)-_.indexOf(j.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:d,ItemSlot:m},y,r]}var P$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oe=P$.reduce((n,e)=>{const t=Od(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:a,...o}=s,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function u2(n,e){n&&Yd.flushSync(()=>n.dispatchEvent(e))}function Lt(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function T$(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var R$="DismissableLayer",J1="dismissableLayer.update",M$="dismissableLayer.pointerDownOutside",I$="dismissableLayer.focusOutside",Bj,h2=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mv=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...c}=n,d=b.useContext(h2),[h,f]=b.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),y=We(e,j=>f(j)),g=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),x=h?g.indexOf(h):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,N=x>=v,E=O$(j=>{const P=j.target,T=[...d.branches].some(R=>R.contains(P));!N||T||(s==null||s(j),a==null||a(j),j.defaultPrevented||o==null||o())},p),A=L$(j=>{const P=j.target;[...d.branches].some(R=>R.contains(P))||(i==null||i(j),a==null||a(j),j.defaultPrevented||o==null||o())},p);return T$(j=>{x===d.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&o&&(j.preventDefault(),o()))},p),b.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Bj=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),Uj(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Bj)}},[h,p,t,d]),b.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),Uj())},[h,d]),b.useEffect(()=>{const j=()=>m({});return document.addEventListener(J1,j),()=>document.removeEventListener(J1,j)},[]),l.jsx(oe.div,{...c,ref:y,style:{pointerEvents:_?N?"auto":"none":void 0,...n.style},onFocusCapture:he(n.onFocusCapture,A.onFocusCapture),onBlurCapture:he(n.onBlurCapture,A.onBlurCapture),onPointerDownCapture:he(n.onPointerDownCapture,E.onPointerDownCapture)})});mv.displayName=R$;var D$="DismissableLayerBranch",f2=b.forwardRef((n,e)=>{const t=b.useContext(h2),r=b.useRef(null),s=We(e,r);return b.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),l.jsx(oe.div,{...n,ref:s})});f2.displayName=D$;function O$(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let c=function(){p2(M$,t,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function L$(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&p2(I$,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Uj(){const n=new CustomEvent(J1);document.dispatchEvent(n)}function p2(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?u2(s,i):s.dispatchEvent(i)}var F$=mv,$$=f2,Tt=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},z$="Portal",gv=b.forwardRef((n,e)=>{var o;const{container:t,...r}=n,[s,i]=b.useState(!1);Tt(()=>i(!0),[]);const a=t||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?l2.createPortal(l.jsx(oe.div,{...r,ref:e}),a):null});gv.displayName=z$;function B$(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var ms=n=>{const{present:e,children:t}=n,r=U$(e),s=typeof t=="function"?t({present:r.isPresent}):b.Children.only(t),i=We(r.ref,H$(s));return typeof t=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};ms.displayName="Presence";function U$(n){const[e,t]=b.useState(),r=b.useRef(null),s=b.useRef(n),i=b.useRef("none"),a=n?"mounted":"unmounted",[o,c]=B$(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const d=ry(r.current);i.current=o==="mounted"?d:"none"},[o]),Tt(()=>{const d=r.current,h=s.current;if(h!==n){const p=i.current,m=ry(d);n?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),Tt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=m=>{const g=ry(r.current).includes(m.animationName);if(m.target===e&&g&&(c("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=m=>{m.target===e&&(i.current=ry(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:b.useCallback(d=>{r.current=d?getComputedStyle(d):null,t(d)},[])}}function ry(n){return(n==null?void 0:n.animationName)||"none"}function H$(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var W$=lN[" useInsertionEffect ".trim().toString()]||Tt;function Ld({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,a]=V$({defaultProp:e,onChange:t}),o=n!==void 0,c=o?n:s;{const h=b.useRef(n!==void 0);b.useEffect(()=>{const f=h.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=o},[o,r])}const d=b.useCallback(h=>{var f;if(o){const p=G$(h)?h(n):h;p!==n&&((f=a.current)==null||f.call(a,p))}else i(h)},[o,n,i,a]);return[c,d]}function V$({defaultProp:n,onChange:e}){const[t,r]=b.useState(n),s=b.useRef(t),i=b.useRef(e);return W$(()=>{i.current=e},[e]),b.useEffect(()=>{var a;s.current!==t&&((a=i.current)==null||a.call(i,t),s.current=t)},[t,s]),[t,r,i]}function G$(n){return typeof n=="function"}var m2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),q$="VisuallyHidden",tE=b.forwardRef((n,e)=>l.jsx(oe.span,{...n,ref:e,style:{...m2,...n.style}}));tE.displayName=q$;var nE="ToastProvider",[rE,K$,Y$]=eE("Toast"),[g2,cQ]=ni("Toast",[Y$]),[X$,rw]=g2(nE),v2=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=n,[o,c]=b.useState(null),[d,h]=b.useState(0),f=b.useRef(!1),p=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${nE}\`. Expected non-empty \`string\`.`),l.jsx(rE.Provider,{scope:e,children:l.jsx(X$,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:o,onViewportChange:c,onToastAdd:b.useCallback(()=>h(m=>m+1),[]),onToastRemove:b.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};v2.displayName=nE;var y2="ToastViewport",Q$=["F8"],Z1="toast.viewportPause",e_="toast.viewportResume",x2=b.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=Q$,label:s="Notifications ({hotkey})",...i}=n,a=rw(y2,t),o=K$(t),c=b.useRef(null),d=b.useRef(null),h=b.useRef(null),f=b.useRef(null),p=We(e,f,a.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;b.useEffect(()=>{const w=v=>{var _;r.length!==0&&r.every(N=>v[N]||v.code===N)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),b.useEffect(()=>{const w=c.current,v=f.current;if(y&&w&&v){const x=()=>{if(!a.isClosePausedRef.current){const A=new CustomEvent(Z1);v.dispatchEvent(A),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const A=new CustomEvent(e_);v.dispatchEvent(A),a.isClosePausedRef.current=!1}},N=A=>{!w.contains(A.relatedTarget)&&_()},E=()=>{w.contains(document.activeElement)||_()};return w.addEventListener("focusin",x),w.addEventListener("focusout",N),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",E),window.addEventListener("blur",x),window.addEventListener("focus",_),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",N),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",E),window.removeEventListener("blur",x),window.removeEventListener("focus",_)}}},[y,a.isClosePausedRef]);const g=b.useCallback(({tabbingDirection:w})=>{const x=o().map(_=>{const N=_.ref.current,E=[N,...d5(N)];return w==="forwards"?E:E.reverse()});return(w==="forwards"?x.reverse():x).flat()},[o]);return b.useEffect(()=>{const w=f.current;if(w){const v=x=>{var E,A,j;const _=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!_){const P=document.activeElement,T=x.shiftKey;if(x.target===w&&T){(E=d.current)==null||E.focus();return}const O=g({tabbingDirection:T?"backwards":"forwards"}),z=O.findIndex(L=>L===P);yb(O.slice(z+1))?x.preventDefault():T?(A=d.current)==null||A.focus():(j=h.current)==null||j.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[o,g]),l.jsxs($$,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&l.jsx(t_,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});yb(w)}}),l.jsx(rE.Slot,{scope:t,children:l.jsx(oe.ol,{tabIndex:-1,...i,ref:p})}),y&&l.jsx(t_,{ref:h,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});yb(w)}})]})});x2.displayName=y2;var w2="ToastFocusProxy",t_=b.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=rw(w2,t);return l.jsx(tE,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const o=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(o))&&r()}})});t_.displayName=w2;var vv="Toast",J$="toast.swipeStart",Z$="toast.swipeMove",e5="toast.swipeCancel",t5="toast.swipeEnd",b2=b.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...a}=n,[o,c]=Ld({prop:r,defaultProp:s??!0,onChange:i,caller:vv});return l.jsx(ms,{present:t||o,children:l.jsx(s5,{open:o,...a,ref:e,onClose:()=>c(!1),onPause:Lt(n.onPause),onResume:Lt(n.onResume),onSwipeStart:he(n.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:he(n.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:he(n.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:he(n.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});b2.displayName=vv;var[n5,r5]=g2(vv,{onClose(){}}),s5=b.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:o,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...y}=n,g=rw(vv,t),[w,v]=b.useState(null),x=We(e,L=>v(L)),_=b.useRef(null),N=b.useRef(null),E=s||g.duration,A=b.useRef(0),j=b.useRef(E),P=b.useRef(0),{onToastAdd:T,onToastRemove:R}=g,I=Lt(()=>{var V;(w==null?void 0:w.contains(document.activeElement))&&((V=g.viewport)==null||V.focus()),a()}),O=b.useCallback(L=>{!L||L===1/0||(window.clearTimeout(P.current),A.current=new Date().getTime(),P.current=window.setTimeout(I,L))},[I]);b.useEffect(()=>{const L=g.viewport;if(L){const V=()=>{O(j.current),d==null||d()},B=()=>{const F=new Date().getTime()-A.current;j.current=j.current-F,window.clearTimeout(P.current),c==null||c()};return L.addEventListener(Z1,B),L.addEventListener(e_,V),()=>{L.removeEventListener(Z1,B),L.removeEventListener(e_,V)}}},[g.viewport,E,c,d,O]),b.useEffect(()=>{i&&!g.isClosePausedRef.current&&O(E)},[i,E,g.isClosePausedRef,O]),b.useEffect(()=>(T(),()=>R()),[T,R]);const z=b.useMemo(()=>w?C2(w):null,[w]);return g.viewport?l.jsxs(l.Fragment,{children:[z&&l.jsx(i5,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),l.jsx(n5,{scope:t,onClose:I,children:Yd.createPortal(l.jsx(rE.ItemSlot,{scope:t,children:l.jsx(F$,{asChild:!0,onEscapeKeyDown:he(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:he(n.onKeyDown,L=>{L.key==="Escape"&&(o==null||o(L.nativeEvent),L.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:he(n.onPointerDown,L=>{L.button===0&&(_.current={x:L.clientX,y:L.clientY})}),onPointerMove:he(n.onPointerMove,L=>{if(!_.current)return;const V=L.clientX-_.current.x,B=L.clientY-_.current.y,F=!!N.current,D=["left","right"].includes(g.swipeDirection),M=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,U=D?M(0,V):0,X=D?0:M(0,B),$=L.pointerType==="touch"?10:2,W={x:U,y:X},Q={originalEvent:L,delta:W};F?(N.current=W,sy(Z$,f,Q,{discrete:!1})):Hj(W,g.swipeDirection,$)?(N.current=W,sy(J$,h,Q,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(V)>$||Math.abs(B)>$)&&(_.current=null)}),onPointerUp:he(n.onPointerUp,L=>{const V=N.current,B=L.target;if(B.hasPointerCapture(L.pointerId)&&B.releasePointerCapture(L.pointerId),N.current=null,_.current=null,V){const F=L.currentTarget,D={originalEvent:L,delta:V};Hj(V,g.swipeDirection,g.swipeThreshold)?sy(t5,m,D,{discrete:!0}):sy(e5,p,D,{discrete:!0}),F.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),i5=n=>{const{__scopeToast:e,children:t,...r}=n,s=rw(vv,e),[i,a]=b.useState(!1),[o,c]=b.useState(!1);return l5(()=>a(!0)),b.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),o?null:l.jsx(gv,{asChild:!0,children:l.jsx(tE,{...r,children:i&&l.jsxs(l.Fragment,{children:[s.label," ",t]})})})},a5="ToastTitle",_2=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(oe.div,{...r,ref:e})});_2.displayName=a5;var o5="ToastDescription",S2=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return l.jsx(oe.div,{...r,ref:e})});S2.displayName=o5;var N2="ToastAction",E2=b.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?l.jsx(j2,{altText:t,asChild:!0,children:l.jsx(sE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${N2}\`. Expected non-empty \`string\`.`),null)});E2.displayName=N2;var A2="ToastClose",sE=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=r5(A2,t);return l.jsx(j2,{asChild:!0,children:l.jsx(oe.button,{type:"button",...r,ref:e,onClick:he(n.onClick,s.onClose)})})});sE.displayName=A2;var j2=b.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return l.jsx(oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function C2(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),c5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...C2(r))}}),e}function sy(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?u2(s,i):s.dispatchEvent(i)}var Hj=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function l5(n=()=>{}){const e=Lt(n);Tt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function c5(n){return n.nodeType===n.ELEMENT_NODE}function d5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function yb(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var u5=v2,k2=x2,P2=b2,T2=_2,R2=S2,M2=E2,I2=sE;function D2(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=D2(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function O2(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=D2(n))&&(r&&(r+=" "),r+=e);return r}const Wj=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Vj=O2,yv=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Vj(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=t==null?void 0:t[d],f=i==null?void 0:i[d];if(h===null)return null;const p=Wj(h)||Wj(f);return s[d][p]}),o=t&&Object.entries(t).reduce((d,h)=>{let[f,p]=h;return p===void 0||(d[f]=p),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...i,...o}[g]):{...i,...o}[g]===w})?[...d,f,p]:d},[]);return Vj(n,a,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L2=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},c)=>b.createElement("svg",{ref:c,...f5,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:L2("lucide",s),...o},[...a.map(([d,h])=>b.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(n,e)=>{const t=b.forwardRef(({className:r,...s},i)=>b.createElement(p5,{ref:i,iconNode:e,className:L2(`lucide-${h5(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=pe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=pe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=pe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ml=pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=pe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=pe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=pe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=pe("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=pe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=pe("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=pe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dE="-",P5=n=>{const e=R5(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const o=a.split(dE);return o[0]===""&&o.length!==1&&o.shift(),V2(o,e)||T5(a)},getConflictingClassGroupIds:(a,o)=>{const c=t[a]||[];return o&&r[a]?[...c,...r[a]]:c}}},V2=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?V2(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(dE);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},Qj=/^\[(.+)\]$/,T5=n=>{if(Qj.test(n)){const e=Qj.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},R5=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return I5(Object.entries(n.classGroups),t).forEach(([i,a])=>{s_(a,r,i,e)}),r},s_=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Jj(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(M5(s)){s_(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{s_(a,Jj(e,i),t,r)})})},Jj=(n,e)=>{let t=n;return e.split(dE).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},M5=n=>n.isThemeGetter,I5=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[t,s]}):n,D5=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},G2="!",O5=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,a=o=>{const c=[];let d=0,h=0,f;for(let w=0;w<o.length;w++){let v=o[w];if(d===0){if(v===s&&(r||o.slice(w,w+i)===e)){c.push(o.slice(h,w)),h=w+i;continue}if(v==="/"){f=w;continue}}v==="["?d++:v==="]"&&d--}const p=c.length===0?o:o.substring(h),m=p.startsWith(G2),y=m?p.substring(1):p,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return t?o=>t({className:o,parseClassName:a}):a},L5=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},F5=n=>({cache:D5(n.cacheSize),parseClassName:O5(n),...P5(n)}),$5=/\s+/,z5=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=n.trim().split($5);let o="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(d);let y=!!m,g=r(y?p.substring(0,m):p);if(!g){if(!y){o=d+(o.length>0?" "+o:o);continue}if(g=r(p),!g){o=d+(o.length>0?" "+o:o);continue}y=!1}const w=L5(h).join(":"),v=f?w+G2:w,x=v+g;if(i.includes(x))continue;i.push(x);const _=s(g,y);for(let N=0;N<_.length;++N){const E=_[N];i.push(v+E)}o=d+(o.length>0?" "+o:o)}return o};function B5(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=q2(e))&&(r&&(r+=" "),r+=t);return r}const q2=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=q2(n[r]))&&(t&&(t+=" "),t+=e);return t};function U5(n,...e){let t,r,s,i=a;function a(c){const d=e.reduce((h,f)=>f(h),n());return t=F5(d),r=t.cache.get,s=t.cache.set,i=o,o(c)}function o(c){const d=r(c);if(d)return d;const h=z5(c,t);return s(c,h),h}return function(){return i(B5.apply(null,arguments))}}const ct=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},K2=/^\[(?:([a-z-]+):)?(.+)\]$/i,H5=/^\d+\/\d+$/,W5=new Set(["px","full","screen"]),V5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,K5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Y5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qi=n=>Yu(n)||W5.has(n)||H5.test(n),uo=n=>Uf(n,"length",rz),Yu=n=>!!n&&!Number.isNaN(Number(n)),wb=n=>Uf(n,"number",Yu),cp=n=>!!n&&Number.isInteger(Number(n)),X5=n=>n.endsWith("%")&&Yu(n.slice(0,-1)),Se=n=>K2.test(n),ho=n=>V5.test(n),Q5=new Set(["length","size","percentage"]),J5=n=>Uf(n,Q5,Y2),Z5=n=>Uf(n,"position",Y2),ez=new Set(["image","url"]),tz=n=>Uf(n,ez,iz),nz=n=>Uf(n,"",sz),dp=()=>!0,Uf=(n,e,t)=>{const r=K2.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},rz=n=>G5.test(n)&&!q5.test(n),Y2=()=>!1,sz=n=>K5.test(n),iz=n=>Y5.test(n),az=()=>{const n=ct("colors"),e=ct("spacing"),t=ct("blur"),r=ct("brightness"),s=ct("borderColor"),i=ct("borderRadius"),a=ct("borderSpacing"),o=ct("borderWidth"),c=ct("contrast"),d=ct("grayscale"),h=ct("hueRotate"),f=ct("invert"),p=ct("gap"),m=ct("gradientColorStops"),y=ct("gradientColorStopPositions"),g=ct("inset"),w=ct("margin"),v=ct("opacity"),x=ct("padding"),_=ct("saturate"),N=ct("scale"),E=ct("sepia"),A=ct("skew"),j=ct("space"),P=ct("translate"),T=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Se,e],O=()=>[Se,e],z=()=>["",Qi,uo],L=()=>["auto",Yu,Se],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",Se],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Yu,Se];return{cacheSize:500,separator:":",theme:{colors:[dp],spacing:[Qi,uo],blur:["none","",ho,Se],brightness:X(),borderColor:[n],borderRadius:["none","","full",ho,Se],borderSpacing:O(),borderWidth:z(),contrast:X(),grayscale:M(),hueRotate:X(),invert:M(),gap:O(),gradientColorStops:[n],gradientColorStopPositions:[X5,uo],inset:I(),margin:I(),opacity:X(),padding:O(),saturate:X(),scale:X(),sepia:M(),skew:X(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[ho]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),Se]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",cp,Se]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",cp,Se]}],"grid-cols":[{"grid-cols":[dp]}],"col-start-end":[{col:["auto",{span:["full",cp,Se]},Se]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[dp]}],"row-start-end":[{row:["auto",{span:[cp,Se]},Se]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Se,e]}],"min-w":[{"min-w":[Se,e,"min","max","fit"]}],"max-w":[{"max-w":[Se,e,"none","full","min","max","fit","prose",{screen:[ho]},ho]}],h:[{h:[Se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ho,uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wb]}],"font-family":[{font:[dp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",Yu,wb]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qi,Se]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Qi,uo]}],"underline-offset":[{"underline-offset":["auto",Qi,Se]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),Z5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",J5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tz]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Qi,Se]}],"outline-w":[{outline:[Qi,uo]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Qi,uo]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ho,nz]}],"shadow-color":[{shadow:[dp]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ho,Se]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[cp,Se]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Qi,uo,wb]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oz=U5(az);function te(...n){return oz(O2(n))}const lz=u5,X2=b.forwardRef(({className:n,...e},t)=>l.jsx(k2,{ref:t,className:te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));X2.displayName=k2.displayName;const cz=yv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Q2=b.forwardRef(({className:n,variant:e,...t},r)=>l.jsx(P2,{ref:r,className:te(cz({variant:e}),n),...t}));Q2.displayName=P2.displayName;const dz=b.forwardRef(({className:n,...e},t)=>l.jsx(M2,{ref:t,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));dz.displayName=M2.displayName;const J2=b.forwardRef(({className:n,...e},t)=>l.jsx(I2,{ref:t,className:te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:l.jsx(no,{className:"h-4 w-4"})}));J2.displayName=I2.displayName;const Z2=b.forwardRef(({className:n,...e},t)=>l.jsx(T2,{ref:t,className:te("text-sm font-semibold",n),...e}));Z2.displayName=T2.displayName;const eR=b.forwardRef(({className:n,...e},t)=>l.jsx(R2,{ref:t,className:te("text-sm opacity-90",n),...e}));eR.displayName=R2.displayName;function uz(){const{toasts:n}=ZN();return l.jsxs(lz,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return l.jsxs(Q2,{...i,children:[l.jsxs("div",{className:"grid gap-1",children:[t&&l.jsx(Z2,{children:t}),r&&l.jsx(eR,{children:r})]}),s,l.jsx(J2,{})]},e)}),l.jsx(X2,{})]})}var Zj=["light","dark"],hz="(prefers-color-scheme: dark)",fz=b.createContext(void 0),pz={setTheme:n=>{},themes:[]},mz=()=>{var n;return(n=b.useContext(fz))!=null?n:pz};b.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:o,nonce:c})=>{let d=i==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=s?Zj.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(y,g=!1,w=!0)=>{let v=a?a[y]:y,x=g?y+"|| ''":`'${v}'`,_="";return s&&w&&!g&&Zj.includes(y)&&(_+=`d.style.colorScheme = '${y}';`),t==="class"?g||v?_+=`c.add(${x})`:_+="null":v&&(_+=`d[s](n,${x})`),_},m=n?`!function(){${h}${p(n)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${hz}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}${d?"":"else{"+p(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${f}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var gz=n=>{switch(n){case"success":return xz;case"info":return bz;case"warning":return wz;case"error":return _z;default:return null}},vz=Array(12).fill(0),yz=({visible:n,className:e})=>Y.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Y.createElement("div",{className:"sonner-spinner"},vz.map((t,r)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),xz=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),wz=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),bz=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),_z=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Sz=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Nz=()=>{let[n,e]=Y.useState(document.hidden);return Y.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},i_=1,Ez=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:i_++,i=this.toasts.find(o=>o.id===s),a=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(o=>o.id===s?(this.publish({...o,...n,id:s,title:t}),{...o,...n,id:s,dismissible:a,title:t}):o):this.addToast({title:t,...r,dismissible:a,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),s=t!==void 0,i,a=r.then(async c=>{if(i=["resolve",c],Y.isValidElement(c))s=!1,this.create({id:t,type:"default",message:c});else if(jz(c)&&!c.ok){s=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:d,description:h})}else if(e.success!==void 0){s=!1;let d=typeof e.success=="function"?await e.success(c):e.success,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:d,description:h})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let d=typeof e.error=="function"?await e.error(c):e.error,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:d,description:h})}}).finally(()=>{var c;s&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),o=()=>new Promise((c,d)=>a.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof t!="string"&&typeof t!="number"?{unwrap:o}:Object.assign(t,{unwrap:o})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||i_++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},nr=new Ez,Az=(n,e)=>{let t=(e==null?void 0:e.id)||i_++;return nr.addToast({title:n,...e,id:t}),t},jz=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Cz=Az,kz=()=>nr.toasts,Pz=()=>nr.getActiveToasts(),Ae=Object.assign(Cz,{success:nr.success,info:nr.info,warning:nr.warning,error:nr.error,custom:nr.custom,message:nr.message,promise:nr.promise,dismiss:nr.dismiss,loading:nr.loading},{getHistory:kz,getToasts:Pz});function Tz(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}Tz(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function iy(n){return n.label!==void 0}var Rz=3,Mz="32px",Iz="16px",eC=4e3,Dz=356,Oz=14,Lz=20,Fz=200;function bs(...n){return n.filter(Boolean).join(" ")}function $z(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var zz=n=>{var e,t,r,s,i,a,o,c,d,h,f;let{invert:p,toast:m,unstyled:y,interacting:g,setHeights:w,visibleToasts:v,heights:x,index:_,toasts:N,expanded:E,removeToast:A,defaultRichColors:j,closeButton:P,style:T,cancelButtonStyle:R,actionButtonStyle:I,className:O="",descriptionClassName:z="",duration:L,position:V,gap:B,loadingIcon:F,expandByDefault:D,classNames:M,icons:U,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:$}=n,[W,Q]=Y.useState(null),[K,le]=Y.useState(null),[H,me]=Y.useState(!1),[Ne,je]=Y.useState(!1),[Ce,Me]=Y.useState(!1),[zt,Xn]=Y.useState(!1),[Xl,io]=Y.useState(!1),[Ql,Zf]=Y.useState(0),[tu,SA]=Y.useState(0),ep=Y.useRef(m.duration||L||eC),NA=Y.useRef(null),Jl=Y.useRef(null),IF=_===0,DF=_+1<=v,Gr=m.type,nu=m.dismissible!==!1,OF=m.className||"",LF=m.descriptionClassName||"",$v=Y.useMemo(()=>x.findIndex(xe=>xe.toastId===m.id)||0,[x,m.id]),FF=Y.useMemo(()=>{var xe;return(xe=m.closeButton)!=null?xe:P},[m.closeButton,P]),EA=Y.useMemo(()=>m.duration||L||eC,[m.duration,L]),Bw=Y.useRef(0),ru=Y.useRef(0),AA=Y.useRef(0),su=Y.useRef(null),[$F,zF]=V.split("-"),jA=Y.useMemo(()=>x.reduce((xe,Qe,ft)=>ft>=$v?xe:xe+Qe.height,0),[x,$v]),CA=Nz(),BF=m.invert||p,Uw=Gr==="loading";ru.current=Y.useMemo(()=>$v*B+jA,[$v,jA]),Y.useEffect(()=>{ep.current=EA},[EA]),Y.useEffect(()=>{me(!0)},[]),Y.useEffect(()=>{let xe=Jl.current;if(xe){let Qe=xe.getBoundingClientRect().height;return SA(Qe),w(ft=>[{toastId:m.id,height:Qe,position:m.position},...ft]),()=>w(ft=>ft.filter(vs=>vs.toastId!==m.id))}},[w,m.id]),Y.useLayoutEffect(()=>{if(!H)return;let xe=Jl.current,Qe=xe.style.height;xe.style.height="auto";let ft=xe.getBoundingClientRect().height;xe.style.height=Qe,SA(ft),w(vs=>vs.find(ys=>ys.toastId===m.id)?vs.map(ys=>ys.toastId===m.id?{...ys,height:ft}:ys):[{toastId:m.id,height:ft,position:m.position},...vs])},[H,m.title,m.description,w,m.id]);let ao=Y.useCallback(()=>{je(!0),Zf(ru.current),w(xe=>xe.filter(Qe=>Qe.toastId!==m.id)),setTimeout(()=>{A(m)},Fz)},[m,A,w,ru]);Y.useEffect(()=>{if(m.promise&&Gr==="loading"||m.duration===1/0||m.type==="loading")return;let xe;return E||g||$&&CA?(()=>{if(AA.current<Bw.current){let Qe=new Date().getTime()-Bw.current;ep.current=ep.current-Qe}AA.current=new Date().getTime()})():ep.current!==1/0&&(Bw.current=new Date().getTime(),xe=setTimeout(()=>{var Qe;(Qe=m.onAutoClose)==null||Qe.call(m,m),ao()},ep.current)),()=>clearTimeout(xe)},[E,g,m,Gr,$,CA,ao]),Y.useEffect(()=>{m.delete&&ao()},[ao,m.delete]);function UF(){var xe,Qe,ft;return U!=null&&U.loading?Y.createElement("div",{className:bs(M==null?void 0:M.loader,(xe=m==null?void 0:m.classNames)==null?void 0:xe.loader,"sonner-loader"),"data-visible":Gr==="loading"},U.loading):F?Y.createElement("div",{className:bs(M==null?void 0:M.loader,(Qe=m==null?void 0:m.classNames)==null?void 0:Qe.loader,"sonner-loader"),"data-visible":Gr==="loading"},F):Y.createElement(yz,{className:bs(M==null?void 0:M.loader,(ft=m==null?void 0:m.classNames)==null?void 0:ft.loader),visible:Gr==="loading"})}return Y.createElement("li",{tabIndex:0,ref:Jl,className:bs(O,OF,M==null?void 0:M.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[Gr],(t=m==null?void 0:m.classNames)==null?void 0:t[Gr]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:j,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":H,"data-promise":!!m.promise,"data-swiped":Xl,"data-removed":Ne,"data-visible":DF,"data-y-position":$F,"data-x-position":zF,"data-index":_,"data-front":IF,"data-swiping":Ce,"data-dismissible":nu,"data-type":Gr,"data-invert":BF,"data-swipe-out":zt,"data-swipe-direction":K,"data-expanded":!!(E||D&&H),style:{"--index":_,"--toasts-before":_,"--z-index":N.length-_,"--offset":`${Ne?Ql:ru.current}px`,"--initial-height":D?"auto":`${tu}px`,...T,...m.style},onDragEnd:()=>{Me(!1),Q(null),su.current=null},onPointerDown:xe=>{Uw||!nu||(NA.current=new Date,Zf(ru.current),xe.target.setPointerCapture(xe.pointerId),xe.target.tagName!=="BUTTON"&&(Me(!0),su.current={x:xe.clientX,y:xe.clientY}))},onPointerUp:()=>{var xe,Qe,ft,vs;if(zt||!nu)return;su.current=null;let ys=Number(((xe=Jl.current)==null?void 0:xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),oo=Number(((Qe=Jl.current)==null?void 0:Qe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Zl=new Date().getTime()-((ft=NA.current)==null?void 0:ft.getTime()),xs=W==="x"?ys:oo,lo=Math.abs(xs)/Zl;if(Math.abs(xs)>=Lz||lo>.11){Zf(ru.current),(vs=m.onDismiss)==null||vs.call(m,m),le(W==="x"?ys>0?"right":"left":oo>0?"down":"up"),ao(),Xn(!0),io(!1);return}Me(!1),Q(null)},onPointerMove:xe=>{var Qe,ft,vs,ys;if(!su.current||!nu||((Qe=window.getSelection())==null?void 0:Qe.toString().length)>0)return;let oo=xe.clientY-su.current.y,Zl=xe.clientX-su.current.x,xs=(ft=n.swipeDirections)!=null?ft:$z(V);!W&&(Math.abs(Zl)>1||Math.abs(oo)>1)&&Q(Math.abs(Zl)>Math.abs(oo)?"x":"y");let lo={x:0,y:0};W==="y"?(xs.includes("top")||xs.includes("bottom"))&&(xs.includes("top")&&oo<0||xs.includes("bottom")&&oo>0)&&(lo.y=oo):W==="x"&&(xs.includes("left")||xs.includes("right"))&&(xs.includes("left")&&Zl<0||xs.includes("right")&&Zl>0)&&(lo.x=Zl),(Math.abs(lo.x)>0||Math.abs(lo.y)>0)&&io(!0),(vs=Jl.current)==null||vs.style.setProperty("--swipe-amount-x",`${lo.x}px`),(ys=Jl.current)==null||ys.style.setProperty("--swipe-amount-y",`${lo.y}px`)}},FF&&!m.jsx?Y.createElement("button",{"aria-label":X,"data-disabled":Uw,"data-close-button":!0,onClick:Uw||!nu?()=>{}:()=>{var xe;ao(),(xe=m.onDismiss)==null||xe.call(m,m)},className:bs(M==null?void 0:M.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=U==null?void 0:U.close)!=null?i:Sz):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Y.createElement(Y.Fragment,null,Gr||m.icon||m.promise?Y.createElement("div",{"data-icon":"",className:bs(M==null?void 0:M.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||UF():null,m.type!=="loading"?m.icon||(U==null?void 0:U[Gr])||gz(Gr):null):null,Y.createElement("div",{"data-content":"",className:bs(M==null?void 0:M.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},Y.createElement("div",{"data-title":"",className:bs(M==null?void 0:M.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Y.createElement("div",{"data-description":"",className:bs(z,LF,M==null?void 0:M.description,(d=m==null?void 0:m.classNames)==null?void 0:d.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&iy(m.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||R,onClick:xe=>{var Qe,ft;iy(m.cancel)&&nu&&((ft=(Qe=m.cancel).onClick)==null||ft.call(Qe,xe),ao())},className:bs(M==null?void 0:M.cancelButton,(h=m==null?void 0:m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&iy(m.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||I,onClick:xe=>{var Qe,ft;iy(m.action)&&((ft=(Qe=m.action).onClick)==null||ft.call(Qe,xe),!xe.defaultPrevented&&ao())},className:bs(M==null?void 0:M.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function tC(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function Bz(n,e){let t={};return[n,e].forEach((r,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",o=i?Iz:Mz;function c(d){["top","right","bottom","left"].forEach(h=>{t[`${a}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?t[`${a}-${d}`]=o:t[`${a}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(o)}),t}var Uz=b.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:c,mobileOffset:d,theme:h="light",richColors:f,duration:p,style:m,visibleToasts:y=Rz,toastOptions:g,dir:w=tC(),gap:v=Oz,loadingIcon:x,icons:_,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:E}=n,[A,j]=Y.useState([]),P=Y.useMemo(()=>Array.from(new Set([r].concat(A.filter($=>$.position).map($=>$.position)))),[A,r]),[T,R]=Y.useState([]),[I,O]=Y.useState(!1),[z,L]=Y.useState(!1),[V,B]=Y.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=Y.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=Y.useRef(null),U=Y.useRef(!1),X=Y.useCallback($=>{j(W=>{var Q;return(Q=W.find(K=>K.id===$.id))!=null&&Q.delete||nr.dismiss($.id),W.filter(({id:K})=>K!==$.id)})},[]);return Y.useEffect(()=>nr.subscribe($=>{if($.dismiss){j(W=>W.map(Q=>Q.id===$.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{l2.flushSync(()=>{j(W=>{let Q=W.findIndex(K=>K.id===$.id);return Q!==-1?[...W.slice(0,Q),{...W[Q],...$},...W.slice(Q+1)]:[$,...W]})})})}),[]),Y.useEffect(()=>{if(h!=="system"){B(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:W})=>{B(W?"dark":"light")})}catch{$.addListener(({matches:Q})=>{try{B(Q?"dark":"light")}catch(K){console.error(K)}})}},[h]),Y.useEffect(()=>{A.length<=1&&O(!1)},[A]),Y.useEffect(()=>{let $=W=>{var Q,K;s.every(le=>W[le]||W.code===le)&&(O(!0),(Q=F.current)==null||Q.focus()),W.code==="Escape"&&(document.activeElement===F.current||(K=F.current)!=null&&K.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[s]),Y.useEffect(()=>{if(F.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,U.current=!1)}},[F.current]),Y.createElement("section",{ref:e,"aria-label":`${N} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map(($,W)=>{var Q;let[K,le]=$.split("-");return A.length?Y.createElement("ol",{key:$,dir:w==="auto"?tC():w,tabIndex:-1,ref:F,className:o,"data-sonner-toaster":!0,"data-theme":V,"data-y-position":K,"data-lifted":I&&A.length>1&&!i,"data-x-position":le,style:{"--front-toast-height":`${((Q=T[0])==null?void 0:Q.height)||0}px`,"--width":`${Dz}px`,"--gap":`${v}px`,...m,...Bz(c,d)},onBlur:H=>{U.current&&!H.currentTarget.contains(H.relatedTarget)&&(U.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||U.current||(U.current=!0,M.current=H.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{z||O(!1)},onDragEnd:()=>O(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},A.filter(H=>!H.position&&W===0||H.position===$).map((H,me)=>{var Ne,je;return Y.createElement(zz,{key:H.id,icons:_,index:me,toast:H,defaultRichColors:f,duration:(Ne=g==null?void 0:g.duration)!=null?Ne:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:y,closeButton:(je=g==null?void 0:g.closeButton)!=null?je:a,interacting:z,position:$,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:X,toasts:A.filter(Ce=>Ce.position==H.position),heights:T.filter(Ce=>Ce.position==H.position),setHeights:R,expandByDefault:i,gap:v,loadingIcon:x,expanded:I,pauseWhenPageIsHidden:E,swipeDirections:n.swipeDirections})})):null}))});const Hz=({...n})=>{const{theme:e="system"}=mz();return l.jsx(Uz,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var ow=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lw=typeof window>"u"||"Deno"in globalThis;function js(){}function Wz(n,e){return typeof n=="function"?n(e):n}function Vz(n){return typeof n=="number"&&n>=0&&n!==1/0}function Gz(n,e){return Math.max(n+(e||0)-Date.now(),0)}function a_(n,e){return typeof n=="function"?n(e):n}function qz(n,e){return typeof n=="function"?n(e):n}function nC(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:o}=n;if(a){if(r){if(e.queryHash!==uE(a,e.options))return!1}else if(!Sm(e.queryKey,a))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||s&&s!==e.state.fetchStatus||i&&!i(e))}function rC(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(_m(e.options.mutationKey)!==_m(i))return!1}else if(!Sm(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function uE(n,e){return((e==null?void 0:e.queryKeyHashFn)||_m)(n)}function _m(n){return JSON.stringify(n,(e,t)=>o_(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Sm(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Sm(n[t],e[t])):!1}function tR(n,e){if(n===e)return n;const t=sC(n)&&sC(e);if(t||o_(n)&&o_(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),a=i.length,o=t?[]:{},c=new Set(r);let d=0;for(let h=0;h<a;h++){const f=t?h:i[h];(!t&&c.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(o[f]=void 0,d++):(o[f]=tR(n[f],e[f]),o[f]===n[f]&&n[f]!==void 0&&d++)}return s===a&&d===s?n:o}return e}function sC(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function o_(n){if(!iC(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!iC(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function iC(n){return Object.prototype.toString.call(n)==="[object Object]"}function Kz(n){return new Promise(e=>{setTimeout(e,n)})}function Yz(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?tR(n,e):e}function Xz(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Qz(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var hE=Symbol();function nR(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===hE?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var gc,Eo,nh,zk,Jz=(zk=class extends ow{constructor(){super();C(this,gc);C(this,Eo);C(this,nh);S(this,nh,e=>{if(!lw&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){u(this,Eo)||this.setEventListener(u(this,nh))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Eo))==null||e.call(this),S(this,Eo,void 0))}setEventListener(e){var t;S(this,nh,e),(t=u(this,Eo))==null||t.call(this),S(this,Eo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){u(this,gc)!==e&&(S(this,gc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof u(this,gc)=="boolean"?u(this,gc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},gc=new WeakMap,Eo=new WeakMap,nh=new WeakMap,zk),rR=new Jz,rh,Ao,sh,Bk,Zz=(Bk=class extends ow{constructor(){super();C(this,rh,!0);C(this,Ao);C(this,sh);S(this,sh,e=>{if(!lw&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){u(this,Ao)||this.setEventListener(u(this,sh))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Ao))==null||e.call(this),S(this,Ao,void 0))}setEventListener(e){var t;S(this,sh,e),(t=u(this,Ao))==null||t.call(this),S(this,Ao,e(this.setOnline.bind(this)))}setOnline(e){u(this,rh)!==e&&(S(this,rh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return u(this,rh)}},rh=new WeakMap,Ao=new WeakMap,sh=new WeakMap,Bk),Yx=new Zz;function eB(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function tB(n){return Math.min(1e3*2**n,3e4)}function sR(n){return(n??"online")==="online"?Yx.isOnline():!0}var iR=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function bb(n){return n instanceof iR}function aR(n){let e=!1,t=0,r=!1,s;const i=eB(),a=g=>{var w;r||(p(new iR(g)),(w=n.abort)==null||w.call(n))},o=()=>{e=!0},c=()=>{e=!1},d=()=>rR.isFocused()&&(n.networkMode==="always"||Yx.isOnline())&&n.canRun(),h=()=>sR(n.networkMode)&&n.canRun(),f=g=>{var w;r||(r=!0,(w=n.onSuccess)==null||w.call(n,g),s==null||s(),i.resolve(g))},p=g=>{var w;r||(r=!0,(w=n.onError)==null||w.call(n,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var w;s=v=>{(r||d())&&g(v)},(w=n.onPause)==null||w.call(n)}).then(()=>{var g;s=void 0,r||(g=n.onContinue)==null||g.call(n)}),y=()=>{if(r)return;let g;const w=t===0?n.initialPromise:void 0;try{g=w??n.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var A;if(r)return;const x=n.retry??(lw?0:3),_=n.retryDelay??tB,N=typeof _=="function"?_(t,v):_,E=x===!0||typeof x=="number"&&t<x||typeof x=="function"&&x(t,v);if(e||!E){p(v);return}t++,(A=n.onFail)==null||A.call(n,t,v),Kz(N).then(()=>d()?void 0:m()).then(()=>{e?p(v):y()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:o,continueRetry:c,canStart:h,start:()=>(h()?y():m().then(y),i)}}var nB=n=>setTimeout(n,0);function rB(){let n=[],e=0,t=o=>{o()},r=o=>{o()},s=nB;const i=o=>{e?n.push(o):s(()=>{t(o)})},a=()=>{const o=n;n=[],o.length&&s(()=>{r(()=>{o.forEach(c=>{t(c)})})})};return{batch:o=>{let c;e++;try{c=o()}finally{e--,e||a()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{s=o}}}var Un=rB(),vc,Uk,oR=(Uk=class{constructor(){C(this,vc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vz(this.gcTime)&&S(this,vc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(lw?1/0:5*60*1e3))}clearGcTimeout(){u(this,vc)&&(clearTimeout(u(this,vc)),S(this,vc,void 0))}},vc=new WeakMap,Uk),ih,yc,Yr,xc,Nn,Mm,wc,Cs,Zi,Hk,sB=(Hk=class extends oR{constructor(e){super();C(this,Cs);C(this,ih);C(this,yc);C(this,Yr);C(this,xc);C(this,Nn);C(this,Mm);C(this,wc);S(this,wc,!1),S(this,Mm,e.defaultOptions),this.setOptions(e.options),this.observers=[],S(this,xc,e.client),S(this,Yr,u(this,xc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,S(this,ih,aB(this.options)),this.state=e.state??u(this,ih),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=u(this,Nn))==null?void 0:e.promise}setOptions(e){this.options={...u(this,Mm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&u(this,Yr).remove(this)}setData(e,t){const r=Yz(this.state.data,e,this.options);return k(this,Cs,Zi).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){k(this,Cs,Zi).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=u(this,Nn))==null?void 0:r.promise;return(s=u(this,Nn))==null||s.cancel(e),t?t.then(js).catch(js):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(u(this,ih))}isActive(){return this.observers.some(e=>qz(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>a_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Gz(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,Nn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,Nn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),u(this,Yr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(u(this,Nn)&&(u(this,wc)?u(this,Nn).cancel({revert:!0}):u(this,Nn).cancelRetry()),this.scheduleGc()),u(this,Yr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,Cs,Zi).call(this,{type:"invalidate"})}fetch(e,t){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(u(this,Nn))return u(this,Nn).continueRetry(),u(this,Nn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(S(this,wc,!0),r.signal)})},i=()=>{const p=nR(this.options,t),y=(()=>{const g={client:u(this,xc),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return S(this,wc,!1),this.options.persister?this.options.persister(p,y,this):p(y)},o=(()=>{const p={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:u(this,xc),state:this.state,fetchFn:i};return s(p),p})();(d=this.options.behavior)==null||d.onFetch(o,this),S(this,yc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&k(this,Cs,Zi).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const c=p=>{var m,y,g,w;bb(p)&&p.silent||k(this,Cs,Zi).call(this,{type:"error",error:p}),bb(p)||((y=(m=u(this,Yr).config).onError)==null||y.call(m,p,this),(w=(g=u(this,Yr).config).onSettled)==null||w.call(g,this.state.data,p,this)),this.scheduleGc()};return S(this,Nn,aR({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,y,g,w;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(v){c(v);return}(y=(m=u(this,Yr).config).onSuccess)==null||y.call(m,p,this),(w=(g=u(this,Yr).config).onSettled)==null||w.call(g,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,m)=>{k(this,Cs,Zi).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{k(this,Cs,Zi).call(this,{type:"pause"})},onContinue:()=>{k(this,Cs,Zi).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),u(this,Nn).start()}},ih=new WeakMap,yc=new WeakMap,Yr=new WeakMap,xc=new WeakMap,Nn=new WeakMap,Mm=new WeakMap,wc=new WeakMap,Cs=new WeakSet,Zi=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...iB(r.data,this.options),fetchMeta:e.meta??null};case"success":return S(this,yc,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return bb(s)&&s.revert&&u(this,yc)?{...u(this,yc),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Un.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),u(this,Yr).notify({query:this,type:"updated",action:e})})},Hk);function iB(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sR(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function aB(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var di,Wk,oB=(Wk=class extends ow{constructor(e={}){super();C(this,di);this.config=e,S(this,di,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??uE(s,t);let a=this.get(i);return a||(a=new sB({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){u(this,di).has(e.queryHash)||(u(this,di).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=u(this,di).get(e.queryHash);t&&(e.destroy(),t===e&&u(this,di).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return u(this,di).get(e)}getAll(){return[...u(this,di).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>nC(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>nC(e,r)):t}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},di=new WeakMap,Wk),ui,In,bc,hi,mo,Vk,lB=(Vk=class extends oR{constructor(e){super();C(this,hi);C(this,ui);C(this,In);C(this,bc);this.mutationId=e.mutationId,S(this,In,e.mutationCache),S(this,ui,[]),this.state=e.state||cB(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){u(this,ui).includes(e)||(u(this,ui).push(e),this.clearGcTimeout(),u(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){S(this,ui,u(this,ui).filter(t=>t!==e)),this.scheduleGc(),u(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){u(this,ui).length||(this.state.status==="pending"?this.scheduleGc():u(this,In).remove(this))}continue(){var e;return((e=u(this,bc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,c,d,h,f,p,m,y,g,w,v,x,_,N,E,A,j,P;const t=()=>{k(this,hi,mo).call(this,{type:"continue"})};S(this,bc,aR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,R)=>{k(this,hi,mo).call(this,{type:"failed",failureCount:T,error:R})},onPause:()=>{k(this,hi,mo).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>u(this,In).canRun(this)}));const r=this.state.status==="pending",s=!u(this,bc).canStart();try{if(r)t();else{k(this,hi,mo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(i=u(this,In).config).onMutate)==null?void 0:a.call(i,e,this));const R=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,e));R!==this.state.context&&k(this,hi,mo).call(this,{type:"pending",context:R,variables:e,isPaused:s})}const T=await u(this,bc).start();return await((h=(d=u(this,In).config).onSuccess)==null?void 0:h.call(d,T,e,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,e,this.state.context)),await((y=(m=u(this,In).config).onSettled)==null?void 0:y.call(m,T,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,T,null,e,this.state.context)),k(this,hi,mo).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(v=u(this,In).config).onError)==null?void 0:x.call(v,T,e,this.state.context,this)),await((N=(_=this.options).onError)==null?void 0:N.call(_,T,e,this.state.context)),await((A=(E=u(this,In).config).onSettled)==null?void 0:A.call(E,void 0,T,this.state.variables,this.state.context,this)),await((P=(j=this.options).onSettled)==null?void 0:P.call(j,void 0,T,e,this.state.context)),T}finally{k(this,hi,mo).call(this,{type:"error",error:T})}}finally{u(this,In).runNext(this)}}},ui=new WeakMap,In=new WeakMap,bc=new WeakMap,hi=new WeakSet,mo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Un.batch(()=>{u(this,ui).forEach(r=>{r.onMutationUpdate(e)}),u(this,In).notify({mutation:this,type:"updated",action:e})})},Vk);function cB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ca,ks,Im,Gk,dB=(Gk=class extends ow{constructor(e={}){super();C(this,ca);C(this,ks);C(this,Im);this.config=e,S(this,ca,new Set),S(this,ks,new Map),S(this,Im,0)}build(e,t,r){const s=new lB({mutationCache:this,mutationId:++Xt(this,Im)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){u(this,ca).add(e);const t=ay(e);if(typeof t=="string"){const r=u(this,ks).get(t);r?r.push(e):u(this,ks).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(u(this,ca).delete(e)){const t=ay(e);if(typeof t=="string"){const r=u(this,ks).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&u(this,ks).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ay(e);if(typeof t=="string"){const r=u(this,ks).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=ay(e);if(typeof t=="string"){const s=(r=u(this,ks).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Un.batch(()=>{u(this,ca).forEach(e=>{this.notify({type:"removed",mutation:e})}),u(this,ca).clear(),u(this,ks).clear()})}getAll(){return Array.from(u(this,ca))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>rC(t,r))}findAll(e={}){return this.getAll().filter(t=>rC(e,t))}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Un.batch(()=>Promise.all(e.map(t=>t.continue().catch(js))))}},ca=new WeakMap,ks=new WeakMap,Im=new WeakMap,Gk);function ay(n){var e;return(e=n.options.scope)==null?void 0:e.id}function aC(n){return{onFetch:(e,t)=>{var h,f,p,m,y;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=nR(e.options,e.fetchOptions),x=async(_,N,E)=>{if(g)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const j=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:N,direction:E?"backward":"forward",meta:e.options.meta};return w(I),I})(),P=await v(j),{maxPages:T}=e.options,R=E?Qz:Xz;return{pages:R(_.pages,P,T),pageParams:R(_.pageParams,N,T)}};if(s&&i.length){const _=s==="backward",N=_?uB:oC,E={pages:i,pageParams:a},A=N(r,E);o=await x(E,A,_)}else{const _=n??i.length;do{const N=c===0?a[0]??r.initialPageParam:oC(r,o);if(c>0&&N==null)break;o=await x(o,N),c++}while(c<_)}return o};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function oC(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function uB(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Nt,jo,Co,ah,oh,ko,lh,ch,qk,hB=(qk=class{constructor(n={}){C(this,Nt);C(this,jo);C(this,Co);C(this,ah);C(this,oh);C(this,ko);C(this,lh);C(this,ch);S(this,Nt,n.queryCache||new oB),S(this,jo,n.mutationCache||new dB),S(this,Co,n.defaultOptions||{}),S(this,ah,new Map),S(this,oh,new Map),S(this,ko,0)}mount(){Xt(this,ko)._++,u(this,ko)===1&&(S(this,lh,rR.subscribe(async n=>{n&&(await this.resumePausedMutations(),u(this,Nt).onFocus())})),S(this,ch,Yx.subscribe(async n=>{n&&(await this.resumePausedMutations(),u(this,Nt).onOnline())})))}unmount(){var n,e;Xt(this,ko)._--,u(this,ko)===0&&((n=u(this,lh))==null||n.call(this),S(this,lh,void 0),(e=u(this,ch))==null||e.call(this),S(this,ch,void 0))}isFetching(n){return u(this,Nt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return u(this,jo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=u(this,Nt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=u(this,Nt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(a_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return u(this,Nt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=u(this,Nt).get(r.queryHash),i=s==null?void 0:s.state.data,a=Wz(e,i);if(a!==void 0)return u(this,Nt).build(this,r).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Un.batch(()=>u(this,Nt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=u(this,Nt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=u(this,Nt);Un.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=u(this,Nt);return Un.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Un.batch(()=>u(this,Nt).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(js).catch(js)}invalidateQueries(n,e={}){return Un.batch(()=>(u(this,Nt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Un.batch(()=>u(this,Nt).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(js)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(js)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=u(this,Nt).build(this,e);return t.isStaleByTime(a_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(js).catch(js)}fetchInfiniteQuery(n){return n.behavior=aC(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(js).catch(js)}ensureInfiniteQueryData(n){return n.behavior=aC(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Yx.isOnline()?u(this,jo).resumePausedMutations():Promise.resolve()}getQueryCache(){return u(this,Nt)}getMutationCache(){return u(this,jo)}getDefaultOptions(){return u(this,Co)}setDefaultOptions(n){S(this,Co,n)}setQueryDefaults(n,e){u(this,ah).set(_m(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...u(this,ah).values()],t={};return e.forEach(r=>{Sm(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){u(this,oh).set(_m(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...u(this,oh).values()],t={};return e.forEach(r=>{Sm(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...u(this,Co).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=uE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===hE&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...u(this,Co).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){u(this,Nt).clear(),u(this,jo).clear()}},Nt=new WeakMap,jo=new WeakMap,Co=new WeakMap,ah=new WeakMap,oh=new WeakMap,ko=new WeakMap,lh=new WeakMap,ch=new WeakMap,qk),fB=b.createContext(void 0),pB=({client:n,children:e})=>(b.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),l.jsx(fB.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nm(){return Nm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Nm.apply(this,arguments)}var wl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(wl||(wl={}));const lC="popstate";function mB(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return l_("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Xx(s)}return vB(e,t,null,n)}function Pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function gB(){return Math.random().toString(36).substr(2,8)}function cC(n,e){return{usr:n.state,key:n.key,idx:e}}function l_(n,e,t,r){return t===void 0&&(t=null),Nm({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Hf(e):e,{state:t,key:e&&e.key||r||gB()})}function Xx(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function vB(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=wl.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Nm({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){o=wl.Pop;let w=h(),v=w==null?null:w-d;d=w,c&&c({action:o,location:g.location,delta:v})}function p(w,v){o=wl.Push;let x=l_(g.location,w,v);d=h()+1;let _=cC(x,d),N=g.createHref(x);try{a.pushState(_,"",N)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(N)}i&&c&&c({action:o,location:g.location,delta:1})}function m(w,v){o=wl.Replace;let x=l_(g.location,w,v);d=h();let _=cC(x,d),N=g.createHref(x);a.replaceState(_,"",N),i&&c&&c({action:o,location:g.location,delta:0})}function y(w){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof w=="string"?w:Xx(w);return x=x.replace(/ $/,"%20"),Pt(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let g={get action(){return o},get location(){return n(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(lC,f),c=w,()=>{s.removeEventListener(lC,f),c=null}},createHref(w){return e(s,w)},createURL:y,encodeLocation(w){let v=y(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(w){return a.go(w)}};return g}var dC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(dC||(dC={}));function yB(n,e,t){return t===void 0&&(t="/"),xB(n,e,t,!1)}function xB(n,e,t,r){let s=typeof e=="string"?Hf(e):e,i=fE(s.pathname||"/",t);if(i==null)return null;let a=cR(n);wB(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let d=TB(i);o=kB(a[c],d,r)}return o}function cR(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,a,o)=>{let c={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Pt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Pl([r,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),cR(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:jB(d,i.index),routesMeta:h})};return n.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let c of dR(i.path))s(i,a,c)}),e}function dR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=dR(r.join("/")),o=[];return o.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&o.push(...a),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function wB(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:CB(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const bB=/^:[\w-]+$/,_B=3,SB=2,NB=1,EB=10,AB=-2,uC=n=>n==="*";function jB(n,e){let t=n.split("/"),r=t.length;return t.some(uC)&&(r+=AB),e&&(r+=SB),t.filter(s=>!uC(s)).reduce((s,i)=>s+(bB.test(i)?_B:i===""?NB:EB),r)}function CB(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function kB(n,e,t){let{routesMeta:r}=n,s={},i="/",a=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=hC({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f&&d&&t&&!r[r.length-1].route.index&&(f=hC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Pl([i,f.pathname]),pathnameBase:DB(Pl([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Pl([i,f.pathnameBase]))}return a}function hC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PB(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let g=o[f]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=o[f];return m&&!y?d[p]=void 0:d[p]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:n}}function PB(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),lR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function TB(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function fE(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function RB(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Hf(n):n;return{pathname:t?t.startsWith("/")?t:MB(t,e):e,search:OB(r),hash:LB(s)}}function MB(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function _b(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function IB(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pE(n,e){let t=IB(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function mE(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Hf(n):(s=Nm({},n),Pt(!s.pathname||!s.pathname.includes("?"),_b("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),_b("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),_b("#","search","hash",s)));let i=n===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=t;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}o=f>=0?e[f]:"/"}let c=RB(s,o),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Pl=n=>n.join("/").replace(/\/\/+/g,"/"),DB=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),OB=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LB=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function FB(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const uR=["post","put","patch","delete"];new Set(uR);const $B=["get",...uR];new Set($B);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Em(){return Em=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Em.apply(this,arguments)}const gE=b.createContext(null),zB=b.createContext(null),Vl=b.createContext(null),cw=b.createContext(null),ro=b.createContext({outlet:null,matches:[],isDataRoute:!1}),hR=b.createContext(null);function BB(n,e){let{relative:t}=e===void 0?{}:e;Wf()||Pt(!1);let{basename:r,navigator:s}=b.useContext(Vl),{hash:i,pathname:a,search:o}=mR(n,{relative:t}),c=a;return r!=="/"&&(c=a==="/"?r:Pl([r,a])),s.createHref({pathname:c,search:o,hash:i})}function Wf(){return b.useContext(cw)!=null}function Xd(){return Wf()||Pt(!1),b.useContext(cw).location}function fR(n){b.useContext(Vl).static||b.useLayoutEffect(n)}function so(){let{isDataRoute:n}=b.useContext(ro);return n?e6():UB()}function UB(){Wf()||Pt(!1);let n=b.useContext(gE),{basename:e,future:t,navigator:r}=b.useContext(Vl),{matches:s}=b.useContext(ro),{pathname:i}=Xd(),a=JSON.stringify(pE(s,t.v7_relativeSplatPath)),o=b.useRef(!1);return fR(()=>{o.current=!0}),b.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let f=mE(d,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Pl([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,n])}function pR(){let{matches:n}=b.useContext(ro),e=n[n.length-1];return e?e.params:{}}function mR(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=b.useContext(Vl),{matches:s}=b.useContext(ro),{pathname:i}=Xd(),a=JSON.stringify(pE(s,r.v7_relativeSplatPath));return b.useMemo(()=>mE(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function HB(n,e){return WB(n,e)}function WB(n,e,t,r){Wf()||Pt(!1);let{navigator:s}=b.useContext(Vl),{matches:i}=b.useContext(ro),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Xd(),h;if(e){var f;let w=typeof e=="string"?Hf(e):e;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||Pt(!1),h=w}else h=d;let p=h.pathname||"/",m=p;if(c!=="/"){let w=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let y=yB(n,{pathname:m}),g=YB(y&&y.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Pl([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Pl([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,r);return e&&g?b.createElement(cw.Provider,{value:{location:Em({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:wl.Pop}},g):g}function VB(){let n=ZB(),e=FB(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:s},t):null,null)}const GB=b.createElement(VB,null);class qB extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(ro.Provider,{value:this.props.routeContext},b.createElement(hR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KB(n){let{routeContext:e,match:t,children:r}=n,s=b.useContext(gE);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(ro.Provider,{value:e},r)}function YB(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(s=t)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);h>=0||Pt(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:m}=t,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let m,y=!1,g=null,w=null;t&&(m=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||GB,c&&(d<0&&p===0?(y=!0,w=null):d===p&&(y=!0,w=f.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,p+1)),x=()=>{let _;return m?_=g:y?_=w:f.route.Component?_=b.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,b.createElement(KB,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?b.createElement(qB,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var gR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(gR||{}),Qx=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Qx||{});function XB(n){let e=b.useContext(gE);return e||Pt(!1),e}function QB(n){let e=b.useContext(zB);return e||Pt(!1),e}function JB(n){let e=b.useContext(ro);return e||Pt(!1),e}function vR(n){let e=JB(),t=e.matches[e.matches.length-1];return t.route.id||Pt(!1),t.route.id}function ZB(){var n;let e=b.useContext(hR),t=QB(Qx.UseRouteError),r=vR(Qx.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function e6(){let{router:n}=XB(gR.UseNavigateStable),e=vR(Qx.UseNavigateStable),t=b.useRef(!1);return fR(()=>{t.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Em({fromRouteId:e},i)))},[n,e])}function t6(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function n6(n){let{to:e,replace:t,state:r,relative:s}=n;Wf()||Pt(!1);let{future:i,static:a}=b.useContext(Vl),{matches:o}=b.useContext(ro),{pathname:c}=Xd(),d=so(),h=mE(e,pE(o,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return b.useEffect(()=>d(JSON.parse(f),{replace:t,state:r,relative:s}),[d,f,s,t,r]),null}function _s(n){Pt(!1)}function r6(n){let{basename:e="/",children:t=null,location:r,navigationType:s=wl.Pop,navigator:i,static:a=!1,future:o}=n;Wf()&&Pt(!1);let c=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:c,navigator:i,static:a,future:Em({v7_relativeSplatPath:!1},o)}),[c,o,i,a]);typeof r=="string"&&(r=Hf(r));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,g=b.useMemo(()=>{let w=fE(h,c);return w==null?null:{location:{pathname:w,search:f,hash:p,state:m,key:y},navigationType:s}},[c,h,f,p,m,y,s]);return g==null?null:b.createElement(Vl.Provider,{value:d},b.createElement(cw.Provider,{children:t,value:g}))}function s6(n){let{children:e,location:t}=n;return HB(c_(e),t)}new Promise(()=>{});function c_(n,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(n,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){t.push.apply(t,c_(r.props.children,i));return}r.type!==_s&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=c_(r.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d_(){return d_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},d_.apply(this,arguments)}function i6(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function a6(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function o6(n,e){return n.button===0&&(!e||e==="_self")&&!a6(n)}function u_(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function l6(n,e){let t=u_(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(i=>{t.append(s,i)})}),t}const c6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],d6="6";try{window.__reactRouterVersion=d6}catch{}const u6="startTransition",fC=lN[u6];function h6(n){let{basename:e,children:t,future:r,window:s}=n,i=b.useRef();i.current==null&&(i.current=mB({window:s,v5Compat:!0}));let a=i.current,[o,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},h=b.useCallback(f=>{d&&fC?fC(()=>c(f)):c(f)},[c,d]);return b.useLayoutEffect(()=>a.listen(h),[a,h]),b.useEffect(()=>t6(r),[r]),b.createElement(r6,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:r})}const f6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",p6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=b.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,p=i6(e,c6),{basename:m}=b.useContext(Vl),y,g=!1;if(typeof d=="string"&&p6.test(d)&&(y=d,f6))try{let _=new URL(window.location.href),N=d.startsWith("//")?new URL(_.protocol+d):new URL(d),E=fE(N.pathname,m);N.origin===_.origin&&E!=null?d=E+N.search+N.hash:g=!0}catch{}let w=BB(d,{relative:s}),v=m6(d,{replace:a,state:o,target:c,preventScrollReset:h,relative:s,viewTransition:f});function x(_){r&&r(_),_.defaultPrevented||v(_)}return b.createElement("a",d_({},p,{href:y||w,onClick:g||i?r:x,ref:t,target:c}))});var pC;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(pC||(pC={}));var mC;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(mC||(mC={}));function m6(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,c=so(),d=Xd(),h=mR(n,{relative:a});return b.useCallback(f=>{if(o6(f,t)){f.preventDefault();let p=r!==void 0?r:Xx(d)===Xx(h);c(n,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[d,c,h,r,s,t,n,i,a,o])}function g6(n){let e=b.useRef(u_(n)),t=b.useRef(!1),r=Xd(),s=b.useMemo(()=>l6(r.search,t.current?null:e.current),[r.search]),i=so(),a=b.useCallback((o,c)=>{const d=u_(typeof o=="function"?o(s):o);t.current=!0,i("?"+d,c)},[i,s]);return[s,a]}const h_=yv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-medical text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-card hover:shadow-card-hover",medical:"bg-gradient-medical text-white hover:shadow-elegant hover:scale-[1.02] shadow-card",secondary:"bg-transparent border border-primary text-primary hover:bg-secondary hover:text-secondary-foreground hover:border-secondary",outline:"border border-card-border bg-card hover:bg-muted hover:text-card-foreground",ghost:"hover:bg-muted hover:text-card-foreground",link:"text-primary hover:text-primary-hover underline-offset-4 hover:underline",success:"bg-success text-white hover:opacity-90 shadow-card",warning:"bg-warning text-white hover:opacity-90 shadow-card",error:"bg-error text-white hover:opacity-90 shadow-card"},size:{default:"h-10 px-6 py-2",sm:"h-8 rounded-md px-4 text-xs",lg:"h-12 rounded-medical px-8 text-base",xl:"h-14 rounded-medical px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=b.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?N$:"button";return l.jsx(a,{className:te(h_({variant:e,size:t,className:n})),ref:i,...s})});J.displayName="Button";const v6="modulepreload",y6=function(n){return"/swiss-med-track/"+n},gC={},wv=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=y6(c),c in gC)return;gC[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":v6,d||(f.as="script"),f.crossOrigin="",f.href=c,o&&f.setAttribute("nonce",o),document.head.appendChild(f),d)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},x6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>wv(async()=>{const{default:r}=await Promise.resolve().then(()=>Vf);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class vE extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class w6 extends vE{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vC extends vE{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class yC extends vE{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var f_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(f_||(f_={}));var b6=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};class _6{constructor(e,{headers:t={},customFetch:r,region:s=f_.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=x6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return b6(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(o["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(o["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:h}).catch(g=>{throw new w6(g)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new vC(f);if(!f.ok)throw new yC(f);let m=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield f.json():m==="application/octet-stream"?y=yield f.blob():m==="text/event-stream"?y=f:m==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof yC||s instanceof vC?s.context:void 0}}})}}var ir={},yE={},dw={},bv={},uw={},hw={},S6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cf=S6();const N6=Cf.fetch,yR=Cf.fetch.bind(Cf),xR=Cf.Headers,E6=Cf.Request,A6=Cf.Response,Vf=Object.freeze(Object.defineProperty({__proto__:null,Headers:xR,Request:E6,Response:A6,default:yR,fetch:N6},Symbol.toStringTag,{value:"Module"})),j6=GF(Vf);var fw={};Object.defineProperty(fw,"__esModule",{value:!0});let C6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};fw.default=C6;var wR=ds&&ds.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(hw,"__esModule",{value:!0});const k6=wR(j6),P6=wR(fw);let T6=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=k6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,c,d;let h=null,f=null,p=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=x:f=JSON.parse(x))}const w=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{h=JSON.parse(w),Array.isArray(h)&&i.status===404&&(f=[],h=null,m=200,y="OK")}catch{i.status===404&&w===""?(m=204,y="No Content"):h={message:w}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,m=200,y="OK"),h&&this.shouldThrowOnError)throw new P6.default(h)}return{error:h,data:f,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};hw.default=T6;var R6=ds&&ds.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(uw,"__esModule",{value:!0});const M6=R6(hw);let I6=class extends M6.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const c=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};uw.default=I6;var D6=ds&&ds.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bv,"__esModule",{value:!0});const O6=D6(uw);let L6=class extends O6.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};bv.default=L6;var F6=ds&&ds.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(dw,"__esModule",{value:!0});const up=F6(bv);let $6=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new up.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(a.length>0){const o=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new up.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new up.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new up.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new up.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};dw.default=$6;var bR=ds&&ds.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yE,"__esModule",{value:!0});const z6=bR(dw),B6=bR(bv);let U6=class _R{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new z6.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new _R(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const c=new URL(`${this.url}/rpc/${e}`);let d;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(o="POST",d=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new B6.default({method:o,url:c,headers:h,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};yE.default=U6;var Gf=ds&&ds.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ir,"__esModule",{value:!0});ir.PostgrestError=ir.PostgrestBuilder=ir.PostgrestTransformBuilder=ir.PostgrestFilterBuilder=ir.PostgrestQueryBuilder=ir.PostgrestClient=void 0;const SR=Gf(yE);ir.PostgrestClient=SR.default;const NR=Gf(dw);ir.PostgrestQueryBuilder=NR.default;const ER=Gf(bv);ir.PostgrestFilterBuilder=ER.default;const AR=Gf(uw);ir.PostgrestTransformBuilder=AR.default;const jR=Gf(hw);ir.PostgrestBuilder=jR.default;const CR=Gf(fw);ir.PostgrestError=CR.default;var H6=ir.default={PostgrestClient:SR.default,PostgrestQueryBuilder:NR.default,PostgrestFilterBuilder:ER.default,PostgrestTransformBuilder:AR.default,PostgrestBuilder:jR.default,PostgrestError:CR.default};const{PostgrestClient:W6,PostgrestQueryBuilder:mQ,PostgrestFilterBuilder:gQ,PostgrestTransformBuilder:vQ,PostgrestBuilder:yQ,PostgrestError:xQ}=H6;class V6{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const G6="2.15.1",q6=`realtime-js/${G6}`,K6="1.0.0",p_=1e4,Y6=1e3,X6=100;var Jp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Jp||(Jp={}));var Bt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Bt||(Bt={}));var Us;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Us||(Us={}));var m_;(function(n){n.websocket="websocket"})(m_||(m_={}));var cc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(cc||(cc={}));class Q6{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const c=r.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class kR{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(nt||(nt={}));const xC=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=J6(a,n,e,s),i),{})},J6=(n,e,t,r)=>{const s=e.find(o=>o.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?PR(i,a):g_(a)},PR=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return nU(e,t)}switch(n){case nt.bool:return Z6(e);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return eU(e);case nt.json:case nt.jsonb:return tU(e);case nt.timestamp:return rU(e);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return g_(e);default:return g_(e)}},g_=n=>n,Z6=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},eU=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},tU=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},nU=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>PR(e,o))}return n},rU=n=>typeof n=="string"?n.replace(" ","T"):n,TR=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Sb{constructor(e,t,r={},s=p_){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wC;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(wC||(wC={}));class Zp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zp.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Zp.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Zp.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},c={};return this.map(i,(d,h)=>{a[d]||(c[d]=h)}),this.map(a,(d,h)=>{const f=i[d];if(f){const p=h.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),y=h.filter(w=>m.indexOf(w.presence_ref)<0),g=f.filter(w=>p.indexOf(w.presence_ref)<0);y.length>0&&(o[d]=y),g.length>0&&(c[d]=g)}else o[d]=h}),this.syncDiff(i,{joins:o,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,c)=>{var d;const h=(d=e[o])!==null&&d!==void 0?d:[];if(e[o]=this.cloneDeep(c),h.length>0){const f=e[o].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);e[o].unshift(...p)}r(o,h,c)}),this.map(a,(o,c)=>{let d=e[o];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),e[o]=d,s(o,d,c),d.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bC;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(bC||(bC={}));var em;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(em||(em={}));var ia;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ia||(ia={}));class xE{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Sb(this,Us.join,this.params,this.timeout),this.rejoinTimer=new kR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Us.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Zp(this),this.broadcastEndpointURL=TR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[em.PRESENCE]&&this.bindings[em.PRESENCE].length>0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(ia.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ia.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(ia.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,g=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,w=[];for(let v=0;v<g;v++){const x=y[v],{filter:{event:_,schema:N,table:E,filter:A}}=x,j=p&&p[v];if(j&&j.event===_&&j.schema===N&&j.table===E&&j.filter===A)w.push(Object.assign(Object.assign({},x),{id:j.id}));else{this.unsubscribe(),this.state=Bt.errored,e==null||e(ia.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(ia.SUBSCRIBED);return}}).receive("error",p=>{this.state=Bt.errored,e==null||e(ia.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ia.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Bt.joined&&e===em.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Us.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Sb(this,Us.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sb(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>X6){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:c,leave:d,join:h}=Us;if(r&&[o,c,d,h].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,g,w;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(m=>m.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var y,g,w,v,x,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const N=m.id,E=(y=m.filter)===null||y===void 0?void 0:y.event;return N&&((g=t.ids)===null||g===void 0?void 0:g.includes(N))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const N=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return N==="*"||N===((_=t==null?void 0:t.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:w,commit_timestamp:v,type:x,errors:_}=y;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:_}),this._getPayloadRecords(y))}m.callback(p,r)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xE.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Us.close,{},e)}_onError(e){this._on(Us.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=xC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=xC(e.columns,e.old_record)),t}}const _C=()=>{},oy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sU=[1e3,2e3,5e3,1e4],iU=1e4,aU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class oU{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=p_,this.transport=null,this.heartbeatIntervalMs=oy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_C,this.ref=0,this.reconnectTimer=null,this.logger=_C,this.conn=null,this.sendBuffer=[],this.serializer=new Q6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>wv(async()=>{const{default:o}=await Promise.resolve().then(()=>Vf);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${m_.websocket}`,this.httpEndpoint=TR(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=V6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:K6}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Jp.connecting:return cc.Connecting;case Jp.open:return cc.Open;case Jp.closing:return cc.Closing;default:return cc.Closed}}isConnected(){return this.connectionState()===cc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new xE(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Y6,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},oy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=t,o=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(s,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Us.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([aU],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:q6};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Us.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new kR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},oy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,a,o,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:p_,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:oy.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:h=>sU[h-1]||iU,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class wE extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Gt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class lU extends wE{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class v_ extends wE{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var cU=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};const RR=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>wv(async()=>{const{default:r}=await Promise.resolve().then(()=>Vf);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},dU=()=>cU(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wv(()=>Promise.resolve().then(()=>Vf),void 0)).Response:Response}),y_=n=>{if(Array.isArray(n))return n.map(t=>y_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=y_(r)}),e},uU=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Qd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};const Nb=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),hU=(n,e,t)=>Qd(void 0,void 0,void 0,function*(){const r=yield dU();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new lU(Nb(s),i,a))}).catch(s=>{e(new v_(Nb(s),s))}):e(new v_(Nb(n),n))}),fU=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(uU(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function _v(n,e,t,r,s,i){return Qd(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,fU(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>hU(c,o,r))})})}function Jx(n,e,t,r){return Qd(this,void 0,void 0,function*(){return _v(n,"GET",e,t,r)})}function ci(n,e,t,r,s){return Qd(this,void 0,void 0,function*(){return _v(n,"POST",e,r,s,t)})}function x_(n,e,t,r,s){return Qd(this,void 0,void 0,function*(){return _v(n,"PUT",e,r,s,t)})}function pU(n,e,t,r){return Qd(this,void 0,void 0,function*(){return _v(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function MR(n,e,t,r,s){return Qd(this,void 0,void 0,function*(){return _v(n,"DELETE",e,r,s,t)})}var Pn=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};const mU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},SC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gU{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=RR(s)}uploadOrUpdate(e,t,r,s){return Pn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},SC),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),f=yield(e=="PUT"?x_:ci)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Gt(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Pn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:SC.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield x_(this.fetch,o.toString(),c,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(Gt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Pn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield ci(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new wE("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}update(e,t,r){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Pn(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return Pn(this,void 0,void 0,function*(){try{return{data:{path:(yield ci(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return Pn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ci(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Pn(this,void 0,void 0,function*(){try{const s=yield ci(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}download(e,t){return Pn(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Jx(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Gt(o))return{data:null,error:o};throw o}})}info(e){return Pn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Jx(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:y_(r),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}exists(e){return Pn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield pU(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Gt(r)&&r instanceof v_){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${d}`)}}}remove(e){return Pn(this,void 0,void 0,function*(){try{return{data:yield MR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}list(e,t,r){return Pn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},mU),t),{prefix:e||""});return{data:yield ci(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Gt(s))return{data:null,error:s};throw s}})}listV2(e,t){return Pn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ci(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const vU="2.11.0",yU={"X-Client-Info":`storage-js/${vU}`};var au=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};class xU{constructor(e,t={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},yU),t),this.fetch=RR(r)}listBuckets(){return au(this,void 0,void 0,function*(){try{return{data:yield Jx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Gt(e))return{data:null,error:e};throw e}})}getBucket(e){return au(this,void 0,void 0,function*(){try{return{data:yield Jx(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return au(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return au(this,void 0,void 0,function*(){try{return{data:yield x_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Gt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return au(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return au(this,void 0,void 0,function*(){try{return{data:yield MR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Gt(t))return{data:null,error:t};throw t}})}}class wU extends xU{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new gU(this.url,this.headers,e,this.fetch)}}const bU="2.56.0";let bp="";typeof Deno<"u"?bp="deno":typeof document<"u"?bp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bp="react-native":bp="node";const _U={"X-Client-Info":`supabase-js-${bp}/${bU}`},SU={headers:_U},NU={schema:"public"},EU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AU={};var jU=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};const CU=n=>{let e;return n?e=n:typeof fetch>"u"?e=yR:e=fetch,(...t)=>e(...t)},kU=()=>typeof Headers>"u"?xR:Headers,PU=(n,e,t)=>{const r=CU(t),s=kU();return(i,a)=>jU(void 0,void 0,void 0,function*(){var o;const c=(o=yield e())!==null&&o!==void 0?o:n;let d=new s(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:d}))})};var TU=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};function RU(n){return n.endsWith("/")?n:n+"/"}function MU(n,e){var t,r;const{db:s,auth:i,realtime:a,global:o}=n,{db:c,auth:d,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>TU(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}const IR="2.71.1",mu=30*1e3,w_=3,Eb=w_*mu,IU="http://localhost:9999",DU="supabase.auth.token",OU={"X-Client-Info":`gotrue-js/${IR}`},b_="X-Supabase-Api-Version",DR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},LU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FU=10*60*1e3;class bE extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function be(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class $U extends bE{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function zU(n){return be(n)&&n.name==="AuthApiError"}class OR extends bE{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Gl extends bE{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class go extends Gl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function BU(n){return be(n)&&n.name==="AuthSessionMissingError"}class ly extends Gl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cy extends Gl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class dy extends Gl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function UU(n){return be(n)&&n.name==="AuthImplicitGrantRedirectError"}class NC extends Gl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class __ extends Gl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ab(n){return be(n)&&n.name==="AuthRetryableFetchError"}class EC extends Gl{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class S_ extends Gl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),AC=` 	
\r=`.split(""),HU=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<AC.length;e+=1)n[AC[e].charCodeAt(0)]=-2;for(let e=0;e<Zx.length;e+=1)n[Zx[e].charCodeAt(0)]=e;return n})();function jC(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Zx[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Zx[r]),e.queuedBits-=6}}function LR(n,e,t){const r=HU[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function CC(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{GU(a,r,t)};for(let a=0;a<n.length;a+=1)LR(n.charCodeAt(a),s,i);return e.join("")}function WU(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function VU(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}WU(r,e)}}function GU(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function qU(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)LR(n.charCodeAt(s),t,r);return new Uint8Array(e)}function KU(n){const e=[];return VU(n,t=>e.push(t)),new Uint8Array(e)}function YU(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>jC(s,t,r)),jC(null,t,r),e.join("")}function XU(n){return Math.round(Date.now()/1e3)+n}function QU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ss=()=>typeof window<"u"&&typeof document<"u",ec={tested:!1,writable:!1},FR=()=>{if(!Ss())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ec.tested)return ec.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ec.tested=!0,ec.writable=!0}catch{ec.tested=!0,ec.writable=!1}return ec.writable};function JU(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const $R=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>wv(async()=>{const{default:r}=await Promise.resolve().then(()=>Vf);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},ZU=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",gu=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},tc=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},fo=async(n,e)=>{await n.removeItem(e)};class pw{constructor(){this.promise=new pw.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}pw.promiseConstructor=Promise;function jb(n){const e=n.split(".");if(e.length!==3)throw new S_("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!LU.test(e[r]))throw new S_("JWT not in base64url format");return{header:JSON.parse(CC(e[0])),payload:JSON.parse(CC(e[1])),signature:qU(e[2]),raw:{header:e[0],payload:e[1]}}}async function eH(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function tH(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function nH(n){return("0"+n.toString(16)).substr(-2)}function rH(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,nH).join("")}async function sH(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function iH(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await sH(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ou(n,e,t=!1){const r=rH();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await gu(n,`${e}-code-verifier`,s);const i=await iH(r);return[i,r===i?"plain":"s256"]}const aH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function oH(n){const e=n.headers.get(b_);if(!e||!e.match(aH))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function lH(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function cH(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const dH=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lu(n){if(!dH.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cb(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kC(n){return JSON.parse(JSON.stringify(n))}var uH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const sc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),hH=[502,503,504];async function PC(n){var e;if(!ZU(n))throw new __(sc(n),0);if(hH.includes(n.status))throw new __(sc(n),n.status);let t;try{t=await n.json()}catch(i){throw new OR(sc(i),i)}let r;const s=oH(n);if(s&&s.getTime()>=DR["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new EC(sc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new go}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new EC(sc(t),n.status,t.weak_password.reasons);throw new $U(sc(t),n.status||500,r)}const fH=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Te(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[b_]||(i[b_]=DR["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await pH(n,e,t+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function pH(n,e,t,r,s,i){const a=fH(e,r,s,i);let o;try{o=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new __(sc(c),0)}if(o.ok||await PC(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(c){await PC(c)}}function ea(n){var e;let t=null;yH(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=XU(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function TC(n){const e=ea(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function So(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function mH(n){return{data:n,error:null}}function gH(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=uH(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:o,user:c},error:null}}function vH(n){return n}function yH(n){return n.access_token&&n.refresh_token&&n.expires_in}const kb=["global","local","others"];var xH=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class wH{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=$R(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=kb[0]){if(kb.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kb.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:So})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=xH(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:gH,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:So})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,o,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:vH});if(h.error)throw h.error;const f=await h.json(),p=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);d[`${w}Page`]=g}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(be(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){lu(e);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:So})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){lu(e);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:So})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){lu(e);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:So})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){lu(e.userId);try{const{data:t,error:r}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){lu(e.userId),lu(e.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}}function RC(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function bH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cu={debug:!!(globalThis&&FR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zR extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _H extends zR{}async function SH(n,e,t){cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),cu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new _H(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(cu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}bH();const NH={url:IU,storageKey:DU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function MC(n,e,t){return await t()}const du={};class Am{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Am.nextInstanceID,Am.nextInstanceID+=1,this.instanceID>0&&Ss()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},NH),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new wH({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=$R(s.fetch),this.lock=s.lock||MC,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ss()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=SH:this.lock=MC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:FR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=RC(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=RC(this.memoryStorage)),Ss()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=du[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){du[this.storageKey]=Object.assign(Object.assign({},du[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=du[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){du[this.storageKey]=Object.assign(Object.assign({},du[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${IR}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=JU(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Ss()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),UU(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return be(t)?{error:t}:{error:new OR("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ea}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(be(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:h,password:f,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await ou(this.storage,this.storageKey)),i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:ea})}else if("phone"in e){const{phone:h,password:f,options:p}=e;i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ea})}else throw new cy("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(be(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:TC})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:TC})}else throw new cy("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ly}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,a,o,c,d,h,f,p,m;let y,g;if("message"in e)y=e.message,g=e.signature;else{const{chain:w,wallet:v,statement:x,options:_}=e;let N;if(Ss())if(typeof v=="object")N=v;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))N=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=v}const E=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in N&&N.signIn){const A=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),x?{statement:x}:null));let j;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")j=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)j=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)y=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),g=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${E.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((d=_==null?void 0:_.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(h=_==null?void 0:_.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const A=await N.signMessage(new TextEncoder().encode(y),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=A}}try{const{data:w,error:v}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:YU(g)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ea});if(v)throw v;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new ly}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:v})}catch(w){if(be(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await tc(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ea});if(await fo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ly}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(be(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,o=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ea}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ly}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:o,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await ou(this.storage,this.storageKey));const{error:f}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:c}=e,{data:d,error:h}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new cy("You must provide either an email or phone number.")}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ea});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await ou(this.storage,this.storageKey)),await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:mH})}catch(i){if(be(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new go;const{error:s}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new cy("You must provide either an email or phone number and a type")}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await tc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Eb:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await tc(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Cb()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:So}):await this._useSession(async t=>{var r,s,i;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new go}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:So})})}catch(t){if(be(t))return BU(t)&&(await this._removeSession(),await fo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new go;const a=s.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await ou(this.storage,this.storageKey));const{data:d,error:h}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:a.access_token,xform:So});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new go;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=jb(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new go;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ss())throw new dy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new dy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new NC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dy("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new NC("No code detected.");const{data:x,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:c,token_type:d}=e;if(!i||!o||!a||!d)throw new dy("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(o);let p=h+f;c&&(p=parseInt(c));const m=p-h;m*1e3<=mu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:g,error:w}=await this._getUser(i);if(w)throw w;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:a,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await tc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(zU(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await fo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=QU(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await ou(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(be(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,c,d,h;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Ss()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(be(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await tH(async s=>(s>0&&await eH(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ea})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Ab(i)&&Date.now()+a-r<mu})}catch(r){if(this._debug(t,"error",r),be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ss()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await tc(this.storage,this.storageKey);if(s&&this.userStorage){let a=await tc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await gu(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Cb()}else if(s&&!s.user&&!s.user){const a=await tc(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await fo(this.storage,this.storageKey+"-user"),await gu(this.storage,this.storageKey,s)):s.user=Cb()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Eb;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Eb}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Ab(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new go;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pw;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new go;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),be(i)){const a={session:null,error:i};return Ab(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await gu(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=kC(s);await gu(this.storage,this.storageKey,i)}else{const s=kC(t);await gu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await fo(this.storage,this.storageKey),await fo(this.storage,this.storageKey+"-code-verifier"),await fo(this.storage,this.storageKey+"-user"),this.userStorage&&await fo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ss()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/mu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${mu}ms, refresh threshold is ${w_} ticks`),s<=w_&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof zR)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ss()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await ou(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=jb(s.access_token);let o=null;a.aal&&(o=a.aal);let c=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+FU>s)return r;const{data:i,error:a}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};r=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:c}}=jb(r);t!=null&&t.allowExpired||lH(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const h=cH(s.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,a,KU(`${o}.${c}`)))throw new S_("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}}Am.nextInstanceID=0;const EH=Am;class AH extends EH{constructor(e){super(e)}}var jH=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{d(r.next(h))}catch(f){a(f)}}function c(h){try{d(r.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):s(h.value).then(o,c)}d((r=r.apply(n,e||[])).next())})};class CH{constructor(e,t,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=RU(e),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:NU,realtime:AU,auth:Object.assign(Object.assign({},EU),{storageKey:d}),global:SU},f=MU(r??{},h);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=PU(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new W6(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new wU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new _6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return jH(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AH({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new oU(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kH=(n,e,t)=>new CH(n,e,t);function PH(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}PH()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const TH="https://azthgtmchlqhtzlgwolw.supabase.co",RH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6dGhndG1jaGxxaHR6bGd3b2x3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMjQ5ODksImV4cCI6MjA3MDkwMDk4OX0.h5Cl_qJHDWlnGArMe8pQCn0rwhYUYBcdaviIvpxryAo",re=kH(TH,RH,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),BR=b.createContext({user:null,session:null,loading:!0,signOut:async()=>{},isAdmin:!1,userProfile:null}),Jd=()=>{const n=b.useContext(BR);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},MH=({children:n})=>{const[e,t]=b.useState(null),[r,s]=b.useState(null),[i,a]=b.useState(!0),[o,c]=b.useState(!1),[d,h]=b.useState(null);b.useEffect(()=>{const{data:{subscription:m}}=re.auth.onAuthStateChange(async(y,g)=>{var w;console.log("Auth state change:",y,(w=g==null?void 0:g.user)==null?void 0:w.id),s(g),t((g==null?void 0:g.user)??null),g!=null&&g.user?await f(g.user.id):(h(null),c(!1)),a(!1)});return re.auth.getSession().then(async({data:{session:y}})=>{s(y),t((y==null?void 0:y.user)??null),y!=null&&y.user&&await f(y.user.id),a(!1)}),()=>m.unsubscribe()},[]);const f=async m=>{try{const{data:y,error:g}=await re.from("profiles").select("*").eq("user_id",m).single();if(g){console.error("Error loading user profile:",g);return}h(y),c((y==null?void 0:y.role)==="admin")}catch(y){console.error("Error loading user profile:",y)}},p=async()=>{try{await re.auth.signOut(),t(null),s(null),h(null),c(!1)}catch(m){console.error("Error signing out:",m)}};return l.jsx(BR.Provider,{value:{user:e,session:r,loading:i,signOut:p,isAdmin:o,userProfile:d},children:n})},Ui=()=>{const{user:n,signOut:e,isAdmin:t,userProfile:r}=Jd(),s=so(),i=async()=>{await e(),s("/")};return l.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-card-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:l.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[l.jsxs(Kr,{to:"/",className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-medical rounded-medical flex items-center justify-center",children:l.jsx(aE,{className:"w-6 h-6 text-primary-foreground"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-card-foreground",children:"ResidentTrack"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"FMH Medical Training"})]})]}),l.jsx("nav",{className:"hidden md:flex items-center gap-6",children:n?l.jsxs(l.Fragment,{children:[l.jsx(Kr,{to:"/fmh",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"FMH Tracking"}),l.jsx(Kr,{to:"/dashboard",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Dashboard"}),l.jsx(Kr,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),l.jsx(Kr,{to:"/publications",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Publikationen"}),t&&l.jsxs(Kr,{to:"/admin",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors flex items-center gap-1",children:[l.jsx(iw,{className:"h-4 w-4"}),"Admin"]})]}):l.jsxs(l.Fragment,{children:[l.jsx("a",{href:"#features",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Features"}),l.jsx(Kr,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),l.jsx("a",{href:"#contact",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Kontakt"})]})}),l.jsx("div",{className:"flex items-center gap-3",children:n?l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(W2,{className:"h-4 w-4 text-muted-foreground"}),l.jsx("span",{className:"text-sm text-muted-foreground",children:(r==null?void 0:r.full_name)||n.email})]}),l.jsxs(J,{variant:"ghost",size:"sm",onClick:i,children:[l.jsx(E5,{className:"h-4 w-4 mr-2"}),"Abmelden"]})]}):l.jsxs(l.Fragment,{children:[l.jsx(Kr,{to:"/auth",children:l.jsx(J,{variant:"ghost",size:"sm",className:"hidden md:inline-flex",children:"Anmelden"})}),l.jsx(Kr,{to:"/auth",children:l.jsx(J,{variant:"medical",size:"sm",children:"Kostenlos testen"})})]})})]})})},ee=b.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:te("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ee.displayName="Card";const st=b.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:te("flex flex-col space-y-1.5 p-6",n),...e}));st.displayName="CardHeader";const ut=b.forwardRef(({className:n,...e},t)=>l.jsx("h3",{ref:t,className:te("text-2xl font-semibold leading-none tracking-tight",n),...e}));ut.displayName="CardTitle";const tm=b.forwardRef(({className:n,...e},t)=>l.jsx("p",{ref:t,className:te("text-sm text-muted-foreground",n),...e}));tm.displayName="CardDescription";const Le=b.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:te("p-6 pt-0",n),...e}));Le.displayName="CardContent";const UR=b.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:te("flex items-center p-6 pt-0",n),...e}));UR.displayName="CardFooter";const IH=yv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function de({className:n,variant:e,...t}){return l.jsx("div",{className:te(IH({variant:e}),n),...t})}const $y=({progress:n,label:e,showPercentage:t=!0,variant:r="default",className:s})=>{const i=Math.min(Math.max(n,0),100),a=d=>d>=80?"bg-progress-complete":d>=50?"bg-progress-partial":"bg-progress-pending",c=(()=>{switch(r){case"medical":return{container:"h-3 bg-swiss-gray rounded-full overflow-hidden shadow-progress",bar:"h-full transition-progress rounded-full bg-gradient-progress"};case"compact":return{container:"h-2 bg-swiss-gray rounded-full overflow-hidden",bar:"h-full transition-progress rounded-full"};default:return{container:"h-4 bg-swiss-gray rounded-full overflow-hidden shadow-card",bar:"h-full transition-progress rounded-full"}}})();return l.jsxs("div",{className:te("w-full",s),children:[(e||t)&&l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e&&l.jsx("span",{className:"text-sm font-medium text-card-foreground",children:e}),t&&l.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[i,"%"]})]}),l.jsx("div",{className:c.container,children:l.jsx("div",{className:te(c.bar,a(i)),style:{width:`${i}%`}})})]})},DH=({progress:n,size:e=120,strokeWidth:t=8,label:r,showPercentage:s=!0,variant:i="default",className:a})=>{const o=Math.min(Math.max(n,0),100),c=(e-t)/2,d=c*2*Math.PI,h=d-o/100*d,f=y=>y>=80?"stroke-progress-complete":y>=50?"stroke-progress-partial":"stroke-progress-pending",m=(()=>{switch(i){case"medical":return{size:140,strokeWidth:10};case"large":return{size:160,strokeWidth:12};default:return{size:e,strokeWidth:t}}})();return l.jsxs("div",{className:te("flex flex-col items-center",a),children:[l.jsxs("div",{className:"relative",children:[l.jsxs("svg",{width:m.size,height:m.size,className:"progress-ring",children:[l.jsx("circle",{cx:m.size/2,cy:m.size/2,r:c,stroke:"hsl(var(--swiss-gray))",strokeWidth:m.strokeWidth,fill:"transparent"}),l.jsx("circle",{cx:m.size/2,cy:m.size/2,r:c,stroke:"url(#progressGradient)",strokeWidth:m.strokeWidth,fill:"transparent",strokeDasharray:`${d} ${d}`,strokeDashoffset:h,strokeLinecap:"round",className:te("transition-progress",f(o))}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[l.jsx("stop",{offset:"0%",style:{stopColor:"hsl(var(--progress-complete))"}}),l.jsx("stop",{offset:"100%",style:{stopColor:"hsl(var(--medical-primary))"}})]})})]}),s&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("span",{className:"text-xl font-bold text-card-foreground",children:[Math.round(o),"%"]})})]}),r&&l.jsx("span",{className:"mt-2 text-sm font-medium text-center text-muted-foreground",children:r})]})},uy=[{level:1,title:"PGY1 - Foundation",procedures:45,required:60,courses:3,cmePoints:25},{level:2,title:"PGY2 - Core Skills",procedures:85,required:120,courses:5,cmePoints:40},{level:3,title:"PGY3 - Specialization",procedures:140,required:180,courses:4,cmePoints:35},{level:4,title:"PGY4 - Advanced",procedures:200,required:250,courses:6,cmePoints:50},{level:5,title:"PGY5 - Expert",procedures:180,required:200,courses:3,cmePoints:30},{level:6,title:"PGY6 - Senior",procedures:95,required:100,courses:2,cmePoints:20}],HR=()=>{var f;const[n,e]=b.useState(null),[t,r]=b.useState(0),[s,i]=b.useState(!1);b.useEffect(()=>{if(s){const p=setInterval(()=>{r(m=>m>=100?(i(!1),100):m+2)},50);return()=>clearInterval(p)}},[s]);const a=()=>{r(0),i(!0),e(null)},o=()=>{r(0),i(!1),e(null)},c=()=>{const p=uy.reduce((y,g)=>y+Math.min(g.procedures,g.required),0),m=uy.reduce((y,g)=>y+g.required,0);return Math.round(p/m*100)},d=p=>Math.round(p.procedures/p.required*100),h=p=>p>=90?"default":p>=70?"secondary":"outline";return l.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[l.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[l.jsxs(J,{onClick:a,variant:"default",size:"lg",className:"gap-2",disabled:s,children:[l.jsx(B2,{className:"w-4 h-4"}),s?"Demo läuft...":"Demo starten"]}),l.jsxs(J,{onClick:o,variant:"outline",size:"lg",className:"gap-2",children:[l.jsx(j5,{className:"w-4 h-4"}),"Zurücksetzen"]})]}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h3",{className:"text-2xl font-bold mb-4 text-card-foreground",children:"FMH Ausbildungsfortschritt - Gesamtübersicht"}),l.jsx("div",{className:"flex justify-center",children:l.jsx(DH,{progress:s?Math.min(t,c()):c(),variant:"large",label:"Gesamtfortschritt",className:"mb-6"})})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:uy.map((p,m)=>{const y=d(p),g=s?Math.min(t*.8+m*5,y):y;return l.jsxs(ee,{className:`medical-card p-6 cursor-pointer transition-all duration-300 ${n===p.level?"ring-2 ring-primary shadow-card-hover scale-105":"hover:shadow-card"}`,onClick:()=>e(n===p.level?null:p.level),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs(de,{variant:h(y),className:"text-sm font-semibold",children:["PGY",p.level]}),l.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(g),"%"]})]}),l.jsx("h4",{className:"font-semibold text-card-foreground mb-3",children:p.title}),l.jsx($y,{progress:g,variant:"medical",className:"mb-4"}),l.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Prozeduren:"}),l.jsxs("span",{className:"font-medium",children:[p.procedures,"/",p.required]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Kurse:"}),l.jsx("span",{className:"font-medium",children:p.courses})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"CME Punkte:"}),l.jsx("span",{className:"font-medium",children:p.cmePoints})]})]})]},p.level)})}),n&&l.jsx(ee,{className:"medical-card p-6 hero-gradient",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("h4",{className:"text-xl font-bold mb-4 text-card-foreground",children:[(f=uy.find(p=>p.level===n))==null?void 0:f.title," - Detailansicht"]}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Hier würden detaillierte Informationen zu spezifischen Prozeduren, absolvierten Kursen und fehlenden Anforderungen angezeigt."}),l.jsxs("div",{className:"flex justify-center gap-4",children:[l.jsx(J,{variant:"default",size:"sm",children:"Prozeduren anzeigen"}),l.jsx(J,{variant:"secondary",size:"sm",children:"Passende Kurse finden"})]})]})})]})},OH=[{icon:$u,title:"FMH-konforme Dokumentation",description:"Vollständige Prozeduren-Tracking nach FMH-Standards"},{icon:Bf,title:"Europaweite Kurssuche",description:"Zugang zu Kursen in CH, DE, AT, FR, IT und mehr"},{icon:Ys,title:"Digitales Logbuch",description:"Automatische Portfolio-Erstellung und PDF-Export"},{icon:kl,title:"Zertifikat-Management",description:"CME-Punkte tracking und Zertifikat-Verwaltung"}],LH=()=>l.jsxs("section",{className:"relative overflow-hidden",children:[l.jsx("div",{className:"hero-gradient",children:l.jsx("div",{className:"container mx-auto px-4 py-20",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"text-center lg:text-left",children:[l.jsx(de,{variant:"secondary",className:"mb-6 text-sm px-4 py-2",children:"🇨🇭 FMH-konforme Ausbildung für die Schweiz & Europa"}),l.jsxs("h1",{className:"text-medical-title text-card-foreground mb-6",children:["Ihre chirurgische Ausbildung",l.jsx("span",{className:"bg-gradient-medical bg-clip-text text-transparent",children:" digital verwalten"})]}),l.jsx("p",{className:"text-medical-subtitle mb-8 max-w-2xl mx-auto lg:mx-0",children:"ResidentTrack ist die führende Plattform für Assistenzärzt:innen zur FMH-konformen Dokumentation ihres Ausbildungsfortschritts und zur europäischen Kurssuche."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start items-center mb-12",children:[l.jsxs(J,{variant:"default",size:"lg",className:"gap-2 shadow-card-hover",children:["Als Resident starten",l.jsx(m5,{className:"w-5 h-5"})]}),l.jsxs(J,{variant:"secondary",size:"lg",className:"gap-2",children:[l.jsx(Ys,{className:"w-5 h-5"}),"Demo ansehen"]}),l.jsx(J,{variant:"outline",size:"lg",children:"Kurs anbieten"})]}),l.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start items-center gap-8 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($u,{className:"w-4 h-4 text-activity-mint"}),l.jsx("span",{children:"FMH optimiert"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($u,{className:"w-4 h-4 text-activity-mint"}),l.jsx("span",{children:"DSGVO-konform"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx($u,{className:"w-4 h-4 text-activity-mint"}),l.jsx("span",{children:"500+ Residents"})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"relative z-10",children:[l.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl bg-gradient-to-br from-slate-50 to-slate-100 p-8",children:[l.jsxs("div",{className:"relative h-96",children:[l.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-teal-200 via-teal-400 to-teal-200 rounded-full"}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"relative flex items-start gap-6",children:[l.jsx("div",{className:"relative z-10 flex-shrink-0",children:l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg bg-green-500",children:l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-red-500"})})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-yellow-500",children:"⭐"}),l.jsx("h4",{className:"font-bold text-gray-900 text-sm",children:"PGY-1: Basis Notfallchirurgie"})]}),l.jsx("p",{className:"text-xs text-gray-600",children:"85 Prozeduren erforderlich"})]})})]}),l.jsxs("div",{className:"relative flex items-start gap-6",children:[l.jsx("div",{className:"relative z-10 flex-shrink-0",children:l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg bg-blue-500",children:l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-red-500"})})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-yellow-500",children:"⭐"}),l.jsx("h4",{className:"font-bold text-gray-900 text-sm",children:"PGY-2: Basis Allgemeinchirurgie"})]}),l.jsx("p",{className:"text-xs text-gray-600",children:"260 Prozeduren erforderlich"})]})})]}),l.jsxs("div",{className:"relative flex items-start gap-6",children:[l.jsx("div",{className:"relative z-10 flex-shrink-0",children:l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg bg-purple-500",children:l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-blue-500"})})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:[l.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"PGY-3: Viszeralchirurgie"}),l.jsx("p",{className:"text-xs text-gray-600",children:"165 Prozeduren erforderlich"})]})})]}),l.jsxs("div",{className:"relative flex items-start gap-6",children:[l.jsx("div",{className:"relative z-10 flex-shrink-0",children:l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg bg-orange-500",children:l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-blue-500"})})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:[l.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"PGY-4: Traumatologie"}),l.jsx("p",{className:"text-xs text-gray-600",children:"165 Prozeduren erforderlich"})]})})]}),l.jsxs("div",{className:"relative flex items-start gap-6",children:[l.jsx("div",{className:"relative z-10 flex-shrink-0",children:l.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white shadow-lg bg-red-500",children:l.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-blue-500"})})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm",children:[l.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"PGY-5: Kombination"}),l.jsx("p",{className:"text-xs text-gray-600",children:"165 Prozeduren erforderlich"})]})})]})]})]}),l.jsxs("div",{className:"absolute top-4 left-4",children:[l.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"FMH Training Timeline"}),l.jsx("p",{className:"text-xs text-gray-600",children:"Chirurgische Ausbildung 2024"})]})]}),l.jsx("div",{className:"absolute -top-4 -left-4 bg-white rounded-lg shadow-lg p-4 border",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx($u,{className:"w-4 h-4 text-green-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold",children:"85 Prozeduren"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Basis Notfall"})]})]})}),l.jsx("div",{className:"absolute -bottom-4 -right-4 bg-white rounded-lg shadow-lg p-4 border",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(kl,{className:"w-4 h-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold",children:"260 Prozeduren"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Basis Allgemein"})]})]})})]}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-secondary/10 rounded-2xl -z-10 transform rotate-3 scale-105"})]})]})})}),l.jsx("div",{className:"bg-background",children:l.jsxs("div",{className:"container mx-auto px-4 py-16",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx(de,{variant:"outline",className:"mb-4",children:"Live Demo"}),l.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Fortschritt in Echtzeit verfolgen"}),l.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Erleben Sie selbst, wie ResidentTrack Ihren Ausbildungsfortschritt von PGY1 bis PGY6 visualisiert und Ihre FMH-Anforderungen überwacht."})]}),l.jsx(HR,{})]})}),l.jsx("div",{className:"bg-muted/30",children:l.jsx("div",{className:"container mx-auto px-4 py-16",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:OH.map((n,e)=>l.jsxs(ee,{className:"medical-card p-6 text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-primary rounded-medical flex items-center justify-center mx-auto mb-4",children:l.jsx(n.icon,{className:"w-6 h-6 text-primary-foreground"})}),l.jsx("h3",{className:"font-semibold text-card-foreground mb-2",children:n.title}),l.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]},e))})})})]}),WR=({courses:n,year:e})=>{const t=[...n].sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime()),r=a=>{switch(a){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"upcoming":return"bg-gray-300";default:return"bg-gray-300"}},s=a=>{switch(a){case"required":return"bg-red-500";case"optional":return"bg-blue-500";default:return"bg-gray-500"}},i=a=>{switch(a){case"completed":return l.jsx(de,{variant:"default",className:"bg-green-100 text-green-800",children:"Abgeschlossen"});case"in-progress":return l.jsx(de,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Läuft"});case"upcoming":return l.jsx(de,{variant:"outline",children:"Geplant"});default:return l.jsx(de,{variant:"outline",children:"Unbekannt"})}};return l.jsxs(ee,{className:"medical-card",children:[l.jsx(st,{children:l.jsxs(ut,{className:"flex items-center gap-2",children:[l.jsx(Ys,{className:"w-5 h-5"}),"Kurse ",e]})}),l.jsx(Le,{children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-teal-200 via-teal-400 to-teal-200 rounded-full"}),l.jsx("div",{className:"space-y-8",children:t.map((a,o)=>l.jsxs("div",{className:"relative flex items-start gap-6",children:[l.jsx("div",{className:"relative z-10 flex-shrink-0",children:l.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white shadow-lg ${r(a.status)}`,children:l.jsx("div",{className:`absolute -top-1 -right-1 w-2 h-2 rounded-full ${s(a.type)}`})})}),l.jsx("div",{className:`flex-1 min-w-0 ${o%2===0?"ml-0":"mr-0"}`,children:l.jsxs("div",{className:"bg-white rounded-lg border border-card-border p-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.type==="required"&&l.jsx(jf,{className:"w-4 h-4 text-yellow-500 fill-current"}),l.jsx("h3",{className:`font-semibold text-card-foreground ${a.type==="required"?"font-bold":"font-medium"}`,children:a.title})]}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.category})]}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i(a.status),l.jsxs(de,{variant:"secondary",className:"text-xs",children:[a.points," CME"]})]})]}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Vn,{className:"w-4 h-4"}),l.jsx("span",{children:new Date(a.date).toLocaleDateString("de-DE")})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(wm,{className:"w-4 h-4"}),l.jsx("span",{children:a.location})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(xv,{className:"w-4 h-4"}),l.jsx("span",{children:a.duration})]})]}),a.type==="required"&&l.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-md",children:l.jsx("p",{className:"text-xs text-red-700 font-medium",children:"⭐ Pflichtkurs - Erforderlich für FMH-Zertifizierung"})})]})})]},a.id))}),l.jsx("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg border border-gray-200",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.filter(a=>a.status==="completed").length}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.filter(a=>a.type==="required").length}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Pflichtkurse"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.reduce((a,o)=>a+o.points,0)}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"CME Punkte"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.filter(a=>a.status==="upcoming").length}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Geplant"})]})]})})]})})]})},VR=[{id:"1",title:"Advanced Laparoscopy Workshop",date:"2024-03-15",location:"Zürich",duration:"2 Tage",type:"required",status:"completed",points:8,category:"Chirurgie"},{id:"2",title:"Emergency Medicine Simulation",date:"2024-05-20",location:"Basel",duration:"1 Tag",type:"required",status:"completed",points:6,category:"Notfallmedizin"},{id:"3",title:"Digital Health Innovation",date:"2024-07-10",location:"Bern",duration:"1 Tag",type:"optional",status:"completed",points:4,category:"Digital Health"},{id:"4",title:"Trauma Surgery Masterclass",date:"2024-09-15",location:"Lausanne",duration:"3 Tage",type:"required",status:"upcoming",points:12,category:"Traumatologie"},{id:"5",title:"Medical Ethics Workshop",date:"2024-11-08",location:"Genf",duration:"1 Tag",type:"optional",status:"upcoming",points:3,category:"Ethik"},{id:"6",title:"Research Methodology",date:"2024-12-12",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:6,category:"Forschung"}];class FH extends Y.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Index Error Boundary caught an error:",e,t)}render(){var e;return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Fehler beim Laden der Seite"}),l.jsx("p",{className:"text-red-600 mb-4",children:"Ein unerwarteter Fehler ist aufgetreten."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Seite neu laden"}),l.jsxs("details",{className:"mt-4 text-left",children:[l.jsx("summary",{className:"cursor-pointer text-red-700",children:"Fehlerdetails"}),l.jsx("pre",{className:"mt-2 text-xs text-red-600 bg-red-100 p-2 rounded overflow-auto",children:(e=this.state.error)==null?void 0:e.toString()})]})]})}):this.props.children}}const $H=()=>{console.log("Index: Rendering main content - NO AUTH DEPENDENCIES");try{return l.jsx(FH,{children:l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsxs("main",{children:[l.jsx(LH,{}),l.jsx(HR,{}),l.jsx("section",{className:"py-16 bg-gradient-to-br from-slate-50 to-slate-100",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:["Werden Sie Teil unserer",l.jsx("span",{className:"bg-gradient-medical bg-clip-text text-transparent",children:" Resident-Community"})]}),l.jsx("p",{className:"text-lg text-muted-foreground mb-6",children:"Schließen Sie sich über 500 Assistenzärzt:innen an, die bereits ihre chirurgische Ausbildung mit ResidentTrack digital verwalten und dokumentieren."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[l.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:"500+"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Aktive Residents"})]}),l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[l.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:"15+"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Krankenhäuser"})]}),l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[l.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:"1000+"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Dokumentierte Prozeduren"})]}),l.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-sm",children:[l.jsx("div",{className:"text-2xl font-bold text-primary mb-1",children:"95%"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Zufriedenheitsrate"})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("button",{className:"bg-primary text-primary-foreground px-6 py-3 rounded-lg font-medium hover:bg-primary/90 transition-colors",children:"Jetzt beitreten"}),l.jsx("button",{className:"border border-primary text-primary px-6 py-3 rounded-lg font-medium hover:bg-primary/10 transition-colors",children:"Mehr erfahren"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:l.jsx("img",{src:"/residents-image-2.png",alt:"Resident Community - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"500px"}})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/10 to-secondary/10 rounded-2xl -z-10 transform rotate-3 scale-105"})]})]})})}),l.jsx("section",{className:"py-16 bg-gray-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kurs-Timeline Beispiel"}),l.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Verfolgen Sie Ihre Fortbildung mit unserer professionellen Timeline-Darstellung. Pflichtkurse werden hervorgehoben und der Fortschritt wird visuell dargestellt."})]}),l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsx(WR,{courses:VR,year:2024})})]})}),l.jsx("section",{className:"py-16 bg-gradient-to-br from-amber-50 to-orange-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Auszeichnungen & Anerkennung"}),l.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Ihre Erfolge und Errungenschaften in der chirurgischen Ausbildung"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-2xl font-semibold text-card-foreground",children:"Exzellenz in der Ausbildung"}),l.jsx("p",{className:"text-muted-foreground",children:"Ihre herausragenden Leistungen und Anerkennungen spiegeln Ihr Engagement für die chirurgische Ausbildung wider."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-background rounded-lg shadow-sm border",children:[l.jsx("div",{className:"text-2xl font-bold text-amber-600",children:"5+"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Auszeichnungen"})]}),l.jsxs("div",{className:"text-center p-4 bg-background rounded-lg shadow-sm border",children:[l.jsx("div",{className:"text-2xl font-bold text-amber-600",children:"100%"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Erfolgsrate"})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:l.jsx("img",{src:"/awardsresidents2-image.png",alt:"Awards & Recognition - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"400px"}})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-orange-500/10 rounded-2xl -z-10 transform rotate-3 scale-105"})]})]})]})}),l.jsx("section",{className:"py-16 bg-gradient-to-br from-blue-50 to-indigo-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kurs-Exzellenz"}),l.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Ihre Teilnahme an hochwertigen Kursen und Weiterbildungen"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"relative order-2 lg:order-1",children:[l.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:l.jsx("img",{src:"/courseresidentsimage.png",alt:"Course Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"400px"}})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-indigo-500/10 rounded-2xl -z-10 transform -rotate-3 scale-105"})]}),l.jsxs("div",{className:"space-y-6 order-1 lg:order-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-2xl font-semibold text-card-foreground",children:"Kontinuierliche Weiterbildung"}),l.jsx("p",{className:"text-muted-foreground",children:"Ihre aktive Teilnahme an Kursen und Weiterbildungen zeigt Ihr Engagement für lebenslanges Lernen in der Chirurgie."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-background rounded-lg shadow-sm border",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"15+"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Kurse"})]}),l.jsxs("div",{className:"text-center p-4 bg-background rounded-lg shadow-sm border",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"120+"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"CME Punkte"})]})]})]})]})]})}),l.jsx("section",{className:"py-16 bg-gradient-to-br from-green-50 to-emerald-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Trainings-Exzellenz"}),l.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Ihre praktische Ausbildung und operative Erfahrung"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-2xl font-semibold text-card-foreground",children:"Praktische Ausbildung"}),l.jsx("p",{className:"text-muted-foreground",children:"Ihre operative Erfahrung und praktische Ausbildung bilden das Fundament Ihrer chirurgischen Kompetenz."})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-background rounded-lg shadow-sm border",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:"500+"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Operationen"})]}),l.jsxs("div",{className:"text-center p-4 bg-background rounded-lg shadow-sm border",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:"6"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Jahre"})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:l.jsx("img",{src:"/trainingimage.png",alt:"Training Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"400px"}})}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 rounded-2xl -z-10 transform rotate-3 scale-105"})]})]})]})})]})]})})}catch(n){return console.error("Index render error:",n),l.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Render-Fehler"}),l.jsx("p",{className:"text-red-600",children:String(n)})]})})}},Sv=({progress:n,size:e=80,strokeWidth:t=6,color:r,backgroundColor:s="hsl(var(--swiss-gray))",label:i,showPercentage:a=!1,className:o,onClick:c,variant:d="mint"})=>{const h=Math.min(Math.max(n,0),100),f=(e-t)/2,p=f*2*Math.PI,m=p-h/100*p,y=()=>{if(r)return r;switch(d){case"mint":return"hsl(var(--activity-mint))";case"coral":return"hsl(var(--activity-coral))";case"lavender":return"hsl(var(--activity-lavender))";case"amber":return"hsl(var(--activity-amber))";default:return"hsl(var(--activity-mint))"}};return l.jsxs("div",{className:te("flex flex-col items-center cursor-pointer transition-transform hover:scale-105",o),onClick:c,children:[l.jsxs("div",{className:"relative",children:[l.jsxs("svg",{width:e,height:e,className:"progress-ring -rotate-90",children:[l.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:s,strokeWidth:t,fill:"transparent",opacity:.2}),l.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:y(),strokeWidth:t,fill:"transparent",strokeDasharray:`${p} ${p}`,strokeDashoffset:m,strokeLinecap:"round",className:"transition-all duration-1000 ease-out",style:{transformOrigin:"center"}})]}),a&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("span",{className:"text-sm font-bold text-card-foreground",children:[Math.round(h),"%"]})})]}),i&&l.jsx("span",{className:"mt-1 text-xs font-medium text-center text-muted-foreground max-w-20",children:i})]})};var zH=lN[" useId ".trim().toString()]||(()=>{}),BH=0;function Gn(n){const[e,t]=b.useState(zH());return Tt(()=>{n||t(r=>r??String(BH++))},[n]),n||(e?`radix-${e}`:"")}var UH=b.createContext(void 0);function mw(n){const e=b.useContext(UH);return n||e||"ltr"}var Pb="rovingFocusGroup.onEntryFocus",HH={bubbles:!1,cancelable:!0},Nv="RovingFocusGroup",[N_,GR,WH]=eE(Nv),[VH,qR]=ni(Nv,[WH]),[GH,qH]=VH(Nv),KR=b.forwardRef((n,e)=>l.jsx(N_.Provider,{scope:n.__scopeRovingFocusGroup,children:l.jsx(N_.Slot,{scope:n.__scopeRovingFocusGroup,children:l.jsx(KH,{...n,ref:e})})}));KR.displayName=Nv;var KH=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=n,p=b.useRef(null),m=We(e,p),y=mw(i),[g,w]=Ld({prop:a,defaultProp:o??null,onChange:c,caller:Nv}),[v,x]=b.useState(!1),_=Lt(d),N=GR(t),E=b.useRef(!1),[A,j]=b.useState(0);return b.useEffect(()=>{const P=p.current;if(P)return P.addEventListener(Pb,_),()=>P.removeEventListener(Pb,_)},[_]),l.jsx(GH,{scope:t,orientation:r,dir:y,loop:s,currentTabStopId:g,onItemFocus:b.useCallback(P=>w(P),[w]),onItemShiftTab:b.useCallback(()=>x(!0),[]),onFocusableItemAdd:b.useCallback(()=>j(P=>P+1),[]),onFocusableItemRemove:b.useCallback(()=>j(P=>P-1),[]),children:l.jsx(oe.div,{tabIndex:v||A===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:he(n.onMouseDown,()=>{E.current=!0}),onFocus:he(n.onFocus,P=>{const T=!E.current;if(P.target===P.currentTarget&&T&&!v){const R=new CustomEvent(Pb,HH);if(P.currentTarget.dispatchEvent(R),!R.defaultPrevented){const I=N().filter(B=>B.focusable),O=I.find(B=>B.active),z=I.find(B=>B.id===g),V=[O,z,...I].filter(Boolean).map(B=>B.ref.current);QR(V,h)}}E.current=!1}),onBlur:he(n.onBlur,()=>x(!1))})})}),YR="RovingFocusGroupItem",XR=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...o}=n,c=Gn(),d=i||c,h=qH(YR,t),f=h.currentTabStopId===d,p=GR(t),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=h;return b.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),l.jsx(N_.ItemSlot,{scope:t,id:d,focusable:r,active:s,children:l.jsx(oe.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:he(n.onMouseDown,w=>{r?h.onItemFocus(d):w.preventDefault()}),onFocus:he(n.onFocus,()=>h.onItemFocus(d)),onKeyDown:he(n.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=QH(w,h.orientation,h.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let _=p().filter(N=>N.focusable).map(N=>N.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const N=_.indexOf(w.currentTarget);_=h.loop?JH(_,N+1):_.slice(N+1)}setTimeout(()=>QR(_))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:g!=null}):a})})});XR.displayName=YR;var YH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function XH(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function QH(n,e,t){const r=XH(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return YH[r]}function QR(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function JH(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var ZH=KR,e8=XR,gw="Tabs",[t8,wQ]=ni(gw,[qR]),JR=qR(),[n8,_E]=t8(gw),ZR=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:c="automatic",...d}=n,h=mw(o),[f,p]=Ld({prop:r,onChange:s,defaultProp:i??"",caller:gw});return l.jsx(n8,{scope:t,baseId:Gn(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:c,children:l.jsx(oe.div,{dir:h,"data-orientation":a,...d,ref:e})})});ZR.displayName=gw;var eM="TabsList",tM=b.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,i=_E(eM,t),a=JR(t);return l.jsx(ZH,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:l.jsx(oe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});tM.displayName=eM;var nM="TabsTrigger",rM=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...i}=n,a=_E(nM,t),o=JR(t),c=aM(a.baseId,r),d=oM(a.baseId,r),h=r===a.value;return l.jsx(e8,{asChild:!0,...o,focusable:!s,active:h,children:l.jsx(oe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:he(n.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:he(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:he(n.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});rM.displayName=nM;var sM="TabsContent",iM=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:i,...a}=n,o=_E(sM,t),c=aM(o.baseId,r),d=oM(o.baseId,r),h=r===o.value,f=b.useRef(h);return b.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),l.jsx(ms,{present:s||h,children:({present:p})=>l.jsx(oe.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});iM.displayName=sM;function aM(n,e){return`${n}-trigger-${e}`}function oM(n,e){return`${n}-content-${e}`}var r8=ZR,lM=tM,cM=rM,dM=iM;const Xs=r8,fs=b.forwardRef(({className:n,...e},t)=>l.jsx(lM,{ref:t,className:te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));fs.displayName=lM.displayName;const et=b.forwardRef(({className:n,...e},t)=>l.jsx(cM,{ref:t,className:te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));et.displayName=cM.displayName;const ot=b.forwardRef(({className:n,...e},t)=>l.jsx(dM,{ref:t,className:te("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));ot.displayName=dM.displayName;const Tb=[{id:1,title:"OCT angiography: measurement of retinal macular microvasculature with spectralis II OCT angiography–reliability and reproducibility",authors:"S Hosari, B Hohberger, L Theelke, H Sari, M Lucio, CY Mardin",journal:"Ophthalmologica",year:2020,citations:67,doi:"10.1159/000502473",type:"research",impact:"high",category:"Ophthalmology"},{id:2,title:"Dynamics of retinal vessel loss after acute optic neuritis in patients with relapsing multiple sclerosis",authors:"L Aly, C Noll, R Wicklein, E Wolf, EF Romahn, J Wauschkuhn, S Hosari, ...",journal:"Neurology: Neuroimmunology & Neuroinflammation",year:2022,citations:27,doi:"10.1212/NXI.0000000000001159",type:"research",impact:"high",category:"Neurology"},{id:3,title:"OCT-angiography: Regional reduced macula microcirculation in ocular hypertensive and pre-perimetric glaucoma patients",authors:"B Hohberger, M Lucio, S Schlick, A Wollborn, S Hosari, C Mardin",journal:"PLoS One",year:2021,citations:24,doi:"10.1371/journal.pone.0246469",type:"research",impact:"medium",category:"Ophthalmology"},{id:4,title:"OCT-Angiography: Mydriatic phenylephrine and tropicamide do not influence retinal microvasculature in macula and peripapillary region",authors:"B Hohberger, M Müller, S Hosari, CY Mardin",journal:"PLoS One",year:2019,citations:23,doi:"10.1371/journal.pone.0221395",type:"research",impact:"medium",category:"Ophthalmology"},{id:5,title:"Autoantibodies activating the β2-adrenergic receptor characterize patients with primary and secondary glaucoma",authors:"B Hohberger, R Kunze, G Wallukat, K Kara, CY Mardin, R Lämmer, ...",journal:"Frontiers in Immunology",year:2019,citations:18,doi:"10.3389/fimmu.2019.02112",type:"research",impact:"high",category:"Immunology"},{id:6,title:"Faecal incontinence in the era of sacral neuromodulation",authors:"S Hosari, M Ramser, M Turina",journal:"Swiss Medical Weekly",year:2025,citations:0,doi:"10.4414/smw.2025.04298",type:"research",impact:"medium",category:"Surgery"}],s8=[{id:1,title:"AI-Driven OCT Analysis for Early Glaucoma Detection",status:"active",progress:75,startDate:"2024-01",expectedCompletion:"2025-06",milestones:[{id:1,title:"Data Collection Phase",completed:!0,date:"2024-03"},{id:2,title:"Algorithm Development",completed:!0,date:"2024-08"},{id:3,title:"Validation Studies",completed:!1,date:"2024-12"},{id:4,title:"Clinical Trial Setup",completed:!1,date:"2025-03"},{id:5,title:"Publication & Patent",completed:!1,date:"2025-06"}],collaborators:["Dr. B. Hohberger","Prof. CY Mardin","AI Research Team"],funding:"Swiss National Science Foundation"},{id:2,title:"Surgical Training Simulation Platform",status:"active",progress:45,startDate:"2024-06",expectedCompletion:"2025-12",milestones:[{id:1,title:"Platform Architecture",completed:!0,date:"2024-08"},{id:2,title:"VR Integration",completed:!1,date:"2024-11"},{id:3,title:"FMH Module Integration",completed:!1,date:"2025-02"},{id:4,title:"Beta Testing",completed:!1,date:"2025-08"},{id:5,title:"Commercial Launch",completed:!1,date:"2025-12"}],collaborators:["Surgical Education Team","VR Development Team"],funding:"University Hospital Zurich"},{id:3,title:"Multi-Center Glaucoma Registry Study",status:"planning",progress:20,startDate:"2025-01",expectedCompletion:"2026-12",milestones:[{id:1,title:"Ethics Approval",completed:!1,date:"2025-02"},{id:2,title:"Center Recruitment",completed:!1,date:"2025-04"},{id:3,title:"Data Collection Start",completed:!1,date:"2025-06"},{id:4,title:"Interim Analysis",completed:!1,date:"2026-06"},{id:5,title:"Final Publication",completed:!1,date:"2026-12"}],collaborators:["European Glaucoma Centers","Statistical Team"],funding:"European Research Council"}],uM=()=>{const[n,e]=b.useState("publications"),t=o=>{switch(o){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},r=o=>{switch(o){case"active":return"bg-green-100 text-green-800 border-green-200";case"planning":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},s=Tb.reduce((o,c)=>o+c.citations,0);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs(ee,{className:"p-6 text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:Tb.length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Publikationen"})]}),l.jsxs(ee,{className:"p-6 text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:s}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Zitationen"})]}),l.jsxs(ee,{className:"p-6 text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"h-Index"})]}),l.jsxs(ee,{className:"p-6 text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"i10-Index"})]})]}),l.jsxs(Xs,{value:n,onValueChange:e,className:"w-full",children:[l.jsxs(fs,{className:"grid w-full grid-cols-2",children:[l.jsxs(et,{value:"publications",className:"flex items-center gap-2",children:[l.jsx(Ml,{className:"w-4 h-4"}),"Publikationen"]}),l.jsxs(et,{value:"projects",className:"flex items-center gap-2",children:[l.jsx(C5,{className:"w-4 h-4"}),"Laufende Projekte"]})]}),l.jsx(ot,{value:"publications",className:"mt-6",children:l.jsx("div",{className:"space-y-6",children:Tb.map(o=>l.jsx(ee,{className:"p-6 hover:shadow-lg transition-shadow",children:l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"flex items-start gap-3 mb-3",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-card-foreground mb-2 leading-tight",children:o.title}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.authors}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Ml,{className:"w-3 h-3"}),o.journal]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Vn,{className:"w-3 h-3"}),o.year]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(A5,{className:"w-3 h-3"}),o.citations," Zitationen"]})]})]})}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[l.jsx(de,{variant:"outline",className:t(o.impact),children:o.impact==="high"?"Hohe Relevanz":"Mittlere Relevanz"}),l.jsx(de,{variant:"outline",children:o.category}),l.jsx(de,{variant:"outline",children:o.type==="research"?"Forschung":"Review"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs(J,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[l.jsx(n_,{className:"w-3 h-3"}),"DOI"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[l.jsx(iE,{className:"w-3 h-3"}),"PDF"]})]})]})},o.id))})}),l.jsx(ot,{value:"projects",className:"mt-6",children:l.jsx("div",{className:"space-y-8",children:s8.map(o=>l.jsxs(ee,{className:"p-6",children:[l.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start gap-6",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-2",children:o.title}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Vn,{className:"w-3 h-3"}),o.startDate," - ",o.expectedCompletion]}),l.jsx(de,{className:r(o.status),children:o.status==="active"?"Aktiv":"Planung"})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:"text-2xl font-bold text-primary",children:[o.progress,"%"]}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Fortschritt"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(cE,{className:"w-4 h-4 text-muted-foreground"}),l.jsx("span",{className:"text-sm font-medium",children:"Fortschritt"})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${o.progress}%`}})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[l.jsx(Bf,{className:"w-4 h-4"}),"Kollaboratoren"]}),l.jsx("div",{className:"space-y-1",children:o.collaborators.map((c,d)=>l.jsx("div",{className:"text-sm text-muted-foreground",children:c},d))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[l.jsx(kl,{className:"w-4 h-4"}),"Finanzierung"]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:o.funding})]})]})]})}),l.jsxs("div",{className:"border-t pt-6",children:[l.jsxs("h4",{className:"font-medium text-card-foreground mb-4 flex items-center gap-2",children:[l.jsx(xv,{className:"w-4 h-4"}),"Meilensteine"]}),l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),l.jsx("div",{className:"space-y-4",children:o.milestones.map((c,d)=>l.jsxs("div",{className:"relative flex items-start gap-4",children:[l.jsx("div",{className:`relative z-10 flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center ${c.completed?"bg-green-500 border-green-500 text-white":"bg-white border-gray-300 text-gray-400"}`,children:c.completed?l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):l.jsx("span",{className:"text-xs font-medium",children:d+1})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h5",{className:`font-medium ${c.completed?"text-green-700":"text-card-foreground"}`,children:c.title}),l.jsx("span",{className:"text-sm text-muted-foreground",children:c.date})]})})]},c.id))})]})]})]},o.id))})})]})]})},i8=({activityId:n,data:e,onClose:t})=>{const s=(m=>{const y={courses:{title:"Kurse & Fortbildungen",icon:Ys,variant:"coral",color:"hsl(var(--activity-coral))"},mandatory:{title:"Pflichtkurse",icon:Ys,variant:"lavender",color:"hsl(var(--activity-lavender))"},procedures:{title:"OP-Prozeduren",icon:bm,variant:"mint",color:"hsl(var(--activity-mint))"},publications:{title:"Publikationen",icon:Ml,variant:"lavender",color:"hsl(var(--activity-lavender))"},awards:{title:"Awards & Auszeichnungen",icon:kl,variant:"amber",color:"hsl(var(--activity-amber))"}};return y[m]||y.courses})(n),i=s.icon,a=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["2021","2022","2023","2024"].map((m,y)=>l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsx("span",{className:"font-medium",children:m}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($y,{progress:Math.min((y+1)*25,100),variant:"compact",className:"w-24"}),l.jsxs(de,{variant:"outline",children:[(y+1)*7," Kurse"]})]})]},m))})]})]}),o=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),l.jsx(WR,{courses:VR,year:2024}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["2021","2022","2023","2024"].map((m,y)=>l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsx("span",{className:"font-medium",children:m}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($y,{progress:Math.min((y+1)*25,100),variant:"compact",className:"w-24"}),l.jsxs(de,{variant:"outline",children:[(y+1)*7," Kurse"]})]})]},m))})]})]}),c=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Durchgeführt"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"FMH-Ziel"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[Math.round(e.completed/e.target*100),"%"]}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Fortschritt"})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),l.jsx("div",{className:"space-y-3",children:Object.entries(e.byYear||{}).map(([m,y])=>l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsx("span",{className:"font-medium",children:m}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx($y,{progress:Math.min(y/200*100,100),variant:"compact",className:"w-32"}),l.jsxs(de,{variant:"outline",children:[String(y)," Prozeduren"]})]})]},m))})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-card-foreground",children:"Häufigste Prozeduren"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Laparoskopische Cholezystektomie",count:45},{name:"Appendektomie",count:38},{name:"Hernienreparatur",count:32},{name:"Endoskopie",count:28}].map(m=>l.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-medical",children:[l.jsx("span",{className:"text-sm font-medium",children:m.name}),l.jsxs(de,{variant:"secondary",children:[m.count,"x"]})]},m.name))})]})]}),d=()=>l.jsx(uM,{}),h=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"Auszeichnungen"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"National"})]})}),l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"International"})]})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Auszeichnungen"}),l.jsx("div",{className:"space-y-3",children:e.items.map((m,y)=>l.jsx("div",{className:"p-4 border border-card-border rounded-medical",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:m.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h5",{className:"font-medium text-card-foreground",children:m.title}),l.jsx("p",{className:"text-sm text-muted-foreground",children:m.organization})]}),l.jsx(de,{variant:"outline",children:m.date})]})},y))})]})]}),f=()=>{switch(n){case"courses":return a();case"mandatory":return o();case"procedures":return c();case"publications":return d();case"awards":return h();default:return a()}},p=n==="procedures"||n==="courses"||n==="mandatory"?e.completed/e.target*100:Math.min(e.count/5*100,100);return l.jsxs(ee,{className:"medical-card p-6 mb-8 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 rounded-medical",style:{backgroundColor:`${s.color}20`},children:l.jsx(i,{className:"w-6 h-6",style:{color:s.color}})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-card-foreground",children:s.title}),l.jsx("p",{className:"text-muted-foreground",children:"Detailierte Ansicht und Jahresverlauf"})]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Sv,{progress:p,variant:s.variant,size:80,strokeWidth:6,showPercentage:!0}),l.jsx(J,{variant:"ghost",size:"sm",onClick:t,children:l.jsx(no,{className:"w-4 h-4"})})]})]}),l.jsxs(Xs,{defaultValue:"overview",className:"w-full",children:[l.jsxs(fs,{className:"grid w-full grid-cols-3",children:[l.jsx(et,{value:"overview",children:"Übersicht"}),l.jsx(et,{value:"yearly",children:"Jahresverlauf"}),l.jsx(et,{value:"trends",children:"Trends"})]}),l.jsx(ot,{value:"overview",className:"mt-6",children:f()}),l.jsx(ot,{value:"yearly",className:"mt-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(Vn,{className:"w-4 h-4"}),l.jsx("span",{children:"Fortschrittsverlauf nach Jahren"})]}),f()]})}),l.jsx(ot,{value:"trends",className:"mt-6",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[l.jsx(cE,{className:"w-4 h-4"}),l.jsx("span",{children:"Analyse und Prognosen"})]}),l.jsxs(ee,{className:"p-6",children:[l.jsx("h4",{className:"font-semibold text-card-foreground mb-4",children:"Trend-Analyse"}),l.jsx("p",{className:"text-muted-foreground",children:"Basierend auf Ihrem aktuellen Fortschritt werden Sie Ihr FMH-Ziel voraussichtlich in 18 Monaten erreichen. Ihr Lernfortschritt ist konstant und liegt über dem Durchschnitt."})]})]})})]})]})},Tn={courses:{completed:28,target:35,points:142},mandatoryCourses:{completed:8,target:12,points:64},procedures:{completed:485,target:600,byYear:{2021:45,2022:120,2023:180,2024:140}},publications:{count:6,articles:[{title:"Minimally Invasive Cardiac Surgery",journal:"Heart Surgery Today",date:"2024-03-15"},{title:"Patient Outcomes in Emergency Medicine",journal:"Emergency Care Journal",date:"2023-11-20"}]},awards:{count:3,items:[{title:"Young Surgeon Award",organization:"Swiss Medical Society",date:"2024-01-15",icon:"🏆"},{title:"Research Excellence",organization:"University Hospital",date:"2023-09-10",icon:"🎖️"}]}},a8=()=>{var a;const[n,e]=b.useState(null),[t,r]=b.useState(0);b.useEffect(()=>{const o=setTimeout(()=>{r(100)},300);return()=>clearTimeout(o)},[]);const i=[{id:"courses",label:"Kurse",progress:Tn.courses.completed/Tn.courses.target*100,variant:"coral",icon:Ys,data:Tn.courses},{id:"mandatory",label:"Pflichtkurse",progress:Tn.mandatoryCourses.completed/Tn.mandatoryCourses.target*100,variant:"lavender",icon:aE,data:Tn.mandatoryCourses},{id:"procedures",label:"Prozeduren",progress:Tn.procedures.completed/Tn.procedures.target*100,variant:"mint",icon:bm,data:Tn.procedures},{id:"publications",label:"Publikationen",progress:Math.min(Tn.publications.count/5*100,100),variant:"lavender",icon:Ml,data:Tn.publications},{id:"awards",label:"Awards",progress:Math.min(Tn.awards.count/3*100,100),variant:"amber",icon:Xj,data:Tn.awards}];return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsxs("main",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Ihr Ausbildungsdashboard"}),l.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihren FMH-konformen Fortschritt in Echtzeit"})]}),l.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(oE,{className:"w-4 h-4"}),"Profil teilen"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(Vn,{className:"w-4 h-4"}),"Kurse suchen"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(iw,{className:"w-4 h-4"}),"Einstellungen"]})]})]}),l.jsxs(ee,{className:"medical-card p-8 mb-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-4",children:"Ihr Aktivitätsfortschritt"}),l.jsx("p",{className:"text-muted-foreground",children:"Apple Activity-inspirierte Darstellung Ihrer medizinischen Ausbildung"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:i.map(o=>{const c=t>0?Math.min(t*(o.progress/100),o.progress):o.progress;return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Sv,{progress:c,variant:o.variant,size:120,strokeWidth:8,label:o.label,showPercentage:!0,onClick:()=>e(o.id),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[l.jsx(o.icon,{className:"w-4 h-4 text-muted-foreground"}),l.jsx(de,{variant:"outline",className:"text-xs",children:o.id==="procedures"?`${o.data.completed}/${o.data.target}`:o.id==="courses"||o.id==="mandatory"?`${o.data.completed}/${o.data.target}`:`${o.data.count||o.data.completed||0}`})]})})]},o.id)})})]}),n&&l.jsx(i8,{activityId:n,data:(a=i.find(o=>o.id===n))==null?void 0:a.data,onClose:()=>e(null)}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[l.jsx(ee,{className:"medical-card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:l.jsx(bm,{className:"w-6 h-6 text-activity-mint"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktuelle PGY"}),l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"PGY-4"})]})]})}),l.jsx(ee,{className:"medical-card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:l.jsx(Ys,{className:"w-6 h-6 text-activity-coral"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte gesamt"}),l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"206"})]})]})}),l.jsx(ee,{className:"medical-card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:l.jsx(Xj,{className:"w-6 h-6 text-activity-amber"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Bis FMH-Ziel"}),l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"24 Mon."})]})]})})]}),l.jsxs(ee,{className:"medical-card p-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Letzte Aktivitäten"}),l.jsxs(Xs,{defaultValue:"procedures",className:"w-full",children:[l.jsxs(fs,{className:"grid w-full grid-cols-4",children:[l.jsx(et,{value:"procedures",children:"Prozeduren"}),l.jsx(et,{value:"courses",children:"Kurse"}),l.jsx(et,{value:"publications",children:"Publikationen"}),l.jsx(et,{value:"awards",children:"Awards"})]}),l.jsx(ot,{value:"procedures",className:"mt-6",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-card-foreground",children:"Laparoskopische Cholezystektomie"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"15. Januar 2024"})]}),l.jsx(de,{variant:"default",children:"Chirurgie"})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-card-foreground",children:"Appendektomie"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"12. Januar 2024"})]}),l.jsx(de,{variant:"default",children:"Chirurgie"})]})]})}),l.jsx(ot,{value:"courses",className:"mt-6",children:l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-card-foreground",children:"Advanced Laparoscopy Workshop"}),l.jsx("p",{className:"text-sm text-muted-foreground",children:"8 CME Punkte • Zürich"})]}),l.jsx(de,{variant:"secondary",children:"Abgeschlossen"})]})})}),l.jsx(ot,{value:"publications",className:"mt-6",children:l.jsx("div",{className:"space-y-4",children:Tn.publications.articles.map((o,c)=>l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-card-foreground",children:o.title}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.journal," • ",o.date]})]}),l.jsx(de,{variant:"outline",children:"Artikel"})]},c))})}),l.jsx(ot,{value:"awards",className:"mt-6",children:l.jsx("div",{className:"space-y-4",children:Tn.awards.items.map((o,c)=>l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:o.icon}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-card-foreground",children:o.title}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.organization," • ",o.date]})]})]}),l.jsx(de,{variant:"default",children:"Auszeichnung"})]},c))})})]})]})]})]})},o8=({profile:n,activityData:e,className:t})=>{const[r,s]=b.useState(null),i=()=>{const c=[];return n.public_fields.courses&&(c.push({id:"courses",label:"Kurse",progress:e.courses.total>0?e.courses.completed/e.courses.total*100:0,variant:"coral",icon:Ys}),c.push({id:"mandatory",label:"Pflicht",progress:e.courses.mandatory_total>0?e.courses.mandatory_completed/e.courses.mandatory_total*100:0,variant:"lavender",icon:Ys})),n.public_fields.procedures&&c.push({id:"procedures",label:"OPs",progress:e.procedures.required>0?e.procedures.completed/e.procedures.required*100:0,variant:"mint",icon:bm}),n.public_fields.publications&&c.push({id:"publications",label:"Papers",progress:Math.min(e.publications.count*20,100),variant:"amber",icon:Ml}),c},a=async()=>{navigator.share?await navigator.share({title:`${n.full_name} - Medizinisches Profil`,text:`Schauen Sie sich das medizinische Profil von ${n.full_name} an`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},o=i();return l.jsxs("div",{className:te("max-w-4xl mx-auto space-y-6",t),children:[l.jsx(ee,{className:"overflow-hidden",children:l.jsx("div",{className:"bg-gradient-medical p-6 text-white",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[n.avatar_url&&l.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 overflow-hidden",children:l.jsx("img",{src:n.avatar_url,alt:n.full_name,className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:n.full_name}),l.jsxs("div",{className:"flex flex-wrap gap-2 text-sm opacity-90",children:[n.pgy_level&&l.jsxs(de,{variant:"secondary",className:"bg-white/20 text-white border-white/20",children:["PGY-",n.pgy_level]}),n.specialty&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(bm,{className:"w-4 h-4"}),n.specialty]}),n.institution&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(F2,{className:"w-4 h-4"}),n.institution]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(J,{variant:"ghost",size:"sm",onClick:a,className:"text-white hover:bg-white/20",children:l.jsx(oE,{className:"w-4 h-4"})}),n.linkedin_url&&l.jsx(J,{variant:"ghost",size:"sm",asChild:!0,className:"text-white hover:bg-white/20",children:l.jsx("a",{href:n.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:l.jsx(n_,{className:"w-4 h-4"})})})]})]})})}),l.jsxs(ee,{children:[l.jsx(st,{children:l.jsxs(ut,{className:"flex items-center gap-2",children:[l.jsx(kl,{className:"w-5 h-5 text-medical-primary"}),"Fortschritt ",new Date().getFullYear()]})}),l.jsx(Le,{children:l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 justify-items-center",children:o.map(c=>l.jsx(Sv,{progress:c.progress,variant:c.variant,label:c.label,showPercentage:!0,onClick:()=>s(r===c.id?null:c.id),className:r===c.id?"ring-2 ring-medical-primary rounded-lg p-2":""},c.id))})})]}),r&&l.jsx(ee,{children:l.jsxs(Le,{className:"pt-6",children:[r==="courses"&&n.public_fields.courses&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Absolvierte Kurse"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 rounded-lg bg-activity-coral/10 border border-activity-coral/20",children:[l.jsx("div",{className:"text-2xl font-bold text-activity-coral",children:e.courses.completed}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.total," Kursen"]})]}),l.jsxs("div",{className:"p-4 rounded-lg bg-activity-lavender/10 border border-activity-lavender/20",children:[l.jsx("div",{className:"text-2xl font-bold text-activity-lavender",children:e.courses.mandatory_completed}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.mandatory_total," Pflichtkursen"]})]})]})]}),r==="procedures"&&n.public_fields.procedures&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chirurgische Eingriffe"}),l.jsxs("div",{className:"p-4 rounded-lg bg-activity-mint/10 border border-activity-mint/20",children:[l.jsx("div",{className:"text-2xl font-bold text-activity-mint",children:e.procedures.completed}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.procedures.required," erforderlichen Eingriffen"]})]})]}),r==="publications"&&n.public_fields.publications&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publikationen"}),l.jsx("div",{className:"space-y-3",children:e.publications.recent.map((c,d)=>l.jsxs("div",{className:"p-4 rounded-lg bg-activity-amber/10 border border-activity-amber/20",children:[l.jsx("h4",{className:"font-medium text-activity-amber",children:c.title}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[c.journal&&l.jsx("span",{children:c.journal}),c.publication_date&&l.jsxs("span",{className:"ml-2",children:[l.jsx(Vn,{className:"w-3 h-3 inline mr-1"}),new Date(c.publication_date).toLocaleDateString("de-DE")]})]}),(c.doi||c.link)&&l.jsxs("div",{className:"mt-2",children:[c.link&&l.jsx(J,{variant:"ghost",size:"sm",asChild:!0,children:l.jsxs("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",children:[l.jsx(n_,{className:"w-3 h-3 mr-1"}),"Ansehen"]})}),c.doi&&l.jsx(J,{variant:"ghost",size:"sm",asChild:!0,children:l.jsxs("a",{href:`https://doi.org/${c.doi}`,target:"_blank",rel:"noopener noreferrer",children:["DOI: ",c.doi]})})]})]},d))})]})]})}),n.public_fields.awards&&e.awards.length>0&&l.jsxs(ee,{children:[l.jsx(st,{children:l.jsxs(ut,{className:"flex items-center gap-2",children:[l.jsx(kl,{className:"w-5 h-5 text-progress-complete"}),"Auszeichnungen"]})}),l.jsx(Le,{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.awards.map((c,d)=>l.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-activity-amber/20 to-activity-coral/10 border border-activity-amber/30",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(kl,{className:"w-5 h-5 text-activity-amber mt-0.5"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium",children:c.title}),c.organization&&l.jsx("p",{className:"text-sm text-muted-foreground",children:c.organization}),c.awarded_date&&l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(c.awarded_date).toLocaleDateString("de-DE")})]})]})},d))})})]})]})},l8=()=>{const{handle:n}=pR(),[e,t]=b.useState(null),[r,s]=b.useState(null),[i,a]=b.useState(!0),[o,c]=b.useState(!1);return b.useEffect(()=>{(async()=>{if(!n){c(!0),a(!1);return}try{const{data:h,error:f}=await re.from("profiles").select("*").eq("handle",n).eq("is_public",!0).single();if(f||!h){c(!0),a(!1);return}t({...h,public_fields:h.public_fields||{courses:!0,awards:!0,publications:!0,procedures:!1}});const p=new Date().getFullYear(),{data:m}=await re.from("course_enrollments").select(`
            status,
            courses (
              is_mandatory
            )
          `).eq("user_id",h.user_id),y=(m==null?void 0:m.length)||0,g=(m==null?void 0:m.filter(j=>j.status==="completed").length)||0,w=(m==null?void 0:m.filter(j=>{var P;return(P=j.courses)==null?void 0:P.is_mandatory}).length)||0,v=(m==null?void 0:m.filter(j=>{var P;return j.status==="completed"&&((P=j.courses)==null?void 0:P.is_mandatory)}).length)||0,{data:x}=await re.from("procedure_logs").select("*").eq("user_id",h.user_id).gte("performed_date",`${p}-01-01`).lte("performed_date",`${p}-12-31`),{data:_}=await re.from("procedures").select("min_required_by_pgy").eq("active",!0);let N=0;_&&h.pgy_level&&_.forEach(j=>{var T;const P=(T=j.min_required_by_pgy)==null?void 0:T[h.pgy_level.toString()];P&&(N+=P)});const{data:E}=await re.from("publications").select("*").eq("user_id",h.user_id).order("publication_date",{ascending:!1}).limit(5),{data:A}=await re.from("awards").select("*").eq("user_id",h.user_id).order("awarded_date",{ascending:!1});s({courses:{completed:g,total:y,mandatory_completed:v,mandatory_total:w},procedures:{completed:(x==null?void 0:x.length)||0,required:N},publications:{count:(E==null?void 0:E.length)||0,recent:E||[]},awards:A||[]})}catch(h){console.error("Error fetching profile:",h),d2({title:"Fehler",description:"Profil konnte nicht geladen werden.",variant:"destructive"}),c(!0)}finally{a(!1)}})()},[n]),i?l.jsx("div",{className:"min-h-screen bg-background",children:l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsxs("div",{className:"animate-pulse space-y-6",children:[l.jsx("div",{className:"h-32 bg-muted rounded-lg"}),l.jsx("div",{className:"h-64 bg-muted rounded-lg"}),l.jsx("div",{className:"h-48 bg-muted rounded-lg"})]})})})}):o||!e||!r?l.jsx(n6,{to:"/404",replace:!0}):l.jsx("div",{className:"min-h-screen bg-background",children:l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx(o8,{profile:e,activityData:r})})})},Fe=b.forwardRef(({className:n,type:e,...t},r)=>l.jsx("input",{type:e,className:te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Fe.displayName="Input";function E_(n,[e,t]){return Math.min(t,Math.max(e,n))}var Rb=0;function SE(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??IC()),document.body.insertAdjacentElement("beforeend",n[1]??IC()),Rb++,()=>{Rb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Rb--}},[])}function IC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Mb="focusScope.autoFocusOnMount",Ib="focusScope.autoFocusOnUnmount",DC={bubbles:!1,cancelable:!0},c8="FocusScope",vw=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=n,[o,c]=b.useState(null),d=Lt(s),h=Lt(i),f=b.useRef(null),p=We(e,g=>c(g)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let g=function(_){if(m.paused||!o)return;const N=_.target;o.contains(N)?f.current=N:vo(f.current,{select:!0})},w=function(_){if(m.paused||!o)return;const N=_.relatedTarget;N!==null&&(o.contains(N)||vo(f.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const E of _)E.removedNodes.length>0&&vo(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",w);const x=new MutationObserver(v);return o&&x.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",w),x.disconnect()}}},[r,o,m.paused]),b.useEffect(()=>{if(o){LC.add(m);const g=document.activeElement;if(!o.contains(g)){const v=new CustomEvent(Mb,DC);o.addEventListener(Mb,d),o.dispatchEvent(v),v.defaultPrevented||(d8(m8(hM(o)),{select:!0}),document.activeElement===g&&vo(o))}return()=>{o.removeEventListener(Mb,d),setTimeout(()=>{const v=new CustomEvent(Ib,DC);o.addEventListener(Ib,h),o.dispatchEvent(v),v.defaultPrevented||vo(g??document.body,{select:!0}),o.removeEventListener(Ib,h),LC.remove(m)},0)}}},[o,d,h,m]);const y=b.useCallback(g=>{if(!t&&!r||m.paused)return;const w=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(w&&v){const x=g.currentTarget,[_,N]=u8(x);_&&N?!g.shiftKey&&v===N?(g.preventDefault(),t&&vo(_,{select:!0})):g.shiftKey&&v===_&&(g.preventDefault(),t&&vo(N,{select:!0})):v===x&&g.preventDefault()}},[t,r,m.paused]);return l.jsx(oe.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});vw.displayName=c8;function d8(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(vo(r,{select:e}),document.activeElement!==t)return}function u8(n){const e=hM(n),t=OC(e,n),r=OC(e.reverse(),n);return[t,r]}function hM(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function OC(n,e){for(const t of n)if(!h8(t,{upTo:e}))return t}function h8(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function f8(n){return n instanceof HTMLInputElement&&"select"in n}function vo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&f8(n)&&e&&n.select()}}var LC=p8();function p8(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=FC(n,e),n.unshift(e)},remove(e){var t;n=FC(n,e),(t=n[0])==null||t.resume()}}}function FC(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function m8(n){return n.filter(e=>e.tagName!=="A")}const g8=["top","right","bottom","left"],Il=Math.min,Ir=Math.max,e0=Math.round,hy=Math.floor,Hi=n=>({x:n,y:n}),v8={left:"right",right:"left",bottom:"top",top:"bottom"},y8={start:"end",end:"start"};function A_(n,e,t){return Ir(n,Il(e,t))}function Ja(n,e){return typeof n=="function"?n(e):n}function Za(n){return n.split("-")[0]}function qf(n){return n.split("-")[1]}function NE(n){return n==="x"?"y":"x"}function EE(n){return n==="y"?"height":"width"}const x8=new Set(["top","bottom"]);function Fi(n){return x8.has(Za(n))?"y":"x"}function AE(n){return NE(Fi(n))}function w8(n,e,t){t===void 0&&(t=!1);const r=qf(n),s=AE(n),i=EE(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=t0(a)),[a,t0(a)]}function b8(n){const e=t0(n);return[j_(n),e,j_(e)]}function j_(n){return n.replace(/start|end/g,e=>y8[e])}const $C=["left","right"],zC=["right","left"],_8=["top","bottom"],S8=["bottom","top"];function N8(n,e,t){switch(n){case"top":case"bottom":return t?e?zC:$C:e?$C:zC;case"left":case"right":return e?_8:S8;default:return[]}}function E8(n,e,t,r){const s=qf(n);let i=N8(Za(n),t==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(j_)))),i}function t0(n){return n.replace(/left|right|bottom|top/g,e=>v8[e])}function A8(n){return{top:0,right:0,bottom:0,left:0,...n}}function fM(n){return typeof n!="number"?A8(n):{top:n,right:n,bottom:n,left:n}}function n0(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function BC(n,e,t){let{reference:r,floating:s}=n;const i=Fi(e),a=AE(e),o=EE(a),c=Za(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[o]/2-s[o]/2;let m;switch(c){case"top":m={x:h,y:r.y-s.height};break;case"bottom":m={x:h,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(qf(e)){case"start":m[a]-=p*(t&&d?-1:1);break;case"end":m[a]+=p*(t&&d?-1:1);break}return m}const j8=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=t,o=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:h,y:f}=BC(d,r,c),p=r,m={},y=0;for(let g=0;g<o.length;g++){const{name:w,fn:v}=o[g],{x,y:_,data:N,reset:E}=await v({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:d,platform:a,elements:{reference:n,floating:e}});h=x??h,f=_??f,m={...m,[w]:{...m[w],...N}},E&&y<=50&&(y++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(d=E.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):E.rects),{x:h,y:f}=BC(d,p,c)),g=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:m}};async function jm(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:c}=n,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=Ja(e,n),y=fM(m),w=o[p?f==="floating"?"reference":"floating":f],v=n0(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:d,rootBoundary:h,strategy:c})),x=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),N=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},E=n0(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:_,strategy:c}):x);return{top:(v.top-E.top+y.top)/N.y,bottom:(E.bottom-v.bottom+y.bottom)/N.y,left:(v.left-E.left+y.left)/N.x,right:(E.right-v.right+y.right)/N.x}}const C8=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:c}=e,{element:d,padding:h=0}=Ja(n,e)||{};if(d==null)return{};const f=fM(h),p={x:t,y:r},m=AE(s),y=EE(m),g=await a.getDimensions(d),w=m==="y",v=w?"top":"left",x=w?"bottom":"right",_=w?"clientHeight":"clientWidth",N=i.reference[y]+i.reference[m]-p[m]-i.floating[y],E=p[m]-i.reference[m],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let j=A?A[_]:0;(!j||!await(a.isElement==null?void 0:a.isElement(A)))&&(j=o.floating[_]||i.floating[y]);const P=N/2-E/2,T=j/2-g[y]/2-1,R=Il(f[v],T),I=Il(f[x],T),O=R,z=j-g[y]-I,L=j/2-g[y]/2+P,V=A_(O,L,z),B=!c.arrow&&qf(s)!=null&&L!==V&&i.reference[y]/2-(L<O?R:I)-g[y]/2<0,F=B?L<O?L-O:L-z:0;return{[m]:p[m]+F,data:{[m]:V,centerOffset:L-V-F,...B&&{alignmentOffset:F}},reset:B}}}),k8=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...w}=Ja(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=Za(s),x=Fi(o),_=Za(o)===o,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),E=p||(_||!g?[t0(o)]:b8(o)),A=y!=="none";!p&&A&&E.push(...E8(o,g,y,N));const j=[o,...E],P=await jm(e,w),T=[];let R=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(P[v]),f){const L=w8(s,a,N);T.push(P[L[0]],P[L[1]])}if(R=[...R,{placement:s,overflows:T}],!T.every(L=>L<=0)){var I,O;const L=(((I=i.flip)==null?void 0:I.index)||0)+1,V=j[L];if(V&&(!(f==="alignment"?x!==Fi(V):!1)||R.every(D=>D.overflows[0]>0&&Fi(D.placement)===x)))return{data:{index:L,overflows:R},reset:{placement:V}};let B=(O=R.filter(F=>F.overflows[0]<=0).sort((F,D)=>F.overflows[1]-D.overflows[1])[0])==null?void 0:O.placement;if(!B)switch(m){case"bestFit":{var z;const F=(z=R.filter(D=>{if(A){const M=Fi(D.placement);return M===x||M==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(M=>M>0).reduce((M,U)=>M+U,0)]).sort((D,M)=>D[1]-M[1])[0])==null?void 0:z[0];F&&(B=F);break}case"initialPlacement":B=o;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function UC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function HC(n){return g8.some(e=>n[e]>=0)}const P8=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Ja(n,e);switch(r){case"referenceHidden":{const i=await jm(e,{...s,elementContext:"reference"}),a=UC(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:HC(a)}}}case"escaped":{const i=await jm(e,{...s,altBoundary:!0}),a=UC(i,t.floating);return{data:{escapedOffsets:a,escaped:HC(a)}}}default:return{}}}}},pM=new Set(["left","top"]);async function T8(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Za(t),o=qf(t),c=Fi(t)==="y",d=pM.has(a)?-1:1,h=i&&c?-1:1,f=Ja(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),c?{x:m*h,y:p*d}:{x:p*d,y:m*h}}const R8=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:a,middlewareData:o}=e,c=await T8(e,n);return a===((t=o.offset)==null?void 0:t.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},M8=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...c}=Ja(n,e),d={x:t,y:r},h=await jm(e,c),f=Fi(Za(s)),p=NE(f);let m=d[p],y=d[f];if(i){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",x=m+h[w],_=m-h[v];m=A_(x,m,_)}if(a){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=y+h[w],_=y-h[v];y=A_(x,y,_)}const g=o.fn({...e,[p]:m,[f]:y});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[p]:i,[f]:a}}}}}},I8=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:c=!0,crossAxis:d=!0}=Ja(n,e),h={x:t,y:r},f=Fi(s),p=NE(f);let m=h[p],y=h[f];const g=Ja(o,e),w=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const _=p==="y"?"height":"width",N=i.reference[p]-i.floating[_]+w.mainAxis,E=i.reference[p]+i.reference[_]-w.mainAxis;m<N?m=N:m>E&&(m=E)}if(d){var v,x;const _=p==="y"?"width":"height",N=pM.has(Za(s)),E=i.reference[f]-i.floating[_]+(N&&((v=a.offset)==null?void 0:v[f])||0)+(N?0:w.crossAxis),A=i.reference[f]+i.reference[_]+(N?0:((x=a.offset)==null?void 0:x[f])||0)-(N?w.crossAxis:0);y<E?y=E:y>A&&(y=A)}return{[p]:m,[f]:y}}}},D8=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:a,elements:o}=e,{apply:c=()=>{},...d}=Ja(n,e),h=await jm(e,d),f=Za(s),p=qf(s),m=Fi(s)==="y",{width:y,height:g}=i.floating;let w,v;f==="top"||f==="bottom"?(w=f,v=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=f,w=p==="end"?"top":"bottom");const x=g-h.top-h.bottom,_=y-h.left-h.right,N=Il(g-h[w],x),E=Il(y-h[v],_),A=!e.middlewareData.shift;let j=N,P=E;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=x),A&&!p){const R=Ir(h.left,0),I=Ir(h.right,0),O=Ir(h.top,0),z=Ir(h.bottom,0);m?P=y-2*(R!==0||I!==0?R+I:Ir(h.left,h.right)):j=g-2*(O!==0||z!==0?O+z:Ir(h.top,h.bottom))}await c({...e,availableWidth:P,availableHeight:j});const T=await a.getDimensions(o.floating);return y!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function yw(){return typeof window<"u"}function Kf(n){return mM(n)?(n.nodeName||"").toLowerCase():"#document"}function zr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Yi(n){var e;return(e=(mM(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function mM(n){return yw()?n instanceof Node||n instanceof zr(n).Node:!1}function Qs(n){return yw()?n instanceof Element||n instanceof zr(n).Element:!1}function Vi(n){return yw()?n instanceof HTMLElement||n instanceof zr(n).HTMLElement:!1}function WC(n){return!yw()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof zr(n).ShadowRoot}const O8=new Set(["inline","contents"]);function Ev(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Js(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!O8.has(s)}const L8=new Set(["table","td","th"]);function F8(n){return L8.has(Kf(n))}const $8=[":popover-open",":modal"];function xw(n){return $8.some(e=>{try{return n.matches(e)}catch{return!1}})}const z8=["transform","translate","scale","rotate","perspective"],B8=["transform","translate","scale","rotate","perspective","filter"],U8=["paint","layout","strict","content"];function jE(n){const e=CE(),t=Qs(n)?Js(n):n;return z8.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||B8.some(r=>(t.willChange||"").includes(r))||U8.some(r=>(t.contain||"").includes(r))}function H8(n){let e=Dl(n);for(;Vi(e)&&!kf(e);){if(jE(e))return e;if(xw(e))return null;e=Dl(e)}return null}function CE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const W8=new Set(["html","body","#document"]);function kf(n){return W8.has(Kf(n))}function Js(n){return zr(n).getComputedStyle(n)}function ww(n){return Qs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Dl(n){if(Kf(n)==="html")return n;const e=n.assignedSlot||n.parentNode||WC(n)&&n.host||Yi(n);return WC(e)?e.host:e}function gM(n){const e=Dl(n);return kf(e)?n.ownerDocument?n.ownerDocument.body:n.body:Vi(e)&&Ev(e)?e:gM(e)}function Cm(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=gM(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),a=zr(s);if(i){const o=C_(a);return e.concat(a,a.visualViewport||[],Ev(s)?s:[],o&&t?Cm(o):[])}return e.concat(s,Cm(s,[],t))}function C_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function vM(n){const e=Js(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vi(n),i=s?n.offsetWidth:t,a=s?n.offsetHeight:r,o=e0(t)!==i||e0(r)!==a;return o&&(t=i,r=a),{width:t,height:r,$:o}}function kE(n){return Qs(n)?n:n.contextElement}function Xu(n){const e=kE(n);if(!Vi(e))return Hi(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=vM(e);let a=(i?e0(t.width):t.width)/r,o=(i?e0(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const V8=Hi(0);function yM(n){const e=zr(n);return!CE()||!e.visualViewport?V8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function G8(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==zr(n)?!1:e}function Fd(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=kE(n);let a=Hi(1);e&&(r?Qs(r)&&(a=Xu(r)):a=Xu(n));const o=G8(i,t,r)?yM(i):Hi(0);let c=(s.left+o.x)/a.x,d=(s.top+o.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=zr(i),m=r&&Qs(r)?zr(r):r;let y=p,g=C_(y);for(;g&&r&&m!==y;){const w=Xu(g),v=g.getBoundingClientRect(),x=Js(g),_=v.left+(g.clientLeft+parseFloat(x.paddingLeft))*w.x,N=v.top+(g.clientTop+parseFloat(x.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,f*=w.y,c+=_,d+=N,y=zr(g),g=C_(y)}}return n0({width:h,height:f,x:c,y:d})}function PE(n,e){const t=ww(n).scrollLeft;return e?e.left+t:Fd(Yi(n)).left+t}function xM(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:PE(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function q8(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",a=Yi(r),o=e?xw(e.floating):!1;if(r===a||o&&i)return t;let c={scrollLeft:0,scrollTop:0},d=Hi(1);const h=Hi(0),f=Vi(r);if((f||!f&&!i)&&((Kf(r)!=="body"||Ev(a))&&(c=ww(r)),Vi(r))){const m=Fd(r);d=Xu(r),h.x=m.x+r.clientLeft,h.y=m.y+r.clientTop}const p=a&&!f&&!i?xM(a,c,!0):Hi(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:t.y*d.y-c.scrollTop*d.y+h.y+p.y}}function K8(n){return Array.from(n.getClientRects())}function Y8(n){const e=Yi(n),t=ww(n),r=n.ownerDocument.body,s=Ir(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ir(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+PE(n);const o=-t.scrollTop;return Js(r).direction==="rtl"&&(a+=Ir(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}function X8(n,e){const t=zr(n),r=Yi(n),s=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,c=0;if(s){i=s.width,a=s.height;const d=CE();(!d||d&&e==="fixed")&&(o=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:o,y:c}}const Q8=new Set(["absolute","fixed"]);function J8(n,e){const t=Fd(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=Vi(n)?Xu(n):Hi(1),a=n.clientWidth*i.x,o=n.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:a,height:o,x:c,y:d}}function VC(n,e,t){let r;if(e==="viewport")r=X8(n,t);else if(e==="document")r=Y8(Yi(n));else if(Qs(e))r=J8(e,t);else{const s=yM(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return n0(r)}function wM(n,e){const t=Dl(n);return t===e||!Qs(t)||kf(t)?!1:Js(t).position==="fixed"||wM(t,e)}function Z8(n,e){const t=e.get(n);if(t)return t;let r=Cm(n,[],!1).filter(o=>Qs(o)&&Kf(o)!=="body"),s=null;const i=Js(n).position==="fixed";let a=i?Dl(n):n;for(;Qs(a)&&!kf(a);){const o=Js(a),c=jE(a);!c&&o.position==="fixed"&&(s=null),(i?!c&&!s:!c&&o.position==="static"&&!!s&&Q8.has(s.position)||Ev(a)&&!c&&wM(n,a))?r=r.filter(h=>h!==a):s=o,a=Dl(a)}return e.set(n,r),r}function eW(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?xw(e)?[]:Z8(e,this._c):[].concat(t),r],o=a[0],c=a.reduce((d,h)=>{const f=VC(e,h,s);return d.top=Ir(f.top,d.top),d.right=Il(f.right,d.right),d.bottom=Il(f.bottom,d.bottom),d.left=Ir(f.left,d.left),d},VC(e,o,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function tW(n){const{width:e,height:t}=vM(n);return{width:e,height:t}}function nW(n,e,t){const r=Vi(e),s=Yi(e),i=t==="fixed",a=Fd(n,!0,i,e);let o={scrollLeft:0,scrollTop:0};const c=Hi(0);function d(){c.x=PE(s)}if(r||!r&&!i)if((Kf(e)!=="body"||Ev(s))&&(o=ww(e)),r){const m=Fd(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&d();i&&!r&&s&&d();const h=s&&!r&&!i?xM(s,o):Hi(0),f=a.left+o.scrollLeft-c.x-h.x,p=a.top+o.scrollTop-c.y-h.y;return{x:f,y:p,width:a.width,height:a.height}}function Db(n){return Js(n).position==="static"}function GC(n,e){if(!Vi(n)||Js(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Yi(n)===t&&(t=t.ownerDocument.body),t}function bM(n,e){const t=zr(n);if(xw(n))return t;if(!Vi(n)){let s=Dl(n);for(;s&&!kf(s);){if(Qs(s)&&!Db(s))return s;s=Dl(s)}return t}let r=GC(n,e);for(;r&&F8(r)&&Db(r);)r=GC(r,e);return r&&kf(r)&&Db(r)&&!jE(r)?t:r||H8(n)||t}const rW=async function(n){const e=this.getOffsetParent||bM,t=this.getDimensions,r=await t(n.floating);return{reference:nW(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sW(n){return Js(n).direction==="rtl"}const iW={convertOffsetParentRelativeRectToViewportRelativeRect:q8,getDocumentElement:Yi,getClippingRect:eW,getOffsetParent:bM,getElementRects:rW,getClientRects:K8,getDimensions:tW,getScale:Xu,isElement:Qs,isRTL:sW};function _M(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function aW(n,e){let t=null,r;const s=Yi(n);function i(){var o;clearTimeout(r),(o=t)==null||o.disconnect(),t=null}function a(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),i();const d=n.getBoundingClientRect(),{left:h,top:f,width:p,height:m}=d;if(o||e(),!p||!m)return;const y=hy(f),g=hy(s.clientWidth-(h+p)),w=hy(s.clientHeight-(f+m)),v=hy(h),_={rootMargin:-y+"px "+-g+"px "+-w+"px "+-v+"px",threshold:Ir(0,Il(1,c))||1};let N=!0;function E(A){const j=A[0].intersectionRatio;if(j!==c){if(!N)return a();j?a(!1,j):r=setTimeout(()=>{a(!1,1e-7)},1e3)}j===1&&!_M(d,n.getBoundingClientRect())&&a(),N=!1}try{t=new IntersectionObserver(E,{..._,root:s.ownerDocument})}catch{t=new IntersectionObserver(E,_)}t.observe(n)}return a(!0),i}function oW(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=kE(n),h=s||i?[...d?Cm(d):[],...Cm(e)]:[];h.forEach(v=>{s&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const f=d&&o?aW(d,t):null;let p=-1,m=null;a&&(m=new ResizeObserver(v=>{let[x]=v;x&&x.target===d&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(e)})),t()}),d&&!c&&m.observe(d),m.observe(e));let y,g=c?Fd(n):null;c&&w();function w(){const v=Fd(n);g&&!_M(g,v)&&t(),g=v,y=requestAnimationFrame(w)}return t(),()=>{var v;h.forEach(x=>{s&&x.removeEventListener("scroll",t),i&&x.removeEventListener("resize",t)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const lW=R8,cW=M8,dW=k8,uW=D8,hW=P8,qC=C8,fW=I8,pW=(n,e,t)=>{const r=new Map,s={platform:iW,...t},i={...s.platform,_c:r};return j8(n,e,{...s,platform:i})};var mW=typeof document<"u",gW=function(){},zy=mW?b.useLayoutEffect:gW;function r0(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!r0(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!r0(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function SM(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function KC(n,e){const t=SM(n);return Math.round(e*t)/t}function Ob(n){const e=b.useRef(n);return zy(()=>{e.current=n}),e}function vW(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:c,open:d}=n,[h,f]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=b.useState(r);r0(p,r)||m(r);const[y,g]=b.useState(null),[w,v]=b.useState(null),x=b.useCallback(D=>{D!==A.current&&(A.current=D,g(D))},[]),_=b.useCallback(D=>{D!==j.current&&(j.current=D,v(D))},[]),N=i||y,E=a||w,A=b.useRef(null),j=b.useRef(null),P=b.useRef(h),T=c!=null,R=Ob(c),I=Ob(s),O=Ob(d),z=b.useCallback(()=>{if(!A.current||!j.current)return;const D={placement:e,strategy:t,middleware:p};I.current&&(D.platform=I.current),pW(A.current,j.current,D).then(M=>{const U={...M,isPositioned:O.current!==!1};L.current&&!r0(P.current,U)&&(P.current=U,Yd.flushSync(()=>{f(U)}))})},[p,e,t,I,O]);zy(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[d]);const L=b.useRef(!1);zy(()=>(L.current=!0,()=>{L.current=!1}),[]),zy(()=>{if(N&&(A.current=N),E&&(j.current=E),N&&E){if(R.current)return R.current(N,E,z);z()}},[N,E,z,R,T]);const V=b.useMemo(()=>({reference:A,floating:j,setReference:x,setFloating:_}),[x,_]),B=b.useMemo(()=>({reference:N,floating:E}),[N,E]),F=b.useMemo(()=>{const D={position:t,left:0,top:0};if(!B.floating)return D;const M=KC(B.floating,h.x),U=KC(B.floating,h.y);return o?{...D,transform:"translate("+M+"px, "+U+"px)",...SM(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:M,top:U}},[t,o,B.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:z,refs:V,elements:B,floatingStyles:F}),[h,z,V,B,F])}const yW=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?qC({element:r.current,padding:s}).fn(t):{}:r?qC({element:r,padding:s}).fn(t):{}}}},xW=(n,e)=>({...lW(n),options:[n,e]}),wW=(n,e)=>({...cW(n),options:[n,e]}),bW=(n,e)=>({...fW(n),options:[n,e]}),_W=(n,e)=>({...dW(n),options:[n,e]}),SW=(n,e)=>({...uW(n),options:[n,e]}),NW=(n,e)=>({...hW(n),options:[n,e]}),EW=(n,e)=>({...yW(n),options:[n,e]});var AW="Arrow",NM=b.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return l.jsx(oe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});NM.displayName=AW;var jW=NM;function CW(n){const[e,t]=b.useState(void 0);return Tt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,o;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,o=d.blockSize}else a=n.offsetWidth,o=n.offsetHeight;t({width:a,height:o})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var TE="Popper",[EM,bw]=ni(TE),[kW,AM]=EM(TE),jM=n=>{const{__scopePopper:e,children:t}=n,[r,s]=b.useState(null);return l.jsx(kW,{scope:e,anchor:r,onAnchorChange:s,children:t})};jM.displayName=TE;var CM="PopperAnchor",kM=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=AM(CM,t),a=b.useRef(null),o=We(e,a);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:l.jsx(oe.div,{...s,ref:o})});kM.displayName=CM;var RE="PopperContent",[PW,TW]=EM(RE),PM=b.forwardRef((n,e)=>{var H,me,Ne,je,Ce,Me;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=n,w=AM(RE,t),[v,x]=b.useState(null),_=We(e,zt=>x(zt)),[N,E]=b.useState(null),A=CW(N),j=(A==null?void 0:A.width)??0,P=(A==null?void 0:A.height)??0,T=r+(i!=="center"?"-"+i:""),R=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(d)?d:[d],O=I.length>0,z={padding:R,boundary:I.filter(MW),altBoundary:O},{refs:L,floatingStyles:V,placement:B,isPositioned:F,middlewareData:D}=vW({strategy:"fixed",placement:T,whileElementsMounted:(...zt)=>oW(...zt,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[xW({mainAxis:s+P,alignmentAxis:a}),c&&wW({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?bW():void 0,...z}),c&&_W({...z}),SW({...z,apply:({elements:zt,rects:Xn,availableWidth:Xl,availableHeight:io})=>{const{width:Ql,height:Zf}=Xn.reference,tu=zt.floating.style;tu.setProperty("--radix-popper-available-width",`${Xl}px`),tu.setProperty("--radix-popper-available-height",`${io}px`),tu.setProperty("--radix-popper-anchor-width",`${Ql}px`),tu.setProperty("--radix-popper-anchor-height",`${Zf}px`)}}),N&&EW({element:N,padding:o}),IW({arrowWidth:j,arrowHeight:P}),p&&NW({strategy:"referenceHidden",...z})]}),[M,U]=MM(B),X=Lt(y);Tt(()=>{F&&(X==null||X())},[F,X]);const $=(H=D.arrow)==null?void 0:H.x,W=(me=D.arrow)==null?void 0:me.y,Q=((Ne=D.arrow)==null?void 0:Ne.centerOffset)!==0,[K,le]=b.useState();return Tt(()=>{v&&le(window.getComputedStyle(v).zIndex)},[v]),l.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:F?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(je=D.transformOrigin)==null?void 0:je.x,(Ce=D.transformOrigin)==null?void 0:Ce.y].join(" "),...((Me=D.hide)==null?void 0:Me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:l.jsx(PW,{scope:t,placedSide:M,onArrowChange:E,arrowX:$,arrowY:W,shouldHideArrow:Q,children:l.jsx(oe.div,{"data-side":M,"data-align":U,...g,ref:_,style:{...g.style,animation:F?void 0:"none"}})})})});PM.displayName=RE;var TM="PopperArrow",RW={top:"bottom",right:"left",bottom:"top",left:"right"},RM=b.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=TW(TM,r),a=RW[i.placedSide];return l.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:l.jsx(jW,{...s,ref:t,style:{...s.style,display:"block"}})})});RM.displayName=TM;function MW(n){return n!==null}var IW=n=>({name:"transformOrigin",options:n,fn(e){var w,v,x;const{placement:t,rects:r,middlewareData:s}=e,a=((w=s.arrow)==null?void 0:w.centerOffset)!==0,o=a?0:n.arrowWidth,c=a?0:n.arrowHeight,[d,h]=MM(t),f={start:"0%",center:"50%",end:"100%"}[h],p=(((v=s.arrow)==null?void 0:v.x)??0)+o/2,m=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let y="",g="";return d==="bottom"?(y=a?f:`${p}px`,g=`${-c}px`):d==="top"?(y=a?f:`${p}px`,g=`${r.floating.height+c}px`):d==="right"?(y=`${-c}px`,g=a?f:`${m}px`):d==="left"&&(y=`${r.floating.width+c}px`,g=a?f:`${m}px`),{data:{x:y,y:g}}}});function MM(n){const[e,t="center"]=n.split("-");return[e,t]}var IM=jM,ME=kM,DM=PM,OM=RM;function DW(n){const e=b.useRef({value:n,previous:n});return b.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var OW=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},uu=new WeakMap,fy=new WeakMap,py={},Lb=0,LM=function(n){return n&&(n.host||LM(n.parentNode))},LW=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=LM(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},FW=function(n,e,t,r){var s=LW(e,Array.isArray(n)?n:[n]);py[t]||(py[t]=new WeakMap);var i=py[t],a=[],o=new Set,c=new Set(s),d=function(f){!f||o.has(f)||(o.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))h(p);else try{var m=p.getAttribute(r),y=m!==null&&m!=="false",g=(uu.get(p)||0)+1,w=(i.get(p)||0)+1;uu.set(p,g),i.set(p,w),a.push(p),g===1&&y&&fy.set(p,!0),w===1&&p.setAttribute(t,"true"),y||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return h(e),o.clear(),Lb++,function(){a.forEach(function(f){var p=uu.get(f)-1,m=i.get(f)-1;uu.set(f,p),i.set(f,m),p||(fy.has(f)||f.removeAttribute(r),fy.delete(f)),m||f.removeAttribute(t)}),Lb--,Lb||(uu=new WeakMap,uu=new WeakMap,fy=new WeakMap,py={})}},IE=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=OW(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),FW(r,s,t,"aria-hidden")):function(){return null}},Ii=function(){return Ii=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Ii.apply(this,arguments)};function FM(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function $W(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var By="right-scroll-bar-position",Uy="width-before-scroll-bar",zW="with-scroll-bars-hidden",BW="--removed-body-scroll-bar-size";function Fb(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function UW(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var HW=typeof window<"u"?b.useLayoutEffect:b.useEffect,YC=new WeakMap;function WW(n,e){var t=UW(null,function(r){return n.forEach(function(s){return Fb(s,r)})});return HW(function(){var r=YC.get(t);if(r){var s=new Set(r),i=new Set(n),a=t.current;s.forEach(function(o){i.has(o)||Fb(o,null)}),i.forEach(function(o){s.has(o)||Fb(o,a)})}YC.set(t,n)},[n]),t}function VW(n){return n}function GW(n,e){e===void 0&&(e=VW);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(o){return i(o)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var o=t;t=[],o.forEach(i),a=t}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),t}}}};return s}function qW(n){n===void 0&&(n={});var e=GW(null);return e.options=Ii({async:!0,ssr:!1},n),e}var $M=function(n){var e=n.sideCar,t=FM(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Ii({},t))};$M.isSideCarExport=!0;function KW(n,e){return n.useMedium(e),$M}var zM=qW(),$b=function(){},_w=b.forwardRef(function(n,e){var t=b.useRef(null),r=b.useState({onScrollCapture:$b,onWheelCapture:$b,onTouchMoveCapture:$b}),s=r[0],i=r[1],a=n.forwardProps,o=n.children,c=n.className,d=n.removeScrollBar,h=n.enabled,f=n.shards,p=n.sideCar,m=n.noRelative,y=n.noIsolation,g=n.inert,w=n.allowPinchZoom,v=n.as,x=v===void 0?"div":v,_=n.gapMode,N=FM(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,A=WW([t,e]),j=Ii(Ii({},N),s);return b.createElement(b.Fragment,null,h&&b.createElement(E,{sideCar:zM,removeScrollBar:d,shards:f,noRelative:m,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:_}),a?b.cloneElement(b.Children.only(o),Ii(Ii({},j),{ref:A})):b.createElement(x,Ii({},j,{className:c,ref:A}),o))});_w.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_w.classNames={fullWidth:Uy,zeroRight:By};var YW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XW(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=YW();return e&&n.setAttribute("nonce",e),n}function QW(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function JW(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var ZW=function(){var n=0,e=null;return{add:function(t){n==0&&(e=XW())&&(QW(e,t),JW(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},eV=function(){var n=ZW();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},BM=function(){var n=eV(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},tV={left:0,top:0,right:0,gap:0},zb=function(n){return parseInt(n||"",10)||0},nV=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[zb(t),zb(r),zb(s)]},rV=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return tV;var e=nV(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},sV=BM(),Qu="data-scroll-locked",iV=function(n,e,t,r){var s=n.left,i=n.top,a=n.right,o=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(zW,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Qu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(By,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Uy,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(By," .").concat(By,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Uy," .").concat(Uy,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Qu,`] {
    `).concat(BW,": ").concat(o,`px;
  }
`)},XC=function(){var n=parseInt(document.body.getAttribute(Qu)||"0",10);return isFinite(n)?n:0},aV=function(){b.useEffect(function(){return document.body.setAttribute(Qu,(XC()+1).toString()),function(){var n=XC()-1;n<=0?document.body.removeAttribute(Qu):document.body.setAttribute(Qu,n.toString())}},[])},oV=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;aV();var i=b.useMemo(function(){return rV(s)},[s]);return b.createElement(sV,{styles:iV(i,!e,s,t?"":"!important")})},k_=!1;if(typeof window<"u")try{var my=Object.defineProperty({},"passive",{get:function(){return k_=!0,!0}});window.addEventListener("test",my,my),window.removeEventListener("test",my,my)}catch{k_=!1}var hu=k_?{passive:!1}:!1,lV=function(n){return n.tagName==="TEXTAREA"},UM=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!lV(n)&&t[e]==="visible")},cV=function(n){return UM(n,"overflowY")},dV=function(n){return UM(n,"overflowX")},QC=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=HM(n,r);if(s){var i=WM(n,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},uV=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},hV=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},HM=function(n,e){return n==="v"?cV(e):dV(e)},WM=function(n,e){return n==="v"?uV(e):hV(e)},fV=function(n,e){return n==="h"&&e==="rtl"?-1:1},pV=function(n,e,t,r,s){var i=fV(n,window.getComputedStyle(e).direction),a=i*r,o=t.target,c=e.contains(o),d=!1,h=a>0,f=0,p=0;do{if(!o)break;var m=WM(n,o),y=m[0],g=m[1],w=m[2],v=g-w-i*y;(y||v)&&HM(n,o)&&(f+=v,p+=y);var x=o.parentNode;o=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&o!==document.body||c&&(e.contains(o)||e===o));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(d=!0),d},gy=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},JC=function(n){return[n.deltaX,n.deltaY]},ZC=function(n){return n&&"current"in n?n.current:n},mV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},gV=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},vV=0,fu=[];function yV(n){var e=b.useRef([]),t=b.useRef([0,0]),r=b.useRef(),s=b.useState(vV++)[0],i=b.useState(BM)[0],a=b.useRef(n);b.useEffect(function(){a.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var g=$W([n.lockRef.current],(n.shards||[]).map(ZC),!0).filter(Boolean);return g.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var o=b.useCallback(function(g,w){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=gy(g),x=t.current,_="deltaX"in g?g.deltaX:x[0]-v[0],N="deltaY"in g?g.deltaY:x[1]-v[1],E,A=g.target,j=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in g&&j==="h"&&A.type==="range")return!1;var P=QC(j,A);if(!P)return!0;if(P?E=j:(E=j==="v"?"h":"v",P=QC(j,A)),!P)return!1;if(!r.current&&"changedTouches"in g&&(_||N)&&(r.current=E),!E)return!0;var T=r.current||E;return pV(T,w,g,T==="h"?_:N,!0)},[]),c=b.useCallback(function(g){var w=g;if(!(!fu.length||fu[fu.length-1]!==i)){var v="deltaY"in w?JC(w):gy(w),x=e.current.filter(function(E){return E.name===w.type&&(E.target===w.target||w.target===E.shadowParent)&&mV(E.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var _=(a.current.shards||[]).map(ZC).filter(Boolean).filter(function(E){return E.contains(w.target)}),N=_.length>0?o(w,_[0]):!a.current.noIsolation;N&&w.cancelable&&w.preventDefault()}}},[]),d=b.useCallback(function(g,w,v,x){var _={name:g,delta:w,target:v,should:x,shadowParent:xV(v)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(N){return N!==_})},1)},[]),h=b.useCallback(function(g){t.current=gy(g),r.current=void 0},[]),f=b.useCallback(function(g){d(g.type,JC(g),g.target,o(g,n.lockRef.current))},[]),p=b.useCallback(function(g){d(g.type,gy(g),g.target,o(g,n.lockRef.current))},[]);b.useEffect(function(){return fu.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,hu),document.addEventListener("touchmove",c,hu),document.addEventListener("touchstart",h,hu),function(){fu=fu.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,hu),document.removeEventListener("touchmove",c,hu),document.removeEventListener("touchstart",h,hu)}},[]);var m=n.removeScrollBar,y=n.inert;return b.createElement(b.Fragment,null,y?b.createElement(i,{styles:gV(s)}):null,m?b.createElement(oV,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function xV(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const wV=KW(zM,yV);var Sw=b.forwardRef(function(n,e){return b.createElement(_w,Ii({},n,{ref:e,sideCar:wV}))});Sw.classNames=_w.classNames;var bV=[" ","Enter","ArrowUp","ArrowDown"],_V=[" ","Enter"],$d="Select",[Nw,Ew,SV]=eE($d),[Yf,bQ]=ni($d,[SV,bw]),Aw=bw(),[NV,ql]=Yf($d),[EV,AV]=Yf($d),VM=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:o,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:p,required:m,form:y}=n,g=Aw(e),[w,v]=b.useState(null),[x,_]=b.useState(null),[N,E]=b.useState(!1),A=mw(d),[j,P]=Ld({prop:r,defaultProp:s??!1,onChange:i,caller:$d}),[T,R]=Ld({prop:a,defaultProp:o,onChange:c,caller:$d}),I=b.useRef(null),O=w?y||!!w.closest("form"):!0,[z,L]=b.useState(new Set),V=Array.from(z).map(B=>B.props.value).join(";");return l.jsx(IM,{...g,children:l.jsxs(NV,{required:m,scope:e,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:E,contentId:Gn(),value:T,onValueChange:R,open:j,onOpenChange:P,dir:A,triggerPointerDownPosRef:I,disabled:p,children:[l.jsx(Nw.Provider,{scope:e,children:l.jsx(EV,{scope:n.__scopeSelect,onNativeOptionAdd:b.useCallback(B=>{L(F=>new Set(F).add(B))},[]),onNativeOptionRemove:b.useCallback(B=>{L(F=>{const D=new Set(F);return D.delete(B),D})},[]),children:t})}),O?l.jsxs(mI,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:B=>R(B.target.value),disabled:p,form:y,children:[T===void 0?l.jsx("option",{value:""}):null,Array.from(z)]},V):null]})})};VM.displayName=$d;var GM="SelectTrigger",qM=b.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=Aw(t),a=ql(GM,t),o=a.disabled||r,c=We(e,a.onTriggerChange),d=Ew(t),h=b.useRef("touch"),[f,p,m]=vI(g=>{const w=d().filter(_=>!_.disabled),v=w.find(_=>_.value===a.value),x=yI(w,g,v);x!==void 0&&a.onValueChange(x.value)}),y=g=>{o||(a.onOpenChange(!0),m()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return l.jsx(ME,{asChild:!0,...i,children:l.jsx(oe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":gI(a.value)?"":void 0,...s,ref:c,onClick:he(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&y(g)}),onPointerDown:he(s.onPointerDown,g=>{h.current=g.pointerType;const w=g.target;w.hasPointerCapture(g.pointerId)&&w.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:he(s.onKeyDown,g=>{const w=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(w&&g.key===" ")&&bV.includes(g.key)&&(y(),g.preventDefault())})})})});qM.displayName=GM;var KM="SelectValue",YM=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:a="",...o}=n,c=ql(KM,t),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=We(e,c.onValueNodeChange);return Tt(()=>{d(h)},[d,h]),l.jsx(oe.span,{...o,ref:f,style:{pointerEvents:"none"},children:gI(c.value)?l.jsx(l.Fragment,{children:a}):i})});YM.displayName=KM;var jV="SelectIcon",XM=b.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return l.jsx(oe.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});XM.displayName=jV;var CV="SelectPortal",QM=n=>l.jsx(gv,{asChild:!0,...n});QM.displayName=CV;var zd="SelectContent",JM=b.forwardRef((n,e)=>{const t=ql(zd,n.__scopeSelect),[r,s]=b.useState();if(Tt(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?Yd.createPortal(l.jsx(ZM,{scope:n.__scopeSelect,children:l.jsx(Nw.Slot,{scope:n.__scopeSelect,children:l.jsx("div",{children:n.children})})}),i):null}return l.jsx(eI,{...n,ref:e})});JM.displayName=zd;var Ns=10,[ZM,Kl]=Yf(zd),kV="SelectContentImpl",PV=Od("SelectContent.RemoveScroll"),eI=b.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:o,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:w,...v}=n,x=ql(zd,t),[_,N]=b.useState(null),[E,A]=b.useState(null),j=We(e,H=>N(H)),[P,T]=b.useState(null),[R,I]=b.useState(null),O=Ew(t),[z,L]=b.useState(!1),V=b.useRef(!1);b.useEffect(()=>{if(_)return IE(_)},[_]),SE();const B=b.useCallback(H=>{const[me,...Ne]=O().map(Me=>Me.ref.current),[je]=Ne.slice(-1),Ce=document.activeElement;for(const Me of H)if(Me===Ce||(Me==null||Me.scrollIntoView({block:"nearest"}),Me===me&&E&&(E.scrollTop=0),Me===je&&E&&(E.scrollTop=E.scrollHeight),Me==null||Me.focus(),document.activeElement!==Ce))return},[O,E]),F=b.useCallback(()=>B([P,_]),[B,P,_]);b.useEffect(()=>{z&&F()},[z,F]);const{onOpenChange:D,triggerPointerDownPosRef:M}=x;b.useEffect(()=>{if(_){let H={x:0,y:0};const me=je=>{var Ce,Me;H={x:Math.abs(Math.round(je.pageX)-(((Ce=M.current)==null?void 0:Ce.x)??0)),y:Math.abs(Math.round(je.pageY)-(((Me=M.current)==null?void 0:Me.y)??0))}},Ne=je=>{H.x<=10&&H.y<=10?je.preventDefault():_.contains(je.target)||D(!1),document.removeEventListener("pointermove",me),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",Ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",Ne,{capture:!0})}}},[_,D,M]),b.useEffect(()=>{const H=()=>D(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[D]);const[U,X]=vI(H=>{const me=O().filter(Ce=>!Ce.disabled),Ne=me.find(Ce=>Ce.ref.current===document.activeElement),je=yI(me,H,Ne);je&&setTimeout(()=>je.ref.current.focus())}),$=b.useCallback((H,me,Ne)=>{const je=!V.current&&!Ne;(x.value!==void 0&&x.value===me||je)&&(T(H),je&&(V.current=!0))},[x.value]),W=b.useCallback(()=>_==null?void 0:_.focus(),[_]),Q=b.useCallback((H,me,Ne)=>{const je=!V.current&&!Ne;(x.value!==void 0&&x.value===me||je)&&I(H)},[x.value]),K=r==="popper"?P_:tI,le=K===P_?{side:o,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:w}:{};return l.jsx(ZM,{scope:t,content:_,viewport:E,onViewportChange:A,itemRefCallback:$,selectedItem:P,onItemLeave:W,itemTextRefCallback:Q,focusSelectedItem:F,selectedItemText:R,position:r,isPositioned:z,searchRef:U,children:l.jsx(Sw,{as:PV,allowPinchZoom:!0,children:l.jsx(vw,{asChild:!0,trapped:x.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:he(s,H=>{var me;(me=x.trigger)==null||me.focus({preventScroll:!0}),H.preventDefault()}),children:l.jsx(mv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:l.jsx(K,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:H=>H.preventDefault(),...v,...le,onPlaced:()=>L(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:he(v.onKeyDown,H=>{const me=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!me&&H.key.length===1&&X(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let je=O().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(H.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const Ce=H.target,Me=je.indexOf(Ce);je=je.slice(Me+1)}setTimeout(()=>B(je)),H.preventDefault()}})})})})})})});eI.displayName=kV;var TV="SelectItemAlignedPosition",tI=b.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=ql(zd,t),a=Kl(zd,t),[o,c]=b.useState(null),[d,h]=b.useState(null),f=We(e,j=>h(j)),p=Ew(t),m=b.useRef(!1),y=b.useRef(!0),{viewport:g,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=a,_=b.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&d&&g&&w&&v){const j=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),R=v.getBoundingClientRect();if(i.dir!=="rtl"){const Ce=R.left-P.left,Me=T.left-Ce,zt=j.left-Me,Xn=j.width+zt,Xl=Math.max(Xn,P.width),io=window.innerWidth-Ns,Ql=E_(Me,[Ns,Math.max(Ns,io-Xl)]);o.style.minWidth=Xn+"px",o.style.left=Ql+"px"}else{const Ce=P.right-R.right,Me=window.innerWidth-T.right-Ce,zt=window.innerWidth-j.right-Me,Xn=j.width+zt,Xl=Math.max(Xn,P.width),io=window.innerWidth-Ns,Ql=E_(Me,[Ns,Math.max(Ns,io-Xl)]);o.style.minWidth=Xn+"px",o.style.right=Ql+"px"}const I=p(),O=window.innerHeight-Ns*2,z=g.scrollHeight,L=window.getComputedStyle(d),V=parseInt(L.borderTopWidth,10),B=parseInt(L.paddingTop,10),F=parseInt(L.borderBottomWidth,10),D=parseInt(L.paddingBottom,10),M=V+B+z+D+F,U=Math.min(w.offsetHeight*5,M),X=window.getComputedStyle(g),$=parseInt(X.paddingTop,10),W=parseInt(X.paddingBottom,10),Q=j.top+j.height/2-Ns,K=O-Q,le=w.offsetHeight/2,H=w.offsetTop+le,me=V+B+H,Ne=M-me;if(me<=Q){const Ce=I.length>0&&w===I[I.length-1].ref.current;o.style.bottom="0px";const Me=d.clientHeight-g.offsetTop-g.offsetHeight,zt=Math.max(K,le+(Ce?W:0)+Me+F),Xn=me+zt;o.style.height=Xn+"px"}else{const Ce=I.length>0&&w===I[0].ref.current;o.style.top="0px";const zt=Math.max(Q,V+g.offsetTop+(Ce?$:0)+le)+Ne;o.style.height=zt+"px",g.scrollTop=me-Q+g.offsetTop}o.style.margin=`${Ns}px 0`,o.style.minHeight=U+"px",o.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,o,d,g,w,v,i.dir,r]);Tt(()=>_(),[_]);const[N,E]=b.useState();Tt(()=>{d&&E(window.getComputedStyle(d).zIndex)},[d]);const A=b.useCallback(j=>{j&&y.current===!0&&(_(),x==null||x(),y.current=!1)},[_,x]);return l.jsx(MV,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:l.jsx(oe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});tI.displayName=TV;var RV="SelectPopperPosition",P_=b.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=Ns,...i}=n,a=Aw(t);return l.jsx(DM,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});P_.displayName=RV;var[MV,DE]=Yf(zd,{}),T_="SelectViewport",nI=b.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=Kl(T_,t),a=DE(T_,t),o=We(e,i.onViewportChange),c=b.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(Nw.Slot,{scope:t,children:l.jsx(oe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:he(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const m=Math.abs(c.current-h.scrollTop);if(m>0){const y=window.innerHeight-Ns*2,g=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),v=Math.max(g,w);if(v<y){const x=v+m,_=Math.min(y,x),N=x-_;f.style.height=_+"px",f.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});nI.displayName=T_;var rI="SelectGroup",[IV,DV]=Yf(rI),OV=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Gn();return l.jsx(IV,{scope:t,id:s,children:l.jsx(oe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});OV.displayName=rI;var sI="SelectLabel",iI=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=DV(sI,t);return l.jsx(oe.div,{id:s.id,...r,ref:e})});iI.displayName=sI;var s0="SelectItem",[LV,aI]=Yf(s0),oI=b.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...a}=n,o=ql(s0,t),c=Kl(s0,t),d=o.value===r,[h,f]=b.useState(i??""),[p,m]=b.useState(!1),y=We(e,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,s)}),g=Gn(),w=b.useRef("touch"),v=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(LV,{scope:t,value:r,disabled:s,textId:g,isSelected:d,onItemTextChange:b.useCallback(x=>{f(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:l.jsx(Nw.ItemSlot,{scope:t,value:r,disabled:s,textValue:h,children:l.jsx(oe.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:he(a.onFocus,()=>m(!0)),onBlur:he(a.onBlur,()=>m(!1)),onClick:he(a.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:he(a.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:he(a.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:he(a.onPointerMove,x=>{var _;w.current=x.pointerType,s?(_=c.onItemLeave)==null||_.call(c):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(a.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:he(a.onKeyDown,x=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&x.key===" "||(_V.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});oI.displayName=s0;var _p="SelectItemText",lI=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,a=ql(_p,t),o=Kl(_p,t),c=aI(_p,t),d=AV(_p,t),[h,f]=b.useState(null),p=We(e,v=>f(v),c.onItemTextChange,v=>{var x;return(x=o.itemTextRefCallback)==null?void 0:x.call(o,v,c.value,c.disabled)}),m=h==null?void 0:h.textContent,y=b.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:w}=d;return Tt(()=>(g(y),()=>w(y)),[g,w,y]),l.jsxs(l.Fragment,{children:[l.jsx(oe.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Yd.createPortal(i.children,a.valueNode):null]})});lI.displayName=_p;var cI="SelectItemIndicator",dI=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return aI(cI,t).isSelected?l.jsx(oe.span,{"aria-hidden":!0,...r,ref:e}):null});dI.displayName=cI;var R_="SelectScrollUpButton",uI=b.forwardRef((n,e)=>{const t=Kl(R_,n.__scopeSelect),r=DE(R_,n.__scopeSelect),[s,i]=b.useState(!1),a=We(e,r.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let o=function(){const d=c.scrollTop>0;i(d)};const c=t.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),s?l.jsx(fI,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=t;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});uI.displayName=R_;var M_="SelectScrollDownButton",hI=b.forwardRef((n,e)=>{const t=Kl(M_,n.__scopeSelect),r=DE(M_,n.__scopeSelect),[s,i]=b.useState(!1),a=We(e,r.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let o=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=t.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),s?l.jsx(fI,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=t;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});hI.displayName=M_;var fI=b.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=Kl("SelectScrollButton",t),a=b.useRef(null),o=Ew(t),c=b.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),Tt(()=>{var h;const d=o().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[o]),l.jsx(oe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:he(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:he(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:he(s.onPointerLeave,()=>{c()})})}),FV="SelectSeparator",pI=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return l.jsx(oe.div,{"aria-hidden":!0,...r,ref:e})});pI.displayName=FV;var I_="SelectArrow",$V=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Aw(t),i=ql(I_,t),a=Kl(I_,t);return i.open&&a.position==="popper"?l.jsx(OM,{...s,...r,ref:e}):null});$V.displayName=I_;var zV="SelectBubbleInput",mI=b.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=b.useRef(null),i=We(r,s),a=DW(e);return b.useEffect(()=>{const o=s.current;if(!o)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(o,e),o.dispatchEvent(f)}},[a,e]),l.jsx(oe.select,{...t,style:{...m2,...t.style},ref:i,defaultValue:e})});mI.displayName=zV;function gI(n){return n===""||n===void 0}function vI(n){const e=Lt(n),t=b.useRef(""),r=b.useRef(0),s=b.useCallback(a=>{const o=t.current+a;e(o),function c(d){t.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[e]),i=b.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function yI(n,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=BV(n,Math.max(i,0));s.length===1&&(a=a.filter(d=>d!==t));const c=a.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function BV(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var UV=VM,xI=qM,HV=YM,WV=XM,VV=QM,wI=JM,GV=nI,bI=iI,_I=oI,qV=lI,KV=dI,SI=uI,NI=hI,EI=pI;const Or=UV,Lr=HV,ar=b.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(xI,{ref:r,className:te("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,l.jsx(WV,{asChild:!0,children:l.jsx(z2,{className:"h-4 w-4 opacity-50"})})]}));ar.displayName=xI.displayName;const AI=b.forwardRef(({className:n,...e},t)=>l.jsx(SI,{ref:t,className:te("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(y5,{className:"h-4 w-4"})}));AI.displayName=SI.displayName;const jI=b.forwardRef(({className:n,...e},t)=>l.jsx(NI,{ref:t,className:te("flex cursor-default items-center justify-center py-1",n),...e,children:l.jsx(z2,{className:"h-4 w-4"})}));jI.displayName=NI.displayName;const or=b.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>l.jsx(VV,{children:l.jsxs(wI,{ref:s,className:te("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[l.jsx(AI,{}),l.jsx(GV,{className:te("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),l.jsx(jI,{})]})}));or.displayName=wI.displayName;const YV=b.forwardRef(({className:n,...e},t)=>l.jsx(bI,{ref:t,className:te("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));YV.displayName=bI.displayName;const Ye=b.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(_I,{ref:r,className:te("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(KV,{children:l.jsx($2,{className:"h-4 w-4"})})}),l.jsx(qV,{children:e})]}));Ye.displayName=_I.displayName;const XV=b.forwardRef(({className:n,...e},t)=>l.jsx(EI,{ref:t,className:te("-mx-1 my-1 h-px bg-muted",n),...e}));XV.displayName=EI.displayName;var jw="Dialog",[CI,_Q]=ni(jw),[QV,ri]=CI(jw),kI=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=n,o=b.useRef(null),c=b.useRef(null),[d,h]=Ld({prop:r,defaultProp:s??!1,onChange:i,caller:jw});return l.jsx(QV,{scope:e,triggerRef:o,contentRef:c,contentId:Gn(),titleId:Gn(),descriptionId:Gn(),open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(f=>!f),[h]),modal:a,children:t})};kI.displayName=jw;var PI="DialogTrigger",TI=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ri(PI,t),i=We(e,s.triggerRef);return l.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":FE(s.open),...r,ref:i,onClick:he(n.onClick,s.onOpenToggle)})});TI.displayName=PI;var OE="DialogPortal",[JV,RI]=CI(OE,{forceMount:void 0}),MI=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=ri(OE,e);return l.jsx(JV,{scope:e,forceMount:t,children:b.Children.map(r,a=>l.jsx(ms,{present:t||i.open,children:l.jsx(gv,{asChild:!0,container:s,children:a})}))})};MI.displayName=OE;var i0="DialogOverlay",II=b.forwardRef((n,e)=>{const t=RI(i0,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=ri(i0,n.__scopeDialog);return i.modal?l.jsx(ms,{present:r||i.open,children:l.jsx(eG,{...s,ref:e})}):null});II.displayName=i0;var ZV=Od("DialogOverlay.RemoveScroll"),eG=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ri(i0,t);return l.jsx(Sw,{as:ZV,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(oe.div,{"data-state":FE(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Bd="DialogContent",DI=b.forwardRef((n,e)=>{const t=RI(Bd,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=ri(Bd,n.__scopeDialog);return l.jsx(ms,{present:r||i.open,children:i.modal?l.jsx(tG,{...s,ref:e}):l.jsx(nG,{...s,ref:e})})});DI.displayName=Bd;var tG=b.forwardRef((n,e)=>{const t=ri(Bd,n.__scopeDialog),r=b.useRef(null),s=We(e,t.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return IE(i)},[]),l.jsx(OI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(n.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:he(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:he(n.onFocusOutside,i=>i.preventDefault())})}),nG=b.forwardRef((n,e)=>{const t=ri(Bd,n.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return l.jsx(OI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(r.current||(o=t.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),OI=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=n,o=ri(Bd,t),c=b.useRef(null),d=We(e,c);return SE(),l.jsxs(l.Fragment,{children:[l.jsx(vw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(mv,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":FE(o.open),...a,ref:d,onDismiss:()=>o.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(rG,{titleId:o.titleId}),l.jsx(iG,{contentRef:c,descriptionId:o.descriptionId})]})]})}),LE="DialogTitle",LI=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ri(LE,t);return l.jsx(oe.h2,{id:s.titleId,...r,ref:e})});LI.displayName=LE;var FI="DialogDescription",$I=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ri(FI,t);return l.jsx(oe.p,{id:s.descriptionId,...r,ref:e})});$I.displayName=FI;var zI="DialogClose",BI=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ri(zI,t);return l.jsx(oe.button,{type:"button",...r,ref:e,onClick:he(n.onClick,()=>s.onOpenChange(!1))})});BI.displayName=zI;function FE(n){return n?"open":"closed"}var UI="DialogTitleWarning",[SQ,HI]=_$(UI,{contentName:Bd,titleName:LE,docsSlug:"dialog"}),rG=({titleId:n})=>{const e=HI(UI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},sG="DialogDescriptionWarning",iG=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HI(sG).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},WI=kI,aG=TI,VI=MI,$E=II,zE=DI,GI=LI,qI=$I,oG=BI;const Av=WI,lG=aG,cG=VI,KI=b.forwardRef(({className:n,...e},t)=>l.jsx($E,{ref:t,className:te("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));KI.displayName=$E.displayName;const Xf=b.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(cG,{children:[l.jsx(KI,{}),l.jsxs(zE,{ref:r,className:te("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,l.jsxs(oG,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[l.jsx(no,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xf.displayName=zE.displayName;const Qf=({className:n,...e})=>l.jsx("div",{className:te("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Qf.displayName="DialogHeader";const Jf=b.forwardRef(({className:n,...e},t)=>l.jsx(GI,{ref:t,className:te("text-lg font-semibold leading-none tracking-tight",n),...e}));Jf.displayName=GI.displayName;const dG=b.forwardRef(({className:n,...e},t)=>l.jsx(qI,{ref:t,className:te("text-sm text-muted-foreground",n),...e}));dG.displayName=qI.displayName;var uG="Label",YI=b.forwardRef((n,e)=>l.jsx(oe.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));YI.displayName=uG;var XI=YI;const hG=yv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),we=b.forwardRef(({className:n,...e},t)=>l.jsx(XI,{ref:t,className:te(hG(),n),...e}));we.displayName=XI.displayName;const Cw=b.forwardRef(({className:n,...e},t)=>l.jsx("textarea",{className:te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Cw.displayName="Textarea";const ek=({onCourseAdded:n})=>{const{user:e}=Jd(),[t,r]=b.useState(!1),[s,i]=b.useState(!1),[a,o]=b.useState({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),c=["Chirurgie","Notfallmedizin","Radiologie","Anästhesie","Innere Medizin","Pädiatrie","Gynäkologie","Orthopädie","Urologie","Dermatologie","Neurologie","Psychiatrie","Ethik","Kommunikation","Forschung","Digital Health","Qualitätsmanagement","Grundlagen","Sonstiges"],d=(f,p)=>{o(m=>({...m,[f]:p}))},h=async f=>{if(f.preventDefault(),!e){Ae.error("Sie müssen angemeldet sein, um Kurse hinzuzufügen");return}i(!0);try{const p={...a,user_id:e.id,points:Number(a.points),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:m,error:y}=await re.from("user_courses").insert([p]).select().single();if(y)throw y;Ae.success("Kurs erfolgreich hinzugefügt!"),r(!1),o({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),n&&n(m)}catch(p){console.error("Error adding course:",p),Ae.error("Fehler beim Hinzufügen des Kurses")}finally{i(!1)}};return l.jsxs(Av,{open:t,onOpenChange:r,children:[l.jsx(lG,{asChild:!0,children:l.jsxs(J,{className:"gap-2",children:[l.jsx(kd,{className:"w-4 h-4"}),"Kurs hinzufügen"]})}),l.jsxs(Xf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx(Qf,{children:l.jsxs(Jf,{className:"flex items-center gap-2",children:[l.jsx(Ys,{className:"w-5 h-5"}),"Neuen Kurs hinzufügen"]})}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"title",children:"Kurs-Titel *"}),l.jsx(Fe,{id:"title",value:a.title,onChange:f=>d("title",f.target.value),placeholder:"z.B. Advanced Laparoscopy Workshop",required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"category",children:"Kategorie *"}),l.jsxs(Or,{value:a.category,onValueChange:f=>d("category",f),children:[l.jsx(ar,{children:l.jsx(Lr,{placeholder:"Kategorie wählen"})}),l.jsx(or,{children:c.map(f=>l.jsx(Ye,{value:f,children:f},f))})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"description",children:"Beschreibung"}),l.jsx(Cw,{id:"description",value:a.description,onChange:f=>d("description",f.target.value),placeholder:"Kurze Beschreibung des Kurses...",rows:3})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"date",children:"Datum *"}),l.jsx(Fe,{id:"date",type:"date",value:a.date,onChange:f=>d("date",f.target.value),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"location",children:"Ort"}),l.jsx(Fe,{id:"location",value:a.location,onChange:f=>d("location",f.target.value),placeholder:"z.B. Zürich"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"duration",children:"Dauer"}),l.jsx(Fe,{id:"duration",value:a.duration,onChange:f=>d("duration",f.target.value),placeholder:"z.B. 2 Tage"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"type",children:"Typ *"}),l.jsxs(Or,{value:a.type,onValueChange:f=>d("type",f),children:[l.jsx(ar,{children:l.jsx(Lr,{})}),l.jsxs(or,{children:[l.jsx(Ye,{value:"required",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jf,{className:"w-4 h-4 text-yellow-500"}),"Pflichtkurs"]})}),l.jsx(Ye,{value:"optional",children:"Optional"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"status",children:"Status *"}),l.jsxs(Or,{value:a.status,onValueChange:f=>d("status",f),children:[l.jsx(ar,{children:l.jsx(Lr,{})}),l.jsxs(or,{children:[l.jsx(Ye,{value:"completed",children:"Abgeschlossen"}),l.jsx(Ye,{value:"in-progress",children:"Läuft"}),l.jsx(Ye,{value:"upcoming",children:"Geplant"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"points",children:"CME Punkte"}),l.jsx(Fe,{id:"points",type:"number",min:"0",max:"50",value:a.points,onChange:f=>d("points",Number(f.target.value)),placeholder:"0"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"provider",children:"Anbieter"}),l.jsx(Fe,{id:"provider",value:a.provider,onChange:f=>d("provider",f.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"certificate_url",children:"Zertifikat URL"}),l.jsx(Fe,{id:"certificate_url",type:"url",value:a.certificate_url,onChange:f=>d("certificate_url",f.target.value),placeholder:"https://..."})]})]}),l.jsxs(ee,{className:"border-dashed",children:[l.jsx(st,{children:l.jsx(ut,{className:"text-sm",children:"Vorschau"})}),l.jsx(Le,{children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.type==="required"&&l.jsx(jf,{className:"w-4 h-4 text-yellow-500 fill-current"}),l.jsx("h3",{className:`font-semibold ${a.type==="required"?"font-bold":"font-medium"}`,children:a.title||"Kurs-Titel"})]}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.category||"Kategorie"}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.date&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Vn,{className:"w-4 h-4"}),l.jsx("span",{children:new Date(a.date).toLocaleDateString("de-DE")})]}),a.location&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(wm,{className:"w-4 h-4"}),l.jsx("span",{children:a.location})]}),a.duration&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(xv,{className:"w-4 h-4"}),l.jsx("span",{children:a.duration})]})]})]}),l.jsxs("div",{className:"flex flex-col items-end gap-2",children:[l.jsx(de,{variant:a.status==="completed"?"default":"outline",children:a.status==="completed"?"Abgeschlossen":a.status==="in-progress"?"Läuft":"Geplant"}),a.points>0&&l.jsxs(de,{variant:"secondary",className:"text-xs",children:[a.points," CME"]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsxs(J,{type:"button",variant:"outline",onClick:()=>r(!1),children:[l.jsx(no,{className:"w-4 h-4 mr-2"}),"Abbrechen"]}),l.jsx(J,{type:"submit",disabled:s||!a.title||!a.date,children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Speichern..."]}):l.jsxs(l.Fragment,{children:[l.jsx(sw,{className:"w-4 h-4 mr-2"}),"Speichern"]})})]})]})]})]})};function fG(){const{user:n}=Jd(),[e,t]=g6(),[r,s]=b.useState([]),[i,a]=b.useState([]),[o,c]=b.useState(!0),[d,h]=b.useState(e.get("search")||""),[f,p]=b.useState(e.get("country")||""),[m,y]=b.useState(e.get("specialty")||""),[g,w]=b.useState(e.get("modality")||""),[v,x]=b.useState(e.get("price")||""),[_,N]=b.useState("grid"),[E,A]=b.useState("available"),j=["Switzerland","Germany","Austria","France","Italy"],P=["Cardiology","Surgery","Neurology","Radiology","Emergency Medicine","Internal Medicine"],T=["Online","In-Person","Hybrid"],R=[{label:"Free",value:"0"},{label:"Under 100 CHF",value:"0-100"},{label:"100-500 CHF",value:"100-500"},{label:"500-1000 CHF",value:"500-1000"},{label:"Over 1000 CHF",value:"1000+"}];b.useEffect(()=>{I(),n&&O()},[I,n]);const I=b.useCallback(async()=>{c(!0);try{let M=re.from("courses").select("*").eq("status","published").order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});if(d&&(M=M.or(`title.ilike.%${d}%,description.ilike.%${d}%`)),f&&(M=M.eq("country",f)),m&&(M=M.eq("specialty",m)),g&&(M=M.eq("modality",g)),v)if(v==="0")M=M.eq("price",0);else if(v.includes("-")){const[$,W]=v.split("-").map(Number);M=M.gte("price",$).lte("price",W)}else v==="1000+"&&(M=M.gte("price",1e3));const{data:U,error:X}=await M;if(X)throw X;s(U||[])}catch(M){console.error("Error fetching courses:",M)}finally{c(!1)}},[d,f,m,g,v]),O=b.useCallback(async()=>{if(n)try{const{data:M,error:U}=await re.from("user_courses").select("*").eq("user_id",n.id).order("date",{ascending:!1});if(U)throw U;a(M||[])}catch(M){console.error("Error fetching user courses:",M)}},[n]),z=M=>{a(U=>[M,...U])},L=(M,U)=>{const X=new URLSearchParams(e);U?X.set(M,U):X.delete(M),t(X)},V=()=>{h(""),p(""),y(""),w(""),x(""),t({})},B=(M,U)=>M===0?"Free":`${M} ${U}`,F=M=>Array.from({length:5},(U,X)=>l.jsx(jf,{className:`h-4 w-4 ${X<Math.floor(M)?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`},X)),D=({course:M})=>l.jsxs(ee,{className:"group hover:shadow-lg transition-all duration-200 border-accent/20",children:[M.is_featured&&l.jsx("div",{className:"bg-gradient-to-r from-medical-primary to-swiss-blue text-white text-xs px-2 py-1 rounded-t-md font-medium",children:"Featured Course"}),l.jsxs("div",{className:"relative overflow-hidden rounded-t-md",children:[M.cover_image_url?l.jsx("img",{src:M.cover_image_url,alt:M.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200"}):l.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 flex items-center justify-center",children:l.jsx("div",{className:"text-6xl text-medical-primary opacity-30",children:"📚"})}),M.modality&&l.jsx(de,{variant:"secondary",className:"absolute top-2 left-2 bg-background/90 backdrop-blur-sm",children:M.modality})]}),l.jsxs(st,{className:"pb-2",children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsx(ut,{className:"text-lg font-semibold group-hover:text-medical-primary transition-colors line-clamp-2",children:M.title}),M.has_certificate&&l.jsx(de,{variant:"outline",className:"shrink-0 text-xs",children:"Certificate"})]}),l.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[F(M.average_rating),l.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["(",M.total_reviews," reviews)"]})]})]}),l.jsxs(Le,{className:"pb-2",children:[l.jsx(tm,{className:"line-clamp-2 mb-3",children:M.description}),l.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[M.city&&M.country&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(wm,{className:"h-4 w-4"}),l.jsxs("span",{children:[M.city,", ",M.country]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[M.cme_points>0&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(xv,{className:"h-4 w-4"}),l.jsxs("span",{children:[M.cme_points," CME"]})]}),M.capacity&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Bf,{className:"h-4 w-4"}),l.jsxs("span",{children:["Max ",M.capacity]})]})]})]}),M.tags&&M.tags.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[M.tags.slice(0,3).map((U,X)=>l.jsx(de,{variant:"outline",className:"text-xs",children:U},X)),M.tags.length>3&&l.jsxs(de,{variant:"outline",className:"text-xs",children:["+",M.tags.length-3]})]})]}),l.jsx(UR,{className:"pt-0",children:l.jsxs("div",{className:"flex items-center justify-between w-full",children:[l.jsx("div",{className:"text-2xl font-bold text-medical-primary",children:B(M.price,M.currency)}),l.jsx(Kr,{to:`/courses/${M.id}`,children:l.jsx(J,{variant:"medical",size:"sm",children:"View Details"})})]})})]});return l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Medizinische Kurse"}),l.jsx("p",{className:"text-muted-foreground",children:"Entdecken Sie FMH-konforme Fortbildungsmöglichkeiten"})]}),l.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[n&&l.jsx(ek,{onCourseAdded:z}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(_5,{className:"w-4 h-4"}),"Filter"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(Vn,{className:"w-4 h-4"}),"Kalender"]})]})]}),l.jsxs(Xs,{value:E,onValueChange:M=>A(M),className:"mb-8",children:[l.jsxs(fs,{className:"grid w-full grid-cols-2",children:[l.jsx(et,{value:"available",children:"Verfügbare Kurse"}),l.jsxs(et,{value:"my-courses",children:["Meine Kurse (",i.length,")"]})]}),l.jsxs(ot,{value:"available",className:"mt-6",children:[l.jsx("div",{className:"mb-8",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx(U2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),l.jsx(Fe,{placeholder:"Search courses...",value:d,onChange:M=>{h(M.target.value),L("search",M.target.value)},className:"pl-10"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs(Or,{value:f,onValueChange:M=>{p(M),L("country",M)},children:[l.jsx(ar,{className:"w-[150px]",children:l.jsx(Lr,{placeholder:"Country"})}),l.jsx(or,{children:j.map(M=>l.jsx(Ye,{value:M,children:M},M))})]}),l.jsxs(Or,{value:m,onValueChange:M=>{y(M),L("specialty",M)},children:[l.jsx(ar,{className:"w-[150px]",children:l.jsx(Lr,{placeholder:"Specialty"})}),l.jsx(or,{children:P.map(M=>l.jsx(Ye,{value:M,children:M},M))})]}),l.jsxs(Or,{value:g,onValueChange:M=>{w(M),L("modality",M)},children:[l.jsx(ar,{className:"w-[120px]",children:l.jsx(Lr,{placeholder:"Format"})}),l.jsx(or,{children:T.map(M=>l.jsx(Ye,{value:M,children:M},M))})]}),l.jsxs(Or,{value:v,onValueChange:M=>{x(M),L("price",M)},children:[l.jsx(ar,{className:"w-[140px]",children:l.jsx(Lr,{placeholder:"Price Range"})}),l.jsx(or,{children:R.map(M=>l.jsx(Ye,{value:M.value,children:M.label},M.value))})]}),(d||f||m||g||v)&&l.jsx(J,{variant:"outline",onClick:V,size:"sm",children:"Clear Filters"})]})]})}),l.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[l.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Course Marketplace",!o&&l.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",r.length," courses)"]})]}),l.jsx(Xs,{value:_,onValueChange:M=>N(M),children:l.jsxs(fs,{children:[l.jsx(et,{value:"grid",children:"Grid"}),l.jsx(et,{value:"list",children:"List"})]})})]}),o?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((M,U)=>l.jsxs(ee,{className:"animate-pulse",children:[l.jsx("div",{className:"h-48 bg-muted rounded-t-md"}),l.jsxs(st,{children:[l.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),l.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),l.jsx(Le,{children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"h-3 bg-muted rounded"}),l.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},U))}):r.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No courses found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or clear filters to see more results."}),l.jsx(J,{onClick:V,variant:"outline",children:"Clear All Filters"})]}):l.jsx("div",{className:_==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:r.map(M=>l.jsx(D,{course:M},M.id))})]}),l.jsx(ot,{value:"my-courses",className:"mt-6",children:n?l.jsx("div",{children:i.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(M=>l.jsx(D,{course:M},M.id))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Noch keine Kurse hinzugefügt"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Fügen Sie Ihren ersten Kurs hinzu, um Ihre Fortbildung zu verfolgen."}),l.jsx(ek,{onCourseAdded:z})]})}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Anmeldung erforderlich"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"Melden Sie sich an, um Ihre Kurse zu verwalten."}),l.jsx(J,{asChild:!0,children:l.jsx("a",{href:"/auth",children:"Anmelden"})})]})})]})]})]})}var pG="Separator",tk="horizontal",mG=["horizontal","vertical"],QI=b.forwardRef((n,e)=>{const{decorative:t,orientation:r=tk,...s}=n,i=gG(r)?r:tk,o=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return l.jsx(oe.div,{"data-orientation":i,...o,...s,ref:e})});QI.displayName=pG;function gG(n){return mG.includes(n)}var JI=QI;const ZI=b.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},s)=>l.jsx(JI,{ref:s,decorative:t,orientation:e,className:te("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));ZI.displayName=JI.displayName;var eD={exports:{}},tD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=b;function vG(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var yG=typeof Object.is=="function"?Object.is:vG,xG=Pf.useState,wG=Pf.useEffect,bG=Pf.useLayoutEffect,_G=Pf.useDebugValue;function SG(n,e){var t=e(),r=xG({inst:{value:t,getSnapshot:e}}),s=r[0].inst,i=r[1];return bG(function(){s.value=t,s.getSnapshot=e,Bb(s)&&i({inst:s})},[n,t,e]),wG(function(){return Bb(s)&&i({inst:s}),n(function(){Bb(s)&&i({inst:s})})},[n]),_G(t),t}function Bb(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!yG(n,t)}catch{return!0}}function NG(n,e){return e()}var EG=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?NG:SG;tD.useSyncExternalStore=Pf.useSyncExternalStore!==void 0?Pf.useSyncExternalStore:EG;eD.exports=tD;var AG=eD.exports;function jG(){return AG.useSyncExternalStore(CG,()=>!0,()=>!1)}function CG(){return()=>{}}var BE="Avatar",[kG,NQ]=ni(BE),[PG,nD]=kG(BE),rD=b.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=b.useState("idle");return l.jsx(PG,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:l.jsx(oe.span,{...r,ref:e})})});rD.displayName=BE;var sD="AvatarImage",iD=b.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,a=nD(sD,t),o=TG(r,i),c=Lt(d=>{s(d),a.onImageLoadingStatusChange(d)});return Tt(()=>{o!=="idle"&&c(o)},[o,c]),o==="loaded"?l.jsx(oe.img,{...i,ref:e,src:r}):null});iD.displayName=sD;var aD="AvatarFallback",oD=b.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=nD(aD,t),[a,o]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?l.jsx(oe.span,{...s,ref:e}):null});oD.displayName=aD;function nk(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function TG(n,{referrerPolicy:e,crossOrigin:t}){const r=jG(),s=b.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,o]=b.useState(()=>nk(i,n));return Tt(()=>{o(nk(i,n))},[i,n]),Tt(()=>{const c=f=>()=>{o(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,t,e]),a}var lD=rD,cD=iD,dD=oD;const uD=b.forwardRef(({className:n,...e},t)=>l.jsx(lD,{ref:t,className:te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));uD.displayName=lD.displayName;const hD=b.forwardRef(({className:n,...e},t)=>l.jsx(cD,{ref:t,className:te("aspect-square h-full w-full",n),...e}));hD.displayName=cD.displayName;const fD=b.forwardRef(({className:n,...e},t)=>l.jsx(dD,{ref:t,className:te("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));fD.displayName=dD.displayName;var UE="Progress",HE=100,[RG,EQ]=ni(UE),[MG,IG]=RG(UE),pD=b.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:i=DG,...a}=n;(s||s===0)&&!rk(s)&&console.error(OG(`${s}`,"Progress"));const o=rk(s)?s:HE;r!==null&&!sk(r,o)&&console.error(LG(`${r}`,"Progress"));const c=sk(r,o)?r:null,d=a0(c)?i(c,o):void 0;return l.jsx(MG,{scope:t,value:c,max:o,children:l.jsx(oe.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":a0(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":vD(c,o),"data-value":c??void 0,"data-max":o,...a,ref:e})})});pD.displayName=UE;var mD="ProgressIndicator",gD=b.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=IG(mD,t);return l.jsx(oe.div,{"data-state":vD(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});gD.displayName=mD;function DG(n,e){return`${Math.round(n/e*100)}%`}function vD(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function a0(n){return typeof n=="number"}function rk(n){return a0(n)&&!isNaN(n)&&n>0}function sk(n,e){return a0(n)&&!isNaN(n)&&n<=e&&n>=0}function OG(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${HE}\`.`}function LG(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${HE} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var yD=pD,FG=gD;const Tf=b.forwardRef(({className:n,value:e,...t},r)=>l.jsx(yD,{ref:r,className:te("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:l.jsx(FG,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Tf.displayName=yD.displayName;function $G(){const{id:n}=pR(),[e,t]=b.useState(null),[r,s]=b.useState([]),[i,a]=b.useState([]),[o,c]=b.useState([]),[d,h]=b.useState([]),[f,p]=b.useState(!0),[m,y]=b.useState(!1),[g,w]=b.useState("");b.useState({rating:5,comment:""});const[v,x]=b.useState(!1);b.useEffect(()=>{n&&_()},[n,_]);const _=b.useCallback(async()=>{if(n){p(!0);try{const{data:T,error:R}=await re.from("courses").select("*").eq("id",n).eq("status","published").single();if(R)throw R;t(T);const{data:I}=await re.from("course_sessions").select("*").eq("course_id",n).order("start_date",{ascending:!0});s(I||[]);const{data:O}=await re.from("course_videos").select(`
          *,
          videos (
            title,
            description,
            duration,
            thumbnail_url
          )
        `).eq("course_id",n).order("order_index",{ascending:!0});a(O||[]);const{data:z}=await re.from("course_materials").select("*").eq("course_id",n);c(z||[]);const{data:L}=await re.from("course_reviews").select("*").eq("course_id",n).order("created_at",{ascending:!1}),V=(L||[]).map(F=>({...F,profiles:{full_name:"Course Participant",avatar_url:""}}));h(V);const{data:{user:B}}=await re.auth.getUser();if(B){const{data:F}=await re.from("course_enrollments").select("status").eq("course_id",n).eq("user_id",B.id).single();x(!!F)}}catch(T){console.error("Error fetching course details:",T),Ae.error("Failed to load course details")}finally{p(!1)}}},[n]),N=async()=>{if(!e||!g){Ae.error("Please select a session");return}y(!0);try{const{data:{user:T}}=await re.auth.getUser();if(!T){Ae.error("Please log in to enroll");return}const{error:R}=await re.from("course_enrollments").insert({course_id:e.id,user_id:T.id,status:"enrolled"});if(R)throw R;const{error:I}=await re.from("payments").insert({user_id:T.id,course_id:e.id,session_id:g,amount:e.price,currency:e.currency,status:"pending"});if(I)throw I;Ae.success("Successfully enrolled! Payment processing..."),x(!0)}catch(T){console.error("Enrollment error:",T),Ae.error("Failed to enroll in course")}finally{y(!1)}},E=(T,R)=>T===0?"Free":`${T} ${R}`,A=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=T=>{if(T===0)return"0 Bytes";const R=1024,I=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(T)/Math.log(R));return parseFloat((T/Math.pow(R,O)).toFixed(2))+" "+I[O]},P=(T,R=!1,I)=>Array.from({length:5},(O,z)=>l.jsx(jf,{className:`h-4 w-4 cursor-pointer ${z<T?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`,onClick:()=>R&&I&&I(z+1)},z));return f?l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"animate-pulse space-y-6",children:[l.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),l.jsx("div",{className:"h-64 bg-muted rounded"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[l.jsx("div",{className:"h-6 bg-muted rounded"}),l.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),l.jsx("div",{className:"h-96 bg-muted rounded"})]})]})})]}):e?l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsx("div",{className:"mb-6",children:l.jsxs(Kr,{to:"/courses",className:"inline-flex items-center text-muted-foreground hover:text-foreground",children:[l.jsx(qj,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsxs("div",{className:"relative",children:[e.cover_image_url?l.jsx("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-64 object-cover rounded-lg"}):l.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 rounded-lg flex items-center justify-center",children:l.jsx("div",{className:"text-8xl text-medical-primary opacity-30",children:"📚"})}),l.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[l.jsx(J,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:l.jsx(S5,{className:"h-4 w-4"})}),l.jsx(J,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:l.jsx(oE,{className:"h-4 w-4"})})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),l.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[P(e.average_rating),l.jsxs("span",{className:"ml-1",children:["(",e.total_reviews," reviews)"]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(wm,{className:"h-4 w-4"}),l.jsxs("span",{children:[e.city,", ",e.country]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.modality&&l.jsx(de,{variant:"secondary",children:e.modality}),e.difficulty_level&&l.jsx(de,{variant:"outline",children:e.difficulty_level}),e.has_certificate&&l.jsxs(de,{variant:"outline",children:[l.jsx(kl,{className:"h-3 w-3 mr-1"}),"Certificate"]})]})]}),l.jsx("p",{className:"text-muted-foreground mb-6",children:e.description}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[l.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[l.jsx(xv,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),l.jsxs("div",{className:"font-semibold",children:[e.cme_points," CME"]}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Points"})]}),l.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[l.jsx(Bf,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),l.jsx("div",{className:"font-semibold",children:e.capacity||"Unlimited"}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Capacity"})]}),l.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[l.jsx(Vn,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),l.jsx("div",{className:"font-semibold",children:r.length}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Sessions"})]}),l.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[l.jsx(jf,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),l.jsx("div",{className:"font-semibold",children:e.average_rating.toFixed(1)}),l.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]})]}),l.jsxs(Xs,{defaultValue:"overview",className:"w-full",children:[l.jsxs(fs,{className:"grid w-full grid-cols-4",children:[l.jsx(et,{value:"overview",children:"Overview"}),l.jsx(et,{value:"content",children:"Content"}),l.jsx(et,{value:"materials",children:"Materials"}),l.jsx(et,{value:"reviews",children:"Reviews"})]}),l.jsxs(ot,{value:"overview",className:"space-y-6",children:[l.jsxs(ee,{children:[l.jsx(st,{children:l.jsx(ut,{children:"Course Requirements"})}),l.jsx(Le,{children:l.jsx("p",{children:e.requirements||"No specific requirements"})})]}),e.tags&&e.tags.length>0&&l.jsxs(ee,{children:[l.jsx(st,{children:l.jsx(ut,{children:"Topics Covered"})}),l.jsx(Le,{children:l.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((T,R)=>l.jsx(de,{variant:"outline",children:T},R))})})]})]}),l.jsx(ot,{value:"content",className:"space-y-4",children:i.length>0?i.map((T,R)=>l.jsx(ee,{children:l.jsx(Le,{className:"p-4",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:T.videos.thumbnail_url||"/placeholder.svg",alt:T.videos.title,className:"w-24 h-16 object-cover rounded"}),l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsx(B2,{className:"h-6 w-6 text-white drop-shadow-lg"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold",children:T.videos.title}),l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.videos.description}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[l.jsxs("span",{children:[Math.floor(T.videos.duration/60)," min"]}),l.jsx(de,{variant:T.is_preview?"secondary":"outline",className:"text-xs",children:T.is_preview?"Free Preview":"Premium"})]})]})]})})},T.id)):l.jsx(ee,{children:l.jsxs(Le,{className:"p-8 text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:"🎥"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No video content available"}),l.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include video lessons."})]})})}),l.jsx(ot,{value:"materials",className:"space-y-4",children:o.length>0?o.map(T=>l.jsx(ee,{children:l.jsx(Le,{className:"p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(iE,{className:"h-5 w-5 text-medical-primary"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold",children:T.title}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.description," • ",j(T.file_size)," • ",T.file_type.toUpperCase()]})]})]}),l.jsx(de,{variant:T.is_preview?"secondary":"outline",children:T.is_preview?"Free":"Premium"})]})})},T.id)):l.jsx(ee,{children:l.jsxs(Le,{className:"p-8 text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:"📄"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No materials available"}),l.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include downloadable materials."})]})})}),l.jsx(ot,{value:"reviews",className:"space-y-4",children:d.length>0?d.map(T=>l.jsx(ee,{children:l.jsx(Le,{className:"p-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsxs(uD,{children:[l.jsx(hD,{src:T.profiles.avatar_url}),l.jsx(fD,{children:T.profiles.full_name.charAt(0)})]}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"font-semibold",children:T.profiles.full_name}),l.jsx("div",{className:"flex items-center",children:P(T.rating)}),l.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(T.created_at).toLocaleDateString()})]}),l.jsx("p",{className:"text-muted-foreground",children:T.comment})]})]})})},T.id)):l.jsx(ee,{children:l.jsxs(Le,{className:"p-8 text-center",children:[l.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No reviews yet"}),l.jsx("p",{className:"text-muted-foreground",children:"Be the first to review this course!"})]})})})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ee,{children:[l.jsx(st,{children:l.jsxs(ut,{className:"flex items-center justify-between",children:[l.jsx("span",{children:"Enroll Now"}),l.jsx("span",{className:"text-2xl font-bold text-medical-primary",children:E(e.price,e.currency)})]})}),l.jsxs(Le,{className:"space-y-4",children:[v?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"text-green-600 font-semibold mb-2",children:"✓ Already Enrolled"}),l.jsx(J,{variant:"outline",className:"w-full",children:"Go to Course"})]}):l.jsxs(l.Fragment,{children:[r.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Session:"}),l.jsxs("select",{className:"w-full p-2 border rounded-md",value:g,onChange:T=>w(T.target.value),children:[l.jsx("option",{value:"",children:"Choose a session"}),r.map(T=>l.jsxs("option",{value:T.id,children:[A(T.start_date),T.location&&` - ${T.location}`]},T.id))]})]}),l.jsx(J,{className:"w-full",variant:"medical",onClick:N,disabled:m||r.length>0&&!g,children:m?"Processing...":"Enroll Now"})]}),l.jsx(ZI,{}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Language:"}),l.jsx("span",{className:"font-medium",children:e.language})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Specialty:"}),l.jsx("span",{className:"font-medium",children:e.specialty})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Level:"}),l.jsx("span",{className:"font-medium capitalize",children:e.difficulty_level})]})]})]})]}),r.length>0&&l.jsxs(ee,{children:[l.jsx(st,{children:l.jsx(ut,{children:"Upcoming Sessions"})}),l.jsx(Le,{className:"space-y-3",children:r.slice(0,3).map(T=>l.jsxs("div",{className:"p-3 border rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Vn,{className:"h-4 w-4 text-medical-primary"}),l.jsx("span",{className:"font-medium text-sm",children:A(T.start_date)})]}),T.location&&l.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[l.jsx(wm,{className:"h-3 w-3"}),l.jsx("span",{children:T.location})]}),l.jsxs("div",{className:"mt-2",children:[l.jsx(Tf,{value:T.current_participants/T.max_participants*100,className:"h-2"}),l.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[T.current_participants,"/",T.max_participants," enrolled"]})]})]},T.id))})]})]})]})]})]}):l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Course not found"}),l.jsx("p",{className:"text-muted-foreground mb-4",children:"The course you're looking for doesn't exist or has been removed."}),l.jsx(Kr,{to:"/courses",children:l.jsxs(J,{variant:"outline",children:[l.jsx(qj,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})]})})]})}const Rf=b.forwardRef(({className:n,...e},t)=>l.jsx("div",{className:"relative w-full overflow-auto",children:l.jsx("table",{ref:t,className:te("w-full caption-bottom text-sm",n),...e})}));Rf.displayName="Table";const Mf=b.forwardRef(({className:n,...e},t)=>l.jsx("thead",{ref:t,className:te("[&_tr]:border-b",n),...e}));Mf.displayName="TableHeader";const If=b.forwardRef(({className:n,...e},t)=>l.jsx("tbody",{ref:t,className:te("[&_tr:last-child]:border-0",n),...e}));If.displayName="TableBody";const zG=b.forwardRef(({className:n,...e},t)=>l.jsx("tfoot",{ref:t,className:te("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));zG.displayName="TableFooter";const Ws=b.forwardRef(({className:n,...e},t)=>l.jsx("tr",{ref:t,className:te("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));Ws.displayName="TableRow";const Ie=b.forwardRef(({className:n,...e},t)=>l.jsx("th",{ref:t,className:te("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Ie.displayName="TableHead";const De=b.forwardRef(({className:n,...e},t)=>l.jsx("td",{ref:t,className:te("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));De.displayName="TableCell";const BG=b.forwardRef(({className:n,...e},t)=>l.jsx("caption",{ref:t,className:te("mt-4 text-sm text-muted-foreground",n),...e}));BG.displayName="TableCaption";const UG=({moduleKey:n,onClose:e})=>{const[t,r]=b.useState(null),[s,i]=b.useState([]),[a,o]=b.useState(!0),[c,d]=b.useState(4),h=b.useCallback(async()=>{try{o(!0);const{data:{user:v}}=await re.auth.getUser();if(!v)return;const{data:x}=await re.from("profiles").select("pgy_level").eq("user_id",v.id).single();x!=null&&x.pgy_level&&d(x.pgy_level);const{data:_}=await re.from("procedure_categories").select("*").eq("key",n).single();_&&r({id:_.id,title_de:_.title_de,minimum_required:_.minimum_required});const{data:N}=await re.rpc("get_module_progress",{user_id_param:v.id,module_key:n}),{data:E}=await re.from("procedures").select(`
          id,
          code,
          title_de,
          min_required_by_pgy
        `).eq("category_id",_==null?void 0:_.id).eq("active",!0),A=[];for(const j of E||[]){const{data:P}=await re.from("procedure_logs").select("*").eq("procedure_id",j.id).eq("user_id",v.id).order("performed_date",{ascending:!1}),T=(P==null?void 0:P.filter(z=>z.role_in_surgery==="responsible").length)||0,R=(P==null?void 0:P.filter(z=>z.role_in_surgery==="instructing").length)||0,I=(P==null?void 0:P.filter(z=>z.role_in_surgery==="assistant").length)||0,O=T*1+R*.75+I*.5;A.push({...j,responsible_count:T,instructing_count:R,assistant_count:I,weighted_score:O,logs:P||[]})}i(A)}catch(v){console.error("Error loading module details:",v)}finally{o(!1)}},[n]);b.useEffect(()=>{h()},[h]);const f=v=>({basis_notfall:"coral",basis_allgemein:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[v]||"mint",p=v=>{var x;return((x=v.min_required_by_pgy)==null?void 0:x[`pgy${c}`])??0},m=v=>{const x=p(v);return x===0?0:Math.min(100,v.weighted_score/x*100)},y=s.reduce((v,x)=>v+x.weighted_score,0),g=(t==null?void 0:t.minimum_required)||0,w=g>0?Math.min(100,y/g*100):0;return a?l.jsx(ee,{className:"medical-card mb-8",children:l.jsx(Le,{className:"p-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):l.jsxs(ee,{className:"medical-card mb-8",children:[l.jsxs(st,{className:"flex flex-row items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Sv,{progress:w,variant:f(n),size:80,strokeWidth:6,showPercentage:!0}),l.jsxs("div",{children:[l.jsx(ut,{className:"text-xl text-card-foreground",children:t==null?void 0:t.title_de}),l.jsxs("p",{className:"text-muted-foreground",children:[y.toFixed(1)," / ",g," Punkte (gewichtet)"]})]})]}),l.jsx(J,{variant:"ghost",size:"sm",onClick:e,children:l.jsx(no,{className:"w-4 h-4"})})]}),l.jsx(Le,{children:l.jsxs(Xs,{defaultValue:"overview",className:"w-full",children:[l.jsxs(fs,{className:"grid w-full grid-cols-3",children:[l.jsx(et,{value:"overview",children:"Übersicht"}),l.jsx(et,{value:"procedures",children:"Prozeduren"}),l.jsx(et,{value:"timeline",children:"Verlauf"})]}),l.jsx(ot,{value:"overview",className:"mt-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs(ee,{className:"p-4",children:[l.jsx("h4",{className:"font-semibold mb-3",children:"Rollenverteilung"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm",children:"Verantwortlich:"}),l.jsx(de,{variant:"default",children:s.reduce((v,x)=>v+x.responsible_count,0)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm",children:"Instruierend:"}),l.jsx(de,{variant:"secondary",children:s.reduce((v,x)=>v+x.instructing_count,0)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm",children:"Assistent:"}),l.jsx(de,{variant:"outline",children:s.reduce((v,x)=>v+x.assistant_count,0)})]})]})]}),l.jsxs(ee,{className:"p-4",children:[l.jsx("h4",{className:"font-semibold mb-3",children:"Modulfortschritt"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{children:"Erfüllung"}),l.jsxs("span",{children:[w.toFixed(1),"%"]})]}),l.jsx(Tf,{value:w,className:"h-2"})]}),l.jsx("div",{className:"text-xs text-muted-foreground",children:"Gewichtung: V=1.0, I=0.75, A=0.5"})]})]}),l.jsxs(ee,{className:"p-4",children:[l.jsx("h4",{className:"font-semibold mb-3",children:"Statistiken"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Prozeduren:"}),l.jsx("span",{children:s.length})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Eingriffe total:"}),l.jsx("span",{children:s.reduce((v,x)=>v+x.responsible_count+x.instructing_count+x.assistant_count,0)})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Punkte total:"}),l.jsx("span",{children:y.toFixed(1)})]})]})]})]})}),l.jsx(ot,{value:"procedures",className:"mt-6",children:l.jsxs(Rf,{children:[l.jsx(Mf,{children:l.jsxs(Ws,{children:[l.jsx(Ie,{children:"Prozedur"}),l.jsxs(Ie,{className:"text-center",children:["Soll PGY-",c]}),l.jsx(Ie,{className:"text-center",children:"Ist (gewichtet)"}),l.jsx(Ie,{className:"text-center",children:"V/I/A"}),l.jsx(Ie,{className:"text-center",children:"Fortschritt"}),l.jsx(Ie,{className:"text-center",children:"Status"})]})}),l.jsx(If,{children:s.map(v=>{const x=p(v),_=m(v),N=x>0&&v.weighted_score<x;return l.jsxs(Ws,{children:[l.jsx(De,{className:"font-medium",children:l.jsxs("div",{children:[l.jsx("div",{children:v.title_de}),l.jsx("div",{className:"text-xs text-muted-foreground",children:v.code})]})}),l.jsx(De,{className:"text-center",children:x||"-"}),l.jsx(De,{className:"text-center",children:v.weighted_score.toFixed(1)}),l.jsx(De,{className:"text-center",children:l.jsxs("div",{className:"flex gap-1 justify-center",children:[l.jsx(de,{variant:"default",className:"text-xs",children:v.responsible_count}),l.jsx(de,{variant:"secondary",className:"text-xs",children:v.instructing_count}),l.jsx(de,{variant:"outline",className:"text-xs",children:v.assistant_count})]})}),l.jsx(De,{className:"text-center",children:x>0?l.jsxs("div",{className:"w-16 mx-auto",children:[l.jsx(Tf,{value:_,className:"h-2"}),l.jsxs("div",{className:"text-xs mt-1",children:[_.toFixed(0),"%"]})]}):"-"}),l.jsxs(De,{className:"text-center",children:[N&&l.jsx(Kx,{className:"w-4 h-4 text-orange-500 mx-auto"}),x>0&&v.weighted_score>=x&&l.jsx(de,{variant:"default",className:"bg-green-500",children:"✓"})]})]},v.id)})})]})}),l.jsx(ot,{value:"timeline",className:"mt-6",children:l.jsx("div",{className:"space-y-4",children:s.filter(v=>v.logs.length>0).flatMap(v=>v.logs.map(x=>({...x,procedure_title:v.title_de}))).sort((v,x)=>new Date(x.performed_date).getTime()-new Date(v.performed_date).getTime()).slice(0,20).map(v=>l.jsx(ee,{className:"p-4",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:v.procedure_title}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(v.performed_date).toLocaleDateString("de-DE")," • ",v.hospital]}),v.supervisor&&l.jsxs("div",{className:"text-xs text-muted-foreground",children:["Supervisor: ",v.supervisor]})]}),l.jsx(de,{variant:v.role_in_surgery==="responsible"?"default":v.role_in_surgery==="instructing"?"secondary":"outline",children:v.role_in_surgery==="responsible"?"Verantwortlich":v.role_in_surgery==="instructing"?"Instruierend":"Assistent"})]})},v.id))})})]})})]})};var ik=1,HG=.9,WG=.8,VG=.17,Ub=.1,Hb=.999,GG=.9999,qG=.99,KG=/[\\\/_+.#"@\[\(\{&]/,YG=/[\\\/_+.#"@\[\(\{&]/g,XG=/[\s-]/,xD=/[\s-]/g;function D_(n,e,t,r,s,i,a){if(i===e.length)return s===n.length?ik:qG;var o=`${s},${i}`;if(a[o]!==void 0)return a[o];for(var c=r.charAt(i),d=t.indexOf(c,s),h=0,f,p,m,y;d>=0;)f=D_(n,e,t,r,d+1,i+1,a),f>h&&(d===s?f*=ik:KG.test(n.charAt(d-1))?(f*=WG,m=n.slice(s,d-1).match(YG),m&&s>0&&(f*=Math.pow(Hb,m.length))):XG.test(n.charAt(d-1))?(f*=HG,y=n.slice(s,d-1).match(xD),y&&s>0&&(f*=Math.pow(Hb,y.length))):(f*=VG,s>0&&(f*=Math.pow(Hb,d-s))),n.charAt(d)!==e.charAt(i)&&(f*=GG)),(f<Ub&&t.charAt(d-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&t.charAt(d-1)!==r.charAt(i))&&(p=D_(n,e,t,r,d+1,i+2,a),p*Ub>f&&(f=p*Ub)),f>h&&(h=f),d=t.indexOf(c,d+1);return a[o]=h,h}function ak(n){return n.toLowerCase().replace(xD," ")}function QG(n,e,t){return n=t&&t.length>0?`${n+" "+t.join(" ")}`:n,D_(n,e,ak(n),ak(e),0,0,{})}var hp='[cmdk-group=""]',Wb='[cmdk-group-items=""]',JG='[cmdk-group-heading=""]',wD='[cmdk-item=""]',ok=`${wD}:not([aria-disabled="true"])`,O_="cmdk-item-select",vu="data-value",ZG=(n,e,t)=>QG(n,e,t),bD=b.createContext(void 0),jv=()=>b.useContext(bD),_D=b.createContext(void 0),WE=()=>b.useContext(_D),SD=b.createContext(void 0),ND=b.forwardRef((n,e)=>{let t=yu(()=>{var $,W;return{search:"",value:(W=($=n.value)!=null?$:n.defaultValue)!=null?W:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=yu(()=>new Set),s=yu(()=>new Map),i=yu(()=>new Map),a=yu(()=>new Set),o=ED(n),{label:c,children:d,value:h,onValueChange:f,filter:p,shouldFilter:m,loop:y,disablePointerSelection:g=!1,vimBindings:w=!0,...v}=n,x=Gn(),_=Gn(),N=Gn(),E=b.useRef(null),A=dq();Ud(()=>{if(h!==void 0){let $=h.trim();t.current.value=$,j.emit()}},[h]),Ud(()=>{A(6,z)},[]);let j=b.useMemo(()=>({subscribe:$=>(a.current.add($),()=>a.current.delete($)),snapshot:()=>t.current,setState:($,W,Q)=>{var K,le,H,me;if(!Object.is(t.current[$],W)){if(t.current[$]=W,$==="search")O(),R(),A(1,I);else if($==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ne=document.getElementById(N);Ne?Ne.focus():(K=document.getElementById(x))==null||K.focus()}if(A(7,()=>{var Ne;t.current.selectedItemId=(Ne=L())==null?void 0:Ne.id,j.emit()}),Q||A(5,z),((le=o.current)==null?void 0:le.value)!==void 0){let Ne=W??"";(me=(H=o.current).onValueChange)==null||me.call(H,Ne);return}}j.emit()}},emit:()=>{a.current.forEach($=>$())}}),[]),P=b.useMemo(()=>({value:($,W,Q)=>{var K;W!==((K=i.current.get($))==null?void 0:K.value)&&(i.current.set($,{value:W,keywords:Q}),t.current.filtered.items.set($,T(W,Q)),A(2,()=>{R(),j.emit()}))},item:($,W)=>(r.current.add($),W&&(s.current.has(W)?s.current.get(W).add($):s.current.set(W,new Set([$]))),A(3,()=>{O(),R(),t.current.value||I(),j.emit()}),()=>{i.current.delete($),r.current.delete($),t.current.filtered.items.delete($);let Q=L();A(4,()=>{O(),(Q==null?void 0:Q.getAttribute("id"))===$&&I(),j.emit()})}),group:$=>(s.current.has($)||s.current.set($,new Set),()=>{i.current.delete($),s.current.delete($)}),filter:()=>o.current.shouldFilter,label:c||n["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:x,inputId:N,labelId:_,listInnerRef:E}),[]);function T($,W){var Q,K;let le=(K=(Q=o.current)==null?void 0:Q.filter)!=null?K:ZG;return $?le($,t.current.search,W):0}function R(){if(!t.current.search||o.current.shouldFilter===!1)return;let $=t.current.filtered.items,W=[];t.current.filtered.groups.forEach(K=>{let le=s.current.get(K),H=0;le.forEach(me=>{let Ne=$.get(me);H=Math.max(Ne,H)}),W.push([K,H])});let Q=E.current;V().sort((K,le)=>{var H,me;let Ne=K.getAttribute("id"),je=le.getAttribute("id");return((H=$.get(je))!=null?H:0)-((me=$.get(Ne))!=null?me:0)}).forEach(K=>{let le=K.closest(Wb);le?le.appendChild(K.parentElement===le?K:K.closest(`${Wb} > *`)):Q.appendChild(K.parentElement===Q?K:K.closest(`${Wb} > *`))}),W.sort((K,le)=>le[1]-K[1]).forEach(K=>{var le;let H=(le=E.current)==null?void 0:le.querySelector(`${hp}[${vu}="${encodeURIComponent(K[0])}"]`);H==null||H.parentElement.appendChild(H)})}function I(){let $=V().find(Q=>Q.getAttribute("aria-disabled")!=="true"),W=$==null?void 0:$.getAttribute(vu);j.setState("value",W||void 0)}function O(){var $,W,Q,K;if(!t.current.search||o.current.shouldFilter===!1){t.current.filtered.count=r.current.size;return}t.current.filtered.groups=new Set;let le=0;for(let H of r.current){let me=(W=($=i.current.get(H))==null?void 0:$.value)!=null?W:"",Ne=(K=(Q=i.current.get(H))==null?void 0:Q.keywords)!=null?K:[],je=T(me,Ne);t.current.filtered.items.set(H,je),je>0&&le++}for(let[H,me]of s.current)for(let Ne of me)if(t.current.filtered.items.get(Ne)>0){t.current.filtered.groups.add(H);break}t.current.filtered.count=le}function z(){var $,W,Q;let K=L();K&&((($=K.parentElement)==null?void 0:$.firstChild)===K&&((Q=(W=K.closest(hp))==null?void 0:W.querySelector(JG))==null||Q.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function L(){var $;return($=E.current)==null?void 0:$.querySelector(`${wD}[aria-selected="true"]`)}function V(){var $;return Array.from((($=E.current)==null?void 0:$.querySelectorAll(ok))||[])}function B($){let W=V()[$];W&&j.setState("value",W.getAttribute(vu))}function F($){var W;let Q=L(),K=V(),le=K.findIndex(me=>me===Q),H=K[le+$];(W=o.current)!=null&&W.loop&&(H=le+$<0?K[K.length-1]:le+$===K.length?K[0]:K[le+$]),H&&j.setState("value",H.getAttribute(vu))}function D($){let W=L(),Q=W==null?void 0:W.closest(hp),K;for(;Q&&!K;)Q=$>0?lq(Q,hp):cq(Q,hp),K=Q==null?void 0:Q.querySelector(ok);K?j.setState("value",K.getAttribute(vu)):F($)}let M=()=>B(V().length-1),U=$=>{$.preventDefault(),$.metaKey?M():$.altKey?D(1):F(1)},X=$=>{$.preventDefault(),$.metaKey?B(0):$.altKey?D(-1):F(-1)};return b.createElement(oe.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:$=>{var W;(W=v.onKeyDown)==null||W.call(v,$);let Q=$.nativeEvent.isComposing||$.keyCode===229;if(!($.defaultPrevented||Q))switch($.key){case"n":case"j":{w&&$.ctrlKey&&U($);break}case"ArrowDown":{U($);break}case"p":case"k":{w&&$.ctrlKey&&X($);break}case"ArrowUp":{X($);break}case"Home":{$.preventDefault(),B(0);break}case"End":{$.preventDefault(),M();break}case"Enter":{$.preventDefault();let K=L();if(K){let le=new Event(O_);K.dispatchEvent(le)}}}}},b.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:hq},c),kw(n,$=>b.createElement(_D.Provider,{value:j},b.createElement(bD.Provider,{value:P},$))))}),eq=b.forwardRef((n,e)=>{var t,r;let s=Gn(),i=b.useRef(null),a=b.useContext(SD),o=jv(),c=ED(n),d=(r=(t=c.current)==null?void 0:t.forceMount)!=null?r:a==null?void 0:a.forceMount;Ud(()=>{if(!d)return o.item(s,a==null?void 0:a.id)},[d]);let h=AD(s,i,[n.value,n.children,i],n.keywords),f=WE(),p=Ol(A=>A.value&&A.value===h.current),m=Ol(A=>d||o.filter()===!1?!0:A.search?A.filtered.items.get(s)>0:!0);b.useEffect(()=>{let A=i.current;if(!(!A||n.disabled))return A.addEventListener(O_,y),()=>A.removeEventListener(O_,y)},[m,n.onSelect,n.disabled]);function y(){var A,j;g(),(j=(A=c.current).onSelect)==null||j.call(A,h.current)}function g(){f.setState("value",h.current,!0)}if(!m)return null;let{disabled:w,value:v,onSelect:x,forceMount:_,keywords:N,...E}=n;return b.createElement(oe.div,{ref:Dd(i,e),...E,id:s,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!p,"data-disabled":!!w,"data-selected":!!p,onPointerMove:w||o.getDisablePointerSelection()?void 0:g,onClick:w?void 0:y},n.children)}),tq=b.forwardRef((n,e)=>{let{heading:t,children:r,forceMount:s,...i}=n,a=Gn(),o=b.useRef(null),c=b.useRef(null),d=Gn(),h=jv(),f=Ol(m=>s||h.filter()===!1?!0:m.search?m.filtered.groups.has(a):!0);Ud(()=>h.group(a),[]),AD(a,o,[n.value,n.heading,c]);let p=b.useMemo(()=>({id:a,forceMount:s}),[s]);return b.createElement(oe.div,{ref:Dd(o,e),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},t&&b.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),kw(n,m=>b.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},b.createElement(SD.Provider,{value:p},m))))}),nq=b.forwardRef((n,e)=>{let{alwaysRender:t,...r}=n,s=b.useRef(null),i=Ol(a=>!a.search);return!t&&!i?null:b.createElement(oe.div,{ref:Dd(s,e),...r,"cmdk-separator":"",role:"separator"})}),rq=b.forwardRef((n,e)=>{let{onValueChange:t,...r}=n,s=n.value!=null,i=WE(),a=Ol(d=>d.search),o=Ol(d=>d.selectedItemId),c=jv();return b.useEffect(()=>{n.value!=null&&i.setState("search",n.value)},[n.value]),b.createElement(oe.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":o,id:c.inputId,type:"text",value:s?n.value:a,onChange:d=>{s||i.setState("search",d.target.value),t==null||t(d.target.value)}})}),sq=b.forwardRef((n,e)=>{let{children:t,label:r="Suggestions",...s}=n,i=b.useRef(null),a=b.useRef(null),o=Ol(d=>d.selectedItemId),c=jv();return b.useEffect(()=>{if(a.current&&i.current){let d=a.current,h=i.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=d.offsetHeight;h.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(f),p.unobserve(d)}}},[]),b.createElement(oe.div,{ref:Dd(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:c.listId},kw(n,d=>b.createElement("div",{ref:Dd(a,c.listInnerRef),"cmdk-list-sizer":""},d)))}),iq=b.forwardRef((n,e)=>{let{open:t,onOpenChange:r,overlayClassName:s,contentClassName:i,container:a,...o}=n;return b.createElement(WI,{open:t,onOpenChange:r},b.createElement(VI,{container:a},b.createElement($E,{"cmdk-overlay":"",className:s}),b.createElement(zE,{"aria-label":n.label,"cmdk-dialog":"",className:i},b.createElement(ND,{ref:e,...o}))))}),aq=b.forwardRef((n,e)=>Ol(t=>t.filtered.count===0)?b.createElement(oe.div,{ref:e,...n,"cmdk-empty":"",role:"presentation"}):null),oq=b.forwardRef((n,e)=>{let{progress:t,children:r,label:s="Loading...",...i}=n;return b.createElement(oe.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},kw(n,a=>b.createElement("div",{"aria-hidden":!0},a)))}),pr=Object.assign(ND,{List:sq,Item:eq,Input:rq,Group:tq,Separator:nq,Dialog:iq,Empty:aq,Loading:oq});function lq(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function cq(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function ED(n){let e=b.useRef(n);return Ud(()=>{e.current=n}),e}var Ud=typeof window>"u"?b.useEffect:b.useLayoutEffect;function yu(n){let e=b.useRef();return e.current===void 0&&(e.current=n()),e}function Ol(n){let e=WE(),t=()=>n(e.snapshot());return b.useSyncExternalStore(e.subscribe,t,t)}function AD(n,e,t,r=[]){let s=b.useRef(),i=jv();return Ud(()=>{var a;let o=(()=>{var d;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():s.current}})(),c=r.map(d=>d.trim());i.value(n,o,c),(a=e.current)==null||a.setAttribute(vu,o),s.current=o}),s}var dq=()=>{let[n,e]=b.useState(),t=yu(()=>new Map);return Ud(()=>{t.current.forEach(r=>r()),t.current=new Map},[n]),(r,s)=>{t.current.set(r,s),e({})}};function uq(n){let e=n.type;return typeof e=="function"?e(n.props):"render"in e?e.render(n.props):n}function kw({asChild:n,children:e},t){return n&&b.isValidElement(e)?b.cloneElement(uq(e),{ref:e.ref},t(e.props.children)):t(e)}var hq={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const jD=b.forwardRef(({className:n,...e},t)=>l.jsx(pr,{ref:t,className:te("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...e}));jD.displayName=pr.displayName;const CD=b.forwardRef(({className:n,...e},t)=>l.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[l.jsx(U2,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),l.jsx(pr.Input,{ref:t,className:te("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...e})]}));CD.displayName=pr.Input.displayName;const kD=b.forwardRef(({className:n,...e},t)=>l.jsx(pr.List,{ref:t,className:te("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...e}));kD.displayName=pr.List.displayName;const PD=b.forwardRef((n,e)=>l.jsx(pr.Empty,{ref:e,className:"py-6 text-center text-sm",...n}));PD.displayName=pr.Empty.displayName;const TD=b.forwardRef(({className:n,...e},t)=>l.jsx(pr.Group,{ref:t,className:te("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...e}));TD.displayName=pr.Group.displayName;const fq=b.forwardRef(({className:n,...e},t)=>l.jsx(pr.Separator,{ref:t,className:te("-mx-1 h-px bg-border",n),...e}));fq.displayName=pr.Separator.displayName;const RD=b.forwardRef(({className:n,...e},t)=>l.jsx(pr.Item,{ref:t,className:te("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",n),...e}));RD.displayName=pr.Item.displayName;var Pw="Popover",[MD,AQ]=ni(Pw,[bw]),Cv=bw(),[pq,Yl]=MD(Pw),ID=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=n,o=Cv(e),c=b.useRef(null),[d,h]=b.useState(!1),[f,p]=Ld({prop:r,defaultProp:s??!1,onChange:i,caller:Pw});return l.jsx(IM,{...o,children:l.jsx(pq,{scope:e,contentId:Gn(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:d,onCustomAnchorAdd:b.useCallback(()=>h(!0),[]),onCustomAnchorRemove:b.useCallback(()=>h(!1),[]),modal:a,children:t})})};ID.displayName=Pw;var DD="PopoverAnchor",mq=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Yl(DD,t),i=Cv(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=s;return b.useEffect(()=>(a(),()=>o()),[a,o]),l.jsx(ME,{...i,...r,ref:e})});mq.displayName=DD;var OD="PopoverTrigger",LD=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Yl(OD,t),i=Cv(t),a=We(e,s.triggerRef),o=l.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":UD(s.open),...r,ref:a,onClick:he(n.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:l.jsx(ME,{asChild:!0,...i,children:o})});LD.displayName=OD;var VE="PopoverPortal",[gq,vq]=MD(VE,{forceMount:void 0}),FD=n=>{const{__scopePopover:e,forceMount:t,children:r,container:s}=n,i=Yl(VE,e);return l.jsx(gq,{scope:e,forceMount:t,children:l.jsx(ms,{present:t||i.open,children:l.jsx(gv,{asChild:!0,container:s,children:r})})})};FD.displayName=VE;var Df="PopoverContent",$D=b.forwardRef((n,e)=>{const t=vq(Df,n.__scopePopover),{forceMount:r=t.forceMount,...s}=n,i=Yl(Df,n.__scopePopover);return l.jsx(ms,{present:r||i.open,children:i.modal?l.jsx(xq,{...s,ref:e}):l.jsx(wq,{...s,ref:e})})});$D.displayName=Df;var yq=Od("PopoverContent.RemoveScroll"),xq=b.forwardRef((n,e)=>{const t=Yl(Df,n.__scopePopover),r=b.useRef(null),s=We(e,r),i=b.useRef(!1);return b.useEffect(()=>{const a=r.current;if(a)return IE(a)},[]),l.jsx(Sw,{as:yq,allowPinchZoom:!0,children:l.jsx(zD,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(n.onCloseAutoFocus,a=>{var o;a.preventDefault(),i.current||(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:he(n.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0,d=o.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:he(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),wq=b.forwardRef((n,e)=>{const t=Yl(Df,n.__scopePopover),r=b.useRef(!1),s=b.useRef(!1);return l.jsx(zD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(r.current||(o=t.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),zD=b.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,...f}=n,p=Yl(Df,t),m=Cv(t);return SE(),l.jsx(vw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:l.jsx(mv,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:l.jsx(DM,{"data-state":UD(p.open),role:"dialog",id:p.contentId,...m,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),BD="PopoverClose",bq=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Yl(BD,t);return l.jsx(oe.button,{type:"button",...r,ref:e,onClick:he(n.onClick,()=>s.onOpenChange(!1))})});bq.displayName=BD;var _q="PopoverArrow",Sq=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Cv(t);return l.jsx(OM,{...s,...r,ref:e})});Sq.displayName=_q;function UD(n){return n?"open":"closed"}var Nq=ID,Eq=LD,Aq=FD,HD=$D;const Hy=Nq,Wy=Eq,nm=b.forwardRef(({className:n,align:e="center",sideOffset:t=4,...r},s)=>l.jsx(Aq,{children:l.jsx(HD,{ref:s,align:e,sideOffset:t,className:te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}));nm.displayName=HD.displayName;const jq=({onClose:n,onSuccess:e})=>{const[t,r]=b.useState([]),[s,i]=b.useState(""),[a,o]=b.useState(new Date().toISOString().split("T")[0]),[c,d]=b.useState(""),[h,f]=b.useState(""),[p,m]=b.useState(""),[y,g]=b.useState(""),[w,v]=b.useState(""),[x,_]=b.useState(!1),[N,E]=b.useState(!1),[A,j]=b.useState(""),{toast:P}=ZN();b.useEffect(()=>{T()},[T]);const T=b.useCallback(async()=>{try{const{data:z,error:L}=await re.from("procedures").select(`
          id,
          code,
          title_de,
          procedure_categories!inner(title_de)
        `).eq("active",!0).order("title_de");if(L)throw L;const V=(z==null?void 0:z.map(B=>({id:B.id,code:B.code,title_de:B.title_de,category:{title_de:B.procedure_categories.title_de}})))||[];r(V)}catch(z){console.error("Error loading procedures:",z),P({title:"Fehler",description:"Prozeduren konnten nicht geladen werden.",variant:"destructive"})}},[P]),R=async z=>{if(z.preventDefault(),!s||!a||!c){P({title:"Fehler",description:"Bitte füllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}E(!0);try{const{data:{user:L}}=await re.auth.getUser();if(!L)throw new Error("Not authenticated");const{error:V}=await re.from("procedure_logs").insert({user_id:L.id,procedure_id:s,performed_date:a,role_in_surgery:c,hospital:h||null,supervisor:p||null,notes:y||null,case_id:w||null});if(V)throw V;P({title:"Erfolg",description:"Prozedur wurde erfolgreich erfasst."}),e()}catch(L){console.error("Error saving procedure:",L),P({title:"Fehler",description:"Prozedur konnte nicht gespeichert werden.",variant:"destructive"})}finally{E(!1)}},I=t.filter(z=>z.title_de.toLowerCase().includes(A.toLowerCase())||z.code.toLowerCase().includes(A.toLowerCase())||z.category.title_de.toLowerCase().includes(A.toLowerCase())),O=t.find(z=>z.id===s);return l.jsx(Av,{open:!0,onOpenChange:n,children:l.jsxs(Xf,{className:"sm:max-w-[600px]",children:[l.jsx(Qf,{children:l.jsxs(Jf,{className:"flex items-center gap-2",children:[l.jsx(kd,{className:"w-5 h-5"}),"Prozedur erfassen"]})}),l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(we,{htmlFor:"procedure",className:"text-sm font-medium",children:["Prozedur ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs(Hy,{open:x,onOpenChange:_,children:[l.jsx(Wy,{asChild:!0,children:l.jsxs(J,{variant:"outline",role:"combobox","aria-expanded":x,className:"w-full justify-between",children:[O?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{variant:"outline",className:"text-xs",children:O.code}),l.jsx("span",{children:O.title_de})]}):"Prozedur auswählen...",l.jsx(x5,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),l.jsx(nm,{className:"w-full p-0",children:l.jsxs(jD,{children:[l.jsx(CD,{placeholder:"Prozedur suchen...",value:A,onValueChange:j}),l.jsx(PD,{children:"Keine Prozedur gefunden."}),l.jsx(kD,{children:l.jsx(TD,{children:I.map(z=>l.jsxs(RD,{value:`${z.code} ${z.title_de}`,onSelect:()=>{i(z.id),_(!1)},children:[l.jsx($2,{className:te("mr-2 h-4 w-4",s===z.id?"opacity-100":"opacity-0")}),l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(de,{variant:"outline",className:"text-xs",children:z.code}),l.jsx("span",{children:z.title_de})]}),l.jsx("span",{className:"text-xs text-muted-foreground",children:z.category.title_de})]})]},z.id))})})]})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs(we,{htmlFor:"date",className:"text-sm font-medium",children:["Datum ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx(Fe,{id:"date",type:"date",value:a,onChange:z=>o(z.target.value),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(we,{htmlFor:"role",className:"text-sm font-medium",children:["Rolle ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs(Or,{value:c,onValueChange:d,required:!0,children:[l.jsx(ar,{children:l.jsx(Lr,{placeholder:"Rolle auswählen"})}),l.jsxs(or,{children:[l.jsx(Ye,{value:"responsible",children:"Verantwortlich (1.0x)"}),l.jsx(Ye,{value:"instructing",children:"Instruierend (0.75x)"}),l.jsx(Ye,{value:"assistant",children:"Assistent (0.5x)"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"hospital",className:"text-sm font-medium",children:"Klinik/Spital"}),l.jsx(Fe,{id:"hospital",value:h,onChange:z=>f(z.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"caseId",className:"text-sm font-medium",children:"Fall-ID"}),l.jsx(Fe,{id:"caseId",value:w,onChange:z=>v(z.target.value),placeholder:"z.B. 2024-001234"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"supervisor",className:"text-sm font-medium",children:"Supervisor"}),l.jsx(Fe,{id:"supervisor",value:p,onChange:z=>m(z.target.value),placeholder:"z.B. Dr. med. Max Mustermann"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"notes",className:"text-sm font-medium",children:"Notizen"}),l.jsx(Cw,{id:"notes",value:y,onChange:z=>g(z.target.value),placeholder:"Besonderheiten, Komplikationen, Lernpunkte...",rows:3})]}),c&&l.jsx("div",{className:"p-3 bg-muted rounded-medical",children:l.jsxs("div",{className:"text-sm",children:[l.jsx("strong",{children:"Gewichtung:"})," "," ",c==="responsible"&&"1.0 Punkte (Vollwertung)",c==="instructing"&&"0.75 Punkte (Instruierend)",c==="assistant"&&"0.5 Punkte (Assistenz)"]})}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(J,{type:"button",variant:"outline",onClick:n,children:"Abbrechen"}),l.jsx(J,{type:"submit",disabled:N,children:N?"Speichern...":"Speichern"})]})]})]})})},Cq=yv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ju=b.forwardRef(({className:n,variant:e,...t},r)=>l.jsx("div",{ref:r,role:"alert",className:te(Cq({variant:e}),n),...t}));Ju.displayName="Alert";const kq=b.forwardRef(({className:n,...e},t)=>l.jsx("h5",{ref:t,className:te("mb-1 font-medium leading-none tracking-tight",n),...e}));kq.displayName="AlertTitle";const Zu=b.forwardRef(({className:n,...e},t)=>l.jsx("div",{ref:t,className:te("text-sm [&_p]:leading-relaxed",n),...e}));Zu.displayName="AlertDescription";const Pq=({modules:n,userPgyLevel:e})=>{const[t,r]=b.useState([]),[s,i]=b.useState([]),[a,o]=b.useState(!0),c=b.useCallback(async()=>{var f;try{o(!0);const{data:{user:p}}=await re.auth.getUser();if(!p)return;const m=[];for(const y of n){const{data:g}=await re.from("procedures").select(`
            id,
            code,
            title_de,
            min_required_by_pgy
          `).eq("category_id",y.id).eq("active",!0);for(const w of g||[]){const v=((f=w.min_required_by_pgy)==null?void 0:f[`pgy${e}`])||0;if(v>0){const{data:x}=await re.from("procedure_logs").select("role_in_surgery, weighted_score").eq("procedure_id",w.id).eq("user_id",p.id),_=(x==null?void 0:x.reduce((E,A)=>E+(A.weighted_score||0),0))||0,N=Math.max(0,v-_);if(N>0){const E=_/v*100,A=N*(100-E)/100;m.push({procedure_id:w.id,procedure_title:w.title_de,procedure_code:w.code,module_name:y.title_de,required:v,current_weighted:_,gap:N,priority_score:A})}}}}m.sort((y,g)=>g.priority_score-y.priority_score),r(m.slice(0,10)),await d(p.id)}catch(p){console.error("Error in gap analysis:",p)}finally{o(!1)}},[n,e]);b.useEffect(()=>{c()},[c]);const d=async f=>{try{const p=[],m=new Date;for(let g=7;g>=0;g--){const w=new Date(m);w.setMonth(w.getMonth()-g*3);const v=w.getFullYear(),x=Math.floor(w.getMonth()/3)+1;p.push({year:v,quarter:x,label:`Q${x} ${v}`,startDate:new Date(v,(x-1)*3,1),endDate:new Date(v,x*3,0)})}const y=[];for(const g of p){const{data:w}=await re.from("procedure_logs").select("weighted_score").eq("user_id",f).gte("performed_date",g.startDate.toISOString().split("T")[0]).lte("performed_date",g.endDate.toISOString().split("T")[0]),v=(w==null?void 0:w.reduce((_,N)=>_+(N.weighted_score||0),0))||0,x=(w==null?void 0:w.length)||0;y.push({...g,totalWeighted:v,procedureCount:x,intensity:Math.min(100,x/20*100)})}i(y)}catch(p){console.error("Error loading quarterly progress:",p)}},h=f=>f===0?"bg-gray-100":f<25?"bg-green-100":f<50?"bg-green-200":f<75?"bg-green-300":"bg-green-400";return a?l.jsx(ee,{className:"medical-card mb-8",children:l.jsx(Le,{className:"p-8",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs(ee,{className:"medical-card",children:[l.jsx(st,{children:l.jsxs(ut,{className:"flex items-center gap-2",children:[l.jsx(Kx,{className:"w-5 h-5 text-orange-500"}),"Top Ausbildungslücken"]})}),l.jsx(Le,{children:t.length===0?l.jsx(Ju,{children:l.jsx(Zu,{children:"Keine größeren Lücken identifiziert. Alle erforderlichen Prozeduren sind auf gutem Weg!"})}):l.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((f,p)=>l.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs(de,{variant:"outline",className:"text-xs",children:["#",p+1]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:f.procedure_title}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.module_name," • ",f.procedure_code]})]})]})}),l.jsxs("div",{className:"text-right min-w-32",children:[l.jsxs("div",{className:"text-sm font-medium",children:[f.current_weighted.toFixed(1)," / ",f.required]}),l.jsxs("div",{className:"text-xs text-orange-600",children:["Lücke: ",f.gap.toFixed(1)," Punkte"]}),l.jsx(Tf,{value:f.current_weighted/f.required*100,className:"h-2 mt-1 w-20"})]})]},f.procedure_id))})})]}),l.jsxs(ee,{className:"medical-card",children:[l.jsx(st,{children:l.jsxs(ut,{className:"flex items-center gap-2",children:[l.jsx(Vn,{className:"w-5 h-5 text-blue-500"}),"Aktivitäts-Heatmap (Quartale)"]})}),l.jsxs(Le,{children:[l.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2",children:s.map(f=>l.jsxs("div",{className:`
                  p-3 rounded-medical border text-center text-xs font-medium
                  ${h(f.intensity)}
                  hover:scale-105 transition-transform cursor-pointer
                `,title:`${f.label}: ${f.procedureCount} Eingriffe (${f.totalWeighted.toFixed(1)} Punkte)`,children:[l.jsx("div",{children:f.label}),l.jsx("div",{className:"text-xs opacity-75 mt-1",children:f.procedureCount})]},`${f.year}-${f.quarter}`))}),l.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[l.jsx("span",{children:"Weniger Aktivität"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),l.jsx("div",{className:"w-3 h-3 bg-green-100 rounded"}),l.jsx("div",{className:"w-3 h-3 bg-green-200 rounded"}),l.jsx("div",{className:"w-3 h-3 bg-green-300 rounded"}),l.jsx("div",{className:"w-3 h-3 bg-green-400 rounded"})]}),l.jsx("span",{children:"Mehr Aktivität"})]})]})]}),n.length>0&&l.jsxs(ee,{className:"medical-card",children:[l.jsx(st,{children:l.jsxs(ut,{className:"flex items-center gap-2",children:[l.jsx(k5,{className:"w-5 h-5 text-yellow-500"}),"Rollen-Balance Analyse"]})}),l.jsx(Le,{children:(()=>{const f=n.reduce((y,g)=>{var w;return y+(((w=g.progress)==null?void 0:w.responsible_count)||0)},0),p=n.reduce((y,g)=>{var w,v,x;return y+(((w=g.progress)==null?void 0:w.responsible_count)||0)+(((v=g.progress)==null?void 0:v.instructing_count)||0)+(((x=g.progress)==null?void 0:x.assistant_count)||0)},0),m=p>0?f/p*100:0;return m>=30?l.jsx(Ju,{children:l.jsxs(Zu,{children:["Ihre Rollen-Balance ist ausgezeichnet! ",m.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher durchgeführt."]})}):l.jsxs(Ju,{children:[l.jsx(Kx,{className:"h-4 w-4"}),l.jsxs(Zu,{children:["Achtung: Nur ",m.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher. Ziel: ≥30% für optimale FMH-Bewertung. Fokus auf eigenständige Eingriffe empfohlen."]})]})})()})]})]})},Tq=({runId:n,summary:e,stagingData:t,onClose:r,onImportComplete:s})=>{const[i,a]=b.useState(!1),[o,c]=b.useState("summary"),d=m=>{switch(m.status){case"matched":return l.jsxs(de,{variant:"default",className:"bg-success text-success-foreground",children:[l.jsx($u,{className:"w-3 h-3 mr-1"}),m.match_method==="exact"?"Exakt":m.match_method==="alias"?"Alias":m.match_method==="fuzzy"?"Ähnlich":"Manuell"]});case"needs_review":return l.jsxs(de,{variant:"destructive",children:[l.jsx(Kx,{className:"w-3 h-3 mr-1"}),"Prüfung nötig"]});default:return l.jsx(de,{variant:"secondary",children:"Unbekannt"})}},h=m=>m>=.95?"text-success":m>=.8?"text-warning":"text-destructive",f=async()=>{a(!0);try{console.log("🚀 Starting import commit...");const m=t.filter(v=>v.status==="matched"&&v.matched_proc_id);if(m.length===0){Ae.error("Keine passenden Prozeduren zum Importieren gefunden.");return}const y=[];for(const v of m){const x={procedure_id:v.matched_proc_id,performed_date:e.standDate||new Date().toISOString().split("T")[0],hospital:`Importiert aus ${e.filename}`,notes:`PDF Import ${e.standDate||new Date().toLocaleDateString("de-DE")} - ${v.module_name}`};if(v.responsible>0)for(let _=0;_<v.responsible;_++)y.push({...x,role_in_surgery:"responsible",notes:`${x.notes} - Verantwortlich ${_+1}/${v.responsible}`});if(v.instructing>0)for(let _=0;_<v.instructing;_++)y.push({...x,role_in_surgery:"instructing",notes:`${x.notes} - Instruierend ${_+1}/${v.instructing}`});if(v.assistant>0)for(let _=0;_<v.assistant;_++)y.push({...x,role_in_surgery:"assistant",notes:`${x.notes} - Assistent ${_+1}/${v.assistant}`})}console.log(`📝 Creating ${y.length} procedure logs...`);const{error:g}=await re.from("procedure_logs").insert(y);if(g)throw console.error("❌ Insert error:",g),g;const{error:w}=await re.from("import_runs").update({status:"completed",finished_at:new Date().toISOString(),summary_json:{imported:y.length,matched:m.length,modules:e.modules.map(v=>v.name)}}).eq("id",n);if(w)throw console.error("❌ Update error:",w),w;console.log("✅ Import completed successfully!"),Ae.success(`Import erfolgreich! ${y.length} Einträge wurden importiert.`),s()}catch(m){console.error("❌ Import failed:",m),Ae.error(`Import fehlgeschlagen: ${m.message}`)}finally{a(!1)}},p=async()=>{try{await re.from("import_runs").update({status:"cancelled"}).eq("id",n),Ae.info("Import wurde abgebrochen."),r()}catch(m){console.error("Error cancelling import:",m),Ae.error("Fehler beim Abbrechen des Imports.")}};return l.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[l.jsx(ee,{children:l.jsxs(st,{children:[l.jsxs(ut,{className:"flex items-center gap-2",children:[l.jsx(b5,{className:"w-5 h-5"}),"PDF Import Vorschau"]}),l.jsxs(tm,{children:["Datei: ",e.filename,e.standDate&&` • Stand: ${new Date(e.standDate).toLocaleDateString("de-DE")}`]})]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(J,{variant:o==="summary"?"default":"outline",onClick:()=>c("summary"),children:"Übersicht"}),l.jsxs(J,{variant:o==="modules"?"default":"outline",onClick:()=>c("modules"),children:["Module (",e.modules.length,")"]}),l.jsxs(J,{variant:o==="procedures"?"default":"outline",onClick:()=>c("procedures"),children:["Prozeduren (",e.totalProcedures,")"]})]}),o==="summary"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs(ee,{children:[l.jsx(st,{className:"pb-2",children:l.jsx(ut,{className:"text-lg",children:"Gesamt"})}),l.jsxs(Le,{children:[l.jsx("div",{className:"text-2xl font-bold",children:e.totalProcedures}),l.jsx("p",{className:"text-muted-foreground",children:"Prozeduren erkannt"})]})]}),l.jsxs(ee,{children:[l.jsx(st,{className:"pb-2",children:l.jsx(ut,{className:"text-lg text-success",children:"Zugeordnet"})}),l.jsxs(Le,{children:[l.jsx("div",{className:"text-2xl font-bold text-success",children:e.matched}),l.jsx("p",{className:"text-muted-foreground",children:"Automatisch zugeordnet"})]})]}),l.jsxs(ee,{children:[l.jsx(st,{className:"pb-2",children:l.jsx(ut,{className:"text-lg text-warning",children:"Prüfung nötig"})}),l.jsxs(Le,{children:[l.jsx("div",{className:"text-2xl font-bold text-warning",children:e.needsReview}),l.jsx("p",{className:"text-muted-foreground",children:"Manuelle Prüfung"})]})]})]}),o==="modules"&&l.jsxs(ee,{children:[l.jsxs(st,{children:[l.jsx(ut,{children:"Erkannte Module"}),l.jsx(tm,{children:"Übersicht der aus dem PDF extrahierten Module mit Summen"})]}),l.jsx(Le,{children:l.jsxs(Rf,{children:[l.jsx(Mf,{children:l.jsxs(Ws,{children:[l.jsx(Ie,{children:"Modul"}),l.jsx(Ie,{className:"text-right",children:"Minimum"}),l.jsx(Ie,{className:"text-right",children:"Verantwortlich"}),l.jsx(Ie,{className:"text-right",children:"Instruierend"}),l.jsx(Ie,{className:"text-right",children:"Assistent"}),l.jsx(Ie,{className:"text-right",children:"Total"})]})}),l.jsx(If,{children:e.modules.map((m,y)=>l.jsxs(Ws,{children:[l.jsx(De,{className:"font-medium",children:m.name}),l.jsx(De,{className:"text-right",children:m.minimum}),l.jsx(De,{className:"text-right",children:m.responsible}),l.jsx(De,{className:"text-right",children:m.instructing}),l.jsx(De,{className:"text-right",children:m.assistant}),l.jsx(De,{className:"text-right font-semibold",children:m.total})]},y))})]})})]}),o==="procedures"&&l.jsxs(ee,{children:[l.jsxs(st,{children:[l.jsx(ut,{children:"Prozeduren Details"}),l.jsx(tm,{children:"Alle erkannten Prozeduren mit Zuordnungsstatus"})]}),l.jsx(Le,{children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs(Rf,{children:[l.jsx(Mf,{children:l.jsxs(Ws,{children:[l.jsx(Ie,{children:"Prozedur"}),l.jsx(Ie,{children:"Modul"}),l.jsx(Ie,{children:"Status"}),l.jsx(Ie,{children:"Zugeordnet zu"}),l.jsx(Ie,{className:"text-right",children:"V"}),l.jsx(Ie,{className:"text-right",children:"I"}),l.jsx(Ie,{className:"text-right",children:"A"}),l.jsx(Ie,{className:"text-right",children:"Total"})]})}),l.jsx(If,{children:t.map(m=>{var y;return l.jsxs(Ws,{children:[l.jsx(De,{className:"font-medium",children:m.proc_name}),l.jsx(De,{className:"text-sm text-muted-foreground",children:m.module_name}),l.jsx(De,{children:d(m)}),l.jsx(De,{children:(y=m.procedures)!=null&&y.title_de?l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:m.procedures.title_de}),m.match_confidence<1&&l.jsxs("div",{className:`text-xs ${h(m.match_confidence)}`,children:[(m.match_confidence*100).toFixed(0),"% Übereinstimmung"]})]}):l.jsx("span",{className:"text-muted-foreground",children:"Keine Zuordnung"})}),l.jsx(De,{className:"text-right",children:m.responsible}),l.jsx(De,{className:"text-right",children:m.instructing}),l.jsx(De,{className:"text-right",children:m.assistant}),l.jsx(De,{className:"text-right font-semibold",children:m.total})]},m.id)})})]})})})]}),l.jsxs("div",{className:"flex justify-between pt-4",children:[l.jsx(J,{variant:"outline",onClick:p,children:"Abbrechen"}),l.jsxs("div",{className:"flex gap-2",children:[e.needsReview>0&&l.jsxs(J,{variant:"outline",className:"flex items-center gap-2",children:[l.jsx(lE,{className:"w-4 h-4"}),e.needsReview," Prozeduren bearbeiten"]}),l.jsxs(J,{onClick:f,disabled:i||e.matched===0,className:"flex items-center gap-2",children:[l.jsx(aw,{className:"w-4 h-4"}),i?"Importiere...":`${e.matched} Prozeduren importieren`]})]})]})]})},Fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),L_=[.001,0,0,.001,0,0],Vb=1.35,Tr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},No={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},WD="pdfjs_internal_editor_",ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Rq={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Vy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},It={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},xu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Tw={ERRORS:0,WARNINGS:1,INFOS:5},o0={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},vy={moveTo:0,lineTo:1,curveTo:2,closePath:3},Mq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Rw=Tw.WARNINGS;function Iq(n){Number.isInteger(n)&&(Rw=n)}function Dq(){return Rw}function Mw(n){Rw>=Tw.INFOS&&console.log(`Info: ${n}`)}function ye(n){Rw>=Tw.WARNINGS&&console.log(`Warning: ${n}`)}function tt(n){throw new Error(n)}function Ft(n,e){n||tt(e)}function Oq(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function VD(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Bq(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return Oq(r)?r:null}function GD(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&VD(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Pe(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const Zd=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class lk extends Zd{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Gb extends Zd{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class F_ extends Zd{constructor(e){super(e,"InvalidPDFException")}}class l0 extends Zd{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class Lq extends Zd{constructor(e){super(e,"FormatError")}}class Ll extends Zd{constructor(e){super(e,"AbortException")}}function qD(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&tt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function kv(n){typeof n!="string"&&tt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function Fq(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function $q(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function zq(){try{return new Function(""),!0}catch{return!1}}class yn{static get isLittleEndian(){return Pe(this,"isLittleEndian",$q())}static get isEvalSupported(){return Pe(this,"isEvalSupported",zq())}static get isOffscreenCanvasSupported(){return Pe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Pe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Pe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Pe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const qb=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ga,Gy,$_;class ue{static makeHexColor(e,t,r){return`#${qb[e]}${qb[t]}${qb[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],a=t[2],o=t[3],c=t[4],d=t[5];for(let h=0;h<6;h+=2){const f=e[r+h],p=e[r+h+1];e[r+h]=f*s+p*a+c,e[r+h+1]=f*i+p*o+d}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],a=t[2],o=t[3],c=t[4],d=t[5],h=e[0],f=e[1],p=e[2],m=e[3];let y=s*h+c,g=y,w=s*p+c,v=w,x=o*f+d,_=x,N=o*m+d,E=N;if(i!==0||a!==0){const A=i*h,j=i*p,P=a*f,T=a*m;y+=P,v+=P,w+=T,g+=T,x+=A,E+=A,N+=j,_+=j}r[0]=Math.min(r[0],y,w,g,v),r[1]=Math.min(r[1],x,N,_,E),r[2]=Math.max(r[2],y,w,g,v),r[3]=Math.max(r[3],x,N,_,E)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],a=e[3],o=r**2+s**2,c=r*i+s*a,d=i**2+a**2,h=(o+d)/2,f=Math.sqrt(h**2-(o*d-c**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,a,o,c,d){d[0]=Math.min(d[0],e,o),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,o),d[3]=Math.max(d[3],t,c),k(this,Ga,$_).call(this,e,r,i,o,t,s,a,c,3*(-e+3*(r-i)+o),6*(e-2*r+i),3*(r-e),d),k(this,Ga,$_).call(this,e,r,i,o,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),d)}}Ga=new WeakSet,Gy=function(e,t,r,s,i,a,o,c,d,h){if(d<=0||d>=1)return;const f=1-d,p=d*d,m=p*d,y=f*(f*(f*e+3*d*t)+3*p*r)+m*s,g=f*(f*(f*i+3*d*a)+3*p*o)+m*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],g)},$_=function(e,t,r,s,i,a,o,c,d,h,f,p){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&k(this,Ga,Gy).call(this,e,t,r,s,i,a,o,c,-f/h,p);return}const m=h**2-4*f*d;if(m<0)return;const y=Math.sqrt(m),g=2*d;k(this,Ga,Gy).call(this,e,t,r,s,i,a,o,c,(-h+y)/g,p),k(this,Ga,Gy).call(this,e,t,r,s,i,a,o,c,(-h-y)/g,p)},C(ue,Ga);function Bq(n){return decodeURIComponent(escape(n))}let Kb=null,ck=null;function Uq(n){return Kb||(Kb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ck=new Map([["ﬅ","ſt"]])),n.replaceAll(Kb,(e,t,r)=>t?t.normalize("NFKC"):ck.get(r))}function KD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),qD(n)}const GE="pdfjs_internal_id_";function Hq(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const a=i.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||o&&c===null))return!1;return!0}function $n(n,e,t){return Math.min(Math.max(n,e),t)}function YD(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(qD(n))}function Wq(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):kv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const ta="http://www.w3.org/2000/svg",dc=class dc{};q(dc,"CSS",96),q(dc,"PDF",72),q(dc,"PDF_TO_CSS_UNITS",dc.CSS/dc.PDF);let Fl=dc;async function Pv(n,e="text"){if(Sp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Tv{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=a,r*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,p,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,f=0,p=0,m=1;break;case 90:h=0,f=1,p=1,m=0;break;case 270:h=0,f=-1,p=-1,m=0;break;case 0:h=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let y,g,w,v;h===0?(y=Math.abs(d-e[1])*r+i,g=Math.abs(c-e[0])*r+a,w=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(y=Math.abs(c-e[0])*r+i,g=Math.abs(d-e[1])*r+a,w=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[h*r,f*r,p*r,m*r,y-h*r*c-p*r*d,g-f*r*c-m*r*d],this.width=w,this.height=v}get rawDims(){const e=this.viewBox;return Pe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Tv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return ue.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];ue.applyTransform(t,this.transform);const r=[e[2],e[3]];return ue.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return ue.applyInverseTransform(r,this.transform),r}}class qE extends Zd{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Iw(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function KE(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function Vq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function Gq(n,e="document.pdf"){if(typeof n!="string")return e;if(Iw(n))return ye('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=o=>{try{let c=decodeURIComponent(o);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:o):c}catch{return o}},i=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(i.test(a))return s(a);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const d of o)if(i.test(d))return s(d);const c=Array.from(r.searchParams.keys()).reverse();for(const d of c)if(i.test(d))return s(d)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return s(c[0])}return e}class dk{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&ye(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ye(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Sp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ps(n){n.preventDefault()}function Dt(n){n.preventDefault(),n.stopPropagation()}function qq(n){console.log("Deprecated API usage: "+n)}var Dm;class c0{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Dm)||S(this,Dm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Dm).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(a+=h,o+=f):d==="+"&&(a-=h,o-=f),new Date(Date.UTC(r,s,i,a,o,c))}}Dm=new WeakMap,C(c0,Dm);function Kq(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Tv({viewBox:i,userUnit:1,scale:e,rotation:t})}function Dw(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ye(`Not a valid color format: "${n}"`),[0,0,0])}function Yq(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Dw(r))}e.remove()}function wt(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function ii(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function Hd(n,e,t=!1,r=!0){if(e instanceof Tv){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,o=yn.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,d=`var(--total-scale-factor) * ${i}px`,h=o?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=o?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Gi{constructor(){const{pixelRatio:e}=Gi;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let a=1/0,o=1/0,c=1/0;r=Gi.capPixels(r,i),r>0&&(a=Math.sqrt(r/(e*t))),s!==-1&&(o=s/e,c=s/t);const d=Math.min(a,o,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const z_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Po,To,Xr,da,Om,dh,uh,Lm,_0,XD,gn,QD,JD,wu,Np;const aa=class aa{constructor(e){C(this,gn);C(this,Po,null);C(this,To,null);C(this,Xr);C(this,da,null);C(this,Om,null);C(this,dh,null);C(this,uh,null);S(this,Xr,e),u(aa,Lm)||S(aa,Lm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,Po,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Xr)._uiManager._signal;e.addEventListener("contextmenu",ps,{signal:t}),e.addEventListener("pointerdown",k(aa,_0,XD),{signal:t});const r=S(this,da,document.createElement("div"));r.className="buttons",e.append(r);const s=u(this,Xr).toolbarPosition;if(s){const{style:i}=e,a=u(this,Xr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Po)}hide(){var e;u(this,Po).classList.add("hidden"),(e=u(this,To))==null||e.hideDropdown()}show(){var e,t;u(this,Po).classList.remove("hidden"),(e=u(this,Om))==null||e.shown(),(t=u(this,dh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,Xr),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",u(aa,Lm)[e]),k(this,gn,wu).call(this,r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),u(this,da).append(r)}async addAltText(e){const t=await e.render();k(this,gn,wu).call(this,t),u(this,da).append(t,u(this,gn,Np)),S(this,Om,e)}addComment(e){if(u(this,dh))return;const t=e.render();t&&(k(this,gn,wu).call(this,t),u(this,da).prepend(t,u(this,gn,Np)),S(this,dh,e),e.toolbar=this)}addColorPicker(e){if(u(this,To))return;S(this,To,e);const t=e.renderButton();k(this,gn,wu).call(this,t),u(this,da).append(t,u(this,gn,Np))}async addEditSignatureButton(e){const t=S(this,uh,await e.renderEditButton(u(this,Xr)));k(this,gn,wu).call(this,t),u(this,da).append(t,u(this,gn,Np))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){u(this,uh)&&(u(this,uh).title=e)}remove(){var e;u(this,Po).remove(),(e=u(this,To))==null||e.destroy(),S(this,To,null)}};Po=new WeakMap,To=new WeakMap,Xr=new WeakMap,da=new WeakMap,Om=new WeakMap,dh=new WeakMap,uh=new WeakMap,Lm=new WeakMap,_0=new WeakSet,XD=function(e){e.stopPropagation()},gn=new WeakSet,QD=function(e){u(this,Xr)._focusEventsAllowed=!1,Dt(e)},JD=function(e){u(this,Xr)._focusEventsAllowed=!0,Dt(e)},wu=function(e){const t=u(this,Xr)._uiManager._signal;e.addEventListener("focusin",k(this,gn,QD).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,gn,JD).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ps,{signal:t})},Np=function(){const e=document.createElement("div");return e.className="divider",e},C(aa,_0),C(aa,Lm,null);let B_=aa;var Fm,_c,Sc,$l,ZD,eO,tO;class Xq{constructor(e){C(this,$l);C(this,Fm,null);C(this,_c,null);C(this,Sc);S(this,Sc,e)}show(e,t,r){const[s,i]=k(this,$l,eO).call(this,t,r),{style:a}=u(this,_c)||S(this,_c,k(this,$l,ZD).call(this));e.append(u(this,_c)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,_c).remove()}}Fm=new WeakMap,_c=new WeakMap,Sc=new WeakMap,$l=new WeakSet,ZD=function(){const e=S(this,_c,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ps,{signal:u(this,Sc)._signal});const t=S(this,Fm,document.createElement("div"));return t.className="buttons",e.append(t),k(this,$l,tO).call(this),e},eO=function(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const o=i.x+(t?i.width:0);if(a>r){s=o,r=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,r]},tO=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=u(this,Sc)._signal;e.addEventListener("contextmenu",ps,{signal:r}),e.addEventListener("click",()=>{u(this,Sc).highlightSelection("floating_button")},{signal:r}),u(this,Fm).append(e)};function nO(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var S0;class Qq{constructor(){C(this,S0,0)}get id(){return`${WD}${Xt(this,S0)._++}`}}S0=new WeakMap;var hh,$m,En,fh,qy;const yA=class yA{constructor(){C(this,fh);C(this,hh,KD());C(this,$m,0);C(this,En,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Pe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return k(this,fh,qy).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return k(this,fh,qy).call(this,e,e)}async getFromBlob(e,t){const r=await t;return k(this,fh,qy).call(this,e,r)}async getFromId(e){u(this,En)||S(this,En,new Map);const t=u(this,En).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,En)||S(this,En,new Map);let r=u(this,En).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${u(this,hh)}_${Xt(this,$m)._++}`,refCounter:1,isSvg:!1},u(this,En).set(e,r),u(this,En).set(r.id,r),r}getSvgUrl(e){const t=u(this,En).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;u(this,En)||S(this,En,new Map);const t=u(this,En).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,hh)}_`)}};hh=new WeakMap,$m=new WeakMap,En=new WeakMap,fh=new WeakSet,qy=async function(e,t){u(this,En)||S(this,En,new Map);let r=u(this,En).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${u(this,hh)}_${Xt(this,$m)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await Pv(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=yA._isSVGFittingCanvas,a=new FileReader,o=new Image,c=new Promise((d,h)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,d()},a.onload=async()=>{const f=r.svgUrl=a.result;o.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=a.onerror=h});a.readAsDataURL(s),await c}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){ye(s),r=null}return u(this,En).set(e,r),r&&u(this,En).set(r.id,r),r};let U_=yA;var jt,Ro,zm,xt;class Jq{constructor(e=128){C(this,jt,[]);C(this,Ro,!1);C(this,zm);C(this,xt,-1);S(this,zm,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),u(this,Ro))return;const c={cmd:e,undo:t,post:r,type:i};if(u(this,xt)===-1){u(this,jt).length>0&&(u(this,jt).length=0),S(this,xt,0),u(this,jt).push(c);return}if(a&&u(this,jt)[u(this,xt)].type===i){o&&(c.undo=u(this,jt)[u(this,xt)].undo),u(this,jt)[u(this,xt)]=c;return}const d=u(this,xt)+1;d===u(this,zm)?u(this,jt).splice(0,1):(S(this,xt,d),d<u(this,jt).length&&u(this,jt).splice(d)),u(this,jt).push(c)}undo(){if(u(this,xt)===-1)return;S(this,Ro,!0);const{undo:e,post:t}=u(this,jt)[u(this,xt)];e(),t==null||t(),S(this,Ro,!1),S(this,xt,u(this,xt)-1)}redo(){if(u(this,xt)<u(this,jt).length-1){S(this,xt,u(this,xt)+1),S(this,Ro,!0);const{cmd:e,post:t}=u(this,jt)[u(this,xt)];e(),t==null||t(),S(this,Ro,!1)}}hasSomethingToUndo(){return u(this,xt)!==-1}hasSomethingToRedo(){return u(this,xt)<u(this,jt).length-1}cleanType(e){if(u(this,xt)!==-1){for(let t=u(this,xt);t>=0;t--)if(u(this,jt)[t].type!==e){u(this,jt).splice(t+1,u(this,xt)-t),S(this,xt,t);return}u(this,jt).length=0,S(this,xt,-1)}}destroy(){S(this,jt,null)}}jt=new WeakMap,Ro=new WeakMap,zm=new WeakMap,xt=new WeakMap;var N0,rO;class Rv{constructor(e){C(this,N0);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=yn.platform;for(const[r,s,i={}]of e)for(const a of r){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(k(this,N0,rO).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=r;o&&!o(e,t)||(s.bind(e,...a,t)(),i||Dt(t))}}N0=new WeakSet,rO=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const E0=class E0{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Yq(e),Pe(this,"_colors",e)}convert(e){const t=Dw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return E0._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ue.makeHexColor(...t):e}};q(E0,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let H_=E0;var ph,gr,Wt,on,mh,ua,gh,Qr,Nc,Mo,Io,vh,Ec,fi,Ps,Ac,Bm,Um,yh,Hm,pi,Do,xh,Oo,mi,A0,Lo,Wm,Fo,jc,wh,$o,Vm,Qt,qe,ha,zo,Bo,Gm,qm,Uo,gi,fa,Km,Ym,Jr,Z,Ky,W_,sO,iO,Yy,aO,oO,lO,V_,cO,G_,q_,dO,Rn,na,uO,hO,K_,fO,Ep,Y_;const Bu=class Bu{constructor(e,t,r,s,i,a,o,c,d,h,f,p,m,y,g,w){C(this,Z);C(this,ph,new AbortController);C(this,gr,null);C(this,Wt,new Map);C(this,on,new Map);C(this,mh,null);C(this,ua,null);C(this,gh,null);C(this,Qr,new Jq);C(this,Nc,null);C(this,Mo,null);C(this,Io,null);C(this,vh,0);C(this,Ec,new Set);C(this,fi,null);C(this,Ps,null);C(this,Ac,new Set);q(this,"_editorUndoBar",null);C(this,Bm,!1);C(this,Um,!1);C(this,yh,!1);C(this,Hm,null);C(this,pi,null);C(this,Do,null);C(this,xh,null);C(this,Oo,!1);C(this,mi,null);C(this,A0,new Qq);C(this,Lo,!1);C(this,Wm,!1);C(this,Fo,null);C(this,jc,null);C(this,wh,null);C(this,$o,null);C(this,Vm,null);C(this,Qt,ve.NONE);C(this,qe,new Set);C(this,ha,null);C(this,zo,null);C(this,Bo,null);C(this,Gm,null);C(this,qm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,Uo,[0,0]);C(this,gi,null);C(this,fa,null);C(this,Km,null);C(this,Ym,null);C(this,Jr,null);const v=this._signal=u(this,ph).signal;S(this,fa,e),S(this,Km,t),S(this,Ym,r),S(this,mh,s),S(this,Nc,i),S(this,zo,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),k(this,Z,aO).call(this),k(this,Z,dO).call(this),k(this,Z,V_).call(this),S(this,ua,c.annotationStorage),S(this,Hm,c.filterFactory),S(this,Bo,d),S(this,xh,h||null),S(this,Bm,f),S(this,Um,p),S(this,yh,m),S(this,Vm,y||null),this.viewParameters={realScale:Fl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const e=Bu.prototype,t=a=>u(a,fa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new Rv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,fa).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,fa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,a,o,c,d;(e=u(this,Jr))==null||e.resolve(),S(this,Jr,null),(t=u(this,ph))==null||t.abort(),S(this,ph,null),this._signal=null;for(const h of u(this,on).values())h.destroy();u(this,on).clear(),u(this,Wt).clear(),u(this,Ac).clear(),(r=u(this,$o))==null||r.clear(),S(this,gr,null),u(this,qe).clear(),u(this,Qr).destroy(),(s=u(this,mh))==null||s.destroy(),(i=u(this,Nc))==null||i.destroy(),(a=u(this,zo))==null||a.destroy(),(o=u(this,mi))==null||o.hide(),S(this,mi,null),(c=u(this,wh))==null||c.destroy(),S(this,wh,null),u(this,pi)&&(clearTimeout(u(this,pi)),S(this,pi,null)),u(this,gi)&&(clearTimeout(u(this,gi)),S(this,gi,null)),(d=this._editorUndoBar)==null||d.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Vm)}get useNewAltTextFlow(){return u(this,Um)}get useNewAltTextWhenAddingImage(){return u(this,yh)}get hcmFilter(){return Pe(this,"hcmFilter",u(this,Bo)?u(this,Hm).addHCMFilter(u(this,Bo).foreground,u(this,Bo).background):"none")}get direction(){return Pe(this,"direction",getComputedStyle(u(this,fa)).direction)}get _highlightColors(){return Pe(this,"_highlightColors",u(this,xh)?new Map(u(this,xh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Pe(this,"highlightColors",null);const t=new Map,r=!!u(this,Bo);for(const[s,i]of e){const a=s.endsWith("_HCM");if(r&&a){t.set(s.replace("_HCM",""),i);continue}!r&&!a&&t.set(s,i)}return Pe(this,"highlightColors",t)}get highlightColorNames(){return Pe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Io,e)}setMainHighlightColorPicker(e){S(this,wh,e)}editAltText(e,t=!1){var r;(r=u(this,mh))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!u(this,Nc)}editComment(e,t){var r;(r=u(this,Nc))==null||r.open(this,e,t)}getSignature(e){var t;(t=u(this,zo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,zo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,yh,t);break}}onPageChanging({pageNumber:e}){S(this,vh,e-1)}focusMainContainer(){u(this,fa).focus()}findParent(e,t){for(const r of u(this,on).values()){const{x:s,y:i,width:a,height:o}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return r}return null}disableUserSelect(e=!1){u(this,Km).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Ac).add(e)}removeShouldRescale(e){u(this,Ac).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Fl.PDF_TO_CSS_UNITS;for(const r of u(this,Ac))r.onScaleChanging();(t=u(this,Io))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a}=t,o=t.toString(),d=k(this,Z,Ky).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;t.empty();const f=k(this,Z,W_).call(this,d),p=u(this,Qt)===ve.NONE,m=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a,text:o}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(ve.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,ua)&&!u(this,ua).has(e.id)&&u(this,ua).setValue(e.id,e)}a11yAlert(e,t=null){const r=u(this,Ym);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Oo)&&(S(this,Oo,!1),k(this,Z,Yy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,qe))if(t.div.contains(e)){S(this,jc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,jc))return;const[e,t]=u(this,jc);S(this,jc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,Z,V_).call(this),k(this,Z,G_).call(this)}removeEditListeners(){k(this,Z,cO).call(this),k(this,Z,q_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of u(this,Ps))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of u(this,Ps))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=u(this,gr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of u(this,qe)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of u(this,Ps))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){ye(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of r){const d=await s.deserialize(c);if(!d)return;i.push(d)}const a=()=>{for(const c of i)k(this,Z,K_).call(this,c);k(this,Z,Y_).call(this,i)},o=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){ye(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Qt)!==ve.NONE&&!this.isEditorHandlingKeyboard&&Bu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Oo)&&(S(this,Oo,!1),k(this,Z,Yy).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,Z,oO).call(this),k(this,Z,G_).call(this),k(this,Z,Rn).call(this,{isEditing:u(this,Qt)!==ve.NONE,isEmpty:k(this,Z,Ep).call(this),hasSomethingToUndo:u(this,Qr).hasSomethingToUndo(),hasSomethingToRedo:u(this,Qr).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,Z,lO).call(this),k(this,Z,q_).call(this),k(this,Z,Rn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Ps)){S(this,Ps,e);for(const t of u(this,Ps))k(this,Z,na).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,A0).id}get currentLayer(){return u(this,on).get(u(this,vh))}getLayer(e){return u(this,on).get(e)}get currentPageIndex(){return u(this,vh)}addLayer(e){u(this,on).set(e.pageIndex,e),u(this,Lo)?e.enable():e.disable()}removeLayer(e){u(this,on).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){var a,o,c;if(u(this,Qt)!==e&&!(u(this,Jr)&&(await u(this,Jr).promise,!u(this,Jr)))){if(S(this,Jr,Promise.withResolvers()),(a=u(this,Io))==null||a.commitOrRemove(),S(this,Qt,e),e===ve.NONE){this.setEditingState(!1),k(this,Z,hO).call(this),(o=this._editorUndoBar)==null||o.hide(),u(this,Jr).resolve();return}e===ve.SIGNATURE&&await((c=u(this,zo))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await k(this,Z,uO).call(this),this.unselectAll();for(const d of u(this,on).values())d.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),u(this,Jr).resolve();return}for(const d of u(this,Wt).values())d.annotationElementId===t||d.id===t?(this.setSelected(d),i?d.editComment():s&&d.enterInEditMode()):d.unselect();u(this,Jr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,Qt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,Ps)){switch(e){case Oe.CREATE:this.currentLayer.addNewEditor(t);return;case Oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Gm)||S(this,Gm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of u(this,qe))r.updateParams(e,t);else for(const r of u(this,Ps))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const a of u(this,Wt).values())a.editorType===e&&a.show(t);(((i=u(this,Gm))==null?void 0:i.get(Oe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,Z,na).call(this,[[Oe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Wm)!==e){S(this,Wm,e);for(const t of u(this,on).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of u(this,Wt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return u(this,Wt).get(e)}addEditor(e){u(this,Wt).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(u(this,pi)&&clearTimeout(u(this,pi)),S(this,pi,setTimeout(()=>{this.focusMainContainer(),S(this,pi,null)},0))),u(this,Wt).delete(e.id),e.annotationElementId&&((t=u(this,$o))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Ec).has(e.annotationElementId))&&((r=u(this,ua))==null||r.remove(e.id))}addDeletedAnnotationElement(e){u(this,Ec).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Ec).has(e)}removeDeletedAnnotationElement(e){u(this,Ec).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,gr)!==e&&(S(this,gr,e),e&&k(this,Z,na).call(this,e.propertiesToUpdate))}updateUI(e){u(this,Z,fO)===e&&k(this,Z,na).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,Z,na).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,qe).has(e)){u(this,qe).delete(e),e.unselect(),k(this,Z,Rn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,qe).add(e),e.select(),k(this,Z,na).call(this,e.propertiesToUpdate),k(this,Z,Rn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=u(this,Io))==null||t.commitOrRemove();for(const r of u(this,qe))r!==e&&r.unselect();u(this,qe).clear(),u(this,qe).add(e),e.select(),k(this,Z,na).call(this,e.propertiesToUpdate),k(this,Z,Rn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,qe).has(e)}get firstSelectedEditor(){return u(this,qe).values().next().value}unselect(e){e.unselect(),u(this,qe).delete(e),k(this,Z,Rn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,qe).size!==0}get isEnterHandled(){return u(this,qe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,Qr).undo(),k(this,Z,Rn).call(this,{hasSomethingToUndo:u(this,Qr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,Z,Ep).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,Qr).redo(),k(this,Z,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Qr).hasSomethingToRedo(),isEmpty:k(this,Z,Ep).call(this)})}addCommands(e){u(this,Qr).add(e),k(this,Z,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,Z,Ep).call(this)})}cleanUndoStack(e){u(this,Qr).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,qe)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const a of t)k(this,Z,K_).call(this,a)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=u(this,gr))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,gr)||this.hasSelection}selectAll(){for(const e of u(this,qe))e.commit();k(this,Z,Y_).call(this,u(this,Wt).values())}unselectAll(){var e;if(!(u(this,gr)&&(u(this,gr).commitOrRemove(),u(this,Qt)!==ve.NONE))&&!((e=u(this,Io))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,qe))t.unselect();u(this,qe).clear(),k(this,Z,Rn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;u(this,Uo)[0]+=e,u(this,Uo)[1]+=t;const[s,i]=u(this,Uo),a=[...u(this,qe)],o=1e3;u(this,gi)&&clearTimeout(u(this,gi)),S(this,gi,setTimeout(()=>{S(this,gi,null),u(this,Uo)[0]=u(this,Uo)[1]=0,this.addCommands({cmd:()=>{for(const c of a)u(this,Wt).has(c.id)&&(c.translateInPage(s,i),c.translationDone())},undo:()=>{for(const c of a)u(this,Wt).has(c.id)&&(c.translateInPage(-s,-i),c.translationDone())},mustExec:!1})},o));for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,fi,new Map);for(const e of u(this,qe))u(this,fi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,fi))return!1;this.disableUserSelect(!1);const e=u(this,fi);S(this,fi,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const r=(s,i,a,o)=>{if(u(this,Wt).has(s.id)){const c=u(this,on).get(o);c?s._setParentAndPosition(c,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)r(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)r(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,fi))for(const r of u(this,fi).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,qe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,gr)===e}getActive(){return u(this,gr)}getMode(){return u(this,Qt)}get imageManager(){return Pe(this,"imageManager",new U_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(d,h,f,p)=>({x:(h-s)/a,y:1-(d+f-r)/i,width:p/a,height:f/i});break;case"180":o=(d,h,f,p)=>({x:1-(d+f-r)/i,y:1-(h+p-s)/a,width:f/i,height:p/a});break;case"270":o=(d,h,f,p)=>({x:1-(h+p-s)/a,y:(d-r)/i,width:p/a,height:f/i});break;default:o=(d,h,f,p)=>({x:(d-r)/i,y:(h-s)/a,width:f/i,height:p/a});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const f=t.getRangeAt(d);if(!f.collapsed)for(const{x:p,y:m,width:y,height:g}of f.getClientRects())y===0||g===0||c.push(o(p,m,y,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,gh)||S(this,gh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,gh))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=u(this,gh))==null?void 0:s.get(e.data.id);if(!t)return;const r=u(this,ua).getRawValue(t);r&&(u(this,Qt)===ve.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=u(this,$o))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),u(this,$o).delete(e))}addMissingCanvas(e,t){(u(this,$o)||S(this,$o,new Map)).set(e,t)}};ph=new WeakMap,gr=new WeakMap,Wt=new WeakMap,on=new WeakMap,mh=new WeakMap,ua=new WeakMap,gh=new WeakMap,Qr=new WeakMap,Nc=new WeakMap,Mo=new WeakMap,Io=new WeakMap,vh=new WeakMap,Ec=new WeakMap,fi=new WeakMap,Ps=new WeakMap,Ac=new WeakMap,Bm=new WeakMap,Um=new WeakMap,yh=new WeakMap,Hm=new WeakMap,pi=new WeakMap,Do=new WeakMap,xh=new WeakMap,Oo=new WeakMap,mi=new WeakMap,A0=new WeakMap,Lo=new WeakMap,Wm=new WeakMap,Fo=new WeakMap,jc=new WeakMap,wh=new WeakMap,$o=new WeakMap,Vm=new WeakMap,Qt=new WeakMap,qe=new WeakMap,ha=new WeakMap,zo=new WeakMap,Bo=new WeakMap,Gm=new WeakMap,qm=new WeakMap,Uo=new WeakMap,gi=new WeakMap,fa=new WeakMap,Km=new WeakMap,Ym=new WeakMap,Jr=new WeakMap,Z=new WeakSet,Ky=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},W_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of u(this,on).values())if(r.hasTextLayer(e))return r;return null},sO=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=k(this,Z,Ky).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(u(this,mi)||S(this,mi,new Xq(this)),u(this,mi).show(r,s,this.direction==="ltr"))},iO=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){u(this,ha)&&((i=u(this,mi))==null||i.hide(),S(this,ha,null),k(this,Z,Rn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,ha))return;const s=k(this,Z,Ky).call(this,e).closest(".textLayer");if(!s){u(this,ha)&&((a=u(this,mi))==null||a.hide(),S(this,ha,null),k(this,Z,Rn).call(this,{hasSelectedText:!1}));return}if((o=u(this,mi))==null||o.hide(),S(this,ha,t),k(this,Z,Rn).call(this,{hasSelectedText:!0}),!(u(this,Qt)!==ve.HIGHLIGHT&&u(this,Qt)!==ve.NONE)&&(u(this,Qt)===ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Oo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=u(this,Qt)===ve.HIGHLIGHT?k(this,Z,W_).call(this,s):null;c==null||c.toggleDrawing();const d=new AbortController,h=this.combinedSignal(d),f=p=>{p.type==="pointerup"&&p.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&k(this,Z,Yy).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}},Yy=function(e=""){u(this,Qt)===ve.HIGHLIGHT?this.highlightSelection(e):u(this,Bm)&&k(this,Z,sO).call(this)},aO=function(){document.addEventListener("selectionchange",k(this,Z,iO).bind(this),{signal:this._signal})},oO=function(){if(u(this,Do))return;S(this,Do,new AbortController);const e=this.combinedSignal(u(this,Do));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},lO=function(){var e;(e=u(this,Do))==null||e.abort(),S(this,Do,null)},V_=function(){if(u(this,Fo))return;S(this,Fo,new AbortController);const e=this.combinedSignal(u(this,Fo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},cO=function(){var e;(e=u(this,Fo))==null||e.abort(),S(this,Fo,null)},G_=function(){if(u(this,Mo))return;S(this,Mo,new AbortController);const e=this.combinedSignal(u(this,Mo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},q_=function(){var e;(e=u(this,Mo))==null||e.abort(),S(this,Mo,null)},dO=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Rn=function(e){Object.entries(e).some(([r,s])=>u(this,qm)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,qm),e)}),u(this,Qt)===ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,Z,na).call(this,[[Oe.HIGHLIGHT_FREE,!0]]))},na=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},uO=async function(){if(!u(this,Lo)){S(this,Lo,!0);const e=[];for(const t of u(this,on).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Wt).values())t.enable()}},hO=function(){if(this.unselectAll(),u(this,Lo)){S(this,Lo,!1);for(const e of u(this,on).values())e.disable();for(const e of u(this,Wt).values())e.disable()}},K_=function(e){const t=u(this,on).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},fO=function(){let e=null;for(e of u(this,qe));return e},Ep=function(){if(u(this,Wt).size===0)return!0;if(u(this,Wt).size===1)for(const e of u(this,Wt).values())return e.isEmpty();return!1},Y_=function(e){for(const t of u(this,qe))t.unselect();u(this,qe).clear();for(const t of e)t.isEmpty()||(u(this,qe).add(t),t.select());k(this,Z,Rn).call(this,{hasSelectedEditor:this.hasSelection})},q(Bu,"TRANSLATE_SMALL",1),q(Bu,"TRANSLATE_BIG",10);let Wd=Bu;var Jt,vi,Ts,bh,yi,vr,_h,xi,Zn,pa,Cc,wi,Ho,Vs,Ap,Xy;const Mn=class Mn{constructor(e){C(this,Vs);C(this,Jt,null);C(this,vi,!1);C(this,Ts,null);C(this,bh,null);C(this,yi,null);C(this,vr,null);C(this,_h,!1);C(this,xi,null);C(this,Zn,null);C(this,pa,null);C(this,Cc,null);C(this,wi,!1);S(this,Zn,e),S(this,wi,e._uiManager.useNewAltTextFlow),u(Mn,Ho)||S(Mn,Ho,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Mn._l10n??(Mn._l10n=e)}async render(){const e=S(this,Ts,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,bh,document.createElement("span"));e.append(t),u(this,wi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Mn,Ho).missing),t.setAttribute("data-l10n-id",u(Mn,Ho)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=u(this,Zn)._uiManager._signal;e.addEventListener("contextmenu",ps,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),u(this,Zn)._uiManager.editAltText(u(this,Zn)),u(this,wi)&&u(this,Zn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Vs,Ap)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,_h,!0),s(i))},{signal:r}),await k(this,Vs,Xy).call(this),e}finish(){u(this,Ts)&&(u(this,Ts).focus({focusVisible:u(this,_h)}),S(this,_h,!1))}isEmpty(){return u(this,wi)?u(this,Jt)===null:!u(this,Jt)&&!u(this,vi)}hasData(){return u(this,wi)?u(this,Jt)!==null||!!u(this,pa):this.isEmpty()}get guessedText(){return u(this,pa)}async setGuessedText(e){u(this,Jt)===null&&(S(this,pa,e),S(this,Cc,await Mn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,Vs,Xy).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,wi)||u(this,Jt)){(t=u(this,xi))==null||t.remove(),S(this,xi,null);return}if(!u(this,xi)){const r=S(this,xi,document.createElement("div"));r.className="noAltTextBadge",u(this,Zn).div.append(r)}u(this,xi).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Jt);return!e&&u(this,pa)===t&&(t=u(this,Cc)),{altText:t,decorative:u(this,vi),guessedText:u(this,pa),textWithDisclaimer:u(this,Cc)}}get data(){return{altText:u(this,Jt),decorative:u(this,vi)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(S(this,pa,r),S(this,Cc,s)),!(u(this,Jt)===e&&u(this,vi)===t)&&(i||(S(this,Jt,e),S(this,vi,t)),k(this,Vs,Xy).call(this))}toggle(e=!1){u(this,Ts)&&(!e&&u(this,vr)&&(clearTimeout(u(this,vr)),S(this,vr,null)),u(this,Ts).disabled=!e)}shown(){u(this,Zn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Vs,Ap)}})}destroy(){var e,t;(e=u(this,Ts))==null||e.remove(),S(this,Ts,null),S(this,bh,null),S(this,yi,null),(t=u(this,xi))==null||t.remove(),S(this,xi,null)}};Jt=new WeakMap,vi=new WeakMap,Ts=new WeakMap,bh=new WeakMap,yi=new WeakMap,vr=new WeakMap,_h=new WeakMap,xi=new WeakMap,Zn=new WeakMap,pa=new WeakMap,Cc=new WeakMap,wi=new WeakMap,Ho=new WeakMap,Vs=new WeakSet,Ap=function(){return u(this,Jt)&&"added"||u(this,Jt)===null&&this.guessedText&&"review"||"missing"},Xy=async function(){var s,i,a;const e=u(this,Ts);if(!e)return;if(u(this,wi)){if(e.classList.toggle("done",!!u(this,Jt)),e.setAttribute("data-l10n-id",u(Mn,Ho)[u(this,Vs,Ap)]),(s=u(this,bh))==null||s.setAttribute("data-l10n-id",u(Mn,Ho)[`${u(this,Vs,Ap)}-label`]),!u(this,Jt)){(i=u(this,yi))==null||i.remove();return}}else{if(!u(this,Jt)&&!u(this,vi)){e.classList.remove("done"),(a=u(this,yi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,yi);if(!t){S(this,yi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,Zn).id}`;const o=100,c=u(this,Zn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(u(this,vr)),S(this,vr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,vr,setTimeout(()=>{S(this,vr,null),u(this,yi).classList.add("show"),u(this,Zn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;u(this,vr)&&(clearTimeout(u(this,vr)),S(this,vr,null)),(d=u(this,yi))==null||d.classList.remove("show")},{signal:c})}u(this,vi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Jt)),t.parentNode||e.append(t);const r=u(this,Zn).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},C(Mn,Ho,null),q(Mn,"_l10n",null);let d0=Mn;var bi,kc,Rs,Xm,ma,Sh,Wo;class yy{constructor(e){C(this,bi,null);C(this,kc,!1);C(this,Rs,null);C(this,Xm,null);C(this,ma,null);C(this,Sh,null);C(this,Wo,!1);S(this,Rs,e),this.toolbar=null}render(){if(!u(this,Rs)._uiManager.hasCommentManager())return null;const e=S(this,bi,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=u(this,Rs)._uiManager._signal;e.addEventListener("contextmenu",ps,{signal:t}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:t});const r=s=>{s.preventDefault(),this.edit()};return e.addEventListener("click",r,{capture:!0,signal:t}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(S(this,kc,!0),r(s))},{signal:t}),e}edit(){const{bottom:e,left:t,right:r}=u(this,Rs).getClientDimensions(),s={top:e};u(this,Rs)._uiManager.direction==="ltr"?s.right=r:s.left=t,u(this,Rs)._uiManager.editComment(u(this,Rs),s)}finish(){u(this,bi)&&(u(this,bi).focus({focusVisible:u(this,kc)}),S(this,kc,!1))}isDeleted(){return u(this,Wo)||u(this,ma)===""}hasBeenEdited(){return this.isDeleted()||u(this,ma)!==u(this,Xm)}serialize(){return this.data}get data(){return{text:u(this,ma),date:u(this,Sh),deleted:u(this,Wo)}}set data(e){if(e===null){S(this,ma,""),S(this,Wo,!0);return}S(this,ma,e),S(this,Sh,new Date),S(this,Wo,!1)}setInitialText(e){S(this,Xm,e),this.data=e}toggle(e=!1){u(this,bi)&&(u(this,bi).disabled=!e)}shown(){}destroy(){var e;(e=u(this,bi))==null||e.remove(),S(this,bi,null),S(this,ma,""),S(this,Sh,null),S(this,Rs,null),S(this,kc,!1),S(this,Wo,!1)}}bi=new WeakMap,kc=new WeakMap,Rs=new WeakMap,Xm=new WeakMap,ma=new WeakMap,Sh=new WeakMap,Wo=new WeakMap;var Nh,Pc,Qm,Jm,Zm,eg,tg,ga,Tc,va,Rc,ya,zl,pO,mO,gO;const xA=class xA{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:a=null,signal:o}){C(this,zl);C(this,Nh);C(this,Pc,!1);C(this,Qm,null);C(this,Jm);C(this,Zm);C(this,eg);C(this,tg);C(this,ga,null);C(this,Tc);C(this,va,null);C(this,Rc);C(this,ya,null);S(this,Nh,e),S(this,Qm,r),S(this,Jm,t),S(this,Zm,s),S(this,eg,i),S(this,tg,a),S(this,Rc,new AbortController),S(this,Tc,AbortSignal.any([o,u(this,Rc).signal])),e.addEventListener("touchstart",k(this,zl,pO).bind(this),{passive:!1,signal:u(this,Tc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Gi.pixelRatio}destroy(){var e,t;(e=u(this,Rc))==null||e.abort(),S(this,Rc,null),(t=u(this,ga))==null||t.abort(),S(this,ga,null)}};Nh=new WeakMap,Pc=new WeakMap,Qm=new WeakMap,Jm=new WeakMap,Zm=new WeakMap,eg=new WeakMap,tg=new WeakMap,ga=new WeakMap,Tc=new WeakMap,va=new WeakMap,Rc=new WeakMap,ya=new WeakMap,zl=new WeakSet,pO=function(e){var s,i,a;if((s=u(this,Jm))!=null&&s.call(this))return;if(e.touches.length===1){if(u(this,ga))return;const o=S(this,ga,new AbortController),c=AbortSignal.any([u(this,Tc),o.signal]),d=u(this,Nh),h={capture:!0,signal:c,passive:!1},f=p=>{var m;p.pointerType==="touch"&&((m=u(this,ga))==null||m.abort(),S(this,ga,null))};d.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Dt(p),f(p))},h),d.addEventListener("pointerup",f,h),d.addEventListener("pointercancel",f,h);return}if(!u(this,ya)){S(this,ya,new AbortController);const o=AbortSignal.any([u(this,Tc),u(this,ya).signal]),c=u(this,Nh),d={signal:o,capture:!1,passive:!1};c.addEventListener("touchmove",k(this,zl,mO).bind(this),d);const h=k(this,zl,gO).bind(this);c.addEventListener("touchend",h,d),c.addEventListener("touchcancel",h,d),d.capture=!0,c.addEventListener("pointerdown",Dt,d),c.addEventListener("pointermove",Dt,d),c.addEventListener("pointercancel",Dt,d),c.addEventListener("pointerup",Dt,d),(i=u(this,Zm))==null||i.call(this)}if(Dt(e),e.touches.length!==2||(a=u(this,Qm))!=null&&a.call(this)){S(this,va,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),S(this,va,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},mO=function(e){var N;if(!u(this,va)||e.touches.length!==2)return;Dt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:a,screenY:o}=r,c=u(this,va),{touch0X:d,touch0Y:h,touch1X:f,touch1Y:p}=c,m=f-d,y=p-h,g=a-s,w=o-i,v=Math.hypot(g,w)||1,x=Math.hypot(m,y)||1;if(!u(this,Pc)&&Math.abs(x-v)<=xA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=i,c.touch1X=a,c.touch1Y=o,!u(this,Pc)){S(this,Pc,!0);return}const _=[(s+a)/2,(i+o)/2];(N=u(this,eg))==null||N.call(this,_,x,v)},gO=function(e){var t;e.touches.length>=2||(u(this,ya)&&(u(this,ya).abort(),S(this,ya,null),(t=u(this,tg))==null||t.call(this)),u(this,va)&&(Dt(e),S(this,va,null),S(this,Pc,!1)))};let u0=xA;var Mc,Ms,mt,ln,Eh,Vo,ng,Ic,cn,Dc,xa,Go,rg,Oc,yr,sg,Lc,wa,_i,Ah,jh,Zr,Fc,ig,j0,fe,X_,ag,Q_,Qy,vO,yO,J_,Jy,Z_,xO,wO,bO,eS,_O,tS,SO,NO,EO,nS,jp;const Ee=class Ee{constructor(e){C(this,fe);C(this,Mc,null);C(this,Ms,null);C(this,mt,null);C(this,ln,null);C(this,Eh,!1);C(this,Vo,null);C(this,ng,"");C(this,Ic,!1);C(this,cn,null);C(this,Dc,null);C(this,xa,null);C(this,Go,null);C(this,rg,"");C(this,Oc,!1);C(this,yr,null);C(this,sg,!1);C(this,Lc,!1);C(this,wa,!1);C(this,_i,null);C(this,Ah,0);C(this,jh,0);C(this,Zr,null);C(this,Fc,null);q(this,"isSelected",!1);q(this,"_isCopy",!1);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);C(this,ig,!1);C(this,j0,Ee._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ee.prototype._resizeWithKeyboard,t=Wd.TRANSLATE_SMALL,r=Wd.TRANSLATE_BIG;return Pe(this,"_resizerKeyboardManager",new Rv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Ee.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Pe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Zq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ee._l10n??(Ee._l10n=e),Ee._l10nResizer||(Ee._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ee._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Ee._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){tt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,ig)}set _isDraggable(e){var t;S(this,ig,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,j0)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,fe,jp).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Oc)?S(this,Oc,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){k(this,fe,X_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,yr)||S(this,yr,[this.x,this.y,this.width,this.height]),k(this,fe,X_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,yr)||S(this,yr,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[c,d]=this.getBaseTranslation();a+=c,o+=d;const{style:h}=r;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,yr)&&(u(this,yr)[0]!==this.x||u(this,yr)[1]!==this.y)}get _hasBeenResized(){return!!u(this,yr)&&(u(this,yr)[2]!==this.width||u(this,yr)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Ee,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:a,width:o,height:c}=this;if(o*=r,c*=s,i*=r,a*=s,this._mustFixPosition)switch(e){case 0:i=$n(i,0,r-o),a=$n(a,0,s-c);break;case 90:i=$n(i,0,r-c),a=$n(a,o,s);break;case 180:i=$n(i,o,r),a=$n(a,c,s);break;case 270:i=$n(i,c,r),a=$n(a,0,s-o);break}this.x=i/=r,this.y=a/=s;const[d,h]=this.getBaseTranslation();i+=d,a+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return k(r=Ee,ag,Q_).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return k(r=Ee,ag,Q_).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,u(this,Ic)||(i.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!u(this,Ic)&&t.endsWith("%");if(s&&i)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!u(this,Ic)&&!i&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,mt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Lc))return this._editToolbar;this._editToolbar=new B_(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,mt))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,mt)||(d0.initialize(Ee._l10n),S(this,mt,new d0(this)),u(this,Mc)&&(u(this,mt).data=u(this,Mc),S(this,Mc,null))),u(this,mt)}get altTextData(){var e;return(e=u(this,mt))==null?void 0:e.data}set altTextData(e){u(this,mt)&&(u(this,mt).data=e)}get guessedAltText(){var e;return(e=u(this,mt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,mt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,mt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,mt)&&!u(this,mt).isEmpty()}hasAltTextData(){var e;return((e=u(this,mt))==null?void 0:e.hasData())??!1}addCommentButton(){return u(this,ln)?u(this,ln):S(this,ln,new yy(this))}get commentColor(){return null}get comment(){const e=u(this,ln);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){u(this,ln)||S(this,ln,new yy(this)),u(this,ln).data=e}setCommentData(e){u(this,ln)||S(this,ln,new yy(this)),u(this,ln).setInitialText(e)}get hasEditedComment(){var e;return(e=u(this,ln))==null?void 0:e.hasBeenEdited()}async editComment(){u(this,ln)||S(this,ln,new yy(this)),u(this,ln).edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Eh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,fe,tS).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),nO(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,Fc)||S(this,Fc,new u0({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,fe,xO).bind(this),onPinching:k(this,fe,wO).bind(this),onPinchEnd:k(this,fe,bO).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,Oc,!0),this._isDraggable){k(this,fe,_O).call(this,e);return}k(this,fe,eS).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,_i)&&clearTimeout(u(this,_i)),S(this,_i,setTimeout(()=>{var e;S(this,_i,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,c]=this.pageTranslation,d=e/s,h=t/s,f=this.x*i,p=this.y*a,m=this.width*i,y=this.height*a;switch(r){case 0:return[f+d+o,a-p-h-y+c,f+d+m+o,a-p-h+c];case 90:return[f+h+o,a-p+d+c,f+h+y+o,a-p+d+m+c];case 180:return[f-d-m+o,a-p+h+c,f-d+o,a-p+h+y+c];case 270:return[f-h-y+o,a-p-d-m+c,f-h+o,a-p-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,o=i-r,c=a-s;switch(this.rotation){case 0:return[r,t-a,o,c];case 90:return[r,t-s,c,o];case 180:return[i,t-s,o,c];case 270:return[i,t-a,c,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,Lc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,Lc,!1),!0):!1}isInEditMode(){return u(this,Lc)}shouldGetKeyboardEvents(){return u(this,wa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&s>0&&e<i&&r>0}rebuild(){k(this,fe,tS).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){tt("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});s.rotation=e.rotation,S(s,Mc,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,a]=s.pageDimensions,[o,c,d,h]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=c/a,s.width=d/i,s.height=h/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,Go))==null||e.abort(),S(this,Go,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,_i)&&(clearTimeout(u(this,_i)),S(this,_i,null)),k(this,fe,jp).call(this),this.removeEditToolbar(),u(this,Zr)){for(const r of u(this,Zr).values())clearTimeout(r);S(this,Zr,null)}this.parent=null,(t=u(this,Fc))==null||t.destroy(),S(this,Fc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,fe,vO).call(this),u(this,cn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,xa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,cn).children;if(!u(this,Ms)){S(this,Ms,Array.from(t));const a=k(this,fe,SO).bind(this),o=k(this,fe,NO).bind(this),c=this._uiManager._signal;for(const d of u(this,Ms)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",o,{signal:c}),d.addEventListener("focus",k(this,fe,EO).bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",Ee._l10nResizer[h])}}const r=u(this,Ms)[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,Ms).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)u(this,cn).append(u(this,cn).firstChild);else if(i>s)for(let o=0;o<i-s;o++)u(this,cn).firstChild.before(u(this,cn).lastChild);let a=0;for(const o of t){const d=u(this,Ms)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ee._l10nResizer[d])}}k(this,fe,nS).call(this,0),S(this,wa,!0),u(this,cn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,wa)&&k(this,fe,Z_).call(this,u(this,rg),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,fe,jp).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=u(this,mt))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=u(this,cn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=u(this,mt))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,sg)}set isEditing(e){S(this,sg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){S(this,Ic,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,Zr)||S(this,Zr,new Map);const{action:r}=e;let s=u(this,Zr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),u(this,Zr).delete(r),u(this,Zr).size===0&&S(this,Zr,null)},Ee._telemetryTimeout),u(this,Zr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,Eh,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Eh,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Mc=new WeakMap,Ms=new WeakMap,mt=new WeakMap,ln=new WeakMap,Eh=new WeakMap,Vo=new WeakMap,ng=new WeakMap,Ic=new WeakMap,cn=new WeakMap,Dc=new WeakMap,xa=new WeakMap,Go=new WeakMap,rg=new WeakMap,Oc=new WeakMap,yr=new WeakMap,sg=new WeakMap,Lc=new WeakMap,wa=new WeakMap,_i=new WeakMap,Ah=new WeakMap,jh=new WeakMap,Zr=new WeakMap,Fc=new WeakMap,ig=new WeakMap,j0=new WeakMap,fe=new WeakSet,X_=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ag=new WeakSet,Q_=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Qy=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},vO=function(){if(u(this,cn))return;S(this,cn,document.createElement("div")),u(this,cn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");u(this,cn).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",k(this,fe,yO).bind(this,r),{signal:t}),s.addEventListener("contextmenu",ps,{signal:t}),s.tabIndex=-1}this.div.prepend(u(this,cn))},yO=function(e,t){var h;t.preventDefault();const{isMac:r}=yn.platform;if(t.button!==0||t.ctrlKey&&r)return;(h=u(this,mt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,S(this,Dc,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,fe,Z_).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Dt,{passive:!1,signal:a}),window.addEventListener("contextmenu",ps,{signal:a}),S(this,xa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=u(this,mt))==null||f.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=c,k(this,fe,Jy).call(this)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},J_=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*r,a*s),this.fixAndSetPosition(),this._onResized()},Jy=function(){if(!u(this,xa))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=u(this,xa);S(this,xa,null);const i=this.x,a=this.y,o=this.width,c=this.height;i===e&&a===t&&o===r&&c===s||this.addCommands({cmd:k(this,fe,J_).bind(this,i,a,o,c),undo:k(this,fe,J_).bind(this,e,t,r,s),mustExec:!0})},Z_=function(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,c=this.height,d=Ee.MIN_SIZE/r,h=Ee.MIN_SIZE/s,f=k(this,fe,Qy).call(this,this.rotation),p=(B,F)=>[f[0]*B+f[2]*F,f[1]*B+f[3]*F],m=k(this,fe,Qy).call(this,360-this.rotation),y=(B,F)=>[m[0]*B+m[2]*F,m[1]*B+m[3]*F];let g,w,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(B,F)=>[0,0],w=(B,F)=>[B,F];break;case"topMiddle":g=(B,F)=>[B/2,0],w=(B,F)=>[B/2,F];break;case"topRight":v=!0,g=(B,F)=>[B,0],w=(B,F)=>[0,F];break;case"middleRight":x=!0,g=(B,F)=>[B,F/2],w=(B,F)=>[0,F/2];break;case"bottomRight":v=!0,g=(B,F)=>[B,F],w=(B,F)=>[0,0];break;case"bottomMiddle":g=(B,F)=>[B/2,F],w=(B,F)=>[B/2,0];break;case"bottomLeft":v=!0,g=(B,F)=>[0,F],w=(B,F)=>[B,0];break;case"middleLeft":x=!0,g=(B,F)=>[0,F/2],w=(B,F)=>[B,F/2];break}const _=g(o,c),N=w(o,c);let E=p(...N);const A=Ee._round(i+E[0]),j=Ee._round(a+E[1]);let P=1,T=1,R,I;if(t.fromKeyboard)({deltaX:R,deltaY:I}=t);else{const{screenX:B,screenY:F}=t,[D,M]=u(this,Dc);[R,I]=this.screenToPageTranslation(B-D,F-M),u(this,Dc)[0]=B,u(this,Dc)[1]=F}if([R,I]=y(R/r,I/s),v){const B=Math.hypot(o,c);P=T=Math.max(Math.min(Math.hypot(N[0]-_[0]-R,N[1]-_[1]-I)/B,1/o,1/c),d/o,h/c)}else x?P=$n(Math.abs(N[0]-_[0]-R),d,1)/o:T=$n(Math.abs(N[1]-_[1]-I),h,1)/c;const O=Ee._round(o*P),z=Ee._round(c*T);E=p(...w(O,z));const L=A-E[0],V=j-E[1];u(this,yr)||S(this,yr,[this.x,this.y,this.width,this.height]),this.width=O,this.height=z,this.x=L,this.y=V,this.setDims(r*O,s*z),this.fixAndSetPosition(),this._onResizing()},xO=function(){var e;S(this,xa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,mt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},wO=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const a=k(this,fe,Qy).call(this,this.rotation),o=(A,j)=>[a[0]*A+a[2]*j,a[1]*A+a[3]*j],[c,d]=this.parentDimensions,h=this.x,f=this.y,p=this.width,m=this.height,y=Ee.MIN_SIZE/c,g=Ee.MIN_SIZE/d;i=Math.max(Math.min(i,1/p,1/m),y/p,g/m);const w=Ee._round(p*i),v=Ee._round(m*i);if(w===p&&v===m)return;u(this,yr)||S(this,yr,[h,f,p,m]);const x=o(p/2,m/2),_=Ee._round(h+x[0]),N=Ee._round(f+x[1]),E=o(w/2,v/2);this.x=_-E[0],this.y=N-E[1],this.width=w,this.height=v,this.setDims(c*w,d*v),this.fixAndSetPosition(),this._onResizing()},bO=function(){var e;(e=u(this,mt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,fe,Jy).call(this)},eS=function(e){const{isMac:t}=yn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},_O=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:i},o=d=>{s.abort(),S(this,Vo,null),S(this,Oc,!1),this._uiManager.endDragSession()||k(this,fe,eS).call(this,d),r&&this._onStopDragging()};t&&(S(this,Ah,e.clientX),S(this,jh,e.clientY),S(this,Vo,e.pointerId),S(this,ng,e.pointerType),window.addEventListener("pointermove",d=>{r||(r=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:p}=d;if(p!==u(this,Vo)){Dt(d);return}const[m,y]=this.screenToPageTranslation(h-u(this,Ah),f-u(this,jh));S(this,Ah,h),S(this,jh,f),this._uiManager.dragSelectedEditors(m,y)},a),window.addEventListener("touchmove",Dt,a),window.addEventListener("pointerdown",d=>{d.pointerType===u(this,ng)&&(u(this,Fc)||d.isPrimary)&&o(d),Dt(d)},a));const c=d=>{if(!u(this,Vo)||u(this,Vo)===d.pointerId){o(d);return}Dt(d)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},tS=function(){if(u(this,Go)||!this.div)return;S(this,Go,new AbortController);const e=this._uiManager.combinedSignal(u(this,Go));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},SO=function(e){Ee._resizerKeyboardManager.exec(this,e)},NO=function(e){var t;u(this,wa)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,cn)&&k(this,fe,jp).call(this)},EO=function(e){S(this,rg,u(this,wa)?e:"")},nS=function(e){if(u(this,Ms))for(const t of u(this,Ms))t.tabIndex=e},jp=function(){S(this,wa,!1),k(this,fe,nS).call(this,-1),k(this,fe,Jy).call(this)},C(Ee,ag),q(Ee,"_l10n",null),q(Ee,"_l10nResizer",null),q(Ee,"_borderLineWidth",-1),q(Ee,"_colorManager",new H_),q(Ee,"_zIndex",1),q(Ee,"_telemetryTimeout",1e3);let at=Ee;class Zq extends at{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const uk=3285377520,qr=4294901760,ai=65535;class AO{constructor(e){this.h1=e?e&4294967295:uk,this.h2=e?e&4294967295:uk}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,w=e.length;g<w;g++){const v=e.charCodeAt(g);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,c=0,d=this.h1,h=this.h2;const f=3432918353,p=461845907,m=f&ai,y=p&ai;for(let g=0;g<s;g++)g&1?(o=a[g],o=o*f&qr|o*m&ai,o=o<<15|o>>>17,o=o*p&qr|o*y&ai,d^=o,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[g],c=c*f&qr|c*m&ai,c=c<<15|c>>>17,c=c*p&qr|c*y&ai,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*f&qr|o*m&ai,o=o<<15|o>>>17,o=o*p&qr|o*y&ai,s&1?d^=o:h^=o}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&qr|e*36045&ai,t=t*4283543511&qr|((t<<16|e>>>16)*2950163797&qr)>>>16,e^=t>>>1,e=e*444984403&qr|e*60499&ai,t=t*3301882366&qr|((t<<16|e>>>16)*3120437893&qr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const rS=Object.freeze({map:null,hash:"",transfer:void 0});var $c,zc,dn,C0,jO;class YE{constructor(){C(this,C0);C(this,$c,!1);C(this,zc,null);C(this,dn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=u(this,dn).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return u(this,dn).get(e)}remove(e){if(u(this,dn).delete(e),u(this,dn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,dn).values())if(t instanceof at)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=u(this,dn).get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,u(this,dn).set(e,t);s&&k(this,C0,jO).call(this),t instanceof at&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,dn).has(e)}get size(){return u(this,dn).size}resetModified(){u(this,$c)&&(S(this,$c,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new CO(this)}get serializable(){if(u(this,dn).size===0)return rS;const e=new Map,t=new AO,r=[],s=Object.create(null);let i=!1;for(const[a,o]of u(this,dn)){const c=o instanceof at?o.serialize(!1,s):o;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:rS}get editorStats(){let e=null;const t=new Map;for(const r of u(this,dn).values()){if(!(r instanceof at))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[o,c]of Object.entries(s)){if(o==="type")continue;let d=a.get(o);d||(d=new Map,a.set(o,d));const h=d.get(c)??0;d.set(c,h+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){S(this,zc,null)}get modifiedIds(){if(u(this,zc))return u(this,zc);const e=[];for(const t of u(this,dn).values())!(t instanceof at)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return S(this,zc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,dn).entries()}}$c=new WeakMap,zc=new WeakMap,dn=new WeakMap,C0=new WeakSet,jO=function(){u(this,$c)||(S(this,$c,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var og;class CO extends YE{constructor(t){super();C(this,og);const{map:r,hash:s,transfer:i}=t.serializable,a=structuredClone(r,i?{transfer:i}:null);S(this,og,{map:a,hash:s,transfer:i})}get print(){tt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,og)}get modifiedIds(){return Pe(this,"modifiedIds",{ids:new Set,hash:""})}}og=new WeakMap;var Ch;class e7{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,Ch,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Ch).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||u(this,Ch).has(e.loadedName))){if(Ft(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:a}=e,o=new FontFace(s,i,a);this.addNativeFontFace(o);try{await o.load(),u(this,Ch).add(s),r==null||r(e)}catch{ye(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}tt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw ye(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Pe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Pe(this,"isSyncFontLoadingSupported",Fn||yn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ft(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Pe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(N,E){return N.charCodeAt(E)<<24|N.charCodeAt(E+1)<<16|N.charCodeAt(E+2)<<8|N.charCodeAt(E+3)&255}function s(N,E,A,j){const P=N.substring(0,E),T=N.substring(E+A);return P+j+T}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let d=0;function h(N,E){if(++d>30){ye("Load test font never loaded."),E();return}if(c.font="30px "+N,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(h.bind(null,N,E))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const y=16,g=1482184792;let w=r(p,y);for(i=0,a=f.length-3;i<a;i+=4)w=w-g+r(f,i)|0;i<f.length&&(w=w-g+r(f+"XXX",i)|0),p=s(p,y,4,Fq(w));const v=`url(data:font/opentype;base64,${btoa(p)});`,x=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(x);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const N of[e.loadedName,f]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=N,_.append(E)}this._document.body.append(_),h(f,()=>{_.remove(),t.complete()})}}Ch=new WeakMap;class t7{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${YD(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(a){ye(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}function n7(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Fn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function r7(n){if(Fn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return kv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function xy(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const sS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,s7=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",i7=Hq.bind(null,sS,s7);var ba,k0;class a7{constructor(){C(this,ba,new Map);C(this,k0,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};u(this,k0).then(()=>{for(const[s]of u(this,ba))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){ye("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}u(this,ba).set(t,s)}removeEventListener(e,t){const r=u(this,ba).get(t);r==null||r(),u(this,ba).delete(t)}terminate(){for(const[,e]of u(this,ba))e==null||e();u(this,ba).clear()}}ba=new WeakMap,k0=new WeakMap;const wy={DATA:1,ERROR:2},Mt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hk(){}function Qn(n){if(n instanceof Ll||n instanceof F_||n instanceof lk||n instanceof l0||n instanceof Gb)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||tt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ll(n.message);case"InvalidPDFException":return new F_(n.message);case"PasswordException":return new lk(n.message,n.code);case"ResponseException":return new l0(n.message,n.status,n.missing);case"UnknownErrorException":return new Gb(n.message,n.details)}return new Gb(n.message,n.toString())}var kh,cs,kO,PO,TO,Zy;class Cp{constructor(e,t,r){C(this,cs);C(this,kh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",k(this,cs,kO).bind(this),{signal:u(this,kh).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:d.desiredSize},s),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,c.postMessage({sourceName:a,targetName:o,stream:Mt.PULL,streamId:i,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Ft(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:o,stream:Mt.CANCEL,streamId:i,reason:Qn(d)}),h.promise}},r)}destroy(){var e;(e=u(this,kh))==null||e.abort(),S(this,kh,null)}}kh=new WeakMap,cs=new WeakSet,kO=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,cs,TO).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===wy.DATA)s.resolve(e.data);else if(e.callback===wy.ERROR)s.reject(Qn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:wy.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:wy.ERROR,callbackId:e.callbackId,reason:Qn(a)})});return}if(e.streamId){k(this,cs,PO).call(this,e);return}t(e.data)},PO=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],c={enqueue(d,h=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=h,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:Mt.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Mt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){Ft(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Mt.ERROR,streamId:t,reason:Qn(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(o,e.data,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Mt.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:r,targetName:s,stream:Mt.START_COMPLETE,streamId:t,reason:Qn(d)})})},TO=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Mt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Qn(e.reason));break;case Mt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Qn(e.reason));break;case Mt.PULL:if(!o){i.postMessage({sourceName:r,targetName:s,stream:Mt.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||hk).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Mt.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:r,targetName:s,stream:Mt.PULL_COMPLETE,streamId:t,reason:Qn(d)})});break;case Mt.ENQUEUE:if(Ft(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Mt.CLOSE:if(Ft(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),k(this,cs,Zy).call(this,a,t);break;case Mt.ERROR:Ft(a,"error should have stream controller"),a.controller.error(Qn(e.reason)),k(this,cs,Zy).call(this,a,t);break;case Mt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Qn(e.reason)),k(this,cs,Zy).call(this,a,t);break;case Mt.CANCEL:if(!o)break;const c=Qn(e.reason);Promise.try(o.onCancel||hk,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Mt.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:r,targetName:s,stream:Mt.CANCEL_COMPLETE,streamId:t,reason:Qn(d)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Zy=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var lg;class RO{constructor({enableHWA:e=!1}){C(this,lg,!1);S(this,lg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!u(this,lg)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){tt("Abstract method `_createCanvas` called.")}}lg=new WeakMap;class o7 extends RO{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class MO{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class fk extends MO{async _fetch(e){const t=await Pv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):kv(t)}}class IO{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var Bc,Ph,_a,Sa,An,Uc,Hc,ne,Sn,kp,bu,ex,_u,DO,iS,Su,Pp,Tp,aS,Rp;class l7 extends IO{constructor({docId:t,ownerDocument:r=globalThis.document}){super();C(this,ne);C(this,Bc);C(this,Ph);C(this,_a);C(this,Sa);C(this,An);C(this,Uc);C(this,Hc,0);S(this,Sa,t),S(this,An,r)}addFilter(t){if(!t)return"none";let r=u(this,ne,Sn).get(t);if(r)return r;const[s,i,a]=k(this,ne,ex).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(r=u(this,ne,Sn).get(o),r)return u(this,ne,Sn).set(t,r),r;const c=`g_${u(this,Sa)}_transfer_map_${Xt(this,Hc)._++}`,d=k(this,ne,_u).call(this,c);u(this,ne,Sn).set(t,d),u(this,ne,Sn).set(o,d);const h=k(this,ne,Su).call(this,c);return k(this,ne,Tp).call(this,s,i,a,h),d}addHCMFilter(t,r){var y;const s=`${t}-${r}`,i="base";let a=u(this,ne,kp).get(i);if((a==null?void 0:a.key)===s||(a?((y=a.filter)==null||y.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},u(this,ne,kp).set(i,a)),!t||!r))return a.url;const o=k(this,ne,Rp).call(this,t);t=ue.makeHexColor(...o);const c=k(this,ne,Rp).call(this,r);if(r=ue.makeHexColor(...c),u(this,ne,bu).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return a.url;const d=new Array(256);for(let g=0;g<=255;g++){const w=g/255;d[g]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=d.join(","),f=`g_${u(this,Sa)}_hcm_filter`,p=a.filter=k(this,ne,Su).call(this,f);k(this,ne,Tp).call(this,h,h,h,p),k(this,ne,iS).call(this,p);const m=(g,w)=>{const v=o[g]/255,x=c[g]/255,_=new Array(w+1);for(let N=0;N<=w;N++)_[N]=v+N/w*(x-v);return _.join(",")};return k(this,ne,Tp).call(this,m(0,5),m(1,5),m(2,5),p),a.url=k(this,ne,_u).call(this,f),a.url}addAlphaFilter(t){let r=u(this,ne,Sn).get(t);if(r)return r;const[s]=k(this,ne,ex).call(this,[t]),i=`alpha_${s}`;if(r=u(this,ne,Sn).get(i),r)return u(this,ne,Sn).set(t,r),r;const a=`g_${u(this,Sa)}_alpha_map_${Xt(this,Hc)._++}`,o=k(this,ne,_u).call(this,a);u(this,ne,Sn).set(t,o),u(this,ne,Sn).set(i,o);const c=k(this,ne,Su).call(this,a);return k(this,ne,aS).call(this,s,c),o}addLuminosityFilter(t){let r=u(this,ne,Sn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=k(this,ne,ex).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=u(this,ne,Sn).get(i),r)return u(this,ne,Sn).set(t,r),r;const a=`g_${u(this,Sa)}_luminosity_map_${Xt(this,Hc)._++}`,o=k(this,ne,_u).call(this,a);u(this,ne,Sn).set(t,o),u(this,ne,Sn).set(i,o);const c=k(this,ne,Su).call(this,a);return k(this,ne,DO).call(this,c),t&&k(this,ne,aS).call(this,s,c),o}addHighlightHCMFilter(t,r,s,i,a){var x;const o=`${r}-${s}-${i}-${a}`;let c=u(this,ne,kp).get(t);if((c==null?void 0:c.key)===o||(c?((x=c.filter)==null||x.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},u(this,ne,kp).set(t,c)),!r||!s))return c.url;const[d,h]=[r,s].map(k(this,ne,Rp).bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[i,a].map(k(this,ne,Rp).bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),u(this,ne,bu).style.color="";const g=(_,N,E)=>{const A=new Array(256),j=(p-f)/E,P=_/255,T=(N-_)/(255*E);let R=0;for(let I=0;I<=E;I++){const O=Math.round(f+I*j),z=P+I*T;for(let L=R;L<=O;L++)A[L]=z;R=O+1}for(let I=R;I<256;I++)A[I]=A[R-1];return A.join(",")},w=`g_${u(this,Sa)}_hcm_${t}_filter`,v=c.filter=k(this,ne,Su).call(this,w);return k(this,ne,iS).call(this,v),k(this,ne,Tp).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),c.url=k(this,ne,_u).call(this,w),c.url}destroy(t=!1){var r,s,i,a;t&&((r=u(this,Uc))!=null&&r.size)||((s=u(this,_a))==null||s.parentNode.parentNode.remove(),S(this,_a,null),(i=u(this,Ph))==null||i.clear(),S(this,Ph,null),(a=u(this,Uc))==null||a.clear(),S(this,Uc,null),S(this,Hc,0))}}Bc=new WeakMap,Ph=new WeakMap,_a=new WeakMap,Sa=new WeakMap,An=new WeakMap,Uc=new WeakMap,Hc=new WeakMap,ne=new WeakSet,Sn=function(){return u(this,Ph)||S(this,Ph,new Map)},kp=function(){return u(this,Uc)||S(this,Uc,new Map)},bu=function(){if(!u(this,_a)){const t=u(this,An).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=u(this,An).createElementNS(ta,"svg");s.setAttribute("width",0),s.setAttribute("height",0),S(this,_a,u(this,An).createElementNS(ta,"defs")),t.append(s),s.append(u(this,_a)),u(this,An).body.append(t)}return u(this,_a)},ex=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=d[p]/255;const f=h.join(",");return[f,f,f]}const[r,s,i]=t,a=new Array(256),o=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=r[d]/255,o[d]=s[d]/255,c[d]=i[d]/255;return[a.join(","),o.join(","),c.join(",")]},_u=function(t){if(u(this,Bc)===void 0){S(this,Bc,"");const r=u(this,An).URL;r!==u(this,An).baseURI&&(Iw(r)?ye('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,Bc,GD(r,"")))}return`url(${u(this,Bc)}#${t})`},DO=function(t){const r=u(this,An).createElementNS(ta,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},iS=function(t){const r=u(this,An).createElementNS(ta,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Su=function(t){const r=u(this,An).createElementNS(ta,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),u(this,ne,bu).append(r),r},Pp=function(t,r,s){const i=u(this,An).createElementNS(ta,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Tp=function(t,r,s,i){const a=u(this,An).createElementNS(ta,"feComponentTransfer");i.append(a),k(this,ne,Pp).call(this,a,"feFuncR",t),k(this,ne,Pp).call(this,a,"feFuncG",r),k(this,ne,Pp).call(this,a,"feFuncB",s)},aS=function(t,r){const s=u(this,An).createElementNS(ta,"feComponentTransfer");r.append(s),k(this,ne,Pp).call(this,s,"feFuncA",t)},Rp=function(t){return u(this,ne,bu).style.color=t,Dw(getComputedStyle(u(this,ne,bu)).getPropertyValue("color"))};class OO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class pk extends OO{async _fetch(e){const t=await Pv(e,"arraybuffer");return new Uint8Array(t)}}class LO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){tt("Abstract method `_fetch` called.")}}class mk extends LO{async _fetch(e){const t=await Pv(e,"arraybuffer");return new Uint8Array(t)}}Fn&&ye("Please use the `legacy` build in Node.js environments.");async function XE(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class c7 extends IO{}class d7 extends RO{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class u7 extends MO{async _fetch(e){return XE(e)}}class h7 extends OO{async _fetch(e){return XE(e)}}class f7 extends LO{async _fetch(e){return XE(e)}}const pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function oS(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class QE{isModifyingCurrentTransform(){return!1}getPattern(){tt("Abstract method `getPattern` called.")}}class p7 extends QE{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===pn.STROKE||s===pn.FILL){const a=t.current.getClippedPathBoundingBox(s,wt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",o,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),r=ue.transform(r,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),oS(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else oS(e,this._bbox),i=this._createGradient(e);return i}}function Yb(n,e,t,r,s,i,a,o){const c=e.coords,d=e.colors,h=n.data,f=n.width*4;let p;c[t+1]>c[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p),c[r+1]>c[s+1]&&(p=r,r=s,s=p,p=a,a=o,o=p),c[t+1]>c[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p);const m=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,g=(c[r]+e.offsetX)*e.scaleX,w=(c[r+1]+e.offsetY)*e.scaleY,v=(c[s]+e.offsetX)*e.scaleX,x=(c[s+1]+e.offsetY)*e.scaleY;if(y>=x)return;const _=d[i],N=d[i+1],E=d[i+2],A=d[a],j=d[a+1],P=d[a+2],T=d[o],R=d[o+1],I=d[o+2],O=Math.round(y),z=Math.round(x);let L,V,B,F,D,M,U,X;for(let $=O;$<=z;$++){if($<w){const H=$<y?0:(y-$)/(y-w);L=m-(m-g)*H,V=_-(_-A)*H,B=N-(N-j)*H,F=E-(E-P)*H}else{let H;$>x?H=1:w===x?H=0:H=(w-$)/(w-x),L=g-(g-v)*H,V=A-(A-T)*H,B=j-(j-R)*H,F=P-(P-I)*H}let W;$<y?W=0:$>x?W=1:W=(y-$)/(y-x),D=m-(m-v)*W,M=_-(_-T)*W,U=N-(N-R)*W,X=E-(E-I)*W;const Q=Math.round(Math.min(L,D)),K=Math.round(Math.max(L,D));let le=f*$+Q*4;for(let H=Q;H<=K;H++)W=(L-H)/(L-D),W<0?W=0:W>1&&(W=1),h[le++]=V-(V-M)*W|0,h[le++]=B-(B-U)*W|0,h[le++]=F-(F-X)*W|0,h[le++]=255}}function m7(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(r.length/o)-1,d=o-1;for(i=0;i<c;i++){let h=i*o;for(let f=0;f<d;f++,h++)Yb(n,t,r[h],r[h+1],r[h+o],s[h],s[h+1],s[h+o]),Yb(n,t,r[h+o+1],r[h+1],r[h+o],s[h+o+1],s[h+1],s[h+o])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)Yb(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class g7 extends QE{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=d/f,y=h/p,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/m,scaleY:1/y},w=f+2*2,v=p+2*2,x=r.getCanvas("mesh",w,v),_=x.context,N=_.createImageData(f,p);if(t){const A=N.data;for(let j=0,P=A.length;j<P;j+=4)A[j]=t[0],A[j+1]=t[1],A[j+2]=t[2],A[j+3]=255}for(const A of this._figures)m7(N,A,g);return _.putImageData(N,2,2),{canvas:x.canvas,offsetX:o-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){oS(e,this._bbox);const i=new Float32Array(2);if(s===pn.SHADING)ue.singularValueDecompose2dScale(wt(e),i);else if(this.matrix){ue.singularValueDecompose2dScale(this.matrix,i);const[o,c]=i;ue.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=o,i[1]*=c}else ue.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,s===pn.SHADING?null:this._background,t.cachedCanvases);return s!==pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class v7 extends QE{getPattern(){return"hotpink"}}function y7(n){switch(n[0]){case"RadialAxial":return new p7(n);case"Mesh":return new g7(n);case"Dummy":return new v7}throw new Error(`Unknown IR type: ${n[0]}`)}const gk={COLORED:1,UNCOLORED:2},P0=class P0{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:o}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),Mw("TilingType: "+i);const h=t[0],f=t[1],p=t[2],m=t[3],y=p-h,g=m-f,w=new Float32Array(2);ue.singularValueDecompose2dScale(this.matrix,w);const[v,x]=w;ue.singularValueDecompose2dScale(this.baseTransform,w);const _=v*w[0],N=x*w[1];let E=y,A=g,j=!1,P=!1;const T=Math.ceil(c*_),R=Math.ceil(d*N),I=Math.ceil(y*_),O=Math.ceil(g*N);T>=I?E=c:j=!0,R>=O?A=d:P=!0;const z=this.getSizeAndScale(E,this.ctx.canvas.width,_),L=this.getSizeAndScale(A,this.ctx.canvas.height,N),V=e.cachedCanvases.getCanvas("pattern",z.size,L.size),B=V.context,F=o.createCanvasGraphics(B);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,s,a),B.translate(-z.scale*h,-L.scale*f),F.transform(z.scale,0,0,L.scale,0,0),B.save(),this.clipBbox(F,h,f,p,m),F.baseTransform=wt(F.ctx),F.executeOperatorList(r),F.endDrawing(),B.restore(),j||P){const D=V.canvas;j&&(E=c),P&&(A=d);const M=this.getSizeAndScale(E,this.ctx.canvas.width,_),U=this.getSizeAndScale(A,this.ctx.canvas.height,N),X=M.size,$=U.size,W=e.cachedCanvases.getCanvas("pattern-workaround",X,$),Q=W.context,K=j?Math.floor(y/c):0,le=P?Math.floor(g/d):0;for(let H=0;H<=K;H++)for(let me=0;me<=le;me++)Q.drawImage(D,X*H,$*me,X,$,0,0,X,$);return{canvas:W.canvas,scaleX:M.scale,scaleY:U.scale,offsetX:h,offsetY:f}}return{canvas:V.canvas,scaleX:z.scale,scaleY:L.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const s=Math.max(P0.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,o=i-r;e.ctx.rect(t,r,a,o),ue.axialAlignedBoundingBox([t,r,s,i],wt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case gk.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;s.fillStyle=i.fillColor=a,s.strokeStyle=i.strokeColor=o;break;case gk.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new Lq(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s){let i=r;s!==pn.SHADING&&(i=ue.transform(i,t.baseTransform),this.matrix&&(i=ue.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(i);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(o),c}};q(P0,"MAX_PATTERN_SIZE",3e3);let lS=P0;function x7({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=yn.isLittleEndian?4278190080:255,[c,d]=a?[i,o]:[o,i],h=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<s;y++){for(const w=e+h;e<w;e++){const v=e<p?n[e]:255;t[m++]=v&128?d:c,t[m++]=v&64?d:c,t[m++]=v&32?d:c,t[m++]=v&16?d:c,t[m++]=v&8?d:c,t[m++]=v&4?d:c,t[m++]=v&2?d:c,t[m++]=v&1?d:c}if(f===0)continue;const g=e<p?n[e++]:255;for(let w=0;w<f;w++)t[m++]=g&1<<7-w?d:c}return{srcPos:e,destPos:m}}const vk=16,yk=100,w7=15,xk=10,rr=16,Xb=new DOMMatrix,Mr=new Float32Array(2),zu=new Float32Array([1/0,1/0,-1/0,-1/0]);function b7(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,a,o){e.transform(t,r,s,i,a,o),this.__originalTransform(t,r,s,i,a,o)},n.setTransform=function(t,r,s,i,a,o){e.setTransform(t,r,s,i,a,o),this.__originalSetTransform(t,r,s,i,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,o){e.bezierCurveTo(t,r,s,i,a,o),this.__originalBezierCurveTo(t,r,s,i,a,o)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class _7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function by(n,e,t,r,s,i,a,o,c,d){const[h,f,p,m,y,g]=wt(n);if(f===0&&p===0){const x=a*h+y,_=Math.round(x),N=o*m+g,E=Math.round(N),A=(a+c)*h+y,j=Math.abs(Math.round(A)-_)||1,P=(o+d)*m+g,T=Math.abs(Math.round(P)-E)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),_,E),n.drawImage(e,t,r,s,i,0,0,j,T),n.setTransform(h,f,p,m,y,g),[j,T]}if(h===0&&m===0){const x=o*p+y,_=Math.round(x),N=a*f+g,E=Math.round(N),A=(o+d)*p+y,j=Math.abs(Math.round(A)-_)||1,P=(a+c)*f+g,T=Math.abs(Math.round(P)-E)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,_,E),n.drawImage(e,t,r,s,i,0,0,T,j),n.setTransform(h,f,p,m,y,g),[T,j]}n.drawImage(e,t,r,s,i,a,o,c,d);const w=Math.hypot(h,f),v=Math.hypot(p,m);return[w*c,v*d]}class wk{constructor(e,t){q(this,"alphaIsShape",!1);q(this,"fontSize",0);q(this,"fontSizeScale",1);q(this,"textMatrix",null);q(this,"textMatrixScale",1);q(this,"fontMatrix",L_);q(this,"leading",0);q(this,"x",0);q(this,"y",0);q(this,"lineX",0);q(this,"lineY",0);q(this,"charSpacing",0);q(this,"wordSpacing",0);q(this,"textHScale",1);q(this,"textRenderingMode",_n.FILL);q(this,"textRise",0);q(this,"fillColor","#000000");q(this,"strokeColor","#000000");q(this,"patternFill",!1);q(this,"patternStroke",!1);q(this,"fillAlpha",1);q(this,"strokeAlpha",1);q(this,"lineWidth",1);q(this,"activeSMask",null);q(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=zu.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=pn.FILL,t=null){const r=this.minMax.slice();if(e===pn.STROKE){t||tt("Stroke bounding box must include transform."),ue.singularValueDecompose2dScale(t,Mr);const s=Mr[0]*this.lineWidth/2,i=Mr[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=ue.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(zu,0)}getClippedPathBoundingBox(e=pn.FILL,t=null){return ue.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function bk(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%rr,i=(t-s)/rr,a=s===0?i:i+1,o=n.createImageData(r,rr);let c=0,d;const h=e.data,f=o.data;let p,m,y,g;if(e.kind===Vy.GRAYSCALE_1BPP){const w=h.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),x=v.length,_=r+7>>3,N=4294967295,E=yn.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(y=p<i?rr:s,d=0,m=0;m<y;m++){const A=w-c;let j=0;const P=A>_?r:A*8-7,T=P&-8;let R=0,I=0;for(;j<T;j+=8)I=h[c++],v[d++]=I&128?N:E,v[d++]=I&64?N:E,v[d++]=I&32?N:E,v[d++]=I&16?N:E,v[d++]=I&8?N:E,v[d++]=I&4?N:E,v[d++]=I&2?N:E,v[d++]=I&1?N:E;for(;j<P;j++)R===0&&(I=h[c++],R=128),v[d++]=I&R?N:E,R>>=1}for(;d<x;)v[d++]=0;n.putImageData(o,0,p*rr)}}else if(e.kind===Vy.RGBA_32BPP){for(m=0,g=r*rr*4,p=0;p<i;p++)f.set(h.subarray(c,c+g)),c+=g,n.putImageData(o,0,m),m+=rr;p<a&&(g=r*s*4,f.set(h.subarray(c,c+g)),n.putImageData(o,0,m))}else if(e.kind===Vy.RGB_24BPP)for(y=rr,g=r*y,p=0;p<a;p++){for(p>=i&&(y=s,g=r*y),d=0,m=g;m--;)f[d++]=h[c++],f[d++]=h[c++],f[d++]=h[c++],f[d++]=255;n.putImageData(o,0,p*rr)}else throw new Error(`bad image kind: ${e.kind}`)}function _k(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%rr,i=(t-s)/rr,a=s===0?i:i+1,o=n.createImageData(r,rr);let c=0;const d=e.data,h=o.data;for(let f=0;f<a;f++){const p=f<i?rr:s;({srcPos:c}=x7({src:d,srcPos:c,dest:h,width:r,height:p,nonBlackColor:0})),n.putImageData(o,0,f*rr)}}function fp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function _y(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function Sk(n,e){if(e)return!0;ue.singularValueDecompose2dScale(n,Mr);const t=Math.fround(Gi.pixelRatio*Fl.PDF_TO_CSS_UNITS);return Mr[0]<=t&&Mr[1]<=t}const S7=["butt","round","square"],N7=["miter","round","bevel"],E7={},Nk={};var ti,cS,dS,uS;const wA=class wA{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:o=null},c,d){C(this,ti);this.ctx=e,this.current=new wk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new _7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,r){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...wt(this.compositeCtx))}this.ctx.save(),_y(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=wt(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,a=e.fnArray;let o=t||0;const c=i.length;if(c===o)return o;const d=c-o>xk&&typeof r=="function",h=d?Date.now()+w7:0;let f=0;const p=this.commonObjs,m=this.objs;let y;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,r),o;if(y=a[o],y!==o0.dependency)this[y].apply(this,i[o]);else for(const g of i[o]){const w=g.startsWith("g_")?p:m;if(!w.has(g))return w.get(g,r),o}if(o++,o===c)return o;if(d&&++f>xk){if(Date.now()>h)return r(),o;f=0}}}endDrawing(){k(this,ti,cS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,ti,dS).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=r,c=s,d="prescale1",h,f;for(;i>2&&o>1||a>2&&c>1;){let p=o,m=c;i>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/p),a>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/m),h=this.cachedCanvases.getCanvas(d,p,m),f=h.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,o,c,0,0,p,m),e=h.canvas,o=p,c=m,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,o=wt(t);let c,d,h,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;d=JSON.stringify(a?o:[o.slice(0,4),i]),c=this._cachedBitmapsMap.get(T),c||(c=new Map,this._cachedBitmapsMap.set(T,c));const R=c.get(d);if(R&&!a){const I=Math.round(Math.min(o[0],o[2])+o[4]),O=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:R,offsetX:I,offsetY:O}}h=R}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),_k(f.context,e));let p=ue.transform(o,[1/r,0,0,-1/s,0,0]);p=ue.transform(p,[1,0,0,1,0,-s]);const m=zu.slice();ue.axialAlignedBoundingBox([0,0,r,s],p,m);const[y,g,w,v]=m,x=Math.round(w-y)||1,_=Math.round(v-g)||1,N=this.cachedCanvases.getCanvas("fillCanvas",x,_),E=N.context,A=y,j=g;E.translate(-A,-j),E.transform(...p),h||(h=this._scaleImage(f.canvas,ii(E)),h=h.img,c&&a&&c.set(d,h)),E.imageSmoothingEnabled=Sk(wt(E),e.interpolate),by(E,h,0,0,h.width,h.height,0,0,r,s),E.globalCompositeOperation="source-in";const P=ue.transform(ii(E),[1,0,0,1,-A,-j]);return E.fillStyle=a?i.getPattern(t,this,P,pn.FILL):i,E.fillRect(0,0,r,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,N.canvas)),{canvas:N.canvas,offsetX:Math.round(A),offsetY:Math.round(j)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=S7[e]}setLineJoin(e){this.ctx.lineJoin=N7[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=s.context;i.setTransform(this.suspendedCtx.getTransform()),fp(this.suspendedCtx,i),b7(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),fp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],o=s[2]-i,c=s[3]-a;o===0||c===0||(this.genericComposeSMask(t.context,r,o,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,o,c,d,h,f){let p=e.canvas,m=c-h,y=d-f;if(a)if(m<0||y<0||m+r>p.width||y+s>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,s),v=w.context;v.drawImage(p,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,r,s),v.globalCompositeOperation="source-over",p=w.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,y,r,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,y,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(c,d,r,s),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(p,m,y,r,s,c,d,r,s),t.restore()}save(){this.inSMaskMode&&fp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&fp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,a){this.ctx.transform(e,t,r,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let[s]=t;if(!r){s||(s=t[0]=new Path2D),this[e](s);return}if(!(s instanceof Path2D)){const i=t[0]=new Path2D;for(let a=0,o=s.length;a<o;)switch(s[a++]){case vy.moveTo:i.moveTo(s[a++],s[a++]);break;case vy.lineTo:i.lineTo(s[a++],s[a++]);break;case vy.curveTo:i.bezierCurveTo(s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case vy.closePath:i.closePath();break;default:ye(`Unrecognized drawing path operator: ${s[a-1]}`);break}s=i}ue.axialAlignedBoundingBox(r,wt(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const i=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,ii(r),pn.STROKE),i){const a=new Path2D;a.addPath(e,r.getTransform().invertSelf().multiplySelf(i)),e=a}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(pn.STROKE,wt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let a=!1;if(i){const c=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=s.getPattern(r,this,ii(r),pn.FILL),c){const d=new Path2D;d.addPath(e,r.getTransform().invertSelf().multiplySelf(c)),e=d}a=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),a&&r.restore(),t&&this.consumePath(e,o)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=E7}eoClip(){this.pendingClip=Nk}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const r=new Path2D,s=t.getTransform().invertSelf();for(const{transform:i,x:a,y:o,fontSize:c,path:d}of e)d&&r.addPath(d,new DOMMatrix(i).preMultiplySelf(s).translate(a,o).scale(c,-c));t.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||L_,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ye("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",a=((h=r.systemFontInfo)==null?void 0:h.css)||`"${i}", ${r.fallbackName}`;let o="normal";r.black?o="900":r.bold&&(o="bold");const c=r.italic?"italic":"normal";let d=t;t<vk?d=vk:t>yk&&(d=yk),this.current.fontSizeScale=t/d,this.ctx.font=`${c} ${o} ${d}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s,i){const a=this.ctx,o=this.current,c=o.font,d=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,f=d&_n.FILL_STROKE_MASK,p=!!(d&_n.ADD_TO_PATH_FLAG),m=o.patternFill&&!c.missingFile,y=o.patternStroke&&!c.missingFile;let g;if((c.disableFontFace||p||m||y)&&!c.missingFile&&(g=c.getPathGenerator(this.commonObjs,e)),g&&(c.disableFontFace||m||y)){a.save(),a.translate(t,r),a.scale(h,-h);let w;if((f===_n.FILL||f===_n.FILL_STROKE)&&(s?(w=a.getTransform(),a.setTransform(...s),a.fill(k(this,ti,uS).call(this,g,w,s))):a.fill(g)),f===_n.STROKE||f===_n.FILL_STROKE)if(i){w||(w=a.getTransform()),a.setTransform(...i);const{a:v,b:x,c:_,d:N}=w,E=ue.inverseTransform(i),A=ue.transform([v,x,_,N,0,0],E);ue.singularValueDecompose2dScale(A,Mr),a.lineWidth*=Math.max(Mr[0],Mr[1])/h,a.stroke(k(this,ti,uS).call(this,g,w,i))}else a.lineWidth/=h,a.stroke(g);a.restore()}else(f===_n.FILL||f===_n.FILL_STROKE)&&a.fillText(e,t,r),(f===_n.STROKE||f===_n.FILL_STROKE)&&a.strokeText(e,t,r);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:wt(a),x:t,y:r,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return Pe(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,o=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,f=e.length,p=r.vertical,m=p?1:-1,y=r.defaultVMetrics,g=s*t.fontMatrix[0],w=t.textRenderingMode===_n.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),d>0?i.scale(h,-1):i.scale(h,1);let v,x;if(t.patternFill){i.save();const j=t.fillColor.getPattern(i,this,ii(i),pn.FILL);v=wt(i),i.restore(),i.fillStyle=j}if(t.patternStroke){i.save();const j=t.strokeColor.getPattern(i,this,ii(i),pn.STROKE);x=wt(i),i.restore(),i.strokeStyle=j}let _=t.lineWidth;const N=t.textMatrixScale;if(N===0||_===0){const j=t.textRenderingMode&_n.FILL_STROKE_MASK;(j===_n.STROKE||j===_n.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=N;if(a!==1&&(i.scale(a,a),_/=a),i.lineWidth=_,r.isInvalidPDFjsFont){const j=[];let P=0;for(const T of e)j.push(T.unicode),P+=T.width;i.fillText(j.join(""),0,0),t.x+=P*g*h,i.restore(),this.compose();return}let E=0,A;for(A=0;A<f;++A){const j=e[A];if(typeof j=="number"){E+=m*j*s/1e3;continue}let P=!1;const T=(j.isSpace?c:0)+o,R=j.fontChar,I=j.accent;let O,z,L=j.width;if(p){const B=j.vmetric||y,F=-(j.vmetric?B[1]:L*.5)*g,D=B[2]*g;L=B?-B[0]:L,O=F/a,z=(E+D)/a}else O=E/a,z=0;if(r.remeasure&&L>0){const B=i.measureText(R).width*1e3/s*a;if(L<B&&this.isFontSubpixelAAEnabled){const F=L/B;P=!0,i.save(),i.scale(F,1),O/=F}else L!==B&&(O+=(L-B)/2e3*s/a)}if(this.contentVisible&&(j.isInFont||r.missingFile)){if(w&&!I)i.fillText(R,O,z);else if(this.paintChar(R,O,z,v,x),I){const B=O+s*I.offset.x/a,F=z-s*I.offset.y/a;this.paintChar(I.fontChar,B,F,v,x)}}const V=p?L*g-T*d:L*g+T*d;E+=V,P&&i.restore()}p?t.y-=E:t.x+=E*h,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,a=r.fontDirection,o=s.vertical?1:-1,c=r.charSpacing,d=r.wordSpacing,h=r.textHScale*a,f=r.fontMatrix||L_,p=e.length,m=r.textRenderingMode===_n.INVISIBLE;let y,g,w,v;if(!(m||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),r.textMatrix&&t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(h,a),y=0;y<p;++y){if(g=e[y],typeof g=="number"){v=o*g*i/1e3,this.ctx.translate(v,0),r.x+=v*h;continue}const x=(g.isSpace?d:0)+c,_=s.charProcOperatorList[g.operatorListId];_?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(_),this.restore()):ye(`Type3 character "${g.operatorListId}" is not available.`);const N=[g.width,0];ue.applyTransform(N,f),w=N[0]*i+x,t.translate(w,0),r.x+=w*h}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,a){const o=new Path2D;o.rect(r,s,i-r,a-s),this.ctx.clip(o),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=this.baseTransform||wt(this.ctx),s={createCanvasGraphics:i=>new wA(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new lS(e,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=y7(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ii(t),pn.SHADING);const s=ii(t);if(s){const{width:i,height:a}=t.canvas,o=zu.slice();ue.axialAlignedBoundingBox([0,0,i,a],s,o);const[c,d,h,f]=o;this.ctx.fillRect(c,d,h-c,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){tt("Should not call beginInlineImage")}beginImageData(){tt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=wt(this.ctx),t)){ue.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[r,s,i,a]=t,o=new Path2D;o.rect(r,s,i-r,a-s),this.ctx.clip(o),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Mw("TODO: Support non-isolated groups."),e.knockout&&ye("Knockout groups not supported.");const r=wt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=zu.slice();ue.axialAlignedBoundingBox(e.bbox,wt(t),s);const i=[0,0,t.canvas.width,t.canvas.height];s=ue.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),d=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,d),p=f.context;p.translate(-a,-o),p.transform(...r);let m=new Path2D;const[y,g,w,v]=e.bbox;if(m.rect(y,g,w-y,v-g),e.matrix){const x=new Path2D;x.addPath(m,new DOMMatrix(e.matrix)),m=x}p.clip(m),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),fp(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=wt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=zu.slice();ue.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(k(this,ti,cS).call(this),_y(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o,ue.singularValueDecompose2dScale(wt(this.ctx),Mr);const{viewportScale:c}=this,d=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Mr[0],0,0,-Mr[1],0,o*Mr[1]),_y(this.ctx)}else{_y(this.ctx),this.endPath();const c=new Path2D;c.rect(t[0],t[1],a,o),this.ctx.clip(c)}}this.current=new wk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,ti,dS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this._createMaskCanvas(e),i=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(i,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const c=wt(o);o.transform(t,r,s,i,0,0);const d=this._createMaskCanvas(e);o.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let h=0,f=a.length;h<f;h+=2){const p=ue.transform(c,[t,r,s,i,a[h],a[h+1]]);o.drawImage(d.canvas,p[4],p[5])}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:o,height:c,transform:d}=i,h=this.cachedCanvases.getCanvas("maskCanvas",o,c),f=h.context;f.save();const p=this.getObject(a,i);_k(f,p),f.globalCompositeOperation="source-in",f.fillStyle=s?r.getPattern(f,this,ii(t),pn.FILL):r,f.fillRect(0,0,o,c),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),by(t,h.canvas,0,0,o,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ye("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){ye("Dependent image isn't ready yet");return}const a=i.width,o=i.height,c=[];for(let d=0,h=s.length;d<h;d+=2)c.push({transform:[t,0,0,r,s[d],s[d+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;this.save();const{filter:i}=s;i!=="none"&&i!==""&&(s.filter="none"),s.scale(1/t,-1/r);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,r).context;bk(d,e),a=this.applyTransferMapsToCanvas(d)}const o=this._scaleImage(a,ii(s));s.imageSmoothingEnabled=Sk(wt(s),e.interpolate),by(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;bk(c,e),s=this.applyTransferMapsToCanvas(c)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),by(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(r||(this.pendingClip===Nk?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=wt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,o;if(r===0&&s===0){const c=Math.abs(t),d=Math.abs(i);if(c===d)if(e===0)a=o=1/c;else{const h=c*e;a=o=h<1?1/h:1}else if(e===0)a=1/c,o=1/d;else{const h=c*e,f=d*e;a=h<1?1/h:1,o=f<1?1/f:1}}else{const c=Math.abs(t*i-r*s),d=Math.hypot(t,r),h=Math.hypot(s,i);if(e===0)a=h/c,o=d/c;else{const f=e*c;a=h>f?h/f:1,o=d>f?d/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,a]=this.getScaleForStroking();if(i===a){r.lineWidth=(s||1)*i,r.stroke(e);return}const o=r.getLineDash();t&&r.save(),r.scale(i,a),Xb.a=1/i,Xb.d=1/a;const c=new Path2D;if(c.addPath(e,Xb),o.length>0){const d=Math.max(i,a);r.setLineDash(o.map(h=>h/d)),r.lineDashOffset/=d}r.lineWidth=s||1,r.stroke(c),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ti=new WeakSet,cS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},dS=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},uS=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let eh=wA;for(const n in o0)eh.prototype[n]!==void 0&&(eh.prototype[o0[n]]=eh.prototype[n]);var cg,dg;class Di{static get workerPort(){return u(this,cg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,cg,e)}static get workerSrc(){return u(this,dg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,dg,e)}}cg=new WeakMap,dg=new WeakMap,C(Di,cg,null),C(Di,dg,"");var Th,ug;class A7{constructor({parsedData:e,rawData:t}){C(this,Th);C(this,ug);S(this,Th,e),S(this,ug,t)}getRaw(){return u(this,ug)}get(e){return u(this,Th).get(e)??null}[Symbol.iterator](){return u(this,Th).entries()}}Th=new WeakMap,ug=new WeakMap;const Nu=Symbol("INTERNAL");var hg,fg,pg,Rh;class j7{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){C(this,hg,!1);C(this,fg,!1);C(this,pg,!1);C(this,Rh,!0);S(this,hg,!!(e&Tr.DISPLAY)),S(this,fg,!!(e&Tr.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(u(this,pg))return u(this,Rh);if(!u(this,Rh))return!1;const{print:e,view:t}=this.usage;return u(this,hg)?(t==null?void 0:t.viewState)!=="OFF":u(this,fg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Nu&&tt("Internal method `_setVisible` called."),S(this,pg,r),S(this,Rh,t)}}hg=new WeakMap,fg=new WeakMap,pg=new WeakMap,Rh=new WeakMap;var qo,Je,Mh,Ih,mg,hS;class C7{constructor(e,t=Tr.DISPLAY){C(this,mg);C(this,qo,null);C(this,Je,new Map);C(this,Mh,null);C(this,Ih,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,Ih,e.order);for(const r of e.groups)u(this,Je).set(r.id,new j7(t,r));if(e.baseState==="OFF")for(const r of u(this,Je).values())r._setVisible(Nu,!1);for(const r of e.on)u(this,Je).get(r)._setVisible(Nu,!0);for(const r of e.off)u(this,Je).get(r)._setVisible(Nu,!1);S(this,Mh,this.getHash())}}isVisible(e){if(u(this,Je).size===0)return!0;if(!e)return Mw("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,Je).has(e.id)?u(this,Je).get(e.id).visible:(ye(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,mg,hS).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,Je).has(t))return ye(`Optional content group not found: ${t}`),!0;if(u(this,Je).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,Je).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!u(this,Je).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,Je).has(t))return ye(`Optional content group not found: ${t}`),!0;if(!u(this,Je).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,Je).has(t))return ye(`Optional content group not found: ${t}`),!0;if(u(this,Je).get(t).visible)return!1}return!0}return ye(`Unknown optional content policy ${e.policy}.`),!0}return ye(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=u(this,Je).get(e);if(!s){ye(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((i=u(this,Je).get(o))==null||i._setVisible(Nu,!1,!0));s._setVisible(Nu,!!t,!0),S(this,qo,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=u(this,Je).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}S(this,qo,null)}get hasInitialVisibility(){return u(this,Mh)===null||this.getHash()===u(this,Mh)}getOrder(){return u(this,Je).size?u(this,Ih)?u(this,Ih).slice():[...u(this,Je).keys()]:null}getGroup(e){return u(this,Je).get(e)||null}getHash(){if(u(this,qo)!==null)return u(this,qo);const e=new AO;for(const[t,r]of u(this,Je))e.update(`${t}:${r.visible}`);return S(this,qo,e.hexdigest())}[Symbol.iterator](){return u(this,Je).entries()}}qo=new WeakMap,Je=new WeakMap,Mh=new WeakMap,Ih=new WeakMap,mg=new WeakSet,hS=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=k(this,mg,hS).call(this,i);else if(u(this,Je).has(i))a=u(this,Je).get(i).visible;else return ye(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class k7{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Ft(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Ft(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ft(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new P7(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new T7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class P7{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=KE(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class T7{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function R7(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=c(h),h=d(h),i(h)}if(t=a(n),t){const h=d(t);return i(h)}if(t=r("filename","i").exec(n),t){t=t[1];let h=o(t);return h=d(h),i(h)}function r(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(h,{fatal:!0}),m=kv(f);f=p.decode(m),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function a(h){const f=[];let p;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(h))!==null;){let[,g,w,v]=p;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[w,v]}const y=[];for(let g=0;g<f.length&&g in f;++g){let[w,v]=f[g];v=o(v),w&&(v=unescape(v),g===0&&(v=c(v))),y.push(v)}return y.join("")}function o(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){const f=h.indexOf("'");if(f===-1)return h;const p=h.slice(0,f),y=h.slice(f+1).replace(/^[^']*'/,"");return s(p,y)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),s(p,y);try{y=atob(y)}catch{}return s(p,y)})}return""}function FO(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function Ow(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function $O({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function zO(n){const e=n.get("Content-Disposition");if(e){let t=R7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(KE(t))return t}return null}function Mv(n,e){return new l0(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function BO(n){return n===200||n===206}function UO(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function HO(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ye(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class M7{constructor(e){q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=FO(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new I7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new D7(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class I7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,UO(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Ow(i.url),!BO(i.status))throw Mv(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:o,suggestedLength:c}=$O({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=zO(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ll("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:HO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class D7{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,UO(i,this._withCredentials,this._abortController)).then(o=>{const c=Ow(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!BO(o.status))throw Mv(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:HO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Qb=200,Jb=206;function O7(n){const e=n.response;return typeof e!="string"?e:kv(e).buffer}class L7{constructor({url:e,httpHeaders:t,withCredentials:r}){q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=FO(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Jb):s.expectedStatus=Qb,t.responseType="arraybuffer",Ft(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||Qb;if(!(i===Qb&&r.expectedStatus===Jb)&&i!==r.expectedStatus){r.onError(s.status);return}const o=O7(s);if(i===Jb){const c=s.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?r.onDone({begin:parseInt(d[1],10),chunk:o}):(ye('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class F7{constructor(e){this._source=e,this._manager=new L7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ft(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new z7(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class $7{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Ow(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...d]=o.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=$O({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=zO(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Mv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class z7{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Ow((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Mv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const B7=/^[a-z][a-z0-9\-+.]+:/i;function U7(n){if(B7.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class H7{constructor(e){this.source=e,this.url=U7(e.url),Ft(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new W7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new V7(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class W7{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Mv(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ll("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class V7{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const pp=Symbol("INITIAL_DATA");var xr,gg,fS;class WO{constructor(){C(this,gg);C(this,xr,Object.create(null))}get(e,t=null){if(t){const s=k(this,gg,fS).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=u(this,xr)[e];if(!r||r.data===pp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=u(this,xr)[e];return!!t&&t.data!==pp}delete(e){const t=u(this,xr)[e];return!t||t.data===pp?!1:(delete u(this,xr)[e],!0)}resolve(e,t=null){const r=k(this,gg,fS).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in u(this,xr)){const{data:r}=u(this,xr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}S(this,xr,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,xr)){const{data:t}=u(this,xr)[e];t!==pp&&(yield[e,t])}}}xr=new WeakMap,gg=new WeakSet,fS=function(e){var t;return(t=u(this,xr))[e]||(t[e]={...Promise.withResolvers(),data:pp})};const G7=1e5,Ek=30;var Kk,Ko,er,vg,yg,Wc,Na,xg,wg,Vc,Dh,Oh,Yo,Lh,bg,Fh,Gc,_g,Sg,$h,qc,Ng,Xo,zh,eo,VO,GO,pS,Br,tx,mS,qO,KO;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:r}){C(this,eo);C(this,Ko,Promise.withResolvers());C(this,er,null);C(this,vg,!1);C(this,yg,!!((Kk=globalThis.FontInspector)!=null&&Kk.enabled));C(this,Wc,null);C(this,Na,null);C(this,xg,0);C(this,wg,0);C(this,Vc,null);C(this,Dh,null);C(this,Oh,0);C(this,Yo,0);C(this,Lh,Object.create(null));C(this,bg,[]);C(this,Fh,null);C(this,Gc,[]);C(this,_g,new WeakMap);C(this,Sg,null);var c;if(e instanceof ReadableStream)S(this,Fh,e);else if(typeof e=="object")S(this,Fh,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,er,S(this,Dh,t)),S(this,Yo,r.scale*Gi.pixelRatio),S(this,Oh,r.rotation),S(this,Na,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=r.rawDims;S(this,Sg,[1,0,0,-1,-a,o+i]),S(this,wg,s),S(this,xg,i),k(c=Ut,Br,qO).call(c),Hd(t,r),u(this,Ko).promise.finally(()=>{u(Ut,zh).delete(this),S(this,Na,null),S(this,Lh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=yn.platform;return Pe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Vc).read().then(({value:t,done:r})=>{if(r){u(this,Ko).resolve();return}u(this,Wc)??S(this,Wc,t.lang),Object.assign(u(this,Lh),t.styles),k(this,eo,VO).call(this,t.items),e()},u(this,Ko).reject)};return S(this,Vc,u(this,Fh).getReader()),u(Ut,zh).add(this),e(),u(this,Ko).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*Gi.pixelRatio,s=e.rotation;if(s!==u(this,Oh)&&(t==null||t(),S(this,Oh,s),Hd(u(this,Dh),{rotation:s})),r!==u(this,Yo)){t==null||t(),S(this,Yo,r);const a={div:null,properties:null,ctx:k(i=Ut,Br,tx).call(i,u(this,Wc))};for(const o of u(this,Gc))a.properties=u(this,_g).get(o),a.div=o,k(this,eo,pS).call(this,a)}}cancel(){var t;const e=new Ll("TextLayer task cancelled.");(t=u(this,Vc))==null||t.cancel(e).catch(()=>{}),S(this,Vc,null),u(this,Ko).reject(e)}get textDivs(){return u(this,Gc)}get textContentItemsStr(){return u(this,bg)}static cleanup(){if(!(u(this,zh).size>0)){u(this,$h).clear();for(const{canvas:e}of u(this,qc).values())e.remove();u(this,qc).clear()}}};Ko=new WeakMap,er=new WeakMap,vg=new WeakMap,yg=new WeakMap,Wc=new WeakMap,Na=new WeakMap,xg=new WeakMap,wg=new WeakMap,Vc=new WeakMap,Dh=new WeakMap,Oh=new WeakMap,Yo=new WeakMap,Lh=new WeakMap,bg=new WeakMap,Fh=new WeakMap,Gc=new WeakMap,_g=new WeakMap,Sg=new WeakMap,$h=new WeakMap,qc=new WeakMap,Ng=new WeakMap,Xo=new WeakMap,zh=new WeakMap,eo=new WeakSet,VO=function(e){var s,i;if(u(this,vg))return;(i=u(this,Na)).ctx??(i.ctx=k(s=Ut,Br,tx).call(s,u(this,Wc)));const t=u(this,Gc),r=u(this,bg);for(const a of e){if(t.length>G7){ye("Ignoring additional textDivs for performance reasons."),S(this,vg,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=u(this,er);S(this,er,document.createElement("span")),u(this,er).classList.add("markedContent"),a.id&&u(this,er).setAttribute("id",`${a.id}`),o.append(u(this,er))}else a.type==="endMarkedContent"&&S(this,er,u(this,er).parentNode);continue}r.push(a.str),k(this,eo,GO).call(this,a)}},GO=function(e){var g;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Gc).push(t);const s=ue.transform(u(this,Sg),e.transform);let i=Math.atan2(s[1],s[0]);const a=u(this,Lh)[e.fontName];a.vertical&&(i+=Math.PI/2);let o=u(this,yg)&&a.fontSubstitution||a.fontFamily;o=Ut.fontFamilyMap.get(o)||o;const c=Math.hypot(s[2],s[3]),d=c*k(g=Ut,Br,KO).call(g,o,a,u(this,Wc));let h,f;i===0?(h=s[4],f=s[5]-d):(h=s[4]+d*Math.sin(i),f=s[5]-d*Math.cos(i));const p="calc(var(--total-scale-factor) *",m=t.style;u(this,er)===u(this,Dh)?(m.left=`${(100*h/u(this,wg)).toFixed(2)}%`,m.top=`${(100*f/u(this,xg)).toFixed(2)}%`):(m.left=`${p}${h.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(u(Ut,Xo)*c).toFixed(2)}px)`,m.fontFamily=o,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,yg)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(y=!0)}if(y&&(r.canvasWidth=a.vertical?e.height:e.width),u(this,_g).set(t,r),u(this,Na).div=t,u(this,Na).properties=r,k(this,eo,pS).call(this,u(this,Na)),r.hasText&&u(this,er).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),u(this,er).append(w)}},pS=function(e){var o;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(u(Ut,Xo)>1&&(a=`scale(${1/u(Ut,Xo)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=i,{canvasWidth:d,fontSize:h}=r;k(o=Ut,Br,mS).call(o,s,h*u(this,Yo),c);const{width:f}=s.measureText(t.textContent);f>0&&(a=`scaleX(${d*u(this,Yo)/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Br=new WeakSet,tx=function(e=null){let t=u(this,qc).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,qc).set(e,t),u(this,Ng).set(t,{size:0,family:""})}return t},mS=function(e,t,r){const s=u(this,Ng).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},qO=function(){if(u(this,Xo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,Xo,e.getBoundingClientRect().height),e.remove()},KO=function(e,t,r){const s=u(this,$h).get(e);if(s)return s;const i=k(this,Br,tx).call(this,r);i.canvas.width=i.canvas.height=Ek,k(this,Br,mS).call(this,i,Ek,e);const a=i.measureText(""),o=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let d=.8;return o?d=o/(o+c):(yn.platform.isFirefox&&ye("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),u(this,$h).set(e,d),d},C(Ut,Br),C(Ut,$h,new Map),C(Ut,qc,new Map),C(Ut,Ng,new WeakMap),C(Ut,Xo,null),C(Ut,zh,new Set);let km=Ut;class Pm{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(Pm.shouldBuildText(o))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const d of i.children)s(d)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const q7=100;function YO(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new gS,{docId:t}=e,r=n.url?n7(n.url):null,s=n.data?r7(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,c=n.range instanceof XO?n.range:null,d=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Tm?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!Iw(n.docBaseUrl)?n.docBaseUrl:null,m=xy(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(Fn?u7:fk),w=xy(n.iccUrl),v=xy(n.standardFontDataUrl),x=n.StandardFontDataFactory||(Fn?h7:pk),_=xy(n.wasmUrl),N=n.WasmFactory||(Fn?f7:mk),E=n.stopAtErrors!==!0,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,j=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Fn,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Fn&&(yn.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:Fn,O=n.fontExtraProperties===!0,z=n.enableXfa===!0,L=n.ownerDocument||globalThis.document,V=n.disableRange===!0,B=n.disableStream===!0,F=n.disableAutoFetch===!0,D=n.pdfBug===!0,M=n.CanvasFactory||(Fn?d7:o7),U=n.FilterFactory||(Fn?c7:l7),X=n.enableHWA===!0,$=n.useWasm!==!1,W=c?c.length:n.length??NaN,Q=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Fn&&!I,K=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===fk&&x===pk&&N===mk&&m&&v&&_&&Sp(m,document.baseURI)&&Sp(v,document.baseURI)&&Sp(_,document.baseURI)),le=null;Iq(f);const H={canvasFactory:new M({ownerDocument:L,enableHWA:X}),filterFactory:new U({docId:t,ownerDocument:L}),cMapReaderFactory:K?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:K?null:new x({baseUrl:v}),wasmFactory:K?null:new N({baseUrl:_})};h||(h=Tm.create({verbosity:f,port:Di.workerPort}),e._worker=h);const me={docId:t,apiVersion:"5.4.54",data:s,password:o,disableAutoFetch:F,rangeChunkSize:d,length:W,docBaseUrl:p,enableXfa:z,evaluatorOptions:{maxImageSize:A,disableFontFace:I,ignoreErrors:E,isEvalSupported:j,isOffscreenCanvasSupported:P,isImageDecoderSupported:T,canvasMaxAreaInBytes:R,fontExtraProperties:O,useSystemFonts:Q,useWasm:$,useWorkerFetch:K,cMapUrl:m,iccUrl:w,standardFontDataUrl:v,wasmUrl:_}},Ne={ownerDocument:L,pdfBug:D,styleElement:le,loadingParams:{disableAutoFetch:F,enableXfa:z}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const je=h.messageHandler.sendWithPromise("GetDocRequest",me,s?[s.buffer]:null);let Ce;if(c)Ce=new k7(c,{disableRange:V,disableStream:B});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Me=Sp(r)?M7:Fn?H7:F7;Ce=new Me({url:r,length:W,httpHeaders:i,withCredentials:a,rangeChunkSize:d,disableRange:V,disableStream:B})}return je.then(Me=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const zt=new Cp(t,Me,h.port),Xn=new X7(zt,e,Ce,Ne,H,X);e._transport=Xn,zt.send("Ready",null)})}).catch(e._capability.reject),e}var T0;const R0=class R0{constructor(){q(this,"_capability",Promise.withResolvers());q(this,"_transport",null);q(this,"_worker",null);q(this,"docId",`d${Xt(R0,T0)._++}`);q(this,"destroyed",!1);q(this,"onPassword",null);q(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};T0=new WeakMap,C(R0,T0,0);let gS=R0;var Kc,Eg,Ag,jg,Cg;class XO{constructor(e,t,r=!1,s=null){C(this,Kc,Promise.withResolvers());C(this,Eg,[]);C(this,Ag,[]);C(this,jg,[]);C(this,Cg,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){u(this,Cg).push(e)}addProgressListener(e){u(this,jg).push(e)}addProgressiveReadListener(e){u(this,Ag).push(e)}addProgressiveDoneListener(e){u(this,Eg).push(e)}onDataRange(e,t){for(const r of u(this,Cg))r(e,t)}onDataProgress(e,t){u(this,Kc).promise.then(()=>{for(const r of u(this,jg))r(e,t)})}onDataProgressiveRead(e){u(this,Kc).promise.then(()=>{for(const t of u(this,Ag))t(e)})}onDataProgressiveDone(){u(this,Kc).promise.then(()=>{for(const e of u(this,Eg))e()})}transportReady(){u(this,Kc).resolve()}requestDataRange(e,t){tt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Kc=new WeakMap,Eg=new WeakMap,Ag=new WeakMap,jg=new WeakMap,Cg=new WeakMap;class K7{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ea,Yc,Mp;class Y7{constructor(e,t,r,s=!1){C(this,Yc);C(this,Ea,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new dk:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new WO,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Tv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=No.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:p=!1}){var E,A;(E=this._stats)==null||E.time("Overall");const m=this._transport.getRenderingIntent(s,i,f,p),{renderingIntent:y,cacheKey:g}=m;S(this,Ea,!1),c||(c=this._transport.getOptionalContentConfig(y));let w=this._intentStates.get(g);w||(w=Object.create(null),this._intentStates.set(g,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const v=!!(y&Tr.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(m));const x=j=>{var P;w.renderTasks.delete(_),v&&S(this,Ea,!0),k(this,Yc,Mp).call(this),j?(_.capability.reject(j),this._abortOperatorList({intentState:w,reason:j instanceof Error?j:new Error(j)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new vS({callback:x,params:{canvas:t,canvasContext:e,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(w.renderTasks||(w.renderTasks=new Set)).add(_);const N=_.task;return Promise.all([w.displayReadyCapability.promise,c]).then(([j,P])=>{var T;if(this.destroyed){x();return}if((T=this._stats)==null||T.time("Rendering"),!(P.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:j,optionalContentConfig:P}),_.operatorListChanged()}).catch(x),N}getOperatorList({intent:e="display",annotationMode:t=No.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var d;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Pm.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:c,done:d}){if(d){r(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),S(this,Ea,!1),Promise.all(e)}cleanup(e=!1){S(this,Ea,!0);const t=k(this,Yc,Mp).call(this);return e&&t&&this._stats&&(this._stats=new dk),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&k(this,Yc,Mp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:f,done:p})=>{if(p){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),h())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const p of d.renderTasks)p.operatorListChanged();k(this,Yc,Mp).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof qE){let s=q7;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Ll(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Ea=new WeakMap,Yc=new WeakSet,Mp=function(){if(!u(this,Ea)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Ea,!1),!0};var Qo,Is,Aa,Xc,M0,Qc,Jc,Hn,nx,QO,JO,Ip,Bh,rx;const pt=class pt{constructor({name:e=null,port:t=null,verbosity:r=Dq()}={}){C(this,Hn);C(this,Qo,Promise.withResolvers());C(this,Is,null);C(this,Aa,null);C(this,Xc,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(u(pt,Jc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(pt,Jc).set(t,this),k(this,Hn,QO).call(this,t)}else k(this,Hn,JO).call(this)}get promise(){return u(this,Qo).promise}get port(){return u(this,Aa)}get messageHandler(){return u(this,Is)}destroy(){var e,t;this.destroyed=!0,(e=u(this,Xc))==null||e.terminate(),S(this,Xc,null),u(pt,Jc).delete(u(this,Aa)),S(this,Aa,null),(t=u(this,Is))==null||t.destroy(),S(this,Is,null)}static create(e){const t=u(this,Jc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new pt(e)}static get workerSrc(){if(Di.workerSrc)return Di.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Pe(this,"_setupFakeWorkerGlobal",(async()=>u(this,Bh,rx)?u(this,Bh,rx):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qo=new WeakMap,Is=new WeakMap,Aa=new WeakMap,Xc=new WeakMap,M0=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,Hn=new WeakSet,nx=function(){u(this,Qo).resolve(),u(this,Is).send("configure",{verbosity:this.verbosity})},QO=function(e){S(this,Aa,e),S(this,Is,new Cp("main","worker",e)),u(this,Is).on("ready",()=>{}),k(this,Hn,nx).call(this)},JO=function(){if(u(pt,Qc)||u(pt,Bh,rx)){k(this,Hn,Ip).call(this);return}let{workerSrc:e}=pt;try{pt._isSameOrigin(window.location,e)||(e=pt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Cp("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?u(this,Qo).reject(new Error("Worker was destroyed")):k(this,Hn,Ip).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,Xc)||s()},{signal:i.signal}),r.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}S(this,Is,r),S(this,Aa,t),S(this,Xc,t),k(this,Hn,nx).call(this)}),r.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{k(this,Hn,Ip).call(this)}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{Mw("The worker has been disabled.")}k(this,Hn,Ip).call(this)},Ip=function(){u(pt,Qc)||(ye("Setting up fake worker."),S(pt,Qc,!0)),pt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,Qo).reject(new Error("Worker was destroyed"));return}const t=new a7;S(this,Aa,t);const r=`fake${Xt(pt,M0)._++}`,s=new Cp(r+"_worker",r,t);e.setup(s,t),S(this,Is,new Cp(r,r+"_worker",t)),k(this,Hn,nx).call(this)}).catch(e=>{u(this,Qo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Bh=new WeakSet,rx=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(pt,Bh),C(pt,M0,0),C(pt,Qc,!1),C(pt,Jc,new WeakMap),Fn&&(S(pt,Qc,!0),Di.workerSrc||(Di.workerSrc="./pdf.worker.mjs")),pt._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},pt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},pt.fromPort=e=>{if(qq("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return pt.create(e)};let Tm=pt;var ja,Si,Uh,Hh,Ca,Zc,Dp;class X7{constructor(e,t,r,s,i,a){C(this,Zc);C(this,ja,new Map);C(this,Si,new Map);C(this,Uh,new Map);C(this,Hh,new Map);C(this,Ca,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new WO,this.fontLoader=new e7({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Pe(this,"annotationStorage",new YE)}getRenderingIntent(e,t=No.ENABLE,r=null,s=!1,i=!1){let a=Tr.DISPLAY,o=rS;switch(e){case"any":a=Tr.ANY;break;case"display":break;case"print":a=Tr.PRINT;break;default:ye(`getRenderingIntent - invalid intent: ${e}`)}const c=a&Tr.PRINT&&r instanceof CO?r:this.annotationStorage;switch(t){case No.DISABLE:a+=Tr.ANNOTATIONS_DISABLE;break;case No.ENABLE:break;case No.ENABLE_FORMS:a+=Tr.ANNOTATIONS_FORMS;break;case No.ENABLE_STORAGE:a+=Tr.ANNOTATIONS_STORAGE,o=c.serializable;break;default:ye(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Tr.IS_EDITING),i&&(a+=Tr.OPLIST);const{ids:d,hash:h}=c.modifiedIds,f=[a,o.hash,h];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:d}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=u(this,Ca))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of u(this,Si).values())e.push(s._destroy());u(this,Si).clear(),u(this,Uh).clear(),u(this,Hh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,ja).clear(),this.filterFactory.destroy(),km.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ll("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Ft(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Ft(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{Ft(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}Ft(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new K7(r,this))}),e.on("DocException",r=>{t._capability.reject(Qn(r))}),e.on("PasswordRequest",r=>{S(this,Ca,Promise.withResolvers());try{if(!t.onPassword)throw Qn(r);const s=i=>{i instanceof Error?u(this,Ca).reject(i):u(this,Ca).resolve({password:i})};t.onPassword(s,r.code)}catch(s){u(this,Ca).reject(s)}return u(this,Ca).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;u(this,Si).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const h=i.error;ye(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const o=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new t7(i,o);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:d}=i;Ft(d,"The imageRef must be defined.");for(const h of u(this,Si).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{var c;if(this.destroyed)return;const o=u(this,Si).get(s);if(!o.objs.has(r)){if(o._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&ye("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=u(this,Uh).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,Hh).set(i.refStr,e);const a=new Y7(t,i,this,this._params.pdfBug);return u(this,Si).set(t,a),a});return u(this,Uh).set(t,s),s}getPageIndex(e){return sS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,Zc,Dp).call(this,"GetFieldObjects")}hasJSActions(){return k(this,Zc,Dp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,Zc,Dp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,Zc,Dp).call(this,"GetOptionalContentConfig").then(t=>new C7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,ja).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new A7(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return u(this,ja).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Si).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,ja).clear(),this.filterFactory.destroy(!0),km.cleanup()}}cachedPageNumber(e){if(!sS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Hh).get(t)??null}}ja=new WeakMap,Si=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,Ca=new WeakMap,Zc=new WeakSet,Dp=function(e,t=null){const r=u(this,ja).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return u(this,ja).set(e,s),s};var Jo;class Q7{constructor(e){C(this,Jo,null);q(this,"onContinue",null);q(this,"onError",null);S(this,Jo,e)}get promise(){return u(this,Jo).capability.promise}cancel(e=0){u(this,Jo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,Jo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,Jo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Jo=new WeakMap;var Zo,ed;const uc=class uc{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:p=null,enableHWA:m=!1}){C(this,Zo,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Q7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,c;if(this.cancelled)return;if(this._canvas){if(u(uc,ed).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(uc,ed).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new eh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),u(this,Zo)&&(window.cancelAnimationFrame(u(this,Zo)),S(this,Zo,null)),u(uc,ed).delete(this._canvas),e||(e=new qE(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,Zo,window.requestAnimationFrame(()=>{S(this,Zo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(uc,ed).delete(this._canvas),this.callback())))}};Zo=new WeakMap,ed=new WeakMap,C(uc,ed,new WeakSet);let vS=uc;const J7="5.4.54",Z7="295fb3ec4";var wr,td,Wh,Vt,kg,Vh,ka,Pg,el,Ds,Tg,Ze,yS,xS,wS,ic,ZO,yo;const Jn=class Jn{constructor({editor:e=null,uiManager:t=null}){C(this,Ze);C(this,wr,null);C(this,td,null);C(this,Wh);C(this,Vt,null);C(this,kg,!1);C(this,Vh,!1);C(this,ka,null);C(this,Pg);C(this,el,null);C(this,Ds,null);var r,s;e?(S(this,Vh,!1),S(this,ka,e)):S(this,Vh,!0),S(this,Ds,(e==null?void 0:e._uiManager)||t),S(this,Pg,u(this,Ds)._eventBus),S(this,Wh,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=u(this,Ds))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),u(Jn,Tg)||S(Jn,Tg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Pe(this,"_keyboardManager",new Rv([[["Escape","mac+Escape"],Jn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Jn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Jn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Jn.prototype._moveToPrevious],[["Home","mac+Home"],Jn.prototype._moveToBeginning],[["End","mac+End"],Jn.prototype._moveToEnd]]))}renderButton(){const e=S(this,wr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,ka)&&(e.ariaControls=`${u(this,ka).id}_colorpicker_dropdown`);const t=u(this,Ds)._signal;e.addEventListener("click",k(this,Ze,ic).bind(this),{signal:t}),e.addEventListener("keydown",k(this,Ze,wS).bind(this),{signal:t});const r=S(this,td,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=u(this,Wh),e.append(r),e}renderMainDropdown(){const e=S(this,Vt,k(this,Ze,yS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,wr)){k(this,Ze,ic).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,Ze,xS).call(this,t,e)}_moveToNext(e){var t,r;if(!u(this,Ze,yo)){k(this,Ze,ic).call(this,e);return}if(e.target===u(this,wr)){(t=u(this,Vt).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=u(this,Vt))==null?void 0:t.firstChild)||e.target===u(this,wr)){u(this,Ze,yo)&&this._hideDropdownFromKeyboard();return}u(this,Ze,yo)||k(this,Ze,ic).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!u(this,Ze,yo)){k(this,Ze,ic).call(this,e);return}(t=u(this,Vt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Ze,yo)){k(this,Ze,ic).call(this,e);return}(t=u(this,Vt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Vt))==null||e.classList.add("hidden"),u(this,wr).ariaExpanded="false",(t=u(this,el))==null||t.abort(),S(this,el,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Vh)){if(!u(this,Ze,yo)){(e=u(this,ka))==null||e.unselect();return}this.hideDropdown(),u(this,wr).focus({preventScroll:!0,focusVisible:u(this,kg)})}}updateColor(e){if(u(this,td)&&(u(this,td).style.backgroundColor=e),!u(this,Vt))return;const t=u(this,Ds).highlightColors.values();for(const r of u(this,Vt).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,wr))==null||e.remove(),S(this,wr,null),S(this,td,null),(t=u(this,Vt))==null||t.remove(),S(this,Vt,null)}};wr=new WeakMap,td=new WeakMap,Wh=new WeakMap,Vt=new WeakMap,kg=new WeakMap,Vh=new WeakMap,ka=new WeakMap,Pg=new WeakMap,el=new WeakMap,Ds=new WeakMap,Tg=new WeakMap,Ze=new WeakSet,yS=function(){const e=document.createElement("div"),t=u(this,Ds)._signal;e.addEventListener("contextmenu",ps,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,ka)&&(e.id=`${u(this,ka).id}_colorpicker_dropdown`);for(const[r,s]of u(this,Ds).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",u(Jn,Tg)[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.ariaSelected=s===u(this,Wh),i.addEventListener("click",k(this,Ze,xS).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",k(this,Ze,wS).bind(this),{signal:t}),e},xS=function(e,t){t.stopPropagation(),u(this,Pg).dispatch("switchannotationeditorparams",{source:this,type:Oe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},wS=function(e){Jn._keyboardManager.exec(this,e)},ic=function(e){if(u(this,Ze,yo)){this.hideDropdown();return}if(S(this,kg,e.detail===0),u(this,el)||(S(this,el,new AbortController),window.addEventListener("pointerdown",k(this,Ze,ZO).bind(this),{signal:u(this,Ds).combinedSignal(u(this,el))})),u(this,wr).ariaExpanded="true",u(this,Vt)){u(this,Vt).classList.remove("hidden");return}const t=S(this,Vt,k(this,Ze,yS).call(this));u(this,wr).append(t)},ZO=function(e){var t;(t=u(this,Vt))!=null&&t.contains(e.target)||this.hideDropdown()},yo=function(){return u(this,Vt)&&!u(this,Vt).classList.contains("hidden")},C(Jn,Tg,null);let h0=Jn;var Ni,Rg,Gh,Mg;const hc=class hc{constructor(e){C(this,Ni,null);C(this,Rg,null);C(this,Gh,null);S(this,Rg,e),S(this,Gh,e._uiManager),u(hc,Mg)||S(hc,Mg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Ni))return u(this,Ni);const{editorType:e,colorType:t,colorValue:r}=u(this,Rg),s=S(this,Ni,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",u(hc,Mg)[e]),s.addEventListener("input",()=>{u(this,Gh).updateParams(t,s.value)},{signal:u(this,Gh)._signal}),s}update(e){u(this,Ni)&&(u(this,Ni).value=e)}destroy(){var e;(e=u(this,Ni))==null||e.remove(),S(this,Ni,null)}hideDropdown(){}};Ni=new WeakMap,Rg=new WeakMap,Gh=new WeakMap,Mg=new WeakMap,C(hc,Mg,null);let f0=hc;function Ak(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function mp(n){return Math.max(0,Math.min(255,255*n))}class jk{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=mp(e),[e,e,e]}static G_HTML([e]){const t=Ak(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(mp)}static RGB_HTML(e){return`#${e.map(Ak).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[mp(1-Math.min(1,e+s)),mp(1-Math.min(1,r+s)),mp(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class e9{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){tt("Abstract method `_createSVG` called.")}}class p0 extends e9{_createSVG(e){return document.createElementNS(ta,e)}}class eL{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}o&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const o=i!=="richText",c=e.div;if(c.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}o&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);a.append(m),o&&Pm.shouldBuildText(s.name)&&d.push(m)}return{textDivs:d}}const h=[[s,-1,a]];for(;h.length>0;){const[m,y,g]=h.at(-1);if(y+1===m.children.length){h.pop();continue}const w=m.children[++h.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const _=document.createTextNode(w.value);d.push(_),g.append(_);continue}const x=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(g.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:t,intent:i,linkService:r}),((p=w.children)==null?void 0:p.length)>0)h.push([w,-1,x]);else if(w.value){const _=document.createTextNode(w.value);o&&Pm.shouldBuildText(v)&&d.push(_),x.append(_)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const t9=9,Vd=new WeakSet,n9=new Date().getTimezoneOffset()*60*1e3;class Ck{static create(e){switch(e.data.annotationType){case It.LINK:return new JE(e);case It.TEXT:return new r9(e);case It.WIDGET:switch(e.data.fieldType){case"Tx":return new s9(e);case"Btn":return e.data.radioButton?new rL(e):e.data.checkBox?new a9(e):new o9(e);case"Ch":return new l9(e);case"Sig":return new i9(e)}return new eu(e);case It.POPUP:return new _S(e);case It.FREETEXT:return new lL(e);case It.LINE:return new d9(e);case It.SQUARE:return new u9(e);case It.CIRCLE:return new h9(e);case It.POLYLINE:return new cL(e);case It.CARET:return new p9(e);case It.INK:return new ZE(e);case It.POLYGON:return new f9(e);case It.HIGHLIGHT:return new dL(e);case It.UNDERLINE:return new m9(e);case It.SQUIGGLY:return new g9(e);case It.STRIKEOUT:return new v9(e);case It.STAMP:return new uL(e);case It.FILEATTACHMENT:return new y9(e);default:return new Rt(e)}}}var nd,qh,Pa,Ig,bS;const bA=class bA{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){C(this,Ig);C(this,nd,null);C(this,qh,!1);C(this,Pa,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return bA._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;e.rect&&(u(this,nd)||S(this,nd,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&k(this,Ig,bS).call(this,t);let s=((i=u(this,Pa))==null?void 0:i.popup)||this.popup;!s&&(r!=null&&r.text)&&(this._createPopup(r),s=u(this,Pa).popup),s&&(s.updateEdited(e),r!=null&&r.deleted&&(s.remove(),S(this,Pa,null),this.popup=null))}resetEdited(){var e;u(this,nd)&&(k(this,Ig,bS).call(this,u(this,nd).rect),(e=u(this,Pa))==null||e.popup.resetEdited(),S(this,nd,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof eu)&&!(this instanceof JE)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof _S){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:o,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(g>0||w>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof rL){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case xu.SOLID:a.borderStyle="solid";break;case xu.DASHED:a.borderStyle="dashed";break;case xu.BEVELED:ye("Unimplemented border style: beveled");break;case xu.INSET:ye("Unimplemented border style: inset");break;case xu.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(S(this,qh,!0),a.borderColor=ue.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const d=ue.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:f,pageX:p,pageY:m}=s.rawDims;a.left=`${100*(d[0]-p)/h}%`,a.top=`${100*(d[1]-m)/f}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(a.width=`${100*o/h}%`,a.height=`${100*c/f}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*a/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[r]=jk[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:jk[`${a}_rgb`](o)})};return Pe(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,w,v,x]=e.subarray(2,6);if(s===g&&i===w&&t===v&&r===x)return}const{style:a}=this.container;let o;if(u(this,qh)){const{borderColor:g,borderWidth:w}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=s-t,d=i-r,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const p=h.createElement("defs");f.append(p);const m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let g=2,w=e.length;g<w;g+=8){const v=e[g],x=e[g+1],_=e[g+2],N=e[g+3],E=h.createElement("rect"),A=(_-t)/c,j=(i-x)/d,P=(v-_)/c,T=(x-N)/d;E.setAttribute("x",A),E.setAttribute("y",j),E.setAttribute("width",P),E.setAttribute("height",T),m.append(E),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${j}" width="${P}" height="${T}"/>`)}u(this,qh)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate);const i=S(this,Pa,new _S({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}get hasPopupElement(){return!!(u(this,Pa)||this.popup||this.data.popupRef)}render(){tt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const c=typeof o=="string"?o:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!Vd.has(d)){ye(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:c,domElement:d})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&Vd.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};nd=new WeakMap,qh=new WeakMap,Pa=new WeakMap,Ig=new WeakSet,bS=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(s)};let Rt=bA;var Dr,ac,tL,nL;class JE extends Rt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});C(this,Dr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(k(this,Dr,tL).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(k(this,Dr,nL).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r,s=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&k(this,Dr,ac).call(this),s&&(t.title=s)}_bindNamedAction(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),s&&(t.title=s),k(this,Dr,ac).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),k(this,Dr,ac).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),k(this,Dr,ac).call(this),!this._fieldObjects){ye('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:a,include:o}=r,c=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:g}of y)p.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===o&&c.push(y)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,h=[];for(const p of c){const{id:m}=p;switch(h.push(m),p.type){case"text":{const g=p.defaultValue||"";d.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=p.defaultValue===p.exportValues;d.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=p.defaultValue||"";d.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Vd.has(y)){ye(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Dr=new WeakSet,ac=function(){this.container.setAttribute("data-internal-link","")},tL=function(t,r,s="",i=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:s&&(t.title=s),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,i),!1},k(this,Dr,ac).call(this)},nL=function(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),s&&(t.title=s),k(this,Dr,ac).call(this)};class r9 extends Rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class eu extends Rt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return yn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,r,s){var i,a,o;for(const[c,d]of r)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,d,s),d==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ue.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||t9,i=e.style;let a;const o=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(d/(Vb*s))||1,f=d/h;a=Math.min(s,c(f/Vb))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,c(d/Vb))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=ue.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class s9 extends eu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let d=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=d??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",d??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Vd.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;f&&(r.title=f),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(r,"value",w.target.value,"value"),h.formattedValue=null}),r.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";r.value=h.userValue=v,h.formattedValue=null});let g=w=>{const{formattedValue:v}=h;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var _;if(h.focused)return;const{target:x}=v;if(y&&(x.type=p,m&&(x.step=m)),h.userValue){const N=h.userValue;if(y)if(p==="time"){const E=new Date(N),A=[E.getHours(),E.getMinutes(),E.getSeconds()];x.value=A.map(j=>j.toString().padStart(2,"0")).join(":")}else x.value=new Date(N-n9).toISOString().split(p==="date"?"T":".",1)[0];else x.value=N}h.lastCommittedValue=x.value,h.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(h.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(_){h.userValue=_.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:N}=_.detail;h.formattedValue=N,N!=null&&_.target!==document.activeElement&&(_.target.value=N);const E={formattedValue:N};y&&(E.value=N),e.setValue(t,E)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var j;const{charLimit:N}=_.detail,{target:E}=_;if(N===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",N);let A=h.userValue;!A||A.length<=N||(A=A.slice(0,N),E.value=h.userValue=A,e.setValue(t,{value:A}),(j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),r.addEventListener("keydown",v=>{var N;h.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(h.commitKey=3),x===-1)return;const{value:_}=v.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=g;g=null,r.addEventListener("blur",v=>{var N,E;if(!h.focused||!v.relatedTarget)return;(N=this.data.actions)!=null&&N.Blur||(h.focused=!1);const{target:x}=v;let{value:_}=x;if(y){if(_&&p==="time"){const A=_.split(":").map(j=>parseInt(j,10));_=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),x.step=""}else _=new Date(_).valueOf();x.type="text"}h.userValue=_,h.lastCommittedValue!==_&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),w(v)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",v=>{var T;h.lastCommittedValue=null;const{data:x,target:_}=v,{value:N,selectionStart:E,selectionEnd:A}=_;let j=E,P=A;switch(v.inputType){case"deleteWordBackward":{const R=N.substring(0,E).match(/\w*[^\w]*$/);R&&(j-=R[0].length);break}case"deleteWordForward":{const R=N.substring(E).match(/^[^\w]*\w*/);R&&(P+=R[0].length);break}case"deleteContentBackward":E===A&&(j-=1);break;case"deleteContentForward":E===A&&(P+=1);break}v.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,change:x||"",willCommit:!1,selStart:j,selEnd:P}})}),this._setEventListeners(r,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&r.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class i9 extends eu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class a9 extends eu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Vd.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const d of this._getElementsByName(o,r)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(r,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class rL extends eu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Vd.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:c}=a.target;for(const d of this._getElementsByName(o,r))e.setValue(d.id,{value:!1});e.setValue(r,{value:c})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const c={value:d=>{const h=a===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const p=h&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class o9 extends JE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class l9 extends eu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Vd.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,r.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let a=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),a=()=>{h.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=h=>{const f=h?"value":"textContent",{options:p,multiple:m}=s;return m?Array.prototype.filter.call(p,y=>y.selected).map(y=>y[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=o(!1);const d=h=>{const f=h.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const f={value(p){a==null||a();const m=p.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of s.options)g.selected=y.has(g.value);e.setValue(t,{value:o(!0)}),c=o(!1)},multipleSelection(p){s.multiple=!0},remove(p){const m=s.options,y=p.detail.remove;m[y].selected=!1,s.remove(y),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:d(p)}),c=o(!1)},clear(p){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=o(!1)},insert(p){const{index:m,displayValue:y,exportValue:g}=p.detail.insert,w=s.children[m],v=document.createElement("option");v.textContent=y,v.value=g,w?w.before(v):s.append(v),e.setValue(t,{value:o(!0),items:d(p)}),c=o(!1)},items(p){const{items:m}=p.detail;for(;s.length!==0;)s.remove(0);for(const y of m){const{displayValue:g,exportValue:w}=y,v=document.createElement("option");v.textContent=g,v.value=w,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:d(p)}),c=o(!1)},indices(p){const m=new Set(p.detail.indices);for(const y of p.target.options)y.selected=m.has(y.index);e.setValue(t,{value:o(!0)}),c=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,h)}),s.addEventListener("input",h=>{var m;const f=o(!0),p=o(!1);e.setValue(t,{value:f}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class _S extends Rt{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:Rt._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new c9({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${GE}${s}`).join(",")),this.container}}var Kh,I0,D0,Yh,Xh,Et,Ta,tl,Qh,Dg,Jh,Ei,br,nl,Ra,Og,Ma,Zh,rd,rl,He,sx,ix,SS,sL,iL,aL,oL,ax,ox,NS;class c9{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:c,rect:d,parentRect:h,open:f}){C(this,He);C(this,Kh,k(this,He,aL).bind(this));C(this,I0,k(this,He,NS).bind(this));C(this,D0,k(this,He,ox).bind(this));C(this,Yh,k(this,He,ax).bind(this));C(this,Xh,null);C(this,Et,null);C(this,Ta,null);C(this,tl,null);C(this,Qh,null);C(this,Dg,null);C(this,Jh,null);C(this,Ei,!1);C(this,br,null);C(this,nl,null);C(this,Ra,null);C(this,Og,null);C(this,Ma,null);C(this,Zh,null);C(this,rd,null);C(this,rl,!1);S(this,Et,e),S(this,Zh,s),S(this,Ta,a),S(this,Ma,o),S(this,Dg,c),S(this,Xh,t),S(this,Og,d),S(this,Jh,h),S(this,Qh,r),S(this,tl,c0.toDateObject(i)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),k(this,He,sx).call(this),u(this,Et).hidden=!0,f&&k(this,He,ax).call(this)}render(){var s;if(u(this,br))return;const e=S(this,br,document.createElement("div"));if(e.className="popup",u(this,Xh)){const i=e.style.outlineColor=ue.makeHexColor(...u(this,Xh));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=u(this,Zh))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=u(this,Zh)}if(e.append(t),u(this,tl)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,tl).valueOf()})),i.dateTime=u(this,tl).toISOString(),t.append(i)}const r=u(this,He,ix);if(r)eL.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(u(this,Ta));e.append(i)}u(this,Et).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const o=s[i];r.append(document.createTextNode(o)),i<a-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popup:t,deleted:r}){var s;if(r||t!=null&&t.deleted){this.remove();return}k(this,He,sx).call(this),u(this,rd)||S(this,rd,{contentsObj:u(this,Ta),richText:u(this,Ma)}),e&&S(this,Ra,null),t&&(S(this,Ma,k(this,He,iL).call(this,t.text)),S(this,tl,c0.toDateObject(t.date)),S(this,Ta,null)),(s=u(this,br))==null||s.remove(),S(this,br,null)}resetEdited(){var e;u(this,rd)&&({contentsObj:Xt(this,Ta)._,richText:Xt(this,Ma)._}=u(this,rd),S(this,rd,null),(e=u(this,br))==null||e.remove(),S(this,br,null),S(this,Ra,null))}remove(){var e,t;(e=u(this,nl))==null||e.abort(),S(this,nl,null),(t=u(this,br))==null||t.remove(),S(this,br,null),S(this,rl,!1),S(this,Ei,!1);for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){S(this,rl,this.isVisible),u(this,rl)&&(u(this,Et).hidden=!0)}maybeShow(){k(this,He,sx).call(this),u(this,rl)&&(u(this,br)||k(this,He,ox).call(this),S(this,rl,!1),u(this,Et).hidden=!1)}get isVisible(){return u(this,Et).hidden===!1}}Kh=new WeakMap,I0=new WeakMap,D0=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,Et=new WeakMap,Ta=new WeakMap,tl=new WeakMap,Qh=new WeakMap,Dg=new WeakMap,Jh=new WeakMap,Ei=new WeakMap,br=new WeakMap,nl=new WeakMap,Ra=new WeakMap,Og=new WeakMap,Ma=new WeakMap,Zh=new WeakMap,rd=new WeakMap,rl=new WeakMap,He=new WeakSet,sx=function(){var t;if(u(this,nl))return;S(this,nl,new AbortController);const{signal:e}=u(this,nl);for(const r of this.trigger)r.addEventListener("click",u(this,Yh),{signal:e}),r.addEventListener("mouseenter",u(this,D0),{signal:e}),r.addEventListener("mouseleave",u(this,I0),{signal:e}),r.classList.add("popupTriggerArea");for(const r of u(this,Qh))(t=r.container)==null||t.addEventListener("keydown",u(this,Kh),{signal:e})},ix=function(){const e=u(this,Ma),t=u(this,Ta);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Ma).html||null},SS=function(){var e,t,r;return((r=(t=(e=u(this,He,ix))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},sL=function(){var e,t,r;return((r=(t=(e=u(this,He,ix))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},iL=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:u(this,He,sL),fontSize:u(this,He,SS)?`calc(${u(this,He,SS)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},aL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Ei))&&k(this,He,ax).call(this)},oL=function(){if(u(this,Ra)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=u(this,Dg);let a=!!u(this,Jh),o=a?u(this,Jh):u(this,Og);for(const y of u(this,Qh))if(!o||ue.intersect(y.data.rect,o)!==null){o=y.data.rect,a=!0;break}const c=ue.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,f=c[0]+h,p=c[1];S(this,Ra,[100*(f-s)/t,100*(p-i)/r]);const{style:m}=u(this,Et);m.left=`${u(this,Ra)[0]}%`,m.top=`${u(this,Ra)[1]}%`},ax=function(){S(this,Ei,!u(this,Ei)),u(this,Ei)?(k(this,He,ox).call(this),u(this,Et).addEventListener("click",u(this,Yh)),u(this,Et).addEventListener("keydown",u(this,Kh))):(k(this,He,NS).call(this),u(this,Et).removeEventListener("click",u(this,Yh)),u(this,Et).removeEventListener("keydown",u(this,Kh)))},ox=function(){u(this,br)||this.render(),this.isVisible?u(this,Ei)&&u(this,Et).classList.add("focused"):(k(this,He,oL).call(this),u(this,Et).hidden=!1,u(this,Et).style.zIndex=parseInt(u(this,Et).style.zIndex)+1e3)},NS=function(){u(this,Et).classList.remove("focused"),!(u(this,Ei)||!this.isVisible)&&(u(this,Et).hidden=!0,u(this,Et).style.zIndex=parseInt(u(this,Et).style.zIndex)-1e3)};class lL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Lg;class d9 extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Lg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=S(this,Lg,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Lg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lg=new WeakMap;var Fg;class u9 extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Fg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=S(this,Fg,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Fg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Fg=new WeakMap;var $g;class h9 extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,$g,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=S(this,$g,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",s/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,$g)}addHighlightArea(){this.container.classList.add("highlightArea")}}$g=new WeakMap;var zg;class cL extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,zg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!r)return this.container;const c=this.svgFactory.create(a,o,!0);let d=[];for(let f=0,p=r.length;f<p;f+=2){const m=r[f]-t[0],y=t[3]-r[f+1];d.push(`${m},${y}`)}d=d.join(" ");const h=S(this,zg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,zg)}addHighlightArea(){this.container.classList.add("highlightArea")}}zg=new WeakMap;class f9 extends cL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class p9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Bg,sd,Ug,ES;class ZE extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Ug);C(this,Bg,null);C(this,sd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ve.HIGHLIGHT:ve.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:c,height:d}=k(this,Ug,ES).call(this,r,t),h=this.svgFactory.create(c,d,!0),f=S(this,Bg,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let p=0,m=s.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);u(this,sd).push(y),y.setAttribute("points",s[p].join(",")),f.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,a=u(this,Bg);if(r>=0&&a.setAttribute("stroke-width",r||1),s)for(let o=0,c=u(this,sd).length;o<c;o++)u(this,sd)[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:c,height:d}=k(this,Ug,ES).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return u(this,sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bg=new WeakMap,sd=new WeakMap,Ug=new WeakSet,ES=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class dL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ve.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class m9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class g9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class v9 extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class uL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Hg,Wg,AS;class y9 extends Rt{constructor(t){var s;super(t,{isRenderable:!0});C(this,Wg);C(this,Hg,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",k(this,Wg,AS).bind(this)),S(this,Hg,s);const{isMac:i}=yn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&k(this,Wg,AS).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return u(this,Hg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hg=new WeakMap,Wg=new WeakSet,AS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Vg,id,sl,Gg,Bl,CS,kS;const _A=class _A{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:o}){C(this,Bl);C(this,Vg,null);C(this,id,null);C(this,sl,new Map);C(this,Gg,null);this.div=e,S(this,Vg,t),S(this,id,r),S(this,Gg,o||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return u(this,sl).size>0}async render(e){var a;const{annotations:t}=e,r=this.div;Hd(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new p0,annotationStorage:e.annotationStorage||new YE,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===It.POPUP;if(c){const f=s.get(o.id);if(!f)continue;i.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;i.data=o;const d=Ck.create(i);if(!d.isRenderable)continue;if(!c&&o.popupRef){const f=s.get(o.popupRef);f?f.push(d):s.set(o.popupRef,[d])}const h=d.render();o.hidden&&(h.style.visibility="hidden"),await k(this,Bl,CS).call(this,h,o.id,i.elements),d._isEditable&&(u(this,sl).set(d.data.id,d),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(d))}k(this,Bl,kS).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new p0,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=_A._defaultBorderStyle),r.data=s;const i=Ck.create(r);if(!i.isRenderable)continue;const a=i.render();await k(this,Bl,CS).call(this,a,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Hd(t,{rotation:e.rotation}),k(this,Bl,kS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,sl).values())}getEditableAnnotation(e){return u(this,sl).get(e)}static get _defaultBorderStyle(){return Pe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:xu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Vg=new WeakMap,id=new WeakMap,sl=new WeakMap,Gg=new WeakMap,Bl=new WeakSet,CS=async function(e,t,r){var o,c;const s=e.firstChild||e,i=s.id=`${GE}${t}`,a=await((o=u(this,Gg))==null?void 0:o.getAriaAttributes(i));if(a)for(const[d,h]of a)s.setAttribute(d,h);r?r.at(-1).container.after(e):(this.div.append(e),(c=u(this,Vg))==null||c.moveElementInDOM(this.div,e,s,!1))},kS=function(){var t;if(!u(this,id))return;const e=this.div;for(const[r,s]of u(this,id)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=u(this,sl).get(r);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}u(this,id).clear()};let jS=_A;const Sy=/\r\n?|\n/g;var es,_r,qg,ad,Sr,$t,hL,fL,pL,lx,qa,cx,dx,mL,TS,gL;const rt=class rt extends at{constructor(t){super({...t,name:"freeTextEditor"});C(this,$t);C(this,es);C(this,_r,"");C(this,qg,`${this.id}-editor`);C(this,ad,null);C(this,Sr);q(this,"_colorPicker",null);S(this,es,t.color||rt._defaultColor||at._defaultLineColor),S(this,Sr,t.fontSize||rt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=rt.prototype,r=a=>a.isEmpty(),s=Wd.TRANSLATE_SMALL,i=Wd.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new Rv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){at.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case Oe.FREETEXT_SIZE:rt._defaultFontSize=r;break;case Oe.FREETEXT_COLOR:rt._defaultColor=r;break}}updateParams(t,r){switch(t){case Oe.FREETEXT_SIZE:k(this,$t,hL).call(this,r);break;case Oe.FREETEXT_COLOR:k(this,$t,fL).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Oe.FREETEXT_SIZE,rt._defaultFontSize],[Oe.FREETEXT_COLOR,rt._defaultColor||at._defaultLineColor]]}get propertiesToUpdate(){return[[Oe.FREETEXT_SIZE,u(this,Sr)],[Oe.FREETEXT_COLOR,u(this,es)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new f0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Oe.FREETEXT_COLOR}get colorValue(){return u(this,es)}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-rt._internalPadding*t,-(rt._internalPadding+u(this,Sr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,ad,new AbortController);const t=this._uiManager.combinedSignal(u(this,ad));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,qg)),this._isDraggable=!0,(t=u(this,ad))==null||t.abort(),S(this,ad,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,_r),r=S(this,_r,k(this,$t,pL).call(this).trimEnd());if(t===r)return;const s=i=>{if(S(this,_r,i),!i){this.remove();return}k(this,$t,dx).call(this),this._uiManager.rebuild(this),k(this,$t,lx).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),k(this,$t,lx).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){rt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,qg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,Sr)}px * var(--total-scale-factor))`,s.color=u(this,es),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(o[0]-p)/h,g=r+this.height-(o[1]-m)/f;break;case 90:y=t+(o[0]-p)/h,g=r-(o[1]-m)/f,[c,d]=[d,-c];break;case 180:y=t-this.width+(o[0]-p)/h,g=r-(o[1]-m)/f,[c,d]=[-c,-d];break;case 270:y=t+(o[0]-p-this.height*f)/h,g=r+(o[1]-m-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(y*i,g*a,c,d)}else this._moveAfterPaste(t,r);k(this,$t,dx).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,w;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=k(y=rt,qa,TS).call(y,r.getData("text")||"").replaceAll(Sy,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=o,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Sy,"")),v!==this.editorDiv){let x=h;for(const _ of this.editorDiv.childNodes){if(_===v){x=f;continue}x.push(k(g=rt,qa,cx).call(g,_))}}h.push(c.nodeValue.slice(0,d).replaceAll(Sy,""))}else if(c===this.editorDiv){let v=h,x=0;for(const _ of this.editorDiv.childNodes)x++===d&&(v=f),v.push(k(w=rt,qa,cx).call(w,_))}S(this,_r,`${h.join(`
`)}${i}${f.join(`
`)}`),k(this,$t,dx).call(this);const p=new Range;let m=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(m<=x){p.setStart(v,m),p.setEnd(v,m);break}m-=x}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,s){var o;let i=null;if(t instanceof lL){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:h,rotation:f,id:p,popupRef:m,contentsObj:y},textContent:g,textPosition:w,parent:{page:{pageNumber:v}}}=t;if(!g||g.length===0)return null;i=t={annotationType:ve.FREETEXT,color:Array.from(d),fontSize:c,value:g.join(`
`),position:w,pageIndex:v-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:(y==null?void 0:y.str)||null}}const a=await super.deserialize(t,r,s);return S(a,Sr,t.fontSize),S(a,es,ue.makeHexColor(...t.color)),S(a,_r,k(o=rt,qa,TS).call(o,t.value)),a._initialData=i,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=rt._internalPadding*this.parentScale,s=this.getRect(r,r),i=at._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,es)),a={annotationType:ve.FREETEXT,color:i,fontSize:u(this,Sr),value:k(this,$t,mL).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!k(this,$t,gL).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t),{style:s}=r;s.fontSize=`calc(${u(this,Sr)}px * var(--total-scale-factor))`,s.color=u(this,es),r.replaceChildren();for(const o of u(this,_r).split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),r.append(c)}const i=rt._internalPadding*this.parentScale,a={rect:this.getRect(i,i)};return a.popup=this.hasEditedComment?this.comment:{text:u(this,_r)},t.updateEdited(a),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};es=new WeakMap,_r=new WeakMap,qg=new WeakMap,ad=new WeakMap,Sr=new WeakMap,$t=new WeakSet,hL=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,Sr))*this.parentScale),S(this,Sr,i),k(this,$t,lx).call(this)},s=u(this,Sr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},fL=function(t){const r=i=>{var a;S(this,es,this.editorDiv.style.color=i),(a=this._colorPicker)==null||a.update(i)},s=u(this,es);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},pL=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(k(s=rt,qa,cx).call(s,i)),r=i);return t.join(`
`)},lx=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},qa=new WeakSet,cx=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Sy,"")},dx=function(){if(this.editorDiv.replaceChildren(),!!u(this,_r))for(const t of u(this,_r).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},mL=function(){return u(this,_r).replaceAll(" "," ")},TS=function(t){return t.replaceAll(" "," ")},gL=function(t){const{value:r,fontSize:s,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((o,c)=>o!==i[c])||t.pageIndex!==a},C(rt,qa),q(rt,"_freeTextDefaultContent",""),q(rt,"_internalPadding",0),q(rt,"_defaultColor",null),q(rt,"_defaultFontSize",10),q(rt,"_type","freetext"),q(rt,"_editorType",ve.FREETEXT);let PS=rt;class se{toSVGPath(){tt("Abstract method `toSVGPath` must be implemented.")}get box(){tt("Abstract getter `box` must be implemented.")}serialize(e,t){tt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o]*s,a[o+1]=r+e[o+1]*i;return a}static _rescaleAndSwap(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o+1]*s,a[o+1]=r+e[o]*i;return a}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,a){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+a)/6,(r+i)/2,(s+a)/2]}}q(se,"PRECISION",1e-4);var Nr,Os,ef,tf,Ai,ke,od,ld,Kg,Yg,nf,rf,il,Xg,O0,L0,Yt,Op,vL,yL,xL,wL,bL,_L;const oa=class oa{constructor({x:e,y:t},r,s,i,a,o=0){C(this,Yt);C(this,Nr);C(this,Os,[]);C(this,ef);C(this,tf);C(this,Ai,[]);C(this,ke,new Float32Array(18));C(this,od);C(this,ld);C(this,Kg);C(this,Yg);C(this,nf);C(this,rf);C(this,il,[]);S(this,Nr,r),S(this,rf,i*s),S(this,tf,a),u(this,ke).set([NaN,NaN,NaN,NaN,e,t],6),S(this,ef,o),S(this,Yg,u(oa,Xg)*s),S(this,Kg,u(oa,L0)*s),S(this,nf,s),u(this,il).push(e,t)}isEmpty(){return isNaN(u(this,ke)[8])}add({x:e,y:t}){var T;S(this,od,e),S(this,ld,t);const[r,s,i,a]=u(this,Nr);let[o,c,d,h]=u(this,ke).subarray(8,12);const f=e-d,p=t-h,m=Math.hypot(f,p);if(m<u(this,Kg))return!1;const y=m-u(this,Yg),g=y/m,w=g*f,v=g*p;let x=o,_=c;o=d,c=h,d+=w,h+=v,(T=u(this,il))==null||T.push(e,t);const N=-v/y,E=w/y,A=N*u(this,rf),j=E*u(this,rf);return u(this,ke).set(u(this,ke).subarray(2,8),0),u(this,ke).set([d+A,h+j],4),u(this,ke).set(u(this,ke).subarray(14,18),12),u(this,ke).set([d-A,h-j],16),isNaN(u(this,ke)[6])?(u(this,Ai).length===0&&(u(this,ke).set([o+A,c+j],2),u(this,Ai).push(NaN,NaN,NaN,NaN,(o+A-r)/i,(c+j-s)/a),u(this,ke).set([o-A,c-j],14),u(this,Os).push(NaN,NaN,NaN,NaN,(o-A-r)/i,(c-j-s)/a)),u(this,ke).set([x,_,o,c,d,h],6),!this.isEmpty()):(u(this,ke).set([x,_,o,c,d,h],6),Math.abs(Math.atan2(_-c,x-o)-Math.atan2(v,w))<Math.PI/2?([o,c,d,h]=u(this,ke).subarray(2,6),u(this,Ai).push(NaN,NaN,NaN,NaN,((o+d)/2-r)/i,((c+h)/2-s)/a),[o,c,x,_]=u(this,ke).subarray(14,18),u(this,Os).push(NaN,NaN,NaN,NaN,((x+o)/2-r)/i,((_+c)/2-s)/a),!0):([x,_,o,c,d,h]=u(this,ke).subarray(0,6),u(this,Ai).push(((x+5*o)/6-r)/i,((_+5*c)/6-s)/a,((5*o+d)/6-r)/i,((5*c+h)/6-s)/a,((o+d)/2-r)/i,((c+h)/2-s)/a),[d,h,o,c,x,_]=u(this,ke).subarray(12,18),u(this,Os).push(((x+5*o)/6-r)/i,((_+5*c)/6-s)/a,((5*o+d)/6-r)/i,((5*c+h)/6-s)/a,((o+d)/2-r)/i,((c+h)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ai),t=u(this,Os);if(isNaN(u(this,ke)[6])&&!this.isEmpty())return k(this,Yt,vL).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);k(this,Yt,xL).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return k(this,Yt,yL).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,a){return new SL(e,t,r,s,i,a)}getOutlines(){var f;const e=u(this,Ai),t=u(this,Os),r=u(this,ke),[s,i,a,o]=u(this,Nr),c=new Float32Array((((f=u(this,il))==null?void 0:f.length)??0)+2);for(let p=0,m=c.length-2;p<m;p+=2)c[p]=(u(this,il)[p]-s)/a,c[p+1]=(u(this,il)[p+1]-i)/o;if(c[c.length-2]=(u(this,od)-s)/a,c[c.length-1]=(u(this,ld)-i)/o,isNaN(r[6])&&!this.isEmpty())return k(this,Yt,wL).call(this,c);const d=new Float32Array(u(this,Ai).length+24+u(this,Os).length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){d[p]=d[p+1]=NaN;continue}d[p]=e[p],d[p+1]=e[p+1]}h=k(this,Yt,_L).call(this,d,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[p+m],d[h+1]=t[p+m+1],h+=2}return k(this,Yt,bL).call(this,d,h),this.newFreeDrawOutline(d,c,u(this,Nr),u(this,nf),u(this,ef),u(this,tf))}};Nr=new WeakMap,Os=new WeakMap,ef=new WeakMap,tf=new WeakMap,Ai=new WeakMap,ke=new WeakMap,od=new WeakMap,ld=new WeakMap,Kg=new WeakMap,Yg=new WeakMap,nf=new WeakMap,rf=new WeakMap,il=new WeakMap,Xg=new WeakMap,O0=new WeakMap,L0=new WeakMap,Yt=new WeakSet,Op=function(){const e=u(this,ke).subarray(4,6),t=u(this,ke).subarray(16,18),[r,s,i,a]=u(this,Nr);return[(u(this,od)+(e[0]-t[0])/2-r)/i,(u(this,ld)+(e[1]-t[1])/2-s)/a,(u(this,od)+(t[0]-e[0])/2-r)/i,(u(this,ld)+(t[1]-e[1])/2-s)/a]},vL=function(){const[e,t,r,s]=u(this,Nr),[i,a,o,c]=k(this,Yt,Op).call(this);return`M${(u(this,ke)[2]-e)/r} ${(u(this,ke)[3]-t)/s} L${(u(this,ke)[4]-e)/r} ${(u(this,ke)[5]-t)/s} L${i} ${a} L${o} ${c} L${(u(this,ke)[16]-e)/r} ${(u(this,ke)[17]-t)/s} L${(u(this,ke)[14]-e)/r} ${(u(this,ke)[15]-t)/s} Z`},yL=function(e){const t=u(this,Os);e.push(`L${t[4]} ${t[5]} Z`)},xL=function(e){const[t,r,s,i]=u(this,Nr),a=u(this,ke).subarray(4,6),o=u(this,ke).subarray(16,18),[c,d,h,f]=k(this,Yt,Op).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${c} ${d} L${h} ${f} L${(o[0]-t)/s} ${(o[1]-r)/i}`)},wL=function(e){const t=u(this,ke),[r,s,i,a]=u(this,Nr),[o,c,d,h]=k(this,Yt,Op).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(f,e,u(this,Nr),u(this,nf),u(this,ef),u(this,tf))},bL=function(e,t){const r=u(this,Os);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},_L=function(e,t){const r=u(this,ke).subarray(4,6),s=u(this,ke).subarray(16,18),[i,a,o,c]=u(this,Nr),[d,h,f,p]=k(this,Yt,Op).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/o,(r[1]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/c],t),t+=24},C(oa,Xg,8),C(oa,O0,2),C(oa,L0,u(oa,Xg)+u(oa,O0));let m0=oa;var sf,cd,Ia,Qg,Er,Jg,Ct,F0,NL;class SL extends se{constructor(t,r,s,i,a,o){super();C(this,F0);C(this,sf);C(this,cd,new Float32Array(4));C(this,Ia);C(this,Qg);C(this,Er);C(this,Jg);C(this,Ct);S(this,Ct,t),S(this,Er,r),S(this,sf,s),S(this,Jg,i),S(this,Ia,a),S(this,Qg,o),this.lastPoint=[NaN,NaN],k(this,F0,NL).call(this,o);const[c,d,h,f]=u(this,cd);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-c)/h,t[p+1]=(t[p+1]-d)/f;for(let p=0,m=r.length;p<m;p+=2)r[p]=(r[p]-c)/h,r[p+1]=(r[p+1]-d)/f}toSVGPath(){const t=[`M${u(this,Ct)[4]} ${u(this,Ct)[5]}`];for(let r=6,s=u(this,Ct).length;r<s;r+=6){if(isNaN(u(this,Ct)[r])){t.push(`L${u(this,Ct)[r+4]} ${u(this,Ct)[r+5]}`);continue}t.push(`C${u(this,Ct)[r]} ${u(this,Ct)[r+1]} ${u(this,Ct)[r+2]} ${u(this,Ct)[r+3]} ${u(this,Ct)[r+4]} ${u(this,Ct)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],a){const o=s-t,c=i-r;let d,h;switch(a){case 0:d=se._rescale(u(this,Ct),t,i,o,-c),h=se._rescale(u(this,Er),t,i,o,-c);break;case 90:d=se._rescaleAndSwap(u(this,Ct),t,r,o,c),h=se._rescaleAndSwap(u(this,Er),t,r,o,c);break;case 180:d=se._rescale(u(this,Ct),s,r,-o,c),h=se._rescale(u(this,Er),s,r,-o,c);break;case 270:d=se._rescaleAndSwap(u(this,Ct),s,i,-o,-c),h=se._rescaleAndSwap(u(this,Er),s,i,-o,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return u(this,cd)}newOutliner(t,r,s,i,a,o=0){return new m0(t,r,s,i,a,o)}getNewOutline(t,r){const[s,i,a,o]=u(this,cd),[c,d,h,f]=u(this,sf),p=a*h,m=o*f,y=s*h+c,g=i*f+d,w=this.newOutliner({x:u(this,Er)[0]*p+y,y:u(this,Er)[1]*m+g},u(this,sf),u(this,Jg),t,u(this,Qg),r??u(this,Ia));for(let v=2;v<u(this,Er).length;v+=2)w.add({x:u(this,Er)[v]*p+y,y:u(this,Er)[v+1]*m+g});return w.getOutlines()}}sf=new WeakMap,cd=new WeakMap,Ia=new WeakMap,Qg=new WeakMap,Er=new WeakMap,Jg=new WeakMap,Ct=new WeakMap,F0=new WeakSet,NL=function(t){const r=u(this,Ct);let s=r[4],i=r[5];const a=[s,i,s,i];let o=s,c=i;const d=t?Math.max:Math.min;for(let f=6,p=r.length;f<p;f+=6){const m=r[f+4],y=r[f+5];if(isNaN(r[f]))ue.pointBoundingBox(m,y,a),c<y?(o=m,c=y):c===y&&(o=d(o,m));else{const g=[1/0,1/0,-1/0,-1/0];ue.bezierBoundingBox(s,i,...r.slice(f,f+6),g),ue.rectBoundingBox(...g,a),c<g[3]?(o=g[2],c=g[3]):c===g[3]&&(o=d(o,g[2]))}s=m,i=y}const h=u(this,cd);h[0]=a[0]-u(this,Ia),h[1]=a[1]-u(this,Ia),h[2]=a[2]-a[0]+2*u(this,Ia),h[3]=a[3]-a[1]+2*u(this,Ia),this.lastPoint=[o,c]};var Zg,ev,al,Ls,qn,EL,ux,AL,jL,MS;class RS{constructor(e,t=0,r=0,s=!0){C(this,qn);C(this,Zg);C(this,ev);C(this,al,[]);C(this,Ls,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:y,y:g,width:w,height:v}of e){const x=Math.floor((y-t)/o)*o,_=Math.ceil((y+w+t)/o)*o,N=Math.floor((g-t)/o)*o,E=Math.ceil((g+v+t)/o)*o,A=[x,N,E,!0],j=[_,N,E,!1];u(this,al).push(A,j),ue.rectBoundingBox(x,N,_,E,i)}const c=i[2]-i[0]+2*r,d=i[3]-i[1]+2*r,h=i[0]-r,f=i[1]-r,p=u(this,al).at(s?-1:-2),m=[p[0],p[2]];for(const y of u(this,al)){const[g,w,v]=y;y[0]=(g-h)/c,y[1]=(w-f)/d,y[2]=(v-f)/d}S(this,Zg,new Float32Array([h,f,c,d])),S(this,ev,m)}getOutlines(){u(this,al).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of u(this,al))t[3]?(e.push(...k(this,qn,MS).call(this,t)),k(this,qn,AL).call(this,t)):(k(this,qn,jL).call(this,t),e.push(...k(this,qn,MS).call(this,t)));return k(this,qn,EL).call(this,e)}}Zg=new WeakMap,ev=new WeakMap,al=new WeakMap,Ls=new WeakMap,qn=new WeakSet,EL=function(e){const t=[],r=new Set;for(const a of e){const[o,c,d]=a;t.push([o,c,a],[o,d,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const c=t[a][2],d=t[a+1][2];c.push(d),d.push(c),r.add(c),r.add(d)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[o,c,d,h,f]=a;r.delete(a);let p=o,m=c;for(i=[o,d],s.push(i);;){let y;if(r.has(h))y=h;else if(r.has(f))y=f;else break;r.delete(y),[o,c,d,h,f]=y,p!==o&&(i.push(p,m,o,m===c?c:d),p=o),m=m===c?d:c}i.push(p,m)}return new x9(s,u(this,Zg),u(this,ev))},ux=function(e){const t=u(this,Ls);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1},AL=function([,e,t]){const r=k(this,qn,ux).call(this,e);u(this,Ls).splice(r,0,[e,t])},jL=function([,e,t]){const r=k(this,qn,ux).call(this,e);for(let s=r;s<u(this,Ls).length;s++){const[i,a]=u(this,Ls)[s];if(i!==e)break;if(i===e&&a===t){u(this,Ls).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=u(this,Ls)[s];if(i!==e)break;if(i===e&&a===t){u(this,Ls).splice(s,1);return}}},MS=function(e){const[t,r,s]=e,i=[[t,r,s]],a=k(this,qn,ux).call(this,s);for(let o=0;o<a;o++){const[c,d]=u(this,Ls)[o];for(let h=0,f=i.length;h<f;h++){const[,p,m]=i[h];if(!(d<=p||m<=c)){if(p>=c){if(m>d)i[h][1]=d;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=c,m>d&&i.push([t,d,m])}}}return i};var tv,af;class x9 extends se{constructor(t,r,s){super();C(this,tv);C(this,af);S(this,af,t),S(this,tv,r),this.lastPoint=s}toSVGPath(){const t=[];for(const r of u(this,af)){let[s,i]=r;t.push(`M${s} ${i}`);for(let a=2;a<r.length;a+=2){const o=r[a],c=r[a+1];o===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],a){const o=[],c=s-t,d=i-r;for(const h of u(this,af)){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=t+h[p]*c,f[p+1]=i-h[p+1]*d;o.push(f)}return o}get box(){return u(this,tv)}get classNamesForOutlining(){return["highlightOutline"]}}tv=new WeakMap,af=new WeakMap;class IS extends m0{newFreeDrawOutline(e,t,r,s,i,a){return new w9(e,t,r,s,i,a)}}class w9 extends SL{newOutliner(e,t,r,s,i,a=0){return new IS(e,t,r,s,i,a)}}var of,nv,Da,dd,rv,tr,sv,iv,ud,ts,Ar,un,lf,Oa,jn,cf,ns,av,_e,DS,hx,CL,kL,PL,OS,oc,as,Eu,TL,fx,Lp,RL,ML,IL,DL,OL;const Ve=class Ve extends at{constructor(t){super({...t,name:"highlightEditor"});C(this,_e);C(this,of,null);C(this,nv,0);C(this,Da);C(this,dd,null);C(this,rv,null);C(this,tr,null);C(this,sv,null);C(this,iv,0);C(this,ud,null);C(this,ts,null);C(this,Ar,null);C(this,un,!1);C(this,lf,null);C(this,Oa);C(this,jn,null);C(this,cf,"");C(this,ns);C(this,av,"");this.color=t.color||Ve._defaultColor,S(this,ns,t.thickness||Ve._defaultThickness),S(this,Oa,t.opacity||Ve._defaultOpacity),S(this,Da,t.boxes||null),S(this,av,t.methodOfCreation||""),S(this,cf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(S(this,un,!0),k(this,_e,hx).call(this,t),k(this,_e,oc).call(this)):u(this,Da)&&(S(this,of,t.anchorNode),S(this,nv,t.anchorOffset),S(this,sv,t.focusNode),S(this,iv,t.focusOffset),k(this,_e,DS).call(this),k(this,_e,oc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ve.prototype;return Pe(this,"_keyboardManager",new Rv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,un)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,ns),methodOfCreation:u(this,av)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;at.initialize(t,r),Ve._defaultColor||(Ve._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case Oe.HIGHLIGHT_COLOR:Ve._defaultColor=r;break;case Oe.HIGHLIGHT_THICKNESS:Ve._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return u(this,lf)}updateParams(t,r){switch(t){case Oe.HIGHLIGHT_COLOR:k(this,_e,CL).call(this,r);break;case Oe.HIGHLIGHT_THICKNESS:k(this,_e,kL).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,Ve._defaultColor],[Oe.HIGHLIGHT_THICKNESS,Ve._defaultThickness]]}get propertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,this.color||Ve._defaultColor],[Oe.HIGHLIGHT_THICKNESS,u(this,ns)||Ve._defaultThickness],[Oe.HIGHLIGHT_FREE,u(this,un)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,rv,new h0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,_e,Lp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,k(this,_e,Lp).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,_e,OS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,_e,oc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?k(this,_e,OS).call(this):t&&(k(this,_e,oc).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,a,o;const{drawLayer:r}=this.parent;let s;u(this,un)?(t=(t-this.rotation+360)%360,s=k(i=Ve,as,Eu).call(i,u(this,ts).box,t)):s=k(a=Ve,as,Eu).call(a,[this.x,this.y,this.width,this.height],t),r.updateProperties(u(this,Ar),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(u(this,jn),{bbox:k(o=Ve,as,Eu).call(o,u(this,tr).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,cf)&&(t.setAttribute("aria-label",u(this,cf)),t.setAttribute("role","mark")),u(this,un)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,_e,TL).bind(this),{signal:this._uiManager._signal});const r=S(this,ud,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=u(this,dd);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),nO(this,u(this,ud),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,jn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,jn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,_e,fx).call(this,!0);break;case 1:case 3:k(this,_e,fx).call(this,!1);break}}select(){var t;super.select(),u(this,jn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,jn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,jn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,jn),{rootClass:{selected:!1}}),u(this,un)||k(this,_e,fx).call(this,!1))}get _mustFixPosition(){return!u(this,un)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Ar),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,jn),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:a}){const{x:o,y:c,width:d,height:h}=s.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),k(this,as,DL).call(this,t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",Dt,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",ps,{signal:p}),s.addEventListener("pointermove",k(this,as,IL).bind(this,t),{signal:p}),this._freeHighlight=new IS({x:i,y:a},[o,c,d,h],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var g,w,v,x;let i=null;if(t instanceof dL){const{data:{quadPoints:_,rect:N,rotation:E,id:A,color:j,opacity:P,popupRef:T,contentsObj:R},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ve.HIGHLIGHT,color:Array.from(j),opacity:P,quadPoints:_,boxes:null,pageIndex:I-1,rect:N.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(R==null?void 0:R.str)||null}}else if(t instanceof ZE){const{data:{inkLists:_,rect:N,rotation:E,id:A,color:j,borderStyle:{rawWidth:P},popupRef:T,contentsObj:R},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ve.HIGHLIGHT,color:Array.from(j),thickness:P,inkLists:_,boxes:null,pageIndex:I-1,rect:N.slice(0),rotation:E,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(R==null?void 0:R.str)||null}}const{color:a,quadPoints:o,inkLists:c,opacity:d}=t,h=await super.deserialize(t,r,s);h.color=ue.makeHexColor(...a),S(h,Oa,d||1),c&&S(h,ns,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t.comment);const[f,p]=h.pageDimensions,[m,y]=h.pageTranslation;if(o){const _=S(h,Da,[]);for(let N=0;N<o.length;N+=8)_.push({x:(o[N]-m)/f,y:1-(o[N+1]-y)/p,width:(o[N+2]-o[N])/f,height:(o[N+1]-o[N+5])/p});k(g=h,_e,DS).call(g),k(w=h,_e,oc).call(w),h.rotate(h.rotation)}else if(c){S(h,un,!0);const _=c[0],N={x:_[0]-m,y:p-(_[1]-y)},E=new IS(N,[0,0,f,p],1,u(h,ns)/2,!0,.001);for(let P=0,T=_.length;P<T;P+=2)N.x=_[P]-m,N.y=p-(_[P+1]-y),E.add(N);const{id:A,clipPathId:j}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);k(v=h,_e,hx).call(v,{highlightOutlines:E.getOutlines(),highlightId:A,clipPathId:j}),k(x=h,_e,oc).call(x),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),s=at._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:ve.HIGHLIGHT,color:s,opacity:u(this,Oa),thickness:u(this,ns),quadPoints:k(this,_e,RL).call(this),outlines:k(this,_e,ML).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:k(this,_e,Lp).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!k(this,_e,OL).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}static canCreateNewEmptyEditor(){return!1}};of=new WeakMap,nv=new WeakMap,Da=new WeakMap,dd=new WeakMap,rv=new WeakMap,tr=new WeakMap,sv=new WeakMap,iv=new WeakMap,ud=new WeakMap,ts=new WeakMap,Ar=new WeakMap,un=new WeakMap,lf=new WeakMap,Oa=new WeakMap,jn=new WeakMap,cf=new WeakMap,ns=new WeakMap,av=new WeakMap,_e=new WeakSet,DS=function(){const t=new RS(u(this,Da),.001);S(this,ts,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,ts).box;const r=new RS(u(this,Da),.0025,.001,this._uiManager.direction==="ltr");S(this,tr,r.getOutlines());const{lastPoint:s}=u(this,tr);S(this,lf,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},hx=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(S(this,ts,t),S(this,tr,t.getNewOutline(u(this,ns)/2+1.5,.0025)),r>=0)S(this,Ar,r),S(this,dd,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),S(this,jn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,tr).box,path:{d:u(this,tr).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Ar),{bbox:k(f=Ve,as,Eu).call(f,u(this,ts).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,jn),{bbox:k(p=Ve,as,Eu).call(p,u(this,tr).box,m),path:{d:u(this,tr).toSVGPath()}})}const[a,o,c,d]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*y/m,this.height=d*m/y;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*y/m,this.height=d*m/y;break}}const{lastPoint:h}=u(this,tr);S(this,lf,[(h[0]-a)/c,(h[1]-o)/d])},CL=function(t){const r=(a,o)=>{var c,d;this.color=a,S(this,Oa,o),(c=this.parent)==null||c.drawLayer.updateProperties(u(this,Ar),{root:{fill:a,"fill-opacity":o}}),(d=u(this,rv))==null||d.updateColor(a)},s=this.color,i=u(this,Oa);this.addCommands({cmd:r.bind(this,t,Ve._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},kL=function(t){const r=u(this,ns),s=i=>{S(this,ns,i),k(this,_e,PL).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},PL=function(t){if(!u(this,un))return;k(this,_e,hx).call(this,{highlightOutlines:u(this,ts).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},OS=function(){u(this,Ar)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Ar)),S(this,Ar,null),this.parent.drawLayer.remove(u(this,jn)),S(this,jn,null))},oc=function(t=this.parent){u(this,Ar)===null&&({id:Xt(this,Ar)._,clipPathId:Xt(this,dd)._}=t.drawLayer.draw({bbox:u(this,ts).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Oa)},rootClass:{highlight:!0,free:u(this,un)},path:{d:u(this,ts).toSVGPath()}},!1,!0),S(this,jn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,un)},bbox:u(this,tr).box,path:{d:u(this,tr).toSVGPath()}},u(this,un))),u(this,ud)&&(u(this,ud).style.clipPath=u(this,dd)))},as=new WeakSet,Eu=function([t,r,s,i],a){switch(a){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},TL=function(t){Ve._keyboardManager.exec(this,t)},fx=function(t){if(!u(this,of))return;const r=window.getSelection();t?r.setPosition(u(this,of),u(this,nv)):r.setPosition(u(this,sv),u(this,iv))},Lp=function(){return u(this,un)?this.rotation:0},RL=function(){if(u(this,un))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,a=u(this,Da),o=new Float32Array(a.length*8);let c=0;for(const{x:d,y:h,width:f,height:p}of a){const m=d*t+s,y=(1-h)*r+i;o[c]=o[c+4]=m,o[c+1]=o[c+3]=y,o[c+2]=o[c+6]=m+f*t,o[c+5]=o[c+7]=y-p*r,c+=8}return o},ML=function(t){return u(this,ts).serialize(t,k(this,_e,Lp).call(this))},IL=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},DL=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},OL=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==r[i])},C(Ve,as),q(Ve,"_defaultColor",null),q(Ve,"_defaultOpacity",1),q(Ve,"_defaultThickness",12),q(Ve,"_type","highlight"),q(Ve,"_editorType",ve.HIGHLIGHT),q(Ve,"_freeHighlightId",-1),q(Ve,"_freeHighlight",null),q(Ve,"_freeHighlightClipId","");let g0=Ve;var hd;class LL{constructor(){C(this,hd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){u(this,hd)[e]=t}toSVGProperties(){const e=u(this,hd);return S(this,hd,Object.create(null)),{root:e}}reset(){S(this,hd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){tt("Not implemented")}}hd=new WeakMap;var jr,df,Zt,fd,pd,ol,ll,cl,md,ze,LS,FS,$S,Fp,FL,px,$p,Au;const ae=class ae extends at{constructor(t){super(t);C(this,ze);C(this,jr,null);C(this,df);q(this,"_colorPicker",null);q(this,"_drawId",null);S(this,df,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(k(this,ze,LS).call(this,t),k(this,ze,Fp).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,a]of Object.entries(r))s.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){tt("Not implemented")}static get typesMap(){tt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(u(ae,Zt).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,a=i[r],o=c=>{var h,f;i.updateProperty(r,c);const d=u(this,jr).updateProperty(r,c);d&&k(this,ze,$p).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&((f=this._colorPicker)==null||f.update(c))};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(u(this,jr).getPathResizingSVGProperties(k(this,ze,px).call(this)),{bbox:k(this,ze,Au).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(u(this,jr).getPathResizedSVGProperties(k(this,ze,px).call(this)),{bbox:k(this,ze,Au).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:k(this,ze,Au).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(u(this,jr).getPathTranslatedSVGProperties(k(this,ze,px).call(this),this.parentDimensions),{bbox:k(this,ze,Au).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,df)&&(S(this,df,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,ze,$S).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,ze,Fp).call(this),k(this,ze,$p).call(this,u(this,jr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,ze,$S).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,ze,Fp).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties({bbox:k(this,ze,Au).call(this)},u(this,jr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,ze,$p).call(this,u(this,jr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,a){tt("Not implemented")}static startDrawing(t,r,s,i){var w;const{target:a,offsetX:o,offsetY:c,pointerId:d,pointerType:h}=i;if(u(ae,ll)&&u(ae,ll)!==h)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=a.getBoundingClientRect(),y=S(ae,fd,new AbortController),g=t.combinedSignal(y);if(u(ae,ol)||S(ae,ol,d),u(ae,ll)??S(ae,ll,h),window.addEventListener("pointerup",v=>{var x;u(ae,ol)===v.pointerId?this._endDraw(v):(x=u(ae,cl))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var x;u(ae,ol)===v.pointerId?this._currentParent.endDrawingSession():(x=u(ae,cl))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{u(ae,ll)===v.pointerType&&((u(ae,cl)||S(ae,cl,new Set)).add(v.pointerId),u(ae,Zt).isCancellable()&&(u(ae,Zt).removeLastElement(),u(ae,Zt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",ps,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{v.timeStamp===u(ae,md)&&Dt(v)},{signal:g}),t.toggleDrawing(),(w=r._editorUndoBar)==null||w.hide(),u(ae,Zt)){t.drawLayer.updateProperties(this._currentDrawId,u(ae,Zt).startNew(o,c,p,m,f));return}r.updateUIForDefaultProperties(this),S(ae,Zt,this.createDrawerInstance(o,c,p,m,f)),S(ae,pd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(ae,pd).toSVGProperties(),u(ae,Zt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(S(ae,md,-1),!u(ae,Zt))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(u(ae,ol)===i){if(((a=u(ae,cl))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(ae,Zt).add(r,s)),S(ae,md,t.timeStamp),Dt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,S(ae,Zt,null),S(ae,pd,null),S(ae,ll,null),S(ae,md,NaN)),u(ae,fd)&&(u(ae,fd).abort(),S(ae,fd,null),S(ae,ol,NaN),S(ae,cl,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,u(ae,Zt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=u(ae,Zt),i=this._currentDrawId,a=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Oe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Oe.DRAW_STEP),!u(ae,Zt).isEmpty()){const{pageDimensions:[s,i],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(ae,Zt).getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:u(ae,pd),mustBeCommitted:!t});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,a,o){tt("Not implemented")}static async deserialize(t,r,s){var f,p;const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}=r.viewport,d=this.deserializeDraw(o,c,i,a,this._INNER_MARGIN,t),h=await super.deserialize(t,r,s);return h.createDrawingOptions(t),k(f=h,ze,LS).call(f,{drawOutlines:d}),k(p=h,ze,Fp).call(p),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[r,s]=this.pageTranslation,[i,a]=this.pageDimensions;return u(this,jr).serialize([r,s,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};jr=new WeakMap,df=new WeakMap,Zt=new WeakMap,fd=new WeakMap,pd=new WeakMap,ol=new WeakMap,ll=new WeakMap,cl=new WeakMap,md=new WeakMap,ze=new WeakSet,LS=function({drawOutlines:t,drawId:r,drawingOptions:s}){S(this,jr,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=k(this,ze,FS).call(this,t,this.parent),k(this,ze,$p).call(this,t.box)},FS=function(t,r){const{id:s}=r.drawLayer.draw(ae._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},$S=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Fp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,ze,FS).call(this,u(this,jr),t)}},FL=function([t,r,s,i]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[r,1-t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},px=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-r,t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},$p=function(t){if([this.x,this.y,this.width,this.height]=k(this,ze,FL).call(this,t),this.div){this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}this._onResized()},Au=function(){const{x:t,y:r,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[c,d]}=this;switch((a*4+o)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(c/d),i*(d/c),s*(c/d)];case 5:return[1-r,t,s*(c/d),i*(d/c)];case 6:return[1-t-i*(d/c),1-r,i*(d/c),s*(c/d)];case 7:return[r-s*(c/d),1-t-i*(d/c),s*(c/d),i*(d/c)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(d/c),r,i*(d/c),s*(c/d)];case 13:return[1-r-s*(c/d),t-i*(d/c),s*(c/d),i*(d/c)];case 14:return[1-t,1-r-s*(c/d),i*(d/c),s*(c/d)];case 15:return[r,1-t,s*(c/d),i*(d/c)];default:return[t,r,s,i]}},q(ae,"_currentDrawId",-1),q(ae,"_currentParent",null),C(ae,Zt,null),C(ae,fd,null),C(ae,pd,null),C(ae,ol,NaN),C(ae,ll,null),C(ae,cl,null),C(ae,md,NaN),q(ae,"_INNER_MARGIN",3);let v0=ae;var ji,en,tn,gd,uf,Dn,hn,rs,vd,yd,xd,hf,mx;class b9{constructor(e,t,r,s,i,a){C(this,hf);C(this,ji,new Float64Array(6));C(this,en);C(this,tn);C(this,gd);C(this,uf);C(this,Dn);C(this,hn,"");C(this,rs,0);C(this,vd,new Iv);C(this,yd);C(this,xd);S(this,yd,r),S(this,xd,s),S(this,gd,i),S(this,uf,a),[e,t]=k(this,hf,mx).call(this,e,t);const o=S(this,en,[NaN,NaN,NaN,NaN,e,t]);S(this,Dn,[e,t]),S(this,tn,[{line:o,points:u(this,Dn)}]),u(this,ji).set(o,0)}updateProperty(e,t){e==="stroke-width"&&S(this,uf,t)}isEmpty(){return!u(this,tn)||u(this,tn).length===0}isCancellable(){return u(this,Dn).length<=10}add(e,t){[e,t]=k(this,hf,mx).call(this,e,t);const[r,s,i,a]=u(this,ji).subarray(2,6),o=e-i,c=t-a;return Math.hypot(u(this,yd)*o,u(this,xd)*c)<=2?null:(u(this,Dn).push(e,t),isNaN(r)?(u(this,ji).set([i,a,e,t],2),u(this,en).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,ji)[0])&&u(this,en).splice(6,6),u(this,ji).set([r,s,i,a,e,t],0),u(this,en).push(...se.createBezierPoints(r,s,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(u(this,Dn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){S(this,yd,r),S(this,xd,s),S(this,gd,i),[e,t]=k(this,hf,mx).call(this,e,t);const a=S(this,en,[NaN,NaN,NaN,NaN,e,t]);S(this,Dn,[e,t]);const o=u(this,tn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),u(this,tn).push({line:a,points:u(this,Dn)}),u(this,ji).set(a,0),S(this,rs,0),this.toSVGPath(),null}getLastElement(){return u(this,tn).at(-1)}setLastElement(e){return u(this,tn)?(u(this,tn).push(e),S(this,en,e.line),S(this,Dn,e.points),S(this,rs,0),{path:{d:this.toSVGPath()}}):u(this,vd).setLastElement(e)}removeLastElement(){if(!u(this,tn))return u(this,vd).removeLastElement();u(this,tn).pop(),S(this,hn,"");for(let e=0,t=u(this,tn).length;e<t;e++){const{line:r,points:s}=u(this,tn)[e];S(this,en,r),S(this,Dn,s),S(this,rs,0),this.toSVGPath()}return{path:{d:u(this,hn)}}}toSVGPath(){const e=se.svgRound(u(this,en)[4]),t=se.svgRound(u(this,en)[5]);if(u(this,Dn).length===2)return S(this,hn,`${u(this,hn)} M ${e} ${t} Z`),u(this,hn);if(u(this,Dn).length<=6){const s=u(this,hn).lastIndexOf("M");S(this,hn,`${u(this,hn).slice(0,s)} M ${e} ${t}`),S(this,rs,6)}if(u(this,Dn).length===4){const s=se.svgRound(u(this,en)[10]),i=se.svgRound(u(this,en)[11]);return S(this,hn,`${u(this,hn)} L ${s} ${i}`),S(this,rs,12),u(this,hn)}const r=[];u(this,rs)===0&&(r.push(`M ${e} ${t}`),S(this,rs,6));for(let s=u(this,rs),i=u(this,en).length;s<i;s+=6){const[a,o,c,d,h,f]=u(this,en).slice(s,s+6).map(se.svgRound);r.push(`C${a} ${o} ${c} ${d} ${h} ${f}`)}return S(this,hn,u(this,hn)+r.join(" ")),S(this,rs,u(this,en).length),u(this,hn)}getOutlines(e,t,r,s){const i=u(this,tn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,vd).build(u(this,tn),e,t,r,u(this,gd),u(this,uf),s),S(this,ji,null),S(this,en,null),S(this,tn,null),S(this,hn,null),u(this,vd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ji=new WeakMap,en=new WeakMap,tn=new WeakMap,gd=new WeakMap,uf=new WeakMap,Dn=new WeakMap,hn=new WeakMap,rs=new WeakMap,vd=new WeakMap,yd=new WeakMap,xd=new WeakMap,hf=new WeakSet,mx=function(e,t){return se._normalizePoint(e,t,u(this,yd),u(this,xd),u(this,gd))};var On,ov,lv,Cr,Ci,ki,ff,pf,wd,mn,ra,$L,zL,BL;class Iv extends se{constructor(){super(...arguments);C(this,mn);C(this,On);C(this,ov,0);C(this,lv);C(this,Cr);C(this,Ci);C(this,ki);C(this,ff);C(this,pf);C(this,wd)}build(t,r,s,i,a,o,c){S(this,Ci,r),S(this,ki,s),S(this,ff,i),S(this,pf,a),S(this,wd,o),S(this,lv,c??0),S(this,Cr,t),k(this,mn,zL).call(this)}get thickness(){return u(this,wd)}setLastElement(t){return u(this,Cr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Cr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of u(this,Cr)){if(t.push(`M${se.svgRound(r[4])} ${se.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${se.svgRound(r[10])} ${se.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[a,o,c,d,h,f]=r.subarray(s,s+6).map(se.svgRound);t.push(`C${a} ${o} ${c} ${d} ${h} ${f}`)}}return t.join("")}serialize([t,r,s,i],a){const o=[],c=[],[d,h,f,p]=k(this,mn,$L).call(this);let m,y,g,w,v,x,_,N,E;switch(u(this,pf)){case 0:E=se._rescale,m=t,y=r+i,g=s,w=-i,v=t+d*s,x=r+(1-h-p)*i,_=t+(d+f)*s,N=r+(1-h)*i;break;case 90:E=se._rescaleAndSwap,m=t,y=r,g=s,w=i,v=t+h*s,x=r+d*i,_=t+(h+p)*s,N=r+(d+f)*i;break;case 180:E=se._rescale,m=t+s,y=r,g=-s,w=i,v=t+(1-d-f)*s,x=r+h*i,_=t+(1-d)*s,N=r+(h+p)*i;break;case 270:E=se._rescaleAndSwap,m=t+s,y=r+i,g=-s,w=-i,v=t+(1-h-p)*s,x=r+(1-d-f)*i,_=t+(1-h)*s,N=r+(1-d)*i;break}for(const{line:A,points:j}of u(this,Cr))o.push(E(A,m,y,g,w,a?new Array(A.length):null)),c.push(E(j,m,y,g,w,a?new Array(j.length):null));return{lines:o,points:c,rect:[v,x,_,N]}}static deserialize(t,r,s,i,a,{paths:{lines:o,points:c},rotation:d,thickness:h}){const f=[];let p,m,y,g,w;switch(d){case 0:w=se._rescale,p=-t/s,m=r/i+1,y=1/s,g=-1/i;break;case 90:w=se._rescaleAndSwap,p=-r/i,m=-t/s,y=1/i,g=1/s;break;case 180:w=se._rescale,p=t/s+1,m=-r/i,y=-1/s,g=1/i;break;case 270:w=se._rescaleAndSwap,p=r/i+1,m=t/s+1,y=-1/i,g=-1/s;break}if(!o){o=[];for(const x of c){const _=x.length;if(_===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(_===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const N=new Float32Array(3*(_-2));o.push(N);let[E,A,j,P]=x.subarray(0,4);N.set([NaN,NaN,NaN,NaN,E,A],0);for(let T=4;T<_;T+=2){const R=x[T],I=x[T+1];N.set(se.createBezierPoints(E,A,j,P,R,I),(T-2)*3),[E,A,j,P]=[j,P,R,I]}}}for(let x=0,_=o.length;x<_;x++)f.push({line:w(o[x].map(N=>N??NaN),p,m,y,g),points:w(c[x].map(N=>N??NaN),p,m,y,g)});const v=new this.prototype.constructor;return v.build(f,s,i,1,d,h,a),v}get box(){return u(this,On)}updateProperty(t,r){return t==="stroke-width"?k(this,mn,BL).call(this,r):null}updateParentDimensions([t,r],s){const[i,a]=k(this,mn,ra).call(this);S(this,Ci,t),S(this,ki,r),S(this,ff,s);const[o,c]=k(this,mn,ra).call(this),d=o-i,h=c-a,f=u(this,On);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(t){return S(this,ov,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,On).map(se.svgRound).join(" ")}get defaultProperties(){const[t,r]=u(this,On);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=u(this,On);let s=0,i=0,a=0,o=0,c=0,d=0;switch(u(this,ov)){case 90:i=r/t,a=-t/r,c=t;break;case 180:s=-1,o=-1,c=t,d=r;break;case 270:i=-r/t,a=t/r,d=r;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${se.svgRound(c)} ${se.svgRound(d)})`}getPathResizingSVGProperties([t,r,s,i]){const[a,o]=k(this,mn,ra).call(this),[c,d,h,f]=u(this,On);if(Math.abs(h-a)<=se.PRECISION||Math.abs(f-o)<=se.PRECISION){const w=t+s/2-(c+h/2),v=r+i/2-(d+f/2);return{path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(r)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const p=(s-2*a)/(h-2*a),m=(i-2*o)/(f-2*o),y=h/s,g=f/i;return{path:{"transform-origin":`${se.svgRound(c)} ${se.svgRound(d)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${se.svgRound(a)} ${se.svgRound(o)}) scale(${p} ${m}) translate(${se.svgRound(-a)} ${se.svgRound(-o)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[a,o]=k(this,mn,ra).call(this),c=u(this,On),[d,h,f,p]=c;if(c[0]=t,c[1]=r,c[2]=s,c[3]=i,Math.abs(f-a)<=se.PRECISION||Math.abs(p-o)<=se.PRECISION){const v=t+s/2-(d+f/2),x=r+i/2-(h+p/2);for(const{line:_,points:N}of u(this,Cr))se._translate(_,v,x,_),se._translate(N,v,x,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(s-2*a)/(f-2*a),y=(i-2*o)/(p-2*o),g=-m*(d+a)+t+a,w=-y*(h+o)+r+o;if(m!==1||y!==1||g!==0||w!==0)for(const{line:v,points:x}of u(this,Cr))se._rescale(v,g,w,m,y,v),se._rescale(x,g,w,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${se.svgRound(t)} ${se.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,a]=s,o=u(this,On),c=t-o[0],d=r-o[1];if(u(this,Ci)===i&&u(this,ki)===a)for(const{line:h,points:f}of u(this,Cr))se._translate(h,c,d,h),se._translate(f,c,d,f);else{const h=u(this,Ci)/i,f=u(this,ki)/a;S(this,Ci,i),S(this,ki,a);for(const{line:p,points:m}of u(this,Cr))se._rescale(p,c,d,h,f,p),se._rescale(m,c,d,h,f,m);o[2]*=h,o[3]*=f}return o[0]=t,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${se.svgRound(t)} ${se.svgRound(r)}`}}}get defaultSVGProperties(){const t=u(this,On);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${se.svgRound(t[0])} ${se.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}On=new WeakMap,ov=new WeakMap,lv=new WeakMap,Cr=new WeakMap,Ci=new WeakMap,ki=new WeakMap,ff=new WeakMap,pf=new WeakMap,wd=new WeakMap,mn=new WeakSet,ra=function(t=u(this,wd)){const r=u(this,lv)+t/2*u(this,ff);return u(this,pf)%180===0?[r/u(this,Ci),r/u(this,ki)]:[r/u(this,ki),r/u(this,Ci)]},$L=function(){const[t,r,s,i]=u(this,On),[a,o]=k(this,mn,ra).call(this,0);return[t+a,r+o,s-2*a,i-2*o]},zL=function(){const t=S(this,On,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,Cr)){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)ue.pointBoundingBox(i[c],i[c+1],t);continue}let a=i[4],o=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,p,m,y,g]=i.subarray(c,c+6);ue.bezierBoundingBox(a,o,h,f,p,m,y,g,t),a=y,o=g}}const[r,s]=k(this,mn,ra).call(this);t[0]=$n(t[0]-r,0,1),t[1]=$n(t[1]-s,0,1),t[2]=$n(t[2]+r,0,1),t[3]=$n(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},BL=function(t){const[r,s]=k(this,mn,ra).call(this);S(this,wd,t);const[i,a]=k(this,mn,ra).call(this),[o,c]=[i-r,a-s],d=u(this,On);return d[0]-=o,d[1]-=c,d[2]+=2*o,d[3]+=2*c,d};class Lw extends LL{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:at._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Lw(this._viewParameters);return e.updateAll(this),e}}var $0,UL;const Uu=class Uu extends v0{constructor(t){super({...t,name:"inkEditor"});C(this,$0);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){at.initialize(t,r),this._defaultDrawingOptions=new Lw(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Pe(this,"typesMap",new Map([[Oe.INK_THICKNESS,"stroke-width"],[Oe.INK_COLOR,"stroke"],[Oe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,a){return new b9(t,r,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,a,o){return Iv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){let i=null;if(t instanceof ZE){const{data:{inkLists:o,rect:c,rotation:d,id:h,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,contentsObj:g},parent:{page:{pageNumber:w}}}=t;i=t={annotationType:ve.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:o},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:y,comment:(g==null?void 0:g.str)||null}}const a=await super.deserialize(t,r,s);return a._initialData=i,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new f0(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Oe.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Uu.getDefaultDrawingOptions({stroke:ue.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,d={annotationType:ve.INK,color:at._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:r,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!k(this,$0,UL).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){const{points:r,rect:s}=this.serializeDraw(!1),i={rect:s,thickness:this._drawingOptions["stroke-width"],points:r};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}};$0=new WeakSet,UL=function(t){const{color:r,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,c)=>o!==r[c])||t.thickness!==s||t.opacity!==i||t.pageIndex!==a},q(Uu,"_type","ink"),q(Uu,"_editorType",ve.INK),q(Uu,"_defaultDrawingOptions",null);let zS=Uu;class BS extends Iv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Ny=8,gp=3;var bd,Ge,US,Fs,HL,WL,HS,gx,VL,GL,qL,WS,VS,KL;class Ua{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,a,o,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const f=200,p=h.font=`${r} ${s} ${f}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:w,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:_}=h.measureText(e),N=1.5,E=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,_)*N),A=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||f,Math.abs(v)+Math.abs(x)||f)*N);d=new OffscreenCanvas(E,A),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=p,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,E,A),h.fillStyle="black",h.fillText(e,E*(N-1)/2,A*(3-N)/2);const j=k(this,Ge,WS).call(this,h.getImageData(0,0,E,A).data),P=k(this,Ge,qL).call(this,j),T=k(this,Ge,VS).call(this,P),R=k(this,Ge,HS).call(this,j,E,A,T);return this.processDrawnLines({lines:{curves:R,width:E,height:A},pageWidth:i,pageHeight:a,rotation:o,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[a,o,c]=k(this,Ge,KL).call(this,e),[d,h]=k(this,Ge,GL).call(this,a,o,c,Math.hypot(o,c)*u(this,bd).sigmaSFactor,u(this,bd).sigmaR,u(this,bd).kernelSize),f=k(this,Ge,VS).call(this,h),p=k(this,Ge,HS).call(this,d,o,c,f);return this.processDrawnLines({lines:{curves:p,width:o,height:c},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:a,areContours:o}){s%180!==0&&([t,r]=[r,t]);const{curves:c,width:d,height:h}=e,f=e.thickness??0,p=[],m=Math.min(t/d,r/h),y=m/t,g=m/r,w=[];for(const{points:x}of c){const _=a?k(this,Ge,VL).call(this,x):x;if(!_)continue;w.push(_);const N=_.length,E=new Float32Array(N),A=new Float32Array(3*(N===2?2:N-2));if(p.push({line:A,points:E}),N===2){E[0]=_[0]*y,E[1]=_[1]*g,A.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[j,P,T,R]=_;j*=y,P*=g,T*=y,R*=g,E.set([j,P,T,R],0),A.set([NaN,NaN,NaN,NaN,j,P],0);for(let I=4;I<N;I+=2){const O=E[I]=_[I]*y,z=E[I+1]=_[I+1]*g;A.set(se.createBezierPoints(j,P,T,R,O,z),(I-2)*3),[j,P,T,R]=[T,R,O,z]}}if(p.length===0)return null;const v=o?new BS:new Iv;return v.build(p,t,r,1,s,o?0:f,i),{outline:v,newCurves:w,areContours:o,thickness:f,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let a=1/0,o=-1/0,c=0;for(const _ of e){c+=_.length;for(let N=2,E=_.length;N<E;N++){const A=_[N]-_[N-2];a=Math.min(a,A),o=Math.max(o,A)}}let d;a>=-128&&o<=127?d=Int8Array:a>=-32768&&o<=32767?d=Int16Array:d=Int32Array;const h=e.length,f=Ny+gp*h,p=new Uint32Array(f);let m=0;p[m++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,p[m++]=0,p[m++]=s,p[m++]=i,p[m++]=t?0:1,p[m++]=Math.max(0,Math.floor(r??0)),p[m++]=h,p[m++]=d.BYTES_PER_ELEMENT;for(const _ of e)p[m++]=_.length-2,p[m++]=_[0],p[m++]=_[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(p);const w=d.prototype.constructor;for(const _ of e){const N=new w(_.length-2);for(let E=2,A=_.length;E<A;E++)N[E-2]=_[E]-_[E-2];g.write(N)}g.close();const v=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(v);return YD(x)}static async decompressSignature(e){try{const t=Wq(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,o=0;for await(const _ of r)a||(a=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),a.set(_,o),o+=_.length;const c=new Uint32Array(a.buffer,0,a.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],f=c[3],p=c[4]===0,m=c[5],y=c[6],g=c[7],w=[],v=(Ny+gp*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,v);break}o=0;for(let _=0;_<y;_++){const N=c[gp*_+Ny],E=new Float32Array(N+2);w.push(E);for(let A=0;A<gp-1;A++)E[A]=c[gp*_+Ny+A+1];for(let A=0;A<N;A++)E[A+2]=E[A]+x[o++]}return{areContours:p,thickness:m,outlines:w,width:h,height:f}}catch(t){return ye(`decompressSignature: ${t}`),null}}}bd=new WeakMap,Ge=new WeakSet,US=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},Fs=new WeakMap,HL=function(e,t,r,s,i,a,o){const c=k(this,Ge,US).call(this,r,s,i,a);for(let d=0;d<8;d++){const h=(-d+c-o+16)%8,f=u(this,Fs)[2*h],p=u(this,Fs)[2*h+1];if(e[(r+f)*t+(s+p)]!==0)return h}return-1},WL=function(e,t,r,s,i,a,o){const c=k(this,Ge,US).call(this,r,s,i,a);for(let d=0;d<8;d++){const h=(d+c+o+16)%8,f=u(this,Fs)[2*h],p=u(this,Fs)[2*h+1];if(e[(r+f)*t+(s+p)]!==0)return h}return-1},HS=function(e,t,r,s){const i=e.length,a=new Int32Array(i);for(let h=0;h<i;h++)a[h]=e[h]<=s?1:0;for(let h=1;h<r-1;h++)a[h*t]=a[h*t+t-1]=0;for(let h=0;h<t;h++)a[h]=a[t*r-1-h]=0;let o=1,c;const d=[];for(let h=1;h<r-1;h++){c=1;for(let f=1;f<t-1;f++){const p=h*t+f,m=a[p];if(m===0)continue;let y=h,g=f;if(m===1&&a[p-1]===0)o+=1,g-=1;else if(m>=1&&a[p+1]===0)o+=1,g+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const w=[f,h],v=g===f+1,x={isHole:v,points:w,id:o,parent:0};d.push(x);let _;for(const I of d)if(I.id===c){_=I;break}_?_.isHole?x.parent=v?_.parent:c:x.parent=v?c:_.parent:x.parent=v?c:0;const N=k(this,Ge,HL).call(this,a,t,h,f,y,g,0);if(N===-1){a[p]=-o,a[p]!==1&&(c=Math.abs(a[p]));continue}let E=u(this,Fs)[2*N],A=u(this,Fs)[2*N+1];const j=h+E,P=f+A;y=j,g=P;let T=h,R=f;for(;;){const I=k(this,Ge,WL).call(this,a,t,T,R,y,g,1);E=u(this,Fs)[2*I],A=u(this,Fs)[2*I+1];const O=T+E,z=R+A;w.push(z,O);const L=T*t+R;if(a[L+1]===0?a[L]=-o:a[L]===1&&(a[L]=o),O===h&&z===f&&T===j&&R===P){a[p]!==1&&(c=Math.abs(a[p]));break}else y=T,g=R,T=O,R=z}}}return d},gx=function(e,t,r,s){if(r-t<=4){for(let j=t;j<r-2;j+=2)s.push(e[j],e[j+1]);return}const i=e[t],a=e[t+1],o=e[r-4]-i,c=e[r-3]-a,d=Math.hypot(o,c),h=o/d,f=c/d,p=h*a-f*i,m=c/o,y=1/d,g=Math.atan(m),w=Math.cos(g),v=Math.sin(g),x=y*(Math.abs(w)+Math.abs(v)),_=y*(1-x+x**2),N=Math.max(Math.atan(Math.abs(v+w)*_),Math.atan(Math.abs(v-w)*_));let E=0,A=t;for(let j=t+2;j<r-2;j+=2){const P=Math.abs(p-h*e[j+1]+f*e[j]);P>E&&(A=j,E=P)}E>(d*N)**2?(k(this,Ge,gx).call(this,e,t,A+2,s),k(this,Ge,gx).call(this,e,A,r,s)):s.push(i,a)},VL=function(e){const t=[],r=e.length;return k(this,Ge,gx).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},GL=function(e,t,r,s,i,a){const o=new Float32Array(a**2),c=-2*s**2,d=a>>1;for(let g=0;g<a;g++){const w=(g-d)**2;for(let v=0;v<a;v++)o[g*a+v]=Math.exp((w+(v-d)**2)/c)}const h=new Float32Array(256),f=-2*i**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/f);const p=e.length,m=new Uint8Array(p),y=new Uint32Array(256);for(let g=0;g<r;g++)for(let w=0;w<t;w++){const v=g*t+w,x=e[v];let _=0,N=0;for(let A=0;A<a;A++){const j=g+A-d;if(!(j<0||j>=r))for(let P=0;P<a;P++){const T=w+P-d;if(T<0||T>=t)continue;const R=e[j*t+T],I=o[A*a+P]*h[Math.abs(R-x)];_+=R*I,N+=I}}const E=m[v]=Math.round(_/N);y[E]++}return[m,y]},qL=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},WS=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let o=0,c=r.length;o<c;o++){const d=r[o]=e[o<<2];s=Math.max(s,d),i=Math.min(i,d)}const a=255/(s-i);for(let o=0,c=r.length;o<c;o++)r[o]=(r[o]-i)*a;return r},VS=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(c=>c!==0);let a=i,o=i;for(t=i;t<256;t++){const c=e[t];c>r&&(t-a>s&&(s=t-a,o=t-1),r=c,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},KL=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=u(this,bd);let a=r,o=s;if(r>i||s>i){let p=r,m=s,y=Math.log2(Math.max(r,s)/i);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){a=Math.ceil(p/2),o=Math.ceil(m/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(e,0,0,p,m,0,0,a,o),p=a,m=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const w=Math.min(i/a,i/o);a=Math.round(a*w),o=Math.round(o*w)}const d=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,o),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,o);const h=d.getImageData(0,0,a,o).data;return[k(this,Ge,WS).call(this,h),a,o]},C(Ua,Ge),C(Ua,bd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),C(Ua,Fs,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class eA extends LL{constructor(){super(),super.updateProperties({fill:at._defaultLineColor,"stroke-width":0})}clone(){const e=new eA;return e.updateAll(this),e}}class tA extends Lw{constructor(e){super(e),super.updateProperties({stroke:at._defaultLineColor,"stroke-width":1})}clone(){const e=new tA(this._viewParameters);return e.updateAll(this),e}}var dl,Pi,ul,_d;const mr=class mr extends v0{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});C(this,dl,!1);C(this,Pi,null);C(this,ul,null);C(this,_d,null);this._willKeepAspectRatio=!0,S(this,ul,t.signatureData||null),S(this,Pi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){at.initialize(t,r),this._defaultDrawingOptions=new eA,this._defaultDrawnSignatureOptions=new tA(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Pe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Pi)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(u(this,ul)){const{lines:i,mustSmooth:a,areContours:o,description:c,uuid:d,heightInPage:h}=u(this,ul),{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=Ua.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:m,innerMargin:mr._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(y,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Pi)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){S(this,_d,t),this.addEditToolbar()}getUuid(){return u(this,_d)}get description(){return u(this,Pi)}set description(t){S(this,Pi,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:a}=u(this,ul),o=Math.max(i,a),c=Ua.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:a,y:o}=this,{outline:c}=S(this,ul,t);S(this,dl,c instanceof BS),this.description=s;let d;u(this,dl)?d=mr.getDefaultDrawingOptions():(d=mr._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[h,f]=this.parentDimensions,[,p]=this.pageDimensions;let m=r/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(h*this.width,f*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Ua.process(t,r,s,i,mr._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return Ua.extractContoursFromText(t,r,s,i,a,mr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Ua.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:mr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=mr.getDefaultDrawingOptions():(this._drawingOptions=mr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:ve.SIGNATURE,isSignature:!0,areContours:u(this,dl),color:[0,0,0],thickness:u(this,dl)?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.paths={lines:r,points:s},o.uuid=u(this,_d),o.isCopy=!0):o.lines=r,u(this,Pi)&&(o.accessibilityData={type:"Figure",alt:u(this,Pi)}),o}static deserializeDraw(t,r,s,i,a,o){return o.areContours?BS.deserialize(t,r,s,i,a,o):Iv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){var a;const i=await super.deserialize(t,r,s);return S(i,dl,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",S(i,_d,t.uuid),i}};dl=new WeakMap,Pi=new WeakMap,ul=new WeakMap,_d=new WeakMap,q(mr,"_type","signature"),q(mr,"_editorType",ve.SIGNATURE),q(mr,"_defaultDrawingOptions",null);let GS=mr;var gt,nn,hl,La,fl,mf,Fa,Sd,Ti,kr,gf,Be,zp,Bp,vx,yx,xx,KS,wx,YL;class qS extends at{constructor(t){super({...t,name:"stampEditor"});C(this,Be);C(this,gt,null);C(this,nn,null);C(this,hl,null);C(this,La,null);C(this,fl,null);C(this,mf,"");C(this,Fa,null);C(this,Sd,!1);C(this,Ti,null);C(this,kr,!1);C(this,gf,!1);S(this,La,t.bitmapUrl),S(this,fl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){at.initialize(t,r)}static isHandlingMimeForPasting(t){return z_.includes(t)}static paste(t,r){r.pasteEditor({mode:ve.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),r&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;u(this,nn)&&(S(this,gt,null),this._uiManager.imageManager.deleteId(u(this,nn)),(t=u(this,Fa))==null||t.remove(),S(this,Fa,null),u(this,Ti)&&(clearTimeout(u(this,Ti)),S(this,Ti,null))),super.remove()}rebuild(){if(!this.parent){u(this,nn)&&k(this,Be,vx).call(this);return}super.rebuild(),this.div!==null&&(u(this,nn)&&u(this,Fa)===null&&k(this,Be,vx).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,hl)||u(this,gt)||u(this,La)||u(this,fl)||u(this,nn)||u(this,Sd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Sd)||(u(this,gt)?k(this,Be,yx).call(this):k(this,Be,vx).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(S(this,nn,s),i&&S(this,gt,i),S(this,Sd,!1),k(this,Be,yx).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Ti)!==null&&clearTimeout(u(this,Ti)),S(this,Ti,setTimeout(()=>{S(this,Ti,null),k(this,Be,KS).call(this)},200))}copyCanvas(t,r,s=!1){var m;t||(t=224);const{width:i,height:a}=u(this,gt),o=new Gi;let c=u(this,gt),d=i,h=a,f=null;if(r){if(i>r||a>r){const P=Math.min(r/i,r/a);d=Math.floor(i*P),h=Math.floor(a*P)}f=document.createElement("canvas");const y=f.width=Math.ceil(d*o.sx),g=f.height=Math.ceil(h*o.sy);u(this,kr)||(c=k(this,Be,xx).call(this,y,g));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let v="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",x="#42414d");const _=15,N=_*o.sx,E=_*o.sy,A=new OffscreenCanvas(N*2,E*2),j=A.getContext("2d");j.fillStyle=v,j.fillRect(0,0,N*2,E*2),j.fillStyle=x,j.fillRect(0,0,N,E),j.fillRect(N,E,N,E),w.fillStyle=w.createPattern(A,"repeat"),w.fillRect(0,0,y,g),w.drawImage(c,0,0,c.width,c.height,0,0,y,g)}let p=null;if(s){let y,g;if(o.symmetric&&c.width<t&&c.height<t)y=c.width,g=c.height;else if(c=u(this,gt),i>t||a>t){const x=Math.min(t/i,t/a);y=Math.floor(i*x),g=Math.floor(a*x),u(this,kr)||(c=k(this,Be,xx).call(this,y,g))}const v=new OffscreenCanvas(y,g).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,y,g),p={width:y,height:g,data:v.getImageData(0,0,y,g).data}}return{canvas:f,width:d,height:h,imageData:p}}static async deserialize(t,r,s){var w;let i=null,a=!1;if(t instanceof uL){const{data:{rect:v,rotation:x,id:_,structParent:N,popupRef:E,contentsObj:A},container:j,parent:{page:{pageNumber:P}},canvas:T}=t;let R,I;T?(delete t.canvas,{id:R,bitmap:I}=s.imageManager.getFromCanvas(j.id,T),T.remove()):(a=!0,t._hasNoCanvas=!0);const O=((w=await r._structTree.getAriaAttributes(`${GE}${_}`))==null?void 0:w.get("aria-label"))||"";i=t={annotationType:ve.STAMP,bitmapId:R,bitmap:I,pageIndex:P-1,rect:v.slice(0),rotation:x,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:N,popupRef:E,comment:(A==null?void 0:A.str)||null}}const o=await super.deserialize(t,r,s),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:m}=t;a?(s.addMissingCanvas(t.id,o),S(o,Sd,!0)):f&&s.imageManager.isValidId(f)?(S(o,nn,f),d&&S(o,gt,d)):S(o,La,h),S(o,kr,p);const[y,g]=o.pageDimensions;return o.width=(c[2]-c[0])/y,o.height=(c[3]-c[1])/g,m&&(o.altTextData=m),o._initialData=i,t.comment&&o.setCommentData(t.comment),S(o,gf,!!i),o}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:ve.STAMP,bitmapId:u(this,nn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,kr),structTreeParentId:this._structTreeParentId};if(this.addComment(s),t)return s.bitmapUrl=k(this,Be,wx).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=k(this,Be,YL).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,r===null)return s;r.stamps||(r.stamps=new Map);const o=u(this,kr)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(u(this,nn)))r.stamps.set(u(this,nn),{area:o,serialized:s}),s.bitmap=k(this,Be,wx).call(this,!1);else if(u(this,kr)){const c=r.stamps.get(u(this,nn));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=k(this,Be,wx).call(this,!1))}return s}renderAnnotationElement(t){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}}gt=new WeakMap,nn=new WeakMap,hl=new WeakMap,La=new WeakMap,fl=new WeakMap,mf=new WeakMap,Fa=new WeakMap,Sd=new WeakMap,Ti=new WeakMap,kr=new WeakMap,gf=new WeakMap,Be=new WeakSet,zp=function(t,r=!1){if(!t){this.remove();return}S(this,gt,t.bitmap),r||(S(this,nn,t.id),S(this,kr,t.isSvg)),t.file&&S(this,mf,t.file.name),k(this,Be,yx).call(this)},Bp=function(){if(S(this,hl,null),this._uiManager.enableWaiting(!1),!!u(this,Fa)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},vx=function(){if(u(this,nn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,nn)).then(s=>k(this,Be,zp).call(this,s,!0)).finally(()=>k(this,Be,Bp).call(this));return}if(u(this,La)){const s=u(this,La);S(this,La,null),this._uiManager.enableWaiting(!0),S(this,hl,this._uiManager.imageManager.getFromUrl(s).then(i=>k(this,Be,zp).call(this,i)).finally(()=>k(this,Be,Bp).call(this)));return}if(u(this,fl)){const s=u(this,fl);S(this,fl,null),this._uiManager.enableWaiting(!0),S(this,hl,this._uiManager.imageManager.getFromFile(s).then(i=>k(this,Be,zp).call(this,i)).finally(()=>k(this,Be,Bp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=z_.join(",");const r=this._uiManager._signal;S(this,hl,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Be,zp).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>k(this,Be,Bp).call(this))),t.click()},yx=function(){var f;const{div:t}=this;let{width:r,height:s}=u(this,gt);const[i,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*i,s=this.height*a;else if(r>o*i||s>o*a){const p=Math.min(o*i/r,o*a/s);r*=p,s*=p}const[c,d]=this.parentDimensions;this.setDims(r*c/i,s*d/a),this._uiManager.enableWaiting(!1);const h=S(this,Fa,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=r/i,this.height=s/a,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Be,KS).call(this),u(this,gf)||(this.parent.addUndoableEditor(this),S(this,gf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,mf)&&this.div.setAttribute("aria-description",u(this,mf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},xx=function(t,r){const{width:s,height:i}=u(this,gt);let a=s,o=i,c=u(this,gt);for(;a>2*t||o>2*r;){const d=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(a,o);f.getContext("2d").drawImage(c,0,0,d,h,0,0,a,o),c=f.transferToImageBitmap()}return c},KS=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,a=new Gi,o=Math.ceil(s*t*a.sx),c=Math.ceil(i*r*a.sy),d=u(this,Fa);if(!d||d.width===o&&d.height===c)return;d.width=o,d.height=c;const h=u(this,kr)?u(this,gt):k(this,Be,xx).call(this,o,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,o,c)},wx=function(t){if(t){if(u(this,kr)){const i=this._uiManager.imageManager.getSvgUrl(u(this,nn));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=u(this,gt),r.getContext("2d").drawImage(u(this,gt),0,0),r.toDataURL()}if(u(this,kr)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Fl.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Fl.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(u(this,gt),0,0,u(this,gt).width,u(this,gt).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(u(this,gt))},YL=function(t){var o;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},q(qS,"_type","stamp"),q(qS,"_editorType",ve.STAMP);var Nd,vf,Ri,pl,$a,Pr,ml,yf,Ed,$s,za,rn,Ba,gl,xf,ce,vl,vt,XL,oi,XS,QS,bx;const Es=class Es{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:c,viewport:d,l10n:h}){C(this,vt);C(this,Nd);C(this,vf,!1);C(this,Ri,null);C(this,pl,null);C(this,$a,null);C(this,Pr,new Map);C(this,ml,!1);C(this,yf,!1);C(this,Ed,!1);C(this,$s,null);C(this,za,null);C(this,rn,null);C(this,Ba,null);C(this,gl,null);C(this,xf,-1);C(this,ce);const f=[...u(Es,vl).values()];if(!Es._initialized){Es._initialized=!0;for(const p of f)p.initialize(h,e)}e.registerEditorTypes(f),S(this,ce,e),this.pageIndex=t,this.div=r,S(this,Nd,i),S(this,Ri,a),this.viewport=d,S(this,rn,c),this.drawLayer=o,this._structTree=s,u(this,ce).addLayer(this)}get isEmpty(){return u(this,Pr).size===0}get isInvisible(){return this.isEmpty&&u(this,ce).getMode()===ve.NONE}updateToolbar(e){u(this,ce).updateToolbar(e)}updateMode(e=u(this,ce).getMode()){switch(k(this,vt,bx).call(this),e){case ve.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ve.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of u(Es,vl).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,rn))==null?void 0:t.div)}setEditingState(e){u(this,ce).setEditingState(e)}addCommands(e){u(this,ce).addCommands(e)}cleanUndoStack(e){u(this,ce).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Ri))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;S(this,Ed,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=u(this,gl))==null||r.abort(),S(this,gl,null);const e=new Set;for(const s of u(this,Pr).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(u(this,ce).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!u(this,Ri)){S(this,Ed,!1);return}const t=u(this,Ri).getEditableAnnotations();for(const s of t){if(s.hide(),u(this,ce).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}S(this,Ed,!1)}disable(){var s;if(S(this,yf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),u(this,rn)&&!u(this,gl)){S(this,gl,new AbortController);const i=u(this,ce).combinedSignal(u(this,gl));u(this,rn).div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:d,timeStamp:h}=a,f=u(this,xf);if(h-f>500){S(this,xf,h);return}S(this,xf,-1);const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(c,d);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const g=new RegExp(`^${WD}[0-9]+$`);for(const v of m)if(g.test(v.id)){y=v.id;break}if(!y)return;const w=u(this,Pr).get(y);(w==null?void 0:w.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of u(this,Pr).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(u(this,Ri)){const i=u(this,Ri).getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(u(this,ce).isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let c=t.get(o);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(o),c&&(u(this,ce).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}k(this,vt,bx).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of u(Es,vl).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,yf,!1)}getEditableAnnotation(e){var t;return((t=u(this,Ri))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ce).getActive()!==e&&u(this,ce).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,rn))!=null&&e.div&&!u(this,Ba)){S(this,Ba,new AbortController);const t=u(this,ce).combinedSignal(u(this,Ba));u(this,rn).div.addEventListener("pointerdown",k(this,vt,XL).bind(this),{signal:t}),u(this,rn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,rn))!=null&&e.div&&u(this,Ba)&&(u(this,Ba).abort(),S(this,Ba,null),u(this,rn).div.classList.remove("highlighting"))}enableClick(){if(u(this,pl))return;S(this,pl,new AbortController);const e=u(this,ce).combinedSignal(u(this,pl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,pl))==null||e.abort(),S(this,pl,null)}attach(e){u(this,Pr).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ce).isDeletedAnnotationElement(t)&&u(this,ce).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Pr).delete(e.id),(t=u(this,Nd))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,yf)&&e.annotationElementId&&u(this,ce).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ce).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ce).addDeletedAnnotationElement(e.annotationElementId),at.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ce).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Ed)),u(this,ce).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,$a)&&(e._focusEventsAllowed=!1,S(this,$a,setTimeout(()=>{S(this,$a,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ce)._signal}),t.focus())},0))),e._structTreeParentId=(r=u(this,Nd))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return u(this,ce).getId()}combinedSignal(e){return u(this,ce).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,vt,oi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,ce).updateMode(e.mode);const{offsetX:r,offsetY:s}=k(this,vt,QS).call(this),i=this.getNextId(),a=k(this,vt,XS).call(this,{parent:this,id:i,x:r,y:s,uiManager:u(this,ce),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=u(Es,vl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ce)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=k(this,vt,XS).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:u(this,ce),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(k(this,vt,QS).call(this),!0,e)}setSelected(e){u(this,ce).setSelected(e)}toggleSelected(e){u(this,ce).toggleSelected(e)}unselect(e){u(this,ce).unselect(e)}pointerup(e){var s;const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,ml)||(S(this,ml,!1),(s=u(this,vt,oi))!=null&&s.isDrawer&&u(this,vt,oi).supportMultipleDrawings))return;if(!u(this,vf)){S(this,vf,!0);return}const r=u(this,ce).getMode();if(r===ve.STAMP||r===ve.SIGNATURE){u(this,ce).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(u(this,ce).getMode()===ve.HIGHLIGHT&&this.enableTextSelection(),u(this,ml)){S(this,ml,!1);return}const{isMac:t}=yn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(S(this,ml,!0),(s=u(this,vt,oi))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=u(this,ce).getActive();S(this,vf,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,$s)){u(this,vt,oi).startDrawing(this,u(this,ce),!1,e);return}u(this,ce).setCurrentDrawingSession(this),S(this,$s,new AbortController);const t=u(this,ce).combinedSignal(u(this,$s));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(S(this,za,null),this.commitOrRemove())},{signal:t}),u(this,vt,oi).startDrawing(this,u(this,ce),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&S(this,za,t);return}u(this,za)&&setTimeout(()=>{var t;(t=u(this,za))==null||t.focus(),S(this,za,null)},0)}endDrawingSession(e=!1){return u(this,$s)?(u(this,ce).setCurrentDrawingSession(null),u(this,$s).abort(),S(this,$s,null),S(this,za,null),u(this,vt,oi).endDrawing(e)):null}findNewParent(e,t,r){const s=u(this,ce).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return u(this,$s)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,$s)&&u(this,vt,oi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,ce).getActive())==null?void 0:e.parent)===this&&(u(this,ce).commitOrRemove(),u(this,ce).setActiveEditor(null)),u(this,$a)&&(clearTimeout(u(this,$a)),S(this,$a,null));for(const r of u(this,Pr).values())(t=u(this,Nd))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,u(this,Pr).clear(),u(this,ce).removeLayer(this)}render({viewport:e}){this.viewport=e,Hd(this.div,e);for(const t of u(this,ce).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ce).commitOrRemove(),k(this,vt,bx).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Hd(this.div,{rotation:r}),t!==r)for(const s of u(this,Pr).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ce).viewParameters.realScale}};Nd=new WeakMap,vf=new WeakMap,Ri=new WeakMap,pl=new WeakMap,$a=new WeakMap,Pr=new WeakMap,ml=new WeakMap,yf=new WeakMap,Ed=new WeakMap,$s=new WeakMap,za=new WeakMap,rn=new WeakMap,Ba=new WeakMap,gl=new WeakMap,xf=new WeakMap,ce=new WeakMap,vl=new WeakMap,vt=new WeakSet,XL=function(e){u(this,ce).unselectAll();const{target:t}=e;if(t===u(this,rn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,rn).div.contains(t)){const{isMac:r}=yn.platform;if(e.button!==0||e.ctrlKey&&r)return;u(this,ce).showAllEditors("highlight",!0,!0),u(this,rn).div.classList.add("free"),this.toggleDrawing(),g0.startHighlighting(this,u(this,ce).direction==="ltr",{target:u(this,rn).div,x:e.x,y:e.y}),u(this,rn).div.addEventListener("pointerup",()=>{u(this,rn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,ce)._signal}),e.preventDefault()}},oi=function(){return u(Es,vl).get(u(this,ce).getMode())},XS=function(e){const t=u(this,vt,oi);return t?new t.prototype.constructor(e):null},QS=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+s),d=(i+o)/2-e,h=(a+c)/2-t,[f,p]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:f,offsetY:p}},bx=function(){for(const e of u(this,Pr).values())e.isEmpty()&&e.remove()},q(Es,"_initialized",!1),C(Es,vl,new Map([PS,zS,qS,g0,GS].map(e=>[e._editorType,e])));let YS=Es;var zs,Ln,Ad,cv,z0,QL,Ki,ZS,JL,eN;const Ht=class Ht{constructor({pageIndex:e}){C(this,Ki);C(this,zs,null);C(this,Ln,new Map);C(this,Ad,new Map);this.pageIndex=e}setParent(e){if(!u(this,zs)){S(this,zs,e);return}if(u(this,zs)!==e){if(u(this,Ln).size>0)for(const t of u(this,Ln).values())t.remove(),e.append(t);S(this,zs,e)}}static get _svgFactory(){return Pe(this,"_svgFactory",new p0)}draw(e,t=!1,r=!1){const s=Xt(Ht,cv)._++,i=k(this,Ki,ZS).call(this),a=Ht._svgFactory.createElement("defs");i.append(a);const o=Ht._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Ad).set(s,o);const d=r?k(this,Ki,JL).call(this,a,c):null,h=Ht._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(i,e),u(this,Ln).set(s,i),{id:s,clipPathId:`url(#${d})`}}drawOutline(e,t){const r=Xt(Ht,cv)._++,s=k(this,Ki,ZS).call(this),i=Ht._svgFactory.createElement("defs");s.append(i);const a=Ht._svgFactory.createElement("path");i.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const f=Ht._svgFactory.createElement("mask");i.append(f),c=`mask_p${this.pageIndex}_${r}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=Ht._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=Ht._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const d=Ht._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${o}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return s.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),u(this,Ln).set(r,s),r}finalizeDraw(e,t){u(this,Ad).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:r,bbox:s,rootClass:i,path:a}=t,o=typeof e=="number"?u(this,Ln).get(e):e;if(o){if(r&&k(this,Ki,eN).call(this,o,r),s&&k(c=Ht,z0,QL).call(c,o,s),i){const{classList:d}=o;for(const[h,f]of Object.entries(i))d.toggle(h,f)}if(a){const h=o.firstChild.firstChild;k(this,Ki,eN).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const r=u(this,Ln).get(e);r&&(u(t,zs).append(r),u(this,Ln).delete(e),u(t,Ln).set(e,r))}remove(e){u(this,Ad).delete(e),u(this,zs)!==null&&(u(this,Ln).get(e).remove(),u(this,Ln).delete(e))}destroy(){S(this,zs,null);for(const e of u(this,Ln).values())e.remove();u(this,Ln).clear(),u(this,Ad).clear()}};zs=new WeakMap,Ln=new WeakMap,Ad=new WeakMap,cv=new WeakMap,z0=new WeakSet,QL=function(e,[t,r,s,i]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},Ki=new WeakSet,ZS=function(){const e=Ht._svgFactory.create(1,1,!0);return u(this,zs).append(e),e.setAttribute("aria-hidden",!0),e},JL=function(e,t){const r=Ht._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Ht._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},eN=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},C(Ht,z0),C(Ht,cv,0);let JS=Ht;globalThis._pdfjsTestingUtils={HighlightOutliner:RS};globalThis.pdfjsLib={AbortException:Ll,AnnotationEditorLayer:YS,AnnotationEditorParamsType:Oe,AnnotationEditorType:ve,AnnotationEditorUIManager:Wd,AnnotationLayer:jS,AnnotationMode:No,AnnotationType:It,build:Z7,ColorPicker:h0,createValidAbsoluteUrl:VD,DOMSVGFactory:p0,DrawLayer:JS,FeatureTest:yn,fetchData:Pv,getDocument:YO,getFilenameFromUrl:Vq,getPdfFilenameFromUrl:Gq,getRGB:Dw,getUuid:KD,getXfaPageViewport:Kq,GlobalWorkerOptions:Di,ImageKind:Vy,InvalidPDFException:F_,isDataScheme:Iw,isPdfFile:KE,isValidExplicitDest:i7,MathClamp:$n,noContextMenu:ps,normalizeUnicode:Uq,OPS:o0,OutputScale:Gi,PasswordResponses:Mq,PDFDataRangeTransport:XO,PDFDateString:c0,PDFWorker:Tm,PermissionFlag:Rq,PixelsPerInch:Fl,RenderingCancelledException:qE,ResponseException:l0,setLayerDimensions:Hd,shadow:Pe,SignatureExtractor:Ua,stopEvent:Dt,SupportedImageMimeTypes:z_,TextLayer:km,TouchManager:u0,updateUrlHash:GD,Util:ue,VerbosityLevel:Tw,version:J7,XfaLayer:eL};Di.workerSrc="";const _9=()=>{const[n,e]=b.useState(!1),t=async a=>{try{const o=await a.arrayBuffer(),d=await YO(o).promise;let h="";for(let f=1;f<=d.numPages;f++){const y=(await(await d.getPage(f)).getTextContent()).items.map(g=>g.str??"").join(" ");h+=y+`
`}return h}catch(o){throw console.error("PDF extraction error:",o),new Error("Failed to extract text from PDF")}},r=a=>{const o=a.split(`
`).map(m=>m.trim()).filter(Boolean),c=[];let d="";const h=m=>/^(Basis|Modul)\s+.+$/i.test(m),f=m=>/^\d+$/.test(m);let p=0;for(;p<o.length;){const m=o[p];if(m.startsWith("Stand:")||/SIWF|Seite\s+\d+|Erfasste Prozeduren/i.test(m)){p++;continue}if(h(m)){d=m,p++;continue}if(d&&!f(m)){const y=m,g=[];let w=p+1;for(;w<o.length&&w<p+10;){const v=o[w];if(f(v)){g.push(parseInt(v)),w++;continue}if(h(v)||!f(v))break;w++}if(g.length>0){const v=g[0]||0,x=g[1]||0,_=g[2]||0,N=g[3]||0,E=g[4]||x+_+N;c.push({proc_name:y,module_name:d,minimum:v,responsible:x,instructing:_,assistant:N,total:E}),p=w;continue}}p++}return c},s=async a=>{const{data:{user:o}}=await re.auth.getUser();if(!o)throw new Error("Not authenticated");const{data:c,error:d}=await re.from("import_runs").insert({user_id:o.id,pdf_filename:a,source:"client_ai_parse",status:"running"}).select().single();if(d)throw d;return c};return{processFile:async a=>{e(!0);try{const o=await t(a),c=r(o),d=await s(a.name),h=c.map(f=>re.from("import_procedure_staging").insert({run_id:d.id,proc_name:f.proc_name,module_name:f.module_name,minimum:f.minimum,responsible:f.responsible,instructing:f.instructing,assistant:f.assistant,total:f.total,status:"pending"}));return await Promise.all(h),{success:!0,runId:d.id,summary:{filename:a.name,totalProcedures:c.length,modules:[],matched:0,needsReview:c.length},stagingData:c}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Processing failed"}}finally{e(!1)}},isProcessing:n}},S9=({open:n,onOpenChange:e,onSuccess:t})=>{const[r,s]=b.useState(!1),[i,a]=b.useState(0),[o,c]=b.useState(null),[d,h]=b.useState(!1),[f,p]=b.useState(!1),{toast:m}=ZN(),{processFile:y,isProcessing:g}=_9(),w=P=>{P.preventDefault(),P.stopPropagation(),P.type==="dragenter"||P.type==="dragover"?h(!0):P.type==="dragleave"&&h(!1)},v=P=>{P.preventDefault(),P.stopPropagation(),h(!1),P.dataTransfer.files&&P.dataTransfer.files[0]&&_(P.dataTransfer.files[0])},x=P=>{P.target.files&&P.target.files[0]&&_(P.target.files[0])},_=async P=>{if(P.type!=="application/pdf"){m({title:"Ungültiger Dateityp",description:"Bitte wählen Sie eine PDF-Datei aus.",variant:"destructive"});return}s(!0),a(0),c(null);try{const T=setInterval(()=>{a(I=>I<90?I+15:90)},200),R=await y(P);clearInterval(T),a(100),c(R),R.success&&R.summary?(p(!0),m({title:"PDF erfolgreich analysiert (AI)",description:`${R.summary.totalProcedures} Prozeduren erkannt.`})):m({title:"Fehler beim Verarbeiten",description:R.error||"Unbekannter Fehler",variant:"destructive"})}catch(T){m({title:"Verarbeitung fehlgeschlagen",description:T instanceof Error?T.message:"Unbekannter Fehler",variant:"destructive"})}finally{s(!1)}},N=()=>{a(0),c(null),s(!1),p(!1)},E=()=>{N(),e(!1)},A=()=>{p(!1),N()},j=()=>{t==null||t(),E()};return f&&(o!=null&&o.success)&&o.runId&&o.summary&&o.stagingData?l.jsx(Tq,{runId:o.runId,summary:o.summary,stagingData:o.stagingData,onClose:A,onImportComplete:j}):l.jsx(Av,{open:n,onOpenChange:E,children:l.jsxs(Xf,{className:"sm:max-w-md",children:[l.jsx(Qf,{children:l.jsxs(Jf,{className:"flex items-center gap-2",children:[l.jsx(Ml,{className:"h-5 w-5"}),"FMH eLogbuch PDF Upload"]})}),l.jsxs("div",{className:"space-y-4",children:[!o&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:`
                  border-2 border-dashed rounded-lg p-8 text-center transition-colors
                  ${d?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}
                  ${r?"pointer-events-none opacity-50":"cursor-pointer"}
                `,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:v,onClick:()=>{var P;r||(P=document.getElementById("pdf-upload"))==null||P.click()},children:[l.jsx(aw,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),l.jsx("p",{className:"text-sm font-medium mb-2",children:"PDF hier ablegen oder klicken zum Auswählen"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützt: FMH eLogbuch PDF-Exporte"}),l.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",className:"hidden",onChange:x,disabled:r})]}),r&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:"PDF wird verarbeitet..."}),l.jsxs("span",{children:[i,"%"]})]}),l.jsx(Tf,{value:i,className:"w-full"})]})]}),o&&!o.success&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive border border-destructive/20",children:[l.jsx(w5,{className:"h-5 w-5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium",children:"Fehler beim Verarbeiten"}),l.jsx("p",{className:"mt-1 text-sm",children:o.error})]})]}),l.jsxs("div",{className:"flex gap-2 justify-end",children:[l.jsx(J,{variant:"outline",onClick:N,children:"Erneut versuchen"}),l.jsx(J,{onClick:E,children:"Schließen"})]})]})]})]})})};function N9(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var nA="ScrollArea",[ZL,jQ]=ni(nA),[E9,gs]=ZL(nA),eF=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=n,[o,c]=b.useState(null),[d,h]=b.useState(null),[f,p]=b.useState(null),[m,y]=b.useState(null),[g,w]=b.useState(null),[v,x]=b.useState(0),[_,N]=b.useState(0),[E,A]=b.useState(!1),[j,P]=b.useState(!1),T=We(e,I=>c(I)),R=mw(s);return l.jsx(E9,{scope:t,type:r,dir:R,scrollHideDelay:i,scrollArea:o,viewport:d,onViewportChange:h,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:E,onScrollbarXEnabledChange:A,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:j,onScrollbarYEnabledChange:P,onCornerWidthChange:x,onCornerHeightChange:N,children:l.jsx(oe.div,{dir:R,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...n.style}})})});eF.displayName=nA;var tF="ScrollAreaViewport",nF=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,a=gs(tF,t),o=b.useRef(null),c=We(e,o,a.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(oe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:l.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});nF.displayName=tF;var Xi="ScrollAreaScrollbar",rA=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=gs(Xi,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,o=n.orientation==="horizontal";return b.useEffect(()=>(o?i(!0):a(!0),()=>{o?i(!1):a(!1)}),[o,i,a]),s.type==="hover"?l.jsx(A9,{...r,ref:e,forceMount:t}):s.type==="scroll"?l.jsx(j9,{...r,ref:e,forceMount:t}):s.type==="auto"?l.jsx(rF,{...r,ref:e,forceMount:t}):s.type==="always"?l.jsx(sA,{...r,ref:e}):null});rA.displayName=Xi;var A9=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=gs(Xi,n.__scopeScrollArea),[i,a]=b.useState(!1);return b.useEffect(()=>{const o=s.scrollArea;let c=0;if(o){const d=()=>{window.clearTimeout(c),a(!0)},h=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",d),o.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",d),o.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(ms,{present:t||i,children:l.jsx(rF,{"data-state":i?"visible":"hidden",...r,ref:e})})}),j9=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=gs(Xi,n.__scopeScrollArea),i=n.orientation==="horizontal",a=$w(()=>c("SCROLL_END"),100),[o,c]=N9("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(o==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[o,s.scrollHideDelay,c]),b.useEffect(()=>{const d=s.viewport,h=i?"scrollLeft":"scrollTop";if(d){let f=d[h];const p=()=>{const m=d[h];f!==m&&(c("SCROLL"),a()),f=m};return d.addEventListener("scroll",p),()=>d.removeEventListener("scroll",p)}},[s.viewport,i,c,a]),l.jsx(ms,{present:t||o!=="hidden",children:l.jsx(sA,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:he(n.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:he(n.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),rF=b.forwardRef((n,e)=>{const t=gs(Xi,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,a]=b.useState(!1),o=n.orientation==="horizontal",c=$w(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;a(o?d:h)}},10);return Of(t.viewport,c),Of(t.content,c),l.jsx(ms,{present:r||i,children:l.jsx(sA,{"data-state":i?"visible":"hidden",...s,ref:e})})}),sA=b.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=gs(Xi,n.__scopeScrollArea),i=b.useRef(null),a=b.useRef(0),[o,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=lF(o.viewport,o.content),h={...r,sizes:o,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function f(p,m){return M9(p,a.current,o,m)}return t==="horizontal"?l.jsx(C9,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,m=kk(p,o,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):t==="vertical"?l.jsx(k9,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,m=kk(p,o);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),C9=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=gs(Xi,n.__scopeScrollArea),[a,o]=b.useState(),c=b.useRef(null),d=We(e,c,i.onScrollbarXChange);return b.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),l.jsx(iF,{"data-orientation":"horizontal",...s,ref:d,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;n.onWheelScroll(p),dF(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:x0(a.paddingLeft),paddingEnd:x0(a.paddingRight)}})}})}),k9=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=gs(Xi,n.__scopeScrollArea),[a,o]=b.useState(),c=b.useRef(null),d=We(e,c,i.onScrollbarYChange);return b.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),l.jsx(iF,{"data-orientation":"vertical",...s,ref:d,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;n.onWheelScroll(p),dF(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:x0(a.paddingTop),paddingEnd:x0(a.paddingBottom)}})}})}),[P9,sF]=ZL(Xi),iF=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...p}=n,m=gs(Xi,t),[y,g]=b.useState(null),w=We(e,T=>g(T)),v=b.useRef(null),x=b.useRef(""),_=m.viewport,N=r.content-r.viewport,E=Lt(h),A=Lt(c),j=$w(f,10);function P(T){if(v.current){const R=T.clientX-v.current.left,I=T.clientY-v.current.top;d({x:R,y:I})}}return b.useEffect(()=>{const T=R=>{const I=R.target;(y==null?void 0:y.contains(I))&&E(R,N)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[_,y,N,E]),b.useEffect(A,[r,A]),Of(y,j),Of(m.content,j),l.jsx(P9,{scope:t,scrollbar:y,hasThumb:s,onThumbChange:Lt(i),onThumbPointerUp:Lt(a),onThumbPositionChange:A,onThumbPointerDown:Lt(o),children:l.jsx(oe.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:he(n.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),v.current=y.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),P(T))}),onPointerMove:he(n.onPointerMove,P),onPointerUp:he(n.onPointerUp,T=>{const R=T.target;R.hasPointerCapture(T.pointerId)&&R.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),y0="ScrollAreaThumb",aF=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=sF(y0,n.__scopeScrollArea);return l.jsx(ms,{present:t||s.hasThumb,children:l.jsx(T9,{ref:e,...r})})}),T9=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=gs(y0,t),a=sF(y0,t),{onThumbPositionChange:o}=a,c=We(e,f=>a.onThumbChange(f)),d=b.useRef(void 0),h=$w(()=>{d.current&&(d.current(),d.current=void 0)},100);return b.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(h(),!d.current){const m=I9(f,o);d.current=m,o()}};return o(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,h,o]),l.jsx(oe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:he(n.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),y=f.clientX-m.left,g=f.clientY-m.top;a.onThumbPointerDown({x:y,y:g})}),onPointerUp:he(n.onPointerUp,a.onThumbPointerUp)})});aF.displayName=y0;var iA="ScrollAreaCorner",oF=b.forwardRef((n,e)=>{const t=gs(iA,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?l.jsx(R9,{...n,ref:e}):null});oF.displayName=iA;var R9=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=gs(iA,t),[i,a]=b.useState(0),[o,c]=b.useState(0),d=!!(i&&o);return Of(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),Of(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),d?l.jsx(oe.div,{...r,ref:e,style:{width:i,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function x0(n){return n?parseInt(n,10):0}function lF(n,e){const t=n/e;return isNaN(t)?0:t}function Fw(n){const e=lF(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function M9(n,e,t,r="ltr"){const s=Fw(t),i=s/2,a=e||i,o=s-a,c=t.scrollbar.paddingStart+a,d=t.scrollbar.size-t.scrollbar.paddingEnd-o,h=t.content-t.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return cF([c,d],f)(n)}function kk(n,e,t="ltr"){const r=Fw(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,o=i-r,c=t==="ltr"?[0,a]:[a*-1,0],d=E_(n,c);return cF([0,a],[0,o])(d)}function cF(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function dF(n,e){return n>0&&n<e}var I9=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},a=t.left!==i.left,o=t.top!==i.top;(a||o)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function $w(n,e){const t=Lt(n),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Of(n,e){const t=Lt(e);Tt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var uF=eF,D9=nF,O9=oF;const hF=b.forwardRef(({className:n,children:e,...t},r)=>l.jsxs(uF,{ref:r,className:te("relative overflow-hidden",n),...t,children:[l.jsx(D9,{className:"h-full w-full rounded-[inherit]",children:e}),l.jsx(fF,{}),l.jsx(O9,{})]}));hF.displayName=uF.displayName;const fF=b.forwardRef(({className:n,orientation:e="vertical",...t},r)=>l.jsx(rA,{ref:r,orientation:e,className:te("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:l.jsx(aF,{className:"relative flex-1 rounded-full bg-border"})}));fF.displayName=rA.displayName;const L9=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:r}=Jd(),[s,i]=b.useState({}),[a,o]=b.useState({});b.useState(new Date().toLocaleDateString("de-CH"));const[c,d]=b.useState({name:"Sami Zacharia Hosari",id:"175214",institution:"USZ"}),[h,f]=b.useState(!1),[p,m]=b.useState(!1),[y,g]=b.useState([]),[w,v]=b.useState(5),x=b.useCallback(async()=>{m(!0);try{if(r){const{data:I}=await re.from("profiles").select("pgy_level").eq("user_id",r.id).single();I!=null&&I.pgy_level&&v(I.pgy_level)}const{data:A,error:j}=await re.from("procedure_categories").select("*").in("key",["basis_notfallchirurgie","basis_allgemeinchirurgie","viszeralchirurgie","traumatologie","kombination"]).order("sort_index"),{data:P,error:T}=await re.from("procedures").select("*").eq("active",!0).order("code");if(T){console.error("Error loading procedures:",T),Ae.error("Fehler beim Laden der Prozeduren");return}g(P||[]);const R={};A==null||A.forEach(I=>{const O=(P==null?void 0:P.filter(z=>z.category_id===I.id))||[];R[I.key]={id:I.id,key:I.key,title:I.title_de,totalMinimum:I.minimum_required||0,totalCount:0,procedures:O.map(z=>{var L;return{id:z.id,name:z.title_de,minimum:((L=z.min_required_by_pgy)==null?void 0:L[`pgy${w}`])||0,verantwortlich:0,instruierend:0,assistent:0,total:0}})}}),i(R),o(R),r&&await _(R)}catch(A){console.error("Error loading modules and procedures:",A),Ae.error("Fehler beim Laden der Daten")}finally{m(!1)}},[r,w,_]);b.useEffect(()=>{n&&x()},[n,x]),b.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[n]),b.useEffect(()=>{if(r){const{user_metadata:A}=r;A!=null&&A.full_name&&d(j=>({...j,name:A.full_name,institution:A.institution||"USZ"}))}},[r]);const _=b.useCallback(async A=>{if(r)try{console.log("🔍 FMHManualEntry - Loading data for user ID:",r.id);const{data:j,error:P}=await re.from("procedure_logs").select(`
          id,
          procedure_id,
          role_in_surgery,
          performed_date
        `).eq("user_id",r.id).gte("performed_date",new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0]);if(P){console.error("Error loading existing data:",P);return}console.log("📊 FMHManualEntry - Loaded",(j==null?void 0:j.length)||0,"procedure logs for user",r.id);const T={};j==null||j.forEach(O=>{T[O.procedure_id]||(T[O.procedure_id]={verantwortlich:0,instruierend:0,assistent:0}),O.role_in_surgery==="responsible"?T[O.procedure_id].verantwortlich++:O.role_in_surgery==="instructing"?T[O.procedure_id].instruierend++:O.role_in_surgery==="assistant"&&T[O.procedure_id].assistent++});const R={...A},I={...A};Object.keys(R).forEach(O=>{R[O].procedures.forEach((z,L)=>{const V=T[z.id];if(V){const B={...z,verantwortlich:V.verantwortlich,instruierend:V.instruierend,assistent:V.assistent,total:V.verantwortlich+V.instruierend+V.assistent};R[O].procedures[L]=B,I[O].procedures[L]={...B},console.log(`✅ Loaded counts for "${z.name}" - V:${V.verantwortlich} I:${V.instruierend} A:${V.assistent}`)}}),R[O].totalCount=R[O].procedures.reduce((z,L)=>z+L.total,0),I[O].totalCount=I[O].procedures.reduce((z,L)=>z+L.total,0)}),o(R),i(I),console.log("✅ Form initialized with existing data")}catch(j){console.error("Error loading existing procedure data:",j)}},[r]),N=(A,j,P,T)=>{i(R=>{const I={...R},O={...I[A].procedures[j]};return O[P]=Math.max(0,T),O.total=O.verantwortlich+O.instruierend+O.assistent,I[A]={...I[A],procedures:[...I[A].procedures.slice(0,j),O,...I[A].procedures.slice(j+1)]},I[A].totalCount=I[A].procedures.reduce((z,L)=>z+L.total,0),I})},E=async()=>{if(!r){Ae.error("Sie müssen angemeldet sein um Daten zu speichern");return}f(!0),console.log("🚀 Starting procedure save process..."),console.log("💾 FMHManualEntry - Saving data for user ID:",r.id);try{const A=[],j=[],P=[],T=[];for(const[I,O]of Object.entries(s)){console.log(`📋 Processing module: ${O.title}`);for(let z=0;z<O.procedures.length;z++){const L=O.procedures[z],V=a[I].procedures[z],B=L.verantwortlich-V.verantwortlich,F=L.instruierend-V.instruierend,D=L.assistent-V.assistent;if(B===0&&F===0&&D===0)continue;console.log(`📝 Processing procedure: "${L.name}" (Changes: V:${B} I:${F} A:${D})`);const M=L.id;if(!M){console.warn(`❌ No procedure ID for: ${L.name}`),P.push(L.name);continue}if(T.push(L.name),B>0)for(let U=0;U<B;U++)A.push({user_id:r.id,procedure_id:M,role_in_surgery:"responsible",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${O.title}`});if(F>0)for(let U=0;U<F;U++)A.push({user_id:r.id,procedure_id:M,role_in_surgery:"instructing",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${O.title}`});if(D>0)for(let U=0;U<D;U++)A.push({user_id:r.id,procedure_id:M,role_in_surgery:"assistant",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${O.title}`});if(B<0){const{data:U}=await re.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",M).eq("role_in_surgery","responsible").order("created_at",{ascending:!1}).limit(Math.abs(B));U&&j.push(...U.map(X=>X.id))}if(F<0){const{data:U}=await re.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",M).eq("role_in_surgery","instructing").order("created_at",{ascending:!1}).limit(Math.abs(F));U&&j.push(...U.map(X=>X.id))}if(D<0){const{data:U}=await re.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",M).eq("role_in_surgery","assistant").order("created_at",{ascending:!1}).limit(Math.abs(D));U&&j.push(...U.map(X=>X.id))}}}console.log(`📊 Summary: ${A.length} logs to insert, ${j.length} logs to delete`),console.log(`✅ Successful procedures: ${T.length}`,T),P.length>0&&console.log(`❌ Failed procedures: ${P.length}`,P);let R=0;if(A.length>0){console.log("💾 Inserting procedure logs into database...");const{error:I}=await re.from("procedure_logs").insert(A);if(I)throw console.error("❌ Database insertion error:",I),I;R+=A.length,console.log(`✅ Successfully inserted ${A.length} procedure logs`)}if(j.length>0){console.log("🗑️ Deleting procedure logs from database...");const{error:I}=await re.from("procedure_logs").delete().in("id",j);if(I)throw console.error("❌ Database deletion error:",I),I;R+=j.length,console.log(`✅ Successfully deleted ${j.length} procedure logs`)}if(R>0){let I=`${R} Änderungen erfolgreich gespeichert`;P.length>0&&(I+=`. ${P.length} Prozeduren konnten nicht verarbeitet werden.`),Ae.success(I),o({...s}),console.log("🔄 Refreshing FMH progress..."),t==null||t(),e(!1)}else console.log("⚠️ No changes to save"),Ae.warning("Keine Änderungen zum Speichern gefunden")}catch(A){console.error("❌ Error saving procedures:",A);const j=(A==null?void 0:A.message)||(A==null?void 0:A.toString())||"Unbekannter Fehler";Ae.error(`Fehler beim Speichern der Prozeduren: ${j}`)}finally{f(!1),console.log("🏁 Save process completed")}};return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ml,{className:"h-6 w-6 text-blue-600"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"FMH Operationsstatistik"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manuelle Eingabe der Operationen"})]})]}),l.jsx(J,{variant:"ghost",size:"sm",onClick:()=>e(!1),className:"h-8 w-8 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:l.jsx(no,{className:"h-4 w-4"})})]}),p?l.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(r_,{className:"h-5 w-5 animate-spin text-blue-600"}),l.jsx("span",{className:"text-gray-700",children:"Module und Prozeduren werden geladen..."})]})}):Object.keys(s).length===0?l.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:l.jsx("p",{className:"text-gray-600",children:"Keine Module gefunden"})}):l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[l.jsx("div",{className:"flex-1 flex flex-col p-6 overflow-hidden bg-white",children:l.jsxs(Xs,{defaultValue:Object.keys(s)[0],className:"flex-1 flex flex-col",children:[l.jsx(fs,{className:"flex w-full mb-6 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:Object.entries(s).map(([A,j])=>l.jsx(et,{value:A,className:"flex-shrink-0 whitespace-nowrap px-4 py-2 data-[state=active]:bg-white data-[state=active]:text-gray-900 text-gray-600 hover:text-gray-900 text-sm",children:j.title},A))}),Object.entries(s).map(([A,j])=>l.jsx(ot,{value:A,className:"flex-1 flex flex-col mt-0 overflow-hidden",children:l.jsxs(ee,{className:"flex-1 flex flex-col bg-white border border-gray-200 shadow-sm overflow-hidden",children:[l.jsx(st,{className:"flex-shrink-0 bg-gray-50 border-b border-gray-200 p-4",children:l.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[l.jsx(ut,{className:"text-lg text-gray-900",children:j.title}),l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs(de,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",children:["Minimum: ",j.totalMinimum]}),l.jsxs(de,{variant:j.totalCount>=j.totalMinimum?"default":"outline",className:"bg-green-100 text-green-800 border-green-200",children:["Total: ",j.totalCount]})]})]})}),l.jsx(Le,{className:"flex-1 p-0 bg-white overflow-hidden",children:l.jsx(hF,{className:"h-[400px]",children:l.jsxs("table",{className:"w-full min-w-[800px]",children:[l.jsx("thead",{className:"sticky top-0 border-b border-gray-200 bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left p-3 font-medium text-gray-700 min-w-[250px]",children:"Prozedur"}),l.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Min"}),l.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Verantwortlich"}),l.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Instruierend"}),l.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Assistent"}),l.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white",children:j.procedures.map((P,T)=>{var R,I;return l.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[l.jsxs("td",{className:"p-3",children:[l.jsx("div",{className:"font-medium text-gray-900 text-sm",children:P.name}),((I=(R=a[A])==null?void 0:R.procedures[T])==null?void 0:I.total)>0&&l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Gespeichert: V:",a[A].procedures[T].verantwortlich," I:",a[A].procedures[T].instruierend," A:",a[A].procedures[T].assistent]})]}),l.jsx("td",{className:"text-center p-3",children:l.jsx(de,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:P.minimum})}),l.jsx("td",{className:"text-center p-3",children:l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"verantwortlich",P.verantwortlich-1),children:l.jsx(xb,{className:"w-3 h-3"})}),l.jsx(Fe,{type:"number",min:"0",value:P.verantwortlich,onChange:O=>N(A,T,"verantwortlich",parseInt(O.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),l.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"verantwortlich",P.verantwortlich+1),children:l.jsx(kd,{className:"w-3 h-3"})})]})}),l.jsx("td",{className:"text-center p-3",children:l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"instruierend",P.instruierend-1),children:l.jsx(xb,{className:"w-3 h-3"})}),l.jsx(Fe,{type:"number",min:"0",value:P.instruierend,onChange:O=>N(A,T,"instruierend",parseInt(O.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),l.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"instruierend",P.instruierend+1),children:l.jsx(kd,{className:"w-3 h-3"})})]})}),l.jsx("td",{className:"text-center p-3",children:l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"assistent",P.assistent-1),children:l.jsx(xb,{className:"w-3 h-3"})}),l.jsx(Fe,{type:"number",min:"0",value:P.assistent,onChange:O=>N(A,T,"assistent",parseInt(O.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),l.jsx(J,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"assistent",P.assistent+1),children:l.jsx(kd,{className:"w-3 h-3"})})]})}),l.jsx("td",{className:"text-center p-3",children:l.jsx(de,{variant:P.total>=P.minimum?"default":"secondary",className:"font-medium text-xs bg-green-100 text-green-800 border-green-200",children:P.total})})]},P.id)})})]})})})]})},A))]})}),l.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4 bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Gesamtanzahl Eingriffe: ",Object.values(s).reduce((A,j)=>A+j.totalCount,0)]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(J,{variant:"outline",onClick:()=>e(!1),disabled:h,className:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400",children:"Abbrechen"}),l.jsxs(J,{onClick:E,disabled:h||Object.values(s).every(A=>A.totalCount===0),className:"gap-2 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400",children:[l.jsx(sw,{className:"w-4 h-4"}),h?"Speichere...":"Prozeduren speichern"]})]})]})})]})]})}):null},F9=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:r}=Jd(),[s,i]=b.useState([]),[a,o]=b.useState(!1),[c,d]=b.useState(null),[h,f]=b.useState({}),p=b.useCallback(async()=>{if(r){o(!0);try{const{data:N,error:E}=await re.from("procedure_logs").select(`
          id,
          performed_date,
          procedure_id,
          role_in_surgery,
          weighted_score,
          notes,
          hospital,
          supervisor,
          procedures (
            title_de,
            category_id,
            procedure_categories (
              key,
              title_de
            )
          )
        `).eq("user_id",r.id).order("performed_date",{ascending:!1});if(E)throw E;const A=(N||[]).map(j=>{var P,T,R,I,O;return{id:j.id,performed_date:j.performed_date,procedure_id:j.procedure_id,procedure_title:((P=j.procedures)==null?void 0:P.title_de)||"Unknown Procedure",category_key:((R=(T=j.procedures)==null?void 0:T.procedure_categories)==null?void 0:R.key)||"unknown",category_title:((O=(I=j.procedures)==null?void 0:I.procedure_categories)==null?void 0:O.title_de)||"Unknown Category",role_in_surgery:j.role_in_surgery||"responsible",weighted_score:j.weighted_score||1,notes:j.notes,hospital:j.hospital,supervisor:j.supervisor}});i(A)}catch(N){console.error("Error loading procedure logs:",N),Ae.error("Fehler beim Laden der Prozedur-Logs")}finally{o(!1)}}},[r]);b.useEffect(()=>{n&&r&&p()},[n,r,p]);const m=N=>{d(N.id),f({performed_date:N.performed_date,role_in_surgery:N.role_in_surgery,notes:N.notes,hospital:N.hospital,supervisor:N.supervisor})},y=async N=>{try{const{error:E}=await re.from("procedure_logs").update({performed_date:h.performed_date,role_in_surgery:h.role_in_surgery,notes:h.notes,hospital:h.hospital,supervisor:h.supervisor}).eq("id",N);if(E)throw E;d(null),f({}),await p(),Ae.success("Eintrag erfolgreich aktualisiert")}catch(E){console.error("Error updating log:",E),Ae.error("Fehler beim Aktualisieren des Eintrags")}},g=async N=>{if(confirm("Sind Sie sicher, dass Sie diesen Eintrag löschen möchten?"))try{const{error:E}=await re.from("procedure_logs").delete().eq("id",N);if(E)throw E;await p(),Ae.success("Eintrag erfolgreich gelöscht"),t&&t()}catch(E){console.error("Error deleting log:",E),Ae.error("Fehler beim Löschen des Eintrags")}},w=()=>{d(null),f({})},v=s.reduce((N,E)=>{const A=E.category_title;return N[A]||(N[A]=[]),N[A].push(E),N},{}),x=N=>({responsible:"Verantwortlich",instructing:"Instruierend",assistant:"Assistent"})[N]||N,_=N=>({responsible:"default",instructing:"secondary",assistant:"outline"})[N]||"outline";return l.jsx(Av,{open:n,onOpenChange:e,children:l.jsxs(Xf,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsx(Qf,{children:l.jsx(Jf,{children:"Prozedur-Korrekturen"})}),l.jsx("div",{className:"flex-1 overflow-hidden",children:a?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):l.jsxs(Xs,{defaultValue:Object.keys(v)[0],className:"h-full flex flex-col",children:[l.jsx(fs,{className:"grid w-full grid-cols-5",children:Object.keys(v).map(N=>l.jsxs(et,{value:N,className:"text-xs",children:[N.replace("Basis ","").replace("Modul ",""),l.jsx(de,{variant:"secondary",className:"ml-1",children:v[N].length})]},N))}),Object.entries(v).map(([N,E])=>l.jsx(ot,{value:N,className:"flex-1 overflow-hidden",children:l.jsx("div",{className:"overflow-auto h-full",children:l.jsxs(Rf,{children:[l.jsx(Mf,{children:l.jsxs(Ws,{children:[l.jsx(Ie,{children:"Datum"}),l.jsx(Ie,{children:"Prozedur"}),l.jsx(Ie,{children:"Rolle"}),l.jsx(Ie,{children:"Score"}),l.jsx(Ie,{children:"Spital"}),l.jsx(Ie,{children:"Supervisor"}),l.jsx(Ie,{children:"Notizen"}),l.jsx(Ie,{children:"Aktionen"})]})}),l.jsx(If,{children:E.map(A=>l.jsxs(Ws,{children:[l.jsx(De,{children:c===A.id?l.jsx(Fe,{type:"date",value:h.performed_date,onChange:j=>f(P=>({...P,performed_date:j.target.value})),className:"w-32"}):new Date(A.performed_date).toLocaleDateString("de-CH")}),l.jsx(De,{className:"max-w-48",children:l.jsx("div",{className:"truncate",title:A.procedure_title,children:A.procedure_title})}),l.jsx(De,{children:c===A.id?l.jsxs("select",{value:h.role_in_surgery,onChange:j=>f(P=>({...P,role_in_surgery:j.target.value})),className:"border rounded px-2 py-1",children:[l.jsx("option",{value:"responsible",children:"Verantwortlich"}),l.jsx("option",{value:"instructing",children:"Instruierend"}),l.jsx("option",{value:"assistant",children:"Assistent"})]}):l.jsx(de,{variant:_(A.role_in_surgery),children:x(A.role_in_surgery)})}),l.jsx(De,{children:A.weighted_score}),l.jsx(De,{children:c===A.id?l.jsx(Fe,{value:h.hospital||"",onChange:j=>f(P=>({...P,hospital:j.target.value})),className:"w-24"}):A.hospital||"-"}),l.jsx(De,{children:c===A.id?l.jsx(Fe,{value:h.supervisor||"",onChange:j=>f(P=>({...P,supervisor:j.target.value})),className:"w-24"}):A.supervisor||"-"}),l.jsx(De,{children:c===A.id?l.jsx(Fe,{value:h.notes||"",onChange:j=>f(P=>({...P,notes:j.target.value})),className:"w-32"}):l.jsx("div",{className:"max-w-32 truncate",title:A.notes,children:A.notes||"-"})}),l.jsx(De,{children:l.jsx("div",{className:"flex gap-1",children:c===A.id?l.jsxs(l.Fragment,{children:[l.jsx(J,{size:"sm",onClick:()=>y(A.id),children:l.jsx(sw,{className:"h-3 w-3"})}),l.jsx(J,{size:"sm",variant:"outline",onClick:w,children:l.jsx(no,{className:"h-3 w-3"})})]}):l.jsxs(l.Fragment,{children:[l.jsx(J,{size:"sm",variant:"outline",onClick:()=>m(A),children:l.jsx(lE,{className:"h-3 w-3"})}),l.jsx(J,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>g(A.id),children:l.jsx(H2,{className:"h-3 w-3"})})]})})})]},A.id))})]})})},N))]})}),l.jsx("div",{className:"border-t pt-4 flex justify-end gap-2",children:l.jsx(J,{variant:"outline",onClick:()=>e(!1),children:"Schließen"})})]})})},$9=()=>{const{user:n,loading:e}=Jd(),t=so(),[r,s]=b.useState([]),[i,a]=b.useState(null),[o,c]=b.useState(!0),[d,h]=b.useState(!1),[f,p]=b.useState(!1),[m,y]=b.useState(!1),[g,w]=b.useState(!1),[v,x]=b.useState(4);b.useEffect(()=>{if(!e&&!n){t("/auth");return}n&&_()},[n,e,t]);const _=async()=>{try{c(!0);const{data:{user:j}}=await re.auth.getUser();if(console.log("🔍 FMHDashboard - Loading data for user ID:",j==null?void 0:j.id),j){const{data:I}=await re.from("profiles").select("pgy_level").eq("user_id",j.id).single();I!=null&&I.pgy_level&&x(I.pgy_level)}const{data:P,error:T}=await re.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");if(T)throw T;const R=[];for(const I of P||[])if(j){console.log("📊 FMHDashboard - Getting progress for module:",I.key,"user:",j.id);const{data:O}=await re.rpc("get_module_progress",{user_id_param:j.id,module_key:I.key});console.log("📈 Progress data for",I.key,":",O),console.log("🔍 Module data:",{key:I.key,title:I.title_de,minimum_required:I.minimum_required,progress_raw:O});let z=null;if(O&&O.length>0){const L=O[0];Array.isArray(L)&&L.length>=7?z={module_name:L[0],total_weighted_score:L[1],total_minimum:L[2],progress_percentage:L[3],responsible_count:L[4],instructing_count:L[5],assistant_count:L[6]}:typeof L=="object"&&L!==null&&(z=L)}R.push({...I,progress:z})}else R.push({...I,progress:null});s(R)}catch(j){console.error("Error loading modules:",j)}finally{c(!1)}},N=j=>({basis_notfallchirurgie:"coral",basis_allgemeinchirurgie:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[j]||"mint",A=(()=>{const j=r.reduce((R,I)=>{var O;return R+(((O=I.progress)==null?void 0:O.responsible_count)||0)},0),P=r.reduce((R,I)=>{var O,z,L;return R+(((O=I.progress)==null?void 0:O.responsible_count)||0)+(((z=I.progress)==null?void 0:z.instructing_count)||0)+(((L=I.progress)==null?void 0:L.assistant_count)||0)},0),T=P>0?j/P*100:0;return T>=30?{status:"good",color:"bg-green-500"}:T>=20?{status:"warning",color:"bg-yellow-500"}:{status:"critical",color:"bg-red-500"}})();return o?l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsx("main",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(AuthenticatedHeader,{}),l.jsxs("main",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-medical-title text-card-foreground mb-2",children:"FMH Chirurgie Tracking"}),l.jsxs("p",{className:"text-medical-subtitle",children:["Überwachung Ihres FMH-konformen Ausbildungsfortschritts - PGY ",v]}),n&&l.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Debug: User ID: ",n.id," | Email: ",n.email]})]}),l.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[l.jsxs(J,{variant:"default",size:"sm",className:"gap-2",onClick:()=>h(!0),children:[l.jsx(kd,{className:"w-4 h-4"}),"Prozedur erfassen"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>y(!0),children:[l.jsx(Ml,{className:"w-4 h-4"}),"Manual eingabe"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>p(!0),children:[l.jsx(aw,{className:"w-4 h-4"}),"PDF Upload"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",children:[l.jsx(iE,{className:"w-4 h-4"}),"Export"]}),l.jsxs(J,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>w(!0),children:[l.jsx(iw,{className:"w-4 h-4"}),"Korrekturen"]})]})]}),l.jsxs("div",{className:"medical-card-elegant p-8 mb-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-2",children:"FMH Module Progress"}),l.jsx("p",{className:"text-text-secondary",children:"Gewichtete Erfüllung der FMH-Mindestanforderungen pro Modul"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:r.map(j=>{var T,R,I,O,z;const P=((T=j.progress)==null?void 0:T.progress_percentage)||0;return l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Sv,{progress:P,variant:N(j.key),size:120,strokeWidth:8,label:j.title_de,showPercentage:!0,onClick:()=>a(j.key),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[l.jsx(Gj,{className:"w-4 h-4 text-muted-foreground"}),l.jsxs(de,{variant:"outline",className:"text-xs",children:[parseInt((((R=j.progress)==null?void 0:R.total_weighted_score)||0).toString()),"/",j.minimum_required||"?"]})]}),l.jsxs("div",{className:"text-xs text-muted-foreground",children:["V:",parseInt((((I=j.progress)==null?void 0:I.responsible_count)||0).toString())," I:",parseInt((((O=j.progress)==null?void 0:O.instructing_count)||0).toString())," A:",parseInt((((z=j.progress)==null?void 0:z.assistant_count)||0).toString())]})]})]},j.id)})})]}),i&&l.jsx(UG,{moduleKey:i,onClose:()=>a(null)}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[l.jsx(ee,{className:"medical-card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:l.jsx(cE,{className:"w-6 h-6 text-activity-mint"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Gesamtfortschritt"}),l.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[r.length>0?parseInt((r.reduce((j,P)=>{var T;return j+(((T=P.progress)==null?void 0:T.progress_percentage)||0)},0)/r.length).toString()):0,"%"]})]})]})}),l.jsx(ee,{className:"medical-card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:`p-3 ${A.color}/20 rounded-medical`,children:l.jsx(Bf,{className:"w-6 h-6",style:{color:A.color.replace("/20","").replace("bg-","")}})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Rollen-Balance"}),l.jsx("p",{className:"text-2xl font-bold text-card-foreground capitalize",children:A.status==="good"?"Gut":A.status==="warning"?"Achtung":"Kritisch"})]})]})}),l.jsx(ee,{className:"medical-card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:l.jsx(Gj,{className:"w-6 h-6 text-activity-coral"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Eingriffe Total"}),l.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:parseInt(r.reduce((j,P)=>{var T,R,I;return j+(((T=P.progress)==null?void 0:T.responsible_count)||0)+(((R=P.progress)==null?void 0:R.instructing_count)||0)+(((I=P.progress)==null?void 0:I.assistant_count)||0)},0).toString())})]})]})}),l.jsx(ee,{className:"medical-card p-6",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:l.jsx(Vn,{className:"w-6 h-6 text-activity-amber"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktueller PGY"}),l.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:["PGY-",v]})]})]})})]}),l.jsx(Pq,{modules:r,userPgyLevel:v}),d&&l.jsx(jq,{onClose:()=>h(!1),onSuccess:()=>{h(!1),_()}}),l.jsx(L9,{open:m,onOpenChange:y,onSuccess:_}),l.jsx(S9,{open:f,onOpenChange:p,onSuccess:_}),l.jsx(F9,{open:g,onOpenChange:w,onSuccess:_})]})]})},z9=({currentImageUrl:n,onImageUploaded:e,onImageRemoved:t})=>{const[r,s]=b.useState(!1),[i,a]=b.useState(n||null),o=async d=>{var f;const h=(f=d.target.files)==null?void 0:f[0];if(h){if(!h.type.startsWith("image/")){Ae.error("Bitte wählen Sie eine Bilddatei aus");return}if(h.size>10*1024*1024){Ae.error("Datei ist zu groß. Maximal 10MB erlaubt.");return}s(!0);try{const p=h.name.split(".").pop(),m=`${Date.now()}-${Math.random().toString(36).substring(7)}.${p}`,{data:y,error:g}=await re.storage.from("course-images").upload(m,h,{cacheControl:"3600",upsert:!1});if(g)throw g;const{data:{publicUrl:w}}=re.storage.from("course-images").getPublicUrl(y.path);a(w),e(w),Ae.success("Bild erfolgreich hochgeladen")}catch(p){console.error("Error uploading image:",p),Ae.error("Fehler beim Hochladen des Bildes")}finally{s(!1),d.target.value=""}}},c=()=>{a(null),t()};return l.jsxs("div",{className:"space-y-3",children:[l.jsx(we,{className:"text-foreground",children:"Kursbild"}),i?l.jsxs("div",{className:"relative w-full h-48 bg-muted rounded-lg overflow-hidden border-2 border-dashed border-border",children:[l.jsx("img",{src:i,alt:"Kurs Vorschau",className:"w-full h-full object-cover"}),l.jsx(J,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:c,children:l.jsx(no,{className:"h-4 w-4"})})]}):l.jsxs("div",{className:"w-full h-48 bg-muted rounded-lg border-2 border-dashed border-border flex flex-col items-center justify-center gap-3",children:[l.jsx(N5,{className:"h-12 w-12 text-muted-foreground"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Kein Bild ausgewählt"}),l.jsx(we,{htmlFor:"image-upload",className:"cursor-pointer",children:l.jsx(J,{type:"button",variant:"outline",disabled:r,asChild:!0,children:l.jsxs("span",{children:[l.jsx(aw,{className:"h-4 w-4 mr-2"}),r?"Hochladen...":"Bild auswählen"]})})})]})]}),l.jsx(Fe,{id:"image-upload",type:"file",accept:"image/*",onChange:o,disabled:r,className:"hidden"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützte Formate: JPG, PNG, WebP, GIF (max. 10MB)"})]})};function Ue(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Hr(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Bn(n,e){const t=Ue(n);return isNaN(e)?Hr(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function Zs(n,e){const t=Ue(n);if(isNaN(e))return Hr(n,NaN);if(!e)return t;const r=t.getDate(),s=Hr(n,t.getTime());s.setMonth(t.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}const aA=6048e5,B9=864e5;let U9={};function Dv(){return U9}function qi(n,e){var o,c,d,h;const t=Dv(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=Ue(n),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function Gd(n){return qi(n,{weekStartsOn:1})}function pF(n){const e=Ue(n),t=e.getFullYear(),r=Hr(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const s=Gd(r),i=Hr(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Gd(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Lf(n){const e=Ue(n);return e.setHours(0,0,0,0),e}function w0(n){const e=Ue(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function $i(n,e){const t=Lf(n),r=Lf(e),s=+t-w0(t),i=+r-w0(r);return Math.round((s-i)/B9)}function H9(n){const e=pF(n),t=Hr(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Gd(t)}function tN(n,e){const t=e*7;return Bn(n,t)}function W9(n,e){return Zs(n,e*12)}function V9(n){let e;return n.forEach(function(t){const r=Ue(t);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function G9(n){let e;return n.forEach(t=>{const r=Ue(t);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function cr(n,e){const t=Lf(n),r=Lf(e);return+t==+r}function oA(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function q9(n){if(!oA(n)&&typeof n!="number")return!1;const e=Ue(n);return!isNaN(Number(e))}function Rm(n,e){const t=Ue(n),r=Ue(e),s=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return s*12+i}function K9(n,e,t){const r=qi(n,t),s=qi(e,t),i=+r-w0(r),a=+s-w0(s);return Math.round((i-a)/aA)}function lA(n){const e=Ue(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function fr(n){const e=Ue(n);return e.setDate(1),e.setHours(0,0,0,0),e}function mF(n){const e=Ue(n),t=Hr(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function cA(n,e){var o,c,d,h;const t=Dv(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=Ue(n),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function gF(n){return cA(n,{weekStartsOn:1})}const Y9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},X9=(n,e,t)=>{let r;const s=Y9[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function th(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Q9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},J9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Z9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eK={date:th({formats:Q9,defaultWidth:"full"}),time:th({formats:J9,defaultWidth:"full"}),dateTime:th({formats:Z9,defaultWidth:"full"})},tK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nK=(n,e,t,r)=>tK[n];function Oi(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[o]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const rK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},iK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},aK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cK=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},dK={ordinalNumber:cK,era:Oi({values:rK,defaultWidth:"wide"}),quarter:Oi({values:sK,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Oi({values:iK,defaultWidth:"wide"}),day:Oi({values:aK,defaultWidth:"wide"}),dayPeriod:Oi({values:oK,defaultWidth:"wide",formattingValues:lK,defaultFormattingWidth:"wide"})};function Li(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(o)?hK(o,f=>f.test(a)):uK(o,f=>f.test(a));let d;d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function uK(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function hK(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function vF(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const fK=/^(\d+)(th|st|nd|rd)?/i,pK=/\d+/i,mK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},gK={any:[/^b/i,/^(a|c)/i]},vK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yK={any:[/1/i,/2/i,/3/i,/4/i]},xK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_K={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},NK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},EK={ordinalNumber:vF({matchPattern:fK,parsePattern:pK,valueCallback:n=>parseInt(n,10)}),era:Li({matchPatterns:mK,defaultMatchWidth:"wide",parsePatterns:gK,defaultParseWidth:"any"}),quarter:Li({matchPatterns:vK,defaultMatchWidth:"wide",parsePatterns:yK,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Li({matchPatterns:xK,defaultMatchWidth:"wide",parsePatterns:wK,defaultParseWidth:"any"}),day:Li({matchPatterns:bK,defaultMatchWidth:"wide",parsePatterns:_K,defaultParseWidth:"any"}),dayPeriod:Li({matchPatterns:SK,defaultMatchWidth:"any",parsePatterns:NK,defaultParseWidth:"any"})},yF={code:"en-US",formatDistance:X9,formatLong:eK,formatRelative:nK,localize:dK,match:EK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function AK(n){const e=Ue(n);return $i(e,mF(e))+1}function xF(n){const e=Ue(n),t=+Gd(e)-+H9(e);return Math.round(t/aA)+1}function wF(n,e){var h,f,p,m;const t=Ue(n),r=t.getFullYear(),s=Dv(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=Hr(n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=qi(a,e),c=Hr(n,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const d=qi(c,e);return t.getTime()>=o.getTime()?r+1:t.getTime()>=d.getTime()?r:r-1}function jK(n,e){var o,c,d,h;const t=Dv(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=wF(n,e),i=Hr(n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),qi(i,e)}function bF(n,e){const t=Ue(n),r=+qi(t,e)-+jK(t,e);return Math.round(r/aA)+1}function Ke(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const po={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Ke(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Ke(t+1,2)},d(n,e){return Ke(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Ke(n.getHours()%12||12,e.length)},H(n,e){return Ke(n.getHours(),e.length)},m(n,e){return Ke(n.getMinutes(),e.length)},s(n,e){return Ke(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return Ke(s,e.length)}},pu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Pk={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return po.y(n,e)},Y:function(n,e,t,r){const s=wF(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Ke(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Ke(i,e.length)},R:function(n,e){const t=pF(n);return Ke(t,e.length)},u:function(n,e){const t=n.getFullYear();return Ke(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ke(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ke(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return po.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ke(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=bF(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):Ke(s,e.length)},I:function(n,e,t){const r=xF(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Ke(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):po.d(n,e)},D:function(n,e,t){const r=AK(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Ke(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ke(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ke(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return Ke(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=pu.noon:r===0?s=pu.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=pu.evening:r>=12?s=pu.afternoon:r>=4?s=pu.morning:s=pu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return po.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):po.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Ke(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Ke(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):po.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):po.s(n,e)},S:function(n,e){return po.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Rk(r);case"XXXX":case"XX":return lc(r);case"XXXXX":case"XXX":default:return lc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return Rk(r);case"xxxx":case"xx":return lc(r);case"xxxxx":case"xxx":default:return lc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Tk(r,":");case"OOOO":default:return"GMT"+lc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Tk(r,":");case"zzzz":default:return"GMT"+lc(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return Ke(r,e.length)},T:function(n,e,t){const r=n.getTime();return Ke(r,e.length)}};function Tk(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+Ke(i,2)}function Rk(n,e){return n%60===0?(n>0?"-":"+")+Ke(Math.abs(n)/60,2):lc(n,e)}function lc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Ke(Math.trunc(r/60),2),i=Ke(r%60,2);return t+s+e+i}const Mk=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},_F=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},CK=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return Mk(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Mk(r,e)).replace("{{time}}",_F(s,e))},kK={p:_F,P:CK},PK=/^D+$/,TK=/^Y+$/,RK=["D","DD","YY","YYYY"];function MK(n){return PK.test(n)}function IK(n){return TK.test(n)}function DK(n,e,t){const r=OK(n,e,t);if(console.warn(r),RK.includes(n))throw new RangeError(r)}function OK(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$K=/^'([^]*?)'?$/,zK=/''/g,BK=/[a-zA-Z]/;function Wi(n,e,t){var h,f,p,m,y,g,w,v;const r=Dv(),s=(t==null?void 0:t.locale)??r.locale??yF,i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((g=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(w=r.locale)==null?void 0:w.options)==null?void 0:v.weekStartsOn)??0,o=Ue(n);if(!q9(o))throw new RangeError("Invalid time value");let c=e.match(FK).map(x=>{const _=x[0];if(_==="p"||_==="P"){const N=kK[_];return N(x,s.formatLong)}return x}).join("").match(LK).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const _=x[0];if(_==="'")return{isToken:!1,value:UK(x)};if(Pk[_])return{isToken:!0,value:x};if(_.match(BK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const _=x.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&IK(_)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&MK(_))&&DK(_,e,String(n));const N=Pk[_[0]];return N(o,_,s.localize,d)}).join("")}function UK(n){const e=n.match($K);return e?e[1].replace(zK,"'"):n}function HK(n){const e=Ue(n),t=e.getFullYear(),r=e.getMonth(),s=Hr(n,0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function WK(n){return Math.trunc(+Ue(n)/1e3)}function VK(n){const e=Ue(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function GK(n,e){return K9(VK(n),fr(n),e)+1}function nN(n,e){const t=Ue(n),r=Ue(e);return t.getTime()>r.getTime()}function SF(n,e){const t=Ue(n),r=Ue(e);return+t<+r}function dA(n,e){const t=Ue(n),r=Ue(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function qK(n,e){const t=Ue(n),r=Ue(e);return t.getFullYear()===r.getFullYear()}function Zb(n,e){return Bn(n,-e)}function e1(n,e){const t=Ue(n),r=t.getFullYear(),s=t.getDate(),i=Hr(n,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const a=HK(i);return t.setMonth(e,Math.min(s,a)),t}function Ik(n,e){const t=Ue(n);return isNaN(+t)?Hr(n,NaN):(t.setFullYear(e),t)}const Dk={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},KK=(n,e,t)=>{let r;const s=t!=null&&t.addSuffix?Dk[n].withPreposition:Dk[n].standalone;return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:"vor "+r:r},YK={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},XK={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},QK={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},JK={date:th({formats:YK,defaultWidth:"full"}),time:th({formats:XK,defaultWidth:"full"}),dateTime:th({formats:QK,defaultWidth:"full"})},ZK={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},eY=(n,e,t,r)=>ZK[n],tY={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},nY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},rN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},rY={narrow:rN.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:rN.wide},sY={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},iY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},aY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},oY=n=>Number(n)+".",lY={ordinalNumber:oY,era:Oi({values:tY,defaultWidth:"wide"}),quarter:Oi({values:nY,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Oi({values:rN,formattingValues:rY,defaultWidth:"wide"}),day:Oi({values:sY,defaultWidth:"wide"}),dayPeriod:Oi({values:iY,defaultWidth:"wide",formattingValues:aY,defaultFormattingWidth:"wide"})},cY=/^(\d+)(\.)?/i,dY=/\d+/i,uY={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},hY={any:[/^v/i,/^n/i]},fY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},pY={any:[/1/i,/2/i,/3/i,/4/i]},mY={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},gY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vY={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},yY={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},xY={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},wY={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},bY={ordinalNumber:vF({matchPattern:cY,parsePattern:dY,valueCallback:n=>parseInt(n)}),era:Li({matchPatterns:uY,defaultMatchWidth:"wide",parsePatterns:hY,defaultParseWidth:"any"}),quarter:Li({matchPatterns:fY,defaultMatchWidth:"wide",parsePatterns:pY,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Li({matchPatterns:mY,defaultMatchWidth:"wide",parsePatterns:gY,defaultParseWidth:"any"}),day:Li({matchPatterns:vY,defaultMatchWidth:"wide",parsePatterns:yY,defaultParseWidth:"any"}),dayPeriod:Li({matchPatterns:xY,defaultMatchWidth:"wide",parsePatterns:wY,defaultParseWidth:"any"})},t1={code:"de",formatDistance:KK,formatLong:JK,formatRelative:eY,localize:lY,match:bY,options:{weekStartsOn:1,firstWeekContainsDate:4}};var ge=function(){return ge=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ge.apply(this,arguments)};function _Y(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function NF(n,e,t){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function Ov(n){return n.mode==="multiple"}function Lv(n){return n.mode==="range"}function zw(n){return n.mode==="single"}var SY={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function NY(n,e){return Wi(n,"LLLL y",e)}function EY(n,e){return Wi(n,"d",e)}function AY(n,e){return Wi(n,"LLLL",e)}function jY(n){return"".concat(n)}function CY(n,e){return Wi(n,"cccccc",e)}function kY(n,e){return Wi(n,"yyyy",e)}var PY=Object.freeze({__proto__:null,formatCaption:NY,formatDay:EY,formatMonthCaption:AY,formatWeekNumber:jY,formatWeekdayName:CY,formatYearCaption:kY}),TY=function(n,e,t){return Wi(n,"do MMMM (EEEE)",t)},RY=function(){return"Month: "},MY=function(){return"Go to next month"},IY=function(){return"Go to previous month"},DY=function(n,e){return Wi(n,"cccc",e)},OY=function(n){return"Week n. ".concat(n)},LY=function(){return"Year: "},FY=Object.freeze({__proto__:null,labelDay:TY,labelMonthDropdown:RY,labelNext:MY,labelPrevious:IY,labelWeekNumber:OY,labelWeekday:DY,labelYearDropdown:LY});function $Y(){var n="buttons",e=SY,t=yF,r={},s={},i=1,a={},o=new Date;return{captionLayout:n,classNames:e,formatters:PY,labels:FY,locale:t,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:a,today:o,mode:"default"}}function zY(n){var e=n.fromYear,t=n.toYear,r=n.fromMonth,s=n.toMonth,i=n.fromDate,a=n.toDate;return r?i=fr(r):e&&(i=new Date(e,0,1)),s?a=lA(s):t&&(a=new Date(t,11,31)),{fromDate:i?Lf(i):void 0,toDate:a?Lf(a):void 0}}var EF=b.createContext(void 0);function BY(n){var e,t=n.initialProps,r=$Y(),s=zY(t),i=s.fromDate,a=s.toDate,o=(e=t.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!i||!a)&&(o="buttons");var c;(zw(t)||Ov(t)||Lv(t))&&(c=t.onSelect);var d=ge(ge(ge({},r),t),{captionLayout:o,classNames:ge(ge({},r.classNames),t.classNames),components:ge({},t.components),formatters:ge(ge({},r.formatters),t.formatters),fromDate:i,labels:ge(ge({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:ge(ge({},r.modifiers),t.modifiers),modifiersClassNames:ge(ge({},r.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:ge(ge({},r.styles),t.styles),toDate:a});return l.jsx(EF.Provider,{value:d,children:n.children})}function lt(){var n=b.useContext(EF);if(!n)throw new Error("useDayPicker must be used within a DayPickerProvider.");return n}function AF(n){var e=lt(),t=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:n.id,children:i(n.displayMonth,{locale:t})})}function UY(n){return l.jsx("svg",ge({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},n,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function jF(n){var e,t,r=n.onChange,s=n.value,i=n.children,a=n.caption,o=n.className,c=n.style,d=lt(),h=(t=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:UY;return l.jsxs("div",{className:o,style:c,children:[l.jsx("span",{className:d.classNames.vhidden,children:n["aria-label"]}),l.jsx("select",{name:n.name,"aria-label":n["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:s,onChange:r,children:i}),l.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[a,l.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function HY(n){var e,t=lt(),r=t.fromDate,s=t.toDate,i=t.styles,a=t.locale,o=t.formatters.formatMonthCaption,c=t.classNames,d=t.components,h=t.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});var f=[];if(qK(r,s))for(var p=fr(r),m=r.getMonth();m<=s.getMonth();m++)f.push(e1(p,m));else for(var p=fr(new Date),m=0;m<=11;m++)f.push(e1(p,m));var y=function(w){var v=Number(w.target.value),x=e1(fr(n.displayMonth),v);n.onChange(x)},g=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:jF;return l.jsx(g,{name:"months","aria-label":h(),className:c.dropdown_month,style:i.dropdown_month,onChange:y,value:n.displayMonth.getMonth(),caption:o(n.displayMonth,{locale:a}),children:f.map(function(w){return l.jsx("option",{value:w.getMonth(),children:o(w,{locale:a})},w.getMonth())})})}function WY(n){var e,t=n.displayMonth,r=lt(),s=r.fromDate,i=r.toDate,a=r.locale,o=r.styles,c=r.classNames,d=r.components,h=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,p=[];if(!s)return l.jsx(l.Fragment,{});if(!i)return l.jsx(l.Fragment,{});for(var m=s.getFullYear(),y=i.getFullYear(),g=m;g<=y;g++)p.push(Ik(mF(new Date),g));var w=function(x){var _=Ik(fr(t),Number(x.target.value));n.onChange(_)},v=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:jF;return l.jsx(v,{name:"years","aria-label":f(),className:c.dropdown_year,style:o.dropdown_year,onChange:w,value:t.getFullYear(),caption:h(t,{locale:a}),children:p.map(function(x){return l.jsx("option",{value:x.getFullYear(),children:h(x,{locale:a})},x.getFullYear())})})}function VY(n,e){var t=b.useState(n),r=t[0],s=t[1],i=e===void 0?r:e;return[i,s]}function GY(n){var e=n.month,t=n.defaultMonth,r=n.today,s=e||t||r||new Date,i=n.toDate,a=n.fromDate,o=n.numberOfMonths,c=o===void 0?1:o;if(i&&Rm(i,s)<0){var d=-1*(c-1);s=Zs(i,d)}return a&&Rm(s,a)<0&&(s=a),fr(s)}function qY(){var n=lt(),e=GY(n),t=VY(e,n.month),r=t[0],s=t[1],i=function(a){var o;if(!n.disableNavigation){var c=fr(a);s(c),(o=n.onMonthChange)===null||o===void 0||o.call(n,c)}};return[r,i]}function KY(n,e){for(var t=e.reverseMonths,r=e.numberOfMonths,s=fr(n),i=fr(Zs(s,r)),a=Rm(i,s),o=[],c=0;c<a;c++){var d=Zs(s,c);o.push(d)}return t&&(o=o.reverse()),o}function YY(n,e){if(!e.disableNavigation){var t=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,o=fr(n);if(!t)return Zs(o,a);var c=Rm(t,n);if(!(c<i))return Zs(o,a)}}function XY(n,e){if(!e.disableNavigation){var t=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,o=fr(n);if(!t)return Zs(o,-a);var c=Rm(o,t);if(!(c<=0))return Zs(o,-a)}}var CF=b.createContext(void 0);function QY(n){var e=lt(),t=qY(),r=t[0],s=t[1],i=KY(r,e),a=YY(r,e),o=XY(r,e),c=function(f){return i.some(function(p){return dA(f,p)})},d=function(f,p){c(f)||(p&&SF(f,p)?s(Zs(f,1+e.numberOfMonths*-1)):s(f))},h={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:d,previousMonth:o,nextMonth:a,isDateDisplayed:c};return l.jsx(CF.Provider,{value:h,children:n.children})}function Fv(){var n=b.useContext(CF);if(!n)throw new Error("useNavigation must be used within a NavigationProvider");return n}function Ok(n){var e,t=lt(),r=t.classNames,s=t.styles,i=t.components,a=Fv().goToMonth,o=function(h){a(Zs(h,n.displayIndex?-n.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:AF,d=l.jsx(c,{id:n.id,displayMonth:n.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:d}),l.jsx(HY,{onChange:o,displayMonth:n.displayMonth}),l.jsx(WY,{onChange:o,displayMonth:n.displayMonth})]})}function JY(n){return l.jsx("svg",ge({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function ZY(n){return l.jsx("svg",ge({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var b0=b.forwardRef(function(n,e){var t=lt(),r=t.classNames,s=t.styles,i=[r.button_reset,r.button];n.className&&i.push(n.className);var a=i.join(" "),o=ge(ge({},s.button_reset),s.button);return n.style&&Object.assign(o,n.style),l.jsx("button",ge({},n,{ref:e,type:"button",className:a,style:o}))});function eX(n){var e,t,r=lt(),s=r.dir,i=r.locale,a=r.classNames,o=r.styles,c=r.labels,d=c.labelPrevious,h=c.labelNext,f=r.components;if(!n.nextMonth&&!n.previousMonth)return l.jsx(l.Fragment,{});var p=d(n.previousMonth,{locale:i}),m=[a.nav_button,a.nav_button_previous].join(" "),y=h(n.nextMonth,{locale:i}),g=[a.nav_button,a.nav_button_next].join(" "),w=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:ZY,v=(t=f==null?void 0:f.IconLeft)!==null&&t!==void 0?t:JY;return l.jsxs("div",{className:a.nav,style:o.nav,children:[!n.hidePrevious&&l.jsx(b0,{name:"previous-month","aria-label":p,className:m,style:o.nav_button_previous,disabled:!n.previousMonth,onClick:n.onPreviousClick,children:s==="rtl"?l.jsx(w,{className:a.nav_icon,style:o.nav_icon}):l.jsx(v,{className:a.nav_icon,style:o.nav_icon})}),!n.hideNext&&l.jsx(b0,{name:"next-month","aria-label":y,className:g,style:o.nav_button_next,disabled:!n.nextMonth,onClick:n.onNextClick,children:s==="rtl"?l.jsx(v,{className:a.nav_icon,style:o.nav_icon}):l.jsx(w,{className:a.nav_icon,style:o.nav_icon})})]})}function Lk(n){var e=lt().numberOfMonths,t=Fv(),r=t.previousMonth,s=t.nextMonth,i=t.goToMonth,a=t.displayMonths,o=a.findIndex(function(y){return dA(n.displayMonth,y)}),c=o===0,d=o===a.length-1,h=e>1&&(c||!d),f=e>1&&(d||!c),p=function(){r&&i(r)},m=function(){s&&i(s)};return l.jsx(eX,{displayMonth:n.displayMonth,hideNext:h,hidePrevious:f,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:m})}function tX(n){var e,t=lt(),r=t.classNames,s=t.disableNavigation,i=t.styles,a=t.captionLayout,o=t.components,c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:AF,d;return s?d=l.jsx(c,{id:n.id,displayMonth:n.displayMonth}):a==="dropdown"?d=l.jsx(Ok,{displayMonth:n.displayMonth,id:n.id}):a==="dropdown-buttons"?d=l.jsxs(l.Fragment,{children:[l.jsx(Ok,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id}),l.jsx(Lk,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id})]}):d=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:n.id,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),l.jsx(Lk,{displayMonth:n.displayMonth,id:n.id})]}),l.jsx("div",{className:r.caption,style:i.caption,children:d})}function nX(n){var e=lt(),t=e.footer,r=e.styles,s=e.classNames.tfoot;return t?l.jsx("tfoot",{className:s,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:t})})}):l.jsx(l.Fragment,{})}function rX(n,e,t){for(var r=t?Gd(new Date):qi(new Date,{locale:n,weekStartsOn:e}),s=[],i=0;i<7;i++){var a=Bn(r,i);s.push(a)}return s}function sX(){var n=lt(),e=n.classNames,t=n.styles,r=n.showWeekNumber,s=n.locale,i=n.weekStartsOn,a=n.ISOWeek,o=n.formatters.formatWeekdayName,c=n.labels.labelWeekday,d=rX(s,i,a);return l.jsxs("tr",{style:t.head_row,className:e.head_row,children:[r&&l.jsx("td",{style:t.head_cell,className:e.head_cell}),d.map(function(h,f){return l.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":c(h,{locale:s}),children:o(h,{locale:s})},f)})]})}function iX(){var n,e=lt(),t=e.classNames,r=e.styles,s=e.components,i=(n=s==null?void 0:s.HeadRow)!==null&&n!==void 0?n:sX;return l.jsx("thead",{style:r.head,className:t.head,children:l.jsx(i,{})})}function aX(n){var e=lt(),t=e.locale,r=e.formatters.formatDay;return l.jsx(l.Fragment,{children:r(n.date,{locale:t})})}var uA=b.createContext(void 0);function oX(n){if(!Ov(n.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(uA.Provider,{value:e,children:n.children})}return l.jsx(lX,{initialProps:n.initialProps,children:n.children})}function lX(n){var e=n.initialProps,t=n.children,r=e.selected,s=e.min,i=e.max,a=function(d,h,f){var p,m;(p=e.onDayClick)===null||p===void 0||p.call(e,d,h,f);var y=!!(h.selected&&s&&(r==null?void 0:r.length)===s);if(!y){var g=!!(!h.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var w=r?NF([],r):[];if(h.selected){var v=w.findIndex(function(x){return cr(d,x)});w.splice(v,1)}else w.push(d);(m=e.onSelect)===null||m===void 0||m.call(e,w,d,h,f)}}},o={disabled:[]};r&&o.disabled.push(function(d){var h=i&&r.length>i-1,f=r.some(function(p){return cr(p,d)});return!!(h&&!f)});var c={selected:r,onDayClick:a,modifiers:o};return l.jsx(uA.Provider,{value:c,children:t})}function hA(){var n=b.useContext(uA);if(!n)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return n}function cX(n,e){var t=e||{},r=t.from,s=t.to;return r&&s?cr(s,n)&&cr(r,n)?void 0:cr(s,n)?{from:s,to:void 0}:cr(r,n)?void 0:nN(r,n)?{from:n,to:s}:{from:r,to:n}:s?nN(n,s)?{from:s,to:n}:{from:n,to:s}:r?SF(n,r)?{from:n,to:r}:{from:r,to:n}:{from:n,to:void 0}}var fA=b.createContext(void 0);function dX(n){if(!Lv(n.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(fA.Provider,{value:e,children:n.children})}return l.jsx(uX,{initialProps:n.initialProps,children:n.children})}function uX(n){var e=n.initialProps,t=n.children,r=e.selected,s=r||{},i=s.from,a=s.to,o=e.min,c=e.max,d=function(m,y,g){var w,v;(w=e.onDayClick)===null||w===void 0||w.call(e,m,y,g);var x=cX(m,r);(v=e.onSelect)===null||v===void 0||v.call(e,x,m,y,g)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],a?(h.range_end=[a],cr(i,a)||(h.range_middle=[{after:i,before:a}])):h.range_end=[i]):a&&(h.range_start=[a],h.range_end=[a]),o&&(i&&!a&&h.disabled.push({after:Zb(i,o-1),before:Bn(i,o-1)}),i&&a&&h.disabled.push({after:i,before:Bn(i,o-1)}),!i&&a&&h.disabled.push({after:Zb(a,o-1),before:Bn(a,o-1)})),c){if(i&&!a&&(h.disabled.push({before:Bn(i,-c+1)}),h.disabled.push({after:Bn(i,c-1)})),i&&a){var f=$i(a,i)+1,p=c-f;h.disabled.push({before:Zb(i,p)}),h.disabled.push({after:Bn(a,p)})}!i&&a&&(h.disabled.push({before:Bn(a,-c+1)}),h.disabled.push({after:Bn(a,c-1)}))}return l.jsx(fA.Provider,{value:{selected:r,onDayClick:d,modifiers:h},children:t})}function pA(){var n=b.useContext(fA);if(!n)throw new Error("useSelectRange must be used within a SelectRangeProvider");return n}function _x(n){return Array.isArray(n)?NF([],n):n!==void 0?[n]:[]}function hX(n){var e={};return Object.entries(n).forEach(function(t){var r=t[0],s=t[1];e[r]=_x(s)}),e}var ei;(function(n){n.Outside="outside",n.Disabled="disabled",n.Selected="selected",n.Hidden="hidden",n.Today="today",n.RangeStart="range_start",n.RangeEnd="range_end",n.RangeMiddle="range_middle"})(ei||(ei={}));var fX=ei.Selected,Ji=ei.Disabled,pX=ei.Hidden,mX=ei.Today,n1=ei.RangeEnd,r1=ei.RangeMiddle,s1=ei.RangeStart,gX=ei.Outside;function vX(n,e,t){var r,s=(r={},r[fX]=_x(n.selected),r[Ji]=_x(n.disabled),r[pX]=_x(n.hidden),r[mX]=[n.today],r[n1]=[],r[r1]=[],r[s1]=[],r[gX]=[],r);return n.fromDate&&s[Ji].push({before:n.fromDate}),n.toDate&&s[Ji].push({after:n.toDate}),Ov(n)?s[Ji]=s[Ji].concat(e.modifiers[Ji]):Lv(n)&&(s[Ji]=s[Ji].concat(t.modifiers[Ji]),s[s1]=t.modifiers[s1],s[r1]=t.modifiers[r1],s[n1]=t.modifiers[n1]),s}var kF=b.createContext(void 0);function yX(n){var e=lt(),t=hA(),r=pA(),s=vX(e,t,r),i=hX(e.modifiers),a=ge(ge({},s),i);return l.jsx(kF.Provider,{value:a,children:n.children})}function PF(){var n=b.useContext(kF);if(!n)throw new Error("useModifiers must be used within a ModifiersProvider");return n}function xX(n){return!!(n&&typeof n=="object"&&"before"in n&&"after"in n)}function wX(n){return!!(n&&typeof n=="object"&&"from"in n)}function bX(n){return!!(n&&typeof n=="object"&&"after"in n)}function _X(n){return!!(n&&typeof n=="object"&&"before"in n)}function SX(n){return!!(n&&typeof n=="object"&&"dayOfWeek"in n)}function NX(n,e){var t,r=e.from,s=e.to;if(r&&s){var i=$i(s,r)<0;i&&(t=[s,r],r=t[0],s=t[1]);var a=$i(n,r)>=0&&$i(s,n)>=0;return a}return s?cr(s,n):r?cr(r,n):!1}function EX(n){return oA(n)}function AX(n){return Array.isArray(n)&&n.every(oA)}function jX(n,e){return e.some(function(t){if(typeof t=="boolean")return t;if(EX(t))return cr(n,t);if(AX(t))return t.includes(n);if(wX(t))return NX(n,t);if(SX(t))return t.dayOfWeek.includes(n.getDay());if(xX(t)){var r=$i(t.before,n),s=$i(t.after,n),i=r>0,a=s<0,o=nN(t.before,t.after);return o?a&&i:i||a}return bX(t)?$i(n,t.after)>0:_X(t)?$i(t.before,n)>0:typeof t=="function"?t(n):!1})}function mA(n,e,t){var r=Object.keys(e).reduce(function(i,a){var o=e[a];return jX(n,o)&&i.push(a),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),t&&!dA(n,t)&&(s.outside=!0),s}function CX(n,e){for(var t=fr(n[0]),r=lA(n[n.length-1]),s,i,a=t;a<=r;){var o=mA(a,e),c=!o.disabled&&!o.hidden;if(!c){a=Bn(a,1);continue}if(o.selected)return a;o.today&&!i&&(i=a),s||(s=a),a=Bn(a,1)}return i||s}var kX=365;function TF(n,e){var t=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,a=e.retry,o=a===void 0?{count:0,lastFocused:n}:a,c=s.weekStartsOn,d=s.fromDate,h=s.toDate,f=s.locale,p={day:Bn,week:tN,month:Zs,year:W9,startOfWeek:function(w){return s.ISOWeek?Gd(w):qi(w,{locale:f,weekStartsOn:c})},endOfWeek:function(w){return s.ISOWeek?gF(w):cA(w,{locale:f,weekStartsOn:c})}},m=p[t](n,r==="after"?1:-1);r==="before"&&d?m=V9([d,m]):r==="after"&&h&&(m=G9([h,m]));var y=!0;if(i){var g=mA(m,i);y=!g.disabled&&!g.hidden}return y?m:o.count>kX?o.lastFocused:TF(m,{moveBy:t,direction:r,context:s,modifiers:i,retry:ge(ge({},o),{count:o.count+1})})}var RF=b.createContext(void 0);function PX(n){var e=Fv(),t=PF(),r=b.useState(),s=r[0],i=r[1],a=b.useState(),o=a[0],c=a[1],d=CX(e.displayMonths,t),h=s??(o&&e.isDateDisplayed(o))?o:d,f=function(){c(s),i(void 0)},p=function(w){i(w)},m=lt(),y=function(w,v){if(s){var x=TF(s,{moveBy:w,direction:v,context:m,modifiers:t});cr(s,x)||(e.goToDate(x,s),p(x))}},g={focusedDay:s,focusTarget:h,blur:f,focus:p,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return l.jsx(RF.Provider,{value:g,children:n.children})}function gA(){var n=b.useContext(RF);if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n}function TX(n,e){var t=PF(),r=mA(n,t,e);return r}var vA=b.createContext(void 0);function RX(n){if(!zw(n.initialProps)){var e={selected:void 0};return l.jsx(vA.Provider,{value:e,children:n.children})}return l.jsx(MX,{initialProps:n.initialProps,children:n.children})}function MX(n){var e=n.initialProps,t=n.children,r=function(i,a,o){var c,d,h;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,a,o),a.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,i,a,o);return}(h=e.onSelect)===null||h===void 0||h.call(e,i,i,a,o)},s={selected:e.selected,onDayClick:r};return l.jsx(vA.Provider,{value:s,children:t})}function MF(){var n=b.useContext(vA);if(!n)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return n}function IX(n,e){var t=lt(),r=MF(),s=hA(),i=pA(),a=gA(),o=a.focusDayAfter,c=a.focusDayBefore,d=a.focusWeekAfter,h=a.focusWeekBefore,f=a.blur,p=a.focus,m=a.focusMonthBefore,y=a.focusMonthAfter,g=a.focusYearBefore,w=a.focusYearAfter,v=a.focusStartOfWeek,x=a.focusEndOfWeek,_=function(F){var D,M,U,X;zw(t)?(D=r.onDayClick)===null||D===void 0||D.call(r,n,e,F):Ov(t)?(M=s.onDayClick)===null||M===void 0||M.call(s,n,e,F):Lv(t)?(U=i.onDayClick)===null||U===void 0||U.call(i,n,e,F):(X=t.onDayClick)===null||X===void 0||X.call(t,n,e,F)},N=function(F){var D;p(n),(D=t.onDayFocus)===null||D===void 0||D.call(t,n,e,F)},E=function(F){var D;f(),(D=t.onDayBlur)===null||D===void 0||D.call(t,n,e,F)},A=function(F){var D;(D=t.onDayMouseEnter)===null||D===void 0||D.call(t,n,e,F)},j=function(F){var D;(D=t.onDayMouseLeave)===null||D===void 0||D.call(t,n,e,F)},P=function(F){var D;(D=t.onDayPointerEnter)===null||D===void 0||D.call(t,n,e,F)},T=function(F){var D;(D=t.onDayPointerLeave)===null||D===void 0||D.call(t,n,e,F)},R=function(F){var D;(D=t.onDayTouchCancel)===null||D===void 0||D.call(t,n,e,F)},I=function(F){var D;(D=t.onDayTouchEnd)===null||D===void 0||D.call(t,n,e,F)},O=function(F){var D;(D=t.onDayTouchMove)===null||D===void 0||D.call(t,n,e,F)},z=function(F){var D;(D=t.onDayTouchStart)===null||D===void 0||D.call(t,n,e,F)},L=function(F){var D;(D=t.onDayKeyUp)===null||D===void 0||D.call(t,n,e,F)},V=function(F){var D;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),t.dir==="rtl"?o():c();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),t.dir==="rtl"?c():o();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),d();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),h();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?g():m();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?w():y();break;case"Home":F.preventDefault(),F.stopPropagation(),v();break;case"End":F.preventDefault(),F.stopPropagation(),x();break}(D=t.onDayKeyDown)===null||D===void 0||D.call(t,n,e,F)},B={onClick:_,onFocus:N,onBlur:E,onKeyDown:V,onKeyUp:L,onMouseEnter:A,onMouseLeave:j,onPointerEnter:P,onPointerLeave:T,onTouchCancel:R,onTouchEnd:I,onTouchMove:O,onTouchStart:z};return B}function DX(){var n=lt(),e=MF(),t=hA(),r=pA(),s=zw(n)?e.selected:Ov(n)?t.selected:Lv(n)?r.selected:void 0;return s}function OX(n){return Object.values(ei).includes(n)}function LX(n,e){var t=[n.classNames.day];return Object.keys(e).forEach(function(r){var s=n.modifiersClassNames[r];if(s)t.push(s);else if(OX(r)){var i=n.classNames["day_".concat(r)];i&&t.push(i)}}),t}function FX(n,e){var t=ge({},n.styles.day);return Object.keys(e).forEach(function(r){var s;t=ge(ge({},t),(s=n.modifiersStyles)===null||s===void 0?void 0:s[r])}),t}function $X(n,e,t){var r,s,i,a=lt(),o=gA(),c=TX(n,e),d=IX(n,c),h=DX(),f=!!(a.onDayClick||a.mode!=="default");b.useEffect(function(){var A;c.outside||o.focusedDay&&f&&cr(o.focusedDay,n)&&((A=t.current)===null||A===void 0||A.focus())},[o.focusedDay,n,t,f,c.outside]);var p=LX(a,c).join(" "),m=FX(a,c),y=!!(c.outside&&!a.showOutsideDays||c.hidden),g=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:aX,w=l.jsx(g,{date:n,displayMonth:e,activeModifiers:c}),v={style:m,className:p,children:w,role:"gridcell"},x=o.focusTarget&&cr(o.focusTarget,n)&&!c.outside,_=o.focusedDay&&cr(o.focusedDay,n),N=ge(ge(ge({},v),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||x?0:-1,r)),d),E={isButton:f,isHidden:y,activeModifiers:c,selectedDays:h,buttonProps:N,divProps:v};return E}function zX(n){var e=b.useRef(null),t=$X(n.date,n.displayMonth,e);return t.isHidden?l.jsx("div",{role:"gridcell"}):t.isButton?l.jsx(b0,ge({name:"day",ref:e},t.buttonProps)):l.jsx("div",ge({},t.divProps))}function BX(n){var e=n.number,t=n.dates,r=lt(),s=r.onWeekNumberClick,i=r.styles,a=r.classNames,o=r.locale,c=r.labels.labelWeekNumber,d=r.formatters.formatWeekNumber,h=d(Number(e),{locale:o});if(!s)return l.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:h});var f=c(Number(e),{locale:o}),p=function(m){s(e,t,m)};return l.jsx(b0,{name:"week-number","aria-label":f,className:a.weeknumber,style:i.weeknumber,onClick:p,children:h})}function UX(n){var e,t,r=lt(),s=r.styles,i=r.classNames,a=r.showWeekNumber,o=r.components,c=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:zX,d=(t=o==null?void 0:o.WeekNumber)!==null&&t!==void 0?t:BX,h;return a&&(h=l.jsx("td",{className:i.cell,style:s.cell,children:l.jsx(d,{number:n.weekNumber,dates:n.dates})})),l.jsxs("tr",{className:i.row,style:s.row,children:[h,n.dates.map(function(f){return l.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:l.jsx(c,{displayMonth:n.displayMonth,date:f})},WK(f))})]})}function Fk(n,e,t){for(var r=t!=null&&t.ISOWeek?gF(e):cA(e,t),s=t!=null&&t.ISOWeek?Gd(n):qi(n,t),i=$i(r,s),a=[],o=0;o<=i;o++)a.push(Bn(s,o));var c=a.reduce(function(d,h){var f=t!=null&&t.ISOWeek?xF(h):bF(h,t),p=d.find(function(m){return m.weekNumber===f});return p?(p.dates.push(h),d):(d.push({weekNumber:f,dates:[h]}),d)},[]);return c}function HX(n,e){var t=Fk(fr(n),lA(n),e);if(e!=null&&e.useFixedWeeks){var r=GK(n,e);if(r<6){var s=t[t.length-1],i=s.dates[s.dates.length-1],a=tN(i,6-r),o=Fk(tN(i,1),a,e);t.push.apply(t,o)}}return t}function WX(n){var e,t,r,s=lt(),i=s.locale,a=s.classNames,o=s.styles,c=s.hideHead,d=s.fixedWeeks,h=s.components,f=s.weekStartsOn,p=s.firstWeekContainsDate,m=s.ISOWeek,y=HX(n.displayMonth,{useFixedWeeks:!!d,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:p}),g=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:iX,w=(t=h==null?void 0:h.Row)!==null&&t!==void 0?t:UX,v=(r=h==null?void 0:h.Footer)!==null&&r!==void 0?r:nX;return l.jsxs("table",{id:n.id,className:a.table,style:o.table,role:"grid","aria-labelledby":n["aria-labelledby"],children:[!c&&l.jsx(g,{}),l.jsx("tbody",{className:a.tbody,style:o.tbody,children:y.map(function(x){return l.jsx(w,{displayMonth:n.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),l.jsx(v,{displayMonth:n.displayMonth})]})}function VX(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var GX=VX()?b.useLayoutEffect:b.useEffect,i1=!1,qX=0;function $k(){return"react-day-picker-".concat(++qX)}function KX(n){var e,t=n??(i1?$k():null),r=b.useState(t),s=r[0],i=r[1];return GX(function(){s===null&&i($k())},[]),b.useEffect(function(){i1===!1&&(i1=!0)},[]),(e=n??s)!==null&&e!==void 0?e:void 0}function YX(n){var e,t,r=lt(),s=r.dir,i=r.classNames,a=r.styles,o=r.components,c=Fv().displayMonths,d=KX(r.id?"".concat(r.id,"-").concat(n.displayIndex):void 0),h=r.id?"".concat(r.id,"-grid-").concat(n.displayIndex):void 0,f=[i.month],p=a.month,m=n.displayIndex===0,y=n.displayIndex===c.length-1,g=!m&&!y;s==="rtl"&&(e=[m,y],y=e[0],m=e[1]),m&&(f.push(i.caption_start),p=ge(ge({},p),a.caption_start)),y&&(f.push(i.caption_end),p=ge(ge({},p),a.caption_end)),g&&(f.push(i.caption_between),p=ge(ge({},p),a.caption_between));var w=(t=o==null?void 0:o.Caption)!==null&&t!==void 0?t:tX;return l.jsxs("div",{className:f.join(" "),style:p,children:[l.jsx(w,{id:d,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),l.jsx(WX,{id:h,"aria-labelledby":d,displayMonth:n.displayMonth})]},n.displayIndex)}function XX(n){var e=lt(),t=e.classNames,r=e.styles;return l.jsx("div",{className:t.months,style:r.months,children:n.children})}function QX(n){var e,t,r=n.initialProps,s=lt(),i=gA(),a=Fv(),o=b.useState(!1),c=o[0],d=o[1];b.useEffect(function(){s.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[s.initialFocus,c,i.focus,i.focusTarget,i]);var h=[s.classNames.root,s.className];s.numberOfMonths>1&&h.push(s.classNames.multiple_months),s.showWeekNumber&&h.push(s.classNames.with_weeknumber);var f=ge(ge({},s.styles.root),s.style),p=Object.keys(r).filter(function(y){return y.startsWith("data-")}).reduce(function(y,g){var w;return ge(ge({},y),(w={},w[g]=r[g],w))},{}),m=(t=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:XX;return l.jsx("div",ge({className:h.join(" "),style:f,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:l.jsx(m,{children:a.displayMonths.map(function(y,g){return l.jsx(YX,{displayIndex:g,displayMonth:y},g)})})}))}function JX(n){var e=n.children,t=_Y(n,["children"]);return l.jsx(BY,{initialProps:t,children:l.jsx(QY,{children:l.jsx(RX,{initialProps:t,children:l.jsx(oX,{initialProps:t,children:l.jsx(dX,{initialProps:t,children:l.jsx(yX,{children:l.jsx(PX,{children:e})})})})})})})}function ZX(n){return l.jsx(JX,ge({},n,{children:l.jsx(QX,{initialProps:n})}))}function Sx({className:n,classNames:e,showOutsideDays:t=!0,...r}){return l.jsx(ZX,{showOutsideDays:t,className:te("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:te(h_({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:te(h_({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>l.jsx(g5,{className:"h-4 w-4"}),IconRight:({...s})=>l.jsx(v5,{className:"h-4 w-4"})},...r})}Sx.displayName="Calendar";const eQ=()=>{const{user:n,loading:e}=Jd(),t=so(),[r,s]=b.useState([]),[i,a]=b.useState(!0),[o,c]=b.useState(!1),[d,h]=b.useState(null),[f,p]=b.useState({}),m=(E,A="CHF")=>E==null?"k.A.":E===0?"Kostenlos":`${E} ${A}`;b.useEffect(()=>{if(!e&&!n){t("/auth");return}n&&y()},[n,e,t,y]);const y=b.useCallback(async()=>{try{const{data:E}=await re.from("profiles").select("role").eq("user_id",n==null?void 0:n.id).single();if((E==null?void 0:E.role)!=="admin"){Ae.error("Zugriff verweigert. Admin-Berechtigung erforderlich."),t("/");return}g()}catch(E){console.error("Error checking admin access:",E),t("/")}},[n==null?void 0:n.id,t]),g=async()=>{try{a(!0);const{data:E,error:A}=await re.from("courses").select("*").order("created_at",{ascending:!1});if(A)throw A;s(E||[])}catch(E){console.error("Error loading courses:",E),Ae.error("Fehler beim Laden der Kurse")}finally{a(!1)}},w=E=>{h(E),p(E),c(!0)},v=()=>{h(null),p({title:"",description:"",venue:"",city:"",country:"",specialty:"",language:"Deutsch",modality:"onsite",price:null,currency:"CHF",difficulty_level:"beginner",tags:[],status:"draft",cover_image_url:null,start_date:null,end_date:null,registration_deadline:null}),c(!0)},x=async()=>{var E;try{if(!n||!f.title||!f.venue){Ae.error("Titel und Veranstalter sind Pflichtfelder");return}const A={title:f.title,provider_id:n.id,description:f.description||"",venue:f.venue,city:f.city||"",country:f.country||"",specialty:f.specialty||null,language:f.language||"Deutsch",modality:f.modality||"onsite",price:f.price,currency:f.currency||"CHF",difficulty_level:f.difficulty_level||"beginner",status:f.status||"draft",cover_image_url:f.cover_image_url||null,start_date:f.start_date||null,end_date:f.end_date||null,registration_deadline:f.registration_deadline||null,tags:Array.isArray(f.tags)?f.tags:((E=f.tags)==null?void 0:E.split(",").map(j=>j.trim()))||[]};if(d){const{error:j}=await re.from("courses").update(A).eq("id",d.id);if(j)throw j;Ae.success("Kurs erfolgreich aktualisiert")}else{const{error:j}=await re.from("courses").insert([A]);if(j)throw j;Ae.success("Kurs erfolgreich erstellt")}c(!1),g()}catch(A){console.error("Error saving course:",A),Ae.error("Fehler beim Speichern des Kurses")}},_=async E=>{if(confirm("Sind Sie sicher, dass Sie diesen Kurs löschen möchten?"))try{const{error:A}=await re.from("courses").delete().eq("id",E);if(A)throw A;Ae.success("Kurs erfolgreich gelöscht"),g()}catch(A){console.error("Error deleting course:",A),Ae.error("Fehler beim Löschen des Kurses")}},N=(E,A)=>{p(j=>({...j,[E]:A}))};return i?l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsx("main",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsxs("main",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"CMS Administration"}),l.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Kurse und Inhalte"})]}),l.jsxs(J,{onClick:v,className:"gap-2",children:[l.jsx(kd,{className:"h-4 w-4"}),"Neuen Kurs erstellen"]})]}),l.jsxs(Xs,{defaultValue:"courses",className:"space-y-6",children:[l.jsxs(fs,{children:[l.jsxs(et,{value:"courses",className:"gap-2",children:[l.jsx(Ys,{className:"h-4 w-4"}),"Kurse"]}),l.jsxs(et,{value:"users",className:"gap-2",children:[l.jsx(Bf,{className:"h-4 w-4"}),"Benutzer"]}),l.jsxs(et,{value:"settings",className:"gap-2",children:[l.jsx(iw,{className:"h-4 w-4"}),"Einstellungen"]})]}),l.jsx(ot,{value:"courses",className:"space-y-6",children:l.jsxs(ee,{children:[l.jsx(st,{children:l.jsx(ut,{children:"Kursverwaltung"})}),l.jsx(Le,{children:l.jsxs(Rf,{children:[l.jsx(Mf,{children:l.jsxs(Ws,{children:[l.jsx(Ie,{children:"Titel"}),l.jsx(Ie,{children:"Veranstalter"}),l.jsx(Ie,{children:"Ort"}),l.jsx(Ie,{children:"Modalität"}),l.jsx(Ie,{children:"Status"}),l.jsx(Ie,{children:"Preis"}),l.jsx(Ie,{children:"Aktionen"})]})}),l.jsx(If,{children:r.map(E=>l.jsxs(Ws,{children:[l.jsx(De,{className:"font-medium",children:E.title}),l.jsx(De,{children:E.venue}),l.jsxs(De,{children:[E.city,", ",E.country]}),l.jsx(De,{children:l.jsx(de,{variant:"outline",children:E.modality})}),l.jsx(De,{children:l.jsx(de,{variant:E.status==="published"?"default":"secondary",children:E.status})}),l.jsx(De,{children:m(E.price,E.currency)}),l.jsx(De,{children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx(J,{variant:"outline",size:"sm",onClick:()=>w(E),children:l.jsx(lE,{className:"h-3 w-3"})}),l.jsx(J,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>_(E.id),children:l.jsx(H2,{className:"h-3 w-3"})})]})})]},E.id))})]})})]})}),l.jsx(ot,{value:"users",children:l.jsxs(ee,{children:[l.jsx(st,{children:l.jsx(ut,{children:"Benutzerverwaltung"})}),l.jsx(Le,{children:l.jsx("p",{className:"text-muted-foreground",children:"Benutzerverwaltung wird in zukünftigen Updates verfügbar sein."})})]})}),l.jsx(ot,{value:"settings",children:l.jsxs(ee,{children:[l.jsx(st,{children:l.jsx(ut,{children:"Systemeinstellungen"})}),l.jsx(Le,{children:l.jsx("p",{className:"text-muted-foreground",children:"Systemeinstellungen werden in zukünftigen Updates verfügbar sein."})})]})})]}),l.jsx(Av,{open:o,onOpenChange:c,children:l.jsxs(Xf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white text-gray-900 border border-gray-200 shadow-lg",children:[l.jsx(Qf,{children:l.jsx(Jf,{className:"text-gray-900",children:d?"Kurs bearbeiten":"Neuen Kurs erstellen"})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Grundinformationen"}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"title",className:"text-foreground",children:"Titel *"}),l.jsx(Fe,{id:"title",value:f.title||"",onChange:E=>N("title",E.target.value),placeholder:"Kurstitel eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"venue",className:"text-foreground",children:"Veranstalter *"}),l.jsx(Fe,{id:"venue",value:f.venue||"",onChange:E=>N("venue",E.target.value),placeholder:"Veranstalter eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"city",className:"text-foreground",children:"Stadt"}),l.jsx(Fe,{id:"city",value:f.city||"",onChange:E=>N("city",E.target.value),placeholder:"Stadt eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"country",className:"text-foreground",children:"Land"}),l.jsx(Fe,{id:"country",value:f.country||"",onChange:E=>N("country",E.target.value),placeholder:"Land eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),l.jsxs("div",{className:"space-y-2 md:col-span-2",children:[l.jsx(we,{htmlFor:"description",className:"text-foreground",children:"Beschreibung"}),l.jsx(Cw,{id:"description",value:f.description||"",onChange:E=>N("description",E.target.value),placeholder:"Kursbeschreibung eingeben",rows:4,className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Kursdetails & Termine"}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{className:"text-foreground",children:"Startdatum"}),l.jsxs(Hy,{children:[l.jsx(Wy,{asChild:!0,children:l.jsxs(J,{variant:"outline",className:te("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.start_date&&"text-muted-foreground"),children:[l.jsx(Vn,{className:"mr-2 h-4 w-4"}),f.start_date?Wi(new Date(f.start_date),"PPP",{locale:t1}):l.jsx("span",{children:"Startdatum wählen"})]})}),l.jsx(nm,{className:"w-auto p-0 bg-background border-border",align:"start",children:l.jsx(Sx,{mode:"single",selected:f.start_date?new Date(f.start_date):void 0,onSelect:E=>N("start_date",E==null?void 0:E.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{className:"text-foreground",children:"Enddatum"}),l.jsxs(Hy,{children:[l.jsx(Wy,{asChild:!0,children:l.jsxs(J,{variant:"outline",className:te("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.end_date&&"text-muted-foreground"),children:[l.jsx(Vn,{className:"mr-2 h-4 w-4"}),f.end_date?Wi(new Date(f.end_date),"PPP",{locale:t1}):l.jsx("span",{children:"Enddatum wählen"})]})}),l.jsx(nm,{className:"w-auto p-0 bg-background border-border",align:"start",children:l.jsx(Sx,{mode:"single",selected:f.end_date?new Date(f.end_date):void 0,onSelect:E=>N("end_date",E==null?void 0:E.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{className:"text-foreground",children:"Anmeldeschluss"}),l.jsxs(Hy,{children:[l.jsx(Wy,{asChild:!0,children:l.jsxs(J,{variant:"outline",className:te("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.registration_deadline&&"text-muted-foreground"),children:[l.jsx(Vn,{className:"mr-2 h-4 w-4"}),f.registration_deadline?Wi(new Date(f.registration_deadline),"PPP",{locale:t1}):l.jsx("span",{children:"Anmeldeschluss wählen"})]})}),l.jsx(nm,{className:"w-auto p-0 bg-background border-border",align:"start",children:l.jsx(Sx,{mode:"single",selected:f.registration_deadline?new Date(f.registration_deadline):void 0,onSelect:E=>N("registration_deadline",E==null?void 0:E.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"specialty",className:"text-foreground",children:"Fachgebiet"}),l.jsx(Fe,{id:"specialty",value:f.specialty||"",onChange:E=>N("specialty",E.target.value),placeholder:"Fachgebiet eingeben",className:"bg-background text-foreground border-input"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"language",className:"text-foreground",children:"Sprache"}),l.jsxs(Or,{value:f.language||"Deutsch",onValueChange:E=>N("language",E),children:[l.jsx(ar,{className:"bg-background text-foreground border-input",children:l.jsx(Lr,{})}),l.jsxs(or,{className:"bg-background text-foreground border-border",children:[l.jsx(Ye,{value:"Deutsch",children:"Deutsch"}),l.jsx(Ye,{value:"English",children:"English"}),l.jsx(Ye,{value:"Français",children:"Français"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"modality",className:"text-foreground",children:"Modalität"}),l.jsxs(Or,{value:f.modality||"onsite",onValueChange:E=>N("modality",E),children:[l.jsx(ar,{className:"bg-background text-foreground border-input",children:l.jsx(Lr,{})}),l.jsxs(or,{className:"bg-background text-foreground border-border",children:[l.jsx(Ye,{value:"onsite",children:"Vor Ort"}),l.jsx(Ye,{value:"online",children:"Online"}),l.jsx(Ye,{value:"hybrid",children:"Hybrid"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"difficulty_level",className:"text-foreground",children:"Schwierigkeitsgrad"}),l.jsxs(Or,{value:f.difficulty_level||"beginner",onValueChange:E=>N("difficulty_level",E),children:[l.jsx(ar,{className:"bg-background text-foreground border-input",children:l.jsx(Lr,{})}),l.jsxs(or,{className:"bg-background text-foreground border-border",children:[l.jsx(Ye,{value:"beginner",children:"Anfänger"}),l.jsx(Ye,{value:"intermediate",children:"Fortgeschritten"}),l.jsx(Ye,{value:"advanced",children:"Experte"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"status",className:"text-foreground",children:"Status"}),l.jsxs(Or,{value:f.status||"draft",onValueChange:E=>N("status",E),children:[l.jsx(ar,{className:"bg-background text-foreground border-input",children:l.jsx(Lr,{})}),l.jsxs(or,{className:"bg-background text-foreground border-border",children:[l.jsx(Ye,{value:"draft",children:"Entwurf"}),l.jsx(Ye,{value:"published",children:"Veröffentlicht"}),l.jsx(Ye,{value:"archived",children:"Archiviert"})]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"tags",className:"text-foreground",children:"Tags (kommagetrennt)"}),l.jsx(Fe,{id:"tags",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:E=>N("tags",E.target.value),placeholder:"Tag1, Tag2, Tag3",className:"bg-background text-foreground border-input"})]})]})]}),l.jsx("div",{className:"md:col-span-2 space-y-6 border-t border-border pt-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsx(z9,{currentImageUrl:f.cover_image_url||void 0,onImageUploaded:E=>N("cover_image_url",E),onImageRemoved:()=>N("cover_image_url",null)}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"price",className:"text-foreground",children:"Preis"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[l.jsx(J,{type:"button",variant:f.price===0?"default":"outline",onClick:()=>N("price",0),className:"text-xs",children:"Kostenlos"}),l.jsx(J,{type:"button",variant:f.price===null?"default":"outline",onClick:()=>N("price",null),className:"text-xs",children:"k.A."}),l.jsx(J,{type:"button",variant:f.price&&f.price>0?"default":"outline",onClick:()=>N("price",1),className:"text-xs",children:"Kostenpflichtig"})]}),f.price&&f.price>0&&l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("div",{children:l.jsx(Fe,{type:"number",placeholder:"Preis eingeben",value:f.price||"",onChange:E=>N("price",parseFloat(E.target.value)||1),className:"bg-background text-foreground border-input"})}),l.jsx("div",{children:l.jsxs(Or,{value:f.currency||"CHF",onValueChange:E=>N("currency",E),children:[l.jsx(ar,{className:"bg-background text-foreground border-input",children:l.jsx(Lr,{})}),l.jsxs(or,{className:"bg-background text-foreground border-border",children:[l.jsx(Ye,{value:"CHF",children:"CHF"}),l.jsx(Ye,{value:"EUR",children:"EUR"}),l.jsx(Ye,{value:"USD",children:"USD"})]})]})})]}),l.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Aktuelle Anzeige: ",l.jsx("span",{className:"font-medium",children:m(f.price,f.currency)})]})]})]})})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[l.jsxs(J,{variant:"outline",onClick:()=>c(!1),children:[l.jsx(no,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),l.jsxs(J,{onClick:x,children:[l.jsx(sw,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})]})]})},tQ=()=>l.jsxs("div",{className:"min-h-screen bg-background",children:[l.jsx(Ui,{}),l.jsx("main",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h1",{className:"text-4xl font-bold text-card-foreground mb-4",children:"Publikationen & Forschung"}),l.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Übersicht meiner wissenschaftlichen Publikationen und laufenden Forschungsprojekte in der Ophthalmologie und Chirurgie."})]}),l.jsx(uM,{})]})})]}),nQ=()=>{const n=so(),[e,t]=b.useState(!1),[r,s]=b.useState(""),[i,a]=b.useState(""),[o,c]=b.useState(""),[d,h]=b.useState(""),[f,p]=b.useState("1"),[m,y]=b.useState(""),g=async v=>{v.preventDefault(),y(""),t(!0);try{const{data:x,error:_}=await re.auth.signInWithPassword({email:r,password:i});if(_)throw _;x.user&&(Ae.success("Anmeldung erfolgreich! Willkommen zurück!"),n("/fmh"))}catch(x){console.error("Sign in error:",x);const _=x instanceof Error?x.message:"Anmeldung fehlgeschlagen";y(_),Ae.error(_)}finally{t(!1)}},w=async v=>{v.preventDefault(),y(""),t(!0);try{const{data:x,error:_}=await re.auth.signUp({email:r,password:i,options:{data:{full_name:o,institution:d,pgy_level:parseInt(f)}}});if(_)throw _;x.user&&(Ae.success("Registrierung erfolgreich! Bitte überprüfen Sie Ihre E-Mail für die Bestätigung."),x.session&&n("/fmh"))}catch(x){console.error("Sign up error:",x);const _=x instanceof Error?x.message:"Registrierung fehlgeschlagen";y(_),Ae.error(_)}finally{t(!1)}};return l.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"FMH Tracking"}),l.jsx("p",{className:"text-muted-foreground",children:"Melden Sie sich an oder erstellen Sie ein Konto"})]}),l.jsxs(ee,{className:"medical-card",children:[l.jsx(st,{children:l.jsx(ut,{className:"text-center",children:"Authentifizierung"})}),l.jsx(Le,{children:l.jsxs(Xs,{defaultValue:"signin",className:"w-full",children:[l.jsxs(fs,{className:"grid w-full grid-cols-2",children:[l.jsx(et,{value:"signin",children:"Anmelden"}),l.jsx(et,{value:"signup",children:"Registrieren"})]}),l.jsx(ot,{value:"signin",children:l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"signin-email",children:"E-Mail"}),l.jsxs("div",{className:"relative",children:[l.jsx(Yj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(Fe,{id:"signin-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:r,onChange:v=>s(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"signin-password",children:"Passwort"}),l.jsxs("div",{className:"relative",children:[l.jsx(Kj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(Fe,{id:"signin-password",type:"password",placeholder:"Ihr Passwort",value:i,onChange:v=>a(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),m&&l.jsx(Ju,{variant:"destructive",children:l.jsx(Zu,{children:m})}),l.jsxs(J,{type:"submit",className:"w-full",disabled:e,children:[e&&l.jsx(r_,{className:"mr-2 h-4 w-4 animate-spin"}),"Anmelden"]})]})}),l.jsx(ot,{value:"signup",children:l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"signup-name",children:"Vollständiger Name"}),l.jsxs("div",{className:"relative",children:[l.jsx(W2,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(Fe,{id:"signup-name",type:"text",placeholder:"Dr. Max Mustermann",value:o,onChange:v=>c(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"signup-email",children:"E-Mail"}),l.jsxs("div",{className:"relative",children:[l.jsx(Yj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(Fe,{id:"signup-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:r,onChange:v=>s(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"signup-password",children:"Passwort"}),l.jsxs("div",{className:"relative",children:[l.jsx(Kj,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(Fe,{id:"signup-password",type:"password",placeholder:"Mindestens 6 Zeichen",value:i,onChange:v=>a(v.target.value),className:"pl-10",required:!0,disabled:e,minLength:6})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"signup-institution",children:"Institution"}),l.jsxs("div",{className:"relative",children:[l.jsx(F2,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsx(Fe,{id:"signup-institution",type:"text",placeholder:"Universitätsspital Zürich",value:d,onChange:v=>h(v.target.value),className:"pl-10",disabled:e})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(we,{htmlFor:"signup-pgy",children:"PGY Level"}),l.jsxs("div",{className:"relative",children:[l.jsx(aE,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),l.jsxs("select",{id:"signup-pgy",value:f,onChange:v=>p(v.target.value),className:"w-full pl-10 pr-3 py-2 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring",disabled:e,children:[l.jsx("option",{value:"1",children:"PGY-1"}),l.jsx("option",{value:"2",children:"PGY-2"}),l.jsx("option",{value:"3",children:"PGY-3"}),l.jsx("option",{value:"4",children:"PGY-4"}),l.jsx("option",{value:"5",children:"PGY-5"}),l.jsx("option",{value:"6",children:"PGY-6"}),l.jsx("option",{value:"7",children:"PGY-7"})]})]})]}),m&&l.jsx(Ju,{variant:"destructive",children:l.jsx(Zu,{children:m})}),l.jsxs(J,{type:"submit",className:"w-full",disabled:e,children:[e&&l.jsx(r_,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrieren"]})]})})]})})]})]})})};function rQ(){const n=so();return b.useEffect(()=>{(async()=>{const{data:{session:t}}=await re.auth.getSession();t&&n("/fmh")})()},[n]),l.jsx(nQ,{})}const sQ=()=>{const n=Xd();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),l.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},iQ=new hB,aQ=()=>{const n=so();return b.useEffect(()=>{const e=sessionStorage.getItem("intendedRoute");e&&(sessionStorage.removeItem("intendedRoute"),n(e))},[n]),l.jsxs(s6,{children:[l.jsx(_s,{path:"/",element:l.jsx($H,{})}),l.jsx(_s,{path:"/auth",element:l.jsx(rQ,{})}),l.jsx(_s,{path:"/dashboard",element:l.jsx(a8,{})}),l.jsx(_s,{path:"/courses",element:l.jsx(fG,{})}),l.jsx(_s,{path:"/courses/:id",element:l.jsx($G,{})}),l.jsx(_s,{path:"/publications",element:l.jsx(tQ,{})}),l.jsx(_s,{path:"/profile/:handle",element:l.jsx(l8,{})}),l.jsx(_s,{path:"/fmh",element:l.jsx($9,{})}),l.jsx(_s,{path:"/admin",element:l.jsx(eQ,{})}),l.jsx(_s,{path:"*",element:l.jsx(sQ,{})})]})},oQ=()=>l.jsx(pB,{client:iQ,children:l.jsxs(MH,{children:[l.jsx(uz,{}),l.jsx(Hz,{}),l.jsx(h6,{basename:"/swiss-med-track",children:l.jsx(aQ,{})})]})});c2(document.getElementById("root")).render(l.jsx(oQ,{}));
