var GF=Object.defineProperty;var DE=n=>{throw TypeError(n)};var KF=(n,e,t)=>e in n?GF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>KF(n,typeof e!="symbol"?e+"":e,t),Vb=(n,e,t)=>e.has(n)||DE("Cannot "+t);var u=(n,e,t)=>(Vb(n,e,"read from private field"),t?t.call(n):e.get(n)),C=(n,e,t)=>e.has(n)?DE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),S=(n,e,t,s)=>(Vb(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),k=(n,e,t)=>(Vb(n,e,"access private method"),t);var Xt=(n,e,t,s)=>({set _(r){S(n,e,r,t)},get _(){return u(n,e,s)}});function YF(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zk(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function XF(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var eP={exports:{}},Hy={},tP={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=Symbol.for("react.element"),QF=Symbol.for("react.portal"),JF=Symbol.for("react.fragment"),ZF=Symbol.for("react.strict_mode"),e4=Symbol.for("react.profiler"),t4=Symbol.for("react.provider"),n4=Symbol.for("react.context"),s4=Symbol.for("react.forward_ref"),r4=Symbol.for("react.suspense"),i4=Symbol.for("react.memo"),a4=Symbol.for("react.lazy"),OE=Symbol.iterator;function o4(n){return n===null||typeof n!="object"?null:(n=OE&&n[OE]||n["@@iterator"],typeof n=="function"?n:null)}var nP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sP=Object.assign,rP={};function zf(n,e,t){this.props=n,this.context=e,this.refs=rP,this.updater=t||nP}zf.prototype.isReactComponent={};zf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};zf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function iP(){}iP.prototype=zf.prototype;function dN(n,e,t){this.props=n,this.context=e,this.refs=rP,this.updater=t||nP}var uN=dN.prototype=new iP;uN.constructor=dN;sP(uN,zf.prototype);uN.isPureReactComponent=!0;var LE=Array.isArray,aP=Object.prototype.hasOwnProperty,hN={current:null},oP={key:!0,ref:!0,__self:!0,__source:!0};function lP(n,e,t){var s,r={},i=null,a=null;if(e!=null)for(s in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)aP.call(e,s)&&!oP.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:fv,type:n,key:i,ref:a,props:r,_owner:hN.current}}function l4(n,e){return{$$typeof:fv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function fN(n){return typeof n=="object"&&n!==null&&n.$$typeof===fv}function c4(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var FE=/\/+/g;function qb(n,e){return typeof n=="object"&&n!==null&&n.key!=null?c4(""+n.key):e.toString(36)}function kx(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case fv:case QF:a=!0}}if(a)return a=n,r=r(a),n=s===""?"."+qb(a,0):s,LE(r)?(t="",n!=null&&(t=n.replace(FE,"$&/")+"/"),kx(r,e,t,"",function(d){return d})):r!=null&&(fN(r)&&(r=l4(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(FE,"$&/")+"/")+n)),e.push(r)),1;if(a=0,s=s===""?".":s+":",LE(n))for(var l=0;l<n.length;l++){i=n[l];var c=s+qb(i,l);a+=kx(i,e,t,c,r)}else if(c=o4(n),typeof c=="function")for(n=c.call(n),l=0;!(i=n.next()).done;)i=i.value,c=s+qb(i,l++),a+=kx(i,e,t,c,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Wv(n,e,t){if(n==null)return n;var s=[],r=0;return kx(n,s,"","",function(i){return e.call(t,i,r++)}),s}function d4(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Kn={current:null},Px={transition:null},u4={ReactCurrentDispatcher:Kn,ReactCurrentBatchConfig:Px,ReactCurrentOwner:hN};function cP(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Wv,forEach:function(n,e,t){Wv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Wv(n,function(){e++}),e},toArray:function(n){return Wv(n,function(e){return e})||[]},only:function(n){if(!fN(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ie.Component=zf;Ie.Fragment=JF;Ie.Profiler=e4;Ie.PureComponent=dN;Ie.StrictMode=ZF;Ie.Suspense=r4;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u4;Ie.act=cP;Ie.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=sP({},n.props),r=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=hN.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)aP.call(e,c)&&!oP.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:fv,type:n.type,key:r,ref:i,props:s,_owner:a}};Ie.createContext=function(n){return n={$$typeof:n4,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:t4,_context:n},n.Consumer=n};Ie.createElement=lP;Ie.createFactory=function(n){var e=lP.bind(null,n);return e.type=n,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(n){return{$$typeof:s4,render:n}};Ie.isValidElement=fN;Ie.lazy=function(n){return{$$typeof:a4,_payload:{_status:-1,_result:n},_init:d4}};Ie.memo=function(n,e){return{$$typeof:i4,type:n,compare:e===void 0?null:e}};Ie.startTransition=function(n){var e=Px.transition;Px.transition={};try{n()}finally{Px.transition=e}};Ie.unstable_act=cP;Ie.useCallback=function(n,e){return Kn.current.useCallback(n,e)};Ie.useContext=function(n){return Kn.current.useContext(n)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(n){return Kn.current.useDeferredValue(n)};Ie.useEffect=function(n,e){return Kn.current.useEffect(n,e)};Ie.useId=function(){return Kn.current.useId()};Ie.useImperativeHandle=function(n,e,t){return Kn.current.useImperativeHandle(n,e,t)};Ie.useInsertionEffect=function(n,e){return Kn.current.useInsertionEffect(n,e)};Ie.useLayoutEffect=function(n,e){return Kn.current.useLayoutEffect(n,e)};Ie.useMemo=function(n,e){return Kn.current.useMemo(n,e)};Ie.useReducer=function(n,e,t){return Kn.current.useReducer(n,e,t)};Ie.useRef=function(n){return Kn.current.useRef(n)};Ie.useState=function(n){return Kn.current.useState(n)};Ie.useSyncExternalStore=function(n,e,t){return Kn.current.useSyncExternalStore(n,e,t)};Ie.useTransition=function(){return Kn.current.useTransition()};Ie.version="18.3.1";tP.exports=Ie;var w=tP.exports;const Z=Zk(w),mN=YF({__proto__:null,default:Z},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h4=w,f4=Symbol.for("react.element"),m4=Symbol.for("react.fragment"),p4=Object.prototype.hasOwnProperty,g4=h4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v4={key:!0,ref:!0,__self:!0,__source:!0};function dP(n,e,t){var s,r={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)p4.call(e,s)&&!v4.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:f4,type:n,key:i,ref:a,props:r,_owner:g4.current}}Hy.Fragment=m4;Hy.jsx=dP;Hy.jsxs=dP;eP.exports=Hy;var o=eP.exports,uP={exports:{}},Ks={},hP={exports:{}},fP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,R){var U=D.length;D.push(R);e:for(;0<U;){var X=U-1>>>1,B=D[X];if(0<r(B,R))D[X]=R,D[U]=B,U=X;else break e}}function t(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var R=D[0],U=D.pop();if(U!==R){D[0]=U;e:for(var X=0,B=D.length,V=B>>>1;X<V;){var Q=2*(X+1)-1,J=D[Q],ce=Q+1,H=D[ce];if(0>r(J,U))ce<B&&0>r(H,J)?(D[X]=H,D[ce]=U,X=ce):(D[X]=J,D[Q]=U,X=Q);else if(ce<B&&0>r(H,U))D[X]=H,D[ce]=U,X=ce;else break e}}return R}function r(D,R){var U=D.sortIndex-R.sortIndex;return U!==0?U:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,p=!1,x=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var R=t(d);R!==null;){if(R.callback===null)s(d);else if(R.startTime<=D)s(d),R.sortIndex=R.expirationTime,e(c,R);else break;R=t(d)}}function N(D){if(g=!1,_(D),!x)if(t(c)!==null)x=!0,F(j);else{var R=t(d);R!==null&&O(N,R.startTime-D)}}function j(D,R){x=!1,g&&(g=!1,v(P),P=-1),p=!0;var U=m;try{for(_(R),f=t(c);f!==null&&(!(f.expirationTime>R)||D&&!M());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var B=X(f.expirationTime<=R);R=n.unstable_now(),typeof B=="function"?f.callback=B:f===t(c)&&s(c),_(R)}else s(c);f=t(c)}if(f!==null)var V=!0;else{var Q=t(d);Q!==null&&O(N,Q.startTime-R),V=!1}return V}finally{f=null,m=U,p=!1}}var A=!1,E=null,P=-1,T=5,I=-1;function M(){return!(n.unstable_now()-I<T)}function L(){if(E!==null){var D=n.unstable_now();I=D;var R=!0;try{R=E(!0,D)}finally{R?z():(A=!1,E=null)}}else A=!1}var z;if(typeof y=="function")z=function(){y(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,W=$.port2;$.port1.onmessage=L,z=function(){W.postMessage(null)}}else z=function(){b(L,0)};function F(D){E=D,A||(A=!0,z())}function O(D,R){P=b(function(){D(n.unstable_now())},R)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){x||p||(x=!0,F(j))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var U=m;m=R;try{return D()}finally{m=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var U=m;m=D;try{return R()}finally{m=U}},n.unstable_scheduleCallback=function(D,R,U){var X=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?X+U:X):U=X,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=U+B,D={id:h++,callback:R,priorityLevel:D,startTime:U,expirationTime:B,sortIndex:-1},U>X?(D.sortIndex=U,e(d,D),t(c)===null&&D===t(d)&&(g?(v(P),P=-1):g=!0,O(N,U-X))):(D.sortIndex=B,e(c,D),x||p||(x=!0,F(j))),D},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(D){var R=m;return function(){var U=m;m=R;try{return D.apply(this,arguments)}finally{m=U}}}})(fP);hP.exports=fP;var x4=hP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y4=w,Vs=x4;function K(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mP=new Set,ap={};function Qd(n,e){Sf(n,e),Sf(n+"Capture",e)}function Sf(n,e){for(ap[n]=e,n=0;n<e.length;n++)mP.add(e[n])}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l1=Object.prototype.hasOwnProperty,b4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$E={},zE={};function w4(n){return l1.call(zE,n)?!0:l1.call($E,n)?!1:b4.test(n)?zE[n]=!0:($E[n]=!0,!1)}function _4(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S4(n,e,t,s){if(e===null||typeof e>"u"||_4(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yn(n,e,t,s,r,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){yn[n]=new Yn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];yn[e]=new Yn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){yn[n]=new Yn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){yn[n]=new Yn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){yn[n]=new Yn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){yn[n]=new Yn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){yn[n]=new Yn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){yn[n]=new Yn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){yn[n]=new Yn(n,5,!1,n.toLowerCase(),null,!1,!1)});var pN=/[\-:]([a-z])/g;function gN(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(pN,gN);yn[e]=new Yn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(pN,gN);yn[e]=new Yn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(pN,gN);yn[e]=new Yn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){yn[n]=new Yn(n,1,!1,n.toLowerCase(),null,!1,!1)});yn.xlinkHref=new Yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){yn[n]=new Yn(n,1,!1,n.toLowerCase(),null,!0,!0)});function vN(n,e,t,s){var r=yn.hasOwnProperty(e)?yn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S4(e,t,r,s)&&(t=null),s||r===null?w4(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var io=y4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vv=Symbol.for("react.element"),Pu=Symbol.for("react.portal"),Tu=Symbol.for("react.fragment"),xN=Symbol.for("react.strict_mode"),c1=Symbol.for("react.profiler"),pP=Symbol.for("react.provider"),gP=Symbol.for("react.context"),yN=Symbol.for("react.forward_ref"),d1=Symbol.for("react.suspense"),u1=Symbol.for("react.suspense_list"),bN=Symbol.for("react.memo"),So=Symbol.for("react.lazy"),vP=Symbol.for("react.offscreen"),BE=Symbol.iterator;function sm(n){return n===null||typeof n!="object"?null:(n=BE&&n[BE]||n["@@iterator"],typeof n=="function"?n:null)}var St=Object.assign,Gb;function ym(n){if(Gb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Gb=e&&e[1]||""}return`
`+Gb+n}var Kb=!1;function Yb(n,e){if(!n||Kb)return"";Kb=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var s=d}Reflect.construct(n,[],e)}else{try{e.call()}catch(d){s=d}n.call(e.prototype)}else{try{throw Error()}catch(d){s=d}n()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=s.stack.split(`
`),a=r.length-1,l=i.length-1;1<=a&&0<=l&&r[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(r[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||r[a]!==i[l]){var c=`
`+r[a].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=a&&0<=l);break}}}finally{Kb=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ym(n):""}function N4(n){switch(n.tag){case 5:return ym(n.type);case 16:return ym("Lazy");case 13:return ym("Suspense");case 19:return ym("SuspenseList");case 0:case 2:case 15:return n=Yb(n.type,!1),n;case 11:return n=Yb(n.type.render,!1),n;case 1:return n=Yb(n.type,!0),n;default:return""}}function h1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Tu:return"Fragment";case Pu:return"Portal";case c1:return"Profiler";case xN:return"StrictMode";case d1:return"Suspense";case u1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case gP:return(n.displayName||"Context")+".Consumer";case pP:return(n._context.displayName||"Context")+".Provider";case yN:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case bN:return e=n.displayName||null,e!==null?e:h1(n.type)||"Memo";case So:e=n._payload,n=n._init;try{return h1(n(e))}catch{}}return null}function j4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return h1(e);case 8:return e===xN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Il(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function E4(n){var e=xP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function qv(n){n._valueTracker||(n._valueTracker=E4(n))}function yP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=xP(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function A0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function f1(n,e){var t=e.checked;return St({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function UE(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Il(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bP(n,e){e=e.checked,e!=null&&vN(n,"checked",e,!1)}function m1(n,e){bP(n,e);var t=Il(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?p1(n,e.type,t):e.hasOwnProperty("defaultValue")&&p1(n,e.type,Il(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function HE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function p1(n,e,t){(e!=="number"||A0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var bm=Array.isArray;function Vu(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Il(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function g1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return St({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function WE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(K(92));if(bm(t)){if(1<t.length)throw Error(K(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Il(t)}}function wP(n,e){var t=Il(e.value),s=Il(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function VE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function _P(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_P(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Gv,SP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Gv=Gv||document.createElement("div"),Gv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function op(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Vm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A4=["Webkit","ms","Moz","O"];Object.keys(Vm).forEach(function(n){A4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Vm[e]=Vm[n]})});function NP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Vm.hasOwnProperty(n)&&Vm[n]?(""+e).trim():e+"px"}function jP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=NP(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var C4=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x1(n,e){if(e){if(C4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function y1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var b1=null;function wN(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var w1=null,qu=null,Gu=null;function qE(n){if(n=gv(n)){if(typeof w1!="function")throw Error(K(280));var e=n.stateNode;e&&(e=Ky(e),w1(n.stateNode,n.type,e))}}function EP(n){qu?Gu?Gu.push(n):Gu=[n]:qu=n}function AP(){if(qu){var n=qu,e=Gu;if(Gu=qu=null,qE(n),e)for(n=0;n<e.length;n++)qE(e[n])}}function CP(n,e){return n(e)}function kP(){}var Xb=!1;function PP(n,e,t){if(Xb)return n(e,t);Xb=!0;try{return CP(n,e,t)}finally{Xb=!1,(qu!==null||Gu!==null)&&(kP(),AP())}}function lp(n,e){var t=n.stateNode;if(t===null)return null;var s=Ky(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(K(231,e,typeof t));return t}var _1=!1;if(Qa)try{var rm={};Object.defineProperty(rm,"passive",{get:function(){_1=!0}}),window.addEventListener("test",rm,rm),window.removeEventListener("test",rm,rm)}catch{_1=!1}function k4(n,e,t,s,r,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var qm=!1,C0=null,k0=!1,S1=null,P4={onError:function(n){qm=!0,C0=n}};function T4(n,e,t,s,r,i,a,l,c){qm=!1,C0=null,k4.apply(P4,arguments)}function R4(n,e,t,s,r,i,a,l,c){if(T4.apply(this,arguments),qm){if(qm){var d=C0;qm=!1,C0=null}else throw Error(K(198));k0||(k0=!0,S1=d)}}function Jd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function TP(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function GE(n){if(Jd(n)!==n)throw Error(K(188))}function M4(n){var e=n.alternate;if(!e){if(e=Jd(n),e===null)throw Error(K(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return GE(r),n;if(i===s)return GE(r),e;i=i.sibling}throw Error(K(188))}if(t.return!==s.return)t=r,s=i;else{for(var a=!1,l=r.child;l;){if(l===t){a=!0,t=r,s=i;break}if(l===s){a=!0,s=r,t=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===t){a=!0,t=i,s=r;break}if(l===s){a=!0,s=i,t=r;break}l=l.sibling}if(!a)throw Error(K(189))}}if(t.alternate!==s)throw Error(K(190))}if(t.tag!==3)throw Error(K(188));return t.stateNode.current===t?n:e}function RP(n){return n=M4(n),n!==null?MP(n):null}function MP(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=MP(n);if(e!==null)return e;n=n.sibling}return null}var IP=Vs.unstable_scheduleCallback,KE=Vs.unstable_cancelCallback,I4=Vs.unstable_shouldYield,D4=Vs.unstable_requestPaint,kt=Vs.unstable_now,O4=Vs.unstable_getCurrentPriorityLevel,_N=Vs.unstable_ImmediatePriority,DP=Vs.unstable_UserBlockingPriority,P0=Vs.unstable_NormalPriority,L4=Vs.unstable_LowPriority,OP=Vs.unstable_IdlePriority,Wy=null,Bi=null;function F4(n){if(Bi&&typeof Bi.onCommitFiberRoot=="function")try{Bi.onCommitFiberRoot(Wy,n,void 0,(n.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:B4,$4=Math.log,z4=Math.LN2;function B4(n){return n>>>=0,n===0?32:31-($4(n)/z4|0)|0}var Kv=64,Yv=4194304;function wm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function T0(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var l=a&~r;l!==0?s=wm(l):(i&=a,i!==0&&(s=wm(i)))}else a=t&~r,a!==0?s=wm(a):i!==0&&(s=wm(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Kr(e),r=1<<t,s|=n[t],e&=~r;return s}function U4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H4(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-Kr(i),l=1<<a,c=r[a];c===-1?(!(l&t)||l&s)&&(r[a]=U4(l,e)):c<=e&&(n.expiredLanes|=l),i&=~l}}function N1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function LP(){var n=Kv;return Kv<<=1,!(Kv&4194240)&&(Kv=64),n}function Qb(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function mv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Kr(e),n[e]=t}function W4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Kr(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function SN(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Kr(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Ze=0;function FP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $P,NN,zP,BP,UP,j1=!1,Xv=[],jl=null,El=null,Al=null,cp=new Map,dp=new Map,jo=[],V4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function YE(n,e){switch(n){case"focusin":case"focusout":jl=null;break;case"dragenter":case"dragleave":El=null;break;case"mouseover":case"mouseout":Al=null;break;case"pointerover":case"pointerout":cp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dp.delete(e.pointerId)}}function im(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=gv(e),e!==null&&NN(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function q4(n,e,t,s,r){switch(e){case"focusin":return jl=im(jl,n,e,t,s,r),!0;case"dragenter":return El=im(El,n,e,t,s,r),!0;case"mouseover":return Al=im(Al,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return cp.set(i,im(cp.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,dp.set(i,im(dp.get(i)||null,n,e,t,s,r)),!0}return!1}function HP(n){var e=xc(n.target);if(e!==null){var t=Jd(e);if(t!==null){if(e=t.tag,e===13){if(e=TP(t),e!==null){n.blockedOn=e,UP(n.priority,function(){zP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Tx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=E1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);b1=s,t.target.dispatchEvent(s),b1=null}else return e=gv(t),e!==null&&NN(e),n.blockedOn=t,!1;e.shift()}return!0}function XE(n,e,t){Tx(n)&&t.delete(e)}function G4(){j1=!1,jl!==null&&Tx(jl)&&(jl=null),El!==null&&Tx(El)&&(El=null),Al!==null&&Tx(Al)&&(Al=null),cp.forEach(XE),dp.forEach(XE)}function am(n,e){n.blockedOn===e&&(n.blockedOn=null,j1||(j1=!0,Vs.unstable_scheduleCallback(Vs.unstable_NormalPriority,G4)))}function up(n){function e(r){return am(r,n)}if(0<Xv.length){am(Xv[0],n);for(var t=1;t<Xv.length;t++){var s=Xv[t];s.blockedOn===n&&(s.blockedOn=null)}}for(jl!==null&&am(jl,n),El!==null&&am(El,n),Al!==null&&am(Al,n),cp.forEach(e),dp.forEach(e),t=0;t<jo.length;t++)s=jo[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<jo.length&&(t=jo[0],t.blockedOn===null);)HP(t),t.blockedOn===null&&jo.shift()}var Ku=io.ReactCurrentBatchConfig,R0=!0;function K4(n,e,t,s){var r=Ze,i=Ku.transition;Ku.transition=null;try{Ze=1,jN(n,e,t,s)}finally{Ze=r,Ku.transition=i}}function Y4(n,e,t,s){var r=Ze,i=Ku.transition;Ku.transition=null;try{Ze=4,jN(n,e,t,s)}finally{Ze=r,Ku.transition=i}}function jN(n,e,t,s){if(R0){var r=E1(n,e,t,s);if(r===null)ow(n,e,s,M0,t),YE(n,s);else if(q4(r,n,e,t,s))s.stopPropagation();else if(YE(n,s),e&4&&-1<V4.indexOf(n)){for(;r!==null;){var i=gv(r);if(i!==null&&$P(i),i=E1(n,e,t,s),i===null&&ow(n,e,s,M0,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else ow(n,e,s,null,t)}}var M0=null;function E1(n,e,t,s){if(M0=null,n=wN(s),n=xc(n),n!==null)if(e=Jd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=TP(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return M0=n,null}function WP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O4()){case _N:return 1;case DP:return 4;case P0:case L4:return 16;case OP:return 536870912;default:return 16}default:return 16}}var _l=null,EN=null,Rx=null;function VP(){if(Rx)return Rx;var n,e=EN,t=e.length,s,r="value"in _l?_l.value:_l.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(s=1;s<=a&&e[t-s]===r[i-s];s++);return Rx=r.slice(n,1<s?1-s:void 0)}function Mx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Qv(){return!0}function QE(){return!1}function Ys(n){function e(t,s,r,i,a){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qv:QE,this.isPropagationStopped=QE,this}return St(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Qv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Qv)},persist:function(){},isPersistent:Qv}),e}var Bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AN=Ys(Bf),pv=St({},Bf,{view:0,detail:0}),X4=Ys(pv),Jb,Zb,om,Vy=St({},pv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CN,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==om&&(om&&n.type==="mousemove"?(Jb=n.screenX-om.screenX,Zb=n.screenY-om.screenY):Zb=Jb=0,om=n),Jb)},movementY:function(n){return"movementY"in n?n.movementY:Zb}}),JE=Ys(Vy),Q4=St({},Vy,{dataTransfer:0}),J4=Ys(Q4),Z4=St({},pv,{relatedTarget:0}),ew=Ys(Z4),e3=St({},Bf,{animationName:0,elapsedTime:0,pseudoElement:0}),t3=Ys(e3),n3=St({},Bf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),s3=Ys(n3),r3=St({},Bf,{data:0}),ZE=Ys(r3),i3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l3(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=o3[n])?!!e[n]:!1}function CN(){return l3}var c3=St({},pv,{key:function(n){if(n.key){var e=i3[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Mx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?a3[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CN,charCode:function(n){return n.type==="keypress"?Mx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Mx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),d3=Ys(c3),u3=St({},Vy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eA=Ys(u3),h3=St({},pv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CN}),f3=Ys(h3),m3=St({},Bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),p3=Ys(m3),g3=St({},Vy,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),v3=Ys(g3),x3=[9,13,27,32],kN=Qa&&"CompositionEvent"in window,Gm=null;Qa&&"documentMode"in document&&(Gm=document.documentMode);var y3=Qa&&"TextEvent"in window&&!Gm,qP=Qa&&(!kN||Gm&&8<Gm&&11>=Gm),tA=" ",nA=!1;function GP(n,e){switch(n){case"keyup":return x3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ru=!1;function b3(n,e){switch(n){case"compositionend":return KP(e);case"keypress":return e.which!==32?null:(nA=!0,tA);case"textInput":return n=e.data,n===tA&&nA?null:n;default:return null}}function w3(n,e){if(Ru)return n==="compositionend"||!kN&&GP(n,e)?(n=VP(),Rx=EN=_l=null,Ru=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qP&&e.locale!=="ko"?null:e.data;default:return null}}var _3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_3[n.type]:e==="textarea"}function YP(n,e,t,s){EP(s),e=I0(e,"onChange"),0<e.length&&(t=new AN("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Km=null,hp=null;function S3(n){a2(n,0)}function qy(n){var e=Du(n);if(yP(e))return n}function N3(n,e){if(n==="change")return e}var XP=!1;if(Qa){var tw;if(Qa){var nw="oninput"in document;if(!nw){var rA=document.createElement("div");rA.setAttribute("oninput","return;"),nw=typeof rA.oninput=="function"}tw=nw}else tw=!1;XP=tw&&(!document.documentMode||9<document.documentMode)}function iA(){Km&&(Km.detachEvent("onpropertychange",QP),hp=Km=null)}function QP(n){if(n.propertyName==="value"&&qy(hp)){var e=[];YP(e,hp,n,wN(n)),PP(S3,e)}}function j3(n,e,t){n==="focusin"?(iA(),Km=e,hp=t,Km.attachEvent("onpropertychange",QP)):n==="focusout"&&iA()}function E3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return qy(hp)}function A3(n,e){if(n==="click")return qy(e)}function C3(n,e){if(n==="input"||n==="change")return qy(e)}function k3(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xr=typeof Object.is=="function"?Object.is:k3;function fp(n,e){if(Xr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!l1.call(e,r)||!Xr(n[r],e[r]))return!1}return!0}function aA(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function oA(n,e){var t=aA(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=aA(t)}}function JP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?JP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function ZP(){for(var n=window,e=A0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=A0(n.document)}return e}function PN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function P3(n){var e=ZP(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&JP(t.ownerDocument.documentElement,t)){if(s!==null&&PN(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=oA(t,i);var a=oA(t,s);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var T3=Qa&&"documentMode"in document&&11>=document.documentMode,Mu=null,A1=null,Ym=null,C1=!1;function lA(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;C1||Mu==null||Mu!==A0(s)||(s=Mu,"selectionStart"in s&&PN(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ym&&fp(Ym,s)||(Ym=s,s=I0(A1,"onSelect"),0<s.length&&(e=new AN("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Mu)))}function Jv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Iu={animationend:Jv("Animation","AnimationEnd"),animationiteration:Jv("Animation","AnimationIteration"),animationstart:Jv("Animation","AnimationStart"),transitionend:Jv("Transition","TransitionEnd")},sw={},e2={};Qa&&(e2=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function Gy(n){if(sw[n])return sw[n];if(!Iu[n])return n;var e=Iu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in e2)return sw[n]=e[t];return n}var t2=Gy("animationend"),n2=Gy("animationiteration"),s2=Gy("animationstart"),r2=Gy("transitionend"),i2=new Map,cA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ql(n,e){i2.set(n,e),Qd(e,[n])}for(var rw=0;rw<cA.length;rw++){var iw=cA[rw],R3=iw.toLowerCase(),M3=iw[0].toUpperCase()+iw.slice(1);ql(R3,"on"+M3)}ql(t2,"onAnimationEnd");ql(n2,"onAnimationIteration");ql(s2,"onAnimationStart");ql("dblclick","onDoubleClick");ql("focusin","onFocus");ql("focusout","onBlur");ql(r2,"onTransitionEnd");Sf("onMouseEnter",["mouseout","mouseover"]);Sf("onMouseLeave",["mouseout","mouseover"]);Sf("onPointerEnter",["pointerout","pointerover"]);Sf("onPointerLeave",["pointerout","pointerover"]);Qd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _m="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I3=new Set("cancel close invalid load scroll toggle".split(" ").concat(_m));function dA(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,R4(s,e,void 0,n),n.currentTarget=null}function a2(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;dA(r,l,d),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;dA(r,l,d),i=c}}}if(k0)throw n=S1,k0=!1,S1=null,n}function ut(n,e){var t=e[M1];t===void 0&&(t=e[M1]=new Set);var s=n+"__bubble";t.has(s)||(o2(e,n,2,!1),t.add(s))}function aw(n,e,t){var s=0;e&&(s|=4),o2(t,n,s,e)}var Zv="_reactListening"+Math.random().toString(36).slice(2);function mp(n){if(!n[Zv]){n[Zv]=!0,mP.forEach(function(t){t!=="selectionchange"&&(I3.has(t)||aw(t,!1,n),aw(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Zv]||(e[Zv]=!0,aw("selectionchange",!1,e))}}function o2(n,e,t,s){switch(WP(e)){case 1:var r=K4;break;case 4:r=Y4;break;default:r=jN}t=r.bind(null,e,t,n),r=void 0,!_1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function ow(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;a=a.return}for(;l!==null;){if(a=xc(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}PP(function(){var d=i,h=wN(t),f=[];e:{var m=i2.get(n);if(m!==void 0){var p=AN,x=n;switch(n){case"keypress":if(Mx(t)===0)break e;case"keydown":case"keyup":p=d3;break;case"focusin":x="focus",p=ew;break;case"focusout":x="blur",p=ew;break;case"beforeblur":case"afterblur":p=ew;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=JE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=J4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=f3;break;case t2:case n2:case s2:p=t3;break;case r2:p=p3;break;case"scroll":p=X4;break;case"wheel":p=v3;break;case"copy":case"cut":case"paste":p=s3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=eA}var g=(e&4)!==0,b=!g&&n==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var y=d,_;y!==null;){_=y;var N=_.stateNode;if(_.tag===5&&N!==null&&(_=N,v!==null&&(N=lp(y,v),N!=null&&g.push(pp(y,N,_)))),b)break;y=y.return}0<g.length&&(m=new p(m,x,null,t,h),f.push({event:m,listeners:g}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",m&&t!==b1&&(x=t.relatedTarget||t.fromElement)&&(xc(x)||x[Ja]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=t.relatedTarget||t.toElement,p=d,x=x?xc(x):null,x!==null&&(b=Jd(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=d),p!==x)){if(g=JE,N="onMouseLeave",v="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(g=eA,N="onPointerLeave",v="onPointerEnter",y="pointer"),b=p==null?m:Du(p),_=x==null?m:Du(x),m=new g(N,y+"leave",p,t,h),m.target=b,m.relatedTarget=_,N=null,xc(h)===d&&(g=new g(v,y+"enter",x,t,h),g.target=_,g.relatedTarget=b,N=g),b=N,p&&x)t:{for(g=p,v=x,y=0,_=g;_;_=lu(_))y++;for(_=0,N=v;N;N=lu(N))_++;for(;0<y-_;)g=lu(g),y--;for(;0<_-y;)v=lu(v),_--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=lu(g),v=lu(v)}g=null}else g=null;p!==null&&uA(f,m,p,g,!1),x!==null&&b!==null&&uA(f,b,x,g,!0)}}e:{if(m=d?Du(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var j=N3;else if(sA(m))if(XP)j=C3;else{j=E3;var A=j3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=A3);if(j&&(j=j(n,d))){YP(f,j,t,h);break e}A&&A(n,m,d),n==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&p1(m,"number",m.value)}switch(A=d?Du(d):window,n){case"focusin":(sA(A)||A.contentEditable==="true")&&(Mu=A,A1=d,Ym=null);break;case"focusout":Ym=A1=Mu=null;break;case"mousedown":C1=!0;break;case"contextmenu":case"mouseup":case"dragend":C1=!1,lA(f,t,h);break;case"selectionchange":if(T3)break;case"keydown":case"keyup":lA(f,t,h)}var E;if(kN)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ru?GP(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(qP&&t.locale!=="ko"&&(Ru||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ru&&(E=VP()):(_l=h,EN="value"in _l?_l.value:_l.textContent,Ru=!0)),A=I0(d,P),0<A.length&&(P=new ZE(P,n,null,t,h),f.push({event:P,listeners:A}),E?P.data=E:(E=KP(t),E!==null&&(P.data=E)))),(E=y3?b3(n,t):w3(n,t))&&(d=I0(d,"onBeforeInput"),0<d.length&&(h=new ZE("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=E))}a2(f,e)})}function pp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function I0(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=lp(n,t),i!=null&&s.unshift(pp(n,i,r)),i=lp(n,e),i!=null&&s.push(pp(n,i,r))),n=n.return}return s}function lu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function uA(n,e,t,s,r){for(var i=e._reactName,a=[];t!==null&&t!==s;){var l=t,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,r?(c=lp(t,i),c!=null&&a.unshift(pp(t,c,l))):r||(c=lp(t,i),c!=null&&a.push(pp(t,c,l)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var D3=/\r\n?/g,O3=/\u0000|\uFFFD/g;function hA(n){return(typeof n=="string"?n:""+n).replace(D3,`
`).replace(O3,"")}function ex(n,e,t){if(e=hA(e),hA(n)!==e&&t)throw Error(K(425))}function D0(){}var k1=null,P1=null;function T1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var R1=typeof setTimeout=="function"?setTimeout:void 0,L3=typeof clearTimeout=="function"?clearTimeout:void 0,fA=typeof Promise=="function"?Promise:void 0,F3=typeof queueMicrotask=="function"?queueMicrotask:typeof fA<"u"?function(n){return fA.resolve(null).then(n).catch($3)}:R1;function $3(n){setTimeout(function(){throw n})}function lw(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),up(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);up(e)}function Cl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function mA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Uf=Math.random().toString(36).slice(2),Ii="__reactFiber$"+Uf,gp="__reactProps$"+Uf,Ja="__reactContainer$"+Uf,M1="__reactEvents$"+Uf,z3="__reactListeners$"+Uf,B3="__reactHandles$"+Uf;function xc(n){var e=n[Ii];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ja]||t[Ii]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=mA(n);n!==null;){if(t=n[Ii])return t;n=mA(n)}return e}n=t,t=n.parentNode}return null}function gv(n){return n=n[Ii]||n[Ja],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Du(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(K(33))}function Ky(n){return n[gp]||null}var I1=[],Ou=-1;function Gl(n){return{current:n}}function ht(n){0>Ou||(n.current=I1[Ou],I1[Ou]=null,Ou--)}function ot(n,e){Ou++,I1[Ou]=n.current,n.current=e}var Dl={},kn=Gl(Dl),us=Gl(!1),Id=Dl;function Nf(n,e){var t=n.type.contextTypes;if(!t)return Dl;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function hs(n){return n=n.childContextTypes,n!=null}function O0(){ht(us),ht(kn)}function pA(n,e,t){if(kn.current!==Dl)throw Error(K(168));ot(kn,e),ot(us,t)}function l2(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(K(108,j4(n)||"Unknown",r));return St({},t,s)}function L0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Dl,Id=kn.current,ot(kn,n),ot(us,us.current),!0}function gA(n,e,t){var s=n.stateNode;if(!s)throw Error(K(169));t?(n=l2(n,e,Id),s.__reactInternalMemoizedMergedChildContext=n,ht(us),ht(kn),ot(kn,n)):ht(us),ot(us,t)}var da=null,Yy=!1,cw=!1;function c2(n){da===null?da=[n]:da.push(n)}function U3(n){Yy=!0,c2(n)}function Kl(){if(!cw&&da!==null){cw=!0;var n=0,e=Ze;try{var t=da;for(Ze=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}da=null,Yy=!1}catch(r){throw da!==null&&(da=da.slice(n+1)),IP(_N,Kl),r}finally{Ze=e,cw=!1}}return null}var Lu=[],Fu=0,F0=null,$0=0,or=[],lr=0,Dd=null,Va=1,qa="";function oc(n,e){Lu[Fu++]=$0,Lu[Fu++]=F0,F0=n,$0=e}function d2(n,e,t){or[lr++]=Va,or[lr++]=qa,or[lr++]=Dd,Dd=n;var s=Va;n=qa;var r=32-Kr(s)-1;s&=~(1<<r),t+=1;var i=32-Kr(e)+r;if(30<i){var a=r-r%5;i=(s&(1<<a)-1).toString(32),s>>=a,r-=a,Va=1<<32-Kr(e)+r|t<<r|s,qa=i+n}else Va=1<<i|t<<r|s,qa=n}function TN(n){n.return!==null&&(oc(n,1),d2(n,1,0))}function RN(n){for(;n===F0;)F0=Lu[--Fu],Lu[Fu]=null,$0=Lu[--Fu],Lu[Fu]=null;for(;n===Dd;)Dd=or[--lr],or[lr]=null,qa=or[--lr],or[lr]=null,Va=or[--lr],or[lr]=null}var Bs=null,zs=null,xt=!1,Vr=null;function u2(n,e){var t=dr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function vA(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Bs=n,zs=Cl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Bs=n,zs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Dd!==null?{id:Va,overflow:qa}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=dr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Bs=n,zs=null,!0):!1;default:return!1}}function D1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function O1(n){if(xt){var e=zs;if(e){var t=e;if(!vA(n,e)){if(D1(n))throw Error(K(418));e=Cl(t.nextSibling);var s=Bs;e&&vA(n,e)?u2(s,t):(n.flags=n.flags&-4097|2,xt=!1,Bs=n)}}else{if(D1(n))throw Error(K(418));n.flags=n.flags&-4097|2,xt=!1,Bs=n}}}function xA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Bs=n}function tx(n){if(n!==Bs)return!1;if(!xt)return xA(n),xt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!T1(n.type,n.memoizedProps)),e&&(e=zs)){if(D1(n))throw h2(),Error(K(418));for(;e;)u2(n,e),e=Cl(e.nextSibling)}if(xA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(K(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zs=Cl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zs=null}}else zs=Bs?Cl(n.stateNode.nextSibling):null;return!0}function h2(){for(var n=zs;n;)n=Cl(n.nextSibling)}function jf(){zs=Bs=null,xt=!1}function MN(n){Vr===null?Vr=[n]:Vr.push(n)}var H3=io.ReactCurrentBatchConfig;function lm(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(K(309));var s=t.stateNode}if(!s)throw Error(K(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=r.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error(K(284));if(!t._owner)throw Error(K(290,n))}return n}function nx(n,e){throw n=Object.prototype.toString.call(e),Error(K(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function yA(n){var e=n._init;return e(n._payload)}function f2(n){function e(v,y){if(n){var _=v.deletions;_===null?(v.deletions=[y],v.flags|=16):_.push(y)}}function t(v,y){if(!n)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function s(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=Rl(v,y),v.index=0,v.sibling=null,v}function i(v,y,_){return v.index=_,n?(_=v.alternate,_!==null?(_=_.index,_<y?(v.flags|=2,y):_):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function l(v,y,_,N){return y===null||y.tag!==6?(y=gw(_,v.mode,N),y.return=v,y):(y=r(y,_),y.return=v,y)}function c(v,y,_,N){var j=_.type;return j===Tu?h(v,y,_.props.children,N,_.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===So&&yA(j)===y.type)?(N=r(y,_.props),N.ref=lm(v,y,_),N.return=v,N):(N=zx(_.type,_.key,_.props,null,v.mode,N),N.ref=lm(v,y,_),N.return=v,N)}function d(v,y,_,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=vw(_,v.mode,N),y.return=v,y):(y=r(y,_.children||[]),y.return=v,y)}function h(v,y,_,N,j){return y===null||y.tag!==7?(y=Md(_,v.mode,N,j),y.return=v,y):(y=r(y,_),y.return=v,y)}function f(v,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=gw(""+y,v.mode,_),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Vv:return _=zx(y.type,y.key,y.props,null,v.mode,_),_.ref=lm(v,null,y),_.return=v,_;case Pu:return y=vw(y,v.mode,_),y.return=v,y;case So:var N=y._init;return f(v,N(y._payload),_)}if(bm(y)||sm(y))return y=Md(y,v.mode,_,null),y.return=v,y;nx(v,y)}return null}function m(v,y,_,N){var j=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:l(v,y,""+_,N);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vv:return _.key===j?c(v,y,_,N):null;case Pu:return _.key===j?d(v,y,_,N):null;case So:return j=_._init,m(v,y,j(_._payload),N)}if(bm(_)||sm(_))return j!==null?null:h(v,y,_,N,null);nx(v,_)}return null}function p(v,y,_,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(_)||null,l(y,v,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Vv:return v=v.get(N.key===null?_:N.key)||null,c(y,v,N,j);case Pu:return v=v.get(N.key===null?_:N.key)||null,d(y,v,N,j);case So:var A=N._init;return p(v,y,_,A(N._payload),j)}if(bm(N)||sm(N))return v=v.get(_)||null,h(y,v,N,j,null);nx(y,N)}return null}function x(v,y,_,N){for(var j=null,A=null,E=y,P=y=0,T=null;E!==null&&P<_.length;P++){E.index>P?(T=E,E=null):T=E.sibling;var I=m(v,E,_[P],N);if(I===null){E===null&&(E=T);break}n&&E&&I.alternate===null&&e(v,E),y=i(I,y,P),A===null?j=I:A.sibling=I,A=I,E=T}if(P===_.length)return t(v,E),xt&&oc(v,P),j;if(E===null){for(;P<_.length;P++)E=f(v,_[P],N),E!==null&&(y=i(E,y,P),A===null?j=E:A.sibling=E,A=E);return xt&&oc(v,P),j}for(E=s(v,E);P<_.length;P++)T=p(E,v,P,_[P],N),T!==null&&(n&&T.alternate!==null&&E.delete(T.key===null?P:T.key),y=i(T,y,P),A===null?j=T:A.sibling=T,A=T);return n&&E.forEach(function(M){return e(v,M)}),xt&&oc(v,P),j}function g(v,y,_,N){var j=sm(_);if(typeof j!="function")throw Error(K(150));if(_=j.call(_),_==null)throw Error(K(151));for(var A=j=null,E=y,P=y=0,T=null,I=_.next();E!==null&&!I.done;P++,I=_.next()){E.index>P?(T=E,E=null):T=E.sibling;var M=m(v,E,I.value,N);if(M===null){E===null&&(E=T);break}n&&E&&M.alternate===null&&e(v,E),y=i(M,y,P),A===null?j=M:A.sibling=M,A=M,E=T}if(I.done)return t(v,E),xt&&oc(v,P),j;if(E===null){for(;!I.done;P++,I=_.next())I=f(v,I.value,N),I!==null&&(y=i(I,y,P),A===null?j=I:A.sibling=I,A=I);return xt&&oc(v,P),j}for(E=s(v,E);!I.done;P++,I=_.next())I=p(E,v,P,I.value,N),I!==null&&(n&&I.alternate!==null&&E.delete(I.key===null?P:I.key),y=i(I,y,P),A===null?j=I:A.sibling=I,A=I);return n&&E.forEach(function(L){return e(v,L)}),xt&&oc(v,P),j}function b(v,y,_,N){if(typeof _=="object"&&_!==null&&_.type===Tu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Vv:e:{for(var j=_.key,A=y;A!==null;){if(A.key===j){if(j=_.type,j===Tu){if(A.tag===7){t(v,A.sibling),y=r(A,_.props.children),y.return=v,v=y;break e}}else if(A.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===So&&yA(j)===A.type){t(v,A.sibling),y=r(A,_.props),y.ref=lm(v,A,_),y.return=v,v=y;break e}t(v,A);break}else e(v,A);A=A.sibling}_.type===Tu?(y=Md(_.props.children,v.mode,N,_.key),y.return=v,v=y):(N=zx(_.type,_.key,_.props,null,v.mode,N),N.ref=lm(v,y,_),N.return=v,v=N)}return a(v);case Pu:e:{for(A=_.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){t(v,y.sibling),y=r(y,_.children||[]),y.return=v,v=y;break e}else{t(v,y);break}else e(v,y);y=y.sibling}y=vw(_,v.mode,N),y.return=v,v=y}return a(v);case So:return A=_._init,b(v,y,A(_._payload),N)}if(bm(_))return x(v,y,_,N);if(sm(_))return g(v,y,_,N);nx(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(t(v,y.sibling),y=r(y,_),y.return=v,v=y):(t(v,y),y=gw(_,v.mode,N),y.return=v,v=y),a(v)):t(v,y)}return b}var Ef=f2(!0),m2=f2(!1),z0=Gl(null),B0=null,$u=null,IN=null;function DN(){IN=$u=B0=null}function ON(n){var e=z0.current;ht(z0),n._currentValue=e}function L1(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Yu(n,e){B0=n,IN=$u=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(cs=!0),n.firstContext=null)}function mr(n){var e=n._currentValue;if(IN!==n)if(n={context:n,memoizedValue:e,next:null},$u===null){if(B0===null)throw Error(K(308));$u=n,B0.dependencies={lanes:0,firstContext:n}}else $u=$u.next=n;return e}var yc=null;function LN(n){yc===null?yc=[n]:yc.push(n)}function p2(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,LN(e)):(t.next=r.next,r.next=t),e.interleaved=t,Za(n,s)}function Za(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var No=!1;function FN(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g2(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ka(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function kl(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,$e&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Za(n,t)}return r=s.interleaved,r===null?(e.next=e,LN(s)):(e.next=r.next,r.next=e),s.interleaved=e,Za(n,t)}function Ix(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,SN(n,t)}}function bA(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function U0(n,e,t,s){var r=n.updateQueue;No=!1;var i=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;a=0,h=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((s&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=n,g=l;switch(m=e,p=t,g.tag){case 1:if(x=g.payload,typeof x=="function"){f=x.call(p,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(p,f,m):x,m==null)break e;f=St({},f,m);break e;case 2:No=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=f):h=h.next=p,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Ld|=a,n.lanes=a,n.memoizedState=f}}function wA(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(K(191,r));r.call(s)}}}var vv={},Ui=Gl(vv),vp=Gl(vv),xp=Gl(vv);function bc(n){if(n===vv)throw Error(K(174));return n}function $N(n,e){switch(ot(xp,e),ot(vp,n),ot(Ui,vv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=v1(e,n)}ht(Ui),ot(Ui,e)}function Af(){ht(Ui),ht(vp),ht(xp)}function v2(n){bc(xp.current);var e=bc(Ui.current),t=v1(e,n.type);e!==t&&(ot(vp,n),ot(Ui,t))}function zN(n){vp.current===n&&(ht(Ui),ht(vp))}var wt=Gl(0);function H0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dw=[];function BN(){for(var n=0;n<dw.length;n++)dw[n]._workInProgressVersionPrimary=null;dw.length=0}var Dx=io.ReactCurrentDispatcher,uw=io.ReactCurrentBatchConfig,Od=0,_t=null,Gt=null,rn=null,W0=!1,Xm=!1,yp=0,W3=0;function bn(){throw Error(K(321))}function UN(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Xr(n[t],e[t]))return!1;return!0}function HN(n,e,t,s,r,i){if(Od=i,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dx.current=n===null||n.memoizedState===null?K3:Y3,n=t(s,r),Xm){i=0;do{if(Xm=!1,yp=0,25<=i)throw Error(K(301));i+=1,rn=Gt=null,e.updateQueue=null,Dx.current=X3,n=t(s,r)}while(Xm)}if(Dx.current=V0,e=Gt!==null&&Gt.next!==null,Od=0,rn=Gt=_t=null,W0=!1,e)throw Error(K(300));return n}function WN(){var n=yp!==0;return yp=0,n}function ci(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?_t.memoizedState=rn=n:rn=rn.next=n,rn}function pr(){if(Gt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Gt.next;var e=rn===null?_t.memoizedState:rn.next;if(e!==null)rn=e,Gt=n;else{if(n===null)throw Error(K(310));Gt=n,n={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},rn===null?_t.memoizedState=rn=n:rn=rn.next=n}return rn}function bp(n,e){return typeof e=="function"?e(n):e}function hw(n){var e=pr(),t=e.queue;if(t===null)throw Error(K(311));t.lastRenderedReducer=n;var s=Gt,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var a=r.next;r.next=i.next,i.next=a}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=a=null,c=null,d=i;do{var h=d.lane;if((Od&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:n(s,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=s):c=c.next=f,_t.lanes|=h,Ld|=h}d=d.next}while(d!==null&&d!==i);c===null?a=s:c.next=l,Xr(s,e.memoizedState)||(cs=!0),e.memoizedState=s,e.baseState=a,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,_t.lanes|=i,Ld|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function fw(n){var e=pr(),t=e.queue;if(t===null)throw Error(K(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do i=n(i,a.action),a=a.next;while(a!==r);Xr(i,e.memoizedState)||(cs=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function x2(){}function y2(n,e){var t=_t,s=pr(),r=e(),i=!Xr(s.memoizedState,r);if(i&&(s.memoizedState=r,cs=!0),s=s.queue,VN(_2.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||rn!==null&&rn.memoizedState.tag&1){if(t.flags|=2048,wp(9,w2.bind(null,t,s,r,e),void 0,null),an===null)throw Error(K(349));Od&30||b2(t,e,r)}return r}function b2(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function w2(n,e,t,s){e.value=t,e.getSnapshot=s,S2(e)&&N2(n)}function _2(n,e,t){return t(function(){S2(e)&&N2(n)})}function S2(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Xr(n,t)}catch{return!0}}function N2(n){var e=Za(n,1);e!==null&&Yr(e,n,1,-1)}function _A(n){var e=ci();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:n},e.queue=n,n=n.dispatch=G3.bind(null,_t,n),[e.memoizedState,n]}function wp(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function j2(){return pr().memoizedState}function Ox(n,e,t,s){var r=ci();_t.flags|=n,r.memoizedState=wp(1|e,t,void 0,s===void 0?null:s)}function Xy(n,e,t,s){var r=pr();s=s===void 0?null:s;var i=void 0;if(Gt!==null){var a=Gt.memoizedState;if(i=a.destroy,s!==null&&UN(s,a.deps)){r.memoizedState=wp(e,t,i,s);return}}_t.flags|=n,r.memoizedState=wp(1|e,t,i,s)}function SA(n,e){return Ox(8390656,8,n,e)}function VN(n,e){return Xy(2048,8,n,e)}function E2(n,e){return Xy(4,2,n,e)}function A2(n,e){return Xy(4,4,n,e)}function C2(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function k2(n,e,t){return t=t!=null?t.concat([n]):null,Xy(4,4,C2.bind(null,e,n),t)}function qN(){}function P2(n,e){var t=pr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&UN(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function T2(n,e){var t=pr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&UN(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function R2(n,e,t){return Od&21?(Xr(t,e)||(t=LP(),_t.lanes|=t,Ld|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,cs=!0),n.memoizedState=t)}function V3(n,e){var t=Ze;Ze=t!==0&&4>t?t:4,n(!0);var s=uw.transition;uw.transition={};try{n(!1),e()}finally{Ze=t,uw.transition=s}}function M2(){return pr().memoizedState}function q3(n,e,t){var s=Tl(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},I2(n))D2(e,t);else if(t=p2(n,e,t,s),t!==null){var r=Wn();Yr(t,n,s,r),O2(t,e,s)}}function G3(n,e,t){var s=Tl(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(I2(n))D2(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,t);if(r.hasEagerState=!0,r.eagerState=l,Xr(l,a)){var c=e.interleaved;c===null?(r.next=r,LN(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=p2(n,e,r,s),t!==null&&(r=Wn(),Yr(t,n,s,r),O2(t,e,s))}}function I2(n){var e=n.alternate;return n===_t||e!==null&&e===_t}function D2(n,e){Xm=W0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function O2(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,SN(n,t)}}var V0={readContext:mr,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},K3={readContext:mr,useCallback:function(n,e){return ci().memoizedState=[n,e===void 0?null:e],n},useContext:mr,useEffect:SA,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ox(4194308,4,C2.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ox(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ox(4,2,n,e)},useMemo:function(n,e){var t=ci();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ci();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=q3.bind(null,_t,n),[s.memoizedState,n]},useRef:function(n){var e=ci();return n={current:n},e.memoizedState=n},useState:_A,useDebugValue:qN,useDeferredValue:function(n){return ci().memoizedState=n},useTransition:function(){var n=_A(!1),e=n[0];return n=V3.bind(null,n[1]),ci().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=_t,r=ci();if(xt){if(t===void 0)throw Error(K(407));t=t()}else{if(t=e(),an===null)throw Error(K(349));Od&30||b2(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,SA(_2.bind(null,s,i,n),[n]),s.flags|=2048,wp(9,w2.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=ci(),e=an.identifierPrefix;if(xt){var t=qa,s=Va;t=(s&~(1<<32-Kr(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=yp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=W3++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Y3={readContext:mr,useCallback:P2,useContext:mr,useEffect:VN,useImperativeHandle:k2,useInsertionEffect:E2,useLayoutEffect:A2,useMemo:T2,useReducer:hw,useRef:j2,useState:function(){return hw(bp)},useDebugValue:qN,useDeferredValue:function(n){var e=pr();return R2(e,Gt.memoizedState,n)},useTransition:function(){var n=hw(bp)[0],e=pr().memoizedState;return[n,e]},useMutableSource:x2,useSyncExternalStore:y2,useId:M2,unstable_isNewReconciler:!1},X3={readContext:mr,useCallback:P2,useContext:mr,useEffect:VN,useImperativeHandle:k2,useInsertionEffect:E2,useLayoutEffect:A2,useMemo:T2,useReducer:fw,useRef:j2,useState:function(){return fw(bp)},useDebugValue:qN,useDeferredValue:function(n){var e=pr();return Gt===null?e.memoizedState=n:R2(e,Gt.memoizedState,n)},useTransition:function(){var n=fw(bp)[0],e=pr().memoizedState;return[n,e]},useMutableSource:x2,useSyncExternalStore:y2,useId:M2,unstable_isNewReconciler:!1};function Cr(n,e){if(n&&n.defaultProps){e=St({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function F1(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:St({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Qy={isMounted:function(n){return(n=n._reactInternals)?Jd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Wn(),r=Tl(n),i=Ka(s,r);i.payload=e,t!=null&&(i.callback=t),e=kl(n,i,r),e!==null&&(Yr(e,n,r,s),Ix(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Wn(),r=Tl(n),i=Ka(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=kl(n,i,r),e!==null&&(Yr(e,n,r,s),Ix(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Wn(),s=Tl(n),r=Ka(t,s);r.tag=2,e!=null&&(r.callback=e),e=kl(n,r,s),e!==null&&(Yr(e,n,s,t),Ix(e,n,s))}};function NA(n,e,t,s,r,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,a):e.prototype&&e.prototype.isPureReactComponent?!fp(t,s)||!fp(r,i):!0}function L2(n,e,t){var s=!1,r=Dl,i=e.contextType;return typeof i=="object"&&i!==null?i=mr(i):(r=hs(e)?Id:kn.current,s=e.contextTypes,i=(s=s!=null)?Nf(n,r):Dl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qy,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function jA(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Qy.enqueueReplaceState(e,e.state,null)}function $1(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},FN(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=mr(i):(i=hs(e)?Id:kn.current,r.context=Nf(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(F1(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Qy.enqueueReplaceState(r,r.state,null),U0(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Cf(n,e){try{var t="",s=e;do t+=N4(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function mw(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function z1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Q3=typeof WeakMap=="function"?WeakMap:Map;function F2(n,e,t){t=Ka(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){G0||(G0=!0,X1=s),z1(n,e)},t}function $2(n,e,t){t=Ka(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){z1(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){z1(n,e),typeof s!="function"&&(Pl===null?Pl=new Set([this]):Pl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function EA(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new Q3;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=u5.bind(null,n,e,t),e.then(n,n))}function AA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function CA(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ka(-1,1),e.tag=2,kl(t,e,1))),t.lanes|=1),n)}var J3=io.ReactCurrentOwner,cs=!1;function zn(n,e,t,s){e.child=n===null?m2(e,null,t,s):Ef(e,n.child,t,s)}function kA(n,e,t,s,r){t=t.render;var i=e.ref;return Yu(e,r),s=HN(n,e,t,s,i,r),t=WN(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,eo(n,e,r)):(xt&&t&&TN(e),e.flags|=1,zn(n,e,s,r),e.child)}function PA(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!ej(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,z2(n,e,i,s,r)):(n=zx(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:fp,t(a,s)&&n.ref===e.ref)return eo(n,e,r)}return e.flags|=1,n=Rl(i,s),n.ref=e.ref,n.return=e,e.child=n}function z2(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(fp(i,s)&&n.ref===e.ref)if(cs=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(cs=!0);else return e.lanes=n.lanes,eo(n,e,r)}return B1(n,e,t,s,r)}function B2(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Bu,Is),Is|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,ot(Bu,Is),Is|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,ot(Bu,Is),Is|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,ot(Bu,Is),Is|=s;return zn(n,e,r,t),e.child}function U2(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function B1(n,e,t,s,r){var i=hs(t)?Id:kn.current;return i=Nf(e,i),Yu(e,r),t=HN(n,e,t,s,i,r),s=WN(),n!==null&&!cs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,eo(n,e,r)):(xt&&s&&TN(e),e.flags|=1,zn(n,e,t,r),e.child)}function TA(n,e,t,s,r){if(hs(t)){var i=!0;L0(e)}else i=!1;if(Yu(e,r),e.stateNode===null)Lx(n,e),L2(e,t,s),$1(e,t,s,r),s=!0;else if(n===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=t.contextType;typeof d=="object"&&d!==null?d=mr(d):(d=hs(t)?Id:kn.current,d=Nf(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==d)&&jA(e,a,s,d),No=!1;var m=e.memoizedState;a.state=m,U0(e,s,a,r),c=e.memoizedState,l!==s||m!==c||us.current||No?(typeof h=="function"&&(F1(e,t,h,s),c=e.memoizedState),(l=No||NA(e,t,l,s,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),a.props=s,a.state=c,a.context=d,s=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{a=e.stateNode,g2(n,e),l=e.memoizedProps,d=e.type===e.elementType?l:Cr(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=t.contextType,typeof c=="object"&&c!==null?c=mr(c):(c=hs(t)?Id:kn.current,c=Nf(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&jA(e,a,s,c),No=!1,m=e.memoizedState,a.state=m,U0(e,s,a,r);var x=e.memoizedState;l!==f||m!==x||us.current||No?(typeof p=="function"&&(F1(e,t,p,s),x=e.memoizedState),(d=No||NA(e,t,d,s,m,x,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=x),a.props=s,a.state=x,a.context=c,s=d):(typeof a.componentDidUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),s=!1)}return U1(n,e,t,s,i,r)}function U1(n,e,t,s,r,i){U2(n,e);var a=(e.flags&128)!==0;if(!s&&!a)return r&&gA(e,t,!1),eo(n,e,i);s=e.stateNode,J3.current=e;var l=a&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&a?(e.child=Ef(e,n.child,null,i),e.child=Ef(e,null,l,i)):zn(n,e,l,i),e.memoizedState=s.state,r&&gA(e,t,!0),e.child}function H2(n){var e=n.stateNode;e.pendingContext?pA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&pA(n,e.context,!1),$N(n,e.containerInfo)}function RA(n,e,t,s,r){return jf(),MN(r),e.flags|=256,zn(n,e,t,s),e.child}var H1={dehydrated:null,treeContext:null,retryLane:0};function W1(n){return{baseLanes:n,cachePool:null,transitions:null}}function W2(n,e,t){var s=e.pendingProps,r=wt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),ot(wt,r&1),n===null)return O1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=s.children,n=s.fallback,i?(s=e.mode,i=e.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=eb(a,s,0,null),n=Md(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=W1(t),e.memoizedState=H1,n):GN(e,a));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return Z3(n,e,a,s,l,r,t);if(i){i=s.fallback,a=e.mode,r=n.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Rl(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Rl(l,i):(i=Md(i,a,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,a=n.child.memoizedState,a=a===null?W1(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=H1,s}return i=n.child,n=i.sibling,s=Rl(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function GN(n,e){return e=eb({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function sx(n,e,t,s){return s!==null&&MN(s),Ef(e,n.child,null,t),n=GN(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Z3(n,e,t,s,r,i,a){if(t)return e.flags&256?(e.flags&=-257,s=mw(Error(K(422))),sx(n,e,a,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=eb({mode:"visible",children:s.children},r,0,null),i=Md(i,r,a,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ef(e,n.child,null,a),e.child.memoizedState=W1(a),e.memoizedState=H1,i);if(!(e.mode&1))return sx(n,e,a,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(K(419)),s=mw(i,s,void 0),sx(n,e,a,s)}if(l=(a&n.childLanes)!==0,cs||l){if(s=an,s!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|a)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Za(n,r),Yr(s,n,r,-1))}return ZN(),s=mw(Error(K(421))),sx(n,e,a,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=h5.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,zs=Cl(r.nextSibling),Bs=e,xt=!0,Vr=null,n!==null&&(or[lr++]=Va,or[lr++]=qa,or[lr++]=Dd,Va=n.id,qa=n.overflow,Dd=e),e=GN(e,s.children),e.flags|=4096,e)}function MA(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),L1(n.return,e,t)}function pw(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function V2(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(zn(n,e,s.children,t),s=wt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&MA(n,t,e);else if(n.tag===19)MA(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(ot(wt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&H0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),pw(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&H0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}pw(e,!0,t,null,i);break;case"together":pw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function eo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ld|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(K(153));if(e.child!==null){for(n=e.child,t=Rl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Rl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function e5(n,e,t){switch(e.tag){case 3:H2(e),jf();break;case 5:v2(e);break;case 1:hs(e.type)&&L0(e);break;case 4:$N(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;ot(z0,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ot(wt,wt.current&1),e.flags|=128,null):t&e.child.childLanes?W2(n,e,t):(ot(wt,wt.current&1),n=eo(n,e,t),n!==null?n.sibling:null);ot(wt,wt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return V2(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ot(wt,wt.current),s)break;return null;case 22:case 23:return e.lanes=0,B2(n,e,t)}return eo(n,e,t)}var q2,V1,G2,K2;q2=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};V1=function(){};G2=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,bc(Ui.current);var i=null;switch(t){case"input":r=f1(n,r),s=f1(n,s),i=[];break;case"select":r=St({},r,{value:void 0}),s=St({},s,{value:void 0}),i=[];break;case"textarea":r=g1(n,r),s=g1(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=D0)}x1(t,s);var a;t=null;for(d in r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ap.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=r!=null?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(t||(t={}),t[a]=c[a])}else t||(i||(i=[]),i.push(d,t)),t=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ap.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ut("scroll",n),i||l===c||(i=[])):(i=i||[]).push(d,c))}t&&(i=i||[]).push("style",t);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};K2=function(n,e,t,s){t!==s&&(e.flags|=4)};function cm(n,e){if(!xt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function wn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function t5(n,e,t){var s=e.pendingProps;switch(RN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(e),null;case 1:return hs(e.type)&&O0(),wn(e),null;case 3:return s=e.stateNode,Af(),ht(us),ht(kn),BN(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(tx(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vr!==null&&(Z1(Vr),Vr=null))),V1(n,e),wn(e),null;case 5:zN(e);var r=bc(xp.current);if(t=e.type,n!==null&&e.stateNode!=null)G2(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(K(166));return wn(e),null}if(n=bc(Ui.current),tx(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[Ii]=e,s[gp]=i,n=(e.mode&1)!==0,t){case"dialog":ut("cancel",s),ut("close",s);break;case"iframe":case"object":case"embed":ut("load",s);break;case"video":case"audio":for(r=0;r<_m.length;r++)ut(_m[r],s);break;case"source":ut("error",s);break;case"img":case"image":case"link":ut("error",s),ut("load",s);break;case"details":ut("toggle",s);break;case"input":UE(s,i),ut("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},ut("invalid",s);break;case"textarea":WE(s,i),ut("invalid",s)}x1(t,i),r=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&ex(s.textContent,l,n),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ex(s.textContent,l,n),r=["children",""+l]):ap.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ut("scroll",s)}switch(t){case"input":qv(s),HE(s,i,!0);break;case"textarea":qv(s),VE(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=D0)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_P(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=a.createElement(t,{is:s.is}):(n=a.createElement(t),t==="select"&&(a=n,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):n=a.createElementNS(n,t),n[Ii]=e,n[gp]=s,q2(n,e,!1,!1),e.stateNode=n;e:{switch(a=y1(t,s),t){case"dialog":ut("cancel",n),ut("close",n),r=s;break;case"iframe":case"object":case"embed":ut("load",n),r=s;break;case"video":case"audio":for(r=0;r<_m.length;r++)ut(_m[r],n);r=s;break;case"source":ut("error",n),r=s;break;case"img":case"image":case"link":ut("error",n),ut("load",n),r=s;break;case"details":ut("toggle",n),r=s;break;case"input":UE(n,s),r=f1(n,s),ut("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=St({},s,{value:void 0}),ut("invalid",n);break;case"textarea":WE(n,s),r=g1(n,s),ut("invalid",n);break;default:r=s}x1(t,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?jP(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&SP(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&op(n,c):typeof c=="number"&&op(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ap.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ut("scroll",n):c!=null&&vN(n,i,c,a))}switch(t){case"input":qv(n),HE(n,s,!1);break;case"textarea":qv(n),VE(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Il(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?Vu(n,!!s.multiple,i,!1):s.defaultValue!=null&&Vu(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=D0)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wn(e),null;case 6:if(n&&e.stateNode!=null)K2(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(K(166));if(t=bc(xp.current),bc(Ui.current),tx(e)){if(s=e.stateNode,t=e.memoizedProps,s[Ii]=e,(i=s.nodeValue!==t)&&(n=Bs,n!==null))switch(n.tag){case 3:ex(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ex(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Ii]=e,e.stateNode=s}return wn(e),null;case 13:if(ht(wt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(xt&&zs!==null&&e.mode&1&&!(e.flags&128))h2(),jf(),e.flags|=98560,i=!1;else if(i=tx(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Ii]=e}else jf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wn(e),i=!1}else Vr!==null&&(Z1(Vr),Vr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||wt.current&1?Kt===0&&(Kt=3):ZN())),e.updateQueue!==null&&(e.flags|=4),wn(e),null);case 4:return Af(),V1(n,e),n===null&&mp(e.stateNode.containerInfo),wn(e),null;case 10:return ON(e.type._context),wn(e),null;case 17:return hs(e.type)&&O0(),wn(e),null;case 19:if(ht(wt),i=e.memoizedState,i===null)return wn(e),null;if(s=(e.flags&128)!==0,a=i.rendering,a===null)if(s)cm(i,!1);else{if(Kt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=H0(n),a!==null){for(e.flags|=128,cm(i,!1),s=a.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return ot(wt,wt.current&1|2),e.child}n=n.sibling}i.tail!==null&&kt()>kf&&(e.flags|=128,s=!0,cm(i,!1),e.lanes=4194304)}else{if(!s)if(n=H0(a),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),cm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!xt)return wn(e),null}else 2*kt()-i.renderingStartTime>kf&&t!==1073741824&&(e.flags|=128,s=!0,cm(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,t=wt.current,ot(wt,s?t&1|2:t&1),e):(wn(e),null);case 22:case 23:return JN(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Is&1073741824&&(wn(e),e.subtreeFlags&6&&(e.flags|=8192)):wn(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function n5(n,e){switch(RN(e),e.tag){case 1:return hs(e.type)&&O0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Af(),ht(us),ht(kn),BN(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return zN(e),null;case 13:if(ht(wt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(K(340));jf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ht(wt),null;case 4:return Af(),null;case 10:return ON(e.type._context),null;case 22:case 23:return JN(),null;case 24:return null;default:return null}}var rx=!1,Cn=!1,s5=typeof WeakSet=="function"?WeakSet:Set,ie=null;function zu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Et(n,e,s)}else t.current=null}function q1(n,e,t){try{t()}catch(s){Et(n,e,s)}}var IA=!1;function r5(n,e){if(k1=R0,n=ZP(),PN(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=n,m=null;t:for(;;){for(var p;f!==t||r!==0&&f.nodeType!==3||(l=a+r),f!==i||s!==0&&f.nodeType!==3||(c=a+s),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===n)break t;if(m===t&&++d===r&&(l=a),m===i&&++h===s&&(c=a),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(P1={focusedElem:n,selectionRange:t},R0=!1,ie=e;ie!==null;)if(e=ie,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ie=n;else for(;ie!==null;){e=ie;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,b=x.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Cr(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(N){Et(e,e.return,N)}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}return x=IA,IA=!1,x}function Qm(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&q1(e,t,i)}r=r.next}while(r!==s)}}function Jy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function G1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Y2(n){var e=n.alternate;e!==null&&(n.alternate=null,Y2(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ii],delete e[gp],delete e[M1],delete e[z3],delete e[B3])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function X2(n){return n.tag===5||n.tag===3||n.tag===4}function DA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||X2(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function K1(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=D0));else if(s!==4&&(n=n.child,n!==null))for(K1(n,e,t),n=n.sibling;n!==null;)K1(n,e,t),n=n.sibling}function Y1(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Y1(n,e,t),n=n.sibling;n!==null;)Y1(n,e,t),n=n.sibling}var fn=null,Hr=!1;function mo(n,e,t){for(t=t.child;t!==null;)Q2(n,e,t),t=t.sibling}function Q2(n,e,t){if(Bi&&typeof Bi.onCommitFiberUnmount=="function")try{Bi.onCommitFiberUnmount(Wy,t)}catch{}switch(t.tag){case 5:Cn||zu(t,e);case 6:var s=fn,r=Hr;fn=null,mo(n,e,t),fn=s,Hr=r,fn!==null&&(Hr?(n=fn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):fn.removeChild(t.stateNode));break;case 18:fn!==null&&(Hr?(n=fn,t=t.stateNode,n.nodeType===8?lw(n.parentNode,t):n.nodeType===1&&lw(n,t),up(n)):lw(fn,t.stateNode));break;case 4:s=fn,r=Hr,fn=t.stateNode.containerInfo,Hr=!0,mo(n,e,t),fn=s,Hr=r;break;case 0:case 11:case 14:case 15:if(!Cn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&q1(t,e,a),r=r.next}while(r!==s)}mo(n,e,t);break;case 1:if(!Cn&&(zu(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){Et(t,e,l)}mo(n,e,t);break;case 21:mo(n,e,t);break;case 22:t.mode&1?(Cn=(s=Cn)||t.memoizedState!==null,mo(n,e,t),Cn=s):mo(n,e,t);break;default:mo(n,e,t)}}function OA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new s5),e.forEach(function(s){var r=f5.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Sr(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:fn=l.stateNode,Hr=!1;break e;case 3:fn=l.stateNode.containerInfo,Hr=!0;break e;case 4:fn=l.stateNode.containerInfo,Hr=!0;break e}l=l.return}if(fn===null)throw Error(K(160));Q2(i,a,r),fn=null,Hr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Et(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J2(e,n),e=e.sibling}function J2(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Sr(e,n),ii(n),s&4){try{Qm(3,n,n.return),Jy(3,n)}catch(g){Et(n,n.return,g)}try{Qm(5,n,n.return)}catch(g){Et(n,n.return,g)}}break;case 1:Sr(e,n),ii(n),s&512&&t!==null&&zu(t,t.return);break;case 5:if(Sr(e,n),ii(n),s&512&&t!==null&&zu(t,t.return),n.flags&32){var r=n.stateNode;try{op(r,"")}catch(g){Et(n,n.return,g)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&bP(r,i),y1(l,a);var d=y1(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?jP(r,f):h==="dangerouslySetInnerHTML"?SP(r,f):h==="children"?op(r,f):vN(r,h,f,d)}switch(l){case"input":m1(r,i);break;case"textarea":wP(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Vu(r,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?Vu(r,!!i.multiple,i.defaultValue,!0):Vu(r,!!i.multiple,i.multiple?[]:"",!1))}r[gp]=i}catch(g){Et(n,n.return,g)}}break;case 6:if(Sr(e,n),ii(n),s&4){if(n.stateNode===null)throw Error(K(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(g){Et(n,n.return,g)}}break;case 3:if(Sr(e,n),ii(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{up(e.containerInfo)}catch(g){Et(n,n.return,g)}break;case 4:Sr(e,n),ii(n);break;case 13:Sr(e,n),ii(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(XN=kt())),s&4&&OA(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Cn=(d=Cn)||h,Sr(e,n),Cn=d):Sr(e,n),ii(n),s&8192){if(d=n.memoizedState!==null,(n.stateNode.isHidden=d)&&!h&&n.mode&1)for(ie=n,h=n.child;h!==null;){for(f=ie=h;ie!==null;){switch(m=ie,p=m.child,m.tag){case 0:case 11:case 14:case 15:Qm(4,m,m.return);break;case 1:zu(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){s=m,t=m.return;try{e=s,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(g){Et(s,t,g)}}break;case 5:zu(m,m.return);break;case 22:if(m.memoizedState!==null){FA(f);continue}}p!==null?(p.return=m,ie=p):FA(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=NP("display",a))}catch(g){Et(n,n.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(g){Et(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Sr(e,n),ii(n),s&4&&OA(n);break;case 21:break;default:Sr(e,n),ii(n)}}function ii(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(X2(t)){var s=t;break e}t=t.return}throw Error(K(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(op(r,""),s.flags&=-33);var i=DA(n);Y1(n,i,r);break;case 3:case 4:var a=s.stateNode.containerInfo,l=DA(n);K1(n,l,a);break;default:throw Error(K(161))}}catch(c){Et(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function i5(n,e,t){ie=n,Z2(n)}function Z2(n,e,t){for(var s=(n.mode&1)!==0;ie!==null;){var r=ie,i=r.child;if(r.tag===22&&s){var a=r.memoizedState!==null||rx;if(!a){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Cn;l=rx;var d=Cn;if(rx=a,(Cn=c)&&!d)for(ie=r;ie!==null;)a=ie,c=a.child,a.tag===22&&a.memoizedState!==null?$A(r):c!==null?(c.return=a,ie=c):$A(r);for(;i!==null;)ie=i,Z2(i),i=i.sibling;ie=r,rx=l,Cn=d}LA(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ie=i):LA(n)}}function LA(n){for(;ie!==null;){var e=ie;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||Jy(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Cn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Cr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&wA(e,i,s);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}wA(e,a,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&up(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Cn||e.flags&512&&G1(e)}catch(m){Et(e,e.return,m)}}if(e===n){ie=null;break}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}}function FA(n){for(;ie!==null;){var e=ie;if(e===n){ie=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ie=t;break}ie=e.return}}function $A(n){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Jy(4,e)}catch(c){Et(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Et(e,r,c)}}var i=e.return;try{G1(e)}catch(c){Et(e,i,c)}break;case 5:var a=e.return;try{G1(e)}catch(c){Et(e,a,c)}}}catch(c){Et(e,e.return,c)}if(e===n){ie=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ie=l;break}ie=e.return}}var a5=Math.ceil,q0=io.ReactCurrentDispatcher,KN=io.ReactCurrentOwner,ur=io.ReactCurrentBatchConfig,$e=0,an=null,Ot=null,vn=0,Is=0,Bu=Gl(0),Kt=0,_p=null,Ld=0,Zy=0,YN=0,Jm=null,is=null,XN=0,kf=1/0,aa=null,G0=!1,X1=null,Pl=null,ix=!1,Sl=null,K0=0,Zm=0,Q1=null,Fx=-1,$x=0;function Wn(){return $e&6?kt():Fx!==-1?Fx:Fx=kt()}function Tl(n){return n.mode&1?$e&2&&vn!==0?vn&-vn:H3.transition!==null?($x===0&&($x=LP()),$x):(n=Ze,n!==0||(n=window.event,n=n===void 0?16:WP(n.type)),n):1}function Yr(n,e,t,s){if(50<Zm)throw Zm=0,Q1=null,Error(K(185));mv(n,t,s),(!($e&2)||n!==an)&&(n===an&&(!($e&2)&&(Zy|=t),Kt===4&&Eo(n,vn)),fs(n,s),t===1&&$e===0&&!(e.mode&1)&&(kf=kt()+500,Yy&&Kl()))}function fs(n,e){var t=n.callbackNode;H4(n,e);var s=T0(n,n===an?vn:0);if(s===0)t!==null&&KE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&KE(t),e===1)n.tag===0?U3(zA.bind(null,n)):c2(zA.bind(null,n)),F3(function(){!($e&6)&&Kl()}),t=null;else{switch(FP(s)){case 1:t=_N;break;case 4:t=DP;break;case 16:t=P0;break;case 536870912:t=OP;break;default:t=P0}t=oT(t,eT.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function eT(n,e){if(Fx=-1,$x=0,$e&6)throw Error(K(327));var t=n.callbackNode;if(Xu()&&n.callbackNode!==t)return null;var s=T0(n,n===an?vn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Y0(n,s);else{e=s;var r=$e;$e|=2;var i=nT();(an!==n||vn!==e)&&(aa=null,kf=kt()+500,Rd(n,e));do try{c5();break}catch(l){tT(n,l)}while(!0);DN(),q0.current=i,$e=r,Ot!==null?e=0:(an=null,vn=0,e=Kt)}if(e!==0){if(e===2&&(r=N1(n),r!==0&&(s=r,e=J1(n,r))),e===1)throw t=_p,Rd(n,0),Eo(n,s),fs(n,kt()),t;if(e===6)Eo(n,s);else{if(r=n.current.alternate,!(s&30)&&!o5(r)&&(e=Y0(n,s),e===2&&(i=N1(n),i!==0&&(s=i,e=J1(n,i))),e===1))throw t=_p,Rd(n,0),Eo(n,s),fs(n,kt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(K(345));case 2:lc(n,is,aa);break;case 3:if(Eo(n,s),(s&130023424)===s&&(e=XN+500-kt(),10<e)){if(T0(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){Wn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=R1(lc.bind(null,n,is,aa),e);break}lc(n,is,aa);break;case 4:if(Eo(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var a=31-Kr(s);i=1<<a,a=e[a],a>r&&(r=a),s&=~i}if(s=r,s=kt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*a5(s/1960))-s,10<s){n.timeoutHandle=R1(lc.bind(null,n,is,aa),s);break}lc(n,is,aa);break;case 5:lc(n,is,aa);break;default:throw Error(K(329))}}}return fs(n,kt()),n.callbackNode===t?eT.bind(null,n):null}function J1(n,e){var t=Jm;return n.current.memoizedState.isDehydrated&&(Rd(n,e).flags|=256),n=Y0(n,e),n!==2&&(e=is,is=t,e!==null&&Z1(e)),n}function Z1(n){is===null?is=n:is.push.apply(is,n)}function o5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!Xr(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Eo(n,e){for(e&=~YN,e&=~Zy,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Kr(e),s=1<<t;n[t]=-1,e&=~s}}function zA(n){if($e&6)throw Error(K(327));Xu();var e=T0(n,0);if(!(e&1))return fs(n,kt()),null;var t=Y0(n,e);if(n.tag!==0&&t===2){var s=N1(n);s!==0&&(e=s,t=J1(n,s))}if(t===1)throw t=_p,Rd(n,0),Eo(n,e),fs(n,kt()),t;if(t===6)throw Error(K(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,lc(n,is,aa),fs(n,kt()),null}function QN(n,e){var t=$e;$e|=1;try{return n(e)}finally{$e=t,$e===0&&(kf=kt()+500,Yy&&Kl())}}function Fd(n){Sl!==null&&Sl.tag===0&&!($e&6)&&Xu();var e=$e;$e|=1;var t=ur.transition,s=Ze;try{if(ur.transition=null,Ze=1,n)return n()}finally{Ze=s,ur.transition=t,$e=e,!($e&6)&&Kl()}}function JN(){Is=Bu.current,ht(Bu)}function Rd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,L3(t)),Ot!==null)for(t=Ot.return;t!==null;){var s=t;switch(RN(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&O0();break;case 3:Af(),ht(us),ht(kn),BN();break;case 5:zN(s);break;case 4:Af();break;case 13:ht(wt);break;case 19:ht(wt);break;case 10:ON(s.type._context);break;case 22:case 23:JN()}t=t.return}if(an=n,Ot=n=Rl(n.current,null),vn=Is=e,Kt=0,_p=null,YN=Zy=Ld=0,is=Jm=null,yc!==null){for(e=0;e<yc.length;e++)if(t=yc[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var a=i.next;i.next=r,s.next=a}t.pending=s}yc=null}return n}function tT(n,e){do{var t=Ot;try{if(DN(),Dx.current=V0,W0){for(var s=_t.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}W0=!1}if(Od=0,rn=Gt=_t=null,Xm=!1,yp=0,KN.current=null,t===null||t.return===null){Kt=1,_p=e,Ot=null;break}e:{var i=n,a=t.return,l=t,c=e;if(e=vn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=AA(a);if(p!==null){p.flags&=-257,CA(p,a,l,i,e),p.mode&1&&EA(i,d,e),e=p,c=d;var x=e.updateQueue;if(x===null){var g=new Set;g.add(c),e.updateQueue=g}else x.add(c);break e}else{if(!(e&1)){EA(i,d,e),ZN();break e}c=Error(K(426))}}else if(xt&&l.mode&1){var b=AA(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),CA(b,a,l,i,e),MN(Cf(c,l));break e}}i=c=Cf(c,l),Kt!==4&&(Kt=2),Jm===null?Jm=[i]:Jm.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=F2(i,c,e);bA(i,v);break e;case 1:l=c;var y=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Pl===null||!Pl.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=$2(i,l,e);bA(i,N);break e}}i=i.return}while(i!==null)}rT(t)}catch(j){e=j,Ot===t&&t!==null&&(Ot=t=t.return);continue}break}while(!0)}function nT(){var n=q0.current;return q0.current=V0,n===null?V0:n}function ZN(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),an===null||!(Ld&268435455)&&!(Zy&268435455)||Eo(an,vn)}function Y0(n,e){var t=$e;$e|=2;var s=nT();(an!==n||vn!==e)&&(aa=null,Rd(n,e));do try{l5();break}catch(r){tT(n,r)}while(!0);if(DN(),$e=t,q0.current=s,Ot!==null)throw Error(K(261));return an=null,vn=0,Kt}function l5(){for(;Ot!==null;)sT(Ot)}function c5(){for(;Ot!==null&&!I4();)sT(Ot)}function sT(n){var e=aT(n.alternate,n,Is);n.memoizedProps=n.pendingProps,e===null?rT(n):Ot=e,KN.current=null}function rT(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=n5(t,e),t!==null){t.flags&=32767,Ot=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Kt=6,Ot=null;return}}else if(t=t5(t,e,Is),t!==null){Ot=t;return}if(e=e.sibling,e!==null){Ot=e;return}Ot=e=n}while(e!==null);Kt===0&&(Kt=5)}function lc(n,e,t){var s=Ze,r=ur.transition;try{ur.transition=null,Ze=1,d5(n,e,t,s)}finally{ur.transition=r,Ze=s}return null}function d5(n,e,t,s){do Xu();while(Sl!==null);if($e&6)throw Error(K(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(K(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(W4(n,i),n===an&&(Ot=an=null,vn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ix||(ix=!0,oT(P0,function(){return Xu(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=ur.transition,ur.transition=null;var a=Ze;Ze=1;var l=$e;$e|=4,KN.current=null,r5(n,t),J2(t,n),P3(P1),R0=!!k1,P1=k1=null,n.current=t,i5(t),D4(),$e=l,Ze=a,ur.transition=i}else n.current=t;if(ix&&(ix=!1,Sl=n,K0=r),i=n.pendingLanes,i===0&&(Pl=null),F4(t.stateNode),fs(n,kt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(G0)throw G0=!1,n=X1,X1=null,n;return K0&1&&n.tag!==0&&Xu(),i=n.pendingLanes,i&1?n===Q1?Zm++:(Zm=0,Q1=n):Zm=0,Kl(),null}function Xu(){if(Sl!==null){var n=FP(K0),e=ur.transition,t=Ze;try{if(ur.transition=null,Ze=16>n?16:n,Sl===null)var s=!1;else{if(n=Sl,Sl=null,K0=0,$e&6)throw Error(K(331));var r=$e;for($e|=4,ie=n.current;ie!==null;){var i=ie,a=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ie=d;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Qm(8,h,i)}var f=h.child;if(f!==null)f.return=h,ie=f;else for(;ie!==null;){h=ie;var m=h.sibling,p=h.return;if(Y2(h),h===d){ie=null;break}if(m!==null){m.return=p,ie=m;break}ie=p}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}ie=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ie=a;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Qm(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,ie=v;break e}ie=i.return}}var y=n.current;for(ie=y;ie!==null;){a=ie;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,ie=_;else e:for(a=y;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jy(9,l)}}catch(j){Et(l,l.return,j)}if(l===a){ie=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ie=N;break e}ie=l.return}}if($e=r,Kl(),Bi&&typeof Bi.onPostCommitFiberRoot=="function")try{Bi.onPostCommitFiberRoot(Wy,n)}catch{}s=!0}return s}finally{Ze=t,ur.transition=e}}return!1}function BA(n,e,t){e=Cf(t,e),e=F2(n,e,1),n=kl(n,e,1),e=Wn(),n!==null&&(mv(n,1,e),fs(n,e))}function Et(n,e,t){if(n.tag===3)BA(n,n,t);else for(;e!==null;){if(e.tag===3){BA(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Pl===null||!Pl.has(s))){n=Cf(t,n),n=$2(e,n,1),e=kl(e,n,1),n=Wn(),e!==null&&(mv(e,1,n),fs(e,n));break}}e=e.return}}function u5(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Wn(),n.pingedLanes|=n.suspendedLanes&t,an===n&&(vn&t)===t&&(Kt===4||Kt===3&&(vn&130023424)===vn&&500>kt()-XN?Rd(n,0):YN|=t),fs(n,e)}function iT(n,e){e===0&&(n.mode&1?(e=Yv,Yv<<=1,!(Yv&130023424)&&(Yv=4194304)):e=1);var t=Wn();n=Za(n,e),n!==null&&(mv(n,e,t),fs(n,t))}function h5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),iT(n,t)}function f5(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(K(314))}s!==null&&s.delete(e),iT(n,t)}var aT;aT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||us.current)cs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return cs=!1,e5(n,e,t);cs=!!(n.flags&131072)}else cs=!1,xt&&e.flags&1048576&&d2(e,$0,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Lx(n,e),n=e.pendingProps;var r=Nf(e,kn.current);Yu(e,t),r=HN(null,e,s,n,r,t);var i=WN();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hs(s)?(i=!0,L0(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,FN(e),r.updater=Qy,e.stateNode=r,r._reactInternals=e,$1(e,s,n,t),e=U1(null,e,s,!0,i,t)):(e.tag=0,xt&&i&&TN(e),zn(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Lx(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=p5(s),n=Cr(s,n),r){case 0:e=B1(null,e,s,n,t);break e;case 1:e=TA(null,e,s,n,t);break e;case 11:e=kA(null,e,s,n,t);break e;case 14:e=PA(null,e,s,Cr(s.type,n),t);break e}throw Error(K(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Cr(s,r),B1(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Cr(s,r),TA(n,e,s,r,t);case 3:e:{if(H2(e),n===null)throw Error(K(387));s=e.pendingProps,i=e.memoizedState,r=i.element,g2(n,e),U0(e,s,null,t);var a=e.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Cf(Error(K(423)),e),e=RA(n,e,s,t,r);break e}else if(s!==r){r=Cf(Error(K(424)),e),e=RA(n,e,s,t,r);break e}else for(zs=Cl(e.stateNode.containerInfo.firstChild),Bs=e,xt=!0,Vr=null,t=m2(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(jf(),s===r){e=eo(n,e,t);break e}zn(n,e,s,t)}e=e.child}return e;case 5:return v2(e),n===null&&O1(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,a=r.children,T1(s,r)?a=null:i!==null&&T1(s,i)&&(e.flags|=32),U2(n,e),zn(n,e,a,t),e.child;case 6:return n===null&&O1(e),null;case 13:return W2(n,e,t);case 4:return $N(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Ef(e,null,s,t):zn(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Cr(s,r),kA(n,e,s,r,t);case 7:return zn(n,e,e.pendingProps,t),e.child;case 8:return zn(n,e,e.pendingProps.children,t),e.child;case 12:return zn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,a=r.value,ot(z0,s._currentValue),s._currentValue=a,i!==null)if(Xr(i.value,a)){if(i.children===r.children&&!us.current){e=eo(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ka(-1,t&-t),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),L1(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(K(341));a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),L1(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}zn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Yu(e,t),r=mr(r),s=s(r),e.flags|=1,zn(n,e,s,t),e.child;case 14:return s=e.type,r=Cr(s,e.pendingProps),r=Cr(s.type,r),PA(n,e,s,r,t);case 15:return z2(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Cr(s,r),Lx(n,e),e.tag=1,hs(s)?(n=!0,L0(e)):n=!1,Yu(e,t),L2(e,s,r),$1(e,s,r,t),U1(null,e,s,!0,n,t);case 19:return V2(n,e,t);case 22:return B2(n,e,t)}throw Error(K(156,e.tag))};function oT(n,e){return IP(n,e)}function m5(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(n,e,t,s){return new m5(n,e,t,s)}function ej(n){return n=n.prototype,!(!n||!n.isReactComponent)}function p5(n){if(typeof n=="function")return ej(n)?1:0;if(n!=null){if(n=n.$$typeof,n===yN)return 11;if(n===bN)return 14}return 2}function Rl(n,e){var t=n.alternate;return t===null?(t=dr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function zx(n,e,t,s,r,i){var a=2;if(s=n,typeof n=="function")ej(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Tu:return Md(t.children,r,i,e);case xN:a=8,r|=8;break;case c1:return n=dr(12,t,e,r|2),n.elementType=c1,n.lanes=i,n;case d1:return n=dr(13,t,e,r),n.elementType=d1,n.lanes=i,n;case u1:return n=dr(19,t,e,r),n.elementType=u1,n.lanes=i,n;case vP:return eb(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pP:a=10;break e;case gP:a=9;break e;case yN:a=11;break e;case bN:a=14;break e;case So:a=16,s=null;break e}throw Error(K(130,n==null?n:typeof n,""))}return e=dr(a,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function Md(n,e,t,s){return n=dr(7,n,s,e),n.lanes=t,n}function eb(n,e,t,s){return n=dr(22,n,s,e),n.elementType=vP,n.lanes=t,n.stateNode={isHidden:!1},n}function gw(n,e,t){return n=dr(6,n,null,e),n.lanes=t,n}function vw(n,e,t){return e=dr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function g5(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qb(0),this.expirationTimes=Qb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qb(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function tj(n,e,t,s,r,i,a,l,c){return n=new g5(n,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=dr(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},FN(i),n}function v5(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pu,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function lT(n){if(!n)return Dl;n=n._reactInternals;e:{if(Jd(n)!==n||n.tag!==1)throw Error(K(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(n.tag===1){var t=n.type;if(hs(t))return l2(n,t,e)}return e}function cT(n,e,t,s,r,i,a,l,c){return n=tj(t,s,!0,n,r,i,a,l,c),n.context=lT(null),t=n.current,s=Wn(),r=Tl(t),i=Ka(s,r),i.callback=e??null,kl(t,i,r),n.current.lanes=r,mv(n,r,s),fs(n,s),n}function tb(n,e,t,s){var r=e.current,i=Wn(),a=Tl(r);return t=lT(t),e.context===null?e.context=t:e.pendingContext=t,e=Ka(i,a),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=kl(r,e,a),n!==null&&(Yr(n,r,a,i),Ix(n,r,a)),a}function X0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function UA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function nj(n,e){UA(n,e),(n=n.alternate)&&UA(n,e)}function x5(){return null}var dT=typeof reportError=="function"?reportError:function(n){console.error(n)};function sj(n){this._internalRoot=n}nb.prototype.render=sj.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(K(409));tb(n,e,null,null)};nb.prototype.unmount=sj.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Fd(function(){tb(null,n,null,null)}),e[Ja]=null}};function nb(n){this._internalRoot=n}nb.prototype.unstable_scheduleHydration=function(n){if(n){var e=BP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<jo.length&&e!==0&&e<jo[t].priority;t++);jo.splice(t,0,n),t===0&&HP(n)}};function rj(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function sb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function HA(){}function y5(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var d=X0(a);i.call(d)}}var a=cT(e,s,n,0,null,!1,!1,"",HA);return n._reactRootContainer=a,n[Ja]=a.current,mp(n.nodeType===8?n.parentNode:n),Fd(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var d=X0(c);l.call(d)}}var c=tj(n,0,!1,null,null,!1,!1,"",HA);return n._reactRootContainer=c,n[Ja]=c.current,mp(n.nodeType===8?n.parentNode:n),Fd(function(){tb(e,c,t,s)}),c}function rb(n,e,t,s,r){var i=t._reactRootContainer;if(i){var a=i;if(typeof r=="function"){var l=r;r=function(){var c=X0(a);l.call(c)}}tb(e,a,n,r)}else a=y5(t,e,n,r,s);return X0(a)}$P=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=wm(e.pendingLanes);t!==0&&(SN(e,t|1),fs(e,kt()),!($e&6)&&(kf=kt()+500,Kl()))}break;case 13:Fd(function(){var s=Za(n,1);if(s!==null){var r=Wn();Yr(s,n,1,r)}}),nj(n,1)}};NN=function(n){if(n.tag===13){var e=Za(n,134217728);if(e!==null){var t=Wn();Yr(e,n,134217728,t)}nj(n,134217728)}};zP=function(n){if(n.tag===13){var e=Tl(n),t=Za(n,e);if(t!==null){var s=Wn();Yr(t,n,e,s)}nj(n,e)}};BP=function(){return Ze};UP=function(n,e){var t=Ze;try{return Ze=n,e()}finally{Ze=t}};w1=function(n,e,t){switch(e){case"input":if(m1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=Ky(s);if(!r)throw Error(K(90));yP(s),m1(s,r)}}}break;case"textarea":wP(n,t);break;case"select":e=t.value,e!=null&&Vu(n,!!t.multiple,e,!1)}};CP=QN;kP=Fd;var b5={usingClientEntryPoint:!1,Events:[gv,Du,Ky,EP,AP,QN]},dm={findFiberByHostInstance:xc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w5={bundleType:dm.bundleType,version:dm.version,rendererPackageName:dm.rendererPackageName,rendererConfig:dm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:io.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=RP(n),n===null?null:n.stateNode},findFiberByHostInstance:dm.findFiberByHostInstance||x5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ax=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ax.isDisabled&&ax.supportsFiber)try{Wy=ax.inject(w5),Bi=ax}catch{}}Ks.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b5;Ks.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rj(e))throw Error(K(200));return v5(n,e,null,t)};Ks.createRoot=function(n,e){if(!rj(n))throw Error(K(299));var t=!1,s="",r=dT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=tj(n,1,!1,null,null,t,!1,s,r),n[Ja]=e.current,mp(n.nodeType===8?n.parentNode:n),new sj(e)};Ks.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(K(188)):(n=Object.keys(n).join(","),Error(K(268,n)));return n=RP(e),n=n===null?null:n.stateNode,n};Ks.flushSync=function(n){return Fd(n)};Ks.hydrate=function(n,e,t){if(!sb(e))throw Error(K(200));return rb(null,n,e,!0,t)};Ks.hydrateRoot=function(n,e,t){if(!rj(n))throw Error(K(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",a=dT;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=cT(e,null,n,1,t??null,r,!1,i,a),n[Ja]=e.current,mp(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new nb(e)};Ks.render=function(n,e,t){if(!sb(e))throw Error(K(200));return rb(null,n,e,!1,t)};Ks.unmountComponentAtNode=function(n){if(!sb(n))throw Error(K(40));return n._reactRootContainer?(Fd(function(){rb(null,null,n,!1,function(){n._reactRootContainer=null,n[Ja]=null})}),!0):!1};Ks.unstable_batchedUpdates=QN;Ks.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!sb(t))throw Error(K(200));if(n==null||n._reactInternals===void 0)throw Error(K(38));return rb(n,e,t,!1,s)};Ks.version="18.3.1-next-f1338f8080-20240426";function uT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uT)}catch(n){console.error(n)}}uT(),uP.exports=Ks;var Zd=uP.exports;const hT=Zk(Zd);var fT,WA=Zd;fT=WA.createRoot,WA.hydrateRoot;const _5=1,S5=1e6;let xw=0;function N5(){return xw=(xw+1)%Number.MAX_SAFE_INTEGER,xw.toString()}const yw=new Map,VA=n=>{if(yw.has(n))return;const e=setTimeout(()=>{yw.delete(n),ep({type:"REMOVE_TOAST",toastId:n})},S5);yw.set(n,e)},j5=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,_5)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?VA(t):n.toasts.forEach(s=>{VA(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Bx=[];let Ux={toasts:[]};function ep(n){Ux=j5(Ux,n),Bx.forEach(e=>{e(Ux)})}function mT({...n}){const e=N5(),t=r=>ep({type:"UPDATE_TOAST",toast:{...r,id:e}}),s=()=>ep({type:"DISMISS_TOAST",toastId:e});return ep({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:t}}function ij(){const[n,e]=w.useState(Ux);return w.useEffect(()=>(Bx.push(e),()=>{const t=Bx.indexOf(e);t>-1&&Bx.splice(t,1)}),[n]),{...n,toast:mT,dismiss:t=>ep({type:"DISMISS_TOAST",toastId:t})}}function fe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function qA(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function $d(...n){return e=>{let t=!1;const s=n.map(r=>{const i=qA(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():qA(n[r],null)}}}}function Ve(...n){return w.useCallback($d(...n),n)}function E5(n,e){const t=w.createContext(e),s=i=>{const{children:a,...l}=i,c=w.useMemo(()=>l,Object.values(l));return o.jsx(t.Provider,{value:c,children:a})};s.displayName=n+"Provider";function r(i){const a=w.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[s,r]}function si(n,e=[]){let t=[];function s(i,a){const l=w.createContext(a),c=t.length;t=[...t,a];const d=f=>{var v;const{scope:m,children:p,...x}=f,g=((v=m==null?void 0:m[n])==null?void 0:v[c])||l,b=w.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:b,children:p})};d.displayName=i+"Provider";function h(f,m){var g;const p=((g=m==null?void 0:m[n])==null?void 0:g[c])||l,x=w.useContext(p);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const r=()=>{const i=t.map(a=>w.createContext(a));return function(l){const c=(l==null?void 0:l[n])||i;return w.useMemo(()=>({[`__scope${n}`]:{...l,[n]:c}}),[l,c])}};return r.scopeName=n,[s,A5(r,...e)]}function A5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const a=s.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function zd(n){const e=k5(n),t=w.forwardRef((s,r)=>{const{children:i,...a}=s,l=w.Children.toArray(i),c=l.find(T5);if(c){const d=c.props.children,h=l.map(f=>f===c?w.Children.count(d)>1?w.Children.only(null):w.isValidElement(d)?d.props.children:null:f);return o.jsx(e,{...a,ref:r,children:w.isValidElement(d)?w.cloneElement(d,void 0,h):null})}return o.jsx(e,{...a,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var C5=zd("Slot");function k5(n){const e=w.forwardRef((t,s)=>{const{children:r,...i}=t;if(w.isValidElement(r)){const a=M5(r),l=R5(i,r.props);return r.type!==w.Fragment&&(l.ref=s?$d(s,a):a),w.cloneElement(r,l)}return w.Children.count(r)>1?w.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var P5=Symbol("radix.slottable");function T5(n){return w.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===P5}function R5(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function M5(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function aj(n){const e=n+"CollectionProvider",[t,s]=si(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:b,children:v}=g,y=Z.useRef(null),_=Z.useRef(new Map).current;return o.jsx(r,{scope:b,itemMap:_,collectionRef:y,children:v})};a.displayName=e;const l=n+"CollectionSlot",c=zd(l),d=Z.forwardRef((g,b)=>{const{scope:v,children:y}=g,_=i(l,v),N=Ve(b,_.collectionRef);return o.jsx(c,{ref:N,children:y})});d.displayName=l;const h=n+"CollectionItemSlot",f="data-radix-collection-item",m=zd(h),p=Z.forwardRef((g,b)=>{const{scope:v,children:y,..._}=g,N=Z.useRef(null),j=Ve(b,N),A=i(h,v);return Z.useEffect(()=>(A.itemMap.set(N,{ref:N,..._}),()=>void A.itemMap.delete(N))),o.jsx(m,{[f]:"",ref:j,children:y})});p.displayName=h;function x(g){const b=i(n+"CollectionConsumer",g);return Z.useCallback(()=>{const y=b.collectionRef.current;if(!y)return[];const _=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((A,E)=>_.indexOf(A.ref.current)-_.indexOf(E.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:d,ItemSlot:p},x,s]}var I5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],le=I5.reduce((n,e)=>{const t=zd(`Primitive.${e}`),s=w.forwardRef((r,i)=>{const{asChild:a,...l}=r,c=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function pT(n,e){n&&Zd.flushSync(()=>n.dispatchEvent(e))}function Lt(n){const e=w.useRef(n);return w.useEffect(()=>{e.current=n}),w.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function D5(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n);w.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var O5="DismissableLayer",e_="dismissableLayer.update",L5="dismissableLayer.pointerDownOutside",F5="dismissableLayer.focusOutside",GA,gT=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),xv=w.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=n,d=w.useContext(gT),[h,f]=w.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=w.useState({}),x=Ve(e,E=>f(E)),g=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),y=h?g.indexOf(h):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,N=y>=v,j=z5(E=>{const P=E.target,T=[...d.branches].some(I=>I.contains(P));!N||T||(r==null||r(E),a==null||a(E),E.defaultPrevented||l==null||l())},m),A=B5(E=>{const P=E.target;[...d.branches].some(I=>I.contains(P))||(i==null||i(E),a==null||a(E),E.defaultPrevented||l==null||l())},m);return D5(E=>{y===d.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},m),w.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(GA=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),KA(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=GA)}},[h,m,t,d]),w.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),KA())},[h,d]),w.useEffect(()=>{const E=()=>p({});return document.addEventListener(e_,E),()=>document.removeEventListener(e_,E)},[]),o.jsx(le.div,{...c,ref:x,style:{pointerEvents:_?N?"auto":"none":void 0,...n.style},onFocusCapture:fe(n.onFocusCapture,A.onFocusCapture),onBlurCapture:fe(n.onBlurCapture,A.onBlurCapture),onPointerDownCapture:fe(n.onPointerDownCapture,j.onPointerDownCapture)})});xv.displayName=O5;var $5="DismissableLayerBranch",vT=w.forwardRef((n,e)=>{const t=w.useContext(gT),s=w.useRef(null),r=Ve(e,s);return w.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),o.jsx(le.div,{...n,ref:r})});vT.displayName=$5;function z5(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n),s=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){xT(L5,t,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function B5(n,e=globalThis==null?void 0:globalThis.document){const t=Lt(n),s=w.useRef(!1);return w.useEffect(()=>{const r=i=>{i.target&&!s.current&&xT(F5,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function KA(){const n=new CustomEvent(e_);document.dispatchEvent(n)}function xT(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?pT(r,i):r.dispatchEvent(i)}var U5=xv,H5=vT,Tt=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},W5="Portal",yv=w.forwardRef((n,e)=>{var l;const{container:t,...s}=n,[r,i]=w.useState(!1);Tt(()=>i(!0),[]);const a=t||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?hT.createPortal(o.jsx(le.div,{...s,ref:e}),a):null});yv.displayName=W5;function V5(n,e){return w.useReducer((t,s)=>e[t][s]??t,n)}var xr=n=>{const{present:e,children:t}=n,s=q5(e),r=typeof t=="function"?t({present:s.isPresent}):w.Children.only(t),i=Ve(s.ref,G5(r));return typeof t=="function"||s.isPresent?w.cloneElement(r,{ref:i}):null};xr.displayName="Presence";function q5(n){const[e,t]=w.useState(),s=w.useRef(null),r=w.useRef(n),i=w.useRef("none"),a=n?"mounted":"unmounted",[l,c]=V5(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const d=ox(s.current);i.current=l==="mounted"?d:"none"},[l]),Tt(()=>{const d=s.current,h=r.current;if(h!==n){const m=i.current,p=ox(d);n?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),Tt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=p=>{const g=ox(s.current).includes(p.animationName);if(p.target===e&&g&&(c("ANIMATION_END"),!r.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=p=>{p.target===e&&(i.current=ox(s.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:w.useCallback(d=>{s.current=d?getComputedStyle(d):null,t(d)},[])}}function ox(n){return(n==null?void 0:n.animationName)||"none"}function G5(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var K5=mN[" useInsertionEffect ".trim().toString()]||Tt;function Bd({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,i,a]=Y5({defaultProp:e,onChange:t}),l=n!==void 0,c=l?n:r;{const h=w.useRef(n!==void 0);w.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${s} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,s])}const d=w.useCallback(h=>{var f;if(l){const m=X5(h)?h(n):h;m!==n&&((f=a.current)==null||f.call(a,m))}else i(h)},[l,n,i,a]);return[c,d]}function Y5({defaultProp:n,onChange:e}){const[t,s]=w.useState(n),r=w.useRef(t),i=w.useRef(e);return K5(()=>{i.current=e},[e]),w.useEffect(()=>{var a;r.current!==t&&((a=i.current)==null||a.call(i,t),r.current=t)},[t,r]),[t,s,i]}function X5(n){return typeof n=="function"}var yT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Q5="VisuallyHidden",oj=w.forwardRef((n,e)=>o.jsx(le.span,{...n,ref:e,style:{...yT,...n.style}}));oj.displayName=Q5;var lj="ToastProvider",[cj,J5,Z5]=aj("Toast"),[bT,jQ]=si("Toast",[Z5]),[e$,ib]=bT(lj),wT=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:a}=n,[l,c]=w.useState(null),[d,h]=w.useState(0),f=w.useRef(!1),m=w.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${lj}\`. Expected non-empty \`string\`.`),o.jsx(cj.Provider,{scope:e,children:o.jsx(e$,{scope:e,label:t,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:w.useCallback(()=>h(p=>p+1),[]),onToastRemove:w.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:a})})};wT.displayName=lj;var _T="ToastViewport",t$=["F8"],t_="toast.viewportPause",n_="toast.viewportResume",ST=w.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=t$,label:r="Notifications ({hotkey})",...i}=n,a=ib(_T,t),l=J5(t),c=w.useRef(null),d=w.useRef(null),h=w.useRef(null),f=w.useRef(null),m=Ve(e,f,a.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=a.toastCount>0;w.useEffect(()=>{const b=v=>{var _;s.length!==0&&s.every(N=>v[N]||v.code===N)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[s]),w.useEffect(()=>{const b=c.current,v=f.current;if(x&&b&&v){const y=()=>{if(!a.isClosePausedRef.current){const A=new CustomEvent(t_);v.dispatchEvent(A),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const A=new CustomEvent(n_);v.dispatchEvent(A),a.isClosePausedRef.current=!1}},N=A=>{!b.contains(A.relatedTarget)&&_()},j=()=>{b.contains(document.activeElement)||_()};return b.addEventListener("focusin",y),b.addEventListener("focusout",N),b.addEventListener("pointermove",y),b.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",_),()=>{b.removeEventListener("focusin",y),b.removeEventListener("focusout",N),b.removeEventListener("pointermove",y),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",_)}}},[x,a.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:b})=>{const y=l().map(_=>{const N=_.ref.current,j=[N,...m$(N)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?y.reverse():y).flat()},[l]);return w.useEffect(()=>{const b=f.current;if(b){const v=y=>{var j,A,E;const _=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!_){const P=document.activeElement,T=y.shiftKey;if(y.target===b&&T){(j=d.current)==null||j.focus();return}const L=g({tabbingDirection:T?"backwards":"forwards"}),z=L.findIndex($=>$===P);bw(L.slice(z+1))?y.preventDefault():T?(A=d.current)==null||A.focus():(E=h.current)==null||E.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[l,g]),o.jsxs(H5,{ref:c,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&o.jsx(s_,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});bw(b)}}),o.jsx(cj.Slot,{scope:t,children:o.jsx(le.ol,{tabIndex:-1,...i,ref:m})}),x&&o.jsx(s_,{ref:h,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});bw(b)}})]})});ST.displayName=_T;var NT="ToastFocusProxy",s_=w.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...r}=n,i=ib(NT,t);return o.jsx(oj,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&s()}})});s_.displayName=NT;var bv="Toast",n$="toast.swipeStart",s$="toast.swipeMove",r$="toast.swipeCancel",i$="toast.swipeEnd",jT=w.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:r,onOpenChange:i,...a}=n,[l,c]=Bd({prop:s,defaultProp:r??!0,onChange:i,caller:bv});return o.jsx(xr,{present:t||l,children:o.jsx(l$,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:Lt(n.onPause),onResume:Lt(n.onResume),onSwipeStart:fe(n.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:fe(n.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:fe(n.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:fe(n.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});jT.displayName=bv;var[a$,o$]=bT(bv,{onClose(){}}),l$=w.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:r,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...x}=n,g=ib(bv,t),[b,v]=w.useState(null),y=Ve(e,$=>v($)),_=w.useRef(null),N=w.useRef(null),j=r||g.duration,A=w.useRef(0),E=w.useRef(j),P=w.useRef(0),{onToastAdd:T,onToastRemove:I}=g,M=Lt(()=>{var W;(b==null?void 0:b.contains(document.activeElement))&&((W=g.viewport)==null||W.focus()),a()}),L=w.useCallback($=>{!$||$===1/0||(window.clearTimeout(P.current),A.current=new Date().getTime(),P.current=window.setTimeout(M,$))},[M]);w.useEffect(()=>{const $=g.viewport;if($){const W=()=>{L(E.current),d==null||d()},F=()=>{const O=new Date().getTime()-A.current;E.current=E.current-O,window.clearTimeout(P.current),c==null||c()};return $.addEventListener(t_,F),$.addEventListener(n_,W),()=>{$.removeEventListener(t_,F),$.removeEventListener(n_,W)}}},[g.viewport,j,c,d,L]),w.useEffect(()=>{i&&!g.isClosePausedRef.current&&L(j)},[i,j,g.isClosePausedRef,L]),w.useEffect(()=>(T(),()=>I()),[T,I]);const z=w.useMemo(()=>b?RT(b):null,[b]);return g.viewport?o.jsxs(o.Fragment,{children:[z&&o.jsx(c$,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),o.jsx(a$,{scope:t,onClose:M,children:Zd.createPortal(o.jsx(cj.ItemSlot,{scope:t,children:o.jsx(U5,{asChild:!0,onEscapeKeyDown:fe(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||M(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:fe(n.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:fe(n.onPointerDown,$=>{$.button===0&&(_.current={x:$.clientX,y:$.clientY})}),onPointerMove:fe(n.onPointerMove,$=>{if(!_.current)return;const W=$.clientX-_.current.x,F=$.clientY-_.current.y,O=!!N.current,D=["left","right"].includes(g.swipeDirection),R=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,U=D?R(0,W):0,X=D?0:R(0,F),B=$.pointerType==="touch"?10:2,V={x:U,y:X},Q={originalEvent:$,delta:V};O?(N.current=V,lx(s$,f,Q,{discrete:!1})):YA(V,g.swipeDirection,B)?(N.current=V,lx(n$,h,Q,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(W)>B||Math.abs(F)>B)&&(_.current=null)}),onPointerUp:fe(n.onPointerUp,$=>{const W=N.current,F=$.target;if(F.hasPointerCapture($.pointerId)&&F.releasePointerCapture($.pointerId),N.current=null,_.current=null,W){const O=$.currentTarget,D={originalEvent:$,delta:W};YA(W,g.swipeDirection,g.swipeThreshold)?lx(i$,p,D,{discrete:!0}):lx(r$,m,D,{discrete:!0}),O.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),c$=n=>{const{__scopeToast:e,children:t,...s}=n,r=ib(bv,e),[i,a]=w.useState(!1),[l,c]=w.useState(!1);return h$(()=>a(!0)),w.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(yv,{asChild:!0,children:o.jsx(oj,{...s,children:i&&o.jsxs(o.Fragment,{children:[r.label," ",t]})})})},d$="ToastTitle",ET=w.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return o.jsx(le.div,{...s,ref:e})});ET.displayName=d$;var u$="ToastDescription",AT=w.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return o.jsx(le.div,{...s,ref:e})});AT.displayName=u$;var CT="ToastAction",kT=w.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?o.jsx(TT,{altText:t,asChild:!0,children:o.jsx(dj,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${CT}\`. Expected non-empty \`string\`.`),null)});kT.displayName=CT;var PT="ToastClose",dj=w.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,r=o$(PT,t);return o.jsx(TT,{asChild:!0,children:o.jsx(le.button,{type:"button",...s,ref:e,onClick:fe(n.onClick,r.onClose)})})});dj.displayName=PT;var TT=w.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...r}=n;return o.jsx(le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function RT(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),f$(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...RT(s))}}),e}function lx(n,e,t,{discrete:s}){const r=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?pT(r,i):r.dispatchEvent(i)}var YA=(n,e,t=0)=>{const s=Math.abs(n.x),r=Math.abs(n.y),i=s>r;return e==="left"||e==="right"?i&&s>t:!i&&r>t};function h$(n=()=>{}){const e=Lt(n);Tt(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function f$(n){return n.nodeType===n.ELEMENT_NODE}function m$(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function bw(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var p$=wT,MT=ST,IT=jT,DT=ET,OT=AT,LT=kT,FT=dj;function $T(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=$T(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function zT(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=$T(n))&&(s&&(s+=" "),s+=e);return s}const XA=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,QA=zT,wv=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return QA(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,a=Object.keys(r).map(d=>{const h=t==null?void 0:t[d],f=i==null?void 0:i[d];if(h===null)return null;const m=XA(h)||XA(f);return r[d][m]}),l=t&&Object.entries(t).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((d,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(x=>{let[g,b]=x;return Array.isArray(b)?b.includes({...i,...l}[g]):{...i,...l}[g]===b})?[...d,f,m]:d},[]);return QA(n,a,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BT=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=w.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:a,...l},c)=>w.createElement("svg",{ref:c,...v$,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:BT("lucide",r),...l},[...a.map(([d,h])=>w.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(n,e)=>{const t=w.forwardRef(({className:s,...r},i)=>w.createElement(x$,{ref:i,iconNode:e,className:BT(`lucide-${g$(n)}`,s),...r}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ue("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=ue("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=ue("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=ue("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=ue("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=ue("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=ue("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=ue("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=ue("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=ue("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),mj="-",F$=n=>{const e=z$(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:a=>{const l=a.split(mj);return l[0]===""&&l.length!==1&&l.shift(),QT(l,e)||$$(a)},getConflictingClassGroupIds:(a,l)=>{const c=t[a]||[];return l&&s[a]?[...c,...s[a]]:c}}},QT=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],s=e.nextPart.get(t),r=s?QT(n.slice(1),s):void 0;if(r)return r;if(e.validators.length===0)return;const i=n.join(mj);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},tC=/^\[(.+)\]$/,$$=n=>{if(tC.test(n)){const e=tC.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},z$=n=>{const{theme:e,prefix:t}=n,s={nextPart:new Map,validators:[]};return U$(Object.entries(n.classGroups),t).forEach(([i,a])=>{c_(a,s,i,e)}),s},c_=(n,e,t,s)=>{n.forEach(r=>{if(typeof r=="string"){const i=r===""?e:nC(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(B$(r)){c_(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,a])=>{c_(a,nC(e,i),t,s)})})},nC=(n,e)=>{let t=n;return e.split(mj).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},B$=n=>n.isThemeGetter,U$=(n,e)=>e?n.map(([t,s])=>{const r=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[t,r]}):n,H$=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const r=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,s=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return r(i,a),a},set(i,a){t.has(i)?t.set(i,a):r(i,a)}}},JT="!",W$=n=>{const{separator:e,experimentalParseClassName:t}=n,s=e.length===1,r=e[0],i=e.length,a=l=>{const c=[];let d=0,h=0,f;for(let b=0;b<l.length;b++){let v=l[b];if(d===0){if(v===r&&(s||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(v==="/"){f=b;continue}}v==="["?d++:v==="]"&&d--}const m=c.length===0?l:l.substring(h),p=m.startsWith(JT),x=p?m.substring(1):m,g=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:g}};return t?l=>t({className:l,parseClassName:a}):a},V$=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},q$=n=>({cache:H$(n.cacheSize),parseClassName:W$(n),...F$(n)}),G$=/\s+/,K$=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:r}=e,i=[],a=n.trim().split(G$);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=t(d);let x=!!p,g=s(x?m.substring(0,p):m);if(!g){if(!x){l=d+(l.length>0?" "+l:l);continue}if(g=s(m),!g){l=d+(l.length>0?" "+l:l);continue}x=!1}const b=V$(h).join(":"),v=f?b+JT:b,y=v+g;if(i.includes(y))continue;i.push(y);const _=r(g,x);for(let N=0;N<_.length;++N){const j=_[N];i.push(v+j)}l=d+(l.length>0?" "+l:l)}return l};function Y$(){let n=0,e,t,s="";for(;n<arguments.length;)(e=arguments[n++])&&(t=ZT(e))&&(s&&(s+=" "),s+=t);return s}const ZT=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=ZT(n[s]))&&(t&&(t+=" "),t+=e);return t};function X$(n,...e){let t,s,r,i=a;function a(c){const d=e.reduce((h,f)=>f(h),n());return t=q$(d),s=t.cache.get,r=t.cache.set,i=l,l(c)}function l(c){const d=s(c);if(d)return d;const h=K$(c,t);return r(c,h),h}return function(){return i(Y$.apply(null,arguments))}}const dt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},eR=/^\[(?:([a-z-]+):)?(.+)\]$/i,Q$=/^\d+\/\d+$/,J$=new Set(["px","full","screen"]),Z$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e6=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t6=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,n6=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s6=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zi=n=>Ju(n)||J$.has(n)||Q$.test(n),po=n=>Wf(n,"length",u6),Ju=n=>!!n&&!Number.isNaN(Number(n)),ww=n=>Wf(n,"number",Ju),um=n=>!!n&&Number.isInteger(Number(n)),r6=n=>n.endsWith("%")&&Ju(n.slice(0,-1)),Ne=n=>eR.test(n),go=n=>Z$.test(n),i6=new Set(["length","size","percentage"]),a6=n=>Wf(n,i6,tR),o6=n=>Wf(n,"position",tR),l6=new Set(["image","url"]),c6=n=>Wf(n,l6,f6),d6=n=>Wf(n,"",h6),hm=()=>!0,Wf=(n,e,t)=>{const s=eR.exec(n);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},u6=n=>e6.test(n)&&!t6.test(n),tR=()=>!1,h6=n=>n6.test(n),f6=n=>s6.test(n),m6=()=>{const n=dt("colors"),e=dt("spacing"),t=dt("blur"),s=dt("brightness"),r=dt("borderColor"),i=dt("borderRadius"),a=dt("borderSpacing"),l=dt("borderWidth"),c=dt("contrast"),d=dt("grayscale"),h=dt("hueRotate"),f=dt("invert"),m=dt("gap"),p=dt("gradientColorStops"),x=dt("gradientColorStopPositions"),g=dt("inset"),b=dt("margin"),v=dt("opacity"),y=dt("padding"),_=dt("saturate"),N=dt("scale"),j=dt("sepia"),A=dt("skew"),E=dt("space"),P=dt("translate"),T=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Ne,e],L=()=>[Ne,e],z=()=>["",Zi,po],$=()=>["auto",Ju,Ne],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],F=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Ne],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[Ju,Ne];return{cacheSize:500,separator:":",theme:{colors:[hm],spacing:[Zi,po],blur:["none","",go,Ne],brightness:X(),borderColor:[n],borderRadius:["none","","full",go,Ne],borderSpacing:L(),borderWidth:z(),contrast:X(),grayscale:R(),hueRotate:X(),invert:R(),gap:L(),gradientColorStops:[n],gradientColorStopPositions:[r6,po],inset:M(),margin:M(),opacity:X(),padding:L(),saturate:X(),scale:X(),sepia:R(),skew:X(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",Ne]}],container:["container"],columns:[{columns:[go]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Ne]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",um,Ne]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ne]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",um,Ne]}],"grid-cols":[{"grid-cols":[hm]}],"col-start-end":[{col:["auto",{span:["full",um,Ne]},Ne]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[hm]}],"row-start-end":[{row:["auto",{span:[um,Ne]},Ne]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ne]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ne]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ne,e]}],"min-w":[{"min-w":[Ne,e,"min","max","fit"]}],"max-w":[{"max-w":[Ne,e,"none","full","min","max","fit","prose",{screen:[go]},go]}],h:[{h:[Ne,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ne,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ne,e,"auto","min","max","fit"]}],"font-size":[{text:["base",go,po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ww]}],"font-family":[{font:[hm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ne]}],"line-clamp":[{"line-clamp":["none",Ju,ww]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zi,Ne]}],"list-image":[{"list-image":["none",Ne]}],"list-style-type":[{list:["none","disc","decimal",Ne]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...F(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zi,po]}],"underline-offset":[{"underline-offset":["auto",Zi,Ne]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),o6]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},c6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...F(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:F()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...F()]}],"outline-offset":[{"outline-offset":[Zi,Ne]}],"outline-w":[{outline:[Zi,po]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Zi,po]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",go,d6]}],"shadow-color":[{shadow:[hm]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",go,Ne]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ne]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",Ne]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ne]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[um,Ne]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ne]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Zi,po,ww]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},p6=X$(m6);function ne(...n){return p6(zT(n))}const g6=p$,nR=w.forwardRef(({className:n,...e},t)=>o.jsx(MT,{ref:t,className:ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));nR.displayName=MT.displayName;const v6=wv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sR=w.forwardRef(({className:n,variant:e,...t},s)=>o.jsx(IT,{ref:s,className:ne(v6({variant:e}),n),...t}));sR.displayName=IT.displayName;const x6=w.forwardRef(({className:n,...e},t)=>o.jsx(LT,{ref:t,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));x6.displayName=LT.displayName;const rR=w.forwardRef(({className:n,...e},t)=>o.jsx(FT,{ref:t,className:ne("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:o.jsx(ao,{className:"h-4 w-4"})}));rR.displayName=FT.displayName;const iR=w.forwardRef(({className:n,...e},t)=>o.jsx(DT,{ref:t,className:ne("text-sm font-semibold",n),...e}));iR.displayName=DT.displayName;const aR=w.forwardRef(({className:n,...e},t)=>o.jsx(OT,{ref:t,className:ne("text-sm opacity-90",n),...e}));aR.displayName=OT.displayName;function y6(){const{toasts:n}=ij();return o.jsxs(g6,{children:[n.map(function({id:e,title:t,description:s,action:r,...i}){return o.jsxs(sR,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[t&&o.jsx(iR,{children:t}),s&&o.jsx(aR,{children:s})]}),r,o.jsx(rR,{})]},e)}),o.jsx(nR,{})]})}var sC=["light","dark"],b6="(prefers-color-scheme: dark)",w6=w.createContext(void 0),_6={setTheme:n=>{},themes:[]},S6=()=>{var n;return(n=w.useContext(w6))!=null?n:_6};w.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:s,enableColorScheme:r,defaultTheme:i,value:a,attrs:l,nonce:c})=>{let d=i==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=r?sC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,b=!0)=>{let v=a?a[x]:x,y=g?x+"|| ''":`'${v}'`,_="";return r&&b&&!g&&sC.includes(x)&&(_+=`d.style.colorScheme = '${x}';`),t==="class"?g||v?_+=`c.add(${y})`:_+="null":v&&(_+=`d[s](n,${y})`),_},p=n?`!function(){${h}${m(n)}}()`:s?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${b6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${m(a?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return w.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var N6=n=>{switch(n){case"success":return A6;case"info":return k6;case"warning":return C6;case"error":return P6;default:return null}},j6=Array(12).fill(0),E6=({visible:n,className:e})=>Z.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},Z.createElement("div",{className:"sonner-spinner"},j6.map((t,s)=>Z.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),A6=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),C6=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),k6=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),P6=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Z.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),T6=Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Z.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Z.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),R6=()=>{let[n,e]=Z.useState(document.hidden);return Z.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},d_=1,M6=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...s}=n,r=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:d_++,i=this.toasts.find(l=>l.id===r),a=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(l=>l.id===r?(this.publish({...l,...n,id:r,title:t}),{...l,...n,id:r,dismissible:a,title:t}):l):this.addToast({title:t,...s,dismissible:a,id:r}),r},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let s=n instanceof Promise?n:n(),r=t!==void 0,i,a=s.then(async c=>{if(i=["resolve",c],Z.isValidElement(c))r=!1,this.create({id:t,type:"default",message:c});else if(D6(c)&&!c.ok){r=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:d,description:h})}else if(e.success!==void 0){r=!1;let d=typeof e.success=="function"?await e.success(c):e.success,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:d,description:h})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){r=!1;let d=typeof e.error=="function"?await e.error(c):e.error,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:d,description:h})}}).finally(()=>{var c;r&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,d)=>a.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||d_++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ss=new M6,I6=(n,e)=>{let t=(e==null?void 0:e.id)||d_++;return ss.addToast({title:n,...e,id:t}),t},D6=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",O6=I6,L6=()=>ss.toasts,F6=()=>ss.getActiveToasts(),xe=Object.assign(O6,{success:ss.success,info:ss.info,warning:ss.warning,error:ss.error,custom:ss.custom,message:ss.message,promise:ss.promise,dismiss:ss.dismiss,loading:ss.loading},{getHistory:L6,getToasts:F6});function $6(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",e==="top"&&t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}$6(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function cx(n){return n.label!==void 0}var z6=3,B6="32px",U6="16px",rC=4e3,H6=356,W6=14,V6=20,q6=200;function Nr(...n){return n.filter(Boolean).join(" ")}function G6(n){let[e,t]=n.split("-"),s=[];return e&&s.push(e),t&&s.push(t),s}var K6=n=>{var e,t,s,r,i,a,l,c,d,h,f;let{invert:m,toast:p,unstyled:x,interacting:g,setHeights:b,visibleToasts:v,heights:y,index:_,toasts:N,expanded:j,removeToast:A,defaultRichColors:E,closeButton:P,style:T,cancelButtonStyle:I,actionButtonStyle:M,className:L="",descriptionClassName:z="",duration:$,position:W,gap:F,loadingIcon:O,expandByDefault:D,classNames:R,icons:U,closeButtonAriaLabel:X="Close toast",pauseWhenPageIsHidden:B}=n,[V,Q]=Z.useState(null),[J,ce]=Z.useState(null),[H,pe]=Z.useState(!1),[je,Ce]=Z.useState(!1),[ke,De]=Z.useState(!1),[zt,Xn]=Z.useState(!1),[tc,co]=Z.useState(!1),[nc,tm]=Z.useState(0),[ru,kE]=Z.useState(0),nm=Z.useRef(p.duration||$||rC),PE=Z.useRef(null),sc=Z.useRef(null),FF=_===0,$F=_+1<=v,Xs=p.type,iu=p.dismissible!==!1,zF=p.className||"",BF=p.descriptionClassName||"",Hv=Z.useMemo(()=>y.findIndex(we=>we.toastId===p.id)||0,[y,p.id]),UF=Z.useMemo(()=>{var we;return(we=p.closeButton)!=null?we:P},[p.closeButton,P]),TE=Z.useMemo(()=>p.duration||$||rC,[p.duration,$]),Hb=Z.useRef(0),au=Z.useRef(0),RE=Z.useRef(0),ou=Z.useRef(null),[HF,WF]=W.split("-"),ME=Z.useMemo(()=>y.reduce((we,et,ft)=>ft>=Hv?we:we+et.height,0),[y,Hv]),IE=R6(),VF=p.invert||m,Wb=Xs==="loading";au.current=Z.useMemo(()=>Hv*F+ME,[Hv,ME]),Z.useEffect(()=>{nm.current=TE},[TE]),Z.useEffect(()=>{pe(!0)},[]),Z.useEffect(()=>{let we=sc.current;if(we){let et=we.getBoundingClientRect().height;return kE(et),b(ft=>[{toastId:p.id,height:et,position:p.position},...ft]),()=>b(ft=>ft.filter(br=>br.toastId!==p.id))}},[b,p.id]),Z.useLayoutEffect(()=>{if(!H)return;let we=sc.current,et=we.style.height;we.style.height="auto";let ft=we.getBoundingClientRect().height;we.style.height=et,kE(ft),b(br=>br.find(wr=>wr.toastId===p.id)?br.map(wr=>wr.toastId===p.id?{...wr,height:ft}:wr):[{toastId:p.id,height:ft,position:p.position},...br])},[H,p.title,p.description,b,p.id]);let uo=Z.useCallback(()=>{Ce(!0),tm(au.current),b(we=>we.filter(et=>et.toastId!==p.id)),setTimeout(()=>{A(p)},q6)},[p,A,b,au]);Z.useEffect(()=>{if(p.promise&&Xs==="loading"||p.duration===1/0||p.type==="loading")return;let we;return j||g||B&&IE?(()=>{if(RE.current<Hb.current){let et=new Date().getTime()-Hb.current;nm.current=nm.current-et}RE.current=new Date().getTime()})():nm.current!==1/0&&(Hb.current=new Date().getTime(),we=setTimeout(()=>{var et;(et=p.onAutoClose)==null||et.call(p,p),uo()},nm.current)),()=>clearTimeout(we)},[j,g,p,Xs,B,IE,uo]),Z.useEffect(()=>{p.delete&&uo()},[uo,p.delete]);function qF(){var we,et,ft;return U!=null&&U.loading?Z.createElement("div",{className:Nr(R==null?void 0:R.loader,(we=p==null?void 0:p.classNames)==null?void 0:we.loader,"sonner-loader"),"data-visible":Xs==="loading"},U.loading):O?Z.createElement("div",{className:Nr(R==null?void 0:R.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":Xs==="loading"},O):Z.createElement(E6,{className:Nr(R==null?void 0:R.loader,(ft=p==null?void 0:p.classNames)==null?void 0:ft.loader),visible:Xs==="loading"})}return Z.createElement("li",{tabIndex:0,ref:sc,className:Nr(L,zF,R==null?void 0:R.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,R==null?void 0:R.default,R==null?void 0:R[Xs],(t=p==null?void 0:p.classNames)==null?void 0:t[Xs]),"data-sonner-toast":"","data-rich-colors":(s=p.richColors)!=null?s:E,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":H,"data-promise":!!p.promise,"data-swiped":tc,"data-removed":je,"data-visible":$F,"data-y-position":HF,"data-x-position":WF,"data-index":_,"data-front":FF,"data-swiping":ke,"data-dismissible":iu,"data-type":Xs,"data-invert":VF,"data-swipe-out":zt,"data-swipe-direction":J,"data-expanded":!!(j||D&&H),style:{"--index":_,"--toasts-before":_,"--z-index":N.length-_,"--offset":`${je?nc:au.current}px`,"--initial-height":D?"auto":`${ru}px`,...T,...p.style},onDragEnd:()=>{De(!1),Q(null),ou.current=null},onPointerDown:we=>{Wb||!iu||(PE.current=new Date,tm(au.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(De(!0),ou.current={x:we.clientX,y:we.clientY}))},onPointerUp:()=>{var we,et,ft,br;if(zt||!iu)return;ou.current=null;let wr=Number(((we=sc.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ho=Number(((et=sc.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),rc=new Date().getTime()-((ft=PE.current)==null?void 0:ft.getTime()),_r=V==="x"?wr:ho,fo=Math.abs(_r)/rc;if(Math.abs(_r)>=V6||fo>.11){tm(au.current),(br=p.onDismiss)==null||br.call(p,p),ce(V==="x"?wr>0?"right":"left":ho>0?"down":"up"),uo(),Xn(!0),co(!1);return}De(!1),Q(null)},onPointerMove:we=>{var et,ft,br,wr;if(!ou.current||!iu||((et=window.getSelection())==null?void 0:et.toString().length)>0)return;let ho=we.clientY-ou.current.y,rc=we.clientX-ou.current.x,_r=(ft=n.swipeDirections)!=null?ft:G6(W);!V&&(Math.abs(rc)>1||Math.abs(ho)>1)&&Q(Math.abs(rc)>Math.abs(ho)?"x":"y");let fo={x:0,y:0};V==="y"?(_r.includes("top")||_r.includes("bottom"))&&(_r.includes("top")&&ho<0||_r.includes("bottom")&&ho>0)&&(fo.y=ho):V==="x"&&(_r.includes("left")||_r.includes("right"))&&(_r.includes("left")&&rc<0||_r.includes("right")&&rc>0)&&(fo.x=rc),(Math.abs(fo.x)>0||Math.abs(fo.y)>0)&&co(!0),(br=sc.current)==null||br.style.setProperty("--swipe-amount-x",`${fo.x}px`),(wr=sc.current)==null||wr.style.setProperty("--swipe-amount-y",`${fo.y}px`)}},UF&&!p.jsx?Z.createElement("button",{"aria-label":X,"data-disabled":Wb,"data-close-button":!0,onClick:Wb||!iu?()=>{}:()=>{var we;uo(),(we=p.onDismiss)==null||we.call(p,p)},className:Nr(R==null?void 0:R.closeButton,(r=p==null?void 0:p.classNames)==null?void 0:r.closeButton)},(i=U==null?void 0:U.close)!=null?i:T6):null,p.jsx||w.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Z.createElement(Z.Fragment,null,Xs||p.icon||p.promise?Z.createElement("div",{"data-icon":"",className:Nr(R==null?void 0:R.icon,(a=p==null?void 0:p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||qF():null,p.type!=="loading"?p.icon||(U==null?void 0:U[Xs])||N6(Xs):null):null,Z.createElement("div",{"data-content":"",className:Nr(R==null?void 0:R.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},Z.createElement("div",{"data-title":"",className:Nr(R==null?void 0:R.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?Z.createElement("div",{"data-description":"",className:Nr(z,BF,R==null?void 0:R.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),w.isValidElement(p.cancel)?p.cancel:p.cancel&&cx(p.cancel)?Z.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||I,onClick:we=>{var et,ft;cx(p.cancel)&&iu&&((ft=(et=p.cancel).onClick)==null||ft.call(et,we),uo())},className:Nr(R==null?void 0:R.cancelButton,(h=p==null?void 0:p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,w.isValidElement(p.action)?p.action:p.action&&cx(p.action)?Z.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||M,onClick:we=>{var et,ft;cx(p.action)&&((ft=(et=p.action).onClick)==null||ft.call(et,we),!we.defaultPrevented&&uo())},className:Nr(R==null?void 0:R.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function iC(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function Y6(n,e){let t={};return[n,e].forEach((s,r)=>{let i=r===1,a=i?"--mobile-offset":"--offset",l=i?U6:B6;function c(d){["top","right","bottom","left"].forEach(h=>{t[`${a}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(d=>{s[d]===void 0?t[`${a}-${d}`]=l:t[`${a}-${d}`]=typeof s[d]=="number"?`${s[d]}px`:s[d]}):c(l)}),t}var X6=w.forwardRef(function(n,e){let{invert:t,position:s="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:a,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:f,duration:m,style:p,visibleToasts:x=z6,toastOptions:g,dir:b=iC(),gap:v=W6,loadingIcon:y,icons:_,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:j}=n,[A,E]=Z.useState([]),P=Z.useMemo(()=>Array.from(new Set([s].concat(A.filter(B=>B.position).map(B=>B.position)))),[A,s]),[T,I]=Z.useState([]),[M,L]=Z.useState(!1),[z,$]=Z.useState(!1),[W,F]=Z.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=Z.useRef(null),D=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=Z.useRef(null),U=Z.useRef(!1),X=Z.useCallback(B=>{E(V=>{var Q;return(Q=V.find(J=>J.id===B.id))!=null&&Q.delete||ss.dismiss(B.id),V.filter(({id:J})=>J!==B.id)})},[]);return Z.useEffect(()=>ss.subscribe(B=>{if(B.dismiss){E(V=>V.map(Q=>Q.id===B.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{hT.flushSync(()=>{E(V=>{let Q=V.findIndex(J=>J.id===B.id);return Q!==-1?[...V.slice(0,Q),{...V[Q],...B},...V.slice(Q+1)]:[B,...V]})})})}),[]),Z.useEffect(()=>{if(h!=="system"){F(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?F("dark"):F("light")),typeof window>"u")return;let B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:V})=>{F(V?"dark":"light")})}catch{B.addListener(({matches:Q})=>{try{F(Q?"dark":"light")}catch(J){console.error(J)}})}},[h]),Z.useEffect(()=>{A.length<=1&&L(!1)},[A]),Z.useEffect(()=>{let B=V=>{var Q,J;r.every(ce=>V[ce]||V.code===ce)&&(L(!0),(Q=O.current)==null||Q.focus()),V.code==="Escape"&&(document.activeElement===O.current||(J=O.current)!=null&&J.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[r]),Z.useEffect(()=>{if(O.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,U.current=!1)}},[O.current]),Z.createElement("section",{ref:e,"aria-label":`${N} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((B,V)=>{var Q;let[J,ce]=B.split("-");return A.length?Z.createElement("ol",{key:B,dir:b==="auto"?iC():b,tabIndex:-1,ref:O,className:l,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":J,"data-lifted":M&&A.length>1&&!i,"data-x-position":ce,style:{"--front-toast-height":`${((Q=T[0])==null?void 0:Q.height)||0}px`,"--width":`${H6}px`,"--gap":`${v}px`,...p,...Y6(c,d)},onBlur:H=>{U.current&&!H.currentTarget.contains(H.relatedTarget)&&(U.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||U.current||(U.current=!0,R.current=H.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{z||L(!1)},onDragEnd:()=>L(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},A.filter(H=>!H.position&&V===0||H.position===B).map((H,pe)=>{var je,Ce;return Z.createElement(K6,{key:H.id,icons:_,index:pe,toast:H,defaultRichColors:f,duration:(je=g==null?void 0:g.duration)!=null?je:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:x,closeButton:(Ce=g==null?void 0:g.closeButton)!=null?Ce:a,interacting:z,position:B,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:X,toasts:A.filter(ke=>ke.position==H.position),heights:T.filter(ke=>ke.position==H.position),setHeights:I,expandByDefault:i,gap:v,loadingIcon:y,expanded:M,pauseWhenPageIsHidden:j,swipeDirections:n.swipeDirections})})):null}))});const Q6=({...n})=>{const{theme:e="system"}=S6();return o.jsx(X6,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var db=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ub=typeof window>"u"||"Deno"in globalThis;function kr(){}function J6(n,e){return typeof n=="function"?n(e):n}function Z6(n){return typeof n=="number"&&n>=0&&n!==1/0}function ez(n,e){return Math.max(n+(e||0)-Date.now(),0)}function u_(n,e){return typeof n=="function"?n(e):n}function tz(n,e){return typeof n=="function"?n(e):n}function aC(n,e){const{type:t="all",exact:s,fetchStatus:r,predicate:i,queryKey:a,stale:l}=n;if(a){if(s){if(e.queryHash!==pj(a,e.options))return!1}else if(!Ep(e.queryKey,a))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function oC(n,e){const{exact:t,status:s,predicate:r,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(jp(e.options.mutationKey)!==jp(i))return!1}else if(!Ep(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function pj(n,e){return((e==null?void 0:e.queryKeyHashFn)||jp)(n)}function jp(n){return JSON.stringify(n,(e,t)=>h_(t)?Object.keys(t).sort().reduce((s,r)=>(s[r]=t[r],s),{}):t)}function Ep(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Ep(n[t],e[t])):!1}function oR(n,e){if(n===e)return n;const t=lC(n)&&lC(e);if(t||h_(n)&&h_(e)){const s=t?n:Object.keys(n),r=s.length,i=t?e:Object.keys(e),a=i.length,l=t?[]:{},c=new Set(s);let d=0;for(let h=0;h<a;h++){const f=t?h:i[h];(!t&&c.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(l[f]=void 0,d++):(l[f]=oR(n[f],e[f]),l[f]===n[f]&&n[f]!==void 0&&d++)}return r===a&&d===r?n:l}return e}function lC(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function h_(n){if(!cC(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!cC(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function cC(n){return Object.prototype.toString.call(n)==="[object Object]"}function nz(n){return new Promise(e=>{setTimeout(e,n)})}function sz(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?oR(n,e):e}function rz(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function iz(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var gj=Symbol();function lR(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===gj?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var wc,ko,ih,Wk,az=(Wk=class extends db{constructor(){super();C(this,wc);C(this,ko);C(this,ih);S(this,ih,e=>{if(!ub&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){u(this,ko)||this.setEventListener(u(this,ih))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,ko))==null||e.call(this),S(this,ko,void 0))}setEventListener(e){var t;S(this,ih,e),(t=u(this,ko))==null||t.call(this),S(this,ko,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){u(this,wc)!==e&&(S(this,wc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof u(this,wc)=="boolean"?u(this,wc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},wc=new WeakMap,ko=new WeakMap,ih=new WeakMap,Wk),cR=new az,ah,Po,oh,Vk,oz=(Vk=class extends db{constructor(){super();C(this,ah,!0);C(this,Po);C(this,oh);S(this,oh,e=>{if(!ub&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){u(this,Po)||this.setEventListener(u(this,oh))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Po))==null||e.call(this),S(this,Po,void 0))}setEventListener(e){var t;S(this,oh,e),(t=u(this,Po))==null||t.call(this),S(this,Po,e(this.setOnline.bind(this)))}setOnline(e){u(this,ah)!==e&&(S(this,ah,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return u(this,ah)}},ah=new WeakMap,Po=new WeakMap,oh=new WeakMap,Vk),Q0=new oz;function lz(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});t.status="pending",t.catch(()=>{});function s(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{s({status:"fulfilled",value:r}),n(r)},t.reject=r=>{s({status:"rejected",reason:r}),e(r)},t}function cz(n){return Math.min(1e3*2**n,3e4)}function dR(n){return(n??"online")==="online"?Q0.isOnline():!0}var uR=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function _w(n){return n instanceof uR}function hR(n){let e=!1,t=0,s=!1,r;const i=lz(),a=g=>{var b;s||(m(new uR(g)),(b=n.abort)==null||b.call(n))},l=()=>{e=!0},c=()=>{e=!1},d=()=>cR.isFocused()&&(n.networkMode==="always"||Q0.isOnline())&&n.canRun(),h=()=>dR(n.networkMode)&&n.canRun(),f=g=>{var b;s||(s=!0,(b=n.onSuccess)==null||b.call(n,g),r==null||r(),i.resolve(g))},m=g=>{var b;s||(s=!0,(b=n.onError)==null||b.call(n,g),r==null||r(),i.reject(g))},p=()=>new Promise(g=>{var b;r=v=>{(s||d())&&g(v)},(b=n.onPause)==null||b.call(n)}).then(()=>{var g;r=void 0,s||(g=n.onContinue)==null||g.call(n)}),x=()=>{if(s)return;let g;const b=t===0?n.initialPromise:void 0;try{g=b??n.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var A;if(s)return;const y=n.retry??(ub?0:3),_=n.retryDelay??cz,N=typeof _=="function"?_(t,v):_,j=y===!0||typeof y=="number"&&t<y||typeof y=="function"&&y(t,v);if(e||!j){m(v);return}t++,(A=n.onFail)==null||A.call(n,t,v),nz(N).then(()=>d()?void 0:p()).then(()=>{e?m(v):x()})})};return{promise:i,cancel:a,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():p().then(x),i)}}var dz=n=>setTimeout(n,0);function uz(){let n=[],e=0,t=l=>{l()},s=l=>{l()},r=dz;const i=l=>{e?n.push(l):r(()=>{t(l)})},a=()=>{const l=n;n=[],l.length&&r(()=>{s(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{r=l}}}var Un=uz(),_c,qk,fR=(qk=class{constructor(){C(this,_c)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Z6(this.gcTime)&&S(this,_c,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ub?1/0:5*60*1e3))}clearGcTimeout(){u(this,_c)&&(clearTimeout(u(this,_c)),S(this,_c,void 0))}},_c=new WeakMap,qk),lh,Sc,Js,Nc,Nn,Op,jc,Pr,ta,Gk,hz=(Gk=class extends fR{constructor(e){super();C(this,Pr);C(this,lh);C(this,Sc);C(this,Js);C(this,Nc);C(this,Nn);C(this,Op);C(this,jc);S(this,jc,!1),S(this,Op,e.defaultOptions),this.setOptions(e.options),this.observers=[],S(this,Nc,e.client),S(this,Js,u(this,Nc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,S(this,lh,mz(this.options)),this.state=e.state??u(this,lh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=u(this,Nn))==null?void 0:e.promise}setOptions(e){this.options={...u(this,Op),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&u(this,Js).remove(this)}setData(e,t){const s=sz(this.state.data,e,this.options);return k(this,Pr,ta).call(this,{data:s,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),s}setState(e,t){k(this,Pr,ta).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var s,r;const t=(s=u(this,Nn))==null?void 0:s.promise;return(r=u(this,Nn))==null||r.cancel(e),t?t.then(kr).catch(kr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(u(this,lh))}isActive(){return this.observers.some(e=>tz(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gj||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>u_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ez(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(s=>s.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,Nn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(s=>s.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,Nn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),u(this,Js).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(u(this,Nn)&&(u(this,jc)?u(this,Nn).cancel({revert:!0}):u(this,Nn).cancelRetry()),this.scheduleGc()),u(this,Js).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,Pr,ta).call(this,{type:"invalidate"})}fetch(e,t){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(u(this,Nn))return u(this,Nn).continueRetry(),u(this,Nn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,r=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(S(this,jc,!0),s.signal)})},i=()=>{const m=lR(this.options,t),x=(()=>{const g={client:u(this,Nc),queryKey:this.queryKey,meta:this.meta};return r(g),g})();return S(this,jc,!1),this.options.persister?this.options.persister(m,x,this):m(x)},l=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:u(this,Nc),state:this.state,fetchFn:i};return r(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),S(this,Sc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&k(this,Pr,ta).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var p,x,g,b;_w(m)&&m.silent||k(this,Pr,ta).call(this,{type:"error",error:m}),_w(m)||((x=(p=u(this,Js).config).onError)==null||x.call(p,m,this),(b=(g=u(this,Js).config).onSettled)==null||b.call(g,this.state.data,m,this)),this.scheduleGc()};return S(this,Nn,hR({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var p,x,g,b;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(v){c(v);return}(x=(p=u(this,Js).config).onSuccess)==null||x.call(p,m,this),(b=(g=u(this,Js).config).onSettled)==null||b.call(g,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{k(this,Pr,ta).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{k(this,Pr,ta).call(this,{type:"pause"})},onContinue:()=>{k(this,Pr,ta).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),u(this,Nn).start()}},lh=new WeakMap,Sc=new WeakMap,Js=new WeakMap,Nc=new WeakMap,Nn=new WeakMap,Op=new WeakMap,jc=new WeakMap,Pr=new WeakSet,ta=function(e){const t=s=>{switch(e.type){case"failed":return{...s,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...fz(s.data,this.options),fetchMeta:e.meta??null};case"success":return S(this,Sc,void 0),{...s,data:e.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return _w(r)&&r.revert&&u(this,Sc)?{...u(this,Sc),fetchStatus:"idle"}:{...s,error:r,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...e.state}}};this.state=t(this.state),Un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),u(this,Js).notify({query:this,type:"updated",action:e})})},Gk);function fz(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dR(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function mz(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ui,Kk,pz=(Kk=class extends db{constructor(e={}){super();C(this,ui);this.config=e,S(this,ui,new Map)}build(e,t,s){const r=t.queryKey,i=t.queryHash??pj(r,t);let a=this.get(i);return a||(a=new hz({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){u(this,ui).has(e.queryHash)||(u(this,ui).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=u(this,ui).get(e.queryHash);t&&(e.destroy(),t===e&&u(this,ui).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Un.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return u(this,ui).get(e)}getAll(){return[...u(this,ui).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>aC(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>aC(e,s)):t}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Un.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Un.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ui=new WeakMap,Kk),hi,In,Ec,fi,yo,Yk,gz=(Yk=class extends fR{constructor(e){super();C(this,fi);C(this,hi);C(this,In);C(this,Ec);this.mutationId=e.mutationId,S(this,In,e.mutationCache),S(this,hi,[]),this.state=e.state||vz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){u(this,hi).includes(e)||(u(this,hi).push(e),this.clearGcTimeout(),u(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){S(this,hi,u(this,hi).filter(t=>t!==e)),this.scheduleGc(),u(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){u(this,hi).length||(this.state.status==="pending"?this.scheduleGc():u(this,In).remove(this))}continue(){var e;return((e=u(this,Ec))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,l,c,d,h,f,m,p,x,g,b,v,y,_,N,j,A,E,P;const t=()=>{k(this,fi,yo).call(this,{type:"continue"})};S(this,Ec,hR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,I)=>{k(this,fi,yo).call(this,{type:"failed",failureCount:T,error:I})},onPause:()=>{k(this,fi,yo).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>u(this,In).canRun(this)}));const s=this.state.status==="pending",r=!u(this,Ec).canStart();try{if(s)t();else{k(this,fi,yo).call(this,{type:"pending",variables:e,isPaused:r}),await((a=(i=u(this,In).config).onMutate)==null?void 0:a.call(i,e,this));const I=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));I!==this.state.context&&k(this,fi,yo).call(this,{type:"pending",context:I,variables:e,isPaused:r})}const T=await u(this,Ec).start();return await((h=(d=u(this,In).config).onSuccess)==null?void 0:h.call(d,T,e,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,T,e,this.state.context)),await((x=(p=u(this,In).config).onSettled)==null?void 0:x.call(p,T,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,T,null,e,this.state.context)),k(this,fi,yo).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(v=u(this,In).config).onError)==null?void 0:y.call(v,T,e,this.state.context,this)),await((N=(_=this.options).onError)==null?void 0:N.call(_,T,e,this.state.context)),await((A=(j=u(this,In).config).onSettled)==null?void 0:A.call(j,void 0,T,this.state.variables,this.state.context,this)),await((P=(E=this.options).onSettled)==null?void 0:P.call(E,void 0,T,e,this.state.context)),T}finally{k(this,fi,yo).call(this,{type:"error",error:T})}}finally{u(this,In).runNext(this)}}},hi=new WeakMap,In=new WeakMap,Ec=new WeakMap,fi=new WeakSet,yo=function(e){const t=s=>{switch(e.type){case"failed":return{...s,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...s,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:e.error,failureCount:s.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Un.batch(()=>{u(this,hi).forEach(s=>{s.onMutationUpdate(e)}),u(this,In).notify({mutation:this,type:"updated",action:e})})},Yk);function vz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ua,Tr,Lp,Xk,xz=(Xk=class extends db{constructor(e={}){super();C(this,ua);C(this,Tr);C(this,Lp);this.config=e,S(this,ua,new Set),S(this,Tr,new Map),S(this,Lp,0)}build(e,t,s){const r=new gz({mutationCache:this,mutationId:++Xt(this,Lp)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){u(this,ua).add(e);const t=dx(e);if(typeof t=="string"){const s=u(this,Tr).get(t);s?s.push(e):u(this,Tr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(u(this,ua).delete(e)){const t=dx(e);if(typeof t=="string"){const s=u(this,Tr).get(t);if(s)if(s.length>1){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}else s[0]===e&&u(this,Tr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=dx(e);if(typeof t=="string"){const s=u(this,Tr).get(t),r=s==null?void 0:s.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var s;const t=dx(e);if(typeof t=="string"){const r=(s=u(this,Tr).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Un.batch(()=>{u(this,ua).forEach(e=>{this.notify({type:"removed",mutation:e})}),u(this,ua).clear(),u(this,Tr).clear()})}getAll(){return Array.from(u(this,ua))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>oC(t,s))}findAll(e={}){return this.getAll().filter(t=>oC(e,t))}notify(e){Un.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Un.batch(()=>Promise.all(e.map(t=>t.continue().catch(kr))))}},ua=new WeakMap,Tr=new WeakMap,Lp=new WeakMap,Xk);function dx(n){var e;return(e=n.options.scope)==null?void 0:e.id}function dC(n){return{onFetch:(e,t)=>{var h,f,m,p,x;const s=e.options,r=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=lR(e.options,e.fetchOptions),y=async(_,N,j)=>{if(g)return Promise.reject();if(N==null&&_.pages.length)return Promise.resolve(_);const E=(()=>{const M={client:e.client,queryKey:e.queryKey,pageParam:N,direction:j?"backward":"forward",meta:e.options.meta};return b(M),M})(),P=await v(E),{maxPages:T}=e.options,I=j?iz:rz;return{pages:I(_.pages,P,T),pageParams:I(_.pageParams,N,T)}};if(r&&i.length){const _=r==="backward",N=_?yz:uC,j={pages:i,pageParams:a},A=N(s,j);l=await y(j,A,_)}else{const _=n??i.length;do{const N=c===0?a[0]??s.initialPageParam:uC(s,l);if(c>0&&N==null)break;l=await y(l,N),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function uC(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function yz(n,{pages:e,pageParams:t}){var s;return e.length>0?(s=n.getPreviousPageParam)==null?void 0:s.call(n,e[0],e,t[0],t):void 0}var Nt,To,Ro,ch,dh,Mo,uh,hh,Qk,bz=(Qk=class{constructor(n={}){C(this,Nt);C(this,To);C(this,Ro);C(this,ch);C(this,dh);C(this,Mo);C(this,uh);C(this,hh);S(this,Nt,n.queryCache||new pz),S(this,To,n.mutationCache||new xz),S(this,Ro,n.defaultOptions||{}),S(this,ch,new Map),S(this,dh,new Map),S(this,Mo,0)}mount(){Xt(this,Mo)._++,u(this,Mo)===1&&(S(this,uh,cR.subscribe(async n=>{n&&(await this.resumePausedMutations(),u(this,Nt).onFocus())})),S(this,hh,Q0.subscribe(async n=>{n&&(await this.resumePausedMutations(),u(this,Nt).onOnline())})))}unmount(){var n,e;Xt(this,Mo)._--,u(this,Mo)===0&&((n=u(this,uh))==null||n.call(this),S(this,uh,void 0),(e=u(this,hh))==null||e.call(this),S(this,hh,void 0))}isFetching(n){return u(this,Nt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return u(this,To).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=u(this,Nt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=u(this,Nt).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(u_(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return u(this,Nt).findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),r=u(this,Nt).get(s.queryHash),i=r==null?void 0:r.state.data,a=J6(e,i);if(a!==void 0)return u(this,Nt).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return Un.batch(()=>u(this,Nt).findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=u(this,Nt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=u(this,Nt);Un.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=u(this,Nt);return Un.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=Un.batch(()=>u(this,Nt).findAll(n).map(r=>r.cancel(t)));return Promise.all(s).then(kr).catch(kr)}invalidateQueries(n,e={}){return Un.batch(()=>(u(this,Nt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=Un.batch(()=>u(this,Nt).findAll(n).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(kr)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(kr)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=u(this,Nt).build(this,e);return t.isStaleByTime(u_(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(kr).catch(kr)}fetchInfiniteQuery(n){return n.behavior=dC(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(kr).catch(kr)}ensureInfiniteQueryData(n){return n.behavior=dC(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Q0.isOnline()?u(this,To).resumePausedMutations():Promise.resolve()}getQueryCache(){return u(this,Nt)}getMutationCache(){return u(this,To)}getDefaultOptions(){return u(this,Ro)}setDefaultOptions(n){S(this,Ro,n)}setQueryDefaults(n,e){u(this,ch).set(jp(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...u(this,ch).values()],t={};return e.forEach(s=>{Ep(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){u(this,dh).set(jp(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...u(this,dh).values()],t={};return e.forEach(s=>{Ep(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...u(this,Ro).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=pj(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===gj&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...u(this,Ro).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){u(this,Nt).clear(),u(this,To).clear()}},Nt=new WeakMap,To=new WeakMap,Ro=new WeakMap,ch=new WeakMap,dh=new WeakMap,Mo=new WeakMap,uh=new WeakMap,hh=new WeakMap,Qk),wz=w.createContext(void 0),_z=({client:n,children:e})=>(w.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),o.jsx(wz.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ap(){return Ap=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Ap.apply(this,arguments)}var Nl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Nl||(Nl={}));const hC="popstate";function Sz(n){n===void 0&&(n={});function e(s,r){let{pathname:i,search:a,hash:l}=s.location;return f_("",{pathname:i,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(s,r){return typeof r=="string"?r:J0(r)}return jz(e,t,null,n)}function Pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Nz(){return Math.random().toString(36).substr(2,8)}function fC(n,e){return{usr:n.state,key:n.key,idx:e}}function f_(n,e,t,s){return t===void 0&&(t=null),Ap({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Vf(e):e,{state:t,key:e&&e.key||s||Nz()})}function J0(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Vf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function jz(n,e,t,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,a=r.history,l=Nl.Pop,c=null,d=h();d==null&&(d=0,a.replaceState(Ap({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=Nl.Pop;let b=h(),v=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:v})}function m(b,v){l=Nl.Push;let y=f_(g.location,b,v);d=h()+1;let _=fC(y,d),N=g.createHref(y);try{a.pushState(_,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(N)}i&&c&&c({action:l,location:g.location,delta:1})}function p(b,v){l=Nl.Replace;let y=f_(g.location,b,v);d=h();let _=fC(y,d),N=g.createHref(y);a.replaceState(_,"",N),i&&c&&c({action:l,location:g.location,delta:0})}function x(b){let v=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof b=="string"?b:J0(b);return y=y.replace(/ $/,"%20"),Pt(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return l},get location(){return n(r,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(hC,f),c=b,()=>{r.removeEventListener(hC,f),c=null}},createHref(b){return e(r,b)},createURL:x,encodeLocation(b){let v=x(b);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:p,go(b){return a.go(b)}};return g}var mC;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(mC||(mC={}));function Ez(n,e,t){return t===void 0&&(t="/"),Az(n,e,t,!1)}function Az(n,e,t,s){let r=typeof e=="string"?Vf(e):e,i=vj(r.pathname||"/",t);if(i==null)return null;let a=pR(n);Cz(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=$z(i);l=Lz(a[c],d,s)}return l}function pR(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let r=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(Pt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Ml([s,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(Pt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),pR(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Dz(d,i.index),routesMeta:h})};return n.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,a);else for(let c of gR(i.path))r(i,a,c)}),e}function gR(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let a=gR(s.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function Cz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Oz(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const kz=/^:[\w-]+$/,Pz=3,Tz=2,Rz=1,Mz=10,Iz=-2,pC=n=>n==="*";function Dz(n,e){let t=n.split("/"),s=t.length;return t.some(pC)&&(s+=Iz),e&&(s+=Tz),t.filter(r=>!pC(r)).reduce((r,i)=>r+(kz.test(i)?Pz:i===""?Rz:Mz),s)}function Oz(n,e){return n.length===e.length&&n.slice(0,-1).every((s,r)=>s===e[r])?n[n.length-1]-e[e.length-1]:0}function Lz(n,e,t){let{routesMeta:s}=n,r={},i="/",a=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=gC({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&t&&!s[s.length-1].route.index&&(f=gC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),a.push({params:r,pathname:Ml([i,f.pathname]),pathnameBase:Hz(Ml([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Ml([i,f.pathnameBase]))}return a}function gC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=Fz(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let i=r[0],a=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let g=l[f]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[f];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:n}}function Fz(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),mR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function $z(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function vj(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function zz(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:r=""}=typeof n=="string"?Vf(n):n;return{pathname:t?t.startsWith("/")?t:Bz(t,e):e,search:Wz(s),hash:Vz(r)}}function Bz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Sw(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function xj(n,e){let t=Uz(n);return e?t.map((s,r)=>r===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function yj(n,e,t,s){s===void 0&&(s=!1);let r;typeof n=="string"?r=Vf(n):(r=Ap({},n),Pt(!r.pathname||!r.pathname.includes("?"),Sw("?","pathname","search",r)),Pt(!r.pathname||!r.pathname.includes("#"),Sw("#","pathname","hash",r)),Pt(!r.search||!r.search.includes("#"),Sw("#","search","hash",r)));let i=n===""||r.pathname==="",a=i?"/":r.pathname,l;if(a==null)l=t;else{let f=e.length-1;if(!s&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=zz(r,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Ml=n=>n.join("/").replace(/\/\/+/g,"/"),Hz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Wz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Vz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const vR=["post","put","patch","delete"];new Set(vR);const Gz=["get",...vR];new Set(Gz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cp(){return Cp=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Cp.apply(this,arguments)}const bj=w.createContext(null),Kz=w.createContext(null),Yl=w.createContext(null),hb=w.createContext(null),oo=w.createContext({outlet:null,matches:[],isDataRoute:!1}),xR=w.createContext(null);function Yz(n,e){let{relative:t}=e===void 0?{}:e;qf()||Pt(!1);let{basename:s,navigator:r}=w.useContext(Yl),{hash:i,pathname:a,search:l}=wR(n,{relative:t}),c=a;return s!=="/"&&(c=a==="/"?s:Ml([s,a])),r.createHref({pathname:c,search:l,hash:i})}function qf(){return w.useContext(hb)!=null}function eu(){return qf()||Pt(!1),w.useContext(hb).location}function yR(n){w.useContext(Yl).static||w.useLayoutEffect(n)}function lo(){let{isDataRoute:n}=w.useContext(oo);return n?lB():Xz()}function Xz(){qf()||Pt(!1);let n=w.useContext(bj),{basename:e,future:t,navigator:s}=w.useContext(Yl),{matches:r}=w.useContext(oo),{pathname:i}=eu(),a=JSON.stringify(xj(r,t.v7_relativeSplatPath)),l=w.useRef(!1);return yR(()=>{l.current=!0}),w.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let f=yj(d,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ml([e,f.pathname])),(h.replace?s.replace:s.push)(f,h.state,h)},[e,s,a,i,n])}function bR(){let{matches:n}=w.useContext(oo),e=n[n.length-1];return e?e.params:{}}function wR(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=w.useContext(Yl),{matches:r}=w.useContext(oo),{pathname:i}=eu(),a=JSON.stringify(xj(r,s.v7_relativeSplatPath));return w.useMemo(()=>yj(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function Qz(n,e){return Jz(n,e)}function Jz(n,e,t,s){qf()||Pt(!1);let{navigator:r}=w.useContext(Yl),{matches:i}=w.useContext(oo),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=eu(),h;if(e){var f;let b=typeof e=="string"?Vf(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||Pt(!1),h=b}else h=d;let m=h.pathname||"/",p=m;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Ez(n,{pathname:p}),g=sB(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ml([c,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ml([c,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,t,s);return e&&g?w.createElement(hb.Provider,{value:{location:Cp({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Nl.Pop}},g):g}function Zz(){let n=oB(),e=qz(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:r},t):null,null)}const eB=w.createElement(Zz,null);class tB extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(oo.Provider,{value:this.props.routeContext},w.createElement(xR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nB(n){let{routeContext:e,match:t,children:s}=n,r=w.useContext(bj);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(oo.Provider,{value:e},s)}function sB(n,e,t,s){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=(r=t)==null?void 0:r.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Pt(!1),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,d=-1;if(t&&s&&s.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:p}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let p,x=!1,g=null,b=null;t&&(p=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||eB,c&&(d<0&&m===0?(x=!0,b=null):d===m&&(x=!0,b=f.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,m+1)),y=()=>{let _;return p?_=g:x?_=b:f.route.Component?_=w.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,w.createElement(nB,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?w.createElement(tB,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var _R=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(_R||{}),Z0=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Z0||{});function rB(n){let e=w.useContext(bj);return e||Pt(!1),e}function iB(n){let e=w.useContext(Kz);return e||Pt(!1),e}function aB(n){let e=w.useContext(oo);return e||Pt(!1),e}function SR(n){let e=aB(),t=e.matches[e.matches.length-1];return t.route.id||Pt(!1),t.route.id}function oB(){var n;let e=w.useContext(xR),t=iB(Z0.UseRouteError),s=SR(Z0.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function lB(){let{router:n}=rB(_R.UseNavigateStable),e=SR(Z0.UseNavigateStable),t=w.useRef(!1);return yR(()=>{t.current=!0}),w.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Cp({fromRouteId:e},i)))},[n,e])}function cB(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function dB(n){let{to:e,replace:t,state:s,relative:r}=n;qf()||Pt(!1);let{future:i,static:a}=w.useContext(Yl),{matches:l}=w.useContext(oo),{pathname:c}=eu(),d=lo(),h=yj(e,xj(l,i.v7_relativeSplatPath),c,r==="path"),f=JSON.stringify(h);return w.useEffect(()=>d(JSON.parse(f),{replace:t,state:s,relative:r}),[d,f,r,t,s]),null}function gs(n){Pt(!1)}function uB(n){let{basename:e="/",children:t=null,location:s,navigationType:r=Nl.Pop,navigator:i,static:a=!1,future:l}=n;qf()&&Pt(!1);let c=e.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:a,future:Cp({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof s=="string"&&(s=Vf(s));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:x="default"}=s,g=w.useMemo(()=>{let b=vj(h,c);return b==null?null:{location:{pathname:b,search:f,hash:m,state:p,key:x},navigationType:r}},[c,h,f,m,p,x,r]);return g==null?null:w.createElement(Yl.Provider,{value:d},w.createElement(hb.Provider,{children:t,value:g}))}function hB(n){let{children:e,location:t}=n;return Qz(m_(e),t)}new Promise(()=>{});function m_(n,e){e===void 0&&(e=[]);let t=[];return w.Children.forEach(n,(s,r)=>{if(!w.isValidElement(s))return;let i=[...e,r];if(s.type===w.Fragment){t.push.apply(t,m_(s.props.children,i));return}s.type!==gs&&Pt(!1),!s.props.index||!s.props.children||Pt(!1);let a={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(a.children=m_(s.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p_(){return p_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},p_.apply(this,arguments)}function fB(n,e){if(n==null)return{};var t={},s=Object.keys(n),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function mB(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function pB(n,e){return n.button===0&&(!e||e==="_self")&&!mB(n)}function g_(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(r=>[t,r]):[[t,s]])},[]))}function gB(n,e){let t=g_(n);return e&&e.forEach((s,r)=>{t.has(r)||e.getAll(r).forEach(i=>{t.append(r,i)})}),t}const vB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xB="6";try{window.__reactRouterVersion=xB}catch{}const yB="startTransition",vC=mN[yB];function bB(n){let{basename:e,children:t,future:s,window:r}=n,i=w.useRef();i.current==null&&(i.current=Sz({window:r,v5Compat:!0}));let a=i.current,[l,c]=w.useState({action:a.action,location:a.location}),{v7_startTransition:d}=s||{},h=w.useCallback(f=>{d&&vC?vC(()=>c(f)):c(f)},[c,d]);return w.useLayoutEffect(()=>a.listen(h),[a,h]),w.useEffect(()=>cB(s),[s]),w.createElement(uB,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a,future:s})}const wB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_B=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=w.forwardRef(function(e,t){let{onClick:s,relative:r,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=fB(e,vB),{basename:p}=w.useContext(Yl),x,g=!1;if(typeof d=="string"&&_B.test(d)&&(x=d,wB))try{let _=new URL(window.location.href),N=d.startsWith("//")?new URL(_.protocol+d):new URL(d),j=vj(N.pathname,p);N.origin===_.origin&&j!=null?d=j+N.search+N.hash:g=!0}catch{}let b=Yz(d,{relative:r}),v=SB(d,{replace:a,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:f});function y(_){s&&s(_),_.defaultPrevented||v(_)}return w.createElement("a",p_({},m,{href:x||b,onClick:g||i?s:y,ref:t,target:c}))});var xC;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(xC||(xC={}));var yC;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(yC||(yC={}));function SB(n,e){let{target:t,replace:s,state:r,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,c=lo(),d=eu(),h=wR(n,{relative:a});return w.useCallback(f=>{if(pB(f,t)){f.preventDefault();let m=s!==void 0?s:J0(d)===J0(h);c(n,{replace:m,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,h,s,r,t,n,i,a,l])}function NB(n){let e=w.useRef(g_(n)),t=w.useRef(!1),s=eu(),r=w.useMemo(()=>gB(s.search,t.current?null:e.current),[s.search]),i=lo(),a=w.useCallback((l,c)=>{const d=g_(typeof l=="function"?l(r):l);t.current=!0,i("?"+d,c)},[i,r]);return[r,a]}const v_=wv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-medical text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-card hover:shadow-card-hover",medical:"bg-gradient-medical text-white hover:shadow-elegant hover:scale-[1.02] shadow-card",secondary:"bg-transparent border border-primary text-primary hover:bg-secondary hover:text-secondary-foreground hover:border-secondary",outline:"border border-card-border bg-card hover:bg-muted hover:text-card-foreground",ghost:"hover:bg-muted hover:text-card-foreground",link:"text-primary hover:text-primary-hover underline-offset-4 hover:underline",success:"bg-success text-white hover:opacity-90 shadow-card",warning:"bg-warning text-white hover:opacity-90 shadow-card",error:"bg-error text-white hover:opacity-90 shadow-card"},size:{default:"h-10 px-6 py-2",sm:"h-8 rounded-md px-4 text-xs",lg:"h-12 rounded-medical px-8 text-base",xl:"h-14 rounded-medical px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=w.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const a=s?C5:"button";return o.jsx(a,{className:ne(v_({variant:e,size:t,className:n})),ref:i,...r})});q.displayName="Button";const jB="modulepreload",EB=function(n){return"/swiss-med-track/"+n},bC={},Sv=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=EB(c),c in bC)return;bC[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":jB,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},AB=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Sv(async()=>{const{default:s}=await Promise.resolve().then(()=>Gf);return{default:s}},[]).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class wj extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class CB extends wj{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wC extends wj{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _C extends wj{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var x_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(x_||(x_={}));var kB=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class PB{constructor(e,{headers:t={},customFetch:s,region:r=x_.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=AB(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return kB(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(l["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(l["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:h}).catch(g=>{throw new CB(g)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new wC(f);if(!f.ok)throw new _C(f);let p=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield f.json():p==="application/octet-stream"?x=yield f.blob():p==="text/event-stream"?x=f:p==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof _C||r instanceof wC?r.context:void 0}}})}}var as={},_j={},fb={},Nv={},mb={},pb={},TB=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tf=TB();const RB=Tf.fetch,NR=Tf.fetch.bind(Tf),jR=Tf.Headers,MB=Tf.Request,IB=Tf.Response,Gf=Object.freeze(Object.defineProperty({__proto__:null,Headers:jR,Request:MB,Response:IB,default:NR,fetch:RB},Symbol.toStringTag,{value:"Module"})),DB=XF(Gf);var gb={};Object.defineProperty(gb,"__esModule",{value:!0});let OB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};gb.default=OB;var ER=fr&&fr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pb,"__esModule",{value:!0});const LB=ER(DB),FB=ER(gb);let $B=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=LB.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c,d;let h=null,f=null,m=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const b=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");b&&v&&v.length>1&&(m=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const b=await i.text();try{h=JSON.parse(b),Array.isArray(h)&&i.status===404&&(f=[],h=null,p=200,x="OK")}catch{i.status===404&&b===""?(p=204,x="No Content"):h={message:b}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,p=200,x="OK"),h&&this.shouldThrowOnError)throw new FB.default(h)}return{error:h,data:f,count:m,status:p,statusText:x}});return this.shouldThrowOnError||(r=r.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};pb.default=$B;var zB=fr&&fr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(mb,"__esModule",{value:!0});const BB=zB(pb);let UB=class extends BB.default{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};mb.default=UB;var HB=fr&&fr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nv,"__esModule",{value:!0});const WB=HB(mb);let VB=class extends WB.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Nv.default=VB;var qB=fr&&fr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fb,"__esModule",{value:!0});const fm=qB(Nv);let GB=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new fm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new fm.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new fm.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var s;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new fm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new fm.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};fb.default=GB;var AR=fr&&fr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_j,"__esModule",{value:!0});const KB=AR(fb),YB=AR(Nv);let XB=class CR{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new KB.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new CR(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var a;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;s||r?(l=s?"HEAD":"GET",Object.entries(t).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",d=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new YB.default({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};_j.default=XB;var Kf=fr&&fr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(as,"__esModule",{value:!0});as.PostgrestError=as.PostgrestBuilder=as.PostgrestTransformBuilder=as.PostgrestFilterBuilder=as.PostgrestQueryBuilder=as.PostgrestClient=void 0;const kR=Kf(_j);as.PostgrestClient=kR.default;const PR=Kf(fb);as.PostgrestQueryBuilder=PR.default;const TR=Kf(Nv);as.PostgrestFilterBuilder=TR.default;const RR=Kf(mb);as.PostgrestTransformBuilder=RR.default;const MR=Kf(pb);as.PostgrestBuilder=MR.default;const IR=Kf(gb);as.PostgrestError=IR.default;var QB=as.default={PostgrestClient:kR.default,PostgrestQueryBuilder:PR.default,PostgrestFilterBuilder:TR.default,PostgrestTransformBuilder:RR.default,PostgrestBuilder:MR.default,PostgrestError:IR.default};const{PostgrestClient:JB,PostgrestQueryBuilder:TQ,PostgrestFilterBuilder:RQ,PostgrestTransformBuilder:MQ,PostgrestBuilder:IQ,PostgrestError:DQ}=QB;class ZB{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const e8="2.15.1",t8=`realtime-js/${e8}`,n8="1.0.0",y_=1e4,s8=1e3,r8=100;var tp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(tp||(tp={}));var Bt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Bt||(Bt={}));var Wr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Wr||(Wr={}));var b_;(function(n){n.websocket="websocket"})(b_||(b_={}));var mc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(mc||(mc={}));class i8{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=s.decode(e.slice(a,a+r));a=a+r;const c=s.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(s.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class DR{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(it||(it={}));const SC=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((i,a)=>(i[a]=a8(a,n,e,r),i),{})},a8=(n,e,t,s)=>{const r=e.find(l=>l.name===n),i=r==null?void 0:r.type,a=t[n];return i&&!s.includes(i)?OR(i,a):w_(a)},OR=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return d8(e,t)}switch(n){case it.bool:return o8(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return l8(e);case it.json:case it.jsonb:return c8(e);case it.timestamp:return u8(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return w_(e);default:return w_(e)}},w_=n=>n,o8=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},l8=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},c8=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},d8=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>OR(e,l))}return n},u8=n=>typeof n=="string"?n.replace(" ","T"):n,LR=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Nw{constructor(e,t,s={},r=y_){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var NC;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(NC||(NC={}));class np{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=np.syncState(this.state,r,i,a),this.pendingDiffs.forEach(c=>{this.state=np.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=np.syncDiff(this.state,r,i,a),l())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(i,(d,h)=>{a[d]||(c[d]=h)}),this.map(a,(d,h)=>{const f=i[d];if(f){const m=h.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),x=h.filter(b=>p.indexOf(b.presence_ref)<0),g=f.filter(b=>m.indexOf(b.presence_ref)<0);x.length>0&&(l[d]=x),g.length>0&&(c[d]=g)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){const f=e[l].map(p=>p.presence_ref),m=h.filter(p=>f.indexOf(p.presence_ref)<0);e[l].unshift(...m)}s(l,h,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jC;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(jC||(jC={}));var sp;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(sp||(sp={}));var oa;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(oa||(oa={}));class Sj{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Nw(this,Wr.join,this.params,this.timeout),this.rejoinTimer=new DR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wr.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new np(this),this.broadcastEndpointURL=LR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[sp.PRESENCE]&&this.bindings[sp.PRESENCE].length>0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(oa.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(oa.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){e==null||e(oa.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(p=x==null?void 0:x.length)!==null&&p!==void 0?p:0,b=[];for(let v=0;v<g;v++){const y=x[v],{filter:{event:_,schema:N,table:j,filter:A}}=y,E=m&&m[v];if(E&&E.event===_&&E.schema===N&&E.table===j&&E.filter===A)b.push(Object.assign(Object.assign({},y),{id:E.id}));else{this.unsubscribe(),this.state=Bt.errored,e==null||e(oa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(oa.SUBSCRIBED);return}}).receive("error",m=>{this.state=Bt.errored,e==null||e(oa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(oa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Bt.joined&&e===sp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Nw(this,Wr.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Nw(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>r8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Wr;if(s&&[l,c,d,h].indexOf(a)>=0&&s!==this._joinRef())return;let m=this._onMessage(a,t,s);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var x,g,b;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(p=>p.callback(m,s)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var x,g,b,v,y,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const N=p.id,j=(x=p.filter)===null||x===void 0?void 0:x.event;return N&&((g=t.ids)===null||g===void 0?void 0:g.includes(N))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const N=(y=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return N==="*"||N===((_=t==null?void 0:t.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:b,commit_timestamp:v,type:y,errors:_}=x;m=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:v,eventType:y,new:{},old:{},errors:_}),this._getPayloadRecords(x))}p.callback(m,s)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Sj.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wr.close,{},e)}_onError(e){this._on(Wr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=SC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=SC(e.columns,e.old_record)),t}}const EC=()=>{},ux={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},h8=[1e3,2e3,5e3,1e4],f8=1e4,m8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class p8{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=y_,this.transport=null,this.heartbeatIntervalMs=ux.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=EC,this.ref=0,this.reconnectTimer=null,this.logger=EC,this.conn=null,this.sendBuffer=[],this.serializer=new i8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...a)=>Sv(async()=>{const{default:l}=await Promise.resolve().then(()=>Gf);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${b_.websocket}`,this.httpEndpoint=LR(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZB.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:n8}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case tp.connecting:return mc.Connecting;case tp.open:return mc.Open;case tp.closing:return mc.Closing;default:return mc.Closed}}isConnected(){return this.connectionState()===mc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new Sj(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(s8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ux.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:i,ref:a}=t,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${r} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(r,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([m8],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:t8};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Wr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new DR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ux.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,a,l,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:y_,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:ux.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>h8[h-1]||f8,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Nj extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class g8 extends Nj{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class __ extends Nj{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var v8=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const FR=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Sv(async()=>{const{default:s}=await Promise.resolve().then(()=>Gf);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},x8=()=>v8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sv(()=>Promise.resolve().then(()=>Gf),void 0)).Response:Response}),S_=n=>{if(Array.isArray(n))return n.map(t=>S_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=S_(s)}),e},y8=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var tu=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const jw=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),b8=(n,e,t)=>tu(void 0,void 0,void 0,function*(){const s=yield x8();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const i=n.status||500,a=(r==null?void 0:r.statusCode)||i+"";e(new g8(jw(r),i,a))}).catch(r=>{e(new __(jw(r),r))}):e(new __(jw(n),n))}),w8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?r:(y8(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function jv(n,e,t,s,r,i){return tu(this,void 0,void 0,function*(){return new Promise((a,l)=>{n(t,w8(e,s,r,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>b8(c,l,s))})})}function ey(n,e,t,s){return tu(this,void 0,void 0,function*(){return jv(n,"GET",e,t,s)})}function di(n,e,t,s,r){return tu(this,void 0,void 0,function*(){return jv(n,"POST",e,s,r,t)})}function N_(n,e,t,s,r){return tu(this,void 0,void 0,function*(){return jv(n,"PUT",e,s,r,t)})}function _8(n,e,t,s){return tu(this,void 0,void 0,function*(){return jv(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function $R(n,e,t,s,r){return tu(this,void 0,void 0,function*(){return jv(n,"DELETE",e,s,r,t)})}var Pn=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const S8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},AC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class N8{constructor(e,t={},s,r){this.url=e,this.headers=t,this.bucketId=s,this.fetch=FR(r)}uploadOrUpdate(e,t,s,r){return Pn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},AC),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),f=yield(e=="PUT"?N_:di)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Pn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:AC.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",d.cacheControl)):(c=s,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield N_(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(qt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Pn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield di(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Nj("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(s){if(qt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Pn(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Pn(this,void 0,void 0,function*(){try{return{data:{path:(yield di(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Pn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield di(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Pn(this,void 0,void 0,function*(){try{const r=yield di(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}download(e,t){return Pn(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ey(this.fetch,`${this.url}/${r}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(qt(l))return{data:null,error:l};throw l}})}info(e){return Pn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield ey(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:S_(s),error:null}}catch(s){if(qt(s))return{data:null,error:s};throw s}})}exists(e){return Pn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield _8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(qt(s)&&s instanceof __){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${d}`)}}}remove(e){return Pn(this,void 0,void 0,function*(){try{return{data:yield $R(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Pn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},S8),t),{prefix:e||""});return{data:yield di(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}listV2(e,t){return Pn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield di(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(qt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const j8="2.11.0",E8={"X-Client-Info":`storage-js/${j8}`};var cu=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class A8{constructor(e,t={},s,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},E8),t),this.fetch=FR(s)}listBuckets(){return cu(this,void 0,void 0,function*(){try{return{data:yield ey(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(qt(e))return{data:null,error:e};throw e}})}getBucket(e){return cu(this,void 0,void 0,function*(){try{return{data:yield ey(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return cu(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(qt(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return cu(this,void 0,void 0,function*(){try{return{data:yield N_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(qt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return cu(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return cu(this,void 0,void 0,function*(){try{return{data:yield $R(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}}class C8 extends A8{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new N8(this.url,this.headers,e,this.fetch)}}const k8="2.56.0";let Sm="";typeof Deno<"u"?Sm="deno":typeof document<"u"?Sm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sm="react-native":Sm="node";const P8={"X-Client-Info":`supabase-js-${Sm}/${k8}`},T8={headers:P8},R8={schema:"public"},M8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},I8={};var D8=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};const O8=n=>{let e;return n?e=n:typeof fetch>"u"?e=NR:e=fetch,(...t)=>e(...t)},L8=()=>typeof Headers>"u"?jR:Headers,F8=(n,e,t)=>{const s=O8(t),r=L8();return(i,a)=>D8(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:n;let d=new r(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:d}))})};var $8=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};function z8(n){return n.endsWith("/")?n:n+"/"}function B8(n,e){var t,s;const{db:r,auth:i,realtime:a,global:l}=n,{db:c,auth:d,realtime:h,global:f}=e,m={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>$8(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const zR="2.71.1",xu=30*1e3,j_=3,Ew=j_*xu,U8="http://localhost:9999",H8="supabase.auth.token",W8={"X-Client-Info":`gotrue-js/${zR}`},E_="X-Supabase-Api-Version",BR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},V8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,q8=10*60*1e3;class jj extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function _e(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class G8 extends jj{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function K8(n){return _e(n)&&n.name==="AuthApiError"}class UR extends jj{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Xl extends jj{constructor(e,t,s,r){super(e,s,r),this.name=t,this.status=s}}class bo extends Xl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y8(n){return _e(n)&&n.name==="AuthSessionMissingError"}class hx extends Xl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fx extends Xl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mx extends Xl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X8(n){return _e(n)&&n.name==="AuthImplicitGrantRedirectError"}class CC extends Xl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class A_ extends Xl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Aw(n){return _e(n)&&n.name==="AuthRetryableFetchError"}class kC extends Xl{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class C_ extends Xl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ty="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),PC=` 	
\r=`.split(""),Q8=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<PC.length;e+=1)n[PC[e].charCodeAt(0)]=-2;for(let e=0;e<ty.length;e+=1)n[ty[e].charCodeAt(0)]=e;return n})();function TC(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(ty[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(ty[s]),e.queuedBits-=6}}function HR(n,e,t){const s=Q8[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function RC(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=a=>{eU(a,s,t)};for(let a=0;a<n.length;a+=1)HR(n.charCodeAt(a),r,i);return e.join("")}function J8(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Z8(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const r=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}J8(s,e)}}function eU(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if(!(n>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function tU(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};for(let r=0;r<n.length;r+=1)HR(n.charCodeAt(r),t,s);return new Uint8Array(e)}function nU(n){const e=[];return Z8(n,t=>e.push(t)),new Uint8Array(e)}function sU(n){const e=[],t={queue:0,queuedBits:0},s=r=>{e.push(r)};return n.forEach(r=>TC(r,t,s)),TC(null,t,s),e.join("")}function rU(n){return Math.round(Date.now()/1e3)+n}function iU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const jr=()=>typeof window<"u"&&typeof document<"u",ic={tested:!1,writable:!1},WR=()=>{if(!jr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ic.tested)return ic.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ic.tested=!0,ic.writable=!0}catch{ic.tested=!0,ic.writable=!1}return ic.writable};function aU(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((s,r)=>{e[r]=s}),e}const VR=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Sv(async()=>{const{default:s}=await Promise.resolve().then(()=>Gf);return{default:s}},void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},oU=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",yu=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ac=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},vo=async(n,e)=>{await n.removeItem(e)};class vb{constructor(){this.promise=new vb.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}vb.promiseConstructor=Promise;function Cw(n){const e=n.split(".");if(e.length!==3)throw new C_("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!V8.test(e[s]))throw new C_("JWT not in base64url format");return{header:JSON.parse(RC(e[0])),payload:JSON.parse(RC(e[1])),signature:tU(e[2]),raw:{header:e[0],payload:e[1]}}}async function lU(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function cU(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){s(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function dU(n){return("0"+n.toString(16)).substr(-2)}function uU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,dU).join("")}async function hU(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function fU(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await hU(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function du(n,e,t=!1){const s=uU();let r=s;t&&(r+="/PASSWORD_RECOVERY"),await yu(n,`${e}-code-verifier`,r);const i=await fU(s);return[i,s===i?"plain":"s256"]}const mU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pU(n){const e=n.headers.get(E_);if(!e||!e.match(mU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gU(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function vU(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function uu(n){if(!xU.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kw(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function MC(n){return JSON.parse(JSON.stringify(n))}var yU=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const cc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),bU=[502,503,504];async function IC(n){var e;if(!oU(n))throw new A_(cc(n),0);if(bU.includes(n.status))throw new A_(cc(n),n.status);let t;try{t=await n.json()}catch(i){throw new UR(cc(i),i)}let s;const r=pU(n);if(r&&r.getTime()>=BR["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new kC(cc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new bo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new kC(cc(t),n.status,t.weak_password.reasons);throw new G8(cc(t),n.status||500,s)}const wU=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function Me(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);i[E_]||(i[E_]=BR["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await _U(n,e,t+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function _U(n,e,t,s,r,i){const a=wU(e,s,r,i);let l;try{l=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new A_(cc(c),0)}if(l.ok||await IC(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await IC(c)}}function na(n){var e;let t=null;EU(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=rU(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function DC(n){const e=na(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ao(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function SU(n){return{data:n,error:null}}function NU(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,a=yU(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function jU(n){return n}function EU(n){return n.access_token&&n.refresh_token&&n.expires_in}const Pw=["global","local","others"];var AU=function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class CU{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=VR(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Pw[0]){if(Pw.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pw.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ao})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=AU(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:NU,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(_e(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ao})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:jU});if(h.error)throw h.error;const f=await h.json(),m=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(_e(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){uu(e);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ao})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){uu(e);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ao})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){uu(e);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ao})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){uu(e.userId);try{const{data:t,error:s}=await Me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _deleteFactor(e){uu(e.userId),uu(e.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}}}function OC(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function kU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const hu={debug:!!(globalThis&&WR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qR extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PU extends qR{}async function TU(n,e,t){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),hu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async r=>{if(r){hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw hu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new PU(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(hu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}kU();const RU={url:U8,storageKey:H8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function LC(n,e,t){return await t()}const fu={};class kp{constructor(e){var t,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kp.nextInstanceID,kp.nextInstanceID+=1,this.instanceID>0&&jr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},RU),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new CU({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=VR(r.fetch),this.lock=r.lock||LC,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:jr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=TU:this.lock=LC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:WR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=OC(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=OC(this.memoryStorage)),jr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=fu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){fu[this.storageKey]=Object.assign(Object.assign({},fu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=fu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){fu[this.storageKey]=Object.assign(Object.assign({},fu[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zR}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=aU(window.location.href);let s="none";if(this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce"),jr()&&this.detectSessionInUrl&&s!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),X8(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return _e(t)?{error:t}:{error:new UR("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,r;try{const i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:na}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,s,r;try{let i;if("email"in e){const{email:h,password:f,options:m}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await du(this.storage,this.storageKey)),i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:x},xform:na})}else if("phone"in e){const{phone:h,password:f,options:m}=e;i=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:na})}else throw new fx("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(_e(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:DC})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:DC})}else throw new fx("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new hx}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:r})}catch(t){if(_e(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,s,r,i,a,l,c,d,h,f,m,p;let x,g;if("message"in e)x=e.message,g=e.signature;else{const{chain:b,wallet:v,statement:y,options:_}=e;let N;if(jr())if(typeof v=="object")N=v;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))N=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=v}const j=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in N&&N.signIn){const A=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let E;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")E=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)E=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)x=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(r=(s=_==null?void 0:_.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((d=_==null?void 0:_.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(h=_==null?void 0:_.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const A=await N.signMessage(new TextEncoder().encode(x),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=A}}try{const{data:b,error:v}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:sU(g)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:na});if(v)throw v;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new hx}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:v})}catch(b){if(_e(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const t=await ac(this.storage,`${this.storageKey}-code-verifier`),[s,r]=(t??"").split("/");try{const{data:i,error:a}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:na});if(await vo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hx}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(_e(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:s,token:r,access_token:i,nonce:a}=e,l=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:na}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new hx}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(_e(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await du(this.storage,this.storageKey));const{error:f}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:h}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new fx("You must provide either an email or phone number.")}catch(l){if(_e(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,s;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:l}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:na});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await du(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:SU})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new bo;const{error:r}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(_e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:a}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:a,error:l}=await Me(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new fx("You must provide either an email or phone number and a type")}catch(t){if(_e(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ac(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ew:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const a=await ac(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=kw()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ao}):await this._useSession(async t=>{var s,r,i;const{data:a,error:l}=t;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bo}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Ao})})}catch(t){if(_e(t))return Y8(t)&&(await this._removeSession(),await vo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new bo;const a=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await du(this.storage,this.storageKey));const{data:d,error:h}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ao});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bo;const t=Date.now()/1e3;let s=t,r=!0,i=null;const{payload:a}=Cw(e.access_token);if(a.exp&&(s=a.exp,r=s<=t),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(_e(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new bo;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(_e(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!jr())throw new mx("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mx(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new CC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mx("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new CC("No code detected.");const{data:y,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!a||!d)throw new mx("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let m=h+f;c&&(m=parseInt(c));const p=m-h;p*1e3<=xu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=m-f;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,h);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const v={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:m,refresh_token:a,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(s){if(_e(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ac(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const a=(s=r.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(K8(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await vo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=iU(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:a}=t;if(a)throw a;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;this.flowType==="pkce"&&([s,r]=await du(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(_e(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:s,error:r}=await this._useSession(async i=>{var a,l,c,d,h;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return jr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(_e(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:a}=t;if(a)throw a;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await cU(async r=>(r>0&&await lU(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:na})),(r,i)=>{const a=200*Math.pow(2,r);return i&&Aw(i)&&Date.now()+a-s<xu})}catch(s){if(this._debug(t,"error",s),_e(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),jr()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await ac(this.storage,this.storageKey);if(r&&this.userStorage){let a=await ac(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:r.user},await yu(this.userStorage,this.storageKey+"-user",a)),r.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:kw()}else if(r&&!r.user&&!r.user){const a=await ac(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(r.user=a.user,await vo(this.storage,this.storageKey+"-user"),await yu(this.storage,this.storageKey,r)):r.user=kw()}if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ew;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Ew}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Aw(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(r.access_token);!l&&(a!=null&&a.user)?(r.user=a.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(s,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new bo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new vb;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new bo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),_e(i)){const a={session:null,error:i};return Aw(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await yu(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const i=MC(r);await yu(this.storage,this.storageKey,i)}else{const r=MC(t);await yu(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await vo(this.storage,this.storageKey),await vo(this.storage,this.storageKey+"-code-verifier"),await vo(this.storage,this.storageKey+"-user"),this.userStorage&&await vo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/xu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${xu}ms, refresh threshold is ${j_} ticks`),r<=j_&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof qR)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const r=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await du(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);r.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&r.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await Me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(_e(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await Me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(_e(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Cw(r.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const h=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(l=>l.kid===e);if(s)return s;const r=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+q8>r)return s;const{data:i,error:a}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,s=i.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};s=p.session.access_token}const{header:r,payload:i,signature:a,raw:{header:l,payload:c}}=Cw(s);t!=null&&t.allowExpired||gU(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:p}=await this.getUser(s);if(p)throw p;return{data:{claims:i,header:r,signature:a},error:null}}const h=vU(r.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,a,nU(`${l}.${c}`)))throw new C_("Invalid JWT signature");return{data:{claims:i,header:r,signature:a},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}}}kp.nextInstanceID=0;const MU=kp;class IU extends MU{constructor(e){super(e)}}var DU=function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(h){try{d(s.next(h))}catch(f){a(f)}}function c(h){try{d(s.throw(h))}catch(f){a(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((s=s.apply(n,e||[])).next())})};class OU{constructor(e,t,s){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=z8(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:R8,realtime:I8,auth:Object.assign(Object.assign({},M8),{storageKey:d}),global:T8},f=B8(s??{},h);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=F8(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new JB(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new C8(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new PB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return DU(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:a,lock:l,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new IU({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:a,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new p8(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const LU=(n,e,t)=>new OU(n,e,t);function FU(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}FU()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $U="https://azthgtmchlqhtzlgwolw.supabase.co",zU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6dGhndG1jaGxxaHR6bGd3b2x3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMjQ5ODksImV4cCI6MjA3MDkwMDk4OX0.h5Cl_qJHDWlnGArMe8pQCn0rwhYUYBcdaviIvpxryAo",te=LU($U,zU,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),GR=w.createContext({user:null,session:null,loading:!0,signOut:async()=>{},isAdmin:!1,userProfile:null}),Ql=()=>{const n=w.useContext(GR);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},BU=({children:n})=>{const[e,t]=w.useState(null),[s,r]=w.useState(null),[i,a]=w.useState(!0),[l,c]=w.useState(!1),[d,h]=w.useState(null);w.useEffect(()=>{let p=!0;const{data:{subscription:x}}=te.auth.onAuthStateChange(async(g,b)=>{var v;p&&(console.debug("[Auth] state change:",g,"user:",(v=b==null?void 0:b.user)==null?void 0:v.id),r(b),t((b==null?void 0:b.user)??null),b!=null&&b.user&&p?(console.debug("[Auth] loading user profile..."),await f(b.user.id)):p&&(h(null),c(!1)),p&&a(!1))});return te.auth.getSession().then(async({data:{session:g}})=>{var b;p&&(console.debug("[Auth] initial session:",!!g,"user:",(b=g==null?void 0:g.user)==null?void 0:b.id),r(g),t((g==null?void 0:g.user)??null),g!=null&&g.user&&p&&await f(g.user.id),p&&a(!1))}).catch(g=>{console.error("[Auth] Error getting initial session:",g),p&&a(!1)}),()=>{p=!1,x.unsubscribe()}},[]);const f=async p=>{try{const{data:x,error:g}=await te.from("profiles").select("*").eq("user_id",p).single();if(g){console.error("Error loading user profile:",g);return}h(x),c((x==null?void 0:x.role)==="admin")}catch(x){console.error("Error loading user profile:",x)}},m=async()=>{try{console.log("[Auth] Starting sign out...");const{error:p}=await te.auth.signOut();if(p)throw console.error("[Auth] Sign out error:",p),p;t(null),r(null),h(null),c(!1),console.log("[Auth] Sign out successful")}catch(p){console.error("[Auth] Error signing out:",p),t(null),r(null),h(null),c(!1)}};return o.jsx(GR.Provider,{value:{user:e,session:s,loading:i,signOut:m,isAdmin:l,userProfile:d},children:n})},Us=()=>{const{user:n,signOut:e,isAdmin:t,userProfile:s}=Ql(),r=lo(),i=async()=>{try{console.log("[Header] Starting sign out..."),await e(),console.log("[Header] Sign out completed, navigating to home..."),r("/")}catch(a){console.error("[Header] Error during sign out:",a),r("/")}};return o.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-card-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:o.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[o.jsxs(Zn,{to:"/",className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-medical overflow-hidden",children:o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/logo.png",alt:"ResidentTrack Logo",className:"w-full h-full object-contain"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-card-foreground",children:"ResidentTrack"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"FMH Medical Training"})]})]}),o.jsx("nav",{className:"hidden md:flex items-center gap-6",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Zn,{to:"/fmh",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"FMH Tracking"}),o.jsx(Zn,{to:"/dashboard",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Dashboard"}),o.jsx(Zn,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),o.jsx(Zn,{to:"/publications",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Publikationen"}),t&&o.jsxs(Zn,{to:"/admin",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors flex items-center gap-1",children:[o.jsx(ob,{className:"h-4 w-4"}),"Admin"]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Zn,{to:"/features",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Features"}),o.jsx(Zn,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),o.jsx(Zn,{to:"/contact",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Kontakt"})]})}),o.jsx("div",{className:"flex items-center gap-3",children:n?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(XT,{className:"h-4 w-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:(s==null?void 0:s.full_name)||n.email})]}),o.jsxs(q,{variant:"ghost",size:"sm",onClick:i,children:[o.jsx(T$,{className:"h-4 w-4 mr-2"}),"Abmelden"]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Zn,{to:"/auth",children:o.jsx(q,{variant:"ghost",size:"sm",className:"hidden md:inline-flex",children:"Anmelden"})}),o.jsx(Zn,{to:"/auth",children:o.jsx(q,{variant:"medical",size:"sm",children:"Kostenlos testen"})})]})})]})})},Y=w.forwardRef(({className:n,...e},t)=>o.jsx("div",{ref:t,className:ne("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));Y.displayName="Card";const Je=w.forwardRef(({className:n,...e},t)=>o.jsx("div",{ref:t,className:ne("flex flex-col space-y-1.5 p-6",n),...e}));Je.displayName="CardHeader";const st=w.forwardRef(({className:n,...e},t)=>o.jsx("h3",{ref:t,className:ne("text-2xl font-semibold leading-none tracking-tight",n),...e}));st.displayName="CardTitle";const rp=w.forwardRef(({className:n,...e},t)=>o.jsx("p",{ref:t,className:ne("text-sm text-muted-foreground",n),...e}));rp.displayName="CardDescription";const Ae=w.forwardRef(({className:n,...e},t)=>o.jsx("div",{ref:t,className:ne("p-6 pt-0",n),...e}));Ae.displayName="CardContent";const KR=w.forwardRef(({className:n,...e},t)=>o.jsx("div",{ref:t,className:ne("flex items-center p-6 pt-0",n),...e}));KR.displayName="CardFooter";const UU=wv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function oe({className:n,variant:e,...t}){return o.jsx("div",{className:ne(UU({variant:e}),n),...t})}const HU=[{icon:Ga,title:"FMH-konforme Dokumentation",description:"Vollständige Prozeduren-Tracking nach FMH-Standards"},{icon:Hf,title:"Europaweite Kurssuche",description:"Zugang zu Kursen in CH, DE, AT, FR, IT und mehr"},{icon:Qr,title:"Digitales Logbuch",description:"Automatische Portfolio-Erstellung und PDF-Export"},{icon:Hi,title:"Zertifikat-Management",description:"CME-Punkte tracking und Zertifikat-Verwaltung"}],WU=()=>o.jsxs("section",{className:"relative overflow-hidden",children:[o.jsx("div",{className:"hero-gradient",children:o.jsx("div",{className:"container mx-auto px-4 py-20",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[o.jsxs("div",{className:"text-center lg:text-left",children:[o.jsx(oe,{variant:"secondary",className:"mb-6 text-sm px-4 py-2",children:"🇨🇭 FMH-konforme Ausbildung für die Schweiz & Europa"}),o.jsxs("h1",{className:"text-medical-title text-card-foreground mb-6",children:["Ihre chirurgische Ausbildung",o.jsx("span",{className:"bg-gradient-medical bg-clip-text text-transparent",children:" digital verwalten"})]}),o.jsx("p",{className:"text-medical-subtitle mb-8 max-w-2xl mx-auto lg:mx-0",children:"ResidentTrack ist die führende Plattform für Assistenzärzt:innen zur FMH-konformen Dokumentation ihres Ausbildungsfortschritts und zur europäischen Kurssuche."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start items-center mb-12",children:[o.jsxs(q,{variant:"default",size:"lg",className:"gap-2 shadow-card-hover",children:["Als Resident starten",o.jsx(i_,{className:"w-5 h-5"})]}),o.jsxs(q,{variant:"secondary",size:"lg",className:"gap-2",children:[o.jsx(Qr,{className:"w-5 h-5"}),"Demo ansehen"]}),o.jsx(q,{variant:"outline",size:"lg",children:"Kurs anbieten"})]}),o.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start items-center gap-8 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"w-4 h-4 text-activity-mint"}),o.jsx("span",{children:"FMH optimiert"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"w-4 h-4 text-activity-mint"}),o.jsx("span",{children:"DSGVO-konform"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"w-4 h-4 text-activity-mint"}),o.jsx("span",{children:"500+ Residents"})]})]})]}),o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-50 via-white to-slate-100 rounded-3xl"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(59,130,246,0.1),transparent_50%)] rounded-3xl"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(16,185,129,0.1),transparent_50%)] rounded-3xl"}),o.jsxs("div",{className:"relative z-10 p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-full px-4 py-2 shadow-sm border border-white/20 mb-4",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Live Dashboard"})]}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"FMH Training Progress"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Chirurgische Ausbildung 2024"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-3",children:[o.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[o.jsx("path",{className:"text-slate-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),o.jsx("path",{className:"text-green-500",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"85, 100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-bold text-slate-700",children:"85%"})})]}),o.jsx("div",{className:"text-xs font-medium text-slate-700",children:"PGY-1"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Notfall"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-3",children:[o.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[o.jsx("path",{className:"text-slate-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),o.jsx("path",{className:"text-blue-500",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"60, 100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("span",{className:"text-sm font-bold text-slate-700",children:"60%"})})]}),o.jsx("div",{className:"text-xs font-medium text-slate-700",children:"PGY-2"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Allgemein"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[o.jsx("div",{className:"text-lg font-bold text-slate-800",children:"345"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Prozeduren"})]}),o.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[o.jsx("div",{className:"text-lg font-bold text-slate-800",children:"12"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Kurse"})]}),o.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[o.jsx("div",{className:"text-lg font-bold text-slate-800",children:"95%"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Fortschritt"})]}),o.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[o.jsx("div",{className:"text-lg font-bold text-slate-800",children:"2.5"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Jahre"})]})]})]}),o.jsx("div",{className:"absolute -top-2 -left-2 w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg flex items-center justify-center",children:o.jsx(Ga,{className:"w-8 h-8 text-white"})}),o.jsx("div",{className:"absolute -bottom-2 -right-2 w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg flex items-center justify-center",children:o.jsx(Hi,{className:"w-6 h-6 text-white"})})]})})]})})}),o.jsx("div",{className:"bg-background",children:o.jsx("div",{className:"container mx-auto px-4 py-16",children:o.jsxs("div",{className:"text-center mb-12",children:[o.jsx(oe,{variant:"outline",className:"mb-4",children:"Live Demo"}),o.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Fortschritt in Echtzeit verfolgen"}),o.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Erleben Sie selbst, wie ResidentTrack Ihren Ausbildungsfortschritt von PGY1 bis PGY6 visualisiert und Ihre FMH-Anforderungen überwacht."})]})})}),o.jsx("div",{className:"bg-muted/30",children:o.jsx("div",{className:"container mx-auto px-4 py-16",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:HU.map((n,e)=>o.jsxs(Y,{className:"medical-card p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-primary rounded-medical flex items-center justify-center mx-auto mb-4",children:o.jsx(n.icon,{className:"w-6 h-6 text-primary-foreground"})}),o.jsx("h3",{className:"font-semibold text-card-foreground mb-2",children:n.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]},e))})})})]}),k_=({progress:n,label:e,showPercentage:t=!0,variant:s="default",className:r})=>{const i=Math.min(Math.max(n,0),100),a=d=>d>=80?"bg-progress-complete":d>=50?"bg-progress-partial":"bg-progress-pending",c=(()=>{switch(s){case"medical":return{container:"h-3 bg-swiss-gray rounded-full overflow-hidden shadow-progress",bar:"h-full transition-progress rounded-full bg-gradient-progress"};case"compact":return{container:"h-2 bg-swiss-gray rounded-full overflow-hidden",bar:"h-full transition-progress rounded-full"};default:return{container:"h-4 bg-swiss-gray rounded-full overflow-hidden shadow-card",bar:"h-full transition-progress rounded-full"}}})();return o.jsxs("div",{className:ne("w-full",r),children:[(e||t)&&o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e&&o.jsx("span",{className:"text-sm font-medium text-card-foreground",children:e}),t&&o.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[i,"%"]})]}),o.jsx("div",{className:c.container,children:o.jsx("div",{className:ne(c.bar,a(i)),style:{width:`${i}%`}})})]})},VU=({progress:n,size:e=120,strokeWidth:t=8,label:s,showPercentage:r=!0,variant:i="default",className:a})=>{const l=Math.min(Math.max(n,0),100),c=(e-t)/2,d=c*2*Math.PI,h=d-l/100*d,f=x=>x>=80?"stroke-progress-complete":x>=50?"stroke-progress-partial":"stroke-progress-pending",p=(()=>{switch(i){case"medical":return{size:140,strokeWidth:10};case"large":return{size:160,strokeWidth:12};default:return{size:e,strokeWidth:t}}})();return o.jsxs("div",{className:ne("flex flex-col items-center",a),children:[o.jsxs("div",{className:"relative",children:[o.jsxs("svg",{width:p.size,height:p.size,className:"progress-ring",children:[o.jsx("circle",{cx:p.size/2,cy:p.size/2,r:c,stroke:"hsl(var(--swiss-gray))",strokeWidth:p.strokeWidth,fill:"transparent"}),o.jsx("circle",{cx:p.size/2,cy:p.size/2,r:c,stroke:"url(#progressGradient)",strokeWidth:p.strokeWidth,fill:"transparent",strokeDasharray:`${d} ${d}`,strokeDashoffset:h,strokeLinecap:"round",className:ne("transition-progress",f(l))}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[o.jsx("stop",{offset:"0%",style:{stopColor:"hsl(var(--progress-complete))"}}),o.jsx("stop",{offset:"100%",style:{stopColor:"hsl(var(--medical-primary))"}})]})})]}),r&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("span",{className:"text-xl font-bold text-card-foreground",children:[Math.round(l),"%"]})})]}),s&&o.jsx("span",{className:"mt-2 text-sm font-medium text-center text-muted-foreground",children:s})]})},px=[{level:1,title:"PGY1 - Foundation",procedures:45,required:60,courses:3,cmePoints:25},{level:2,title:"PGY2 - Core Skills",procedures:85,required:120,courses:5,cmePoints:40},{level:3,title:"PGY3 - Specialization",procedures:140,required:180,courses:4,cmePoints:35},{level:4,title:"PGY4 - Advanced",procedures:200,required:250,courses:6,cmePoints:50},{level:5,title:"PGY5 - Expert",procedures:180,required:200,courses:3,cmePoints:30},{level:6,title:"PGY6 - Senior",procedures:95,required:100,courses:2,cmePoints:20}],qU=()=>{var f;const[n,e]=w.useState(null),[t,s]=w.useState(0),[r,i]=w.useState(!1);w.useEffect(()=>{if(r){const m=setInterval(()=>{s(p=>p>=100?(i(!1),100):p+2)},50);return()=>clearInterval(m)}},[r]);const a=()=>{s(0),i(!0),e(null)},l=()=>{s(0),i(!1),e(null)},c=()=>{const m=px.reduce((x,g)=>x+Math.min(g.procedures,g.required),0),p=px.reduce((x,g)=>x+g.required,0);return Math.round(m/p*100)},d=m=>Math.round(m.procedures/m.required*100),h=m=>m>=90?"default":m>=70?"secondary":"outline";return o.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[o.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[o.jsxs(q,{onClick:a,variant:"default",size:"lg",className:"gap-2",disabled:r,children:[o.jsx(qT,{className:"w-4 h-4"}),r?"Demo läuft...":"Demo starten"]}),o.jsxs(q,{onClick:l,variant:"outline",size:"lg",className:"gap-2",children:[o.jsx(I$,{className:"w-4 h-4"}),"Zurücksetzen"]})]}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-2xl font-bold mb-4 text-card-foreground",children:"FMH Ausbildungsfortschritt - Gesamtübersicht"}),o.jsx("div",{className:"flex justify-center",children:o.jsx(VU,{progress:r?Math.min(t,c()):c(),variant:"large",label:"Gesamtfortschritt",className:"mb-6"})})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:px.map((m,p)=>{const x=d(m),g=r?Math.min(t*.8+p*5,x):x;return o.jsxs(Y,{className:`medical-card p-6 cursor-pointer transition-all duration-300 ${n===m.level?"ring-2 ring-primary shadow-card-hover scale-105":"hover:shadow-card"}`,onClick:()=>e(n===m.level?null:m.level),children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs(oe,{variant:h(x),className:"text-sm font-semibold",children:["PGY",m.level]}),o.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(g),"%"]})]}),o.jsx("h4",{className:"font-semibold text-card-foreground mb-3",children:m.title}),o.jsx(k_,{progress:g,variant:"medical",className:"mb-4"}),o.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Prozeduren:"}),o.jsxs("span",{className:"font-medium",children:[m.procedures,"/",m.required]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Kurse:"}),o.jsx("span",{className:"font-medium",children:m.courses})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"CME Punkte:"}),o.jsx("span",{className:"font-medium",children:m.cmePoints})]})]})]},m.level)})}),n&&o.jsx(Y,{className:"medical-card p-6 hero-gradient",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("h4",{className:"text-xl font-bold mb-4 text-card-foreground",children:[(f=px.find(m=>m.level===n))==null?void 0:f.title," - Detailansicht"]}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Hier würden detaillierte Informationen zu spezifischen Prozeduren, absolvierten Kursen und fehlenden Anforderungen angezeigt."}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx(q,{variant:"default",size:"sm",children:"Prozeduren anzeigen"}),o.jsx(q,{variant:"secondary",size:"sm",children:"Passende Kurse finden"})]})]})})]})},Nm=({courses:n,year:e})=>{const t=[...n].sort((a,l)=>new Date(a.date).getTime()-new Date(l.date).getTime()),s=a=>{switch(a){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"upcoming":return"bg-gray-300";default:return"bg-gray-300"}},r=a=>{switch(a){case"required":return"bg-red-500";case"optional":return"bg-blue-500";default:return"bg-gray-500"}},i=a=>{switch(a){case"completed":return o.jsx(oe,{variant:"default",className:"bg-green-100 text-green-800",children:"Abgeschlossen"});case"in-progress":return o.jsx(oe,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Läuft"});case"upcoming":return o.jsx(oe,{variant:"outline",children:"Geplant"});default:return o.jsx(oe,{variant:"outline",children:"Unbekannt"})}};return o.jsxs(Y,{className:"medical-card",children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(Qr,{className:"w-5 h-5"}),"Kurse ",e]})}),o.jsx(Ae,{children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-teal-200 via-teal-400 to-teal-200 rounded-full"}),o.jsx("div",{className:"space-y-8",children:t.map((a,l)=>o.jsxs("div",{className:"relative flex items-start gap-6",children:[o.jsx("div",{className:"relative z-10 flex-shrink-0",children:o.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white shadow-lg ${s(a.status)}`,children:o.jsx("div",{className:`absolute -top-1 -right-1 w-2 h-2 rounded-full ${r(a.type)}`})})}),o.jsx("div",{className:`flex-1 min-w-0 ${l%2===0?"ml-0":"mr-0"}`,children:o.jsxs("div",{className:"bg-white rounded-lg border border-card-border p-4 shadow-sm hover:shadow-md transition-shadow",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.type==="required"&&o.jsx(Pf,{className:"w-4 h-4 text-yellow-500 fill-current"}),o.jsx("h3",{className:`font-semibold text-card-foreground ${a.type==="required"?"font-bold":"font-medium"}`,children:a.title})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.category})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i(a.status),o.jsxs(oe,{variant:"secondary",className:"text-xs",children:[a.points," CME"]})]})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Vn,{className:"w-4 h-4"}),o.jsx("span",{children:new Date(a.date).toLocaleDateString("de-DE")})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Sp,{className:"w-4 h-4"}),o.jsx("span",{children:a.location})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_v,{className:"w-4 h-4"}),o.jsx("span",{children:a.duration})]})]}),a.type==="required"&&o.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-md",children:o.jsx("p",{className:"text-xs text-red-700 font-medium",children:"⭐ Pflichtkurs - Erforderlich für FMH-Zertifizierung"})})]})})]},a.id))}),o.jsx("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg border border-gray-200",children:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.filter(a=>a.status==="completed").length}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.filter(a=>a.type==="required").length}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Pflichtkurse"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.reduce((a,l)=>a+l.points,0)}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"CME Punkte"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:n.filter(a=>a.status==="upcoming").length}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Geplant"})]})]})})]})})]})},Ej=[{id:"1",title:"Advanced Laparoscopy Workshop",date:"2024-03-15",location:"Zürich",duration:"2 Tage",type:"required",status:"completed",points:8,category:"Chirurgie"},{id:"2",title:"Emergency Medicine Simulation",date:"2024-05-20",location:"Basel",duration:"1 Tag",type:"required",status:"completed",points:6,category:"Notfallmedizin"},{id:"3",title:"Digital Health Innovation",date:"2024-07-10",location:"Bern",duration:"1 Tag",type:"optional",status:"completed",points:4,category:"Digital Health"},{id:"4",title:"Trauma Surgery Masterclass",date:"2024-09-15",location:"Lausanne",duration:"3 Tage",type:"required",status:"upcoming",points:12,category:"Traumatologie"},{id:"5",title:"Medical Ethics Workshop",date:"2024-11-08",location:"Genf",duration:"1 Tag",type:"optional",status:"upcoming",points:3,category:"Ethik"},{id:"6",title:"Research Methodology",date:"2024-12-12",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:6,category:"Forschung"}],YR=[{id:"7",title:"Minimally Invasive Surgery Advanced",date:"2025-02-14",location:"Zürich",duration:"3 Tage",type:"required",status:"upcoming",points:15,category:"Chirurgie"},{id:"8",title:"Critical Care Management",date:"2025-04-18",location:"Basel",duration:"2 Tage",type:"required",status:"upcoming",points:10,category:"Intensivmedizin"},{id:"9",title:"AI in Medical Diagnosis",date:"2025-06-22",location:"Bern",duration:"1 Tag",type:"optional",status:"upcoming",points:5,category:"Digital Health"},{id:"10",title:"Pediatric Surgery Workshop",date:"2025-08-15",location:"Lausanne",duration:"2 Tage",type:"required",status:"upcoming",points:8,category:"Pädiatrie"},{id:"11",title:"Global Health Perspectives",date:"2025-10-10",location:"Genf",duration:"1 Tag",type:"optional",status:"upcoming",points:4,category:"Global Health"},{id:"12",title:"Leadership in Healthcare",date:"2025-12-05",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:7,category:"Management"}],XR=[{id:"13",title:"Robotic Surgery Certification",date:"2026-01-20",location:"Zürich",duration:"4 Tage",type:"required",status:"upcoming",points:20,category:"Chirurgie"},{id:"14",title:"Advanced Trauma Life Support",date:"2026-03-15",location:"Basel",duration:"2 Tage",type:"required",status:"upcoming",points:12,category:"Traumatologie"},{id:"15",title:"Precision Medicine Workshop",date:"2026-05-18",location:"Bern",duration:"1 Tag",type:"optional",status:"upcoming",points:6,category:"Personalized Medicine"},{id:"16",title:"Surgical Innovation Summit",date:"2026-07-22",location:"Lausanne",duration:"3 Tage",type:"optional",status:"upcoming",points:18,category:"Innovation"},{id:"17",title:"Medical Communication Skills",date:"2026-09-12",location:"Genf",duration:"1 Tag",type:"required",status:"upcoming",points:5,category:"Kommunikation"},{id:"18",title:"Healthcare Quality Management",date:"2026-11-08",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:8,category:"Qualitätsmanagement"}],Tw=[...Ej,...YR,...XR];let GU=class extends Z.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Index Error Boundary caught an error:",e,t)}render(){var e;return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Fehler beim Laden der Seite"}),o.jsx("p",{className:"text-red-600 mb-4",children:"Ein unerwarteter Fehler ist aufgetreten."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Seite neu laden"}),o.jsxs("details",{className:"mt-4 text-left",children:[o.jsx("summary",{className:"cursor-pointer text-red-700",children:"Fehlerdetails"}),o.jsx("pre",{className:"mt-2 text-xs text-red-600 bg-red-100 p-2 rounded overflow-auto",children:(e=this.state.error)==null?void 0:e.toString()})]})]})}):this.props.children}};const KU=()=>{console.log("Index: Rendering main content - NO AUTH DEPENDENCIES");try{return o.jsx(GU,{children:o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsxs("main",{children:[o.jsx(WU,{}),o.jsx(qU,{}),o.jsxs("section",{className:"py-20 bg-gradient-to-br from-slate-50 via-white to-slate-100 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_50%,rgba(59,130,246,0.05),transparent_50%)]"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_20%,rgba(16,185,129,0.05),transparent_50%)]"}),o.jsx("div",{className:"container mx-auto px-4 relative",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Community"]}),o.jsxs("h2",{className:"text-4xl font-bold text-slate-900 mb-6 leading-tight",children:["Werden Sie Teil unserer",o.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:" Resident-Community"})]}),o.jsx("p",{className:"text-xl text-slate-600 mb-8 leading-relaxed",children:"Schließen Sie sich über 500 Assistenzärzt:innen an, die bereits ihre chirurgische Ausbildung mit ResidentTrack digital verwalten und dokumentieren."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"500+"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Aktive Residents"})]})}),o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"15+"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Krankenhäuser"})]})}),o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"1000+"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Dokumentierte Prozeduren"})]})}),o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"95%"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Zufriedenheitsrate"})]})})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-4 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl",children:"Jetzt beitreten"}),o.jsx("button",{className:"border-2 border-slate-200 text-slate-700 px-8 py-4 rounded-xl font-semibold hover:border-slate-300 hover:bg-slate-50 transition-all duration-300",children:"Mehr erfahren"})]})]}),o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl",children:[o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/residents-image-2.png",alt:"Resident Community - Chirurgische Ausbildung",className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105",style:{minHeight:"500px"}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"})]}),o.jsx("div",{className:"absolute -top-6 -left-6 bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-green-600 font-bold text-sm",children:"✓"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"FMH-konform"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Zertifiziert"})]})]})}),o.jsx("div",{className:"absolute -bottom-6 -right-6 bg-white/90 backdrop-blur-sm rounded-2xl p-4 shadow-lg border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"🏥"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"15+ Kliniken"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Partner"})]})]})})]})})]})})]}),o.jsxs("section",{className:"py-20 bg-white relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_0%,rgba(59,130,246,0.03),transparent_70%)]"}),o.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-100/30 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-green-100/30 rounded-full blur-3xl"}),o.jsxs("div",{className:"container mx-auto px-4 relative",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-50 text-slate-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[o.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),"Dashboard"]}),o.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Ihr persönliches Dashboard"}),o.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Verfolgen Sie Ihren Fortschritt mit unserem intuitiven Dashboard. Alle wichtigen Metriken auf einen Blick."})]}),o.jsx("div",{className:"max-w-7xl mx-auto",children:o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl bg-white border border-slate-200/50",children:[o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/dashboard.png",alt:"ResidentTrack Dashboard - Übersicht der chirurgischen Ausbildung",className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-[1.02]"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/5 via-transparent to-transparent"})]}),o.jsx("div",{className:"absolute -top-8 -left-8 bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-xl",children:"📊"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"Live Tracking"}),o.jsx("div",{className:"text-sm text-slate-600",children:"Echtzeit-Updates"})]})]})}),o.jsx("div",{className:"absolute -bottom-8 -right-8 bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:o.jsx("span",{className:"text-green-600 text-xl",children:"🎯"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"FMH-konform"}),o.jsx("div",{className:"text-sm text-slate-600",children:"Automatische Validierung"})]})]})})]})})]})]}),o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kurs-Timeline Beispiel"}),o.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Verfolgen Sie Ihre Fortbildung mit unserer professionellen Timeline-Darstellung. Pflichtkurse werden hervorgehoben und der Fortschritt wird visuell dargestellt."})]}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsx(Nm,{courses:Ej,year:2024})})]})}),o.jsxs("section",{className:"py-20 bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_30%,rgba(251,191,36,0.1),transparent_50%)]"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_70%,rgba(249,115,22,0.1),transparent_50%)]"}),o.jsxs("div",{className:"container mx-auto px-4 relative",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[o.jsx("span",{className:"text-amber-600",children:"🏆"}),"Auszeichnungen"]}),o.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Auszeichnungen & Anerkennung"}),o.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre Erfolge und Errungenschaften in der chirurgischen Ausbildung"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Exzellenz in der Ausbildung"}),o.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre herausragenden Leistungen und Anerkennungen spiegeln Ihr Engagement für die chirurgische Ausbildung wider."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-amber-600 mb-2",children:"5+"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Auszeichnungen"})]})}),o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"100%"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Erfolgsrate"})]})})]})]}),o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl",children:[o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/awardsresidents2-image.png",alt:"Awards & Recognition - Chirurgische Ausbildung",className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105",style:{minHeight:"400px"}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-amber-900/20 via-transparent to-transparent"})]}),o.jsx("div",{className:"absolute -top-6 -left-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-amber-600 text-lg",children:"🏆"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"Exzellenz"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Anerkannt"})]})]})}),o.jsx("div",{className:"absolute -bottom-6 -right-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-orange-600 text-lg",children:"⭐"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"Top Performer"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Bewertung"})]})]})})]})})]})]})]}),o.jsxs("section",{className:"py-20 bg-gradient-to-br from-blue-50 via-cyan-50 to-indigo-50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_80%,rgba(59,130,246,0.1),transparent_50%)]"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_80%_20%,rgba(6,182,212,0.1),transparent_50%)]"}),o.jsxs("div",{className:"container mx-auto px-4 relative",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[o.jsx("span",{className:"text-blue-600",children:"📚"}),"Kurse"]}),o.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Kurs-Exzellenz"}),o.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre Teilnahme an hochwertigen Kursen und Weiterbildungen"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[o.jsx("div",{className:"relative order-2 lg:order-1",children:o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl",children:[o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/courseresidentsimage.png",alt:"Course Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105",style:{minHeight:"400px"}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-blue-900/20 via-transparent to-transparent"})]}),o.jsx("div",{className:"absolute -top-6 -left-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-blue-600 text-lg",children:"📖"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"15+ Kurse"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Abgeschlossen"})]})]})}),o.jsx("div",{className:"absolute -bottom-6 -right-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-cyan-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-cyan-600 text-lg",children:"🎓"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"120+ CME"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Punkte"})]})]})})]})}),o.jsxs("div",{className:"space-y-8 order-1 lg:order-2",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Kontinuierliche Weiterbildung"}),o.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre aktive Teilnahme an Kursen und Weiterbildungen zeigt Ihr Engagement für lebenslanges Lernen in der Chirurgie."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"15+"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Kurse"})]})}),o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-cyan-600 mb-2",children:"120+"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"CME Punkte"})]})})]})]})]})]})]}),o.jsxs("section",{className:"py-20 bg-gradient-to-br from-teal-50 via-emerald-50 to-green-50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(20,184,166,0.1),transparent_50%)]"}),o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(16,185,129,0.1),transparent_50%)]"}),o.jsxs("div",{className:"container mx-auto px-4 relative",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 bg-teal-100 text-teal-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[o.jsx("span",{className:"text-teal-600",children:"⚕️"}),"Training"]}),o.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Trainings-Exzellenz"}),o.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre praktische Ausbildung und operative Erfahrung"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Praktische Ausbildung"}),o.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre operative Erfahrung und praktische Ausbildung bilden das Fundament Ihrer chirurgischen Kompetenz."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:"500+"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Operationen"})]})}),o.jsx("div",{className:"group",children:o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-emerald-600 mb-2",children:"6"}),o.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Jahre"})]})})]})]}),o.jsx("div",{className:"relative",children:o.jsxs("div",{className:"relative group",children:[o.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl",children:[o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/trainingimage.png",alt:"Training Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105",style:{minHeight:"400px"}}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-teal-900/20 via-transparent to-transparent"})]}),o.jsx("div",{className:"absolute -top-6 -left-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-teal-600 text-lg",children:"⚕️"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"500+ OPs"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Erfahrung"})]})]})}),o.jsx("div",{className:"absolute -bottom-6 -right-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-emerald-600 text-lg",children:"🎯"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-800",children:"6 Jahre"}),o.jsx("div",{className:"text-xs text-slate-600",children:"Ausbildung"})]})]})})]})})]})]})]})]})]})})}catch(n){return console.error("Index render error:",n),o.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Render-Fehler"}),o.jsx("p",{className:"text-red-600",children:String(n)})]})})}},Ev=({progress:n,size:e=80,strokeWidth:t=6,color:s,backgroundColor:r="hsl(var(--swiss-gray))",label:i,showPercentage:a=!1,className:l,onClick:c,variant:d="mint"})=>{const h=Math.min(Math.max(n,0),100),f=(e-t)/2,m=f*2*Math.PI,p=m-h/100*m,x=()=>{if(s)return s;switch(d){case"mint":return"hsl(var(--activity-mint))";case"coral":return"hsl(var(--activity-coral))";case"lavender":return"hsl(var(--activity-lavender))";case"amber":return"hsl(var(--activity-amber))";default:return"hsl(var(--activity-mint))"}};return o.jsxs("div",{className:ne("flex flex-col items-center cursor-pointer transition-transform hover:scale-105",l),onClick:c,children:[o.jsxs("div",{className:"relative",children:[o.jsxs("svg",{width:e,height:e,className:"progress-ring -rotate-90",children:[o.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:r,strokeWidth:t,fill:"transparent",opacity:.2}),o.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:x(),strokeWidth:t,fill:"transparent",strokeDasharray:`${m} ${m}`,strokeDashoffset:p,strokeLinecap:"round",className:"transition-all duration-1000 ease-out",style:{transformOrigin:"center"}})]}),a&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("span",{className:"text-sm font-bold text-card-foreground",children:[Math.round(h),"%"]})})]}),i&&o.jsx("span",{className:"mt-1 text-xs font-medium text-center text-muted-foreground max-w-20",children:i})]})};var YU=mN[" useId ".trim().toString()]||(()=>{}),XU=0;function qn(n){const[e,t]=w.useState(YU());return Tt(()=>{n||t(s=>s??String(XU++))},[n]),n||(e?`radix-${e}`:"")}var QU=w.createContext(void 0);function xb(n){const e=w.useContext(QU);return n||e||"ltr"}var Rw="rovingFocusGroup.onEntryFocus",JU={bubbles:!1,cancelable:!0},Av="RovingFocusGroup",[P_,QR,ZU]=aj(Av),[eH,JR]=si(Av,[ZU]),[tH,nH]=eH(Av),ZR=w.forwardRef((n,e)=>o.jsx(P_.Provider,{scope:n.__scopeRovingFocusGroup,children:o.jsx(P_.Slot,{scope:n.__scopeRovingFocusGroup,children:o.jsx(sH,{...n,ref:e})})}));ZR.displayName=Av;var sH=w.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:r=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=n,m=w.useRef(null),p=Ve(e,m),x=xb(i),[g,b]=Bd({prop:a,defaultProp:l??null,onChange:c,caller:Av}),[v,y]=w.useState(!1),_=Lt(d),N=QR(t),j=w.useRef(!1),[A,E]=w.useState(0);return w.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(Rw,_),()=>P.removeEventListener(Rw,_)},[_]),o.jsx(tH,{scope:t,orientation:s,dir:x,loop:r,currentTabStopId:g,onItemFocus:w.useCallback(P=>b(P),[b]),onItemShiftTab:w.useCallback(()=>y(!0),[]),onFocusableItemAdd:w.useCallback(()=>E(P=>P+1),[]),onFocusableItemRemove:w.useCallback(()=>E(P=>P-1),[]),children:o.jsx(le.div,{tabIndex:v||A===0?-1:0,"data-orientation":s,...f,ref:p,style:{outline:"none",...n.style},onMouseDown:fe(n.onMouseDown,()=>{j.current=!0}),onFocus:fe(n.onFocus,P=>{const T=!j.current;if(P.target===P.currentTarget&&T&&!v){const I=new CustomEvent(Rw,JU);if(P.currentTarget.dispatchEvent(I),!I.defaultPrevented){const M=N().filter(F=>F.focusable),L=M.find(F=>F.active),z=M.find(F=>F.id===g),W=[L,z,...M].filter(Boolean).map(F=>F.ref.current);nM(W,h)}}j.current=!1}),onBlur:fe(n.onBlur,()=>y(!1))})})}),eM="RovingFocusGroupItem",tM=w.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:r=!1,tabStopId:i,children:a,...l}=n,c=qn(),d=i||c,h=nH(eM,t),f=h.currentTabStopId===d,m=QR(t),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:g}=h;return w.useEffect(()=>{if(s)return p(),()=>x()},[s,p,x]),o.jsx(P_.ItemSlot,{scope:t,id:d,focusable:s,active:r,children:o.jsx(le.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:fe(n.onMouseDown,b=>{s?h.onItemFocus(d):b.preventDefault()}),onFocus:fe(n.onFocus,()=>h.onItemFocus(d)),onKeyDown:fe(n.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=aH(b,h.orientation,h.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let _=m().filter(N=>N.focusable).map(N=>N.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const N=_.indexOf(b.currentTarget);_=h.loop?oH(_,N+1):_.slice(N+1)}setTimeout(()=>nM(_))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:g!=null}):a})})});tM.displayName=eM;var rH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iH(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function aH(n,e,t){const s=iH(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return rH[s]}function nM(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function oH(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var lH=ZR,cH=tM,yb="Tabs",[dH,LQ]=si(yb,[JR]),sM=JR(),[uH,Aj]=dH(yb),rM=w.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,onValueChange:r,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...d}=n,h=xb(l),[f,m]=Bd({prop:s,onChange:r,defaultProp:i??"",caller:yb});return o.jsx(uH,{scope:t,baseId:qn(),value:f,onValueChange:m,orientation:a,dir:h,activationMode:c,children:o.jsx(le.div,{dir:h,"data-orientation":a,...d,ref:e})})});rM.displayName=yb;var iM="TabsList",aM=w.forwardRef((n,e)=>{const{__scopeTabs:t,loop:s=!0,...r}=n,i=Aj(iM,t),a=sM(t);return o.jsx(lH,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:s,children:o.jsx(le.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});aM.displayName=iM;var oM="TabsTrigger",lM=w.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,disabled:r=!1,...i}=n,a=Aj(oM,t),l=sM(t),c=uM(a.baseId,s),d=hM(a.baseId,s),h=s===a.value;return o.jsx(cH,{asChild:!0,...l,focusable:!r,active:h,children:o.jsx(le.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:e,onMouseDown:fe(n.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?a.onValueChange(s):f.preventDefault()}),onKeyDown:fe(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(s)}),onFocus:fe(n.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!r&&f&&a.onValueChange(s)})})})});lM.displayName=oM;var cM="TabsContent",dM=w.forwardRef((n,e)=>{const{__scopeTabs:t,value:s,forceMount:r,children:i,...a}=n,l=Aj(cM,t),c=uM(l.baseId,s),d=hM(l.baseId,s),h=s===l.value,f=w.useRef(h);return w.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),o.jsx(xr,{present:r||h,children:({present:m})=>o.jsx(le.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});dM.displayName=cM;function uM(n,e){return`${n}-trigger-${e}`}function hM(n,e){return`${n}-content-${e}`}var hH=rM,fM=aM,mM=lM,pM=dM;const gr=hH,qs=w.forwardRef(({className:n,...e},t)=>o.jsx(fM,{ref:t,className:ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));qs.displayName=fM.displayName;const He=w.forwardRef(({className:n,...e},t)=>o.jsx(mM,{ref:t,className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));He.displayName=mM.displayName;const Ge=w.forwardRef(({className:n,...e},t)=>o.jsx(pM,{ref:t,className:ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));Ge.displayName=pM.displayName;const Mw=[{id:1,title:"OCT angiography: measurement of retinal macular microvasculature with spectralis II OCT angiography–reliability and reproducibility",authors:"S Hosari, B Hohberger, L Theelke, H Sari, M Lucio, CY Mardin",journal:"Ophthalmologica",year:2020,citations:67,doi:"10.1159/000502473",type:"research",impact:"high",category:"Ophthalmology"},{id:2,title:"Dynamics of retinal vessel loss after acute optic neuritis in patients with relapsing multiple sclerosis",authors:"L Aly, C Noll, R Wicklein, E Wolf, EF Romahn, J Wauschkuhn, S Hosari, ...",journal:"Neurology: Neuroimmunology & Neuroinflammation",year:2022,citations:27,doi:"10.1212/NXI.0000000000001159",type:"research",impact:"high",category:"Neurology"},{id:3,title:"OCT-angiography: Regional reduced macula microcirculation in ocular hypertensive and pre-perimetric glaucoma patients",authors:"B Hohberger, M Lucio, S Schlick, A Wollborn, S Hosari, C Mardin",journal:"PLoS One",year:2021,citations:24,doi:"10.1371/journal.pone.0246469",type:"research",impact:"medium",category:"Ophthalmology"},{id:4,title:"OCT-Angiography: Mydriatic phenylephrine and tropicamide do not influence retinal microvasculature in macula and peripapillary region",authors:"B Hohberger, M Müller, S Hosari, CY Mardin",journal:"PLoS One",year:2019,citations:23,doi:"10.1371/journal.pone.0221395",type:"research",impact:"medium",category:"Ophthalmology"},{id:5,title:"Autoantibodies activating the β2-adrenergic receptor characterize patients with primary and secondary glaucoma",authors:"B Hohberger, R Kunze, G Wallukat, K Kara, CY Mardin, R Lämmer, ...",journal:"Frontiers in Immunology",year:2019,citations:18,doi:"10.3389/fimmu.2019.02112",type:"research",impact:"high",category:"Immunology"},{id:6,title:"Faecal incontinence in the era of sacral neuromodulation",authors:"S Hosari, M Ramser, M Turina",journal:"Swiss Medical Weekly",year:2025,citations:0,doi:"10.4414/smw.2025.04298",type:"research",impact:"medium",category:"Surgery"}],fH=[{id:1,title:"AI-Driven OCT Analysis for Early Glaucoma Detection",status:"active",progress:75,startDate:"2024-01",expectedCompletion:"2025-06",milestones:[{id:1,title:"Data Collection Phase",completed:!0,date:"2024-03"},{id:2,title:"Algorithm Development",completed:!0,date:"2024-08"},{id:3,title:"Validation Studies",completed:!1,date:"2024-12"},{id:4,title:"Clinical Trial Setup",completed:!1,date:"2025-03"},{id:5,title:"Publication & Patent",completed:!1,date:"2025-06"}],collaborators:["Dr. B. Hohberger","Prof. CY Mardin","AI Research Team"],funding:"Swiss National Science Foundation"},{id:2,title:"Surgical Training Simulation Platform",status:"active",progress:45,startDate:"2024-06",expectedCompletion:"2025-12",milestones:[{id:1,title:"Platform Architecture",completed:!0,date:"2024-08"},{id:2,title:"VR Integration",completed:!1,date:"2024-11"},{id:3,title:"FMH Module Integration",completed:!1,date:"2025-02"},{id:4,title:"Beta Testing",completed:!1,date:"2025-08"},{id:5,title:"Commercial Launch",completed:!1,date:"2025-12"}],collaborators:["Surgical Education Team","VR Development Team"],funding:"University Hospital Zurich"},{id:3,title:"Multi-Center Glaucoma Registry Study",status:"planning",progress:20,startDate:"2025-01",expectedCompletion:"2026-12",milestones:[{id:1,title:"Ethics Approval",completed:!1,date:"2025-02"},{id:2,title:"Center Recruitment",completed:!1,date:"2025-04"},{id:3,title:"Data Collection Start",completed:!1,date:"2025-06"},{id:4,title:"Interim Analysis",completed:!1,date:"2026-06"},{id:5,title:"Final Publication",completed:!1,date:"2026-12"}],collaborators:["European Glaucoma Centers","Statistical Team"],funding:"European Research Council"}],gM=()=>{const[n,e]=w.useState("publications"),t=l=>{switch(l){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},s=l=>{switch(l){case"active":return"bg-green-100 text-green-800 border-green-200";case"planning":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},r=Mw.reduce((l,c)=>l+c.citations,0);return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsxs(Y,{className:"p-6 text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:Mw.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Publikationen"})]}),o.jsxs(Y,{className:"p-6 text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:r}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Zitationen"})]}),o.jsxs(Y,{className:"p-6 text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"h-Index"})]}),o.jsxs(Y,{className:"p-6 text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"i10-Index"})]})]}),o.jsxs(gr,{value:n,onValueChange:e,className:"w-full",children:[o.jsxs(qs,{className:"grid w-full grid-cols-2",children:[o.jsxs(He,{value:"publications",className:"flex items-center gap-2",children:[o.jsx(to,{className:"w-4 h-4"}),"Publikationen"]}),o.jsxs(He,{value:"projects",className:"flex items-center gap-2",children:[o.jsx(KT,{className:"w-4 h-4"}),"Laufende Projekte"]})]}),o.jsx(Ge,{value:"publications",className:"mt-6",children:o.jsx("div",{className:"space-y-6",children:Mw.map(l=>o.jsx(Y,{className:"p-6 hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"flex items-start gap-3 mb-3",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold text-card-foreground mb-2 leading-tight",children:l.title}),o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:l.authors}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(to,{className:"w-3 h-3"}),l.journal]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Vn,{className:"w-3 h-3"}),l.year]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(R$,{className:"w-3 h-3"}),l.citations," Zitationen"]})]})]})}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsx(oe,{variant:"outline",className:t(l.impact),children:l.impact==="high"?"Hohe Relevanz":"Mittlere Relevanz"}),o.jsx(oe,{variant:"outline",children:l.category}),o.jsx(oe,{variant:"outline",children:l.type==="research"?"Forschung":"Review"})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs(q,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(a_,{className:"w-3 h-3"}),"DOI"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[o.jsx(uj,{className:"w-3 h-3"}),"PDF"]})]})]})},l.id))})}),o.jsx(Ge,{value:"projects",className:"mt-6",children:o.jsx("div",{className:"space-y-8",children:fH.map(l=>o.jsxs(Y,{className:"p-6",children:[o.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start gap-6",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-2",children:l.title}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Vn,{className:"w-3 h-3"}),l.startDate," - ",l.expectedCompletion]}),o.jsx(oe,{className:s(l.status),children:l.status==="active"?"Aktiv":"Planung"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-2xl font-bold text-primary",children:[l.progress,"%"]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Fortschritt"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(lb,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:"Fortschritt"})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${l.progress}%`}})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[o.jsx(Hf,{className:"w-4 h-4"}),"Kollaboratoren"]}),o.jsx("div",{className:"space-y-1",children:l.collaborators.map((c,d)=>o.jsx("div",{className:"text-sm text-muted-foreground",children:c},d))})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[o.jsx(Hi,{className:"w-4 h-4"}),"Finanzierung"]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:l.funding})]})]})]})}),o.jsxs("div",{className:"border-t pt-6",children:[o.jsxs("h4",{className:"font-medium text-card-foreground mb-4 flex items-center gap-2",children:[o.jsx(_v,{className:"w-4 h-4"}),"Meilensteine"]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),o.jsx("div",{className:"space-y-4",children:l.milestones.map((c,d)=>o.jsxs("div",{className:"relative flex items-start gap-4",children:[o.jsx("div",{className:`relative z-10 flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center ${c.completed?"bg-green-500 border-green-500 text-white":"bg-white border-gray-300 text-gray-400"}`,children:c.completed?o.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):o.jsx("span",{className:"text-xs font-medium",children:d+1})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h5",{className:`font-medium ${c.completed?"text-green-700":"text-card-foreground"}`,children:c.title}),o.jsx("span",{className:"text-sm text-muted-foreground",children:c.date})]})})]},c.id))})]})]})]},l.id))})})]})]})},mH=({activityId:n,data:e,onClose:t})=>{const r=(y=>{const _={courses:{title:"Kurse & Fortbildungen",icon:Qr,variant:"coral",color:"hsl(var(--activity-coral))"},mandatory:{title:"Examen & Prüfungen",icon:Hi,variant:"lavender",color:"hsl(var(--activity-lavender))"},procedures:{title:"OP-Prozeduren",icon:Ol,variant:"mint",color:"hsl(var(--activity-mint))"},publications:{title:"Publikationen",icon:to,variant:"lavender",color:"hsl(var(--activity-lavender))"},awards:{title:"Awards & Auszeichnungen",icon:Hi,variant:"amber",color:"hsl(var(--activity-amber))"}};return _[y]||_.courses})(n),i=r.icon,a=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["2021","2022","2023","2024"].map((y,_)=>o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsx("span",{className:"font-medium",children:y}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(k_,{progress:Math.min((_+1)*25,100),variant:"compact",className:"w-24"}),o.jsxs(oe,{variant:"outline",children:[(_+1)*7," Kurse"]})]})]},y))})]})]}),l=[{id:"basisexamen",title:"Basisexamen",description:"Grundlagenprüfung für Medizinstudierende",status:"completed",date:"2020-03-15",score:"85%",type:"required"},{id:"facharztpruefung",title:"Facharztprüfung Chirurgie",description:"Abschlussprüfung für Facharzt Chirurgie",status:"pending",date:"2025-06-20",score:null,type:"required"},{id:"usmle_step1",title:"USMLE Step 1",description:"United States Medical Licensing Examination Step 1",status:"completed",date:"2021-08-10",score:"245",type:"optional"},{id:"usmle_step2",title:"USMLE Step 2 CK",description:"Clinical Knowledge Examination",status:"completed",date:"2022-05-15",score:"258",type:"optional"},{id:"usmle_step3",title:"USMLE Step 3",description:"Final Step of USMLE",status:"pending",date:"2025-03-10",score:null,type:"optional"},{id:"plab",title:"PLAB Test",description:"Professional and Linguistic Assessments Board",status:"not_taken",date:null,score:null,type:"optional"}],c=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"3"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Ausstehend"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Nicht geplant"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-card-foreground",children:"Examen & Prüfungen"}),o.jsx("div",{className:"space-y-4",children:l.map((y,_)=>o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-primary to-secondary"}),o.jsxs("div",{children:[o.jsxs("h5",{className:"font-semibold text-card-foreground flex items-center gap-2",children:[y.title,y.type==="required"&&o.jsx("span",{className:"text-red-500",children:"⭐"})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:y.description}),y.date&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y.status==="completed"?"Abgeschlossen":"Geplant",": ",new Date(y.date).toLocaleDateString("de-DE")]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[y.score&&o.jsx(oe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:y.score}),o.jsx(oe,{variant:y.status==="completed"?"default":y.status==="pending"?"secondary":"outline",className:y.status==="completed"?"bg-green-100 text-green-800":y.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600",children:y.status==="completed"?"Abgeschlossen":y.status==="pending"?"Ausstehend":"Nicht geplant"})]})]})},y.id))})]})]}),d=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Durchgeführt"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"FMH-Ziel"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[Math.round(e.completed/e.target*100),"%"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Fortschritt"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),o.jsx("div",{className:"space-y-3",children:Object.entries(e.byYear||{}).map(([y,_])=>o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsx("span",{className:"font-medium",children:y}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(k_,{progress:Math.min(_/200*100,100),variant:"compact",className:"w-32"}),o.jsxs(oe,{variant:"outline",children:[String(_)," Prozeduren"]})]})]},y))})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-card-foreground",children:"Häufigste Prozeduren"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Laparoskopische Cholezystektomie",count:45},{name:"Appendektomie",count:38},{name:"Hernienreparatur",count:32},{name:"Endoskopie",count:28}].map(y=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-medical",children:[o.jsx("span",{className:"text-sm font-medium",children:y.name}),o.jsxs(oe,{variant:"secondary",children:[y.count,"x"]})]},y.name))})]})]}),h=()=>o.jsx(gM,{}),f=()=>o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Auszeichnungen"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"National"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"International"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Auszeichnungen"}),o.jsx("div",{className:"space-y-3",children:e.items.map((y,_)=>o.jsx("div",{className:"p-4 border border-card-border rounded-medical",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:y.icon}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h5",{className:"font-medium text-card-foreground",children:y.title}),o.jsx("p",{className:"text-sm text-muted-foreground",children:y.organization})]}),o.jsx(oe,{variant:"outline",children:y.date})]})},_))})]})]}),m=()=>!Tw||Tw.length===0?o.jsx("div",{className:"space-y-6",children:o.jsx("div",{className:"text-center py-8",children:o.jsx("p",{className:"text-muted-foreground",children:"Keine Kurse verfügbar"})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-semibold text-card-foreground",children:"Kurs-Timeline (2024-2026)"}),o.jsxs(gr,{defaultValue:"all",className:"w-full",children:[o.jsxs(qs,{className:"grid w-full grid-cols-4",children:[o.jsx(He,{value:"all",children:"Alle Jahre"}),o.jsx(He,{value:"2024",children:"2024"}),o.jsx(He,{value:"2025",children:"2025"}),o.jsx(He,{value:"2026",children:"2026"})]}),o.jsx(Ge,{value:"all",className:"mt-4",children:o.jsx(Nm,{courses:Tw,year:2024})}),o.jsx(Ge,{value:"2024",className:"mt-4",children:o.jsx(Nm,{courses:Ej,year:2024})}),o.jsx(Ge,{value:"2025",className:"mt-4",children:o.jsx(Nm,{courses:YR,year:2025})}),o.jsx(Ge,{value:"2026",className:"mt-4",children:o.jsx(Nm,{courses:XR,year:2026})})]})]})]}),p=()=>{switch(n){case"courses":return m();case"mandatory":return c();case"procedures":return d();case"publications":return h();case"awards":return f();default:return a()}},x=typeof(e==null?void 0:e.completed)=="number"?e.completed:0,g=typeof(e==null?void 0:e.target)=="number"&&e.target>0?e.target:1,b=typeof(e==null?void 0:e.count)=="number"?e.count:0,v=n==="procedures"||n==="courses"||n==="mandatory"?x/g*100:Math.min(b/5*100,100);return o.jsxs(Y,{className:"medical-card p-6 mb-8 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 rounded-medical",style:{backgroundColor:`${r.color}20`},children:o.jsx(i,{className:"w-6 h-6",style:{color:r.color}})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-card-foreground",children:r.title}),o.jsx("p",{className:"text-muted-foreground",children:"Detailierte Ansicht und Jahresverlauf"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Ev,{progress:v,variant:r.variant,size:80,strokeWidth:6,showPercentage:!0}),o.jsx(q,{variant:"ghost",size:"sm",onClick:t,children:o.jsx(ao,{className:"w-4 h-4"})})]})]}),o.jsxs(gr,{defaultValue:"overview",className:"w-full",children:[o.jsxs(qs,{className:"grid w-full grid-cols-3",children:[o.jsx(He,{value:"overview",children:"Übersicht"}),o.jsx(He,{value:"yearly",children:"Jahresverlauf"}),o.jsx(He,{value:"trends",children:"Trends"})]}),o.jsx(Ge,{value:"overview",className:"mt-6",children:p()}),o.jsx(Ge,{value:"yearly",className:"mt-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(Vn,{className:"w-4 h-4"}),o.jsx("span",{children:"Fortschrittsverlauf nach Jahren"})]}),p()]})}),o.jsx(Ge,{value:"trends",className:"mt-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[o.jsx(lb,{className:"w-4 h-4"}),o.jsx("span",{children:"Analyse und Prognosen"})]}),o.jsxs(Y,{className:"p-6",children:[o.jsx("h4",{className:"font-semibold text-card-foreground mb-4",children:"Trend-Analyse"}),o.jsx("p",{className:"text-muted-foreground",children:"Basierend auf Ihrem aktuellen Fortschritt werden Sie Ihr FMH-Ziel voraussichtlich in 18 Monaten erreichen. Ihr Lernfortschritt ist konstant und liegt über dem Durchschnitt."})]})]})})]})]})},Tn={courses:{completed:28,target:35,points:142},mandatoryCourses:{completed:8,target:12,points:64},procedures:{completed:485,target:600,byYear:{2021:45,2022:120,2023:180,2024:140}},publications:{count:6,articles:[{title:"Minimally Invasive Cardiac Surgery",journal:"Heart Surgery Today",date:"2024-03-15"},{title:"Patient Outcomes in Emergency Medicine",journal:"Emergency Care Journal",date:"2023-11-20"}]},awards:{count:3,items:[{title:"Young Surgeon Award",organization:"Swiss Medical Society",date:"2024-01-15",icon:"🏆"},{title:"Research Excellence",organization:"University Hospital",date:"2023-09-10",icon:"🎖️"}]}},pH=()=>{var a;const[n,e]=w.useState(null),[t,s]=w.useState(0);w.useEffect(()=>{const l=setTimeout(()=>{s(100)},300);return()=>clearTimeout(l)},[]);const i=[{id:"courses",label:"Kurse",progress:Tn.courses.completed/Tn.courses.target*100,variant:"coral",icon:Qr,data:Tn.courses},{id:"mandatory",label:"Examen & Prüfungen",progress:Tn.mandatoryCourses.completed/Tn.mandatoryCourses.target*100,variant:"lavender",icon:VT,data:Tn.mandatoryCourses},{id:"procedures",label:"Prozeduren",progress:Tn.procedures.completed/Tn.procedures.target*100,variant:"mint",icon:Ol,data:Tn.procedures},{id:"publications",label:"Publikationen",progress:Math.min(Tn.publications.count/5*100,100),variant:"lavender",icon:to,data:Tn.publications},{id:"awards",label:"Awards",progress:Math.min(Tn.awards.count/3*100,100),variant:"amber",icon:eC,data:Tn.awards}];return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsxs("main",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Ihr Ausbildungsdashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihren FMH-konformen Fortschritt in Echtzeit"})]}),o.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[o.jsx(hj,{className:"w-4 h-4"}),"Profil teilen"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[o.jsx(Vn,{className:"w-4 h-4"}),"Kurse suchen"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[o.jsx(ob,{className:"w-4 h-4"}),"Einstellungen"]})]})]}),o.jsxs(Y,{className:"medical-card p-8 mb-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-4",children:"Ihr Aktivitätsfortschritt"}),o.jsx("p",{className:"text-muted-foreground",children:"Apple Activity-inspirierte Darstellung Ihrer medizinischen Ausbildung"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:i.map(l=>{const c=t>0?Math.min(t*(l.progress/100),l.progress):l.progress;return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Ev,{progress:c,variant:l.variant,size:120,strokeWidth:8,label:l.label,showPercentage:!0,onClick:()=>e(l.id),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),o.jsx("div",{className:"text-center",children:o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[o.jsx(l.icon,{className:"w-4 h-4 text-muted-foreground"}),o.jsx(oe,{variant:"outline",className:"text-xs",children:l.id==="procedures"?`${l.data.completed}/${l.data.target}`:l.id==="courses"||l.id==="mandatory"?`${l.data.completed}/${l.data.target}`:`${l.data.count||l.data.completed||0}`})]})})]},l.id)})})]}),n&&o.jsx(mH,{activityId:n,data:(a=i.find(l=>l.id===n))==null?void 0:a.data,onClose:()=>e(null)}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx(Y,{className:"medical-card p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:o.jsx(Ol,{className:"w-6 h-6 text-activity-mint"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktuelle PGY"}),o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"PGY-4"})]})]})}),o.jsx(Y,{className:"medical-card p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:o.jsx(Qr,{className:"w-6 h-6 text-activity-coral"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte gesamt"}),o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"206"})]})]})}),o.jsx(Y,{className:"medical-card p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:o.jsx(eC,{className:"w-6 h-6 text-activity-amber"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Bis FMH-Ziel"}),o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"24 Mon."})]})]})})]}),o.jsxs(Y,{className:"medical-card p-6",children:[o.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Letzte Aktivitäten"}),o.jsxs(gr,{defaultValue:"procedures",className:"w-full",children:[o.jsxs(qs,{className:"grid w-full grid-cols-4",children:[o.jsx(He,{value:"procedures",children:"Prozeduren"}),o.jsx(He,{value:"courses",children:"Kurse"}),o.jsx(He,{value:"publications",children:"Publikationen"}),o.jsx(He,{value:"awards",children:"Awards"})]}),o.jsx(Ge,{value:"procedures",className:"mt-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-card-foreground",children:"Laparoskopische Cholezystektomie"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"15. Januar 2024"})]}),o.jsx(oe,{variant:"default",children:"Chirurgie"})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-card-foreground",children:"Appendektomie"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"12. Januar 2024"})]}),o.jsx(oe,{variant:"default",children:"Chirurgie"})]})]})}),o.jsx(Ge,{value:"courses",className:"mt-6",children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-card-foreground",children:"Advanced Laparoscopy Workshop"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"8 CME Punkte • Zürich"})]}),o.jsx(oe,{variant:"secondary",children:"Abgeschlossen"})]})})}),o.jsx(Ge,{value:"publications",className:"mt-6",children:o.jsx("div",{className:"space-y-4",children:Tn.publications.articles.map((l,c)=>o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-card-foreground",children:l.title}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.journal," • ",l.date]})]}),o.jsx(oe,{variant:"outline",children:"Artikel"})]},c))})}),o.jsx(Ge,{value:"awards",className:"mt-6",children:o.jsx("div",{className:"space-y-4",children:Tn.awards.items.map((l,c)=>o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:l.icon}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-card-foreground",children:l.title}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.organization," • ",l.date]})]})]}),o.jsx(oe,{variant:"default",children:"Auszeichnung"})]},c))})})]})]})]})]})},gH=({profile:n,activityData:e,className:t})=>{const[s,r]=w.useState(null),i=()=>{const c=[];return n.public_fields.courses&&(c.push({id:"courses",label:"Kurse",progress:e.courses.total>0?e.courses.completed/e.courses.total*100:0,variant:"coral",icon:Qr}),c.push({id:"mandatory",label:"Pflicht",progress:e.courses.mandatory_total>0?e.courses.mandatory_completed/e.courses.mandatory_total*100:0,variant:"lavender",icon:Qr})),n.public_fields.procedures&&c.push({id:"procedures",label:"OPs",progress:e.procedures.required>0?e.procedures.completed/e.procedures.required*100:0,variant:"mint",icon:Ol}),n.public_fields.publications&&c.push({id:"publications",label:"Papers",progress:Math.min(e.publications.count*20,100),variant:"amber",icon:to}),c},a=async()=>{navigator.share?await navigator.share({title:`${n.full_name} - Medizinisches Profil`,text:`Schauen Sie sich das medizinische Profil von ${n.full_name} an`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},l=i();return o.jsxs("div",{className:ne("max-w-4xl mx-auto space-y-6",t),children:[o.jsx(Y,{className:"overflow-hidden",children:o.jsx("div",{className:"bg-gradient-medical p-6 text-white",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[n.avatar_url&&o.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 overflow-hidden",children:o.jsx("img",{src:n.avatar_url,alt:n.full_name,className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:n.full_name}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm opacity-90",children:[n.pgy_level&&o.jsxs(oe,{variant:"secondary",className:"bg-white/20 text-white border-white/20",children:["PGY-",n.pgy_level]}),n.specialty&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ol,{className:"w-4 h-4"}),n.specialty]}),n.institution&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(UT,{className:"w-4 h-4"}),n.institution]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{variant:"ghost",size:"sm",onClick:a,className:"text-white hover:bg-white/20",children:o.jsx(hj,{className:"w-4 h-4"})}),n.linkedin_url&&o.jsx(q,{variant:"ghost",size:"sm",asChild:!0,className:"text-white hover:bg-white/20",children:o.jsx("a",{href:n.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:o.jsx(a_,{className:"w-4 h-4"})})})]})]})})}),o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(Hi,{className:"w-5 h-5 text-medical-primary"}),"Fortschritt ",new Date().getFullYear()]})}),o.jsx(Ae,{children:o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 justify-items-center",children:l.map(c=>o.jsx(Ev,{progress:c.progress,variant:c.variant,label:c.label,showPercentage:!0,onClick:()=>r(s===c.id?null:c.id),className:s===c.id?"ring-2 ring-medical-primary rounded-lg p-2":""},c.id))})})]}),s&&o.jsx(Y,{children:o.jsxs(Ae,{className:"pt-6",children:[s==="courses"&&n.public_fields.courses&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Absolvierte Kurse"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"p-4 rounded-lg bg-activity-coral/10 border border-activity-coral/20",children:[o.jsx("div",{className:"text-2xl font-bold text-activity-coral",children:e.courses.completed}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.total," Kursen"]})]}),o.jsxs("div",{className:"p-4 rounded-lg bg-activity-lavender/10 border border-activity-lavender/20",children:[o.jsx("div",{className:"text-2xl font-bold text-activity-lavender",children:e.courses.mandatory_completed}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.mandatory_total," Pflichtkursen"]})]})]})]}),s==="procedures"&&n.public_fields.procedures&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chirurgische Eingriffe"}),o.jsxs("div",{className:"p-4 rounded-lg bg-activity-mint/10 border border-activity-mint/20",children:[o.jsx("div",{className:"text-2xl font-bold text-activity-mint",children:e.procedures.completed}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.procedures.required," erforderlichen Eingriffen"]})]})]}),s==="publications"&&n.public_fields.publications&&o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publikationen"}),o.jsx("div",{className:"space-y-3",children:e.publications.recent.map((c,d)=>o.jsxs("div",{className:"p-4 rounded-lg bg-activity-amber/10 border border-activity-amber/20",children:[o.jsx("h4",{className:"font-medium text-activity-amber",children:c.title}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[c.journal&&o.jsx("span",{children:c.journal}),c.publication_date&&o.jsxs("span",{className:"ml-2",children:[o.jsx(Vn,{className:"w-3 h-3 inline mr-1"}),new Date(c.publication_date).toLocaleDateString("de-DE")]})]}),(c.doi||c.link)&&o.jsxs("div",{className:"mt-2",children:[c.link&&o.jsx(q,{variant:"ghost",size:"sm",asChild:!0,children:o.jsxs("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(a_,{className:"w-3 h-3 mr-1"}),"Ansehen"]})}),c.doi&&o.jsx(q,{variant:"ghost",size:"sm",asChild:!0,children:o.jsxs("a",{href:`https://doi.org/${c.doi}`,target:"_blank",rel:"noopener noreferrer",children:["DOI: ",c.doi]})})]})]},d))})]})]})}),n.public_fields.awards&&e.awards.length>0&&o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(Hi,{className:"w-5 h-5 text-progress-complete"}),"Auszeichnungen"]})}),o.jsx(Ae,{children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.awards.map((c,d)=>o.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-activity-amber/20 to-activity-coral/10 border border-activity-amber/30",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Hi,{className:"w-5 h-5 text-activity-amber mt-0.5"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium",children:c.title}),c.organization&&o.jsx("p",{className:"text-sm text-muted-foreground",children:c.organization}),c.awarded_date&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(c.awarded_date).toLocaleDateString("de-DE")})]})]})},d))})})]})]})},vH=()=>{const{handle:n}=bR(),[e,t]=w.useState(null),[s,r]=w.useState(null),[i,a]=w.useState(!0),[l,c]=w.useState(!1);return w.useEffect(()=>{(async()=>{if(!n){c(!0),a(!1);return}try{const{data:h,error:f}=await te.from("profiles").select("*").eq("handle",n).eq("is_public",!0).single();if(f||!h){c(!0),a(!1);return}t({...h,public_fields:h.public_fields||{courses:!0,awards:!0,publications:!0,procedures:!1}});const m=new Date().getFullYear(),{data:p}=await te.from("course_enrollments").select(`
            status,
            courses (
              is_mandatory
            )
          `).eq("user_id",h.user_id),x=(p==null?void 0:p.length)||0,g=(p==null?void 0:p.filter(E=>E.status==="completed").length)||0,b=(p==null?void 0:p.filter(E=>{var P;return(P=E.courses)==null?void 0:P.is_mandatory}).length)||0,v=(p==null?void 0:p.filter(E=>{var P;return E.status==="completed"&&((P=E.courses)==null?void 0:P.is_mandatory)}).length)||0,{data:y}=await te.from("procedure_logs").select("*").eq("user_id",h.user_id).gte("performed_date",`${m}-01-01`).lte("performed_date",`${m}-12-31`),{data:_}=await te.from("procedures").select("min_required_by_pgy").eq("active",!0);let N=0;_&&h.pgy_level&&_.forEach(E=>{var T;const P=(T=E.min_required_by_pgy)==null?void 0:T[h.pgy_level.toString()];P&&(N+=P)});const{data:j}=await te.from("publications").select("*").eq("user_id",h.user_id).order("publication_date",{ascending:!1}).limit(5),{data:A}=await te.from("awards").select("*").eq("user_id",h.user_id).order("awarded_date",{ascending:!1});r({courses:{completed:g,total:x,mandatory_completed:v,mandatory_total:b},procedures:{completed:(y==null?void 0:y.length)||0,required:N},publications:{count:(j==null?void 0:j.length)||0,recent:j||[]},awards:A||[]})}catch(h){console.error("Error fetching profile:",h),mT({title:"Fehler",description:"Profil konnte nicht geladen werden.",variant:"destructive"}),c(!0)}finally{a(!1)}})()},[n]),i?o.jsx("div",{className:"min-h-screen bg-background",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs("div",{className:"animate-pulse space-y-6",children:[o.jsx("div",{className:"h-32 bg-muted rounded-lg"}),o.jsx("div",{className:"h-64 bg-muted rounded-lg"}),o.jsx("div",{className:"h-48 bg-muted rounded-lg"})]})})})}):l||!e||!s?o.jsx(dB,{to:"/404",replace:!0}):o.jsx("div",{className:"min-h-screen bg-background",children:o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsx(gH,{profile:e,activityData:s})})})},Re=w.forwardRef(({className:n,type:e,...t},s)=>o.jsx("input",{type:e,className:ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:s,...t}));Re.displayName="Input";function T_(n,[e,t]){return Math.min(t,Math.max(e,n))}var Iw=0;function Cj(){w.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??FC()),document.body.insertAdjacentElement("beforeend",n[1]??FC()),Iw++,()=>{Iw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Iw--}},[])}function FC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Dw="focusScope.autoFocusOnMount",Ow="focusScope.autoFocusOnUnmount",$C={bubbles:!1,cancelable:!0},xH="FocusScope",bb=w.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...a}=n,[l,c]=w.useState(null),d=Lt(r),h=Lt(i),f=w.useRef(null),m=Ve(e,g=>c(g)),p=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(s){let g=function(_){if(p.paused||!l)return;const N=_.target;l.contains(N)?f.current=N:wo(f.current,{select:!0})},b=function(_){if(p.paused||!l)return;const N=_.relatedTarget;N!==null&&(l.contains(N)||wo(f.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const j of _)j.removedNodes.length>0&&wo(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),y.disconnect()}}},[s,l,p.paused]),w.useEffect(()=>{if(l){BC.add(p);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(Dw,$C);l.addEventListener(Dw,d),l.dispatchEvent(v),v.defaultPrevented||(yH(NH(vM(l)),{select:!0}),document.activeElement===g&&wo(l))}return()=>{l.removeEventListener(Dw,d),setTimeout(()=>{const v=new CustomEvent(Ow,$C);l.addEventListener(Ow,h),l.dispatchEvent(v),v.defaultPrevented||wo(g??document.body,{select:!0}),l.removeEventListener(Ow,h),BC.remove(p)},0)}}},[l,d,h,p]);const x=w.useCallback(g=>{if(!t&&!s||p.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(b&&v){const y=g.currentTarget,[_,N]=bH(y);_&&N?!g.shiftKey&&v===N?(g.preventDefault(),t&&wo(_,{select:!0})):g.shiftKey&&v===_&&(g.preventDefault(),t&&wo(N,{select:!0})):v===y&&g.preventDefault()}},[t,s,p.paused]);return o.jsx(le.div,{tabIndex:-1,...a,ref:m,onKeyDown:x})});bb.displayName=xH;function yH(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(wo(s,{select:e}),document.activeElement!==t)return}function bH(n){const e=vM(n),t=zC(e,n),s=zC(e.reverse(),n);return[t,s]}function vM(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function zC(n,e){for(const t of n)if(!wH(t,{upTo:e}))return t}function wH(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function _H(n){return n instanceof HTMLInputElement&&"select"in n}function wo(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&_H(n)&&e&&n.select()}}var BC=SH();function SH(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=UC(n,e),n.unshift(e)},remove(e){var t;n=UC(n,e),(t=n[0])==null||t.resume()}}}function UC(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function NH(n){return n.filter(e=>e.tagName!=="A")}const jH=["top","right","bottom","left"],Ll=Math.min,Os=Math.max,ny=Math.round,gx=Math.floor,Vi=n=>({x:n,y:n}),EH={left:"right",right:"left",bottom:"top",top:"bottom"},AH={start:"end",end:"start"};function R_(n,e,t){return Os(n,Ll(e,t))}function no(n,e){return typeof n=="function"?n(e):n}function so(n){return n.split("-")[0]}function Yf(n){return n.split("-")[1]}function kj(n){return n==="x"?"y":"x"}function Pj(n){return n==="y"?"height":"width"}const CH=new Set(["top","bottom"]);function $i(n){return CH.has(so(n))?"y":"x"}function Tj(n){return kj($i(n))}function kH(n,e,t){t===void 0&&(t=!1);const s=Yf(n),r=Tj(n),i=Pj(r);let a=r==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=sy(a)),[a,sy(a)]}function PH(n){const e=sy(n);return[M_(n),e,M_(e)]}function M_(n){return n.replace(/start|end/g,e=>AH[e])}const HC=["left","right"],WC=["right","left"],TH=["top","bottom"],RH=["bottom","top"];function MH(n,e,t){switch(n){case"top":case"bottom":return t?e?WC:HC:e?HC:WC;case"left":case"right":return e?TH:RH;default:return[]}}function IH(n,e,t,s){const r=Yf(n);let i=MH(so(n),t==="start",s);return r&&(i=i.map(a=>a+"-"+r),e&&(i=i.concat(i.map(M_)))),i}function sy(n){return n.replace(/left|right|bottom|top/g,e=>EH[e])}function DH(n){return{top:0,right:0,bottom:0,left:0,...n}}function xM(n){return typeof n!="number"?DH(n):{top:n,right:n,bottom:n,left:n}}function ry(n){const{x:e,y:t,width:s,height:r}=n;return{width:s,height:r,top:t,left:e,right:e+s,bottom:t+r,x:e,y:t}}function VC(n,e,t){let{reference:s,floating:r}=n;const i=$i(e),a=Tj(e),l=Pj(a),c=so(e),d=i==="y",h=s.x+s.width/2-r.width/2,f=s.y+s.height/2-r.height/2,m=s[l]/2-r[l]/2;let p;switch(c){case"top":p={x:h,y:s.y-r.height};break;case"bottom":p={x:h,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:f};break;case"left":p={x:s.x-r.width,y:f};break;default:p={x:s.x,y:s.y}}switch(Yf(e)){case"start":p[a]-=m*(t&&d?-1:1);break;case"end":p[a]+=m*(t&&d?-1:1);break}return p}const OH=async(n,e,t)=>{const{placement:s="bottom",strategy:r="absolute",middleware:i=[],platform:a}=t,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let d=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:h,y:f}=VC(d,s,c),m=s,p={},x=0;for(let g=0;g<l.length;g++){const{name:b,fn:v}=l[g],{x:y,y:_,data:N,reset:j}=await v({x:h,y:f,initialPlacement:s,placement:m,strategy:r,middlewareData:p,rects:d,platform:a,elements:{reference:n,floating:e}});h=y??h,f=_??f,p={...p,[b]:{...p[b],...N}},j&&x<=50&&(x++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(d=j.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):j.rects),{x:h,y:f}=VC(d,m,c)),g=-1)}return{x:h,y:f,placement:m,strategy:r,middlewareData:p}};async function Pp(n,e){var t;e===void 0&&(e={});const{x:s,y:r,platform:i,rects:a,elements:l,strategy:c}=n,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=no(e,n),x=xM(p),b=l[m?f==="floating"?"reference":"floating":f],v=ry(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(b)))==null||t?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),y=f==="floating"?{x:s,y:r,width:a.floating.width,height:a.floating.height}:a.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},j=ry(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:_,strategy:c}):y);return{top:(v.top-j.top+x.top)/N.y,bottom:(j.bottom-v.bottom+x.bottom)/N.y,left:(v.left-j.left+x.left)/N.x,right:(j.right-v.right+x.right)/N.x}}const LH=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:r,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=no(n,e)||{};if(d==null)return{};const f=xM(h),m={x:t,y:s},p=Tj(r),x=Pj(p),g=await a.getDimensions(d),b=p==="y",v=b?"top":"left",y=b?"bottom":"right",_=b?"clientHeight":"clientWidth",N=i.reference[x]+i.reference[p]-m[p]-i.floating[x],j=m[p]-i.reference[p],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let E=A?A[_]:0;(!E||!await(a.isElement==null?void 0:a.isElement(A)))&&(E=l.floating[_]||i.floating[x]);const P=N/2-j/2,T=E/2-g[x]/2-1,I=Ll(f[v],T),M=Ll(f[y],T),L=I,z=E-g[x]-M,$=E/2-g[x]/2+P,W=R_(L,$,z),F=!c.arrow&&Yf(r)!=null&&$!==W&&i.reference[x]/2-($<L?I:M)-g[x]/2<0,O=F?$<L?$-L:$-z:0;return{[p]:m[p]+O,data:{[p]:W,centerOffset:$-W-O,...F&&{alignmentOffset:O}},reset:F}}}),FH=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:r,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...b}=no(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=so(r),y=$i(l),_=so(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=m||(_||!g?[sy(l)]:PH(l)),A=x!=="none";!m&&A&&j.push(...IH(l,g,x,N));const E=[l,...j],P=await Pp(e,b),T=[];let I=((s=i.flip)==null?void 0:s.overflows)||[];if(h&&T.push(P[v]),f){const $=kH(r,a,N);T.push(P[$[0]],P[$[1]])}if(I=[...I,{placement:r,overflows:T}],!T.every($=>$<=0)){var M,L;const $=(((M=i.flip)==null?void 0:M.index)||0)+1,W=E[$];if(W&&(!(f==="alignment"?y!==$i(W):!1)||I.every(D=>D.overflows[0]>0&&$i(D.placement)===y)))return{data:{index:$,overflows:I},reset:{placement:W}};let F=(L=I.filter(O=>O.overflows[0]<=0).sort((O,D)=>O.overflows[1]-D.overflows[1])[0])==null?void 0:L.placement;if(!F)switch(p){case"bestFit":{var z;const O=(z=I.filter(D=>{if(A){const R=$i(D.placement);return R===y||R==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(R=>R>0).reduce((R,U)=>R+U,0)]).sort((D,R)=>D[1]-R[1])[0])==null?void 0:z[0];O&&(F=O);break}case"initialPlacement":F=l;break}if(r!==F)return{reset:{placement:F}}}return{}}}};function qC(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function GC(n){return jH.some(e=>n[e]>=0)}const $H=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...r}=no(n,e);switch(s){case"referenceHidden":{const i=await Pp(e,{...r,elementContext:"reference"}),a=qC(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:GC(a)}}}case"escaped":{const i=await Pp(e,{...r,altBoundary:!0}),a=qC(i,t.floating);return{data:{escapedOffsets:a,escaped:GC(a)}}}default:return{}}}}},yM=new Set(["left","top"]);async function zH(n,e){const{placement:t,platform:s,elements:r}=n,i=await(s.isRTL==null?void 0:s.isRTL(r.floating)),a=so(t),l=Yf(t),c=$i(t)==="y",d=yM.has(a)?-1:1,h=i&&c?-1:1,f=no(e,n);let{mainAxis:m,crossAxis:p,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*h,y:m*d}:{x:m*d,y:p*h}}const BH=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:r,y:i,placement:a,middlewareData:l}=e,c=await zH(e,n);return a===((t=l.offset)==null?void 0:t.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:a}}}}},UH=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:r}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:v,y}=b;return{x:v,y}}},...c}=no(n,e),d={x:t,y:s},h=await Pp(e,c),f=$i(so(r)),m=kj(f);let p=d[m],x=d[f];if(i){const b=m==="y"?"top":"left",v=m==="y"?"bottom":"right",y=p+h[b],_=p-h[v];p=R_(y,p,_)}if(a){const b=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=x+h[b],_=x-h[v];x=R_(y,x,_)}const g=l.fn({...e,[m]:p,[f]:x});return{...g,data:{x:g.x-t,y:g.y-s,enabled:{[m]:i,[f]:a}}}}}},HH=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:r,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=no(n,e),h={x:t,y:s},f=$i(r),m=kj(f);let p=h[m],x=h[f];const g=no(l,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const _=m==="y"?"height":"width",N=i.reference[m]-i.floating[_]+b.mainAxis,j=i.reference[m]+i.reference[_]-b.mainAxis;p<N?p=N:p>j&&(p=j)}if(d){var v,y;const _=m==="y"?"width":"height",N=yM.has(so(r)),j=i.reference[f]-i.floating[_]+(N&&((v=a.offset)==null?void 0:v[f])||0)+(N?0:b.crossAxis),A=i.reference[f]+i.reference[_]+(N?0:((y=a.offset)==null?void 0:y[f])||0)-(N?b.crossAxis:0);x<j?x=j:x>A&&(x=A)}return{[m]:p,[f]:x}}}},WH=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:r,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...d}=no(n,e),h=await Pp(e,d),f=so(r),m=Yf(r),p=$i(r)==="y",{width:x,height:g}=i.floating;let b,v;f==="top"||f==="bottom"?(b=f,v=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,b=m==="end"?"top":"bottom");const y=g-h.top-h.bottom,_=x-h.left-h.right,N=Ll(g-h[b],y),j=Ll(x-h[v],_),A=!e.middlewareData.shift;let E=N,P=j;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=_),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(E=y),A&&!m){const I=Os(h.left,0),M=Os(h.right,0),L=Os(h.top,0),z=Os(h.bottom,0);p?P=x-2*(I!==0||M!==0?I+M:Os(h.left,h.right)):E=g-2*(L!==0||z!==0?L+z:Os(h.top,h.bottom))}await c({...e,availableWidth:P,availableHeight:E});const T=await a.getDimensions(l.floating);return x!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function wb(){return typeof window<"u"}function Xf(n){return bM(n)?(n.nodeName||"").toLowerCase():"#document"}function Hs(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Qi(n){var e;return(e=(bM(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function bM(n){return wb()?n instanceof Node||n instanceof Hs(n).Node:!1}function Jr(n){return wb()?n instanceof Element||n instanceof Hs(n).Element:!1}function Gi(n){return wb()?n instanceof HTMLElement||n instanceof Hs(n).HTMLElement:!1}function KC(n){return!wb()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Hs(n).ShadowRoot}const VH=new Set(["inline","contents"]);function Cv(n){const{overflow:e,overflowX:t,overflowY:s,display:r}=Zr(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!VH.has(r)}const qH=new Set(["table","td","th"]);function GH(n){return qH.has(Xf(n))}const KH=[":popover-open",":modal"];function _b(n){return KH.some(e=>{try{return n.matches(e)}catch{return!1}})}const YH=["transform","translate","scale","rotate","perspective"],XH=["transform","translate","scale","rotate","perspective","filter"],QH=["paint","layout","strict","content"];function Rj(n){const e=Mj(),t=Jr(n)?Zr(n):n;return YH.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||XH.some(s=>(t.willChange||"").includes(s))||QH.some(s=>(t.contain||"").includes(s))}function JH(n){let e=Fl(n);for(;Gi(e)&&!Rf(e);){if(Rj(e))return e;if(_b(e))return null;e=Fl(e)}return null}function Mj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZH=new Set(["html","body","#document"]);function Rf(n){return ZH.has(Xf(n))}function Zr(n){return Hs(n).getComputedStyle(n)}function Sb(n){return Jr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Fl(n){if(Xf(n)==="html")return n;const e=n.assignedSlot||n.parentNode||KC(n)&&n.host||Qi(n);return KC(e)?e.host:e}function wM(n){const e=Fl(n);return Rf(e)?n.ownerDocument?n.ownerDocument.body:n.body:Gi(e)&&Cv(e)?e:wM(e)}function Tp(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=wM(n),i=r===((s=n.ownerDocument)==null?void 0:s.body),a=Hs(r);if(i){const l=I_(a);return e.concat(a,a.visualViewport||[],Cv(r)?r:[],l&&t?Tp(l):[])}return e.concat(r,Tp(r,[],t))}function I_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function _M(n){const e=Zr(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const r=Gi(n),i=r?n.offsetWidth:t,a=r?n.offsetHeight:s,l=ny(t)!==i||ny(s)!==a;return l&&(t=i,s=a),{width:t,height:s,$:l}}function Ij(n){return Jr(n)?n:n.contextElement}function Zu(n){const e=Ij(n);if(!Gi(e))return Vi(1);const t=e.getBoundingClientRect(),{width:s,height:r,$:i}=_M(e);let a=(i?ny(t.width):t.width)/s,l=(i?ny(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const eW=Vi(0);function SM(n){const e=Hs(n);return!Mj()||!e.visualViewport?eW:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function tW(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Hs(n)?!1:e}function Ud(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=Ij(n);let a=Vi(1);e&&(s?Jr(s)&&(a=Zu(s)):a=Zu(n));const l=tW(i,t,s)?SM(i):Vi(0);let c=(r.left+l.x)/a.x,d=(r.top+l.y)/a.y,h=r.width/a.x,f=r.height/a.y;if(i){const m=Hs(i),p=s&&Jr(s)?Hs(s):s;let x=m,g=I_(x);for(;g&&s&&p!==x;){const b=Zu(g),v=g.getBoundingClientRect(),y=Zr(g),_=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*b.x,N=v.top+(g.clientTop+parseFloat(y.paddingTop))*b.y;c*=b.x,d*=b.y,h*=b.x,f*=b.y,c+=_,d+=N,x=Hs(g),g=I_(x)}}return ry({width:h,height:f,x:c,y:d})}function Dj(n,e){const t=Sb(n).scrollLeft;return e?e.left+t:Ud(Qi(n)).left+t}function NM(n,e,t){t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=s.left+e.scrollLeft-(t?0:Dj(n,s)),i=s.top+e.scrollTop;return{x:r,y:i}}function nW(n){let{elements:e,rect:t,offsetParent:s,strategy:r}=n;const i=r==="fixed",a=Qi(s),l=e?_b(e.floating):!1;if(s===a||l&&i)return t;let c={scrollLeft:0,scrollTop:0},d=Vi(1);const h=Vi(0),f=Gi(s);if((f||!f&&!i)&&((Xf(s)!=="body"||Cv(a))&&(c=Sb(s)),Gi(s))){const p=Ud(s);d=Zu(s),h.x=p.x+s.clientLeft,h.y=p.y+s.clientTop}const m=a&&!f&&!i?NM(a,c,!0):Vi(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:t.y*d.y-c.scrollTop*d.y+h.y+m.y}}function sW(n){return Array.from(n.getClientRects())}function rW(n){const e=Qi(n),t=Sb(n),s=n.ownerDocument.body,r=Os(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),i=Os(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-t.scrollLeft+Dj(n);const l=-t.scrollTop;return Zr(s).direction==="rtl"&&(a+=Os(e.clientWidth,s.clientWidth)-r),{width:r,height:i,x:a,y:l}}function iW(n,e){const t=Hs(n),s=Qi(n),r=t.visualViewport;let i=s.clientWidth,a=s.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;const d=Mj();(!d||d&&e==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l,y:c}}const aW=new Set(["absolute","fixed"]);function oW(n,e){const t=Ud(n,!0,e==="fixed"),s=t.top+n.clientTop,r=t.left+n.clientLeft,i=Gi(n)?Zu(n):Vi(1),a=n.clientWidth*i.x,l=n.clientHeight*i.y,c=r*i.x,d=s*i.y;return{width:a,height:l,x:c,y:d}}function YC(n,e,t){let s;if(e==="viewport")s=iW(n,t);else if(e==="document")s=rW(Qi(n));else if(Jr(e))s=oW(e,t);else{const r=SM(n);s={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return ry(s)}function jM(n,e){const t=Fl(n);return t===e||!Jr(t)||Rf(t)?!1:Zr(t).position==="fixed"||jM(t,e)}function lW(n,e){const t=e.get(n);if(t)return t;let s=Tp(n,[],!1).filter(l=>Jr(l)&&Xf(l)!=="body"),r=null;const i=Zr(n).position==="fixed";let a=i?Fl(n):n;for(;Jr(a)&&!Rf(a);){const l=Zr(a),c=Rj(a);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&aW.has(r.position)||Cv(a)&&!c&&jM(n,a))?s=s.filter(h=>h!==a):r=l,a=Fl(a)}return e.set(n,s),s}function cW(n){let{element:e,boundary:t,rootBoundary:s,strategy:r}=n;const a=[...t==="clippingAncestors"?_b(e)?[]:lW(e,this._c):[].concat(t),s],l=a[0],c=a.reduce((d,h)=>{const f=YC(e,h,r);return d.top=Os(f.top,d.top),d.right=Ll(f.right,d.right),d.bottom=Ll(f.bottom,d.bottom),d.left=Os(f.left,d.left),d},YC(e,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function dW(n){const{width:e,height:t}=_M(n);return{width:e,height:t}}function uW(n,e,t){const s=Gi(e),r=Qi(e),i=t==="fixed",a=Ud(n,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Vi(0);function d(){c.x=Dj(r)}if(s||!s&&!i)if((Xf(e)!=="body"||Cv(r))&&(l=Sb(e)),s){const p=Ud(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else r&&d();i&&!s&&r&&d();const h=r&&!s&&!i?NM(r,l):Vi(0),f=a.left+l.scrollLeft-c.x-h.x,m=a.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:a.width,height:a.height}}function Lw(n){return Zr(n).position==="static"}function XC(n,e){if(!Gi(n)||Zr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Qi(n)===t&&(t=t.ownerDocument.body),t}function EM(n,e){const t=Hs(n);if(_b(n))return t;if(!Gi(n)){let r=Fl(n);for(;r&&!Rf(r);){if(Jr(r)&&!Lw(r))return r;r=Fl(r)}return t}let s=XC(n,e);for(;s&&GH(s)&&Lw(s);)s=XC(s,e);return s&&Rf(s)&&Lw(s)&&!Rj(s)?t:s||JH(n)||t}const hW=async function(n){const e=this.getOffsetParent||EM,t=this.getDimensions,s=await t(n.floating);return{reference:uW(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function fW(n){return Zr(n).direction==="rtl"}const mW={convertOffsetParentRelativeRectToViewportRelativeRect:nW,getDocumentElement:Qi,getClippingRect:cW,getOffsetParent:EM,getElementRects:hW,getClientRects:sW,getDimensions:dW,getScale:Zu,isElement:Jr,isRTL:fW};function AM(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function pW(n,e){let t=null,s;const r=Qi(n);function i(){var l;clearTimeout(s),(l=t)==null||l.disconnect(),t=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=n.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=d;if(l||e(),!m||!p)return;const x=gx(f),g=gx(r.clientWidth-(h+m)),b=gx(r.clientHeight-(f+p)),v=gx(h),_={rootMargin:-x+"px "+-g+"px "+-b+"px "+-v+"px",threshold:Os(0,Ll(1,c))||1};let N=!0;function j(A){const E=A[0].intersectionRatio;if(E!==c){if(!N)return a();E?a(!1,E):s=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!AM(d,n.getBoundingClientRect())&&a(),N=!1}try{t=new IntersectionObserver(j,{..._,root:r.ownerDocument})}catch{t=new IntersectionObserver(j,_)}t.observe(n)}return a(!0),i}function gW(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=Ij(n),h=r||i?[...d?Tp(d):[],...Tp(e)]:[];h.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const f=d&&l?pW(d,t):null;let m=-1,p=null;a&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),t()}),d&&!c&&p.observe(d),p.observe(e));let x,g=c?Ud(n):null;c&&b();function b(){const v=Ud(n);g&&!AM(g,v)&&t(),g=v,x=requestAnimationFrame(b)}return t(),()=>{var v;h.forEach(y=>{r&&y.removeEventListener("scroll",t),i&&y.removeEventListener("resize",t)}),f==null||f(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const vW=BH,xW=UH,yW=FH,bW=WH,wW=$H,QC=LH,_W=HH,SW=(n,e,t)=>{const s=new Map,r={platform:mW,...t},i={...r.platform,_c:s};return OH(n,e,{...r,platform:i})};var NW=typeof document<"u",jW=function(){},Hx=NW?w.useLayoutEffect:jW;function iy(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,r;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!iy(n[s],e[s]))return!1;return!0}if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,r[s]))return!1;for(s=t;s--!==0;){const i=r[s];if(!(i==="_owner"&&n.$$typeof)&&!iy(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function CM(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function JC(n,e){const t=CM(n);return Math.round(e*t)/t}function Fw(n){const e=w.useRef(n);return Hx(()=>{e.current=n}),e}function EW(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:r,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:d}=n,[h,f]=w.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=w.useState(s);iy(m,s)||p(s);const[x,g]=w.useState(null),[b,v]=w.useState(null),y=w.useCallback(D=>{D!==A.current&&(A.current=D,g(D))},[]),_=w.useCallback(D=>{D!==E.current&&(E.current=D,v(D))},[]),N=i||x,j=a||b,A=w.useRef(null),E=w.useRef(null),P=w.useRef(h),T=c!=null,I=Fw(c),M=Fw(r),L=Fw(d),z=w.useCallback(()=>{if(!A.current||!E.current)return;const D={placement:e,strategy:t,middleware:m};M.current&&(D.platform=M.current),SW(A.current,E.current,D).then(R=>{const U={...R,isPositioned:L.current!==!1};$.current&&!iy(P.current,U)&&(P.current=U,Zd.flushSync(()=>{f(U)}))})},[m,e,t,M,L]);Hx(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[d]);const $=w.useRef(!1);Hx(()=>($.current=!0,()=>{$.current=!1}),[]),Hx(()=>{if(N&&(A.current=N),j&&(E.current=j),N&&j){if(I.current)return I.current(N,j,z);z()}},[N,j,z,I,T]);const W=w.useMemo(()=>({reference:A,floating:E,setReference:y,setFloating:_}),[y,_]),F=w.useMemo(()=>({reference:N,floating:j}),[N,j]),O=w.useMemo(()=>{const D={position:t,left:0,top:0};if(!F.floating)return D;const R=JC(F.floating,h.x),U=JC(F.floating,h.y);return l?{...D,transform:"translate("+R+"px, "+U+"px)",...CM(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:R,top:U}},[t,l,F.floating,h.x,h.y]);return w.useMemo(()=>({...h,update:z,refs:W,elements:F,floatingStyles:O}),[h,z,W,F,O])}const AW=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:r}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?QC({element:s.current,padding:r}).fn(t):{}:s?QC({element:s,padding:r}).fn(t):{}}}},CW=(n,e)=>({...vW(n),options:[n,e]}),kW=(n,e)=>({...xW(n),options:[n,e]}),PW=(n,e)=>({..._W(n),options:[n,e]}),TW=(n,e)=>({...yW(n),options:[n,e]}),RW=(n,e)=>({...bW(n),options:[n,e]}),MW=(n,e)=>({...wW(n),options:[n,e]}),IW=(n,e)=>({...AW(n),options:[n,e]});var DW="Arrow",kM=w.forwardRef((n,e)=>{const{children:t,width:s=10,height:r=5,...i}=n;return o.jsx(le.svg,{...i,ref:e,width:s,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});kM.displayName=DW;var OW=kM;function LW(n){const[e,t]=w.useState(void 0);return Tt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;a=d.inlineSize,l=d.blockSize}else a=n.offsetWidth,l=n.offsetHeight;t({width:a,height:l})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var Oj="Popper",[PM,Nb]=si(Oj),[FW,TM]=PM(Oj),RM=n=>{const{__scopePopper:e,children:t}=n,[s,r]=w.useState(null);return o.jsx(FW,{scope:e,anchor:s,onAnchorChange:r,children:t})};RM.displayName=Oj;var MM="PopperAnchor",IM=w.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...r}=n,i=TM(MM,t),a=w.useRef(null),l=Ve(e,a);return w.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||a.current)}),s?null:o.jsx(le.div,{...r,ref:l})});IM.displayName=MM;var Lj="PopperContent",[$W,zW]=PM(Lj),DM=w.forwardRef((n,e)=>{var H,pe,je,Ce,ke,De;const{__scopePopper:t,side:s="bottom",sideOffset:r=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:x,...g}=n,b=TM(Lj,t),[v,y]=w.useState(null),_=Ve(e,zt=>y(zt)),[N,j]=w.useState(null),A=LW(N),E=(A==null?void 0:A.width)??0,P=(A==null?void 0:A.height)??0,T=s+(i!=="center"?"-"+i:""),I=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(d)?d:[d],L=M.length>0,z={padding:I,boundary:M.filter(UW),altBoundary:L},{refs:$,floatingStyles:W,placement:F,isPositioned:O,middlewareData:D}=EW({strategy:"fixed",placement:T,whileElementsMounted:(...zt)=>gW(...zt,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[CW({mainAxis:r+P,alignmentAxis:a}),c&&kW({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?PW():void 0,...z}),c&&TW({...z}),RW({...z,apply:({elements:zt,rects:Xn,availableWidth:tc,availableHeight:co})=>{const{width:nc,height:tm}=Xn.reference,ru=zt.floating.style;ru.setProperty("--radix-popper-available-width",`${tc}px`),ru.setProperty("--radix-popper-available-height",`${co}px`),ru.setProperty("--radix-popper-anchor-width",`${nc}px`),ru.setProperty("--radix-popper-anchor-height",`${tm}px`)}}),N&&IW({element:N,padding:l}),HW({arrowWidth:E,arrowHeight:P}),m&&MW({strategy:"referenceHidden",...z})]}),[R,U]=FM(F),X=Lt(x);Tt(()=>{O&&(X==null||X())},[O,X]);const B=(H=D.arrow)==null?void 0:H.x,V=(pe=D.arrow)==null?void 0:pe.y,Q=((je=D.arrow)==null?void 0:je.centerOffset)!==0,[J,ce]=w.useState();return Tt(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),o.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:O?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(Ce=D.transformOrigin)==null?void 0:Ce.x,(ke=D.transformOrigin)==null?void 0:ke.y].join(" "),...((De=D.hide)==null?void 0:De.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:o.jsx($W,{scope:t,placedSide:R,onArrowChange:j,arrowX:B,arrowY:V,shouldHideArrow:Q,children:o.jsx(le.div,{"data-side":R,"data-align":U,...g,ref:_,style:{...g.style,animation:O?void 0:"none"}})})})});DM.displayName=Lj;var OM="PopperArrow",BW={top:"bottom",right:"left",bottom:"top",left:"right"},LM=w.forwardRef(function(e,t){const{__scopePopper:s,...r}=e,i=zW(OM,s),a=BW[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(OW,{...r,ref:t,style:{...r.style,display:"block"}})})});LM.displayName=OM;function UW(n){return n!==null}var HW=n=>({name:"transformOrigin",options:n,fn(e){var b,v,y;const{placement:t,rects:s,middlewareData:r}=e,a=((b=r.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:n.arrowWidth,c=a?0:n.arrowHeight,[d,h]=FM(t),f={start:"0%",center:"50%",end:"100%"}[h],m=(((v=r.arrow)==null?void 0:v.x)??0)+l/2,p=(((y=r.arrow)==null?void 0:y.y)??0)+c/2;let x="",g="";return d==="bottom"?(x=a?f:`${m}px`,g=`${-c}px`):d==="top"?(x=a?f:`${m}px`,g=`${s.floating.height+c}px`):d==="right"?(x=`${-c}px`,g=a?f:`${p}px`):d==="left"&&(x=`${s.floating.width+c}px`,g=a?f:`${p}px`),{data:{x,y:g}}}});function FM(n){const[e,t="center"]=n.split("-");return[e,t]}var $M=RM,Fj=IM,zM=DM,BM=LM;function WW(n){const e=w.useRef({value:n,previous:n});return w.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var VW=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},mu=new WeakMap,vx=new WeakMap,xx={},$w=0,UM=function(n){return n&&(n.host||UM(n.parentNode))},qW=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=UM(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},GW=function(n,e,t,s){var r=qW(e,Array.isArray(n)?n:[n]);xx[t]||(xx[t]=new WeakMap);var i=xx[t],a=[],l=new Set,c=new Set(r),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};r.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(s),x=p!==null&&p!=="false",g=(mu.get(m)||0)+1,b=(i.get(m)||0)+1;mu.set(m,g),i.set(m,b),a.push(m),g===1&&x&&vx.set(m,!0),b===1&&m.setAttribute(t,"true"),x||m.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return h(e),l.clear(),$w++,function(){a.forEach(function(f){var m=mu.get(f)-1,p=i.get(f)-1;mu.set(f,m),i.set(f,p),m||(vx.has(f)||f.removeAttribute(s),vx.delete(f)),p||f.removeAttribute(t)}),$w--,$w||(mu=new WeakMap,mu=new WeakMap,vx=new WeakMap,xx={})}},$j=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),r=VW(n);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live]"))),GW(s,r,t,"aria-hidden")):function(){return null}},Di=function(){return Di=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Di.apply(this,arguments)};function HM(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function KW(n,e,t){if(t||arguments.length===2)for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return n.concat(i||Array.prototype.slice.call(e))}var Wx="right-scroll-bar-position",Vx="width-before-scroll-bar",YW="with-scroll-bars-hidden",XW="--removed-body-scroll-bar-size";function zw(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function QW(n,e){var t=w.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var r=t.value;r!==s&&(t.value=s,t.callback(s,r))}}}})[0];return t.callback=e,t.facade}var JW=typeof window<"u"?w.useLayoutEffect:w.useEffect,ZC=new WeakMap;function ZW(n,e){var t=QW(null,function(s){return n.forEach(function(r){return zw(r,s)})});return JW(function(){var s=ZC.get(t);if(s){var r=new Set(s),i=new Set(n),a=t.current;r.forEach(function(l){i.has(l)||zw(l,null)}),i.forEach(function(l){r.has(l)||zw(l,a)})}ZC.set(t,n)},[n]),t}function eV(n){return n}function tV(n,e){e===void 0&&(e=eV);var t=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,s);return t.push(a),function(){t=t.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(s=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){s=!0;var a=[];if(t.length){var l=t;t=[],l.forEach(i),a=t}var c=function(){var h=a;a=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){a.push(h),d()},filter:function(h){return a=a.filter(h),t}}}};return r}function nV(n){n===void 0&&(n={});var e=tV(null);return e.options=Di({async:!0,ssr:!1},n),e}var WM=function(n){var e=n.sideCar,t=HM(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return w.createElement(s,Di({},t))};WM.isSideCarExport=!0;function sV(n,e){return n.useMedium(e),WM}var VM=nV(),Bw=function(){},jb=w.forwardRef(function(n,e){var t=w.useRef(null),s=w.useState({onScrollCapture:Bw,onWheelCapture:Bw,onTouchMoveCapture:Bw}),r=s[0],i=s[1],a=n.forwardProps,l=n.children,c=n.className,d=n.removeScrollBar,h=n.enabled,f=n.shards,m=n.sideCar,p=n.noRelative,x=n.noIsolation,g=n.inert,b=n.allowPinchZoom,v=n.as,y=v===void 0?"div":v,_=n.gapMode,N=HM(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,A=ZW([t,e]),E=Di(Di({},N),r);return w.createElement(w.Fragment,null,h&&w.createElement(j,{sideCar:VM,removeScrollBar:d,shards:f,noRelative:p,noIsolation:x,inert:g,setCallbacks:i,allowPinchZoom:!!b,lockRef:t,gapMode:_}),a?w.cloneElement(w.Children.only(l),Di(Di({},E),{ref:A})):w.createElement(y,Di({},E,{className:c,ref:A}),l))});jb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jb.classNames={fullWidth:Vx,zeroRight:Wx};var rV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iV(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=rV();return e&&n.setAttribute("nonce",e),n}function aV(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function oV(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var lV=function(){var n=0,e=null;return{add:function(t){n==0&&(e=iV())&&(aV(e,t),oV(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},cV=function(){var n=lV();return function(e,t){w.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},qM=function(){var n=cV(),e=function(t){var s=t.styles,r=t.dynamic;return n(s,r),null};return e},dV={left:0,top:0,right:0,gap:0},Uw=function(n){return parseInt(n||"",10)||0},uV=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],r=e[n==="padding"?"paddingRight":"marginRight"];return[Uw(t),Uw(s),Uw(r)]},hV=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return dV;var e=uV(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},fV=qM(),eh="data-scroll-locked",mV=function(n,e,t,s){var r=n.left,i=n.top,a=n.right,l=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(YW,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(eh,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wx,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Vx,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Wx," .").concat(Wx,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Vx," .").concat(Vx,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(eh,`] {
    `).concat(XW,": ").concat(l,`px;
  }
`)},ek=function(){var n=parseInt(document.body.getAttribute(eh)||"0",10);return isFinite(n)?n:0},pV=function(){w.useEffect(function(){return document.body.setAttribute(eh,(ek()+1).toString()),function(){var n=ek()-1;n<=0?document.body.removeAttribute(eh):document.body.setAttribute(eh,n.toString())}},[])},gV=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,r=s===void 0?"margin":s;pV();var i=w.useMemo(function(){return hV(r)},[r]);return w.createElement(fV,{styles:mV(i,!e,r,t?"":"!important")})},D_=!1;if(typeof window<"u")try{var yx=Object.defineProperty({},"passive",{get:function(){return D_=!0,!0}});window.addEventListener("test",yx,yx),window.removeEventListener("test",yx,yx)}catch{D_=!1}var pu=D_?{passive:!1}:!1,vV=function(n){return n.tagName==="TEXTAREA"},GM=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!vV(n)&&t[e]==="visible")},xV=function(n){return GM(n,"overflowY")},yV=function(n){return GM(n,"overflowX")},tk=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=KM(n,s);if(r){var i=YM(n,s),a=i[1],l=i[2];if(a>l)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},bV=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},wV=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},KM=function(n,e){return n==="v"?xV(e):yV(e)},YM=function(n,e){return n==="v"?bV(e):wV(e)},_V=function(n,e){return n==="h"&&e==="rtl"?-1:1},SV=function(n,e,t,s,r){var i=_V(n,window.getComputedStyle(e).direction),a=i*s,l=t.target,c=e.contains(l),d=!1,h=a>0,f=0,m=0;do{if(!l)break;var p=YM(n,l),x=p[0],g=p[1],b=p[2],v=g-b-i*x;(x||v)&&KM(n,l)&&(f+=v,m+=x);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!r)||!h&&(Math.abs(m)<1||!r))&&(d=!0),d},bx=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},nk=function(n){return[n.deltaX,n.deltaY]},sk=function(n){return n&&"current"in n?n.current:n},NV=function(n,e){return n[0]===e[0]&&n[1]===e[1]},jV=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},EV=0,gu=[];function AV(n){var e=w.useRef([]),t=w.useRef([0,0]),s=w.useRef(),r=w.useState(EV++)[0],i=w.useState(qM)[0],a=w.useRef(n);w.useEffect(function(){a.current=n},[n]),w.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(r));var g=KW([n.lockRef.current],(n.shards||[]).map(sk),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(r))})}}},[n.inert,n.lockRef.current,n.shards]);var l=w.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=bx(g),y=t.current,_="deltaX"in g?g.deltaX:y[0]-v[0],N="deltaY"in g?g.deltaY:y[1]-v[1],j,A=g.target,E=Math.abs(_)>Math.abs(N)?"h":"v";if("touches"in g&&E==="h"&&A.type==="range")return!1;var P=tk(E,A);if(!P)return!0;if(P?j=E:(j=E==="v"?"h":"v",P=tk(E,A)),!P)return!1;if(!s.current&&"changedTouches"in g&&(_||N)&&(s.current=j),!j)return!0;var T=s.current||j;return SV(T,b,g,T==="h"?_:N,!0)},[]),c=w.useCallback(function(g){var b=g;if(!(!gu.length||gu[gu.length-1]!==i)){var v="deltaY"in b?nk(b):bx(b),y=e.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&NV(j.delta,v)})[0];if(y&&y.should){b.cancelable&&b.preventDefault();return}if(!y){var _=(a.current.shards||[]).map(sk).filter(Boolean).filter(function(j){return j.contains(b.target)}),N=_.length>0?l(b,_[0]):!a.current.noIsolation;N&&b.cancelable&&b.preventDefault()}}},[]),d=w.useCallback(function(g,b,v,y){var _={name:g,delta:b,target:v,should:y,shadowParent:CV(v)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(N){return N!==_})},1)},[]),h=w.useCallback(function(g){t.current=bx(g),s.current=void 0},[]),f=w.useCallback(function(g){d(g.type,nk(g),g.target,l(g,n.lockRef.current))},[]),m=w.useCallback(function(g){d(g.type,bx(g),g.target,l(g,n.lockRef.current))},[]);w.useEffect(function(){return gu.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,pu),document.addEventListener("touchmove",c,pu),document.addEventListener("touchstart",h,pu),function(){gu=gu.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,pu),document.removeEventListener("touchmove",c,pu),document.removeEventListener("touchstart",h,pu)}},[]);var p=n.removeScrollBar,x=n.inert;return w.createElement(w.Fragment,null,x?w.createElement(i,{styles:jV(r)}):null,p?w.createElement(gV,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function CV(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const kV=sV(VM,AV);var Eb=w.forwardRef(function(n,e){return w.createElement(jb,Di({},n,{ref:e,sideCar:kV}))});Eb.classNames=jb.classNames;var PV=[" ","Enter","ArrowUp","ArrowDown"],TV=[" ","Enter"],Hd="Select",[Ab,Cb,RV]=aj(Hd),[Qf,FQ]=si(Hd,[RV,Nb]),kb=Nb(),[MV,Jl]=Qf(Hd),[IV,DV]=Qf(Hd),XM=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:r,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:p,form:x}=n,g=kb(e),[b,v]=w.useState(null),[y,_]=w.useState(null),[N,j]=w.useState(!1),A=xb(d),[E,P]=Bd({prop:s,defaultProp:r??!1,onChange:i,caller:Hd}),[T,I]=Bd({prop:a,defaultProp:l,onChange:c,caller:Hd}),M=w.useRef(null),L=b?x||!!b.closest("form"):!0,[z,$]=w.useState(new Set),W=Array.from(z).map(F=>F.props.value).join(";");return o.jsx($M,{...g,children:o.jsxs(MV,{required:p,scope:e,trigger:b,onTriggerChange:v,valueNode:y,onValueNodeChange:_,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:qn(),value:T,onValueChange:I,open:E,onOpenChange:P,dir:A,triggerPointerDownPosRef:M,disabled:m,children:[o.jsx(Ab.Provider,{scope:e,children:o.jsx(IV,{scope:n.__scopeSelect,onNativeOptionAdd:w.useCallback(F=>{$(O=>new Set(O).add(F))},[]),onNativeOptionRemove:w.useCallback(F=>{$(O=>{const D=new Set(O);return D.delete(F),D})},[]),children:t})}),L?o.jsxs(bI,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:F=>I(F.target.value),disabled:m,form:x,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(z)]},W):null]})})};XM.displayName=Hd;var QM="SelectTrigger",JM=w.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...r}=n,i=kb(t),a=Jl(QM,t),l=a.disabled||s,c=Ve(e,a.onTriggerChange),d=Cb(t),h=w.useRef("touch"),[f,m,p]=_I(g=>{const b=d().filter(_=>!_.disabled),v=b.find(_=>_.value===a.value),y=SI(b,g,v);y!==void 0&&a.onValueChange(y.value)}),x=g=>{l||(a.onOpenChange(!0),p()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(Fj,{asChild:!0,...i,children:o.jsx(le.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":wI(a.value)?"":void 0,...r,ref:c,onClick:fe(r.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&x(g)}),onPointerDown:fe(r.onPointerDown,g=>{h.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:fe(r.onKeyDown,g=>{const b=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(b&&g.key===" ")&&PV.includes(g.key)&&(x(),g.preventDefault())})})})});JM.displayName=QM;var ZM="SelectValue",eI=w.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,children:i,placeholder:a="",...l}=n,c=Jl(ZM,t),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Ve(e,c.onValueNodeChange);return Tt(()=>{d(h)},[d,h]),o.jsx(le.span,{...l,ref:f,style:{pointerEvents:"none"},children:wI(c.value)?o.jsx(o.Fragment,{children:a}):i})});eI.displayName=ZM;var OV="SelectIcon",tI=w.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...r}=n;return o.jsx(le.span,{"aria-hidden":!0,...r,ref:e,children:s||"▼"})});tI.displayName=OV;var LV="SelectPortal",nI=n=>o.jsx(yv,{asChild:!0,...n});nI.displayName=LV;var Wd="SelectContent",sI=w.forwardRef((n,e)=>{const t=Jl(Wd,n.__scopeSelect),[s,r]=w.useState();if(Tt(()=>{r(new DocumentFragment)},[]),!t.open){const i=s;return i?Zd.createPortal(o.jsx(rI,{scope:n.__scopeSelect,children:o.jsx(Ab.Slot,{scope:n.__scopeSelect,children:o.jsx("div",{children:n.children})})}),i):null}return o.jsx(iI,{...n,ref:e})});sI.displayName=Wd;var Er=10,[rI,Zl]=Qf(Wd),FV="SelectContentImpl",$V=zd("SelectContent.RemoveScroll"),iI=w.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:b,...v}=n,y=Jl(Wd,t),[_,N]=w.useState(null),[j,A]=w.useState(null),E=Ve(e,H=>N(H)),[P,T]=w.useState(null),[I,M]=w.useState(null),L=Cb(t),[z,$]=w.useState(!1),W=w.useRef(!1);w.useEffect(()=>{if(_)return $j(_)},[_]),Cj();const F=w.useCallback(H=>{const[pe,...je]=L().map(De=>De.ref.current),[Ce]=je.slice(-1),ke=document.activeElement;for(const De of H)if(De===ke||(De==null||De.scrollIntoView({block:"nearest"}),De===pe&&j&&(j.scrollTop=0),De===Ce&&j&&(j.scrollTop=j.scrollHeight),De==null||De.focus(),document.activeElement!==ke))return},[L,j]),O=w.useCallback(()=>F([P,_]),[F,P,_]);w.useEffect(()=>{z&&O()},[z,O]);const{onOpenChange:D,triggerPointerDownPosRef:R}=y;w.useEffect(()=>{if(_){let H={x:0,y:0};const pe=Ce=>{var ke,De;H={x:Math.abs(Math.round(Ce.pageX)-(((ke=R.current)==null?void 0:ke.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((De=R.current)==null?void 0:De.y)??0))}},je=Ce=>{H.x<=10&&H.y<=10?Ce.preventDefault():_.contains(Ce.target)||D(!1),document.removeEventListener("pointermove",pe),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",je,{capture:!0})}}},[_,D,R]),w.useEffect(()=>{const H=()=>D(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[D]);const[U,X]=_I(H=>{const pe=L().filter(ke=>!ke.disabled),je=pe.find(ke=>ke.ref.current===document.activeElement),Ce=SI(pe,H,je);Ce&&setTimeout(()=>Ce.ref.current.focus())}),B=w.useCallback((H,pe,je)=>{const Ce=!W.current&&!je;(y.value!==void 0&&y.value===pe||Ce)&&(T(H),Ce&&(W.current=!0))},[y.value]),V=w.useCallback(()=>_==null?void 0:_.focus(),[_]),Q=w.useCallback((H,pe,je)=>{const Ce=!W.current&&!je;(y.value!==void 0&&y.value===pe||Ce)&&M(H)},[y.value]),J=s==="popper"?O_:aI,ce=J===O_?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:g,avoidCollisions:b}:{};return o.jsx(rI,{scope:t,content:_,viewport:j,onViewportChange:A,itemRefCallback:B,selectedItem:P,onItemLeave:V,itemTextRefCallback:Q,focusSelectedItem:O,selectedItemText:I,position:s,isPositioned:z,searchRef:U,children:o.jsx(Eb,{as:$V,allowPinchZoom:!0,children:o.jsx(bb,{asChild:!0,trapped:y.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:fe(r,H=>{var pe;(pe=y.trigger)==null||pe.focus({preventScroll:!0}),H.preventDefault()}),children:o.jsx(xv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:o.jsx(J,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:H=>H.preventDefault(),...v,...ce,onPlaced:()=>$(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:fe(v.onKeyDown,H=>{const pe=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!pe&&H.key.length===1&&X(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let Ce=L().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(H.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const ke=H.target,De=Ce.indexOf(ke);Ce=Ce.slice(De+1)}setTimeout(()=>F(Ce)),H.preventDefault()}})})})})})})});iI.displayName=FV;var zV="SelectItemAlignedPosition",aI=w.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...r}=n,i=Jl(Wd,t),a=Zl(Wd,t),[l,c]=w.useState(null),[d,h]=w.useState(null),f=Ve(e,E=>h(E)),m=Cb(t),p=w.useRef(!1),x=w.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:v,focusSelectedItem:y}=a,_=w.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&b&&v){const E=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),I=v.getBoundingClientRect();if(i.dir!=="rtl"){const ke=I.left-P.left,De=T.left-ke,zt=E.left-De,Xn=E.width+zt,tc=Math.max(Xn,P.width),co=window.innerWidth-Er,nc=T_(De,[Er,Math.max(Er,co-tc)]);l.style.minWidth=Xn+"px",l.style.left=nc+"px"}else{const ke=P.right-I.right,De=window.innerWidth-T.right-ke,zt=window.innerWidth-E.right-De,Xn=E.width+zt,tc=Math.max(Xn,P.width),co=window.innerWidth-Er,nc=T_(De,[Er,Math.max(Er,co-tc)]);l.style.minWidth=Xn+"px",l.style.right=nc+"px"}const M=m(),L=window.innerHeight-Er*2,z=g.scrollHeight,$=window.getComputedStyle(d),W=parseInt($.borderTopWidth,10),F=parseInt($.paddingTop,10),O=parseInt($.borderBottomWidth,10),D=parseInt($.paddingBottom,10),R=W+F+z+D+O,U=Math.min(b.offsetHeight*5,R),X=window.getComputedStyle(g),B=parseInt(X.paddingTop,10),V=parseInt(X.paddingBottom,10),Q=E.top+E.height/2-Er,J=L-Q,ce=b.offsetHeight/2,H=b.offsetTop+ce,pe=W+F+H,je=R-pe;if(pe<=Q){const ke=M.length>0&&b===M[M.length-1].ref.current;l.style.bottom="0px";const De=d.clientHeight-g.offsetTop-g.offsetHeight,zt=Math.max(J,ce+(ke?V:0)+De+O),Xn=pe+zt;l.style.height=Xn+"px"}else{const ke=M.length>0&&b===M[0].ref.current;l.style.top="0px";const zt=Math.max(Q,W+g.offsetTop+(ke?B:0)+ce)+je;l.style.height=zt+"px",g.scrollTop=pe-Q+g.offsetTop}l.style.margin=`${Er}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=L+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,g,b,v,i.dir,s]);Tt(()=>_(),[_]);const[N,j]=w.useState();Tt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const A=w.useCallback(E=>{E&&x.current===!0&&(_(),y==null||y(),x.current=!1)},[_,y]);return o.jsx(UV,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:A,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:o.jsx(le.div,{...r,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});aI.displayName=zV;var BV="SelectPopperPosition",O_=w.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:r=Er,...i}=n,a=kb(t);return o.jsx(zM,{...a,...i,ref:e,align:s,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});O_.displayName=BV;var[UV,zj]=Qf(Wd,{}),L_="SelectViewport",oI=w.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...r}=n,i=Zl(L_,t),a=zj(L_,t),l=Ve(e,i.onViewportChange),c=w.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Ab.Slot,{scope:t,children:o.jsx(le.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:fe(r.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&f){const p=Math.abs(c.current-h.scrollTop);if(p>0){const x=window.innerHeight-Er*2,g=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),v=Math.max(g,b);if(v<x){const y=v+p,_=Math.min(x,y),N=y-_;f.style.height=_+"px",f.style.bottom==="0px"&&(h.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});oI.displayName=L_;var lI="SelectGroup",[HV,WV]=Qf(lI),VV=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=qn();return o.jsx(HV,{scope:t,id:r,children:o.jsx(le.div,{role:"group","aria-labelledby":r,...s,ref:e})})});VV.displayName=lI;var cI="SelectLabel",dI=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=WV(cI,t);return o.jsx(le.div,{id:r.id,...s,ref:e})});dI.displayName=cI;var ay="SelectItem",[qV,uI]=Qf(ay),hI=w.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:r=!1,textValue:i,...a}=n,l=Jl(ay,t),c=Zl(ay,t),d=l.value===s,[h,f]=w.useState(i??""),[m,p]=w.useState(!1),x=Ve(e,y=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,y,s,r)}),g=qn(),b=w.useRef("touch"),v=()=>{r||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(qV,{scope:t,value:s,disabled:r,textId:g,isSelected:d,onItemTextChange:w.useCallback(y=>{f(_=>_||((y==null?void 0:y.textContent)??"").trim())},[]),children:o.jsx(Ab.ItemSlot,{scope:t,value:s,disabled:r,textValue:h,children:o.jsx(le.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:x,onFocus:fe(a.onFocus,()=>p(!0)),onBlur:fe(a.onBlur,()=>p(!1)),onClick:fe(a.onClick,()=>{b.current!=="mouse"&&v()}),onPointerUp:fe(a.onPointerUp,()=>{b.current==="mouse"&&v()}),onPointerDown:fe(a.onPointerDown,y=>{b.current=y.pointerType}),onPointerMove:fe(a.onPointerMove,y=>{var _;b.current=y.pointerType,r?(_=c.onItemLeave)==null||_.call(c):b.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:fe(a.onPointerLeave,y=>{var _;y.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:fe(a.onKeyDown,y=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&y.key===" "||(TV.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});hI.displayName=ay;var jm="SelectItemText",fI=w.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:r,...i}=n,a=Jl(jm,t),l=Zl(jm,t),c=uI(jm,t),d=DV(jm,t),[h,f]=w.useState(null),m=Ve(e,v=>f(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),p=h==null?void 0:h.textContent,x=w.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=d;return Tt(()=>(g(x),()=>b(x)),[g,b,x]),o.jsxs(o.Fragment,{children:[o.jsx(le.span,{id:c.textId,...i,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Zd.createPortal(i.children,a.valueNode):null]})});fI.displayName=jm;var mI="SelectItemIndicator",pI=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return uI(mI,t).isSelected?o.jsx(le.span,{"aria-hidden":!0,...s,ref:e}):null});pI.displayName=mI;var F_="SelectScrollUpButton",gI=w.forwardRef((n,e)=>{const t=Zl(F_,n.__scopeSelect),s=zj(F_,n.__scopeSelect),[r,i]=w.useState(!1),a=Ve(e,s.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?o.jsx(xI,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});gI.displayName=F_;var $_="SelectScrollDownButton",vI=w.forwardRef((n,e)=>{const t=Zl($_,n.__scopeSelect),s=zj($_,n.__scopeSelect),[r,i]=w.useState(!1),a=Ve(e,s.onScrollButtonChange);return Tt(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?o.jsx(xI,{...n,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});vI.displayName=$_;var xI=w.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...r}=n,i=Zl("SelectScrollButton",t),a=w.useRef(null),l=Cb(t),c=w.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return w.useEffect(()=>()=>c(),[c]),Tt(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(le.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:fe(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:fe(r.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:fe(r.onPointerLeave,()=>{c()})})}),GV="SelectSeparator",yI=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return o.jsx(le.div,{"aria-hidden":!0,...s,ref:e})});yI.displayName=GV;var z_="SelectArrow",KV=w.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,r=kb(t),i=Jl(z_,t),a=Zl(z_,t);return i.open&&a.position==="popper"?o.jsx(BM,{...r,...s,ref:e}):null});KV.displayName=z_;var YV="SelectBubbleInput",bI=w.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const r=w.useRef(null),i=Ve(s,r),a=WW(e);return w.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[a,e]),o.jsx(le.select,{...t,style:{...yT,...t.style},ref:i,defaultValue:e})});bI.displayName=YV;function wI(n){return n===""||n===void 0}function _I(n){const e=Lt(n),t=w.useRef(""),s=w.useRef(0),r=w.useCallback(a=>{const l=t.current+a;e(l),function c(d){t.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=w.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,r,i]}function SI(n,e,t){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=XV(n,Math.max(i,0));r.length===1&&(a=a.filter(d=>d!==t));const c=a.find(d=>d.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function XV(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var QV=XM,NI=JM,JV=eI,ZV=tI,e9=nI,jI=sI,t9=oI,EI=dI,AI=hI,n9=fI,s9=pI,CI=gI,kI=vI,PI=yI;const Fs=QV,$s=JV,os=w.forwardRef(({className:n,children:e,...t},s)=>o.jsxs(NI,{ref:s,className:ne("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,o.jsx(ZV,{asChild:!0,children:o.jsx(WT,{className:"h-4 w-4 opacity-50"})})]}));os.displayName=NI.displayName;const TI=w.forwardRef(({className:n,...e},t)=>o.jsx(CI,{ref:t,className:ne("flex cursor-default items-center justify-center py-1",n),...e,children:o.jsx(_$,{className:"h-4 w-4"})}));TI.displayName=CI.displayName;const RI=w.forwardRef(({className:n,...e},t)=>o.jsx(kI,{ref:t,className:ne("flex cursor-default items-center justify-center py-1",n),...e,children:o.jsx(WT,{className:"h-4 w-4"})}));RI.displayName=kI.displayName;const ls=w.forwardRef(({className:n,children:e,position:t="popper",...s},r)=>o.jsx(e9,{children:o.jsxs(jI,{ref:r,className:ne("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[o.jsx(TI,{}),o.jsx(t9,{className:ne("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(RI,{})]})}));ls.displayName=jI.displayName;const r9=w.forwardRef(({className:n,...e},t)=>o.jsx(EI,{ref:t,className:ne("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));r9.displayName=EI.displayName;const Qe=w.forwardRef(({className:n,children:e,...t},s)=>o.jsxs(AI,{ref:s,className:ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(s9,{children:o.jsx(HT,{className:"h-4 w-4"})})}),o.jsx(n9,{children:e})]}));Qe.displayName=AI.displayName;const i9=w.forwardRef(({className:n,...e},t)=>o.jsx(PI,{ref:t,className:ne("-mx-1 my-1 h-px bg-muted",n),...e}));i9.displayName=PI.displayName;var Pb="Dialog",[MI,$Q]=si(Pb),[a9,ri]=MI(Pb),II=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:r,onOpenChange:i,modal:a=!0}=n,l=w.useRef(null),c=w.useRef(null),[d,h]=Bd({prop:s,defaultProp:r??!1,onChange:i,caller:Pb});return o.jsx(a9,{scope:e,triggerRef:l,contentRef:c,contentId:qn(),titleId:qn(),descriptionId:qn(),open:d,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(f=>!f),[h]),modal:a,children:t})};II.displayName=Pb;var DI="DialogTrigger",OI=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=ri(DI,t),i=Ve(e,r.triggerRef);return o.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Hj(r.open),...s,ref:i,onClick:fe(n.onClick,r.onOpenToggle)})});OI.displayName=DI;var Bj="DialogPortal",[o9,LI]=MI(Bj,{forceMount:void 0}),FI=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:r}=n,i=ri(Bj,e);return o.jsx(o9,{scope:e,forceMount:t,children:w.Children.map(s,a=>o.jsx(xr,{present:t||i.open,children:o.jsx(yv,{asChild:!0,container:r,children:a})}))})};FI.displayName=Bj;var oy="DialogOverlay",$I=w.forwardRef((n,e)=>{const t=LI(oy,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=ri(oy,n.__scopeDialog);return i.modal?o.jsx(xr,{present:s||i.open,children:o.jsx(c9,{...r,ref:e})}):null});$I.displayName=oy;var l9=zd("DialogOverlay.RemoveScroll"),c9=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=ri(oy,t);return o.jsx(Eb,{as:l9,allowPinchZoom:!0,shards:[r.contentRef],children:o.jsx(le.div,{"data-state":Hj(r.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Vd="DialogContent",zI=w.forwardRef((n,e)=>{const t=LI(Vd,n.__scopeDialog),{forceMount:s=t.forceMount,...r}=n,i=ri(Vd,n.__scopeDialog);return o.jsx(xr,{present:s||i.open,children:i.modal?o.jsx(d9,{...r,ref:e}):o.jsx(u9,{...r,ref:e})})});zI.displayName=Vd;var d9=w.forwardRef((n,e)=>{const t=ri(Vd,n.__scopeDialog),s=w.useRef(null),r=Ve(e,t.contentRef,s);return w.useEffect(()=>{const i=s.current;if(i)return $j(i)},[]),o.jsx(BI,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(n.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:fe(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:fe(n.onFocusOutside,i=>i.preventDefault())})}),u9=w.forwardRef((n,e)=>{const t=ri(Vd,n.__scopeDialog),s=w.useRef(!1),r=w.useRef(!1);return o.jsx(BI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(s.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),BI=w.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,...a}=n,l=ri(Vd,t),c=w.useRef(null),d=Ve(e,c);return Cj(),o.jsxs(o.Fragment,{children:[o.jsx(bb,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:o.jsx(xv,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Hj(l.open),...a,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(h9,{titleId:l.titleId}),o.jsx(m9,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Uj="DialogTitle",UI=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=ri(Uj,t);return o.jsx(le.h2,{id:r.titleId,...s,ref:e})});UI.displayName=Uj;var HI="DialogDescription",WI=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=ri(HI,t);return o.jsx(le.p,{id:r.descriptionId,...s,ref:e})});WI.displayName=HI;var VI="DialogClose",qI=w.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,r=ri(VI,t);return o.jsx(le.button,{type:"button",...s,ref:e,onClick:fe(n.onClick,()=>r.onOpenChange(!1))})});qI.displayName=VI;function Hj(n){return n?"open":"closed"}var GI="DialogTitleWarning",[zQ,KI]=E5(GI,{contentName:Vd,titleName:Uj,docsSlug:"dialog"}),h9=({titleId:n})=>{const e=KI(GI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},f9="DialogDescriptionWarning",m9=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${KI(f9).contentName}}.`;return w.useEffect(()=>{var i;const r=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},YI=II,p9=OI,XI=FI,Wj=$I,Vj=zI,QI=UI,JI=WI,g9=qI;const kv=YI,v9=p9,x9=XI,ZI=w.forwardRef(({className:n,...e},t)=>o.jsx(Wj,{ref:t,className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));ZI.displayName=Wj.displayName;const Jf=w.forwardRef(({className:n,children:e,...t},s)=>o.jsxs(x9,{children:[o.jsx(ZI,{}),o.jsxs(Vj,{ref:s,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,o.jsxs(g9,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(ao,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jf.displayName=Vj.displayName;const Zf=({className:n,...e})=>o.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});Zf.displayName="DialogHeader";const em=w.forwardRef(({className:n,...e},t)=>o.jsx(QI,{ref:t,className:ne("text-lg font-semibold leading-none tracking-tight",n),...e}));em.displayName=QI.displayName;const y9=w.forwardRef(({className:n,...e},t)=>o.jsx(JI,{ref:t,className:ne("text-sm text-muted-foreground",n),...e}));y9.displayName=JI.displayName;var b9="Label",eD=w.forwardRef((n,e)=>o.jsx(le.label,{...n,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=n.onMouseDown)==null||r.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));eD.displayName=b9;var tD=eD;const w9=wv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ve=w.forwardRef(({className:n,...e},t)=>o.jsx(tD,{ref:t,className:ne(w9(),n),...e}));ve.displayName=tD.displayName;const Pv=w.forwardRef(({className:n,...e},t)=>o.jsx("textarea",{className:ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Pv.displayName="Textarea";const rk=({onCourseAdded:n})=>{const{user:e}=Ql(),[t,s]=w.useState(!1),[r,i]=w.useState(!1),[a,l]=w.useState({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),c=["Chirurgie","Notfallmedizin","Radiologie","Anästhesie","Innere Medizin","Pädiatrie","Gynäkologie","Orthopädie","Urologie","Dermatologie","Neurologie","Psychiatrie","Ethik","Kommunikation","Forschung","Digital Health","Qualitätsmanagement","Grundlagen","Sonstiges"],d=(f,m)=>{l(p=>({...p,[f]:m}))},h=async f=>{if(f.preventDefault(),!e){xe.error("Sie müssen angemeldet sein, um Kurse hinzuzufügen");return}i(!0);try{const m={...a,user_id:e.id,points:Number(a.points),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:p,error:x}=await te.from("user_courses").insert([m]).select().single();if(x)throw x;xe.success("Kurs erfolgreich hinzugefügt!"),s(!1),l({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),n&&n(p)}catch(m){console.error("Error adding course:",m),xe.error("Fehler beim Hinzufügen des Kurses")}finally{i(!1)}};return o.jsxs(kv,{open:t,onOpenChange:s,children:[o.jsx(v9,{asChild:!0,children:o.jsxs(q,{className:"gap-2",children:[o.jsx(Wi,{className:"w-4 h-4"}),"Kurs hinzufügen"]})}),o.jsxs(Jf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[o.jsx(Zf,{children:o.jsxs(em,{className:"flex items-center gap-2",children:[o.jsx(Qr,{className:"w-5 h-5"}),"Neuen Kurs hinzufügen"]})}),o.jsxs("form",{onSubmit:h,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"title",children:"Kurs-Titel *"}),o.jsx(Re,{id:"title",value:a.title,onChange:f=>d("title",f.target.value),placeholder:"z.B. Advanced Laparoscopy Workshop",required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"category",children:"Kategorie *"}),o.jsxs(Fs,{value:a.category,onValueChange:f=>d("category",f),children:[o.jsx(os,{children:o.jsx($s,{placeholder:"Kategorie wählen"})}),o.jsx(ls,{children:c.map(f=>o.jsx(Qe,{value:f,children:f},f))})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"description",children:"Beschreibung"}),o.jsx(Pv,{id:"description",value:a.description,onChange:f=>d("description",f.target.value),placeholder:"Kurze Beschreibung des Kurses...",rows:3})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"date",children:"Datum *"}),o.jsx(Re,{id:"date",type:"date",value:a.date,onChange:f=>d("date",f.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"location",children:"Ort"}),o.jsx(Re,{id:"location",value:a.location,onChange:f=>d("location",f.target.value),placeholder:"z.B. Zürich"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"duration",children:"Dauer"}),o.jsx(Re,{id:"duration",value:a.duration,onChange:f=>d("duration",f.target.value),placeholder:"z.B. 2 Tage"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"type",children:"Typ *"}),o.jsxs(Fs,{value:a.type,onValueChange:f=>d("type",f),children:[o.jsx(os,{children:o.jsx($s,{})}),o.jsxs(ls,{children:[o.jsx(Qe,{value:"required",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pf,{className:"w-4 h-4 text-yellow-500"}),"Pflichtkurs"]})}),o.jsx(Qe,{value:"optional",children:"Optional"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"status",children:"Status *"}),o.jsxs(Fs,{value:a.status,onValueChange:f=>d("status",f),children:[o.jsx(os,{children:o.jsx($s,{})}),o.jsxs(ls,{children:[o.jsx(Qe,{value:"completed",children:"Abgeschlossen"}),o.jsx(Qe,{value:"in-progress",children:"Läuft"}),o.jsx(Qe,{value:"upcoming",children:"Geplant"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"points",children:"CME Punkte"}),o.jsx(Re,{id:"points",type:"number",min:"0",max:"50",value:a.points,onChange:f=>d("points",Number(f.target.value)),placeholder:"0"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"provider",children:"Anbieter"}),o.jsx(Re,{id:"provider",value:a.provider,onChange:f=>d("provider",f.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"certificate_url",children:"Zertifikat URL"}),o.jsx(Re,{id:"certificate_url",type:"url",value:a.certificate_url,onChange:f=>d("certificate_url",f.target.value),placeholder:"https://..."})]})]}),o.jsxs(Y,{className:"border-dashed",children:[o.jsx(Je,{children:o.jsx(st,{className:"text-sm",children:"Vorschau"})}),o.jsx(Ae,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.type==="required"&&o.jsx(Pf,{className:"w-4 h-4 text-yellow-500 fill-current"}),o.jsx("h3",{className:`font-semibold ${a.type==="required"?"font-bold":"font-medium"}`,children:a.title||"Kurs-Titel"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a.category||"Kategorie"}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.date&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Vn,{className:"w-4 h-4"}),o.jsx("span",{children:new Date(a.date).toLocaleDateString("de-DE")})]}),a.location&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Sp,{className:"w-4 h-4"}),o.jsx("span",{children:a.location})]}),a.duration&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_v,{className:"w-4 h-4"}),o.jsx("span",{children:a.duration})]})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsx(oe,{variant:a.status==="completed"?"default":"outline",children:a.status==="completed"?"Abgeschlossen":a.status==="in-progress"?"Läuft":"Geplant"}),a.points>0&&o.jsxs(oe,{variant:"secondary",className:"text-xs",children:[a.points," CME"]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsxs(q,{type:"button",variant:"outline",onClick:()=>s(!1),children:[o.jsx(ao,{className:"w-4 h-4 mr-2"}),"Abbrechen"]}),o.jsx(q,{type:"submit",disabled:r||!a.title||!a.date,children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Speichern..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ab,{className:"w-4 h-4 mr-2"}),"Speichern"]})})]})]})]})]})};function _9(){const{user:n}=Ql(),[e,t]=NB(),[s,r]=w.useState([]),[i,a]=w.useState([]),[l,c]=w.useState(!0),[d,h]=w.useState(e.get("search")||""),[f,m]=w.useState(e.get("country")||""),[p,x]=w.useState(e.get("specialty")||""),[g,b]=w.useState(e.get("modality")||""),[v,y]=w.useState(e.get("price")||""),[_,N]=w.useState("grid"),[j,A]=w.useState("available"),E=["Switzerland","Germany","Austria","France","Italy"],P=["Cardiology","Surgery","Neurology","Radiology","Emergency Medicine","Internal Medicine"],T=["Online","In-Person","Hybrid"],I=[{label:"Free",value:"0"},{label:"Under 100 CHF",value:"0-100"},{label:"100-500 CHF",value:"100-500"},{label:"500-1000 CHF",value:"500-1000"},{label:"Over 1000 CHF",value:"1000+"}];w.useEffect(()=>{let R=!0;return(async()=>{R&&(await M(),n&&R&&await L())})(),()=>{R=!1}},[n]);const M=w.useCallback(async()=>{c(!0);try{let R=te.from("courses").select("*").eq("status","published").order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});if(d&&(R=R.or(`title.ilike.%${d}%,description.ilike.%${d}%`)),f&&(R=R.eq("country",f)),p&&(R=R.eq("specialty",p)),g&&(R=R.eq("modality",g)),v)if(v==="0")R=R.eq("price",0);else if(v.includes("-")){const[B,V]=v.split("-").map(Number);R=R.gte("price",B).lte("price",V)}else v==="1000+"&&(R=R.gte("price",1e3));const{data:U,error:X}=await R;if(X)throw X;r(U||[])}catch(R){console.error("Error fetching courses:",R),r([{id:"demo-1",title:"Suturing Basics",description:"Grundlagen der Nahttechniken",price:0,currency:"CHF",modality:"In-Person",city:"Zürich",country:"Switzerland",specialty:"Surgery",language:"DE",difficulty_level:"Beginner",tags:["Hands-on","Workshop"],average_rating:4.5,total_reviews:12,is_featured:!0,cover_image_url:"",cme_points:4,points:0,capacity:20,has_certificate:!0,provider_id:"demo"}])}finally{c(!1)}},[d,f,p,g,v]),L=w.useCallback(async()=>{if(n)try{const{data:R,error:U}=await te.from("user_courses").select("*").eq("user_id",n.id).order("date",{ascending:!1});if(U)throw U;a(R||[])}catch(R){console.error("Error fetching user courses:",R)}},[n]),z=R=>{a(U=>[R,...U])},$=(R,U)=>{const X=new URLSearchParams(e);U?X.set(R,U):X.delete(R),t(X)},W=()=>{h(""),m(""),x(""),b(""),y(""),t({})},F=(R,U)=>R===0?"Free":`${R} ${U}`,O=R=>Array.from({length:5},(U,X)=>o.jsx(Pf,{className:`h-4 w-4 ${X<Math.floor(R)?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`},X)),D=({course:R})=>o.jsxs(Y,{className:"group hover:shadow-lg transition-all duration-200 border-accent/20",children:[R.is_featured&&o.jsx("div",{className:"bg-gradient-to-r from-medical-primary to-swiss-blue text-white text-xs px-2 py-1 rounded-t-md font-medium",children:"Featured Course"}),o.jsxs("div",{className:"relative overflow-hidden rounded-t-md",children:[R.cover_image_url?o.jsx("img",{src:R.cover_image_url,alt:R.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200"}):o.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 flex items-center justify-center",children:o.jsx("div",{className:"text-6xl text-medical-primary opacity-30",children:"📚"})}),R.modality&&o.jsx(oe,{variant:"secondary",className:"absolute top-2 left-2 bg-background/90 backdrop-blur-sm",children:R.modality})]}),o.jsxs(Je,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx(st,{className:"text-lg font-semibold group-hover:text-medical-primary transition-colors line-clamp-2",children:R.title}),R.has_certificate&&o.jsx(oe,{variant:"outline",className:"shrink-0 text-xs",children:"Certificate"})]}),o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[O(R.average_rating),o.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["(",R.total_reviews," reviews)"]})]})]}),o.jsxs(Ae,{className:"pb-2",children:[o.jsx(rp,{className:"line-clamp-2 mb-3",children:R.description}),o.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[R.city&&R.country&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Sp,{className:"h-4 w-4"}),o.jsxs("span",{children:[R.city,", ",R.country]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[R.cme_points>0&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(_v,{className:"h-4 w-4"}),o.jsxs("span",{children:[R.cme_points," CME"]})]}),R.capacity&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Hf,{className:"h-4 w-4"}),o.jsxs("span",{children:["Max ",R.capacity]})]})]})]}),R.tags&&R.tags.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[R.tags.slice(0,3).map((U,X)=>o.jsx(oe,{variant:"outline",className:"text-xs",children:U},X)),R.tags.length>3&&o.jsxs(oe,{variant:"outline",className:"text-xs",children:["+",R.tags.length-3]})]})]}),o.jsx(KR,{className:"pt-0",children:o.jsxs("div",{className:"flex items-center justify-between w-full",children:[o.jsx("div",{className:"text-2xl font-bold text-medical-primary",children:F(R.price,R.currency)}),o.jsx(Zn,{to:`/courses/${R.id}`,children:o.jsx(q,{variant:"medical",size:"sm",children:"View Details"})})]})})]});return o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Medizinische Kurse"}),o.jsx("p",{className:"text-muted-foreground",children:"Entdecken Sie FMH-konforme Fortbildungsmöglichkeiten"})]}),o.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[n&&o.jsx(rk,{onCourseAdded:z}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[o.jsx(A$,{className:"w-4 h-4"}),"Filter"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[o.jsx(Vn,{className:"w-4 h-4"}),"Kalender"]})]})]}),o.jsxs(gr,{value:j,onValueChange:R=>A(R),className:"mb-8",children:[o.jsxs(qs,{className:"grid w-full grid-cols-2",children:[o.jsx(He,{value:"available",children:"Verfügbare Kurse"}),o.jsxs(He,{value:"my-courses",children:["Meine Kurse (",i.length,")"]})]}),o.jsxs(Ge,{value:"available",className:"mt-6",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(GT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),o.jsx(Re,{placeholder:"Search courses...",value:d,onChange:R=>{h(R.target.value),$("search",R.target.value)},className:"pl-10"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsxs(Fs,{value:f,onValueChange:R=>{m(R),$("country",R)},children:[o.jsx(os,{className:"w-[150px]",children:o.jsx($s,{placeholder:"Country"})}),o.jsx(ls,{children:E.map(R=>o.jsx(Qe,{value:R,children:R},R))})]}),o.jsxs(Fs,{value:p,onValueChange:R=>{x(R),$("specialty",R)},children:[o.jsx(os,{className:"w-[150px]",children:o.jsx($s,{placeholder:"Specialty"})}),o.jsx(ls,{children:P.map(R=>o.jsx(Qe,{value:R,children:R},R))})]}),o.jsxs(Fs,{value:g,onValueChange:R=>{b(R),$("modality",R)},children:[o.jsx(os,{className:"w-[120px]",children:o.jsx($s,{placeholder:"Format"})}),o.jsx(ls,{children:T.map(R=>o.jsx(Qe,{value:R,children:R},R))})]}),o.jsxs(Fs,{value:v,onValueChange:R=>{y(R),$("price",R)},children:[o.jsx(os,{className:"w-[140px]",children:o.jsx($s,{placeholder:"Price Range"})}),o.jsx(ls,{children:I.map(R=>o.jsx(Qe,{value:R.value,children:R.label},R.value))})]}),(d||f||p||g||v)&&o.jsx(q,{variant:"outline",onClick:W,size:"sm",children:"Clear Filters"})]})]})}),o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Course Marketplace",!l&&o.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",s.length," courses)"]})]}),o.jsx(gr,{value:_,onValueChange:R=>N(R),children:o.jsxs(qs,{children:[o.jsx(He,{value:"grid",children:"Grid"}),o.jsx(He,{value:"list",children:"List"})]})})]}),l?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((R,U)=>o.jsxs(Y,{className:"animate-pulse",children:[o.jsx("div",{className:"h-48 bg-muted rounded-t-md"}),o.jsxs(Je,{children:[o.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),o.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),o.jsx(Ae,{children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-3 bg-muted rounded"}),o.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},U))}):s.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📚"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No courses found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or clear filters to see more results."}),o.jsx(q,{onClick:W,variant:"outline",children:"Clear All Filters"})]}):o.jsx("div",{className:_==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:s.map(R=>o.jsx(D,{course:R},R.id))})]}),o.jsx(Ge,{value:"my-courses",className:"mt-6",children:n?o.jsx("div",{children:i.length>0?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(R=>o.jsx(D,{course:R},R.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:"📚"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Noch keine Kurse hinzugefügt"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Fügen Sie Ihren ersten Kurs hinzu, um Ihre Fortbildung zu verfolgen."}),o.jsx(rk,{onCourseAdded:z})]})}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Anmeldung erforderlich"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Melden Sie sich an, um Ihre Kurse zu verwalten."}),o.jsx(q,{asChild:!0,children:o.jsx("a",{href:"/auth",children:"Anmelden"})})]})})]})]})]})}var S9="Separator",ik="horizontal",N9=["horizontal","vertical"],nD=w.forwardRef((n,e)=>{const{decorative:t,orientation:s=ik,...r}=n,i=j9(s)?s:ik,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(le.div,{"data-orientation":i,...l,...r,ref:e})});nD.displayName=S9;function j9(n){return N9.includes(n)}var sD=nD;const rD=w.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...s},r)=>o.jsx(sD,{ref:r,decorative:t,orientation:e,className:ne("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...s}));rD.displayName=sD.displayName;var iD={exports:{}},aD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf=w;function E9(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var A9=typeof Object.is=="function"?Object.is:E9,C9=Mf.useState,k9=Mf.useEffect,P9=Mf.useLayoutEffect,T9=Mf.useDebugValue;function R9(n,e){var t=e(),s=C9({inst:{value:t,getSnapshot:e}}),r=s[0].inst,i=s[1];return P9(function(){r.value=t,r.getSnapshot=e,Hw(r)&&i({inst:r})},[n,t,e]),k9(function(){return Hw(r)&&i({inst:r}),n(function(){Hw(r)&&i({inst:r})})},[n]),T9(t),t}function Hw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!A9(n,t)}catch{return!0}}function M9(n,e){return e()}var I9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?M9:R9;aD.useSyncExternalStore=Mf.useSyncExternalStore!==void 0?Mf.useSyncExternalStore:I9;iD.exports=aD;var D9=iD.exports;function O9(){return D9.useSyncExternalStore(L9,()=>!0,()=>!1)}function L9(){return()=>{}}var qj="Avatar",[F9,BQ]=si(qj),[$9,oD]=F9(qj),lD=w.forwardRef((n,e)=>{const{__scopeAvatar:t,...s}=n,[r,i]=w.useState("idle");return o.jsx($9,{scope:t,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:o.jsx(le.span,{...s,ref:e})})});lD.displayName=qj;var cD="AvatarImage",dD=w.forwardRef((n,e)=>{const{__scopeAvatar:t,src:s,onLoadingStatusChange:r=()=>{},...i}=n,a=oD(cD,t),l=z9(s,i),c=Lt(d=>{r(d),a.onImageLoadingStatusChange(d)});return Tt(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(le.img,{...i,ref:e,src:s}):null});dD.displayName=cD;var uD="AvatarFallback",hD=w.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:s,...r}=n,i=oD(uD,t),[a,l]=w.useState(s===void 0);return w.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(le.span,{...r,ref:e}):null});hD.displayName=uD;function ak(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function z9(n,{referrerPolicy:e,crossOrigin:t}){const s=O9(),r=w.useRef(null),i=s?(r.current||(r.current=new window.Image),r.current):null,[a,l]=w.useState(()=>ak(i,n));return Tt(()=>{l(ak(i,n))},[i,n]),Tt(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,t,e]),a}var fD=lD,mD=dD,pD=hD;const gD=w.forwardRef(({className:n,...e},t)=>o.jsx(fD,{ref:t,className:ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));gD.displayName=fD.displayName;const vD=w.forwardRef(({className:n,...e},t)=>o.jsx(mD,{ref:t,className:ne("aspect-square h-full w-full",n),...e}));vD.displayName=mD.displayName;const xD=w.forwardRef(({className:n,...e},t)=>o.jsx(pD,{ref:t,className:ne("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));xD.displayName=pD.displayName;var Gj="Progress",Kj=100,[B9,UQ]=si(Gj),[U9,H9]=B9(Gj),yD=w.forwardRef((n,e)=>{const{__scopeProgress:t,value:s=null,max:r,getValueLabel:i=W9,...a}=n;(r||r===0)&&!ok(r)&&console.error(V9(`${r}`,"Progress"));const l=ok(r)?r:Kj;s!==null&&!lk(s,l)&&console.error(q9(`${s}`,"Progress"));const c=lk(s,l)?s:null,d=ly(c)?i(c,l):void 0;return o.jsx(U9,{scope:t,value:c,max:l,children:o.jsx(le.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":ly(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":_D(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});yD.displayName=Gj;var bD="ProgressIndicator",wD=w.forwardRef((n,e)=>{const{__scopeProgress:t,...s}=n,r=H9(bD,t);return o.jsx(le.div,{"data-state":_D(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...s,ref:e})});wD.displayName=bD;function W9(n,e){return`${Math.round(n/e*100)}%`}function _D(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function ly(n){return typeof n=="number"}function ok(n){return ly(n)&&!isNaN(n)&&n>0}function lk(n,e){return ly(n)&&!isNaN(n)&&n<=e&&n>=0}function V9(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Kj}\`.`}function q9(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Kj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var SD=yD,G9=wD;const $l=w.forwardRef(({className:n,value:e,...t},s)=>o.jsx(SD,{ref:s,className:ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:o.jsx(G9,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));$l.displayName=SD.displayName;function K9(){const{id:n}=bR(),[e,t]=w.useState(null),[s,r]=w.useState([]),[i,a]=w.useState([]),[l,c]=w.useState([]),[d,h]=w.useState([]),[f,m]=w.useState(!0),[p,x]=w.useState(!1),[g,b]=w.useState("");w.useState({rating:5,comment:""});const[v,y]=w.useState(!1);w.useEffect(()=>{n&&_()},[n,_]);const _=w.useCallback(async()=>{if(n){m(!0);try{const{data:T,error:I}=await te.from("courses").select("*").eq("id",n).eq("status","published").single();if(I)throw I;t(T);const{data:M}=await te.from("course_sessions").select("*").eq("course_id",n).order("start_date",{ascending:!0});r(M||[]);const{data:L}=await te.from("course_videos").select(`
          *,
          videos (
            title,
            description,
            duration,
            thumbnail_url
          )
        `).eq("course_id",n).order("order_index",{ascending:!0});a(L||[]);const{data:z}=await te.from("course_materials").select("*").eq("course_id",n);c(z||[]);const{data:$}=await te.from("course_reviews").select("*").eq("course_id",n).order("created_at",{ascending:!1}),W=($||[]).map(O=>({...O,profiles:{full_name:"Course Participant",avatar_url:""}}));h(W);const{data:{user:F}}=await te.auth.getUser();if(F){const{data:O}=await te.from("course_enrollments").select("status").eq("course_id",n).eq("user_id",F.id).single();y(!!O)}}catch(T){console.error("Error fetching course details:",T),xe.error("Failed to load course details")}finally{m(!1)}}},[n]),N=async()=>{if(!e||!g){xe.error("Please select a session");return}x(!0);try{const{data:{user:T}}=await te.auth.getUser();if(!T){xe.error("Please log in to enroll");return}const{error:I}=await te.from("course_enrollments").insert({course_id:e.id,user_id:T.id,status:"enrolled"});if(I)throw I;const{error:M}=await te.from("payments").insert({user_id:T.id,course_id:e.id,session_id:g,amount:e.price,currency:e.currency,status:"pending"});if(M)throw M;xe.success("Successfully enrolled! Payment processing..."),y(!0)}catch(T){console.error("Enrollment error:",T),xe.error("Failed to enroll in course")}finally{x(!1)}},j=(T,I)=>T===0?"Free":`${T} ${I}`,A=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=T=>{if(T===0)return"0 Bytes";const I=1024,M=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(T)/Math.log(I));return parseFloat((T/Math.pow(I,L)).toFixed(2))+" "+M[L]},P=(T,I=!1,M)=>Array.from({length:5},(L,z)=>o.jsx(Pf,{className:`h-4 w-4 cursor-pointer ${z<T?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`,onClick:()=>I&&M&&M(z+1)},z));return f?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"animate-pulse space-y-6",children:[o.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),o.jsx("div",{className:"h-64 bg-muted rounded"}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[o.jsx("div",{className:"h-6 bg-muted rounded"}),o.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),o.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),o.jsx("div",{className:"h-96 bg-muted rounded"})]})]})})]}):e?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"mb-6",children:o.jsxs(Zn,{to:"/courses",className:"inline-flex items-center text-muted-foreground hover:text-foreground",children:[o.jsx(JA,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o.jsxs("div",{className:"relative",children:[e.cover_image_url?o.jsx("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-64 object-cover rounded-lg"}):o.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 rounded-lg flex items-center justify-center",children:o.jsx("div",{className:"text-8xl text-medical-primary opacity-30",children:"📚"})}),o.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[o.jsx(q,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:o.jsx(k$,{className:"h-4 w-4"})}),o.jsx(q,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:o.jsx(hj,{className:"h-4 w-4"})})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),o.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[P(e.average_rating),o.jsxs("span",{className:"ml-1",children:["(",e.total_reviews," reviews)"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Sp,{className:"h-4 w-4"}),o.jsxs("span",{children:[e.city,", ",e.country]})]})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.modality&&o.jsx(oe,{variant:"secondary",children:e.modality}),e.difficulty_level&&o.jsx(oe,{variant:"outline",children:e.difficulty_level}),e.has_certificate&&o.jsxs(oe,{variant:"outline",children:[o.jsx(Hi,{className:"h-3 w-3 mr-1"}),"Certificate"]})]})]}),o.jsx("p",{className:"text-muted-foreground mb-6",children:e.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[o.jsx(_v,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),o.jsxs("div",{className:"font-semibold",children:[e.cme_points," CME"]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Points"})]}),o.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[o.jsx(Hf,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),o.jsx("div",{className:"font-semibold",children:e.capacity||"Unlimited"}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Capacity"})]}),o.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[o.jsx(Vn,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),o.jsx("div",{className:"font-semibold",children:s.length}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Sessions"})]}),o.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[o.jsx(Pf,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),o.jsx("div",{className:"font-semibold",children:e.average_rating.toFixed(1)}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]})]}),o.jsxs(gr,{defaultValue:"overview",className:"w-full",children:[o.jsxs(qs,{className:"grid w-full grid-cols-4",children:[o.jsx(He,{value:"overview",children:"Overview"}),o.jsx(He,{value:"content",children:"Content"}),o.jsx(He,{value:"materials",children:"Materials"}),o.jsx(He,{value:"reviews",children:"Reviews"})]}),o.jsxs(Ge,{value:"overview",className:"space-y-6",children:[o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsx(st,{children:"Course Requirements"})}),o.jsx(Ae,{children:o.jsx("p",{children:e.requirements||"No specific requirements"})})]}),e.tags&&e.tags.length>0&&o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsx(st,{children:"Topics Covered"})}),o.jsx(Ae,{children:o.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((T,I)=>o.jsx(oe,{variant:"outline",children:T},I))})})]})]}),o.jsx(Ge,{value:"content",className:"space-y-4",children:i.length>0?i.map((T,I)=>o.jsx(Y,{children:o.jsx(Ae,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:T.videos.thumbnail_url||"/placeholder.svg",alt:T.videos.title,className:"w-24 h-16 object-cover rounded"}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(qT,{className:"h-6 w-6 text-white drop-shadow-lg"})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold",children:T.videos.title}),o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.videos.description}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.jsxs("span",{children:[Math.floor(T.videos.duration/60)," min"]}),o.jsx(oe,{variant:T.is_preview?"secondary":"outline",className:"text-xs",children:T.is_preview?"Free Preview":"Premium"})]})]})]})})},T.id)):o.jsx(Y,{children:o.jsxs(Ae,{className:"p-8 text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:"🎥"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No video content available"}),o.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include video lessons."})]})})}),o.jsx(Ge,{value:"materials",className:"space-y-4",children:l.length>0?l.map(T=>o.jsx(Y,{children:o.jsx(Ae,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(uj,{className:"h-5 w-5 text-medical-primary"}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:T.title}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.description," • ",E(T.file_size)," • ",T.file_type.toUpperCase()]})]})]}),o.jsx(oe,{variant:T.is_preview?"secondary":"outline",children:T.is_preview?"Free":"Premium"})]})})},T.id)):o.jsx(Y,{children:o.jsxs(Ae,{className:"p-8 text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:"📄"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No materials available"}),o.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include downloadable materials."})]})})}),o.jsx(Ge,{value:"reviews",className:"space-y-4",children:d.length>0?d.map(T=>o.jsx(Y,{children:o.jsx(Ae,{className:"p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsxs(gD,{children:[o.jsx(vD,{src:T.profiles.avatar_url}),o.jsx(xD,{children:T.profiles.full_name.charAt(0)})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"font-semibold",children:T.profiles.full_name}),o.jsx("div",{className:"flex items-center",children:P(T.rating)}),o.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(T.created_at).toLocaleDateString()})]}),o.jsx("p",{className:"text-muted-foreground",children:T.comment})]})]})})},T.id)):o.jsx(Y,{children:o.jsxs(Ae,{className:"p-8 text-center",children:[o.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No reviews yet"}),o.jsx("p",{className:"text-muted-foreground",children:"Be the first to review this course!"})]})})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center justify-between",children:[o.jsx("span",{children:"Enroll Now"}),o.jsx("span",{className:"text-2xl font-bold text-medical-primary",children:j(e.price,e.currency)})]})}),o.jsxs(Ae,{className:"space-y-4",children:[v?o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"text-green-600 font-semibold mb-2",children:"✓ Already Enrolled"}),o.jsx(q,{variant:"outline",className:"w-full",children:"Go to Course"})]}):o.jsxs(o.Fragment,{children:[s.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Session:"}),o.jsxs("select",{className:"w-full p-2 border rounded-md",value:g,onChange:T=>b(T.target.value),children:[o.jsx("option",{value:"",children:"Choose a session"}),s.map(T=>o.jsxs("option",{value:T.id,children:[A(T.start_date),T.location&&` - ${T.location}`]},T.id))]})]}),o.jsx(q,{className:"w-full",variant:"medical",onClick:N,disabled:p||s.length>0&&!g,children:p?"Processing...":"Enroll Now"})]}),o.jsx(rD,{}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Language:"}),o.jsx("span",{className:"font-medium",children:e.language})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Specialty:"}),o.jsx("span",{className:"font-medium",children:e.specialty})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Level:"}),o.jsx("span",{className:"font-medium capitalize",children:e.difficulty_level})]})]})]})]}),s.length>0&&o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsx(st,{children:"Upcoming Sessions"})}),o.jsx(Ae,{className:"space-y-3",children:s.slice(0,3).map(T=>o.jsxs("div",{className:"p-3 border rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(Vn,{className:"h-4 w-4 text-medical-primary"}),o.jsx("span",{className:"font-medium text-sm",children:A(T.start_date)})]}),T.location&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[o.jsx(Sp,{className:"h-3 w-3"}),o.jsx("span",{children:T.location})]}),o.jsxs("div",{className:"mt-2",children:[o.jsx($l,{value:T.current_participants/T.max_participants*100,className:"h-2"}),o.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[T.current_participants,"/",T.max_participants," enrolled"]})]})]},T.id))})]})]})]})]})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"text-center py-12",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Course not found"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"The course you're looking for doesn't exist or has been removed."}),o.jsx(Zn,{to:"/courses",children:o.jsxs(q,{variant:"outline",children:[o.jsx(JA,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})]})})]})}const If=w.forwardRef(({className:n,...e},t)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:t,className:ne("w-full caption-bottom text-sm",n),...e})}));If.displayName="Table";const Df=w.forwardRef(({className:n,...e},t)=>o.jsx("thead",{ref:t,className:ne("[&_tr]:border-b",n),...e}));Df.displayName="TableHeader";const Of=w.forwardRef(({className:n,...e},t)=>o.jsx("tbody",{ref:t,className:ne("[&_tr:last-child]:border-0",n),...e}));Of.displayName="TableBody";const Y9=w.forwardRef(({className:n,...e},t)=>o.jsx("tfoot",{ref:t,className:ne("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));Y9.displayName="TableFooter";const qr=w.forwardRef(({className:n,...e},t)=>o.jsx("tr",{ref:t,className:ne("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));qr.displayName="TableRow";const Oe=w.forwardRef(({className:n,...e},t)=>o.jsx("th",{ref:t,className:ne("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Oe.displayName="TableHead";const Le=w.forwardRef(({className:n,...e},t)=>o.jsx("td",{ref:t,className:ne("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));Le.displayName="TableCell";const X9=w.forwardRef(({className:n,...e},t)=>o.jsx("caption",{ref:t,className:ne("mt-4 text-sm text-muted-foreground",n),...e}));X9.displayName="TableCaption";const Q9=({moduleKey:n,onClose:e})=>{const[t,s]=w.useState(null),[r,i]=w.useState([]),[a,l]=w.useState(!0),[c,d]=w.useState(4),h=w.useCallback(async()=>{try{l(!0);const{data:{user:v}}=await te.auth.getUser();if(!v)return;const{data:y}=await te.from("profiles").select("pgy_level").eq("user_id",v.id).single();y!=null&&y.pgy_level&&d(y.pgy_level);const{data:_}=await te.from("procedure_categories").select("*").eq("key",n).single();_&&s({id:_.id,title_de:_.title_de,minimum_required:_.minimum_required});const{data:N}=await te.rpc("get_module_progress",{user_id_param:v.id,module_key:n}),{data:j}=await te.from("procedures").select(`
          id,
          code,
          title_de,
          min_required_by_pgy
        `).eq("category_id",_==null?void 0:_.id).eq("active",!0),A=[];for(const E of j||[]){const{data:P}=await te.from("procedure_logs").select("*").eq("procedure_id",E.id).eq("user_id",v.id).order("performed_date",{ascending:!1}),T=(P==null?void 0:P.filter(z=>z.role_in_surgery==="primary"||z.role_in_surgery==="responsible").length)||0,I=(P==null?void 0:P.filter(z=>z.role_in_surgery==="instructing").length)||0,M=(P==null?void 0:P.filter(z=>z.role_in_surgery==="assistant"||z.role_in_surgery==="assist").length)||0,L=T*1+I*.75+M*.5;A.push({...E,responsible_count:T,instructing_count:I,assistant_count:M,weighted_score:L,logs:P||[]})}i(A)}catch(v){console.error("Error loading module details:",v)}finally{l(!1)}},[n]);w.useEffect(()=>{h()},[h]);const f=v=>({basis_notfall:"coral",basis_allgemein:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[v]||"mint",m=v=>{var y;return((y=v.min_required_by_pgy)==null?void 0:y[`pgy${c}`])??0},p=v=>{const y=m(v);return y===0?0:Math.min(100,v.weighted_score/y*100)},x=r.reduce((v,y)=>v+y.weighted_score,0),g=(t==null?void 0:t.minimum_required)||0,b=g>0?Math.min(100,x/g*100):0;return a?o.jsx(Y,{className:"medical-card mb-8",children:o.jsx(Ae,{className:"p-8",children:o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):o.jsxs(Y,{className:"medical-card mb-8",children:[o.jsxs(Je,{className:"flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Ev,{progress:b,variant:f(n),size:80,strokeWidth:6,showPercentage:!0}),o.jsxs("div",{children:[o.jsx(st,{className:"text-xl text-card-foreground",children:t==null?void 0:t.title_de}),o.jsxs("p",{className:"text-muted-foreground",children:[x.toFixed(1)," / ",g," Punkte (gewichtet)"]})]})]}),o.jsx(q,{variant:"ghost",size:"sm",onClick:e,children:o.jsx(ao,{className:"w-4 h-4"})})]}),o.jsx(Ae,{children:o.jsxs(gr,{defaultValue:"overview",className:"w-full",children:[o.jsxs(qs,{className:"grid w-full grid-cols-3",children:[o.jsx(He,{value:"overview",children:"Übersicht"}),o.jsx(He,{value:"procedures",children:"Prozeduren"}),o.jsx(He,{value:"timeline",children:"Verlauf"})]}),o.jsx(Ge,{value:"overview",className:"mt-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs(Y,{className:"p-4",children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Rollenverteilung"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm",children:"Verantwortlich:"}),o.jsx(oe,{variant:"default",children:r.reduce((v,y)=>v+y.responsible_count,0)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm",children:"Instruierend:"}),o.jsx(oe,{variant:"secondary",children:r.reduce((v,y)=>v+y.instructing_count,0)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-sm",children:"Assistent:"}),o.jsx(oe,{variant:"outline",children:r.reduce((v,y)=>v+y.assistant_count,0)})]})]})]}),o.jsxs(Y,{className:"p-4",children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Modulfortschritt"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsx("span",{children:"Erfüllung"}),o.jsxs("span",{children:[b.toFixed(1),"%"]})]}),o.jsx($l,{value:b,className:"h-2"})]}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Gewichtung: V=1.0, I=0.75, A=0.5"})]})]}),o.jsxs(Y,{className:"p-4",children:[o.jsx("h4",{className:"font-semibold mb-3",children:"Statistiken"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Prozeduren:"}),o.jsx("span",{children:r.length})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Eingriffe total:"}),o.jsx("span",{children:r.reduce((v,y)=>v+y.responsible_count+y.instructing_count+y.assistant_count,0)})]}),o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{children:"Punkte total:"}),o.jsx("span",{children:x.toFixed(1)})]})]})]})]})}),o.jsx(Ge,{value:"procedures",className:"mt-6",children:o.jsxs(If,{children:[o.jsx(Df,{children:o.jsxs(qr,{children:[o.jsx(Oe,{children:"Prozedur"}),o.jsxs(Oe,{className:"text-center",children:["Soll PGY-",c]}),o.jsx(Oe,{className:"text-center",children:"Ist (gewichtet)"}),o.jsx(Oe,{className:"text-center",children:"V/I/A"}),o.jsx(Oe,{className:"text-center",children:"Fortschritt"}),o.jsx(Oe,{className:"text-center",children:"Status"})]})}),o.jsx(Of,{children:r.map(v=>{const y=m(v),_=p(v),N=y>0&&v.weighted_score<y;return o.jsxs(qr,{children:[o.jsx(Le,{className:"font-medium",children:o.jsxs("div",{children:[o.jsx("div",{children:v.title_de}),o.jsx("div",{className:"text-xs text-muted-foreground",children:v.code})]})}),o.jsx(Le,{className:"text-center",children:y||"-"}),o.jsx(Le,{className:"text-center",children:v.weighted_score.toFixed(1)}),o.jsx(Le,{className:"text-center",children:o.jsxs("div",{className:"flex gap-1 justify-center",children:[o.jsx(oe,{variant:"default",className:"text-xs",children:v.responsible_count}),o.jsx(oe,{variant:"secondary",className:"text-xs",children:v.instructing_count}),o.jsx(oe,{variant:"outline",className:"text-xs",children:v.assistant_count})]})}),o.jsx(Le,{className:"text-center",children:y>0?o.jsxs("div",{className:"w-16 mx-auto",children:[o.jsx($l,{value:_,className:"h-2"}),o.jsxs("div",{className:"text-xs mt-1",children:[_.toFixed(0),"%"]})]}):"-"}),o.jsxs(Le,{className:"text-center",children:[N&&o.jsx(Np,{className:"w-4 h-4 text-orange-500 mx-auto"}),y>0&&v.weighted_score>=y&&o.jsx(oe,{variant:"default",className:"bg-green-500",children:"✓"})]})]},v.id)})})]})}),o.jsx(Ge,{value:"timeline",className:"mt-6",children:o.jsx("div",{className:"space-y-4",children:r.filter(v=>v.logs.length>0).flatMap(v=>v.logs.map(y=>({...y,procedure_title:v.title_de}))).sort((v,y)=>new Date(y.performed_date).getTime()-new Date(v.performed_date).getTime()).slice(0,20).map(v=>o.jsx(Y,{className:"p-4",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:v.procedure_title}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(v.performed_date).toLocaleDateString("de-DE")," • ",v.hospital]}),v.supervisor&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:["Supervisor: ",v.supervisor]})]}),o.jsx(oe,{variant:v.role_in_surgery==="primary"||v.role_in_surgery==="responsible"?"default":v.role_in_surgery==="instructing"?"secondary":"outline",children:v.role_in_surgery==="primary"||v.role_in_surgery==="responsible"?"Verantwortlich":v.role_in_surgery==="instructing"?"Instruierend":"Assistent"})]})},v.id))})})]})})]})};var ck=1,J9=.9,Z9=.8,e7=.17,Ww=.1,Vw=.999,t7=.9999,n7=.99,s7=/[\\\/_+.#"@\[\(\{&]/,r7=/[\\\/_+.#"@\[\(\{&]/g,i7=/[\s-]/,ND=/[\s-]/g;function B_(n,e,t,s,r,i,a){if(i===e.length)return r===n.length?ck:n7;var l=`${r},${i}`;if(a[l]!==void 0)return a[l];for(var c=s.charAt(i),d=t.indexOf(c,r),h=0,f,m,p,x;d>=0;)f=B_(n,e,t,s,d+1,i+1,a),f>h&&(d===r?f*=ck:s7.test(n.charAt(d-1))?(f*=Z9,p=n.slice(r,d-1).match(r7),p&&r>0&&(f*=Math.pow(Vw,p.length))):i7.test(n.charAt(d-1))?(f*=J9,x=n.slice(r,d-1).match(ND),x&&r>0&&(f*=Math.pow(Vw,x.length))):(f*=e7,r>0&&(f*=Math.pow(Vw,d-r))),n.charAt(d)!==e.charAt(i)&&(f*=t7)),(f<Ww&&t.charAt(d-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&t.charAt(d-1)!==s.charAt(i))&&(m=B_(n,e,t,s,d+1,i+2,a),m*Ww>f&&(f=m*Ww)),f>h&&(h=f),d=t.indexOf(c,d+1);return a[l]=h,h}function dk(n){return n.toLowerCase().replace(ND," ")}function a7(n,e,t){return n=t&&t.length>0?`${n+" "+t.join(" ")}`:n,B_(n,e,dk(n),dk(e),0,0,{})}var mm='[cmdk-group=""]',qw='[cmdk-group-items=""]',o7='[cmdk-group-heading=""]',jD='[cmdk-item=""]',uk=`${jD}:not([aria-disabled="true"])`,U_="cmdk-item-select",bu="data-value",l7=(n,e,t)=>a7(n,e,t),ED=w.createContext(void 0),Tv=()=>w.useContext(ED),AD=w.createContext(void 0),Yj=()=>w.useContext(AD),CD=w.createContext(void 0),kD=w.forwardRef((n,e)=>{let t=wu(()=>{var B,V;return{search:"",value:(V=(B=n.value)!=null?B:n.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=wu(()=>new Set),r=wu(()=>new Map),i=wu(()=>new Map),a=wu(()=>new Set),l=PD(n),{label:c,children:d,value:h,onValueChange:f,filter:m,shouldFilter:p,loop:x,disablePointerSelection:g=!1,vimBindings:b=!0,...v}=n,y=qn(),_=qn(),N=qn(),j=w.useRef(null),A=y7();qd(()=>{if(h!==void 0){let B=h.trim();t.current.value=B,E.emit()}},[h]),qd(()=>{A(6,z)},[]);let E=w.useMemo(()=>({subscribe:B=>(a.current.add(B),()=>a.current.delete(B)),snapshot:()=>t.current,setState:(B,V,Q)=>{var J,ce,H,pe;if(!Object.is(t.current[B],V)){if(t.current[B]=V,B==="search")L(),I(),A(1,M);else if(B==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let je=document.getElementById(N);je?je.focus():(J=document.getElementById(y))==null||J.focus()}if(A(7,()=>{var je;t.current.selectedItemId=(je=$())==null?void 0:je.id,E.emit()}),Q||A(5,z),((ce=l.current)==null?void 0:ce.value)!==void 0){let je=V??"";(pe=(H=l.current).onValueChange)==null||pe.call(H,je);return}}E.emit()}},emit:()=>{a.current.forEach(B=>B())}}),[]),P=w.useMemo(()=>({value:(B,V,Q)=>{var J;V!==((J=i.current.get(B))==null?void 0:J.value)&&(i.current.set(B,{value:V,keywords:Q}),t.current.filtered.items.set(B,T(V,Q)),A(2,()=>{I(),E.emit()}))},item:(B,V)=>(s.current.add(B),V&&(r.current.has(V)?r.current.get(V).add(B):r.current.set(V,new Set([B]))),A(3,()=>{L(),I(),t.current.value||M(),E.emit()}),()=>{i.current.delete(B),s.current.delete(B),t.current.filtered.items.delete(B);let Q=$();A(4,()=>{L(),(Q==null?void 0:Q.getAttribute("id"))===B&&M(),E.emit()})}),group:B=>(r.current.has(B)||r.current.set(B,new Set),()=>{i.current.delete(B),r.current.delete(B)}),filter:()=>l.current.shouldFilter,label:c||n["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:y,inputId:N,labelId:_,listInnerRef:j}),[]);function T(B,V){var Q,J;let ce=(J=(Q=l.current)==null?void 0:Q.filter)!=null?J:l7;return B?ce(B,t.current.search,V):0}function I(){if(!t.current.search||l.current.shouldFilter===!1)return;let B=t.current.filtered.items,V=[];t.current.filtered.groups.forEach(J=>{let ce=r.current.get(J),H=0;ce.forEach(pe=>{let je=B.get(pe);H=Math.max(je,H)}),V.push([J,H])});let Q=j.current;W().sort((J,ce)=>{var H,pe;let je=J.getAttribute("id"),Ce=ce.getAttribute("id");return((H=B.get(Ce))!=null?H:0)-((pe=B.get(je))!=null?pe:0)}).forEach(J=>{let ce=J.closest(qw);ce?ce.appendChild(J.parentElement===ce?J:J.closest(`${qw} > *`)):Q.appendChild(J.parentElement===Q?J:J.closest(`${qw} > *`))}),V.sort((J,ce)=>ce[1]-J[1]).forEach(J=>{var ce;let H=(ce=j.current)==null?void 0:ce.querySelector(`${mm}[${bu}="${encodeURIComponent(J[0])}"]`);H==null||H.parentElement.appendChild(H)})}function M(){let B=W().find(Q=>Q.getAttribute("aria-disabled")!=="true"),V=B==null?void 0:B.getAttribute(bu);E.setState("value",V||void 0)}function L(){var B,V,Q,J;if(!t.current.search||l.current.shouldFilter===!1){t.current.filtered.count=s.current.size;return}t.current.filtered.groups=new Set;let ce=0;for(let H of s.current){let pe=(V=(B=i.current.get(H))==null?void 0:B.value)!=null?V:"",je=(J=(Q=i.current.get(H))==null?void 0:Q.keywords)!=null?J:[],Ce=T(pe,je);t.current.filtered.items.set(H,Ce),Ce>0&&ce++}for(let[H,pe]of r.current)for(let je of pe)if(t.current.filtered.items.get(je)>0){t.current.filtered.groups.add(H);break}t.current.filtered.count=ce}function z(){var B,V,Q;let J=$();J&&(((B=J.parentElement)==null?void 0:B.firstChild)===J&&((Q=(V=J.closest(mm))==null?void 0:V.querySelector(o7))==null||Q.scrollIntoView({block:"nearest"})),J.scrollIntoView({block:"nearest"}))}function $(){var B;return(B=j.current)==null?void 0:B.querySelector(`${jD}[aria-selected="true"]`)}function W(){var B;return Array.from(((B=j.current)==null?void 0:B.querySelectorAll(uk))||[])}function F(B){let V=W()[B];V&&E.setState("value",V.getAttribute(bu))}function O(B){var V;let Q=$(),J=W(),ce=J.findIndex(pe=>pe===Q),H=J[ce+B];(V=l.current)!=null&&V.loop&&(H=ce+B<0?J[J.length-1]:ce+B===J.length?J[0]:J[ce+B]),H&&E.setState("value",H.getAttribute(bu))}function D(B){let V=$(),Q=V==null?void 0:V.closest(mm),J;for(;Q&&!J;)Q=B>0?v7(Q,mm):x7(Q,mm),J=Q==null?void 0:Q.querySelector(uk);J?E.setState("value",J.getAttribute(bu)):O(B)}let R=()=>F(W().length-1),U=B=>{B.preventDefault(),B.metaKey?R():B.altKey?D(1):O(1)},X=B=>{B.preventDefault(),B.metaKey?F(0):B.altKey?D(-1):O(-1)};return w.createElement(le.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:B=>{var V;(V=v.onKeyDown)==null||V.call(v,B);let Q=B.nativeEvent.isComposing||B.keyCode===229;if(!(B.defaultPrevented||Q))switch(B.key){case"n":case"j":{b&&B.ctrlKey&&U(B);break}case"ArrowDown":{U(B);break}case"p":case"k":{b&&B.ctrlKey&&X(B);break}case"ArrowUp":{X(B);break}case"Home":{B.preventDefault(),F(0);break}case"End":{B.preventDefault(),R();break}case"Enter":{B.preventDefault();let J=$();if(J){let ce=new Event(U_);J.dispatchEvent(ce)}}}}},w.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:w7},c),Tb(n,B=>w.createElement(AD.Provider,{value:E},w.createElement(ED.Provider,{value:P},B))))}),c7=w.forwardRef((n,e)=>{var t,s;let r=qn(),i=w.useRef(null),a=w.useContext(CD),l=Tv(),c=PD(n),d=(s=(t=c.current)==null?void 0:t.forceMount)!=null?s:a==null?void 0:a.forceMount;qd(()=>{if(!d)return l.item(r,a==null?void 0:a.id)},[d]);let h=TD(r,i,[n.value,n.children,i],n.keywords),f=Yj(),m=zl(A=>A.value&&A.value===h.current),p=zl(A=>d||l.filter()===!1?!0:A.search?A.filtered.items.get(r)>0:!0);w.useEffect(()=>{let A=i.current;if(!(!A||n.disabled))return A.addEventListener(U_,x),()=>A.removeEventListener(U_,x)},[p,n.onSelect,n.disabled]);function x(){var A,E;g(),(E=(A=c.current).onSelect)==null||E.call(A,h.current)}function g(){f.setState("value",h.current,!0)}if(!p)return null;let{disabled:b,value:v,onSelect:y,forceMount:_,keywords:N,...j}=n;return w.createElement(le.div,{ref:$d(i,e),...j,id:r,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!m,"data-disabled":!!b,"data-selected":!!m,onPointerMove:b||l.getDisablePointerSelection()?void 0:g,onClick:b?void 0:x},n.children)}),d7=w.forwardRef((n,e)=>{let{heading:t,children:s,forceMount:r,...i}=n,a=qn(),l=w.useRef(null),c=w.useRef(null),d=qn(),h=Tv(),f=zl(p=>r||h.filter()===!1?!0:p.search?p.filtered.groups.has(a):!0);qd(()=>h.group(a),[]),TD(a,l,[n.value,n.heading,c]);let m=w.useMemo(()=>({id:a,forceMount:r}),[r]);return w.createElement(le.div,{ref:$d(l,e),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},t&&w.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),Tb(n,p=>w.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},w.createElement(CD.Provider,{value:m},p))))}),u7=w.forwardRef((n,e)=>{let{alwaysRender:t,...s}=n,r=w.useRef(null),i=zl(a=>!a.search);return!t&&!i?null:w.createElement(le.div,{ref:$d(r,e),...s,"cmdk-separator":"",role:"separator"})}),h7=w.forwardRef((n,e)=>{let{onValueChange:t,...s}=n,r=n.value!=null,i=Yj(),a=zl(d=>d.search),l=zl(d=>d.selectedItemId),c=Tv();return w.useEffect(()=>{n.value!=null&&i.setState("search",n.value)},[n.value]),w.createElement(le.input,{ref:e,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:r?n.value:a,onChange:d=>{r||i.setState("search",d.target.value),t==null||t(d.target.value)}})}),f7=w.forwardRef((n,e)=>{let{children:t,label:s="Suggestions",...r}=n,i=w.useRef(null),a=w.useRef(null),l=zl(d=>d.selectedItemId),c=Tv();return w.useEffect(()=>{if(a.current&&i.current){let d=a.current,h=i.current,f,m=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let p=d.offsetHeight;h.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(d),()=>{cancelAnimationFrame(f),m.unobserve(d)}}},[]),w.createElement(le.div,{ref:$d(i,e),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":s,id:c.listId},Tb(n,d=>w.createElement("div",{ref:$d(a,c.listInnerRef),"cmdk-list-sizer":""},d)))}),m7=w.forwardRef((n,e)=>{let{open:t,onOpenChange:s,overlayClassName:r,contentClassName:i,container:a,...l}=n;return w.createElement(YI,{open:t,onOpenChange:s},w.createElement(XI,{container:a},w.createElement(Wj,{"cmdk-overlay":"",className:r}),w.createElement(Vj,{"aria-label":n.label,"cmdk-dialog":"",className:i},w.createElement(kD,{ref:e,...l}))))}),p7=w.forwardRef((n,e)=>zl(t=>t.filtered.count===0)?w.createElement(le.div,{ref:e,...n,"cmdk-empty":"",role:"presentation"}):null),g7=w.forwardRef((n,e)=>{let{progress:t,children:s,label:r="Loading...",...i}=n;return w.createElement(le.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},Tb(n,a=>w.createElement("div",{"aria-hidden":!0},a)))}),ps=Object.assign(kD,{List:f7,Item:c7,Input:h7,Group:d7,Separator:u7,Dialog:m7,Empty:p7,Loading:g7});function v7(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function x7(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function PD(n){let e=w.useRef(n);return qd(()=>{e.current=n}),e}var qd=typeof window>"u"?w.useEffect:w.useLayoutEffect;function wu(n){let e=w.useRef();return e.current===void 0&&(e.current=n()),e}function zl(n){let e=Yj(),t=()=>n(e.snapshot());return w.useSyncExternalStore(e.subscribe,t,t)}function TD(n,e,t,s=[]){let r=w.useRef(),i=Tv();return qd(()=>{var a;let l=(()=>{var d;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():r.current}})(),c=s.map(d=>d.trim());i.value(n,l,c),(a=e.current)==null||a.setAttribute(bu,l),r.current=l}),r}var y7=()=>{let[n,e]=w.useState(),t=wu(()=>new Map);return qd(()=>{t.current.forEach(s=>s()),t.current=new Map},[n]),(s,r)=>{t.current.set(s,r),e({})}};function b7(n){let e=n.type;return typeof e=="function"?e(n.props):"render"in e?e.render(n.props):n}function Tb({asChild:n,children:e},t){return n&&w.isValidElement(e)?w.cloneElement(b7(e),{ref:e.ref},t(e.props.children)):t(e)}var w7={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const RD=w.forwardRef(({className:n,...e},t)=>o.jsx(ps,{ref:t,className:ne("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...e}));RD.displayName=ps.displayName;const MD=w.forwardRef(({className:n,...e},t)=>o.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[o.jsx(GT,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),o.jsx(ps.Input,{ref:t,className:ne("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...e})]}));MD.displayName=ps.Input.displayName;const ID=w.forwardRef(({className:n,...e},t)=>o.jsx(ps.List,{ref:t,className:ne("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...e}));ID.displayName=ps.List.displayName;const DD=w.forwardRef((n,e)=>o.jsx(ps.Empty,{ref:e,className:"py-6 text-center text-sm",...n}));DD.displayName=ps.Empty.displayName;const OD=w.forwardRef(({className:n,...e},t)=>o.jsx(ps.Group,{ref:t,className:ne("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...e}));OD.displayName=ps.Group.displayName;const _7=w.forwardRef(({className:n,...e},t)=>o.jsx(ps.Separator,{ref:t,className:ne("-mx-1 h-px bg-border",n),...e}));_7.displayName=ps.Separator.displayName;const LD=w.forwardRef(({className:n,...e},t)=>o.jsx(ps.Item,{ref:t,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",n),...e}));LD.displayName=ps.Item.displayName;var Rb="Popover",[FD,HQ]=si(Rb,[Nb]),Rv=Nb(),[S7,ec]=FD(Rb),$D=n=>{const{__scopePopover:e,children:t,open:s,defaultOpen:r,onOpenChange:i,modal:a=!1}=n,l=Rv(e),c=w.useRef(null),[d,h]=w.useState(!1),[f,m]=Bd({prop:s,defaultProp:r??!1,onChange:i,caller:Rb});return o.jsx($M,{...l,children:o.jsx(S7,{scope:e,contentId:qn(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:w.useCallback(()=>h(!0),[]),onCustomAnchorRemove:w.useCallback(()=>h(!1),[]),modal:a,children:t})})};$D.displayName=Rb;var zD="PopoverAnchor",N7=w.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=ec(zD,t),i=Rv(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=r;return w.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(Fj,{...i,...s,ref:e})});N7.displayName=zD;var BD="PopoverTrigger",UD=w.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=ec(BD,t),i=Rv(t),a=Ve(e,r.triggerRef),l=o.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":GD(r.open),...s,ref:a,onClick:fe(n.onClick,r.onOpenToggle)});return r.hasCustomAnchor?l:o.jsx(Fj,{asChild:!0,...i,children:l})});UD.displayName=BD;var Xj="PopoverPortal",[j7,E7]=FD(Xj,{forceMount:void 0}),HD=n=>{const{__scopePopover:e,forceMount:t,children:s,container:r}=n,i=ec(Xj,e);return o.jsx(j7,{scope:e,forceMount:t,children:o.jsx(xr,{present:t||i.open,children:o.jsx(yv,{asChild:!0,container:r,children:s})})})};HD.displayName=Xj;var Lf="PopoverContent",WD=w.forwardRef((n,e)=>{const t=E7(Lf,n.__scopePopover),{forceMount:s=t.forceMount,...r}=n,i=ec(Lf,n.__scopePopover);return o.jsx(xr,{present:s||i.open,children:i.modal?o.jsx(C7,{...r,ref:e}):o.jsx(k7,{...r,ref:e})})});WD.displayName=Lf;var A7=zd("PopoverContent.RemoveScroll"),C7=w.forwardRef((n,e)=>{const t=ec(Lf,n.__scopePopover),s=w.useRef(null),r=Ve(e,s),i=w.useRef(!1);return w.useEffect(()=>{const a=s.current;if(a)return $j(a)},[]),o.jsx(Eb,{as:A7,allowPinchZoom:!0,children:o.jsx(VD,{...n,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:fe(n.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:fe(n.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:fe(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),k7=w.forwardRef((n,e)=>{const t=ec(Lf,n.__scopePopover),s=w.useRef(!1),r=w.useRef(!1);return o.jsx(VD,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(s.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=n.onInteractOutside)==null||c.call(n,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const a=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),VD=w.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,...f}=n,m=ec(Lf,t),p=Rv(t);return Cj(),o.jsx(bb,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:i,children:o.jsx(xv,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:o.jsx(zM,{"data-state":GD(m.open),role:"dialog",id:m.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),qD="PopoverClose",P7=w.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=ec(qD,t);return o.jsx(le.button,{type:"button",...s,ref:e,onClick:fe(n.onClick,()=>r.onOpenChange(!1))})});P7.displayName=qD;var T7="PopoverArrow",R7=w.forwardRef((n,e)=>{const{__scopePopover:t,...s}=n,r=Rv(t);return o.jsx(BM,{...r,...s,ref:e})});R7.displayName=T7;function GD(n){return n?"open":"closed"}var M7=$D,I7=UD,D7=HD,KD=WD;const qx=M7,Gx=I7,ip=w.forwardRef(({className:n,align:e="center",sideOffset:t=4,...s},r)=>o.jsx(D7,{children:o.jsx(KD,{ref:r,align:e,sideOffset:t,className:ne("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...s})}));ip.displayName=KD.displayName;const O7=({onClose:n,onSuccess:e})=>{const[t,s]=w.useState([]),[r,i]=w.useState(""),[a,l]=w.useState(new Date().toISOString().split("T")[0]),[c,d]=w.useState(""),[h,f]=w.useState(""),[m,p]=w.useState(""),[x,g]=w.useState(""),[b,v]=w.useState(""),[y,_]=w.useState(!1),[N,j]=w.useState(!1),[A,E]=w.useState(""),{toast:P}=ij();w.useEffect(()=>{T()},[T]);const T=w.useCallback(async()=>{try{const{data:z,error:$}=await te.from("procedures").select(`
          id,
          code,
          title_de,
          procedure_categories!inner(title_de)
        `).eq("active",!0).order("title_de");if($)throw $;const W=(z==null?void 0:z.map(F=>({id:F.id,code:F.code,title_de:F.title_de,category:{title_de:F.procedure_categories.title_de}})))||[];s(W)}catch(z){console.error("Error loading procedures:",z),P({title:"Fehler",description:"Prozeduren konnten nicht geladen werden.",variant:"destructive"})}},[P]),I=async z=>{if(z.preventDefault(),!r||!a||!c){P({title:"Fehler",description:"Bitte füllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}j(!0);try{const{data:{user:$}}=await te.auth.getUser();if(!$)throw new Error("Not authenticated");const{error:W}=await te.from("procedure_logs").insert({user_id:$.id,procedure_id:r,performed_date:a,role_in_surgery:c,hospital:h||null,supervisor:m||null,notes:x||null,case_id:b||null});if(W)throw W;P({title:"Erfolg",description:"Prozedur wurde erfolgreich erfasst."}),e()}catch($){console.error("Error saving procedure:",$),P({title:"Fehler",description:"Prozedur konnte nicht gespeichert werden.",variant:"destructive"})}finally{j(!1)}},M=t.filter(z=>z.title_de.toLowerCase().includes(A.toLowerCase())||z.code.toLowerCase().includes(A.toLowerCase())||z.category.title_de.toLowerCase().includes(A.toLowerCase())),L=t.find(z=>z.id===r);return o.jsx(kv,{open:!0,onOpenChange:n,children:o.jsxs(Jf,{className:"sm:max-w-[600px]",children:[o.jsx(Zf,{children:o.jsxs(em,{className:"flex items-center gap-2",children:[o.jsx(Wi,{className:"w-5 h-5"}),"Prozedur erfassen"]})}),o.jsxs("form",{onSubmit:I,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(ve,{htmlFor:"procedure",className:"text-sm font-medium",children:["Prozedur ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs(qx,{open:y,onOpenChange:_,children:[o.jsx(Gx,{asChild:!0,children:o.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":y,className:"w-full justify-between",children:[L?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(oe,{variant:"outline",className:"text-xs",children:L.code}),o.jsx("span",{children:L.title_de})]}):"Prozedur auswählen...",o.jsx(S$,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),o.jsx(ip,{className:"w-full p-0",children:o.jsxs(RD,{children:[o.jsx(MD,{placeholder:"Prozedur suchen...",value:A,onValueChange:E}),o.jsx(DD,{children:"Keine Prozedur gefunden."}),o.jsx(ID,{children:o.jsx(OD,{children:M.map(z=>o.jsxs(LD,{value:`${z.code} ${z.title_de}`,onSelect:()=>{i(z.id),_(!1)},children:[o.jsx(HT,{className:ne("mr-2 h-4 w-4",r===z.id?"opacity-100":"opacity-0")}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(oe,{variant:"outline",className:"text-xs",children:z.code}),o.jsx("span",{children:z.title_de})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:z.category.title_de})]})]},z.id))})})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs(ve,{htmlFor:"date",className:"text-sm font-medium",children:["Datum ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Re,{id:"date",type:"date",value:a,onChange:z=>l(z.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(ve,{htmlFor:"role",className:"text-sm font-medium",children:["Rolle ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs(Fs,{value:c,onValueChange:d,required:!0,children:[o.jsx(os,{children:o.jsx($s,{placeholder:"Rolle auswählen"})}),o.jsxs(ls,{children:[o.jsx(Qe,{value:"responsible",children:"Verantwortlich (1.0x)"}),o.jsx(Qe,{value:"instructing",children:"Instruierend (0.75x)"}),o.jsx(Qe,{value:"assistant",children:"Assistent (0.5x)"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"hospital",className:"text-sm font-medium",children:"Klinik/Spital"}),o.jsx(Re,{id:"hospital",value:h,onChange:z=>f(z.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"caseId",className:"text-sm font-medium",children:"Fall-ID"}),o.jsx(Re,{id:"caseId",value:b,onChange:z=>v(z.target.value),placeholder:"z.B. 2024-001234"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"supervisor",className:"text-sm font-medium",children:"Supervisor"}),o.jsx(Re,{id:"supervisor",value:m,onChange:z=>p(z.target.value),placeholder:"z.B. Dr. med. Max Mustermann"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"notes",className:"text-sm font-medium",children:"Notizen"}),o.jsx(Pv,{id:"notes",value:x,onChange:z=>g(z.target.value),placeholder:"Besonderheiten, Komplikationen, Lernpunkte...",rows:3})]}),c&&o.jsx("div",{className:"p-3 bg-muted rounded-medical",children:o.jsxs("div",{className:"text-sm",children:[o.jsx("strong",{children:"Gewichtung:"})," "," ",c==="responsible"&&"1.0 Punkte (Vollwertung)",c==="instructing"&&"0.75 Punkte (Instruierend)",c==="assistant"&&"0.5 Punkte (Assistenz)"]})}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(q,{type:"button",variant:"outline",onClick:n,children:"Abbrechen"}),o.jsx(q,{type:"submit",disabled:N,children:N?"Speichern...":"Speichern"})]})]})]})})},L7=wv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),th=w.forwardRef(({className:n,variant:e,...t},s)=>o.jsx("div",{ref:s,role:"alert",className:ne(L7({variant:e}),n),...t}));th.displayName="Alert";const F7=w.forwardRef(({className:n,...e},t)=>o.jsx("h5",{ref:t,className:ne("mb-1 font-medium leading-none tracking-tight",n),...e}));F7.displayName="AlertTitle";const nh=w.forwardRef(({className:n,...e},t)=>o.jsx("div",{ref:t,className:ne("text-sm [&_p]:leading-relaxed",n),...e}));nh.displayName="AlertDescription";const $7=({modules:n,userPgyLevel:e})=>{const[t,s]=w.useState([]),[r,i]=w.useState([]),[a,l]=w.useState(!0),c=w.useCallback(async()=>{var f;try{l(!0);const{data:{user:m}}=await te.auth.getUser();if(!m)return;const p=[];for(const x of n){const{data:g}=await te.from("procedures").select(`
            id,
            code,
            title_de,
            min_required_by_pgy
          `).eq("category_id",x.id).eq("active",!0);for(const b of g||[]){const v=((f=b.min_required_by_pgy)==null?void 0:f[`pgy${e}`])||0;if(v>0){const{data:y}=await te.from("procedure_logs").select("role_in_surgery, weighted_score").eq("procedure_id",b.id).eq("user_id",m.id),_=(y==null?void 0:y.reduce((j,A)=>j+(A.weighted_score||0),0))||0,N=Math.max(0,v-_);if(N>0){const j=_/v*100,A=N*(100-j)/100;p.push({procedure_id:b.id,procedure_title:b.title_de,procedure_code:b.code,module_name:x.title_de,required:v,current_weighted:_,gap:N,priority_score:A})}}}}p.sort((x,g)=>g.priority_score-x.priority_score),s(p.slice(0,10)),await d(m.id)}catch(m){console.error("Error in gap analysis:",m)}finally{l(!1)}},[n,e]);w.useEffect(()=>{c()},[c]);const d=async f=>{try{const m=[],p=new Date;for(let g=7;g>=0;g--){const b=new Date(p);b.setMonth(b.getMonth()-g*3);const v=b.getFullYear(),y=Math.floor(b.getMonth()/3)+1;m.push({year:v,quarter:y,label:`Q${y} ${v}`,startDate:new Date(v,(y-1)*3,1),endDate:new Date(v,y*3,0)})}const x=[];for(const g of m){const{data:b}=await te.from("procedure_logs").select("weighted_score").eq("user_id",f).gte("performed_date",g.startDate.toISOString().split("T")[0]).lte("performed_date",g.endDate.toISOString().split("T")[0]),v=(b==null?void 0:b.reduce((_,N)=>_+(N.weighted_score||0),0))||0,y=(b==null?void 0:b.length)||0;x.push({...g,totalWeighted:v,procedureCount:y,intensity:Math.min(100,y/20*100)})}i(x)}catch(m){console.error("Error loading quarterly progress:",m)}},h=f=>f===0?"bg-gray-100":f<25?"bg-green-100":f<50?"bg-green-200":f<75?"bg-green-300":"bg-green-400";return a?o.jsx(Y,{className:"medical-card mb-8",children:o.jsx(Ae,{className:"p-8",children:o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Y,{className:"medical-card",children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(Np,{className:"w-5 h-5 text-orange-500"}),"Top Ausbildungslücken"]})}),o.jsx(Ae,{children:t.length===0?o.jsx(th,{children:o.jsx(nh,{children:"Keine größeren Lücken identifiziert. Alle erforderlichen Prozeduren sind auf gutem Weg!"})}):o.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((f,m)=>o.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(oe,{variant:"outline",className:"text-xs",children:["#",m+1]}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:f.procedure_title}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.module_name," • ",f.procedure_code]})]})]})}),o.jsxs("div",{className:"text-right min-w-32",children:[o.jsxs("div",{className:"text-sm font-medium",children:[f.current_weighted.toFixed(1)," / ",f.required]}),o.jsxs("div",{className:"text-xs text-orange-600",children:["Lücke: ",f.gap.toFixed(1)," Punkte"]}),o.jsx($l,{value:f.current_weighted/f.required*100,className:"h-2 mt-1 w-20"})]})]},f.procedure_id))})})]}),o.jsxs(Y,{className:"medical-card",children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(Vn,{className:"w-5 h-5 text-blue-500"}),"Aktivitäts-Heatmap (Quartale)"]})}),o.jsxs(Ae,{children:[o.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2",children:r.map(f=>o.jsxs("div",{className:`
                  p-3 rounded-medical border text-center text-xs font-medium
                  ${h(f.intensity)}
                  hover:scale-105 transition-transform cursor-pointer
                `,title:`${f.label}: ${f.procedureCount} Eingriffe (${f.totalWeighted.toFixed(1)} Punkte)`,children:[o.jsx("div",{children:f.label}),o.jsx("div",{className:"text-xs opacity-75 mt-1",children:f.procedureCount})]},`${f.year}-${f.quarter}`))}),o.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[o.jsx("span",{children:"Weniger Aktivität"}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),o.jsx("div",{className:"w-3 h-3 bg-green-100 rounded"}),o.jsx("div",{className:"w-3 h-3 bg-green-200 rounded"}),o.jsx("div",{className:"w-3 h-3 bg-green-300 rounded"}),o.jsx("div",{className:"w-3 h-3 bg-green-400 rounded"})]}),o.jsx("span",{children:"Mehr Aktivität"})]})]})]}),n.length>0&&o.jsxs(Y,{className:"medical-card",children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(O$,{className:"w-5 h-5 text-yellow-500"}),"Rollen-Balance Analyse"]})}),o.jsx(Ae,{children:(()=>{const f=n.reduce((x,g)=>{var b;return x+(((b=g.progress)==null?void 0:b.responsible_count)||0)},0),m=n.reduce((x,g)=>{var b,v,y;return x+(((b=g.progress)==null?void 0:b.responsible_count)||0)+(((v=g.progress)==null?void 0:v.instructing_count)||0)+(((y=g.progress)==null?void 0:y.assistant_count)||0)},0),p=m>0?f/m*100:0;return p>=30?o.jsx(th,{children:o.jsxs(nh,{children:["Ihre Rollen-Balance ist ausgezeichnet! ",p.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher durchgeführt."]})}):o.jsxs(th,{children:[o.jsx(Np,{className:"h-4 w-4"}),o.jsxs(nh,{children:["Achtung: Nur ",p.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher. Ziel: ≥30% für optimale FMH-Bewertung. Fokus auf eigenständige Eingriffe empfohlen."]})]})})()})]})]})},z7=({runId:n,summary:e,stagingData:t,onClose:s,onImportComplete:r})=>{const[i,a]=w.useState(!1),[l,c]=w.useState("summary"),d=p=>{switch(p.status){case"matched":return o.jsxs(oe,{variant:"default",className:"bg-success text-success-foreground",children:[o.jsx(Ga,{className:"w-3 h-3 mr-1"}),p.match_method==="exact"?"Exakt":p.match_method==="alias"?"Alias":p.match_method==="fuzzy"?"Ähnlich":"Manuell"]});case"needs_review":return o.jsxs(oe,{variant:"destructive",children:[o.jsx(Np,{className:"w-3 h-3 mr-1"}),"Prüfung nötig"]});default:return o.jsx(oe,{variant:"secondary",children:"Unbekannt"})}},h=p=>p>=.95?"text-success":p>=.8?"text-warning":"text-destructive",f=async()=>{a(!0);try{console.log("🚀 Starting import commit...");const p=t.filter(v=>v.status==="matched"&&v.matched_proc_id);if(p.length===0){xe.error("Keine passenden Prozeduren zum Importieren gefunden.");return}const x=[];for(const v of p){const y={procedure_id:v.matched_proc_id,performed_date:e.standDate||new Date().toISOString().split("T")[0],hospital:`Importiert aus ${e.filename}`,notes:`PDF Import ${e.standDate||new Date().toLocaleDateString("de-DE")} - ${v.module_name}`};if(v.responsible>0)for(let _=0;_<v.responsible;_++)x.push({...y,role_in_surgery:"primary",notes:`${y.notes} - Verantwortlich ${_+1}/${v.responsible}`});if(v.instructing>0)for(let _=0;_<v.instructing;_++)x.push({...y,role_in_surgery:"instructing",notes:`${y.notes} - Instruierend ${_+1}/${v.instructing}`});if(v.assistant>0)for(let _=0;_<v.assistant;_++)x.push({...y,role_in_surgery:"assistant",notes:`${y.notes} - Assistent ${_+1}/${v.assistant}`})}console.log(`📝 Creating ${x.length} procedure logs...`);const{error:g}=await te.from("procedure_logs").insert(x);if(g)throw console.error("❌ Insert error:",g),g;const{error:b}=await te.from("import_runs").update({status:"completed",finished_at:new Date().toISOString(),summary_json:{imported:x.length,matched:p.length,modules:e.modules.map(v=>v.name)}}).eq("id",n);if(b)throw console.error("❌ Update error:",b),b;console.log("✅ Import completed successfully!"),xe.success(`Import erfolgreich! ${x.length} Einträge wurden importiert.`),r()}catch(p){console.error("❌ Import failed:",p),xe.error(`Import fehlgeschlagen: ${p.message}`)}finally{a(!1)}},m=async()=>{try{await te.from("import_runs").update({status:"cancelled"}).eq("id",n),xe.info("Import wurde abgebrochen."),s()}catch(p){console.error("Error cancelling import:",p),xe.error("Fehler beim Abbrechen des Imports.")}};return o.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[o.jsx(Y,{children:o.jsxs(Je,{children:[o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(E$,{className:"w-5 h-5"}),"PDF Import Vorschau"]}),o.jsxs(rp,{children:["Datei: ",e.filename,e.standDate&&` • Stand: ${new Date(e.standDate).toLocaleDateString("de-DE")}`]})]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{variant:l==="summary"?"default":"outline",onClick:()=>c("summary"),children:"Übersicht"}),o.jsxs(q,{variant:l==="modules"?"default":"outline",onClick:()=>c("modules"),children:["Module (",e.modules.length,")"]}),o.jsxs(q,{variant:l==="procedures"?"default":"outline",onClick:()=>c("procedures"),children:["Prozeduren (",e.totalProcedures,")"]})]}),l==="summary"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs(Y,{children:[o.jsx(Je,{className:"pb-2",children:o.jsx(st,{className:"text-lg",children:"Gesamt"})}),o.jsxs(Ae,{children:[o.jsx("div",{className:"text-2xl font-bold",children:e.totalProcedures}),o.jsx("p",{className:"text-muted-foreground",children:"Prozeduren erkannt"})]})]}),o.jsxs(Y,{children:[o.jsx(Je,{className:"pb-2",children:o.jsx(st,{className:"text-lg text-success",children:"Zugeordnet"})}),o.jsxs(Ae,{children:[o.jsx("div",{className:"text-2xl font-bold text-success",children:e.matched}),o.jsx("p",{className:"text-muted-foreground",children:"Automatisch zugeordnet"})]})]}),o.jsxs(Y,{children:[o.jsx(Je,{className:"pb-2",children:o.jsx(st,{className:"text-lg text-warning",children:"Prüfung nötig"})}),o.jsxs(Ae,{children:[o.jsx("div",{className:"text-2xl font-bold text-warning",children:e.needsReview}),o.jsx("p",{className:"text-muted-foreground",children:"Manuelle Prüfung"})]})]})]}),l==="modules"&&o.jsxs(Y,{children:[o.jsxs(Je,{children:[o.jsx(st,{children:"Erkannte Module"}),o.jsx(rp,{children:"Übersicht der aus dem PDF extrahierten Module mit Summen"})]}),o.jsx(Ae,{children:o.jsxs(If,{children:[o.jsx(Df,{children:o.jsxs(qr,{children:[o.jsx(Oe,{children:"Modul"}),o.jsx(Oe,{className:"text-right",children:"Minimum"}),o.jsx(Oe,{className:"text-right",children:"Verantwortlich"}),o.jsx(Oe,{className:"text-right",children:"Instruierend"}),o.jsx(Oe,{className:"text-right",children:"Assistent"}),o.jsx(Oe,{className:"text-right",children:"Total"})]})}),o.jsx(Of,{children:e.modules.map((p,x)=>o.jsxs(qr,{children:[o.jsx(Le,{className:"font-medium",children:p.name}),o.jsx(Le,{className:"text-right",children:p.minimum}),o.jsx(Le,{className:"text-right",children:p.responsible}),o.jsx(Le,{className:"text-right",children:p.instructing}),o.jsx(Le,{className:"text-right",children:p.assistant}),o.jsx(Le,{className:"text-right font-semibold",children:p.total})]},x))})]})})]}),l==="procedures"&&o.jsxs(Y,{children:[o.jsxs(Je,{children:[o.jsx(st,{children:"Prozeduren Details"}),o.jsx(rp,{children:"Alle erkannten Prozeduren mit Zuordnungsstatus"})]}),o.jsx(Ae,{children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(If,{children:[o.jsx(Df,{children:o.jsxs(qr,{children:[o.jsx(Oe,{children:"Prozedur"}),o.jsx(Oe,{children:"Modul"}),o.jsx(Oe,{children:"Status"}),o.jsx(Oe,{children:"Zugeordnet zu"}),o.jsx(Oe,{className:"text-right",children:"V"}),o.jsx(Oe,{className:"text-right",children:"I"}),o.jsx(Oe,{className:"text-right",children:"A"}),o.jsx(Oe,{className:"text-right",children:"Total"})]})}),o.jsx(Of,{children:t.map(p=>{var x;return o.jsxs(qr,{children:[o.jsx(Le,{className:"font-medium",children:p.proc_name}),o.jsx(Le,{className:"text-sm text-muted-foreground",children:p.module_name}),o.jsx(Le,{children:d(p)}),o.jsx(Le,{children:(x=p.procedures)!=null&&x.title_de?o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:p.procedures.title_de}),p.match_confidence<1&&o.jsxs("div",{className:`text-xs ${h(p.match_confidence)}`,children:[(p.match_confidence*100).toFixed(0),"% Übereinstimmung"]})]}):o.jsx("span",{className:"text-muted-foreground",children:"Keine Zuordnung"})}),o.jsx(Le,{className:"text-right",children:p.responsible}),o.jsx(Le,{className:"text-right",children:p.instructing}),o.jsx(Le,{className:"text-right",children:p.assistant}),o.jsx(Le,{className:"text-right font-semibold",children:p.total})]},p.id)})})]})})})]}),o.jsxs("div",{className:"flex justify-between pt-4",children:[o.jsx(q,{variant:"outline",onClick:m,children:"Abbrechen"}),o.jsxs("div",{className:"flex gap-2",children:[e.needsReview>0&&o.jsxs(q,{variant:"outline",className:"flex items-center gap-2",children:[o.jsx(fj,{className:"w-4 h-4"}),e.needsReview," Prozeduren bearbeiten"]}),o.jsxs(q,{onClick:f,disabled:i||e.matched===0,className:"flex items-center gap-2",children:[o.jsx(cb,{className:"w-4 h-4"}),i?"Importiere...":`${e.matched} Prozeduren importieren`]})]})]})]})},Fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),H_=[.001,0,0,.001,0,0],Gw=1.35,Ms={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Co={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},YD="pdfjs_internal_editor_",ye={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Fe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},B7={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Kx={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},It={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},_u={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Mb={ERRORS:0,WARNINGS:1,INFOS:5},cy={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},wx={moveTo:0,lineTo:1,curveTo:2,closePath:3},U7={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Ib=Mb.WARNINGS;function H7(n){Number.isInteger(n)&&(Ib=n)}function W7(){return Ib}function Db(n){Ib>=Mb.INFOS&&console.log(`Info: ${n}`)}function be(n){Ib>=Mb.WARNINGS&&console.log(`Warning: ${n}`)}function rt(n){throw new Error(n)}function Ft(n,e){n||rt(e)}function V7(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function XD(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=X7(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return V7(s)?s:null}function QD(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&XD(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Te(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const nu=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class hk extends nu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Kw extends nu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class W_ extends nu{constructor(e){super(e,"InvalidPDFException")}}class dy extends nu{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class q7 extends nu{constructor(e){super(e,"FormatError")}}class Bl extends nu{constructor(e){super(e,"AbortException")}}function JD(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&rt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),a=n.subarray(r,i);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Mv(n){typeof n!="string"&&rt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function G7(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function K7(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Y7(){try{return new Function(""),!0}catch{return!1}}class xn{static get isLittleEndian(){return Te(this,"isLittleEndian",K7())}static get isEvalSupported(){return Te(this,"isEvalSupported",Y7())}static get isOffscreenCanvasSupported(){return Te(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Te(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Te(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Te(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Yw=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ya,Yx,V_;class he{static makeHexColor(e,t,s){return`#${Yw[e]}${Yw[t]}${Yw[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],a=t[2],l=t[3],c=t[4],d=t[5];for(let h=0;h<6;h+=2){const f=e[s+h],m=e[s+h+1];e[s+h]=f*r+m*a+c,e[s+h+1]=f*i+m*l+d}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],a=t[2],l=t[3],c=t[4],d=t[5],h=e[0],f=e[1],m=e[2],p=e[3];let x=r*h+c,g=x,b=r*m+c,v=b,y=l*f+d,_=y,N=l*p+d,j=N;if(i!==0||a!==0){const A=i*h,E=i*m,P=a*f,T=a*p;x+=P,v+=P,b+=T,g+=T,y+=A,j+=A,N+=E,_+=E}s[0]=Math.min(s[0],x,b,g,v),s[1]=Math.min(s[1],y,N,_,j),s[2]=Math.max(s[2],x,b,g,v),s[3]=Math.max(s[3],y,N,_,j)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],a=e[3],l=s**2+r**2,c=s*i+r*a,d=i**2+a**2,h=(l+d)/2,f=Math.sqrt(h**2-(l*d-c**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[s,i,r,a]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,a,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,c),k(this,Ya,V_).call(this,e,s,i,l,t,r,a,c,3*(-e+3*(s-i)+l),6*(e-2*s+i),3*(s-e),d),k(this,Ya,V_).call(this,e,s,i,l,t,r,a,c,3*(-t+3*(r-a)+c),6*(t-2*r+a),3*(r-t),d)}}Ya=new WeakSet,Yx=function(e,t,s,r,i,a,l,c,d,h){if(d<=0||d>=1)return;const f=1-d,m=d*d,p=m*d,x=f*(f*(f*e+3*d*t)+3*m*s)+p*r,g=f*(f*(f*i+3*d*a)+3*m*l)+p*c;h[0]=Math.min(h[0],x),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],x),h[3]=Math.max(h[3],g)},V_=function(e,t,s,r,i,a,l,c,d,h,f,m){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&k(this,Ya,Yx).call(this,e,t,s,r,i,a,l,c,-f/h,m);return}const p=h**2-4*f*d;if(p<0)return;const x=Math.sqrt(p),g=2*d;k(this,Ya,Yx).call(this,e,t,s,r,i,a,l,c,(-h+x)/g,m),k(this,Ya,Yx).call(this,e,t,s,r,i,a,l,c,(-h-x)/g,m)},C(he,Ya);function X7(n){return decodeURIComponent(escape(n))}let Xw=null,fk=null;function Q7(n){return Xw||(Xw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,fk=new Map([["ﬅ","ſt"]])),n.replaceAll(Xw,(e,t,s)=>t?t.normalize("NFKC"):fk.get(s))}function ZD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),JD(n)}const Qj="pdfjs_internal_id_";function J7(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const a=i.length;let l=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;l=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function $n(n,e,t){return Math.min(Math.max(n,e),t)}function eO(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(JD(n))}function Z7(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Mv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const sa="http://www.w3.org/2000/svg",pc=class pc{};G(pc,"CSS",96),G(pc,"PDF",72),G(pc,"PDF_TO_CSS_UNITS",pc.CSS/pc.PDF);let Ul=pc;async function Iv(n,e="text"){if(Em(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Dv{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=a,s*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,m,p;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,m=0,p=1;break;case 90:h=0,f=1,m=1,p=0;break;case 270:h=0,f=-1,m=-1,p=0;break;case 0:h=1,f=0,m=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(m=-m,p=-p);let x,g,b,v;h===0?(x=Math.abs(d-e[1])*s+i,g=Math.abs(c-e[0])*s+a,b=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(x=Math.abs(c-e[0])*s+i,g=Math.abs(d-e[1])*s+a,b=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[h*s,f*s,m*s,p*s,x-h*s*c-m*s*d,g-f*s*c-p*s*d],this.width=b,this.height=v}get rawDims(){const e=this.viewBox;return Te(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new Dv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return he.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];he.applyTransform(t,this.transform);const s=[e[2],e[3]];return he.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return he.applyInverseTransform(s,this.transform),s}}class Jj extends nu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Ob(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Zj(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function eq(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function tq(n,e="document.pdf"){if(typeof n!="string")return e;if(Ob(n))return be('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},i=/\.pdf$/i,a=s.pathname.split("/").at(-1);if(i.test(a))return r(a);if(s.searchParams.size>0){const l=Array.from(s.searchParams.values()).reverse();for(const d of l)if(i.test(d))return r(d);const c=Array.from(s.searchParams.keys()).reverse();for(const d of c)if(i.test(d))return r(d)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return r(c[0])}return e}class mk{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&be(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||be(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Em(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function vr(n){n.preventDefault()}function Dt(n){n.preventDefault(),n.stopPropagation()}function nq(n){console.log("Deprecated API usage: "+n)}var Fp;class uy{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Fp)||S(this,Fp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Fp).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(a+=h,l+=f):d==="+"&&(a-=h,l-=f),new Date(Date.UTC(s,r,i,a,l,c))}}Fp=new WeakMap,C(uy,Fp);function sq(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new Dv({viewBox:i,userUnit:1,scale:e,rotation:t})}function Lb(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(be(`Not a valid color format: "${n}"`),[0,0,0])}function rq(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Lb(s))}e.remove()}function bt(n){const{a:e,b:t,c:s,d:r,e:i,f:a}=n.getTransform();return[e,t,s,r,i,a]}function ai(n){const{a:e,b:t,c:s,d:r,e:i,f:a}=n.getTransform().invertSelf();return[e,t,s,r,i,a]}function Gd(n,e,t=!1,s=!0){if(e instanceof Dv){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:a}=n,l=xn.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${i}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Ki{constructor(){const{pixelRatio:e}=Ki;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let a=1/0,l=1/0,c=1/0;s=Ki.capPixels(s,i),s>0&&(a=Math.sqrt(s/(e*t))),r!==-1&&(l=r/e,c=r/t);const d=Math.min(a,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const q_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Io,Do,Zs,ha,$p,fh,mh,zp,Ny,tO,gn,nO,sO,Su,Am;const la=class la{constructor(e){C(this,gn);C(this,Io,null);C(this,Do,null);C(this,Zs);C(this,ha,null);C(this,$p,null);C(this,fh,null);C(this,mh,null);S(this,Zs,e),u(la,zp)||S(la,zp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,Io,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Zs)._uiManager._signal;e.addEventListener("contextmenu",vr,{signal:t}),e.addEventListener("pointerdown",k(la,Ny,tO),{signal:t});const s=S(this,ha,document.createElement("div"));s.className="buttons",e.append(s);const r=u(this,Zs).toolbarPosition;if(r){const{style:i}=e,a=u(this,Zs)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Io)}hide(){var e;u(this,Io).classList.add("hidden"),(e=u(this,Do))==null||e.hideDropdown()}show(){var e,t;u(this,Io).classList.remove("hidden"),(e=u(this,$p))==null||e.shown(),(t=u(this,fh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,Zs),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",u(la,zp)[e]),k(this,gn,Su).call(this,s),s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,ha).append(s)}async addAltText(e){const t=await e.render();k(this,gn,Su).call(this,t),u(this,ha).append(t,u(this,gn,Am)),S(this,$p,e)}addComment(e){if(u(this,fh))return;const t=e.render();t&&(k(this,gn,Su).call(this,t),u(this,ha).prepend(t,u(this,gn,Am)),S(this,fh,e),e.toolbar=this)}addColorPicker(e){if(u(this,Do))return;S(this,Do,e);const t=e.renderButton();k(this,gn,Su).call(this,t),u(this,ha).append(t,u(this,gn,Am))}async addEditSignatureButton(e){const t=S(this,mh,await e.renderEditButton(u(this,Zs)));k(this,gn,Su).call(this,t),u(this,ha).append(t,u(this,gn,Am))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){u(this,mh)&&(u(this,mh).title=e)}remove(){var e;u(this,Io).remove(),(e=u(this,Do))==null||e.destroy(),S(this,Do,null)}};Io=new WeakMap,Do=new WeakMap,Zs=new WeakMap,ha=new WeakMap,$p=new WeakMap,fh=new WeakMap,mh=new WeakMap,zp=new WeakMap,Ny=new WeakSet,tO=function(e){e.stopPropagation()},gn=new WeakSet,nO=function(e){u(this,Zs)._focusEventsAllowed=!1,Dt(e)},sO=function(e){u(this,Zs)._focusEventsAllowed=!0,Dt(e)},Su=function(e){const t=u(this,Zs)._uiManager._signal;e.addEventListener("focusin",k(this,gn,nO).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,gn,sO).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",vr,{signal:t})},Am=function(){const e=document.createElement("div");return e.className="divider",e},C(la,Ny),C(la,zp,null);let G_=la;var Bp,Ac,Cc,Hl,rO,iO,aO;class iq{constructor(e){C(this,Hl);C(this,Bp,null);C(this,Ac,null);C(this,Cc);S(this,Cc,e)}show(e,t,s){const[r,i]=k(this,Hl,iO).call(this,t,s),{style:a}=u(this,Ac)||S(this,Ac,k(this,Hl,rO).call(this));e.append(u(this,Ac)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Ac).remove()}}Bp=new WeakMap,Ac=new WeakMap,Cc=new WeakMap,Hl=new WeakSet,rO=function(){const e=S(this,Ac,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",vr,{signal:u(this,Cc)._signal});const t=S(this,Bp,document.createElement("div"));return t.className="buttons",e.append(t),k(this,Hl,aO).call(this),e},iO=function(e,t){let s=0,r=0;for(const i of e){const a=i.y+i.height;if(a<s)continue;const l=i.x+(t?i.width:0);if(a>s){r=l,s=a;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,s]},aO=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=u(this,Cc)._signal;e.addEventListener("contextmenu",vr,{signal:s}),e.addEventListener("click",()=>{u(this,Cc).highlightSelection("floating_button")},{signal:s}),u(this,Bp).append(e)};function oO(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var jy;class aq{constructor(){C(this,jy,0)}get id(){return`${YD}${Xt(this,jy)._++}`}}jy=new WeakMap;var ph,Up,jn,gh,Xx;const NE=class NE{constructor(){C(this,gh);C(this,ph,ZD());C(this,Up,0);C(this,jn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Te(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return k(this,gh,Xx).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return k(this,gh,Xx).call(this,e,e)}async getFromBlob(e,t){const s=await t;return k(this,gh,Xx).call(this,e,s)}async getFromId(e){u(this,jn)||S(this,jn,new Map);const t=u(this,jn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,jn)||S(this,jn,new Map);let s=u(this,jn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${u(this,ph)}_${Xt(this,Up)._++}`,refCounter:1,isSvg:!1},u(this,jn).set(e,s),u(this,jn).set(s.id,s),s}getSvgUrl(e){const t=u(this,jn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,jn)||S(this,jn,new Map);const t=u(this,jn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,ph)}_`)}};ph=new WeakMap,Up=new WeakMap,jn=new WeakMap,gh=new WeakSet,Xx=async function(e,t){u(this,jn)||S(this,jn,new Map);let s=u(this,jn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${u(this,ph)}_${Xt(this,Up)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await Iv(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=NE._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((d,h)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,d()},a.onload=async()=>{const f=s.svgUrl=a.result;l.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=a.onerror=h});a.readAsDataURL(r),await c}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){be(r),s=null}return u(this,jn).set(e,s),s&&u(this,jn).set(s.id,s),s};let K_=NE;var At,Oo,Hp,yt;class oq{constructor(e=128){C(this,At,[]);C(this,Oo,!1);C(this,Hp);C(this,yt,-1);S(this,Hp,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(r&&e(),u(this,Oo))return;const c={cmd:e,undo:t,post:s,type:i};if(u(this,yt)===-1){u(this,At).length>0&&(u(this,At).length=0),S(this,yt,0),u(this,At).push(c);return}if(a&&u(this,At)[u(this,yt)].type===i){l&&(c.undo=u(this,At)[u(this,yt)].undo),u(this,At)[u(this,yt)]=c;return}const d=u(this,yt)+1;d===u(this,Hp)?u(this,At).splice(0,1):(S(this,yt,d),d<u(this,At).length&&u(this,At).splice(d)),u(this,At).push(c)}undo(){if(u(this,yt)===-1)return;S(this,Oo,!0);const{undo:e,post:t}=u(this,At)[u(this,yt)];e(),t==null||t(),S(this,Oo,!1),S(this,yt,u(this,yt)-1)}redo(){if(u(this,yt)<u(this,At).length-1){S(this,yt,u(this,yt)+1),S(this,Oo,!0);const{cmd:e,post:t}=u(this,At)[u(this,yt)];e(),t==null||t(),S(this,Oo,!1)}}hasSomethingToUndo(){return u(this,yt)!==-1}hasSomethingToRedo(){return u(this,yt)<u(this,At).length-1}cleanType(e){if(u(this,yt)!==-1){for(let t=u(this,yt);t>=0;t--)if(u(this,At)[t].type!==e){u(this,At).splice(t+1,u(this,yt)-t),S(this,yt,t);return}u(this,At).length=0,S(this,yt,-1)}}destroy(){S(this,At,null)}}At=new WeakMap,Oo=new WeakMap,Hp=new WeakMap,yt=new WeakMap;var Ey,lO;class Ov{constructor(e){C(this,Ey);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=xn.platform;for(const[s,r,i={}]of e)for(const a of s){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:r,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(k(this,Ey,lO).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:a=[],checker:l=null}}=s;l&&!l(e,t)||(r.bind(e,...a,t)(),i||Dt(t))}}Ey=new WeakSet,lO=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ay=class Ay{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return rq(e),Te(this,"_colors",e)}convert(e){const t=Lb(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,a)=>i===t[a]))return Ay._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?he.makeHexColor(...t):e}};G(Ay,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Y_=Ay;var vh,xs,Wt,on,xh,fa,yh,er,kc,Lo,Fo,bh,Pc,mi,Rr,Tc,Wp,Vp,wh,qp,pi,$o,_h,zo,gi,Cy,Bo,Gp,Uo,Rc,Sh,Ho,Kp,Qt,Ye,ma,Wo,Vo,Yp,Xp,qo,vi,pa,Qp,Jp,tr,ee,Qx,X_,cO,dO,Jx,uO,hO,fO,Q_,mO,J_,Z_,pO,Rn,ra,gO,vO,eS,xO,Cm,tS;const Hu=class Hu{constructor(e,t,s,r,i,a,l,c,d,h,f,m,p,x,g,b){C(this,ee);C(this,vh,new AbortController);C(this,xs,null);C(this,Wt,new Map);C(this,on,new Map);C(this,xh,null);C(this,fa,null);C(this,yh,null);C(this,er,new oq);C(this,kc,null);C(this,Lo,null);C(this,Fo,null);C(this,bh,0);C(this,Pc,new Set);C(this,mi,null);C(this,Rr,null);C(this,Tc,new Set);G(this,"_editorUndoBar",null);C(this,Wp,!1);C(this,Vp,!1);C(this,wh,!1);C(this,qp,null);C(this,pi,null);C(this,$o,null);C(this,_h,null);C(this,zo,!1);C(this,gi,null);C(this,Cy,new aq);C(this,Bo,!1);C(this,Gp,!1);C(this,Uo,null);C(this,Rc,null);C(this,Sh,null);C(this,Ho,null);C(this,Kp,null);C(this,Qt,ye.NONE);C(this,Ye,new Set);C(this,ma,null);C(this,Wo,null);C(this,Vo,null);C(this,Yp,null);C(this,Xp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,qo,[0,0]);C(this,vi,null);C(this,pa,null);C(this,Qp,null);C(this,Jp,null);C(this,tr,null);const v=this._signal=u(this,vh).signal;S(this,pa,e),S(this,Qp,t),S(this,Jp,s),S(this,xh,r),S(this,kc,i),S(this,Wo,a),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:v}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),l._on("setpreference",this.onSetPreference.bind(this),{signal:v}),l._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:v}),k(this,ee,uO).call(this),k(this,ee,pO).call(this),k(this,ee,Q_).call(this),S(this,fa,c.annotationStorage),S(this,qp,c.filterFactory),S(this,Vo,d),S(this,_h,h||null),S(this,Wp,f),S(this,Vp,m),S(this,wh,p),S(this,Kp,x||null),this.viewParameters={realScale:Ul.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=b!==!1}static get _keyboardManager(){const e=Hu.prototype,t=a=>u(a,pa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Te(this,"_keyboardManager",new Ov([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&u(a,pa).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&u(a,pa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,a,l,c,d;(e=u(this,tr))==null||e.resolve(),S(this,tr,null),(t=u(this,vh))==null||t.abort(),S(this,vh,null),this._signal=null;for(const h of u(this,on).values())h.destroy();u(this,on).clear(),u(this,Wt).clear(),u(this,Tc).clear(),(s=u(this,Ho))==null||s.clear(),S(this,xs,null),u(this,Ye).clear(),u(this,er).destroy(),(r=u(this,xh))==null||r.destroy(),(i=u(this,kc))==null||i.destroy(),(a=u(this,Wo))==null||a.destroy(),(l=u(this,gi))==null||l.hide(),S(this,gi,null),(c=u(this,Sh))==null||c.destroy(),S(this,Sh,null),u(this,pi)&&(clearTimeout(u(this,pi)),S(this,pi,null)),u(this,vi)&&(clearTimeout(u(this,vi)),S(this,vi,null)),(d=this._editorUndoBar)==null||d.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Kp)}get useNewAltTextFlow(){return u(this,Vp)}get useNewAltTextWhenAddingImage(){return u(this,wh)}get hcmFilter(){return Te(this,"hcmFilter",u(this,Vo)?u(this,qp).addHCMFilter(u(this,Vo).foreground,u(this,Vo).background):"none")}get direction(){return Te(this,"direction",getComputedStyle(u(this,pa)).direction)}get _highlightColors(){return Te(this,"_highlightColors",u(this,_h)?new Map(u(this,_h).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Te(this,"highlightColors",null);const t=new Map,s=!!u(this,Vo);for(const[r,i]of e){const a=r.endsWith("_HCM");if(s&&a){t.set(r.replace("_HCM",""),i);continue}!s&&!a&&t.set(r,i)}return Te(this,"highlightColors",t)}get highlightColorNames(){return Te(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Fo,e)}setMainHighlightColorPicker(e){S(this,Sh,e)}editAltText(e,t=!1){var s;(s=u(this,xh))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!u(this,kc)}editComment(e,t){var s;(s=u(this,kc))==null||s.open(this,e,t)}getSignature(e){var t;(t=u(this,Wo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Wo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,wh,t);break}}onPageChanging({pageNumber:e}){S(this,bh,e-1)}focusMainContainer(){u(this,pa).focus()}findParent(e,t){for(const s of u(this,on).values()){const{x:r,y:i,width:a,height:l}=s.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=i&&t<=i+l)return s}return null}disableUserSelect(e=!1){u(this,Qp).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Tc).add(e)}removeShouldRescale(e){u(this,Tc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ul.PDF_TO_CSS_UNITS;for(const s of u(this,Tc))s.onScaleChanging();(t=u(this,Fo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:a}=t,l=t.toString(),d=k(this,ee,Qx).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;t.empty();const f=k(this,ee,X_).call(this,d),m=u(this,Qt)===ye.NONE,p=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:r,focusNode:i,focusOffset:a,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(ye.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,fa)&&!u(this,fa).has(e.id)&&u(this,fa).setValue(e.id,e)}a11yAlert(e,t=null){const s=u(this,Jp);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,zo)&&(S(this,zo,!1),k(this,ee,Jx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Ye))if(t.div.contains(e)){S(this,Rc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Rc))return;const[e,t]=u(this,Rc);S(this,Rc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,ee,Q_).call(this),k(this,ee,J_).call(this)}removeEditListeners(){k(this,ee,mO).call(this),k(this,ee,Z_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of u(this,Rr))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of u(this,Rr))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=u(this,xs))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,Ye)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of u(this,Rr))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){be(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of s){const d=await r.deserialize(c);if(!d)return;i.push(d)}const a=()=>{for(const c of i)k(this,ee,eS).call(this,c);k(this,ee,tS).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){be(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Qt)!==ye.NONE&&!this.isEditorHandlingKeyboard&&Hu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,zo)&&(S(this,zo,!1),k(this,ee,Jx).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,ee,hO).call(this),k(this,ee,J_).call(this),k(this,ee,Rn).call(this,{isEditing:u(this,Qt)!==ye.NONE,isEmpty:k(this,ee,Cm).call(this),hasSomethingToUndo:u(this,er).hasSomethingToUndo(),hasSomethingToRedo:u(this,er).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,ee,fO).call(this),k(this,ee,Z_).call(this),k(this,ee,Rn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Rr)){S(this,Rr,e);for(const t of u(this,Rr))k(this,ee,ra).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,Cy).id}get currentLayer(){return u(this,on).get(u(this,bh))}getLayer(e){return u(this,on).get(e)}get currentPageIndex(){return u(this,bh)}addLayer(e){u(this,on).set(e.pageIndex,e),u(this,Bo)?e.enable():e.disable()}removeLayer(e){u(this,on).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var a,l,c;if(u(this,Qt)!==e&&!(u(this,tr)&&(await u(this,tr).promise,!u(this,tr)))){if(S(this,tr,Promise.withResolvers()),(a=u(this,Fo))==null||a.commitOrRemove(),S(this,Qt,e),e===ye.NONE){this.setEditingState(!1),k(this,ee,vO).call(this),(l=this._editorUndoBar)==null||l.hide(),u(this,tr).resolve();return}e===ye.SIGNATURE&&await((c=u(this,Wo))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await k(this,ee,gO).call(this),this.unselectAll();for(const d of u(this,on).values())d.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),u(this,tr).resolve();return}for(const d of u(this,Wt).values())d.annotationElementId===t||d.id===t?(this.setSelected(d),i?d.editComment():r&&d.enterInEditMode()):d.unselect();u(this,tr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,Qt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,Rr)){switch(e){case Fe.CREATE:this.currentLayer.addNewEditor(t);return;case Fe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Yp)||S(this,Yp,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of u(this,Ye))s.updateParams(e,t);else for(const s of u(this,Rr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const a of u(this,Wt).values())a.editorType===e&&a.show(t);(((i=u(this,Yp))==null?void 0:i.get(Fe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,ee,ra).call(this,[[Fe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Gp)!==e){S(this,Gp,e);for(const t of u(this,on).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of u(this,Wt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return u(this,Wt).get(e)}addEditor(e){u(this,Wt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(u(this,pi)&&clearTimeout(u(this,pi)),S(this,pi,setTimeout(()=>{this.focusMainContainer(),S(this,pi,null)},0))),u(this,Wt).delete(e.id),e.annotationElementId&&((t=u(this,Ho))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Pc).has(e.annotationElementId))&&((s=u(this,fa))==null||s.remove(e.id))}addDeletedAnnotationElement(e){u(this,Pc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Pc).has(e)}removeDeletedAnnotationElement(e){u(this,Pc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,xs)!==e&&(S(this,xs,e),e&&k(this,ee,ra).call(this,e.propertiesToUpdate))}updateUI(e){u(this,ee,xO)===e&&k(this,ee,ra).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,ee,ra).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Ye).has(e)){u(this,Ye).delete(e),e.unselect(),k(this,ee,Rn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Ye).add(e),e.select(),k(this,ee,ra).call(this,e.propertiesToUpdate),k(this,ee,Rn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=u(this,Fo))==null||t.commitOrRemove();for(const s of u(this,Ye))s!==e&&s.unselect();u(this,Ye).clear(),u(this,Ye).add(e),e.select(),k(this,ee,ra).call(this,e.propertiesToUpdate),k(this,ee,Rn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Ye).has(e)}get firstSelectedEditor(){return u(this,Ye).values().next().value}unselect(e){e.unselect(),u(this,Ye).delete(e),k(this,ee,Rn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Ye).size!==0}get isEnterHandled(){return u(this,Ye).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,er).undo(),k(this,ee,Rn).call(this,{hasSomethingToUndo:u(this,er).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,ee,Cm).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,er).redo(),k(this,ee,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,er).hasSomethingToRedo(),isEmpty:k(this,ee,Cm).call(this)})}addCommands(e){u(this,er).add(e),k(this,ee,Rn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,ee,Cm).call(this)})}cleanUndoStack(e){u(this,er).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,Ye)],s=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const a of t)k(this,ee,eS).call(this,a)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=u(this,xs))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,xs)||this.hasSelection}selectAll(){for(const e of u(this,Ye))e.commit();k(this,ee,tS).call(this,u(this,Wt).values())}unselectAll(){var e;if(!(u(this,xs)&&(u(this,xs).commitOrRemove(),u(this,Qt)!==ye.NONE))&&!((e=u(this,Fo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,Ye))t.unselect();u(this,Ye).clear(),k(this,ee,Rn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;u(this,qo)[0]+=e,u(this,qo)[1]+=t;const[r,i]=u(this,qo),a=[...u(this,Ye)],l=1e3;u(this,vi)&&clearTimeout(u(this,vi)),S(this,vi,setTimeout(()=>{S(this,vi,null),u(this,qo)[0]=u(this,qo)[1]=0,this.addCommands({cmd:()=>{for(const c of a)u(this,Wt).has(c.id)&&(c.translateInPage(r,i),c.translationDone())},undo:()=>{for(const c of a)u(this,Wt).has(c.id)&&(c.translateInPage(-r,-i),c.translationDone())},mustExec:!1})},l));for(const c of a)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,mi,new Map);for(const e of u(this,Ye))u(this,mi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,mi))return!1;this.disableUserSelect(!1);const e=u(this,mi);S(this,mi,null);let t=!1;for(const[{x:r,y:i,pageIndex:a},l]of e)l.newX=r,l.newY=i,l.newPageIndex=a,t||(t=r!==l.savedX||i!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const s=(r,i,a,l)=>{if(u(this,Wt).has(r.id)){const c=u(this,on).get(l);c?r._setParentAndPosition(c,i,a):(r.pageIndex=l,r.x=i,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:a,newPageIndex:l}]of e)s(r,i,a,l)},undo:()=>{for(const[r,{savedX:i,savedY:a,savedPageIndex:l}]of e)s(r,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,mi))for(const s of u(this,mi).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Ye).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,xs)===e}getActive(){return u(this,xs)}getMode(){return u(this,Qt)}get imageManager(){return Te(this,"imageManager",new K_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,f,m)=>({x:(h-r)/a,y:1-(d+f-s)/i,width:m/a,height:f/i});break;case"180":l=(d,h,f,m)=>({x:1-(d+f-s)/i,y:1-(h+m-r)/a,width:f/i,height:m/a});break;case"270":l=(d,h,f,m)=>({x:1-(h+m-r)/a,y:(d-s)/i,width:m/a,height:f/i});break;default:l=(d,h,f,m)=>({x:(d-s)/i,y:(h-r)/a,width:f/i,height:m/a});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const f=t.getRangeAt(d);if(!f.collapsed)for(const{x:m,y:p,width:x,height:g}of f.getClientRects())x===0||g===0||c.push(l(m,p,x,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,yh)||S(this,yh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,yh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,yh))==null?void 0:r.get(e.data.id);if(!t)return;const s=u(this,fa).getRawValue(t);s&&(u(this,Qt)===ye.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=u(this,Ho))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),u(this,Ho).delete(e))}addMissingCanvas(e,t){(u(this,Ho)||S(this,Ho,new Map)).set(e,t)}};vh=new WeakMap,xs=new WeakMap,Wt=new WeakMap,on=new WeakMap,xh=new WeakMap,fa=new WeakMap,yh=new WeakMap,er=new WeakMap,kc=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,bh=new WeakMap,Pc=new WeakMap,mi=new WeakMap,Rr=new WeakMap,Tc=new WeakMap,Wp=new WeakMap,Vp=new WeakMap,wh=new WeakMap,qp=new WeakMap,pi=new WeakMap,$o=new WeakMap,_h=new WeakMap,zo=new WeakMap,gi=new WeakMap,Cy=new WeakMap,Bo=new WeakMap,Gp=new WeakMap,Uo=new WeakMap,Rc=new WeakMap,Sh=new WeakMap,Ho=new WeakMap,Kp=new WeakMap,Qt=new WeakMap,Ye=new WeakMap,ma=new WeakMap,Wo=new WeakMap,Vo=new WeakMap,Yp=new WeakMap,Xp=new WeakMap,qo=new WeakMap,vi=new WeakMap,pa=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,tr=new WeakMap,ee=new WeakSet,Qx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},X_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of u(this,on).values())if(s.hasTextLayer(e))return s;return null},cO=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=k(this,ee,Qx).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(u(this,gi)||S(this,gi,new iq(this)),u(this,gi).show(s,r,this.direction==="ltr"))},dO=function(){var i,a,l;const e=document.getSelection();if(!e||e.isCollapsed){u(this,ma)&&((i=u(this,gi))==null||i.hide(),S(this,ma,null),k(this,ee,Rn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,ma))return;const r=k(this,ee,Qx).call(this,e).closest(".textLayer");if(!r){u(this,ma)&&((a=u(this,gi))==null||a.hide(),S(this,ma,null),k(this,ee,Rn).call(this,{hasSelectedText:!1}));return}if((l=u(this,gi))==null||l.hide(),S(this,ma,t),k(this,ee,Rn).call(this,{hasSelectedText:!0}),!(u(this,Qt)!==ye.HIGHLIGHT&&u(this,Qt)!==ye.NONE)&&(u(this,Qt)===ye.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,zo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=u(this,Qt)===ye.HIGHLIGHT?k(this,ee,X_).call(this,r):null;c==null||c.toggleDrawing();const d=new AbortController,h=this.combinedSignal(d),f=m=>{m.type==="pointerup"&&m.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),m.type==="pointerup"&&k(this,ee,Jx).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}},Jx=function(e=""){u(this,Qt)===ye.HIGHLIGHT?this.highlightSelection(e):u(this,Wp)&&k(this,ee,cO).call(this)},uO=function(){document.addEventListener("selectionchange",k(this,ee,dO).bind(this),{signal:this._signal})},hO=function(){if(u(this,$o))return;S(this,$o,new AbortController);const e=this.combinedSignal(u(this,$o));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},fO=function(){var e;(e=u(this,$o))==null||e.abort(),S(this,$o,null)},Q_=function(){if(u(this,Uo))return;S(this,Uo,new AbortController);const e=this.combinedSignal(u(this,Uo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},mO=function(){var e;(e=u(this,Uo))==null||e.abort(),S(this,Uo,null)},J_=function(){if(u(this,Lo))return;S(this,Lo,new AbortController);const e=this.combinedSignal(u(this,Lo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Z_=function(){var e;(e=u(this,Lo))==null||e.abort(),S(this,Lo,null)},pO=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Rn=function(e){Object.entries(e).some(([s,r])=>u(this,Xp)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Xp),e)}),u(this,Qt)===ye.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,ee,ra).call(this,[[Fe.HIGHLIGHT_FREE,!0]]))},ra=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},gO=async function(){if(!u(this,Bo)){S(this,Bo,!0);const e=[];for(const t of u(this,on).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Wt).values())t.enable()}},vO=function(){if(this.unselectAll(),u(this,Bo)){S(this,Bo,!1);for(const e of u(this,on).values())e.disable();for(const e of u(this,Wt).values())e.disable()}},eS=function(e){const t=u(this,on).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},xO=function(){let e=null;for(e of u(this,Ye));return e},Cm=function(){if(u(this,Wt).size===0)return!0;if(u(this,Wt).size===1)for(const e of u(this,Wt).values())return e.isEmpty();return!1},tS=function(e){for(const t of u(this,Ye))t.unselect();u(this,Ye).clear();for(const t of e)t.isEmpty()||(u(this,Ye).add(t),t.select());k(this,ee,Rn).call(this,{hasSelectedEditor:this.hasSelection})},G(Hu,"TRANSLATE_SMALL",1),G(Hu,"TRANSLATE_BIG",10);let Kd=Hu;var Jt,xi,Mr,Nh,yi,ys,jh,bi,es,ga,Mc,wi,Go,Gr,km,Zx;const Mn=class Mn{constructor(e){C(this,Gr);C(this,Jt,null);C(this,xi,!1);C(this,Mr,null);C(this,Nh,null);C(this,yi,null);C(this,ys,null);C(this,jh,!1);C(this,bi,null);C(this,es,null);C(this,ga,null);C(this,Mc,null);C(this,wi,!1);S(this,es,e),S(this,wi,e._uiManager.useNewAltTextFlow),u(Mn,Go)||S(Mn,Go,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Mn._l10n??(Mn._l10n=e)}async render(){const e=S(this,Mr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,Nh,document.createElement("span"));e.append(t),u(this,wi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Mn,Go).missing),t.setAttribute("data-l10n-id",u(Mn,Go)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=u(this,es)._uiManager._signal;e.addEventListener("contextmenu",vr,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),u(this,es)._uiManager.editAltText(u(this,es)),u(this,wi)&&u(this,es)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Gr,km)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,jh,!0),r(i))},{signal:s}),await k(this,Gr,Zx).call(this),e}finish(){u(this,Mr)&&(u(this,Mr).focus({focusVisible:u(this,jh)}),S(this,jh,!1))}isEmpty(){return u(this,wi)?u(this,Jt)===null:!u(this,Jt)&&!u(this,xi)}hasData(){return u(this,wi)?u(this,Jt)!==null||!!u(this,ga):this.isEmpty()}get guessedText(){return u(this,ga)}async setGuessedText(e){u(this,Jt)===null&&(S(this,ga,e),S(this,Mc,await Mn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,Gr,Zx).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,wi)||u(this,Jt)){(t=u(this,bi))==null||t.remove(),S(this,bi,null);return}if(!u(this,bi)){const s=S(this,bi,document.createElement("div"));s.className="noAltTextBadge",u(this,es).div.append(s)}u(this,bi).classList.toggle("hidden",!e)}serialize(e){let t=u(this,Jt);return!e&&u(this,ga)===t&&(t=u(this,Mc)),{altText:t,decorative:u(this,xi),guessedText:u(this,ga),textWithDisclaimer:u(this,Mc)}}get data(){return{altText:u(this,Jt),decorative:u(this,xi)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(S(this,ga,s),S(this,Mc,r)),!(u(this,Jt)===e&&u(this,xi)===t)&&(i||(S(this,Jt,e),S(this,xi,t)),k(this,Gr,Zx).call(this))}toggle(e=!1){u(this,Mr)&&(!e&&u(this,ys)&&(clearTimeout(u(this,ys)),S(this,ys,null)),u(this,Mr).disabled=!e)}shown(){u(this,es)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Gr,km)}})}destroy(){var e,t;(e=u(this,Mr))==null||e.remove(),S(this,Mr,null),S(this,Nh,null),S(this,yi,null),(t=u(this,bi))==null||t.remove(),S(this,bi,null)}};Jt=new WeakMap,xi=new WeakMap,Mr=new WeakMap,Nh=new WeakMap,yi=new WeakMap,ys=new WeakMap,jh=new WeakMap,bi=new WeakMap,es=new WeakMap,ga=new WeakMap,Mc=new WeakMap,wi=new WeakMap,Go=new WeakMap,Gr=new WeakSet,km=function(){return u(this,Jt)&&"added"||u(this,Jt)===null&&this.guessedText&&"review"||"missing"},Zx=async function(){var r,i,a;const e=u(this,Mr);if(!e)return;if(u(this,wi)){if(e.classList.toggle("done",!!u(this,Jt)),e.setAttribute("data-l10n-id",u(Mn,Go)[u(this,Gr,km)]),(r=u(this,Nh))==null||r.setAttribute("data-l10n-id",u(Mn,Go)[`${u(this,Gr,km)}-label`]),!u(this,Jt)){(i=u(this,yi))==null||i.remove();return}}else{if(!u(this,Jt)&&!u(this,xi)){e.classList.remove("done"),(a=u(this,yi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,yi);if(!t){S(this,yi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,es).id}`;const l=100,c=u(this,es)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(u(this,ys)),S(this,ys,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,ys,setTimeout(()=>{S(this,ys,null),u(this,yi).classList.add("show"),u(this,es)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;u(this,ys)&&(clearTimeout(u(this,ys)),S(this,ys,null)),(d=u(this,yi))==null||d.classList.remove("show")},{signal:c})}u(this,xi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,Jt)),t.parentNode||e.append(t);const s=u(this,es).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},C(Mn,Go,null),G(Mn,"_l10n",null);let hy=Mn;var _i,Ic,Ir,Zp,va,Eh,Ko;class _x{constructor(e){C(this,_i,null);C(this,Ic,!1);C(this,Ir,null);C(this,Zp,null);C(this,va,null);C(this,Eh,null);C(this,Ko,!1);S(this,Ir,e),this.toolbar=null}render(){if(!u(this,Ir)._uiManager.hasCommentManager())return null;const e=S(this,_i,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=u(this,Ir)._uiManager._signal;e.addEventListener("contextmenu",vr,{signal:t}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:t});const s=r=>{r.preventDefault(),this.edit()};return e.addEventListener("click",s,{capture:!0,signal:t}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(S(this,Ic,!0),s(r))},{signal:t}),e}edit(){const{bottom:e,left:t,right:s}=u(this,Ir).getClientDimensions(),r={top:e};u(this,Ir)._uiManager.direction==="ltr"?r.right=s:r.left=t,u(this,Ir)._uiManager.editComment(u(this,Ir),r)}finish(){u(this,_i)&&(u(this,_i).focus({focusVisible:u(this,Ic)}),S(this,Ic,!1))}isDeleted(){return u(this,Ko)||u(this,va)===""}hasBeenEdited(){return this.isDeleted()||u(this,va)!==u(this,Zp)}serialize(){return this.data}get data(){return{text:u(this,va),date:u(this,Eh),deleted:u(this,Ko)}}set data(e){if(e===null){S(this,va,""),S(this,Ko,!0);return}S(this,va,e),S(this,Eh,new Date),S(this,Ko,!1)}setInitialText(e){S(this,Zp,e),this.data=e}toggle(e=!1){u(this,_i)&&(u(this,_i).disabled=!e)}shown(){}destroy(){var e;(e=u(this,_i))==null||e.remove(),S(this,_i,null),S(this,va,""),S(this,Eh,null),S(this,Ir,null),S(this,Ic,!1),S(this,Ko,!1)}}_i=new WeakMap,Ic=new WeakMap,Ir=new WeakMap,Zp=new WeakMap,va=new WeakMap,Eh=new WeakMap,Ko=new WeakMap;var Ah,Dc,eg,tg,ng,sg,rg,xa,Oc,ya,Lc,ba,Wl,yO,bO,wO;const jE=class jE{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:a=null,signal:l}){C(this,Wl);C(this,Ah);C(this,Dc,!1);C(this,eg,null);C(this,tg);C(this,ng);C(this,sg);C(this,rg);C(this,xa,null);C(this,Oc);C(this,ya,null);C(this,Lc);C(this,ba,null);S(this,Ah,e),S(this,eg,s),S(this,tg,t),S(this,ng,r),S(this,sg,i),S(this,rg,a),S(this,Lc,new AbortController),S(this,Oc,AbortSignal.any([l,u(this,Lc).signal])),e.addEventListener("touchstart",k(this,Wl,yO).bind(this),{passive:!1,signal:u(this,Oc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ki.pixelRatio}destroy(){var e,t;(e=u(this,Lc))==null||e.abort(),S(this,Lc,null),(t=u(this,xa))==null||t.abort(),S(this,xa,null)}};Ah=new WeakMap,Dc=new WeakMap,eg=new WeakMap,tg=new WeakMap,ng=new WeakMap,sg=new WeakMap,rg=new WeakMap,xa=new WeakMap,Oc=new WeakMap,ya=new WeakMap,Lc=new WeakMap,ba=new WeakMap,Wl=new WeakSet,yO=function(e){var r,i,a;if((r=u(this,tg))!=null&&r.call(this))return;if(e.touches.length===1){if(u(this,xa))return;const l=S(this,xa,new AbortController),c=AbortSignal.any([u(this,Oc),l.signal]),d=u(this,Ah),h={capture:!0,signal:c,passive:!1},f=m=>{var p;m.pointerType==="touch"&&((p=u(this,xa))==null||p.abort(),S(this,xa,null))};d.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Dt(m),f(m))},h),d.addEventListener("pointerup",f,h),d.addEventListener("pointercancel",f,h);return}if(!u(this,ba)){S(this,ba,new AbortController);const l=AbortSignal.any([u(this,Oc),u(this,ba).signal]),c=u(this,Ah),d={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",k(this,Wl,bO).bind(this),d);const h=k(this,Wl,wO).bind(this);c.addEventListener("touchend",h,d),c.addEventListener("touchcancel",h,d),d.capture=!0,c.addEventListener("pointerdown",Dt,d),c.addEventListener("pointermove",Dt,d),c.addEventListener("pointercancel",Dt,d),c.addEventListener("pointerup",Dt,d),(i=u(this,ng))==null||i.call(this)}if(Dt(e),e.touches.length!==2||(a=u(this,eg))!=null&&a.call(this)){S(this,ya,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),S(this,ya,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},bO=function(e){var N;if(!u(this,ya)||e.touches.length!==2)return;Dt(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:a,screenY:l}=s,c=u(this,ya),{touch0X:d,touch0Y:h,touch1X:f,touch1Y:m}=c,p=f-d,x=m-h,g=a-r,b=l-i,v=Math.hypot(g,b)||1,y=Math.hypot(p,x)||1;if(!u(this,Dc)&&Math.abs(y-v)<=jE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=a,c.touch1Y=l,!u(this,Dc)){S(this,Dc,!0);return}const _=[(r+a)/2,(i+l)/2];(N=u(this,sg))==null||N.call(this,_,y,v)},wO=function(e){var t;e.touches.length>=2||(u(this,ba)&&(u(this,ba).abort(),S(this,ba,null),(t=u(this,rg))==null||t.call(this)),u(this,ya)&&(Dt(e),S(this,ya,null),S(this,Dc,!1)))};let fy=jE;var Fc,Dr,pt,ln,Ch,Yo,ig,$c,cn,zc,wa,Xo,ag,Bc,bs,og,Uc,_a,Si,kh,Ph,nr,Hc,lg,ky,me,nS,cg,sS,e0,_O,SO,rS,t0,iS,NO,jO,EO,aS,AO,oS,CO,kO,PO,lS,Pm;const Ee=class Ee{constructor(e){C(this,me);C(this,Fc,null);C(this,Dr,null);C(this,pt,null);C(this,ln,null);C(this,Ch,!1);C(this,Yo,null);C(this,ig,"");C(this,$c,!1);C(this,cn,null);C(this,zc,null);C(this,wa,null);C(this,Xo,null);C(this,ag,"");C(this,Bc,!1);C(this,bs,null);C(this,og,!1);C(this,Uc,!1);C(this,_a,!1);C(this,Si,null);C(this,kh,0);C(this,Ph,0);C(this,nr,null);C(this,Hc,null);G(this,"isSelected",!1);G(this,"_isCopy",!1);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);C(this,lg,!1);C(this,ky,Ee._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ee.prototype._resizeWithKeyboard,t=Kd.TRANSLATE_SMALL,s=Kd.TRANSLATE_BIG;return Te(this,"_resizerKeyboardManager",new Ov([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Ee.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Te(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new lq({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ee._l10n??(Ee._l10n=e),Ee._l10nResizer||(Ee._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ee._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ee._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,lg)}set _isDraggable(e){var t;S(this,lg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,ky)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,me,Pm).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Bc)?S(this,Bc,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,a]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){k(this,me,nS).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,bs)||S(this,bs,[this.x,this.y,this.width,this.height]),k(this,me,nS).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,bs)||S(this,bs,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:l}=this;const[c,d]=this.getBaseTranslation();a+=c,l+=d;const{style:h}=s;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(a,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,bs)&&(u(this,bs)[0]!==this.x||u(this,bs)[1]!==this.y)}get _hasBeenResized(){return!!u(this,bs)&&(u(this,bs)[2]!==this.width||u(this,bs)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Ee,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:a,width:l,height:c}=this;if(l*=s,c*=r,i*=s,a*=r,this._mustFixPosition)switch(e){case 0:i=$n(i,0,s-l),a=$n(a,0,r-c);break;case 90:i=$n(i,0,s-c),a=$n(a,l,r);break;case 180:i=$n(i,l,s),a=$n(a,c,r);break;case 270:i=$n(i,c,s),a=$n(a,0,r-l);break}this.x=i/=s,this.y=a/=r;const[d,h]=this.getBaseTranslation();i+=d,a+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return k(s=Ee,cg,sS).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return k(s=Ee,cg,sS).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,r]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/s).toFixed(2)}%`,u(this,$c)||(i.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,r=s.endsWith("%"),i=!u(this,$c)&&t.endsWith("%");if(r&&i)return;const[a,l]=this.parentDimensions;r||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!u(this,$c)&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,pt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Uc))return this._editToolbar;this._editToolbar=new G_(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,pt))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,pt)||(hy.initialize(Ee._l10n),S(this,pt,new hy(this)),u(this,Fc)&&(u(this,pt).data=u(this,Fc),S(this,Fc,null))),u(this,pt)}get altTextData(){var e;return(e=u(this,pt))==null?void 0:e.data}set altTextData(e){u(this,pt)&&(u(this,pt).data=e)}get guessedAltText(){var e;return(e=u(this,pt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,pt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,pt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,pt)&&!u(this,pt).isEmpty()}hasAltTextData(){var e;return((e=u(this,pt))==null?void 0:e.hasData())??!1}addCommentButton(){return u(this,ln)?u(this,ln):S(this,ln,new _x(this))}get commentColor(){return null}get comment(){const e=u(this,ln);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){u(this,ln)||S(this,ln,new _x(this)),u(this,ln).data=e}setCommentData(e){u(this,ln)||S(this,ln,new _x(this)),u(this,ln).setInitialText(e)}get hasEditedComment(){var e;return(e=u(this,ln))==null?void 0:e.hasBeenEdited()}async editComment(){u(this,ln)||S(this,ln,new _x(this)),u(this,ln).edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Ch)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,me,oS).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),oO(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,Hc)||S(this,Hc,new fy({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,me,NO).bind(this),onPinching:k(this,me,jO).bind(this),onPinchEnd:k(this,me,EO).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,Bc,!0),this._isDraggable){k(this,me,AO).call(this,e);return}k(this,me,aS).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Si)&&clearTimeout(u(this,Si)),S(this,Si,setTimeout(()=>{var e;S(this,Si,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,a]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/r,h=t/r,f=this.x*i,m=this.y*a,p=this.width*i,x=this.height*a;switch(s){case 0:return[f+d+l,a-m-h-x+c,f+d+p+l,a-m-h+c];case 90:return[f+h+l,a-m+d+c,f+h+x+l,a-m+d+p+c];case 180:return[f-d-p+l,a-m+h+c,f-d+l,a-m+h+x+c];case 270:return[f-h-x+l,a-m-d-p+c,f-h+l,a-m-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,a]=e,l=i-s,c=a-r;switch(this.rotation){case 0:return[s,t-a,l,c];case 90:return[s,t-r,c,l];case 180:return[i,t-r,l,c];case 270:return[i,t-a,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,Uc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,Uc,!1),!0):!1}isInEditMode(){return u(this,Uc)}shouldGetKeyboardEvents(){return u(this,_a)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&r>0&&e<i&&s>0}rebuild(){k(this,me,oS).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){rt("An editor must be serializable")}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId});r.rotation=e.rotation,S(r,Fc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,a]=r.pageDimensions,[l,c,d,h]=r.getRectInCurrentCoords(e.rect,a);return r.x=l/i,r.y=c/a,r.width=d/i,r.height=h/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,Xo))==null||e.abort(),S(this,Xo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Si)&&(clearTimeout(u(this,Si)),S(this,Si,null)),k(this,me,Pm).call(this),this.removeEditToolbar(),u(this,nr)){for(const s of u(this,nr).values())clearTimeout(s);S(this,nr,null)}this.parent=null,(t=u(this,Hc))==null||t.destroy(),S(this,Hc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,me,_O).call(this),u(this,cn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,wa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,cn).children;if(!u(this,Dr)){S(this,Dr,Array.from(t));const a=k(this,me,CO).bind(this),l=k(this,me,kO).bind(this),c=this._uiManager._signal;for(const d of u(this,Dr)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",a,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",k(this,me,PO).bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",Ee._l10nResizer[h])}}const s=u(this,Dr)[0];let r=0;for(const a of t){if(a===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,Dr).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)u(this,cn).append(u(this,cn).firstChild);else if(i>r)for(let l=0;l<i-r;l++)u(this,cn).firstChild.before(u(this,cn).lastChild);let a=0;for(const l of t){const d=u(this,Dr)[a++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Ee._l10nResizer[d])}}k(this,me,lS).call(this,0),S(this,_a,!0),u(this,cn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,_a)&&k(this,me,iS).call(this,u(this,ag),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,me,Pm).call(this),this.div.focus()}select(){var e,t,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=u(this,pt))==null||s.toggleAltTextBadge(!1)}}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=u(this,cn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=u(this,pt))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,og)}set isEditing(e){S(this,og,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){S(this,$c,!0);const s=e/t,{style:r}=this.div;r.aspectRatio=s,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,nr)||S(this,nr,new Map);const{action:s}=e;let r=u(this,nr).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,nr).delete(s),u(this,nr).size===0&&S(this,nr,null)},Ee._telemetryTimeout),u(this,nr).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,Ch,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Ch,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Fc=new WeakMap,Dr=new WeakMap,pt=new WeakMap,ln=new WeakMap,Ch=new WeakMap,Yo=new WeakMap,ig=new WeakMap,$c=new WeakMap,cn=new WeakMap,zc=new WeakMap,wa=new WeakMap,Xo=new WeakMap,ag=new WeakMap,Bc=new WeakMap,bs=new WeakMap,og=new WeakMap,Uc=new WeakMap,_a=new WeakMap,Si=new WeakMap,kh=new WeakMap,Ph=new WeakMap,nr=new WeakMap,Hc=new WeakMap,lg=new WeakMap,ky=new WeakMap,me=new WeakSet,nS=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},cg=new WeakSet,sS=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},e0=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},_O=function(){if(u(this,cn))return;S(this,cn,document.createElement("div")),u(this,cn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");u(this,cn).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",k(this,me,SO).bind(this,s),{signal:t}),r.addEventListener("contextmenu",vr,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,cn))},SO=function(e,t){var h;t.preventDefault();const{isMac:s}=xn.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=u(this,pt))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,S(this,zc,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,me,iS).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Dt,{passive:!1,signal:a}),window.addEventListener("contextmenu",vr,{signal:a}),S(this,wa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=u(this,pt))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,k(this,me,t0).call(this)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})},rS=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*s,a*r),this.fixAndSetPosition(),this._onResized()},t0=function(){if(!u(this,wa))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=u(this,wa);S(this,wa,null);const i=this.x,a=this.y,l=this.width,c=this.height;i===e&&a===t&&l===s&&c===r||this.addCommands({cmd:k(this,me,rS).bind(this,i,a,l,c),undo:k(this,me,rS).bind(this,e,t,s,r),mustExec:!0})},iS=function(e,t){const[s,r]=this.parentDimensions,i=this.x,a=this.y,l=this.width,c=this.height,d=Ee.MIN_SIZE/s,h=Ee.MIN_SIZE/r,f=k(this,me,e0).call(this,this.rotation),m=(F,O)=>[f[0]*F+f[2]*O,f[1]*F+f[3]*O],p=k(this,me,e0).call(this,360-this.rotation),x=(F,O)=>[p[0]*F+p[2]*O,p[1]*F+p[3]*O];let g,b,v=!1,y=!1;switch(e){case"topLeft":v=!0,g=(F,O)=>[0,0],b=(F,O)=>[F,O];break;case"topMiddle":g=(F,O)=>[F/2,0],b=(F,O)=>[F/2,O];break;case"topRight":v=!0,g=(F,O)=>[F,0],b=(F,O)=>[0,O];break;case"middleRight":y=!0,g=(F,O)=>[F,O/2],b=(F,O)=>[0,O/2];break;case"bottomRight":v=!0,g=(F,O)=>[F,O],b=(F,O)=>[0,0];break;case"bottomMiddle":g=(F,O)=>[F/2,O],b=(F,O)=>[F/2,0];break;case"bottomLeft":v=!0,g=(F,O)=>[0,O],b=(F,O)=>[F,0];break;case"middleLeft":y=!0,g=(F,O)=>[0,O/2],b=(F,O)=>[F,O/2];break}const _=g(l,c),N=b(l,c);let j=m(...N);const A=Ee._round(i+j[0]),E=Ee._round(a+j[1]);let P=1,T=1,I,M;if(t.fromKeyboard)({deltaX:I,deltaY:M}=t);else{const{screenX:F,screenY:O}=t,[D,R]=u(this,zc);[I,M]=this.screenToPageTranslation(F-D,O-R),u(this,zc)[0]=F,u(this,zc)[1]=O}if([I,M]=x(I/s,M/r),v){const F=Math.hypot(l,c);P=T=Math.max(Math.min(Math.hypot(N[0]-_[0]-I,N[1]-_[1]-M)/F,1/l,1/c),d/l,h/c)}else y?P=$n(Math.abs(N[0]-_[0]-I),d,1)/l:T=$n(Math.abs(N[1]-_[1]-M),h,1)/c;const L=Ee._round(l*P),z=Ee._round(c*T);j=m(...b(L,z));const $=A-j[0],W=E-j[1];u(this,bs)||S(this,bs,[this.x,this.y,this.width,this.height]),this.width=L,this.height=z,this.x=$,this.y=W,this.setDims(s*L,r*z),this.fixAndSetPosition(),this._onResizing()},NO=function(){var e;S(this,wa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,pt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},jO=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const a=k(this,me,e0).call(this,this.rotation),l=(A,E)=>[a[0]*A+a[2]*E,a[1]*A+a[3]*E],[c,d]=this.parentDimensions,h=this.x,f=this.y,m=this.width,p=this.height,x=Ee.MIN_SIZE/c,g=Ee.MIN_SIZE/d;i=Math.max(Math.min(i,1/m,1/p),x/m,g/p);const b=Ee._round(m*i),v=Ee._round(p*i);if(b===m&&v===p)return;u(this,bs)||S(this,bs,[h,f,m,p]);const y=l(m/2,p/2),_=Ee._round(h+y[0]),N=Ee._round(f+y[1]),j=l(b/2,v/2);this.x=_-j[0],this.y=N-j[1],this.width=b,this.height=v,this.setDims(c*b,d*v),this.fixAndSetPosition(),this._onResizing()},EO=function(){var e;(e=u(this,pt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,me,t0).call(this)},aS=function(e){const{isMac:t}=xn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},AO=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:i},l=d=>{r.abort(),S(this,Yo,null),S(this,Bc,!1),this._uiManager.endDragSession()||k(this,me,aS).call(this,d),s&&this._onStopDragging()};t&&(S(this,kh,e.clientX),S(this,Ph,e.clientY),S(this,Yo,e.pointerId),S(this,ig,e.pointerType),window.addEventListener("pointermove",d=>{s||(s=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:m}=d;if(m!==u(this,Yo)){Dt(d);return}const[p,x]=this.screenToPageTranslation(h-u(this,kh),f-u(this,Ph));S(this,kh,h),S(this,Ph,f),this._uiManager.dragSelectedEditors(p,x)},a),window.addEventListener("touchmove",Dt,a),window.addEventListener("pointerdown",d=>{d.pointerType===u(this,ig)&&(u(this,Hc)||d.isPrimary)&&l(d),Dt(d)},a));const c=d=>{if(!u(this,Yo)||u(this,Yo)===d.pointerId){l(d);return}Dt(d)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},oS=function(){if(u(this,Xo)||!this.div)return;S(this,Xo,new AbortController);const e=this._uiManager.combinedSignal(u(this,Xo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},CO=function(e){Ee._resizerKeyboardManager.exec(this,e)},kO=function(e){var t;u(this,_a)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,cn)&&k(this,me,Pm).call(this)},PO=function(e){S(this,ag,u(this,_a)?e:"")},lS=function(e){if(u(this,Dr))for(const t of u(this,Dr))t.tabIndex=e},Pm=function(){S(this,_a,!1),k(this,me,lS).call(this,-1),k(this,me,t0).call(this)},C(Ee,cg),G(Ee,"_l10n",null),G(Ee,"_l10nResizer",null),G(Ee,"_borderLineWidth",-1),G(Ee,"_colorManager",new Y_),G(Ee,"_zIndex",1),G(Ee,"_telemetryTimeout",1e3);let lt=Ee;class lq extends lt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const pk=3285377520,Qs=4294901760,oi=65535;class TO{constructor(e){this.h1=e?e&4294967295:pk,this.h2=e?e&4294967295:pk}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,b=e.length;g<b;g++){const v=e.charCodeAt(g);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,a=new Uint32Array(t.buffer,0,r);let l=0,c=0,d=this.h1,h=this.h2;const f=3432918353,m=461845907,p=f&oi,x=m&oi;for(let g=0;g<r;g++)g&1?(l=a[g],l=l*f&Qs|l*p&oi,l=l<<15|l>>>17,l=l*m&Qs|l*x&oi,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=a[g],c=c*f&Qs|c*p&oi,c=c<<15|c>>>17,c=c*m&Qs|c*x&oi,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*f&Qs|l*p&oi,l=l<<15|l>>>17,l=l*m&Qs|l*x&oi,r&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Qs|e*36045&oi,t=t*4283543511&Qs|((t<<16|e>>>16)*2950163797&Qs)>>>16,e^=t>>>1,e=e*444984403&Qs|e*60499&oi,t=t*3301882366&Qs|((t<<16|e>>>16)*3120437893&Qs)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const cS=Object.freeze({map:null,hash:"",transfer:void 0});var Wc,Vc,dn,Py,RO;class eE{constructor(){C(this,Py);C(this,Wc,!1);C(this,Vc,null);C(this,dn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=u(this,dn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return u(this,dn).get(e)}remove(e){if(u(this,dn).delete(e),u(this,dn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,dn).values())if(t instanceof lt)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=u(this,dn).get(e);let r=!1;if(s!==void 0)for(const[i,a]of Object.entries(t))s[i]!==a&&(r=!0,s[i]=a);else r=!0,u(this,dn).set(e,t);r&&k(this,Py,RO).call(this),t instanceof lt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,dn).has(e)}get size(){return u(this,dn).size}resetModified(){u(this,Wc)&&(S(this,Wc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new MO(this)}get serializable(){if(u(this,dn).size===0)return cS;const e=new Map,t=new TO,s=[],r=Object.create(null);let i=!1;for(const[a,l]of u(this,dn)){const c=l instanceof lt?l.serialize(!1,r):l;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:cS}get editorStats(){let e=null;const t=new Map;for(const s of u(this,dn).values()){if(!(s instanceof lt))continue;const r=s.telemetryFinalData;if(!r)continue;const{type:i}=r;t.has(i)||t.set(i,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[l,c]of Object.entries(r)){if(l==="type")continue;let d=a.get(l);d||(d=new Map,a.set(l,d));const h=d.get(c)??0;d.set(c,h+1)}}for(const[s,r]of t)e[s]=r.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){S(this,Vc,null)}get modifiedIds(){if(u(this,Vc))return u(this,Vc);const e=[];for(const t of u(this,dn).values())!(t instanceof lt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return S(this,Vc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,dn).entries()}}Wc=new WeakMap,Vc=new WeakMap,dn=new WeakMap,Py=new WeakSet,RO=function(){u(this,Wc)||(S(this,Wc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var dg;class MO extends eE{constructor(t){super();C(this,dg);const{map:s,hash:r,transfer:i}=t.serializable,a=structuredClone(s,i?{transfer:i}:null);S(this,dg,{map:a,hash:r,transfer:i})}get print(){rt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,dg)}get modifiedIds(){return Te(this,"modifiedIds",{ids:new Set,hash:""})}}dg=new WeakMap;var Th;class cq{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,Th,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Th).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||u(this,Th).has(e.loadedName))){if(Ft(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:a}=e,l=new FontFace(r,i,a);this.addNativeFontFace(l);try{await l.load(),u(this,Th).add(r),s==null||s(e)}catch{be(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw be(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Te(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Te(this,"isSyncFontLoadingSupported",Fn||xn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ft(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Te(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(N,j){return N.charCodeAt(j)<<24|N.charCodeAt(j+1)<<16|N.charCodeAt(j+2)<<8|N.charCodeAt(j+3)&255}function r(N,j,A,E){const P=N.substring(0,j),T=N.substring(j+A);return P+E+T}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function h(N,j){if(++d>30){be("Load test font never loaded."),j();return}if(c.font="30px "+N,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(h.bind(null,N,j))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=r(m,976,f.length,f);const x=16,g=1482184792;let b=s(m,x);for(i=0,a=f.length-3;i<a;i+=4)b=b-g+s(f,i)|0;i<f.length&&(b=b-g+s(f+"XXX",i)|0),m=r(m,x,4,G7(b));const v=`url(data:font/opentype;base64,${btoa(m)});`,y=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(y);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const N of[e.loadedName,f]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=N,_.append(j)}this._document.body.append(_),h(f,()=>{_.remove(),t.complete()})}}Th=new WeakMap;class dq{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${eO(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(a){be(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}}function uq(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Fn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function hq(n){if(Fn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Mv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Sx(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const dS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,fq=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",mq=J7.bind(null,dS,fq);var Sa,Ty;class pq{constructor(){C(this,Sa,new Map);C(this,Ty,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};u(this,Ty).then(()=>{for(const[r]of u(this,Sa))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){be("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}u(this,Sa).set(t,r)}removeEventListener(e,t){const s=u(this,Sa).get(t);s==null||s(),u(this,Sa).delete(t)}terminate(){for(const[,e]of u(this,Sa))e==null||e();u(this,Sa).clear()}}Sa=new WeakMap,Ty=new WeakMap;const Nx={DATA:1,ERROR:2},Mt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function gk(){}function Qn(n){if(n instanceof Bl||n instanceof W_||n instanceof hk||n instanceof dy||n instanceof Kw)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Bl(n.message);case"InvalidPDFException":return new W_(n.message);case"PasswordException":return new hk(n.message,n.code);case"ResponseException":return new dy(n.message,n.status,n.missing);case"UnknownErrorException":return new Kw(n.message,n.details)}return new Kw(n.message,n.toString())}var Rh,hr,IO,DO,OO,n0;class Tm{constructor(e,t,s){C(this,hr);C(this,Rh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",k(this,hr,IO).bind(this),{signal:u(this,Rh).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:d.desiredSize},r),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,c.postMessage({sourceName:a,targetName:l,stream:Mt.PULL,streamId:i,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Ft(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Mt.CANCEL,streamId:i,reason:Qn(d)}),h.promise}},s)}destroy(){var e;(e=u(this,Rh))==null||e.abort(),S(this,Rh,null)}}Rh=new WeakMap,hr=new WeakSet,IO=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,hr,OO).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Nx.DATA)r.resolve(e.data);else if(e.callback===Nx.ERROR)r.reject(Qn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:s,targetName:r,callback:Nx.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:s,targetName:r,callback:Nx.ERROR,callbackId:e.callbackId,reason:Qn(a)})});return}if(e.streamId){k(this,hr,DO).call(this,e);return}t(e.data)},DO=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(d,h=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=h,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:Mt.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Mt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(d){Ft(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Mt.ERROR,streamId:t,reason:Qn(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Mt.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:s,targetName:r,stream:Mt.START_COMPLETE,streamId:t,reason:Qn(d)})})},OO=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Mt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Qn(e.reason));break;case Mt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Qn(e.reason));break;case Mt.PULL:if(!l){i.postMessage({sourceName:s,targetName:r,stream:Mt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||gk).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Mt.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:s,targetName:r,stream:Mt.PULL_COMPLETE,streamId:t,reason:Qn(d)})});break;case Mt.ENQUEUE:if(Ft(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Mt.CLOSE:if(Ft(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),k(this,hr,n0).call(this,a,t);break;case Mt.ERROR:Ft(a,"error should have stream controller"),a.controller.error(Qn(e.reason)),k(this,hr,n0).call(this,a,t);break;case Mt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Qn(e.reason)),k(this,hr,n0).call(this,a,t);break;case Mt.CANCEL:if(!l)break;const c=Qn(e.reason);Promise.try(l.onCancel||gk,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Mt.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:s,targetName:r,stream:Mt.CANCEL_COMPLETE,streamId:t,reason:Qn(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},n0=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var ug;class LO{constructor({enableHWA:e=!1}){C(this,ug,!1);S(this,ug,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!u(this,ug)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){rt("Abstract method `_createCanvas` called.")}}ug=new WeakMap;class gq extends LO{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class FO{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class vk extends FO{async _fetch(e){const t=await Iv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Mv(t)}}class $O{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var qc,Mh,Na,ja,En,Gc,Kc,se,Sn,Rm,Nu,s0,ju,zO,uS,Eu,Mm,Im,hS,Dm;class vq extends $O{constructor({docId:t,ownerDocument:s=globalThis.document}){super();C(this,se);C(this,qc);C(this,Mh);C(this,Na);C(this,ja);C(this,En);C(this,Gc);C(this,Kc,0);S(this,ja,t),S(this,En,s)}addFilter(t){if(!t)return"none";let s=u(this,se,Sn).get(t);if(s)return s;const[r,i,a]=k(this,se,s0).call(this,t),l=t.length===1?r:`${r}${i}${a}`;if(s=u(this,se,Sn).get(l),s)return u(this,se,Sn).set(t,s),s;const c=`g_${u(this,ja)}_transfer_map_${Xt(this,Kc)._++}`,d=k(this,se,ju).call(this,c);u(this,se,Sn).set(t,d),u(this,se,Sn).set(l,d);const h=k(this,se,Eu).call(this,c);return k(this,se,Im).call(this,r,i,a,h),d}addHCMFilter(t,s){var x;const r=`${t}-${s}`,i="base";let a=u(this,se,Rm).get(i);if((a==null?void 0:a.key)===r||(a?((x=a.filter)==null||x.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},u(this,se,Rm).set(i,a)),!t||!s))return a.url;const l=k(this,se,Dm).call(this,t);t=he.makeHexColor(...l);const c=k(this,se,Dm).call(this,s);if(s=he.makeHexColor(...c),u(this,se,Nu).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const d=new Array(256);for(let g=0;g<=255;g++){const b=g/255;d[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const h=d.join(","),f=`g_${u(this,ja)}_hcm_filter`,m=a.filter=k(this,se,Eu).call(this,f);k(this,se,Im).call(this,h,h,h,m),k(this,se,uS).call(this,m);const p=(g,b)=>{const v=l[g]/255,y=c[g]/255,_=new Array(b+1);for(let N=0;N<=b;N++)_[N]=v+N/b*(y-v);return _.join(",")};return k(this,se,Im).call(this,p(0,5),p(1,5),p(2,5),m),a.url=k(this,se,ju).call(this,f),a.url}addAlphaFilter(t){let s=u(this,se,Sn).get(t);if(s)return s;const[r]=k(this,se,s0).call(this,[t]),i=`alpha_${r}`;if(s=u(this,se,Sn).get(i),s)return u(this,se,Sn).set(t,s),s;const a=`g_${u(this,ja)}_alpha_map_${Xt(this,Kc)._++}`,l=k(this,se,ju).call(this,a);u(this,se,Sn).set(t,l),u(this,se,Sn).set(i,l);const c=k(this,se,Eu).call(this,a);return k(this,se,hS).call(this,r,c),l}addLuminosityFilter(t){let s=u(this,se,Sn).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=k(this,se,s0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=u(this,se,Sn).get(i),s)return u(this,se,Sn).set(t,s),s;const a=`g_${u(this,ja)}_luminosity_map_${Xt(this,Kc)._++}`,l=k(this,se,ju).call(this,a);u(this,se,Sn).set(t,l),u(this,se,Sn).set(i,l);const c=k(this,se,Eu).call(this,a);return k(this,se,zO).call(this,c),t&&k(this,se,hS).call(this,r,c),l}addHighlightHCMFilter(t,s,r,i,a){var y;const l=`${s}-${r}-${i}-${a}`;let c=u(this,se,Rm).get(t);if((c==null?void 0:c.key)===l||(c?((y=c.filter)==null||y.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},u(this,se,Rm).set(t,c)),!s||!r))return c.url;const[d,h]=[s,r].map(k(this,se,Dm).bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,x]=[i,a].map(k(this,se,Dm).bind(this));m<f&&([f,m,p,x]=[m,f,x,p]),u(this,se,Nu).style.color="";const g=(_,N,j)=>{const A=new Array(256),E=(m-f)/j,P=_/255,T=(N-_)/(255*j);let I=0;for(let M=0;M<=j;M++){const L=Math.round(f+M*E),z=P+M*T;for(let $=I;$<=L;$++)A[$]=z;I=L+1}for(let M=I;M<256;M++)A[M]=A[I-1];return A.join(",")},b=`g_${u(this,ja)}_hcm_${t}_filter`,v=c.filter=k(this,se,Eu).call(this,b);return k(this,se,uS).call(this,v),k(this,se,Im).call(this,g(p[0],x[0],5),g(p[1],x[1],5),g(p[2],x[2],5),v),c.url=k(this,se,ju).call(this,b),c.url}destroy(t=!1){var s,r,i,a;t&&((s=u(this,Gc))!=null&&s.size)||((r=u(this,Na))==null||r.parentNode.parentNode.remove(),S(this,Na,null),(i=u(this,Mh))==null||i.clear(),S(this,Mh,null),(a=u(this,Gc))==null||a.clear(),S(this,Gc,null),S(this,Kc,0))}}qc=new WeakMap,Mh=new WeakMap,Na=new WeakMap,ja=new WeakMap,En=new WeakMap,Gc=new WeakMap,Kc=new WeakMap,se=new WeakSet,Sn=function(){return u(this,Mh)||S(this,Mh,new Map)},Rm=function(){return u(this,Gc)||S(this,Gc,new Map)},Nu=function(){if(!u(this,Na)){const t=u(this,En).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=u(this,En).createElementNS(sa,"svg");r.setAttribute("width",0),r.setAttribute("height",0),S(this,Na,u(this,En).createElementNS(sa,"defs")),t.append(r),r.append(u(this,Na)),u(this,En).body.append(t)}return u(this,Na)},s0=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const f=h.join(",");return[f,f,f]}const[s,r,i]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=s[d]/255,l[d]=r[d]/255,c[d]=i[d]/255;return[a.join(","),l.join(","),c.join(",")]},ju=function(t){if(u(this,qc)===void 0){S(this,qc,"");const s=u(this,En).URL;s!==u(this,En).baseURI&&(Ob(s)?be('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,qc,QD(s,"")))}return`url(${u(this,qc)}#${t})`},zO=function(t){const s=u(this,En).createElementNS(sa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},uS=function(t){const s=u(this,En).createElementNS(sa,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},Eu=function(t){const s=u(this,En).createElementNS(sa,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),u(this,se,Nu).append(s),s},Mm=function(t,s,r){const i=u(this,En).createElementNS(sa,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Im=function(t,s,r,i){const a=u(this,En).createElementNS(sa,"feComponentTransfer");i.append(a),k(this,se,Mm).call(this,a,"feFuncR",t),k(this,se,Mm).call(this,a,"feFuncG",s),k(this,se,Mm).call(this,a,"feFuncB",r)},hS=function(t,s){const r=u(this,En).createElementNS(sa,"feComponentTransfer");s.append(r),k(this,se,Mm).call(this,r,"feFuncA",t)},Dm=function(t){return u(this,se,Nu).style.color=t,Lb(getComputedStyle(u(this,se,Nu)).getPropertyValue("color"))};class BO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class xk extends BO{async _fetch(e){const t=await Iv(e,"arraybuffer");return new Uint8Array(t)}}class UO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){rt("Abstract method `_fetch` called.")}}class yk extends UO{async _fetch(e){const t=await Iv(e,"arraybuffer");return new Uint8Array(t)}}Fn&&be("Please use the `legacy` build in Node.js environments.");async function tE(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class xq extends $O{}class yq extends LO{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class bq extends FO{async _fetch(e){return tE(e)}}class wq extends BO{async _fetch(e){return tE(e)}}class _q extends UO{async _fetch(e){return tE(e)}}const mn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function fS(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class nE{isModifyingCurrentTransform(){return!1}getPattern(){rt("Abstract method `getPattern` called.")}}class Sq extends nE{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===mn.STROKE||r===mn.FILL){const a=t.current.getClippedPathBoundingBox(r,bt(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),s=he.transform(s,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),fS(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(s);i.setTransform(f)}else fS(e,this._bbox),i=this._createGradient(e);return i}}function Qw(n,e,t,s,r,i,a,l){const c=e.coords,d=e.colors,h=n.data,f=n.width*4;let m;c[t+1]>c[s+1]&&(m=t,t=s,s=m,m=i,i=a,a=m),c[s+1]>c[r+1]&&(m=s,s=r,r=m,m=a,a=l,l=m),c[t+1]>c[s+1]&&(m=t,t=s,s=m,m=i,i=a,a=m);const p=(c[t]+e.offsetX)*e.scaleX,x=(c[t+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,b=(c[s+1]+e.offsetY)*e.scaleY,v=(c[r]+e.offsetX)*e.scaleX,y=(c[r+1]+e.offsetY)*e.scaleY;if(x>=y)return;const _=d[i],N=d[i+1],j=d[i+2],A=d[a],E=d[a+1],P=d[a+2],T=d[l],I=d[l+1],M=d[l+2],L=Math.round(x),z=Math.round(y);let $,W,F,O,D,R,U,X;for(let B=L;B<=z;B++){if(B<b){const H=B<x?0:(x-B)/(x-b);$=p-(p-g)*H,W=_-(_-A)*H,F=N-(N-E)*H,O=j-(j-P)*H}else{let H;B>y?H=1:b===y?H=0:H=(b-B)/(b-y),$=g-(g-v)*H,W=A-(A-T)*H,F=E-(E-I)*H,O=P-(P-M)*H}let V;B<x?V=0:B>y?V=1:V=(x-B)/(x-y),D=p-(p-v)*V,R=_-(_-T)*V,U=N-(N-I)*V,X=j-(j-M)*V;const Q=Math.round(Math.min($,D)),J=Math.round(Math.max($,D));let ce=f*B+Q*4;for(let H=Q;H<=J;H++)V=($-H)/($-D),V<0?V=0:V>1&&(V=1),h[ce++]=W-(W-R)*V|0,h[ce++]=F-(F-U)*V|0,h[ce++]=O-(O-X)*V|0,h[ce++]=255}}function Nq(n,e,t){const s=e.coords,r=e.colors;let i,a;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(s.length/l)-1,d=l-1;for(i=0;i<c;i++){let h=i*l;for(let f=0;f<d;f++,h++)Qw(n,t,s[h],s[h+1],s[h+l],r[h],r[h+1],r[h+l]),Qw(n,t,s[h+l+1],s[h+1],s[h+l],r[h+l+1],r[h+1],r[h+l])}break;case"triangles":for(i=0,a=s.length;i<a;i+=3)Qw(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class jq extends nE{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=d/f,x=h/m,g={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/x},b=f+2*2,v=m+2*2,y=s.getCanvas("mesh",b,v),_=y.context,N=_.createImageData(f,m);if(t){const A=N.data;for(let E=0,P=A.length;E<P;E+=4)A[E]=t[0],A[E+1]=t[1],A[E+2]=t[2],A[E+3]=255}for(const A of this._figures)Nq(N,A,g);return _.putImageData(N,2,2),{canvas:y.canvas,offsetX:l-2*p,offsetY:c-2*x,scaleX:p,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){fS(e,this._bbox);const i=new Float32Array(2);if(r===mn.SHADING)he.singularValueDecompose2dScale(bt(e),i);else if(this.matrix){he.singularValueDecompose2dScale(this.matrix,i);const[l,c]=i;he.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=c}else he.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,r===mn.SHADING?null:this._background,t.cachedCanvases);return r!==mn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class Eq extends nE{getPattern(){return"hotpink"}}function Aq(n){switch(n[0]){case"RadialAxial":return new Sq(n);case"Mesh":return new jq(n);case"Dummy":return new Eq}throw new Error(`Unknown IR type: ${n[0]}`)}const bk={COLORED:1,UNCOLORED:2},Ry=class Ry{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:r,tilingType:i,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),Db("TilingType: "+i);const h=t[0],f=t[1],m=t[2],p=t[3],x=m-h,g=p-f,b=new Float32Array(2);he.singularValueDecompose2dScale(this.matrix,b);const[v,y]=b;he.singularValueDecompose2dScale(this.baseTransform,b);const _=v*b[0],N=y*b[1];let j=x,A=g,E=!1,P=!1;const T=Math.ceil(c*_),I=Math.ceil(d*N),M=Math.ceil(x*_),L=Math.ceil(g*N);T>=M?j=c:E=!0,I>=L?A=d:P=!0;const z=this.getSizeAndScale(j,this.ctx.canvas.width,_),$=this.getSizeAndScale(A,this.ctx.canvas.height,N),W=e.cachedCanvases.getCanvas("pattern",z.size,$.size),F=W.context,O=l.createCanvasGraphics(F);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,r,a),F.translate(-z.scale*h,-$.scale*f),O.transform(z.scale,0,0,$.scale,0,0),F.save(),this.clipBbox(O,h,f,m,p),O.baseTransform=bt(O.ctx),O.executeOperatorList(s),O.endDrawing(),F.restore(),E||P){const D=W.canvas;E&&(j=c),P&&(A=d);const R=this.getSizeAndScale(j,this.ctx.canvas.width,_),U=this.getSizeAndScale(A,this.ctx.canvas.height,N),X=R.size,B=U.size,V=e.cachedCanvases.getCanvas("pattern-workaround",X,B),Q=V.context,J=E?Math.floor(x/c):0,ce=P?Math.floor(g/d):0;for(let H=0;H<=J;H++)for(let pe=0;pe<=ce;pe++)Q.drawImage(D,X*H,B*pe,X,B,0,0,X,B);return{canvas:V.canvas,scaleX:R.scale,scaleY:U.scale,offsetX:h,offsetY:f}}return{canvas:W.canvas,scaleX:z.scale,scaleY:$.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max(Ry.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const a=r-t,l=i-s;e.ctx.rect(t,s,a,l),he.axialAlignedBoundingBox([t,s,r,i],bt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case bk.COLORED:const{fillStyle:a,strokeStyle:l}=this.ctx;r.fillStyle=i.fillColor=a,r.strokeStyle=i.strokeColor=l;break;case bk.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new q7(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r){let i=s;r!==mn.SHADING&&(i=he.transform(i,t.baseTransform),this.matrix&&(i=he.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};G(Ry,"MAX_PATTERN_SIZE",3e3);let mS=Ry;function Cq({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=xn.isLittleEndian?4278190080:255,[c,d]=a?[i,l]:[l,i],h=s>>3,f=s&7,m=n.length;t=new Uint32Array(t.buffer);let p=0;for(let x=0;x<r;x++){for(const b=e+h;e<b;e++){const v=e<m?n[e]:255;t[p++]=v&128?d:c,t[p++]=v&64?d:c,t[p++]=v&32?d:c,t[p++]=v&16?d:c,t[p++]=v&8?d:c,t[p++]=v&4?d:c,t[p++]=v&2?d:c,t[p++]=v&1?d:c}if(f===0)continue;const g=e<m?n[e++]:255;for(let b=0;b<f;b++)t[p++]=g&1<<7-b?d:c}return{srcPos:e,destPos:p}}const wk=16,_k=100,kq=15,Sk=10,rs=16,Jw=new DOMMatrix,Ds=new Float32Array(2),Uu=new Float32Array([1/0,1/0,-1/0,-1/0]);function Pq(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,a,l){e.transform(t,s,r,i,a,l),this.__originalTransform(t,s,r,i,a,l)},n.setTransform=function(t,s,r,i,a,l){e.setTransform(t,s,r,i,a,l),this.__originalSetTransform(t,s,r,i,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,a,l){e.bezierCurveTo(t,s,r,i,a,l),this.__originalBezierCurveTo(t,s,r,i,a,l)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class Tq{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function jx(n,e,t,s,r,i,a,l,c,d){const[h,f,m,p,x,g]=bt(n);if(f===0&&m===0){const y=a*h+x,_=Math.round(y),N=l*p+g,j=Math.round(N),A=(a+c)*h+x,E=Math.abs(Math.round(A)-_)||1,P=(l+d)*p+g,T=Math.abs(Math.round(P)-j)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),_,j),n.drawImage(e,t,s,r,i,0,0,E,T),n.setTransform(h,f,m,p,x,g),[E,T]}if(h===0&&p===0){const y=l*m+x,_=Math.round(y),N=a*f+g,j=Math.round(N),A=(l+d)*m+x,E=Math.abs(Math.round(A)-_)||1,P=(a+c)*f+g,T=Math.abs(Math.round(P)-j)||1;return n.setTransform(0,Math.sign(f),Math.sign(m),0,_,j),n.drawImage(e,t,s,r,i,0,0,T,E),n.setTransform(h,f,m,p,x,g),[T,E]}n.drawImage(e,t,s,r,i,a,l,c,d);const b=Math.hypot(h,f),v=Math.hypot(m,p);return[b*c,v*d]}class Nk{constructor(e,t){G(this,"alphaIsShape",!1);G(this,"fontSize",0);G(this,"fontSizeScale",1);G(this,"textMatrix",null);G(this,"textMatrixScale",1);G(this,"fontMatrix",H_);G(this,"leading",0);G(this,"x",0);G(this,"y",0);G(this,"lineX",0);G(this,"lineY",0);G(this,"charSpacing",0);G(this,"wordSpacing",0);G(this,"textHScale",1);G(this,"textRenderingMode",_n.FILL);G(this,"textRise",0);G(this,"fillColor","#000000");G(this,"strokeColor","#000000");G(this,"patternFill",!1);G(this,"patternStroke",!1);G(this,"fillAlpha",1);G(this,"strokeAlpha",1);G(this,"lineWidth",1);G(this,"activeSMask",null);G(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Uu.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=mn.FILL,t=null){const s=this.minMax.slice();if(e===mn.STROKE){t||rt("Stroke bounding box must include transform."),he.singularValueDecompose2dScale(t,Ds);const r=Ds[0]*this.lineWidth/2,i=Ds[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=he.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Uu,0)}getClippedPathBoundingBox(e=mn.FILL,t=null){return he.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function jk(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%rs,i=(t-r)/rs,a=r===0?i:i+1,l=n.createImageData(s,rs);let c=0,d;const h=e.data,f=l.data;let m,p,x,g;if(e.kind===Kx.GRAYSCALE_1BPP){const b=h.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),y=v.length,_=s+7>>3,N=4294967295,j=xn.isLittleEndian?4278190080:255;for(m=0;m<a;m++){for(x=m<i?rs:r,d=0,p=0;p<x;p++){const A=b-c;let E=0;const P=A>_?s:A*8-7,T=P&-8;let I=0,M=0;for(;E<T;E+=8)M=h[c++],v[d++]=M&128?N:j,v[d++]=M&64?N:j,v[d++]=M&32?N:j,v[d++]=M&16?N:j,v[d++]=M&8?N:j,v[d++]=M&4?N:j,v[d++]=M&2?N:j,v[d++]=M&1?N:j;for(;E<P;E++)I===0&&(M=h[c++],I=128),v[d++]=M&I?N:j,I>>=1}for(;d<y;)v[d++]=0;n.putImageData(l,0,m*rs)}}else if(e.kind===Kx.RGBA_32BPP){for(p=0,g=s*rs*4,m=0;m<i;m++)f.set(h.subarray(c,c+g)),c+=g,n.putImageData(l,0,p),p+=rs;m<a&&(g=s*r*4,f.set(h.subarray(c,c+g)),n.putImageData(l,0,p))}else if(e.kind===Kx.RGB_24BPP)for(x=rs,g=s*x,m=0;m<a;m++){for(m>=i&&(x=r,g=s*x),d=0,p=g;p--;)f[d++]=h[c++],f[d++]=h[c++],f[d++]=h[c++],f[d++]=255;n.putImageData(l,0,m*rs)}else throw new Error(`bad image kind: ${e.kind}`)}function Ek(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%rs,i=(t-r)/rs,a=r===0?i:i+1,l=n.createImageData(s,rs);let c=0;const d=e.data,h=l.data;for(let f=0;f<a;f++){const m=f<i?rs:r;({srcPos:c}=Cq({src:d,srcPos:c,dest:h,width:s,height:m,nonBlackColor:0})),n.putImageData(l,0,f*rs)}}function pm(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Ex(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function Ak(n,e){if(e)return!0;he.singularValueDecompose2dScale(n,Ds);const t=Math.fround(Ki.pixelRatio*Ul.PDF_TO_CSS_UNITS);return Ds[0]<=t&&Ds[1]<=t}const Rq=["butt","round","square"],Mq=["miter","round","bevel"],Iq={},Ck={};var ni,pS,gS,vS;const EE=class EE{constructor(e,t,s,r,i,{optionalContentConfig:a,markedContentStack:l=null},c,d){C(this,ni);this.ctx=e,this.current=new Nk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new Tq(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...bt(this.compositeCtx))}this.ctx.save(),Ex(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=bt(this.ctx)}executeOperatorList(e,t,s,r){const i=e.argsArray,a=e.fnArray;let l=t||0;const c=i.length;if(c===l)return l;const d=c-l>Sk&&typeof s=="function",h=d?Date.now()+kq:0;let f=0;const m=this.commonObjs,p=this.objs;let x;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,s),l;if(x=a[l],x!==cy.dependency)this[x].apply(this,i[l]);else for(const g of i[l]){const b=g.startsWith("g_")?m:p;if(!b.has(g))return b.get(g,s),l}if(l++,l===c)return l;if(d&&++f>Sk){if(Date.now()>h)return s(),l;f=0}}}endDrawing(){k(this,ni,pS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,ni,gS).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=s,c=r,d="prescale1",h,f;for(;i>2&&l>1||a>2&&c>1;){let m=l,p=c;i>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/m),a>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/p),h=this.cachedCanvases.getCanvas(d,m,p),f=h.context,f.clearRect(0,0,m,p),f.drawImage(e,0,0,l,c,0,0,m,p),e=h.canvas,l=m,c=p,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:r}=e,i=this.current.fillColor,a=this.current.patternFill,l=bt(t);let c,d,h,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;d=JSON.stringify(a?l:[l.slice(0,4),i]),c=this._cachedBitmapsMap.get(T),c||(c=new Map,this._cachedBitmapsMap.set(T,c));const I=c.get(d);if(I&&!a){const M=Math.round(Math.min(l[0],l[2])+l[4]),L=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:I,offsetX:M,offsetY:L}}h=I}h||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),Ek(f.context,e));let m=he.transform(l,[1/s,0,0,-1/r,0,0]);m=he.transform(m,[1,0,0,1,0,-r]);const p=Uu.slice();he.axialAlignedBoundingBox([0,0,s,r],m,p);const[x,g,b,v]=p,y=Math.round(b-x)||1,_=Math.round(v-g)||1,N=this.cachedCanvases.getCanvas("fillCanvas",y,_),j=N.context,A=x,E=g;j.translate(-A,-E),j.transform(...m),h||(h=this._scaleImage(f.canvas,ai(j)),h=h.img,c&&a&&c.set(d,h)),j.imageSmoothingEnabled=Ak(bt(j),e.interpolate),jx(j,h,0,0,h.width,h.height,0,0,s,r),j.globalCompositeOperation="source-in";const P=he.transform(ai(j),[1,0,0,1,-A,-E]);return j.fillStyle=a?i.getPattern(t,this,P,mn.FILL):i,j.fillRect(0,0,s,r),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,N.canvas)),{canvas:N.canvas,offsetX:Math.round(A),offsetY:Math.round(E)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=Rq[e]}setLineJoin(e){this.ctx.lineJoin=Mq[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=r.context;i.setTransform(this.suspendedCtx.getTransform()),pm(this.suspendedCtx,i),Pq(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),pm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],a=r[1],l=r[2]-i,c=r[3]-a;l===0||c===0||(this.genericComposeSMask(t.context,s,l,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,a,l,c,d,h,f){let m=e.canvas,p=c-h,x=d-f;if(a)if(p<0||x<0||p+s>m.width||x+r>m.height){const b=this.cachedCanvases.getCanvas("maskExtension",s,r),v=b.context;v.drawImage(m,-p,-x),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,s,r),v.globalCompositeOperation="source-over",m=b.canvas,p=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(p,x,s,r),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(p,x,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const g=new Path2D;g.rect(c,d,s,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(m,p,x,s,r,c,d,s,r),t.restore()}save(){this.inSMaskMode&&pm(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&pm(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,a){this.ctx.transform(e,t,s,r,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){let[r]=t;if(!s){r||(r=t[0]=new Path2D),this[e](r);return}if(!(r instanceof Path2D)){const i=t[0]=new Path2D;for(let a=0,l=r.length;a<l;)switch(r[a++]){case wx.moveTo:i.moveTo(r[a++],r[a++]);break;case wx.lineTo:i.lineTo(r[a++],r[a++]);break;case wx.curveTo:i.bezierCurveTo(r[a++],r[a++],r[a++],r[a++],r[a++],r[a++]);break;case wx.closePath:i.closePath();break;default:be(`Unrecognized drawing path operator: ${r[a-1]}`);break}r=i}he.axialAlignedBoundingBox(s,bt(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const i=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,ai(s),mn.STROKE),i){const a=new Path2D;a.addPath(e,s.getTransform().invertSelf().multiplySelf(i)),e=a}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(mn.STROKE,bt(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let a=!1;if(i){const c=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=r.getPattern(s,this,ai(s),mn.FILL),c){const d=new Path2D;d.addPath(e,s.getTransform().invertSelf().multiplySelf(c)),e=d}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),a&&s.restore(),t&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=Iq}eoClip(){this.pendingClip=Ck}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const s=new Path2D,r=t.getTransform().invertSelf();for(const{transform:i,x:a,y:l,fontSize:c,path:d}of e)d&&s.addPath(d,new DOMMatrix(i).preMultiplySelf(r).translate(a,l).scale(c,-c));t.clip(s),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||H_,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&be("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const i=s.loadedName||"sans-serif",a=((h=s.systemFontInfo)==null?void 0:h.css)||`"${i}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let d=t;t<wk?d=wk:t>_k&&(d=_k),this.current.fontSizeScale=t/d,this.ctx.font=`${c} ${l} ${d}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,r,i){const a=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&_n.FILL_STROKE_MASK,m=!!(d&_n.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,x=l.patternStroke&&!c.missingFile;let g;if((c.disableFontFace||m||p||x)&&!c.missingFile&&(g=c.getPathGenerator(this.commonObjs,e)),g&&(c.disableFontFace||p||x)){a.save(),a.translate(t,s),a.scale(h,-h);let b;if((f===_n.FILL||f===_n.FILL_STROKE)&&(r?(b=a.getTransform(),a.setTransform(...r),a.fill(k(this,ni,vS).call(this,g,b,r))):a.fill(g)),f===_n.STROKE||f===_n.FILL_STROKE)if(i){b||(b=a.getTransform()),a.setTransform(...i);const{a:v,b:y,c:_,d:N}=b,j=he.inverseTransform(i),A=he.transform([v,y,_,N,0,0],j);he.singularValueDecompose2dScale(A,Ds),a.lineWidth*=Math.max(Ds[0],Ds[1])/h,a.stroke(k(this,ni,vS).call(this,g,b,i))}else a.lineWidth/=h,a.stroke(g);a.restore()}else(f===_n.FILL||f===_n.FILL_STROKE)&&a.fillText(e,t,s),(f===_n.STROKE||f===_n.FILL_STROKE)&&a.strokeText(e,t,s);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:bt(a),x:t,y:s,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return Te(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const i=this.ctx,a=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,f=e.length,m=s.vertical,p=m?1:-1,x=s.defaultVMetrics,g=r*t.fontMatrix[0],b=t.textRenderingMode===_n.FILL&&!s.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),d>0?i.scale(h,-1):i.scale(h,1);let v,y;if(t.patternFill){i.save();const E=t.fillColor.getPattern(i,this,ai(i),mn.FILL);v=bt(i),i.restore(),i.fillStyle=E}if(t.patternStroke){i.save();const E=t.strokeColor.getPattern(i,this,ai(i),mn.STROKE);y=bt(i),i.restore(),i.strokeStyle=E}let _=t.lineWidth;const N=t.textMatrixScale;if(N===0||_===0){const E=t.textRenderingMode&_n.FILL_STROKE_MASK;(E===_n.STROKE||E===_n.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=N;if(a!==1&&(i.scale(a,a),_/=a),i.lineWidth=_,s.isInvalidPDFjsFont){const E=[];let P=0;for(const T of e)E.push(T.unicode),P+=T.width;i.fillText(E.join(""),0,0),t.x+=P*g*h,i.restore(),this.compose();return}let j=0,A;for(A=0;A<f;++A){const E=e[A];if(typeof E=="number"){j+=p*E*r/1e3;continue}let P=!1;const T=(E.isSpace?c:0)+l,I=E.fontChar,M=E.accent;let L,z,$=E.width;if(m){const F=E.vmetric||x,O=-(E.vmetric?F[1]:$*.5)*g,D=F[2]*g;$=F?-F[0]:$,L=O/a,z=(j+D)/a}else L=j/a,z=0;if(s.remeasure&&$>0){const F=i.measureText(I).width*1e3/r*a;if($<F&&this.isFontSubpixelAAEnabled){const O=$/F;P=!0,i.save(),i.scale(O,1),L/=O}else $!==F&&(L+=($-F)/2e3*r/a)}if(this.contentVisible&&(E.isInFont||s.missingFile)){if(b&&!M)i.fillText(I,L,z);else if(this.paintChar(I,L,z,v,y),M){const F=L+r*M.offset.x/a,O=z-r*M.offset.y/a;this.paintChar(M.fontChar,F,O,v,y)}}const W=m?$*g-T*d:$*g+T*d;j+=W,P&&i.restore()}m?t.y-=j:t.x+=j*h,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,r=s.font,i=s.fontSize,a=s.fontDirection,l=r.vertical?1:-1,c=s.charSpacing,d=s.wordSpacing,h=s.textHScale*a,f=s.fontMatrix||H_,m=e.length,p=s.textRenderingMode===_n.INVISIBLE;let x,g,b,v;if(!(p||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),s.textMatrix&&t.transform(...s.textMatrix),t.translate(s.x,s.y+s.textRise),t.scale(h,a),x=0;x<m;++x){if(g=e[x],typeof g=="number"){v=l*g*i/1e3,this.ctx.translate(v,0),s.x+=v*h;continue}const y=(g.isSpace?d:0)+c,_=r.charProcOperatorList[g.operatorListId];_?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(_),this.restore()):be(`Type3 character "${g.operatorListId}" is not available.`);const N=[g.width,0];he.applyTransform(N,f),b=N[0]*i+y,t.translate(b,0),s.x+=b*h}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,r,i,a){const l=new Path2D;l.rect(s,r,i-s,a-r),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=this.baseTransform||bt(this.ctx),r={createCanvasGraphics:i=>new EE(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new mS(e,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Aq(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,ai(t),mn.SHADING);const r=ai(t);if(r){const{width:i,height:a}=t.canvas,l=Uu.slice();he.axialAlignedBoundingBox([0,0,i,a],r,l);const[c,d,h,f]=l;this.ctx.fillRect(c,d,h-c,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){rt("Should not call beginInlineImage")}beginImageData(){rt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=bt(this.ctx),t)){he.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[s,r,i,a]=t,l=new Path2D;l.rect(s,r,i-s,a-r),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Db("TODO: Support non-isolated groups."),e.knockout&&be("Knockout groups not supported.");const s=bt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Uu.slice();he.axialAlignedBoundingBox(e.bbox,bt(t),r);const i=[0,0,t.canvas.width,t.canvas.height];r=he.intersect(r,i)||[0,0,0,0];const a=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-a,1),d=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,d),m=f.context;m.translate(-a,-l),m.transform(...s);let p=new Path2D;const[x,g,b,v]=e.bbox;if(p.rect(x,g,b-x,v-g),e.matrix){const y=new Path2D;y.addPath(p,new DOMMatrix(e.matrix)),p=y}m.clip(p),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),pm(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=bt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=Uu.slice();he.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,s,r,i){if(k(this,ni,pS).call(this),Ex(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l,he.singularValueDecompose2dScale(bt(this.ctx),Ds);const{viewportScale:c}=this,d=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Ds[0],0,0,-Ds[1],0,l*Ds[1]),Ex(this.ctx)}else{Ex(this.ctx),this.endPath();const c=new Path2D;c.rect(t[0],t[1],a,l),this.ctx.clip(c)}}this.current=new Nk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,ni,gS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,r=this._createMaskCanvas(e),i=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(i,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,r=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=bt(l);l.transform(t,s,r,i,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let h=0,f=a.length;h<f;h+=2){const m=he.transform(c,[t,s,r,i,a[h],a[h+1]]);l.drawImage(d.canvas,m[4],m[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:a,width:l,height:c,transform:d}=i,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=h.context;f.save();const m=this.getObject(a,i);Ek(f,m),f.globalCompositeOperation="source-in",f.fillStyle=r?s.getPattern(f,this,ai(t),mn.FILL):s,f.fillRect(0,0,l,c),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),jx(t,h.canvas,0,0,l,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){be("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){be("Dependent image isn't ready yet");return}const a=i.width,l=i.height,c=[];for(let d=0,h=r.length;d<h;d+=2)c.push({transform:[t,0,0,s,r[d],r[d+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,r=this.ctx;this.save();const{filter:i}=r;i!=="none"&&i!==""&&(r.filter="none"),r.scale(1/t,-1/s);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,s).context;jk(d,e),a=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(a,ai(r));r.imageSmoothingEnabled=Ak(bt(r),e.interpolate),jx(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;jk(c,e),r=this.applyTransferMapsToCanvas(c)}for(const i of t)s.save(),s.transform(...i.transform),s.scale(1,-1),jx(s,r,i.x,i.y,i.w,i.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const r=this.ctx;this.pendingClip&&(s||(this.pendingClip===Ck?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=bt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let a,l;if(s===0&&r===0){const c=Math.abs(t),d=Math.abs(i);if(c===d)if(e===0)a=l=1/c;else{const h=c*e;a=l=h<1?1/h:1}else if(e===0)a=1/c,l=1/d;else{const h=c*e,f=d*e;a=h<1?1/h:1,l=f<1?1/f:1}}else{const c=Math.abs(t*i-s*r),d=Math.hypot(t,s),h=Math.hypot(r,i);if(e===0)a=h/c,l=d/c;else{const f=e*c;a=h>f?h/f:1,l=d>f?d/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,a]=this.getScaleForStroking();if(i===a){s.lineWidth=(r||1)*i,s.stroke(e);return}const l=s.getLineDash();t&&s.save(),s.scale(i,a),Jw.a=1/i,Jw.d=1/a;const c=new Path2D;if(c.addPath(e,Jw),l.length>0){const d=Math.max(i,a);s.setLineDash(l.map(h=>h/d)),s.lineDashOffset/=d}s.lineWidth=r||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ni=new WeakSet,pS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gS=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},vS=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let sh=EE;for(const n in cy)sh.prototype[n]!==void 0&&(sh.prototype[cy[n]]=sh.prototype[n]);var hg,fg;class Oi{static get workerPort(){return u(this,hg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,hg,e)}static get workerSrc(){return u(this,fg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,fg,e)}}hg=new WeakMap,fg=new WeakMap,C(Oi,hg,null),C(Oi,fg,"");var Ih,mg;class Dq{constructor({parsedData:e,rawData:t}){C(this,Ih);C(this,mg);S(this,Ih,e),S(this,mg,t)}getRaw(){return u(this,mg)}get(e){return u(this,Ih).get(e)??null}[Symbol.iterator](){return u(this,Ih).entries()}}Ih=new WeakMap,mg=new WeakMap;const Au=Symbol("INTERNAL");var pg,gg,vg,Dh;class Oq{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){C(this,pg,!1);C(this,gg,!1);C(this,vg,!1);C(this,Dh,!0);S(this,pg,!!(e&Ms.DISPLAY)),S(this,gg,!!(e&Ms.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(u(this,vg))return u(this,Dh);if(!u(this,Dh))return!1;const{print:e,view:t}=this.usage;return u(this,pg)?(t==null?void 0:t.viewState)!=="OFF":u(this,gg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Au&&rt("Internal method `_setVisible` called."),S(this,vg,s),S(this,Dh,t)}}pg=new WeakMap,gg=new WeakMap,vg=new WeakMap,Dh=new WeakMap;var Qo,tt,Oh,Lh,xg,xS;class Lq{constructor(e,t=Ms.DISPLAY){C(this,xg);C(this,Qo,null);C(this,tt,new Map);C(this,Oh,null);C(this,Lh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,Lh,e.order);for(const s of e.groups)u(this,tt).set(s.id,new Oq(t,s));if(e.baseState==="OFF")for(const s of u(this,tt).values())s._setVisible(Au,!1);for(const s of e.on)u(this,tt).get(s)._setVisible(Au,!0);for(const s of e.off)u(this,tt).get(s)._setVisible(Au,!1);S(this,Oh,this.getHash())}}isVisible(e){if(u(this,tt).size===0)return!0;if(!e)return Db("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,tt).has(e.id)?u(this,tt).get(e.id).visible:(be(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,xg,xS).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,tt).has(t))return be(`Optional content group not found: ${t}`),!0;if(u(this,tt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,tt).has(t))return be(`Optional content group not found: ${t}`),!0;if(!u(this,tt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,tt).has(t))return be(`Optional content group not found: ${t}`),!0;if(!u(this,tt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,tt).has(t))return be(`Optional content group not found: ${t}`),!0;if(u(this,tt).get(t).visible)return!1}return!0}return be(`Unknown optional content policy ${e.policy}.`),!0}return be(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=u(this,tt).get(e);if(!r){be(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const l of a)l!==e&&((i=u(this,tt).get(l))==null||i._setVisible(Au,!1,!0));r._setVisible(Au,!!t,!0),S(this,Qo,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=u(this,tt).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}S(this,Qo,null)}get hasInitialVisibility(){return u(this,Oh)===null||this.getHash()===u(this,Oh)}getOrder(){return u(this,tt).size?u(this,Lh)?u(this,Lh).slice():[...u(this,tt).keys()]:null}getGroup(e){return u(this,tt).get(e)||null}getHash(){if(u(this,Qo)!==null)return u(this,Qo);const e=new TO;for(const[t,s]of u(this,tt))e.update(`${t}:${s.visible}`);return S(this,Qo,e.hexdigest())}[Symbol.iterator](){return u(this,tt).entries()}}Qo=new WeakMap,tt=new WeakMap,Oh=new WeakMap,Lh=new WeakMap,xg=new WeakSet,xS=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let a;if(Array.isArray(i))a=k(this,xg,xS).call(this,i);else if(u(this,tt).has(i))a=u(this,tt).get(i).visible;else return be(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class Fq{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ft(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Ft(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ft(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new $q(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new zq(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class $q{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=Zj(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class zq{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Bq(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=d(h),i(h)}if(t=a(n),t){const h=d(t);return i(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=l(t);return h=d(h),i(h)}function s(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(h,{fatal:!0}),p=Mv(f);f=m.decode(p),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function a(h){const f=[];let m;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=p.exec(h))!==null;){let[,g,b,v]=m;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[b,v]}const x=[];for(let g=0;g<f.length&&g in f;++g){let[b,v]=f[g];v=l(v),b&&(v=unescape(v),g===0&&(v=c(v))),x.push(v)}return x.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let m=0;m<f.length;++m){const p=f[m].indexOf('"');p!==-1&&(f[m]=f[m].slice(0,p),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){const f=h.indexOf("'");if(f===-1)return h;const m=h.slice(0,f),x=h.slice(f+1).replace(/^[^']*'/,"");return r(m,x)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,p,x){if(p==="q"||p==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),r(m,x);try{x=atob(x)}catch{}return r(m,x)})}return""}function HO(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function Fb(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function WO({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function VO(n){const e=n.get("Content-Disposition");if(e){let t=Bq(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Zj(t))return t}return null}function Lv(n,e){return new dy(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function qO(n){return n===200||n===206}function GO(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function KO(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(be(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Uq{constructor(e){G(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=HO(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Hq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new Wq(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Hq{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,GO(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Fb(i.url),!qO(i.status))throw Lv(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:l,suggestedLength:c}=WO({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=VO(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Bl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:KO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class Wq{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const a=r.url;fetch(a,GO(i,this._withCredentials,this._abortController)).then(l=>{const c=Fb(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!qO(l.status))throw Lv(l.status,a);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:KO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Zw=200,e1=206;function Vq(n){const e=n.response;return typeof e!="string"?e:Mv(e).buffer}class qq{constructor({url:e,httpHeaders:t,withCredentials:s}){G(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=HO(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=e1):r.expectedStatus=Zw,t.responseType="arraybuffer",Ft(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||Zw;if(!(i===Zw&&s.expectedStatus===e1)&&i!==s.expectedStatus){s.onError(r.status);return}const l=Vq(r);if(i===e1){const c=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?s.onDone({begin:parseInt(d[1],10),chunk:l}):(be('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class Gq{constructor(e){this._source=e,this._manager=new qq(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ft(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Kq(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new Yq(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Kq{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Fb(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=WO({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=VO(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Lv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Yq{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Fb((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Lv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Xq=/^[a-z][a-z0-9\-+.]+:/i;function Qq(n){if(Xq.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class Jq{constructor(e){this.source=e,this.url=Qq(e.url),Ft(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ft(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Zq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new eG(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class Zq{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Lv(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Bl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class eG{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const gm=Symbol("INITIAL_DATA");var ws,yg,yS;class YO{constructor(){C(this,yg);C(this,ws,Object.create(null))}get(e,t=null){if(t){const r=k(this,yg,yS).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=u(this,ws)[e];if(!s||s.data===gm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=u(this,ws)[e];return!!t&&t.data!==gm}delete(e){const t=u(this,ws)[e];return!t||t.data===gm?!1:(delete u(this,ws)[e],!0)}resolve(e,t=null){const s=k(this,yg,yS).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in u(this,ws)){const{data:s}=u(this,ws)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}S(this,ws,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,ws)){const{data:t}=u(this,ws)[e];t!==gm&&(yield[e,t])}}}ws=new WeakMap,yg=new WeakSet,yS=function(e){var t;return(t=u(this,ws))[e]||(t[e]={...Promise.withResolvers(),data:gm})};const tG=1e5,kk=30;var Jk,Jo,ts,bg,wg,Yc,Ea,_g,Sg,Xc,Fh,$h,Zo,zh,Ng,Bh,Qc,jg,Eg,Uh,Jc,Ag,el,Hh,ro,XO,QO,bS,Ws,r0,wS,JO,ZO;const Ut=class Ut{constructor({textContentSource:e,container:t,viewport:s}){C(this,ro);C(this,Jo,Promise.withResolvers());C(this,ts,null);C(this,bg,!1);C(this,wg,!!((Jk=globalThis.FontInspector)!=null&&Jk.enabled));C(this,Yc,null);C(this,Ea,null);C(this,_g,0);C(this,Sg,0);C(this,Xc,null);C(this,Fh,null);C(this,$h,0);C(this,Zo,0);C(this,zh,Object.create(null));C(this,Ng,[]);C(this,Bh,null);C(this,Qc,[]);C(this,jg,new WeakMap);C(this,Eg,null);var c;if(e instanceof ReadableStream)S(this,Bh,e);else if(typeof e=="object")S(this,Bh,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,ts,S(this,Fh,t)),S(this,Zo,s.scale*Ki.pixelRatio),S(this,$h,s.rotation),S(this,Ea,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:a,pageY:l}=s.rawDims;S(this,Eg,[1,0,0,-1,-a,l+i]),S(this,Sg,r),S(this,_g,i),k(c=Ut,Ws,JO).call(c),Gd(t,s),u(this,Jo).promise.finally(()=>{u(Ut,Hh).delete(this),S(this,Ea,null),S(this,zh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=xn.platform;return Te(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Xc).read().then(({value:t,done:s})=>{if(s){u(this,Jo).resolve();return}u(this,Yc)??S(this,Yc,t.lang),Object.assign(u(this,zh),t.styles),k(this,ro,XO).call(this,t.items),e()},u(this,Jo).reject)};return S(this,Xc,u(this,Bh).getReader()),u(Ut,Hh).add(this),e(),u(this,Jo).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*Ki.pixelRatio,r=e.rotation;if(r!==u(this,$h)&&(t==null||t(),S(this,$h,r),Gd(u(this,Fh),{rotation:r})),s!==u(this,Zo)){t==null||t(),S(this,Zo,s);const a={div:null,properties:null,ctx:k(i=Ut,Ws,r0).call(i,u(this,Yc))};for(const l of u(this,Qc))a.properties=u(this,jg).get(l),a.div=l,k(this,ro,bS).call(this,a)}}cancel(){var t;const e=new Bl("TextLayer task cancelled.");(t=u(this,Xc))==null||t.cancel(e).catch(()=>{}),S(this,Xc,null),u(this,Jo).reject(e)}get textDivs(){return u(this,Qc)}get textContentItemsStr(){return u(this,Ng)}static cleanup(){if(!(u(this,Hh).size>0)){u(this,Uh).clear();for(const{canvas:e}of u(this,Jc).values())e.remove();u(this,Jc).clear()}}};Jo=new WeakMap,ts=new WeakMap,bg=new WeakMap,wg=new WeakMap,Yc=new WeakMap,Ea=new WeakMap,_g=new WeakMap,Sg=new WeakMap,Xc=new WeakMap,Fh=new WeakMap,$h=new WeakMap,Zo=new WeakMap,zh=new WeakMap,Ng=new WeakMap,Bh=new WeakMap,Qc=new WeakMap,jg=new WeakMap,Eg=new WeakMap,Uh=new WeakMap,Jc=new WeakMap,Ag=new WeakMap,el=new WeakMap,Hh=new WeakMap,ro=new WeakSet,XO=function(e){var r,i;if(u(this,bg))return;(i=u(this,Ea)).ctx??(i.ctx=k(r=Ut,Ws,r0).call(r,u(this,Yc)));const t=u(this,Qc),s=u(this,Ng);for(const a of e){if(t.length>tG){be("Ignoring additional textDivs for performance reasons."),S(this,bg,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=u(this,ts);S(this,ts,document.createElement("span")),u(this,ts).classList.add("markedContent"),a.id&&u(this,ts).setAttribute("id",`${a.id}`),l.append(u(this,ts))}else a.type==="endMarkedContent"&&S(this,ts,u(this,ts).parentNode);continue}s.push(a.str),k(this,ro,QO).call(this,a)}},QO=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Qc).push(t);const r=he.transform(u(this,Eg),e.transform);let i=Math.atan2(r[1],r[0]);const a=u(this,zh)[e.fontName];a.vertical&&(i+=Math.PI/2);let l=u(this,wg)&&a.fontSubstitution||a.fontFamily;l=Ut.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),d=c*k(g=Ut,Ws,ZO).call(g,l,a,u(this,Yc));let h,f;i===0?(h=r[4],f=r[5]-d):(h=r[4]+d*Math.sin(i),f=r[5]-d*Math.cos(i));const m="calc(var(--total-scale-factor) *",p=t.style;u(this,ts)===u(this,Fh)?(p.left=`${(100*h/u(this,Sg)).toFixed(2)}%`,p.top=`${(100*f/u(this,_g)).toFixed(2)}%`):(p.left=`${m}${h.toFixed(2)}px)`,p.top=`${m}${f.toFixed(2)}px)`),p.fontSize=`${m}${(u(Ut,el)*c).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,wg)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);b!==v&&Math.max(b,v)/Math.min(b,v)>1.5&&(x=!0)}if(x&&(s.canvasWidth=a.vertical?e.height:e.width),u(this,jg).set(t,s),u(this,Ea).div=t,u(this,Ea).properties=s,k(this,ro,bS).call(this,u(this,Ea)),s.hasText&&u(this,ts).append(t),s.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),u(this,ts).append(b)}},bS=function(e){var l;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let a="";if(u(Ut,el)>1&&(a=`scale(${1/u(Ut,el)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=i,{canvasWidth:d,fontSize:h}=s;k(l=Ut,Ws,wS).call(l,r,h*u(this,Zo),c);const{width:f}=r.measureText(t.textContent);f>0&&(a=`scaleX(${d*u(this,Zo)/f}) ${a}`)}s.angle!==0&&(a=`rotate(${s.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Ws=new WeakSet,r0=function(e=null){let t=u(this,Jc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Jc).set(e,t),u(this,Ag).set(t,{size:0,family:""})}return t},wS=function(e,t,s){const r=u(this,Ag).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},JO=function(){if(u(this,el)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,el,e.getBoundingClientRect().height),e.remove()},ZO=function(e,t,s){const r=u(this,Uh).get(e);if(r)return r;const i=k(this,Ws,r0).call(this,s);i.canvas.width=i.canvas.height=kk,k(this,Ws,wS).call(this,i,kk,e);const a=i.measureText(""),l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let d=.8;return l?d=l/(l+c):(xn.platform.isFirefox&&be("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),u(this,Uh).set(e,d),d},C(Ut,Ws),C(Ut,Uh,new Map),C(Ut,Jc,new Map),C(Ut,Ag,new WeakMap),C(Ut,el,null),C(Ut,Hh,new Set);let Rp=Ut;class Mp{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(Mp.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const d of i.children)r(d)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const nG=100;function eL(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new _S,{docId:t}=e,s=n.url?uq(n.url):null,r=n.data?hq(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,l=n.password??null,c=n.range instanceof tL?n.range:null,d=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Ip?n.worker:null;const f=n.verbosity,m=typeof n.docBaseUrl=="string"&&!Ob(n.docBaseUrl)?n.docBaseUrl:null,p=Sx(n.cMapUrl),x=n.cMapPacked!==!1,g=n.CMapReaderFactory||(Fn?bq:vk),b=Sx(n.iccUrl),v=Sx(n.standardFontDataUrl),y=n.StandardFontDataFactory||(Fn?wq:xk),_=Sx(n.wasmUrl),N=n.WasmFactory||(Fn?_q:yk),j=n.stopAtErrors!==!0,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,E=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Fn,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Fn&&(xn.platform.isFirefox||!globalThis.chrome),I=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,M=typeof n.disableFontFace=="boolean"?n.disableFontFace:Fn,L=n.fontExtraProperties===!0,z=n.enableXfa===!0,$=n.ownerDocument||globalThis.document,W=n.disableRange===!0,F=n.disableStream===!0,O=n.disableAutoFetch===!0,D=n.pdfBug===!0,R=n.CanvasFactory||(Fn?yq:gq),U=n.FilterFactory||(Fn?xq:vq),X=n.enableHWA===!0,B=n.useWasm!==!1,V=c?c.length:n.length??NaN,Q=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Fn&&!M,J=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===vk&&y===xk&&N===yk&&p&&v&&_&&Em(p,document.baseURI)&&Em(v,document.baseURI)&&Em(_,document.baseURI)),ce=null;H7(f);const H={canvasFactory:new R({ownerDocument:$,enableHWA:X}),filterFactory:new U({docId:t,ownerDocument:$}),cMapReaderFactory:J?null:new g({baseUrl:p,isCompressed:x}),standardFontDataFactory:J?null:new y({baseUrl:v}),wasmFactory:J?null:new N({baseUrl:_})};h||(h=Ip.create({verbosity:f,port:Oi.workerPort}),e._worker=h);const pe={docId:t,apiVersion:"5.4.54",data:r,password:l,disableAutoFetch:O,rangeChunkSize:d,length:V,docBaseUrl:m,enableXfa:z,evaluatorOptions:{maxImageSize:A,disableFontFace:M,ignoreErrors:j,isEvalSupported:E,isOffscreenCanvasSupported:P,isImageDecoderSupported:T,canvasMaxAreaInBytes:I,fontExtraProperties:L,useSystemFonts:Q,useWasm:B,useWorkerFetch:J,cMapUrl:p,iccUrl:b,standardFontDataUrl:v,wasmUrl:_}},je={ownerDocument:$,pdfBug:D,styleElement:ce,loadingParams:{disableAutoFetch:O,enableXfa:z}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ce=h.messageHandler.sendWithPromise("GetDocRequest",pe,r?[r.buffer]:null);let ke;if(c)ke=new Fq(c,{disableRange:W,disableStream:F});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const De=Em(s)?Uq:Fn?Jq:Gq;ke=new De({url:s,length:V,httpHeaders:i,withCredentials:a,rangeChunkSize:d,disableRange:W,disableStream:F})}return Ce.then(De=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const zt=new Tm(t,De,h.port),Xn=new iG(zt,e,ke,je,H,X);e._transport=Xn,zt.send("Ready",null)})}).catch(e._capability.reject),e}var My;const Iy=class Iy{constructor(){G(this,"_capability",Promise.withResolvers());G(this,"_transport",null);G(this,"_worker",null);G(this,"docId",`d${Xt(Iy,My)._++}`);G(this,"destroyed",!1);G(this,"onPassword",null);G(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};My=new WeakMap,C(Iy,My,0);let _S=Iy;var Zc,Cg,kg,Pg,Tg;class tL{constructor(e,t,s=!1,r=null){C(this,Zc,Promise.withResolvers());C(this,Cg,[]);C(this,kg,[]);C(this,Pg,[]);C(this,Tg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){u(this,Tg).push(e)}addProgressListener(e){u(this,Pg).push(e)}addProgressiveReadListener(e){u(this,kg).push(e)}addProgressiveDoneListener(e){u(this,Cg).push(e)}onDataRange(e,t){for(const s of u(this,Tg))s(e,t)}onDataProgress(e,t){u(this,Zc).promise.then(()=>{for(const s of u(this,Pg))s(e,t)})}onDataProgressiveRead(e){u(this,Zc).promise.then(()=>{for(const t of u(this,kg))t(e)})}onDataProgressiveDone(){u(this,Zc).promise.then(()=>{for(const e of u(this,Cg))e()})}transportReady(){u(this,Zc).resolve()}requestDataRange(e,t){rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Zc=new WeakMap,Cg=new WeakMap,kg=new WeakMap,Pg=new WeakMap,Tg=new WeakMap;class sG{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Te(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Aa,ed,Om;class rG{constructor(e,t,s,r=!1){C(this,ed);C(this,Aa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new mk:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new YO,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new Dv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Te(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=Co.ENABLE,transform:a=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:m=!1}){var j,A;(j=this._stats)==null||j.time("Overall");const p=this._transport.getRenderingIntent(r,i,f,m),{renderingIntent:x,cacheKey:g}=p;S(this,Aa,!1),c||(c=this._transport.getOptionalContentConfig(x));let b=this._intentStates.get(g);b||(b=Object.create(null),this._intentStates.set(g,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const v=!!(x&Ms.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(p));const y=E=>{var P;b.renderTasks.delete(_),v&&S(this,Aa,!0),k(this,ed,Om).call(this),E?(_.capability.reject(E),this._abortOperatorList({intentState:b,reason:E instanceof Error?E:new Error(E)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new SS({callback:y,params:{canvas:t,canvasContext:e,viewport:s,transform:a,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(b.renderTasks||(b.renderTasks=new Set)).add(_);const N=_.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([E,P])=>{var T;if(this.destroyed){y();return}if((T=this._stats)==null||T.time("Rendering"),!(P.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:E,optionalContentConfig:P}),_.operatorListChanged()}).catch(y),N}getOperatorList({intent:e="display",annotationMode:t=Co.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var d;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const a=this._transport.getRenderingIntent(e,t,s,r,!0);let l=this._intentStates.get(a.cacheKey);l||(l=Object.create(null),this._intentStates.set(a.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(a)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Mp.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){a.read().then(function({value:c,done:d}){if(d){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},r)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),S(this,Aa,!1),Promise.all(e)}cleanup(e=!1){S(this,Aa,!0);const t=k(this,ed,Om).call(this);return e&&t&&this._stats&&(this._stats=new mk),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&k(this,ed,Om).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:a}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},a).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:f,done:m})=>{if(m){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),h())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const m of d.renderTasks)m.operatorListChanged();k(this,ed,Om).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof Jj){let r=nG;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Bl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Aa=new WeakMap,ed=new WeakSet,Om=function(){if(!u(this,Aa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Aa,!1),!0};var tl,Or,Ca,td,Dy,nd,sd,Hn,i0,nL,sL,Lm,Wh,a0;const mt=class mt{constructor({name:e=null,port:t=null,verbosity:s=W7()}={}){C(this,Hn);C(this,tl,Promise.withResolvers());C(this,Or,null);C(this,Ca,null);C(this,td,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(u(mt,sd).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(mt,sd).set(t,this),k(this,Hn,nL).call(this,t)}else k(this,Hn,sL).call(this)}get promise(){return u(this,tl).promise}get port(){return u(this,Ca)}get messageHandler(){return u(this,Or)}destroy(){var e,t;this.destroyed=!0,(e=u(this,td))==null||e.terminate(),S(this,td,null),u(mt,sd).delete(u(this,Ca)),S(this,Ca,null),(t=u(this,Or))==null||t.destroy(),S(this,Or,null)}static create(e){const t=u(this,sd).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new mt(e)}static get workerSrc(){if(Oi.workerSrc)return Oi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Te(this,"_setupFakeWorkerGlobal",(async()=>u(this,Wh,a0)?u(this,Wh,a0):(await import(this.workerSrc)).WorkerMessageHandler)())}};tl=new WeakMap,Or=new WeakMap,Ca=new WeakMap,td=new WeakMap,Dy=new WeakMap,nd=new WeakMap,sd=new WeakMap,Hn=new WeakSet,i0=function(){u(this,tl).resolve(),u(this,Or).send("configure",{verbosity:this.verbosity})},nL=function(e){S(this,Ca,e),S(this,Or,new Tm("main","worker",e)),u(this,Or).on("ready",()=>{}),k(this,Hn,i0).call(this)},sL=function(){if(u(mt,nd)||u(mt,Wh,a0)){k(this,Hn,Lm).call(this);return}let{workerSrc:e}=mt;try{mt._isSameOrigin(window.location,e)||(e=mt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Tm("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?u(this,tl).reject(new Error("Worker was destroyed")):k(this,Hn,Lm).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,td)||r()},{signal:i.signal}),s.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}S(this,Or,s),S(this,Ca,t),S(this,td,t),k(this,Hn,i0).call(this)}),s.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{a()}catch{k(this,Hn,Lm).call(this)}});const a=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};a();return}catch{Db("The worker has been disabled.")}k(this,Hn,Lm).call(this)},Lm=function(){u(mt,nd)||(be("Setting up fake worker."),S(mt,nd,!0)),mt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,tl).reject(new Error("Worker was destroyed"));return}const t=new pq;S(this,Ca,t);const s=`fake${Xt(mt,Dy)._++}`,r=new Tm(s+"_worker",s,t);e.setup(r,t),S(this,Or,new Tm(s,s+"_worker",t)),k(this,Hn,i0).call(this)}).catch(e=>{u(this,tl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Wh=new WeakSet,a0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(mt,Wh),C(mt,Dy,0),C(mt,nd,!1),C(mt,sd,new WeakMap),Fn&&(S(mt,nd,!0),Oi.workerSrc||(Oi.workerSrc="./pdf.worker.mjs")),mt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},mt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},mt.fromPort=e=>{if(nq("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return mt.create(e)};let Ip=mt;var ka,Ni,Vh,qh,Pa,rd,Fm;class iG{constructor(e,t,s,r,i,a){C(this,rd);C(this,ka,new Map);C(this,Ni,new Map);C(this,Vh,new Map);C(this,qh,new Map);C(this,Pa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new YO,this.fontLoader=new cq({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Te(this,"annotationStorage",new eE)}getRenderingIntent(e,t=Co.ENABLE,s=null,r=!1,i=!1){let a=Ms.DISPLAY,l=cS;switch(e){case"any":a=Ms.ANY;break;case"display":break;case"print":a=Ms.PRINT;break;default:be(`getRenderingIntent - invalid intent: ${e}`)}const c=a&Ms.PRINT&&s instanceof MO?s:this.annotationStorage;switch(t){case Co.DISABLE:a+=Ms.ANNOTATIONS_DISABLE;break;case Co.ENABLE:break;case Co.ENABLE_FORMS:a+=Ms.ANNOTATIONS_FORMS;break;case Co.ENABLE_STORAGE:a+=Ms.ANNOTATIONS_STORAGE,l=c.serializable;break;default:be(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Ms.IS_EDITING),i&&(a+=Ms.OPLIST);const{ids:d,hash:h}=c.modifiedIds,f=[a,l.hash,h];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=u(this,Pa))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,Ni).values())e.push(r._destroy());u(this,Ni).clear(),u(this,Vh).clear(),u(this,qh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,ka).clear(),this.filterFactory.destroy(),Rp.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Bl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Ft(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){r.close();return}Ft(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:a}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(s,r)=>{Ft(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){r.close();return}Ft(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{i.cancel(a),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new sG(s,this))}),e.on("DocException",s=>{t._capability.reject(Qn(s))}),e.on("PasswordRequest",s=>{S(this,Pa,Promise.withResolvers());try{if(!t.onPassword)throw Qn(s);const r=i=>{i instanceof Error?u(this,Pa).reject(i):u(this,Pa).resolve({password:i})};t.onPassword(r,s.code)}catch(r){u(this,Pa).reject(r)}return u(this,Pa).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;u(this,Ni).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const h=i.error;be(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}const l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new dq(i,l);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:d}=i;Ft(d,"The imageRef must be defined.");for(const h of u(this,Ni).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,a])=>{var c;if(this.destroyed)return;const l=u(this,Ni).get(r);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&be("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=u(this,Vh).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,qh).set(i.refStr,e);const a=new rG(t,i,this,this._params.pdfBug);return u(this,Ni).set(t,a),a});return u(this,Vh).set(t,r),r}getPageIndex(e){return dS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,rd,Fm).call(this,"GetFieldObjects")}hasJSActions(){return k(this,rd,Fm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,rd,Fm).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,rd,Fm).call(this,"GetOptionalContentConfig").then(t=>new Lq(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,ka).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,a;return{info:r[0],metadata:r[1]?new Dq(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return u(this,ka).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Ni).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,ka).clear(),this.filterFactory.destroy(!0),Rp.cleanup()}}cachedPageNumber(e){if(!dS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,qh).get(t)??null}}ka=new WeakMap,Ni=new WeakMap,Vh=new WeakMap,qh=new WeakMap,Pa=new WeakMap,rd=new WeakSet,Fm=function(e,t=null){const s=u(this,ka).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return u(this,ka).set(e,r),r};var nl;class aG{constructor(e){C(this,nl,null);G(this,"onContinue",null);G(this,"onError",null);S(this,nl,e)}get promise(){return u(this,nl).capability.promise}cancel(e=0){u(this,nl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,nl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,nl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}nl=new WeakMap;var sl,id;const gc=class gc{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:m=null,enableHWA:p=!1}){C(this,sl,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new aG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(gc,id).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(gc,id).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new sh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),u(this,sl)&&(window.cancelAnimationFrame(u(this,sl)),S(this,sl,null)),u(gc,id).delete(this._canvas),e||(e=new Jj(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,sl,window.requestAnimationFrame(()=>{S(this,sl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(gc,id).delete(this._canvas),this.callback())))}};sl=new WeakMap,id=new WeakMap,C(gc,id,new WeakSet);let SS=gc;const oG="5.4.54",lG="295fb3ec4";var _s,ad,Gh,Vt,Rg,Kh,Ta,Mg,rl,Lr,Ig,nt,NS,jS,ES,dc,rL,_o;const Jn=class Jn{constructor({editor:e=null,uiManager:t=null}){C(this,nt);C(this,_s,null);C(this,ad,null);C(this,Gh);C(this,Vt,null);C(this,Rg,!1);C(this,Kh,!1);C(this,Ta,null);C(this,Mg);C(this,rl,null);C(this,Lr,null);var s,r;e?(S(this,Kh,!1),S(this,Ta,e)):S(this,Kh,!0),S(this,Lr,(e==null?void 0:e._uiManager)||t),S(this,Mg,u(this,Lr)._eventBus),S(this,Gh,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=u(this,Lr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),u(Jn,Ig)||S(Jn,Ig,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Te(this,"_keyboardManager",new Ov([[["Escape","mac+Escape"],Jn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Jn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Jn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Jn.prototype._moveToPrevious],[["Home","mac+Home"],Jn.prototype._moveToBeginning],[["End","mac+End"],Jn.prototype._moveToEnd]]))}renderButton(){const e=S(this,_s,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,Ta)&&(e.ariaControls=`${u(this,Ta).id}_colorpicker_dropdown`);const t=u(this,Lr)._signal;e.addEventListener("click",k(this,nt,dc).bind(this),{signal:t}),e.addEventListener("keydown",k(this,nt,ES).bind(this),{signal:t});const s=S(this,ad,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=u(this,Gh),e.append(s),e}renderMainDropdown(){const e=S(this,Vt,k(this,nt,NS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,_s)){k(this,nt,dc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,nt,jS).call(this,t,e)}_moveToNext(e){var t,s;if(!u(this,nt,_o)){k(this,nt,dc).call(this,e);return}if(e.target===u(this,_s)){(t=u(this,Vt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=u(this,Vt))==null?void 0:t.firstChild)||e.target===u(this,_s)){u(this,nt,_o)&&this._hideDropdownFromKeyboard();return}u(this,nt,_o)||k(this,nt,dc).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!u(this,nt,_o)){k(this,nt,dc).call(this,e);return}(t=u(this,Vt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,nt,_o)){k(this,nt,dc).call(this,e);return}(t=u(this,Vt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Vt))==null||e.classList.add("hidden"),u(this,_s).ariaExpanded="false",(t=u(this,rl))==null||t.abort(),S(this,rl,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Kh)){if(!u(this,nt,_o)){(e=u(this,Ta))==null||e.unselect();return}this.hideDropdown(),u(this,_s).focus({preventScroll:!0,focusVisible:u(this,Rg)})}}updateColor(e){if(u(this,ad)&&(u(this,ad).style.backgroundColor=e),!u(this,Vt))return;const t=u(this,Lr).highlightColors.values();for(const s of u(this,Vt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,_s))==null||e.remove(),S(this,_s,null),S(this,ad,null),(t=u(this,Vt))==null||t.remove(),S(this,Vt,null)}};_s=new WeakMap,ad=new WeakMap,Gh=new WeakMap,Vt=new WeakMap,Rg=new WeakMap,Kh=new WeakMap,Ta=new WeakMap,Mg=new WeakMap,rl=new WeakMap,Lr=new WeakMap,Ig=new WeakMap,nt=new WeakSet,NS=function(){const e=document.createElement("div"),t=u(this,Lr)._signal;e.addEventListener("contextmenu",vr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Ta)&&(e.id=`${u(this,Ta).id}_colorpicker_dropdown`);for(const[s,r]of u(this,Lr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",u(Jn,Ig)[s]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=r,i.ariaSelected=r===u(this,Gh),i.addEventListener("click",k(this,nt,jS).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",k(this,nt,ES).bind(this),{signal:t}),e},jS=function(e,t){t.stopPropagation(),u(this,Mg).dispatch("switchannotationeditorparams",{source:this,type:Fe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},ES=function(e){Jn._keyboardManager.exec(this,e)},dc=function(e){if(u(this,nt,_o)){this.hideDropdown();return}if(S(this,Rg,e.detail===0),u(this,rl)||(S(this,rl,new AbortController),window.addEventListener("pointerdown",k(this,nt,rL).bind(this),{signal:u(this,Lr).combinedSignal(u(this,rl))})),u(this,_s).ariaExpanded="true",u(this,Vt)){u(this,Vt).classList.remove("hidden");return}const t=S(this,Vt,k(this,nt,NS).call(this));u(this,_s).append(t)},rL=function(e){var t;(t=u(this,Vt))!=null&&t.contains(e.target)||this.hideDropdown()},_o=function(){return u(this,Vt)&&!u(this,Vt).classList.contains("hidden")},C(Jn,Ig,null);let my=Jn;var ji,Dg,Yh,Og;const vc=class vc{constructor(e){C(this,ji,null);C(this,Dg,null);C(this,Yh,null);S(this,Dg,e),S(this,Yh,e._uiManager),u(vc,Og)||S(vc,Og,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,ji))return u(this,ji);const{editorType:e,colorType:t,colorValue:s}=u(this,Dg),r=S(this,ji,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",u(vc,Og)[e]),r.addEventListener("input",()=>{u(this,Yh).updateParams(t,r.value)},{signal:u(this,Yh)._signal}),r}update(e){u(this,ji)&&(u(this,ji).value=e)}destroy(){var e;(e=u(this,ji))==null||e.remove(),S(this,ji,null)}hideDropdown(){}};ji=new WeakMap,Dg=new WeakMap,Yh=new WeakMap,Og=new WeakMap,C(vc,Og,null);let py=vc;function Pk(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function vm(n){return Math.max(0,Math.min(255,255*n))}class Tk{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=vm(e),[e,e,e]}static G_HTML([e]){const t=Pk(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(vm)}static RGB_HTML(e){return`#${e.map(Pk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[vm(1-Math.min(1,e+r)),vm(1-Math.min(1,s+r)),vm(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,a=1-s,l=Math.min(r,i,a);return["CMYK",r,i,a,l]}}class cG{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){rt("Abstract method `_createSVG` called.")}}class gy extends cG{_createSVG(e){return document.createElementNS(sa,e)}}class iL{static setupStorage(e,t,s,r,i){const a=r.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of s.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[c,d]of Object.entries(a))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&i.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var f,m;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:i,linkService:s});const l=i!=="richText",c=e.div;if(c.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);a.append(p),l&&Mp.shouldBuildText(r.name)&&d.push(p)}return{textDivs:d}}const h=[[r,-1,a]];for(;h.length>0;){const[p,x,g]=h.at(-1);if(x+1===p.children.length){h.pop();continue}const b=p.children[++h.at(-1)[1]];if(b===null)continue;const{name:v}=b;if(v==="#text"){const _=document.createTextNode(b.value);d.push(_),g.append(_);continue}const y=(f=b==null?void 0:b.attributes)!=null&&f.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(g.append(y),b.attributes&&this.setAttributes({html:y,element:b,storage:t,intent:i,linkService:s}),((m=b.children)==null?void 0:m.length)>0)h.push([b,-1,y]);else if(b.value){const _=document.createTextNode(b.value);l&&Mp.shouldBuildText(v)&&d.push(_),y.append(_)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const dG=9,Yd=new WeakSet,uG=new Date().getTimezoneOffset()*60*1e3;class Rk{static create(e){switch(e.data.annotationType){case It.LINK:return new sE(e);case It.TEXT:return new hG(e);case It.WIDGET:switch(e.data.fieldType){case"Tx":return new fG(e);case"Btn":return e.data.radioButton?new lL(e):e.data.checkBox?new pG(e):new gG(e);case"Ch":return new vG(e);case"Sig":return new mG(e)}return new su(e);case It.POPUP:return new CS(e);case It.FREETEXT:return new fL(e);case It.LINE:return new yG(e);case It.SQUARE:return new bG(e);case It.CIRCLE:return new wG(e);case It.POLYLINE:return new mL(e);case It.CARET:return new SG(e);case It.INK:return new rE(e);case It.POLYGON:return new _G(e);case It.HIGHLIGHT:return new pL(e);case It.UNDERLINE:return new NG(e);case It.SQUIGGLY:return new jG(e);case It.STRIKEOUT:return new EG(e);case It.STAMP:return new gL(e);case It.FILEATTACHMENT:return new AG(e);default:return new Rt(e)}}}var od,Xh,Ra,Lg,AS;const AE=class AE{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){C(this,Lg);C(this,od,null);C(this,Xh,!1);C(this,Ra,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AE._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;e.rect&&(u(this,od)||S(this,od,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&k(this,Lg,AS).call(this,t);let r=((i=u(this,Ra))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=u(this,Ra).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),S(this,Ra,null),this.popup=null))}resetEdited(){var e;u(this,od)&&(k(this,Lg,AS).call(this,u(this,od).rect),(e=u(this,Ra))==null||e.popup.resetEdited(),S(this,od,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof su)&&!(this instanceof sE)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof CS){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const y=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;a.borderRadius=y}else if(this instanceof lL){const y=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;a.borderRadius=y}switch(t.borderStyle.style){case _u.SOLID:a.borderStyle="solid";break;case _u.DASHED:a.borderStyle="dashed";break;case _u.BEVELED:be("Unimplemented border style: beveled");break;case _u.INSET:be("Unimplemented border style: inset");break;case _u.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(S(this,Xh,!0),a.borderColor=he.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const d=he.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:f,pageX:m,pageY:p}=r.rawDims;a.left=`${100*(d[0]-m)/h}%`,a.top=`${100*(d[1]-p)/f}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(a.width=`${100*l/h}%`,a.height=`${100*c/f}%`):this.setRotation(x,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*a/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],a=i[0],l=i.slice(1);r.target.style[s]=Tk[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:Tk[`${a}_rgb`](l)})};return Te(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const a=s[r];if(a){const l={detail:{[r]:i},target:e};a(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,v,y]=e.subarray(2,6);if(r===g&&i===b&&t===v&&s===y)return}const{style:a}=this.container;let l;if(u(this,Xh)){const{borderColor:g,borderWidth:b}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const c=r-t,d=i-s,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=h.createElement("defs");f.append(m);const p=h.createElement("clipPath"),x=`clippath_${this.data.id}`;p.setAttribute("id",x),p.setAttribute("clipPathUnits","objectBoundingBox"),m.append(p);for(let g=2,b=e.length;g<b;g+=8){const v=e[g],y=e[g+1],_=e[g+2],N=e[g+3],j=h.createElement("rect"),A=(_-t)/c,E=(i-y)/d,P=(v-_)/c,T=(y-N)/d;j.setAttribute("x",A),j.setAttribute("y",E),j.setAttribute("width",P),j.setAttribute("height",T),p.append(j),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${E}" width="${P}" height="${T}"/>`)}u(this,Xh)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const i=S(this,Ra,new CS({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}get hasPopupElement(){return!!(u(this,Ra)||this.popup||this.data.popupRef)}render(){rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:a,exportValues:l}of r){if(i===-1||a===t)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${a}"]`);if(d&&!Yd.has(d)){be(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:c,domElement:d})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,a=r.getAttribute("data-element-id");a!==t&&Yd.has(r)&&s.push({id:a,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};od=new WeakMap,Xh=new WeakMap,Ra=new WeakMap,Lg=new WeakSet,AS=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)};let Rt=AE;var Ls,uc,aL,oL;class sE extends Rt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});C(this,Ls);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(k(this,Ls,aL).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(k(this,Ls,oL).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&k(this,Ls,uc).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),k(this,Ls,uc).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const a=r.get(i);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),k(this,Ls,uc).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),k(this,Ls,uc).call(this),!this._fieldObjects){be('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:a,include:l}=s,c=[];if(i.length!==0||a.length!==0){const m=new Set(a);for(const p of i){const x=this._fieldObjects[p]||[];for(const{id:g}of x)m.add(g)}for(const p of Object.values(this._fieldObjects))for(const x of p)m.has(x.id)===l&&c.push(x)}else for(const m of Object.values(this._fieldObjects))c.push(...m);const d=this.annotationStorage,h=[];for(const m of c){const{id:p}=m;switch(h.push(p),m.type){case"text":{const g=m.defaultValue||"";d.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=m.defaultValue===m.exportValues;d.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=m.defaultValue||"";d.setValue(p,{value:g});break}default:continue}const x=document.querySelector(`[data-element-id="${p}"]`);if(x){if(!Yd.has(x)){be(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Ls=new WeakSet,uc=function(){this.container.setAttribute("data-internal-link","")},aL=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(s.content,s.filename,i),!1},k(this,Ls,uc).call(this)},oL=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),k(this,Ls,uc).call(this)};class hG extends Rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class su extends Rt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return xn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var l;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(a)}}))})}_setEventListeners(e,t,s,r){var i,a,l;for(const[c,d]of s)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,d,r),d==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":he.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||dG,i=e.style;let a;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Gw*r))||1,f=d/h;a=Math.min(r,c(f/Gw))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(r,c(d/Gw))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=he.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class fG extends su{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),i.setValue(a.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let d=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=d??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",d??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Yd.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:p}=this.data,x=!!m&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(s,"value",b.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",b=>{const v=this.data.defaultFieldValue??"";s.value=h.userValue=v,h.formattedValue=null});let g=b=>{const{formattedValue:v}=h;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{var _;if(h.focused)return;const{target:y}=v;if(x&&(y.type=m,p&&(y.step=p)),h.userValue){const N=h.userValue;if(x)if(m==="time"){const j=new Date(N),A=[j.getHours(),j.getMinutes(),j.getSeconds()];y.value=A.map(E=>E.toString().padStart(2,"0")).join(":")}else y.value=new Date(N-uG).toISOString().split(m==="date"?"T":".",1)[0];else y.value=N}h.lastCommittedValue=y.value,h.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const y={value(_){h.userValue=_.detail.value??"",x||e.setValue(t,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:N}=_.detail;h.formattedValue=N,N!=null&&_.target!==document.activeElement&&(_.target.value=N);const j={formattedValue:N};x&&(j.value=N),e.setValue(t,j)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var E;const{charLimit:N}=_.detail,{target:j}=_;if(N===0){j.removeAttribute("maxLength");return}j.setAttribute("maxLength",N);let A=h.userValue;!A||A.length<=N||(A=A.slice(0,N),j.value=h.userValue=A,e.setValue(t,{value:A}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:j.selectionStart,selEnd:j.selectionEnd}}))}};this._dispatchEventFromSandbox(y,v)}),s.addEventListener("keydown",v=>{var N;h.commitKey=1;let y=-1;if(v.key==="Escape"?y=0:v.key==="Enter"&&!this.data.multiLine?y=2:v.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:_}=v.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:y,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const b=g;g=null,s.addEventListener("blur",v=>{var N,j;if(!h.focused||!v.relatedTarget)return;(N=this.data.actions)!=null&&N.Blur||(h.focused=!1);const{target:y}=v;let{value:_}=y;if(x){if(_&&m==="time"){const A=_.split(":").map(E=>parseInt(E,10));_=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),y.step=""}else _=new Date(_).valueOf();y.type="text"}h.userValue=_,h.lastCommittedValue!==_&&((j=this.linkService.eventBus)==null||j.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),b(v)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",v=>{var T;h.lastCommittedValue=null;const{data:y,target:_}=v,{value:N,selectionStart:j,selectionEnd:A}=_;let E=j,P=A;switch(v.inputType){case"deleteWordBackward":{const I=N.substring(0,j).match(/\w*[^\w]*$/);I&&(E-=I[0].length);break}case"deleteWordForward":{const I=N.substring(j).match(/^[^\w]*\w*/);I&&(P+=I[0].length);break}case"deleteContentBackward":j===A&&(E-=1);break;case"deleteContentForward":j===A&&(P+=1);break}v.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,change:y||"",willCommit:!1,selStart:E,selEnd:P}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class mG extends su{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class pG extends su{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Yd.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,s)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(s,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class lL extends su{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Yd.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const d of this._getElementsByName(l,s))e.setValue(d.id,{value:!1});e.setValue(s,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const h=a===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const m=h&&f.id===s;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class gG extends sE{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class vG extends su{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Yd.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const m of r.options)m.selected=m.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,s.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let a=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),a=()=>{h.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const l=h=>{const f=h?"value":"textContent",{options:m,multiple:p}=r;return p?Array.prototype.filter.call(m,x=>x.selected).map(x=>x[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let c=l(!1);const d=h=>{const f=h.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const f={value(m){a==null||a();const p=m.detail.value,x=new Set(Array.isArray(p)?p:[p]);for(const g of r.options)g.selected=x.has(g.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(m){r.multiple=!0},remove(m){const p=r.options,x=m.detail.remove;p[x].selected=!1,r.remove(x),p.length>0&&Array.prototype.findIndex.call(p,b=>b.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},clear(m){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(m){const{index:p,displayValue:x,exportValue:g}=m.detail.insert,b=r.children[p],v=document.createElement("option");v.textContent=x,v.value=g,b?b.before(v):r.append(v),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},items(m){const{items:p}=m.detail;for(;r.length!==0;)r.remove(0);for(const x of p){const{displayValue:g,exportValue:b}=x,v=document.createElement("option");v.textContent=g,v.value=b,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},indices(m){const p=new Set(m.detail.indices);for(const x of m.target.options)x.selected=p.has(x.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,h)}),r.addEventListener("input",h=>{var p;const f=l(!0),m=l(!1);e.setValue(t,{value:f}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class CS extends Rt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:Rt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new xG({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),s=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${Qj}${r}`).join(",")),this.container}}var Qh,Oy,Ly,Jh,Zh,jt,Ma,il,ef,Fg,tf,Ei,Ss,al,Ia,$g,Da,nf,ld,ol,We,o0,l0,kS,cL,dL,uL,hL,c0,d0,PS;class xG{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:a,richText:l,parent:c,rect:d,parentRect:h,open:f}){C(this,We);C(this,Qh,k(this,We,uL).bind(this));C(this,Oy,k(this,We,PS).bind(this));C(this,Ly,k(this,We,d0).bind(this));C(this,Jh,k(this,We,c0).bind(this));C(this,Zh,null);C(this,jt,null);C(this,Ma,null);C(this,il,null);C(this,ef,null);C(this,Fg,null);C(this,tf,null);C(this,Ei,!1);C(this,Ss,null);C(this,al,null);C(this,Ia,null);C(this,$g,null);C(this,Da,null);C(this,nf,null);C(this,ld,null);C(this,ol,!1);S(this,jt,e),S(this,nf,r),S(this,Ma,a),S(this,Da,l),S(this,Fg,c),S(this,Zh,t),S(this,$g,d),S(this,tf,h),S(this,ef,s),S(this,il,uy.toDateObject(i)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),k(this,We,o0).call(this),u(this,jt).hidden=!0,f&&k(this,We,c0).call(this)}render(){var r;if(u(this,Ss))return;const e=S(this,Ss,document.createElement("div"));if(e.className="popup",u(this,Zh)){const i=e.style.outlineColor=he.makeHexColor(...u(this,Zh));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=u(this,nf))!=null&&r.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=u(this,nf)}if(e.append(t),u(this,il)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,il).valueOf()})),i.dateTime=u(this,il).toISOString(),t.append(i)}const s=u(this,We,l0);if(s)iL.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(u(this,Ma));e.append(i)}u(this,jt).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,a=r.length;i<a;++i){const l=r[i];s.append(document.createTextNode(l)),i<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popup:t,deleted:s}){var r;if(s||t!=null&&t.deleted){this.remove();return}k(this,We,o0).call(this),u(this,ld)||S(this,ld,{contentsObj:u(this,Ma),richText:u(this,Da)}),e&&S(this,Ia,null),t&&(S(this,Da,k(this,We,dL).call(this,t.text)),S(this,il,uy.toDateObject(t.date)),S(this,Ma,null)),(r=u(this,Ss))==null||r.remove(),S(this,Ss,null)}resetEdited(){var e;u(this,ld)&&({contentsObj:Xt(this,Ma)._,richText:Xt(this,Da)._}=u(this,ld),S(this,ld,null),(e=u(this,Ss))==null||e.remove(),S(this,Ss,null),S(this,Ia,null))}remove(){var e,t;(e=u(this,al))==null||e.abort(),S(this,al,null),(t=u(this,Ss))==null||t.remove(),S(this,Ss,null),S(this,ol,!1),S(this,Ei,!1);for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){S(this,ol,this.isVisible),u(this,ol)&&(u(this,jt).hidden=!0)}maybeShow(){k(this,We,o0).call(this),u(this,ol)&&(u(this,Ss)||k(this,We,d0).call(this),S(this,ol,!1),u(this,jt).hidden=!1)}get isVisible(){return u(this,jt).hidden===!1}}Qh=new WeakMap,Oy=new WeakMap,Ly=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,jt=new WeakMap,Ma=new WeakMap,il=new WeakMap,ef=new WeakMap,Fg=new WeakMap,tf=new WeakMap,Ei=new WeakMap,Ss=new WeakMap,al=new WeakMap,Ia=new WeakMap,$g=new WeakMap,Da=new WeakMap,nf=new WeakMap,ld=new WeakMap,ol=new WeakMap,We=new WeakSet,o0=function(){var t;if(u(this,al))return;S(this,al,new AbortController);const{signal:e}=u(this,al);for(const s of this.trigger)s.addEventListener("click",u(this,Jh),{signal:e}),s.addEventListener("mouseenter",u(this,Ly),{signal:e}),s.addEventListener("mouseleave",u(this,Oy),{signal:e}),s.classList.add("popupTriggerArea");for(const s of u(this,ef))(t=s.container)==null||t.addEventListener("keydown",u(this,Qh),{signal:e})},l0=function(){const e=u(this,Da),t=u(this,Ma);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Da).html||null},kS=function(){var e,t,s;return((s=(t=(e=u(this,We,l0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},cL=function(){var e,t,s;return((s=(t=(e=u(this,We,l0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},dL=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,We,cL),fontSize:u(this,We,kS)?`calc(${u(this,We,kS)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},uL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Ei))&&k(this,We,c0).call(this)},hL=function(){if(u(this,Ia)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=u(this,Fg);let a=!!u(this,tf),l=a?u(this,tf):u(this,$g);for(const x of u(this,ef))if(!l||he.intersect(x.data.rect,l)!==null){l=x.data.rect,a=!0;break}const c=he.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=a?l[2]-l[0]+5:0,f=c[0]+h,m=c[1];S(this,Ia,[100*(f-r)/t,100*(m-i)/s]);const{style:p}=u(this,jt);p.left=`${u(this,Ia)[0]}%`,p.top=`${u(this,Ia)[1]}%`},c0=function(){S(this,Ei,!u(this,Ei)),u(this,Ei)?(k(this,We,d0).call(this),u(this,jt).addEventListener("click",u(this,Jh)),u(this,jt).addEventListener("keydown",u(this,Qh))):(k(this,We,PS).call(this),u(this,jt).removeEventListener("click",u(this,Jh)),u(this,jt).removeEventListener("keydown",u(this,Qh)))},d0=function(){u(this,Ss)||this.render(),this.isVisible?u(this,Ei)&&u(this,jt).classList.add("focused"):(k(this,We,hL).call(this),u(this,jt).hidden=!1,u(this,jt).style.zIndex=parseInt(u(this,jt).style.zIndex)+1e3)},PS=function(){u(this,jt).classList.remove("focused"),!(u(this,Ei)||!this.isVisible)&&(u(this,jt).hidden=!0,u(this,jt).style.zIndex=parseInt(u(this,jt).style.zIndex)-1e3)};class fL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ye.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var zg;class yG extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,zg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=S(this,zg,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,zg)}addHighlightArea(){this.container.classList.add("highlightArea")}}zg=new WeakMap;var Bg;class bG extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Bg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,l=S(this,Bg,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",s-a),l.setAttribute("height",r-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Bg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bg=new WeakMap;var Ug;class wG extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Ug,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),a=t.borderStyle.width,l=S(this,Ug,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",r/2),l.setAttribute("rx",s/2-a/2),l.setAttribute("ry",r/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Ug)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ug=new WeakMap;var Hg;class mL extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Hg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:a,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(a,l,!0);let d=[];for(let f=0,m=s.length;f<m;f+=2){const p=s[f]-t[0],x=t[3]-s[f+1];d.push(`${p},${x}`)}d=d.join(" ");const h=S(this,Hg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Hg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hg=new WeakMap;class _G extends mL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class SG extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Wg,cd,Vg,TS;class rE extends Rt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,Vg);C(this,Wg,null);C(this,cd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ye.HIGHLIGHT:ye.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:d}=k(this,Vg,TS).call(this,s,t),h=this.svgFactory.create(c,d,!0),f=S(this,Wg,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,p=r.length;m<p;m++){const x=this.svgFactory.createElement(this.svgElementName);u(this,cd).push(x),x.setAttribute("points",r[m].join(",")),f.append(x)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,a=u(this,Wg);if(s>=0&&a.setAttribute("stroke-width",s||1),r)for(let l=0,c=u(this,cd).length;l<c;l++)u(this,cd)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:c,height:d}=k(this,Vg,TS).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return u(this,cd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wg=new WeakMap,cd=new WeakMap,Vg=new WeakSet,TS=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class pL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ye.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class NG extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class jG extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class EG extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class gL extends Rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ye.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var qg,Gg,RS;class AG extends Rt{constructor(t){var r;super(t,{isRenderable:!0});C(this,Gg);C(this,qg,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",k(this,Gg,RS).bind(this)),S(this,qg,r);const{isMac:i}=xn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&k(this,Gg,RS).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}qg=new WeakMap,Gg=new WeakSet,RS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Kg,dd,ll,Yg,Vl,IS,DS;const CE=class CE{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:a,structTreeLayer:l}){C(this,Vl);C(this,Kg,null);C(this,dd,null);C(this,ll,new Map);C(this,Yg,null);this.div=e,S(this,Kg,t),S(this,dd,s),S(this,Yg,l||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return u(this,ll).size>0}async render(e){var a;const{annotations:t}=e,s=this.div;Gd(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new gy,annotationStorage:e.annotationStorage||new eE,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===It.POPUP;if(c){const f=r.get(l.id);if(!f)continue;i.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;i.data=l;const d=Rk.create(i);if(!d.isRenderable)continue;if(!c&&l.popupRef){const f=r.get(l.popupRef);f?f.push(d):r.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await k(this,Vl,IS).call(this,h,l.id,i.elements),d._isEditable&&(u(this,ll).set(d.data.id,d),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(d))}k(this,Vl,DS).call(this)}async addLinkAnnotations(e,t){const s={data:null,layer:this.div,linkService:t,svgFactory:new gy,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=CE._defaultBorderStyle),s.data=r;const i=Rk.create(s);if(!i.isRenderable)continue;const a=i.render();await k(this,Vl,IS).call(this,a,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Gd(t,{rotation:e.rotation}),k(this,Vl,DS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ll).values())}getEditableAnnotation(e){return u(this,ll).get(e)}static get _defaultBorderStyle(){return Te(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:_u.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Kg=new WeakMap,dd=new WeakMap,ll=new WeakMap,Yg=new WeakMap,Vl=new WeakSet,IS=async function(e,t,s){var l,c;const r=e.firstChild||e,i=r.id=`${Qj}${t}`,a=await((l=u(this,Yg))==null?void 0:l.getAriaAttributes(i));if(a)for(const[d,h]of a)r.setAttribute(d,h);s?s.at(-1).container.after(e):(this.div.append(e),(c=u(this,Kg))==null||c.moveElementInDOM(this.div,e,r,!1))},DS=function(){var t;if(!u(this,dd))return;const e=this.div;for(const[s,r]of u(this,dd)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const l=u(this,ll).get(s);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),l._hasNoCanvas=!1):l.canvas=r)}u(this,dd).clear()};let MS=CE;const Ax=/\r\n?|\n/g;var sr,Ns,Xg,ud,js,$t,vL,xL,yL,u0,Xa,h0,f0,bL,LS,wL;const at=class at extends lt{constructor(t){super({...t,name:"freeTextEditor"});C(this,$t);C(this,sr);C(this,Ns,"");C(this,Xg,`${this.id}-editor`);C(this,ud,null);C(this,js);G(this,"_colorPicker",null);S(this,sr,t.color||at._defaultColor||lt._defaultLineColor),S(this,js,t.fontSize||at._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=at.prototype,s=a=>a.isEmpty(),r=Kd.TRANSLATE_SMALL,i=Kd.TRANSLATE_BIG;return Te(this,"_keyboardManager",new Ov([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){lt.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Fe.FREETEXT_SIZE:at._defaultFontSize=s;break;case Fe.FREETEXT_COLOR:at._defaultColor=s;break}}updateParams(t,s){switch(t){case Fe.FREETEXT_SIZE:k(this,$t,vL).call(this,s);break;case Fe.FREETEXT_COLOR:k(this,$t,xL).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Fe.FREETEXT_SIZE,at._defaultFontSize],[Fe.FREETEXT_COLOR,at._defaultColor||lt._defaultLineColor]]}get propertiesToUpdate(){return[[Fe.FREETEXT_SIZE,u(this,js)],[Fe.FREETEXT_COLOR,u(this,sr)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new py(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Fe.FREETEXT_COLOR}get colorValue(){return u(this,sr)}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-at._internalPadding*t,-(at._internalPadding+u(this,js))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,ud,new AbortController);const t=this._uiManager.combinedSignal(u(this,ud));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Xg)),this._isDraggable=!0,(t=u(this,ud))==null||t.abort(),S(this,ud,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Ns),s=S(this,Ns,k(this,$t,yL).call(this).trimEnd());if(t===s)return;const r=i=>{if(S(this,Ns,i),!i){this.remove();return}k(this,$t,f0).call(this),this._uiManager.rebuild(this),k(this,$t,u0).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),k(this,$t,u0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){at._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Xg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,js)}px * var(--total-scale-factor))`,r.color=u(this,sr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[m,p]=this.pageTranslation;let x,g;switch(this.rotation){case 0:x=t+(l[0]-m)/h,g=s+this.height-(l[1]-p)/f;break;case 90:x=t+(l[0]-m)/h,g=s-(l[1]-p)/f,[c,d]=[d,-c];break;case 180:x=t-this.width+(l[0]-m)/h,g=s-(l[1]-p)/f,[c,d]=[-c,-d];break;case 270:x=t+(l[0]-m-this.height*f)/h,g=s+(l[1]-p-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(x*i,g*a,c,d)}else this._moveAfterPaste(t,s);k(this,$t,f0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var x,g,b;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=k(x=at,Xa,LS).call(x,s.getData("text")||"").replaceAll(Ax,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Ax,"")),v!==this.editorDiv){let y=h;for(const _ of this.editorDiv.childNodes){if(_===v){y=f;continue}y.push(k(g=at,Xa,h0).call(g,_))}}h.push(c.nodeValue.slice(0,d).replaceAll(Ax,""))}else if(c===this.editorDiv){let v=h,y=0;for(const _ of this.editorDiv.childNodes)y++===d&&(v=f),v.push(k(b=at,Xa,h0).call(b,_))}S(this,Ns,`${h.join(`
`)}${i}${f.join(`
`)}`),k(this,$t,f0).call(this);const m=new Range;let p=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const y=v.nodeValue.length;if(p<=y){m.setStart(v,p),m.setEnd(v,p);break}p-=y}a.removeAllRanges(),a.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,r){var l;let i=null;if(t instanceof fL){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:h,rotation:f,id:m,popupRef:p,contentsObj:x},textContent:g,textPosition:b,parent:{page:{pageNumber:v}}}=t;if(!g||g.length===0)return null;i=t={annotationType:ye.FREETEXT,color:Array.from(d),fontSize:c,value:g.join(`
`),position:b,pageIndex:v-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p,comment:(x==null?void 0:x.str)||null}}const a=await super.deserialize(t,s,r);return S(a,js,t.fontSize),S(a,sr,he.makeHexColor(...t.color)),S(a,Ns,k(l=at,Xa,LS).call(l,t.value)),a._initialData=i,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=at._internalPadding*this.parentScale,r=this.getRect(s,s),i=lt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,sr)),a={annotationType:ye.FREETEXT,color:i,fontSize:u(this,js),value:k(this,$t,bL).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!k(this,$t,wL).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t),{style:r}=s;r.fontSize=`calc(${u(this,js)}px * var(--total-scale-factor))`,r.color=u(this,sr),s.replaceChildren();for(const l of u(this,Ns).split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),s.append(c)}const i=at._internalPadding*this.parentScale,a={rect:this.getRect(i,i)};return a.popup=this.hasEditedComment?this.comment:{text:u(this,Ns)},t.updateEdited(a),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};sr=new WeakMap,Ns=new WeakMap,Xg=new WeakMap,ud=new WeakMap,js=new WeakMap,$t=new WeakSet,vL=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,js))*this.parentScale),S(this,js,i),k(this,$t,u0).call(this)},r=u(this,js);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},xL=function(t){const s=i=>{var a;S(this,sr,this.editorDiv.style.color=i),(a=this._colorPicker)==null||a.update(i)},r=u(this,sr);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},yL=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(k(r=at,Xa,h0).call(r,i)),s=i);return t.join(`
`)},u0=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},Xa=new WeakSet,h0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ax,"")},f0=function(){if(this.editorDiv.replaceChildren(),!!u(this,Ns))for(const t of u(this,Ns).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},bL=function(){return u(this,Ns).replaceAll(" "," ")},LS=function(t){return t.replaceAll(" "," ")},wL=function(t){const{value:s,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==a},C(at,Xa),G(at,"_freeTextDefaultContent",""),G(at,"_internalPadding",0),G(at,"_defaultColor",null),G(at,"_defaultFontSize",10),G(at,"_type","freetext"),G(at,"_editorType",ye.FREETEXT);let OS=at;class re{toSVGPath(){rt("Abstract method `toSVGPath` must be implemented.")}get box(){rt("Abstract getter `box` must be implemented.")}serialize(e,t){rt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l]*r,a[l+1]=s+e[l+1]*i;return a}static _rescaleAndSwap(e,t,s,r,i,a){a||(a=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)a[l]=t+e[l+1]*r,a[l+1]=s+e[l]*i;return a}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,a){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+a)/6,(s+i)/2,(r+a)/2]}}G(re,"PRECISION",1e-4);var Es,Fr,sf,rf,Ai,Pe,hd,fd,Qg,Jg,af,of,cl,Zg,Fy,$y,Yt,$m,_L,SL,NL,jL,EL,AL;const ca=class ca{constructor({x:e,y:t},s,r,i,a,l=0){C(this,Yt);C(this,Es);C(this,Fr,[]);C(this,sf);C(this,rf);C(this,Ai,[]);C(this,Pe,new Float32Array(18));C(this,hd);C(this,fd);C(this,Qg);C(this,Jg);C(this,af);C(this,of);C(this,cl,[]);S(this,Es,s),S(this,of,i*r),S(this,rf,a),u(this,Pe).set([NaN,NaN,NaN,NaN,e,t],6),S(this,sf,l),S(this,Jg,u(ca,Zg)*r),S(this,Qg,u(ca,$y)*r),S(this,af,r),u(this,cl).push(e,t)}isEmpty(){return isNaN(u(this,Pe)[8])}add({x:e,y:t}){var T;S(this,hd,e),S(this,fd,t);const[s,r,i,a]=u(this,Es);let[l,c,d,h]=u(this,Pe).subarray(8,12);const f=e-d,m=t-h,p=Math.hypot(f,m);if(p<u(this,Qg))return!1;const x=p-u(this,Jg),g=x/p,b=g*f,v=g*m;let y=l,_=c;l=d,c=h,d+=b,h+=v,(T=u(this,cl))==null||T.push(e,t);const N=-v/x,j=b/x,A=N*u(this,of),E=j*u(this,of);return u(this,Pe).set(u(this,Pe).subarray(2,8),0),u(this,Pe).set([d+A,h+E],4),u(this,Pe).set(u(this,Pe).subarray(14,18),12),u(this,Pe).set([d-A,h-E],16),isNaN(u(this,Pe)[6])?(u(this,Ai).length===0&&(u(this,Pe).set([l+A,c+E],2),u(this,Ai).push(NaN,NaN,NaN,NaN,(l+A-s)/i,(c+E-r)/a),u(this,Pe).set([l-A,c-E],14),u(this,Fr).push(NaN,NaN,NaN,NaN,(l-A-s)/i,(c-E-r)/a)),u(this,Pe).set([y,_,l,c,d,h],6),!this.isEmpty()):(u(this,Pe).set([y,_,l,c,d,h],6),Math.abs(Math.atan2(_-c,y-l)-Math.atan2(v,b))<Math.PI/2?([l,c,d,h]=u(this,Pe).subarray(2,6),u(this,Ai).push(NaN,NaN,NaN,NaN,((l+d)/2-s)/i,((c+h)/2-r)/a),[l,c,y,_]=u(this,Pe).subarray(14,18),u(this,Fr).push(NaN,NaN,NaN,NaN,((y+l)/2-s)/i,((_+c)/2-r)/a),!0):([y,_,l,c,d,h]=u(this,Pe).subarray(0,6),u(this,Ai).push(((y+5*l)/6-s)/i,((_+5*c)/6-r)/a,((5*l+d)/6-s)/i,((5*c+h)/6-r)/a,((l+d)/2-s)/i,((c+h)/2-r)/a),[d,h,l,c,y,_]=u(this,Pe).subarray(12,18),u(this,Fr).push(((y+5*l)/6-s)/i,((_+5*c)/6-r)/a,((5*l+d)/6-s)/i,((5*c+h)/6-r)/a,((l+d)/2-s)/i,((c+h)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Ai),t=u(this,Fr);if(isNaN(u(this,Pe)[6])&&!this.isEmpty())return k(this,Yt,_L).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);k(this,Yt,NL).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return k(this,Yt,SL).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,a){return new CL(e,t,s,r,i,a)}getOutlines(){var f;const e=u(this,Ai),t=u(this,Fr),s=u(this,Pe),[r,i,a,l]=u(this,Es),c=new Float32Array((((f=u(this,cl))==null?void 0:f.length)??0)+2);for(let m=0,p=c.length-2;m<p;m+=2)c[m]=(u(this,cl)[m]-r)/a,c[m+1]=(u(this,cl)[m+1]-i)/l;if(c[c.length-2]=(u(this,hd)-r)/a,c[c.length-1]=(u(this,fd)-i)/l,isNaN(s[6])&&!this.isEmpty())return k(this,Yt,jL).call(this,c);const d=new Float32Array(u(this,Ai).length+24+u(this,Fr).length);let h=e.length;for(let m=0;m<h;m+=2){if(isNaN(e[m])){d[m]=d[m+1]=NaN;continue}d[m]=e[m],d[m+1]=e[m+1]}h=k(this,Yt,AL).call(this,d,h);for(let m=t.length-6;m>=6;m-=6)for(let p=0;p<6;p+=2){if(isNaN(t[m+p])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[m+p],d[h+1]=t[m+p+1],h+=2}return k(this,Yt,EL).call(this,d,h),this.newFreeDrawOutline(d,c,u(this,Es),u(this,af),u(this,sf),u(this,rf))}};Es=new WeakMap,Fr=new WeakMap,sf=new WeakMap,rf=new WeakMap,Ai=new WeakMap,Pe=new WeakMap,hd=new WeakMap,fd=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,af=new WeakMap,of=new WeakMap,cl=new WeakMap,Zg=new WeakMap,Fy=new WeakMap,$y=new WeakMap,Yt=new WeakSet,$m=function(){const e=u(this,Pe).subarray(4,6),t=u(this,Pe).subarray(16,18),[s,r,i,a]=u(this,Es);return[(u(this,hd)+(e[0]-t[0])/2-s)/i,(u(this,fd)+(e[1]-t[1])/2-r)/a,(u(this,hd)+(t[0]-e[0])/2-s)/i,(u(this,fd)+(t[1]-e[1])/2-r)/a]},_L=function(){const[e,t,s,r]=u(this,Es),[i,a,l,c]=k(this,Yt,$m).call(this);return`M${(u(this,Pe)[2]-e)/s} ${(u(this,Pe)[3]-t)/r} L${(u(this,Pe)[4]-e)/s} ${(u(this,Pe)[5]-t)/r} L${i} ${a} L${l} ${c} L${(u(this,Pe)[16]-e)/s} ${(u(this,Pe)[17]-t)/r} L${(u(this,Pe)[14]-e)/s} ${(u(this,Pe)[15]-t)/r} Z`},SL=function(e){const t=u(this,Fr);e.push(`L${t[4]} ${t[5]} Z`)},NL=function(e){const[t,s,r,i]=u(this,Es),a=u(this,Pe).subarray(4,6),l=u(this,Pe).subarray(16,18),[c,d,h,f]=k(this,Yt,$m).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-s)/i} L${c} ${d} L${h} ${f} L${(l[0]-t)/r} ${(l[1]-s)/i}`)},jL=function(e){const t=u(this,Pe),[s,r,i,a]=u(this,Es),[l,c,d,h]=k(this,Yt,$m).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/a,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/a],0),this.newFreeDrawOutline(f,e,u(this,Es),u(this,af),u(this,sf),u(this,rf))},EL=function(e,t){const s=u(this,Fr);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},AL=function(e,t){const s=u(this,Pe).subarray(4,6),r=u(this,Pe).subarray(16,18),[i,a,l,c]=u(this,Es),[d,h,f,m]=k(this,Yt,$m).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/l,(s[1]-a)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-a)/c],t),t+=24},C(ca,Zg,8),C(ca,Fy,2),C(ca,$y,u(ca,Zg)+u(ca,Fy));let vy=ca;var lf,md,Oa,ev,As,tv,Ct,zy,kL;class CL extends re{constructor(t,s,r,i,a,l){super();C(this,zy);C(this,lf);C(this,md,new Float32Array(4));C(this,Oa);C(this,ev);C(this,As);C(this,tv);C(this,Ct);S(this,Ct,t),S(this,As,s),S(this,lf,r),S(this,tv,i),S(this,Oa,a),S(this,ev,l),this.lastPoint=[NaN,NaN],k(this,zy,kL).call(this,l);const[c,d,h,f]=u(this,md);for(let m=0,p=t.length;m<p;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-d)/f;for(let m=0,p=s.length;m<p;m+=2)s[m]=(s[m]-c)/h,s[m+1]=(s[m+1]-d)/f}toSVGPath(){const t=[`M${u(this,Ct)[4]} ${u(this,Ct)[5]}`];for(let s=6,r=u(this,Ct).length;s<r;s+=6){if(isNaN(u(this,Ct)[s])){t.push(`L${u(this,Ct)[s+4]} ${u(this,Ct)[s+5]}`);continue}t.push(`C${u(this,Ct)[s]} ${u(this,Ct)[s+1]} ${u(this,Ct)[s+2]} ${u(this,Ct)[s+3]} ${u(this,Ct)[s+4]} ${u(this,Ct)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],a){const l=r-t,c=i-s;let d,h;switch(a){case 0:d=re._rescale(u(this,Ct),t,i,l,-c),h=re._rescale(u(this,As),t,i,l,-c);break;case 90:d=re._rescaleAndSwap(u(this,Ct),t,s,l,c),h=re._rescaleAndSwap(u(this,As),t,s,l,c);break;case 180:d=re._rescale(u(this,Ct),r,s,-l,c),h=re._rescale(u(this,As),r,s,-l,c);break;case 270:d=re._rescaleAndSwap(u(this,Ct),r,i,-l,-c),h=re._rescaleAndSwap(u(this,As),r,i,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return u(this,md)}newOutliner(t,s,r,i,a,l=0){return new vy(t,s,r,i,a,l)}getNewOutline(t,s){const[r,i,a,l]=u(this,md),[c,d,h,f]=u(this,lf),m=a*h,p=l*f,x=r*h+c,g=i*f+d,b=this.newOutliner({x:u(this,As)[0]*m+x,y:u(this,As)[1]*p+g},u(this,lf),u(this,tv),t,u(this,ev),s??u(this,Oa));for(let v=2;v<u(this,As).length;v+=2)b.add({x:u(this,As)[v]*m+x,y:u(this,As)[v+1]*p+g});return b.getOutlines()}}lf=new WeakMap,md=new WeakMap,Oa=new WeakMap,ev=new WeakMap,As=new WeakMap,tv=new WeakMap,Ct=new WeakMap,zy=new WeakSet,kL=function(t){const s=u(this,Ct);let r=s[4],i=s[5];const a=[r,i,r,i];let l=r,c=i;const d=t?Math.max:Math.min;for(let f=6,m=s.length;f<m;f+=6){const p=s[f+4],x=s[f+5];if(isNaN(s[f]))he.pointBoundingBox(p,x,a),c<x?(l=p,c=x):c===x&&(l=d(l,p));else{const g=[1/0,1/0,-1/0,-1/0];he.bezierBoundingBox(r,i,...s.slice(f,f+6),g),he.rectBoundingBox(...g,a),c<g[3]?(l=g[2],c=g[3]):c===g[3]&&(l=d(l,g[2]))}r=p,i=x}const h=u(this,md);h[0]=a[0]-u(this,Oa),h[1]=a[1]-u(this,Oa),h[2]=a[2]-a[0]+2*u(this,Oa),h[3]=a[3]-a[1]+2*u(this,Oa),this.lastPoint=[l,c]};var nv,sv,dl,$r,Gn,PL,m0,TL,RL,$S;class FS{constructor(e,t=0,s=0,r=!0){C(this,Gn);C(this,nv);C(this,sv);C(this,dl,[]);C(this,$r,[]);const i=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:g,width:b,height:v}of e){const y=Math.floor((x-t)/l)*l,_=Math.ceil((x+b+t)/l)*l,N=Math.floor((g-t)/l)*l,j=Math.ceil((g+v+t)/l)*l,A=[y,N,j,!0],E=[_,N,j,!1];u(this,dl).push(A,E),he.rectBoundingBox(y,N,_,j,i)}const c=i[2]-i[0]+2*s,d=i[3]-i[1]+2*s,h=i[0]-s,f=i[1]-s,m=u(this,dl).at(r?-1:-2),p=[m[0],m[2]];for(const x of u(this,dl)){const[g,b,v]=x;x[0]=(g-h)/c,x[1]=(b-f)/d,x[2]=(v-f)/d}S(this,nv,new Float32Array([h,f,c,d])),S(this,sv,p)}getOutlines(){u(this,dl).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of u(this,dl))t[3]?(e.push(...k(this,Gn,$S).call(this,t)),k(this,Gn,TL).call(this,t)):(k(this,Gn,RL).call(this,t),e.push(...k(this,Gn,$S).call(this,t)));return k(this,Gn,PL).call(this,e)}}nv=new WeakMap,sv=new WeakMap,dl=new WeakMap,$r=new WeakMap,Gn=new WeakSet,PL=function(e){const t=[],s=new Set;for(const a of e){const[l,c,d]=a;t.push([l,c,a],[l,d,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const c=t[a][2],d=t[a+1][2];c.push(d),d.push(c),s.add(c),s.add(d)}const r=[];let i;for(;s.size>0;){const a=s.values().next().value;let[l,c,d,h,f]=a;s.delete(a);let m=l,p=c;for(i=[l,d],r.push(i);;){let x;if(s.has(h))x=h;else if(s.has(f))x=f;else break;s.delete(x),[l,c,d,h,f]=x,m!==l&&(i.push(m,p,l,p===c?c:d),m=l),p=p===c?d:c}i.push(m,p)}return new CG(r,u(this,nv),u(this,sv))},m0=function(e){const t=u(this,$r);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,a=t[i][0];if(a===e)return i;a<e?s=i+1:r=i-1}return r+1},TL=function([,e,t]){const s=k(this,Gn,m0).call(this,e);u(this,$r).splice(s,0,[e,t])},RL=function([,e,t]){const s=k(this,Gn,m0).call(this,e);for(let r=s;r<u(this,$r).length;r++){const[i,a]=u(this,$r)[r];if(i!==e)break;if(i===e&&a===t){u(this,$r).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,a]=u(this,$r)[r];if(i!==e)break;if(i===e&&a===t){u(this,$r).splice(r,1);return}}},$S=function(e){const[t,s,r]=e,i=[[t,s,r]],a=k(this,Gn,m0).call(this,r);for(let l=0;l<a;l++){const[c,d]=u(this,$r)[l];for(let h=0,f=i.length;h<f;h++){const[,m,p]=i[h];if(!(d<=m||p<=c)){if(m>=c){if(p>d)i[h][1]=d;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=c,p>d&&i.push([t,d,p])}}}return i};var rv,cf;class CG extends re{constructor(t,s,r){super();C(this,rv);C(this,cf);S(this,cf,t),S(this,rv,s),this.lastPoint=r}toSVGPath(){const t=[];for(const s of u(this,cf)){let[r,i]=s;t.push(`M${r} ${i}`);for(let a=2;a<s.length;a+=2){const l=s[a],c=s[a+1];l===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],a){const l=[],c=r-t,d=i-s;for(const h of u(this,cf)){const f=new Array(h.length);for(let m=0;m<h.length;m+=2)f[m]=t+h[m]*c,f[m+1]=i-h[m+1]*d;l.push(f)}return l}get box(){return u(this,rv)}get classNamesForOutlining(){return["highlightOutline"]}}rv=new WeakMap,cf=new WeakMap;class zS extends vy{newFreeDrawOutline(e,t,s,r,i,a){return new kG(e,t,s,r,i,a)}}class kG extends CL{newOutliner(e,t,s,r,i,a=0){return new zS(e,t,s,r,i,a)}}var df,iv,La,pd,av,ns,ov,lv,gd,rr,Cs,un,uf,Fa,An,hf,ir,cv,Se,BS,p0,ML,IL,DL,US,hc,cr,Cu,OL,g0,zm,LL,FL,$L,zL,BL;const qe=class qe extends lt{constructor(t){super({...t,name:"highlightEditor"});C(this,Se);C(this,df,null);C(this,iv,0);C(this,La);C(this,pd,null);C(this,av,null);C(this,ns,null);C(this,ov,null);C(this,lv,0);C(this,gd,null);C(this,rr,null);C(this,Cs,null);C(this,un,!1);C(this,uf,null);C(this,Fa);C(this,An,null);C(this,hf,"");C(this,ir);C(this,cv,"");this.color=t.color||qe._defaultColor,S(this,ir,t.thickness||qe._defaultThickness),S(this,Fa,t.opacity||qe._defaultOpacity),S(this,La,t.boxes||null),S(this,cv,t.methodOfCreation||""),S(this,hf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(S(this,un,!0),k(this,Se,p0).call(this,t),k(this,Se,hc).call(this)):u(this,La)&&(S(this,df,t.anchorNode),S(this,iv,t.anchorOffset),S(this,ov,t.focusNode),S(this,lv,t.focusOffset),k(this,Se,BS).call(this),k(this,Se,hc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=qe.prototype;return Te(this,"_keyboardManager",new Ov([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,un)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,ir),methodOfCreation:u(this,cv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;lt.initialize(t,s),qe._defaultColor||(qe._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Fe.HIGHLIGHT_COLOR:qe._defaultColor=s;break;case Fe.HIGHLIGHT_THICKNESS:qe._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return u(this,uf)}updateParams(t,s){switch(t){case Fe.HIGHLIGHT_COLOR:k(this,Se,ML).call(this,s);break;case Fe.HIGHLIGHT_THICKNESS:k(this,Se,IL).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Fe.HIGHLIGHT_COLOR,qe._defaultColor],[Fe.HIGHLIGHT_THICKNESS,qe._defaultThickness]]}get propertiesToUpdate(){return[[Fe.HIGHLIGHT_COLOR,this.color||qe._defaultColor],[Fe.HIGHLIGHT_THICKNESS,u(this,ir)||qe._defaultThickness],[Fe.HIGHLIGHT_FREE,u(this,un)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,av,new my({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,Se,zm).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,k(this,Se,zm).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,Se,US).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Se,hc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?k(this,Se,US).call(this):t&&(k(this,Se,hc).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,a,l;const{drawLayer:s}=this.parent;let r;u(this,un)?(t=(t-this.rotation+360)%360,r=k(i=qe,cr,Cu).call(i,u(this,rr).box,t)):r=k(a=qe,cr,Cu).call(a,[this.x,this.y,this.width,this.height],t),s.updateProperties(u(this,Cs),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(u(this,An),{bbox:k(l=qe,cr,Cu).call(l,u(this,ns).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,hf)&&(t.setAttribute("aria-label",u(this,hf)),t.setAttribute("role","mark")),u(this,un)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,Se,OL).bind(this),{signal:this._uiManager._signal});const s=S(this,gd,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=u(this,pd);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),oO(this,u(this,gd),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,An),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,An),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,Se,g0).call(this,!0);break;case 1:case 3:k(this,Se,g0).call(this,!1);break}}select(){var t;super.select(),u(this,An)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,An),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,An)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,An),{rootClass:{selected:!1}}),u(this,un)||k(this,Se,g0).call(this,!1))}get _mustFixPosition(){return!u(this,un)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Cs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,An),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:a}){const{x:l,y:c,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),p=x=>{f.abort(),k(this,cr,zL).call(this,t,x)};window.addEventListener("blur",p,{signal:m}),window.addEventListener("pointerup",p,{signal:m}),window.addEventListener("pointerdown",Dt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",vr,{signal:m}),r.addEventListener("pointermove",k(this,cr,$L).bind(this,t),{signal:m}),this._freeHighlight=new zS({x:i,y:a},[l,c,d,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var g,b,v,y;let i=null;if(t instanceof pL){const{data:{quadPoints:_,rect:N,rotation:j,id:A,color:E,opacity:P,popupRef:T,contentsObj:I},parent:{page:{pageNumber:M}}}=t;i=t={annotationType:ye.HIGHLIGHT,color:Array.from(E),opacity:P,quadPoints:_,boxes:null,pageIndex:M-1,rect:N.slice(0),rotation:j,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(I==null?void 0:I.str)||null}}else if(t instanceof rE){const{data:{inkLists:_,rect:N,rotation:j,id:A,color:E,borderStyle:{rawWidth:P},popupRef:T,contentsObj:I},parent:{page:{pageNumber:M}}}=t;i=t={annotationType:ye.HIGHLIGHT,color:Array.from(E),thickness:P,inkLists:_,boxes:null,pageIndex:M-1,rect:N.slice(0),rotation:j,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(I==null?void 0:I.str)||null}}const{color:a,quadPoints:l,inkLists:c,opacity:d}=t,h=await super.deserialize(t,s,r);h.color=he.makeHexColor(...a),S(h,Fa,d||1),c&&S(h,ir,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t.comment);const[f,m]=h.pageDimensions,[p,x]=h.pageTranslation;if(l){const _=S(h,La,[]);for(let N=0;N<l.length;N+=8)_.push({x:(l[N]-p)/f,y:1-(l[N+1]-x)/m,width:(l[N+2]-l[N])/f,height:(l[N+1]-l[N+5])/m});k(g=h,Se,BS).call(g),k(b=h,Se,hc).call(b),h.rotate(h.rotation)}else if(c){S(h,un,!0);const _=c[0],N={x:_[0]-p,y:m-(_[1]-x)},j=new zS(N,[0,0,f,m],1,u(h,ir)/2,!0,.001);for(let P=0,T=_.length;P<T;P+=2)N.x=_[P]-p,N.y=m-(_[P+1]-x),j.add(N);const{id:A,clipPathId:E}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:j.toSVGPath()}},!0,!0);k(v=h,Se,p0).call(v,{highlightOutlines:j.getOutlines(),highlightId:A,clipPathId:E}),k(y=h,Se,hc).call(y),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),r=lt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:ye.HIGHLIGHT,color:r,opacity:u(this,Fa),thickness:u(this,ir),quadPoints:k(this,Se,LL).call(this),outlines:k(this,Se,FL).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:k(this,Se,zm).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!k(this,Se,BL).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const s={rect:this.getRect(0,0)};return this.hasEditedComment&&(s.popup=this.comment),t.updateEdited(s),null}static canCreateNewEmptyEditor(){return!1}};df=new WeakMap,iv=new WeakMap,La=new WeakMap,pd=new WeakMap,av=new WeakMap,ns=new WeakMap,ov=new WeakMap,lv=new WeakMap,gd=new WeakMap,rr=new WeakMap,Cs=new WeakMap,un=new WeakMap,uf=new WeakMap,Fa=new WeakMap,An=new WeakMap,hf=new WeakMap,ir=new WeakMap,cv=new WeakMap,Se=new WeakSet,BS=function(){const t=new FS(u(this,La),.001);S(this,rr,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,rr).box;const s=new FS(u(this,La),.0025,.001,this._uiManager.direction==="ltr");S(this,ns,s.getOutlines());const{lastPoint:r}=u(this,ns);S(this,uf,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},p0=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,m;if(S(this,rr,t),S(this,ns,t.getNewOutline(u(this,ir)/2+1.5,.0025)),s>=0)S(this,Cs,s),S(this,pd,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),S(this,An,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,ns).box,path:{d:u(this,ns).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Cs),{bbox:k(f=qe,cr,Cu).call(f,u(this,rr).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,An),{bbox:k(m=qe,cr,Cu).call(m,u(this,ns).box,p),path:{d:u(this,ns).toSVGPath()}})}const[a,l,c,d]=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=d;break;case 90:{const[p,x]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*x/p,this.height=d*p/x;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[p,x]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*x/p,this.height=d*p/x;break}}const{lastPoint:h}=u(this,ns);S(this,uf,[(h[0]-a)/c,(h[1]-l)/d])},ML=function(t){const s=(a,l)=>{var c,d;this.color=a,S(this,Fa,l),(c=this.parent)==null||c.drawLayer.updateProperties(u(this,Cs),{root:{fill:a,"fill-opacity":l}}),(d=u(this,av))==null||d.updateColor(a)},r=this.color,i=u(this,Fa);this.addCommands({cmd:s.bind(this,t,qe._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},IL=function(t){const s=u(this,ir),r=i=>{S(this,ir,i),k(this,Se,DL).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Fe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},DL=function(t){if(!u(this,un))return;k(this,Se,p0).call(this,{highlightOutlines:u(this,rr).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)},US=function(){u(this,Cs)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Cs)),S(this,Cs,null),this.parent.drawLayer.remove(u(this,An)),S(this,An,null))},hc=function(t=this.parent){u(this,Cs)===null&&({id:Xt(this,Cs)._,clipPathId:Xt(this,pd)._}=t.drawLayer.draw({bbox:u(this,rr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Fa)},rootClass:{highlight:!0,free:u(this,un)},path:{d:u(this,rr).toSVGPath()}},!1,!0),S(this,An,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,un)},bbox:u(this,ns).box,path:{d:u(this,ns).toSVGPath()}},u(this,un))),u(this,gd)&&(u(this,gd).style.clipPath=u(this,pd)))},cr=new WeakSet,Cu=function([t,s,r,i],a){switch(a){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},OL=function(t){qe._keyboardManager.exec(this,t)},g0=function(t){if(!u(this,df))return;const s=window.getSelection();t?s.setPosition(u(this,df),u(this,iv)):s.setPosition(u(this,ov),u(this,lv))},zm=function(){return u(this,un)?this.rotation:0},LL=function(){if(u(this,un))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,a=u(this,La),l=new Float32Array(a.length*8);let c=0;for(const{x:d,y:h,width:f,height:m}of a){const p=d*t+r,x=(1-h)*s+i;l[c]=l[c+4]=p,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=p+f*t,l[c+5]=l[c+7]=x-m*s,c+=8}return l},FL=function(t){return u(this,rr).serialize(t,k(this,Se,zm).call(this))},$L=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},zL=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},BL=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},C(qe,cr),G(qe,"_defaultColor",null),G(qe,"_defaultOpacity",1),G(qe,"_defaultThickness",12),G(qe,"_type","highlight"),G(qe,"_editorType",ye.HIGHLIGHT),G(qe,"_freeHighlightId",-1),G(qe,"_freeHighlight",null),G(qe,"_freeHighlightClipId","");let xy=qe;var vd;class UL{constructor(){C(this,vd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){u(this,vd)[e]=t}toSVGProperties(){const e=u(this,vd);return S(this,vd,Object.create(null)),{root:e}}reset(){S(this,vd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){rt("Not implemented")}}vd=new WeakMap;var ks,ff,Zt,xd,yd,ul,hl,fl,bd,ze,HS,WS,VS,Bm,HL,v0,Um,ku;const ae=class ae extends lt{constructor(t){super(t);C(this,ze);C(this,ks,null);C(this,ff);G(this,"_colorPicker",null);G(this,"_drawId",null);S(this,ff,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(k(this,ze,HS).call(this,t),k(this,ze,Bm).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,a]of Object.entries(s))r.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){rt("Not implemented")}static get typesMap(){rt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(u(ae,Zt).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,a=i[s],l=c=>{var h,f;i.updateProperty(s,c);const d=u(this,ks).updateProperty(s,c);d&&k(this,ze,Um).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&((f=this._colorPicker)==null||f.update(c))};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(u(this,ks).getPathResizingSVGProperties(k(this,ze,v0).call(this)),{bbox:k(this,ze,ku).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(u(this,ks).getPathResizedSVGProperties(k(this,ze,v0).call(this)),{bbox:k(this,ze,ku).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:k(this,ze,ku).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties(u(this,ks).getPathTranslatedSVGProperties(k(this,ze,v0).call(this),this.parentDimensions),{bbox:k(this,ze,ku).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,ff)&&(S(this,ff,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,ze,VS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,ze,Bm).call(this),k(this,ze,Um).call(this,u(this,ks).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,ze,VS).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,ze,Bm).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ae._mergeSVGProperties({bbox:k(this,ze,ku).call(this)},u(this,ks).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,ze,Um).call(this,u(this,ks).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,l]=this.parentDimensions;return this.setDims(this.width*a,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,a){rt("Not implemented")}static startDrawing(t,s,r,i){var b;const{target:a,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=i;if(u(ae,hl)&&u(ae,hl)!==h)return;const{viewport:{rotation:f}}=t,{width:m,height:p}=a.getBoundingClientRect(),x=S(ae,xd,new AbortController),g=t.combinedSignal(x);if(u(ae,ul)||S(ae,ul,d),u(ae,hl)??S(ae,hl,h),window.addEventListener("pointerup",v=>{var y;u(ae,ul)===v.pointerId?this._endDraw(v):(y=u(ae,fl))==null||y.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var y;u(ae,ul)===v.pointerId?this._currentParent.endDrawingSession():(y=u(ae,fl))==null||y.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{u(ae,hl)===v.pointerType&&((u(ae,fl)||S(ae,fl,new Set)).add(v.pointerId),u(ae,Zt).isCancellable()&&(u(ae,Zt).removeLastElement(),u(ae,Zt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",vr,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{v.timeStamp===u(ae,bd)&&Dt(v)},{signal:g}),t.toggleDrawing(),(b=s._editorUndoBar)==null||b.hide(),u(ae,Zt)){t.drawLayer.updateProperties(this._currentDrawId,u(ae,Zt).startNew(l,c,m,p,f));return}s.updateUIForDefaultProperties(this),S(ae,Zt,this.createDrawerInstance(l,c,m,p,f)),S(ae,yd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(ae,yd).toSVGProperties(),u(ae,Zt).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(S(ae,bd,-1),!u(ae,Zt))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(u(ae,ul)===i){if(((a=u(ae,fl))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(ae,Zt).add(s,r)),S(ae,bd,t.timeStamp),Dt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,S(ae,Zt,null),S(ae,yd,null),S(ae,hl,null),S(ae,bd,NaN)),u(ae,xd)&&(u(ae,xd).abort(),S(ae,xd,null),S(ae,ul,NaN),S(ae,fl,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,u(ae,Zt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=u(ae,Zt),i=this._currentDrawId,a=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Fe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Fe.DRAW_STEP),!u(ae,Zt).isEmpty()){const{pageDimensions:[r,i],scale:a}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(ae,Zt).getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:u(ae,yd),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,a,l){rt("Not implemented")}static async deserialize(t,s,r){var f,m;const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=s.viewport,d=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,t),h=await super.deserialize(t,s,r);return h.createDrawingOptions(t),k(f=h,ze,HS).call(f,{drawOutlines:d}),k(m=h,ze,Bm).call(m),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,r]=this.pageTranslation,[i,a]=this.pageDimensions;return u(this,ks).serialize([s,r,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ks=new WeakMap,ff=new WeakMap,Zt=new WeakMap,xd=new WeakMap,yd=new WeakMap,ul=new WeakMap,hl=new WeakMap,fl=new WeakMap,bd=new WeakMap,ze=new WeakSet,HS=function({drawOutlines:t,drawId:s,drawingOptions:r}){S(this,ks,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=k(this,ze,WS).call(this,t,this.parent),k(this,ze,Um).call(this,t.box)},WS=function(t,s){const{id:r}=s.drawLayer.draw(ae._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},VS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Bm=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,ze,WS).call(this,u(this,ks),t)}},HL=function([t,s,r,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[s,1-t,r*(l/a),i*(a/l)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(l/a),i*(a/l)];default:return[t,s,r,i]}},v0=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-s,t,r*(a/l),i*(l/a)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(a/l),i*(l/a)];default:return[t,s,r,i]}},Um=function(t){if([this.x,this.y,this.width,this.height]=k(this,ze,HL).call(this,t),this.div){this.fixAndSetPosition();const[s,r]=this.parentDimensions;this.setDims(this.width*s,this.height*r)}this._onResized()},ku=function(){const{x:t,y:s,width:r,height:i,rotation:a,parentRotation:l,parentDimensions:[c,d]}=this;switch((a*4+l)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(c/d),i*(d/c),r*(c/d)];case 5:return[1-s,t,r*(c/d),i*(d/c)];case 6:return[1-t-i*(d/c),1-s,i*(d/c),r*(c/d)];case 7:return[s-r*(c/d),1-t-i*(d/c),r*(c/d),i*(d/c)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(d/c),s,i*(d/c),r*(c/d)];case 13:return[1-s-r*(c/d),t-i*(d/c),r*(c/d),i*(d/c)];case 14:return[1-t,1-s-r*(c/d),i*(d/c),r*(c/d)];case 15:return[s,1-t,r*(c/d),i*(d/c)];default:return[t,s,r,i]}},G(ae,"_currentDrawId",-1),G(ae,"_currentParent",null),C(ae,Zt,null),C(ae,xd,null),C(ae,yd,null),C(ae,ul,NaN),C(ae,hl,null),C(ae,fl,null),C(ae,bd,NaN),G(ae,"_INNER_MARGIN",3);let yy=ae;var Ci,en,tn,wd,mf,Dn,hn,ar,_d,Sd,Nd,pf,x0;class PG{constructor(e,t,s,r,i,a){C(this,pf);C(this,Ci,new Float64Array(6));C(this,en);C(this,tn);C(this,wd);C(this,mf);C(this,Dn);C(this,hn,"");C(this,ar,0);C(this,_d,new Fv);C(this,Sd);C(this,Nd);S(this,Sd,s),S(this,Nd,r),S(this,wd,i),S(this,mf,a),[e,t]=k(this,pf,x0).call(this,e,t);const l=S(this,en,[NaN,NaN,NaN,NaN,e,t]);S(this,Dn,[e,t]),S(this,tn,[{line:l,points:u(this,Dn)}]),u(this,Ci).set(l,0)}updateProperty(e,t){e==="stroke-width"&&S(this,mf,t)}isEmpty(){return!u(this,tn)||u(this,tn).length===0}isCancellable(){return u(this,Dn).length<=10}add(e,t){[e,t]=k(this,pf,x0).call(this,e,t);const[s,r,i,a]=u(this,Ci).subarray(2,6),l=e-i,c=t-a;return Math.hypot(u(this,Sd)*l,u(this,Nd)*c)<=2?null:(u(this,Dn).push(e,t),isNaN(s)?(u(this,Ci).set([i,a,e,t],2),u(this,en).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Ci)[0])&&u(this,en).splice(6,6),u(this,Ci).set([s,r,i,a,e,t],0),u(this,en).push(...re.createBezierPoints(s,r,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(u(this,Dn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){S(this,Sd,s),S(this,Nd,r),S(this,wd,i),[e,t]=k(this,pf,x0).call(this,e,t);const a=S(this,en,[NaN,NaN,NaN,NaN,e,t]);S(this,Dn,[e,t]);const l=u(this,tn).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),u(this,tn).push({line:a,points:u(this,Dn)}),u(this,Ci).set(a,0),S(this,ar,0),this.toSVGPath(),null}getLastElement(){return u(this,tn).at(-1)}setLastElement(e){return u(this,tn)?(u(this,tn).push(e),S(this,en,e.line),S(this,Dn,e.points),S(this,ar,0),{path:{d:this.toSVGPath()}}):u(this,_d).setLastElement(e)}removeLastElement(){if(!u(this,tn))return u(this,_d).removeLastElement();u(this,tn).pop(),S(this,hn,"");for(let e=0,t=u(this,tn).length;e<t;e++){const{line:s,points:r}=u(this,tn)[e];S(this,en,s),S(this,Dn,r),S(this,ar,0),this.toSVGPath()}return{path:{d:u(this,hn)}}}toSVGPath(){const e=re.svgRound(u(this,en)[4]),t=re.svgRound(u(this,en)[5]);if(u(this,Dn).length===2)return S(this,hn,`${u(this,hn)} M ${e} ${t} Z`),u(this,hn);if(u(this,Dn).length<=6){const r=u(this,hn).lastIndexOf("M");S(this,hn,`${u(this,hn).slice(0,r)} M ${e} ${t}`),S(this,ar,6)}if(u(this,Dn).length===4){const r=re.svgRound(u(this,en)[10]),i=re.svgRound(u(this,en)[11]);return S(this,hn,`${u(this,hn)} L ${r} ${i}`),S(this,ar,12),u(this,hn)}const s=[];u(this,ar)===0&&(s.push(`M ${e} ${t}`),S(this,ar,6));for(let r=u(this,ar),i=u(this,en).length;r<i;r+=6){const[a,l,c,d,h,f]=u(this,en).slice(r,r+6).map(re.svgRound);s.push(`C${a} ${l} ${c} ${d} ${h} ${f}`)}return S(this,hn,u(this,hn)+s.join(" ")),S(this,ar,u(this,en).length),u(this,hn)}getOutlines(e,t,s,r){const i=u(this,tn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,_d).build(u(this,tn),e,t,s,u(this,wd),u(this,mf),r),S(this,Ci,null),S(this,en,null),S(this,tn,null),S(this,hn,null),u(this,_d)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ci=new WeakMap,en=new WeakMap,tn=new WeakMap,wd=new WeakMap,mf=new WeakMap,Dn=new WeakMap,hn=new WeakMap,ar=new WeakMap,_d=new WeakMap,Sd=new WeakMap,Nd=new WeakMap,pf=new WeakSet,x0=function(e,t){return re._normalizePoint(e,t,u(this,Sd),u(this,Nd),u(this,wd))};var On,dv,uv,Ps,ki,Pi,gf,vf,jd,pn,ia,WL,VL,qL;class Fv extends re{constructor(){super(...arguments);C(this,pn);C(this,On);C(this,dv,0);C(this,uv);C(this,Ps);C(this,ki);C(this,Pi);C(this,gf);C(this,vf);C(this,jd)}build(t,s,r,i,a,l,c){S(this,ki,s),S(this,Pi,r),S(this,gf,i),S(this,vf,a),S(this,jd,l),S(this,uv,c??0),S(this,Ps,t),k(this,pn,VL).call(this)}get thickness(){return u(this,jd)}setLastElement(t){return u(this,Ps).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Ps).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of u(this,Ps)){if(t.push(`M${re.svgRound(s[4])} ${re.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${re.svgRound(s[10])} ${re.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[a,l,c,d,h,f]=s.subarray(r,r+6).map(re.svgRound);t.push(`C${a} ${l} ${c} ${d} ${h} ${f}`)}}return t.join("")}serialize([t,s,r,i],a){const l=[],c=[],[d,h,f,m]=k(this,pn,WL).call(this);let p,x,g,b,v,y,_,N,j;switch(u(this,vf)){case 0:j=re._rescale,p=t,x=s+i,g=r,b=-i,v=t+d*r,y=s+(1-h-m)*i,_=t+(d+f)*r,N=s+(1-h)*i;break;case 90:j=re._rescaleAndSwap,p=t,x=s,g=r,b=i,v=t+h*r,y=s+d*i,_=t+(h+m)*r,N=s+(d+f)*i;break;case 180:j=re._rescale,p=t+r,x=s,g=-r,b=i,v=t+(1-d-f)*r,y=s+h*i,_=t+(1-d)*r,N=s+(h+m)*i;break;case 270:j=re._rescaleAndSwap,p=t+r,x=s+i,g=-r,b=-i,v=t+(1-h-m)*r,y=s+(1-d-f)*i,_=t+(1-h)*r,N=s+(1-d)*i;break}for(const{line:A,points:E}of u(this,Ps))l.push(j(A,p,x,g,b,a?new Array(A.length):null)),c.push(j(E,p,x,g,b,a?new Array(E.length):null));return{lines:l,points:c,rect:[v,y,_,N]}}static deserialize(t,s,r,i,a,{paths:{lines:l,points:c},rotation:d,thickness:h}){const f=[];let m,p,x,g,b;switch(d){case 0:b=re._rescale,m=-t/r,p=s/i+1,x=1/r,g=-1/i;break;case 90:b=re._rescaleAndSwap,m=-s/i,p=-t/r,x=1/i,g=1/r;break;case 180:b=re._rescale,m=t/r+1,p=-s/i,x=-1/r,g=1/i;break;case 270:b=re._rescaleAndSwap,m=s/i+1,p=t/r+1,x=-1/i,g=-1/r;break}if(!l){l=[];for(const y of c){const _=y.length;if(_===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(_===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const N=new Float32Array(3*(_-2));l.push(N);let[j,A,E,P]=y.subarray(0,4);N.set([NaN,NaN,NaN,NaN,j,A],0);for(let T=4;T<_;T+=2){const I=y[T],M=y[T+1];N.set(re.createBezierPoints(j,A,E,P,I,M),(T-2)*3),[j,A,E,P]=[E,P,I,M]}}}for(let y=0,_=l.length;y<_;y++)f.push({line:b(l[y].map(N=>N??NaN),m,p,x,g),points:b(c[y].map(N=>N??NaN),m,p,x,g)});const v=new this.prototype.constructor;return v.build(f,r,i,1,d,h,a),v}get box(){return u(this,On)}updateProperty(t,s){return t==="stroke-width"?k(this,pn,qL).call(this,s):null}updateParentDimensions([t,s],r){const[i,a]=k(this,pn,ia).call(this);S(this,ki,t),S(this,Pi,s),S(this,gf,r);const[l,c]=k(this,pn,ia).call(this),d=l-i,h=c-a,f=u(this,On);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(t){return S(this,dv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,On).map(re.svgRound).join(" ")}get defaultProperties(){const[t,s]=u(this,On);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=u(this,On);let r=0,i=0,a=0,l=0,c=0,d=0;switch(u(this,dv)){case 90:i=s/t,a=-t/s,c=t;break;case 180:r=-1,l=-1,c=t,d=s;break;case 270:i=-s/t,a=t/s,d=s;break;default:return""}return`matrix(${r} ${i} ${a} ${l} ${re.svgRound(c)} ${re.svgRound(d)})`}getPathResizingSVGProperties([t,s,r,i]){const[a,l]=k(this,pn,ia).call(this),[c,d,h,f]=u(this,On);if(Math.abs(h-a)<=re.PRECISION||Math.abs(f-l)<=re.PRECISION){const b=t+r/2-(c+h/2),v=s+i/2-(d+f/2);return{path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`,transform:`${this.rotationTransform} translate(${b} ${v})`}}}const m=(r-2*a)/(h-2*a),p=(i-2*l)/(f-2*l),x=h/r,g=f/i;return{path:{"transform-origin":`${re.svgRound(c)} ${re.svgRound(d)}`,transform:`${this.rotationTransform} scale(${x} ${g}) translate(${re.svgRound(a)} ${re.svgRound(l)}) scale(${m} ${p}) translate(${re.svgRound(-a)} ${re.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[a,l]=k(this,pn,ia).call(this),c=u(this,On),[d,h,f,m]=c;if(c[0]=t,c[1]=s,c[2]=r,c[3]=i,Math.abs(f-a)<=re.PRECISION||Math.abs(m-l)<=re.PRECISION){const v=t+r/2-(d+f/2),y=s+i/2-(h+m/2);for(const{line:_,points:N}of u(this,Ps))re._translate(_,v,y,_),re._translate(N,v,y,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(r-2*a)/(f-2*a),x=(i-2*l)/(m-2*l),g=-p*(d+a)+t+a,b=-x*(h+l)+s+l;if(p!==1||x!==1||g!==0||b!==0)for(const{line:v,points:y}of u(this,Ps))re._rescale(v,g,b,p,x,v),re._rescale(y,g,b,p,x,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,a]=r,l=u(this,On),c=t-l[0],d=s-l[1];if(u(this,ki)===i&&u(this,Pi)===a)for(const{line:h,points:f}of u(this,Ps))re._translate(h,c,d,h),re._translate(f,c,d,f);else{const h=u(this,ki)/i,f=u(this,Pi)/a;S(this,ki,i),S(this,Pi,a);for(const{line:m,points:p}of u(this,Ps))re._rescale(m,c,d,h,f,m),re._rescale(p,c,d,h,f,p);l[2]*=h,l[3]*=f}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t)} ${re.svgRound(s)}`}}}get defaultSVGProperties(){const t=u(this,On);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${re.svgRound(t[0])} ${re.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}On=new WeakMap,dv=new WeakMap,uv=new WeakMap,Ps=new WeakMap,ki=new WeakMap,Pi=new WeakMap,gf=new WeakMap,vf=new WeakMap,jd=new WeakMap,pn=new WeakSet,ia=function(t=u(this,jd)){const s=u(this,uv)+t/2*u(this,gf);return u(this,vf)%180===0?[s/u(this,ki),s/u(this,Pi)]:[s/u(this,Pi),s/u(this,ki)]},WL=function(){const[t,s,r,i]=u(this,On),[a,l]=k(this,pn,ia).call(this,0);return[t+a,s+l,r-2*a,i-2*l]},VL=function(){const t=S(this,On,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,Ps)){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)he.pointBoundingBox(i[c],i[c+1],t);continue}let a=i[4],l=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,m,p,x,g]=i.subarray(c,c+6);he.bezierBoundingBox(a,l,h,f,m,p,x,g,t),a=x,l=g}}const[s,r]=k(this,pn,ia).call(this);t[0]=$n(t[0]-s,0,1),t[1]=$n(t[1]-r,0,1),t[2]=$n(t[2]+s,0,1),t[3]=$n(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},qL=function(t){const[s,r]=k(this,pn,ia).call(this);S(this,jd,t);const[i,a]=k(this,pn,ia).call(this),[l,c]=[i-s,a-r],d=u(this,On);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d};class $b extends UL{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:lt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new $b(this._viewParameters);return e.updateAll(this),e}}var By,GL;const Wu=class Wu extends yy{constructor(t){super({...t,name:"inkEditor"});C(this,By);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){lt.initialize(t,s),this._defaultDrawingOptions=new $b(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Te(this,"typesMap",new Map([[Fe.INK_THICKNESS,"stroke-width"],[Fe.INK_COLOR,"stroke"],[Fe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,a){return new PG(t,s,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,a,l){return Fv.deserialize(t,s,r,i,a,l)}static async deserialize(t,s,r){let i=null;if(t instanceof rE){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:f,opacity:m,borderStyle:{rawWidth:p},popupRef:x,contentsObj:g},parent:{page:{pageNumber:b}}}=t;i=t={annotationType:ye.INK,color:Array.from(f),thickness:p,opacity:m,paths:{points:l},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:x,comment:(g==null?void 0:g.str)||null}}const a=await super.deserialize(t,s,r);return a._initialData=i,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new py(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Fe.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=Wu.getDefaultDrawingOptions({stroke:he.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,d={annotationType:ye.INK,color:lt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:s,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!k(this,By,GL).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){const{points:s,rect:r}=this.serializeDraw(!1),i={rect:r,thickness:this._drawingOptions["stroke-width"],points:s};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}};By=new WeakSet,GL=function(t){const{color:s,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==s[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==a},G(Wu,"_type","ink"),G(Wu,"_editorType",ye.INK),G(Wu,"_defaultDrawingOptions",null);let qS=Wu;class GS extends Fv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Cx=8,xm=3;var Ed,Ke,KS,zr,KL,YL,YS,y0,XL,QL,JL,XS,QS,ZL;class Wa{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,a,l,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const f=200,m=h.font=`${s} ${r} ${f}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:x,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:v,fontBoundingBoxDescent:y,width:_}=h.measureText(e),N=1.5,j=Math.ceil(Math.max(Math.abs(p)+Math.abs(x)||0,_)*N),A=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||f,Math.abs(v)+Math.abs(y)||f)*N);d=new OffscreenCanvas(j,A),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=m,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,j,A),h.fillStyle="black",h.fillText(e,j*(N-1)/2,A*(3-N)/2);const E=k(this,Ke,XS).call(this,h.getImageData(0,0,j,A).data),P=k(this,Ke,JL).call(this,E),T=k(this,Ke,QS).call(this,P),I=k(this,Ke,YS).call(this,E,j,A,T);return this.processDrawnLines({lines:{curves:I,width:j,height:A},pageWidth:i,pageHeight:a,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[a,l,c]=k(this,Ke,ZL).call(this,e),[d,h]=k(this,Ke,QL).call(this,a,l,c,Math.hypot(l,c)*u(this,Ed).sigmaSFactor,u(this,Ed).sigmaR,u(this,Ed).kernelSize),f=k(this,Ke,QS).call(this,h),m=k(this,Ke,YS).call(this,d,l,c,f);return this.processDrawnLines({lines:{curves:m,width:l,height:c},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:a,areContours:l}){r%180!==0&&([t,s]=[s,t]);const{curves:c,width:d,height:h}=e,f=e.thickness??0,m=[],p=Math.min(t/d,s/h),x=p/t,g=p/s,b=[];for(const{points:y}of c){const _=a?k(this,Ke,XL).call(this,y):y;if(!_)continue;b.push(_);const N=_.length,j=new Float32Array(N),A=new Float32Array(3*(N===2?2:N-2));if(m.push({line:A,points:j}),N===2){j[0]=_[0]*x,j[1]=_[1]*g,A.set([NaN,NaN,NaN,NaN,j[0],j[1]],0);continue}let[E,P,T,I]=_;E*=x,P*=g,T*=x,I*=g,j.set([E,P,T,I],0),A.set([NaN,NaN,NaN,NaN,E,P],0);for(let M=4;M<N;M+=2){const L=j[M]=_[M]*x,z=j[M+1]=_[M+1]*g;A.set(re.createBezierPoints(E,P,T,I,L,z),(M-2)*3),[E,P,T,I]=[T,I,L,z]}}if(m.length===0)return null;const v=l?new GS:new Fv;return v.build(m,t,s,1,r,l?0:f,i),{outline:v,newCurves:b,areContours:l,thickness:f,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let a=1/0,l=-1/0,c=0;for(const _ of e){c+=_.length;for(let N=2,j=_.length;N<j;N++){const A=_[N]-_[N-2];a=Math.min(a,A),l=Math.max(l,A)}}let d;a>=-128&&l<=127?d=Int8Array:a>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,f=Cx+xm*h,m=new Uint32Array(f);let p=0;m[p++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,m[p++]=0,m[p++]=r,m[p++]=i,m[p++]=t?0:1,m[p++]=Math.max(0,Math.floor(s??0)),m[p++]=h,m[p++]=d.BYTES_PER_ELEMENT;for(const _ of e)m[p++]=_.length-2,m[p++]=_[0],m[p++]=_[1];const x=new CompressionStream("deflate-raw"),g=x.writable.getWriter();await g.ready,g.write(m);const b=d.prototype.constructor;for(const _ of e){const N=new b(_.length-2);for(let j=2,A=_.length;j<A;j++)N[j-2]=_[j]-_[j-2];g.write(N)}g.close();const v=await new Response(x.readable).arrayBuffer(),y=new Uint8Array(v);return eO(y)}static async decompressSignature(e){try{const t=Z7(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,l=0;for await(const _ of s)a||(a=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),a.set(_,l),l+=_.length;const c=new Uint32Array(a.buffer,0,a.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],f=c[3],m=c[4]===0,p=c[5],x=c[6],g=c[7],b=[],v=(Cx+xm*x)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(g){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(a.buffer,v);break}l=0;for(let _=0;_<x;_++){const N=c[xm*_+Cx],j=new Float32Array(N+2);b.push(j);for(let A=0;A<xm-1;A++)j[A]=c[xm*_+Cx+A+1];for(let A=0;A<N;A++)j[A+2]=j[A]+y[l++]}return{areContours:m,thickness:p,outlines:b,width:h,height:f}}catch(t){return be(`decompressSignature: ${t}`),null}}}Ed=new WeakMap,Ke=new WeakSet,KS=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},zr=new WeakMap,KL=function(e,t,s,r,i,a,l){const c=k(this,Ke,KS).call(this,s,r,i,a);for(let d=0;d<8;d++){const h=(-d+c-l+16)%8,f=u(this,zr)[2*h],m=u(this,zr)[2*h+1];if(e[(s+f)*t+(r+m)]!==0)return h}return-1},YL=function(e,t,s,r,i,a,l){const c=k(this,Ke,KS).call(this,s,r,i,a);for(let d=0;d<8;d++){const h=(d+c+l+16)%8,f=u(this,zr)[2*h],m=u(this,zr)[2*h+1];if(e[(s+f)*t+(r+m)]!==0)return h}return-1},YS=function(e,t,s,r){const i=e.length,a=new Int32Array(i);for(let h=0;h<i;h++)a[h]=e[h]<=r?1:0;for(let h=1;h<s-1;h++)a[h*t]=a[h*t+t-1]=0;for(let h=0;h<t;h++)a[h]=a[t*s-1-h]=0;let l=1,c;const d=[];for(let h=1;h<s-1;h++){c=1;for(let f=1;f<t-1;f++){const m=h*t+f,p=a[m];if(p===0)continue;let x=h,g=f;if(p===1&&a[m-1]===0)l+=1,g-=1;else if(p>=1&&a[m+1]===0)l+=1,g+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const b=[f,h],v=g===f+1,y={isHole:v,points:b,id:l,parent:0};d.push(y);let _;for(const M of d)if(M.id===c){_=M;break}_?_.isHole?y.parent=v?_.parent:c:y.parent=v?c:_.parent:y.parent=v?c:0;const N=k(this,Ke,KL).call(this,a,t,h,f,x,g,0);if(N===-1){a[m]=-l,a[m]!==1&&(c=Math.abs(a[m]));continue}let j=u(this,zr)[2*N],A=u(this,zr)[2*N+1];const E=h+j,P=f+A;x=E,g=P;let T=h,I=f;for(;;){const M=k(this,Ke,YL).call(this,a,t,T,I,x,g,1);j=u(this,zr)[2*M],A=u(this,zr)[2*M+1];const L=T+j,z=I+A;b.push(z,L);const $=T*t+I;if(a[$+1]===0?a[$]=-l:a[$]===1&&(a[$]=l),L===h&&z===f&&T===E&&I===P){a[m]!==1&&(c=Math.abs(a[m]));break}else x=T,g=I,T=L,I=z}}}return d},y0=function(e,t,s,r){if(s-t<=4){for(let E=t;E<s-2;E+=2)r.push(e[E],e[E+1]);return}const i=e[t],a=e[t+1],l=e[s-4]-i,c=e[s-3]-a,d=Math.hypot(l,c),h=l/d,f=c/d,m=h*a-f*i,p=c/l,x=1/d,g=Math.atan(p),b=Math.cos(g),v=Math.sin(g),y=x*(Math.abs(b)+Math.abs(v)),_=x*(1-y+y**2),N=Math.max(Math.atan(Math.abs(v+b)*_),Math.atan(Math.abs(v-b)*_));let j=0,A=t;for(let E=t+2;E<s-2;E+=2){const P=Math.abs(m-h*e[E+1]+f*e[E]);P>j&&(A=E,j=P)}j>(d*N)**2?(k(this,Ke,y0).call(this,e,t,A+2,r),k(this,Ke,y0).call(this,e,A,s,r)):r.push(i,a)},XL=function(e){const t=[],s=e.length;return k(this,Ke,y0).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},QL=function(e,t,s,r,i,a){const l=new Float32Array(a**2),c=-2*r**2,d=a>>1;for(let g=0;g<a;g++){const b=(g-d)**2;for(let v=0;v<a;v++)l[g*a+v]=Math.exp((b+(v-d)**2)/c)}const h=new Float32Array(256),f=-2*i**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/f);const m=e.length,p=new Uint8Array(m),x=new Uint32Array(256);for(let g=0;g<s;g++)for(let b=0;b<t;b++){const v=g*t+b,y=e[v];let _=0,N=0;for(let A=0;A<a;A++){const E=g+A-d;if(!(E<0||E>=s))for(let P=0;P<a;P++){const T=b+P-d;if(T<0||T>=t)continue;const I=e[E*t+T],M=l[A*a+P]*h[Math.abs(I-y)];_+=I*M,N+=M}}const j=p[v]=Math.round(_/N);x[j]++}return[p,x]},JL=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},XS=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let l=0,c=s.length;l<c;l++){const d=s[l]=e[l<<2];r=Math.max(r,d),i=Math.min(i,d)}const a=255/(r-i);for(let l=0,c=s.length;l<c;l++)s[l]=(s[l]-i)*a;return s},QS=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(c=>c!==0);let a=i,l=i;for(t=i;t<256;t++){const c=e[t];c>s&&(t-a>r&&(r=t-a,l=t-1),s=c,a=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},ZL=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=u(this,Ed);let a=s,l=r;if(s>i||r>i){let m=s,p=r,x=Math.log2(Math.max(s,r)/i);const g=Math.floor(x);x=x===g?g-1:g;for(let v=0;v<x;v++){a=Math.ceil(m/2),l=Math.ceil(p/2);const y=new OffscreenCanvas(a,l);y.getContext("2d").drawImage(e,0,0,m,p,0,0,a,l),m=a,p=l,e!==t&&e.close(),e=y.transferToImageBitmap()}const b=Math.min(i/a,i/l);a=Math.round(a*b),l=Math.round(l*b)}const d=new OffscreenCanvas(a,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,a,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,a,l);const h=d.getImageData(0,0,a,l).data;return[k(this,Ke,XS).call(this,h),a,l]},C(Wa,Ke),C(Wa,Ed,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),C(Wa,zr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class iE extends UL{constructor(){super(),super.updateProperties({fill:lt._defaultLineColor,"stroke-width":0})}clone(){const e=new iE;return e.updateAll(this),e}}class aE extends $b{constructor(e){super(e),super.updateProperties({stroke:lt._defaultLineColor,"stroke-width":1})}clone(){const e=new aE(this._viewParameters);return e.updateAll(this),e}}var ml,Ti,pl,Ad;const vs=class vs extends yy{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});C(this,ml,!1);C(this,Ti,null);C(this,pl,null);C(this,Ad,null);this._willKeepAspectRatio=!0,S(this,pl,t.signatureData||null),S(this,Ti,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){lt.initialize(t,s),this._defaultDrawingOptions=new iE,this._defaultDrawnSignatureOptions=new aE(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Te(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Ti)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(u(this,pl)){const{lines:i,mustSmooth:a,areContours:l,description:c,uuid:d,heightInPage:h}=u(this,pl),{rawDims:{pageWidth:f,pageHeight:m},rotation:p}=this.parent.viewport,x=Wa.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:p,innerMargin:vs._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(x,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Ti)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){S(this,Ad,t),this.addEditToolbar()}getUuid(){return u(this,Ad)}get description(){return u(this,Ti)}set description(t){S(this,Ti,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:a}=u(this,pl),l=Math.max(i,a),c=Wa.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:r,width:i,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:a,y:l}=this,{outline:c}=S(this,pl,t);S(this,ml,c instanceof GS),this.description=r;let d;u(this,ml)?d=vs.getDefaultDrawingOptions():(d=vs._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[h,f]=this.parentDimensions,[,m]=this.pageDimensions;let p=s/m;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(h*this.width,f*this.height),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Wa.process(t,s,r,i,vs._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Wa.extractContoursFromText(t,s,r,i,a,vs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Wa.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:vs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=vs.getDefaultDrawingOptions():(this._drawingOptions=vs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l={annotationType:ye.SIGNATURE,isSignature:!0,areContours:u(this,ml),color:[0,0,0],thickness:u(this,ml)?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:s,points:r},l.uuid=u(this,Ad),l.isCopy=!0):l.lines=s,u(this,Ti)&&(l.accessibilityData={type:"Figure",alt:u(this,Ti)}),l}static deserializeDraw(t,s,r,i,a,l){return l.areContours?GS.deserialize(t,s,r,i,a,l):Fv.deserialize(t,s,r,i,a,l)}static async deserialize(t,s,r){var a;const i=await super.deserialize(t,s,r);return S(i,ml,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",S(i,Ad,t.uuid),i}};ml=new WeakMap,Ti=new WeakMap,pl=new WeakMap,Ad=new WeakMap,G(vs,"_type","signature"),G(vs,"_editorType",ye.SIGNATURE),G(vs,"_defaultDrawingOptions",null);let JS=vs;var gt,nn,gl,$a,vl,xf,za,Cd,Ri,Ts,yf,Be,Hm,Wm,b0,w0,_0,eN,S0,eF;class ZS extends lt{constructor(t){super({...t,name:"stampEditor"});C(this,Be);C(this,gt,null);C(this,nn,null);C(this,gl,null);C(this,$a,null);C(this,vl,null);C(this,xf,"");C(this,za,null);C(this,Cd,!1);C(this,Ri,null);C(this,Ts,!1);C(this,yf,!1);S(this,$a,t.bitmapUrl),S(this,vl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){lt.initialize(t,s)}static isHandlingMimeForPasting(t){return q_.includes(t)}static paste(t,s){s.pasteEditor({mode:ye.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),s&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;u(this,nn)&&(S(this,gt,null),this._uiManager.imageManager.deleteId(u(this,nn)),(t=u(this,za))==null||t.remove(),S(this,za,null),u(this,Ri)&&(clearTimeout(u(this,Ri)),S(this,Ri,null))),super.remove()}rebuild(){if(!this.parent){u(this,nn)&&k(this,Be,b0).call(this);return}super.rebuild(),this.div!==null&&(u(this,nn)&&u(this,za)===null&&k(this,Be,b0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,gl)||u(this,gt)||u(this,$a)||u(this,vl)||u(this,nn)||u(this,Cd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Cd)||(u(this,gt)?k(this,Be,w0).call(this):k(this,Be,b0).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(S(this,nn,r),i&&S(this,gt,i),S(this,Cd,!1),k(this,Be,w0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Ri)!==null&&clearTimeout(u(this,Ri)),S(this,Ri,setTimeout(()=>{S(this,Ri,null),k(this,Be,eN).call(this)},200))}copyCanvas(t,s,r=!1){var p;t||(t=224);const{width:i,height:a}=u(this,gt),l=new Ki;let c=u(this,gt),d=i,h=a,f=null;if(s){if(i>s||a>s){const P=Math.min(s/i,s/a);d=Math.floor(i*P),h=Math.floor(a*P)}f=document.createElement("canvas");const x=f.width=Math.ceil(d*l.sx),g=f.height=Math.ceil(h*l.sy);u(this,Ts)||(c=k(this,Be,_0).call(this,x,g));const b=f.getContext("2d");b.filter=this._uiManager.hcmFilter;let v="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",y="#42414d");const _=15,N=_*l.sx,j=_*l.sy,A=new OffscreenCanvas(N*2,j*2),E=A.getContext("2d");E.fillStyle=v,E.fillRect(0,0,N*2,j*2),E.fillStyle=y,E.fillRect(0,0,N,j),E.fillRect(N,j,N,j),b.fillStyle=b.createPattern(A,"repeat"),b.fillRect(0,0,x,g),b.drawImage(c,0,0,c.width,c.height,0,0,x,g)}let m=null;if(r){let x,g;if(l.symmetric&&c.width<t&&c.height<t)x=c.width,g=c.height;else if(c=u(this,gt),i>t||a>t){const y=Math.min(t/i,t/a);x=Math.floor(i*y),g=Math.floor(a*y),u(this,Ts)||(c=k(this,Be,_0).call(this,x,g))}const v=new OffscreenCanvas(x,g).getContext("2d",{willReadFrequently:!0});v.drawImage(c,0,0,c.width,c.height,0,0,x,g),m={width:x,height:g,data:v.getImageData(0,0,x,g).data}}return{canvas:f,width:d,height:h,imageData:m}}static async deserialize(t,s,r){var b;let i=null,a=!1;if(t instanceof gL){const{data:{rect:v,rotation:y,id:_,structParent:N,popupRef:j,contentsObj:A},container:E,parent:{page:{pageNumber:P}},canvas:T}=t;let I,M;T?(delete t.canvas,{id:I,bitmap:M}=r.imageManager.getFromCanvas(E.id,T),T.remove()):(a=!0,t._hasNoCanvas=!0);const L=((b=await s._structTree.getAriaAttributes(`${Qj}${_}`))==null?void 0:b.get("aria-label"))||"";i=t={annotationType:ye.STAMP,bitmapId:I,bitmap:M,pageIndex:P-1,rect:v.slice(0),rotation:y,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:L},isSvg:!1,structParent:N,popupRef:j,comment:(A==null?void 0:A.str)||null}}const l=await super.deserialize(t,s,r),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:f,isSvg:m,accessibilityData:p}=t;a?(r.addMissingCanvas(t.id,l),S(l,Cd,!0)):f&&r.imageManager.isValidId(f)?(S(l,nn,f),d&&S(l,gt,d)):S(l,$a,h),S(l,Ts,m);const[x,g]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/g,p&&(l.altTextData=p),l._initialData=i,t.comment&&l.setCommentData(t.comment),S(l,yf,!!i),l}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ye.STAMP,bitmapId:u(this,nn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,Ts),structTreeParentId:this._structTreeParentId};if(this.addComment(r),t)return r.bitmapUrl=k(this,Be,S0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=k(this,Be,eF).call(this,r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,s===null)return r;s.stamps||(s.stamps=new Map);const l=u(this,Ts)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(u(this,nn)))s.stamps.set(u(this,nn),{area:l,serialized:r}),r.bitmap=k(this,Be,S0).call(this,!1);else if(u(this,Ts)){const c=s.stamps.get(u(this,nn));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=k(this,Be,S0).call(this,!1))}return r}renderAnnotationElement(t){const s={rect:this.getRect(0,0)};return this.hasEditedComment&&(s.popup=this.comment),t.updateEdited(s),null}}gt=new WeakMap,nn=new WeakMap,gl=new WeakMap,$a=new WeakMap,vl=new WeakMap,xf=new WeakMap,za=new WeakMap,Cd=new WeakMap,Ri=new WeakMap,Ts=new WeakMap,yf=new WeakMap,Be=new WeakSet,Hm=function(t,s=!1){if(!t){this.remove();return}S(this,gt,t.bitmap),s||(S(this,nn,t.id),S(this,Ts,t.isSvg)),t.file&&S(this,xf,t.file.name),k(this,Be,w0).call(this)},Wm=function(){if(S(this,gl,null),this._uiManager.enableWaiting(!1),!!u(this,za)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},b0=function(){if(u(this,nn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,nn)).then(r=>k(this,Be,Hm).call(this,r,!0)).finally(()=>k(this,Be,Wm).call(this));return}if(u(this,$a)){const r=u(this,$a);S(this,$a,null),this._uiManager.enableWaiting(!0),S(this,gl,this._uiManager.imageManager.getFromUrl(r).then(i=>k(this,Be,Hm).call(this,i)).finally(()=>k(this,Be,Wm).call(this)));return}if(u(this,vl)){const r=u(this,vl);S(this,vl,null),this._uiManager.enableWaiting(!0),S(this,gl,this._uiManager.imageManager.getFromFile(r).then(i=>k(this,Be,Hm).call(this,i)).finally(()=>k(this,Be,Wm).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=q_.join(",");const s=this._uiManager._signal;S(this,gl,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Be,Hm).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>k(this,Be,Wm).call(this))),t.click()},w0=function(){var f;const{div:t}=this;let{width:s,height:r}=u(this,gt);const[i,a]=this.pageDimensions,l=.75;if(this.width)s=this.width*i,r=this.height*a;else if(s>l*i||r>l*a){const m=Math.min(l*i/s,l*a/r);s*=m,r*=m}const[c,d]=this.parentDimensions;this.setDims(s*c/i,r*d/a),this._uiManager.enableWaiting(!1);const h=S(this,za,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=s/i,this.height=r/a,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Be,eN).call(this),u(this,yf)||(this.parent.addUndoableEditor(this),S(this,yf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,xf)&&this.div.setAttribute("aria-description",u(this,xf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},_0=function(t,s){const{width:r,height:i}=u(this,gt);let a=r,l=i,c=u(this,gt);for(;a>2*t||l>2*s;){const d=a,h=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(a,l);f.getContext("2d").drawImage(c,0,0,d,h,0,0,a,l),c=f.transferToImageBitmap()}return c},eN=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,a=new Ki,l=Math.ceil(r*t*a.sx),c=Math.ceil(i*s*a.sy),d=u(this,za);if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=u(this,Ts)?u(this,gt):k(this,Be,_0).call(this,l,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)},S0=function(t){if(t){if(u(this,Ts)){const i=this._uiManager.imageManager.getSvgUrl(u(this,nn));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=u(this,gt),s.getContext("2d").drawImage(u(this,gt),0,0),s.toDataURL()}if(u(this,Ts)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*Ul.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Ul.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(u(this,gt),0,0,u(this,gt).width,u(this,gt).height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(u(this,gt))},eF=function(t){var l;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,a=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},G(ZS,"_type","stamp"),G(ZS,"_editorType",ye.STAMP);var kd,bf,Mi,xl,Ba,Rs,yl,wf,Pd,Br,Ua,sn,Ha,bl,_f,de,wl,vt,tF,li,nN,sN,N0;const Ar=class Ar{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:a,drawLayer:l,textLayer:c,viewport:d,l10n:h}){C(this,vt);C(this,kd);C(this,bf,!1);C(this,Mi,null);C(this,xl,null);C(this,Ba,null);C(this,Rs,new Map);C(this,yl,!1);C(this,wf,!1);C(this,Pd,!1);C(this,Br,null);C(this,Ua,null);C(this,sn,null);C(this,Ha,null);C(this,bl,null);C(this,_f,-1);C(this,de);const f=[...u(Ar,wl).values()];if(!Ar._initialized){Ar._initialized=!0;for(const m of f)m.initialize(h,e)}e.registerEditorTypes(f),S(this,de,e),this.pageIndex=t,this.div=s,S(this,kd,i),S(this,Mi,a),this.viewport=d,S(this,sn,c),this.drawLayer=l,this._structTree=r,u(this,de).addLayer(this)}get isEmpty(){return u(this,Rs).size===0}get isInvisible(){return this.isEmpty&&u(this,de).getMode()===ye.NONE}updateToolbar(e){u(this,de).updateToolbar(e)}updateMode(e=u(this,de).getMode()){switch(k(this,vt,N0).call(this),e){case ye.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ye.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ye.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of u(Ar,wl).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,sn))==null?void 0:t.div)}setEditingState(e){u(this,de).setEditingState(e)}addCommands(e){u(this,de).addCommands(e)}cleanUndoStack(e){u(this,de).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Mi))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;S(this,Pd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(s=u(this,bl))==null||s.abort(),S(this,bl,null);const e=new Set;for(const r of u(this,Rs).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(u(this,de).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!u(this,Mi)){S(this,Pd,!1);return}const t=u(this,Mi).getEditableAnnotations();for(const r of t){if(r.hide(),u(this,de).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}S(this,Pd,!1)}disable(){var r;if(S(this,wf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),u(this,sn)&&!u(this,bl)){S(this,bl,new AbortController);const i=u(this,de).combinedSignal(u(this,bl));u(this,sn).div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:d,timeStamp:h}=a,f=u(this,_f);if(h-f>500){S(this,_f,h);return}S(this,_f,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const p=document.elementsFromPoint(c,d);if(m.toggle("getElements",!1),!this.div.contains(p[0]))return;let x;const g=new RegExp(`^${YD}[0-9]+$`);for(const v of p)if(g.test(v.id)){x=v.id;break}if(!x)return;const b=u(this,Rs).get(x);(b==null?void 0:b.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),b.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of u(this,Rs).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(u(this,Mi)){const i=u(this,Mi).getEditableAnnotations();for(const a of i){const{id:l}=a.data;if(u(this,de).isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let c=t.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(l),c&&(u(this,de).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}k(this,vt,N0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const i of u(Ar,wl).values())s.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,wf,!1)}getEditableAnnotation(e){var t;return((t=u(this,Mi))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,de).getActive()!==e&&u(this,de).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,sn))!=null&&e.div&&!u(this,Ha)){S(this,Ha,new AbortController);const t=u(this,de).combinedSignal(u(this,Ha));u(this,sn).div.addEventListener("pointerdown",k(this,vt,tF).bind(this),{signal:t}),u(this,sn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,sn))!=null&&e.div&&u(this,Ha)&&(u(this,Ha).abort(),S(this,Ha,null),u(this,sn).div.classList.remove("highlighting"))}enableClick(){if(u(this,xl))return;S(this,xl,new AbortController);const e=u(this,de).combinedSignal(u(this,xl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,xl))==null||e.abort(),S(this,xl,null)}attach(e){u(this,Rs).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,de).isDeletedAnnotationElement(t)&&u(this,de).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Rs).delete(e.id),(t=u(this,kd))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,wf)&&e.annotationElementId&&u(this,de).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,de).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,de).addDeletedAnnotationElement(e.annotationElementId),lt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,de).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Pd)),u(this,de).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Ba)&&(e._focusEventsAllowed=!1,S(this,Ba,setTimeout(()=>{S(this,Ba,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,de)._signal}),t.focus())},0))),e._structTreeParentId=(s=u(this,kd))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return u(this,de).getId()}combinedSignal(e){return u(this,de).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,vt,li))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,de).updateMode(e.mode);const{offsetX:s,offsetY:r}=k(this,vt,sN).call(this),i=this.getNextId(),a=k(this,vt,nN).call(this,{parent:this,id:i,x:s,y:r,uiManager:u(this,de),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=u(Ar,wl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,de)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=k(this,vt,nN).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,de),isCentered:t,...s});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(k(this,vt,sN).call(this),!0,e)}setSelected(e){u(this,de).setSelected(e)}toggleSelected(e){u(this,de).toggleSelected(e)}unselect(e){u(this,de).unselect(e)}pointerup(e){var r;const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,yl)||(S(this,yl,!1),(r=u(this,vt,li))!=null&&r.isDrawer&&u(this,vt,li).supportMultipleDrawings))return;if(!u(this,bf)){S(this,bf,!0);return}const s=u(this,de).getMode();if(s===ye.STAMP||s===ye.SIGNATURE){u(this,de).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(u(this,de).getMode()===ye.HIGHLIGHT&&this.enableTextSelection(),u(this,yl)){S(this,yl,!1);return}const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(S(this,yl,!0),(r=u(this,vt,li))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=u(this,de).getActive();S(this,bf,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,Br)){u(this,vt,li).startDrawing(this,u(this,de),!1,e);return}u(this,de).setCurrentDrawingSession(this),S(this,Br,new AbortController);const t=u(this,de).combinedSignal(u(this,Br));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(S(this,Ua,null),this.commitOrRemove())},{signal:t}),u(this,vt,li).startDrawing(this,u(this,de),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&S(this,Ua,t);return}u(this,Ua)&&setTimeout(()=>{var t;(t=u(this,Ua))==null||t.focus(),S(this,Ua,null)},0)}endDrawingSession(e=!1){return u(this,Br)?(u(this,de).setCurrentDrawingSession(null),u(this,Br).abort(),S(this,Br,null),S(this,Ua,null),u(this,vt,li).endDrawing(e)):null}findNewParent(e,t,s){const r=u(this,de).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return u(this,Br)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Br)&&u(this,vt,li).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,de).getActive())==null?void 0:e.parent)===this&&(u(this,de).commitOrRemove(),u(this,de).setActiveEditor(null)),u(this,Ba)&&(clearTimeout(u(this,Ba)),S(this,Ba,null));for(const s of u(this,Rs).values())(t=u(this,kd))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,u(this,Rs).clear(),u(this,de).removeLayer(this)}render({viewport:e}){this.viewport=e,Gd(this.div,e);for(const t of u(this,de).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,de).commitOrRemove(),k(this,vt,N0).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Gd(this.div,{rotation:s}),t!==s)for(const r of u(this,Rs).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,de).viewParameters.realScale}};kd=new WeakMap,bf=new WeakMap,Mi=new WeakMap,xl=new WeakMap,Ba=new WeakMap,Rs=new WeakMap,yl=new WeakMap,wf=new WeakMap,Pd=new WeakMap,Br=new WeakMap,Ua=new WeakMap,sn=new WeakMap,Ha=new WeakMap,bl=new WeakMap,_f=new WeakMap,de=new WeakMap,wl=new WeakMap,vt=new WeakSet,tF=function(e){u(this,de).unselectAll();const{target:t}=e;if(t===u(this,sn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,sn).div.contains(t)){const{isMac:s}=xn.platform;if(e.button!==0||e.ctrlKey&&s)return;u(this,de).showAllEditors("highlight",!0,!0),u(this,sn).div.classList.add("free"),this.toggleDrawing(),xy.startHighlighting(this,u(this,de).direction==="ltr",{target:u(this,sn).div,x:e.x,y:e.y}),u(this,sn).div.addEventListener("pointerup",()=>{u(this,sn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,de)._signal}),e.preventDefault()}},li=function(){return u(Ar,wl).get(u(this,de).getMode())},nN=function(e){const t=u(this,vt,li);return t?new t.prototype.constructor(e):null},sN=function(){const{x:e,y:t,width:s,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+r),d=(i+l)/2-e,h=(a+c)/2-t,[f,m]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:f,offsetY:m}},N0=function(){for(const e of u(this,Rs).values())e.isEmpty()&&e.remove()},G(Ar,"_initialized",!1),C(Ar,wl,new Map([OS,qS,ZS,xy,JS].map(e=>[e._editorType,e])));let tN=Ar;var Ur,Ln,Td,hv,Uy,nF,Xi,iN,sF,aN;const Ht=class Ht{constructor({pageIndex:e}){C(this,Xi);C(this,Ur,null);C(this,Ln,new Map);C(this,Td,new Map);this.pageIndex=e}setParent(e){if(!u(this,Ur)){S(this,Ur,e);return}if(u(this,Ur)!==e){if(u(this,Ln).size>0)for(const t of u(this,Ln).values())t.remove(),e.append(t);S(this,Ur,e)}}static get _svgFactory(){return Te(this,"_svgFactory",new gy)}draw(e,t=!1,s=!1){const r=Xt(Ht,hv)._++,i=k(this,Xi,iN).call(this),a=Ht._svgFactory.createElement("defs");i.append(a);const l=Ht._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Td).set(r,l);const d=s?k(this,Xi,sF).call(this,a,c):null,h=Ht._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(i,e),u(this,Ln).set(r,i),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const s=Xt(Ht,hv)._++,r=k(this,Xi,iN).call(this),i=Ht._svgFactory.createElement("defs");r.append(i);const a=Ht._svgFactory.createElement("path");i.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const f=Ht._svgFactory.createElement("mask");i.append(f),c=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const m=Ht._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const p=Ht._svgFactory.createElement("use");f.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const d=Ht._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),u(this,Ln).set(s,r),s}finalizeDraw(e,t){u(this,Td).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:r,rootClass:i,path:a}=t,l=typeof e=="number"?u(this,Ln).get(e):e;if(l){if(s&&k(this,Xi,aN).call(this,l,s),r&&k(c=Ht,Uy,nF).call(c,l,r),i){const{classList:d}=l;for(const[h,f]of Object.entries(i))d.toggle(h,f)}if(a){const h=l.firstChild.firstChild;k(this,Xi,aN).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const s=u(this,Ln).get(e);s&&(u(t,Ur).append(s),u(this,Ln).delete(e),u(t,Ln).set(e,s))}remove(e){u(this,Td).delete(e),u(this,Ur)!==null&&(u(this,Ln).get(e).remove(),u(this,Ln).delete(e))}destroy(){S(this,Ur,null);for(const e of u(this,Ln).values())e.remove();u(this,Ln).clear(),u(this,Td).clear()}};Ur=new WeakMap,Ln=new WeakMap,Td=new WeakMap,hv=new WeakMap,Uy=new WeakSet,nF=function(e,[t,s,r,i]){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*i}%`},Xi=new WeakSet,iN=function(){const e=Ht._svgFactory.create(1,1,!0);return u(this,Ur).append(e),e.setAttribute("aria-hidden",!0),e},sF=function(e,t){const s=Ht._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Ht._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},aN=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},C(Ht,Uy),C(Ht,hv,0);let rN=Ht;globalThis._pdfjsTestingUtils={HighlightOutliner:FS};globalThis.pdfjsLib={AbortException:Bl,AnnotationEditorLayer:tN,AnnotationEditorParamsType:Fe,AnnotationEditorType:ye,AnnotationEditorUIManager:Kd,AnnotationLayer:MS,AnnotationMode:Co,AnnotationType:It,build:lG,ColorPicker:my,createValidAbsoluteUrl:XD,DOMSVGFactory:gy,DrawLayer:rN,FeatureTest:xn,fetchData:Iv,getDocument:eL,getFilenameFromUrl:eq,getPdfFilenameFromUrl:tq,getRGB:Lb,getUuid:ZD,getXfaPageViewport:sq,GlobalWorkerOptions:Oi,ImageKind:Kx,InvalidPDFException:W_,isDataScheme:Ob,isPdfFile:Zj,isValidExplicitDest:mq,MathClamp:$n,noContextMenu:vr,normalizeUnicode:Q7,OPS:cy,OutputScale:Ki,PasswordResponses:U7,PDFDataRangeTransport:tL,PDFDateString:uy,PDFWorker:Ip,PermissionFlag:B7,PixelsPerInch:Ul,RenderingCancelledException:Jj,ResponseException:dy,setLayerDimensions:Gd,shadow:Te,SignatureExtractor:Wa,stopEvent:Dt,SupportedImageMimeTypes:q_,TextLayer:Rp,TouchManager:fy,updateUrlHash:QD,Util:he,VerbosityLevel:Mb,version:oG,XfaLayer:iL};Oi.workerSrc="";const TG=()=>{const[n,e]=w.useState(!1),t=async a=>{try{const l=await a.arrayBuffer(),d=await eL(l).promise;let h="";for(let f=1;f<=d.numPages;f++){const x=(await(await d.getPage(f)).getTextContent()).items.map(g=>g.str??"").join(" ");h+=x+`
`}return h}catch(l){throw console.error("PDF extraction error:",l),new Error("Failed to extract text from PDF")}},s=a=>{const l=a.split(`
`).map(p=>p.trim()).filter(Boolean),c=[];let d="";const h=p=>/^(Basis|Modul)\s+.+$/i.test(p),f=p=>/^\d+$/.test(p);let m=0;for(;m<l.length;){const p=l[m];if(p.startsWith("Stand:")||/SIWF|Seite\s+\d+|Erfasste Prozeduren/i.test(p)){m++;continue}if(h(p)){d=p,m++;continue}if(d&&!f(p)){const x=p,g=[];let b=m+1;for(;b<l.length&&b<m+10;){const v=l[b];if(f(v)){g.push(parseInt(v)),b++;continue}if(h(v)||!f(v))break;b++}if(g.length>0){const v=g[0]||0,y=g[1]||0,_=g[2]||0,N=g[3]||0,j=g[4]||y+_+N;c.push({proc_name:x,module_name:d,minimum:v,responsible:y,instructing:_,assistant:N,total:j}),m=b;continue}}m++}return c},r=async a=>{const{data:{user:l}}=await te.auth.getUser();if(!l)throw new Error("Not authenticated");const{data:c,error:d}=await te.from("import_runs").insert({user_id:l.id,pdf_filename:a,source:"client_ai_parse",status:"running"}).select().single();if(d)throw d;return c};return{processFile:async a=>{e(!0);try{const l=await t(a),c=s(l),d=await r(a.name),h=c.map(f=>te.from("import_procedure_staging").insert({run_id:d.id,proc_name:f.proc_name,module_name:f.module_name,minimum:f.minimum,responsible:f.responsible,instructing:f.instructing,assistant:f.assistant,total:f.total,status:"pending"}));return await Promise.all(h),{success:!0,runId:d.id,summary:{filename:a.name,totalProcedures:c.length,modules:[],matched:0,needsReview:c.length},stagingData:c}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Processing failed"}}finally{e(!1)}},isProcessing:n}},RG=({open:n,onOpenChange:e,onSuccess:t})=>{const[s,r]=w.useState(!1),[i,a]=w.useState(0),[l,c]=w.useState(null),[d,h]=w.useState(!1),[f,m]=w.useState(!1),{toast:p}=ij(),{processFile:x,isProcessing:g}=TG(),b=P=>{P.preventDefault(),P.stopPropagation(),P.type==="dragenter"||P.type==="dragover"?h(!0):P.type==="dragleave"&&h(!1)},v=P=>{P.preventDefault(),P.stopPropagation(),h(!1),P.dataTransfer.files&&P.dataTransfer.files[0]&&_(P.dataTransfer.files[0])},y=P=>{P.target.files&&P.target.files[0]&&_(P.target.files[0])},_=async P=>{if(P.type!=="application/pdf"){p({title:"Ungültiger Dateityp",description:"Bitte wählen Sie eine PDF-Datei aus.",variant:"destructive"});return}r(!0),a(0),c(null);try{const T=setInterval(()=>{a(M=>M<90?M+15:90)},200),I=await x(P);clearInterval(T),a(100),c(I),I.success&&I.summary?(m(!0),p({title:"PDF erfolgreich analysiert (AI)",description:`${I.summary.totalProcedures} Prozeduren erkannt.`})):p({title:"Fehler beim Verarbeiten",description:I.error||"Unbekannter Fehler",variant:"destructive"})}catch(T){p({title:"Verarbeitung fehlgeschlagen",description:T instanceof Error?T.message:"Unbekannter Fehler",variant:"destructive"})}finally{r(!1)}},N=()=>{a(0),c(null),r(!1),m(!1)},j=()=>{N(),e(!1)},A=()=>{m(!1),N()},E=()=>{t==null||t(),j()};return f&&(l!=null&&l.success)&&l.runId&&l.summary&&l.stagingData?o.jsx(z7,{runId:l.runId,summary:l.summary,stagingData:l.stagingData,onClose:A,onImportComplete:E}):o.jsx(kv,{open:n,onOpenChange:j,children:o.jsxs(Jf,{className:"sm:max-w-md",children:[o.jsx(Zf,{children:o.jsxs(em,{className:"flex items-center gap-2",children:[o.jsx(to,{className:"h-5 w-5"}),"FMH eLogbuch PDF Upload"]})}),o.jsxs("div",{className:"space-y-4",children:[!l&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`
                  border-2 border-dashed rounded-lg p-8 text-center transition-colors
                  ${d?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}
                  ${s?"pointer-events-none opacity-50":"cursor-pointer"}
                `,onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:v,onClick:()=>{var P;s||(P=document.getElementById("pdf-upload"))==null||P.click()},children:[o.jsx(cb,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),o.jsx("p",{className:"text-sm font-medium mb-2",children:"PDF hier ablegen oder klicken zum Auswählen"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützt: FMH eLogbuch PDF-Exporte"}),o.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",className:"hidden",onChange:y,disabled:s})]}),s&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:"PDF wird verarbeitet..."}),o.jsxs("span",{children:[i,"%"]})]}),o.jsx($l,{value:i,className:"w-full"})]})]}),l&&!l.success&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive border border-destructive/20",children:[o.jsx(N$,{className:"h-5 w-5"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium",children:"Fehler beim Verarbeiten"}),o.jsx("p",{className:"mt-1 text-sm",children:l.error})]})]}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx(q,{variant:"outline",onClick:N,children:"Erneut versuchen"}),o.jsx(q,{onClick:j,children:"Schließen"})]})]})]})]})})};function MG(n,e){return w.useReducer((t,s)=>e[t][s]??t,n)}var oE="ScrollArea",[rF,WQ]=si(oE),[IG,yr]=rF(oE),iF=w.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:r,scrollHideDelay:i=600,...a}=n,[l,c]=w.useState(null),[d,h]=w.useState(null),[f,m]=w.useState(null),[p,x]=w.useState(null),[g,b]=w.useState(null),[v,y]=w.useState(0),[_,N]=w.useState(0),[j,A]=w.useState(!1),[E,P]=w.useState(!1),T=Ve(e,M=>c(M)),I=xb(r);return o.jsx(IG,{scope:t,type:s,dir:I,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:h,content:f,onContentChange:m,scrollbarX:p,onScrollbarXChange:x,scrollbarXEnabled:j,onScrollbarXEnabledChange:A,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:E,onScrollbarYEnabledChange:P,onCornerWidthChange:y,onCornerHeightChange:N,children:o.jsx(le.div,{dir:I,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...n.style}})})});iF.displayName=oE;var aF="ScrollAreaViewport",oF=w.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:s,nonce:r,...i}=n,a=yr(aF,t),l=w.useRef(null),c=Ve(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(le.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});oF.displayName=aF;var Ji="ScrollAreaScrollbar",lE=w.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=yr(Ji,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=r,l=n.orientation==="horizontal";return w.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),r.type==="hover"?o.jsx(DG,{...s,ref:e,forceMount:t}):r.type==="scroll"?o.jsx(OG,{...s,ref:e,forceMount:t}):r.type==="auto"?o.jsx(lF,{...s,ref:e,forceMount:t}):r.type==="always"?o.jsx(cE,{...s,ref:e}):null});lE.displayName=Ji;var DG=w.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=yr(Ji,n.__scopeScrollArea),[i,a]=w.useState(!1);return w.useEffect(()=>{const l=r.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),a(!0)},h=()=>{c=window.setTimeout(()=>a(!1),r.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[r.scrollArea,r.scrollHideDelay]),o.jsx(xr,{present:t||i,children:o.jsx(lF,{"data-state":i?"visible":"hidden",...s,ref:e})})}),OG=w.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=yr(Ji,n.__scopeScrollArea),i=n.orientation==="horizontal",a=Bb(()=>c("SCROLL_END"),100),[l,c]=MG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),r.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,r.scrollHideDelay,c]),w.useEffect(()=>{const d=r.viewport,h=i?"scrollLeft":"scrollTop";if(d){let f=d[h];const m=()=>{const p=d[h];f!==p&&(c("SCROLL"),a()),f=p};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[r.viewport,i,c,a]),o.jsx(xr,{present:t||l!=="hidden",children:o.jsx(cE,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:fe(n.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:fe(n.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),lF=w.forwardRef((n,e)=>{const t=yr(Ji,n.__scopeScrollArea),{forceMount:s,...r}=n,[i,a]=w.useState(!1),l=n.orientation==="horizontal",c=Bb(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?d:h)}},10);return Ff(t.viewport,c),Ff(t.content,c),o.jsx(xr,{present:s||i,children:o.jsx(cE,{"data-state":i?"visible":"hidden",...r,ref:e})})}),cE=w.forwardRef((n,e)=>{const{orientation:t="vertical",...s}=n,r=yr(Ji,n.__scopeScrollArea),i=w.useRef(null),a=w.useRef(0),[l,c]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=fF(l.viewport,l.content),h={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function f(m,p){return UG(m,a.current,l,p)}return t==="horizontal"?o.jsx(LG,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollLeft,p=Mk(m,l,r.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollLeft=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollLeft=f(m,r.dir))}}):t==="vertical"?o.jsx(FG,{...h,ref:e,onThumbPositionChange:()=>{if(r.viewport&&i.current){const m=r.viewport.scrollTop,p=Mk(m,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:m=>{r.viewport&&(r.viewport.scrollTop=m)},onDragScroll:m=>{r.viewport&&(r.viewport.scrollTop=f(m))}}):null}),LG=w.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...r}=n,i=yr(Ji,n.__scopeScrollArea),[a,l]=w.useState(),c=w.useRef(null),d=Ve(e,c,i.onScrollbarXChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(dF,{"data-orientation":"horizontal",...r,ref:d,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":zb(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;n.onWheelScroll(m),pF(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:wy(a.paddingLeft),paddingEnd:wy(a.paddingRight)}})}})}),FG=w.forwardRef((n,e)=>{const{sizes:t,onSizesChange:s,...r}=n,i=yr(Ji,n.__scopeScrollArea),[a,l]=w.useState(),c=w.useRef(null),d=Ve(e,c,i.onScrollbarYChange);return w.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(dF,{"data-orientation":"vertical",...r,ref:d,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":zb(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;n.onWheelScroll(m),pF(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:wy(a.paddingTop),paddingEnd:wy(a.paddingBottom)}})}})}),[$G,cF]=rF(Ji),dF=w.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:r,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...m}=n,p=yr(Ji,t),[x,g]=w.useState(null),b=Ve(e,T=>g(T)),v=w.useRef(null),y=w.useRef(""),_=p.viewport,N=s.content-s.viewport,j=Lt(h),A=Lt(c),E=Bb(f,10);function P(T){if(v.current){const I=T.clientX-v.current.left,M=T.clientY-v.current.top;d({x:I,y:M})}}return w.useEffect(()=>{const T=I=>{const M=I.target;(x==null?void 0:x.contains(M))&&j(I,N)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[_,x,N,j]),w.useEffect(A,[s,A]),Ff(x,E),Ff(p.content,E),o.jsx($G,{scope:t,scrollbar:x,hasThumb:r,onThumbChange:Lt(i),onThumbPointerUp:Lt(a),onThumbPositionChange:A,onThumbPointerDown:Lt(l),children:o.jsx(le.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:fe(n.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),v.current=x.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),P(T))}),onPointerMove:fe(n.onPointerMove,P),onPointerUp:fe(n.onPointerUp,T=>{const I=T.target;I.hasPointerCapture(T.pointerId)&&I.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),by="ScrollAreaThumb",uF=w.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=cF(by,n.__scopeScrollArea);return o.jsx(xr,{present:t||r.hasThumb,children:o.jsx(zG,{ref:e,...s})})}),zG=w.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:s,...r}=n,i=yr(by,t),a=cF(by,t),{onThumbPositionChange:l}=a,c=Ve(e,f=>a.onThumbChange(f)),d=w.useRef(void 0),h=Bb(()=>{d.current&&(d.current(),d.current=void 0)},100);return w.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!d.current){const p=HG(f,l);d.current=p,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,l]),o.jsx(le.div,{"data-state":a.hasThumb?"visible":"hidden",...r,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:fe(n.onPointerDownCapture,f=>{const p=f.target.getBoundingClientRect(),x=f.clientX-p.left,g=f.clientY-p.top;a.onThumbPointerDown({x,y:g})}),onPointerUp:fe(n.onPointerUp,a.onThumbPointerUp)})});uF.displayName=by;var dE="ScrollAreaCorner",hF=w.forwardRef((n,e)=>{const t=yr(dE,n.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?o.jsx(BG,{...n,ref:e}):null});hF.displayName=dE;var BG=w.forwardRef((n,e)=>{const{__scopeScrollArea:t,...s}=n,r=yr(dE,t),[i,a]=w.useState(0),[l,c]=w.useState(0),d=!!(i&&l);return Ff(r.scrollbarX,()=>{var f;const h=((f=r.scrollbarX)==null?void 0:f.offsetHeight)||0;r.onCornerHeightChange(h),c(h)}),Ff(r.scrollbarY,()=>{var f;const h=((f=r.scrollbarY)==null?void 0:f.offsetWidth)||0;r.onCornerWidthChange(h),a(h)}),d?o.jsx(le.div,{...s,ref:e,style:{width:i,height:l,position:"absolute",right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function wy(n){return n?parseInt(n,10):0}function fF(n,e){const t=n/e;return isNaN(t)?0:t}function zb(n){const e=fF(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,s=(n.scrollbar.size-t)*e;return Math.max(s,18)}function UG(n,e,t,s="ltr"){const r=zb(t),i=r/2,a=e||i,l=r-a,c=t.scrollbar.paddingStart+a,d=t.scrollbar.size-t.scrollbar.paddingEnd-l,h=t.content-t.viewport,f=s==="ltr"?[0,h]:[h*-1,0];return mF([c,d],f)(n)}function Mk(n,e,t="ltr"){const s=zb(e),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-r,a=e.content-e.viewport,l=i-s,c=t==="ltr"?[0,a]:[a*-1,0],d=T_(n,c);return mF([0,a],[0,l])(d)}function mF(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(n[1]-n[0]);return e[0]+s*(t-n[0])}}function pF(n,e){return n>0&&n<e}var HG=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},s=0;return function r(){const i={left:n.scrollLeft,top:n.scrollTop},a=t.left!==i.left,l=t.top!==i.top;(a||l)&&e(),t=i,s=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(s)};function Bb(n,e){const t=Lt(n),s=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(s.current),[]),w.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function Ff(n,e){const t=Lt(e);Tt(()=>{let s=0;if(n){const r=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return r.observe(n),()=>{window.cancelAnimationFrame(s),r.unobserve(n)}}},[n,t])}var gF=iF,WG=oF,VG=hF;const uE=w.forwardRef(({className:n,children:e,...t},s)=>o.jsxs(gF,{ref:s,className:ne("relative overflow-hidden",n),...t,children:[o.jsx(WG,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(vF,{}),o.jsx(VG,{})]}));uE.displayName=gF.displayName;const vF=w.forwardRef(({className:n,orientation:e="vertical",...t},s)=>o.jsx(lE,{ref:s,orientation:e,className:ne("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:o.jsx(uF,{className:"relative flex-1 rounded-full bg-border"})}));vF.displayName=lE.displayName;const qG=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:s}=Ql(),[r,i]=w.useState({}),[a,l]=w.useState({});w.useState(new Date().toLocaleDateString("de-CH"));const[c,d]=w.useState({name:"Sami Zacharia Hosari",id:"175214",institution:"USZ"}),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[x,g]=w.useState([]),[b,v]=w.useState(5),y=w.useCallback(async()=>{p(!0);try{if(s){const{data:M}=await te.from("profiles").select("pgy_level").eq("user_id",s.id).single();M!=null&&M.pgy_level&&v(M.pgy_level)}const{data:A,error:E}=await te.from("procedure_categories").select("*").in("key",["basis_notfallchirurgie","basis_allgemeinchirurgie","viszeralchirurgie","traumatologie","kombination"]).order("sort_index"),{data:P,error:T}=await te.from("procedures").select("*").eq("active",!0).order("code");if(T){console.error("Error loading procedures:",T),xe.error("Fehler beim Laden der Prozeduren");return}g(P||[]);const I={};A==null||A.forEach(M=>{const L=(P==null?void 0:P.filter(z=>z.category_id===M.id))||[];I[M.key]={id:M.id,key:M.key,title:M.title_de,totalMinimum:M.minimum_required||0,totalCount:0,procedures:L.map(z=>{var $;return{id:z.id,name:z.title_de,minimum:(($=z.min_required_by_pgy)==null?void 0:$[`pgy${b}`])||0,verantwortlich:0,instruierend:0,assistent:0,total:0}})}}),i(I),l(I),s&&await _(I)}catch(A){console.error("Error loading modules and procedures:",A),xe.error("Fehler beim Laden der Daten")}finally{p(!1)}},[s,b,_]);w.useEffect(()=>{n&&y()},[n,y]),w.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[n]),w.useEffect(()=>{if(s){const{user_metadata:A}=s;A!=null&&A.full_name&&d(E=>({...E,name:A.full_name,institution:A.institution||"USZ"}))}},[s]);const _=w.useCallback(async A=>{if(s)try{console.log("🔍 FMHManualEntry - Loading data for user ID:",s.id);const{data:E,error:P}=await te.from("procedure_logs").select(`
          id,
          procedure_id,
          role_in_surgery,
          performed_date
        `).eq("user_id",s.id).gte("performed_date",new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0]);if(P){console.error("Error loading existing data:",P);return}console.log("📊 FMHManualEntry - Loaded",(E==null?void 0:E.length)||0,"procedure logs for user",s.id);const T={};E==null||E.forEach(L=>{T[L.procedure_id]||(T[L.procedure_id]={verantwortlich:0,instruierend:0,assistent:0}),L.role_in_surgery==="primary"||L.role_in_surgery==="responsible"?T[L.procedure_id].verantwortlich++:L.role_in_surgery==="instructing"?T[L.procedure_id].instruierend++:(L.role_in_surgery==="assistant"||L.role_in_surgery==="assist")&&T[L.procedure_id].assistent++});const I={...A},M={...A};Object.keys(I).forEach(L=>{I[L].procedures.forEach((z,$)=>{const W=T[z.id];if(W){const F={...z,verantwortlich:W.verantwortlich,instruierend:W.instruierend,assistent:W.assistent,total:W.verantwortlich+W.instruierend+W.assistent};I[L].procedures[$]=F,M[L].procedures[$]={...F},console.log(`✅ Loaded counts for "${z.name}" - V:${W.verantwortlich} I:${W.instruierend} A:${W.assistent}`)}}),I[L].totalCount=I[L].procedures.reduce((z,$)=>z+$.total,0),M[L].totalCount=M[L].procedures.reduce((z,$)=>z+$.total,0)}),l(I),i(M),console.log("✅ Form initialized with existing data")}catch(E){console.error("Error loading existing procedure data:",E)}},[s]),N=(A,E,P,T)=>{i(I=>{const M={...I},L={...M[A].procedures[E]};return L[P]=Math.max(0,T),L.total=L.verantwortlich+L.instruierend+L.assistent,M[A]={...M[A],procedures:[...M[A].procedures.slice(0,E),L,...M[A].procedures.slice(E+1)]},M[A].totalCount=M[A].procedures.reduce((z,$)=>z+$.total,0),M})},j=async()=>{if(!s){xe.error("Sie müssen angemeldet sein um Daten zu speichern");return}f(!0),console.log("🚀 Starting procedure save process..."),console.log("💾 FMHManualEntry - Saving data for user ID:",s.id);try{const A=[],E=[],P=[],T=[];for(const[M,L]of Object.entries(r)){console.log(`📋 Processing module: ${L.title}`);for(let z=0;z<L.procedures.length;z++){const $=L.procedures[z],W=a[M].procedures[z],F=$.verantwortlich-W.verantwortlich,O=$.instruierend-W.instruierend,D=$.assistent-W.assistent;if(F===0&&O===0&&D===0)continue;console.log(`📝 Processing procedure: "${$.name}" (Changes: V:${F} I:${O} A:${D})`);const R=$.id;if(!R){console.warn(`❌ No procedure ID for: ${$.name}`),P.push($.name);continue}if(T.push($.name),F>0)for(let U=0;U<F;U++)A.push({user_id:s.id,procedure_id:R,role_in_surgery:"primary",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${L.title}`});if(O>0)for(let U=0;U<O;U++)A.push({user_id:s.id,procedure_id:R,role_in_surgery:"instructing",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${L.title}`});if(D>0)for(let U=0;U<D;U++)A.push({user_id:s.id,procedure_id:R,role_in_surgery:"assistant",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${L.title}`});if(F<0){const{data:U}=await te.from("procedure_logs").select("id").eq("user_id",s.id).eq("procedure_id",R).in("role_in_surgery",["primary","responsible"]).order("created_at",{ascending:!1}).limit(Math.abs(F));U&&E.push(...U.map(X=>X.id))}if(O<0){const{data:U}=await te.from("procedure_logs").select("id").eq("user_id",s.id).eq("procedure_id",R).eq("role_in_surgery","instructing").order("created_at",{ascending:!1}).limit(Math.abs(O));U&&E.push(...U.map(X=>X.id))}if(D<0){const{data:U}=await te.from("procedure_logs").select("id").eq("user_id",s.id).eq("procedure_id",R).eq("role_in_surgery","assistant").order("created_at",{ascending:!1}).limit(Math.abs(D));U&&E.push(...U.map(X=>X.id))}}}console.log(`📊 Summary: ${A.length} logs to insert, ${E.length} logs to delete`),console.log(`✅ Successful procedures: ${T.length}`,T),P.length>0&&console.log(`❌ Failed procedures: ${P.length}`,P);let I=0;if(A.length>0){console.log("💾 Inserting procedure logs into database...");const{error:M}=await te.from("procedure_logs").insert(A);if(M)throw console.error("❌ Database insertion error:",M),M;I+=A.length,console.log(`✅ Successfully inserted ${A.length} procedure logs`)}if(E.length>0){console.log("🗑️ Deleting procedure logs from database...");const{error:M}=await te.from("procedure_logs").delete().in("id",E);if(M)throw console.error("❌ Database deletion error:",M),M;I+=E.length,console.log(`✅ Successfully deleted ${E.length} procedure logs`)}if(I>0){let M=`${I} Änderungen erfolgreich gespeichert`;P.length>0&&(M+=`. ${P.length} Prozeduren konnten nicht verarbeitet werden.`),xe.success(M),l({...r}),console.log("🔄 Refreshing FMH progress..."),t==null||t(),e(!1)}else console.log("⚠️ No changes to save"),xe.warning("Keine Änderungen zum Speichern gefunden")}catch(A){console.error("❌ Error saving procedures:",A);const E=(A==null?void 0:A.message)||(A==null?void 0:A.toString())||"Unbekannter Fehler";xe.error(`Fehler beim Speichern der Prozeduren: ${E}`)}finally{f(!1),console.log("🏁 Save process completed")}};return n?o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(to,{className:"h-6 w-6 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"FMH Operationsstatistik"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Manuelle Eingabe der Operationen"})]})]}),o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>e(!1),className:"h-8 w-8 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:o.jsx(ao,{className:"h-4 w-4"})})]}),m?o.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(o_,{className:"h-5 w-5 animate-spin text-blue-600"}),o.jsx("span",{className:"text-gray-700",children:"Module und Prozeduren werden geladen..."})]})}):Object.keys(r).length===0?o.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:o.jsx("p",{className:"text-gray-600",children:"Keine Module gefunden"})}):o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[o.jsx("div",{className:"flex-1 flex flex-col p-6 overflow-hidden bg-white",children:o.jsxs(gr,{defaultValue:Object.keys(r)[0],className:"flex-1 flex flex-col",children:[o.jsx(qs,{className:"flex w-full mb-6 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:Object.entries(r).map(([A,E])=>o.jsx(He,{value:A,className:"flex-shrink-0 whitespace-nowrap px-4 py-2 data-[state=active]:bg-white data-[state=active]:text-gray-900 text-gray-600 hover:text-gray-900 text-sm",children:E.title},A))}),Object.entries(r).map(([A,E])=>o.jsx(Ge,{value:A,className:"flex-1 flex flex-col mt-0 overflow-hidden",children:o.jsxs(Y,{className:"flex-1 flex flex-col bg-white border border-gray-200 shadow-sm overflow-hidden",children:[o.jsx(Je,{className:"flex-shrink-0 bg-gray-50 border-b border-gray-200 p-4",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[o.jsx(st,{className:"text-lg text-gray-900",children:E.title}),o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs(oe,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",children:["Minimum: ",E.totalMinimum]}),o.jsxs(oe,{variant:E.totalCount>=E.totalMinimum?"default":"outline",className:"bg-green-100 text-green-800 border-green-200",children:["Total: ",E.totalCount]})]})]})}),o.jsx(Ae,{className:"flex-1 p-0 bg-white overflow-hidden",children:o.jsx(uE,{className:"h-[400px]",children:o.jsxs("table",{className:"w-full min-w-[800px]",children:[o.jsx("thead",{className:"sticky top-0 border-b border-gray-200 bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left p-3 font-medium text-gray-700 min-w-[250px]",children:"Prozedur"}),o.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Min"}),o.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Verantwortlich"}),o.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Instruierend"}),o.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Assistent"}),o.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Total"})]})}),o.jsx("tbody",{className:"bg-white",children:E.procedures.map((P,T)=>{var I,M;return o.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[o.jsxs("td",{className:"p-3",children:[o.jsx("div",{className:"font-medium text-gray-900 text-sm",children:P.name}),((M=(I=a[A])==null?void 0:I.procedures[T])==null?void 0:M.total)>0&&o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Gespeichert: V:",a[A].procedures[T].verantwortlich," I:",a[A].procedures[T].instruierend," A:",a[A].procedures[T].assistent]})]}),o.jsx("td",{className:"text-center p-3",children:o.jsx(oe,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:P.minimum})}),o.jsx("td",{className:"text-center p-3",children:o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"verantwortlich",P.verantwortlich-1),children:o.jsx(Qu,{className:"w-3 h-3"})}),o.jsx(Re,{type:"number",min:"0",value:P.verantwortlich,onChange:L=>N(A,T,"verantwortlich",parseInt(L.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"verantwortlich",P.verantwortlich+1),children:o.jsx(Wi,{className:"w-3 h-3"})})]})}),o.jsx("td",{className:"text-center p-3",children:o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"instruierend",P.instruierend-1),children:o.jsx(Qu,{className:"w-3 h-3"})}),o.jsx(Re,{type:"number",min:"0",value:P.instruierend,onChange:L=>N(A,T,"instruierend",parseInt(L.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"instruierend",P.instruierend+1),children:o.jsx(Wi,{className:"w-3 h-3"})})]})}),o.jsx("td",{className:"text-center p-3",children:o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"assistent",P.assistent-1),children:o.jsx(Qu,{className:"w-3 h-3"})}),o.jsx(Re,{type:"number",min:"0",value:P.assistent,onChange:L=>N(A,T,"assistent",parseInt(L.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),o.jsx(q,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>N(A,T,"assistent",P.assistent+1),children:o.jsx(Wi,{className:"w-3 h-3"})})]})}),o.jsx("td",{className:"text-center p-3",children:o.jsx(oe,{variant:P.total>=P.minimum?"default":"secondary",className:"font-medium text-xs bg-green-100 text-green-800 border-green-200",children:P.total})})]},P.id)})})]})})})]})},A))]})}),o.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4 bg-gray-50",children:o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Gesamtanzahl Eingriffe: ",Object.values(r).reduce((A,E)=>A+E.totalCount,0)]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx(q,{variant:"outline",onClick:()=>e(!1),disabled:h,className:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400",children:"Abbrechen"}),o.jsxs(q,{onClick:j,disabled:h||Object.values(r).every(A=>A.totalCount===0),className:"gap-2 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400",children:[o.jsx(ab,{className:"w-4 h-4"}),h?"Speichere...":"Prozeduren speichern"]})]})]})})]})]})}):null},GG=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:s}=Ql(),[r,i]=w.useState([]),[a,l]=w.useState(!1),[c,d]=w.useState(null),[h,f]=w.useState({}),m=w.useCallback(async()=>{if(s){l(!0);try{const{data:N,error:j}=await te.from("procedure_logs").select(`
          id,
          performed_date,
          procedure_id,
          role_in_surgery,
          weighted_score,
          notes,
          hospital,
          supervisor,
          procedures (
            title_de,
            category_id,
            procedure_categories (
              key,
              title_de
            )
          )
        `).eq("user_id",s.id).order("performed_date",{ascending:!1});if(j)throw j;const A=(N||[]).map(E=>{var P,T,I,M,L;return{id:E.id,performed_date:E.performed_date,procedure_id:E.procedure_id,procedure_title:((P=E.procedures)==null?void 0:P.title_de)||"Unknown Procedure",category_key:((I=(T=E.procedures)==null?void 0:T.procedure_categories)==null?void 0:I.key)||"unknown",category_title:((L=(M=E.procedures)==null?void 0:M.procedure_categories)==null?void 0:L.title_de)||"Unknown Category",role_in_surgery:E.role_in_surgery||"primary",weighted_score:E.weighted_score||1,notes:E.notes,hospital:E.hospital,supervisor:E.supervisor}});i(A)}catch(N){console.error("Error loading procedure logs:",N),xe.error("Fehler beim Laden der Prozedur-Logs")}finally{l(!1)}}},[s]);w.useEffect(()=>{n&&s&&m()},[n,s,m]);const p=N=>{d(N.id),f({performed_date:N.performed_date,role_in_surgery:N.role_in_surgery,notes:N.notes,hospital:N.hospital,supervisor:N.supervisor})},x=async N=>{try{const{error:j}=await te.from("procedure_logs").update({performed_date:h.performed_date,role_in_surgery:h.role_in_surgery,notes:h.notes,hospital:h.hospital,supervisor:h.supervisor}).eq("id",N);if(j)throw j;d(null),f({}),await m(),xe.success("Eintrag erfolgreich aktualisiert")}catch(j){console.error("Error updating log:",j),xe.error("Fehler beim Aktualisieren des Eintrags")}},g=async N=>{if(confirm("Sind Sie sicher, dass Sie diesen Eintrag löschen möchten?"))try{const{error:j}=await te.from("procedure_logs").delete().eq("id",N);if(j)throw j;await m(),xe.success("Eintrag erfolgreich gelöscht"),t&&t()}catch(j){console.error("Error deleting log:",j),xe.error("Fehler beim Löschen des Eintrags")}},b=()=>{d(null),f({})},v=r.reduce((N,j)=>{const A=j.category_title;return N[A]||(N[A]=[]),N[A].push(j),N},{}),y=N=>({responsible:"Verantwortlich",instructing:"Instruierend",assistant:"Assistent"})[N]||N,_=N=>({responsible:"default",instructing:"secondary",assistant:"outline"})[N]||"outline";return o.jsx(kv,{open:n,onOpenChange:e,children:o.jsxs(Jf,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsx(Zf,{children:o.jsx(em,{children:"Prozedur-Korrekturen"})}),o.jsx("div",{className:"flex-1 overflow-hidden",children:a?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsxs(gr,{defaultValue:Object.keys(v)[0],className:"h-full flex flex-col",children:[o.jsx(qs,{className:"grid w-full grid-cols-5",children:Object.keys(v).map(N=>o.jsxs(He,{value:N,className:"text-xs",children:[N.replace("Basis ","").replace("Modul ",""),o.jsx(oe,{variant:"secondary",className:"ml-1",children:v[N].length})]},N))}),Object.entries(v).map(([N,j])=>o.jsx(Ge,{value:N,className:"flex-1 overflow-hidden",children:o.jsx("div",{className:"overflow-auto h-full",children:o.jsxs(If,{children:[o.jsx(Df,{children:o.jsxs(qr,{children:[o.jsx(Oe,{children:"Datum"}),o.jsx(Oe,{children:"Prozedur"}),o.jsx(Oe,{children:"Rolle"}),o.jsx(Oe,{children:"Score"}),o.jsx(Oe,{children:"Spital"}),o.jsx(Oe,{children:"Supervisor"}),o.jsx(Oe,{children:"Notizen"}),o.jsx(Oe,{children:"Aktionen"})]})}),o.jsx(Of,{children:j.map(A=>o.jsxs(qr,{children:[o.jsx(Le,{children:c===A.id?o.jsx(Re,{type:"date",value:h.performed_date,onChange:E=>f(P=>({...P,performed_date:E.target.value})),className:"w-32"}):new Date(A.performed_date).toLocaleDateString("de-CH")}),o.jsx(Le,{className:"max-w-48",children:o.jsx("div",{className:"truncate",title:A.procedure_title,children:A.procedure_title})}),o.jsx(Le,{children:c===A.id?o.jsxs("select",{value:h.role_in_surgery,onChange:E=>f(P=>({...P,role_in_surgery:E.target.value})),className:"border rounded px-2 py-1",children:[o.jsx("option",{value:"responsible",children:"Verantwortlich"}),o.jsx("option",{value:"instructing",children:"Instruierend"}),o.jsx("option",{value:"assistant",children:"Assistent"})]}):o.jsx(oe,{variant:_(A.role_in_surgery),children:y(A.role_in_surgery)})}),o.jsx(Le,{children:A.weighted_score}),o.jsx(Le,{children:c===A.id?o.jsx(Re,{value:h.hospital||"",onChange:E=>f(P=>({...P,hospital:E.target.value})),className:"w-24"}):A.hospital||"-"}),o.jsx(Le,{children:c===A.id?o.jsx(Re,{value:h.supervisor||"",onChange:E=>f(P=>({...P,supervisor:E.target.value})),className:"w-24"}):A.supervisor||"-"}),o.jsx(Le,{children:c===A.id?o.jsx(Re,{value:h.notes||"",onChange:E=>f(P=>({...P,notes:E.target.value})),className:"w-32"}):o.jsx("div",{className:"max-w-32 truncate",title:A.notes,children:A.notes||"-"})}),o.jsx(Le,{children:o.jsx("div",{className:"flex gap-1",children:c===A.id?o.jsxs(o.Fragment,{children:[o.jsx(q,{size:"sm",onClick:()=>x(A.id),children:o.jsx(ab,{className:"h-3 w-3"})}),o.jsx(q,{size:"sm",variant:"outline",onClick:b,children:o.jsx(ao,{className:"h-3 w-3"})})]}):o.jsxs(o.Fragment,{children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>p(A),children:o.jsx(fj,{className:"h-3 w-3"})}),o.jsx(q,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>g(A.id),children:o.jsx(YT,{className:"h-3 w-3"})})]})})})]},A.id))})]})})},N))]})}),o.jsx("div",{className:"border-t pt-4 flex justify-end gap-2",children:o.jsx(q,{variant:"outline",onClick:()=>e(!1),children:"Schließen"})})]})})},KG=()=>{var A;const{user:n}=Ql(),[e,t]=w.useState([]),[s,r]=w.useState([]),[i,a]=w.useState([]),[l,c]=w.useState("basis_notfallchirurgie"),[d,h]=w.useState(5),[f,m]=w.useState(!0),[p,x]=w.useState(!1);w.useEffect(()=>{n&&g()},[n]);const g=async()=>{try{m(!0);const{data:E}=await te.from("profiles").select("pgy_level").eq("user_id",n.id).single();E!=null&&E.pgy_level&&h(E.pgy_level);const{data:P}=await te.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");P&&(t(P),P.length>0&&!l&&c(P[0].key));const{data:T}=await te.from("procedures").select("*").eq("active",!0).order("code");T&&r(T),await b(T||[],(E==null?void 0:E.pgy_level)||5)}catch(E){console.error("Error loading data:",E),xe.error("Fehler beim Laden der Daten")}finally{m(!1)}},b=async(E,P)=>{if(!(!n||E.length===0))try{const{data:T}=await te.from("procedure_logs").select("procedure_id, role_in_surgery").eq("user_id",n.id),I=E.map(M=>{const L=(T==null?void 0:T.filter(U=>U.procedure_id===M.id))||[],z=L.filter(U=>U.role_in_surgery==="primary").length,$=L.filter(U=>U.role_in_surgery==="instructing").length,W=L.filter(U=>U.role_in_surgery==="assistant").length,F=z+$+W,O=M.min_required_by_pgy[`pgy${P}`]||0,D=O>0?Math.min(F/O*100,100):0;let R="not-started";return F>=O&&O>0?R="completed":F>0&&(R="in-progress"),{procedure:M,responsible:z,instructing:$,assistant:W,total:F,required:O,progress:D,status:R}});a(I)}catch(T){console.error("Error loading procedure progress:",T)}},v=async(E,P,T)=>{if(n)try{if(x(!0),T){const{error:I}=await te.from("procedure_logs").insert({user_id:n.id,procedure_id:E,performed_date:new Date().toISOString().split("T")[0],role_in_surgery:P,supervisor:"Dr. Supervisor",hospital:"Klinik",case_id:`CASE-${Date.now()}`});if(I)throw I}else{const{data:I}=await te.from("procedure_logs").select("id").eq("user_id",n.id).eq("procedure_id",E).eq("role_in_surgery",P).order("created_at",{ascending:!1}).limit(1);if(I&&I.length>0){const{error:M}=await te.from("procedure_logs").delete().eq("id",I[0].id);if(M)throw M}}await g(),xe.success("Prozedur erfolgreich aktualisiert")}catch(I){console.error("Error updating procedure:",I),xe.error("Fehler beim Aktualisieren der Prozedur")}finally{x(!1)}},y=E=>{const P=e.find(T=>T.key===E);return P?i.filter(T=>T.procedure.category_id===P.id):[]},_=E=>{const P=y(E),T=P.reduce((M,L)=>M+L.required,0),I=P.reduce((M,L)=>M+L.total,0);return{total:I,required:T,progress:T>0?I/T*100:0,completed:P.filter(M=>M.status==="completed").length,totalProcedures:P.length}},N=E=>{switch(E){case"completed":return"text-green-600 bg-green-50 border-green-200";case"in-progress":return"text-yellow-600 bg-yellow-50 border-yellow-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},j=E=>{switch(E){case"completed":return o.jsx(Ga,{className:"w-4 h-4"});case"in-progress":return o.jsx(lb,{className:"w-4 h-4"});default:return o.jsx(KT,{className:"w-4 h-4"})}};return f?o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"FMH Prozeduren Tracking"}),o.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihre chirurgischen Prozeduren nach FMH-Standards"}),o.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Aktueller PGY-Level: ",d]})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:e.map(E=>{const P=_(E.key);return o.jsx(Y,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${l===E.key?"ring-2 ring-primary":""}`,onClick:()=>c(E.key),children:o.jsx(Ae,{className:"p-4",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"flex items-center justify-center mb-2",children:o.jsx(Ol,{className:"w-6 h-6 text-primary"})}),o.jsx("h3",{className:"font-semibold text-sm mb-2",children:E.title_de}),o.jsxs("div",{className:"space-y-2",children:[o.jsx($l,{value:P.progress,className:"h-2"}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:[P.completed,"/",P.totalProcedures," abgeschlossen"]}),o.jsxs("div",{className:"text-xs font-medium",children:[P.total,"/",P.required," Prozeduren"]})]})]})})},E.id)})}),o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsxs(st,{className:"flex items-center gap-2",children:[o.jsx(r_,{className:"w-5 h-5"}),(A=e.find(E=>E.key===l))==null?void 0:A.title_de]})}),o.jsx(Ae,{children:o.jsx(uE,{className:"h-[600px]",children:o.jsx("div",{className:"space-y-4",children:y(l).map(E=>o.jsxs(Y,{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(oe,{variant:"outline",className:"text-xs",children:E.procedure.code}),o.jsxs(oe,{variant:"outline",className:`text-xs ${N(E.status)}`,children:[j(E.status),o.jsx("span",{className:"ml-1",children:E.status==="completed"?"Abgeschlossen":E.status==="in-progress"?"In Bearbeitung":"Nicht begonnen"})]})]}),o.jsx("h4",{className:"font-medium text-card-foreground",children:E.procedure.title_de}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Erforderlich: ",E.required," | Aktuell: ",E.total]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-2xl font-bold text-primary",children:[Math.round(E.progress),"%"]}),o.jsx($l,{value:E.progress,className:"w-20 h-2 mt-1"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(ve,{className:"text-xs text-muted-foreground",children:"Verantwortlich"}),o.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>v(E.procedure.id,"primary",!1),disabled:p||E.responsible===0,children:o.jsx(Qu,{className:"w-3 h-3"})}),o.jsx("span",{className:"font-medium w-8 text-center",children:E.responsible}),o.jsx(q,{size:"sm",variant:"outline",onClick:()=>v(E.procedure.id,"primary",!0),disabled:p,children:o.jsx(Wi,{className:"w-3 h-3"})})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(ve,{className:"text-xs text-muted-foreground",children:"Instruierend"}),o.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>v(E.procedure.id,"instructing",!1),disabled:p||E.instructing===0,children:o.jsx(Qu,{className:"w-3 h-3"})}),o.jsx("span",{className:"font-medium w-8 text-center",children:E.instructing}),o.jsx(q,{size:"sm",variant:"outline",onClick:()=>v(E.procedure.id,"instructing",!0),disabled:p,children:o.jsx(Wi,{className:"w-3 h-3"})})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx(ve,{className:"text-xs text-muted-foreground",children:"Assistent"}),o.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1",children:[o.jsx(q,{size:"sm",variant:"outline",onClick:()=>v(E.procedure.id,"assistant",!1),disabled:p||E.assistant===0,children:o.jsx(Qu,{className:"w-3 h-3"})}),o.jsx("span",{className:"font-medium w-8 text-center",children:E.assistant}),o.jsx(q,{size:"sm",variant:"outline",onClick:()=>v(E.procedure.id,"assistant",!0),disabled:p,children:o.jsx(Wi,{className:"w-3 h-3"})})]})]})]})]},E.procedure.id))})})})]})]})},YG=()=>{const{user:n,loading:e}=Ql(),t=lo(),[s,r]=w.useState([]),[i,a]=w.useState(null),[l,c]=w.useState(!0),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[p,x]=w.useState(!1),[g,b]=w.useState(!1),[v,y]=w.useState(!1),[_,N]=w.useState(!1),[j,A]=w.useState(4);w.useEffect(()=>{if(e)return;if(!n){t("/auth");return}if(l)return;E();const M=setTimeout(()=>h(!0),6e3);return()=>clearTimeout(M)},[n,e]);const E=async()=>{try{c(!0);const{data:{user:M},error:L}=await te.auth.getUser();if(L&&console.error("getUser error",L),console.log("🔍 FMHDashboard - Loading data for user ID:",M==null?void 0:M.id),M){const{data:F}=await te.from("profiles").select("pgy_level").eq("user_id",M.id).single();F!=null&&F.pgy_level&&A(F.pgy_level)}const{data:z,error:$}=await te.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");if($)throw $;const W=[];for(const F of z||[])if(M){console.log("📊 FMHDashboard - Getting progress for module:",F.key,"user:",M.id);let O=null;try{const R=te.rpc("get_module_progress",{user_id_param:M.id,module_key:F.key}),U=new Promise((V,Q)=>setTimeout(()=>Q(new Error("RPC timeout")),1e4)),{data:X,error:B}=await Promise.race([R,U]);B?(console.error("RPC error for module",F.key,":",B),O=null):O=X}catch(R){console.error("RPC timeout or error for module",F.key,":",R),O=null}console.log("📈 Progress data for",F.key,":",O),console.log("🔍 Module data:",{key:F.key,title:F.title_de,minimum_required:F.minimum_required,progress_raw:O});let D=null;if(O&&O.length>0){const R=O[0];Array.isArray(R)&&R.length>=7?D={module_name:R[0],total_weighted_score:R[1],total_minimum:R[2],progress_percentage:R[3],responsible_count:R[4],instructing_count:R[5],assistant_count:R[6]}:typeof R=="object"&&R!==null&&(D=R)}W.push({...F,progress:D})}else W.push({...F,progress:null});r(W)}catch(M){console.error("Error loading modules:",M)}finally{c(!1)}},P=M=>({basis_notfallchirurgie:"coral",basis_allgemeinchirurgie:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[M]||"mint",I=(()=>{const M=s.reduce(($,W)=>{var F;return $+(((F=W.progress)==null?void 0:F.responsible_count)||0)},0),L=s.reduce(($,W)=>{var F,O,D;return $+(((F=W.progress)==null?void 0:F.responsible_count)||0)+(((O=W.progress)==null?void 0:O.instructing_count)||0)+(((D=W.progress)==null?void 0:D.assistant_count)||0)},0),z=L>0?M/L*100:0;return z>=30?{status:"good",color:"bg-green-500"}:z>=20?{status:"warning",color:"bg-yellow-500"}:{status:"critical",color:"bg-red-500"}})();return l?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsx("main",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsxs("main",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-medical-title text-card-foreground mb-2",children:"FMH Chirurgie Tracking"}),o.jsxs("p",{className:"text-medical-subtitle",children:["Überwachung Ihres FMH-konformen Ausbildungsfortschritts - PGY ",j]}),n&&o.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Debug: User ID: ",n.id," | Email: ",n.email]})]}),o.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[o.jsxs(q,{variant:"default",size:"sm",className:"gap-2",onClick:()=>N(!0),children:[o.jsx(Ol,{className:"w-4 h-4"}),"Prozeduren Tracking"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>m(!0),children:[o.jsx(Wi,{className:"w-4 h-4"}),"Prozedur erfassen"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>b(!0),children:[o.jsx(to,{className:"w-4 h-4"}),"Manual eingabe"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>x(!0),children:[o.jsx(cb,{className:"w-4 h-4"}),"PDF Upload"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",children:[o.jsx(uj,{className:"w-4 h-4"}),"Export"]}),o.jsxs(q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>y(!0),children:[o.jsx(ob,{className:"w-4 h-4"}),"Korrekturen"]})]})]}),o.jsxs("div",{className:"medical-card-elegant p-8 mb-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-2",children:"FMH Module Progress"}),o.jsx("p",{className:"text-text-secondary",children:"Gewichtete Erfüllung der FMH-Mindestanforderungen pro Modul"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:s.map(M=>{var z,$,W,F,O;const L=((z=M.progress)==null?void 0:z.progress_percentage)||0;return o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx(Ev,{progress:L,variant:P(M.key),size:120,strokeWidth:8,label:M.title_de,showPercentage:!0,onClick:()=>a(M.key),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[o.jsx(r_,{className:"w-4 h-4 text-muted-foreground"}),o.jsxs(oe,{variant:"outline",className:"text-xs",children:[parseInt(((($=M.progress)==null?void 0:$.total_weighted_score)||0).toString()),"/",M.minimum_required||"?"]})]}),o.jsxs("div",{className:"text-xs text-muted-foreground",children:["V:",parseInt((((W=M.progress)==null?void 0:W.responsible_count)||0).toString())," I:",parseInt((((F=M.progress)==null?void 0:F.instructing_count)||0).toString())," A:",parseInt((((O=M.progress)==null?void 0:O.assistant_count)||0).toString())]})]})]},M.id)})})]}),i&&o.jsx(Q9,{moduleKey:i,onClose:()=>a(null)}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx(Y,{className:"medical-card p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:o.jsx(lb,{className:"w-6 h-6 text-activity-mint"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Gesamtfortschritt"}),o.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[s.length>0?parseInt((s.reduce((M,L)=>{var z;return M+(((z=L.progress)==null?void 0:z.progress_percentage)||0)},0)/s.length).toString()):0,"%"]})]})]})}),o.jsx(Y,{className:"medical-card p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-3 ${I.color}/20 rounded-medical`,children:o.jsx(Hf,{className:"w-6 h-6",style:{color:I.color.replace("/20","").replace("bg-","")}})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Rollen-Balance"}),o.jsx("p",{className:"text-2xl font-bold text-card-foreground capitalize",children:I.status==="good"?"Gut":I.status==="warning"?"Achtung":"Kritisch"})]})]})}),o.jsx(Y,{className:"medical-card p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:o.jsx(r_,{className:"w-6 h-6 text-activity-coral"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Eingriffe Total"}),o.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:parseInt(s.reduce((M,L)=>{var z,$,W;return M+(((z=L.progress)==null?void 0:z.responsible_count)||0)+((($=L.progress)==null?void 0:$.instructing_count)||0)+(((W=L.progress)==null?void 0:W.assistant_count)||0)},0).toString())})]})]})}),o.jsx(Y,{className:"medical-card p-6",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:o.jsx(Vn,{className:"w-6 h-6 text-activity-amber"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktueller PGY"}),o.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:["PGY-",j]})]})]})})]}),o.jsx($7,{modules:s,userPgyLevel:j}),f&&o.jsx(O7,{onClose:()=>m(!1),onSuccess:()=>{m(!1),E()}}),o.jsx(qG,{open:g,onOpenChange:b,onSuccess:E}),o.jsx(RG,{open:p,onOpenChange:x,onSuccess:E}),o.jsx(GG,{open:v,onOpenChange:y,onSuccess:E}),_&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-background rounded-lg w-full max-w-7xl h-[90vh] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"FMH Prozeduren Tracking"}),o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>N(!1),children:"✕"})]}),o.jsx("div",{className:"p-6 h-[calc(100%-80px)] overflow-auto",children:o.jsx(KG,{})})]})})]})]})},XG=[{icon:Ol,title:"FMH-konforme Prozeduren-Tracking",description:"Vollständige Dokumentation aller chirurgischen Eingriffe nach FMH-Standards mit automatischer Kategorisierung und Fortschrittsverfolgung.",benefits:["Automatische Kategorisierung","FMH-Mindestanforderungen","Echtzeit-Fortschritt"],color:"text-activity-mint"},{icon:Qr,title:"Intelligentes Kurs-Management",description:"Verwalten Sie Pflichtkurse, Fortbildungen und Examen mit automatischen Erinnerungen und Fortschritts-Tracking.",benefits:["Kurs-Timeline","Automatische Erinnerungen","Zertifikat-Verwaltung"],color:"text-activity-coral"},{icon:to,title:"Publikations-Portfolio",description:"Dokumentieren Sie Ihre wissenschaftlichen Arbeiten und verfolgen Sie Ihren akademischen Fortschritt.",benefits:["Google Scholar Integration","Impact-Tracking","Kollaborations-Netzwerk"],color:"text-activity-lavender"},{icon:Hi,title:"Awards & Auszeichnungen",description:"Sammeln und präsentieren Sie Ihre Erfolge und Auszeichnungen in einem professionellen Portfolio.",benefits:["Portfolio-Ansicht","Erfolgs-Tracking","Networking-Tools"],color:"text-activity-amber"},{icon:y$,title:"Analytics & Insights",description:"Detaillierte Analysen Ihres Ausbildungsfortschritts mit Gap-Analysen und Empfehlungen.",benefits:["Gap-Analysen","Trend-Vorhersagen","Personalisierte Empfehlungen"],color:"text-blue-500"},{icon:D$,title:"Datenschutz & Sicherheit",description:"Höchste Sicherheitsstandards für Ihre sensiblen medizinischen Daten mit DSGVO-Konformität.",benefits:["End-to-End Verschlüsselung","DSGVO-konform","Sichere Cloud-Speicherung"],color:"text-green-500"}],QG=[{icon:L$,title:"Echtzeit-Synchronisation",description:"Alle Daten werden in Echtzeit zwischen Geräten synchronisiert."},{icon:C$,title:"Multi-Platform",description:"Funktioniert auf Desktop, Tablet und Smartphone."},{icon:j$,title:"Robuste Datenbank",description:"Supabase-basierte, skalierbare Datenbank-Architektur."},{icon:l_,title:"Sichere Authentifizierung",description:"Moderne OAuth-Integration mit Supabase Auth."}],JG=[{name:"Resident",price:"Kostenlos",period:"Für Einzelpersonen",features:["Basis Prozeduren-Tracking","Kurs-Management","Einfache Analytics","Community-Support"],popular:!1},{name:"Professional",price:"CHF 29",period:"pro Monat",features:["Alle Resident Features","Erweiterte Analytics","Publikations-Portfolio","Awards-Tracking","Priority Support","API-Zugang"],popular:!0},{name:"Institution",price:"CHF 99",period:"pro Monat",features:["Alle Professional Features","Multi-User Management","Institutionelle Dashboards","Custom Branding","Dedicated Support","On-Premise Option"],popular:!1}],ZG=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsxs("main",{children:[o.jsx("section",{className:"py-20 bg-gradient-to-br from-primary/5 to-secondary/5",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-card-foreground mb-6",children:"Alle Features auf einen Blick"}),o.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Entdecken Sie die umfassenden Funktionen von ResidentTrack, die Ihre chirurgische Ausbildung revolutionieren."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs(q,{size:"lg",className:"bg-gradient-medical",children:["Jetzt starten",o.jsx(i_,{className:"ml-2 h-4 w-4"})]}),o.jsx(q,{size:"lg",variant:"outline",children:"Demo ansehen"})]})]})})}),o.jsx("section",{className:"py-20",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:o.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/trainingimage.png",alt:"Features Hero",className:"w-full h-auto object-cover"})})}),o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kernfunktionen"}),o.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Alles was Sie für eine erfolgreiche chirurgische Ausbildung benötigen"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:XG.map((n,e)=>o.jsx(Y,{className:"medical-card p-6 hover:shadow-elegant transition-all duration-300",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"p-3 rounded-medical bg-gradient-to-br from-primary/10 to-secondary/10",children:o.jsx(n.icon,{className:`h-6 w-6 ${n.color}`})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-3",children:n.title}),o.jsx("p",{className:"text-muted-foreground mb-4",children:n.description}),o.jsx("div",{className:"space-y-2",children:n.benefits.map((t,s)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"h-4 w-4 text-green-500"}),o.jsx("span",{className:"text-sm text-muted-foreground",children:t})]},s))})]})]})},e))})]})}),o.jsx("section",{className:"py-20 bg-muted/30",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:o.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/courseresidentsimage.png",alt:"Kurse und Fortbildungen",className:"w-full h-auto object-cover"})})}),o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Technische Highlights"}),o.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Moderne Technologie für optimale Performance und Sicherheit"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:QG.map((n,e)=>o.jsxs(Y,{className:"medical-card p-6 text-center",children:[o.jsx("div",{className:"p-4 bg-gradient-to-br from-primary/10 to-secondary/10 rounded-medical w-fit mx-auto mb-4",children:o.jsx(n.icon,{className:"h-8 w-8 text-primary"})}),o.jsx("h3",{className:"text-lg font-semibold text-card-foreground mb-2",children:n.title}),o.jsx("p",{className:"text-muted-foreground text-sm",children:n.description})]},e))})]})}),o.jsx("section",{className:"py-20",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Preise"}),o.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Wählen Sie den Plan, der zu Ihren Bedürfnissen passt"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:JG.map((n,e)=>o.jsxs(Y,{className:`medical-card p-8 relative ${n.popular?"ring-2 ring-primary":""}`,children:[n.popular&&o.jsx(oe,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gradient-medical",children:"Beliebt"}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h3",{className:"text-2xl font-bold text-card-foreground mb-2",children:n.name}),o.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:n.price}),o.jsx("p",{className:"text-muted-foreground",children:n.period})]}),o.jsx("ul",{className:"space-y-4 mb-8",children:n.features.map((t,s)=>o.jsxs("li",{className:"flex items-center gap-3",children:[o.jsx(Ga,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),o.jsx("span",{className:"text-muted-foreground",children:t})]},s))}),o.jsx(q,{className:`w-full ${n.popular?"bg-gradient-medical":""}`,variant:n.popular?"default":"outline",children:n.name==="Resident"?"Kostenlos starten":"Plan wählen"})]},e))})]})}),o.jsx("section",{className:"py-20 bg-gradient-to-br from-primary/10 to-secondary/10",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Bereit für den nächsten Schritt?"}),o.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Starten Sie noch heute mit ResidentTrack und revolutionieren Sie Ihre chirurgische Ausbildung."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[o.jsxs(q,{size:"lg",className:"bg-gradient-medical",children:["Kostenlos registrieren",o.jsx(i_,{className:"ml-2 h-4 w-4"})]}),o.jsx(q,{size:"lg",variant:"outline",children:"Kontakt aufnehmen"})]})]})})]})]}),eK=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsx("main",{className:"container mx-auto px-4 py-12",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs(Y,{className:"medical-card",children:[o.jsx(Je,{children:o.jsx(st,{className:"text-card-foreground",children:"Kontakt aufnehmen"})}),o.jsxs(Ae,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(Re,{placeholder:"Vorname"}),o.jsx(Re,{placeholder:"Nachname"})]}),o.jsx(Re,{type:"email",placeholder:"E-Mail"}),o.jsx(Re,{placeholder:"Betreff"}),o.jsx(Pv,{placeholder:"Ihre Nachricht",className:"min-h-[140px]"}),o.jsx(q,{className:"w-full",children:"Nachricht senden"})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Y,{className:"medical-card overflow-hidden",children:[o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/residents-image-2.png",alt:"Kontakt - ResidentTrack",className:"w-full h-56 object-cover"}),o.jsx(Ae,{className:"pt-4",children:o.jsx("p",{className:"text-muted-foreground",children:"Wir freuen uns auf Ihre Nachricht. Unser Team meldet sich in der Regel innerhalb von 24 Stunden."})})]}),o.jsxs(Y,{className:"medical-card overflow-hidden",children:[o.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/awardsresidents2-image.png",alt:"Unser Team",className:"w-full h-56 object-cover"}),o.jsx(Ae,{className:"pt-4",children:o.jsx("p",{className:"text-muted-foreground",children:"ResidentTrack – entwickelt von Chirurg:innen für Chirurg:innen."})})]})]})]})})]}),tK=({currentImageUrl:n,onImageUploaded:e,onImageRemoved:t})=>{const[s,r]=w.useState(!1),[i,a]=w.useState(n||null),l=async d=>{var f;const h=(f=d.target.files)==null?void 0:f[0];if(h){if(!h.type.startsWith("image/")){xe.error("Bitte wählen Sie eine Bilddatei aus");return}if(h.size>10*1024*1024){xe.error("Datei ist zu groß. Maximal 10MB erlaubt.");return}r(!0);try{const m=h.name.split(".").pop(),p=`${Date.now()}-${Math.random().toString(36).substring(7)}.${m}`,{data:x,error:g}=await te.storage.from("course-images").upload(p,h,{cacheControl:"3600",upsert:!1});if(g)throw g;const{data:{publicUrl:b}}=te.storage.from("course-images").getPublicUrl(x.path);a(b),e(b),xe.success("Bild erfolgreich hochgeladen")}catch(m){console.error("Error uploading image:",m),xe.error("Fehler beim Hochladen des Bildes")}finally{r(!1),d.target.value=""}}},c=()=>{a(null),t()};return o.jsxs("div",{className:"space-y-3",children:[o.jsx(ve,{className:"text-foreground",children:"Kursbild"}),i?o.jsxs("div",{className:"relative w-full h-48 bg-muted rounded-lg overflow-hidden border-2 border-dashed border-border",children:[o.jsx("img",{src:i,alt:"Kurs Vorschau",className:"w-full h-full object-cover"}),o.jsx(q,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:c,children:o.jsx(ao,{className:"h-4 w-4"})})]}):o.jsxs("div",{className:"w-full h-48 bg-muted rounded-lg border-2 border-dashed border-border flex flex-col items-center justify-center gap-3",children:[o.jsx(P$,{className:"h-12 w-12 text-muted-foreground"}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Kein Bild ausgewählt"}),o.jsx(ve,{htmlFor:"image-upload",className:"cursor-pointer",children:o.jsx(q,{type:"button",variant:"outline",disabled:s,asChild:!0,children:o.jsxs("span",{children:[o.jsx(cb,{className:"h-4 w-4 mr-2"}),s?"Hochladen...":"Bild auswählen"]})})})]})]}),o.jsx(Re,{id:"image-upload",type:"file",accept:"image/*",onChange:l,disabled:s,className:"hidden"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützte Formate: JPG, PNG, WebP, GIF (max. 10MB)"})]})};function Ue(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Gs(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Bn(n,e){const t=Ue(n);return isNaN(e)?Gs(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function ei(n,e){const t=Ue(n);if(isNaN(e))return Gs(n,NaN);if(!e)return t;const s=t.getDate(),r=Gs(n,t.getTime());r.setMonth(t.getMonth()+e+1,0);const i=r.getDate();return s>=i?r:(t.setFullYear(r.getFullYear(),r.getMonth(),s),t)}const hE=6048e5,nK=864e5;let sK={};function $v(){return sK}function Yi(n,e){var l,c,d,h;const t=$v(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=Ue(n),i=r.getDay(),a=(i<s?7:0)+i-s;return r.setDate(r.getDate()-a),r.setHours(0,0,0,0),r}function Xd(n){return Yi(n,{weekStartsOn:1})}function xF(n){const e=Ue(n),t=e.getFullYear(),s=Gs(n,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const r=Xd(s),i=Gs(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Xd(i);return e.getTime()>=r.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function $f(n){const e=Ue(n);return e.setHours(0,0,0,0),e}function _y(n){const e=Ue(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function zi(n,e){const t=$f(n),s=$f(e),r=+t-_y(t),i=+s-_y(s);return Math.round((r-i)/nK)}function rK(n){const e=xF(n),t=Gs(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Xd(t)}function oN(n,e){const t=e*7;return Bn(n,t)}function iK(n,e){return ei(n,e*12)}function aK(n){let e;return n.forEach(function(t){const s=Ue(t);(e===void 0||e<s||isNaN(Number(s)))&&(e=s)}),e||new Date(NaN)}function oK(n){let e;return n.forEach(t=>{const s=Ue(t);(!e||e>s||isNaN(+s))&&(e=s)}),e||new Date(NaN)}function ds(n,e){const t=$f(n),s=$f(e);return+t==+s}function fE(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function lK(n){if(!fE(n)&&typeof n!="number")return!1;const e=Ue(n);return!isNaN(Number(e))}function Dp(n,e){const t=Ue(n),s=Ue(e),r=t.getFullYear()-s.getFullYear(),i=t.getMonth()-s.getMonth();return r*12+i}function cK(n,e,t){const s=Yi(n,t),r=Yi(e,t),i=+s-_y(s),a=+r-_y(r);return Math.round((i-a)/hE)}function mE(n){const e=Ue(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function ms(n){const e=Ue(n);return e.setDate(1),e.setHours(0,0,0,0),e}function yF(n){const e=Ue(n),t=Gs(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function pE(n,e){var l,c,d,h;const t=$v(),s=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=Ue(n),i=r.getDay(),a=(i<s?-7:0)+6-(i-s);return r.setDate(r.getDate()+a),r.setHours(23,59,59,999),r}function bF(n){return pE(n,{weekStartsOn:1})}const dK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uK=(n,e,t)=>{let s;const r=dK[n];return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function rh(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const hK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pK={date:rh({formats:hK,defaultWidth:"full"}),time:rh({formats:fK,defaultWidth:"full"}),dateTime:rh({formats:mK,defaultWidth:"full"})},gK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vK=(n,e,t,s)=>gK[n];function Li(n){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let r;if(s==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,l=t!=null&&t.width?String(t.width):a;r=n.formattingValues[l]||n.formattingValues[a]}else{const a=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[l]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return r[i]}}const xK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_K={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},SK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},NK=(n,e)=>{const t=Number(n),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},jK={ordinalNumber:NK,era:Li({values:xK,defaultWidth:"wide"}),quarter:Li({values:yK,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Li({values:bK,defaultWidth:"wide"}),day:Li({values:wK,defaultWidth:"wide"}),dayPeriod:Li({values:_K,defaultWidth:"wide",formattingValues:SK,defaultFormattingWidth:"wide"})};function Fi(n){return(e,t={})=>{const s=t.width,r=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],i=e.match(r);if(!i)return null;const a=i[0],l=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(l)?AK(l,f=>f.test(a)):EK(l,f=>f.test(a));let d;d=n.valueCallback?n.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function EK(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function AK(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function wF(n){return(e,t={})=>{const s=e.match(n.matchPattern);if(!s)return null;const r=s[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(r.length);return{value:a,rest:l}}}const CK=/^(\d+)(th|st|nd|rd)?/i,kK=/\d+/i,PK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},TK={any:[/^b/i,/^(a|c)/i]},RK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},MK={any:[/1/i,/2/i,/3/i,/4/i]},IK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},DK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},OK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},FK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$K={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zK={ordinalNumber:wF({matchPattern:CK,parsePattern:kK,valueCallback:n=>parseInt(n,10)}),era:Fi({matchPatterns:PK,defaultMatchWidth:"wide",parsePatterns:TK,defaultParseWidth:"any"}),quarter:Fi({matchPatterns:RK,defaultMatchWidth:"wide",parsePatterns:MK,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fi({matchPatterns:IK,defaultMatchWidth:"wide",parsePatterns:DK,defaultParseWidth:"any"}),day:Fi({matchPatterns:OK,defaultMatchWidth:"wide",parsePatterns:LK,defaultParseWidth:"any"}),dayPeriod:Fi({matchPatterns:FK,defaultMatchWidth:"any",parsePatterns:$K,defaultParseWidth:"any"})},_F={code:"en-US",formatDistance:uK,formatLong:pK,formatRelative:vK,localize:jK,match:zK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function BK(n){const e=Ue(n);return zi(e,yF(e))+1}function SF(n){const e=Ue(n),t=+Xd(e)-+rK(e);return Math.round(t/hE)+1}function NF(n,e){var h,f,m,p;const t=Ue(n),s=t.getFullYear(),r=$v(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,a=Gs(n,0);a.setFullYear(s+1,0,i),a.setHours(0,0,0,0);const l=Yi(a,e),c=Gs(n,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=Yi(c,e);return t.getTime()>=l.getTime()?s+1:t.getTime()>=d.getTime()?s:s-1}function UK(n,e){var l,c,d,h;const t=$v(),s=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,r=NF(n,e),i=Gs(n,0);return i.setFullYear(r,0,s),i.setHours(0,0,0,0),Yi(i,e)}function jF(n,e){const t=Ue(n),s=+Yi(t,e)-+UK(t,e);return Math.round(s/hE)+1}function Xe(n,e){const t=n<0?"-":"",s=Math.abs(n).toString().padStart(e,"0");return t+s}const xo={y(n,e){const t=n.getFullYear(),s=t>0?t:1-t;return Xe(e==="yy"?s%100:s,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Xe(t+1,2)},d(n,e){return Xe(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Xe(n.getHours()%12||12,e.length)},H(n,e){return Xe(n.getHours(),e.length)},m(n,e){return Xe(n.getMinutes(),e.length)},s(n,e){return Xe(n.getSeconds(),e.length)},S(n,e){const t=e.length,s=n.getMilliseconds(),r=Math.trunc(s*Math.pow(10,t-3));return Xe(r,e.length)}},vu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ik={G:function(n,e,t){const s=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const s=n.getFullYear(),r=s>0?s:1-s;return t.ordinalNumber(r,{unit:"year"})}return xo.y(n,e)},Y:function(n,e,t,s){const r=NF(n,s),i=r>0?r:1-r;if(e==="YY"){const a=i%100;return Xe(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Xe(i,e.length)},R:function(n,e){const t=xF(n);return Xe(t,e.length)},u:function(n,e){const t=n.getFullYear();return Xe(t,e.length)},Q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Xe(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(n,e,t){const s=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Xe(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(n,e,t){const s=n.getMonth();switch(e){case"M":case"MM":return xo.M(n,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(n,e,t){const s=n.getMonth();switch(e){case"L":return String(s+1);case"LL":return Xe(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(n,e,t,s){const r=jF(n,s);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Xe(r,e.length)},I:function(n,e,t){const s=SF(n);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Xe(s,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):xo.d(n,e)},D:function(n,e,t){const s=BK(n);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Xe(s,e.length)},E:function(n,e,t){const s=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(n,e,t,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Xe(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,s){const r=n.getDay(),i=(r-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Xe(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){const s=n.getDay(),r=s===0?7:s;switch(e){case"i":return String(r);case"ii":return Xe(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(n,e,t){const r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){const s=n.getHours();let r;switch(s===12?r=vu.noon:s===0?r=vu.midnight:r=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){const s=n.getHours();let r;switch(s>=17?r=vu.evening:s>=12?r=vu.afternoon:s>=4?r=vu.morning:r=vu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let s=n.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return xo.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):xo.H(n,e)},K:function(n,e,t){const s=n.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Xe(s,e.length)},k:function(n,e,t){let s=n.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Xe(s,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):xo.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):xo.s(n,e)},S:function(n,e){return xo.S(n,e)},X:function(n,e,t){const s=n.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Ok(s);case"XXXX":case"XX":return fc(s);case"XXXXX":case"XXX":default:return fc(s,":")}},x:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"x":return Ok(s);case"xxxx":case"xx":return fc(s);case"xxxxx":case"xxx":default:return fc(s,":")}},O:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Dk(s,":");case"OOOO":default:return"GMT"+fc(s,":")}},z:function(n,e,t){const s=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Dk(s,":");case"zzzz":default:return"GMT"+fc(s,":")}},t:function(n,e,t){const s=Math.trunc(n.getTime()/1e3);return Xe(s,e.length)},T:function(n,e,t){const s=n.getTime();return Xe(s,e.length)}};function Dk(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=Math.trunc(s/60),i=s%60;return i===0?t+String(r):t+String(r)+e+Xe(i,2)}function Ok(n,e){return n%60===0?(n>0?"-":"+")+Xe(Math.abs(n)/60,2):fc(n,e)}function fc(n,e=""){const t=n>0?"-":"+",s=Math.abs(n),r=Xe(Math.trunc(s/60),2),i=Xe(s%60,2);return t+r+e+i}const Lk=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},EF=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},HK=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],s=t[1],r=t[2];if(!r)return Lk(n,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Lk(s,e)).replace("{{time}}",EF(r,e))},WK={p:EF,P:HK},VK=/^D+$/,qK=/^Y+$/,GK=["D","DD","YY","YYYY"];function KK(n){return VK.test(n)}function YK(n){return qK.test(n)}function XK(n,e,t){const s=QK(n,e,t);if(console.warn(s),GK.includes(n))throw new RangeError(s)}function QK(n,e,t){const s=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const JK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eY=/^'([^]*?)'?$/,tY=/''/g,nY=/[a-zA-Z]/;function qi(n,e,t){var h,f,m,p,x,g,b,v;const s=$v(),r=(t==null?void 0:t.locale)??s.locale??_F,i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((p=(m=s.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((g=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??s.weekStartsOn??((v=(b=s.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??0,l=Ue(n);if(!lK(l))throw new RangeError("Invalid time value");let c=e.match(ZK).map(y=>{const _=y[0];if(_==="p"||_==="P"){const N=WK[_];return N(y,r.formatLong)}return y}).join("").match(JK).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const _=y[0];if(_==="'")return{isToken:!1,value:sY(y)};if(Ik[_])return{isToken:!0,value:y};if(_.match(nY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:y}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:r};return c.map(y=>{if(!y.isToken)return y.value;const _=y.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&YK(_)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&KK(_))&&XK(_,e,String(n));const N=Ik[_[0]];return N(l,_,r.localize,d)}).join("")}function sY(n){const e=n.match(eY);return e?e[1].replace(tY,"'"):n}function rY(n){const e=Ue(n),t=e.getFullYear(),s=e.getMonth(),r=Gs(n,0);return r.setFullYear(t,s+1,0),r.setHours(0,0,0,0),r.getDate()}function iY(n){return Math.trunc(+Ue(n)/1e3)}function aY(n){const e=Ue(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function oY(n,e){return cK(aY(n),ms(n),e)+1}function lN(n,e){const t=Ue(n),s=Ue(e);return t.getTime()>s.getTime()}function AF(n,e){const t=Ue(n),s=Ue(e);return+t<+s}function gE(n,e){const t=Ue(n),s=Ue(e);return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()}function lY(n,e){const t=Ue(n),s=Ue(e);return t.getFullYear()===s.getFullYear()}function t1(n,e){return Bn(n,-e)}function n1(n,e){const t=Ue(n),s=t.getFullYear(),r=t.getDate(),i=Gs(n,0);i.setFullYear(s,e,15),i.setHours(0,0,0,0);const a=rY(i);return t.setMonth(e,Math.min(r,a)),t}function Fk(n,e){const t=Ue(n);return isNaN(+t)?Gs(n,NaN):(t.setFullYear(e),t)}const $k={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},cY=(n,e,t)=>{let s;const r=t!=null&&t.addSuffix?$k[n].withPreposition:$k[n].standalone;return typeof r=="string"?s=r:e===1?s=r.one:s=r.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:"vor "+s:s},dY={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},uY={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},hY={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},fY={date:rh({formats:dY,defaultWidth:"full"}),time:rh({formats:uY,defaultWidth:"full"}),dateTime:rh({formats:hY,defaultWidth:"full"})},mY={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},pY=(n,e,t,s)=>mY[n],gY={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},vY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},cN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},xY={narrow:cN.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:cN.wide},yY={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},bY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},wY={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},_Y=n=>Number(n)+".",SY={ordinalNumber:_Y,era:Li({values:gY,defaultWidth:"wide"}),quarter:Li({values:vY,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Li({values:cN,formattingValues:xY,defaultWidth:"wide"}),day:Li({values:yY,defaultWidth:"wide"}),dayPeriod:Li({values:bY,defaultWidth:"wide",formattingValues:wY,defaultFormattingWidth:"wide"})},NY=/^(\d+)(\.)?/i,jY=/\d+/i,EY={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},AY={any:[/^v/i,/^n/i]},CY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},kY={any:[/1/i,/2/i,/3/i,/4/i]},PY={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},TY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RY={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},MY={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},IY={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},DY={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},OY={ordinalNumber:wF({matchPattern:NY,parsePattern:jY,valueCallback:n=>parseInt(n)}),era:Fi({matchPatterns:EY,defaultMatchWidth:"wide",parsePatterns:AY,defaultParseWidth:"any"}),quarter:Fi({matchPatterns:CY,defaultMatchWidth:"wide",parsePatterns:kY,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fi({matchPatterns:PY,defaultMatchWidth:"wide",parsePatterns:TY,defaultParseWidth:"any"}),day:Fi({matchPatterns:RY,defaultMatchWidth:"wide",parsePatterns:MY,defaultParseWidth:"any"}),dayPeriod:Fi({matchPatterns:IY,defaultMatchWidth:"wide",parsePatterns:DY,defaultParseWidth:"any"})},s1={code:"de",formatDistance:cY,formatLong:fY,formatRelative:pY,localize:SY,match:OY,options:{weekStartsOn:1,firstWeekContainsDate:4}};var ge=function(){return ge=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ge.apply(this,arguments)};function LY(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function CF(n,e,t){for(var s=0,r=e.length,i;s<r;s++)(i||!(s in e))&&(i||(i=Array.prototype.slice.call(e,0,s)),i[s]=e[s]);return n.concat(i||Array.prototype.slice.call(e))}function zv(n){return n.mode==="multiple"}function Bv(n){return n.mode==="range"}function Ub(n){return n.mode==="single"}var FY={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function $Y(n,e){return qi(n,"LLLL y",e)}function zY(n,e){return qi(n,"d",e)}function BY(n,e){return qi(n,"LLLL",e)}function UY(n){return"".concat(n)}function HY(n,e){return qi(n,"cccccc",e)}function WY(n,e){return qi(n,"yyyy",e)}var VY=Object.freeze({__proto__:null,formatCaption:$Y,formatDay:zY,formatMonthCaption:BY,formatWeekNumber:UY,formatWeekdayName:HY,formatYearCaption:WY}),qY=function(n,e,t){return qi(n,"do MMMM (EEEE)",t)},GY=function(){return"Month: "},KY=function(){return"Go to next month"},YY=function(){return"Go to previous month"},XY=function(n,e){return qi(n,"cccc",e)},QY=function(n){return"Week n. ".concat(n)},JY=function(){return"Year: "},ZY=Object.freeze({__proto__:null,labelDay:qY,labelMonthDropdown:GY,labelNext:KY,labelPrevious:YY,labelWeekNumber:QY,labelWeekday:XY,labelYearDropdown:JY});function eX(){var n="buttons",e=FY,t=_F,s={},r={},i=1,a={},l=new Date;return{captionLayout:n,classNames:e,formatters:VY,labels:ZY,locale:t,modifiersClassNames:s,modifiers:r,numberOfMonths:i,styles:a,today:l,mode:"default"}}function tX(n){var e=n.fromYear,t=n.toYear,s=n.fromMonth,r=n.toMonth,i=n.fromDate,a=n.toDate;return s?i=ms(s):e&&(i=new Date(e,0,1)),r?a=mE(r):t&&(a=new Date(t,11,31)),{fromDate:i?$f(i):void 0,toDate:a?$f(a):void 0}}var kF=w.createContext(void 0);function nX(n){var e,t=n.initialProps,s=eX(),r=tX(t),i=r.fromDate,a=r.toDate,l=(e=t.captionLayout)!==null&&e!==void 0?e:s.captionLayout;l!=="buttons"&&(!i||!a)&&(l="buttons");var c;(Ub(t)||zv(t)||Bv(t))&&(c=t.onSelect);var d=ge(ge(ge({},s),t),{captionLayout:l,classNames:ge(ge({},s.classNames),t.classNames),components:ge({},t.components),formatters:ge(ge({},s.formatters),t.formatters),fromDate:i,labels:ge(ge({},s.labels),t.labels),mode:t.mode||s.mode,modifiers:ge(ge({},s.modifiers),t.modifiers),modifiersClassNames:ge(ge({},s.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:ge(ge({},s.styles),t.styles),toDate:a});return o.jsx(kF.Provider,{value:d,children:n.children})}function ct(){var n=w.useContext(kF);if(!n)throw new Error("useDayPicker must be used within a DayPickerProvider.");return n}function PF(n){var e=ct(),t=e.locale,s=e.classNames,r=e.styles,i=e.formatters.formatCaption;return o.jsx("div",{className:s.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:n.id,children:i(n.displayMonth,{locale:t})})}function sX(n){return o.jsx("svg",ge({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},n,{children:o.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function TF(n){var e,t,s=n.onChange,r=n.value,i=n.children,a=n.caption,l=n.className,c=n.style,d=ct(),h=(t=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:sX;return o.jsxs("div",{className:l,style:c,children:[o.jsx("span",{className:d.classNames.vhidden,children:n["aria-label"]}),o.jsx("select",{name:n.name,"aria-label":n["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:r,onChange:s,children:i}),o.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[a,o.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function rX(n){var e,t=ct(),s=t.fromDate,r=t.toDate,i=t.styles,a=t.locale,l=t.formatters.formatMonthCaption,c=t.classNames,d=t.components,h=t.labels.labelMonthDropdown;if(!s)return o.jsx(o.Fragment,{});if(!r)return o.jsx(o.Fragment,{});var f=[];if(lY(s,r))for(var m=ms(s),p=s.getMonth();p<=r.getMonth();p++)f.push(n1(m,p));else for(var m=ms(new Date),p=0;p<=11;p++)f.push(n1(m,p));var x=function(b){var v=Number(b.target.value),y=n1(ms(n.displayMonth),v);n.onChange(y)},g=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:TF;return o.jsx(g,{name:"months","aria-label":h(),className:c.dropdown_month,style:i.dropdown_month,onChange:x,value:n.displayMonth.getMonth(),caption:l(n.displayMonth,{locale:a}),children:f.map(function(b){return o.jsx("option",{value:b.getMonth(),children:l(b,{locale:a})},b.getMonth())})})}function iX(n){var e,t=n.displayMonth,s=ct(),r=s.fromDate,i=s.toDate,a=s.locale,l=s.styles,c=s.classNames,d=s.components,h=s.formatters.formatYearCaption,f=s.labels.labelYearDropdown,m=[];if(!r)return o.jsx(o.Fragment,{});if(!i)return o.jsx(o.Fragment,{});for(var p=r.getFullYear(),x=i.getFullYear(),g=p;g<=x;g++)m.push(Fk(yF(new Date),g));var b=function(y){var _=Fk(ms(t),Number(y.target.value));n.onChange(_)},v=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:TF;return o.jsx(v,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:b,value:t.getFullYear(),caption:h(t,{locale:a}),children:m.map(function(y){return o.jsx("option",{value:y.getFullYear(),children:h(y,{locale:a})},y.getFullYear())})})}function aX(n,e){var t=w.useState(n),s=t[0],r=t[1],i=e===void 0?s:e;return[i,r]}function oX(n){var e=n.month,t=n.defaultMonth,s=n.today,r=e||t||s||new Date,i=n.toDate,a=n.fromDate,l=n.numberOfMonths,c=l===void 0?1:l;if(i&&Dp(i,r)<0){var d=-1*(c-1);r=ei(i,d)}return a&&Dp(r,a)<0&&(r=a),ms(r)}function lX(){var n=ct(),e=oX(n),t=aX(e,n.month),s=t[0],r=t[1],i=function(a){var l;if(!n.disableNavigation){var c=ms(a);r(c),(l=n.onMonthChange)===null||l===void 0||l.call(n,c)}};return[s,i]}function cX(n,e){for(var t=e.reverseMonths,s=e.numberOfMonths,r=ms(n),i=ms(ei(r,s)),a=Dp(i,r),l=[],c=0;c<a;c++){var d=ei(r,c);l.push(d)}return t&&(l=l.reverse()),l}function dX(n,e){if(!e.disableNavigation){var t=e.toDate,s=e.pagedNavigation,r=e.numberOfMonths,i=r===void 0?1:r,a=s?i:1,l=ms(n);if(!t)return ei(l,a);var c=Dp(t,n);if(!(c<i))return ei(l,a)}}function uX(n,e){if(!e.disableNavigation){var t=e.fromDate,s=e.pagedNavigation,r=e.numberOfMonths,i=r===void 0?1:r,a=s?i:1,l=ms(n);if(!t)return ei(l,-a);var c=Dp(l,t);if(!(c<=0))return ei(l,-a)}}var RF=w.createContext(void 0);function hX(n){var e=ct(),t=lX(),s=t[0],r=t[1],i=cX(s,e),a=dX(s,e),l=uX(s,e),c=function(f){return i.some(function(m){return gE(f,m)})},d=function(f,m){c(f)||(m&&AF(f,m)?r(ei(f,1+e.numberOfMonths*-1)):r(f))},h={currentMonth:s,displayMonths:i,goToMonth:r,goToDate:d,previousMonth:l,nextMonth:a,isDateDisplayed:c};return o.jsx(RF.Provider,{value:h,children:n.children})}function Uv(){var n=w.useContext(RF);if(!n)throw new Error("useNavigation must be used within a NavigationProvider");return n}function zk(n){var e,t=ct(),s=t.classNames,r=t.styles,i=t.components,a=Uv().goToMonth,l=function(h){a(ei(h,n.displayIndex?-n.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:PF,d=o.jsx(c,{id:n.id,displayMonth:n.displayMonth});return o.jsxs("div",{className:s.caption_dropdowns,style:r.caption_dropdowns,children:[o.jsx("div",{className:s.vhidden,children:d}),o.jsx(rX,{onChange:l,displayMonth:n.displayMonth}),o.jsx(iX,{onChange:l,displayMonth:n.displayMonth})]})}function fX(n){return o.jsx("svg",ge({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:o.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function mX(n){return o.jsx("svg",ge({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:o.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Sy=w.forwardRef(function(n,e){var t=ct(),s=t.classNames,r=t.styles,i=[s.button_reset,s.button];n.className&&i.push(n.className);var a=i.join(" "),l=ge(ge({},r.button_reset),r.button);return n.style&&Object.assign(l,n.style),o.jsx("button",ge({},n,{ref:e,type:"button",className:a,style:l}))});function pX(n){var e,t,s=ct(),r=s.dir,i=s.locale,a=s.classNames,l=s.styles,c=s.labels,d=c.labelPrevious,h=c.labelNext,f=s.components;if(!n.nextMonth&&!n.previousMonth)return o.jsx(o.Fragment,{});var m=d(n.previousMonth,{locale:i}),p=[a.nav_button,a.nav_button_previous].join(" "),x=h(n.nextMonth,{locale:i}),g=[a.nav_button,a.nav_button_next].join(" "),b=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:mX,v=(t=f==null?void 0:f.IconLeft)!==null&&t!==void 0?t:fX;return o.jsxs("div",{className:a.nav,style:l.nav,children:[!n.hidePrevious&&o.jsx(Sy,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!n.previousMonth,onClick:n.onPreviousClick,children:r==="rtl"?o.jsx(b,{className:a.nav_icon,style:l.nav_icon}):o.jsx(v,{className:a.nav_icon,style:l.nav_icon})}),!n.hideNext&&o.jsx(Sy,{name:"next-month","aria-label":x,className:g,style:l.nav_button_next,disabled:!n.nextMonth,onClick:n.onNextClick,children:r==="rtl"?o.jsx(v,{className:a.nav_icon,style:l.nav_icon}):o.jsx(b,{className:a.nav_icon,style:l.nav_icon})})]})}function Bk(n){var e=ct().numberOfMonths,t=Uv(),s=t.previousMonth,r=t.nextMonth,i=t.goToMonth,a=t.displayMonths,l=a.findIndex(function(x){return gE(n.displayMonth,x)}),c=l===0,d=l===a.length-1,h=e>1&&(c||!d),f=e>1&&(d||!c),m=function(){s&&i(s)},p=function(){r&&i(r)};return o.jsx(pX,{displayMonth:n.displayMonth,hideNext:h,hidePrevious:f,nextMonth:r,previousMonth:s,onPreviousClick:m,onNextClick:p})}function gX(n){var e,t=ct(),s=t.classNames,r=t.disableNavigation,i=t.styles,a=t.captionLayout,l=t.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:PF,d;return r?d=o.jsx(c,{id:n.id,displayMonth:n.displayMonth}):a==="dropdown"?d=o.jsx(zk,{displayMonth:n.displayMonth,id:n.id}):a==="dropdown-buttons"?d=o.jsxs(o.Fragment,{children:[o.jsx(zk,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id}),o.jsx(Bk,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id})]}):d=o.jsxs(o.Fragment,{children:[o.jsx(c,{id:n.id,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),o.jsx(Bk,{displayMonth:n.displayMonth,id:n.id})]}),o.jsx("div",{className:s.caption,style:i.caption,children:d})}function vX(n){var e=ct(),t=e.footer,s=e.styles,r=e.classNames.tfoot;return t?o.jsx("tfoot",{className:r,style:s.tfoot,children:o.jsx("tr",{children:o.jsx("td",{colSpan:8,children:t})})}):o.jsx(o.Fragment,{})}function xX(n,e,t){for(var s=t?Xd(new Date):Yi(new Date,{locale:n,weekStartsOn:e}),r=[],i=0;i<7;i++){var a=Bn(s,i);r.push(a)}return r}function yX(){var n=ct(),e=n.classNames,t=n.styles,s=n.showWeekNumber,r=n.locale,i=n.weekStartsOn,a=n.ISOWeek,l=n.formatters.formatWeekdayName,c=n.labels.labelWeekday,d=xX(r,i,a);return o.jsxs("tr",{style:t.head_row,className:e.head_row,children:[s&&o.jsx("td",{style:t.head_cell,className:e.head_cell}),d.map(function(h,f){return o.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":c(h,{locale:r}),children:l(h,{locale:r})},f)})]})}function bX(){var n,e=ct(),t=e.classNames,s=e.styles,r=e.components,i=(n=r==null?void 0:r.HeadRow)!==null&&n!==void 0?n:yX;return o.jsx("thead",{style:s.head,className:t.head,children:o.jsx(i,{})})}function wX(n){var e=ct(),t=e.locale,s=e.formatters.formatDay;return o.jsx(o.Fragment,{children:s(n.date,{locale:t})})}var vE=w.createContext(void 0);function _X(n){if(!zv(n.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return o.jsx(vE.Provider,{value:e,children:n.children})}return o.jsx(SX,{initialProps:n.initialProps,children:n.children})}function SX(n){var e=n.initialProps,t=n.children,s=e.selected,r=e.min,i=e.max,a=function(d,h,f){var m,p;(m=e.onDayClick)===null||m===void 0||m.call(e,d,h,f);var x=!!(h.selected&&r&&(s==null?void 0:s.length)===r);if(!x){var g=!!(!h.selected&&i&&(s==null?void 0:s.length)===i);if(!g){var b=s?CF([],s):[];if(h.selected){var v=b.findIndex(function(y){return ds(d,y)});b.splice(v,1)}else b.push(d);(p=e.onSelect)===null||p===void 0||p.call(e,b,d,h,f)}}},l={disabled:[]};s&&l.disabled.push(function(d){var h=i&&s.length>i-1,f=s.some(function(m){return ds(m,d)});return!!(h&&!f)});var c={selected:s,onDayClick:a,modifiers:l};return o.jsx(vE.Provider,{value:c,children:t})}function xE(){var n=w.useContext(vE);if(!n)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return n}function NX(n,e){var t=e||{},s=t.from,r=t.to;return s&&r?ds(r,n)&&ds(s,n)?void 0:ds(r,n)?{from:r,to:void 0}:ds(s,n)?void 0:lN(s,n)?{from:n,to:r}:{from:s,to:n}:r?lN(n,r)?{from:r,to:n}:{from:n,to:r}:s?AF(n,s)?{from:n,to:s}:{from:s,to:n}:{from:n,to:void 0}}var yE=w.createContext(void 0);function jX(n){if(!Bv(n.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return o.jsx(yE.Provider,{value:e,children:n.children})}return o.jsx(EX,{initialProps:n.initialProps,children:n.children})}function EX(n){var e=n.initialProps,t=n.children,s=e.selected,r=s||{},i=r.from,a=r.to,l=e.min,c=e.max,d=function(p,x,g){var b,v;(b=e.onDayClick)===null||b===void 0||b.call(e,p,x,g);var y=NX(p,s);(v=e.onSelect)===null||v===void 0||v.call(e,y,p,x,g)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],a?(h.range_end=[a],ds(i,a)||(h.range_middle=[{after:i,before:a}])):h.range_end=[i]):a&&(h.range_start=[a],h.range_end=[a]),l&&(i&&!a&&h.disabled.push({after:t1(i,l-1),before:Bn(i,l-1)}),i&&a&&h.disabled.push({after:i,before:Bn(i,l-1)}),!i&&a&&h.disabled.push({after:t1(a,l-1),before:Bn(a,l-1)})),c){if(i&&!a&&(h.disabled.push({before:Bn(i,-c+1)}),h.disabled.push({after:Bn(i,c-1)})),i&&a){var f=zi(a,i)+1,m=c-f;h.disabled.push({before:t1(i,m)}),h.disabled.push({after:Bn(a,m)})}!i&&a&&(h.disabled.push({before:Bn(a,-c+1)}),h.disabled.push({after:Bn(a,c-1)}))}return o.jsx(yE.Provider,{value:{selected:s,onDayClick:d,modifiers:h},children:t})}function bE(){var n=w.useContext(yE);if(!n)throw new Error("useSelectRange must be used within a SelectRangeProvider");return n}function j0(n){return Array.isArray(n)?CF([],n):n!==void 0?[n]:[]}function AX(n){var e={};return Object.entries(n).forEach(function(t){var s=t[0],r=t[1];e[s]=j0(r)}),e}var ti;(function(n){n.Outside="outside",n.Disabled="disabled",n.Selected="selected",n.Hidden="hidden",n.Today="today",n.RangeStart="range_start",n.RangeEnd="range_end",n.RangeMiddle="range_middle"})(ti||(ti={}));var CX=ti.Selected,ea=ti.Disabled,kX=ti.Hidden,PX=ti.Today,r1=ti.RangeEnd,i1=ti.RangeMiddle,a1=ti.RangeStart,TX=ti.Outside;function RX(n,e,t){var s,r=(s={},s[CX]=j0(n.selected),s[ea]=j0(n.disabled),s[kX]=j0(n.hidden),s[PX]=[n.today],s[r1]=[],s[i1]=[],s[a1]=[],s[TX]=[],s);return n.fromDate&&r[ea].push({before:n.fromDate}),n.toDate&&r[ea].push({after:n.toDate}),zv(n)?r[ea]=r[ea].concat(e.modifiers[ea]):Bv(n)&&(r[ea]=r[ea].concat(t.modifiers[ea]),r[a1]=t.modifiers[a1],r[i1]=t.modifiers[i1],r[r1]=t.modifiers[r1]),r}var MF=w.createContext(void 0);function MX(n){var e=ct(),t=xE(),s=bE(),r=RX(e,t,s),i=AX(e.modifiers),a=ge(ge({},r),i);return o.jsx(MF.Provider,{value:a,children:n.children})}function IF(){var n=w.useContext(MF);if(!n)throw new Error("useModifiers must be used within a ModifiersProvider");return n}function IX(n){return!!(n&&typeof n=="object"&&"before"in n&&"after"in n)}function DX(n){return!!(n&&typeof n=="object"&&"from"in n)}function OX(n){return!!(n&&typeof n=="object"&&"after"in n)}function LX(n){return!!(n&&typeof n=="object"&&"before"in n)}function FX(n){return!!(n&&typeof n=="object"&&"dayOfWeek"in n)}function $X(n,e){var t,s=e.from,r=e.to;if(s&&r){var i=zi(r,s)<0;i&&(t=[r,s],s=t[0],r=t[1]);var a=zi(n,s)>=0&&zi(r,n)>=0;return a}return r?ds(r,n):s?ds(s,n):!1}function zX(n){return fE(n)}function BX(n){return Array.isArray(n)&&n.every(fE)}function UX(n,e){return e.some(function(t){if(typeof t=="boolean")return t;if(zX(t))return ds(n,t);if(BX(t))return t.includes(n);if(DX(t))return $X(n,t);if(FX(t))return t.dayOfWeek.includes(n.getDay());if(IX(t)){var s=zi(t.before,n),r=zi(t.after,n),i=s>0,a=r<0,l=lN(t.before,t.after);return l?a&&i:i||a}return OX(t)?zi(n,t.after)>0:LX(t)?zi(t.before,n)>0:typeof t=="function"?t(n):!1})}function wE(n,e,t){var s=Object.keys(e).reduce(function(i,a){var l=e[a];return UX(n,l)&&i.push(a),i},[]),r={};return s.forEach(function(i){return r[i]=!0}),t&&!gE(n,t)&&(r.outside=!0),r}function HX(n,e){for(var t=ms(n[0]),s=mE(n[n.length-1]),r,i,a=t;a<=s;){var l=wE(a,e),c=!l.disabled&&!l.hidden;if(!c){a=Bn(a,1);continue}if(l.selected)return a;l.today&&!i&&(i=a),r||(r=a),a=Bn(a,1)}return i||r}var WX=365;function DF(n,e){var t=e.moveBy,s=e.direction,r=e.context,i=e.modifiers,a=e.retry,l=a===void 0?{count:0,lastFocused:n}:a,c=r.weekStartsOn,d=r.fromDate,h=r.toDate,f=r.locale,m={day:Bn,week:oN,month:ei,year:iK,startOfWeek:function(b){return r.ISOWeek?Xd(b):Yi(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return r.ISOWeek?bF(b):pE(b,{locale:f,weekStartsOn:c})}},p=m[t](n,s==="after"?1:-1);s==="before"&&d?p=aK([d,p]):s==="after"&&h&&(p=oK([h,p]));var x=!0;if(i){var g=wE(p,i);x=!g.disabled&&!g.hidden}return x?p:l.count>WX?l.lastFocused:DF(p,{moveBy:t,direction:s,context:r,modifiers:i,retry:ge(ge({},l),{count:l.count+1})})}var OF=w.createContext(void 0);function VX(n){var e=Uv(),t=IF(),s=w.useState(),r=s[0],i=s[1],a=w.useState(),l=a[0],c=a[1],d=HX(e.displayMonths,t),h=r??(l&&e.isDateDisplayed(l))?l:d,f=function(){c(r),i(void 0)},m=function(b){i(b)},p=ct(),x=function(b,v){if(r){var y=DF(r,{moveBy:b,direction:v,context:p,modifiers:t});ds(r,y)||(e.goToDate(y,r),m(y))}},g={focusedDay:r,focusTarget:h,blur:f,focus:m,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return o.jsx(OF.Provider,{value:g,children:n.children})}function _E(){var n=w.useContext(OF);if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n}function qX(n,e){var t=IF(),s=wE(n,t,e);return s}var SE=w.createContext(void 0);function GX(n){if(!Ub(n.initialProps)){var e={selected:void 0};return o.jsx(SE.Provider,{value:e,children:n.children})}return o.jsx(KX,{initialProps:n.initialProps,children:n.children})}function KX(n){var e=n.initialProps,t=n.children,s=function(i,a,l){var c,d,h;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,a,l),a.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,i,a,l);return}(h=e.onSelect)===null||h===void 0||h.call(e,i,i,a,l)},r={selected:e.selected,onDayClick:s};return o.jsx(SE.Provider,{value:r,children:t})}function LF(){var n=w.useContext(SE);if(!n)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return n}function YX(n,e){var t=ct(),s=LF(),r=xE(),i=bE(),a=_E(),l=a.focusDayAfter,c=a.focusDayBefore,d=a.focusWeekAfter,h=a.focusWeekBefore,f=a.blur,m=a.focus,p=a.focusMonthBefore,x=a.focusMonthAfter,g=a.focusYearBefore,b=a.focusYearAfter,v=a.focusStartOfWeek,y=a.focusEndOfWeek,_=function(O){var D,R,U,X;Ub(t)?(D=s.onDayClick)===null||D===void 0||D.call(s,n,e,O):zv(t)?(R=r.onDayClick)===null||R===void 0||R.call(r,n,e,O):Bv(t)?(U=i.onDayClick)===null||U===void 0||U.call(i,n,e,O):(X=t.onDayClick)===null||X===void 0||X.call(t,n,e,O)},N=function(O){var D;m(n),(D=t.onDayFocus)===null||D===void 0||D.call(t,n,e,O)},j=function(O){var D;f(),(D=t.onDayBlur)===null||D===void 0||D.call(t,n,e,O)},A=function(O){var D;(D=t.onDayMouseEnter)===null||D===void 0||D.call(t,n,e,O)},E=function(O){var D;(D=t.onDayMouseLeave)===null||D===void 0||D.call(t,n,e,O)},P=function(O){var D;(D=t.onDayPointerEnter)===null||D===void 0||D.call(t,n,e,O)},T=function(O){var D;(D=t.onDayPointerLeave)===null||D===void 0||D.call(t,n,e,O)},I=function(O){var D;(D=t.onDayTouchCancel)===null||D===void 0||D.call(t,n,e,O)},M=function(O){var D;(D=t.onDayTouchEnd)===null||D===void 0||D.call(t,n,e,O)},L=function(O){var D;(D=t.onDayTouchMove)===null||D===void 0||D.call(t,n,e,O)},z=function(O){var D;(D=t.onDayTouchStart)===null||D===void 0||D.call(t,n,e,O)},$=function(O){var D;(D=t.onDayKeyUp)===null||D===void 0||D.call(t,n,e,O)},W=function(O){var D;switch(O.key){case"ArrowLeft":O.preventDefault(),O.stopPropagation(),t.dir==="rtl"?l():c();break;case"ArrowRight":O.preventDefault(),O.stopPropagation(),t.dir==="rtl"?c():l();break;case"ArrowDown":O.preventDefault(),O.stopPropagation(),d();break;case"ArrowUp":O.preventDefault(),O.stopPropagation(),h();break;case"PageUp":O.preventDefault(),O.stopPropagation(),O.shiftKey?g():p();break;case"PageDown":O.preventDefault(),O.stopPropagation(),O.shiftKey?b():x();break;case"Home":O.preventDefault(),O.stopPropagation(),v();break;case"End":O.preventDefault(),O.stopPropagation(),y();break}(D=t.onDayKeyDown)===null||D===void 0||D.call(t,n,e,O)},F={onClick:_,onFocus:N,onBlur:j,onKeyDown:W,onKeyUp:$,onMouseEnter:A,onMouseLeave:E,onPointerEnter:P,onPointerLeave:T,onTouchCancel:I,onTouchEnd:M,onTouchMove:L,onTouchStart:z};return F}function XX(){var n=ct(),e=LF(),t=xE(),s=bE(),r=Ub(n)?e.selected:zv(n)?t.selected:Bv(n)?s.selected:void 0;return r}function QX(n){return Object.values(ti).includes(n)}function JX(n,e){var t=[n.classNames.day];return Object.keys(e).forEach(function(s){var r=n.modifiersClassNames[s];if(r)t.push(r);else if(QX(s)){var i=n.classNames["day_".concat(s)];i&&t.push(i)}}),t}function ZX(n,e){var t=ge({},n.styles.day);return Object.keys(e).forEach(function(s){var r;t=ge(ge({},t),(r=n.modifiersStyles)===null||r===void 0?void 0:r[s])}),t}function eQ(n,e,t){var s,r,i,a=ct(),l=_E(),c=qX(n,e),d=YX(n,c),h=XX(),f=!!(a.onDayClick||a.mode!=="default");w.useEffect(function(){var A;c.outside||l.focusedDay&&f&&ds(l.focusedDay,n)&&((A=t.current)===null||A===void 0||A.focus())},[l.focusedDay,n,t,f,c.outside]);var m=JX(a,c).join(" "),p=ZX(a,c),x=!!(c.outside&&!a.showOutsideDays||c.hidden),g=(i=(r=a.components)===null||r===void 0?void 0:r.DayContent)!==null&&i!==void 0?i:wX,b=o.jsx(g,{date:n,displayMonth:e,activeModifiers:c}),v={style:p,className:m,children:b,role:"gridcell"},y=l.focusTarget&&ds(l.focusTarget,n)&&!c.outside,_=l.focusedDay&&ds(l.focusedDay,n),N=ge(ge(ge({},v),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=_||y?0:-1,s)),d),j={isButton:f,isHidden:x,activeModifiers:c,selectedDays:h,buttonProps:N,divProps:v};return j}function tQ(n){var e=w.useRef(null),t=eQ(n.date,n.displayMonth,e);return t.isHidden?o.jsx("div",{role:"gridcell"}):t.isButton?o.jsx(Sy,ge({name:"day",ref:e},t.buttonProps)):o.jsx("div",ge({},t.divProps))}function nQ(n){var e=n.number,t=n.dates,s=ct(),r=s.onWeekNumberClick,i=s.styles,a=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,d=s.formatters.formatWeekNumber,h=d(Number(e),{locale:l});if(!r)return o.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:h});var f=c(Number(e),{locale:l}),m=function(p){r(e,t,p)};return o.jsx(Sy,{name:"week-number","aria-label":f,className:a.weeknumber,style:i.weeknumber,onClick:m,children:h})}function sQ(n){var e,t,s=ct(),r=s.styles,i=s.classNames,a=s.showWeekNumber,l=s.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:tQ,d=(t=l==null?void 0:l.WeekNumber)!==null&&t!==void 0?t:nQ,h;return a&&(h=o.jsx("td",{className:i.cell,style:r.cell,children:o.jsx(d,{number:n.weekNumber,dates:n.dates})})),o.jsxs("tr",{className:i.row,style:r.row,children:[h,n.dates.map(function(f){return o.jsx("td",{className:i.cell,style:r.cell,role:"presentation",children:o.jsx(c,{displayMonth:n.displayMonth,date:f})},iY(f))})]})}function Uk(n,e,t){for(var s=t!=null&&t.ISOWeek?bF(e):pE(e,t),r=t!=null&&t.ISOWeek?Xd(n):Yi(n,t),i=zi(s,r),a=[],l=0;l<=i;l++)a.push(Bn(r,l));var c=a.reduce(function(d,h){var f=t!=null&&t.ISOWeek?SF(h):jF(h,t),m=d.find(function(p){return p.weekNumber===f});return m?(m.dates.push(h),d):(d.push({weekNumber:f,dates:[h]}),d)},[]);return c}function rQ(n,e){var t=Uk(ms(n),mE(n),e);if(e!=null&&e.useFixedWeeks){var s=oY(n,e);if(s<6){var r=t[t.length-1],i=r.dates[r.dates.length-1],a=oN(i,6-s),l=Uk(oN(i,1),a,e);t.push.apply(t,l)}}return t}function iQ(n){var e,t,s,r=ct(),i=r.locale,a=r.classNames,l=r.styles,c=r.hideHead,d=r.fixedWeeks,h=r.components,f=r.weekStartsOn,m=r.firstWeekContainsDate,p=r.ISOWeek,x=rQ(n.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:f,firstWeekContainsDate:m}),g=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:bX,b=(t=h==null?void 0:h.Row)!==null&&t!==void 0?t:sQ,v=(s=h==null?void 0:h.Footer)!==null&&s!==void 0?s:vX;return o.jsxs("table",{id:n.id,className:a.table,style:l.table,role:"grid","aria-labelledby":n["aria-labelledby"],children:[!c&&o.jsx(g,{}),o.jsx("tbody",{className:a.tbody,style:l.tbody,children:x.map(function(y){return o.jsx(b,{displayMonth:n.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),o.jsx(v,{displayMonth:n.displayMonth})]})}function aQ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var oQ=aQ()?w.useLayoutEffect:w.useEffect,o1=!1,lQ=0;function Hk(){return"react-day-picker-".concat(++lQ)}function cQ(n){var e,t=n??(o1?Hk():null),s=w.useState(t),r=s[0],i=s[1];return oQ(function(){r===null&&i(Hk())},[]),w.useEffect(function(){o1===!1&&(o1=!0)},[]),(e=n??r)!==null&&e!==void 0?e:void 0}function dQ(n){var e,t,s=ct(),r=s.dir,i=s.classNames,a=s.styles,l=s.components,c=Uv().displayMonths,d=cQ(s.id?"".concat(s.id,"-").concat(n.displayIndex):void 0),h=s.id?"".concat(s.id,"-grid-").concat(n.displayIndex):void 0,f=[i.month],m=a.month,p=n.displayIndex===0,x=n.displayIndex===c.length-1,g=!p&&!x;r==="rtl"&&(e=[p,x],x=e[0],p=e[1]),p&&(f.push(i.caption_start),m=ge(ge({},m),a.caption_start)),x&&(f.push(i.caption_end),m=ge(ge({},m),a.caption_end)),g&&(f.push(i.caption_between),m=ge(ge({},m),a.caption_between));var b=(t=l==null?void 0:l.Caption)!==null&&t!==void 0?t:gX;return o.jsxs("div",{className:f.join(" "),style:m,children:[o.jsx(b,{id:d,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),o.jsx(iQ,{id:h,"aria-labelledby":d,displayMonth:n.displayMonth})]},n.displayIndex)}function uQ(n){var e=ct(),t=e.classNames,s=e.styles;return o.jsx("div",{className:t.months,style:s.months,children:n.children})}function hQ(n){var e,t,s=n.initialProps,r=ct(),i=_E(),a=Uv(),l=w.useState(!1),c=l[0],d=l[1];w.useEffect(function(){r.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[r.initialFocus,c,i.focus,i.focusTarget,i]);var h=[r.classNames.root,r.className];r.numberOfMonths>1&&h.push(r.classNames.multiple_months),r.showWeekNumber&&h.push(r.classNames.with_weeknumber);var f=ge(ge({},r.styles.root),r.style),m=Object.keys(s).filter(function(x){return x.startsWith("data-")}).reduce(function(x,g){var b;return ge(ge({},x),(b={},b[g]=s[g],b))},{}),p=(t=(e=s.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:uQ;return o.jsx("div",ge({className:h.join(" "),style:f,dir:r.dir,id:r.id,nonce:s.nonce,title:s.title,lang:s.lang},m,{children:o.jsx(p,{children:a.displayMonths.map(function(x,g){return o.jsx(dQ,{displayIndex:g,displayMonth:x},g)})})}))}function fQ(n){var e=n.children,t=LY(n,["children"]);return o.jsx(nX,{initialProps:t,children:o.jsx(hX,{children:o.jsx(GX,{initialProps:t,children:o.jsx(_X,{initialProps:t,children:o.jsx(jX,{initialProps:t,children:o.jsx(MX,{children:o.jsx(VX,{children:e})})})})})})})}function mQ(n){return o.jsx(fQ,ge({},n,{children:o.jsx(hQ,{initialProps:n})}))}function E0({className:n,classNames:e,showOutsideDays:t=!0,...s}){return o.jsx(mQ,{showOutsideDays:t,className:ne("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ne(v_({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ne(v_({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...r})=>o.jsx(b$,{className:"h-4 w-4"}),IconRight:({...r})=>o.jsx(w$,{className:"h-4 w-4"})},...s})}E0.displayName="Calendar";const pQ=()=>{const{user:n,loading:e}=Ql(),t=lo(),[s,r]=w.useState([]),[i,a]=w.useState(!0),[l,c]=w.useState(!1),[d,h]=w.useState(null),[f,m]=w.useState({}),p=(j,A="CHF")=>j==null?"k.A.":j===0?"Kostenlos":`${j} ${A}`;w.useEffect(()=>{if(!e&&!n){t("/auth");return}n&&x()},[n,e,t,x]);const x=w.useCallback(async()=>{try{const{data:j}=await te.from("profiles").select("role").eq("user_id",n==null?void 0:n.id).single();if((j==null?void 0:j.role)!=="admin"){xe.error("Zugriff verweigert. Admin-Berechtigung erforderlich."),t("/");return}g()}catch(j){console.error("Error checking admin access:",j),t("/")}},[n==null?void 0:n.id,t]),g=async()=>{try{a(!0);const{data:j,error:A}=await te.from("courses").select("*").order("created_at",{ascending:!1});if(A)throw A;r(j||[])}catch(j){console.error("Error loading courses:",j),xe.error("Fehler beim Laden der Kurse")}finally{a(!1)}},b=j=>{h(j),m(j),c(!0)},v=()=>{h(null),m({title:"",description:"",venue:"",city:"",country:"",specialty:"",language:"Deutsch",modality:"onsite",price:null,currency:"CHF",difficulty_level:"beginner",tags:[],status:"draft",cover_image_url:null,start_date:null,end_date:null,registration_deadline:null}),c(!0)},y=async()=>{var j;try{if(!n||!f.title||!f.venue){xe.error("Titel und Veranstalter sind Pflichtfelder");return}const A={title:f.title,provider_id:n.id,description:f.description||"",venue:f.venue,city:f.city||"",country:f.country||"",specialty:f.specialty||null,language:f.language||"Deutsch",modality:f.modality||"onsite",price:f.price,currency:f.currency||"CHF",difficulty_level:f.difficulty_level||"beginner",status:f.status||"draft",cover_image_url:f.cover_image_url||null,start_date:f.start_date||null,end_date:f.end_date||null,registration_deadline:f.registration_deadline||null,tags:Array.isArray(f.tags)?f.tags:((j=f.tags)==null?void 0:j.split(",").map(E=>E.trim()))||[]};if(d){const{error:E}=await te.from("courses").update(A).eq("id",d.id);if(E)throw E;xe.success("Kurs erfolgreich aktualisiert")}else{const{error:E}=await te.from("courses").insert([A]);if(E)throw E;xe.success("Kurs erfolgreich erstellt")}c(!1),g()}catch(A){console.error("Error saving course:",A),xe.error("Fehler beim Speichern des Kurses")}},_=async j=>{if(confirm("Sind Sie sicher, dass Sie diesen Kurs löschen möchten?"))try{const{error:A}=await te.from("courses").delete().eq("id",j);if(A)throw A;xe.success("Kurs erfolgreich gelöscht"),g()}catch(A){console.error("Error deleting course:",A),xe.error("Fehler beim Löschen des Kurses")}},N=(j,A)=>{m(E=>({...E,[j]:A}))};return i?o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsx("main",{className:"container mx-auto px-4 py-8",children:o.jsx("div",{className:"flex justify-center items-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsxs("main",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"CMS Administration"}),o.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Kurse und Inhalte"})]}),o.jsxs(q,{onClick:v,className:"gap-2",children:[o.jsx(Wi,{className:"h-4 w-4"}),"Neuen Kurs erstellen"]})]}),o.jsxs(gr,{defaultValue:"courses",className:"space-y-6",children:[o.jsxs(qs,{children:[o.jsxs(He,{value:"courses",className:"gap-2",children:[o.jsx(Qr,{className:"h-4 w-4"}),"Kurse"]}),o.jsxs(He,{value:"users",className:"gap-2",children:[o.jsx(Hf,{className:"h-4 w-4"}),"Benutzer"]}),o.jsxs(He,{value:"settings",className:"gap-2",children:[o.jsx(ob,{className:"h-4 w-4"}),"Einstellungen"]})]}),o.jsx(Ge,{value:"courses",className:"space-y-6",children:o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsx(st,{children:"Kursverwaltung"})}),o.jsx(Ae,{children:o.jsxs(If,{children:[o.jsx(Df,{children:o.jsxs(qr,{children:[o.jsx(Oe,{children:"Titel"}),o.jsx(Oe,{children:"Veranstalter"}),o.jsx(Oe,{children:"Ort"}),o.jsx(Oe,{children:"Modalität"}),o.jsx(Oe,{children:"Status"}),o.jsx(Oe,{children:"Preis"}),o.jsx(Oe,{children:"Aktionen"})]})}),o.jsx(Of,{children:s.map(j=>o.jsxs(qr,{children:[o.jsx(Le,{className:"font-medium",children:j.title}),o.jsx(Le,{children:j.venue}),o.jsxs(Le,{children:[j.city,", ",j.country]}),o.jsx(Le,{children:o.jsx(oe,{variant:"outline",children:j.modality})}),o.jsx(Le,{children:o.jsx(oe,{variant:j.status==="published"?"default":"secondary",children:j.status})}),o.jsx(Le,{children:p(j.price,j.currency)}),o.jsx(Le,{children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{variant:"outline",size:"sm",onClick:()=>b(j),children:o.jsx(fj,{className:"h-3 w-3"})}),o.jsx(q,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>_(j.id),children:o.jsx(YT,{className:"h-3 w-3"})})]})})]},j.id))})]})})]})}),o.jsx(Ge,{value:"users",children:o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsx(st,{children:"Benutzerverwaltung"})}),o.jsx(Ae,{children:o.jsx("p",{className:"text-muted-foreground",children:"Benutzerverwaltung wird in zukünftigen Updates verfügbar sein."})})]})}),o.jsx(Ge,{value:"settings",children:o.jsxs(Y,{children:[o.jsx(Je,{children:o.jsx(st,{children:"Systemeinstellungen"})}),o.jsx(Ae,{children:o.jsx("p",{className:"text-muted-foreground",children:"Systemeinstellungen werden in zukünftigen Updates verfügbar sein."})})]})})]}),o.jsx(kv,{open:l,onOpenChange:c,children:o.jsxs(Jf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white text-gray-900 border border-gray-200 shadow-lg",children:[o.jsx(Zf,{children:o.jsx(em,{className:"text-gray-900",children:d?"Kurs bearbeiten":"Neuen Kurs erstellen"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Grundinformationen"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"title",className:"text-foreground",children:"Titel *"}),o.jsx(Re,{id:"title",value:f.title||"",onChange:j=>N("title",j.target.value),placeholder:"Kurstitel eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"venue",className:"text-foreground",children:"Veranstalter *"}),o.jsx(Re,{id:"venue",value:f.venue||"",onChange:j=>N("venue",j.target.value),placeholder:"Veranstalter eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"city",className:"text-foreground",children:"Stadt"}),o.jsx(Re,{id:"city",value:f.city||"",onChange:j=>N("city",j.target.value),placeholder:"Stadt eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"country",className:"text-foreground",children:"Land"}),o.jsx(Re,{id:"country",value:f.country||"",onChange:j=>N("country",j.target.value),placeholder:"Land eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),o.jsxs("div",{className:"space-y-2 md:col-span-2",children:[o.jsx(ve,{htmlFor:"description",className:"text-foreground",children:"Beschreibung"}),o.jsx(Pv,{id:"description",value:f.description||"",onChange:j=>N("description",j.target.value),placeholder:"Kursbeschreibung eingeben",rows:4,className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Kursdetails & Termine"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{className:"text-foreground",children:"Startdatum"}),o.jsxs(qx,{children:[o.jsx(Gx,{asChild:!0,children:o.jsxs(q,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.start_date&&"text-muted-foreground"),children:[o.jsx(Vn,{className:"mr-2 h-4 w-4"}),f.start_date?qi(new Date(f.start_date),"PPP",{locale:s1}):o.jsx("span",{children:"Startdatum wählen"})]})}),o.jsx(ip,{className:"w-auto p-0 bg-background border-border",align:"start",children:o.jsx(E0,{mode:"single",selected:f.start_date?new Date(f.start_date):void 0,onSelect:j=>N("start_date",j==null?void 0:j.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{className:"text-foreground",children:"Enddatum"}),o.jsxs(qx,{children:[o.jsx(Gx,{asChild:!0,children:o.jsxs(q,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.end_date&&"text-muted-foreground"),children:[o.jsx(Vn,{className:"mr-2 h-4 w-4"}),f.end_date?qi(new Date(f.end_date),"PPP",{locale:s1}):o.jsx("span",{children:"Enddatum wählen"})]})}),o.jsx(ip,{className:"w-auto p-0 bg-background border-border",align:"start",children:o.jsx(E0,{mode:"single",selected:f.end_date?new Date(f.end_date):void 0,onSelect:j=>N("end_date",j==null?void 0:j.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{className:"text-foreground",children:"Anmeldeschluss"}),o.jsxs(qx,{children:[o.jsx(Gx,{asChild:!0,children:o.jsxs(q,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.registration_deadline&&"text-muted-foreground"),children:[o.jsx(Vn,{className:"mr-2 h-4 w-4"}),f.registration_deadline?qi(new Date(f.registration_deadline),"PPP",{locale:s1}):o.jsx("span",{children:"Anmeldeschluss wählen"})]})}),o.jsx(ip,{className:"w-auto p-0 bg-background border-border",align:"start",children:o.jsx(E0,{mode:"single",selected:f.registration_deadline?new Date(f.registration_deadline):void 0,onSelect:j=>N("registration_deadline",j==null?void 0:j.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"specialty",className:"text-foreground",children:"Fachgebiet"}),o.jsx(Re,{id:"specialty",value:f.specialty||"",onChange:j=>N("specialty",j.target.value),placeholder:"Fachgebiet eingeben",className:"bg-background text-foreground border-input"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"language",className:"text-foreground",children:"Sprache"}),o.jsxs(Fs,{value:f.language||"Deutsch",onValueChange:j=>N("language",j),children:[o.jsx(os,{className:"bg-background text-foreground border-input",children:o.jsx($s,{})}),o.jsxs(ls,{className:"bg-background text-foreground border-border",children:[o.jsx(Qe,{value:"Deutsch",children:"Deutsch"}),o.jsx(Qe,{value:"English",children:"English"}),o.jsx(Qe,{value:"Français",children:"Français"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"modality",className:"text-foreground",children:"Modalität"}),o.jsxs(Fs,{value:f.modality||"onsite",onValueChange:j=>N("modality",j),children:[o.jsx(os,{className:"bg-background text-foreground border-input",children:o.jsx($s,{})}),o.jsxs(ls,{className:"bg-background text-foreground border-border",children:[o.jsx(Qe,{value:"onsite",children:"Vor Ort"}),o.jsx(Qe,{value:"online",children:"Online"}),o.jsx(Qe,{value:"hybrid",children:"Hybrid"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"difficulty_level",className:"text-foreground",children:"Schwierigkeitsgrad"}),o.jsxs(Fs,{value:f.difficulty_level||"beginner",onValueChange:j=>N("difficulty_level",j),children:[o.jsx(os,{className:"bg-background text-foreground border-input",children:o.jsx($s,{})}),o.jsxs(ls,{className:"bg-background text-foreground border-border",children:[o.jsx(Qe,{value:"beginner",children:"Anfänger"}),o.jsx(Qe,{value:"intermediate",children:"Fortgeschritten"}),o.jsx(Qe,{value:"advanced",children:"Experte"})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"status",className:"text-foreground",children:"Status"}),o.jsxs(Fs,{value:f.status||"draft",onValueChange:j=>N("status",j),children:[o.jsx(os,{className:"bg-background text-foreground border-input",children:o.jsx($s,{})}),o.jsxs(ls,{className:"bg-background text-foreground border-border",children:[o.jsx(Qe,{value:"draft",children:"Entwurf"}),o.jsx(Qe,{value:"published",children:"Veröffentlicht"}),o.jsx(Qe,{value:"archived",children:"Archiviert"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"tags",className:"text-foreground",children:"Tags (kommagetrennt)"}),o.jsx(Re,{id:"tags",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:j=>N("tags",j.target.value),placeholder:"Tag1, Tag2, Tag3",className:"bg-background text-foreground border-input"})]})]})]}),o.jsx("div",{className:"md:col-span-2 space-y-6 border-t border-border pt-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx(tK,{currentImageUrl:f.cover_image_url||void 0,onImageUploaded:j=>N("cover_image_url",j),onImageRemoved:()=>N("cover_image_url",null)}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"price",className:"text-foreground",children:"Preis"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[o.jsx(q,{type:"button",variant:f.price===0?"default":"outline",onClick:()=>N("price",0),className:"text-xs",children:"Kostenlos"}),o.jsx(q,{type:"button",variant:f.price===null?"default":"outline",onClick:()=>N("price",null),className:"text-xs",children:"k.A."}),o.jsx(q,{type:"button",variant:f.price&&f.price>0?"default":"outline",onClick:()=>N("price",1),className:"text-xs",children:"Kostenpflichtig"})]}),f.price&&f.price>0&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("div",{children:o.jsx(Re,{type:"number",placeholder:"Preis eingeben",value:f.price||"",onChange:j=>N("price",parseFloat(j.target.value)||1),className:"bg-background text-foreground border-input"})}),o.jsx("div",{children:o.jsxs(Fs,{value:f.currency||"CHF",onValueChange:j=>N("currency",j),children:[o.jsx(os,{className:"bg-background text-foreground border-input",children:o.jsx($s,{})}),o.jsxs(ls,{className:"bg-background text-foreground border-border",children:[o.jsx(Qe,{value:"CHF",children:"CHF"}),o.jsx(Qe,{value:"EUR",children:"EUR"}),o.jsx(Qe,{value:"USD",children:"USD"})]})]})})]}),o.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Aktuelle Anzeige: ",o.jsx("span",{className:"font-medium",children:p(f.price,f.currency)})]})]})]})})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[o.jsxs(q,{variant:"outline",onClick:()=>c(!1),children:[o.jsx(ao,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),o.jsxs(q,{onClick:y,children:[o.jsx(ab,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})]})]})},gQ=()=>o.jsxs("div",{className:"min-h-screen bg-background",children:[o.jsx(Us,{}),o.jsx("main",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"text-4xl font-bold text-card-foreground mb-4",children:"Publikationen & Forschung"}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Übersicht meiner wissenschaftlichen Publikationen und laufenden Forschungsprojekte in der Ophthalmologie und Chirurgie."})]}),o.jsx(gM,{})]})})]}),vQ=()=>{const n=lo(),[e,t]=w.useState(!1),[s,r]=w.useState(""),[i,a]=w.useState(""),[l,c]=w.useState(""),[d,h]=w.useState(""),[f,m]=w.useState("1"),[p,x]=w.useState(""),g=async v=>{var y;v.preventDefault(),x(""),t(!0);try{const{data:_,error:N}=await te.auth.signInWithPassword({email:s,password:i});if(N)throw N;(y=(await te.auth.getSession()).data.session)!=null&&y.user?(xe.success("Anmeldung erfolgreich! Willkommen zurück!"),n("/fmh")):(xe.message("Anmeldung verarbeitet, Session wird aufgebaut...",{description:"Bitte einen Moment warten."}),setTimeout(async()=>{var E;(E=(await te.auth.getSession()).data.session)!=null&&E.user?n("/fmh"):(x("Session konnte nicht initialisiert werden. Bitte erneut versuchen."),xe.error("Session-Initialisierung fehlgeschlagen"))},1200))}catch(_){console.error("Sign in error:",_);const N=_ instanceof Error?_.message:"Anmeldung fehlgeschlagen";x(N),xe.error(N)}finally{t(!1)}},b=async v=>{v.preventDefault(),x(""),t(!0);try{const{data:y,error:_}=await te.auth.signUp({email:s,password:i,options:{data:{full_name:l,institution:d,pgy_level:parseInt(f)}}});if(_)throw _;y.user&&(xe.success("Registrierung erfolgreich! Bitte überprüfen Sie Ihre E-Mail für die Bestätigung."),y.session&&n("/fmh"))}catch(y){console.error("Sign up error:",y);const _=y instanceof Error?y.message:"Registrierung fehlgeschlagen";x(_),xe.error(_)}finally{t(!1)}};return o.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"FMH Tracking"}),o.jsx("p",{className:"text-muted-foreground",children:"Melden Sie sich an oder erstellen Sie ein Konto"})]}),o.jsxs(Y,{className:"medical-card",children:[o.jsx(Je,{children:o.jsx(st,{className:"text-center",children:"Authentifizierung"})}),o.jsx(Ae,{children:o.jsxs(gr,{defaultValue:"signin",className:"w-full",children:[o.jsxs(qs,{className:"grid w-full grid-cols-2",children:[o.jsx(He,{value:"signin",children:"Anmelden"}),o.jsx(He,{value:"signup",children:"Registrieren"})]}),o.jsx(Ge,{value:"signin",children:o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"signin-email",children:"E-Mail"}),o.jsxs("div",{className:"relative",children:[o.jsx(ZA,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Re,{id:"signin-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:s,onChange:v=>r(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"signin-password",children:"Passwort"}),o.jsxs("div",{className:"relative",children:[o.jsx(l_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Re,{id:"signin-password",type:"password",placeholder:"Ihr Passwort",value:i,onChange:v=>a(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),p&&o.jsx(th,{variant:"destructive",children:o.jsx(nh,{children:p})}),o.jsxs(q,{type:"submit",className:"w-full",disabled:e,children:[e&&o.jsx(o_,{className:"mr-2 h-4 w-4 animate-spin"}),"Anmelden"]})]})}),o.jsx(Ge,{value:"signup",children:o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"signup-name",children:"Vollständiger Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(XT,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Re,{id:"signup-name",type:"text",placeholder:"Dr. Max Mustermann",value:l,onChange:v=>c(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"signup-email",children:"E-Mail"}),o.jsxs("div",{className:"relative",children:[o.jsx(ZA,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Re,{id:"signup-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:s,onChange:v=>r(v.target.value),className:"pl-10",required:!0,disabled:e})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"signup-password",children:"Passwort"}),o.jsxs("div",{className:"relative",children:[o.jsx(l_,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Re,{id:"signup-password",type:"password",placeholder:"Mindestens 6 Zeichen",value:i,onChange:v=>a(v.target.value),className:"pl-10",required:!0,disabled:e,minLength:6})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"signup-institution",children:"Institution"}),o.jsxs("div",{className:"relative",children:[o.jsx(UT,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Re,{id:"signup-institution",type:"text",placeholder:"Universitätsspital Zürich",value:d,onChange:v=>h(v.target.value),className:"pl-10",disabled:e})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(ve,{htmlFor:"signup-pgy",children:"PGY Level"}),o.jsxs("div",{className:"relative",children:[o.jsx(VT,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsxs("select",{id:"signup-pgy",value:f,onChange:v=>m(v.target.value),className:"w-full pl-10 pr-3 py-2 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring",disabled:e,children:[o.jsx("option",{value:"1",children:"PGY-1"}),o.jsx("option",{value:"2",children:"PGY-2"}),o.jsx("option",{value:"3",children:"PGY-3"}),o.jsx("option",{value:"4",children:"PGY-4"}),o.jsx("option",{value:"5",children:"PGY-5"}),o.jsx("option",{value:"6",children:"PGY-6"}),o.jsx("option",{value:"7",children:"PGY-7"})]})]})]}),p&&o.jsx(th,{variant:"destructive",children:o.jsx(nh,{children:p})}),o.jsxs(q,{type:"submit",className:"w-full",disabled:e,children:[e&&o.jsx(o_,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrieren"]})]})})]})})]})]})})};function xQ(){const n=lo();return w.useEffect(()=>{(async()=>{const{data:{session:t}}=await te.auth.getSession();t&&n("/fmh")})()},[n]),o.jsx(vQ,{})}const yQ=()=>{const n=eu();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),o.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};class bQ extends w.Component{constructor(t){super(t);G(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,s){console.error("ErrorBoundary caught an error:",t,s),this.setState({error:t,errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:o.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:o.jsxs(Y,{className:"w-full max-w-md",children:[o.jsxs(Je,{className:"text-center",children:[o.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:o.jsx(Np,{className:"h-6 w-6 text-red-600"})}),o.jsx(st,{className:"text-xl",children:"Etwas ist schiefgelaufen"})]}),o.jsxs(Ae,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Die Anwendung ist auf einen unerwarteten Fehler gestoßen. Bitte versuchen Sie, die Seite neu zu laden."}),!1,o.jsxs("div",{className:"flex gap-2 justify-center",children:[o.jsxs(q,{onClick:this.handleReset,variant:"outline",children:[o.jsx(M$,{className:"w-4 h-4 mr-2"}),"Erneut versuchen"]}),o.jsx(q,{onClick:()=>window.location.reload(),children:"Seite neu laden"})]})]})]})}):this.props.children}}const wQ=new bz,_Q=()=>{const n=lo();return w.useEffect(()=>{const e=sessionStorage.getItem("intendedRoute");e&&(sessionStorage.removeItem("intendedRoute"),n(e))},[n]),o.jsxs(hB,{children:[o.jsx(gs,{path:"/",element:o.jsx(KU,{})}),o.jsx(gs,{path:"/auth",element:o.jsx(xQ,{})}),o.jsx(gs,{path:"/dashboard",element:o.jsx(pH,{})}),o.jsx(gs,{path:"/courses",element:o.jsx(_9,{})}),o.jsx(gs,{path:"/courses/:id",element:o.jsx(K9,{})}),o.jsx(gs,{path:"/publications",element:o.jsx(gQ,{})}),o.jsx(gs,{path:"/profile/:handle",element:o.jsx(vH,{})}),o.jsx(gs,{path:"/fmh",element:o.jsx(YG,{})}),o.jsx(gs,{path:"/features",element:o.jsx(ZG,{})}),o.jsx(gs,{path:"/contact",element:o.jsx(eK,{})}),o.jsx(gs,{path:"/admin",element:o.jsx(pQ,{})}),o.jsx(gs,{path:"*",element:o.jsx(yQ,{})})]})},SQ=()=>o.jsx(_z,{client:wQ,children:o.jsx(BU,{children:o.jsxs(bQ,{children:[o.jsx(y6,{}),o.jsx(Q6,{}),o.jsx(bB,{basename:"/swiss-med-track",children:o.jsx(_Q,{})})]})})});fT(document.getElementById("root")).render(o.jsx(SQ,{}));
