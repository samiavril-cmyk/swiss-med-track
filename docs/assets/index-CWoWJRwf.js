var P4=Object.defineProperty;var IA=s=>{throw TypeError(s)};var T4=(s,e,t)=>e in s?P4(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var q=(s,e,t)=>T4(s,typeof e!="symbol"?e+"":e,t),Ub=(s,e,t)=>e.has(s)||IA("Cannot "+t);var u=(s,e,t)=>(Ub(s,e,"read from private field"),t?t.call(s):e.get(s)),E=(s,e,t)=>e.has(s)?IA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),N=(s,e,t,n)=>(Ub(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),k=(s,e,t)=>(Ub(s,e,"access private method"),t);var ts=(s,e,t,n)=>({set _(r){N(s,e,r,t)},get _(){return u(s,e,n)}});function R4(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in s)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zk(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function M4(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var r=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return s[n]}})}),t}var e2={exports:{}},Wy={},t2={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gv=Symbol.for("react.element"),I4=Symbol.for("react.portal"),D4=Symbol.for("react.fragment"),O4=Symbol.for("react.strict_mode"),L4=Symbol.for("react.profiler"),F4=Symbol.for("react.provider"),$4=Symbol.for("react.context"),z4=Symbol.for("react.forward_ref"),B4=Symbol.for("react.suspense"),U4=Symbol.for("react.memo"),H4=Symbol.for("react.lazy"),DA=Symbol.iterator;function W4(s){return s===null||typeof s!="object"?null:(s=DA&&s[DA]||s["@@iterator"],typeof s=="function"?s:null)}var s2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n2=Object.assign,r2={};function Kf(s,e,t){this.props=s,this.context=e,this.refs=r2,this.updater=t||s2}Kf.prototype.isReactComponent={};Kf.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};Kf.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function i2(){}i2.prototype=Kf.prototype;function uN(s,e,t){this.props=s,this.context=e,this.refs=r2,this.updater=t||s2}var hN=uN.prototype=new i2;hN.constructor=uN;n2(hN,Kf.prototype);hN.isPureReactComponent=!0;var OA=Array.isArray,a2=Object.prototype.hasOwnProperty,fN={current:null},o2={key:!0,ref:!0,__self:!0,__source:!0};function l2(s,e,t){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)a2.call(e,n)&&!o2.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(s&&s.defaultProps)for(n in l=s.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:gv,type:s,key:i,ref:o,props:r,_owner:fN.current}}function V4(s,e){return{$$typeof:gv,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function mN(s){return typeof s=="object"&&s!==null&&s.$$typeof===gv}function G4(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(t){return e[t]})}var LA=/\/+/g;function Hb(s,e){return typeof s=="object"&&s!==null&&s.key!=null?G4(""+s.key):e.toString(36)}function Px(s,e,t,n,r){var i=typeof s;(i==="undefined"||i==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case gv:case I4:o=!0}}if(o)return o=s,r=r(o),s=n===""?"."+Hb(o,0):n,OA(r)?(t="",s!=null&&(t=s.replace(LA,"$&/")+"/"),Px(r,e,t,"",function(d){return d})):r!=null&&(mN(r)&&(r=V4(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(LA,"$&/")+"/")+s)),e.push(r)),1;if(o=0,n=n===""?".":n+":",OA(s))for(var l=0;l<s.length;l++){i=s[l];var c=n+Hb(i,l);o+=Px(i,e,t,c,r)}else if(c=W4(s),typeof c=="function")for(s=c.call(s),l=0;!(i=s.next()).done;)i=i.value,c=n+Hb(i,l++),o+=Px(i,e,t,c,r);else if(i==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vv(s,e,t){if(s==null)return s;var n=[],r=0;return Px(s,n,"","",function(i){return e.call(t,i,r++)}),n}function q4(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(t){(s._status===0||s._status===-1)&&(s._status=1,s._result=t)},function(t){(s._status===0||s._status===-1)&&(s._status=2,s._result=t)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var rn={current:null},Tx={transition:null},K4={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:Tx,ReactCurrentOwner:fN};function c2(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:Vv,forEach:function(s,e,t){Vv(s,function(){e.apply(this,arguments)},t)},count:function(s){var e=0;return Vv(s,function(){e++}),e},toArray:function(s){return Vv(s,function(e){return e})||[]},only:function(s){if(!mN(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};ze.Component=Kf;ze.Fragment=D4;ze.Profiler=L4;ze.PureComponent=uN;ze.StrictMode=O4;ze.Suspense=B4;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K4;ze.act=c2;ze.cloneElement=function(s,e,t){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var n=n2({},s.props),r=s.key,i=s.ref,o=s._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=fN.current),e.key!==void 0&&(r=""+e.key),s.type&&s.type.defaultProps)var l=s.type.defaultProps;for(c in e)a2.call(e,c)&&!o2.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=t;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:gv,type:s.type,key:r,ref:i,props:n,_owner:o}};ze.createContext=function(s){return s={$$typeof:$4,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:F4,_context:s},s.Consumer=s};ze.createElement=l2;ze.createFactory=function(s){var e=l2.bind(null,s);return e.type=s,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(s){return{$$typeof:z4,render:s}};ze.isValidElement=mN;ze.lazy=function(s){return{$$typeof:H4,_payload:{_status:-1,_result:s},_init:q4}};ze.memo=function(s,e){return{$$typeof:U4,type:s,compare:e===void 0?null:e}};ze.startTransition=function(s){var e=Tx.transition;Tx.transition={};try{s()}finally{Tx.transition=e}};ze.unstable_act=c2;ze.useCallback=function(s,e){return rn.current.useCallback(s,e)};ze.useContext=function(s){return rn.current.useContext(s)};ze.useDebugValue=function(){};ze.useDeferredValue=function(s){return rn.current.useDeferredValue(s)};ze.useEffect=function(s,e){return rn.current.useEffect(s,e)};ze.useId=function(){return rn.current.useId()};ze.useImperativeHandle=function(s,e,t){return rn.current.useImperativeHandle(s,e,t)};ze.useInsertionEffect=function(s,e){return rn.current.useInsertionEffect(s,e)};ze.useLayoutEffect=function(s,e){return rn.current.useLayoutEffect(s,e)};ze.useMemo=function(s,e){return rn.current.useMemo(s,e)};ze.useReducer=function(s,e,t){return rn.current.useReducer(s,e,t)};ze.useRef=function(s){return rn.current.useRef(s)};ze.useState=function(s){return rn.current.useState(s)};ze.useSyncExternalStore=function(s,e,t){return rn.current.useSyncExternalStore(s,e,t)};ze.useTransition=function(){return rn.current.useTransition()};ze.version="18.3.1";t2.exports=ze;var j=t2.exports;const ee=Zk(j),pN=R4({__proto__:null,default:ee},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y4=j,X4=Symbol.for("react.element"),Q4=Symbol.for("react.fragment"),J4=Object.prototype.hasOwnProperty,Z4=Y4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eF={key:!0,ref:!0,__self:!0,__source:!0};function d2(s,e,t){var n,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)J4.call(e,n)&&!eF.hasOwnProperty(n)&&(r[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:X4,type:s,key:i,ref:o,props:r,_owner:Z4.current}}Wy.Fragment=Q4;Wy.jsx=d2;Wy.jsxs=d2;e2.exports=Wy;var a=e2.exports,u2={exports:{}},er={},h2={exports:{}},f2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(M,R){var U=M.length;M.push(R);e:for(;0<U;){var Z=U-1>>>1,L=M[Z];if(0<r(L,R))M[Z]=R,M[U]=L,U=Z;else break e}}function t(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var R=M[0],U=M.pop();if(U!==R){M[0]=U;e:for(var Z=0,L=M.length,V=L>>>1;Z<V;){var Q=2*(Z+1)-1,J=M[Q],le=Q+1,W=M[le];if(0>r(J,U))le<L&&0>r(W,J)?(M[Z]=W,M[le]=U,Z=le):(M[Z]=J,M[Q]=U,Z=Q);else if(le<L&&0>r(W,U))M[Z]=W,M[le]=U,Z=le;else break e}}return R}function r(M,R){var U=M.sortIndex-R.sortIndex;return U!==0?U:M.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();s.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,m=3,p=!1,x=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(M){for(var R=t(d);R!==null;){if(R.callback===null)n(d);else if(R.startTime<=M)n(d),R.sortIndex=R.expirationTime,e(c,R);else break;R=t(d)}}function _(M){if(v=!1,b(M),!x)if(t(c)!==null)x=!0,$(S);else{var R=t(d);R!==null&&D(_,R.startTime-M)}}function S(M,R){x=!1,v&&(v=!1,g(P),P=-1),p=!0;var U=m;try{for(b(R),f=t(c);f!==null&&(!(f.expirationTime>R)||M&&!z());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,m=f.priorityLevel;var L=Z(f.expirationTime<=R);R=s.unstable_now(),typeof L=="function"?f.callback=L:f===t(c)&&n(c),b(R)}else n(c);f=t(c)}if(f!==null)var V=!0;else{var Q=t(d);Q!==null&&D(_,Q.startTime-R),V=!1}return V}finally{f=null,m=U,p=!1}}var A=!1,C=null,P=-1,T=5,O=-1;function z(){return!(s.unstable_now()-O<T)}function F(){if(C!==null){var M=s.unstable_now();O=M;var R=!0;try{R=C(!0,M)}finally{R?B():(A=!1,C=null)}}else A=!1}var B;if(typeof y=="function")B=function(){y(F)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,H=I.port2;I.port1.onmessage=F,B=function(){H.postMessage(null)}}else B=function(){w(F,0)};function $(M){C=M,A||(A=!0,B())}function D(M,R){P=w(function(){M(s.unstable_now())},R)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_continueExecution=function(){x||p||(x=!0,$(S))},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return m},s.unstable_getFirstCallbackNode=function(){return t(c)},s.unstable_next=function(M){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var U=m;m=R;try{return M()}finally{m=U}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(M,R){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var U=m;m=M;try{return R()}finally{m=U}},s.unstable_scheduleCallback=function(M,R,U){var Z=s.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Z+U:Z):U=Z,M){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=U+L,M={id:h++,callback:R,priorityLevel:M,startTime:U,expirationTime:L,sortIndex:-1},U>Z?(M.sortIndex=U,e(d,M),t(c)===null&&M===t(d)&&(v?(g(P),P=-1):v=!0,D(_,U-Z))):(M.sortIndex=L,e(c,M),x||p||(x=!0,$(S))),M},s.unstable_shouldYield=z,s.unstable_wrapCallback=function(M){var R=m;return function(){var U=m;m=R;try{return M.apply(this,arguments)}finally{m=U}}}})(f2);h2.exports=f2;var tF=h2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF=j,Xn=tF;function X(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m2=new Set,up={};function du(s,e){Mf(s,e),Mf(s+"Capture",e)}function Mf(s,e){for(up[s]=e,s=0;s<e.length;s++)m2.add(e[s])}var so=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),a1=Object.prototype.hasOwnProperty,nF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FA={},$A={};function rF(s){return a1.call($A,s)?!0:a1.call(FA,s)?!1:nF.test(s)?$A[s]=!0:(FA[s]=!0,!1)}function iF(s,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function aF(s,e,t,n){if(e===null||typeof e>"u"||iF(s,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(s,e,t,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=s,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Cs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Cs[s]=new an(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];Cs[e]=new an(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Cs[s]=new an(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Cs[s]=new an(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Cs[s]=new an(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Cs[s]=new an(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Cs[s]=new an(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Cs[s]=new an(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Cs[s]=new an(s,5,!1,s.toLowerCase(),null,!1,!1)});var gN=/[\-:]([a-z])/g;function vN(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(gN,vN);Cs[e]=new an(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(gN,vN);Cs[e]=new an(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(gN,vN);Cs[e]=new an(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Cs[s]=new an(s,1,!1,s.toLowerCase(),null,!1,!1)});Cs.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Cs[s]=new an(s,1,!1,s.toLowerCase(),null,!0,!0)});function xN(s,e,t,n){var r=Cs.hasOwnProperty(e)?Cs[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aF(e,t,r,n)&&(t=null),n||r===null?rF(e)&&(t===null?s.removeAttribute(e):s.setAttribute(e,""+t)):r.mustUseProperty?s[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?s.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?s.setAttributeNS(n,e,t):s.setAttribute(e,t))))}var fo=sF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gv=Symbol.for("react.element"),Hu=Symbol.for("react.portal"),Wu=Symbol.for("react.fragment"),yN=Symbol.for("react.strict_mode"),o1=Symbol.for("react.profiler"),p2=Symbol.for("react.provider"),g2=Symbol.for("react.context"),bN=Symbol.for("react.forward_ref"),l1=Symbol.for("react.suspense"),c1=Symbol.for("react.suspense_list"),wN=Symbol.for("react.memo"),ko=Symbol.for("react.lazy"),v2=Symbol.for("react.offscreen"),zA=Symbol.iterator;function lm(s){return s===null||typeof s!="object"?null:(s=zA&&s[zA]||s["@@iterator"],typeof s=="function"?s:null)}var _t=Object.assign,Wb;function Nm(s){if(Wb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Wb=e&&e[1]||""}return`
`+Wb+s}var Vb=!1;function Gb(s,e){if(!s||Vb)return"";Vb=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(s,[],e)}else{try{e.call()}catch(d){n=d}s.call(e.prototype)}else{try{throw Error()}catch(d){n=d}s()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=o&&0<=l);break}}}finally{Vb=!1,Error.prepareStackTrace=t}return(s=s?s.displayName||s.name:"")?Nm(s):""}function oF(s){switch(s.tag){case 5:return Nm(s.type);case 16:return Nm("Lazy");case 13:return Nm("Suspense");case 19:return Nm("SuspenseList");case 0:case 2:case 15:return s=Gb(s.type,!1),s;case 11:return s=Gb(s.type.render,!1),s;case 1:return s=Gb(s.type,!0),s;default:return""}}function d1(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Wu:return"Fragment";case Hu:return"Portal";case o1:return"Profiler";case yN:return"StrictMode";case l1:return"Suspense";case c1:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case g2:return(s.displayName||"Context")+".Consumer";case p2:return(s._context.displayName||"Context")+".Provider";case bN:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case wN:return e=s.displayName||null,e!==null?e:d1(s.type)||"Memo";case ko:e=s._payload,s=s._init;try{return d1(s(e))}catch{}}return null}function lF(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return d1(e);case 8:return e===yN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Bl(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function x2(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cF(s){var e=x2(s)?"checked":"value",t=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),n=""+s[e];if(!s.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(s,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function qv(s){s._valueTracker||(s._valueTracker=cF(s))}function y2(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return s&&(n=x2(s)?s.checked?"true":"false":s.value),s=n,s!==t?(e.setValue(s),!0):!1}function C0(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function u1(s,e){var t=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??s._wrapperState.initialChecked})}function BA(s,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Bl(e.value!=null?e.value:t),s._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b2(s,e){e=e.checked,e!=null&&xN(s,"checked",e,!1)}function h1(s,e){b2(s,e);var t=Bl(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+t):s.value!==""+t&&(s.value=""+t);else if(n==="submit"||n==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?f1(s,e.type,t):e.hasOwnProperty("defaultValue")&&f1(s,e.type,Bl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function UA(s,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,t||e===s.value||(s.value=e),s.defaultValue=e}t=s.name,t!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,t!==""&&(s.name=t)}function f1(s,e,t){(e!=="number"||C0(s.ownerDocument)!==s)&&(t==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+t&&(s.defaultValue=""+t))}var Sm=Array.isArray;function rh(s,e,t,n){if(s=s.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<s.length;t++)r=e.hasOwnProperty("$"+s[t].value),s[t].selected!==r&&(s[t].selected=r),r&&n&&(s[t].defaultSelected=!0)}else{for(t=""+Bl(t),e=null,r=0;r<s.length;r++){if(s[r].value===t){s[r].selected=!0,n&&(s[r].defaultSelected=!0);return}e!==null||s[r].disabled||(e=s[r])}e!==null&&(e.selected=!0)}}function m1(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function HA(s,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(X(92));if(Sm(t)){if(1<t.length)throw Error(X(93));t=t[0]}e=t}e==null&&(e=""),t=e}s._wrapperState={initialValue:Bl(t)}}function w2(s,e){var t=Bl(e.value),n=Bl(e.defaultValue);t!=null&&(t=""+t,t!==s.value&&(s.value=t),e.defaultValue==null&&s.defaultValue!==t&&(s.defaultValue=t)),n!=null&&(s.defaultValue=""+n)}function WA(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function j2(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p1(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?j2(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Kv,_2=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return s(e,t,n,r)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(Kv=Kv||document.createElement("div"),Kv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kv.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function hp(s,e){if(e){var t=s.firstChild;if(t&&t===s.lastChild&&t.nodeType===3){t.nodeValue=e;return}}s.textContent=e}var Xm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dF=["Webkit","ms","Moz","O"];Object.keys(Xm).forEach(function(s){dF.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),Xm[e]=Xm[s]})});function N2(s,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Xm.hasOwnProperty(s)&&Xm[s]?(""+e).trim():e+"px"}function S2(s,e){s=s.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=N2(t,e[t],n);t==="float"&&(t="cssFloat"),n?s.setProperty(t,r):s[t]=r}}var uF=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g1(s,e){if(e){if(uF[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function v1(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x1=null;function jN(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var y1=null,ih=null,ah=null;function VA(s){if(s=yv(s)){if(typeof y1!="function")throw Error(X(280));var e=s.stateNode;e&&(e=Yy(e),y1(s.stateNode,s.type,e))}}function A2(s){ih?ah?ah.push(s):ah=[s]:ih=s}function E2(){if(ih){var s=ih,e=ah;if(ah=ih=null,VA(s),e)for(s=0;s<e.length;s++)VA(e[s])}}function C2(s,e){return s(e)}function k2(){}var qb=!1;function P2(s,e,t){if(qb)return s(e,t);qb=!0;try{return C2(s,e,t)}finally{qb=!1,(ih!==null||ah!==null)&&(k2(),E2())}}function fp(s,e){var t=s.stateNode;if(t===null)return null;var n=Yy(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break e;default:s=!1}if(s)return null;if(t&&typeof t!="function")throw Error(X(231,e,typeof t));return t}var b1=!1;if(so)try{var cm={};Object.defineProperty(cm,"passive",{get:function(){b1=!0}}),window.addEventListener("test",cm,cm),window.removeEventListener("test",cm,cm)}catch{b1=!1}function hF(s,e,t,n,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(t,d)}catch(h){this.onError(h)}}var Qm=!1,k0=null,P0=!1,w1=null,fF={onError:function(s){Qm=!0,k0=s}};function mF(s,e,t,n,r,i,o,l,c){Qm=!1,k0=null,hF.apply(fF,arguments)}function pF(s,e,t,n,r,i,o,l,c){if(mF.apply(this,arguments),Qm){if(Qm){var d=k0;Qm=!1,k0=null}else throw Error(X(198));P0||(P0=!0,w1=d)}}function uu(s){var e=s,t=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(t=e.return),s=e.return;while(s)}return e.tag===3?t:null}function T2(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function GA(s){if(uu(s)!==s)throw Error(X(188))}function gF(s){var e=s.alternate;if(!e){if(e=uu(s),e===null)throw Error(X(188));return e!==s?null:s}for(var t=s,n=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return GA(r),s;if(i===n)return GA(r),e;i=i.sibling}throw Error(X(188))}if(t.return!==n.return)t=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===t){o=!0,t=r,n=i;break}if(l===n){o=!0,n=r,t=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===t){o=!0,t=i,n=r;break}if(l===n){o=!0,n=i,t=r;break}l=l.sibling}if(!o)throw Error(X(189))}}if(t.alternate!==n)throw Error(X(190))}if(t.tag!==3)throw Error(X(188));return t.stateNode.current===t?s:e}function R2(s){return s=gF(s),s!==null?M2(s):null}function M2(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=M2(s);if(e!==null)return e;s=s.sibling}return null}var I2=Xn.unstable_scheduleCallback,qA=Xn.unstable_cancelCallback,vF=Xn.unstable_shouldYield,xF=Xn.unstable_requestPaint,Rt=Xn.unstable_now,yF=Xn.unstable_getCurrentPriorityLevel,_N=Xn.unstable_ImmediatePriority,D2=Xn.unstable_UserBlockingPriority,T0=Xn.unstable_NormalPriority,bF=Xn.unstable_LowPriority,O2=Xn.unstable_IdlePriority,Vy=null,Ki=null;function wF(s){if(Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(Vy,s,void 0,(s.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:NF,jF=Math.log,_F=Math.LN2;function NF(s){return s>>>=0,s===0?32:31-(jF(s)/_F|0)|0}var Yv=64,Xv=4194304;function Am(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function R0(s,e){var t=s.pendingLanes;if(t===0)return 0;var n=0,r=s.suspendedLanes,i=s.pingedLanes,o=t&268435455;if(o!==0){var l=o&~r;l!==0?n=Am(l):(i&=o,i!==0&&(n=Am(i)))}else o=t&~r,o!==0?n=Am(o):i!==0&&(n=Am(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=t&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=n;0<e;)t=31-Zr(e),r=1<<t,n|=s[t],e&=~r;return n}function SF(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AF(s,e){for(var t=s.suspendedLanes,n=s.pingedLanes,r=s.expirationTimes,i=s.pendingLanes;0<i;){var o=31-Zr(i),l=1<<o,c=r[o];c===-1?(!(l&t)||l&n)&&(r[o]=SF(l,e)):c<=e&&(s.expiredLanes|=l),i&=~l}}function j1(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function L2(){var s=Yv;return Yv<<=1,!(Yv&4194240)&&(Yv=64),s}function Kb(s){for(var e=[],t=0;31>t;t++)e.push(s);return e}function vv(s,e,t){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-Zr(e),s[e]=t}function EF(s,e){var t=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var n=s.eventTimes;for(s=s.expirationTimes;0<t;){var r=31-Zr(t),i=1<<r;e[r]=0,n[r]=-1,s[r]=-1,t&=~i}}function NN(s,e){var t=s.entangledLanes|=e;for(s=s.entanglements;t;){var n=31-Zr(t),r=1<<n;r&e|s[n]&e&&(s[n]|=e),t&=~r}}var Ze=0;function F2(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var $2,SN,z2,B2,U2,_1=!1,Qv=[],Rl=null,Ml=null,Il=null,mp=new Map,pp=new Map,Ro=[],CF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function KA(s,e){switch(s){case"focusin":case"focusout":Rl=null;break;case"dragenter":case"dragleave":Ml=null;break;case"mouseover":case"mouseout":Il=null;break;case"pointerover":case"pointerout":mp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pp.delete(e.pointerId)}}function dm(s,e,t,n,r,i){return s===null||s.nativeEvent!==i?(s={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=yv(e),e!==null&&SN(e)),s):(s.eventSystemFlags|=n,e=s.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),s)}function kF(s,e,t,n,r){switch(e){case"focusin":return Rl=dm(Rl,s,e,t,n,r),!0;case"dragenter":return Ml=dm(Ml,s,e,t,n,r),!0;case"mouseover":return Il=dm(Il,s,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return mp.set(i,dm(mp.get(i)||null,s,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,pp.set(i,dm(pp.get(i)||null,s,e,t,n,r)),!0}return!1}function H2(s){var e=Cc(s.target);if(e!==null){var t=uu(e);if(t!==null){if(e=t.tag,e===13){if(e=T2(t),e!==null){s.blockedOn=e,U2(s.priority,function(){z2(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){s.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Rx(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var t=N1(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t===null){t=s.nativeEvent;var n=new t.constructor(t.type,t);x1=n,t.target.dispatchEvent(n),x1=null}else return e=yv(t),e!==null&&SN(e),s.blockedOn=t,!1;e.shift()}return!0}function YA(s,e,t){Rx(s)&&t.delete(e)}function PF(){_1=!1,Rl!==null&&Rx(Rl)&&(Rl=null),Ml!==null&&Rx(Ml)&&(Ml=null),Il!==null&&Rx(Il)&&(Il=null),mp.forEach(YA),pp.forEach(YA)}function um(s,e){s.blockedOn===e&&(s.blockedOn=null,_1||(_1=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,PF)))}function gp(s){function e(r){return um(r,s)}if(0<Qv.length){um(Qv[0],s);for(var t=1;t<Qv.length;t++){var n=Qv[t];n.blockedOn===s&&(n.blockedOn=null)}}for(Rl!==null&&um(Rl,s),Ml!==null&&um(Ml,s),Il!==null&&um(Il,s),mp.forEach(e),pp.forEach(e),t=0;t<Ro.length;t++)n=Ro[t],n.blockedOn===s&&(n.blockedOn=null);for(;0<Ro.length&&(t=Ro[0],t.blockedOn===null);)H2(t),t.blockedOn===null&&Ro.shift()}var oh=fo.ReactCurrentBatchConfig,M0=!0;function TF(s,e,t,n){var r=Ze,i=oh.transition;oh.transition=null;try{Ze=1,AN(s,e,t,n)}finally{Ze=r,oh.transition=i}}function RF(s,e,t,n){var r=Ze,i=oh.transition;oh.transition=null;try{Ze=4,AN(s,e,t,n)}finally{Ze=r,oh.transition=i}}function AN(s,e,t,n){if(M0){var r=N1(s,e,t,n);if(r===null)rw(s,e,n,I0,t),KA(s,n);else if(kF(r,s,e,t,n))n.stopPropagation();else if(KA(s,n),e&4&&-1<CF.indexOf(s)){for(;r!==null;){var i=yv(r);if(i!==null&&$2(i),i=N1(s,e,t,n),i===null&&rw(s,e,n,I0,t),i===r)break;r=i}r!==null&&n.stopPropagation()}else rw(s,e,n,null,t)}}var I0=null;function N1(s,e,t,n){if(I0=null,s=jN(n),s=Cc(s),s!==null)if(e=uu(s),e===null)s=null;else if(t=e.tag,t===13){if(s=T2(e),s!==null)return s;s=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return I0=s,null}function W2(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yF()){case _N:return 1;case D2:return 4;case T0:case bF:return 16;case O2:return 536870912;default:return 16}default:return 16}}var kl=null,EN=null,Mx=null;function V2(){if(Mx)return Mx;var s,e=EN,t=e.length,n,r="value"in kl?kl.value:kl.textContent,i=r.length;for(s=0;s<t&&e[s]===r[s];s++);var o=t-s;for(n=1;n<=o&&e[t-n]===r[i-n];n++);return Mx=r.slice(s,1<n?1-n:void 0)}function Ix(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function Jv(){return!0}function XA(){return!1}function tr(s){function e(t,n,r,i,o){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in s)s.hasOwnProperty(l)&&(t=s[l],this[l]=t?t(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Jv:XA,this.isPropagationStopped=XA,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Jv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Jv)},persist:function(){},isPersistent:Jv}),e}var Yf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CN=tr(Yf),xv=_t({},Yf,{view:0,detail:0}),MF=tr(xv),Yb,Xb,hm,Gy=_t({},xv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kN,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==hm&&(hm&&s.type==="mousemove"?(Yb=s.screenX-hm.screenX,Xb=s.screenY-hm.screenY):Xb=Yb=0,hm=s),Yb)},movementY:function(s){return"movementY"in s?s.movementY:Xb}}),QA=tr(Gy),IF=_t({},Gy,{dataTransfer:0}),DF=tr(IF),OF=_t({},xv,{relatedTarget:0}),Qb=tr(OF),LF=_t({},Yf,{animationName:0,elapsedTime:0,pseudoElement:0}),FF=tr(LF),$F=_t({},Yf,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zF=tr($F),BF=_t({},Yf,{data:0}),JA=tr(BF),UF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VF(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=WF[s])?!!e[s]:!1}function kN(){return VF}var GF=_t({},xv,{key:function(s){if(s.key){var e=UF[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=Ix(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?HF[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kN,charCode:function(s){return s.type==="keypress"?Ix(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ix(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),qF=tr(GF),KF=_t({},Gy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZA=tr(KF),YF=_t({},xv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kN}),XF=tr(YF),QF=_t({},Yf,{propertyName:0,elapsedTime:0,pseudoElement:0}),JF=tr(QF),ZF=_t({},Gy,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),e3=tr(ZF),t3=[9,13,27,32],PN=so&&"CompositionEvent"in window,Jm=null;so&&"documentMode"in document&&(Jm=document.documentMode);var s3=so&&"TextEvent"in window&&!Jm,G2=so&&(!PN||Jm&&8<Jm&&11>=Jm),eE=" ",tE=!1;function q2(s,e){switch(s){case"keyup":return t3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function K2(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Vu=!1;function n3(s,e){switch(s){case"compositionend":return K2(e);case"keypress":return e.which!==32?null:(tE=!0,eE);case"textInput":return s=e.data,s===eE&&tE?null:s;default:return null}}function r3(s,e){if(Vu)return s==="compositionend"||!PN&&q2(s,e)?(s=V2(),Mx=EN=kl=null,Vu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G2&&e.locale!=="ko"?null:e.data;default:return null}}var i3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sE(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!i3[s.type]:e==="textarea"}function Y2(s,e,t,n){A2(n),e=D0(e,"onChange"),0<e.length&&(t=new CN("onChange","change",null,t,n),s.push({event:t,listeners:e}))}var Zm=null,vp=null;function a3(s){aP(s,0)}function qy(s){var e=Ku(s);if(y2(e))return s}function o3(s,e){if(s==="change")return e}var X2=!1;if(so){var Jb;if(so){var Zb="oninput"in document;if(!Zb){var nE=document.createElement("div");nE.setAttribute("oninput","return;"),Zb=typeof nE.oninput=="function"}Jb=Zb}else Jb=!1;X2=Jb&&(!document.documentMode||9<document.documentMode)}function rE(){Zm&&(Zm.detachEvent("onpropertychange",Q2),vp=Zm=null)}function Q2(s){if(s.propertyName==="value"&&qy(vp)){var e=[];Y2(e,vp,s,jN(s)),P2(a3,e)}}function l3(s,e,t){s==="focusin"?(rE(),Zm=e,vp=t,Zm.attachEvent("onpropertychange",Q2)):s==="focusout"&&rE()}function c3(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return qy(vp)}function d3(s,e){if(s==="click")return qy(e)}function u3(s,e){if(s==="input"||s==="change")return qy(e)}function h3(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var ni=typeof Object.is=="function"?Object.is:h3;function xp(s,e){if(ni(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var t=Object.keys(s),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!a1.call(e,r)||!ni(s[r],e[r]))return!1}return!0}function iE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function aE(s,e){var t=iE(s);s=0;for(var n;t;){if(t.nodeType===3){if(n=s+t.textContent.length,s<=e&&n>=e)return{node:t,offset:e-s};s=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=iE(t)}}function J2(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?J2(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Z2(){for(var s=window,e=C0();e instanceof s.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)s=e.contentWindow;else break;e=C0(s.document)}return e}function TN(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function f3(s){var e=Z2(),t=s.focusedElem,n=s.selectionRange;if(e!==t&&t&&t.ownerDocument&&J2(t.ownerDocument.documentElement,t)){if(n!==null&&TN(t)){if(e=n.start,s=n.end,s===void 0&&(s=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(s,t.value.length);else if(s=(e=t.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var r=t.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!s.extend&&i>n&&(r=n,n=i,i=r),r=aE(t,i);var o=aE(t,n);r&&o&&(s.rangeCount!==1||s.anchorNode!==r.node||s.anchorOffset!==r.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),s.removeAllRanges(),i>n?(s.addRange(e),s.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),s.addRange(e)))}}for(e=[],s=t;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)s=e[t],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var m3=so&&"documentMode"in document&&11>=document.documentMode,Gu=null,S1=null,ep=null,A1=!1;function oE(s,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;A1||Gu==null||Gu!==C0(n)||(n=Gu,"selectionStart"in n&&TN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ep&&xp(ep,n)||(ep=n,n=D0(S1,"onSelect"),0<n.length&&(e=new CN("onSelect","select",null,e,t),s.push({event:e,listeners:n}),e.target=Gu)))}function Zv(s,e){var t={};return t[s.toLowerCase()]=e.toLowerCase(),t["Webkit"+s]="webkit"+e,t["Moz"+s]="moz"+e,t}var qu={animationend:Zv("Animation","AnimationEnd"),animationiteration:Zv("Animation","AnimationIteration"),animationstart:Zv("Animation","AnimationStart"),transitionend:Zv("Transition","TransitionEnd")},ew={},eP={};so&&(eP=document.createElement("div").style,"AnimationEvent"in window||(delete qu.animationend.animation,delete qu.animationiteration.animation,delete qu.animationstart.animation),"TransitionEvent"in window||delete qu.transitionend.transition);function Ky(s){if(ew[s])return ew[s];if(!qu[s])return s;var e=qu[s],t;for(t in e)if(e.hasOwnProperty(t)&&t in eP)return ew[s]=e[t];return s}var tP=Ky("animationend"),sP=Ky("animationiteration"),nP=Ky("animationstart"),rP=Ky("transitionend"),iP=new Map,lE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ec(s,e){iP.set(s,e),du(e,[s])}for(var tw=0;tw<lE.length;tw++){var sw=lE[tw],p3=sw.toLowerCase(),g3=sw[0].toUpperCase()+sw.slice(1);ec(p3,"on"+g3)}ec(tP,"onAnimationEnd");ec(sP,"onAnimationIteration");ec(nP,"onAnimationStart");ec("dblclick","onDoubleClick");ec("focusin","onFocus");ec("focusout","onBlur");ec(rP,"onTransitionEnd");Mf("onMouseEnter",["mouseout","mouseover"]);Mf("onMouseLeave",["mouseout","mouseover"]);Mf("onPointerEnter",["pointerout","pointerover"]);Mf("onPointerLeave",["pointerout","pointerover"]);du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));du("onBeforeInput",["compositionend","keypress","textInput","paste"]);du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Em="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Em));function cE(s,e,t){var n=s.type||"unknown-event";s.currentTarget=t,pF(n,e,void 0,s),s.currentTarget=null}function aP(s,e){e=(e&4)!==0;for(var t=0;t<s.length;t++){var n=s[t],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;cE(r,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;cE(r,l,d),i=c}}}if(P0)throw s=w1,P0=!1,w1=null,s}function ut(s,e){var t=e[T1];t===void 0&&(t=e[T1]=new Set);var n=s+"__bubble";t.has(n)||(oP(e,s,2,!1),t.add(n))}function nw(s,e,t){var n=0;e&&(n|=4),oP(t,s,n,e)}var ex="_reactListening"+Math.random().toString(36).slice(2);function yp(s){if(!s[ex]){s[ex]=!0,m2.forEach(function(t){t!=="selectionchange"&&(v3.has(t)||nw(t,!1,s),nw(t,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[ex]||(e[ex]=!0,nw("selectionchange",!1,e))}}function oP(s,e,t,n){switch(W2(e)){case 1:var r=TF;break;case 4:r=RF;break;default:r=AN}t=r.bind(null,e,t,s),r=void 0,!b1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?s.addEventListener(e,t,{capture:!0,passive:r}):s.addEventListener(e,t,!0):r!==void 0?s.addEventListener(e,t,{passive:r}):s.addEventListener(e,t,!1)}function rw(s,e,t,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Cc(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}P2(function(){var d=i,h=jN(t),f=[];e:{var m=iP.get(s);if(m!==void 0){var p=CN,x=s;switch(s){case"keypress":if(Ix(t)===0)break e;case"keydown":case"keyup":p=qF;break;case"focusin":x="focus",p=Qb;break;case"focusout":x="blur",p=Qb;break;case"beforeblur":case"afterblur":p=Qb;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=QA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=DF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=XF;break;case tP:case sP:case nP:p=FF;break;case rP:p=JF;break;case"scroll":p=MF;break;case"wheel":p=e3;break;case"copy":case"cut":case"paste":p=zF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ZA}var v=(e&4)!==0,w=!v&&s==="scroll",g=v?m!==null?m+"Capture":null:m;v=[];for(var y=d,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,g!==null&&(_=fp(y,g),_!=null&&v.push(bp(y,_,b)))),w)break;y=y.return}0<v.length&&(m=new p(m,x,null,t,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=s==="mouseover"||s==="pointerover",p=s==="mouseout"||s==="pointerout",m&&t!==x1&&(x=t.relatedTarget||t.fromElement)&&(Cc(x)||x[no]))break e;if((p||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=t.relatedTarget||t.toElement,p=d,x=x?Cc(x):null,x!==null&&(w=uu(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=d),p!==x)){if(v=QA,_="onMouseLeave",g="onMouseEnter",y="mouse",(s==="pointerout"||s==="pointerover")&&(v=ZA,_="onPointerLeave",g="onPointerEnter",y="pointer"),w=p==null?m:Ku(p),b=x==null?m:Ku(x),m=new v(_,y+"leave",p,t,h),m.target=w,m.relatedTarget=b,_=null,Cc(h)===d&&(v=new v(g,y+"enter",x,t,h),v.target=b,v.relatedTarget=w,_=v),w=_,p&&x)t:{for(v=p,g=x,y=0,b=v;b;b=wu(b))y++;for(b=0,_=g;_;_=wu(_))b++;for(;0<y-b;)v=wu(v),y--;for(;0<b-y;)g=wu(g),b--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=wu(v),g=wu(g)}v=null}else v=null;p!==null&&dE(f,m,p,v,!1),x!==null&&w!==null&&dE(f,w,x,v,!0)}}e:{if(m=d?Ku(d):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var S=o3;else if(sE(m))if(X2)S=u3;else{S=c3;var A=l3}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=d3);if(S&&(S=S(s,d))){Y2(f,S,t,h);break e}A&&A(s,m,d),s==="focusout"&&(A=m._wrapperState)&&A.controlled&&m.type==="number"&&f1(m,"number",m.value)}switch(A=d?Ku(d):window,s){case"focusin":(sE(A)||A.contentEditable==="true")&&(Gu=A,S1=d,ep=null);break;case"focusout":ep=S1=Gu=null;break;case"mousedown":A1=!0;break;case"contextmenu":case"mouseup":case"dragend":A1=!1,oE(f,t,h);break;case"selectionchange":if(m3)break;case"keydown":case"keyup":oE(f,t,h)}var C;if(PN)e:{switch(s){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Vu?q2(s,t)&&(P="onCompositionEnd"):s==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(G2&&t.locale!=="ko"&&(Vu||P!=="onCompositionStart"?P==="onCompositionEnd"&&Vu&&(C=V2()):(kl=h,EN="value"in kl?kl.value:kl.textContent,Vu=!0)),A=D0(d,P),0<A.length&&(P=new JA(P,s,null,t,h),f.push({event:P,listeners:A}),C?P.data=C:(C=K2(t),C!==null&&(P.data=C)))),(C=s3?n3(s,t):r3(s,t))&&(d=D0(d,"onBeforeInput"),0<d.length&&(h=new JA("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:d}),h.data=C))}aP(f,e)})}function bp(s,e,t){return{instance:s,listener:e,currentTarget:t}}function D0(s,e){for(var t=e+"Capture",n=[];s!==null;){var r=s,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=fp(s,t),i!=null&&n.unshift(bp(s,i,r)),i=fp(s,e),i!=null&&n.push(bp(s,i,r))),s=s.return}return n}function wu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function dE(s,e,t,n,r){for(var i=e._reactName,o=[];t!==null&&t!==n;){var l=t,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=fp(t,i),c!=null&&o.unshift(bp(t,c,l))):r||(c=fp(t,i),c!=null&&o.push(bp(t,c,l)))),t=t.return}o.length!==0&&s.push({event:e,listeners:o})}var x3=/\r\n?/g,y3=/\u0000|\uFFFD/g;function uE(s){return(typeof s=="string"?s:""+s).replace(x3,`
`).replace(y3,"")}function tx(s,e,t){if(e=uE(e),uE(s)!==e&&t)throw Error(X(425))}function O0(){}var E1=null,C1=null;function k1(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var P1=typeof setTimeout=="function"?setTimeout:void 0,b3=typeof clearTimeout=="function"?clearTimeout:void 0,hE=typeof Promise=="function"?Promise:void 0,w3=typeof queueMicrotask=="function"?queueMicrotask:typeof hE<"u"?function(s){return hE.resolve(null).then(s).catch(j3)}:P1;function j3(s){setTimeout(function(){throw s})}function iw(s,e){var t=e,n=0;do{var r=t.nextSibling;if(s.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){s.removeChild(r),gp(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);gp(e)}function Dl(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function fE(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return s;e--}else t==="/$"&&e++}s=s.previousSibling}return null}var Xf=Math.random().toString(36).slice(2),zi="__reactFiber$"+Xf,wp="__reactProps$"+Xf,no="__reactContainer$"+Xf,T1="__reactEvents$"+Xf,_3="__reactListeners$"+Xf,N3="__reactHandles$"+Xf;function Cc(s){var e=s[zi];if(e)return e;for(var t=s.parentNode;t;){if(e=t[no]||t[zi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(s=fE(s);s!==null;){if(t=s[zi])return t;s=fE(s)}return e}s=t,t=s.parentNode}return null}function yv(s){return s=s[zi]||s[no],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ku(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(X(33))}function Yy(s){return s[wp]||null}var R1=[],Yu=-1;function tc(s){return{current:s}}function ht(s){0>Yu||(s.current=R1[Yu],R1[Yu]=null,Yu--)}function at(s,e){Yu++,R1[Yu]=s.current,s.current=e}var Ul={},$s=tc(Ul),yn=tc(!1),Wd=Ul;function If(s,e){var t=s.type.contextTypes;if(!t)return Ul;var n=s.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=r),r}function bn(s){return s=s.childContextTypes,s!=null}function L0(){ht(yn),ht($s)}function mE(s,e,t){if($s.current!==Ul)throw Error(X(168));at($s,e),at(yn,t)}function lP(s,e,t){var n=s.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(X(108,lF(s)||"Unknown",r));return _t({},t,n)}function F0(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ul,Wd=$s.current,at($s,s),at(yn,yn.current),!0}function pE(s,e,t){var n=s.stateNode;if(!n)throw Error(X(169));t?(s=lP(s,e,Wd),n.__reactInternalMemoizedMergedChildContext=s,ht(yn),ht($s),at($s,s)):ht(yn),at(yn,t)}var ga=null,Xy=!1,aw=!1;function cP(s){ga===null?ga=[s]:ga.push(s)}function S3(s){Xy=!0,cP(s)}function sc(){if(!aw&&ga!==null){aw=!0;var s=0,e=Ze;try{var t=ga;for(Ze=1;s<t.length;s++){var n=t[s];do n=n(!0);while(n!==null)}ga=null,Xy=!1}catch(r){throw ga!==null&&(ga=ga.slice(s+1)),I2(_N,sc),r}finally{Ze=e,aw=!1}}return null}var Xu=[],Qu=0,$0=null,z0=0,fr=[],mr=0,Vd=null,Qa=1,Ja="";function vc(s,e){Xu[Qu++]=z0,Xu[Qu++]=$0,$0=s,z0=e}function dP(s,e,t){fr[mr++]=Qa,fr[mr++]=Ja,fr[mr++]=Vd,Vd=s;var n=Qa;s=Ja;var r=32-Zr(n)-1;n&=~(1<<r),t+=1;var i=32-Zr(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,Qa=1<<32-Zr(e)+r|t<<r|n,Ja=i+s}else Qa=1<<i|t<<r|n,Ja=s}function RN(s){s.return!==null&&(vc(s,1),dP(s,1,0))}function MN(s){for(;s===$0;)$0=Xu[--Qu],Xu[Qu]=null,z0=Xu[--Qu],Xu[Qu]=null;for(;s===Vd;)Vd=fr[--mr],fr[mr]=null,Ja=fr[--mr],fr[mr]=null,Qa=fr[--mr],fr[mr]=null}var qn=null,Vn=null,xt=!1,Xr=null;function uP(s,e){var t=gr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=s,e=s.deletions,e===null?(s.deletions=[t],s.flags|=16):e.push(t)}function gE(s,e){switch(s.tag){case 5:var t=s.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,qn=s,Vn=Dl(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,qn=s,Vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Vd!==null?{id:Qa,overflow:Ja}:null,s.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=gr(18,null,null,0),t.stateNode=e,t.return=s,s.child=t,qn=s,Vn=null,!0):!1;default:return!1}}function M1(s){return(s.mode&1)!==0&&(s.flags&128)===0}function I1(s){if(xt){var e=Vn;if(e){var t=e;if(!gE(s,e)){if(M1(s))throw Error(X(418));e=Dl(t.nextSibling);var n=qn;e&&gE(s,e)?uP(n,t):(s.flags=s.flags&-4097|2,xt=!1,qn=s)}}else{if(M1(s))throw Error(X(418));s.flags=s.flags&-4097|2,xt=!1,qn=s}}}function vE(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;qn=s}function sx(s){if(s!==qn)return!1;if(!xt)return vE(s),xt=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!k1(s.type,s.memoizedProps)),e&&(e=Vn)){if(M1(s))throw hP(),Error(X(418));for(;e;)uP(s,e),e=Dl(e.nextSibling)}if(vE(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="/$"){if(e===0){Vn=Dl(s.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}s=s.nextSibling}Vn=null}}else Vn=qn?Dl(s.stateNode.nextSibling):null;return!0}function hP(){for(var s=Vn;s;)s=Dl(s.nextSibling)}function Df(){Vn=qn=null,xt=!1}function IN(s){Xr===null?Xr=[s]:Xr.push(s)}var A3=fo.ReactCurrentBatchConfig;function fm(s,e,t){if(s=t.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(X(309));var n=t.stateNode}if(!n)throw Error(X(147,s));var r=n,i=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof s!="string")throw Error(X(284));if(!t._owner)throw Error(X(290,s))}return s}function nx(s,e){throw s=Object.prototype.toString.call(e),Error(X(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function xE(s){var e=s._init;return e(s._payload)}function fP(s){function e(g,y){if(s){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function t(g,y){if(!s)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=$l(g,y),g.index=0,g.sibling=null,g}function i(g,y,b){return g.index=b,s?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return s&&g.alternate===null&&(g.flags|=2),g}function l(g,y,b,_){return y===null||y.tag!==6?(y=fw(b,g.mode,_),y.return=g,y):(y=r(y,b),y.return=g,y)}function c(g,y,b,_){var S=b.type;return S===Wu?h(g,y,b.props.children,_,b.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ko&&xE(S)===y.type)?(_=r(y,b.props),_.ref=fm(g,y,b),_.return=g,_):(_=Bx(b.type,b.key,b.props,null,g.mode,_),_.ref=fm(g,y,b),_.return=g,_)}function d(g,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=mw(b,g.mode,_),y.return=g,y):(y=r(y,b.children||[]),y.return=g,y)}function h(g,y,b,_,S){return y===null||y.tag!==7?(y=Hd(b,g.mode,_,S),y.return=g,y):(y=r(y,b),y.return=g,y)}function f(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=fw(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Gv:return b=Bx(y.type,y.key,y.props,null,g.mode,b),b.ref=fm(g,null,y),b.return=g,b;case Hu:return y=mw(y,g.mode,b),y.return=g,y;case ko:var _=y._init;return f(g,_(y._payload),b)}if(Sm(y)||lm(y))return y=Hd(y,g.mode,b,null),y.return=g,y;nx(g,y)}return null}function m(g,y,b,_){var S=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(g,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gv:return b.key===S?c(g,y,b,_):null;case Hu:return b.key===S?d(g,y,b,_):null;case ko:return S=b._init,m(g,y,S(b._payload),_)}if(Sm(b)||lm(b))return S!==null?null:h(g,y,b,_,null);nx(g,b)}return null}function p(g,y,b,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(b)||null,l(y,g,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Gv:return g=g.get(_.key===null?b:_.key)||null,c(y,g,_,S);case Hu:return g=g.get(_.key===null?b:_.key)||null,d(y,g,_,S);case ko:var A=_._init;return p(g,y,b,A(_._payload),S)}if(Sm(_)||lm(_))return g=g.get(b)||null,h(y,g,_,S,null);nx(y,_)}return null}function x(g,y,b,_){for(var S=null,A=null,C=y,P=y=0,T=null;C!==null&&P<b.length;P++){C.index>P?(T=C,C=null):T=C.sibling;var O=m(g,C,b[P],_);if(O===null){C===null&&(C=T);break}s&&C&&O.alternate===null&&e(g,C),y=i(O,y,P),A===null?S=O:A.sibling=O,A=O,C=T}if(P===b.length)return t(g,C),xt&&vc(g,P),S;if(C===null){for(;P<b.length;P++)C=f(g,b[P],_),C!==null&&(y=i(C,y,P),A===null?S=C:A.sibling=C,A=C);return xt&&vc(g,P),S}for(C=n(g,C);P<b.length;P++)T=p(C,g,P,b[P],_),T!==null&&(s&&T.alternate!==null&&C.delete(T.key===null?P:T.key),y=i(T,y,P),A===null?S=T:A.sibling=T,A=T);return s&&C.forEach(function(z){return e(g,z)}),xt&&vc(g,P),S}function v(g,y,b,_){var S=lm(b);if(typeof S!="function")throw Error(X(150));if(b=S.call(b),b==null)throw Error(X(151));for(var A=S=null,C=y,P=y=0,T=null,O=b.next();C!==null&&!O.done;P++,O=b.next()){C.index>P?(T=C,C=null):T=C.sibling;var z=m(g,C,O.value,_);if(z===null){C===null&&(C=T);break}s&&C&&z.alternate===null&&e(g,C),y=i(z,y,P),A===null?S=z:A.sibling=z,A=z,C=T}if(O.done)return t(g,C),xt&&vc(g,P),S;if(C===null){for(;!O.done;P++,O=b.next())O=f(g,O.value,_),O!==null&&(y=i(O,y,P),A===null?S=O:A.sibling=O,A=O);return xt&&vc(g,P),S}for(C=n(g,C);!O.done;P++,O=b.next())O=p(C,g,P,O.value,_),O!==null&&(s&&O.alternate!==null&&C.delete(O.key===null?P:O.key),y=i(O,y,P),A===null?S=O:A.sibling=O,A=O);return s&&C.forEach(function(F){return e(g,F)}),xt&&vc(g,P),S}function w(g,y,b,_){if(typeof b=="object"&&b!==null&&b.type===Wu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Gv:e:{for(var S=b.key,A=y;A!==null;){if(A.key===S){if(S=b.type,S===Wu){if(A.tag===7){t(g,A.sibling),y=r(A,b.props.children),y.return=g,g=y;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===ko&&xE(S)===A.type){t(g,A.sibling),y=r(A,b.props),y.ref=fm(g,A,b),y.return=g,g=y;break e}t(g,A);break}else e(g,A);A=A.sibling}b.type===Wu?(y=Hd(b.props.children,g.mode,_,b.key),y.return=g,g=y):(_=Bx(b.type,b.key,b.props,null,g.mode,_),_.ref=fm(g,y,b),_.return=g,g=_)}return o(g);case Hu:e:{for(A=b.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){t(g,y.sibling),y=r(y,b.children||[]),y.return=g,g=y;break e}else{t(g,y);break}else e(g,y);y=y.sibling}y=mw(b,g.mode,_),y.return=g,g=y}return o(g);case ko:return A=b._init,w(g,y,A(b._payload),_)}if(Sm(b))return x(g,y,b,_);if(lm(b))return v(g,y,b,_);nx(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(t(g,y.sibling),y=r(y,b),y.return=g,g=y):(t(g,y),y=fw(b,g.mode,_),y.return=g,g=y),o(g)):t(g,y)}return w}var Of=fP(!0),mP=fP(!1),B0=tc(null),U0=null,Ju=null,DN=null;function ON(){DN=Ju=U0=null}function LN(s){var e=B0.current;ht(B0),s._currentValue=e}function D1(s,e,t){for(;s!==null;){var n=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),s===t)break;s=s.return}}function lh(s,e){U0=s,DN=Ju=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(vn=!0),s.firstContext=null)}function wr(s){var e=s._currentValue;if(DN!==s)if(s={context:s,memoizedValue:e,next:null},Ju===null){if(U0===null)throw Error(X(308));Ju=s,U0.dependencies={lanes:0,firstContext:s}}else Ju=Ju.next=s;return e}var kc=null;function FN(s){kc===null?kc=[s]:kc.push(s)}function pP(s,e,t,n){var r=e.interleaved;return r===null?(t.next=t,FN(e)):(t.next=r.next,r.next=t),e.interleaved=t,ro(s,n)}function ro(s,e){s.lanes|=e;var t=s.alternate;for(t!==null&&(t.lanes|=e),t=s,s=s.return;s!==null;)s.childLanes|=e,t=s.alternate,t!==null&&(t.childLanes|=e),t=s,s=s.return;return t.tag===3?t.stateNode:null}var Po=!1;function $N(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gP(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Za(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function Ol(s,e,t){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,We&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,ro(s,t)}return r=n.interleaved,r===null?(e.next=e,FN(n)):(e.next=r.next,r.next=e),n.interleaved=e,ro(s,t)}function Dx(s,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,NN(s,t)}}function yE(s,e){var t=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},s.updateQueue=t;return}s=t.lastBaseUpdate,s===null?t.firstBaseUpdate=e:s.next=e,t.lastBaseUpdate=e}function H0(s,e,t,n){var r=s.updateQueue;Po=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=s.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=r.baseState;o=0,h=d=c=null,l=i;do{var m=l.lane,p=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=s,v=l;switch(m=e,p=t,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(p,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,m=typeof x=="function"?x.call(p,f,m):x,m==null)break e;f=_t({},f,m);break e;case 2:Po=!0}}l.callback!==null&&l.lane!==0&&(s.flags|=64,m=r.effects,m===null?r.effects=[l]:m.push(l))}else p={eventTime:p,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=p,c=f):h=h.next=p,o|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;m=l,l=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(h===null&&(c=f),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);qd|=o,s.lanes=o,s.memoizedState=f}}function bE(s,e,t){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var n=s[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(X(191,r));r.call(n)}}}var bv={},Yi=tc(bv),jp=tc(bv),_p=tc(bv);function Pc(s){if(s===bv)throw Error(X(174));return s}function zN(s,e){switch(at(_p,e),at(jp,s),at(Yi,bv),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:p1(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=p1(e,s)}ht(Yi),at(Yi,e)}function Lf(){ht(Yi),ht(jp),ht(_p)}function vP(s){Pc(_p.current);var e=Pc(Yi.current),t=p1(e,s.type);e!==t&&(at(jp,s),at(Yi,t))}function BN(s){jp.current===s&&(ht(Yi),ht(jp))}var wt=tc(0);function W0(s){for(var e=s;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ow=[];function UN(){for(var s=0;s<ow.length;s++)ow[s]._workInProgressVersionPrimary=null;ow.length=0}var Ox=fo.ReactCurrentDispatcher,lw=fo.ReactCurrentBatchConfig,Gd=0,jt=null,Xt=null,ds=null,V0=!1,tp=!1,Np=0,E3=0;function ks(){throw Error(X(321))}function HN(s,e){if(e===null)return!1;for(var t=0;t<e.length&&t<s.length;t++)if(!ni(s[t],e[t]))return!1;return!0}function WN(s,e,t,n,r,i){if(Gd=i,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ox.current=s===null||s.memoizedState===null?T3:R3,s=t(n,r),tp){i=0;do{if(tp=!1,Np=0,25<=i)throw Error(X(301));i+=1,ds=Xt=null,e.updateQueue=null,Ox.current=M3,s=t(n,r)}while(tp)}if(Ox.current=G0,e=Xt!==null&&Xt.next!==null,Gd=0,ds=Xt=jt=null,V0=!1,e)throw Error(X(300));return s}function VN(){var s=Np!==0;return Np=0,s}function pi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?jt.memoizedState=ds=s:ds=ds.next=s,ds}function jr(){if(Xt===null){var s=jt.alternate;s=s!==null?s.memoizedState:null}else s=Xt.next;var e=ds===null?jt.memoizedState:ds.next;if(e!==null)ds=e,Xt=s;else{if(s===null)throw Error(X(310));Xt=s,s={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ds===null?jt.memoizedState=ds=s:ds=ds.next=s}return ds}function Sp(s,e){return typeof e=="function"?e(s):e}function cw(s){var e=jr(),t=e.queue;if(t===null)throw Error(X(311));t.lastRenderedReducer=s;var n=Xt,r=n.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Gd&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:s(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,jt.lanes|=h,qd|=h}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,ni(n,e.memoizedState)||(vn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,t.lastRenderedState=n}if(s=t.interleaved,s!==null){r=s;do i=r.lane,jt.lanes|=i,qd|=i,r=r.next;while(r!==s)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function dw(s){var e=jr(),t=e.queue;if(t===null)throw Error(X(311));t.lastRenderedReducer=s;var n=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=s(i,o.action),o=o.next;while(o!==r);ni(i,e.memoizedState)||(vn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,n]}function xP(){}function yP(s,e){var t=jt,n=jr(),r=e(),i=!ni(n.memoizedState,r);if(i&&(n.memoizedState=r,vn=!0),n=n.queue,GN(jP.bind(null,t,n,s),[s]),n.getSnapshot!==e||i||ds!==null&&ds.memoizedState.tag&1){if(t.flags|=2048,Ap(9,wP.bind(null,t,n,r,e),void 0,null),us===null)throw Error(X(349));Gd&30||bP(t,e,r)}return r}function bP(s,e,t){s.flags|=16384,s={getSnapshot:e,value:t},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.stores=[s]):(t=e.stores,t===null?e.stores=[s]:t.push(s))}function wP(s,e,t,n){e.value=t,e.getSnapshot=n,_P(e)&&NP(s)}function jP(s,e,t){return t(function(){_P(e)&&NP(s)})}function _P(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!ni(s,t)}catch{return!0}}function NP(s){var e=ro(s,1);e!==null&&ei(e,s,1,-1)}function wE(s){var e=pi();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:s},e.queue=s,s=s.dispatch=P3.bind(null,jt,s),[e.memoizedState,s]}function Ap(s,e,t,n){return s={tag:s,create:e,destroy:t,deps:n,next:null},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.lastEffect=s.next=s):(t=e.lastEffect,t===null?e.lastEffect=s.next=s:(n=t.next,t.next=s,s.next=n,e.lastEffect=s)),s}function SP(){return jr().memoizedState}function Lx(s,e,t,n){var r=pi();jt.flags|=s,r.memoizedState=Ap(1|e,t,void 0,n===void 0?null:n)}function Qy(s,e,t,n){var r=jr();n=n===void 0?null:n;var i=void 0;if(Xt!==null){var o=Xt.memoizedState;if(i=o.destroy,n!==null&&HN(n,o.deps)){r.memoizedState=Ap(e,t,i,n);return}}jt.flags|=s,r.memoizedState=Ap(1|e,t,i,n)}function jE(s,e){return Lx(8390656,8,s,e)}function GN(s,e){return Qy(2048,8,s,e)}function AP(s,e){return Qy(4,2,s,e)}function EP(s,e){return Qy(4,4,s,e)}function CP(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function kP(s,e,t){return t=t!=null?t.concat([s]):null,Qy(4,4,CP.bind(null,e,s),t)}function qN(){}function PP(s,e){var t=jr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&HN(e,n[1])?n[0]:(t.memoizedState=[s,e],s)}function TP(s,e){var t=jr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&HN(e,n[1])?n[0]:(s=s(),t.memoizedState=[s,e],s)}function RP(s,e,t){return Gd&21?(ni(t,e)||(t=L2(),jt.lanes|=t,qd|=t,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,vn=!0),s.memoizedState=t)}function C3(s,e){var t=Ze;Ze=t!==0&&4>t?t:4,s(!0);var n=lw.transition;lw.transition={};try{s(!1),e()}finally{Ze=t,lw.transition=n}}function MP(){return jr().memoizedState}function k3(s,e,t){var n=Fl(s);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},IP(s))DP(e,t);else if(t=pP(s,e,t,n),t!==null){var r=en();ei(t,s,n,r),OP(t,e,n)}}function P3(s,e,t){var n=Fl(s),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(IP(s))DP(e,r);else{var i=s.alternate;if(s.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,t);if(r.hasEagerState=!0,r.eagerState=l,ni(l,o)){var c=e.interleaved;c===null?(r.next=r,FN(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=pP(s,e,r,n),t!==null&&(r=en(),ei(t,s,n,r),OP(t,e,n))}}function IP(s){var e=s.alternate;return s===jt||e!==null&&e===jt}function DP(s,e){tp=V0=!0;var t=s.pending;t===null?e.next=e:(e.next=t.next,t.next=e),s.pending=e}function OP(s,e,t){if(t&4194240){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,NN(s,t)}}var G0={readContext:wr,useCallback:ks,useContext:ks,useEffect:ks,useImperativeHandle:ks,useInsertionEffect:ks,useLayoutEffect:ks,useMemo:ks,useReducer:ks,useRef:ks,useState:ks,useDebugValue:ks,useDeferredValue:ks,useTransition:ks,useMutableSource:ks,useSyncExternalStore:ks,useId:ks,unstable_isNewReconciler:!1},T3={readContext:wr,useCallback:function(s,e){return pi().memoizedState=[s,e===void 0?null:e],s},useContext:wr,useEffect:jE,useImperativeHandle:function(s,e,t){return t=t!=null?t.concat([s]):null,Lx(4194308,4,CP.bind(null,e,s),t)},useLayoutEffect:function(s,e){return Lx(4194308,4,s,e)},useInsertionEffect:function(s,e){return Lx(4,2,s,e)},useMemo:function(s,e){var t=pi();return e=e===void 0?null:e,s=s(),t.memoizedState=[s,e],s},useReducer:function(s,e,t){var n=pi();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},n.queue=s,s=s.dispatch=k3.bind(null,jt,s),[n.memoizedState,s]},useRef:function(s){var e=pi();return s={current:s},e.memoizedState=s},useState:wE,useDebugValue:qN,useDeferredValue:function(s){return pi().memoizedState=s},useTransition:function(){var s=wE(!1),e=s[0];return s=C3.bind(null,s[1]),pi().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,t){var n=jt,r=pi();if(xt){if(t===void 0)throw Error(X(407));t=t()}else{if(t=e(),us===null)throw Error(X(349));Gd&30||bP(n,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,jE(jP.bind(null,n,i,s),[s]),n.flags|=2048,Ap(9,wP.bind(null,n,i,t,e),void 0,null),t},useId:function(){var s=pi(),e=us.identifierPrefix;if(xt){var t=Ja,n=Qa;t=(n&~(1<<32-Zr(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Np++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=E3++,e=":"+e+"r"+t.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},R3={readContext:wr,useCallback:PP,useContext:wr,useEffect:GN,useImperativeHandle:kP,useInsertionEffect:AP,useLayoutEffect:EP,useMemo:TP,useReducer:cw,useRef:SP,useState:function(){return cw(Sp)},useDebugValue:qN,useDeferredValue:function(s){var e=jr();return RP(e,Xt.memoizedState,s)},useTransition:function(){var s=cw(Sp)[0],e=jr().memoizedState;return[s,e]},useMutableSource:xP,useSyncExternalStore:yP,useId:MP,unstable_isNewReconciler:!1},M3={readContext:wr,useCallback:PP,useContext:wr,useEffect:GN,useImperativeHandle:kP,useInsertionEffect:AP,useLayoutEffect:EP,useMemo:TP,useReducer:dw,useRef:SP,useState:function(){return dw(Sp)},useDebugValue:qN,useDeferredValue:function(s){var e=jr();return Xt===null?e.memoizedState=s:RP(e,Xt.memoizedState,s)},useTransition:function(){var s=dw(Sp)[0],e=jr().memoizedState;return[s,e]},useMutableSource:xP,useSyncExternalStore:yP,useId:MP,unstable_isNewReconciler:!1};function Mr(s,e){if(s&&s.defaultProps){e=_t({},e),s=s.defaultProps;for(var t in s)e[t]===void 0&&(e[t]=s[t]);return e}return e}function O1(s,e,t,n){e=s.memoizedState,t=t(n,e),t=t==null?e:_t({},e,t),s.memoizedState=t,s.lanes===0&&(s.updateQueue.baseState=t)}var Jy={isMounted:function(s){return(s=s._reactInternals)?uu(s)===s:!1},enqueueSetState:function(s,e,t){s=s._reactInternals;var n=en(),r=Fl(s),i=Za(n,r);i.payload=e,t!=null&&(i.callback=t),e=Ol(s,i,r),e!==null&&(ei(e,s,r,n),Dx(e,s,r))},enqueueReplaceState:function(s,e,t){s=s._reactInternals;var n=en(),r=Fl(s),i=Za(n,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Ol(s,i,r),e!==null&&(ei(e,s,r,n),Dx(e,s,r))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var t=en(),n=Fl(s),r=Za(t,n);r.tag=2,e!=null&&(r.callback=e),e=Ol(s,r,n),e!==null&&(ei(e,s,n,t),Dx(e,s,n))}};function _E(s,e,t,n,r,i,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!xp(t,n)||!xp(r,i):!0}function LP(s,e,t){var n=!1,r=Ul,i=e.contextType;return typeof i=="object"&&i!==null?i=wr(i):(r=bn(e)?Wd:$s.current,n=e.contextTypes,i=(n=n!=null)?If(s,r):Ul),e=new e(t,i),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jy,s.stateNode=e,e._reactInternals=s,n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=i),e}function NE(s,e,t,n){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==s&&Jy.enqueueReplaceState(e,e.state,null)}function L1(s,e,t,n){var r=s.stateNode;r.props=t,r.state=s.memoizedState,r.refs={},$N(s);var i=e.contextType;typeof i=="object"&&i!==null?r.context=wr(i):(i=bn(e)?Wd:$s.current,r.context=If(s,i)),r.state=s.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(O1(s,e,i,t),r.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Jy.enqueueReplaceState(r,r.state,null),H0(s,t,r,n),r.state=s.memoizedState),typeof r.componentDidMount=="function"&&(s.flags|=4194308)}function Ff(s,e){try{var t="",n=e;do t+=oF(n),n=n.return;while(n);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:s,source:e,stack:r,digest:null}}function uw(s,e,t){return{value:s,source:null,stack:t??null,digest:e??null}}function F1(s,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var I3=typeof WeakMap=="function"?WeakMap:Map;function FP(s,e,t){t=Za(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){K0||(K0=!0,K1=n),F1(s,e)},t}function $P(s,e,t){t=Za(-1,t),t.tag=3;var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){F1(s,e)}}var i=s.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){F1(s,e),typeof n!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function SE(s,e,t){var n=s.pingCache;if(n===null){n=s.pingCache=new I3;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),s=K3.bind(null,s,e,t),e.then(s,s))}function AE(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function EE(s,e,t,n,r){return s.mode&1?(s.flags|=65536,s.lanes=r,s):(s===e?s.flags|=65536:(s.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Za(-1,1),e.tag=2,Ol(t,e,1))),t.lanes|=1),s)}var D3=fo.ReactCurrentOwner,vn=!1;function Xs(s,e,t,n){e.child=s===null?mP(e,null,t,n):Of(e,s.child,t,n)}function CE(s,e,t,n,r){t=t.render;var i=e.ref;return lh(e,r),n=WN(s,e,t,n,i,r),t=VN(),s!==null&&!vn?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,io(s,e,r)):(xt&&t&&RN(e),e.flags|=1,Xs(s,e,n,r),e.child)}function kE(s,e,t,n,r){if(s===null){var i=t.type;return typeof i=="function"&&!tS(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,zP(s,e,i,n,r)):(s=Bx(t.type,null,n,e,e.mode,r),s.ref=e.ref,s.return=e,e.child=s)}if(i=s.child,!(s.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:xp,t(o,n)&&s.ref===e.ref)return io(s,e,r)}return e.flags|=1,s=$l(i,n),s.ref=e.ref,s.return=e,e.child=s}function zP(s,e,t,n,r){if(s!==null){var i=s.memoizedProps;if(xp(i,n)&&s.ref===e.ref)if(vn=!1,e.pendingProps=n=i,(s.lanes&r)!==0)s.flags&131072&&(vn=!0);else return e.lanes=s.lanes,io(s,e,r)}return $1(s,e,t,n,r)}function BP(s,e,t){var n=e.pendingProps,r=n.children,i=s!==null?s.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(eh,Bn),Bn|=t;else{if(!(t&1073741824))return s=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,at(eh,Bn),Bn|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:t,at(eh,Bn),Bn|=n}else i!==null?(n=i.baseLanes|t,e.memoizedState=null):n=t,at(eh,Bn),Bn|=n;return Xs(s,e,r,t),e.child}function UP(s,e){var t=e.ref;(s===null&&t!==null||s!==null&&s.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function $1(s,e,t,n,r){var i=bn(t)?Wd:$s.current;return i=If(e,i),lh(e,r),t=WN(s,e,t,n,i,r),n=VN(),s!==null&&!vn?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,io(s,e,r)):(xt&&n&&RN(e),e.flags|=1,Xs(s,e,t,r),e.child)}function PE(s,e,t,n,r){if(bn(t)){var i=!0;F0(e)}else i=!1;if(lh(e,r),e.stateNode===null)Fx(s,e),LP(e,t,n),L1(e,t,n,r),n=!0;else if(s===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=t.contextType;typeof d=="object"&&d!==null?d=wr(d):(d=bn(t)?Wd:$s.current,d=If(e,d));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&NE(e,o,n,d),Po=!1;var m=e.memoizedState;o.state=m,H0(e,n,o,r),c=e.memoizedState,l!==n||m!==c||yn.current||Po?(typeof h=="function"&&(O1(e,t,h,n),c=e.memoizedState),(l=Po||_E(e,t,l,n,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,gP(s,e),l=e.memoizedProps,d=e.type===e.elementType?l:Mr(e.type,l),o.props=d,f=e.pendingProps,m=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=wr(c):(c=bn(t)?Wd:$s.current,c=If(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&NE(e,o,n,c),Po=!1,m=e.memoizedState,o.state=m,H0(e,n,o,r);var x=e.memoizedState;l!==f||m!==x||yn.current||Po?(typeof p=="function"&&(O1(e,t,p,n),x=e.memoizedState),(d=Po||_E(e,t,d,n,m,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===s.memoizedProps&&m===s.memoizedState||(e.flags|=1024),n=!1)}return z1(s,e,t,n,i,r)}function z1(s,e,t,n,r,i){UP(s,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&pE(e,t,!1),io(s,e,i);n=e.stateNode,D3.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,s!==null&&o?(e.child=Of(e,s.child,null,i),e.child=Of(e,null,l,i)):Xs(s,e,l,i),e.memoizedState=n.state,r&&pE(e,t,!0),e.child}function HP(s){var e=s.stateNode;e.pendingContext?mE(s,e.pendingContext,e.pendingContext!==e.context):e.context&&mE(s,e.context,!1),zN(s,e.containerInfo)}function TE(s,e,t,n,r){return Df(),IN(r),e.flags|=256,Xs(s,e,t,n),e.child}var B1={dehydrated:null,treeContext:null,retryLane:0};function U1(s){return{baseLanes:s,cachePool:null,transitions:null}}function WP(s,e,t){var n=e.pendingProps,r=wt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=s!==null&&s.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(r|=1),at(wt,r&1),s===null)return I1(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,s=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=tb(o,n,0,null),s=Hd(s,n,t,null),i.return=e,s.return=e,i.sibling=s,e.child=i,e.child.memoizedState=U1(t),e.memoizedState=B1,s):KN(e,o));if(r=s.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return O3(s,e,o,n,l,r,t);if(i){i=n.fallback,o=e.mode,r=s.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=$l(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=$l(l,i):(i=Hd(i,o,t,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=s.child.memoizedState,o=o===null?U1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=s.childLanes&~t,e.memoizedState=B1,n}return i=s.child,s=i.sibling,n=$l(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,s!==null&&(t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)),e.child=n,e.memoizedState=null,n}function KN(s,e){return e=tb({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function rx(s,e,t,n){return n!==null&&IN(n),Of(e,s.child,null,t),s=KN(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function O3(s,e,t,n,r,i,o){if(t)return e.flags&256?(e.flags&=-257,n=uw(Error(X(422))),rx(s,e,o,n)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=tb({mode:"visible",children:n.children},r,0,null),i=Hd(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Of(e,s.child,null,o),e.child.memoizedState=U1(o),e.memoizedState=B1,i);if(!(e.mode&1))return rx(s,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(X(419)),n=uw(i,n,void 0),rx(s,e,o,n)}if(l=(o&s.childLanes)!==0,vn||l){if(n=us,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ro(s,r),ei(n,s,r,-1))}return eS(),n=uw(Error(X(421))),rx(s,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=s.child,e=Y3.bind(null,s),r._reactRetry=e,null):(s=i.treeContext,Vn=Dl(r.nextSibling),qn=e,xt=!0,Xr=null,s!==null&&(fr[mr++]=Qa,fr[mr++]=Ja,fr[mr++]=Vd,Qa=s.id,Ja=s.overflow,Vd=e),e=KN(e,n.children),e.flags|=4096,e)}function RE(s,e,t){s.lanes|=e;var n=s.alternate;n!==null&&(n.lanes|=e),D1(s.return,e,t)}function hw(s,e,t,n,r){var i=s.memoizedState;i===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=t,i.tailMode=r)}function VP(s,e,t){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(Xs(s,e,n.children,t),n=wt.current,n&2)n=n&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&RE(s,t,e);else if(s.tag===19)RE(s,t,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}n&=1}if(at(wt,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)s=t.alternate,s!==null&&W0(s)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),hw(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(s=r.alternate,s!==null&&W0(s)===null){e.child=r;break}s=r.sibling,r.sibling=t,t=r,r=s}hw(e,!0,t,null,i);break;case"together":hw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fx(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function io(s,e,t){if(s!==null&&(e.dependencies=s.dependencies),qd|=e.lanes,!(t&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(X(153));if(e.child!==null){for(s=e.child,t=$l(s,s.pendingProps),e.child=t,t.return=e;s.sibling!==null;)s=s.sibling,t=t.sibling=$l(s,s.pendingProps),t.return=e;t.sibling=null}return e.child}function L3(s,e,t){switch(e.tag){case 3:HP(e),Df();break;case 5:vP(e);break;case 1:bn(e.type)&&F0(e);break;case 4:zN(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;at(B0,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(at(wt,wt.current&1),e.flags|=128,null):t&e.child.childLanes?WP(s,e,t):(at(wt,wt.current&1),s=io(s,e,t),s!==null?s.sibling:null);at(wt,wt.current&1);break;case 19:if(n=(t&e.childLanes)!==0,s.flags&128){if(n)return VP(s,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),at(wt,wt.current),n)break;return null;case 22:case 23:return e.lanes=0,BP(s,e,t)}return io(s,e,t)}var GP,H1,qP,KP;GP=function(s,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)s.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};H1=function(){};qP=function(s,e,t,n){var r=s.memoizedProps;if(r!==n){s=e.stateNode,Pc(Yi.current);var i=null;switch(t){case"input":r=u1(s,r),n=u1(s,n),i=[];break;case"select":r=_t({},r,{value:void 0}),n=_t({},n,{value:void 0}),i=[];break;case"textarea":r=m1(s,r),n=m1(s,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(s.onclick=O0)}g1(t,n);var o;t=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(up.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(d,t)),t=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(up.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ut("scroll",s),i||l===c||(i=[])):(i=i||[]).push(d,c))}t&&(i=i||[]).push("style",t);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};KP=function(s,e,t,n){t!==n&&(e.flags|=4)};function mm(s,e){if(!xt)switch(s.tailMode){case"hidden":e=s.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?s.tail=null:t.sibling=null;break;case"collapsed":t=s.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function Ps(s){var e=s.alternate!==null&&s.alternate.child===s.child,t=0,n=0;if(e)for(var r=s.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=s,r=r.sibling;else for(r=s.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=s,r=r.sibling;return s.subtreeFlags|=n,s.childLanes=t,e}function F3(s,e,t){var n=e.pendingProps;switch(MN(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ps(e),null;case 1:return bn(e.type)&&L0(),Ps(e),null;case 3:return n=e.stateNode,Lf(),ht(yn),ht($s),UN(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(sx(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xr!==null&&(Q1(Xr),Xr=null))),H1(s,e),Ps(e),null;case 5:BN(e);var r=Pc(_p.current);if(t=e.type,s!==null&&e.stateNode!=null)qP(s,e,t,n,r),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(X(166));return Ps(e),null}if(s=Pc(Yi.current),sx(e)){n=e.stateNode,t=e.type;var i=e.memoizedProps;switch(n[zi]=e,n[wp]=i,s=(e.mode&1)!==0,t){case"dialog":ut("cancel",n),ut("close",n);break;case"iframe":case"object":case"embed":ut("load",n);break;case"video":case"audio":for(r=0;r<Em.length;r++)ut(Em[r],n);break;case"source":ut("error",n);break;case"img":case"image":case"link":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"input":BA(n,i),ut("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ut("invalid",n);break;case"textarea":HA(n,i),ut("invalid",n)}g1(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&tx(n.textContent,l,s),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&tx(n.textContent,l,s),r=["children",""+l]):up.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ut("scroll",n)}switch(t){case"input":qv(n),UA(n,i,!0);break;case"textarea":qv(n),WA(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=O0)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=j2(t)),s==="http://www.w3.org/1999/xhtml"?t==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof n.is=="string"?s=o.createElement(t,{is:n.is}):(s=o.createElement(t),t==="select"&&(o=s,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):s=o.createElementNS(s,t),s[zi]=e,s[wp]=n,GP(s,e,!1,!1),e.stateNode=s;e:{switch(o=v1(t,n),t){case"dialog":ut("cancel",s),ut("close",s),r=n;break;case"iframe":case"object":case"embed":ut("load",s),r=n;break;case"video":case"audio":for(r=0;r<Em.length;r++)ut(Em[r],s);r=n;break;case"source":ut("error",s),r=n;break;case"img":case"image":case"link":ut("error",s),ut("load",s),r=n;break;case"details":ut("toggle",s),r=n;break;case"input":BA(s,n),r=u1(s,n),ut("invalid",s);break;case"option":r=n;break;case"select":s._wrapperState={wasMultiple:!!n.multiple},r=_t({},n,{value:void 0}),ut("invalid",s);break;case"textarea":HA(s,n),r=m1(s,n),ut("invalid",s);break;default:r=n}g1(t,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?S2(s,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_2(s,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&hp(s,c):typeof c=="number"&&hp(s,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(up.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ut("scroll",s):c!=null&&xN(s,i,c,o))}switch(t){case"input":qv(s),UA(s,n,!1);break;case"textarea":qv(s),WA(s);break;case"option":n.value!=null&&s.setAttribute("value",""+Bl(n.value));break;case"select":s.multiple=!!n.multiple,i=n.value,i!=null?rh(s,!!n.multiple,i,!1):n.defaultValue!=null&&rh(s,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(s.onclick=O0)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ps(e),null;case 6:if(s&&e.stateNode!=null)KP(s,e,s.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(X(166));if(t=Pc(_p.current),Pc(Yi.current),sx(e)){if(n=e.stateNode,t=e.memoizedProps,n[zi]=e,(i=n.nodeValue!==t)&&(s=qn,s!==null))switch(s.tag){case 3:tx(n.nodeValue,t,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&tx(n.nodeValue,t,(s.mode&1)!==0)}i&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[zi]=e,e.stateNode=n}return Ps(e),null;case 13:if(ht(wt),n=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(xt&&Vn!==null&&e.mode&1&&!(e.flags&128))hP(),Df(),e.flags|=98560,i=!1;else if(i=sx(e),n!==null&&n.dehydrated!==null){if(s===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[zi]=e}else Df(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ps(e),i=!1}else Xr!==null&&(Q1(Xr),Xr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(s!==null&&s.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(s===null||wt.current&1?Zt===0&&(Zt=3):eS())),e.updateQueue!==null&&(e.flags|=4),Ps(e),null);case 4:return Lf(),H1(s,e),s===null&&yp(e.stateNode.containerInfo),Ps(e),null;case 10:return LN(e.type._context),Ps(e),null;case 17:return bn(e.type)&&L0(),Ps(e),null;case 19:if(ht(wt),i=e.memoizedState,i===null)return Ps(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)mm(i,!1);else{if(Zt!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(o=W0(s),o!==null){for(e.flags|=128,mm(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)i=t,s=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t=t.sibling;return at(wt,wt.current&1|2),e.child}s=s.sibling}i.tail!==null&&Rt()>$f&&(e.flags|=128,n=!0,mm(i,!1),e.lanes=4194304)}else{if(!n)if(s=W0(o),s!==null){if(e.flags|=128,n=!0,t=s.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),mm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xt)return Ps(e),null}else 2*Rt()-i.renderingStartTime>$f&&t!==1073741824&&(e.flags|=128,n=!0,mm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Rt(),e.sibling=null,t=wt.current,at(wt,n?t&1|2:t&1),e):(Ps(e),null);case 22:case 23:return ZN(),n=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Bn&1073741824&&(Ps(e),e.subtreeFlags&6&&(e.flags|=8192)):Ps(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function $3(s,e){switch(MN(e),e.tag){case 1:return bn(e.type)&&L0(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return Lf(),ht(yn),ht($s),UN(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return BN(e),null;case 13:if(ht(wt),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Df()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return ht(wt),null;case 4:return Lf(),null;case 10:return LN(e.type._context),null;case 22:case 23:return ZN(),null;case 24:return null;default:return null}}var ix=!1,Ls=!1,z3=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Zu(s,e){var t=s.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){kt(s,e,n)}else t.current=null}function W1(s,e,t){try{t()}catch(n){kt(s,e,n)}}var ME=!1;function B3(s,e){if(E1=M0,s=Z2(),TN(s)){if("selectionStart"in s)var t={start:s.selectionStart,end:s.selectionEnd};else e:{t=(t=s.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=s,m=null;t:for(;;){for(var p;f!==t||r!==0&&f.nodeType!==3||(l=o+r),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)m=f,f=p;for(;;){if(f===s)break t;if(m===t&&++d===r&&(l=o),m===i&&++h===n&&(c=o),(p=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=p}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(C1={focusedElem:s,selectionRange:t},M0=!1,ae=e;ae!==null;)if(e=ae,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,ae=s;else for(;ae!==null;){e=ae;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,w=x.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:Mr(e.type,v),w);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(_){kt(e,e.return,_)}if(s=e.sibling,s!==null){s.return=e.return,ae=s;break}ae=e.return}return x=ME,ME=!1,x}function sp(s,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&s)===s){var i=r.destroy;r.destroy=void 0,i!==void 0&&W1(e,t,i)}r=r.next}while(r!==n)}}function Zy(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&s)===s){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function V1(s){var e=s.ref;if(e!==null){var t=s.stateNode;switch(s.tag){case 5:s=t;break;default:s=t}typeof e=="function"?e(s):e.current=s}}function YP(s){var e=s.alternate;e!==null&&(s.alternate=null,YP(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[zi],delete e[wp],delete e[T1],delete e[_3],delete e[N3])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function XP(s){return s.tag===5||s.tag===3||s.tag===4}function IE(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||XP(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function G1(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(s,e):t.insertBefore(s,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(s,t)):(e=t,e.appendChild(s)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=O0));else if(n!==4&&(s=s.child,s!==null))for(G1(s,e,t),s=s.sibling;s!==null;)G1(s,e,t),s=s.sibling}function q1(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.insertBefore(s,e):t.appendChild(s);else if(n!==4&&(s=s.child,s!==null))for(q1(s,e,t),s=s.sibling;s!==null;)q1(s,e,t),s=s.sibling}var ys=null,Kr=!1;function bo(s,e,t){for(t=t.child;t!==null;)QP(s,e,t),t=t.sibling}function QP(s,e,t){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(Vy,t)}catch{}switch(t.tag){case 5:Ls||Zu(t,e);case 6:var n=ys,r=Kr;ys=null,bo(s,e,t),ys=n,Kr=r,ys!==null&&(Kr?(s=ys,t=t.stateNode,s.nodeType===8?s.parentNode.removeChild(t):s.removeChild(t)):ys.removeChild(t.stateNode));break;case 18:ys!==null&&(Kr?(s=ys,t=t.stateNode,s.nodeType===8?iw(s.parentNode,t):s.nodeType===1&&iw(s,t),gp(s)):iw(ys,t.stateNode));break;case 4:n=ys,r=Kr,ys=t.stateNode.containerInfo,Kr=!0,bo(s,e,t),ys=n,Kr=r;break;case 0:case 11:case 14:case 15:if(!Ls&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&W1(t,e,o),r=r.next}while(r!==n)}bo(s,e,t);break;case 1:if(!Ls&&(Zu(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(l){kt(t,e,l)}bo(s,e,t);break;case 21:bo(s,e,t);break;case 22:t.mode&1?(Ls=(n=Ls)||t.memoizedState!==null,bo(s,e,t),Ls=n):bo(s,e,t);break;default:bo(s,e,t)}}function DE(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var t=s.stateNode;t===null&&(t=s.stateNode=new z3),e.forEach(function(n){var r=X3.bind(null,s,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Cr(s,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var i=s,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ys=l.stateNode,Kr=!1;break e;case 3:ys=l.stateNode.containerInfo,Kr=!0;break e;case 4:ys=l.stateNode.containerInfo,Kr=!0;break e}l=l.return}if(ys===null)throw Error(X(160));QP(i,o,r),ys=null,Kr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){kt(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JP(e,s),e=e.sibling}function JP(s,e){var t=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Cr(e,s),ui(s),n&4){try{sp(3,s,s.return),Zy(3,s)}catch(v){kt(s,s.return,v)}try{sp(5,s,s.return)}catch(v){kt(s,s.return,v)}}break;case 1:Cr(e,s),ui(s),n&512&&t!==null&&Zu(t,t.return);break;case 5:if(Cr(e,s),ui(s),n&512&&t!==null&&Zu(t,t.return),s.flags&32){var r=s.stateNode;try{hp(r,"")}catch(v){kt(s,s.return,v)}}if(n&4&&(r=s.stateNode,r!=null)){var i=s.memoizedProps,o=t!==null?t.memoizedProps:i,l=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&b2(r,i),v1(l,o);var d=v1(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?S2(r,f):h==="dangerouslySetInnerHTML"?_2(r,f):h==="children"?hp(r,f):xN(r,h,f,d)}switch(l){case"input":h1(r,i);break;case"textarea":w2(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?rh(r,!!i.multiple,p,!1):m!==!!i.multiple&&(i.defaultValue!=null?rh(r,!!i.multiple,i.defaultValue,!0):rh(r,!!i.multiple,i.multiple?[]:"",!1))}r[wp]=i}catch(v){kt(s,s.return,v)}}break;case 6:if(Cr(e,s),ui(s),n&4){if(s.stateNode===null)throw Error(X(162));r=s.stateNode,i=s.memoizedProps;try{r.nodeValue=i}catch(v){kt(s,s.return,v)}}break;case 3:if(Cr(e,s),ui(s),n&4&&t!==null&&t.memoizedState.isDehydrated)try{gp(e.containerInfo)}catch(v){kt(s,s.return,v)}break;case 4:Cr(e,s),ui(s);break;case 13:Cr(e,s),ui(s),r=s.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(QN=Rt())),n&4&&DE(s);break;case 22:if(h=t!==null&&t.memoizedState!==null,s.mode&1?(Ls=(d=Ls)||h,Cr(e,s),Ls=d):Cr(e,s),ui(s),n&8192){if(d=s.memoizedState!==null,(s.stateNode.isHidden=d)&&!h&&s.mode&1)for(ae=s,h=s.child;h!==null;){for(f=ae=h;ae!==null;){switch(m=ae,p=m.child,m.tag){case 0:case 11:case 14:case 15:sp(4,m,m.return);break;case 1:Zu(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,t=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(v){kt(n,t,v)}}break;case 5:Zu(m,m.return);break;case 22:if(m.memoizedState!==null){LE(f);continue}}p!==null?(p.return=m,ae=p):LE(f)}h=h.sibling}e:for(h=null,f=s;;){if(f.tag===5){if(h===null){h=f;try{r=f.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=N2("display",o))}catch(v){kt(s,s.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){kt(s,s.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===s)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cr(e,s),ui(s),n&4&&DE(s);break;case 21:break;default:Cr(e,s),ui(s)}}function ui(s){var e=s.flags;if(e&2){try{e:{for(var t=s.return;t!==null;){if(XP(t)){var n=t;break e}t=t.return}throw Error(X(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(hp(r,""),n.flags&=-33);var i=IE(s);q1(s,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=IE(s);G1(s,l,o);break;default:throw Error(X(161))}}catch(c){kt(s,s.return,c)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function U3(s,e,t){ae=s,ZP(s)}function ZP(s,e,t){for(var n=(s.mode&1)!==0;ae!==null;){var r=ae,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||ix;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Ls;l=ix;var d=Ls;if(ix=o,(Ls=c)&&!d)for(ae=r;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?FE(r):c!==null?(c.return=o,ae=c):FE(r);for(;i!==null;)ae=i,ZP(i),i=i.sibling;ae=r,ix=l,Ls=d}OE(s)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ae=i):OE(s)}}function OE(s){for(;ae!==null;){var e=ae;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ls||Zy(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ls)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Mr(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&bE(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}bE(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&gp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Ls||e.flags&512&&V1(e)}catch(m){kt(e,e.return,m)}}if(e===s){ae=null;break}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}}function LE(s){for(;ae!==null;){var e=ae;if(e===s){ae=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ae=t;break}ae=e.return}}function FE(s){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Zy(4,e)}catch(c){kt(e,t,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){kt(e,r,c)}}var i=e.return;try{V1(e)}catch(c){kt(e,i,c)}break;case 5:var o=e.return;try{V1(e)}catch(c){kt(e,o,c)}}}catch(c){kt(e,e.return,c)}if(e===s){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var H3=Math.ceil,q0=fo.ReactCurrentDispatcher,YN=fo.ReactCurrentOwner,vr=fo.ReactCurrentBatchConfig,We=0,us=null,Ft=null,As=0,Bn=0,eh=tc(0),Zt=0,Ep=null,qd=0,eb=0,XN=0,np=null,pn=null,QN=0,$f=1/0,ha=null,K0=!1,K1=null,Ll=null,ax=!1,Pl=null,Y0=0,rp=0,Y1=null,$x=-1,zx=0;function en(){return We&6?Rt():$x!==-1?$x:$x=Rt()}function Fl(s){return s.mode&1?We&2&&As!==0?As&-As:A3.transition!==null?(zx===0&&(zx=L2()),zx):(s=Ze,s!==0||(s=window.event,s=s===void 0?16:W2(s.type)),s):1}function ei(s,e,t,n){if(50<rp)throw rp=0,Y1=null,Error(X(185));vv(s,t,n),(!(We&2)||s!==us)&&(s===us&&(!(We&2)&&(eb|=t),Zt===4&&Mo(s,As)),wn(s,n),t===1&&We===0&&!(e.mode&1)&&($f=Rt()+500,Xy&&sc()))}function wn(s,e){var t=s.callbackNode;AF(s,e);var n=R0(s,s===us?As:0);if(n===0)t!==null&&qA(t),s.callbackNode=null,s.callbackPriority=0;else if(e=n&-n,s.callbackPriority!==e){if(t!=null&&qA(t),e===1)s.tag===0?S3($E.bind(null,s)):cP($E.bind(null,s)),w3(function(){!(We&6)&&sc()}),t=null;else{switch(F2(n)){case 1:t=_N;break;case 4:t=D2;break;case 16:t=T0;break;case 536870912:t=O2;break;default:t=T0}t=oT(t,eT.bind(null,s))}s.callbackPriority=e,s.callbackNode=t}}function eT(s,e){if($x=-1,zx=0,We&6)throw Error(X(327));var t=s.callbackNode;if(ch()&&s.callbackNode!==t)return null;var n=R0(s,s===us?As:0);if(n===0)return null;if(n&30||n&s.expiredLanes||e)e=X0(s,n);else{e=n;var r=We;We|=2;var i=sT();(us!==s||As!==e)&&(ha=null,$f=Rt()+500,Ud(s,e));do try{G3();break}catch(l){tT(s,l)}while(!0);ON(),q0.current=i,We=r,Ft!==null?e=0:(us=null,As=0,e=Zt)}if(e!==0){if(e===2&&(r=j1(s),r!==0&&(n=r,e=X1(s,r))),e===1)throw t=Ep,Ud(s,0),Mo(s,n),wn(s,Rt()),t;if(e===6)Mo(s,n);else{if(r=s.current.alternate,!(n&30)&&!W3(r)&&(e=X0(s,n),e===2&&(i=j1(s),i!==0&&(n=i,e=X1(s,i))),e===1))throw t=Ep,Ud(s,0),Mo(s,n),wn(s,Rt()),t;switch(s.finishedWork=r,s.finishedLanes=n,e){case 0:case 1:throw Error(X(345));case 2:xc(s,pn,ha);break;case 3:if(Mo(s,n),(n&130023424)===n&&(e=QN+500-Rt(),10<e)){if(R0(s,0)!==0)break;if(r=s.suspendedLanes,(r&n)!==n){en(),s.pingedLanes|=s.suspendedLanes&r;break}s.timeoutHandle=P1(xc.bind(null,s,pn,ha),e);break}xc(s,pn,ha);break;case 4:if(Mo(s,n),(n&4194240)===n)break;for(e=s.eventTimes,r=-1;0<n;){var o=31-Zr(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=Rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*H3(n/1960))-n,10<n){s.timeoutHandle=P1(xc.bind(null,s,pn,ha),n);break}xc(s,pn,ha);break;case 5:xc(s,pn,ha);break;default:throw Error(X(329))}}}return wn(s,Rt()),s.callbackNode===t?eT.bind(null,s):null}function X1(s,e){var t=np;return s.current.memoizedState.isDehydrated&&(Ud(s,e).flags|=256),s=X0(s,e),s!==2&&(e=pn,pn=t,e!==null&&Q1(e)),s}function Q1(s){pn===null?pn=s:pn.push.apply(pn,s)}function W3(s){for(var e=s;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],i=r.getSnapshot;r=r.value;try{if(!ni(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mo(s,e){for(e&=~XN,e&=~eb,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var t=31-Zr(e),n=1<<t;s[t]=-1,e&=~n}}function $E(s){if(We&6)throw Error(X(327));ch();var e=R0(s,0);if(!(e&1))return wn(s,Rt()),null;var t=X0(s,e);if(s.tag!==0&&t===2){var n=j1(s);n!==0&&(e=n,t=X1(s,n))}if(t===1)throw t=Ep,Ud(s,0),Mo(s,e),wn(s,Rt()),t;if(t===6)throw Error(X(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,xc(s,pn,ha),wn(s,Rt()),null}function JN(s,e){var t=We;We|=1;try{return s(e)}finally{We=t,We===0&&($f=Rt()+500,Xy&&sc())}}function Kd(s){Pl!==null&&Pl.tag===0&&!(We&6)&&ch();var e=We;We|=1;var t=vr.transition,n=Ze;try{if(vr.transition=null,Ze=1,s)return s()}finally{Ze=n,vr.transition=t,We=e,!(We&6)&&sc()}}function ZN(){Bn=eh.current,ht(eh)}function Ud(s,e){s.finishedWork=null,s.finishedLanes=0;var t=s.timeoutHandle;if(t!==-1&&(s.timeoutHandle=-1,b3(t)),Ft!==null)for(t=Ft.return;t!==null;){var n=t;switch(MN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&L0();break;case 3:Lf(),ht(yn),ht($s),UN();break;case 5:BN(n);break;case 4:Lf();break;case 13:ht(wt);break;case 19:ht(wt);break;case 10:LN(n.type._context);break;case 22:case 23:ZN()}t=t.return}if(us=s,Ft=s=$l(s.current,null),As=Bn=e,Zt=0,Ep=null,XN=eb=qd=0,pn=np=null,kc!==null){for(e=0;e<kc.length;e++)if(t=kc[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}t.pending=n}kc=null}return s}function tT(s,e){do{var t=Ft;try{if(ON(),Ox.current=G0,V0){for(var n=jt.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}V0=!1}if(Gd=0,ds=Xt=jt=null,tp=!1,Np=0,YN.current=null,t===null||t.return===null){Zt=1,Ep=e,Ft=null;break}e:{var i=s,o=t.return,l=t,c=e;if(e=As,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=AE(o);if(p!==null){p.flags&=-257,EE(p,o,l,i,e),p.mode&1&&SE(i,d,e),e=p,c=d;var x=e.updateQueue;if(x===null){var v=new Set;v.add(c),e.updateQueue=v}else x.add(c);break e}else{if(!(e&1)){SE(i,d,e),eS();break e}c=Error(X(426))}}else if(xt&&l.mode&1){var w=AE(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),EE(w,o,l,i,e),IN(Ff(c,l));break e}}i=c=Ff(c,l),Zt!==4&&(Zt=2),np===null?np=[i]:np.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=FP(i,c,e);yE(i,g);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ll===null||!Ll.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=$P(i,l,e);yE(i,_);break e}}i=i.return}while(i!==null)}rT(t)}catch(S){e=S,Ft===t&&t!==null&&(Ft=t=t.return);continue}break}while(!0)}function sT(){var s=q0.current;return q0.current=G0,s===null?G0:s}function eS(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),us===null||!(qd&268435455)&&!(eb&268435455)||Mo(us,As)}function X0(s,e){var t=We;We|=2;var n=sT();(us!==s||As!==e)&&(ha=null,Ud(s,e));do try{V3();break}catch(r){tT(s,r)}while(!0);if(ON(),We=t,q0.current=n,Ft!==null)throw Error(X(261));return us=null,As=0,Zt}function V3(){for(;Ft!==null;)nT(Ft)}function G3(){for(;Ft!==null&&!vF();)nT(Ft)}function nT(s){var e=aT(s.alternate,s,Bn);s.memoizedProps=s.pendingProps,e===null?rT(s):Ft=e,YN.current=null}function rT(s){var e=s;do{var t=e.alternate;if(s=e.return,e.flags&32768){if(t=$3(t,e),t!==null){t.flags&=32767,Ft=t;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Zt=6,Ft=null;return}}else if(t=F3(t,e,Bn),t!==null){Ft=t;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=s}while(e!==null);Zt===0&&(Zt=5)}function xc(s,e,t){var n=Ze,r=vr.transition;try{vr.transition=null,Ze=1,q3(s,e,t,n)}finally{vr.transition=r,Ze=n}return null}function q3(s,e,t,n){do ch();while(Pl!==null);if(We&6)throw Error(X(327));t=s.finishedWork;var r=s.finishedLanes;if(t===null)return null;if(s.finishedWork=null,s.finishedLanes=0,t===s.current)throw Error(X(177));s.callbackNode=null,s.callbackPriority=0;var i=t.lanes|t.childLanes;if(EF(s,i),s===us&&(Ft=us=null,As=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ax||(ax=!0,oT(T0,function(){return ch(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=vr.transition,vr.transition=null;var o=Ze;Ze=1;var l=We;We|=4,YN.current=null,B3(s,t),JP(t,s),f3(C1),M0=!!E1,C1=E1=null,s.current=t,U3(t),xF(),We=l,Ze=o,vr.transition=i}else s.current=t;if(ax&&(ax=!1,Pl=s,Y0=r),i=s.pendingLanes,i===0&&(Ll=null),wF(t.stateNode),wn(s,Rt()),e!==null)for(n=s.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(K0)throw K0=!1,s=K1,K1=null,s;return Y0&1&&s.tag!==0&&ch(),i=s.pendingLanes,i&1?s===Y1?rp++:(rp=0,Y1=s):rp=0,sc(),null}function ch(){if(Pl!==null){var s=F2(Y0),e=vr.transition,t=Ze;try{if(vr.transition=null,Ze=16>s?16:s,Pl===null)var n=!1;else{if(s=Pl,Pl=null,Y0=0,We&6)throw Error(X(331));var r=We;for(We|=4,ae=s.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:sp(8,h,i)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var m=h.sibling,p=h.return;if(YP(h),h===d){ae=null;break}if(m!==null){m.return=p,ae=m;break}ae=p}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sp(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,ae=g;break e}ae=i.return}}var y=s.current;for(ae=y;ae!==null;){o=ae;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,ae=b;else e:for(o=y;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zy(9,l)}}catch(S){kt(l,l.return,S)}if(l===o){ae=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,ae=_;break e}ae=l.return}}if(We=r,sc(),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(Vy,s)}catch{}n=!0}return n}finally{Ze=t,vr.transition=e}}return!1}function zE(s,e,t){e=Ff(t,e),e=FP(s,e,1),s=Ol(s,e,1),e=en(),s!==null&&(vv(s,1,e),wn(s,e))}function kt(s,e,t){if(s.tag===3)zE(s,s,t);else for(;e!==null;){if(e.tag===3){zE(e,s,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ll===null||!Ll.has(n))){s=Ff(t,s),s=$P(e,s,1),e=Ol(e,s,1),s=en(),e!==null&&(vv(e,1,s),wn(e,s));break}}e=e.return}}function K3(s,e,t){var n=s.pingCache;n!==null&&n.delete(e),e=en(),s.pingedLanes|=s.suspendedLanes&t,us===s&&(As&t)===t&&(Zt===4||Zt===3&&(As&130023424)===As&&500>Rt()-QN?Ud(s,0):XN|=t),wn(s,e)}function iT(s,e){e===0&&(s.mode&1?(e=Xv,Xv<<=1,!(Xv&130023424)&&(Xv=4194304)):e=1);var t=en();s=ro(s,e),s!==null&&(vv(s,e,t),wn(s,t))}function Y3(s){var e=s.memoizedState,t=0;e!==null&&(t=e.retryLane),iT(s,t)}function X3(s,e){var t=0;switch(s.tag){case 13:var n=s.stateNode,r=s.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=s.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(e),iT(s,t)}var aT;aT=function(s,e,t){if(s!==null)if(s.memoizedProps!==e.pendingProps||yn.current)vn=!0;else{if(!(s.lanes&t)&&!(e.flags&128))return vn=!1,L3(s,e,t);vn=!!(s.flags&131072)}else vn=!1,xt&&e.flags&1048576&&dP(e,z0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Fx(s,e),s=e.pendingProps;var r=If(e,$s.current);lh(e,t),r=WN(null,e,n,s,r,t);var i=VN();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(n)?(i=!0,F0(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$N(e),r.updater=Jy,e.stateNode=r,r._reactInternals=e,L1(e,n,s,t),e=z1(null,e,n,!0,i,t)):(e.tag=0,xt&&i&&RN(e),Xs(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Fx(s,e),s=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=J3(n),s=Mr(n,s),r){case 0:e=$1(null,e,n,s,t);break e;case 1:e=PE(null,e,n,s,t);break e;case 11:e=CE(null,e,n,s,t);break e;case 14:e=kE(null,e,n,Mr(n.type,s),t);break e}throw Error(X(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mr(n,r),$1(s,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mr(n,r),PE(s,e,n,r,t);case 3:e:{if(HP(e),s===null)throw Error(X(387));n=e.pendingProps,i=e.memoizedState,r=i.element,gP(s,e),H0(e,n,null,t);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ff(Error(X(423)),e),e=TE(s,e,n,t,r);break e}else if(n!==r){r=Ff(Error(X(424)),e),e=TE(s,e,n,t,r);break e}else for(Vn=Dl(e.stateNode.containerInfo.firstChild),qn=e,xt=!0,Xr=null,t=mP(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Df(),n===r){e=io(s,e,t);break e}Xs(s,e,n,t)}e=e.child}return e;case 5:return vP(e),s===null&&I1(e),n=e.type,r=e.pendingProps,i=s!==null?s.memoizedProps:null,o=r.children,k1(n,r)?o=null:i!==null&&k1(n,i)&&(e.flags|=32),UP(s,e),Xs(s,e,o,t),e.child;case 6:return s===null&&I1(e),null;case 13:return WP(s,e,t);case 4:return zN(e,e.stateNode.containerInfo),n=e.pendingProps,s===null?e.child=Of(e,null,n,t):Xs(s,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mr(n,r),CE(s,e,n,r,t);case 7:return Xs(s,e,e.pendingProps,t),e.child;case 8:return Xs(s,e,e.pendingProps.children,t),e.child;case 12:return Xs(s,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,at(B0,n._currentValue),n._currentValue=o,i!==null)if(ni(i.value,o)){if(i.children===r.children&&!yn.current){e=io(s,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Za(-1,t&-t),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),D1(i.return,t,e),l.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),D1(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Xs(s,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,lh(e,t),r=wr(r),n=n(r),e.flags|=1,Xs(s,e,n,t),e.child;case 14:return n=e.type,r=Mr(n,e.pendingProps),r=Mr(n.type,r),kE(s,e,n,r,t);case 15:return zP(s,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Mr(n,r),Fx(s,e),e.tag=1,bn(n)?(s=!0,F0(e)):s=!1,lh(e,t),LP(e,n,r),L1(e,n,r,t),z1(null,e,n,!0,s,t);case 19:return VP(s,e,t);case 22:return BP(s,e,t)}throw Error(X(156,e.tag))};function oT(s,e){return I2(s,e)}function Q3(s,e,t,n){this.tag=s,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(s,e,t,n){return new Q3(s,e,t,n)}function tS(s){return s=s.prototype,!(!s||!s.isReactComponent)}function J3(s){if(typeof s=="function")return tS(s)?1:0;if(s!=null){if(s=s.$$typeof,s===bN)return 11;if(s===wN)return 14}return 2}function $l(s,e){var t=s.alternate;return t===null?(t=gr(s.tag,e,s.key,s.mode),t.elementType=s.elementType,t.type=s.type,t.stateNode=s.stateNode,t.alternate=s,s.alternate=t):(t.pendingProps=e,t.type=s.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=s.flags&14680064,t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,e=s.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=s.sibling,t.index=s.index,t.ref=s.ref,t}function Bx(s,e,t,n,r,i){var o=2;if(n=s,typeof s=="function")tS(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case Wu:return Hd(t.children,r,i,e);case yN:o=8,r|=8;break;case o1:return s=gr(12,t,e,r|2),s.elementType=o1,s.lanes=i,s;case l1:return s=gr(13,t,e,r),s.elementType=l1,s.lanes=i,s;case c1:return s=gr(19,t,e,r),s.elementType=c1,s.lanes=i,s;case v2:return tb(t,r,i,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case p2:o=10;break e;case g2:o=9;break e;case bN:o=11;break e;case wN:o=14;break e;case ko:o=16,n=null;break e}throw Error(X(130,s==null?s:typeof s,""))}return e=gr(o,t,e,r),e.elementType=s,e.type=n,e.lanes=i,e}function Hd(s,e,t,n){return s=gr(7,s,n,e),s.lanes=t,s}function tb(s,e,t,n){return s=gr(22,s,n,e),s.elementType=v2,s.lanes=t,s.stateNode={isHidden:!1},s}function fw(s,e,t){return s=gr(6,s,null,e),s.lanes=t,s}function mw(s,e,t){return e=gr(4,s.children!==null?s.children:[],s.key,e),e.lanes=t,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function Z3(s,e,t,n,r){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kb(0),this.expirationTimes=Kb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kb(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function sS(s,e,t,n,r,i,o,l,c){return s=new Z3(s,e,t,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gr(3,null,null,e),s.current=i,i.stateNode=s,i.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$N(i),s}function e5(s,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hu,key:n==null?null:""+n,children:s,containerInfo:e,implementation:t}}function lT(s){if(!s)return Ul;s=s._reactInternals;e:{if(uu(s)!==s||s.tag!==1)throw Error(X(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(s.tag===1){var t=s.type;if(bn(t))return lP(s,t,e)}return e}function cT(s,e,t,n,r,i,o,l,c){return s=sS(t,n,!0,s,r,i,o,l,c),s.context=lT(null),t=s.current,n=en(),r=Fl(t),i=Za(n,r),i.callback=e??null,Ol(t,i,r),s.current.lanes=r,vv(s,r,n),wn(s,n),s}function sb(s,e,t,n){var r=e.current,i=en(),o=Fl(r);return t=lT(t),e.context===null?e.context=t:e.pendingContext=t,e=Za(i,o),e.payload={element:s},n=n===void 0?null:n,n!==null&&(e.callback=n),s=Ol(r,e,o),s!==null&&(ei(s,r,o,i),Dx(s,r,o)),o}function Q0(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function BE(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var t=s.retryLane;s.retryLane=t!==0&&t<e?t:e}}function nS(s,e){BE(s,e),(s=s.alternate)&&BE(s,e)}function t5(){return null}var dT=typeof reportError=="function"?reportError:function(s){console.error(s)};function rS(s){this._internalRoot=s}nb.prototype.render=rS.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(X(409));sb(s,e,null,null)};nb.prototype.unmount=rS.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;Kd(function(){sb(null,s,null,null)}),e[no]=null}};function nb(s){this._internalRoot=s}nb.prototype.unstable_scheduleHydration=function(s){if(s){var e=B2();s={blockedOn:null,target:s,priority:e};for(var t=0;t<Ro.length&&e!==0&&e<Ro[t].priority;t++);Ro.splice(t,0,s),t===0&&H2(s)}};function iS(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function rb(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function UE(){}function s5(s,e,t,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=Q0(o);i.call(d)}}var o=cT(e,n,s,0,null,!1,!1,"",UE);return s._reactRootContainer=o,s[no]=o.current,yp(s.nodeType===8?s.parentNode:s),Kd(),o}for(;r=s.lastChild;)s.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=Q0(c);l.call(d)}}var c=sS(s,0,!1,null,null,!1,!1,"",UE);return s._reactRootContainer=c,s[no]=c.current,yp(s.nodeType===8?s.parentNode:s),Kd(function(){sb(e,c,t,n)}),c}function ib(s,e,t,n,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=Q0(o);l.call(c)}}sb(e,o,s,r)}else o=s5(t,e,s,r,n);return Q0(o)}$2=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var t=Am(e.pendingLanes);t!==0&&(NN(e,t|1),wn(e,Rt()),!(We&6)&&($f=Rt()+500,sc()))}break;case 13:Kd(function(){var n=ro(s,1);if(n!==null){var r=en();ei(n,s,1,r)}}),nS(s,1)}};SN=function(s){if(s.tag===13){var e=ro(s,134217728);if(e!==null){var t=en();ei(e,s,134217728,t)}nS(s,134217728)}};z2=function(s){if(s.tag===13){var e=Fl(s),t=ro(s,e);if(t!==null){var n=en();ei(t,s,e,n)}nS(s,e)}};B2=function(){return Ze};U2=function(s,e){var t=Ze;try{return Ze=s,e()}finally{Ze=t}};y1=function(s,e,t){switch(e){case"input":if(h1(s,t),e=t.name,t.type==="radio"&&e!=null){for(t=s;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==s&&n.form===s.form){var r=Yy(n);if(!r)throw Error(X(90));y2(n),h1(n,r)}}}break;case"textarea":w2(s,t);break;case"select":e=t.value,e!=null&&rh(s,!!t.multiple,e,!1)}};C2=JN;k2=Kd;var n5={usingClientEntryPoint:!1,Events:[yv,Ku,Yy,A2,E2,JN]},pm={findFiberByHostInstance:Cc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r5={bundleType:pm.bundleType,version:pm.version,rendererPackageName:pm.rendererPackageName,rendererConfig:pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=R2(s),s===null?null:s.stateNode},findFiberByHostInstance:pm.findFiberByHostInstance||t5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ox=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ox.isDisabled&&ox.supportsFiber)try{Vy=ox.inject(r5),Ki=ox}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n5;er.createPortal=function(s,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iS(e))throw Error(X(200));return e5(s,e,null,t)};er.createRoot=function(s,e){if(!iS(s))throw Error(X(299));var t=!1,n="",r=dT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=sS(s,1,!1,null,null,t,!1,n,r),s[no]=e.current,yp(s.nodeType===8?s.parentNode:s),new rS(e)};er.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(X(188)):(s=Object.keys(s).join(","),Error(X(268,s)));return s=R2(e),s=s===null?null:s.stateNode,s};er.flushSync=function(s){return Kd(s)};er.hydrate=function(s,e,t){if(!rb(e))throw Error(X(200));return ib(null,s,e,!0,t)};er.hydrateRoot=function(s,e,t){if(!iS(s))throw Error(X(405));var n=t!=null&&t.hydratedSources||null,r=!1,i="",o=dT;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=cT(e,null,s,1,t??null,r,!1,i,o),s[no]=e.current,yp(s),n)for(s=0;s<n.length;s++)t=n[s],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new nb(e)};er.render=function(s,e,t){if(!rb(e))throw Error(X(200));return ib(null,s,e,!1,t)};er.unmountComponentAtNode=function(s){if(!rb(s))throw Error(X(40));return s._reactRootContainer?(Kd(function(){ib(null,null,s,!1,function(){s._reactRootContainer=null,s[no]=null})}),!0):!1};er.unstable_batchedUpdates=JN;er.unstable_renderSubtreeIntoContainer=function(s,e,t,n){if(!rb(t))throw Error(X(200));if(s==null||s._reactInternals===void 0)throw Error(X(38));return ib(s,e,t,!1,n)};er.version="18.3.1-next-f1338f8080-20240426";function uT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uT)}catch(s){console.error(s)}}uT(),u2.exports=er;var hu=u2.exports;const hT=Zk(hu);var fT,HE=hu;fT=HE.createRoot,HE.hydrateRoot;const i5=1,a5=1e6;let pw=0;function o5(){return pw=(pw+1)%Number.MAX_SAFE_INTEGER,pw.toString()}const gw=new Map,WE=s=>{if(gw.has(s))return;const e=setTimeout(()=>{gw.delete(s),ip({type:"REMOVE_TOAST",toastId:s})},a5);gw.set(s,e)},l5=(s,e)=>{switch(e.type){case"ADD_TOAST":return{...s,toasts:[e.toast,...s.toasts].slice(0,i5)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?WE(t):s.toasts.forEach(n=>{WE(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==e.toastId)}}},Ux=[];let Hx={toasts:[]};function ip(s){Hx=l5(Hx,s),Ux.forEach(e=>{e(Hx)})}function To({...s}){const e=o5(),t=r=>ip({type:"UPDATE_TOAST",toast:{...r,id:e}}),n=()=>ip({type:"DISMISS_TOAST",toastId:e});return ip({type:"ADD_TOAST",toast:{...s,id:e,open:!0,onOpenChange:r=>{r||n()}}}),{id:e,dismiss:n,update:t}}function aS(){const[s,e]=j.useState(Hx);return j.useEffect(()=>(Ux.push(e),()=>{const t=Ux.indexOf(e);t>-1&&Ux.splice(t,1)}),[s]),{...s,toast:To,dismiss:t=>ip({type:"DISMISS_TOAST",toastId:t})}}function ve(s,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(s==null||s(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function VE(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function Yd(...s){return e=>{let t=!1;const n=s.map(r=>{const i=VE(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<n.length;r++){const i=n[r];typeof i=="function"?i():VE(s[r],null)}}}}function lt(...s){return j.useCallback(Yd(...s),s)}function c5(s,e){const t=j.createContext(e),n=i=>{const{children:o,...l}=i,c=j.useMemo(()=>l,Object.values(l));return a.jsx(t.Provider,{value:c,children:o})};n.displayName=s+"Provider";function r(i){const o=j.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${s}\``)}return[n,r]}function na(s,e=[]){let t=[];function n(i,o){const l=j.createContext(o),c=t.length;t=[...t,o];const d=f=>{var g;const{scope:m,children:p,...x}=f,v=((g=m==null?void 0:m[s])==null?void 0:g[c])||l,w=j.useMemo(()=>x,Object.values(x));return a.jsx(v.Provider,{value:w,children:p})};d.displayName=i+"Provider";function h(f,m){var v;const p=((v=m==null?void 0:m[s])==null?void 0:v[c])||l,x=j.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const r=()=>{const i=t.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[s])||i;return j.useMemo(()=>({[`__scope${s}`]:{...l,[s]:c}}),[l,c])}};return r.scopeName=s,[n,d5(r,...e)]}function d5(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Xd(s){const e=h5(s),t=j.forwardRef((n,r)=>{const{children:i,...o}=n,l=j.Children.toArray(i),c=l.find(m5);if(c){const d=c.props.children,h=l.map(f=>f===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:f);return a.jsx(e,{...o,ref:r,children:j.isValidElement(d)?j.cloneElement(d,void 0,h):null})}return a.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${s}.Slot`,t}var u5=Xd("Slot");function h5(s){const e=j.forwardRef((t,n)=>{const{children:r,...i}=t;if(j.isValidElement(r)){const o=g5(r),l=p5(i,r.props);return r.type!==j.Fragment&&(l.ref=n?Yd(n,o):o),j.cloneElement(r,l)}return j.Children.count(r)>1?j.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var f5=Symbol("radix.slottable");function m5(s){return j.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===f5}function p5(s,e){const t={...e};for(const n in e){const r=s[n],i=e[n];/^on[A-Z]/.test(n)?r&&i?t[n]=(...l)=>{const c=i(...l);return r(...l),c}:r&&(t[n]=r):n==="style"?t[n]={...r,...i}:n==="className"&&(t[n]=[r,i].filter(Boolean).join(" "))}return{...s,...t}}function g5(s){var n,r;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function oS(s){const e=s+"CollectionProvider",[t,n]=na(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:w,children:g}=v,y=ee.useRef(null),b=ee.useRef(new Map).current;return a.jsx(r,{scope:w,itemMap:b,collectionRef:y,children:g})};o.displayName=e;const l=s+"CollectionSlot",c=Xd(l),d=ee.forwardRef((v,w)=>{const{scope:g,children:y}=v,b=i(l,g),_=lt(w,b.collectionRef);return a.jsx(c,{ref:_,children:y})});d.displayName=l;const h=s+"CollectionItemSlot",f="data-radix-collection-item",m=Xd(h),p=ee.forwardRef((v,w)=>{const{scope:g,children:y,...b}=v,_=ee.useRef(null),S=lt(w,_),A=i(h,g);return ee.useEffect(()=>(A.itemMap.set(_,{ref:_,...b}),()=>void A.itemMap.delete(_))),a.jsx(m,{[f]:"",ref:S,children:y})});p.displayName=h;function x(v){const w=i(s+"CollectionConsumer",v);return ee.useCallback(()=>{const y=w.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((A,C)=>b.indexOf(A.ref.current)-b.indexOf(C.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},x,n]}var v5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],me=v5.reduce((s,e)=>{const t=Xd(`Primitive.${e}`),n=j.forwardRef((r,i)=>{const{asChild:o,...l}=r,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function mT(s,e){s&&hu.flushSync(()=>s.dispatchEvent(e))}function Qn(s){const e=j.useRef(s);return j.useEffect(()=>{e.current=s}),j.useMemo(()=>(...t)=>{var n;return(n=e.current)==null?void 0:n.call(e,...t)},[])}function x5(s,e=globalThis==null?void 0:globalThis.document){const t=Qn(s);j.useEffect(()=>{const n=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var y5="DismissableLayer",J1="dismissableLayer.update",b5="dismissableLayer.pointerDownOutside",w5="dismissableLayer.focusOutside",GE,pT=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wv=j.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=s,d=j.useContext(pT),[h,f]=j.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=j.useState({}),x=lt(e,C=>f(C)),v=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),g=v.indexOf(w),y=h?v.indexOf(h):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,_=y>=g,S=_5(C=>{const P=C.target,T=[...d.branches].some(O=>O.contains(P));!_||T||(r==null||r(C),o==null||o(C),C.defaultPrevented||l==null||l())},m),A=N5(C=>{const P=C.target;[...d.branches].some(O=>O.contains(P))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},m);return x5(C=>{y===d.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),j.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(GE=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),qE(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=GE)}},[h,m,t,d]),j.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),qE())},[h,d]),j.useEffect(()=>{const C=()=>p({});return document.addEventListener(J1,C),()=>document.removeEventListener(J1,C)},[]),a.jsx(me.div,{...c,ref:x,style:{pointerEvents:b?_?"auto":"none":void 0,...s.style},onFocusCapture:ve(s.onFocusCapture,A.onFocusCapture),onBlurCapture:ve(s.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ve(s.onPointerDownCapture,S.onPointerDownCapture)})});wv.displayName=y5;var j5="DismissableLayerBranch",gT=j.forwardRef((s,e)=>{const t=j.useContext(pT),n=j.useRef(null),r=lt(e,n);return j.useEffect(()=>{const i=n.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),a.jsx(me.div,{...s,ref:r})});gT.displayName=j5;function _5(s,e=globalThis==null?void 0:globalThis.document){const t=Qn(s),n=j.useRef(!1),r=j.useRef(()=>{});return j.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){vT(b5,t,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function N5(s,e=globalThis==null?void 0:globalThis.document){const t=Qn(s),n=j.useRef(!1);return j.useEffect(()=>{const r=i=>{i.target&&!n.current&&vT(w5,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function qE(){const s=new CustomEvent(J1);document.dispatchEvent(s)}function vT(s,e,t,{discrete:n}){const r=t.originalEvent.target,i=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(s,e,{once:!0}),n?mT(r,i):r.dispatchEvent(i)}var S5=wv,A5=gT,Ht=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},E5="Portal",jv=j.forwardRef((s,e)=>{var l;const{container:t,...n}=s,[r,i]=j.useState(!1);Ht(()=>i(!0),[]);const o=t||r&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?hT.createPortal(a.jsx(me.div,{...n,ref:e}),o):null});jv.displayName=E5;function C5(s,e){return j.useReducer((t,n)=>e[t][n]??t,s)}var nc=s=>{const{present:e,children:t}=s,n=k5(e),r=typeof t=="function"?t({present:n.isPresent}):j.Children.only(t),i=lt(n.ref,P5(r));return typeof t=="function"||n.isPresent?j.cloneElement(r,{ref:i}):null};nc.displayName="Presence";function k5(s){const[e,t]=j.useState(),n=j.useRef(null),r=j.useRef(s),i=j.useRef("none"),o=s?"mounted":"unmounted",[l,c]=C5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=lx(n.current);i.current=l==="mounted"?d:"none"},[l]),Ht(()=>{const d=n.current,h=r.current;if(h!==s){const m=i.current,p=lx(d);s?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=s}},[s,c]),Ht(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=p=>{const v=lx(n.current).includes(p.animationName);if(p.target===e&&v&&(c("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},m=p=>{p.target===e&&(i.current=lx(n.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(d=>{n.current=d?getComputedStyle(d):null,t(d)},[])}}function lx(s){return(s==null?void 0:s.animationName)||"none"}function P5(s){var n,r;let e=(n=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:n.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=(r=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var T5=pN[" useInsertionEffect ".trim().toString()]||Ht;function Qd({prop:s,defaultProp:e,onChange:t=()=>{},caller:n}){const[r,i,o]=R5({defaultProp:e,onChange:t}),l=s!==void 0,c=l?s:r;{const h=j.useRef(s!==void 0);j.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const d=j.useCallback(h=>{var f;if(l){const m=M5(h)?h(s):h;m!==s&&((f=o.current)==null||f.call(o,m))}else i(h)},[l,s,i,o]);return[c,d]}function R5({defaultProp:s,onChange:e}){const[t,n]=j.useState(s),r=j.useRef(t),i=j.useRef(e);return T5(()=>{i.current=e},[e]),j.useEffect(()=>{var o;r.current!==t&&((o=i.current)==null||o.call(i,t),r.current=t)},[t,r]),[t,n,i]}function M5(s){return typeof s=="function"}var xT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),I5="VisuallyHidden",lS=j.forwardRef((s,e)=>a.jsx(me.span,{...s,ref:e,style:{...xT,...s.style}}));lS.displayName=I5;var cS="ToastProvider",[dS,D5,O5]=oS("Toast"),[yT,eQ]=na("Toast",[O5]),[L5,ab]=yT(cS),bT=s=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=s,[l,c]=j.useState(null),[d,h]=j.useState(0),f=j.useRef(!1),m=j.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${cS}\`. Expected non-empty \`string\`.`),a.jsx(dS.Provider,{scope:e,children:a.jsx(L5,{scope:e,label:t,duration:n,swipeDirection:r,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:j.useCallback(()=>h(p=>p+1),[]),onToastRemove:j.useCallback(()=>h(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};bT.displayName=cS;var wT="ToastViewport",F5=["F8"],Z1="toast.viewportPause",ej="toast.viewportResume",jT=j.forwardRef((s,e)=>{const{__scopeToast:t,hotkey:n=F5,label:r="Notifications ({hotkey})",...i}=s,o=ab(wT,t),l=D5(t),c=j.useRef(null),d=j.useRef(null),h=j.useRef(null),f=j.useRef(null),m=lt(e,f,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;j.useEffect(()=>{const w=g=>{var b;n.length!==0&&n.every(_=>g[_]||g.code===_)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),j.useEffect(()=>{const w=c.current,g=f.current;if(x&&w&&g){const y=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(Z1);g.dispatchEvent(A),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(ej);g.dispatchEvent(A),o.isClosePausedRef.current=!1}},_=A=>{!w.contains(A.relatedTarget)&&b()},S=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",y),w.addEventListener("focusout",_),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",_),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[x,o.isClosePausedRef]);const v=j.useCallback(({tabbingDirection:w})=>{const y=l().map(b=>{const _=b.ref.current,S=[_,...Q5(_)];return w==="forwards"?S:S.reverse()});return(w==="forwards"?y.reverse():y).flat()},[l]);return j.useEffect(()=>{const w=f.current;if(w){const g=y=>{var S,A,C;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const P=document.activeElement,T=y.shiftKey;if(y.target===w&&T){(S=d.current)==null||S.focus();return}const F=v({tabbingDirection:T?"backwards":"forwards"}),B=F.findIndex(I=>I===P);vw(F.slice(B+1))?y.preventDefault():T?(A=d.current)==null||A.focus():(C=h.current)==null||C.focus()}};return w.addEventListener("keydown",g),()=>w.removeEventListener("keydown",g)}},[l,v]),a.jsxs(A5,{ref:c,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&a.jsx(tj,{ref:d,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"forwards"});vw(w)}}),a.jsx(dS.Slot,{scope:t,children:a.jsx(me.ol,{tabIndex:-1,...i,ref:m})}),x&&a.jsx(tj,{ref:h,onFocusFromOutsideViewport:()=>{const w=v({tabbingDirection:"backwards"});vw(w)}})]})});jT.displayName=wT;var _T="ToastFocusProxy",tj=j.forwardRef((s,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...r}=s,i=ab(_T,t);return a.jsx(lS,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});tj.displayName=_T;var _v="Toast",$5="toast.swipeStart",z5="toast.swipeMove",B5="toast.swipeCancel",U5="toast.swipeEnd",NT=j.forwardRef((s,e)=>{const{forceMount:t,open:n,defaultOpen:r,onOpenChange:i,...o}=s,[l,c]=Qd({prop:n,defaultProp:r??!0,onChange:i,caller:_v});return a.jsx(nc,{present:t||l,children:a.jsx(V5,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Qn(s.onPause),onResume:Qn(s.onResume),onSwipeStart:ve(s.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(s.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ve(s.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(s.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});NT.displayName=_v;var[H5,W5]=yT(_v,{onClose(){}}),V5=j.forwardRef((s,e)=>{const{__scopeToast:t,type:n="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:p,...x}=s,v=ab(_v,t),[w,g]=j.useState(null),y=lt(e,I=>g(I)),b=j.useRef(null),_=j.useRef(null),S=r||v.duration,A=j.useRef(0),C=j.useRef(S),P=j.useRef(0),{onToastAdd:T,onToastRemove:O}=v,z=Qn(()=>{var H;(w==null?void 0:w.contains(document.activeElement))&&((H=v.viewport)==null||H.focus()),o()}),F=j.useCallback(I=>{!I||I===1/0||(window.clearTimeout(P.current),A.current=new Date().getTime(),P.current=window.setTimeout(z,I))},[z]);j.useEffect(()=>{const I=v.viewport;if(I){const H=()=>{F(C.current),d==null||d()},$=()=>{const D=new Date().getTime()-A.current;C.current=C.current-D,window.clearTimeout(P.current),c==null||c()};return I.addEventListener(Z1,$),I.addEventListener(ej,H),()=>{I.removeEventListener(Z1,$),I.removeEventListener(ej,H)}}},[v.viewport,S,c,d,F]),j.useEffect(()=>{i&&!v.isClosePausedRef.current&&F(S)},[i,S,v.isClosePausedRef,F]),j.useEffect(()=>(T(),()=>O()),[T,O]);const B=j.useMemo(()=>w?TT(w):null,[w]);return v.viewport?a.jsxs(a.Fragment,{children:[B&&a.jsx(G5,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),a.jsx(H5,{scope:t,onClose:z,children:hu.createPortal(a.jsx(dS.ItemSlot,{scope:t,children:a.jsx(S5,{asChild:!0,onEscapeKeyDown:ve(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||z(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:ve(s.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,z()))}),onPointerDown:ve(s.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:ve(s.onPointerMove,I=>{if(!b.current)return;const H=I.clientX-b.current.x,$=I.clientY-b.current.y,D=!!_.current,M=["left","right"].includes(v.swipeDirection),R=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,U=M?R(0,H):0,Z=M?0:R(0,$),L=I.pointerType==="touch"?10:2,V={x:U,y:Z},Q={originalEvent:I,delta:V};D?(_.current=V,cx(z5,f,Q,{discrete:!1})):KE(V,v.swipeDirection,L)?(_.current=V,cx($5,h,Q,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(H)>L||Math.abs($)>L)&&(b.current=null)}),onPointerUp:ve(s.onPointerUp,I=>{const H=_.current,$=I.target;if($.hasPointerCapture(I.pointerId)&&$.releasePointerCapture(I.pointerId),_.current=null,b.current=null,H){const D=I.currentTarget,M={originalEvent:I,delta:H};KE(H,v.swipeDirection,v.swipeThreshold)?cx(U5,p,M,{discrete:!0}):cx(B5,m,M,{discrete:!0}),D.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),G5=s=>{const{__scopeToast:e,children:t,...n}=s,r=ab(_v,e),[i,o]=j.useState(!1),[l,c]=j.useState(!1);return Y5(()=>o(!0)),j.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:a.jsx(jv,{asChild:!0,children:a.jsx(lS,{...n,children:i&&a.jsxs(a.Fragment,{children:[r.label," ",t]})})})},q5="ToastTitle",ST=j.forwardRef((s,e)=>{const{__scopeToast:t,...n}=s;return a.jsx(me.div,{...n,ref:e})});ST.displayName=q5;var K5="ToastDescription",AT=j.forwardRef((s,e)=>{const{__scopeToast:t,...n}=s;return a.jsx(me.div,{...n,ref:e})});AT.displayName=K5;var ET="ToastAction",CT=j.forwardRef((s,e)=>{const{altText:t,...n}=s;return t.trim()?a.jsx(PT,{altText:t,asChild:!0,children:a.jsx(uS,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ET}\`. Expected non-empty \`string\`.`),null)});CT.displayName=ET;var kT="ToastClose",uS=j.forwardRef((s,e)=>{const{__scopeToast:t,...n}=s,r=W5(kT,t);return a.jsx(PT,{asChild:!0,children:a.jsx(me.button,{type:"button",...n,ref:e,onClick:ve(s.onClick,r.onClose)})})});uS.displayName=kT;var PT=j.forwardRef((s,e)=>{const{__scopeToast:t,altText:n,...r}=s;return a.jsx(me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...r,ref:e})});function TT(s){const e=[];return Array.from(s.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),X5(n)){const r=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...TT(n))}}),e}function cx(s,e,t,{discrete:n}){const r=t.originalEvent.currentTarget,i=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(s,e,{once:!0}),n?mT(r,i):r.dispatchEvent(i)}var KE=(s,e,t=0)=>{const n=Math.abs(s.x),r=Math.abs(s.y),i=n>r;return e==="left"||e==="right"?i&&n>t:!i&&r>t};function Y5(s=()=>{}){const e=Qn(s);Ht(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function X5(s){return s.nodeType===s.ELEMENT_NODE}function Q5(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function vw(s){const e=document.activeElement;return s.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var J5=bT,RT=jT,MT=NT,IT=ST,DT=AT,OT=CT,LT=uS;function FT(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var r=s.length;for(e=0;e<r;e++)s[e]&&(t=FT(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function $T(){for(var s,e,t=0,n="",r=arguments.length;t<r;t++)(s=arguments[t])&&(e=FT(s))&&(n&&(n+=" "),n+=e);return n}const YE=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,XE=$T,Nv=(s,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return XE(s,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(d=>{const h=t==null?void 0:t[d],f=i==null?void 0:i[d];if(h===null)return null;const m=YE(h)||YE(f);return r[d][m]}),l=t&&Object.entries(t).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:f,className:m,...p}=h;return Object.entries(p).every(x=>{let[v,w]=x;return Array.isArray(w)?w.includes({...i,...l}[v]):{...i,...l}[v]===w})?[...d,f,m]:d},[]);return XE(s,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zT=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:r="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...e$,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:zT("lucide",r),...l},[...o.map(([d,h])=>j.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(s,e)=>{const t=j.forwardRef(({className:n,...r},i)=>j.createElement(t$,{ref:i,iconNode:e,className:zT(`lucide-${Z5(s)}`,n),...r}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=de("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=de("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=de("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=de("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=de("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=de("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=de("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=de("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=de("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=de("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=de("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=de("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=de("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=de("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=de("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=de("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=de("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=de("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=de("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=de("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=de("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=de("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=de("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=de("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=de("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=de("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=de("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=de("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=de("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=de("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=de("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=de("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),vS="-",j$=s=>{const e=N$(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:o=>{const l=o.split(vS);return l[0]===""&&l.length!==1&&l.shift(),qT(l,e)||_$(o)},getConflictingClassGroupIds:(o,l)=>{const c=t[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},qT=(s,e)=>{var o;if(s.length===0)return e.classGroupId;const t=s[0],n=e.nextPart.get(t),r=n?qT(s.slice(1),n):void 0;if(r)return r;if(e.validators.length===0)return;const i=s.join(vS);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},tC=/^\[(.+)\]$/,_$=s=>{if(tC.test(s)){const e=tC.exec(s)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},N$=s=>{const{theme:e,prefix:t}=s,n={nextPart:new Map,validators:[]};return A$(Object.entries(s.classGroups),t).forEach(([i,o])=>{lj(o,n,i,e)}),n},lj=(s,e,t,n)=>{s.forEach(r=>{if(typeof r=="string"){const i=r===""?e:sC(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(S$(r)){lj(r(n),e,t,n);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([i,o])=>{lj(o,sC(e,i),t,n)})})},sC=(s,e)=>{let t=s;return e.split(vS).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},S$=s=>s.isThemeGetter,A$=(s,e)=>e?s.map(([t,n])=>{const r=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[t,r]}):s,E$=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const r=(i,o)=>{t.set(i,o),e++,e>s&&(e=0,n=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return r(i,o),o},set(i,o){t.has(i)?t.set(i,o):r(i,o)}}},KT="!",C$=s=>{const{separator:e,experimentalParseClassName:t}=s,n=e.length===1,r=e[0],i=e.length,o=l=>{const c=[];let d=0,h=0,f;for(let w=0;w<l.length;w++){let g=l[w];if(d===0){if(g===r&&(n||l.slice(w,w+i)===e)){c.push(l.slice(h,w)),h=w+i;continue}if(g==="/"){f=w;continue}}g==="["?d++:g==="]"&&d--}const m=c.length===0?l:l.substring(h),p=m.startsWith(KT),x=p?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:v}};return t?l=>t({className:l,parseClassName:o}):o},k$=s=>{if(s.length<=1)return s;const e=[];let t=[];return s.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},P$=s=>({cache:E$(s.cacheSize),parseClassName:C$(s),...j$(s)}),T$=/\s+/,R$=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:r}=e,i=[],o=s.trim().split(T$);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:p}=t(d);let x=!!p,v=n(x?m.substring(0,p):m);if(!v){if(!x){l=d+(l.length>0?" "+l:l);continue}if(v=n(m),!v){l=d+(l.length>0?" "+l:l);continue}x=!1}const w=k$(h).join(":"),g=f?w+KT:w,y=g+v;if(i.includes(y))continue;i.push(y);const b=r(v,x);for(let _=0;_<b.length;++_){const S=b[_];i.push(g+S)}l=d+(l.length>0?" "+l:l)}return l};function M$(){let s=0,e,t,n="";for(;s<arguments.length;)(e=arguments[s++])&&(t=YT(e))&&(n&&(n+=" "),n+=t);return n}const YT=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=YT(s[n]))&&(t&&(t+=" "),t+=e);return t};function I$(s,...e){let t,n,r,i=o;function o(c){const d=e.reduce((h,f)=>f(h),s());return t=P$(d),n=t.cache.get,r=t.cache.set,i=l,l(c)}function l(c){const d=n(c);if(d)return d;const h=R$(c,t);return r(c,h),h}return function(){return i(M$.apply(null,arguments))}}const dt=s=>{const e=t=>t[s]||[];return e.isThemeGetter=!0,e},XT=/^\[(?:([a-z-]+):)?(.+)\]$/i,D$=/^\d+\/\d+$/,O$=new Set(["px","full","screen"]),L$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,F$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$$=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,z$=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,B$=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ia=s=>dh(s)||O$.has(s)||D$.test(s),wo=s=>Jf(s,"length",Y$),dh=s=>!!s&&!Number.isNaN(Number(s)),xw=s=>Jf(s,"number",dh),gm=s=>!!s&&Number.isInteger(Number(s)),U$=s=>s.endsWith("%")&&dh(s.slice(0,-1)),Me=s=>XT.test(s),jo=s=>L$.test(s),H$=new Set(["length","size","percentage"]),W$=s=>Jf(s,H$,QT),V$=s=>Jf(s,"position",QT),G$=new Set(["image","url"]),q$=s=>Jf(s,G$,Q$),K$=s=>Jf(s,"",X$),vm=()=>!0,Jf=(s,e,t)=>{const n=XT.exec(s);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},Y$=s=>F$.test(s)&&!$$.test(s),QT=()=>!1,X$=s=>z$.test(s),Q$=s=>B$.test(s),J$=()=>{const s=dt("colors"),e=dt("spacing"),t=dt("blur"),n=dt("brightness"),r=dt("borderColor"),i=dt("borderRadius"),o=dt("borderSpacing"),l=dt("borderWidth"),c=dt("contrast"),d=dt("grayscale"),h=dt("hueRotate"),f=dt("invert"),m=dt("gap"),p=dt("gradientColorStops"),x=dt("gradientColorStopPositions"),v=dt("inset"),w=dt("margin"),g=dt("opacity"),y=dt("padding"),b=dt("saturate"),_=dt("scale"),S=dt("sepia"),A=dt("skew"),C=dt("space"),P=dt("translate"),T=()=>["auto","contain","none"],O=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto",Me,e],F=()=>[Me,e],B=()=>["",ia,wo],I=()=>["auto",dh,Me],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Me],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[dh,Me];return{cacheSize:500,separator:":",theme:{colors:[vm],spacing:[ia,wo],blur:["none","",jo,Me],brightness:Z(),borderColor:[s],borderRadius:["none","","full",jo,Me],borderSpacing:F(),borderWidth:B(),contrast:Z(),grayscale:R(),hueRotate:Z(),invert:R(),gap:F(),gradientColorStops:[s],gradientColorStopPositions:[U$,wo],inset:z(),margin:z(),opacity:Z(),padding:F(),saturate:Z(),scale:Z(),sepia:R(),skew:Z(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Me]}],container:["container"],columns:[{columns:[jo]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),Me]}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gm,Me]}],basis:[{basis:z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Me]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",gm,Me]}],"grid-cols":[{"grid-cols":[vm]}],"col-start-end":[{col:["auto",{span:["full",gm,Me]},Me]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[vm]}],"row-start-end":[{row:["auto",{span:[gm,Me]},Me]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Me]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Me,e]}],"min-w":[{"min-w":[Me,e,"min","max","fit"]}],"max-w":[{"max-w":[Me,e,"none","full","min","max","fit","prose",{screen:[jo]},jo]}],h:[{h:[Me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",jo,wo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xw]}],"font-family":[{font:[vm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Me]}],"line-clamp":[{"line-clamp":["none",dh,xw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ia,Me]}],"list-image":[{"list-image":["none",Me]}],"list-style-type":[{list:["none","disc","decimal",Me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ia,wo]}],"underline-offset":[{"underline-offset":["auto",ia,Me]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),V$]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",W$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},q$]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[ia,Me]}],"outline-w":[{outline:[ia,wo]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[ia,wo]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",jo,K$]}],"shadow-color":[{shadow:[vm]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",jo,Me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Me]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",Me]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[gm,Me]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[ia,wo,xw]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Z$=I$(J$);function ne(...s){return Z$($T(s))}const e6=J5,JT=j.forwardRef(({className:s,...e},t)=>a.jsx(RT,{ref:t,className:ne("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...e}));JT.displayName=RT.displayName;const t6=Nv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ZT=j.forwardRef(({className:s,variant:e,...t},n)=>a.jsx(MT,{ref:n,className:ne(t6({variant:e}),s),...t}));ZT.displayName=MT.displayName;const s6=j.forwardRef(({className:s,...e},t)=>a.jsx(OT,{ref:t,className:ne("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...e}));s6.displayName=OT.displayName;const eR=j.forwardRef(({className:s,...e},t)=>a.jsx(LT,{ref:t,className:ne("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...e,children:a.jsx(ic,{className:"h-4 w-4"})}));eR.displayName=LT.displayName;const tR=j.forwardRef(({className:s,...e},t)=>a.jsx(IT,{ref:t,className:ne("text-sm font-semibold",s),...e}));tR.displayName=IT.displayName;const sR=j.forwardRef(({className:s,...e},t)=>a.jsx(DT,{ref:t,className:ne("text-sm opacity-90",s),...e}));sR.displayName=DT.displayName;function n6(){const{toasts:s}=aS();return a.jsxs(e6,{children:[s.map(function({id:e,title:t,description:n,action:r,...i}){return a.jsxs(ZT,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[t&&a.jsx(tR,{children:t}),n&&a.jsx(sR,{children:n})]}),r,a.jsx(eR,{})]},e)}),a.jsx(JT,{})]})}var nC=["light","dark"],r6="(prefers-color-scheme: dark)",i6=j.createContext(void 0),a6={setTheme:s=>{},themes:[]},o6=()=>{var s;return(s=j.useContext(i6))!=null?s:a6};j.memo(({forcedTheme:s,storageKey:e,attribute:t,enableSystem:n,enableColorScheme:r,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let d=i==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=r?nC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,v=!1,w=!0)=>{let g=o?o[x]:x,y=v?x+"|| ''":`'${g}'`,b="";return r&&w&&!v&&nC.includes(x)&&(b+=`d.style.colorScheme = '${x}';`),t==="class"?v||g?b+=`c.add(${y})`:b+="null":g&&(b+=`d[s](n,${y})`),b},p=s?`!function(){${h}${m(s)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${r6}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${d?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return j.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var l6=s=>{switch(s){case"success":return u6;case"info":return f6;case"warning":return h6;case"error":return m6;default:return null}},c6=Array(12).fill(0),d6=({visible:s,className:e})=>ee.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},ee.createElement("div",{className:"sonner-spinner"},c6.map((t,n)=>ee.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),u6=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),h6=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),f6=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),m6=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ee.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),p6=ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ee.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ee.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),g6=()=>{let[s,e]=ee.useState(document.hidden);return ee.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s},cj=1,v6=class{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{let e=this.subscribers.indexOf(s);this.subscribers.splice(e,1)}),this.publish=s=>{this.subscribers.forEach(e=>e(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var e;let{message:t,...n}=s,r=typeof(s==null?void 0:s.id)=="number"||((e=s.id)==null?void 0:e.length)>0?s.id:cj++,i=this.toasts.find(l=>l.id===r),o=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),i?this.toasts=this.toasts.map(l=>l.id===r?(this.publish({...l,...s,id:r,title:t}),{...l,...s,id:r,dismissible:o,title:t}):l):this.addToast({title:t,...n,dismissible:o,id:r}),r},this.dismiss=s=>(this.dismissedToasts.add(s),s||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:s,dismiss:!0})),s),this.message=(s,e)=>this.create({...e,message:s}),this.error=(s,e)=>this.create({...e,message:s,type:"error"}),this.success=(s,e)=>this.create({...e,type:"success",message:s}),this.info=(s,e)=>this.create({...e,type:"info",message:s}),this.warning=(s,e)=>this.create({...e,type:"warning",message:s}),this.loading=(s,e)=>this.create({...e,type:"loading",message:s}),this.promise=(s,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:s,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=s instanceof Promise?s:s(),r=t!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],ee.isValidElement(c))r=!1,this.create({id:t,type:"default",message:c});else if(y6(c)&&!c.ok){r=!1;let d=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:d,description:h})}else if(e.success!==void 0){r=!1;let d=typeof e.success=="function"?await e.success(c):e.success,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:d,description:h})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){r=!1;let d=typeof e.error=="function"?await e.error(c):e.error,h=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:d,description:h})}}).finally(()=>{var c;r&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),l=()=>new Promise((c,d)=>o.then(()=>i[0]==="reject"?d(i[1]):c(i[1])).catch(d));return typeof t!="string"&&typeof t!="number"?{unwrap:l}:Object.assign(t,{unwrap:l})},this.custom=(s,e)=>{let t=(e==null?void 0:e.id)||cj++;return this.create({jsx:s(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},fn=new v6,x6=(s,e)=>{let t=(e==null?void 0:e.id)||cj++;return fn.addToast({title:s,...e,id:t}),t},y6=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",b6=x6,w6=()=>fn.toasts,j6=()=>fn.getActiveToasts(),Ie=Object.assign(b6,{success:fn.success,info:fn.info,warning:fn.warning,error:fn.error,custom:fn.custom,message:fn.message,promise:fn.promise,dismiss:fn.dismiss,loading:fn.loading},{getHistory:w6,getToasts:j6});function _6(s,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}_6(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function dx(s){return s.label!==void 0}var N6=3,S6="32px",A6="16px",rC=4e3,E6=356,C6=14,k6=20,P6=200;function kr(...s){return s.filter(Boolean).join(" ")}function T6(s){let[e,t]=s.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}var R6=s=>{var e,t,n,r,i,o,l,c,d,h,f;let{invert:m,toast:p,unstyled:x,interacting:v,setHeights:w,visibleToasts:g,heights:y,index:b,toasts:_,expanded:S,removeToast:A,defaultRichColors:C,closeButton:P,style:T,cancelButtonStyle:O,actionButtonStyle:z,className:F="",descriptionClassName:B="",duration:I,position:H,gap:$,loadingIcon:D,expandByDefault:M,classNames:R,icons:U,closeButtonAriaLabel:Z="Close toast",pauseWhenPageIsHidden:L}=s,[V,Q]=ee.useState(null),[J,le]=ee.useState(null),[W,pe]=ee.useState(!1),[je,Te]=ee.useState(!1),[Re,Oe]=ee.useState(!1),[Nt,St]=ee.useState(!1),[uc,go]=ee.useState(!1),[hc,am]=ee.useState(0),[vu,CA]=ee.useState(0),om=ee.useRef(p.duration||I||rC),kA=ee.useRef(null),fc=ee.useRef(null),w4=b===0,j4=b+1<=g,sr=p.type,xu=p.dismissible!==!1,_4=p.className||"",N4=p.descriptionClassName||"",Wv=ee.useMemo(()=>y.findIndex(_e=>_e.toastId===p.id)||0,[y,p.id]),S4=ee.useMemo(()=>{var _e;return(_e=p.closeButton)!=null?_e:P},[p.closeButton,P]),PA=ee.useMemo(()=>p.duration||I||rC,[p.duration,I]),zb=ee.useRef(0),yu=ee.useRef(0),TA=ee.useRef(0),bu=ee.useRef(null),[A4,E4]=H.split("-"),RA=ee.useMemo(()=>y.reduce((_e,et,ft)=>ft>=Wv?_e:_e+et.height,0),[y,Wv]),MA=g6(),C4=p.invert||m,Bb=sr==="loading";yu.current=ee.useMemo(()=>Wv*$+RA,[Wv,RA]),ee.useEffect(()=>{om.current=PA},[PA]),ee.useEffect(()=>{pe(!0)},[]),ee.useEffect(()=>{let _e=fc.current;if(_e){let et=_e.getBoundingClientRect().height;return CA(et),w(ft=>[{toastId:p.id,height:et,position:p.position},...ft]),()=>w(ft=>ft.filter(Sr=>Sr.toastId!==p.id))}},[w,p.id]),ee.useLayoutEffect(()=>{if(!W)return;let _e=fc.current,et=_e.style.height;_e.style.height="auto";let ft=_e.getBoundingClientRect().height;_e.style.height=et,CA(ft),w(Sr=>Sr.find(Ar=>Ar.toastId===p.id)?Sr.map(Ar=>Ar.toastId===p.id?{...Ar,height:ft}:Ar):[{toastId:p.id,height:ft,position:p.position},...Sr])},[W,p.title,p.description,w,p.id]);let vo=ee.useCallback(()=>{Te(!0),am(yu.current),w(_e=>_e.filter(et=>et.toastId!==p.id)),setTimeout(()=>{A(p)},P6)},[p,A,w,yu]);ee.useEffect(()=>{if(p.promise&&sr==="loading"||p.duration===1/0||p.type==="loading")return;let _e;return S||v||L&&MA?(()=>{if(TA.current<zb.current){let et=new Date().getTime()-zb.current;om.current=om.current-et}TA.current=new Date().getTime()})():om.current!==1/0&&(zb.current=new Date().getTime(),_e=setTimeout(()=>{var et;(et=p.onAutoClose)==null||et.call(p,p),vo()},om.current)),()=>clearTimeout(_e)},[S,v,p,sr,L,MA,vo]),ee.useEffect(()=>{p.delete&&vo()},[vo,p.delete]);function k4(){var _e,et,ft;return U!=null&&U.loading?ee.createElement("div",{className:kr(R==null?void 0:R.loader,(_e=p==null?void 0:p.classNames)==null?void 0:_e.loader,"sonner-loader"),"data-visible":sr==="loading"},U.loading):D?ee.createElement("div",{className:kr(R==null?void 0:R.loader,(et=p==null?void 0:p.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":sr==="loading"},D):ee.createElement(d6,{className:kr(R==null?void 0:R.loader,(ft=p==null?void 0:p.classNames)==null?void 0:ft.loader),visible:sr==="loading"})}return ee.createElement("li",{tabIndex:0,ref:fc,className:kr(F,_4,R==null?void 0:R.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,R==null?void 0:R.default,R==null?void 0:R[sr],(t=p==null?void 0:p.classNames)==null?void 0:t[sr]),"data-sonner-toast":"","data-rich-colors":(n=p.richColors)!=null?n:C,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":W,"data-promise":!!p.promise,"data-swiped":uc,"data-removed":je,"data-visible":j4,"data-y-position":A4,"data-x-position":E4,"data-index":b,"data-front":w4,"data-swiping":Re,"data-dismissible":xu,"data-type":sr,"data-invert":C4,"data-swipe-out":Nt,"data-swipe-direction":J,"data-expanded":!!(S||M&&W),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${je?hc:yu.current}px`,"--initial-height":M?"auto":`${vu}px`,...T,...p.style},onDragEnd:()=>{Oe(!1),Q(null),bu.current=null},onPointerDown:_e=>{Bb||!xu||(kA.current=new Date,am(yu.current),_e.target.setPointerCapture(_e.pointerId),_e.target.tagName!=="BUTTON"&&(Oe(!0),bu.current={x:_e.clientX,y:_e.clientY}))},onPointerUp:()=>{var _e,et,ft,Sr;if(Nt||!xu)return;bu.current=null;let Ar=Number(((_e=fc.current)==null?void 0:_e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),xo=Number(((et=fc.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),mc=new Date().getTime()-((ft=kA.current)==null?void 0:ft.getTime()),Er=V==="x"?Ar:xo,yo=Math.abs(Er)/mc;if(Math.abs(Er)>=k6||yo>.11){am(yu.current),(Sr=p.onDismiss)==null||Sr.call(p,p),le(V==="x"?Ar>0?"right":"left":xo>0?"down":"up"),vo(),St(!0),go(!1);return}Oe(!1),Q(null)},onPointerMove:_e=>{var et,ft,Sr,Ar;if(!bu.current||!xu||((et=window.getSelection())==null?void 0:et.toString().length)>0)return;let xo=_e.clientY-bu.current.y,mc=_e.clientX-bu.current.x,Er=(ft=s.swipeDirections)!=null?ft:T6(H);!V&&(Math.abs(mc)>1||Math.abs(xo)>1)&&Q(Math.abs(mc)>Math.abs(xo)?"x":"y");let yo={x:0,y:0};V==="y"?(Er.includes("top")||Er.includes("bottom"))&&(Er.includes("top")&&xo<0||Er.includes("bottom")&&xo>0)&&(yo.y=xo):V==="x"&&(Er.includes("left")||Er.includes("right"))&&(Er.includes("left")&&mc<0||Er.includes("right")&&mc>0)&&(yo.x=mc),(Math.abs(yo.x)>0||Math.abs(yo.y)>0)&&go(!0),(Sr=fc.current)==null||Sr.style.setProperty("--swipe-amount-x",`${yo.x}px`),(Ar=fc.current)==null||Ar.style.setProperty("--swipe-amount-y",`${yo.y}px`)}},S4&&!p.jsx?ee.createElement("button",{"aria-label":Z,"data-disabled":Bb,"data-close-button":!0,onClick:Bb||!xu?()=>{}:()=>{var _e;vo(),(_e=p.onDismiss)==null||_e.call(p,p)},className:kr(R==null?void 0:R.closeButton,(r=p==null?void 0:p.classNames)==null?void 0:r.closeButton)},(i=U==null?void 0:U.close)!=null?i:p6):null,p.jsx||j.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:ee.createElement(ee.Fragment,null,sr||p.icon||p.promise?ee.createElement("div",{"data-icon":"",className:kr(R==null?void 0:R.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||k4():null,p.type!=="loading"?p.icon||(U==null?void 0:U[sr])||l6(sr):null):null,ee.createElement("div",{"data-content":"",className:kr(R==null?void 0:R.content,(l=p==null?void 0:p.classNames)==null?void 0:l.content)},ee.createElement("div",{"data-title":"",className:kr(R==null?void 0:R.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?ee.createElement("div",{"data-description":"",className:kr(B,N4,R==null?void 0:R.description,(d=p==null?void 0:p.classNames)==null?void 0:d.description)},typeof p.description=="function"?p.description():p.description):null),j.isValidElement(p.cancel)?p.cancel:p.cancel&&dx(p.cancel)?ee.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||O,onClick:_e=>{var et,ft;dx(p.cancel)&&xu&&((ft=(et=p.cancel).onClick)==null||ft.call(et,_e),vo())},className:kr(R==null?void 0:R.cancelButton,(h=p==null?void 0:p.classNames)==null?void 0:h.cancelButton)},p.cancel.label):null,j.isValidElement(p.action)?p.action:p.action&&dx(p.action)?ee.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||z,onClick:_e=>{var et,ft;dx(p.action)&&((ft=(et=p.action).onClick)==null||ft.call(et,_e),!_e.defaultPrevented&&vo())},className:kr(R==null?void 0:R.actionButton,(f=p==null?void 0:p.classNames)==null?void 0:f.actionButton)},p.action.label):null))};function iC(){if(typeof window>"u"||typeof document>"u")return"ltr";let s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function M6(s,e){let t={};return[s,e].forEach((n,r)=>{let i=r===1,o=i?"--mobile-offset":"--offset",l=i?A6:S6;function c(d){["top","right","bottom","left"].forEach(h=>{t[`${o}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?t[`${o}-${d}`]=l:t[`${o}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),t}var I6=j.forwardRef(function(s,e){let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:d,theme:h="light",richColors:f,duration:m,style:p,visibleToasts:x=N6,toastOptions:v,dir:w=iC(),gap:g=C6,loadingIcon:y,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:S}=s,[A,C]=ee.useState([]),P=ee.useMemo(()=>Array.from(new Set([n].concat(A.filter(L=>L.position).map(L=>L.position)))),[A,n]),[T,O]=ee.useState([]),[z,F]=ee.useState(!1),[B,I]=ee.useState(!1),[H,$]=ee.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=ee.useRef(null),M=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=ee.useRef(null),U=ee.useRef(!1),Z=ee.useCallback(L=>{C(V=>{var Q;return(Q=V.find(J=>J.id===L.id))!=null&&Q.delete||fn.dismiss(L.id),V.filter(({id:J})=>J!==L.id)})},[]);return ee.useEffect(()=>fn.subscribe(L=>{if(L.dismiss){C(V=>V.map(Q=>Q.id===L.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{hT.flushSync(()=>{C(V=>{let Q=V.findIndex(J=>J.id===L.id);return Q!==-1?[...V.slice(0,Q),{...V[Q],...L},...V.slice(Q+1)]:[L,...V]})})})}),[]),ee.useEffect(()=>{if(h!=="system"){$(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let L=window.matchMedia("(prefers-color-scheme: dark)");try{L.addEventListener("change",({matches:V})=>{$(V?"dark":"light")})}catch{L.addListener(({matches:Q})=>{try{$(Q?"dark":"light")}catch(J){console.error(J)}})}},[h]),ee.useEffect(()=>{A.length<=1&&F(!1)},[A]),ee.useEffect(()=>{let L=V=>{var Q,J;r.every(le=>V[le]||V.code===le)&&(F(!0),(Q=D.current)==null||Q.focus()),V.code==="Escape"&&(document.activeElement===D.current||(J=D.current)!=null&&J.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[r]),ee.useEffect(()=>{if(D.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,U.current=!1)}},[D.current]),ee.createElement("section",{ref:e,"aria-label":`${_} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((L,V)=>{var Q;let[J,le]=L.split("-");return A.length?ee.createElement("ol",{key:L,dir:w==="auto"?iC():w,tabIndex:-1,ref:D,className:l,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":J,"data-lifted":z&&A.length>1&&!i,"data-x-position":le,style:{"--front-toast-height":`${((Q=T[0])==null?void 0:Q.height)||0}px`,"--width":`${E6}px`,"--gap":`${g}px`,...p,...M6(c,d)},onBlur:W=>{U.current&&!W.currentTarget.contains(W.relatedTarget)&&(U.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||U.current||(U.current=!0,R.current=W.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{B||F(!1)},onDragEnd:()=>F(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},A.filter(W=>!W.position&&V===0||W.position===L).map((W,pe)=>{var je,Te;return ee.createElement(R6,{key:W.id,icons:b,index:pe,toast:W,defaultRichColors:f,duration:(je=v==null?void 0:v.duration)!=null?je:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:t,visibleToasts:x,closeButton:(Te=v==null?void 0:v.closeButton)!=null?Te:o,interacting:B,position:L,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:Z,toasts:A.filter(Re=>Re.position==W.position),heights:T.filter(Re=>Re.position==W.position),setHeights:O,expandByDefault:i,gap:g,loadingIcon:y,expanded:z,pauseWhenPageIsHidden:S,swipeDirections:s.swipeDirections})})):null}))});const D6=({...s})=>{const{theme:e="system"}=o6();return a.jsx(I6,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};var db=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ub=typeof window>"u"||"Deno"in globalThis;function Ir(){}function O6(s,e){return typeof s=="function"?s(e):s}function L6(s){return typeof s=="number"&&s>=0&&s!==1/0}function F6(s,e){return Math.max(s+(e||0)-Date.now(),0)}function dj(s,e){return typeof s=="function"?s(e):s}function $6(s,e){return typeof s=="function"?s(e):s}function aC(s,e){const{type:t="all",exact:n,fetchStatus:r,predicate:i,queryKey:o,stale:l}=s;if(o){if(n){if(e.queryHash!==xS(o,e.options))return!1}else if(!kp(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||r&&r!==e.state.fetchStatus||i&&!i(e))}function oC(s,e){const{exact:t,status:n,predicate:r,mutationKey:i}=s;if(i){if(!e.options.mutationKey)return!1;if(t){if(Cp(e.options.mutationKey)!==Cp(i))return!1}else if(!kp(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function xS(s,e){return((e==null?void 0:e.queryKeyHashFn)||Cp)(s)}function Cp(s){return JSON.stringify(s,(e,t)=>uj(t)?Object.keys(t).sort().reduce((n,r)=>(n[r]=t[r],n),{}):t)}function kp(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?Object.keys(e).every(t=>kp(s[t],e[t])):!1}function nR(s,e){if(s===e)return s;const t=lC(s)&&lC(e);if(t||uj(s)&&uj(e)){const n=t?s:Object.keys(s),r=n.length,i=t?e:Object.keys(e),o=i.length,l=t?[]:{},c=new Set(n);let d=0;for(let h=0;h<o;h++){const f=t?h:i[h];(!t&&c.has(f)||t)&&s[f]===void 0&&e[f]===void 0?(l[f]=void 0,d++):(l[f]=nR(s[f],e[f]),l[f]===s[f]&&s[f]!==void 0&&d++)}return r===o&&d===r?s:l}return e}function lC(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function uj(s){if(!cC(s))return!1;const e=s.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!cC(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function cC(s){return Object.prototype.toString.call(s)==="[object Object]"}function z6(s){return new Promise(e=>{setTimeout(e,s)})}function B6(s,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(s,e):t.structuralSharing!==!1?nR(s,e):e}function U6(s,e,t=0){const n=[...s,e];return t&&n.length>t?n.slice(1):n}function H6(s,e,t=0){const n=[e,...s];return t&&n.length>t?n.slice(0,-1):n}var yS=Symbol();function rR(s,e){return!s.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!s.queryFn||s.queryFn===yS?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var Tc,Oo,ph,Wk,W6=(Wk=class extends db{constructor(){super();E(this,Tc);E(this,Oo);E(this,ph);N(this,ph,e=>{if(!ub&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){u(this,Oo)||this.setEventListener(u(this,ph))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Oo))==null||e.call(this),N(this,Oo,void 0))}setEventListener(e){var t;N(this,ph,e),(t=u(this,Oo))==null||t.call(this),N(this,Oo,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){u(this,Tc)!==e&&(N(this,Tc,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof u(this,Tc)=="boolean"?u(this,Tc):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Tc=new WeakMap,Oo=new WeakMap,ph=new WeakMap,Wk),iR=new W6,gh,Lo,vh,Vk,V6=(Vk=class extends db{constructor(){super();E(this,gh,!0);E(this,Lo);E(this,vh);N(this,vh,e=>{if(!ub&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){u(this,Lo)||this.setEventListener(u(this,vh))}onUnsubscribe(){var e;this.hasListeners()||((e=u(this,Lo))==null||e.call(this),N(this,Lo,void 0))}setEventListener(e){var t;N(this,vh,e),(t=u(this,Lo))==null||t.call(this),N(this,Lo,e(this.setOnline.bind(this)))}setOnline(e){u(this,gh)!==e&&(N(this,gh,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return u(this,gh)}},gh=new WeakMap,Lo=new WeakMap,vh=new WeakMap,Vk),Z0=new V6;function G6(){let s,e;const t=new Promise((r,i)=>{s=r,e=i});t.status="pending",t.catch(()=>{});function n(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{n({status:"fulfilled",value:r}),s(r)},t.reject=r=>{n({status:"rejected",reason:r}),e(r)},t}function q6(s){return Math.min(1e3*2**s,3e4)}function aR(s){return(s??"online")==="online"?Z0.isOnline():!0}var oR=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function yw(s){return s instanceof oR}function lR(s){let e=!1,t=0,n=!1,r;const i=G6(),o=v=>{var w;n||(m(new oR(v)),(w=s.abort)==null||w.call(s))},l=()=>{e=!0},c=()=>{e=!1},d=()=>iR.isFocused()&&(s.networkMode==="always"||Z0.isOnline())&&s.canRun(),h=()=>aR(s.networkMode)&&s.canRun(),f=v=>{var w;n||(n=!0,(w=s.onSuccess)==null||w.call(s,v),r==null||r(),i.resolve(v))},m=v=>{var w;n||(n=!0,(w=s.onError)==null||w.call(s,v),r==null||r(),i.reject(v))},p=()=>new Promise(v=>{var w;r=g=>{(n||d())&&v(g)},(w=s.onPause)==null||w.call(s)}).then(()=>{var v;r=void 0,n||(v=s.onContinue)==null||v.call(s)}),x=()=>{if(n)return;let v;const w=t===0?s.initialPromise:void 0;try{v=w??s.fn()}catch(g){v=Promise.reject(g)}Promise.resolve(v).then(f).catch(g=>{var A;if(n)return;const y=s.retry??(ub?0:3),b=s.retryDelay??q6,_=typeof b=="function"?b(t,g):b,S=y===!0||typeof y=="number"&&t<y||typeof y=="function"&&y(t,g);if(e||!S){m(g);return}t++,(A=s.onFail)==null||A.call(s,t,g),z6(_).then(()=>d()?void 0:p()).then(()=>{e?m(g):x()})})};return{promise:i,cancel:o,continue:()=>(r==null||r(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():p().then(x),i)}}var K6=s=>setTimeout(s,0);function Y6(){let s=[],e=0,t=l=>{l()},n=l=>{l()},r=K6;const i=l=>{e?s.push(l):r(()=>{t(l)})},o=()=>{const l=s;s=[],l.length&&r(()=>{n(()=>{l.forEach(c=>{t(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{r=l}}}var Js=Y6(),Rc,Gk,cR=(Gk=class{constructor(){E(this,Rc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),L6(this.gcTime)&&N(this,Rc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(ub?1/0:5*60*1e3))}clearGcTimeout(){u(this,Rc)&&(clearTimeout(u(this,Rc)),N(this,Rc,void 0))}},Rc=new WeakMap,Gk),xh,Mc,rr,Ic,Ms,$p,Dc,Dr,oa,qk,X6=(qk=class extends cR{constructor(e){super();E(this,Dr);E(this,xh);E(this,Mc);E(this,rr);E(this,Ic);E(this,Ms);E(this,$p);E(this,Dc);N(this,Dc,!1),N(this,$p,e.defaultOptions),this.setOptions(e.options),this.observers=[],N(this,Ic,e.client),N(this,rr,u(this,Ic).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,N(this,xh,J6(this.options)),this.state=e.state??u(this,xh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=u(this,Ms))==null?void 0:e.promise}setOptions(e){this.options={...u(this,$p),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&u(this,rr).remove(this)}setData(e,t){const n=B6(this.state.data,e,this.options);return k(this,Dr,oa).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){k(this,Dr,oa).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,r;const t=(n=u(this,Ms))==null?void 0:n.promise;return(r=u(this,Ms))==null||r.cancel(e),t?t.then(Ir).catch(Ir):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(u(this,xh))}isActive(){return this.observers.some(e=>$6(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>dj(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!F6(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,Ms))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=u(this,Ms))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),u(this,rr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(u(this,Ms)&&(u(this,Dc)?u(this,Ms).cancel({revert:!0}):u(this,Ms).cancelRetry()),this.scheduleGc()),u(this,rr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||k(this,Dr,oa).call(this,{type:"invalidate"})}fetch(e,t){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(u(this,Ms))return u(this,Ms).continueRetry(),u(this,Ms).promise}if(e&&this.setOptions(e),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const n=new AbortController,r=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(N(this,Dc,!0),n.signal)})},i=()=>{const m=rR(this.options,t),x=(()=>{const v={client:u(this,Ic),queryKey:this.queryKey,meta:this.meta};return r(v),v})();return N(this,Dc,!1),this.options.persister?this.options.persister(m,x,this):m(x)},l=(()=>{const m={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:u(this,Ic),state:this.state,fetchFn:i};return r(m),m})();(d=this.options.behavior)==null||d.onFetch(l,this),N(this,Mc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&k(this,Dr,oa).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var p,x,v,w;yw(m)&&m.silent||k(this,Dr,oa).call(this,{type:"error",error:m}),yw(m)||((x=(p=u(this,rr).config).onError)==null||x.call(p,m,this),(w=(v=u(this,rr).config).onSettled)==null||w.call(v,this.state.data,m,this)),this.scheduleGc()};return N(this,Ms,lR({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:m=>{var p,x,v,w;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(g){c(g);return}(x=(p=u(this,rr).config).onSuccess)==null||x.call(p,m,this),(w=(v=u(this,rr).config).onSettled)==null||w.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,p)=>{k(this,Dr,oa).call(this,{type:"failed",failureCount:m,error:p})},onPause:()=>{k(this,Dr,oa).call(this,{type:"pause"})},onContinue:()=>{k(this,Dr,oa).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),u(this,Ms).start()}},xh=new WeakMap,Mc=new WeakMap,rr=new WeakMap,Ic=new WeakMap,Ms=new WeakMap,$p=new WeakMap,Dc=new WeakMap,Dr=new WeakSet,oa=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Q6(n.data,this.options),fetchMeta:e.meta??null};case"success":return N(this,Mc,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return yw(r)&&r.revert&&u(this,Mc)?{...u(this,Mc),fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Js.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),u(this,rr).notify({query:this,type:"updated",action:e})})},qk);function Q6(s,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aR(e.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function J6(s){const e=typeof s.initialData=="function"?s.initialData():s.initialData,t=e!==void 0,n=t?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var vi,Kk,Z6=(Kk=class extends db{constructor(e={}){super();E(this,vi);this.config=e,N(this,vi,new Map)}build(e,t,n){const r=t.queryKey,i=t.queryHash??xS(r,t);let o=this.get(i);return o||(o=new X6({client:e,queryKey:r,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){u(this,vi).has(e.queryHash)||(u(this,vi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=u(this,vi).get(e.queryHash);t&&(e.destroy(),t===e&&u(this,vi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Js.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return u(this,vi).get(e)}getAll(){return[...u(this,vi).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>aC(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>aC(e,n)):t}notify(e){Js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Js.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Js.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},vi=new WeakMap,Kk),xi,Ws,Oc,yi,So,Yk,ez=(Yk=class extends cR{constructor(e){super();E(this,yi);E(this,xi);E(this,Ws);E(this,Oc);this.mutationId=e.mutationId,N(this,Ws,e.mutationCache),N(this,xi,[]),this.state=e.state||tz(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){u(this,xi).includes(e)||(u(this,xi).push(e),this.clearGcTimeout(),u(this,Ws).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){N(this,xi,u(this,xi).filter(t=>t!==e)),this.scheduleGc(),u(this,Ws).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){u(this,xi).length||(this.state.status==="pending"?this.scheduleGc():u(this,Ws).remove(this))}continue(){var e;return((e=u(this,Oc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,l,c,d,h,f,m,p,x,v,w,g,y,b,_,S,A,C,P;const t=()=>{k(this,yi,So).call(this,{type:"continue"})};N(this,Oc,lR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,O)=>{k(this,yi,So).call(this,{type:"failed",failureCount:T,error:O})},onPause:()=>{k(this,yi,So).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>u(this,Ws).canRun(this)}));const n=this.state.status==="pending",r=!u(this,Oc).canStart();try{if(n)t();else{k(this,yi,So).call(this,{type:"pending",variables:e,isPaused:r}),await((o=(i=u(this,Ws).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,e));O!==this.state.context&&k(this,yi,So).call(this,{type:"pending",context:O,variables:e,isPaused:r})}const T=await u(this,Oc).start();return await((h=(d=u(this,Ws).config).onSuccess)==null?void 0:h.call(d,T,e,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,T,e,this.state.context)),await((x=(p=u(this,Ws).config).onSettled)==null?void 0:x.call(p,T,null,this.state.variables,this.state.context,this)),await((w=(v=this.options).onSettled)==null?void 0:w.call(v,T,null,e,this.state.context)),k(this,yi,So).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(g=u(this,Ws).config).onError)==null?void 0:y.call(g,T,e,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,T,e,this.state.context)),await((A=(S=u(this,Ws).config).onSettled)==null?void 0:A.call(S,void 0,T,this.state.variables,this.state.context,this)),await((P=(C=this.options).onSettled)==null?void 0:P.call(C,void 0,T,e,this.state.context)),T}finally{k(this,yi,So).call(this,{type:"error",error:T})}}finally{u(this,Ws).runNext(this)}}},xi=new WeakMap,Ws=new WeakMap,Oc=new WeakMap,yi=new WeakSet,So=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Js.batch(()=>{u(this,xi).forEach(n=>{n.onMutationUpdate(e)}),u(this,Ws).notify({mutation:this,type:"updated",action:e})})},Yk);function tz(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var va,Or,zp,Xk,sz=(Xk=class extends db{constructor(e={}){super();E(this,va);E(this,Or);E(this,zp);this.config=e,N(this,va,new Set),N(this,Or,new Map),N(this,zp,0)}build(e,t,n){const r=new ez({mutationCache:this,mutationId:++ts(this,zp)._,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){u(this,va).add(e);const t=ux(e);if(typeof t=="string"){const n=u(this,Or).get(t);n?n.push(e):u(this,Or).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(u(this,va).delete(e)){const t=ux(e);if(typeof t=="string"){const n=u(this,Or).get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&u(this,Or).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ux(e);if(typeof t=="string"){const n=u(this,Or).get(t),r=n==null?void 0:n.find(i=>i.state.status==="pending");return!r||r===e}else return!0}runNext(e){var n;const t=ux(e);if(typeof t=="string"){const r=(n=u(this,Or).get(t))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Js.batch(()=>{u(this,va).forEach(e=>{this.notify({type:"removed",mutation:e})}),u(this,va).clear(),u(this,Or).clear()})}getAll(){return Array.from(u(this,va))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>oC(t,n))}findAll(e={}){return this.getAll().filter(t=>oC(e,t))}notify(e){Js.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Js.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ir))))}},va=new WeakMap,Or=new WeakMap,zp=new WeakMap,Xk);function ux(s){var e;return(e=s.options.scope)==null?void 0:e.id}function dC(s){return{onFetch:(e,t)=>{var h,f,m,p,x;const n=e.options,r=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},g=rR(e.options,e.fetchOptions),y=async(b,_,S)=>{if(v)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const z={client:e.client,queryKey:e.queryKey,pageParam:_,direction:S?"backward":"forward",meta:e.options.meta};return w(z),z})(),P=await g(C),{maxPages:T}=e.options,O=S?H6:U6;return{pages:O(b.pages,P,T),pageParams:O(b.pageParams,_,T)}};if(r&&i.length){const b=r==="backward",_=b?nz:uC,S={pages:i,pageParams:o},A=_(n,S);l=await y(S,A,b)}else{const b=s??i.length;do{const _=c===0?o[0]??n.initialPageParam:uC(n,l);if(c>0&&_==null)break;l=await y(l,_),c++}while(c<b)}return l};e.options.persister?e.fetchFn=()=>{var v,w;return(w=(v=e.options).persister)==null?void 0:w.call(v,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function uC(s,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?s.getNextPageParam(e[n],e,t[n],t):void 0}function nz(s,{pages:e,pageParams:t}){var n;return e.length>0?(n=s.getPreviousPageParam)==null?void 0:n.call(s,e[0],e,t[0],t):void 0}var Et,Fo,$o,yh,bh,zo,wh,jh,Qk,rz=(Qk=class{constructor(s={}){E(this,Et);E(this,Fo);E(this,$o);E(this,yh);E(this,bh);E(this,zo);E(this,wh);E(this,jh);N(this,Et,s.queryCache||new Z6),N(this,Fo,s.mutationCache||new sz),N(this,$o,s.defaultOptions||{}),N(this,yh,new Map),N(this,bh,new Map),N(this,zo,0)}mount(){ts(this,zo)._++,u(this,zo)===1&&(N(this,wh,iR.subscribe(async s=>{s&&(await this.resumePausedMutations(),u(this,Et).onFocus())})),N(this,jh,Z0.subscribe(async s=>{s&&(await this.resumePausedMutations(),u(this,Et).onOnline())})))}unmount(){var s,e;ts(this,zo)._--,u(this,zo)===0&&((s=u(this,wh))==null||s.call(this),N(this,wh,void 0),(e=u(this,jh))==null||e.call(this),N(this,jh,void 0))}isFetching(s){return u(this,Et).findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return u(this,Fo).findAll({...s,status:"pending"}).length}getQueryData(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=u(this,Et).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(s){const e=this.defaultQueryOptions(s),t=u(this,Et).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(s):(s.revalidateIfStale&&t.isStaleByTime(dj(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(s){return u(this,Et).findAll(s).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(s,e,t){const n=this.defaultQueryOptions({queryKey:s}),r=u(this,Et).get(n.queryHash),i=r==null?void 0:r.state.data,o=O6(e,i);if(o!==void 0)return u(this,Et).build(this,n).setData(o,{...t,manual:!0})}setQueriesData(s,e,t){return Js.batch(()=>u(this,Et).findAll(s).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(s){var t;const e=this.defaultQueryOptions({queryKey:s});return(t=u(this,Et).get(e.queryHash))==null?void 0:t.state}removeQueries(s){const e=u(this,Et);Js.batch(()=>{e.findAll(s).forEach(t=>{e.remove(t)})})}resetQueries(s,e){const t=u(this,Et);return Js.batch(()=>(t.findAll(s).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...s},e)))}cancelQueries(s,e={}){const t={revert:!0,...e},n=Js.batch(()=>u(this,Et).findAll(s).map(r=>r.cancel(t)));return Promise.all(n).then(Ir).catch(Ir)}invalidateQueries(s,e={}){return Js.batch(()=>(u(this,Et).findAll(s).forEach(t=>{t.invalidate()}),(s==null?void 0:s.refetchType)==="none"?Promise.resolve():this.refetchQueries({...s,type:(s==null?void 0:s.refetchType)??(s==null?void 0:s.type)??"active"},e)))}refetchQueries(s,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=Js.batch(()=>u(this,Et).findAll(s).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let i=r.fetch(void 0,t);return t.throwOnError||(i=i.catch(Ir)),r.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ir)}fetchQuery(s){const e=this.defaultQueryOptions(s);e.retry===void 0&&(e.retry=!1);const t=u(this,Et).build(this,e);return t.isStaleByTime(dj(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Ir).catch(Ir)}fetchInfiniteQuery(s){return s.behavior=dC(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Ir).catch(Ir)}ensureInfiniteQueryData(s){return s.behavior=dC(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Z0.isOnline()?u(this,Fo).resumePausedMutations():Promise.resolve()}getQueryCache(){return u(this,Et)}getMutationCache(){return u(this,Fo)}getDefaultOptions(){return u(this,$o)}setDefaultOptions(s){N(this,$o,s)}setQueryDefaults(s,e){u(this,yh).set(Cp(s),{queryKey:s,defaultOptions:e})}getQueryDefaults(s){const e=[...u(this,yh).values()],t={};return e.forEach(n=>{kp(s,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(s,e){u(this,bh).set(Cp(s),{mutationKey:s,defaultOptions:e})}getMutationDefaults(s){const e=[...u(this,bh).values()],t={};return e.forEach(n=>{kp(s,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(s){if(s._defaulted)return s;const e={...u(this,$o).queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return e.queryHash||(e.queryHash=xS(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yS&&(e.enabled=!1),e}defaultMutationOptions(s){return s!=null&&s._defaulted?s:{...u(this,$o).mutations,...(s==null?void 0:s.mutationKey)&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){u(this,Et).clear(),u(this,Fo).clear()}},Et=new WeakMap,Fo=new WeakMap,$o=new WeakMap,yh=new WeakMap,bh=new WeakMap,zo=new WeakMap,wh=new WeakMap,jh=new WeakMap,Qk),iz=j.createContext(void 0),az=({client:s,children:e})=>(j.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),a.jsx(iz.Provider,{value:s,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pp(){return Pp=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Pp.apply(this,arguments)}var Tl;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(Tl||(Tl={}));const hC="popstate";function oz(s){s===void 0&&(s={});function e(n,r){let{pathname:i,search:o,hash:l}=n.location;return hj("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:ey(r)}return cz(e,t,null,s)}function Mt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function dR(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lz(){return Math.random().toString(36).substr(2,8)}function fC(s,e){return{usr:s.state,key:s.key,idx:e}}function hj(s,e,t,n){return t===void 0&&(t=null),Pp({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof e=="string"?Zf(e):e,{state:t,key:e&&e.key||n||lz()})}function ey(s){let{pathname:e="/",search:t="",hash:n=""}=s;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Zf(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substr(t),s=s.substr(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substr(n),s=s.substr(0,n)),s&&(e.pathname=s)}return e}function cz(s,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,l=Tl.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Pp({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=Tl.Pop;let w=h(),g=w==null?null:w-d;d=w,c&&c({action:l,location:v.location,delta:g})}function m(w,g){l=Tl.Push;let y=hj(v.location,w,g);d=h()+1;let b=fC(y,d),_=v.createHref(y);try{o.pushState(b,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(_)}i&&c&&c({action:l,location:v.location,delta:1})}function p(w,g){l=Tl.Replace;let y=hj(v.location,w,g);d=h();let b=fC(y,d),_=v.createHref(y);o.replaceState(b,"",_),i&&c&&c({action:l,location:v.location,delta:0})}function x(w){let g=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof w=="string"?w:ey(w);return y=y.replace(/ $/,"%20"),Mt(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let v={get action(){return l},get location(){return s(r,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(hC,f),c=w,()=>{r.removeEventListener(hC,f),c=null}},createHref(w){return e(r,w)},createURL:x,encodeLocation(w){let g=x(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:p,go(w){return o.go(w)}};return v}var mC;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(mC||(mC={}));function dz(s,e,t){return t===void 0&&(t="/"),uz(s,e,t,!1)}function uz(s,e,t,n){let r=typeof e=="string"?Zf(e):e,i=bS(r.pathname||"/",t);if(i==null)return null;let o=uR(s);hz(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=_z(i);l=wz(o[c],d,n)}return l}function uR(s,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Mt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=zl([n,c.relativePath]),h=t.concat(c);i.children&&i.children.length>0&&(Mt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),uR(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:yz(d,i.index),routesMeta:h})};return s.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of hR(i.path))r(i,o,c)}),e}function hR(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=hR(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function hz(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:bz(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const fz=/^:[\w-]+$/,mz=3,pz=2,gz=1,vz=10,xz=-2,pC=s=>s==="*";function yz(s,e){let t=s.split("/"),n=t.length;return t.some(pC)&&(n+=xz),e&&(n+=pz),t.filter(r=>!pC(r)).reduce((r,i)=>r+(fz.test(i)?mz:i===""?gz:vz),n)}function bz(s,e){return s.length===e.length&&s.slice(0,-1).every((n,r)=>n===e[r])?s[s.length-1]-e[e.length-1]:0}function wz(s,e,t){let{routesMeta:n}=s,r={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=gC({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&t&&!n[n.length-1].route.index&&(f=gC({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:zl([i,f.pathname]),pathnameBase:Ez(zl([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=zl([i,f.pathnameBase]))}return o}function gC(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=jz(s.path,s.caseSensitive,s.end),r=e.match(t);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,h,f)=>{let{paramName:m,isOptional:p}=h;if(m==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[f];return p&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:s}}function jz(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),dR(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let n=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(n.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function _z(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dR(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),s}}function bS(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}function Nz(s,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof s=="string"?Zf(s):s;return{pathname:t?t.startsWith("/")?t:Sz(t,e):e,search:Cz(n),hash:kz(r)}}function Sz(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function bw(s,e,t,n){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Az(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wS(s,e){let t=Az(s);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function jS(s,e,t,n){n===void 0&&(n=!1);let r;typeof s=="string"?r=Zf(s):(r=Pp({},s),Mt(!r.pathname||!r.pathname.includes("?"),bw("?","pathname","search",r)),Mt(!r.pathname||!r.pathname.includes("#"),bw("#","pathname","hash",r)),Mt(!r.search||!r.search.includes("#"),bw("#","search","hash",r)));let i=s===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=t;else{let f=e.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=Nz(r,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const zl=s=>s.join("/").replace(/\/\/+/g,"/"),Ez=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Cz=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,kz=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Pz(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const fR=["post","put","patch","delete"];new Set(fR);const Tz=["get",...fR];new Set(Tz);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tp(){return Tp=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},Tp.apply(this,arguments)}const _S=j.createContext(null),Rz=j.createContext(null),ac=j.createContext(null),hb=j.createContext(null),mo=j.createContext({outlet:null,matches:[],isDataRoute:!1}),mR=j.createContext(null);function Mz(s,e){let{relative:t}=e===void 0?{}:e;em()||Mt(!1);let{basename:n,navigator:r}=j.useContext(ac),{hash:i,pathname:o,search:l}=vR(s,{relative:t}),c=o;return n!=="/"&&(c=o==="/"?n:zl([n,o])),r.createHref({pathname:c,search:l,hash:i})}function em(){return j.useContext(hb)!=null}function fu(){return em()||Mt(!1),j.useContext(hb).location}function pR(s){j.useContext(ac).static||j.useLayoutEffect(s)}function po(){let{isDataRoute:s}=j.useContext(mo);return s?Gz():Iz()}function Iz(){em()||Mt(!1);let s=j.useContext(_S),{basename:e,future:t,navigator:n}=j.useContext(ac),{matches:r}=j.useContext(mo),{pathname:i}=fu(),o=JSON.stringify(wS(r,t.v7_relativeSplatPath)),l=j.useRef(!1);return pR(()=>{l.current=!0}),j.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let f=jS(d,JSON.parse(o),i,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:zl([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,o,i,s])}function gR(){let{matches:s}=j.useContext(mo),e=s[s.length-1];return e?e.params:{}}function vR(s,e){let{relative:t}=e===void 0?{}:e,{future:n}=j.useContext(ac),{matches:r}=j.useContext(mo),{pathname:i}=fu(),o=JSON.stringify(wS(r,n.v7_relativeSplatPath));return j.useMemo(()=>jS(s,JSON.parse(o),i,t==="path"),[s,o,i,t])}function Dz(s,e){return Oz(s,e)}function Oz(s,e,t,n){em()||Mt(!1);let{navigator:r}=j.useContext(ac),{matches:i}=j.useContext(mo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=fu(),h;if(e){var f;let w=typeof e=="string"?Zf(e):e;c==="/"||(f=w.pathname)!=null&&f.startsWith(c)||Mt(!1),h=w}else h=d;let m=h.pathname||"/",p=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=dz(s,{pathname:p}),v=Bz(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:zl([c,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:zl([c,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,t,n);return e&&v?j.createElement(hb.Provider,{value:{location:Tp({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Tl.Pop}},v):v}function Lz(){let s=Vz(),e=Pz(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:r},t):null,null)}const Fz=j.createElement(Lz,null);class $z extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(mo.Provider,{value:this.props.routeContext},j.createElement(mR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zz(s){let{routeContext:e,match:t,children:n}=s,r=j.useContext(_S);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(mo.Provider,{value:e},n)}function Bz(s,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),s==null){var i;if(!t)return null;if(t.errors)s=t.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let o=s,l=(r=t)==null?void 0:r.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Mt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(t&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:p}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let p,x=!1,v=null,w=null;t&&(p=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||Fz,c&&(d<0&&m===0?(x=!0,w=null):d===m&&(x=!0,w=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,m+1)),y=()=>{let b;return p?b=v:x?b=w:f.route.Component?b=j.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=h,j.createElement(zz,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:t!=null},children:b})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?j.createElement($z,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var xR=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(xR||{}),ty=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(ty||{});function Uz(s){let e=j.useContext(_S);return e||Mt(!1),e}function Hz(s){let e=j.useContext(Rz);return e||Mt(!1),e}function Wz(s){let e=j.useContext(mo);return e||Mt(!1),e}function yR(s){let e=Wz(),t=e.matches[e.matches.length-1];return t.route.id||Mt(!1),t.route.id}function Vz(){var s;let e=j.useContext(mR),t=Hz(ty.UseRouteError),n=yR(ty.UseRouteError);return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function Gz(){let{router:s}=Uz(xR.UseNavigateStable),e=yR(ty.UseNavigateStable),t=j.useRef(!1);return pR(()=>{t.current=!0}),j.useCallback(function(r,i){i===void 0&&(i={}),t.current&&(typeof r=="number"?s.navigate(r):s.navigate(r,Tp({fromRouteId:e},i)))},[s,e])}function qz(s,e){s==null||s.v7_startTransition,s==null||s.v7_relativeSplatPath}function Kz(s){let{to:e,replace:t,state:n,relative:r}=s;em()||Mt(!1);let{future:i,static:o}=j.useContext(ac),{matches:l}=j.useContext(mo),{pathname:c}=fu(),d=po(),h=jS(e,wS(l,i.v7_relativeSplatPath),c,r==="path"),f=JSON.stringify(h);return j.useEffect(()=>d(JSON.parse(f),{replace:t,state:n,relative:r}),[d,f,r,t,n]),null}function on(s){Mt(!1)}function Yz(s){let{basename:e="/",children:t=null,location:n,navigationType:r=Tl.Pop,navigator:i,static:o=!1,future:l}=s;em()&&Mt(!1);let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:i,static:o,future:Tp({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Zf(n));let{pathname:h="/",search:f="",hash:m="",state:p=null,key:x="default"}=n,v=j.useMemo(()=>{let w=bS(h,c);return w==null?null:{location:{pathname:w,search:f,hash:m,state:p,key:x},navigationType:r}},[c,h,f,m,p,x,r]);return v==null?null:j.createElement(ac.Provider,{value:d},j.createElement(hb.Provider,{children:t,value:v}))}function Xz(s){let{children:e,location:t}=s;return Dz(fj(e),t)}new Promise(()=>{});function fj(s,e){e===void 0&&(e=[]);let t=[];return j.Children.forEach(s,(n,r)=>{if(!j.isValidElement(n))return;let i=[...e,r];if(n.type===j.Fragment){t.push.apply(t,fj(n.props.children,i));return}n.type!==on&&Mt(!1),!n.props.index||!n.props.children||Mt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=fj(n.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mj(){return mj=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=t[n])}return s},mj.apply(this,arguments)}function Qz(s,e){if(s==null)return{};var t={},n=Object.keys(s),r,i;for(i=0;i<n.length;i++)r=n[i],!(e.indexOf(r)>=0)&&(t[r]=s[r]);return t}function Jz(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Zz(s,e){return s.button===0&&(!e||e==="_self")&&!Jz(s)}function pj(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,t)=>{let n=s[t];return e.concat(Array.isArray(n)?n.map(r=>[t,r]):[[t,n]])},[]))}function eB(s,e){let t=pj(s);return e&&e.forEach((n,r)=>{t.has(r)||e.getAll(r).forEach(i=>{t.append(r,i)})}),t}const tB=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sB="6";try{window.__reactRouterVersion=sB}catch{}const nB="startTransition",vC=pN[nB];function rB(s){let{basename:e,children:t,future:n,window:r}=s,i=j.useRef();i.current==null&&(i.current=oz({window:r,v5Compat:!0}));let o=i.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=j.useCallback(f=>{d&&vC?vC(()=>c(f)):c(f)},[c,d]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.useEffect(()=>qz(n),[n]),j.createElement(Yz,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:n})}const iB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cs=j.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=Qz(e,tB),{basename:p}=j.useContext(ac),x,v=!1;if(typeof d=="string"&&aB.test(d)&&(x=d,iB))try{let b=new URL(window.location.href),_=d.startsWith("//")?new URL(b.protocol+d):new URL(d),S=bS(_.pathname,p);_.origin===b.origin&&S!=null?d=S+_.search+_.hash:v=!0}catch{}let w=Mz(d,{relative:r}),g=oB(d,{replace:o,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:f});function y(b){n&&n(b),b.defaultPrevented||g(b)}return j.createElement("a",mj({},m,{href:x||w,onClick:v||i?n:y,ref:t,target:c}))});var xC;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(xC||(xC={}));var yC;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(yC||(yC={}));function oB(s,e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=po(),d=fu(),h=vR(s,{relative:o});return j.useCallback(f=>{if(Zz(f,t)){f.preventDefault();let m=n!==void 0?n:ey(d)===ey(h);c(s,{replace:m,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,h,n,r,t,s,i,o,l])}function lB(s){let e=j.useRef(pj(s)),t=j.useRef(!1),n=fu(),r=j.useMemo(()=>eB(n.search,t.current?null:e.current),[n.search]),i=po(),o=j.useCallback((l,c)=>{const d=pj(typeof l=="function"?l(r):l);t.current=!0,i("?"+d,c)},[i,r]);return[r,o]}const gj=Nv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-medical text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-card hover:shadow-card-hover",medical:"bg-gradient-medical text-white hover:shadow-elegant hover:scale-[1.02] shadow-card",secondary:"bg-transparent border border-primary text-primary hover:bg-secondary hover:text-secondary-foreground hover:border-secondary",outline:"border border-card-border bg-card hover:bg-muted hover:text-card-foreground",ghost:"hover:bg-muted hover:text-card-foreground",link:"text-primary hover:text-primary-hover underline-offset-4 hover:underline",success:"bg-success text-white hover:opacity-90 shadow-card",warning:"bg-warning text-white hover:opacity-90 shadow-card",error:"bg-error text-white hover:opacity-90 shadow-card"},size:{default:"h-10 px-6 py-2",sm:"h-8 rounded-md px-4 text-xs",lg:"h-12 rounded-medical px-8 text-base",xl:"h-14 rounded-medical px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=j.forwardRef(({className:s,variant:e,size:t,asChild:n=!1,...r},i)=>{const o=n?u5:"button";return a.jsx(o,{className:ne(gj({variant:e,size:t,className:s})),ref:i,...r})});K.displayName="Button";const cB="modulepreload",dB=function(s){return"/swiss-med-track/"+s},bC={},Av=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(c=>{if(c=dB(c),c in bC)return;bC[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":cB,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},uB=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Av(async()=>{const{default:n}=await Promise.resolve().then(()=>tm);return{default:n}},[]).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class NS extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class hB extends NS{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wC extends NS{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jC extends NS{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var vj;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(vj||(vj={}));var fB=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class mB{constructor(e,{headers:t={},customFetch:n,region:r=vj.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=uB(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return fB(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:h}).catch(v=>{throw new hB(v)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new wC(f);if(!f.ok)throw new jC(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),x;return p==="application/json"?x=yield f.json():p==="application/octet-stream"?x=yield f.blob():p==="text/event-stream"?x=f:p==="multipart/form-data"?x=yield f.formData():x=yield f.text(),{data:x,error:null,response:f}}catch(r){return{data:null,error:r,response:r instanceof jC||r instanceof wC?r.context:void 0}}})}}var gn={},SS={},fb={},Ev={},mb={},pb={},pB=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hf=pB();const gB=Hf.fetch,bR=Hf.fetch.bind(Hf),wR=Hf.Headers,vB=Hf.Request,xB=Hf.Response,tm=Object.freeze(Object.defineProperty({__proto__:null,Headers:wR,Request:vB,Response:xB,default:bR,fetch:gB},Symbol.toStringTag,{value:"Module"})),yB=M4(tm);var gb={};Object.defineProperty(gb,"__esModule",{value:!0});let bB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};gb.default=bB;var jR=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pb,"__esModule",{value:!0});const wB=jR(yB),jB=jR(gb);let _B=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=wB.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,d;let h=null,f=null,m=null,p=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?f=y:f=JSON.parse(y))}const w=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),g=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&g&&g.length>1&&(m=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,p=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{h=JSON.parse(w),Array.isArray(h)&&i.status===404&&(f=[],h=null,p=200,x="OK")}catch{i.status===404&&w===""?(p=204,x="No Content"):h={message:w}}if(h&&this.isMaybeSingle&&(!((d=h==null?void 0:h.details)===null||d===void 0)&&d.includes("0 rows"))&&(h=null,p=200,x="OK"),h&&this.shouldThrowOnError)throw new jB.default(h)}return{error:h,data:f,count:m,status:p,statusText:x}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};pb.default=_B;var NB=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mb,"__esModule",{value:!0});const SB=NB(pb);let AB=class extends SB.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};mb.default=AB;var EB=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ev,"__esModule",{value:!0});const CB=EB(mb);let kB=class extends CB.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Ev.default=kB;var PB=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(fb,"__esModule",{value:!0});const xm=PB(Ev);let TB=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new xm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new xm.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(c.length>0){const d=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new xm.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new xm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new xm.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};fb.default=TB;var _R=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(SS,"__esModule",{value:!0});const RB=_R(fb),MB=_R(Ev);let IB=class NR{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new RB.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new NR(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${e}`);let d;n||r?(l=n?"HEAD":"GET",Object.entries(t).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{c.searchParams.append(f,m)})):(l="POST",d=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new MB.default({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};SS.default=IB;var sm=br&&br.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(gn,"__esModule",{value:!0});gn.PostgrestError=gn.PostgrestBuilder=gn.PostgrestTransformBuilder=gn.PostgrestFilterBuilder=gn.PostgrestQueryBuilder=gn.PostgrestClient=void 0;const SR=sm(SS);gn.PostgrestClient=SR.default;const AR=sm(fb);gn.PostgrestQueryBuilder=AR.default;const ER=sm(Ev);gn.PostgrestFilterBuilder=ER.default;const CR=sm(mb);gn.PostgrestTransformBuilder=CR.default;const kR=sm(pb);gn.PostgrestBuilder=kR.default;const PR=sm(gb);gn.PostgrestError=PR.default;var DB=gn.default={PostgrestClient:SR.default,PostgrestQueryBuilder:AR.default,PostgrestFilterBuilder:ER.default,PostgrestTransformBuilder:CR.default,PostgrestBuilder:kR.default,PostgrestError:PR.default};const{PostgrestClient:OB,PostgrestQueryBuilder:aQ,PostgrestFilterBuilder:oQ,PostgrestTransformBuilder:lQ,PostgrestBuilder:cQ,PostgrestError:dQ}=DB;class LB{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const FB="2.15.1",$B=`realtime-js/${FB}`,zB="1.0.0",xj=1e4,BB=1e3,UB=100;var op;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(op||(op={}));var Wt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Wt||(Wt={}));var Yr;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Yr||(Yr={}));var yj;(function(s){s.websocket="websocket"})(yj||(yj={}));var Nc;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Nc||(Nc={}));class HB{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class TR{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(rt||(rt={}));const _C=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=WB(o,s,e,r),i),{})},WB=(s,e,t,n)=>{const r=e.find(l=>l.name===s),i=r==null?void 0:r.type,o=t[s];return i&&!n.includes(i)?RR(i,o):bj(o)},RR=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return KB(e,t)}switch(s){case rt.bool:return VB(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return GB(e);case rt.json:case rt.jsonb:return qB(e);case rt.timestamp:return YB(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return bj(e);default:return bj(e)}},bj=s=>s,VB=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},GB=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},qB=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},KB=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const o=s.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>RR(e,l))}return s},YB=s=>typeof s=="string"?s.replace(" ","T"):s,MR=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class ww{constructor(e,t,n={},r=xj){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var NC;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(NC||(NC={}));class lp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lp.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=lp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=lp.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),l={},c={};return this.map(i,(d,h)=>{o[d]||(c[d]=h)}),this.map(o,(d,h)=>{const f=i[d];if(f){const m=h.map(w=>w.presence_ref),p=f.map(w=>w.presence_ref),x=h.filter(w=>p.indexOf(w.presence_ref)<0),v=f.filter(w=>m.indexOf(w.presence_ref)<0);x.length>0&&(l[d]=x),v.length>0&&(c[d]=v)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),h.length>0){const f=e[l].map(p=>p.presence_ref),m=h.filter(p=>f.indexOf(p.presence_ref)<0);e[l].unshift(...m)}n(l,h,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const h=c.map(f=>f.presence_ref);d=d.filter(f=>h.indexOf(f.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var SC;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(SC||(SC={}));var cp;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(cp||(cp={}));var fa;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(fa||(fa={}));class AS{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new ww(this,Yr.join,this.params,this.timeout),this.rejoinTimer=new TR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yr.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new lp(this),this.broadcastEndpointURL=MR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[cp.PRESENCE]&&this.bindings[cp.PRESENCE].length>0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(fa.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(fa.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var p;if(this.socket.setAuth(),m===void 0){e==null||e(fa.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(p=x==null?void 0:x.length)!==null&&p!==void 0?p:0,w=[];for(let g=0;g<v;g++){const y=x[g],{filter:{event:b,schema:_,table:S,filter:A}}=y,C=m&&m[g];if(C&&C.event===b&&C.schema===_&&C.table===S&&C.filter===A)w.push(Object.assign(Object.assign({},y),{id:C.id}));else{this.unsubscribe(),this.state=Wt.errored,e==null||e(fa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,e&&e(fa.SUBSCRIBED);return}}).receive("error",m=>{this.state=Wt.errored,e==null||e(fa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Wt.joined&&e===cp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new ww(this,Yr.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wt.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ww(this,e,t,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>UB){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=Yr;if(n&&[l,c,d,h].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,t,n);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var x,v,w;return((x=p.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(v=p.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var x,v,w,g,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,S=(x=p.filter)===null||x===void 0?void 0:x.event;return _&&((v=t.ids)===null||v===void 0?void 0:v.includes(_))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(y=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:v,table:w,commit_timestamp:g,type:y,errors:b}=x;m=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:g,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(x))}p.callback(m,n)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&AS.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yr.close,{},e)}_onError(e){this._on(Yr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=_C(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=_C(e.columns,e.old_record)),t}}const AC=()=>{},hx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},XB=[1e3,2e3,5e3,1e4],QB=1e4,JB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZB{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xj,this.transport=null,this.heartbeatIntervalMs=hx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=AC,this.ref=0,this.reconnectTimer=null,this.logger=AC,this.conn=null,this.sendBuffer=[],this.serializer=new HB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...o)=>Av(async()=>{const{default:l}=await Promise.resolve().then(()=>tm);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${yj.websocket}`,this.httpEndpoint=MR(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=LB.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zB}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case op.connecting:return Nc.Connecting;case op.open:return Nc.Open;case op.closing:return Nc.Closing;default:return Nc.Closed}}isConnected(){return this.connectionState()===Nc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new AS(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(BB,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},hx.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:r,payload:i,ref:o}=t,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${r} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(r,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([JB],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const r={access_token:t,version:$B};t&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(Yr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new TR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,r,i,o,l,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:xj,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:hx.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>XB[h-1]||QB,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ES extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Yt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class e8 extends ES{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class wj extends ES{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var t8=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const IR=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Av(async()=>{const{default:n}=await Promise.resolve().then(()=>tm);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},s8=()=>t8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Av(()=>Promise.resolve().then(()=>tm),void 0)).Response:Response}),jj=s=>{if(Array.isArray(s))return s.map(t=>jj(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=jj(n)}),e},n8=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var mu=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const jw=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),r8=(s,e,t)=>mu(void 0,void 0,void 0,function*(){const n=yield s8();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{const i=s.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new e8(jw(r),i,o))}).catch(r=>{e(new wj(jw(r),r))}):e(new wj(jw(s),s))}),i8=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!n?r:(n8(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(n)):r.body=n,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function Cv(s,e,t,n,r,i){return mu(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(t,i8(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>r8(c,l,n))})})}function sy(s,e,t,n){return mu(this,void 0,void 0,function*(){return Cv(s,"GET",e,t,n)})}function gi(s,e,t,n,r){return mu(this,void 0,void 0,function*(){return Cv(s,"POST",e,n,r,t)})}function _j(s,e,t,n,r){return mu(this,void 0,void 0,function*(){return Cv(s,"PUT",e,n,r,t)})}function a8(s,e,t,n){return mu(this,void 0,void 0,function*(){return Cv(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function DR(s,e,t,n,r){return mu(this,void 0,void 0,function*(){return Cv(s,"DELETE",e,n,r,t)})}var zs=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const o8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},EC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l8{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=IR(r)}uploadOrUpdate(e,t,n,r){return zs(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},EC),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(t),h=this._getFinalPath(d),f=yield(e=="PUT"?_j:gi)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Yt(i))return{data:null,error:i};throw i}})}upload(e,t,n){return zs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return zs(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:EC.upsert},r),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const f=yield _j(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(Yt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return zs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield gi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new ES("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}update(e,t,n){return zs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return zs(this,void 0,void 0,function*(){try{return{data:yield gi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}copy(e,t,n){return zs(this,void 0,void 0,function*(){try{return{data:{path:(yield gi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return zs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield gi(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return zs(this,void 0,void 0,function*(){try{const r=yield gi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}download(e,t){return zs(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield sy(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Yt(l))return{data:null,error:l};throw l}})}info(e){return zs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield sy(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:jj(n),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}exists(e){return zs(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield a8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Yt(n)&&n instanceof wj){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const l=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return zs(this,void 0,void 0,function*(){try{return{data:yield DR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}})}list(e,t,n){return zs(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},o8),t),{prefix:e||""});return{data:yield gi(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Yt(r))return{data:null,error:r};throw r}})}listV2(e,t){return zs(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield gi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const c8="2.11.0",d8={"X-Client-Info":`storage-js/${c8}`};var ju=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class u8{constructor(e,t={},n,r){const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},d8),t),this.fetch=IR(n)}listBuckets(){return ju(this,void 0,void 0,function*(){try{return{data:yield sy(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Yt(e))return{data:null,error:e};throw e}})}getBucket(e){return ju(this,void 0,void 0,function*(){try{return{data:yield sy(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ju(this,void 0,void 0,function*(){try{return{data:yield gi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ju(this,void 0,void 0,function*(){try{return{data:yield _j(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Yt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ju(this,void 0,void 0,function*(){try{return{data:yield gi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ju(this,void 0,void 0,function*(){try{return{data:yield DR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Yt(t))return{data:null,error:t};throw t}})}}class h8 extends u8{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new l8(this.url,this.headers,e,this.fetch)}}const f8="2.56.0";let Cm="";typeof Deno<"u"?Cm="deno":typeof document<"u"?Cm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cm="react-native":Cm="node";const m8={"X-Client-Info":`supabase-js-${Cm}/${f8}`},p8={headers:m8},g8={schema:"public"},v8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},x8={};var y8=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};const b8=s=>{let e;return s?e=s:typeof fetch>"u"?e=bR:e=fetch,(...t)=>e(...t)},w8=()=>typeof Headers>"u"?wR:Headers,j8=(s,e,t)=>{const n=b8(t),r=w8();return(i,o)=>y8(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:s;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",s),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var _8=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};function N8(s){return s.endsWith("/")?s:s+"/"}function S8(s,e){var t,n;const{db:r,auth:i,realtime:o,global:l}=s,{db:c,auth:d,realtime:h,global:f}=e,m={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>_8(this,void 0,void 0,function*(){return""})};return s.accessToken?m.accessToken=s.accessToken:delete m.accessToken,m}const OR="2.71.1",Tu=30*1e3,Nj=3,_w=Nj*Tu,A8="http://localhost:9999",E8="supabase.auth.token",C8={"X-Client-Info":`gotrue-js/${OR}`},Sj="X-Supabase-Api-Version",LR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},k8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,P8=10*60*1e3;class CS extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Ce(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class T8 extends CS{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function R8(s){return Ce(s)&&s.name==="AuthApiError"}class FR extends CS{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class oc extends CS{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class Ao extends oc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function M8(s){return Ce(s)&&s.name==="AuthSessionMissingError"}class fx extends oc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mx extends oc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class px extends oc{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function I8(s){return Ce(s)&&s.name==="AuthImplicitGrantRedirectError"}class CC extends oc{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Aj extends oc{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Nw(s){return Ce(s)&&s.name==="AuthRetryableFetchError"}class kC extends oc{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Ej extends oc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),PC=` 	
\r=`.split(""),D8=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<PC.length;e+=1)s[PC[e].charCodeAt(0)]=-2;for(let e=0;e<ny.length;e+=1)s[ny[e].charCodeAt(0)]=e;return s})();function TC(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ny[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ny[n]),e.queuedBits-=6}}function $R(s,e,t){const n=D8[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function RC(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{F8(o,n,t)};for(let o=0;o<s.length;o+=1)$R(s.charCodeAt(o),r,i);return e.join("")}function O8(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function L8(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|r)+65536,t+=1}O8(n,e)}}function F8(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function $8(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<s.length;r+=1)$R(s.charCodeAt(r),t,n);return new Uint8Array(e)}function z8(s){const e=[];return L8(s,t=>e.push(t)),new Uint8Array(e)}function B8(s){const e=[],t={queue:0,queuedBits:0},n=r=>{e.push(r)};return s.forEach(r=>TC(r,t,n)),TC(null,t,n),e.join("")}function U8(s){return Math.round(Date.now()/1e3)+s}function H8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const Pr=()=>typeof window<"u"&&typeof document<"u",pc={tested:!1,writable:!1},zR=()=>{if(!Pr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pc.tested)return pc.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),pc.tested=!0,pc.writable=!0}catch{pc.tested=!0,pc.writable=!1}return pc.writable};function W8(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const BR=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Av(async()=>{const{default:n}=await Promise.resolve().then(()=>tm);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},V8=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Ru=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},gc=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},_o=async(s,e)=>{await s.removeItem(e)};class vb{constructor(){this.promise=new vb.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}vb.promiseConstructor=Promise;function Sw(s){const e=s.split(".");if(e.length!==3)throw new Ej("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!k8.test(e[n]))throw new Ej("JWT not in base64url format");return{header:JSON.parse(RC(e[0])),payload:JSON.parse(RC(e[1])),signature:$8(e[2]),raw:{header:e[0],payload:e[1]}}}async function G8(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function q8(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function K8(s){return("0"+s.toString(16)).substr(-2)}function Y8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,K8).join("")}async function X8(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function Q8(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await X8(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _u(s,e,t=!1){const n=Y8();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await Ru(s,`${e}-code-verifier`,r);const i=await Q8(n);return[i,n===i?"plain":"s256"]}const J8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Z8(s){const e=s.headers.get(Sj);if(!e||!e.match(J8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function eU(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function tU(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nu(s){if(!sU.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Aw(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function MC(s){return JSON.parse(JSON.stringify(s))}var nU=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const yc=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),rU=[502,503,504];async function IC(s){var e;if(!V8(s))throw new Aj(yc(s),0);if(rU.includes(s.status))throw new Aj(yc(s),s.status);let t;try{t=await s.json()}catch(i){throw new FR(yc(i),i)}let n;const r=Z8(s);if(r&&r.getTime()>=LR["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new kC(yc(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ao}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new kC(yc(t),s.status,t.weak_password.reasons);throw new T8(yc(t),s.status||500,n)}const iU=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function $e(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[Sj]||(i[Sj]=LR["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await aU(s,e,t+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function aU(s,e,t,n,r,i){const o=iU(e,n,r,i);let l;try{l=await s(t,Object.assign({},o))}catch(c){throw console.error(c),new Aj(yc(c),0)}if(l.ok||await IC(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await IC(c)}}function la(s){var e;let t=null;dU(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=U8(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function DC(s){const e=la(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Io(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function oU(s){return{data:s,error:null}}function lU(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,o=nU(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function cU(s){return s}function dU(s){return s.access_token&&s.refresh_token&&s.expires_in}const Ew=["global","local","others"];var uU=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class hU{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=BR(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Ew[0]){if(Ew.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ew.join(", ")}`);try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Io})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=uU(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:lU,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ce(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Io})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:cU});if(h.error)throw h.error;const f=await h.json(),m=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);d[`${w}Page`]=v}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(Ce(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Nu(e);try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Io})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Nu(e);try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Io})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Nu(e);try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Io})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Nu(e.userId);try{const{data:t,error:n}=await $e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Nu(e.userId),Nu(e.id);try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}}function OC(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function fU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Su={debug:!!(globalThis&&zR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class UR extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mU extends UR{}async function pU(s,e,t){Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Su.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw Su.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new mU(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Su.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}fU();const gU={url:A8,storageKey:E8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:C8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function LC(s,e,t){return await t()}const Au={};class Rp{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rp.nextInstanceID,Rp.nextInstanceID+=1,this.instanceID>0&&Pr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},gU),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new hU({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=BR(r.fetch),this.lock=r.lock||LC,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Pr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=pU:this.lock=LC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:zR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=OC(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=OC(this.memoryStorage)),Pr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=Au[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Au[this.storageKey]=Object.assign(Object.assign({},Au[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Au[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Au[this.storageKey]=Object.assign(Object.assign({},Au[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${OR}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=W8(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Pr()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),I8(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ce(t)?{error:t}:{error:new FR("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:la}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:h,password:f,options:m}=e;let p=null,x=null;this.flowType==="pkce"&&([p,x]=await _u(this.storage,this.storageKey)),i=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:f,data:(t=m==null?void 0:m.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:p,code_challenge_method:x},xform:la})}else if("phone"in e){const{phone:h,password:f,options:m}=e;i=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:la})}else throw new mx("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:l}=e;t=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:DC})}else if("phone"in e){const{phone:i,password:o,options:l}=e;t=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:DC})}else throw new mx("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fx}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,o,l,c,d,h,f,m,p;let x,v;if("message"in e)x=e.message,v=e.signature;else{const{chain:w,wallet:g,statement:y,options:b}=e;let _;if(Pr())if(typeof g=="object")_=g;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))_=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=g}const S=new URL((t=b==null?void 0:b.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in _&&_.signIn){const A=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let C;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")C=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)C=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)x=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),v=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${S.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(r=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const A=await _.signMessage(new TextEncoder().encode(x),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=A}}try{const{data:w,error:g}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:B8(v)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:la});if(g)throw g;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new fx}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:g})}catch(w){if(Ce(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(e){const t=await gc(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:o}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:la});if(await _o(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fx}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(Ce(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,l=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:la}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fx}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await _u(this.storage,this.storageKey));const{error:f}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:h}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new mx("You must provide either an email or phone number.")}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:la});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await _u(this.storage,this.storageKey)),await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:oU})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ao;const{error:r}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await $e(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await $e(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new mx("You must provide either an email or phone number and a type")}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await gc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<_w:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await gc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Aw()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,h)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,h))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Io}):await this._useSession(async t=>{var n,r,i;const{data:o,error:l}=t;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ao}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Io})})}catch(t){if(Ce(t))return M8(t)&&(await this._removeSession(),await _o(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Ao;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await _u(this.storage,this.storageKey));const{data:d,error:h}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Io});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ao;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=Sw(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ce(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ao;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Pr())throw new px("No browser detected.");if(e.error||e.error_description||e.error_code)throw new px(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new CC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new px("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new CC("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new px("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(l);let m=h+f;c&&(m=parseInt(c));const p=m-h;p*1e3<=Tu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const x=m-f;h-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,h):h-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,h);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(Ce(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await gc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(R8(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await _o(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=H8(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await _u(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,d,h;const{data:f,error:m}=i;if(m)throw m;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(r)throw r;return Pr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ce(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await q8(async r=>(r>0&&await G8(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:la})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Nw(i)&&Date.now()+o-n<Tu})}catch(n){if(this._debug(t,"error",n),Ce(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Pr()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await gc(this.storage,this.storageKey);if(r&&this.userStorage){let o=await gc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Ru(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Aw()}else if(r&&!r.user&&!r.user){const o=await gc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(r.user=o.user,await _o(this.storage,this.storageKey+"-user"),await Ru(this.storage,this.storageKey,r)):r.user=Aw()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<_w;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${_w}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Nw(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(r.access_token);!l&&(o!=null&&o.user)?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ao;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new vb;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ao;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),Ce(i)){const o={session:null,error:i};return Nw(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await Ru(this.userStorage,this.storageKey+"-user",{user:t.user});const r=Object.assign({},t);delete r.user;const i=MC(r);await Ru(this.storage,this.storageKey,i)}else{const r=MC(t);await Ru(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await _o(this.storage,this.storageKey),await _o(this.storage,this.storageKey+"-code-verifier"),await _o(this.storage,this.storageKey+"-user"),this.userStorage&&await _o(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Pr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Tu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Tu}ms, refresh threshold is ${Nj} ticks`),r<=Nj&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof UR)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await _u(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await $e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:l}=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Sw(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(l=>l.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+P8>r)return n;const{data:i,error:o}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:p,error:x}=await this.getSession();if(x||!p.session)return{data:null,error:x};n=p.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=Sw(n);t!=null&&t.allowExpired||eU(i.exp);const d=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!d){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:r,signature:o},error:null}}const h=tU(r.alg),f=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,z8(`${l}.${c}`)))throw new Ej("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}Rp.nextInstanceID=0;const vU=Rp;class xU extends vU{constructor(e){super(e)}}var yU=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(f){o(f)}}function c(h){try{d(n.throw(h))}catch(f){o(f)}}function d(h){h.done?i(h.value):r(h.value).then(l,c)}d((n=n.apply(s,e||[])).next())})};class bU{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=N8(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,h={db:g8,realtime:x8,auth:Object.assign(Object.assign({},v8),{storageKey:d}),global:p8},f=S8(n??{},h);this.storageKey=(r=f.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=j8(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new OB(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new h8(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new mB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return yU(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xU({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ZB(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wU=(s,e,t)=>new bU(s,e,t);function jU(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}jU()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _U="https://azthgtmchlqhtzlgwolw.supabase.co",NU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6dGhndG1jaGxxaHR6bGd3b2x3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMjQ5ODksImV4cCI6MjA3MDkwMDk4OX0.h5Cl_qJHDWlnGArMe8pQCn0rwhYUYBcdaviIvpxryAo",se=wU(_U,NU,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});class SU{constructor(){q(this,"failureCount",0);q(this,"lastFailureTime",0);q(this,"state","CLOSED");q(this,"failureThreshold",3);q(this,"timeout",3e4)}async execute(e){if(this.state==="OPEN")if(Date.now()-this.lastFailureTime>this.timeout)this.state="HALF_OPEN";else throw new Error("Circuit breaker is OPEN - service unavailable");try{const t=await e();return this.onSuccess(),t}catch(t){throw this.onFailure(),t}}onSuccess(){this.failureCount=0,this.state="CLOSED"}onFailure(){this.failureCount++,this.lastFailureTime=Date.now(),this.failureCount>=this.failureThreshold&&(this.state="OPEN")}getState(){return{state:this.state,failureCount:this.failureCount,lastFailureTime:this.lastFailureTime}}}class AU{static async retry(e,t=3,n=1e3){let r;for(let i=0;i<=t;i++)try{return await e()}catch(o){if(r=o,i===t)throw r;const l=n*Math.pow(2,i)+Math.random()*1e3;console.log(`[Retry] Attempt ${i+1} failed, retrying in ${l}ms`),await new Promise(c=>setTimeout(c,l))}throw r}static withRetry(e,t=3){return()=>this.retry(e,t)}}const Ny=class Ny{constructor(){q(this,"isHealthy",!0);q(this,"lastCheck",0);q(this,"checkInterval",3e4)}static getInstance(){return this.instance||(this.instance=new Ny),this.instance}async checkHealth(){try{const{data:e,error:t}=await se.from("profiles").select("count").limit(1);return this.isHealthy=!t,this.lastCheck=Date.now(),this.isHealthy}catch(e){return console.error("[HealthCheck] Backend health check failed:",e),this.isHealthy=!1,this.lastCheck=Date.now(),!1}}getHealthStatus(){return{isHealthy:this.isHealthy,lastCheck:this.lastCheck,needsCheck:Date.now()-this.lastCheck>this.checkInterval}}};q(Ny,"instance");let Cj=Ny;const HR=j.createContext(null),ci=()=>{const s=j.useContext(HR);if(!s)throw new Error("useAuthResilient must be used within an AuthProviderResilient");return s},EU=({children:s})=>{const[e,t]=j.useState({user:null,session:null,userProfile:null,isAdmin:!1,loading:!0,error:null,retryCount:0,lastSuccessfulAuth:null,isOnline:navigator.onLine,isHealthy:!0}),n=j.useRef(new SU),r=j.useRef(Cj.getInstance()),i=j.useRef(),o=j.useRef();j.useEffect(()=>{const x=()=>{console.log("[Auth] Back online, checking health..."),t(w=>({...w,isOnline:!0})),p()},v=()=>{console.log("[Auth] Gone offline"),t(w=>({...w,isOnline:!1,isHealthy:!1}))};return window.addEventListener("online",x),window.addEventListener("offline",v),()=>{window.removeEventListener("online",x),window.removeEventListener("offline",v)}},[]),j.useEffect(()=>{const x=async()=>{if(r.current.getHealthStatus().needsCheck){const w=await r.current.checkHealth();t(g=>({...g,isHealthy:w})),w&&!e.user&&e.retryCount>0&&(console.log("[Auth] Backend healthy, retrying auth..."),d())}};return x(),o.current=setInterval(x,3e4),()=>{o.current&&clearInterval(o.current)}},[e.user,e.retryCount]),j.useEffect(()=>{const x=setTimeout(()=>{console.log("[Auth] Initial loading timeout - setting loading to false"),t(v=>({...v,loading:!1}))},2e3);return()=>clearTimeout(x)},[]);const l=j.useCallback(async x=>{if(console.log("[Auth] Loading profile for user ID:",x),x==="1e9ce13f-3444-40dd-92e4-3b36364bb930")return console.log("[Auth] Using direct fallback for known admin user"),{user_id:x,email:"samihosari13@gmail.com",full_name:"Sami Hosari",role:"admin",pgy_level:10};const v=async()=>{const{data:w,error:g}=await se.from("profiles").select("*").eq("user_id",x).single();if(g)throw new Error(`Profile query failed: ${g.message}`);return w};try{const w=await n.current.execute(AU.withRetry(v,3));return console.log("[Auth] Profile loaded successfully:",w),w}catch(w){return console.error("[Auth] Failed to load profile after retries:",w),{user_id:x,email:"unknown@example.com",full_name:"Unknown User",role:"user",pgy_level:1}}},[]),c=j.useCallback(async()=>{try{t(w=>({...w,loading:!0,error:null}));const{data:{session:x},error:v}=await se.auth.getSession();if(v)throw new Error(`Session check failed: ${v.message}`);if(x!=null&&x.user){console.log("[Auth] Found existing session for user:",x.user.id);const w=await l(x.user.id);t(g=>({...g,user:x.user,session:x,userProfile:w,isAdmin:(w==null?void 0:w.role)==="admin",loading:!1,error:null,retryCount:0,lastSuccessfulAuth:Date.now()}))}else t(w=>({...w,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1,error:null,retryCount:0}))}catch(x){console.error("[Auth] Initialization failed:",x),t(v=>({...v,loading:!1,error:x instanceof Error?x.message:"Unknown error",retryCount:v.retryCount+1})),e.retryCount<3&&(i.current=setTimeout(()=>{console.log("[Auth] Auto-retrying auth initialization..."),c()},5e3))}},[l,e.retryCount]);j.useEffect(()=>{const{data:{subscription:x}}=se.auth.onAuthStateChange(async(v,w)=>{var g;console.log("[Auth] State change:",v,"user:",(g=w==null?void 0:w.user)==null?void 0:g.id);try{if(w!=null&&w.user){const y=await l(w.user.id);t(b=>({...b,user:w.user,session:w,userProfile:y,isAdmin:(y==null?void 0:y.role)==="admin",loading:!1,error:null,retryCount:0,lastSuccessfulAuth:Date.now()}))}else t(y=>({...y,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1,error:null,retryCount:0}))}catch(y){console.error("[Auth] State change error:",y),t(b=>({...b,loading:!1,error:y instanceof Error?y.message:"State change error"}))}});return c(),()=>{x.unsubscribe(),i.current&&clearTimeout(i.current)}},[c,l]);const d=j.useCallback(async()=>{console.log("[Auth] Manual retry triggered"),t(x=>({...x,retryCount:0,error:null})),await c()},[c]),h=j.useCallback(async()=>{if(e.user)try{const x=await l(e.user.id);t(v=>({...v,userProfile:x,isAdmin:(x==null?void 0:x.role)==="admin",error:null}))}catch(x){console.error("[Auth] Profile refresh failed:",x),t(v=>({...v,error:x instanceof Error?x.message:"Profile refresh failed"}))}},[e.user,l]),f=j.useCallback(async()=>{try{console.log("[Auth] Starting sign out..."),t(v=>({...v,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1,error:null}));const{error:x}=await se.auth.signOut();x&&console.error("[Auth] Sign out error:",x),console.log("[Auth] Sign out successful")}catch(x){console.error("[Auth] Error signing out:",x),t(v=>({...v,user:null,session:null,userProfile:null,isAdmin:!1,loading:!1}))}},[]),m=j.useCallback(()=>{t(x=>({...x,error:null}))},[]),p=j.useCallback(async()=>{const x=await r.current.checkHealth();t(v=>({...v,isHealthy:x})),x&&e.retryCount>0&&await d()},[e.retryCount,d]);return a.jsx(HR.Provider,{value:{...e,signOut:f,retryAuth:d,refreshProfile:h,clearError:m},children:s})},Fs=()=>{const{user:s,signOut:e,isAdmin:t,userProfile:n,loading:r}=ci();po(),console.log("[Header] Loading:",r),console.log("[Header] User:",s==null?void 0:s.email),console.log("[Header] UserProfile:",n),console.log("[Header] UserProfile Role:",n==null?void 0:n.role);const i=async()=>{try{console.log("[Header] Starting sign out..."),await e(),console.log("[Header] Sign out completed, navigating to home..."),window.location.href="/"}catch(o){console.error("[Header] Error during sign out:",o),window.location.href="/"}};return a.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-card-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:a.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[a.jsxs(cs,{to:"/",className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded-medical overflow-hidden",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/logo.png",alt:"ResidentTrack Logo",className:"w-full h-full object-contain"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-card-foreground",children:"ResidentTrack"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"FMH Medical Training"})]})]}),a.jsx("nav",{className:"hidden md:flex items-center gap-6",children:s?a.jsxs(a.Fragment,{children:[a.jsx(cs,{to:"/fmh",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"FMH Tracking"}),a.jsx(cs,{to:"/dashboard",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Dashboard"}),a.jsx(cs,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),a.jsx(cs,{to:"/publications",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Publikationen"}),s&&((n==null?void 0:n.role)==="supervisor"||(n==null?void 0:n.role)==="admin"||t)&&a.jsxs(cs,{to:"/supervisor",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors flex items-center gap-1",children:[a.jsx(xr,{className:"h-4 w-4"}),"Supervisor"]}),t&&a.jsxs(cs,{to:"/admin",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors flex items-center gap-1",children:[a.jsx(Sv,{className:"h-4 w-4"}),"Admin"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(cs,{to:"/features",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Features"}),a.jsx(cs,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),a.jsx(cs,{to:"/contact",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Kontakt"})]})}),a.jsx("div",{className:"flex items-center gap-3",children:r?a.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading..."}):s?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ap,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:(n==null?void 0:n.full_name)||s.email})]}),a.jsxs(K,{variant:"ghost",size:"sm",onClick:i,children:[a.jsx(m$,{className:"h-4 w-4 mr-2"}),"Abmelden"]})]}):a.jsxs(a.Fragment,{children:[a.jsx(cs,{to:"/auth",children:a.jsx(K,{variant:"ghost",size:"sm",className:"hidden md:inline-flex",children:"Anmelden"})}),a.jsx(cs,{to:"/auth",children:a.jsx(K,{variant:"medical",size:"sm",children:"Kostenlos testen"})})]})})]})})},G=j.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));G.displayName="Card";const Ae=j.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("flex flex-col space-y-1.5 p-6",s),...e}));Ae.displayName="CardHeader";const ke=j.forwardRef(({className:s,...e},t)=>a.jsx("h3",{ref:t,className:ne("text-2xl font-semibold leading-none tracking-tight",s),...e}));ke.displayName="CardTitle";const Qr=j.forwardRef(({className:s,...e},t)=>a.jsx("p",{ref:t,className:ne("text-sm text-muted-foreground",s),...e}));Qr.displayName="CardDescription";const ce=j.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("p-6 pt-0",s),...e}));ce.displayName="CardContent";const WR=j.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("flex items-center p-6 pt-0",s),...e}));WR.displayName="CardFooter";const CU=Nv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Y({className:s,variant:e,...t}){return a.jsx("div",{className:ne(CU({variant:e}),s),...t})}const kU=[{icon:Vi,title:"FMH-konforme Dokumentation",description:"Vollständige Prozeduren-Tracking nach FMH-Standards"},{icon:xr,title:"Europaweite Kurssuche",description:"Zugang zu Kursen in CH, DE, AT, FR, IT und mehr"},{icon:tn,title:"Digitales Logbuch",description:"Automatische Portfolio-Erstellung und PDF-Export"},{icon:_s,title:"Zertifikat-Management",description:"CME-Punkte tracking und Zertifikat-Verwaltung"}],PU=()=>a.jsxs("section",{className:"relative overflow-hidden",children:[a.jsx("div",{className:"hero-gradient",children:a.jsx("div",{className:"container mx-auto px-4 py-20",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"text-center lg:text-left",children:[a.jsx(Y,{variant:"secondary",className:"mb-6 text-sm px-4 py-2",children:"🇨🇭 FMH-konforme Ausbildung für die Schweiz & Europa"}),a.jsxs("h1",{className:"text-medical-title text-card-foreground mb-6",children:["Ihre chirurgische Ausbildung",a.jsx("span",{className:"bg-gradient-medical bg-clip-text text-transparent",children:" digital verwalten"})]}),a.jsx("p",{className:"text-medical-subtitle mb-8 max-w-2xl mx-auto lg:mx-0",children:"ResidentTrack ist die führende Plattform für Assistenzärzt:innen zur FMH-konformen Dokumentation ihres Ausbildungsfortschritts und zur europäischen Kurssuche."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start items-center mb-12",children:[a.jsx(cs,{to:"/auth",children:a.jsxs(K,{variant:"default",size:"lg",className:"gap-2 shadow-card-hover",children:["Als Resident starten",a.jsx(nj,{className:"w-5 h-5"})]})}),a.jsx(cs,{to:"/dashboard",children:a.jsxs(K,{variant:"secondary",size:"lg",className:"gap-2",children:[a.jsx(tn,{className:"w-5 h-5"}),"Demo ansehen"]})}),a.jsx(cs,{to:"/contact",children:a.jsx(K,{variant:"outline",size:"lg",children:"Kurs anbieten"})})]}),a.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start items-center gap-8 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"w-4 h-4 text-activity-mint"}),a.jsx("span",{children:"FMH optimiert"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"w-4 h-4 text-activity-mint"}),a.jsx("span",{children:"DSGVO-konform"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"w-4 h-4 text-activity-mint"}),a.jsx("span",{children:"500+ Residents"})]})]})]}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-50 via-white to-slate-100 rounded-3xl"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(59,130,246,0.1),transparent_50%)] rounded-3xl"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(16,185,129,0.1),transparent_50%)] rounded-3xl"}),a.jsxs("div",{className:"relative z-10 p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-full px-4 py-2 shadow-sm border border-white/20 mb-4",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Live Dashboard"})]}),a.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"FMH Training Progress"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Chirurgische Ausbildung 2024"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-3",children:[a.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[a.jsx("path",{className:"text-slate-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),a.jsx("path",{className:"text-green-500",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"85, 100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-bold text-slate-700",children:"85%"})})]}),a.jsx("div",{className:"text-xs font-medium text-slate-700",children:"PGY-1"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Notfall"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-3",children:[a.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",viewBox:"0 0 36 36",children:[a.jsx("path",{className:"text-slate-200",stroke:"currentColor",strokeWidth:"3",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),a.jsx("path",{className:"text-blue-500",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",fill:"none",strokeDasharray:"60, 100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-bold text-slate-700",children:"60%"})})]}),a.jsx("div",{className:"text-xs font-medium text-slate-700",children:"PGY-2"}),a.jsx("div",{className:"text-xs text-slate-500",children:"Allgemein"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"345"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Prozeduren"})]}),a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"12"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Kurse"})]}),a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"95%"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Fortschritt"})]}),a.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[a.jsx("div",{className:"text-lg font-bold text-slate-800",children:"2.5"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Jahre"})]})]})]}),a.jsx("div",{className:"absolute -top-2 -left-2 w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg flex items-center justify-center",children:a.jsx(Vi,{className:"w-8 h-8 text-white"})}),a.jsx("div",{className:"absolute -bottom-2 -right-2 w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg flex items-center justify-center",children:a.jsx(_s,{className:"w-6 h-6 text-white"})})]})})]})})}),a.jsx("div",{className:"bg-background",children:a.jsx("div",{className:"container mx-auto px-4 py-16",children:a.jsxs("div",{className:"text-center mb-12",children:[a.jsx(Y,{variant:"outline",className:"mb-4",children:"Live Demo"}),a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Fortschritt in Echtzeit verfolgen"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Erleben Sie selbst, wie ResidentTrack Ihren Ausbildungsfortschritt von PGY1 bis PGY6 visualisiert und Ihre FMH-Anforderungen überwacht."})]})})}),a.jsx("div",{className:"bg-muted/30",children:a.jsx("div",{className:"container mx-auto px-4 py-16",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:kU.map((s,e)=>a.jsxs(G,{className:"medical-card p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-primary rounded-medical flex items-center justify-center mx-auto mb-4",children:a.jsx(s.icon,{className:"w-6 h-6 text-primary-foreground"})}),a.jsx("h3",{className:"font-semibold text-card-foreground mb-2",children:s.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]},e))})})})]}),kj=({progress:s,label:e,showPercentage:t=!0,variant:n="default",className:r})=>{const i=Math.min(Math.max(s,0),100),o=d=>d>=80?"bg-progress-complete":d>=50?"bg-progress-partial":"bg-progress-pending",c=(()=>{switch(n){case"medical":return{container:"h-3 bg-swiss-gray rounded-full overflow-hidden shadow-progress",bar:"h-full transition-progress rounded-full bg-gradient-progress"};case"compact":return{container:"h-2 bg-swiss-gray rounded-full overflow-hidden",bar:"h-full transition-progress rounded-full"};default:return{container:"h-4 bg-swiss-gray rounded-full overflow-hidden shadow-card",bar:"h-full transition-progress rounded-full"}}})();return a.jsxs("div",{className:ne("w-full",r),children:[(e||t)&&a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e&&a.jsx("span",{className:"text-sm font-medium text-card-foreground",children:e}),t&&a.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[i,"%"]})]}),a.jsx("div",{className:c.container,children:a.jsx("div",{className:ne(c.bar,o(i)),style:{width:`${i}%`}})})]})},TU=({progress:s,size:e=120,strokeWidth:t=8,label:n,showPercentage:r=!0,variant:i="default",className:o})=>{const l=Math.min(Math.max(s,0),100),c=(e-t)/2,d=c*2*Math.PI,h=d-l/100*d,f=x=>x>=80?"stroke-progress-complete":x>=50?"stroke-progress-partial":"stroke-progress-pending",p=(()=>{switch(i){case"medical":return{size:140,strokeWidth:10};case"large":return{size:160,strokeWidth:12};default:return{size:e,strokeWidth:t}}})();return a.jsxs("div",{className:ne("flex flex-col items-center",o),children:[a.jsxs("div",{className:"relative",children:[a.jsxs("svg",{width:p.size,height:p.size,className:"progress-ring",children:[a.jsx("circle",{cx:p.size/2,cy:p.size/2,r:c,stroke:"hsl(var(--swiss-gray))",strokeWidth:p.strokeWidth,fill:"transparent"}),a.jsx("circle",{cx:p.size/2,cy:p.size/2,r:c,stroke:"url(#progressGradient)",strokeWidth:p.strokeWidth,fill:"transparent",strokeDasharray:`${d} ${d}`,strokeDashoffset:h,strokeLinecap:"round",className:ne("transition-progress",f(l))}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[a.jsx("stop",{offset:"0%",style:{stopColor:"hsl(var(--progress-complete))"}}),a.jsx("stop",{offset:"100%",style:{stopColor:"hsl(var(--medical-primary))"}})]})})]}),r&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-xl font-bold text-card-foreground",children:[Math.round(l),"%"]})})]}),n&&a.jsx("span",{className:"mt-2 text-sm font-medium text-center text-muted-foreground",children:n})]})},gx=[{level:1,title:"PGY1 - Foundation",procedures:45,required:60,courses:3,cmePoints:25},{level:2,title:"PGY2 - Core Skills",procedures:85,required:120,courses:5,cmePoints:40},{level:3,title:"PGY3 - Specialization",procedures:140,required:180,courses:4,cmePoints:35},{level:4,title:"PGY4 - Advanced",procedures:200,required:250,courses:6,cmePoints:50},{level:5,title:"PGY5 - Expert",procedures:180,required:200,courses:3,cmePoints:30},{level:6,title:"PGY6 - Senior",procedures:95,required:100,courses:2,cmePoints:20}],RU=()=>{var f;const[s,e]=j.useState(null),[t,n]=j.useState(0),[r,i]=j.useState(!1);j.useEffect(()=>{if(r){const m=setInterval(()=>{n(p=>p>=100?(i(!1),100):p+2)},50);return()=>clearInterval(m)}},[r]);const o=()=>{n(0),i(!0),e(null)},l=()=>{n(0),i(!1),e(null)},c=()=>{const m=gx.reduce((x,v)=>x+Math.min(v.procedures,v.required),0),p=gx.reduce((x,v)=>x+v.required,0);return Math.round(m/p*100)},d=m=>Math.round(m.procedures/m.required*100),h=m=>m>=90?"default":m>=70?"secondary":"outline";return a.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[a.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[a.jsxs(K,{onClick:o,variant:"default",size:"lg",className:"gap-2",disabled:r,children:[a.jsx(WT,{className:"w-4 h-4"}),r?"Demo läuft...":"Demo starten"]}),a.jsxs(K,{onClick:l,variant:"outline",size:"lg",className:"gap-2",children:[a.jsx(g$,{className:"w-4 h-4"}),"Zurücksetzen"]})]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4 text-card-foreground",children:"FMH Ausbildungsfortschritt - Gesamtübersicht"}),a.jsx("div",{className:"flex justify-center",children:a.jsx(TU,{progress:r?Math.min(t,c()):c(),variant:"large",label:"Gesamtfortschritt",className:"mb-6"})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:gx.map((m,p)=>{const x=d(m),v=r?Math.min(Math.round(t*.8+p*5),x):x;return a.jsxs(G,{className:`medical-card p-6 cursor-pointer transition-all duration-300 ${s===m.level?"ring-2 ring-primary shadow-card-hover scale-105":"hover:shadow-card"}`,onClick:()=>e(s===m.level?null:m.level),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs(Y,{variant:h(x),className:"text-sm font-semibold",children:["PGY",m.level]}),a.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(v),"%"]})]}),a.jsx("h4",{className:"font-semibold text-card-foreground mb-3",children:m.title}),a.jsx(kj,{progress:v,variant:"medical",className:"mb-4"}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Prozeduren:"}),a.jsxs("span",{className:"font-medium",children:[m.procedures,"/",m.required]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Kurse:"}),a.jsx("span",{className:"font-medium",children:m.courses})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"CME Punkte:"}),a.jsx("span",{className:"font-medium",children:m.cmePoints})]})]})]},m.level)})}),s&&a.jsx(G,{className:"medical-card p-6 hero-gradient",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h4",{className:"text-xl font-bold mb-4 text-card-foreground",children:[(f=gx.find(m=>m.level===s))==null?void 0:f.title," - Detailansicht"]}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Hier würden detaillierte Informationen zu spezifischen Prozeduren, absolvierten Kursen und fehlenden Anforderungen angezeigt."}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx(K,{variant:"default",size:"sm",children:"Prozeduren anzeigen"}),a.jsx(K,{variant:"secondary",size:"sm",children:"Passende Kurse finden"})]})]})})]})},km=({courses:s,year:e})=>{const t=[...s].sort((o,l)=>new Date(o.date).getTime()-new Date(l.date).getTime()),n=o=>{switch(o){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";case"upcoming":return"bg-gray-300";default:return"bg-gray-300"}},r=o=>{switch(o){case"required":return"bg-red-500";case"optional":return"bg-blue-500";default:return"bg-gray-500"}},i=o=>{switch(o){case"completed":return a.jsx(Y,{variant:"default",className:"bg-green-100 text-green-800",children:"Abgeschlossen"});case"in-progress":return a.jsx(Y,{variant:"default",className:"bg-blue-100 text-blue-800",children:"Läuft"});case"upcoming":return a.jsx(Y,{variant:"outline",children:"Geplant"});default:return a.jsx(Y,{variant:"outline",children:"Unbekannt"})}};return a.jsxs(G,{className:"medical-card",children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"w-5 h-5"}),"Kurse ",e]})}),a.jsx(ce,{children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-1 bg-gradient-to-b from-teal-200 via-teal-400 to-teal-200 rounded-full"}),a.jsx("div",{className:"space-y-8",children:t.map((o,l)=>a.jsxs("div",{className:"relative flex items-start gap-6",children:[a.jsx("div",{className:"relative z-10 flex-shrink-0",children:a.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white shadow-lg ${n(o.status)}`,children:a.jsx("div",{className:`absolute -top-1 -right-1 w-2 h-2 rounded-full ${r(o.type)}`})})}),a.jsx("div",{className:`flex-1 min-w-0 ${l%2===0?"ml-0":"mr-0"}`,children:a.jsxs("div",{className:"bg-white rounded-lg border border-card-border p-4 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.type==="required"&&a.jsx(Bf,{className:"w-4 h-4 text-yellow-500 fill-current"}),a.jsx("h3",{className:`font-semibold text-card-foreground ${o.type==="required"?"font-bold":"font-medium"}`,children:o.title})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.category})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i(o.status),a.jsxs(Y,{variant:"secondary",className:"text-xs",children:[o.points," CME"]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(hs,{className:"w-4 h-4"}),a.jsx("span",{children:new Date(o.date).toLocaleDateString("de-DE")})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zf,{className:"w-4 h-4"}),a.jsx("span",{children:o.location})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rc,{className:"w-4 h-4"}),a.jsx("span",{children:o.duration})]})]}),o.type==="required"&&a.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-xs text-red-700 font-medium",children:"⭐ Pflichtkurs - Erforderlich für FMH-Zertifizierung"})})]})})]},o.id))}),a.jsx("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.filter(o=>o.status==="completed").length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.filter(o=>o.type==="required").length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Pflichtkurse"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.reduce((o,l)=>o+l.points,0)}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"CME Punkte"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:s.filter(o=>o.status==="upcoming").length}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Geplant"})]})]})})]})})]})},kS=[{id:"1",title:"Advanced Laparoscopy Workshop",date:"2024-03-15",location:"Zürich",duration:"2 Tage",type:"required",status:"completed",points:8,category:"Chirurgie"},{id:"2",title:"Emergency Medicine Simulation",date:"2024-05-20",location:"Basel",duration:"1 Tag",type:"required",status:"completed",points:6,category:"Notfallmedizin"},{id:"3",title:"Digital Health Innovation",date:"2024-07-10",location:"Bern",duration:"1 Tag",type:"optional",status:"completed",points:4,category:"Digital Health"},{id:"4",title:"Trauma Surgery Masterclass",date:"2024-09-15",location:"Lausanne",duration:"3 Tage",type:"required",status:"upcoming",points:12,category:"Traumatologie"},{id:"5",title:"Medical Ethics Workshop",date:"2024-11-08",location:"Genf",duration:"1 Tag",type:"optional",status:"upcoming",points:3,category:"Ethik"},{id:"6",title:"Research Methodology",date:"2024-12-12",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:6,category:"Forschung"}],VR=[{id:"7",title:"Minimally Invasive Surgery Advanced",date:"2025-02-14",location:"Zürich",duration:"3 Tage",type:"required",status:"upcoming",points:15,category:"Chirurgie"},{id:"8",title:"Critical Care Management",date:"2025-04-18",location:"Basel",duration:"2 Tage",type:"required",status:"upcoming",points:10,category:"Intensivmedizin"},{id:"9",title:"AI in Medical Diagnosis",date:"2025-06-22",location:"Bern",duration:"1 Tag",type:"optional",status:"upcoming",points:5,category:"Digital Health"},{id:"10",title:"Pediatric Surgery Workshop",date:"2025-08-15",location:"Lausanne",duration:"2 Tage",type:"required",status:"upcoming",points:8,category:"Pädiatrie"},{id:"11",title:"Global Health Perspectives",date:"2025-10-10",location:"Genf",duration:"1 Tag",type:"optional",status:"upcoming",points:4,category:"Global Health"},{id:"12",title:"Leadership in Healthcare",date:"2025-12-05",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:7,category:"Management"}],GR=[{id:"13",title:"Robotic Surgery Certification",date:"2026-01-20",location:"Zürich",duration:"4 Tage",type:"required",status:"upcoming",points:20,category:"Chirurgie"},{id:"14",title:"Advanced Trauma Life Support",date:"2026-03-15",location:"Basel",duration:"2 Tage",type:"required",status:"upcoming",points:12,category:"Traumatologie"},{id:"15",title:"Precision Medicine Workshop",date:"2026-05-18",location:"Bern",duration:"1 Tag",type:"optional",status:"upcoming",points:6,category:"Personalized Medicine"},{id:"16",title:"Surgical Innovation Summit",date:"2026-07-22",location:"Lausanne",duration:"3 Tage",type:"optional",status:"upcoming",points:18,category:"Innovation"},{id:"17",title:"Medical Communication Skills",date:"2026-09-12",location:"Genf",duration:"1 Tag",type:"required",status:"upcoming",points:5,category:"Kommunikation"},{id:"18",title:"Healthcare Quality Management",date:"2026-11-08",location:"Zürich",duration:"2 Tage",type:"optional",status:"upcoming",points:8,category:"Qualitätsmanagement"}],Cw=[...kS,...VR,...GR],qR=(s={})=>{const{threshold:e=.1,rootMargin:t="0px 0px -50px 0px",triggerOnce:n=!0}=s,r=j.useRef(null),[i,o]=j.useState(!1),[l,c]=j.useState(!1);return j.useEffect(()=>{const d=r.current;if(!d)return;const h=new IntersectionObserver(([f])=>{f.isIntersecting?(o(!0),n&&c(!0)):n||o(!1)},{threshold:e,rootMargin:t});return h.observe(d),()=>{h.unobserve(d)}},[e,t,n]),{ref:r,isVisible:n?i||l:i}},At=({children:s,className:e="",animation:t="fadeIn",delay:n=0,duration:r=600,threshold:i=.1})=>{const{ref:o,isVisible:l}=qR({threshold:i}),c=()=>{const d="transition-all ease-out";if(!l)switch(t){case"fadeIn":return`${d} opacity-0`;case"slideUp":return`${d} opacity-0 translate-y-8`;case"slideLeft":return`${d} opacity-0 translate-x-8`;case"slideRight":return`${d} opacity-0 -translate-x-8`;case"scaleIn":return`${d} opacity-0 scale-95`;default:return`${d} opacity-0`}return`${d} opacity-100 translate-y-0 translate-x-0 scale-100`};return a.jsx("div",{ref:o,className:`${c()} ${e}`,style:{transitionDuration:`${r}ms`,transitionDelay:`${n}ms`},children:s})},kw=({children:s,className:e="",staggerDelay:t=100,animation:n="fadeIn"})=>{const r=ee.Children.toArray(s),{ref:i,isVisible:o}=qR({threshold:.1});return a.jsx("div",{ref:i,className:e,children:r.map((l,c)=>a.jsx(At,{animation:n,delay:o?c*t:0,duration:600,children:l},c))})};class MU extends ee.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Index Error Boundary caught an error:",e,t)}render(){var e;return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Fehler beim Laden der Seite"}),a.jsx("p",{className:"text-red-600 mb-4",children:"Ein unerwarteter Fehler ist aufgetreten."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Seite neu laden"}),a.jsxs("details",{className:"mt-4 text-left",children:[a.jsx("summary",{className:"cursor-pointer text-red-700",children:"Fehlerdetails"}),a.jsx("pre",{className:"mt-2 text-xs text-red-600 bg-red-100 p-2 rounded overflow-auto",children:(e=this.state.error)==null?void 0:e.toString()})]})]})}):this.props.children}}const IU=()=>{console.log("Index: Rendering main content - NO AUTH DEPENDENCIES");try{return a.jsx(MU,{children:a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsxs("main",{children:[a.jsx(PU,{}),a.jsx(RU,{}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsx("div",{className:"container mx-auto px-4 relative",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideRight",delay:0,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Community"]}),a.jsxs("h2",{className:"text-4xl font-bold text-slate-900 mb-6 leading-tight",children:["Werden Sie Teil unserer",a.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:" Resident-Community"})]}),a.jsx("p",{className:"text-xl text-slate-600 mb-8 leading-relaxed",children:"Schließen Sie sich über 500 Assistenzärzt:innen an, die bereits ihre chirurgische Ausbildung mit ResidentTrack digital verwalten und dokumentieren."})]}),a.jsx(kw,{staggerDelay:150,animation:"slideUp",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"500+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Aktive Residents"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"15+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Krankenhäuser"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"1000+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Dokumentierte Prozeduren"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"95%"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Zufriedenheitsrate"})]})})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("button",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-8 py-4 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl",children:"Jetzt beitreten"}),a.jsx("button",{className:"border-2 border-slate-200 text-slate-700 px-8 py-4 rounded-xl font-semibold hover:border-slate-300 hover:bg-slate-50 transition-all duration-300",children:"Mehr erfahren"})]})]})}),a.jsx(At,{animation:"slideLeft",delay:200,children:a.jsx("div",{className:"relative",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/residents-image-2.png",alt:"Resident Community - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"500px"}})})})]})})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-50 text-slate-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),"Dashboard"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Ihr persönliches Dashboard"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Verfolgen Sie Ihren Fortschritt mit unserem intuitiven Dashboard. Alle wichtigen Metriken auf einen Blick."})]})}),a.jsx(At,{animation:"scaleIn",delay:300,children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/dashboard.png",alt:"ResidentTrack Dashboard - Übersicht der chirurgischen Ausbildung",className:"w-full h-auto object-cover"})})})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kurs-Timeline Beispiel"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Verfolgen Sie Ihre Fortbildung mit unserer professionellen Timeline-Darstellung. Pflichtkurse werden hervorgehoben und der Fortschritt wird visuell dargestellt."})]})}),a.jsx(At,{animation:"slideUp",delay:200,children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx(km,{courses:kS,year:2024})})})]})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("span",{className:"text-amber-600",children:"🏆"}),"Auszeichnungen"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Auszeichnungen & Anerkennung"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre Erfolge und Errungenschaften in der chirurgischen Ausbildung"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideRight",delay:200,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Exzellenz in der Ausbildung"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre herausragenden Leistungen und Anerkennungen spiegeln Ihr Engagement für die chirurgische Ausbildung wider."})]}),a.jsx(kw,{staggerDelay:150,animation:"slideUp",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-amber-600 mb-2",children:"5+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Auszeichnungen"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"100%"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Erfolgsrate"})]})})]})})]})}),a.jsx(At,{animation:"slideLeft",delay:400,children:a.jsx("div",{className:"relative",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/awardsresidents2-image.png",alt:"Awards & Recognition - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"400px"}})})})]})]})}),a.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-indigo-100 relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx(Uf,{className:"h-4 w-4"}),"Supervisor Dashboard"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Fortschritt in Echtzeit verfolgen"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Dr. Jose Obermann überwacht sein Team von 5 Residents und deren FMH-Fortschritt"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideLeft",delay:200,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Team-Übersicht: Allgemeinchirurgie"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Echtzeit-Einblicke in die Fortschritte aller Residents mit detaillierten Statistiken und Fortschrittsverfolgung pro FMH-Modul."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(xr,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Team Größe"})]}),a.jsx("div",{className:"text-3xl font-bold text-slate-900",children:"5"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Aktive Residents"})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(js,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Prozeduren"})]}),a.jsx("div",{className:"text-3xl font-bold text-slate-900",children:"247"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Gesamt 2024"})]})]})]})}),a.jsx(At,{animation:"slideRight",delay:400,children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("h4",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Resident Milestone Tracking"}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:"Dr. Anna Schmidt"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 3 • Allgemeinchirurgie"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"85%"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Prozeduren"}),a.jsx(Y,{variant:"outline",className:"text-xs border-green-200 text-green-600",children:"45/50"})]})}),a.jsx("div",{className:"h-8 bg-slate-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[8,12,15,18,22,25,28,32,35,38,42,45].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${s}%`}},e))})}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-blue-200 text-blue-600",children:"3/4"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<9?"bg-gradient-to-t from-blue-500 to-blue-400":"bg-slate-200"}`,style:{height:e<9?"100%":"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-purple-200 text-purple-600",children:"2/3"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<8?"bg-gradient-to-t from-purple-500 to-purple-400":"bg-slate-200"}`,style:{height:e<8?"100%":"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"}),a.jsx(Y,{variant:"outline",className:"text-xs border-amber-200 text-amber-600",children:"1/2"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<6?"bg-gradient-to-t from-amber-500 to-amber-400":"bg-slate-200"}`,style:{height:e<6?"100%":"20%"}},e))})})]})]})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:"Dr. Michael Müller"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 4 • Allgemeinchirurgie"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"92%"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Prozeduren"}),a.jsx(Y,{variant:"outline",className:"text-xs border-green-200 text-green-600",children:"52/55"})]})}),a.jsx("div",{className:"h-8 bg-slate-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[10,15,20,25,30,35,38,42,45,48,50,52].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${s}%`}},e))})}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-blue-200 text-blue-600",children:"4/4"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-blue-500 to-blue-400 rounded-sm flex-1",style:{height:"100%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-purple-200 text-purple-600",children:"3/3"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-purple-500 to-purple-400 rounded-sm flex-1",style:{height:"100%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"}),a.jsx(Y,{variant:"outline",className:"text-xs border-amber-200 text-amber-600",children:"2/2"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-amber-500 to-amber-400 rounded-sm flex-1",style:{height:"100%"}},e))})})]})]})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-semibold text-slate-900",children:"Dr. Sarah Johnson"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 2 • Allgemeinchirurgie"})]}),a.jsx(Y,{className:"bg-yellow-100 text-yellow-700",children:"65%"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-green-700",children:"Prozeduren"}),a.jsx(Y,{variant:"outline",className:"text-xs border-green-200 text-green-600",children:"28/35"})]})}),a.jsx("div",{className:"h-8 bg-slate-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[5,8,10,12,15,18,20,22,24,26,27,28].map((s,e)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${s}%`}},e))})}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-blue-200 text-blue-600",children:"1/3"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:`rounded-sm flex-1 ${e<4?"bg-gradient-to-t from-blue-500 to-blue-400":"bg-slate-200"}`,style:{height:e<4?"100%":"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"}),a.jsx(Y,{variant:"outline",className:"text-xs border-purple-200 text-purple-600",children:"0/2"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-slate-200 rounded-sm flex-1",style:{height:"20%"}},e))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"}),a.jsx(Y,{variant:"outline",className:"text-xs border-amber-200 text-amber-600",children:"0/1"})]})}),a.jsx("div",{className:"h-6 bg-slate-100 rounded-lg p-1",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((s,e)=>a.jsx("div",{className:"bg-slate-200 rounded-sm flex-1",style:{height:"20%"}},e))})})]})]})]})]})})]}),a.jsx(At,{animation:"fadeIn",delay:600,children:a.jsx("div",{className:"mt-16 text-center",children:a.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/80 backdrop-blur-sm rounded-full px-6 py-3 shadow-sm border border-white/20",children:[a.jsx(Vi,{className:"h-5 w-5 text-green-600"}),a.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Durchschnittlicher Team-Fortschritt: ",a.jsx("strong",{children:"81%"})]})]})})})]})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-purple-100 text-purple-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx(hs,{className:"h-4 w-4"}),"Milestone Tracking"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Fortschrittsverfolgung in Echtzeit"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Dr. Jose Obermann verfolgt die Meilensteine seiner Residents: Prozeduren, Publikationen und Auszeichnungen"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx(At,{animation:"slideUp",delay:200,children:a.jsxs(G,{className:"h-full",children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-bold",children:"AS"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Dr. Anna Schmidt"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 3 • Allgemeinchirurgie"})]})]})}),a.jsxs(ce,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"45/50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Mär"}),a.jsx("span",{children:"Mai"}),a.jsx("span",{children:"Jul"}),a.jsx("span",{children:"Sep"}),a.jsx("span",{children:"Nov"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full",style:{width:"90%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Trend: +12% vs. Vorjahr"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{className:"bg-blue-100 text-blue-700",children:"3/5"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"2023"}),a.jsx("span",{children:"2024"}),a.jsx("span",{children:"2025"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full",style:{width:"60%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"2 Papers in Review"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Auszeichnungen"})]}),a.jsx(Y,{className:"bg-amber-100 text-amber-700",children:"2/3"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-600 rounded-full",style:{width:"67%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Best Resident Award 2024"})]})]})]})]})}),a.jsx(At,{animation:"slideUp",delay:400,children:a.jsxs(G,{className:"h-full",children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-green-600 font-bold",children:"MM"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Dr. Michael Müller"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 4 • Allgemeinchirurgie"})]})]})}),a.jsxs(ce,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{className:"bg-green-100 text-green-700",children:"52/55"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Mär"}),a.jsx("span",{children:"Mai"}),a.jsx("span",{children:"Jul"}),a.jsx("span",{children:"Sep"}),a.jsx("span",{children:"Nov"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full",style:{width:"95%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Trend: +18% vs. Vorjahr"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{className:"bg-blue-100 text-blue-700",children:"4/5"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"2023"}),a.jsx("span",{children:"2024"}),a.jsx("span",{children:"2025"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full",style:{width:"80%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"1 Paper accepted"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Auszeichnungen"})]}),a.jsx(Y,{className:"bg-amber-100 text-amber-700",children:"3/3"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-600 rounded-full",style:{width:"100%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Excellence Award 2024"})]})]})]})]})}),a.jsx(At,{animation:"slideUp",delay:600,children:a.jsxs(G,{className:"h-full",children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-purple-600 font-bold",children:"SJ"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Dr. Sarah Johnson"}),a.jsx("p",{className:"text-sm text-slate-600",children:"PGY 2 • Allgemeinchirurgie"})]})]})}),a.jsxs(ce,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{className:"bg-yellow-100 text-yellow-700",children:"28/40"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Mär"}),a.jsx("span",{children:"Mai"}),a.jsx("span",{children:"Jul"}),a.jsx("span",{children:"Sep"}),a.jsx("span",{children:"Nov"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-yellow-600 rounded-full",style:{width:"70%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Trend: +8% vs. Vorjahr"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{className:"bg-blue-100 text-blue-700",children:"1/3"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"2023"}),a.jsx("span",{children:"2024"}),a.jsx("span",{children:"2025"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-400 to-blue-600 rounded-full",style:{width:"33%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Case Report submitted"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Auszeichnungen"})]}),a.jsx(Y,{className:"bg-amber-100 text-amber-700",children:"1/2"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]}),a.jsx("div",{className:"h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-amber-600 rounded-full",style:{width:"50%"}})}),a.jsx("div",{className:"text-xs text-slate-600",children:"Rising Star Award"})]})]})]})]})})]}),a.jsx(At,{animation:"fadeIn",delay:800,children:a.jsx("div",{className:"mt-16 text-center",children:a.jsxs("div",{className:"inline-flex items-center gap-2 bg-slate-100 rounded-full px-6 py-3",children:[a.jsx(Uf,{className:"h-5 w-5 text-slate-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Supervisor Dashboard zeigt alle Meilensteine in Echtzeit"})]})})})]})}),a.jsx("section",{className:"py-20 bg-white relative overflow-hidden",children:a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsx(At,{animation:"fadeIn",delay:0,children:a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("span",{className:"text-blue-600",children:"📚"}),"Kurse"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Kurs-Exzellenz"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre Teilnahme an hochwertigen Kursen und Weiterbildungen"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsx(At,{animation:"slideRight",delay:200,children:a.jsx("div",{className:"relative order-2 lg:order-1",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/courseresidentsimage.png",alt:"Course Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover",style:{minHeight:"400px"}})})}),a.jsx(At,{animation:"slideLeft",delay:400,children:a.jsxs("div",{className:"space-y-8 order-1 lg:order-2",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Kontinuierliche Weiterbildung"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre aktive Teilnahme an Kursen und Weiterbildungen zeigt Ihr Engagement für lebenslanges Lernen in der Chirurgie."})]}),a.jsx(kw,{staggerDelay:150,animation:"slideUp",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"15+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Kurse"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-cyan-600 mb-2",children:"120+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"CME Punkte"})]})})]})})]})})]})]})}),a.jsxs("section",{className:"py-20 bg-gradient-to-br from-teal-50 via-emerald-50 to-green-50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(20,184,166,0.1),transparent_50%)]"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_80%,rgba(16,185,129,0.1),transparent_50%)]"}),a.jsxs("div",{className:"container mx-auto px-4 relative",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-teal-100 text-teal-700 px-4 py-2 rounded-full text-sm font-medium mb-6",children:[a.jsx("span",{className:"text-teal-600",children:"⚕️"}),"Training"]}),a.jsx("h2",{className:"text-4xl font-bold text-slate-900 mb-6",children:"Trainings-Exzellenz"}),a.jsx("p",{className:"text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed",children:"Ihre praktische Ausbildung und operative Erfahrung"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"Praktische Ausbildung"}),a.jsx("p",{className:"text-lg text-slate-600 leading-relaxed",children:"Ihre operative Erfahrung und praktische Ausbildung bilden das Fundament Ihrer chirurgischen Kompetenz."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-teal-600 mb-2",children:"500+"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Operationen"})]})}),a.jsx("div",{className:"group",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-white/20 hover:shadow-md transition-all duration-300",children:[a.jsx("div",{className:"text-3xl font-bold text-emerald-600 mb-2",children:"6"}),a.jsx("div",{className:"text-sm text-slate-600 font-medium",children:"Jahre"})]})})]})]}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:"relative overflow-hidden rounded-3xl shadow-2xl",children:[a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/trainingimage.png",alt:"Training Excellence - Chirurgische Ausbildung",className:"w-full h-auto object-cover transition-transform duration-700 group-hover:scale-105",style:{minHeight:"400px"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-teal-900/20 via-transparent to-transparent"})]}),a.jsx("div",{className:"absolute -top-6 -left-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-teal-600 text-lg",children:"⚕️"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-800",children:"500+ OPs"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Erfahrung"})]})]})}),a.jsx("div",{className:"absolute -bottom-6 -right-6 bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl border border-white/20",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-emerald-600 text-lg",children:"🎯"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-slate-800",children:"6 Jahre"}),a.jsx("div",{className:"text-xs text-slate-600",children:"Ausbildung"})]})]})})]})})]})]})]})]})]})})}catch(s){return console.error("Index render error:",s),a.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Render-Fehler"}),a.jsx("p",{className:"text-red-600",children:String(s)})]})})}},kv=({progress:s,size:e=80,strokeWidth:t=6,color:n,backgroundColor:r="hsl(var(--swiss-gray))",label:i,showPercentage:o=!1,className:l,onClick:c,variant:d="mint"})=>{const h=Math.min(Math.max(s,0),100),f=(e-t)/2,m=f*2*Math.PI,p=m-h/100*m,x=()=>{if(n)return n;switch(d){case"mint":return"hsl(var(--activity-mint))";case"coral":return"hsl(var(--activity-coral))";case"lavender":return"hsl(var(--activity-lavender))";case"amber":return"hsl(var(--activity-amber))";default:return"hsl(var(--activity-mint))"}};return a.jsxs("div",{className:ne("flex flex-col items-center cursor-pointer transition-transform hover:scale-105",l),onClick:c,children:[a.jsxs("div",{className:"relative",children:[a.jsxs("svg",{width:e,height:e,className:"progress-ring -rotate-90",children:[a.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:r,strokeWidth:t,fill:"transparent",opacity:.2}),a.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:x(),strokeWidth:t,fill:"transparent",strokeDasharray:`${m} ${m}`,strokeDashoffset:p,strokeLinecap:"round",className:"transition-all duration-1000 ease-out",style:{transformOrigin:"center"}})]}),o&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-sm font-bold text-card-foreground",children:[Math.round(h),"%"]})})]}),i&&a.jsx("span",{className:"mt-1 text-xs font-medium text-center text-muted-foreground max-w-20",children:i})]})};var DU=pN[" useId ".trim().toString()]||(()=>{}),OU=0;function sn(s){const[e,t]=j.useState(DU());return Ht(()=>{s||t(n=>n??String(OU++))},[s]),s||(e?`radix-${e}`:"")}var LU=j.createContext(void 0);function PS(s){const e=j.useContext(LU);return s||e||"ltr"}var Pw="rovingFocusGroup.onEntryFocus",FU={bubbles:!1,cancelable:!0},Pv="RovingFocusGroup",[Pj,KR,$U]=oS(Pv),[zU,YR]=na(Pv,[$U]),[BU,UU]=zU(Pv),XR=j.forwardRef((s,e)=>a.jsx(Pj.Provider,{scope:s.__scopeRovingFocusGroup,children:a.jsx(Pj.Slot,{scope:s.__scopeRovingFocusGroup,children:a.jsx(HU,{...s,ref:e})})}));XR.displayName=Pv;var HU=j.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:r=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=s,m=j.useRef(null),p=lt(e,m),x=PS(i),[v,w]=Qd({prop:o,defaultProp:l??null,onChange:c,caller:Pv}),[g,y]=j.useState(!1),b=Qn(d),_=KR(t),S=j.useRef(!1),[A,C]=j.useState(0);return j.useEffect(()=>{const P=m.current;if(P)return P.addEventListener(Pw,b),()=>P.removeEventListener(Pw,b)},[b]),a.jsx(BU,{scope:t,orientation:n,dir:x,loop:r,currentTabStopId:v,onItemFocus:j.useCallback(P=>w(P),[w]),onItemShiftTab:j.useCallback(()=>y(!0),[]),onFocusableItemAdd:j.useCallback(()=>C(P=>P+1),[]),onFocusableItemRemove:j.useCallback(()=>C(P=>P-1),[]),children:a.jsx(me.div,{tabIndex:g||A===0?-1:0,"data-orientation":n,...f,ref:p,style:{outline:"none",...s.style},onMouseDown:ve(s.onMouseDown,()=>{S.current=!0}),onFocus:ve(s.onFocus,P=>{const T=!S.current;if(P.target===P.currentTarget&&T&&!g){const O=new CustomEvent(Pw,FU);if(P.currentTarget.dispatchEvent(O),!O.defaultPrevented){const z=_().filter($=>$.focusable),F=z.find($=>$.active),B=z.find($=>$.id===v),H=[F,B,...z].filter(Boolean).map($=>$.ref.current);ZR(H,h)}}S.current=!1}),onBlur:ve(s.onBlur,()=>y(!1))})})}),QR="RovingFocusGroupItem",JR=j.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:r=!1,tabStopId:i,children:o,...l}=s,c=sn(),d=i||c,h=UU(QR,t),f=h.currentTabStopId===d,m=KR(t),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:v}=h;return j.useEffect(()=>{if(n)return p(),()=>x()},[n,p,x]),a.jsx(Pj.ItemSlot,{scope:t,id:d,focusable:n,active:r,children:a.jsx(me.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ve(s.onMouseDown,w=>{n?h.onItemFocus(d):w.preventDefault()}),onFocus:ve(s.onFocus,()=>h.onItemFocus(d)),onKeyDown:ve(s.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){h.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const g=GU(w,h.orientation,h.dir);if(g!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(_=>_.focusable).map(_=>_.ref.current);if(g==="last")b.reverse();else if(g==="prev"||g==="next"){g==="prev"&&b.reverse();const _=b.indexOf(w.currentTarget);b=h.loop?qU(b,_+1):b.slice(_+1)}setTimeout(()=>ZR(b))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});JR.displayName=QR;var WU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function VU(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function GU(s,e,t){const n=VU(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return WU[n]}function ZR(s,e=!1){const t=document.activeElement;for(const n of s)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function qU(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var KU=XR,YU=JR,xb="Tabs",[XU,uQ]=na(xb,[YR]),eM=YR(),[QU,TS]=XU(xb),tM=j.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,onValueChange:r,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=s,h=PS(l),[f,m]=Qd({prop:n,onChange:r,defaultProp:i??"",caller:xb});return a.jsx(QU,{scope:t,baseId:sn(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:a.jsx(me.div,{dir:h,"data-orientation":o,...d,ref:e})})});tM.displayName=xb;var sM="TabsList",nM=j.forwardRef((s,e)=>{const{__scopeTabs:t,loop:n=!0,...r}=s,i=TS(sM,t),o=eM(t);return a.jsx(KU,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:a.jsx(me.div,{role:"tablist","aria-orientation":i.orientation,...r,ref:e})})});nM.displayName=sM;var rM="TabsTrigger",iM=j.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,disabled:r=!1,...i}=s,o=TS(rM,t),l=eM(t),c=lM(o.baseId,n),d=cM(o.baseId,n),h=n===o.value;return a.jsx(YU,{asChild:!0,...l,focusable:!r,active:h,children:a.jsx(me.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:c,...i,ref:e,onMouseDown:ve(s.onMouseDown,f=>{!r&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:ve(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:ve(s.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!r&&f&&o.onValueChange(n)})})})});iM.displayName=rM;var aM="TabsContent",oM=j.forwardRef((s,e)=>{const{__scopeTabs:t,value:n,forceMount:r,children:i,...o}=s,l=TS(aM,t),c=lM(l.baseId,n),d=cM(l.baseId,n),h=n===l.value,f=j.useRef(h);return j.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(nc,{present:r||h,children:({present:m})=>a.jsx(me.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:e,style:{...s.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});oM.displayName=aM;function lM(s,e){return`${s}-trigger-${e}`}function cM(s,e){return`${s}-content-${e}`}var JU=tM,dM=nM,uM=iM,hM=oM;const _r=JU,Jn=j.forwardRef(({className:s,...e},t)=>a.jsx(dM,{ref:t,className:ne("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...e}));Jn.displayName=dM.displayName;const Ue=j.forwardRef(({className:s,...e},t)=>a.jsx(uM,{ref:t,className:ne("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...e}));Ue.displayName=uM.displayName;const He=j.forwardRef(({className:s,...e},t)=>a.jsx(hM,{ref:t,className:ne("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...e}));He.displayName=hM.displayName;const Tw=[{id:1,title:"OCT angiography: measurement of retinal macular microvasculature with spectralis II OCT angiography–reliability and reproducibility",authors:"S Hosari, B Hohberger, L Theelke, H Sari, M Lucio, CY Mardin",journal:"Ophthalmologica",year:2020,citations:67,doi:"10.1159/000502473",type:"research",impact:"high",category:"Ophthalmology"},{id:2,title:"Dynamics of retinal vessel loss after acute optic neuritis in patients with relapsing multiple sclerosis",authors:"L Aly, C Noll, R Wicklein, E Wolf, EF Romahn, J Wauschkuhn, S Hosari, ...",journal:"Neurology: Neuroimmunology & Neuroinflammation",year:2022,citations:27,doi:"10.1212/NXI.0000000000001159",type:"research",impact:"high",category:"Neurology"},{id:3,title:"OCT-angiography: Regional reduced macula microcirculation in ocular hypertensive and pre-perimetric glaucoma patients",authors:"B Hohberger, M Lucio, S Schlick, A Wollborn, S Hosari, C Mardin",journal:"PLoS One",year:2021,citations:24,doi:"10.1371/journal.pone.0246469",type:"research",impact:"medium",category:"Ophthalmology"},{id:4,title:"OCT-Angiography: Mydriatic phenylephrine and tropicamide do not influence retinal microvasculature in macula and peripapillary region",authors:"B Hohberger, M Müller, S Hosari, CY Mardin",journal:"PLoS One",year:2019,citations:23,doi:"10.1371/journal.pone.0221395",type:"research",impact:"medium",category:"Ophthalmology"},{id:5,title:"Autoantibodies activating the β2-adrenergic receptor characterize patients with primary and secondary glaucoma",authors:"B Hohberger, R Kunze, G Wallukat, K Kara, CY Mardin, R Lämmer, ...",journal:"Frontiers in Immunology",year:2019,citations:18,doi:"10.3389/fimmu.2019.02112",type:"research",impact:"high",category:"Immunology"},{id:6,title:"Faecal incontinence in the era of sacral neuromodulation",authors:"S Hosari, M Ramser, M Turina",journal:"Swiss Medical Weekly",year:2025,citations:0,doi:"10.4414/smw.2025.04298",type:"research",impact:"medium",category:"Surgery"}],ZU=[{id:1,title:"AI-Driven OCT Analysis for Early Glaucoma Detection",status:"active",progress:75,startDate:"2024-01",expectedCompletion:"2025-06",milestones:[{id:1,title:"Data Collection Phase",completed:!0,date:"2024-03"},{id:2,title:"Algorithm Development",completed:!0,date:"2024-08"},{id:3,title:"Validation Studies",completed:!1,date:"2024-12"},{id:4,title:"Clinical Trial Setup",completed:!1,date:"2025-03"},{id:5,title:"Publication & Patent",completed:!1,date:"2025-06"}],collaborators:["Dr. B. Hohberger","Prof. CY Mardin","AI Research Team"],funding:"Swiss National Science Foundation"},{id:2,title:"Surgical Training Simulation Platform",status:"active",progress:45,startDate:"2024-06",expectedCompletion:"2025-12",milestones:[{id:1,title:"Platform Architecture",completed:!0,date:"2024-08"},{id:2,title:"VR Integration",completed:!1,date:"2024-11"},{id:3,title:"FMH Module Integration",completed:!1,date:"2025-02"},{id:4,title:"Beta Testing",completed:!1,date:"2025-08"},{id:5,title:"Commercial Launch",completed:!1,date:"2025-12"}],collaborators:["Surgical Education Team","VR Development Team"],funding:"University Hospital Zurich"},{id:3,title:"Multi-Center Glaucoma Registry Study",status:"planning",progress:20,startDate:"2025-01",expectedCompletion:"2026-12",milestones:[{id:1,title:"Ethics Approval",completed:!1,date:"2025-02"},{id:2,title:"Center Recruitment",completed:!1,date:"2025-04"},{id:3,title:"Data Collection Start",completed:!1,date:"2025-06"},{id:4,title:"Interim Analysis",completed:!1,date:"2026-06"},{id:5,title:"Final Publication",completed:!1,date:"2026-12"}],collaborators:["European Glaucoma Centers","Statistical Team"],funding:"European Research Council"}],fM=()=>{const[s,e]=j.useState("publications"),t=l=>{switch(l){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},n=l=>{switch(l){case"active":return"bg-green-100 text-green-800 border-green-200";case"planning":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},r=Tw.reduce((l,c)=>l+c.citations,0);return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(G,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:Tw.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Publikationen"})]}),a.jsxs(G,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:r}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Zitationen"})]}),a.jsxs(G,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"h-Index"})]}),a.jsxs(G,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-2",children:7}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"i10-Index"})]})]}),a.jsxs(_r,{value:s,onValueChange:e,className:"w-full",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-2",children:[a.jsxs(Ue,{value:"publications",className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"w-4 h-4"}),"Publikationen"]}),a.jsxs(Ue,{value:"projects",className:"flex items-center gap-2",children:[a.jsx(x$,{className:"w-4 h-4"}),"Laufende Projekte"]})]}),a.jsx(He,{value:"publications",className:"mt-6",children:a.jsx("div",{className:"space-y-6",children:Tw.map(l=>a.jsx(G,{className:"p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-start gap-3 mb-3",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-card-foreground mb-2 leading-tight",children:l.title}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:l.authors}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ns,{className:"w-3 h-3"}),l.journal]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(hs,{className:"w-3 h-3"}),l.year]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(p$,{className:"w-3 h-3"}),l.citations," Zitationen"]})]})]})}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsx(Y,{variant:"outline",className:t(l.impact),children:l.impact==="high"?"Hohe Relevanz":"Mittlere Relevanz"}),a.jsx(Y,{variant:"outline",children:l.category}),a.jsx(Y,{variant:"outline",children:l.type==="research"?"Forschung":"Review"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs(K,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[a.jsx(rj,{className:"w-3 h-3"}),"DOI"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[a.jsx(ob,{className:"w-3 h-3"}),"PDF"]})]})]})},l.id))})}),a.jsx(He,{value:"projects",className:"mt-6",children:a.jsx("div",{className:"space-y-8",children:ZU.map(l=>a.jsxs(G,{className:"p-6",children:[a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start gap-6",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-card-foreground mb-2",children:l.title}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(hs,{className:"w-3 h-3"}),l.startDate," - ",l.expectedCompletion]}),a.jsx(Y,{className:n(l.status),children:l.status==="active"?"Aktiv":"Planung"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-primary",children:[l.progress,"%"]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Fortschritt"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Uf,{className:"w-4 h-4 text-muted-foreground"}),a.jsx("span",{className:"text-sm font-medium",children:"Fortschritt"})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${l.progress}%`}})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),"Kollaboratoren"]}),a.jsx("div",{className:"space-y-1",children:l.collaborators.map((c,d)=>a.jsx("div",{className:"text-sm text-muted-foreground",children:c},d))})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-card-foreground mb-2 flex items-center gap-2",children:[a.jsx(_s,{className:"w-4 h-4"}),"Finanzierung"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:l.funding})]})]})]})}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsxs("h4",{className:"font-medium text-card-foreground mb-4 flex items-center gap-2",children:[a.jsx(rc,{className:"w-4 h-4"}),"Meilensteine"]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),a.jsx("div",{className:"space-y-4",children:l.milestones.map((c,d)=>a.jsxs("div",{className:"relative flex items-start gap-4",children:[a.jsx("div",{className:`relative z-10 flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center ${c.completed?"bg-green-500 border-green-500 text-white":"bg-white border-gray-300 text-gray-400"}`,children:c.completed?a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):a.jsx("span",{className:"text-xs font-medium",children:d+1})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h5",{className:`font-medium ${c.completed?"text-green-700":"text-card-foreground"}`,children:c.title}),a.jsx("span",{className:"text-sm text-muted-foreground",children:c.date})]})})]},c.id))})]})]})]},l.id))})})]})]})},eH=({activityId:s,data:e,onClose:t})=>{const r=(y=>{const b={courses:{title:"Kurse & Fortbildungen",icon:tn,variant:"coral",color:"hsl(var(--activity-coral))"},mandatory:{title:"Examen & Prüfungen",icon:_s,variant:"lavender",color:"hsl(var(--activity-lavender))"},procedures:{title:"OP-Prozeduren",icon:js,variant:"mint",color:"hsl(var(--activity-mint))"},publications:{title:"Publikationen",icon:Ns,variant:"lavender",color:"hsl(var(--activity-lavender))"},awards:{title:"Awards & Auszeichnungen",icon:_s,variant:"amber",color:"hsl(var(--activity-amber))"}};return b[y]||b.courses})(s),i=r.icon,o=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["2021","2022","2023","2024"].map((y,b)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsx("span",{className:"font-medium",children:y}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(kj,{progress:Math.min((b+1)*25,100),variant:"compact",className:"w-24"}),a.jsxs(Y,{variant:"outline",children:[(b+1)*7," Kurse"]})]})]},y))})]})]}),l=[{id:"basisexamen",title:"Basisexamen",description:"Grundlagenprüfung für Medizinstudierende",status:"completed",date:"2020-03-15",score:"85%",type:"required"},{id:"facharztpruefung",title:"Facharztprüfung Chirurgie",description:"Abschlussprüfung für Facharzt Chirurgie",status:"pending",date:"2025-06-20",score:null,type:"required"},{id:"usmle_step1",title:"USMLE Step 1",description:"United States Medical Licensing Examination Step 1",status:"completed",date:"2021-08-10",score:"245",type:"optional"},{id:"usmle_step2",title:"USMLE Step 2 CK",description:"Clinical Knowledge Examination",status:"completed",date:"2022-05-15",score:"258",type:"optional"},{id:"usmle_step3",title:"USMLE Step 3",description:"Final Step of USMLE",status:"pending",date:"2025-03-10",score:null,type:"optional"},{id:"plab",title:"PLAB Test",description:"Professional and Linguistic Assessments Board",status:"not_taken",date:null,score:null,type:"optional"}],c=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"3"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Ausstehend"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Nicht geplant"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Examen & Prüfungen"}),a.jsx("div",{className:"space-y-4",children:l.map((y,b)=>a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-r from-primary to-secondary"}),a.jsxs("div",{children:[a.jsxs("h5",{className:"font-semibold text-card-foreground flex items-center gap-2",children:[y.title,y.type==="required"&&a.jsx("span",{className:"text-red-500",children:"⭐"})]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.description}),y.date&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y.status==="completed"?"Abgeschlossen":"Geplant",": ",new Date(y.date).toLocaleDateString("de-DE")]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[y.score&&a.jsx(Y,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:y.score}),a.jsx(Y,{variant:y.status==="completed"?"default":y.status==="pending"?"secondary":"outline",className:y.status==="completed"?"bg-green-100 text-green-800":y.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600",children:y.status==="completed"?"Abgeschlossen":y.status==="pending"?"Ausstehend":"Nicht geplant"})]})]})},y.id))})]})]}),d=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Durchgeführt"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"FMH-Ziel"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[Math.round(e.completed/e.target*100),"%"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Fortschritt"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),a.jsx("div",{className:"space-y-3",children:Object.entries(e.byYear||{}).map(([y,b])=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsx("span",{className:"font-medium",children:y}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(kj,{progress:Math.min(b/200*100,100),variant:"compact",className:"w-32"}),a.jsxs(Y,{variant:"outline",children:[String(b)," Prozeduren"]})]})]},y))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Häufigste Prozeduren"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Laparoskopische Cholezystektomie",count:45},{name:"Appendektomie",count:38},{name:"Hernienreparatur",count:32},{name:"Endoskopie",count:28}].map(y=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-medical",children:[a.jsx("span",{className:"text-sm font-medium",children:y.name}),a.jsxs(Y,{variant:"secondary",children:[y.count,"x"]})]},y.name))})]})]}),h=()=>a.jsx(fM,{}),f=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Auszeichnungen"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"National"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"International"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Auszeichnungen"}),a.jsx("div",{className:"space-y-3",children:e.items.map((y,b)=>a.jsx("div",{className:"p-4 border border-card-border rounded-medical",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:y.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"font-medium text-card-foreground",children:y.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:y.organization})]}),a.jsx(Y,{variant:"outline",children:y.date})]})},b))})]})]}),m=()=>!Cw||Cw.length===0?a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-muted-foreground",children:"Keine Kurse verfügbar"})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-semibold text-card-foreground",children:"Kurs-Timeline (2024-2026)"}),a.jsxs(_r,{defaultValue:"all",className:"w-full",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-4",children:[a.jsx(Ue,{value:"all",children:"Alle Jahre"}),a.jsx(Ue,{value:"2024",children:"2024"}),a.jsx(Ue,{value:"2025",children:"2025"}),a.jsx(Ue,{value:"2026",children:"2026"})]}),a.jsx(He,{value:"all",className:"mt-4",children:a.jsx(km,{courses:Cw,year:2024})}),a.jsx(He,{value:"2024",className:"mt-4",children:a.jsx(km,{courses:kS,year:2024})}),a.jsx(He,{value:"2025",className:"mt-4",children:a.jsx(km,{courses:VR,year:2025})}),a.jsx(He,{value:"2026",className:"mt-4",children:a.jsx(km,{courses:GR,year:2026})})]})]})]}),p=()=>{switch(s){case"courses":return m();case"mandatory":return c();case"procedures":return d();case"publications":return h();case"awards":return f();default:return o()}},x=typeof(e==null?void 0:e.completed)=="number"?e.completed:0,v=typeof(e==null?void 0:e.target)=="number"&&e.target>0?e.target:1,w=typeof(e==null?void 0:e.count)=="number"?e.count:0,g=s==="procedures"||s==="courses"||s==="mandatory"?x/v*100:Math.min(w/5*100,100);return a.jsxs(G,{className:"medical-card p-6 mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 rounded-medical",style:{backgroundColor:`${r.color}20`},children:a.jsx(i,{className:"w-6 h-6",style:{color:r.color}})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-card-foreground",children:r.title}),a.jsx("p",{className:"text-muted-foreground",children:"Detailierte Ansicht und Jahresverlauf"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(kv,{progress:g,variant:r.variant,size:80,strokeWidth:6,showPercentage:!0}),a.jsx(K,{variant:"ghost",size:"sm",onClick:t,children:a.jsx(ic,{className:"w-4 h-4"})})]})]}),a.jsxs(_r,{defaultValue:"overview",className:"w-full",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-3",children:[a.jsx(Ue,{value:"overview",children:"Übersicht"}),a.jsx(Ue,{value:"yearly",children:"Jahresverlauf"}),a.jsx(Ue,{value:"trends",children:"Trends"})]}),a.jsx(He,{value:"overview",className:"mt-6",children:p()}),a.jsx(He,{value:"yearly",className:"mt-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(hs,{className:"w-4 h-4"}),a.jsx("span",{children:"Fortschrittsverlauf nach Jahren"})]}),p()]})}),a.jsx(He,{value:"trends",className:"mt-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(Uf,{className:"w-4 h-4"}),a.jsx("span",{children:"Analyse und Prognosen"})]}),a.jsxs(G,{className:"p-6",children:[a.jsx("h4",{className:"font-semibold text-card-foreground mb-4",children:"Trend-Analyse"}),a.jsx("p",{className:"text-muted-foreground",children:"Basierend auf Ihrem aktuellen Fortschritt werden Sie Ihr FMH-Ziel voraussichtlich in 18 Monaten erreichen. Ihr Lernfortschritt ist konstant und liegt über dem Durchschnitt."})]})]})})]})]})},Bs={courses:{completed:28,target:35,points:142},mandatoryCourses:{completed:8,target:12,points:64},procedures:{completed:485,target:600,byYear:{2021:45,2022:120,2023:180,2024:140}},publications:{count:6,articles:[{title:"Minimally Invasive Cardiac Surgery",journal:"Heart Surgery Today",date:"2024-03-15"},{title:"Patient Outcomes in Emergency Medicine",journal:"Emergency Care Journal",date:"2023-11-20"}]},awards:{count:3,items:[{title:"Young Surgeon Award",organization:"Swiss Medical Society",date:"2024-01-15",icon:"🏆"},{title:"Research Excellence",organization:"University Hospital",date:"2023-09-10",icon:"🎖️"}]}},tH=()=>{var o;const[s,e]=j.useState(null),[t,n]=j.useState(0);j.useEffect(()=>{const l=setTimeout(()=>{n(100)},300);return()=>clearTimeout(l)},[]);const i=[{id:"courses",label:"Kurse",progress:Bs.courses.completed/Bs.courses.target*100,variant:"coral",icon:tn,data:Bs.courses},{id:"mandatory",label:"Examen & Prüfungen",progress:Bs.mandatoryCourses.completed/Bs.mandatoryCourses.target*100,variant:"lavender",icon:hS,data:Bs.mandatoryCourses},{id:"procedures",label:"Prozeduren",progress:Bs.procedures.completed/Bs.procedures.target*100,variant:"mint",icon:js,data:Bs.procedures},{id:"publications",label:"Publikationen",progress:Math.min(Bs.publications.count/5*100,100),variant:"lavender",icon:Ns,data:Bs.publications},{id:"awards",label:"Awards",progress:Math.min(Bs.awards.count/3*100,100),variant:"amber",icon:eC,data:Bs.awards}];return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Ihr Ausbildungsdashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihren FMH-konformen Fortschritt in Echtzeit"})]}),a.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(pS,{className:"w-4 h-4"}),"Profil teilen"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(hs,{className:"w-4 h-4"}),"Kurse suchen"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(Sv,{className:"w-4 h-4"}),"Einstellungen"]})]})]}),a.jsxs(G,{className:"medical-card p-8 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-4",children:"Ihr Aktivitätsfortschritt"}),a.jsx("p",{className:"text-muted-foreground",children:"Apple Activity-inspirierte Darstellung Ihrer medizinischen Ausbildung"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:i.map(l=>{const c=t>0?Math.min(t*(l.progress/100),l.progress):l.progress;return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(kv,{progress:c,variant:l.variant,size:120,strokeWidth:8,label:l.label,showPercentage:!0,onClick:()=>e(l.id),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(l.icon,{className:"w-4 h-4 text-muted-foreground"}),a.jsx(Y,{variant:"outline",className:"text-xs",children:l.id==="procedures"?`${l.data.completed}/${l.data.target}`:l.id==="courses"||l.id==="mandatory"?`${l.data.completed}/${l.data.target}`:`${l.data.count||l.data.completed||0}`})]})})]},l.id)})})]}),s&&a.jsx(eH,{activityId:s,data:(o=i.find(l=>l.id===s))==null?void 0:o.data,onClose:()=>e(null)}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx(G,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:a.jsx(js,{className:"w-6 h-6 text-activity-mint"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktuelle PGY"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"PGY-4"})]})]})}),a.jsx(G,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:a.jsx(tn,{className:"w-6 h-6 text-activity-coral"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte gesamt"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"206"})]})]})}),a.jsx(G,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:a.jsx(eC,{className:"w-6 h-6 text-activity-amber"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Bis FMH-Ziel"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"24 Mon."})]})]})})]}),a.jsxs(G,{className:"medical-card p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Letzte Aktivitäten"}),a.jsxs(_r,{defaultValue:"procedures",className:"w-full",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-4",children:[a.jsx(Ue,{value:"procedures",children:"Prozeduren"}),a.jsx(Ue,{value:"courses",children:"Kurse"}),a.jsx(Ue,{value:"publications",children:"Publikationen"}),a.jsx(Ue,{value:"awards",children:"Awards"})]}),a.jsx(He,{value:"procedures",className:"mt-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:"Laparoskopische Cholezystektomie"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"15. Januar 2024"})]}),a.jsx(Y,{variant:"default",children:"Chirurgie"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:"Appendektomie"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"12. Januar 2024"})]}),a.jsx(Y,{variant:"default",children:"Chirurgie"})]})]})}),a.jsx(He,{value:"courses",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:"Advanced Laparoscopy Workshop"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"8 CME Punkte • Zürich"})]}),a.jsx(Y,{variant:"secondary",children:"Abgeschlossen"})]})})}),a.jsx(He,{value:"publications",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:Bs.publications.articles.map((l,c)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:l.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.journal," • ",l.date]})]}),a.jsx(Y,{variant:"outline",children:"Artikel"})]},c))})}),a.jsx(He,{value:"awards",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:Bs.awards.items.map((l,c)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-2xl",children:l.icon}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-card-foreground",children:l.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.organization," • ",l.date]})]})]}),a.jsx(Y,{variant:"default",children:"Auszeichnung"})]},c))})})]})]})]})]})},sH=({profile:s,activityData:e,className:t})=>{const[n,r]=j.useState(null),i=()=>{const c=[];return s.public_fields.courses&&(c.push({id:"courses",label:"Kurse",progress:e.courses.total>0?e.courses.completed/e.courses.total*100:0,variant:"coral",icon:tn}),c.push({id:"mandatory",label:"Pflicht",progress:e.courses.mandatory_total>0?e.courses.mandatory_completed/e.courses.mandatory_total*100:0,variant:"lavender",icon:tn})),s.public_fields.procedures&&c.push({id:"procedures",label:"OPs",progress:e.procedures.required>0?e.procedures.completed/e.procedures.required*100:0,variant:"mint",icon:js}),s.public_fields.publications&&c.push({id:"publications",label:"Papers",progress:Math.min(e.publications.count*20,100),variant:"amber",icon:Ns}),c},o=async()=>{navigator.share?await navigator.share({title:`${s.full_name} - Medizinisches Profil`,text:`Schauen Sie sich das medizinische Profil von ${s.full_name} an`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},l=i();return a.jsxs("div",{className:ne("max-w-4xl mx-auto space-y-6",t),children:[a.jsx(G,{className:"overflow-hidden",children:a.jsx("div",{className:"bg-gradient-medical p-6 text-white",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[s.avatar_url&&a.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 overflow-hidden",children:a.jsx("img",{src:s.avatar_url,alt:s.full_name,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:s.full_name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm opacity-90",children:[s.pgy_level&&a.jsxs(Y,{variant:"secondary",className:"bg-white/20 text-white border-white/20",children:["PGY-",s.pgy_level]}),s.specialty&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(js,{className:"w-4 h-4"}),s.specialty]}),s.institution&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(J0,{className:"w-4 h-4"}),s.institution]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(K,{variant:"ghost",size:"sm",onClick:o,className:"text-white hover:bg-white/20",children:a.jsx(pS,{className:"w-4 h-4"})}),s.linkedin_url&&a.jsx(K,{variant:"ghost",size:"sm",asChild:!0,className:"text-white hover:bg-white/20",children:a.jsx("a",{href:s.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:a.jsx(rj,{className:"w-4 h-4"})})})]})]})})}),a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"w-5 h-5 text-medical-primary"}),"Fortschritt ",new Date().getFullYear()]})}),a.jsx(ce,{children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 justify-items-center",children:l.map(c=>a.jsx(kv,{progress:c.progress,variant:c.variant,label:c.label,showPercentage:!0,onClick:()=>r(n===c.id?null:c.id),className:n===c.id?"ring-2 ring-medical-primary rounded-lg p-2":""},c.id))})})]}),n&&a.jsx(G,{children:a.jsxs(ce,{className:"pt-6",children:[n==="courses"&&s.public_fields.courses&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Absolvierte Kurse"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 rounded-lg bg-activity-coral/10 border border-activity-coral/20",children:[a.jsx("div",{className:"text-2xl font-bold text-activity-coral",children:e.courses.completed}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.total," Kursen"]})]}),a.jsxs("div",{className:"p-4 rounded-lg bg-activity-lavender/10 border border-activity-lavender/20",children:[a.jsx("div",{className:"text-2xl font-bold text-activity-lavender",children:e.courses.mandatory_completed}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.mandatory_total," Pflichtkursen"]})]})]})]}),n==="procedures"&&s.public_fields.procedures&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chirurgische Eingriffe"}),a.jsxs("div",{className:"p-4 rounded-lg bg-activity-mint/10 border border-activity-mint/20",children:[a.jsx("div",{className:"text-2xl font-bold text-activity-mint",children:e.procedures.completed}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.procedures.required," erforderlichen Eingriffen"]})]})]}),n==="publications"&&s.public_fields.publications&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publikationen"}),a.jsx("div",{className:"space-y-3",children:e.publications.recent.map((c,d)=>a.jsxs("div",{className:"p-4 rounded-lg bg-activity-amber/10 border border-activity-amber/20",children:[a.jsx("h4",{className:"font-medium text-activity-amber",children:c.title}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[c.journal&&a.jsx("span",{children:c.journal}),c.publication_date&&a.jsxs("span",{className:"ml-2",children:[a.jsx(hs,{className:"w-3 h-3 inline mr-1"}),new Date(c.publication_date).toLocaleDateString("de-DE")]})]}),(c.doi||c.link)&&a.jsxs("div",{className:"mt-2",children:[c.link&&a.jsx(K,{variant:"ghost",size:"sm",asChild:!0,children:a.jsxs("a",{href:c.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(rj,{className:"w-3 h-3 mr-1"}),"Ansehen"]})}),c.doi&&a.jsx(K,{variant:"ghost",size:"sm",asChild:!0,children:a.jsxs("a",{href:`https://doi.org/${c.doi}`,target:"_blank",rel:"noopener noreferrer",children:["DOI: ",c.doi]})})]})]},d))})]})]})}),s.public_fields.awards&&e.awards.length>0&&a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"w-5 h-5 text-progress-complete"}),"Auszeichnungen"]})}),a.jsx(ce,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.awards.map((c,d)=>a.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-activity-amber/20 to-activity-coral/10 border border-activity-amber/30",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(_s,{className:"w-5 h-5 text-activity-amber mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium",children:c.title}),c.organization&&a.jsx("p",{className:"text-sm text-muted-foreground",children:c.organization}),c.awarded_date&&a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(c.awarded_date).toLocaleDateString("de-DE")})]})]})},d))})})]})]})},nH=()=>{const{handle:s}=gR(),[e,t]=j.useState(null),[n,r]=j.useState(null),[i,o]=j.useState(!0),[l,c]=j.useState(!1);return j.useEffect(()=>{(async()=>{if(!s){c(!0),o(!1);return}try{const{data:h,error:f}=await se.from("profiles").select("*").eq("handle",s).eq("is_public",!0).single();if(f||!h){c(!0),o(!1);return}t({...h,public_fields:h.public_fields||{courses:!0,awards:!0,publications:!0,procedures:!1}});const m=new Date().getFullYear(),{data:p}=await se.from("course_enrollments").select(`
            status,
            courses (
              is_mandatory
            )
          `).eq("user_id",h.user_id),x=(p==null?void 0:p.length)||0,v=(p==null?void 0:p.filter(C=>C.status==="completed").length)||0,w=(p==null?void 0:p.filter(C=>{var P;return(P=C.courses)==null?void 0:P.is_mandatory}).length)||0,g=(p==null?void 0:p.filter(C=>{var P;return C.status==="completed"&&((P=C.courses)==null?void 0:P.is_mandatory)}).length)||0,{data:y}=await se.from("procedure_logs").select("*").eq("user_id",h.user_id).gte("performed_date",`${m}-01-01`).lte("performed_date",`${m}-12-31`),{data:b}=await se.from("procedures").select("min_required_by_pgy").eq("active",!0);let _=0;b&&h.pgy_level&&b.forEach(C=>{var T;const P=(T=C.min_required_by_pgy)==null?void 0:T[h.pgy_level.toString()];P&&(_+=P)});const{data:S}=await se.from("publications").select("*").eq("user_id",h.user_id).order("publication_date",{ascending:!1}).limit(5),{data:A}=await se.from("awards").select("*").eq("user_id",h.user_id).order("awarded_date",{ascending:!1});r({courses:{completed:v,total:x,mandatory_completed:g,mandatory_total:w},procedures:{completed:(y==null?void 0:y.length)||0,required:_},publications:{count:(S==null?void 0:S.length)||0,recent:S||[]},awards:A||[]})}catch(h){console.error("Error fetching profile:",h),To({title:"Fehler",description:"Profil konnte nicht geladen werden.",variant:"destructive"}),c(!0)}finally{o(!1)}})()},[s]),i?a.jsx("div",{className:"min-h-screen bg-background",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-32 bg-muted rounded-lg"}),a.jsx("div",{className:"h-64 bg-muted rounded-lg"}),a.jsx("div",{className:"h-48 bg-muted rounded-lg"})]})})})}):l||!e||!n?a.jsx(Kz,{to:"/404",replace:!0}):a.jsx("div",{className:"min-h-screen bg-background",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx(sH,{profile:e,activityData:n})})})},Ee=j.forwardRef(({className:s,type:e,...t},n)=>a.jsx("input",{type:e,className:ne("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));Ee.displayName="Input";function FC(s,[e,t]){return Math.min(t,Math.max(e,s))}var Rw=0;function RS(){j.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??$C()),document.body.insertAdjacentElement("beforeend",s[1]??$C()),Rw++,()=>{Rw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Rw--}},[])}function $C(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Mw="focusScope.autoFocusOnMount",Iw="focusScope.autoFocusOnUnmount",zC={bubbles:!1,cancelable:!0},rH="FocusScope",yb=j.forwardRef((s,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:i,...o}=s,[l,c]=j.useState(null),d=Qn(r),h=Qn(i),f=j.useRef(null),m=lt(e,v=>c(v)),p=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(n){let v=function(b){if(p.paused||!l)return;const _=b.target;l.contains(_)?f.current=_:Eo(f.current,{select:!0})},w=function(b){if(p.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||Eo(f.current,{select:!0}))},g=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Eo(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",w);const y=new MutationObserver(g);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",w),y.disconnect()}}},[n,l,p.paused]),j.useEffect(()=>{if(l){UC.add(p);const v=document.activeElement;if(!l.contains(v)){const g=new CustomEvent(Mw,zC);l.addEventListener(Mw,d),l.dispatchEvent(g),g.defaultPrevented||(iH(dH(mM(l)),{select:!0}),document.activeElement===v&&Eo(l))}return()=>{l.removeEventListener(Mw,d),setTimeout(()=>{const g=new CustomEvent(Iw,zC);l.addEventListener(Iw,h),l.dispatchEvent(g),g.defaultPrevented||Eo(v??document.body,{select:!0}),l.removeEventListener(Iw,h),UC.remove(p)},0)}}},[l,d,h,p]);const x=j.useCallback(v=>{if(!t&&!n||p.paused)return;const w=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,g=document.activeElement;if(w&&g){const y=v.currentTarget,[b,_]=aH(y);b&&_?!v.shiftKey&&g===_?(v.preventDefault(),t&&Eo(b,{select:!0})):v.shiftKey&&g===b&&(v.preventDefault(),t&&Eo(_,{select:!0})):g===y&&v.preventDefault()}},[t,n,p.paused]);return a.jsx(me.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});yb.displayName=rH;function iH(s,{select:e=!1}={}){const t=document.activeElement;for(const n of s)if(Eo(n,{select:e}),document.activeElement!==t)return}function aH(s){const e=mM(s),t=BC(e,s),n=BC(e.reverse(),s);return[t,n]}function mM(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const r=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||r?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function BC(s,e){for(const t of s)if(!oH(t,{upTo:e}))return t}function oH(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function lH(s){return s instanceof HTMLInputElement&&"select"in s}function Eo(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&lH(s)&&e&&s.select()}}var UC=cH();function cH(){let s=[];return{add(e){const t=s[0];e!==t&&(t==null||t.pause()),s=HC(s,e),s.unshift(e)},remove(e){var t;s=HC(s,e),(t=s[0])==null||t.resume()}}}function HC(s,e){const t=[...s],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function dH(s){return s.filter(e=>e.tagName!=="A")}const uH=["top","right","bottom","left"],Hl=Math.min,Hn=Math.max,ry=Math.round,vx=Math.floor,Qi=s=>({x:s,y:s}),hH={left:"right",right:"left",bottom:"top",top:"bottom"},fH={start:"end",end:"start"};function Tj(s,e,t){return Hn(s,Hl(e,t))}function ao(s,e){return typeof s=="function"?s(e):s}function oo(s){return s.split("-")[0]}function nm(s){return s.split("-")[1]}function MS(s){return s==="x"?"y":"x"}function IS(s){return s==="y"?"height":"width"}const mH=new Set(["top","bottom"]);function Gi(s){return mH.has(oo(s))?"y":"x"}function DS(s){return MS(Gi(s))}function pH(s,e,t){t===void 0&&(t=!1);const n=nm(s),r=DS(s),i=IS(r);let o=r==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=iy(o)),[o,iy(o)]}function gH(s){const e=iy(s);return[Rj(s),e,Rj(e)]}function Rj(s){return s.replace(/start|end/g,e=>fH[e])}const WC=["left","right"],VC=["right","left"],vH=["top","bottom"],xH=["bottom","top"];function yH(s,e,t){switch(s){case"top":case"bottom":return t?e?VC:WC:e?WC:VC;case"left":case"right":return e?vH:xH;default:return[]}}function bH(s,e,t,n){const r=nm(s);let i=yH(oo(s),t==="start",n);return r&&(i=i.map(o=>o+"-"+r),e&&(i=i.concat(i.map(Rj)))),i}function iy(s){return s.replace(/left|right|bottom|top/g,e=>hH[e])}function wH(s){return{top:0,right:0,bottom:0,left:0,...s}}function pM(s){return typeof s!="number"?wH(s):{top:s,right:s,bottom:s,left:s}}function ay(s){const{x:e,y:t,width:n,height:r}=s;return{width:n,height:r,top:t,left:e,right:e+n,bottom:t+r,x:e,y:t}}function GC(s,e,t){let{reference:n,floating:r}=s;const i=Gi(e),o=DS(e),l=IS(o),c=oo(e),d=i==="y",h=n.x+n.width/2-r.width/2,f=n.y+n.height/2-r.height/2,m=n[l]/2-r[l]/2;let p;switch(c){case"top":p={x:h,y:n.y-r.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:f};break;case"left":p={x:n.x-r.width,y:f};break;default:p={x:n.x,y:n.y}}switch(nm(e)){case"start":p[o]-=m*(t&&d?-1:1);break;case"end":p[o]+=m*(t&&d?-1:1);break}return p}const jH=async(s,e,t)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:s,floating:e,strategy:r}),{x:h,y:f}=GC(d,n,c),m=n,p={},x=0;for(let v=0;v<l.length;v++){const{name:w,fn:g}=l[v],{x:y,y:b,data:_,reset:S}=await g({x:h,y:f,initialPlacement:n,placement:m,strategy:r,middlewareData:p,rects:d,platform:o,elements:{reference:s,floating:e}});h=y??h,f=b??f,p={...p,[w]:{...p[w],..._}},S&&x<=50&&(x++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:s,floating:e,strategy:r}):S.rects),{x:h,y:f}=GC(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:r,middlewareData:p}};async function Mp(s,e){var t;e===void 0&&(e={});const{x:n,y:r,platform:i,rects:o,elements:l,strategy:c}=s,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:p=0}=ao(e,s),x=pM(p),w=l[m?f==="floating"?"reference":"floating":f],g=ay(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(w)))==null||t?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),y=f==="floating"?{x:n,y:r,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},S=ay(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(g.top-S.top+x.top)/_.y,bottom:(S.bottom-g.bottom+x.bottom)/_.y,left:(g.left-S.left+x.left)/_.x,right:(S.right-g.right+x.right)/_.x}}const _H=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:n,placement:r,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=ao(s,e)||{};if(d==null)return{};const f=pM(h),m={x:t,y:n},p=DS(r),x=IS(p),v=await o.getDimensions(d),w=p==="y",g=w?"top":"left",y=w?"bottom":"right",b=w?"clientHeight":"clientWidth",_=i.reference[x]+i.reference[p]-m[p]-i.floating[x],S=m[p]-i.reference[p],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=A?A[b]:0;(!C||!await(o.isElement==null?void 0:o.isElement(A)))&&(C=l.floating[b]||i.floating[x]);const P=_/2-S/2,T=C/2-v[x]/2-1,O=Hl(f[g],T),z=Hl(f[y],T),F=O,B=C-v[x]-z,I=C/2-v[x]/2+P,H=Tj(F,I,B),$=!c.arrow&&nm(r)!=null&&I!==H&&i.reference[x]/2-(I<F?O:z)-v[x]/2<0,D=$?I<F?I-F:I-B:0;return{[p]:m[p]+D,data:{[p]:H,centerOffset:I-H-D,...$&&{alignmentOffset:D}},reset:$}}}),NH=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,n;const{placement:r,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...w}=ao(s,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const g=oo(r),y=Gi(l),b=oo(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(b||!v?[iy(l)]:gH(l)),A=x!=="none";!m&&A&&S.push(...bH(l,v,x,_));const C=[l,...S],P=await Mp(e,w),T=[];let O=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&T.push(P[g]),f){const I=pH(r,o,_);T.push(P[I[0]],P[I[1]])}if(O=[...O,{placement:r,overflows:T}],!T.every(I=>I<=0)){var z,F;const I=(((z=i.flip)==null?void 0:z.index)||0)+1,H=C[I];if(H&&(!(f==="alignment"?y!==Gi(H):!1)||O.every(M=>M.overflows[0]>0&&Gi(M.placement)===y)))return{data:{index:I,overflows:O},reset:{placement:H}};let $=(F=O.filter(D=>D.overflows[0]<=0).sort((D,M)=>D.overflows[1]-M.overflows[1])[0])==null?void 0:F.placement;if(!$)switch(p){case"bestFit":{var B;const D=(B=O.filter(M=>{if(A){const R=Gi(M.placement);return R===y||R==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(R=>R>0).reduce((R,U)=>R+U,0)]).sort((M,R)=>M[1]-R[1])[0])==null?void 0:B[0];D&&($=D);break}case"initialPlacement":$=l;break}if(r!==$)return{reset:{placement:$}}}return{}}}};function qC(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function KC(s){return uH.some(e=>s[e]>=0)}const SH=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...r}=ao(s,e);switch(n){case"referenceHidden":{const i=await Mp(e,{...r,elementContext:"reference"}),o=qC(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KC(o)}}}case"escaped":{const i=await Mp(e,{...r,altBoundary:!0}),o=qC(i,t.floating);return{data:{escapedOffsets:o,escaped:KC(o)}}}default:return{}}}}},gM=new Set(["left","top"]);async function AH(s,e){const{placement:t,platform:n,elements:r}=s,i=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=oo(t),l=nm(t),c=Gi(t)==="y",d=gM.has(o)?-1:1,h=i&&c?-1:1,f=ao(e,s);let{mainAxis:m,crossAxis:p,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(p=l==="end"?x*-1:x),c?{x:p*h,y:m*d}:{x:m*d,y:p*h}}const EH=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,n;const{x:r,y:i,placement:o,middlewareData:l}=e,c=await AH(e,s);return o===((t=l.offset)==null?void 0:t.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:r+c.x,y:i+c.y,data:{...c,placement:o}}}}},CH=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:n,placement:r}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:g,y}=w;return{x:g,y}}},...c}=ao(s,e),d={x:t,y:n},h=await Mp(e,c),f=Gi(oo(r)),m=MS(f);let p=d[m],x=d[f];if(i){const w=m==="y"?"top":"left",g=m==="y"?"bottom":"right",y=p+h[w],b=p-h[g];p=Tj(y,p,b)}if(o){const w=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=x+h[w],b=x-h[g];x=Tj(y,x,b)}const v=l.fn({...e,[m]:p,[f]:x});return{...v,data:{x:v.x-t,y:v.y-n,enabled:{[m]:i,[f]:o}}}}}},kH=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:n,placement:r,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ao(s,e),h={x:t,y:n},f=Gi(r),m=MS(f);let p=h[m],x=h[f];const v=ao(l,e),w=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=m==="y"?"height":"width",_=i.reference[m]-i.floating[b]+w.mainAxis,S=i.reference[m]+i.reference[b]-w.mainAxis;p<_?p=_:p>S&&(p=S)}if(d){var g,y;const b=m==="y"?"width":"height",_=gM.has(oo(r)),S=i.reference[f]-i.floating[b]+(_&&((g=o.offset)==null?void 0:g[f])||0)+(_?0:w.crossAxis),A=i.reference[f]+i.reference[b]+(_?0:((y=o.offset)==null?void 0:y[f])||0)-(_?w.crossAxis:0);x<S?x=S:x>A&&(x=A)}return{[m]:p,[f]:x}}}},PH=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){var t,n;const{placement:r,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...d}=ao(s,e),h=await Mp(e,d),f=oo(r),m=nm(r),p=Gi(r)==="y",{width:x,height:v}=i.floating;let w,g;f==="top"||f==="bottom"?(w=f,g=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(g=f,w=m==="end"?"top":"bottom");const y=v-h.top-h.bottom,b=x-h.left-h.right,_=Hl(v-h[w],y),S=Hl(x-h[g],b),A=!e.middlewareData.shift;let C=_,P=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(C=y),A&&!m){const O=Hn(h.left,0),z=Hn(h.right,0),F=Hn(h.top,0),B=Hn(h.bottom,0);p?P=x-2*(O!==0||z!==0?O+z:Hn(h.left,h.right)):C=v-2*(F!==0||B!==0?F+B:Hn(h.top,h.bottom))}await c({...e,availableWidth:P,availableHeight:C});const T=await o.getDimensions(l.floating);return x!==T.width||v!==T.height?{reset:{rects:!0}}:{}}}};function bb(){return typeof window<"u"}function rm(s){return vM(s)?(s.nodeName||"").toLowerCase():"#document"}function Kn(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function ra(s){var e;return(e=(vM(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function vM(s){return bb()?s instanceof Node||s instanceof Kn(s).Node:!1}function ri(s){return bb()?s instanceof Element||s instanceof Kn(s).Element:!1}function Zi(s){return bb()?s instanceof HTMLElement||s instanceof Kn(s).HTMLElement:!1}function YC(s){return!bb()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Kn(s).ShadowRoot}const TH=new Set(["inline","contents"]);function Tv(s){const{overflow:e,overflowX:t,overflowY:n,display:r}=ii(s);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!TH.has(r)}const RH=new Set(["table","td","th"]);function MH(s){return RH.has(rm(s))}const IH=[":popover-open",":modal"];function wb(s){return IH.some(e=>{try{return s.matches(e)}catch{return!1}})}const DH=["transform","translate","scale","rotate","perspective"],OH=["transform","translate","scale","rotate","perspective","filter"],LH=["paint","layout","strict","content"];function OS(s){const e=LS(),t=ri(s)?ii(s):s;return DH.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||OH.some(n=>(t.willChange||"").includes(n))||LH.some(n=>(t.contain||"").includes(n))}function FH(s){let e=Wl(s);for(;Zi(e)&&!Wf(e);){if(OS(e))return e;if(wb(e))return null;e=Wl(e)}return null}function LS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $H=new Set(["html","body","#document"]);function Wf(s){return $H.has(rm(s))}function ii(s){return Kn(s).getComputedStyle(s)}function jb(s){return ri(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Wl(s){if(rm(s)==="html")return s;const e=s.assignedSlot||s.parentNode||YC(s)&&s.host||ra(s);return YC(e)?e.host:e}function xM(s){const e=Wl(s);return Wf(e)?s.ownerDocument?s.ownerDocument.body:s.body:Zi(e)&&Tv(e)?e:xM(e)}function Ip(s,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const r=xM(s),i=r===((n=s.ownerDocument)==null?void 0:n.body),o=Kn(r);if(i){const l=Mj(o);return e.concat(o,o.visualViewport||[],Tv(r)?r:[],l&&t?Ip(l):[])}return e.concat(r,Ip(r,[],t))}function Mj(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function yM(s){const e=ii(s);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const r=Zi(s),i=r?s.offsetWidth:t,o=r?s.offsetHeight:n,l=ry(t)!==i||ry(n)!==o;return l&&(t=i,n=o),{width:t,height:n,$:l}}function FS(s){return ri(s)?s:s.contextElement}function uh(s){const e=FS(s);if(!Zi(e))return Qi(1);const t=e.getBoundingClientRect(),{width:n,height:r,$:i}=yM(e);let o=(i?ry(t.width):t.width)/n,l=(i?ry(t.height):t.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const zH=Qi(0);function bM(s){const e=Kn(s);return!LS()||!e.visualViewport?zH:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function BH(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==Kn(s)?!1:e}function Jd(s,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=s.getBoundingClientRect(),i=FS(s);let o=Qi(1);e&&(n?ri(n)&&(o=uh(n)):o=uh(s));const l=BH(i,t,n)?bM(i):Qi(0);let c=(r.left+l.x)/o.x,d=(r.top+l.y)/o.y,h=r.width/o.x,f=r.height/o.y;if(i){const m=Kn(i),p=n&&ri(n)?Kn(n):n;let x=m,v=Mj(x);for(;v&&n&&p!==x;){const w=uh(v),g=v.getBoundingClientRect(),y=ii(v),b=g.left+(v.clientLeft+parseFloat(y.paddingLeft))*w.x,_=g.top+(v.clientTop+parseFloat(y.paddingTop))*w.y;c*=w.x,d*=w.y,h*=w.x,f*=w.y,c+=b,d+=_,x=Kn(v),v=Mj(x)}}return ay({width:h,height:f,x:c,y:d})}function $S(s,e){const t=jb(s).scrollLeft;return e?e.left+t:Jd(ra(s)).left+t}function wM(s,e,t){t===void 0&&(t=!1);const n=s.getBoundingClientRect(),r=n.left+e.scrollLeft-(t?0:$S(s,n)),i=n.top+e.scrollTop;return{x:r,y:i}}function UH(s){let{elements:e,rect:t,offsetParent:n,strategy:r}=s;const i=r==="fixed",o=ra(n),l=e?wb(e.floating):!1;if(n===o||l&&i)return t;let c={scrollLeft:0,scrollTop:0},d=Qi(1);const h=Qi(0),f=Zi(n);if((f||!f&&!i)&&((rm(n)!=="body"||Tv(o))&&(c=jb(n)),Zi(n))){const p=Jd(n);d=uh(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}const m=o&&!f&&!i?wM(o,c,!0):Qi(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:t.y*d.y-c.scrollTop*d.y+h.y+m.y}}function HH(s){return Array.from(s.getClientRects())}function WH(s){const e=ra(s),t=jb(s),n=s.ownerDocument.body,r=Hn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=Hn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-t.scrollLeft+$S(s);const l=-t.scrollTop;return ii(n).direction==="rtl"&&(o+=Hn(e.clientWidth,n.clientWidth)-r),{width:r,height:i,x:o,y:l}}function VH(s,e){const t=Kn(s),n=ra(s),r=t.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;const d=LS();(!d||d&&e==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l,y:c}}const GH=new Set(["absolute","fixed"]);function qH(s,e){const t=Jd(s,!0,e==="fixed"),n=t.top+s.clientTop,r=t.left+s.clientLeft,i=Zi(s)?uh(s):Qi(1),o=s.clientWidth*i.x,l=s.clientHeight*i.y,c=r*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function XC(s,e,t){let n;if(e==="viewport")n=VH(s,t);else if(e==="document")n=WH(ra(s));else if(ri(e))n=qH(e,t);else{const r=bM(s);n={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return ay(n)}function jM(s,e){const t=Wl(s);return t===e||!ri(t)||Wf(t)?!1:ii(t).position==="fixed"||jM(t,e)}function KH(s,e){const t=e.get(s);if(t)return t;let n=Ip(s,[],!1).filter(l=>ri(l)&&rm(l)!=="body"),r=null;const i=ii(s).position==="fixed";let o=i?Wl(s):s;for(;ri(o)&&!Wf(o);){const l=ii(o),c=OS(o);!c&&l.position==="fixed"&&(r=null),(i?!c&&!r:!c&&l.position==="static"&&!!r&&GH.has(r.position)||Tv(o)&&!c&&jM(s,o))?n=n.filter(h=>h!==o):r=l,o=Wl(o)}return e.set(s,n),n}function YH(s){let{element:e,boundary:t,rootBoundary:n,strategy:r}=s;const o=[...t==="clippingAncestors"?wb(e)?[]:KH(e,this._c):[].concat(t),n],l=o[0],c=o.reduce((d,h)=>{const f=XC(e,h,r);return d.top=Hn(f.top,d.top),d.right=Hl(f.right,d.right),d.bottom=Hl(f.bottom,d.bottom),d.left=Hn(f.left,d.left),d},XC(e,l,r));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function XH(s){const{width:e,height:t}=yM(s);return{width:e,height:t}}function QH(s,e,t){const n=Zi(e),r=ra(e),i=t==="fixed",o=Jd(s,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Qi(0);function d(){c.x=$S(r)}if(n||!n&&!i)if((rm(e)!=="body"||Tv(r))&&(l=jb(e)),n){const p=Jd(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else r&&d();i&&!n&&r&&d();const h=r&&!n&&!i?wM(r,l):Qi(0),f=o.left+l.scrollLeft-c.x-h.x,m=o.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:o.width,height:o.height}}function Dw(s){return ii(s).position==="static"}function QC(s,e){if(!Zi(s)||ii(s).position==="fixed")return null;if(e)return e(s);let t=s.offsetParent;return ra(s)===t&&(t=t.ownerDocument.body),t}function _M(s,e){const t=Kn(s);if(wb(s))return t;if(!Zi(s)){let r=Wl(s);for(;r&&!Wf(r);){if(ri(r)&&!Dw(r))return r;r=Wl(r)}return t}let n=QC(s,e);for(;n&&MH(n)&&Dw(n);)n=QC(n,e);return n&&Wf(n)&&Dw(n)&&!OS(n)?t:n||FH(s)||t}const JH=async function(s){const e=this.getOffsetParent||_M,t=this.getDimensions,n=await t(s.floating);return{reference:QH(s.reference,await e(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ZH(s){return ii(s).direction==="rtl"}const eW={convertOffsetParentRelativeRectToViewportRelativeRect:UH,getDocumentElement:ra,getClippingRect:YH,getOffsetParent:_M,getElementRects:JH,getClientRects:HH,getDimensions:XH,getScale:uh,isElement:ri,isRTL:ZH};function NM(s,e){return s.x===e.x&&s.y===e.y&&s.width===e.width&&s.height===e.height}function tW(s,e){let t=null,n;const r=ra(s);function i(){var l;clearTimeout(n),(l=t)==null||l.disconnect(),t=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=s.getBoundingClientRect(),{left:h,top:f,width:m,height:p}=d;if(l||e(),!m||!p)return;const x=vx(f),v=vx(r.clientWidth-(h+m)),w=vx(r.clientHeight-(f+p)),g=vx(h),b={rootMargin:-x+"px "+-v+"px "+-w+"px "+-g+"px",threshold:Hn(0,Hl(1,c))||1};let _=!0;function S(A){const C=A[0].intersectionRatio;if(C!==c){if(!_)return o();C?o(!1,C):n=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!NM(d,s.getBoundingClientRect())&&o(),_=!1}try{t=new IntersectionObserver(S,{...b,root:r.ownerDocument})}catch{t=new IntersectionObserver(S,b)}t.observe(s)}return o(!0),i}function sW(s,e,t,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=FS(s),h=r||i?[...d?Ip(d):[],...Ip(e)]:[];h.forEach(g=>{r&&g.addEventListener("scroll",t,{passive:!0}),i&&g.addEventListener("resize",t)});const f=d&&l?tW(d,t):null;let m=-1,p=null;o&&(p=new ResizeObserver(g=>{let[y]=g;y&&y.target===d&&p&&(p.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),t()}),d&&!c&&p.observe(d),p.observe(e));let x,v=c?Jd(s):null;c&&w();function w(){const g=Jd(s);v&&!NM(v,g)&&t(),v=g,x=requestAnimationFrame(w)}return t(),()=>{var g;h.forEach(y=>{r&&y.removeEventListener("scroll",t),i&&y.removeEventListener("resize",t)}),f==null||f(),(g=p)==null||g.disconnect(),p=null,c&&cancelAnimationFrame(x)}}const nW=EH,rW=CH,iW=NH,aW=PH,oW=SH,JC=_H,lW=kH,cW=(s,e,t)=>{const n=new Map,r={platform:eW,...t},i={...r.platform,_c:n};return jH(s,e,{...r,platform:i})};var dW=typeof document<"u",uW=function(){},Wx=dW?j.useLayoutEffect:uW;function oy(s,e){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(typeof s=="function"&&s.toString()===e.toString())return!0;let t,n,r;if(s&&e&&typeof s=="object"){if(Array.isArray(s)){if(t=s.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!oy(s[n],e[n]))return!1;return!0}if(r=Object.keys(s),t=r.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,r[n]))return!1;for(n=t;n--!==0;){const i=r[n];if(!(i==="_owner"&&s.$$typeof)&&!oy(s[i],e[i]))return!1}return!0}return s!==s&&e!==e}function SM(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function ZC(s,e){const t=SM(s);return Math.round(e*t)/t}function Ow(s){const e=j.useRef(s);return Wx(()=>{e.current=s}),e}function hW(s){s===void 0&&(s={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:r,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=s,[h,f]=j.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[m,p]=j.useState(n);oy(m,n)||p(n);const[x,v]=j.useState(null),[w,g]=j.useState(null),y=j.useCallback(M=>{M!==A.current&&(A.current=M,v(M))},[]),b=j.useCallback(M=>{M!==C.current&&(C.current=M,g(M))},[]),_=i||x,S=o||w,A=j.useRef(null),C=j.useRef(null),P=j.useRef(h),T=c!=null,O=Ow(c),z=Ow(r),F=Ow(d),B=j.useCallback(()=>{if(!A.current||!C.current)return;const M={placement:e,strategy:t,middleware:m};z.current&&(M.platform=z.current),cW(A.current,C.current,M).then(R=>{const U={...R,isPositioned:F.current!==!1};I.current&&!oy(P.current,U)&&(P.current=U,hu.flushSync(()=>{f(U)}))})},[m,e,t,z,F]);Wx(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[d]);const I=j.useRef(!1);Wx(()=>(I.current=!0,()=>{I.current=!1}),[]),Wx(()=>{if(_&&(A.current=_),S&&(C.current=S),_&&S){if(O.current)return O.current(_,S,B);B()}},[_,S,B,O,T]);const H=j.useMemo(()=>({reference:A,floating:C,setReference:y,setFloating:b}),[y,b]),$=j.useMemo(()=>({reference:_,floating:S}),[_,S]),D=j.useMemo(()=>{const M={position:t,left:0,top:0};if(!$.floating)return M;const R=ZC($.floating,h.x),U=ZC($.floating,h.y);return l?{...M,transform:"translate("+R+"px, "+U+"px)",...SM($.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:R,top:U}},[t,l,$.floating,h.x,h.y]);return j.useMemo(()=>({...h,update:B,refs:H,elements:$,floatingStyles:D}),[h,B,H,$,D])}const fW=s=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:s,fn(t){const{element:n,padding:r}=typeof s=="function"?s(t):s;return n&&e(n)?n.current!=null?JC({element:n.current,padding:r}).fn(t):{}:n?JC({element:n,padding:r}).fn(t):{}}}},mW=(s,e)=>({...nW(s),options:[s,e]}),pW=(s,e)=>({...rW(s),options:[s,e]}),gW=(s,e)=>({...lW(s),options:[s,e]}),vW=(s,e)=>({...iW(s),options:[s,e]}),xW=(s,e)=>({...aW(s),options:[s,e]}),yW=(s,e)=>({...oW(s),options:[s,e]}),bW=(s,e)=>({...fW(s),options:[s,e]});var wW="Arrow",AM=j.forwardRef((s,e)=>{const{children:t,width:n=10,height:r=5,...i}=s;return a.jsx(me.svg,{...i,ref:e,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?t:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});AM.displayName=wW;var jW=AM;function _W(s){const[e,t]=j.useState(void 0);return Ht(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const i=r[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=s.offsetWidth,l=s.offsetHeight;t({width:o,height:l})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else t(void 0)},[s]),e}var zS="Popper",[EM,_b]=na(zS),[NW,CM]=EM(zS),kM=s=>{const{__scopePopper:e,children:t}=s,[n,r]=j.useState(null);return a.jsx(NW,{scope:e,anchor:n,onAnchorChange:r,children:t})};kM.displayName=zS;var PM="PopperAnchor",TM=j.forwardRef((s,e)=>{const{__scopePopper:t,virtualRef:n,...r}=s,i=CM(PM,t),o=j.useRef(null),l=lt(e,o);return j.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:a.jsx(me.div,{...r,ref:l})});TM.displayName=PM;var BS="PopperContent",[SW,AW]=EM(BS),RM=j.forwardRef((s,e)=>{var W,pe,je,Te,Re,Oe;const{__scopePopper:t,side:n="bottom",sideOffset:r=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:p="optimized",onPlaced:x,...v}=s,w=CM(BS,t),[g,y]=j.useState(null),b=lt(e,Nt=>y(Nt)),[_,S]=j.useState(null),A=_W(_),C=(A==null?void 0:A.width)??0,P=(A==null?void 0:A.height)??0,T=n+(i!=="center"?"-"+i:""),O=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},z=Array.isArray(d)?d:[d],F=z.length>0,B={padding:O,boundary:z.filter(CW),altBoundary:F},{refs:I,floatingStyles:H,placement:$,isPositioned:D,middlewareData:M}=hW({strategy:"fixed",placement:T,whileElementsMounted:(...Nt)=>sW(...Nt,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[mW({mainAxis:r+P,alignmentAxis:o}),c&&pW({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?gW():void 0,...B}),c&&vW({...B}),xW({...B,apply:({elements:Nt,rects:St,availableWidth:uc,availableHeight:go})=>{const{width:hc,height:am}=St.reference,vu=Nt.floating.style;vu.setProperty("--radix-popper-available-width",`${uc}px`),vu.setProperty("--radix-popper-available-height",`${go}px`),vu.setProperty("--radix-popper-anchor-width",`${hc}px`),vu.setProperty("--radix-popper-anchor-height",`${am}px`)}}),_&&bW({element:_,padding:l}),kW({arrowWidth:C,arrowHeight:P}),m&&yW({strategy:"referenceHidden",...B})]}),[R,U]=DM($),Z=Qn(x);Ht(()=>{D&&(Z==null||Z())},[D,Z]);const L=(W=M.arrow)==null?void 0:W.x,V=(pe=M.arrow)==null?void 0:pe.y,Q=((je=M.arrow)==null?void 0:je.centerOffset)!==0,[J,le]=j.useState();return Ht(()=>{g&&le(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:D?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(Te=M.transformOrigin)==null?void 0:Te.x,(Re=M.transformOrigin)==null?void 0:Re.y].join(" "),...((Oe=M.hide)==null?void 0:Oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:a.jsx(SW,{scope:t,placedSide:R,onArrowChange:S,arrowX:L,arrowY:V,shouldHideArrow:Q,children:a.jsx(me.div,{"data-side":R,"data-align":U,...v,ref:b,style:{...v.style,animation:D?void 0:"none"}})})})});RM.displayName=BS;var MM="PopperArrow",EW={top:"bottom",right:"left",bottom:"top",left:"right"},IM=j.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,i=AW(MM,n),o=EW[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(jW,{...r,ref:t,style:{...r.style,display:"block"}})})});IM.displayName=MM;function CW(s){return s!==null}var kW=s=>({name:"transformOrigin",options:s,fn(e){var w,g,y;const{placement:t,rects:n,middlewareData:r}=e,o=((w=r.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:s.arrowWidth,c=o?0:s.arrowHeight,[d,h]=DM(t),f={start:"0%",center:"50%",end:"100%"}[h],m=(((g=r.arrow)==null?void 0:g.x)??0)+l/2,p=(((y=r.arrow)==null?void 0:y.y)??0)+c/2;let x="",v="";return d==="bottom"?(x=o?f:`${m}px`,v=`${-c}px`):d==="top"?(x=o?f:`${m}px`,v=`${n.floating.height+c}px`):d==="right"?(x=`${-c}px`,v=o?f:`${p}px`):d==="left"&&(x=`${n.floating.width+c}px`,v=o?f:`${p}px`),{data:{x,y:v}}}});function DM(s){const[e,t="center"]=s.split("-");return[e,t]}var OM=kM,US=TM,LM=RM,FM=IM;function PW(s){const e=j.useRef({value:s,previous:s});return j.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var TW=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},Eu=new WeakMap,xx=new WeakMap,yx={},Lw=0,$M=function(s){return s&&(s.host||$M(s.parentNode))},RW=function(s,e){return e.map(function(t){if(s.contains(t))return t;var n=$M(t);return n&&s.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},MW=function(s,e,t,n){var r=RW(e,Array.isArray(s)?s:[s]);yx[t]||(yx[t]=new WeakMap);var i=yx[t],o=[],l=new Set,c=new Set(r),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};r.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var p=m.getAttribute(n),x=p!==null&&p!=="false",v=(Eu.get(m)||0)+1,w=(i.get(m)||0)+1;Eu.set(m,v),i.set(m,w),o.push(m),v===1&&x&&xx.set(m,!0),w===1&&m.setAttribute(t,"true"),x||m.setAttribute(n,"true")}catch(g){console.error("aria-hidden: cannot operate on ",m,g)}})};return h(e),l.clear(),Lw++,function(){o.forEach(function(f){var m=Eu.get(f)-1,p=i.get(f)-1;Eu.set(f,m),i.set(f,p),m||(xx.has(f)||f.removeAttribute(n),xx.delete(f)),p||f.removeAttribute(t)}),Lw--,Lw||(Eu=new WeakMap,Eu=new WeakMap,xx=new WeakMap,yx={})}},HS=function(s,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),r=TW(s);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),MW(n,r,t,"aria-hidden")):function(){return null}},Bi=function(){return Bi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Bi.apply(this,arguments)};function zM(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function IW(s,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,i;n<r;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return s.concat(i||Array.prototype.slice.call(e))}var Vx="right-scroll-bar-position",Gx="width-before-scroll-bar",DW="with-scroll-bars-hidden",OW="--removed-body-scroll-bar-size";function Fw(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function LW(s,e){var t=j.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(n){var r=t.value;r!==n&&(t.value=n,t.callback(n,r))}}}})[0];return t.callback=e,t.facade}var FW=typeof window<"u"?j.useLayoutEffect:j.useEffect,ek=new WeakMap;function $W(s,e){var t=LW(null,function(n){return s.forEach(function(r){return Fw(r,n)})});return FW(function(){var n=ek.get(t);if(n){var r=new Set(n),i=new Set(s),o=t.current;r.forEach(function(l){i.has(l)||Fw(l,null)}),i.forEach(function(l){r.has(l)||Fw(l,o)})}ek.set(t,s)},[s]),t}function zW(s){return s}function BW(s,e){e===void 0&&(e=zW);var t=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(i){var o=e(i,n);return t.push(o),function(){t=t.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;t.length;){var o=t;t=[],o.forEach(i)}t={push:function(l){return i(l)},filter:function(){return t}}},assignMedium:function(i){n=!0;var o=[];if(t.length){var l=t;t=[],l.forEach(i),o=t}var c=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),t}}}};return r}function UW(s){s===void 0&&(s={});var e=BW(null);return e.options=Bi({async:!0,ssr:!1},s),e}var BM=function(s){var e=s.sideCar,t=zM(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return j.createElement(n,Bi({},t))};BM.isSideCarExport=!0;function HW(s,e){return s.useMedium(e),BM}var UM=UW(),$w=function(){},Nb=j.forwardRef(function(s,e){var t=j.useRef(null),n=j.useState({onScrollCapture:$w,onWheelCapture:$w,onTouchMoveCapture:$w}),r=n[0],i=n[1],o=s.forwardProps,l=s.children,c=s.className,d=s.removeScrollBar,h=s.enabled,f=s.shards,m=s.sideCar,p=s.noRelative,x=s.noIsolation,v=s.inert,w=s.allowPinchZoom,g=s.as,y=g===void 0?"div":g,b=s.gapMode,_=zM(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=m,A=$W([t,e]),C=Bi(Bi({},_),r);return j.createElement(j.Fragment,null,h&&j.createElement(S,{sideCar:UM,removeScrollBar:d,shards:f,noRelative:p,noIsolation:x,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:t,gapMode:b}),o?j.cloneElement(j.Children.only(l),Bi(Bi({},C),{ref:A})):j.createElement(y,Bi({},C,{className:c,ref:A}),l))});Nb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Nb.classNames={fullWidth:Gx,zeroRight:Vx};var WW=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VW(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=WW();return e&&s.setAttribute("nonce",e),s}function GW(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function qW(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var KW=function(){var s=0,e=null;return{add:function(t){s==0&&(e=VW())&&(GW(e,t),qW(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},YW=function(){var s=KW();return function(e,t){j.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},HM=function(){var s=YW(),e=function(t){var n=t.styles,r=t.dynamic;return s(n,r),null};return e},XW={left:0,top:0,right:0,gap:0},zw=function(s){return parseInt(s||"",10)||0},QW=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],n=e[s==="padding"?"paddingTop":"marginTop"],r=e[s==="padding"?"paddingRight":"marginRight"];return[zw(t),zw(n),zw(r)]},JW=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return XW;var e=QW(s),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},ZW=HM(),hh="data-scroll-locked",eV=function(s,e,t,n){var r=s.left,i=s.top,o=s.right,l=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(DW,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(hh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vx,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Gx,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Vx," .").concat(Vx,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Gx," .").concat(Gx,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(hh,`] {
    `).concat(OW,": ").concat(l,`px;
  }
`)},tk=function(){var s=parseInt(document.body.getAttribute(hh)||"0",10);return isFinite(s)?s:0},tV=function(){j.useEffect(function(){return document.body.setAttribute(hh,(tk()+1).toString()),function(){var s=tk()-1;s<=0?document.body.removeAttribute(hh):document.body.setAttribute(hh,s.toString())}},[])},sV=function(s){var e=s.noRelative,t=s.noImportant,n=s.gapMode,r=n===void 0?"margin":n;tV();var i=j.useMemo(function(){return JW(r)},[r]);return j.createElement(ZW,{styles:eV(i,!e,r,t?"":"!important")})},Ij=!1;if(typeof window<"u")try{var bx=Object.defineProperty({},"passive",{get:function(){return Ij=!0,!0}});window.addEventListener("test",bx,bx),window.removeEventListener("test",bx,bx)}catch{Ij=!1}var Cu=Ij?{passive:!1}:!1,nV=function(s){return s.tagName==="TEXTAREA"},WM=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!nV(s)&&t[e]==="visible")},rV=function(s){return WM(s,"overflowY")},iV=function(s){return WM(s,"overflowX")},sk=function(s,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=VM(s,n);if(r){var i=GM(s,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},aV=function(s){var e=s.scrollTop,t=s.scrollHeight,n=s.clientHeight;return[e,t,n]},oV=function(s){var e=s.scrollLeft,t=s.scrollWidth,n=s.clientWidth;return[e,t,n]},VM=function(s,e){return s==="v"?rV(e):iV(e)},GM=function(s,e){return s==="v"?aV(e):oV(e)},lV=function(s,e){return s==="h"&&e==="rtl"?-1:1},cV=function(s,e,t,n,r){var i=lV(s,window.getComputedStyle(e).direction),o=i*n,l=t.target,c=e.contains(l),d=!1,h=o>0,f=0,m=0;do{if(!l)break;var p=GM(s,l),x=p[0],v=p[1],w=p[2],g=v-w-i*x;(x||g)&&VM(s,l)&&(f+=g,m+=x);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!r)||!h&&(Math.abs(m)<1||!r))&&(d=!0),d},wx=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},nk=function(s){return[s.deltaX,s.deltaY]},rk=function(s){return s&&"current"in s?s.current:s},dV=function(s,e){return s[0]===e[0]&&s[1]===e[1]},uV=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},hV=0,ku=[];function fV(s){var e=j.useRef([]),t=j.useRef([0,0]),n=j.useRef(),r=j.useState(hV++)[0],i=j.useState(HM)[0],o=j.useRef(s);j.useEffect(function(){o.current=s},[s]),j.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(r));var v=IW([s.lockRef.current],(s.shards||[]).map(rk),!0).filter(Boolean);return v.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),v.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[s.inert,s.lockRef.current,s.shards]);var l=j.useCallback(function(v,w){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var g=wx(v),y=t.current,b="deltaX"in v?v.deltaX:y[0]-g[0],_="deltaY"in v?v.deltaY:y[1]-g[1],S,A=v.target,C=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in v&&C==="h"&&A.type==="range")return!1;var P=sk(C,A);if(!P)return!0;if(P?S=C:(S=C==="v"?"h":"v",P=sk(C,A)),!P)return!1;if(!n.current&&"changedTouches"in v&&(b||_)&&(n.current=S),!S)return!0;var T=n.current||S;return cV(T,w,v,T==="h"?b:_,!0)},[]),c=j.useCallback(function(v){var w=v;if(!(!ku.length||ku[ku.length-1]!==i)){var g="deltaY"in w?nk(w):wx(w),y=e.current.filter(function(S){return S.name===w.type&&(S.target===w.target||w.target===S.shadowParent)&&dV(S.delta,g)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(rk).filter(Boolean).filter(function(S){return S.contains(w.target)}),_=b.length>0?l(w,b[0]):!o.current.noIsolation;_&&w.cancelable&&w.preventDefault()}}},[]),d=j.useCallback(function(v,w,g,y){var b={name:v,delta:w,target:g,should:y,shadowParent:mV(g)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(_){return _!==b})},1)},[]),h=j.useCallback(function(v){t.current=wx(v),n.current=void 0},[]),f=j.useCallback(function(v){d(v.type,nk(v),v.target,l(v,s.lockRef.current))},[]),m=j.useCallback(function(v){d(v.type,wx(v),v.target,l(v,s.lockRef.current))},[]);j.useEffect(function(){return ku.push(i),s.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Cu),document.addEventListener("touchmove",c,Cu),document.addEventListener("touchstart",h,Cu),function(){ku=ku.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,Cu),document.removeEventListener("touchmove",c,Cu),document.removeEventListener("touchstart",h,Cu)}},[]);var p=s.removeScrollBar,x=s.inert;return j.createElement(j.Fragment,null,x?j.createElement(i,{styles:uV(r)}):null,p?j.createElement(sV,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function mV(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const pV=HW(UM,fV);var Sb=j.forwardRef(function(s,e){return j.createElement(Nb,Bi({},s,{ref:e,sideCar:pV}))});Sb.classNames=Nb.classNames;var gV=[" ","Enter","ArrowUp","ArrowDown"],vV=[" ","Enter"],Zd="Select",[Ab,Eb,xV]=oS(Zd),[im,hQ]=na(Zd,[xV,_b]),Cb=_b(),[yV,lc]=im(Zd),[bV,wV]=im(Zd),qM=s=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:r,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:p,form:x}=s,v=Cb(e),[w,g]=j.useState(null),[y,b]=j.useState(null),[_,S]=j.useState(!1),A=PS(d),[C,P]=Qd({prop:n,defaultProp:r??!1,onChange:i,caller:Zd}),[T,O]=Qd({prop:o,defaultProp:l,onChange:c,caller:Zd}),z=j.useRef(null),F=w?x||!!w.closest("form"):!0,[B,I]=j.useState(new Set),H=Array.from(B).map($=>$.props.value).join(";");return a.jsx(OM,{...v,children:a.jsxs(yV,{required:p,scope:e,trigger:w,onTriggerChange:g,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:S,contentId:sn(),value:T,onValueChange:O,open:C,onOpenChange:P,dir:A,triggerPointerDownPosRef:z,disabled:m,children:[a.jsx(Ab.Provider,{scope:e,children:a.jsx(bV,{scope:s.__scopeSelect,onNativeOptionAdd:j.useCallback($=>{I(D=>new Set(D).add($))},[]),onNativeOptionRemove:j.useCallback($=>{I(D=>{const M=new Set(D);return M.delete($),M})},[]),children:t})}),F?a.jsxs(vI,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:$=>O($.target.value),disabled:m,form:x,children:[T===void 0?a.jsx("option",{value:""}):null,Array.from(B)]},H):null]})})};qM.displayName=Zd;var KM="SelectTrigger",YM=j.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:n=!1,...r}=s,i=Cb(t),o=lc(KM,t),l=o.disabled||n,c=lt(e,o.onTriggerChange),d=Eb(t),h=j.useRef("touch"),[f,m,p]=yI(v=>{const w=d().filter(b=>!b.disabled),g=w.find(b=>b.value===o.value),y=bI(w,v,g);y!==void 0&&o.onValueChange(y.value)}),x=v=>{l||(o.onOpenChange(!0),p()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(US,{asChild:!0,...i,children:a.jsx(me.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":xI(o.value)?"":void 0,...r,ref:c,onClick:ve(r.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&x(v)}),onPointerDown:ve(r.onPointerDown,v=>{h.current=v.pointerType;const w=v.target;w.hasPointerCapture(v.pointerId)&&w.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:ve(r.onKeyDown,v=>{const w=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(w&&v.key===" ")&&gV.includes(v.key)&&(x(),v.preventDefault())})})})});YM.displayName=KM;var XM="SelectValue",QM=j.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:r,children:i,placeholder:o="",...l}=s,c=lc(XM,t),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=lt(e,c.onValueNodeChange);return Ht(()=>{d(h)},[d,h]),a.jsx(me.span,{...l,ref:f,style:{pointerEvents:"none"},children:xI(c.value)?a.jsx(a.Fragment,{children:o}):i})});QM.displayName=XM;var jV="SelectIcon",JM=j.forwardRef((s,e)=>{const{__scopeSelect:t,children:n,...r}=s;return a.jsx(me.span,{"aria-hidden":!0,...r,ref:e,children:n||"▼"})});JM.displayName=jV;var _V="SelectPortal",ZM=s=>a.jsx(jv,{asChild:!0,...s});ZM.displayName=_V;var eu="SelectContent",eI=j.forwardRef((s,e)=>{const t=lc(eu,s.__scopeSelect),[n,r]=j.useState();if(Ht(()=>{r(new DocumentFragment)},[]),!t.open){const i=n;return i?hu.createPortal(a.jsx(tI,{scope:s.__scopeSelect,children:a.jsx(Ab.Slot,{scope:s.__scopeSelect,children:a.jsx("div",{children:s.children})})}),i):null}return a.jsx(sI,{...s,ref:e})});eI.displayName=eu;var Tr=10,[tI,cc]=im(eu),NV="SelectContentImpl",SV=Xd("SelectContent.RemoveScroll"),sI=j.forwardRef((s,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:w,...g}=s,y=lc(eu,t),[b,_]=j.useState(null),[S,A]=j.useState(null),C=lt(e,W=>_(W)),[P,T]=j.useState(null),[O,z]=j.useState(null),F=Eb(t),[B,I]=j.useState(!1),H=j.useRef(!1);j.useEffect(()=>{if(b)return HS(b)},[b]),RS();const $=j.useCallback(W=>{const[pe,...je]=F().map(Oe=>Oe.ref.current),[Te]=je.slice(-1),Re=document.activeElement;for(const Oe of W)if(Oe===Re||(Oe==null||Oe.scrollIntoView({block:"nearest"}),Oe===pe&&S&&(S.scrollTop=0),Oe===Te&&S&&(S.scrollTop=S.scrollHeight),Oe==null||Oe.focus(),document.activeElement!==Re))return},[F,S]),D=j.useCallback(()=>$([P,b]),[$,P,b]);j.useEffect(()=>{B&&D()},[B,D]);const{onOpenChange:M,triggerPointerDownPosRef:R}=y;j.useEffect(()=>{if(b){let W={x:0,y:0};const pe=Te=>{var Re,Oe;W={x:Math.abs(Math.round(Te.pageX)-(((Re=R.current)==null?void 0:Re.x)??0)),y:Math.abs(Math.round(Te.pageY)-(((Oe=R.current)==null?void 0:Oe.y)??0))}},je=Te=>{W.x<=10&&W.y<=10?Te.preventDefault():b.contains(Te.target)||M(!1),document.removeEventListener("pointermove",pe),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",je,{capture:!0})}}},[b,M,R]),j.useEffect(()=>{const W=()=>M(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[M]);const[U,Z]=yI(W=>{const pe=F().filter(Re=>!Re.disabled),je=pe.find(Re=>Re.ref.current===document.activeElement),Te=bI(pe,W,je);Te&&setTimeout(()=>Te.ref.current.focus())}),L=j.useCallback((W,pe,je)=>{const Te=!H.current&&!je;(y.value!==void 0&&y.value===pe||Te)&&(T(W),Te&&(H.current=!0))},[y.value]),V=j.useCallback(()=>b==null?void 0:b.focus(),[b]),Q=j.useCallback((W,pe,je)=>{const Te=!H.current&&!je;(y.value!==void 0&&y.value===pe||Te)&&z(W)},[y.value]),J=n==="popper"?Dj:nI,le=J===Dj?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:x,hideWhenDetached:v,avoidCollisions:w}:{};return a.jsx(tI,{scope:t,content:b,viewport:S,onViewportChange:A,itemRefCallback:L,selectedItem:P,onItemLeave:V,itemTextRefCallback:Q,focusSelectedItem:D,selectedItemText:O,position:n,isPositioned:B,searchRef:U,children:a.jsx(Sb,{as:SV,allowPinchZoom:!0,children:a.jsx(yb,{asChild:!0,trapped:y.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:ve(r,W=>{var pe;(pe=y.trigger)==null||pe.focus({preventScroll:!0}),W.preventDefault()}),children:a.jsx(wv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(J,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:W=>W.preventDefault(),...g,...le,onPlaced:()=>I(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:ve(g.onKeyDown,W=>{const pe=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!pe&&W.key.length===1&&Z(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let Te=F().filter(Re=>!Re.disabled).map(Re=>Re.ref.current);if(["ArrowUp","End"].includes(W.key)&&(Te=Te.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const Re=W.target,Oe=Te.indexOf(Re);Te=Te.slice(Oe+1)}setTimeout(()=>$(Te)),W.preventDefault()}})})})})})})});sI.displayName=NV;var AV="SelectItemAlignedPosition",nI=j.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:n,...r}=s,i=lc(eu,t),o=cc(eu,t),[l,c]=j.useState(null),[d,h]=j.useState(null),f=lt(e,C=>h(C)),m=Eb(t),p=j.useRef(!1),x=j.useRef(!0),{viewport:v,selectedItem:w,selectedItemText:g,focusSelectedItem:y}=o,b=j.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&w&&g){const C=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),O=g.getBoundingClientRect();if(i.dir!=="rtl"){const Re=O.left-P.left,Oe=T.left-Re,Nt=C.left-Oe,St=C.width+Nt,uc=Math.max(St,P.width),go=window.innerWidth-Tr,hc=FC(Oe,[Tr,Math.max(Tr,go-uc)]);l.style.minWidth=St+"px",l.style.left=hc+"px"}else{const Re=P.right-O.right,Oe=window.innerWidth-T.right-Re,Nt=window.innerWidth-C.right-Oe,St=C.width+Nt,uc=Math.max(St,P.width),go=window.innerWidth-Tr,hc=FC(Oe,[Tr,Math.max(Tr,go-uc)]);l.style.minWidth=St+"px",l.style.right=hc+"px"}const z=m(),F=window.innerHeight-Tr*2,B=v.scrollHeight,I=window.getComputedStyle(d),H=parseInt(I.borderTopWidth,10),$=parseInt(I.paddingTop,10),D=parseInt(I.borderBottomWidth,10),M=parseInt(I.paddingBottom,10),R=H+$+B+M+D,U=Math.min(w.offsetHeight*5,R),Z=window.getComputedStyle(v),L=parseInt(Z.paddingTop,10),V=parseInt(Z.paddingBottom,10),Q=C.top+C.height/2-Tr,J=F-Q,le=w.offsetHeight/2,W=w.offsetTop+le,pe=H+$+W,je=R-pe;if(pe<=Q){const Re=z.length>0&&w===z[z.length-1].ref.current;l.style.bottom="0px";const Oe=d.clientHeight-v.offsetTop-v.offsetHeight,Nt=Math.max(J,le+(Re?V:0)+Oe+D),St=pe+Nt;l.style.height=St+"px"}else{const Re=z.length>0&&w===z[0].ref.current;l.style.top="0px";const Nt=Math.max(Q,H+v.offsetTop+(Re?L:0)+le)+je;l.style.height=Nt+"px",v.scrollTop=pe-Q+v.offsetTop}l.style.margin=`${Tr}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=F+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,w,g,i.dir,n]);Ht(()=>b(),[b]);const[_,S]=j.useState();Ht(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const A=j.useCallback(C=>{C&&x.current===!0&&(b(),y==null||y(),x.current=!1)},[b,y]);return a.jsx(CV,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:A,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:a.jsx(me.div,{...r,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});nI.displayName=AV;var EV="SelectPopperPosition",Dj=j.forwardRef((s,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:r=Tr,...i}=s,o=Cb(t);return a.jsx(LM,{...o,...i,ref:e,align:n,collisionPadding:r,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dj.displayName=EV;var[CV,WS]=im(eu,{}),Oj="SelectViewport",rI=j.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:n,...r}=s,i=cc(Oj,t),o=WS(Oj,t),l=lt(e,i.onViewportChange),c=j.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),a.jsx(Ab.Slot,{scope:t,children:a.jsx(me.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ve(r.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const p=Math.abs(c.current-h.scrollTop);if(p>0){const x=window.innerHeight-Tr*2,v=parseFloat(f.style.minHeight),w=parseFloat(f.style.height),g=Math.max(v,w);if(g<x){const y=g+p,b=Math.min(x,y),_=y-b;f.style.height=b+"px",f.style.bottom==="0px"&&(h.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});rI.displayName=Oj;var iI="SelectGroup",[kV,PV]=im(iI),TV=j.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=sn();return a.jsx(kV,{scope:t,id:r,children:a.jsx(me.div,{role:"group","aria-labelledby":r,...n,ref:e})})});TV.displayName=iI;var aI="SelectLabel",oI=j.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=PV(aI,t);return a.jsx(me.div,{id:r.id,...n,ref:e})});oI.displayName=aI;var ly="SelectItem",[RV,lI]=im(ly),cI=j.forwardRef((s,e)=>{const{__scopeSelect:t,value:n,disabled:r=!1,textValue:i,...o}=s,l=lc(ly,t),c=cc(ly,t),d=l.value===n,[h,f]=j.useState(i??""),[m,p]=j.useState(!1),x=lt(e,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,n,r)}),v=sn(),w=j.useRef("touch"),g=()=>{r||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(RV,{scope:t,value:n,disabled:r,textId:v,isSelected:d,onItemTextChange:j.useCallback(y=>{f(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(Ab.ItemSlot,{scope:t,value:n,disabled:r,textValue:h,children:a.jsx(me.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:x,onFocus:ve(o.onFocus,()=>p(!0)),onBlur:ve(o.onBlur,()=>p(!1)),onClick:ve(o.onClick,()=>{w.current!=="mouse"&&g()}),onPointerUp:ve(o.onPointerUp,()=>{w.current==="mouse"&&g()}),onPointerDown:ve(o.onPointerDown,y=>{w.current=y.pointerType}),onPointerMove:ve(o.onPointerMove,y=>{var b;w.current=y.pointerType,r?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ve(o.onKeyDown,y=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&y.key===" "||(vV.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})})})})});cI.displayName=ly;var Pm="SelectItemText",dI=j.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:r,...i}=s,o=lc(Pm,t),l=cc(Pm,t),c=lI(Pm,t),d=wV(Pm,t),[h,f]=j.useState(null),m=lt(e,g=>f(g),c.onItemTextChange,g=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,g,c.value,c.disabled)}),p=h==null?void 0:h.textContent,x=j.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:v,onNativeOptionRemove:w}=d;return Ht(()=>(v(x),()=>w(x)),[v,w,x]),a.jsxs(a.Fragment,{children:[a.jsx(me.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?hu.createPortal(i.children,o.valueNode):null]})});dI.displayName=Pm;var uI="SelectItemIndicator",hI=j.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return lI(uI,t).isSelected?a.jsx(me.span,{"aria-hidden":!0,...n,ref:e}):null});hI.displayName=uI;var Lj="SelectScrollUpButton",fI=j.forwardRef((s,e)=>{const t=cc(Lj,s.__scopeSelect),n=WS(Lj,s.__scopeSelect),[r,i]=j.useState(!1),o=lt(e,n.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?a.jsx(pI,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});fI.displayName=Lj;var Fj="SelectScrollDownButton",mI=j.forwardRef((s,e)=>{const t=cc(Fj,s.__scopeSelect),n=WS(Fj,s.__scopeSelect),[r,i]=j.useState(!1),o=lt(e,n.onScrollButtonChange);return Ht(()=>{if(t.viewport&&t.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?a.jsx(pI,{...s,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});mI.displayName=Fj;var pI=j.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:n,...r}=s,i=cc("SelectScrollButton",t),o=j.useRef(null),l=Eb(t),c=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),Ht(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(me.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ve(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:ve(r.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:ve(r.onPointerLeave,()=>{c()})})}),MV="SelectSeparator",gI=j.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return a.jsx(me.div,{"aria-hidden":!0,...n,ref:e})});gI.displayName=MV;var $j="SelectArrow",IV=j.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,r=Cb(t),i=lc($j,t),o=cc($j,t);return i.open&&o.position==="popper"?a.jsx(FM,{...r,...n,ref:e}):null});IV.displayName=$j;var DV="SelectBubbleInput",vI=j.forwardRef(({__scopeSelect:s,value:e,...t},n)=>{const r=j.useRef(null),i=lt(n,r),o=PW(e);return j.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(me.select,{...t,style:{...xT,...t.style},ref:i,defaultValue:e})});vI.displayName=DV;function xI(s){return s===""||s===void 0}function yI(s){const e=Qn(s),t=j.useRef(""),n=j.useRef(0),r=j.useCallback(o=>{const l=t.current+o;e(l),function c(d){t.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=j.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,r,i]}function bI(s,e,t){const r=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=t?s.indexOf(t):-1;let o=OV(s,Math.max(i,0));r.length===1&&(o=o.filter(d=>d!==t));const c=o.find(d=>d.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function OV(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var LV=qM,wI=YM,FV=QM,$V=JM,zV=ZM,jI=eI,BV=rI,_I=oI,NI=cI,UV=dI,HV=hI,SI=fI,AI=mI,EI=gI;const Qt=LV,Jt=FV,$t=j.forwardRef(({className:s,children:e,...t},n)=>a.jsxs(wI,{ref:n,className:ne("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[e,a.jsx($V,{asChild:!0,children:a.jsx(HT,{className:"h-4 w-4 opacity-50"})})]}));$t.displayName=wI.displayName;const CI=j.forwardRef(({className:s,...e},t)=>a.jsx(SI,{ref:t,className:ne("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(r$,{className:"h-4 w-4"})}));CI.displayName=SI.displayName;const kI=j.forwardRef(({className:s,...e},t)=>a.jsx(AI,{ref:t,className:ne("flex cursor-default items-center justify-center py-1",s),...e,children:a.jsx(HT,{className:"h-4 w-4"})}));kI.displayName=AI.displayName;const zt=j.forwardRef(({className:s,children:e,position:t="popper",...n},r)=>a.jsx(zV,{children:a.jsxs(jI,{ref:r,className:ne("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[a.jsx(CI,{}),a.jsx(BV,{className:ne("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(kI,{})]})}));zt.displayName=jI.displayName;const WV=j.forwardRef(({className:s,...e},t)=>a.jsx(_I,{ref:t,className:ne("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...e}));WV.displayName=_I.displayName;const ye=j.forwardRef(({className:s,children:e,...t},n)=>a.jsxs(NI,{ref:n,className:ne("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(HV,{children:a.jsx(UT,{className:"h-4 w-4"})})}),a.jsx(UV,{children:e})]}));ye.displayName=NI.displayName;const VV=j.forwardRef(({className:s,...e},t)=>a.jsx(EI,{ref:t,className:ne("-mx-1 my-1 h-px bg-muted",s),...e}));VV.displayName=EI.displayName;var kb="Dialog",[PI,fQ]=na(kb),[GV,di]=PI(kb),TI=s=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:r,onOpenChange:i,modal:o=!0}=s,l=j.useRef(null),c=j.useRef(null),[d,h]=Qd({prop:n,defaultProp:r??!1,onChange:i,caller:kb});return a.jsx(GV,{scope:e,triggerRef:l,contentRef:c,contentId:sn(),titleId:sn(),descriptionId:sn(),open:d,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(f=>!f),[h]),modal:o,children:t})};TI.displayName=kb;var RI="DialogTrigger",MI=j.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=di(RI,t),i=lt(e,r.triggerRef);return a.jsx(me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":qS(r.open),...n,ref:i,onClick:ve(s.onClick,r.onOpenToggle)})});MI.displayName=RI;var VS="DialogPortal",[qV,II]=PI(VS,{forceMount:void 0}),DI=s=>{const{__scopeDialog:e,forceMount:t,children:n,container:r}=s,i=di(VS,e);return a.jsx(qV,{scope:e,forceMount:t,children:j.Children.map(n,o=>a.jsx(nc,{present:t||i.open,children:a.jsx(jv,{asChild:!0,container:r,children:o})}))})};DI.displayName=VS;var cy="DialogOverlay",OI=j.forwardRef((s,e)=>{const t=II(cy,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,i=di(cy,s.__scopeDialog);return i.modal?a.jsx(nc,{present:n||i.open,children:a.jsx(YV,{...r,ref:e})}):null});OI.displayName=cy;var KV=Xd("DialogOverlay.RemoveScroll"),YV=j.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=di(cy,t);return a.jsx(Sb,{as:KV,allowPinchZoom:!0,shards:[r.contentRef],children:a.jsx(me.div,{"data-state":qS(r.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),tu="DialogContent",LI=j.forwardRef((s,e)=>{const t=II(tu,s.__scopeDialog),{forceMount:n=t.forceMount,...r}=s,i=di(tu,s.__scopeDialog);return a.jsx(nc,{present:n||i.open,children:i.modal?a.jsx(XV,{...r,ref:e}):a.jsx(QV,{...r,ref:e})})});LI.displayName=tu;var XV=j.forwardRef((s,e)=>{const t=di(tu,s.__scopeDialog),n=j.useRef(null),r=lt(e,t.contentRef,n);return j.useEffect(()=>{const i=n.current;if(i)return HS(i)},[]),a.jsx(FI,{...s,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(s.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ve(s.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ve(s.onFocusOutside,i=>i.preventDefault())})}),QV=j.forwardRef((s,e)=>{const t=di(tu,s.__scopeDialog),n=j.useRef(!1),r=j.useRef(!1);return a.jsx(FI,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(n.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=s.onInteractOutside)==null||c.call(s,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),FI=j.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,...o}=s,l=di(tu,t),c=j.useRef(null),d=lt(e,c);return RS(),a.jsxs(a.Fragment,{children:[a.jsx(yb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(wv,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":qS(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(JV,{titleId:l.titleId}),a.jsx(e7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),GS="DialogTitle",$I=j.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=di(GS,t);return a.jsx(me.h2,{id:r.titleId,...n,ref:e})});$I.displayName=GS;var zI="DialogDescription",BI=j.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=di(zI,t);return a.jsx(me.p,{id:r.descriptionId,...n,ref:e})});BI.displayName=zI;var UI="DialogClose",HI=j.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,r=di(UI,t);return a.jsx(me.button,{type:"button",...n,ref:e,onClick:ve(s.onClick,()=>r.onOpenChange(!1))})});HI.displayName=UI;function qS(s){return s?"open":"closed"}var WI="DialogTitleWarning",[mQ,VI]=c5(WI,{contentName:tu,titleName:GS,docsSlug:"dialog"}),JV=({titleId:s})=>{const e=VI(WI),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return j.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},ZV="DialogDescriptionWarning",e7=({contentRef:s,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VI(ZV).contentName}}.`;return j.useEffect(()=>{var i;const r=(i=s.current)==null?void 0:i.getAttribute("aria-describedby");e&&r&&(document.getElementById(e)||console.warn(n))},[n,s,e]),null},GI=TI,t7=MI,qI=DI,KS=OI,YS=LI,KI=$I,YI=BI,s7=HI;const Vl=GI,zj=t7,n7=qI,XI=j.forwardRef(({className:s,...e},t)=>a.jsx(KS,{ref:t,className:ne("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...e}));XI.displayName=KS.displayName;const lo=j.forwardRef(({className:s,children:e,...t},n)=>a.jsxs(n7,{children:[a.jsx(XI,{}),a.jsxs(YS,{ref:n,className:ne("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[e,a.jsxs(s7,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(ic,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lo.displayName=YS.displayName;const co=({className:s,...e})=>a.jsx("div",{className:ne("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});co.displayName="DialogHeader";const uo=j.forwardRef(({className:s,...e},t)=>a.jsx(KI,{ref:t,className:ne("text-lg font-semibold leading-none tracking-tight",s),...e}));uo.displayName=KI.displayName;const Bj=j.forwardRef(({className:s,...e},t)=>a.jsx(YI,{ref:t,className:ne("text-sm text-muted-foreground",s),...e}));Bj.displayName=YI.displayName;var r7="Label",QI=j.forwardRef((s,e)=>a.jsx(me.label,{...s,ref:e,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||((r=s.onMouseDown)==null||r.call(s,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));QI.displayName=r7;var JI=QI;const i7=Nv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),he=j.forwardRef(({className:s,...e},t)=>a.jsx(JI,{ref:t,className:ne(i7(),s),...e}));he.displayName=JI.displayName;const Gl=j.forwardRef(({className:s,...e},t)=>a.jsx("textarea",{className:ne("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...e}));Gl.displayName="Textarea";const ik=({onCourseAdded:s})=>{const{user:e}=ci(),[t,n]=j.useState(!1),[r,i]=j.useState(!1),[o,l]=j.useState({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),c=["Chirurgie","Notfallmedizin","Radiologie","Anästhesie","Innere Medizin","Pädiatrie","Gynäkologie","Orthopädie","Urologie","Dermatologie","Neurologie","Psychiatrie","Ethik","Kommunikation","Forschung","Digital Health","Qualitätsmanagement","Grundlagen","Sonstiges"],d=(f,m)=>{l(p=>({...p,[f]:m}))},h=async f=>{if(f.preventDefault(),!e){Ie.error("Sie müssen angemeldet sein, um Kurse hinzuzufügen");return}i(!0);try{const m={...o,user_id:e.id,points:Number(o.points),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:p,error:x}=await se.from("user_courses").insert([m]).select().single();if(x)throw x;Ie.success("Kurs erfolgreich hinzugefügt!"),n(!1),l({title:"",description:"",date:"",location:"",duration:"",type:"optional",status:"completed",points:0,category:"",provider:"",certificate_url:""}),s&&s(p)}catch(m){console.error("Error adding course:",m),Ie.error("Fehler beim Hinzufügen des Kurses")}finally{i(!1)}};return a.jsxs(Vl,{open:t,onOpenChange:n,children:[a.jsx(zj,{asChild:!0,children:a.jsxs(K,{className:"gap-2",children:[a.jsx(Qf,{className:"w-4 h-4"}),"Kurs hinzufügen"]})}),a.jsxs(lo,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(co,{children:a.jsxs(uo,{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"w-5 h-5"}),"Neuen Kurs hinzufügen"]})}),a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"title",children:"Kurs-Titel *"}),a.jsx(Ee,{id:"title",value:o.title,onChange:f=>d("title",f.target.value),placeholder:"z.B. Advanced Laparoscopy Workshop",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"category",children:"Kategorie *"}),a.jsxs(Qt,{value:o.category,onValueChange:f=>d("category",f),children:[a.jsx($t,{children:a.jsx(Jt,{placeholder:"Kategorie wählen"})}),a.jsx(zt,{children:c.map(f=>a.jsx(ye,{value:f,children:f},f))})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"description",children:"Beschreibung"}),a.jsx(Gl,{id:"description",value:o.description,onChange:f=>d("description",f.target.value),placeholder:"Kurze Beschreibung des Kurses...",rows:3})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"date",children:"Datum *"}),a.jsx(Ee,{id:"date",type:"date",value:o.date,onChange:f=>d("date",f.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"location",children:"Ort"}),a.jsx(Ee,{id:"location",value:o.location,onChange:f=>d("location",f.target.value),placeholder:"z.B. Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"duration",children:"Dauer"}),a.jsx(Ee,{id:"duration",value:o.duration,onChange:f=>d("duration",f.target.value),placeholder:"z.B. 2 Tage"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"type",children:"Typ *"}),a.jsxs(Qt,{value:o.type,onValueChange:f=>d("type",f),children:[a.jsx($t,{children:a.jsx(Jt,{})}),a.jsxs(zt,{children:[a.jsx(ye,{value:"required",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Bf,{className:"w-4 h-4 text-yellow-500"}),"Pflichtkurs"]})}),a.jsx(ye,{value:"optional",children:"Optional"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"status",children:"Status *"}),a.jsxs(Qt,{value:o.status,onValueChange:f=>d("status",f),children:[a.jsx($t,{children:a.jsx(Jt,{})}),a.jsxs(zt,{children:[a.jsx(ye,{value:"completed",children:"Abgeschlossen"}),a.jsx(ye,{value:"in-progress",children:"Läuft"}),a.jsx(ye,{value:"upcoming",children:"Geplant"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"points",children:"CME Punkte"}),a.jsx(Ee,{id:"points",type:"number",min:"0",max:"50",value:o.points,onChange:f=>d("points",Number(f.target.value)),placeholder:"0"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"provider",children:"Anbieter"}),a.jsx(Ee,{id:"provider",value:o.provider,onChange:f=>d("provider",f.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"certificate_url",children:"Zertifikat URL"}),a.jsx(Ee,{id:"certificate_url",type:"url",value:o.certificate_url,onChange:f=>d("certificate_url",f.target.value),placeholder:"https://..."})]})]}),a.jsxs(G,{className:"border-dashed",children:[a.jsx(Ae,{children:a.jsx(ke,{className:"text-sm",children:"Vorschau"})}),a.jsx(ce,{children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.type==="required"&&a.jsx(Bf,{className:"w-4 h-4 text-yellow-500 fill-current"}),a.jsx("h3",{className:`font-semibold ${o.type==="required"?"font-bold":"font-medium"}`,children:o.title||"Kurs-Titel"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.category||"Kategorie"}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[o.date&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(hs,{className:"w-4 h-4"}),a.jsx("span",{children:new Date(o.date).toLocaleDateString("de-DE")})]}),o.location&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zf,{className:"w-4 h-4"}),a.jsx("span",{children:o.location})]}),o.duration&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rc,{className:"w-4 h-4"}),a.jsx("span",{children:o.duration})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsx(Y,{variant:o.status==="completed"?"default":"outline",children:o.status==="completed"?"Abgeschlossen":o.status==="in-progress"?"Läuft":"Geplant"}),o.points>0&&a.jsxs(Y,{variant:"secondary",className:"text-xs",children:[o.points," CME"]})]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsxs(K,{type:"button",variant:"outline",onClick:()=>n(!1),children:[a.jsx(ic,{className:"w-4 h-4 mr-2"}),"Abbrechen"]}),a.jsx(K,{type:"submit",disabled:r||!o.title||!o.date,children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Speichern..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fS,{className:"w-4 h-4 mr-2"}),"Speichern"]})})]})]})]})]})};function a7(){const{user:s}=ci(),[e,t]=lB(),[n,r]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(!0),[d,h]=j.useState(e.get("search")||""),[f,m]=j.useState(e.get("country")||""),[p,x]=j.useState(e.get("specialty")||""),[v,w]=j.useState(e.get("modality")||""),[g,y]=j.useState(e.get("price")||""),[b,_]=j.useState("grid"),[S,A]=j.useState("available"),C=["Switzerland","Germany","Austria","France","Italy"],P=["Cardiology","Surgery","Neurology","Radiology","Emergency Medicine","Internal Medicine"],T=["Online","In-Person","Hybrid"],O=[{label:"Free",value:"0"},{label:"Under 100 CHF",value:"0-100"},{label:"100-500 CHF",value:"100-500"},{label:"500-1000 CHF",value:"500-1000"},{label:"Over 1000 CHF",value:"1000+"}];j.useEffect(()=>{let R=!0;return(async()=>{R&&(await z(),s&&R&&await F())})(),()=>{R=!1}},[s]);const z=j.useCallback(async()=>{c(!0);try{let R=se.from("courses").select("*").eq("status","published").order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});if(d&&(R=R.or(`title.ilike.%${d}%,description.ilike.%${d}%`)),f&&(R=R.eq("country",f)),p&&(R=R.eq("specialty",p)),v&&(R=R.eq("modality",v)),g)if(g==="0")R=R.eq("price",0);else if(g.includes("-")){const[L,V]=g.split("-").map(Number);R=R.gte("price",L).lte("price",V)}else g==="1000+"&&(R=R.gte("price",1e3));const{data:U,error:Z}=await R;if(Z)throw Z;r(U||[])}catch(R){console.error("Error fetching courses:",R),r([{id:"demo-1",title:"Suturing Basics",description:"Grundlagen der Nahttechniken",price:0,currency:"CHF",modality:"In-Person",city:"Zürich",country:"Switzerland",specialty:"Surgery",language:"DE",difficulty_level:"Beginner",tags:["Hands-on","Workshop"],average_rating:4.5,total_reviews:12,is_featured:!0,cover_image_url:"",cme_points:4,points:0,capacity:20,has_certificate:!0,provider_id:"demo"}])}finally{c(!1)}},[d,f,p,v,g]),F=j.useCallback(async()=>{if(s)try{const{data:R,error:U}=await se.from("user_courses").select("*").eq("user_id",s.id).order("date",{ascending:!1});if(U)throw U;o(R||[])}catch(R){console.error("Error fetching user courses:",R)}},[s]),B=R=>{o(U=>[R,...U])},I=(R,U)=>{const Z=new URLSearchParams(e);U?Z.set(R,U):Z.delete(R),t(Z)},H=()=>{h(""),m(""),x(""),w(""),y(""),t({})},$=(R,U)=>R===0?"Free":`${R} ${U}`,D=R=>Array.from({length:5},(U,Z)=>a.jsx(Bf,{className:`h-4 w-4 ${Z<Math.floor(R)?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`},Z)),M=({course:R})=>a.jsxs(G,{className:"group hover:shadow-lg transition-all duration-200 border-accent/20",children:[R.is_featured&&a.jsx("div",{className:"bg-gradient-to-r from-medical-primary to-swiss-blue text-white text-xs px-2 py-1 rounded-t-md font-medium",children:"Featured Course"}),a.jsxs("div",{className:"relative overflow-hidden rounded-t-md",children:[R.cover_image_url?a.jsx("img",{src:R.cover_image_url,alt:R.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200"}):a.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 flex items-center justify-center",children:a.jsx("div",{className:"text-6xl text-medical-primary opacity-30",children:"📚"})}),R.modality&&a.jsx(Y,{variant:"secondary",className:"absolute top-2 left-2 bg-background/90 backdrop-blur-sm",children:R.modality})]}),a.jsxs(Ae,{className:"pb-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(ke,{className:"text-lg font-semibold group-hover:text-medical-primary transition-colors line-clamp-2",children:R.title}),R.has_certificate&&a.jsx(Y,{variant:"outline",className:"shrink-0 text-xs",children:"Certificate"})]}),a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[D(R.average_rating),a.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["(",R.total_reviews," reviews)"]})]})]}),a.jsxs(ce,{className:"pb-2",children:[a.jsx(Qr,{className:"line-clamp-2 mb-3",children:R.description}),a.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[R.city&&R.country&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zf,{className:"h-4 w-4"}),a.jsxs("span",{children:[R.city,", ",R.country]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[R.cme_points>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rc,{className:"h-4 w-4"}),a.jsxs("span",{children:[R.cme_points," CME"]})]}),R.capacity&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(xr,{className:"h-4 w-4"}),a.jsxs("span",{children:["Max ",R.capacity]})]})]})]}),R.tags&&R.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[R.tags.slice(0,3).map((U,Z)=>a.jsx(Y,{variant:"outline",className:"text-xs",children:U},Z)),R.tags.length>3&&a.jsxs(Y,{variant:"outline",className:"text-xs",children:["+",R.tags.length-3]})]})]}),a.jsx(WR,{className:"pt-0",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsx("div",{className:"text-2xl font-bold text-medical-primary",children:$(R.price,R.currency)}),a.jsx(cs,{to:`/courses/${R.id}`,children:a.jsx(K,{variant:"medical",size:"sm",children:"View Details"})})]})})]});return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Medizinische Kurse"}),a.jsx("p",{className:"text-muted-foreground",children:"Entdecken Sie FMH-konforme Fortbildungsmöglichkeiten"})]}),a.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[s&&a.jsx(ik,{onCourseAdded:B}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(d$,{className:"w-4 h-4"}),"Filter"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(hs,{className:"w-4 h-4"}),"Kalender"]})]})]}),a.jsxs(_r,{value:S,onValueChange:R=>A(R),className:"mb-8",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-2",children:[a.jsx(Ue,{value:"available",children:"Verfügbare Kurse"}),a.jsxs(Ue,{value:"my-courses",children:["Meine Kurse (",i.length,")"]})]}),a.jsxs(He,{value:"available",className:"mt-6",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(mS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),a.jsx(Ee,{placeholder:"Search courses...",value:d,onChange:R=>{h(R.target.value),I("search",R.target.value)},className:"pl-10"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs(Qt,{value:f,onValueChange:R=>{m(R),I("country",R)},children:[a.jsx($t,{className:"w-[150px]",children:a.jsx(Jt,{placeholder:"Country"})}),a.jsx(zt,{children:C.map(R=>a.jsx(ye,{value:R,children:R},R))})]}),a.jsxs(Qt,{value:p,onValueChange:R=>{x(R),I("specialty",R)},children:[a.jsx($t,{className:"w-[150px]",children:a.jsx(Jt,{placeholder:"Specialty"})}),a.jsx(zt,{children:P.map(R=>a.jsx(ye,{value:R,children:R},R))})]}),a.jsxs(Qt,{value:v,onValueChange:R=>{w(R),I("modality",R)},children:[a.jsx($t,{className:"w-[120px]",children:a.jsx(Jt,{placeholder:"Format"})}),a.jsx(zt,{children:T.map(R=>a.jsx(ye,{value:R,children:R},R))})]}),a.jsxs(Qt,{value:g,onValueChange:R=>{y(R),I("price",R)},children:[a.jsx($t,{className:"w-[140px]",children:a.jsx(Jt,{placeholder:"Price Range"})}),a.jsx(zt,{children:O.map(R=>a.jsx(ye,{value:R.value,children:R.label},R.value))})]}),(d||f||p||v||g)&&a.jsx(K,{variant:"outline",onClick:H,size:"sm",children:"Clear Filters"})]})]})}),a.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[a.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Course Marketplace",!l&&a.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",n.length," courses)"]})]}),a.jsx(_r,{value:b,onValueChange:R=>_(R),children:a.jsxs(Jn,{children:[a.jsx(Ue,{value:"grid",children:"Grid"}),a.jsx(Ue,{value:"list",children:"List"})]})})]}),l?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((R,U)=>a.jsxs(G,{className:"animate-pulse",children:[a.jsx("div",{className:"h-48 bg-muted rounded-t-md"}),a.jsxs(Ae,{children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),a.jsx(ce,{children:a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-3 bg-muted rounded"}),a.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},U))}):n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No courses found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or clear filters to see more results."}),a.jsx(K,{onClick:H,variant:"outline",children:"Clear All Filters"})]}):a.jsx("div",{className:b==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:n.map(R=>a.jsx(M,{course:R},R.id))})]}),a.jsx(He,{value:"my-courses",className:"mt-6",children:s?a.jsx("div",{children:i.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(R=>a.jsx(M,{course:R},R.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"📚"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Noch keine Kurse hinzugefügt"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Fügen Sie Ihren ersten Kurs hinzu, um Ihre Fortbildung zu verfolgen."}),a.jsx(ik,{onCourseAdded:B})]})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-6xl mb-4",children:"🔒"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Anmeldung erforderlich"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"Melden Sie sich an, um Ihre Kurse zu verwalten."}),a.jsx(K,{asChild:!0,children:a.jsx("a",{href:"/auth",children:"Anmelden"})})]})})]})]})]})}var o7="Separator",ak="horizontal",l7=["horizontal","vertical"],ZI=j.forwardRef((s,e)=>{const{decorative:t,orientation:n=ak,...r}=s,i=c7(n)?n:ak,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(me.div,{"data-orientation":i,...l,...r,ref:e})});ZI.displayName=o7;function c7(s){return l7.includes(s)}var eD=ZI;const tD=j.forwardRef(({className:s,orientation:e="horizontal",decorative:t=!0,...n},r)=>a.jsx(eD,{ref:r,decorative:t,orientation:e,className:ne("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...n}));tD.displayName=eD.displayName;var sD={exports:{}},nD={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf=j;function d7(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var u7=typeof Object.is=="function"?Object.is:d7,h7=Vf.useState,f7=Vf.useEffect,m7=Vf.useLayoutEffect,p7=Vf.useDebugValue;function g7(s,e){var t=e(),n=h7({inst:{value:t,getSnapshot:e}}),r=n[0].inst,i=n[1];return m7(function(){r.value=t,r.getSnapshot=e,Bw(r)&&i({inst:r})},[s,t,e]),f7(function(){return Bw(r)&&i({inst:r}),s(function(){Bw(r)&&i({inst:r})})},[s]),p7(t),t}function Bw(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!u7(s,t)}catch{return!0}}function v7(s,e){return e()}var x7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v7:g7;nD.useSyncExternalStore=Vf.useSyncExternalStore!==void 0?Vf.useSyncExternalStore:x7;sD.exports=nD;var y7=sD.exports;function b7(){return y7.useSyncExternalStore(w7,()=>!0,()=>!1)}function w7(){return()=>{}}var XS="Avatar",[j7,pQ]=na(XS),[_7,rD]=j7(XS),iD=j.forwardRef((s,e)=>{const{__scopeAvatar:t,...n}=s,[r,i]=j.useState("idle");return a.jsx(_7,{scope:t,imageLoadingStatus:r,onImageLoadingStatusChange:i,children:a.jsx(me.span,{...n,ref:e})})});iD.displayName=XS;var aD="AvatarImage",oD=j.forwardRef((s,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:r=()=>{},...i}=s,o=rD(aD,t),l=N7(n,i),c=Qn(d=>{r(d),o.onImageLoadingStatusChange(d)});return Ht(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(me.img,{...i,ref:e,src:n}):null});oD.displayName=aD;var lD="AvatarFallback",cD=j.forwardRef((s,e)=>{const{__scopeAvatar:t,delayMs:n,...r}=s,i=rD(lD,t),[o,l]=j.useState(n===void 0);return j.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(me.span,{...r,ref:e}):null});cD.displayName=lD;function ok(s,e){return s?e?(s.src!==e&&(s.src=e),s.complete&&s.naturalWidth>0?"loaded":"loading"):"error":"idle"}function N7(s,{referrerPolicy:e,crossOrigin:t}){const n=b7(),r=j.useRef(null),i=n?(r.current||(r.current=new window.Image),r.current):null,[o,l]=j.useState(()=>ok(i,s));return Ht(()=>{l(ok(i,s))},[i,s]),Ht(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,t,e]),o}var dD=iD,uD=oD,hD=cD;const fD=j.forwardRef(({className:s,...e},t)=>a.jsx(dD,{ref:t,className:ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...e}));fD.displayName=dD.displayName;const mD=j.forwardRef(({className:s,...e},t)=>a.jsx(uD,{ref:t,className:ne("aspect-square h-full w-full",s),...e}));mD.displayName=uD.displayName;const pD=j.forwardRef(({className:s,...e},t)=>a.jsx(hD,{ref:t,className:ne("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...e}));pD.displayName=hD.displayName;var QS="Progress",JS=100,[S7,gQ]=na(QS),[A7,E7]=S7(QS),gD=j.forwardRef((s,e)=>{const{__scopeProgress:t,value:n=null,max:r,getValueLabel:i=C7,...o}=s;(r||r===0)&&!lk(r)&&console.error(k7(`${r}`,"Progress"));const l=lk(r)?r:JS;n!==null&&!ck(n,l)&&console.error(P7(`${n}`,"Progress"));const c=ck(n,l)?n:null,d=dy(c)?i(c,l):void 0;return a.jsx(A7,{scope:t,value:c,max:l,children:a.jsx(me.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":dy(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":yD(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});gD.displayName=QS;var vD="ProgressIndicator",xD=j.forwardRef((s,e)=>{const{__scopeProgress:t,...n}=s,r=E7(vD,t);return a.jsx(me.div,{"data-state":yD(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...n,ref:e})});xD.displayName=vD;function C7(s,e){return`${Math.round(s/e*100)}%`}function yD(s,e){return s==null?"indeterminate":s===e?"complete":"loading"}function dy(s){return typeof s=="number"}function lk(s){return dy(s)&&!isNaN(s)&&s>0}function ck(s,e){return dy(s)&&!isNaN(s)&&s<=e&&s>=0}function k7(s,e){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${JS}\`.`}function P7(s,e){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${JS} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var bD=gD,T7=xD;const ql=j.forwardRef(({className:s,value:e,...t},n)=>a.jsx(bD,{ref:n,className:ne("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:a.jsx(T7,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));ql.displayName=bD.displayName;function R7(){const{id:s}=gR(),[e,t]=j.useState(null),[n,r]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,h]=j.useState([]),[f,m]=j.useState(!0),[p,x]=j.useState(!1),[v,w]=j.useState("");j.useState({rating:5,comment:""});const[g,y]=j.useState(!1);j.useEffect(()=>{s&&b()},[s,b]);const b=j.useCallback(async()=>{if(s){m(!0);try{const{data:T,error:O}=await se.from("courses").select("*").eq("id",s).eq("status","published").single();if(O)throw O;t(T);const{data:z}=await se.from("course_sessions").select("*").eq("course_id",s).order("start_date",{ascending:!0});r(z||[]);const{data:F}=await se.from("course_videos").select(`
          *,
          videos (
            title,
            description,
            duration,
            thumbnail_url
          )
        `).eq("course_id",s).order("order_index",{ascending:!0});o(F||[]);const{data:B}=await se.from("course_materials").select("*").eq("course_id",s);c(B||[]);const{data:I}=await se.from("course_reviews").select("*").eq("course_id",s).order("created_at",{ascending:!1}),H=(I||[]).map(D=>({...D,profiles:{full_name:"Course Participant",avatar_url:""}}));h(H);const{data:{user:$}}=await se.auth.getUser();if($){const{data:D}=await se.from("course_enrollments").select("status").eq("course_id",s).eq("user_id",$.id).single();y(!!D)}}catch(T){console.error("Error fetching course details:",T),Ie.error("Failed to load course details")}finally{m(!1)}}},[s]),_=async()=>{if(!e||!v){Ie.error("Please select a session");return}x(!0);try{const{data:{user:T}}=await se.auth.getUser();if(!T){Ie.error("Please log in to enroll");return}const{error:O}=await se.from("course_enrollments").insert({course_id:e.id,user_id:T.id,status:"enrolled"});if(O)throw O;const{error:z}=await se.from("payments").insert({user_id:T.id,course_id:e.id,session_id:v,amount:e.price,currency:e.currency,status:"pending"});if(z)throw z;Ie.success("Successfully enrolled! Payment processing..."),y(!0)}catch(T){console.error("Enrollment error:",T),Ie.error("Failed to enroll in course")}finally{x(!1)}},S=(T,O)=>T===0?"Free":`${T} ${O}`,A=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=T=>{if(T===0)return"0 Bytes";const O=1024,z=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(T)/Math.log(O));return parseFloat((T/Math.pow(O,F)).toFixed(2))+" "+z[F]},P=(T,O=!1,z)=>Array.from({length:5},(F,B)=>a.jsx(Bf,{className:`h-4 w-4 cursor-pointer ${B<T?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`,onClick:()=>O&&z&&z(B+1)},B));return f?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),a.jsx("div",{className:"h-64 bg-muted rounded"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("div",{className:"h-6 bg-muted rounded"}),a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),a.jsx("div",{className:"h-96 bg-muted rounded"})]})]})})]}):e?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsxs(cs,{to:"/courses",className:"inline-flex items-center text-muted-foreground hover:text-foreground",children:[a.jsx(QE,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"relative",children:[e.cover_image_url?a.jsx("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-64 object-cover rounded-lg"}):a.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 rounded-lg flex items-center justify-center",children:a.jsx("div",{className:"text-8xl text-medical-primary opacity-30",children:"📚"})}),a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[a.jsx(K,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:a.jsx(h$,{className:"h-4 w-4"})}),a.jsx(K,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:a.jsx(pS,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),a.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[P(e.average_rating),a.jsxs("span",{className:"ml-1",children:["(",e.total_reviews," reviews)"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zf,{className:"h-4 w-4"}),a.jsxs("span",{children:[e.city,", ",e.country]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.modality&&a.jsx(Y,{variant:"secondary",children:e.modality}),e.difficulty_level&&a.jsx(Y,{variant:"outline",children:e.difficulty_level}),e.has_certificate&&a.jsxs(Y,{variant:"outline",children:[a.jsx(_s,{className:"h-3 w-3 mr-1"}),"Certificate"]})]})]}),a.jsx("p",{className:"text-muted-foreground mb-6",children:e.description}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(rc,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsxs("div",{className:"font-semibold",children:[e.cme_points," CME"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Points"})]}),a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(xr,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsx("div",{className:"font-semibold",children:e.capacity||"Unlimited"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Capacity"})]}),a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(hs,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsx("div",{className:"font-semibold",children:n.length}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Sessions"})]}),a.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[a.jsx(Bf,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),a.jsx("div",{className:"font-semibold",children:Math.round(e.average_rating)}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]})]}),a.jsxs(_r,{defaultValue:"overview",className:"w-full",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-4",children:[a.jsx(Ue,{value:"overview",children:"Overview"}),a.jsx(Ue,{value:"content",children:"Content"}),a.jsx(Ue,{value:"materials",children:"Materials"}),a.jsx(Ue,{value:"reviews",children:"Reviews"})]}),a.jsxs(He,{value:"overview",className:"space-y-6",children:[a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{children:"Course Requirements"})}),a.jsx(ce,{children:a.jsx("p",{children:e.requirements||"No specific requirements"})})]}),e.tags&&e.tags.length>0&&a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{children:"Topics Covered"})}),a.jsx(ce,{children:a.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((T,O)=>a.jsx(Y,{variant:"outline",children:T},O))})})]})]}),a.jsx(He,{value:"content",className:"space-y-4",children:i.length>0?i.map((T,O)=>a.jsx(G,{children:a.jsx(ce,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:T.videos.thumbnail_url||"/placeholder.svg",alt:T.videos.title,className:"w-24 h-16 object-cover rounded"}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(WT,{className:"h-6 w-6 text-white drop-shadow-lg"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold",children:T.videos.title}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.videos.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.jsxs("span",{children:[Math.floor(T.videos.duration/60)," min"]}),a.jsx(Y,{variant:T.is_preview?"secondary":"outline",className:"text-xs",children:T.is_preview?"Free Preview":"Premium"})]})]})]})})},T.id)):a.jsx(G,{children:a.jsxs(ce,{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"🎥"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No video content available"}),a.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include video lessons."})]})})}),a.jsx(He,{value:"materials",className:"space-y-4",children:l.length>0?l.map(T=>a.jsx(G,{children:a.jsx(ce,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ob,{className:"h-5 w-5 text-medical-primary"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:T.title}),a.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.description," • ",C(T.file_size)," • ",T.file_type.toUpperCase()]})]})]}),a.jsx(Y,{variant:T.is_preview?"secondary":"outline",children:T.is_preview?"Free":"Premium"})]})})},T.id)):a.jsx(G,{children:a.jsxs(ce,{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📄"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No materials available"}),a.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include downloadable materials."})]})})}),a.jsx(He,{value:"reviews",className:"space-y-4",children:d.length>0?d.map(T=>a.jsx(G,{children:a.jsx(ce,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsxs(fD,{children:[a.jsx(mD,{src:T.profiles.avatar_url}),a.jsx(pD,{children:T.profiles.full_name.charAt(0)})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold",children:T.profiles.full_name}),a.jsx("div",{className:"flex items-center",children:P(T.rating)}),a.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(T.created_at).toLocaleDateString()})]}),a.jsx("p",{className:"text-muted-foreground",children:T.comment})]})]})})},T.id)):a.jsx(G,{children:a.jsxs(ce,{className:"p-8 text-center",children:[a.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No reviews yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Be the first to review this course!"})]})})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center justify-between",children:[a.jsx("span",{children:"Enroll Now"}),a.jsx("span",{className:"text-2xl font-bold text-medical-primary",children:S(e.price,e.currency)})]})}),a.jsxs(ce,{className:"space-y-4",children:[g?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"text-green-600 font-semibold mb-2",children:"✓ Already Enrolled"}),a.jsx(K,{variant:"outline",className:"w-full",children:"Go to Course"})]}):a.jsxs(a.Fragment,{children:[n.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Session:"}),a.jsxs("select",{className:"w-full p-2 border rounded-md",value:v,onChange:T=>w(T.target.value),children:[a.jsx("option",{value:"",children:"Choose a session"}),n.map(T=>a.jsxs("option",{value:T.id,children:[A(T.start_date),T.location&&` - ${T.location}`]},T.id))]})]}),a.jsx(K,{className:"w-full",variant:"medical",onClick:_,disabled:p||n.length>0&&!v,children:p?"Processing...":"Enroll Now"})]}),a.jsx(tD,{}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Language:"}),a.jsx("span",{className:"font-medium",children:e.language})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Specialty:"}),a.jsx("span",{className:"font-medium",children:e.specialty})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Level:"}),a.jsx("span",{className:"font-medium capitalize",children:e.difficulty_level})]})]})]})]}),n.length>0&&a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{children:"Upcoming Sessions"})}),a.jsx(ce,{className:"space-y-3",children:n.slice(0,3).map(T=>a.jsxs("div",{className:"p-3 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(hs,{className:"h-4 w-4 text-medical-primary"}),a.jsx("span",{className:"font-medium text-sm",children:A(T.start_date)})]}),T.location&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[a.jsx(zf,{className:"h-3 w-3"}),a.jsx("span",{children:T.location})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx(ql,{value:T.current_participants/T.max_participants*100,className:"h-2"}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[T.current_participants,"/",T.max_participants," enrolled"]})]})]},T.id))})]})]})]})]})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Course not found"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"The course you're looking for doesn't exist or has been removed."}),a.jsx(cs,{to:"/courses",children:a.jsxs(K,{variant:"outline",children:[a.jsx(QE,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})]})})]})}const su=j.forwardRef(({className:s,...e},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:ne("w-full caption-bottom text-sm",s),...e})}));su.displayName="Table";const nu=j.forwardRef(({className:s,...e},t)=>a.jsx("thead",{ref:t,className:ne("[&_tr]:border-b",s),...e}));nu.displayName="TableHeader";const ru=j.forwardRef(({className:s,...e},t)=>a.jsx("tbody",{ref:t,className:ne("[&_tr:last-child]:border-0",s),...e}));ru.displayName="TableBody";const M7=j.forwardRef(({className:s,...e},t)=>a.jsx("tfoot",{ref:t,className:ne("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...e}));M7.displayName="TableFooter";const Gn=j.forwardRef(({className:s,...e},t)=>a.jsx("tr",{ref:t,className:ne("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...e}));Gn.displayName="TableRow";const Ne=j.forwardRef(({className:s,...e},t)=>a.jsx("th",{ref:t,className:ne("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...e}));Ne.displayName="TableHead";const Se=j.forwardRef(({className:s,...e},t)=>a.jsx("td",{ref:t,className:ne("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...e}));Se.displayName="TableCell";const I7=j.forwardRef(({className:s,...e},t)=>a.jsx("caption",{ref:t,className:ne("mt-4 text-sm text-muted-foreground",s),...e}));I7.displayName="TableCaption";const D7=({moduleKey:s,onClose:e})=>{const[t,n]=j.useState(null),[r,i]=j.useState([]),[o,l]=j.useState(!0),[c,d]=j.useState(4),h=j.useCallback(async()=>{try{l(!0);const{data:{user:g}}=await se.auth.getUser();if(!g)return;const{data:y}=await se.from("profiles").select("pgy_level").eq("user_id",g.id).single();y!=null&&y.pgy_level&&d(y.pgy_level);const{data:b}=await se.from("procedure_categories").select("*").eq("key",s).single();b&&n({id:b.id,title_de:b.title_de,minimum_required:b.minimum_required});const{data:_}=await se.rpc("get_module_progress",{user_id_param:g.id,module_key:s}),{data:S}=await se.from("procedures").select(`
          id,
          code,
          title_de,
          min_required_by_pgy
        `).eq("category_id",b==null?void 0:b.id).eq("active",!0),A=[];for(const C of S||[]){const{data:P}=await se.from("procedure_logs").select("*").eq("procedure_id",C.id).eq("user_id",g.id).order("performed_date",{ascending:!1}),T=(P==null?void 0:P.filter(B=>B.role_in_surgery==="primary"||B.role_in_surgery==="responsible").length)||0,O=(P==null?void 0:P.filter(B=>B.role_in_surgery==="instructing").length)||0,z=(P==null?void 0:P.filter(B=>B.role_in_surgery==="assistant"||B.role_in_surgery==="assist").length)||0,F=T*1+O*.75+z*.5;A.push({...C,responsible_count:T,instructing_count:O,assistant_count:z,weighted_score:F,logs:P||[]})}i(A)}catch(g){console.error("Error loading module details:",g)}finally{l(!1)}},[s]);j.useEffect(()=>{h()},[h]);const f=g=>({basis_notfall:"coral",basis_allgemein:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[g]||"mint",m=g=>{var y;return((y=g.min_required_by_pgy)==null?void 0:y[`pgy${c}`])??0},p=g=>{const y=m(g);return y===0?0:Math.min(100,g.weighted_score/y*100)},x=r.reduce((g,y)=>g+y.weighted_score,0),v=(t==null?void 0:t.minimum_required)||0,w=v>0?Math.min(100,x/v*100):0;return o?a.jsx(G,{className:"medical-card mb-8",children:a.jsx(ce,{className:"p-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):a.jsxs(G,{className:"medical-card mb-8",children:[a.jsxs(Ae,{className:"flex flex-row items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(kv,{progress:w,variant:f(s),size:80,strokeWidth:6,showPercentage:!0}),a.jsxs("div",{children:[a.jsx(ke,{className:"text-xl text-card-foreground",children:t==null?void 0:t.title_de}),a.jsxs("p",{className:"text-muted-foreground",children:[Math.round(x)," / ",v," Punkte (gewichtet)"]})]})]}),a.jsx(K,{variant:"ghost",size:"sm",onClick:e,children:a.jsx(ic,{className:"w-4 h-4"})})]}),a.jsx(ce,{children:a.jsxs(_r,{defaultValue:"overview",className:"w-full",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-3",children:[a.jsx(Ue,{value:"overview",children:"Übersicht"}),a.jsx(Ue,{value:"procedures",children:"Prozeduren"}),a.jsx(Ue,{value:"timeline",children:"Verlauf"})]}),a.jsx(He,{value:"overview",className:"mt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs(G,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Rollenverteilung"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Verantwortlich:"}),a.jsx(Y,{variant:"default",children:r.reduce((g,y)=>g+y.responsible_count,0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Instruierend:"}),a.jsx(Y,{variant:"secondary",children:r.reduce((g,y)=>g+y.instructing_count,0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm",children:"Assistent:"}),a.jsx(Y,{variant:"outline",children:r.reduce((g,y)=>g+y.assistant_count,0)})]})]})]}),a.jsxs(G,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Modulfortschritt"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{children:"Erfüllung"}),a.jsxs("span",{children:[Math.round(w),"%"]})]}),a.jsx(ql,{value:w,className:"h-2"})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Gewichtung: V=1.0, I=0.75, A=0.5"})]})]}),a.jsxs(G,{className:"p-4",children:[a.jsx("h4",{className:"font-semibold mb-3",children:"Statistiken"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Prozeduren:"}),a.jsx("span",{children:r.length})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Eingriffe total:"}),a.jsx("span",{children:r.reduce((g,y)=>g+y.responsible_count+y.instructing_count+y.assistant_count,0)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Punkte total:"}),a.jsx("span",{children:Math.round(x)})]})]})]})]})}),a.jsx(He,{value:"procedures",className:"mt-6",children:a.jsxs(su,{children:[a.jsx(nu,{children:a.jsxs(Gn,{children:[a.jsx(Ne,{children:"Prozedur"}),a.jsxs(Ne,{className:"text-center",children:["Soll PGY-",c]}),a.jsx(Ne,{className:"text-center",children:"Ist (gewichtet)"}),a.jsx(Ne,{className:"text-center",children:"V/I/A"}),a.jsx(Ne,{className:"text-center",children:"Fortschritt"}),a.jsx(Ne,{className:"text-center",children:"Status"})]})}),a.jsx(ru,{children:r.map(g=>{const y=m(g),b=p(g),_=y>0&&g.weighted_score<y;return a.jsxs(Gn,{children:[a.jsx(Se,{className:"font-medium",children:a.jsxs("div",{children:[a.jsx("div",{children:g.title_de}),a.jsx("div",{className:"text-xs text-muted-foreground",children:g.code})]})}),a.jsx(Se,{className:"text-center",children:y||"-"}),a.jsx(Se,{className:"text-center",children:Math.round(g.weighted_score)}),a.jsx(Se,{className:"text-center",children:a.jsxs("div",{className:"flex gap-1 justify-center",children:[a.jsx(Y,{variant:"default",className:"text-xs",children:g.responsible_count}),a.jsx(Y,{variant:"secondary",className:"text-xs",children:g.instructing_count}),a.jsx(Y,{variant:"outline",className:"text-xs",children:g.assistant_count})]})}),a.jsx(Se,{className:"text-center",children:y>0?a.jsxs("div",{className:"w-16 mx-auto",children:[a.jsx(ql,{value:b,className:"h-2"}),a.jsxs("div",{className:"text-xs mt-1",children:[b.toFixed(0),"%"]})]}):"-"}),a.jsxs(Se,{className:"text-center",children:[_&&a.jsx(Xi,{className:"w-4 h-4 text-orange-500 mx-auto"}),y>0&&g.weighted_score>=y&&a.jsx(Y,{variant:"default",className:"bg-green-500",children:"✓"})]})]},g.id)})})]})}),a.jsx(He,{value:"timeline",className:"mt-6",children:a.jsx("div",{className:"space-y-4",children:r.filter(g=>g.logs.length>0).flatMap(g=>g.logs.map(y=>({...y,procedure_title:g.title_de}))).sort((g,y)=>new Date(y.performed_date).getTime()-new Date(g.performed_date).getTime()).slice(0,20).map(g=>a.jsx(G,{className:"p-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:g.procedure_title}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(g.performed_date).toLocaleDateString("de-DE")," • ",g.hospital]}),g.supervisor&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Supervisor: ",g.supervisor]})]}),a.jsx(Y,{variant:g.role_in_surgery==="primary"||g.role_in_surgery==="responsible"?"default":g.role_in_surgery==="instructing"?"secondary":"outline",children:g.role_in_surgery==="primary"||g.role_in_surgery==="responsible"?"Verantwortlich":g.role_in_surgery==="instructing"?"Instruierend":"Assistent"})]})},g.id))})})]})})]})};var dk=1,O7=.9,L7=.8,F7=.17,Uw=.1,Hw=.999,$7=.9999,z7=.99,B7=/[\\\/_+.#"@\[\(\{&]/,U7=/[\\\/_+.#"@\[\(\{&]/g,H7=/[\s-]/,wD=/[\s-]/g;function Uj(s,e,t,n,r,i,o){if(i===e.length)return r===s.length?dk:z7;var l=`${r},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),d=t.indexOf(c,r),h=0,f,m,p,x;d>=0;)f=Uj(s,e,t,n,d+1,i+1,o),f>h&&(d===r?f*=dk:B7.test(s.charAt(d-1))?(f*=L7,p=s.slice(r,d-1).match(U7),p&&r>0&&(f*=Math.pow(Hw,p.length))):H7.test(s.charAt(d-1))?(f*=O7,x=s.slice(r,d-1).match(wD),x&&r>0&&(f*=Math.pow(Hw,x.length))):(f*=F7,r>0&&(f*=Math.pow(Hw,d-r))),s.charAt(d)!==e.charAt(i)&&(f*=$7)),(f<Uw&&t.charAt(d-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&t.charAt(d-1)!==n.charAt(i))&&(m=Uj(s,e,t,n,d+1,i+2,o),m*Uw>f&&(f=m*Uw)),f>h&&(h=f),d=t.indexOf(c,d+1);return o[l]=h,h}function uk(s){return s.toLowerCase().replace(wD," ")}function W7(s,e,t){return s=t&&t.length>0?`${s+" "+t.join(" ")}`:s,Uj(s,e,uk(s),uk(e),0,0,{})}var ym='[cmdk-group=""]',Ww='[cmdk-group-items=""]',V7='[cmdk-group-heading=""]',jD='[cmdk-item=""]',hk=`${jD}:not([aria-disabled="true"])`,Hj="cmdk-item-select",Mu="data-value",G7=(s,e,t)=>W7(s,e,t),_D=j.createContext(void 0),Rv=()=>j.useContext(_D),ND=j.createContext(void 0),ZS=()=>j.useContext(ND),SD=j.createContext(void 0),AD=j.forwardRef((s,e)=>{let t=Iu(()=>{var L,V;return{search:"",value:(V=(L=s.value)!=null?L:s.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=Iu(()=>new Set),r=Iu(()=>new Map),i=Iu(()=>new Map),o=Iu(()=>new Set),l=ED(s),{label:c,children:d,value:h,onValueChange:f,filter:m,shouldFilter:p,loop:x,disablePointerSelection:v=!1,vimBindings:w=!0,...g}=s,y=sn(),b=sn(),_=sn(),S=j.useRef(null),A=n9();iu(()=>{if(h!==void 0){let L=h.trim();t.current.value=L,C.emit()}},[h]),iu(()=>{A(6,B)},[]);let C=j.useMemo(()=>({subscribe:L=>(o.current.add(L),()=>o.current.delete(L)),snapshot:()=>t.current,setState:(L,V,Q)=>{var J,le,W,pe;if(!Object.is(t.current[L],V)){if(t.current[L]=V,L==="search")F(),O(),A(1,z);else if(L==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let je=document.getElementById(_);je?je.focus():(J=document.getElementById(y))==null||J.focus()}if(A(7,()=>{var je;t.current.selectedItemId=(je=I())==null?void 0:je.id,C.emit()}),Q||A(5,B),((le=l.current)==null?void 0:le.value)!==void 0){let je=V??"";(pe=(W=l.current).onValueChange)==null||pe.call(W,je);return}}C.emit()}},emit:()=>{o.current.forEach(L=>L())}}),[]),P=j.useMemo(()=>({value:(L,V,Q)=>{var J;V!==((J=i.current.get(L))==null?void 0:J.value)&&(i.current.set(L,{value:V,keywords:Q}),t.current.filtered.items.set(L,T(V,Q)),A(2,()=>{O(),C.emit()}))},item:(L,V)=>(n.current.add(L),V&&(r.current.has(V)?r.current.get(V).add(L):r.current.set(V,new Set([L]))),A(3,()=>{F(),O(),t.current.value||z(),C.emit()}),()=>{i.current.delete(L),n.current.delete(L),t.current.filtered.items.delete(L);let Q=I();A(4,()=>{F(),(Q==null?void 0:Q.getAttribute("id"))===L&&z(),C.emit()})}),group:L=>(r.current.has(L)||r.current.set(L,new Set),()=>{i.current.delete(L),r.current.delete(L)}),filter:()=>l.current.shouldFilter,label:c||s["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:y,inputId:_,labelId:b,listInnerRef:S}),[]);function T(L,V){var Q,J;let le=(J=(Q=l.current)==null?void 0:Q.filter)!=null?J:G7;return L?le(L,t.current.search,V):0}function O(){if(!t.current.search||l.current.shouldFilter===!1)return;let L=t.current.filtered.items,V=[];t.current.filtered.groups.forEach(J=>{let le=r.current.get(J),W=0;le.forEach(pe=>{let je=L.get(pe);W=Math.max(je,W)}),V.push([J,W])});let Q=S.current;H().sort((J,le)=>{var W,pe;let je=J.getAttribute("id"),Te=le.getAttribute("id");return((W=L.get(Te))!=null?W:0)-((pe=L.get(je))!=null?pe:0)}).forEach(J=>{let le=J.closest(Ww);le?le.appendChild(J.parentElement===le?J:J.closest(`${Ww} > *`)):Q.appendChild(J.parentElement===Q?J:J.closest(`${Ww} > *`))}),V.sort((J,le)=>le[1]-J[1]).forEach(J=>{var le;let W=(le=S.current)==null?void 0:le.querySelector(`${ym}[${Mu}="${encodeURIComponent(J[0])}"]`);W==null||W.parentElement.appendChild(W)})}function z(){let L=H().find(Q=>Q.getAttribute("aria-disabled")!=="true"),V=L==null?void 0:L.getAttribute(Mu);C.setState("value",V||void 0)}function F(){var L,V,Q,J;if(!t.current.search||l.current.shouldFilter===!1){t.current.filtered.count=n.current.size;return}t.current.filtered.groups=new Set;let le=0;for(let W of n.current){let pe=(V=(L=i.current.get(W))==null?void 0:L.value)!=null?V:"",je=(J=(Q=i.current.get(W))==null?void 0:Q.keywords)!=null?J:[],Te=T(pe,je);t.current.filtered.items.set(W,Te),Te>0&&le++}for(let[W,pe]of r.current)for(let je of pe)if(t.current.filtered.items.get(je)>0){t.current.filtered.groups.add(W);break}t.current.filtered.count=le}function B(){var L,V,Q;let J=I();J&&(((L=J.parentElement)==null?void 0:L.firstChild)===J&&((Q=(V=J.closest(ym))==null?void 0:V.querySelector(V7))==null||Q.scrollIntoView({block:"nearest"})),J.scrollIntoView({block:"nearest"}))}function I(){var L;return(L=S.current)==null?void 0:L.querySelector(`${jD}[aria-selected="true"]`)}function H(){var L;return Array.from(((L=S.current)==null?void 0:L.querySelectorAll(hk))||[])}function $(L){let V=H()[L];V&&C.setState("value",V.getAttribute(Mu))}function D(L){var V;let Q=I(),J=H(),le=J.findIndex(pe=>pe===Q),W=J[le+L];(V=l.current)!=null&&V.loop&&(W=le+L<0?J[J.length-1]:le+L===J.length?J[0]:J[le+L]),W&&C.setState("value",W.getAttribute(Mu))}function M(L){let V=I(),Q=V==null?void 0:V.closest(ym),J;for(;Q&&!J;)Q=L>0?t9(Q,ym):s9(Q,ym),J=Q==null?void 0:Q.querySelector(hk);J?C.setState("value",J.getAttribute(Mu)):D(L)}let R=()=>$(H().length-1),U=L=>{L.preventDefault(),L.metaKey?R():L.altKey?M(1):D(1)},Z=L=>{L.preventDefault(),L.metaKey?$(0):L.altKey?M(-1):D(-1)};return j.createElement(me.div,{ref:e,tabIndex:-1,...g,"cmdk-root":"",onKeyDown:L=>{var V;(V=g.onKeyDown)==null||V.call(g,L);let Q=L.nativeEvent.isComposing||L.keyCode===229;if(!(L.defaultPrevented||Q))switch(L.key){case"n":case"j":{w&&L.ctrlKey&&U(L);break}case"ArrowDown":{U(L);break}case"p":case"k":{w&&L.ctrlKey&&Z(L);break}case"ArrowUp":{Z(L);break}case"Home":{L.preventDefault(),$(0);break}case"End":{L.preventDefault(),R();break}case"Enter":{L.preventDefault();let J=I();if(J){let le=new Event(Hj);J.dispatchEvent(le)}}}}},j.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:i9},c),Pb(s,L=>j.createElement(ND.Provider,{value:C},j.createElement(_D.Provider,{value:P},L))))}),q7=j.forwardRef((s,e)=>{var t,n;let r=sn(),i=j.useRef(null),o=j.useContext(SD),l=Rv(),c=ED(s),d=(n=(t=c.current)==null?void 0:t.forceMount)!=null?n:o==null?void 0:o.forceMount;iu(()=>{if(!d)return l.item(r,o==null?void 0:o.id)},[d]);let h=CD(r,i,[s.value,s.children,i],s.keywords),f=ZS(),m=Kl(A=>A.value&&A.value===h.current),p=Kl(A=>d||l.filter()===!1?!0:A.search?A.filtered.items.get(r)>0:!0);j.useEffect(()=>{let A=i.current;if(!(!A||s.disabled))return A.addEventListener(Hj,x),()=>A.removeEventListener(Hj,x)},[p,s.onSelect,s.disabled]);function x(){var A,C;v(),(C=(A=c.current).onSelect)==null||C.call(A,h.current)}function v(){f.setState("value",h.current,!0)}if(!p)return null;let{disabled:w,value:g,onSelect:y,forceMount:b,keywords:_,...S}=s;return j.createElement(me.div,{ref:Yd(i,e),...S,id:r,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!m,"data-disabled":!!w,"data-selected":!!m,onPointerMove:w||l.getDisablePointerSelection()?void 0:v,onClick:w?void 0:x},s.children)}),K7=j.forwardRef((s,e)=>{let{heading:t,children:n,forceMount:r,...i}=s,o=sn(),l=j.useRef(null),c=j.useRef(null),d=sn(),h=Rv(),f=Kl(p=>r||h.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);iu(()=>h.group(o),[]),CD(o,l,[s.value,s.heading,c]);let m=j.useMemo(()=>({id:o,forceMount:r}),[r]);return j.createElement(me.div,{ref:Yd(l,e),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},t&&j.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),Pb(s,p=>j.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},j.createElement(SD.Provider,{value:m},p))))}),Y7=j.forwardRef((s,e)=>{let{alwaysRender:t,...n}=s,r=j.useRef(null),i=Kl(o=>!o.search);return!t&&!i?null:j.createElement(me.div,{ref:Yd(r,e),...n,"cmdk-separator":"",role:"separator"})}),X7=j.forwardRef((s,e)=>{let{onValueChange:t,...n}=s,r=s.value!=null,i=ZS(),o=Kl(d=>d.search),l=Kl(d=>d.selectedItemId),c=Rv();return j.useEffect(()=>{s.value!=null&&i.setState("search",s.value)},[s.value]),j.createElement(me.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:r?s.value:o,onChange:d=>{r||i.setState("search",d.target.value),t==null||t(d.target.value)}})}),Q7=j.forwardRef((s,e)=>{let{children:t,label:n="Suggestions",...r}=s,i=j.useRef(null),o=j.useRef(null),l=Kl(d=>d.selectedItemId),c=Rv();return j.useEffect(()=>{if(o.current&&i.current){let d=o.current,h=i.current,f,m=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let p=d.offsetHeight;h.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return m.observe(d),()=>{cancelAnimationFrame(f),m.unobserve(d)}}},[]),j.createElement(me.div,{ref:Yd(i,e),...r,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:c.listId},Pb(s,d=>j.createElement("div",{ref:Yd(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),J7=j.forwardRef((s,e)=>{let{open:t,onOpenChange:n,overlayClassName:r,contentClassName:i,container:o,...l}=s;return j.createElement(GI,{open:t,onOpenChange:n},j.createElement(qI,{container:o},j.createElement(KS,{"cmdk-overlay":"",className:r}),j.createElement(YS,{"aria-label":s.label,"cmdk-dialog":"",className:i},j.createElement(AD,{ref:e,...l}))))}),Z7=j.forwardRef((s,e)=>Kl(t=>t.filtered.count===0)?j.createElement(me.div,{ref:e,...s,"cmdk-empty":"",role:"presentation"}):null),e9=j.forwardRef((s,e)=>{let{progress:t,children:n,label:r="Loading...",...i}=s;return j.createElement(me.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":r},Pb(s,o=>j.createElement("div",{"aria-hidden":!0},o)))}),_n=Object.assign(AD,{List:Q7,Item:q7,Input:X7,Group:K7,Separator:Y7,Dialog:J7,Empty:Z7,Loading:e9});function t9(s,e){let t=s.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function s9(s,e){let t=s.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function ED(s){let e=j.useRef(s);return iu(()=>{e.current=s}),e}var iu=typeof window>"u"?j.useEffect:j.useLayoutEffect;function Iu(s){let e=j.useRef();return e.current===void 0&&(e.current=s()),e}function Kl(s){let e=ZS(),t=()=>s(e.snapshot());return j.useSyncExternalStore(e.subscribe,t,t)}function CD(s,e,t,n=[]){let r=j.useRef(),i=Rv();return iu(()=>{var o;let l=(()=>{var d;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():r.current}})(),c=n.map(d=>d.trim());i.value(s,l,c),(o=e.current)==null||o.setAttribute(Mu,l),r.current=l}),r}var n9=()=>{let[s,e]=j.useState(),t=Iu(()=>new Map);return iu(()=>{t.current.forEach(n=>n()),t.current=new Map},[s]),(n,r)=>{t.current.set(n,r),e({})}};function r9(s){let e=s.type;return typeof e=="function"?e(s.props):"render"in e?e.render(s.props):s}function Pb({asChild:s,children:e},t){return s&&j.isValidElement(e)?j.cloneElement(r9(e),{ref:e.ref},t(e.props.children)):t(e)}var i9={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const kD=j.forwardRef(({className:s,...e},t)=>a.jsx(_n,{ref:t,className:ne("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...e}));kD.displayName=_n.displayName;const PD=j.forwardRef(({className:s,...e},t)=>a.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[a.jsx(mS,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),a.jsx(_n.Input,{ref:t,className:ne("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...e})]}));PD.displayName=_n.Input.displayName;const TD=j.forwardRef(({className:s,...e},t)=>a.jsx(_n.List,{ref:t,className:ne("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...e}));TD.displayName=_n.List.displayName;const RD=j.forwardRef((s,e)=>a.jsx(_n.Empty,{ref:e,className:"py-6 text-center text-sm",...s}));RD.displayName=_n.Empty.displayName;const MD=j.forwardRef(({className:s,...e},t)=>a.jsx(_n.Group,{ref:t,className:ne("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...e}));MD.displayName=_n.Group.displayName;const a9=j.forwardRef(({className:s,...e},t)=>a.jsx(_n.Separator,{ref:t,className:ne("-mx-1 h-px bg-border",s),...e}));a9.displayName=_n.Separator.displayName;const ID=j.forwardRef(({className:s,...e},t)=>a.jsx(_n.Item,{ref:t,className:ne("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...e}));ID.displayName=_n.Item.displayName;var Tb="Popover",[DD,vQ]=na(Tb,[_b]),Mv=_b(),[o9,dc]=DD(Tb),OD=s=>{const{__scopePopover:e,children:t,open:n,defaultOpen:r,onOpenChange:i,modal:o=!1}=s,l=Mv(e),c=j.useRef(null),[d,h]=j.useState(!1),[f,m]=Qd({prop:n,defaultProp:r??!1,onChange:i,caller:Tb});return a.jsx(OM,{...l,children:a.jsx(o9,{scope:e,contentId:sn(),triggerRef:c,open:f,onOpenChange:m,onOpenToggle:j.useCallback(()=>m(p=>!p),[m]),hasCustomAnchor:d,onCustomAnchorAdd:j.useCallback(()=>h(!0),[]),onCustomAnchorRemove:j.useCallback(()=>h(!1),[]),modal:o,children:t})})};OD.displayName=Tb;var LD="PopoverAnchor",l9=j.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=dc(LD,t),i=Mv(t),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=r;return j.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(US,{...i,...n,ref:e})});l9.displayName=LD;var FD="PopoverTrigger",$D=j.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=dc(FD,t),i=Mv(t),o=lt(e,r.triggerRef),l=a.jsx(me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":WD(r.open),...n,ref:o,onClick:ve(s.onClick,r.onOpenToggle)});return r.hasCustomAnchor?l:a.jsx(US,{asChild:!0,...i,children:l})});$D.displayName=FD;var eA="PopoverPortal",[c9,d9]=DD(eA,{forceMount:void 0}),zD=s=>{const{__scopePopover:e,forceMount:t,children:n,container:r}=s,i=dc(eA,e);return a.jsx(c9,{scope:e,forceMount:t,children:a.jsx(nc,{present:t||i.open,children:a.jsx(jv,{asChild:!0,container:r,children:n})})})};zD.displayName=eA;var Gf="PopoverContent",BD=j.forwardRef((s,e)=>{const t=d9(Gf,s.__scopePopover),{forceMount:n=t.forceMount,...r}=s,i=dc(Gf,s.__scopePopover);return a.jsx(nc,{present:n||i.open,children:i.modal?a.jsx(h9,{...r,ref:e}):a.jsx(f9,{...r,ref:e})})});BD.displayName=Gf;var u9=Xd("PopoverContent.RemoveScroll"),h9=j.forwardRef((s,e)=>{const t=dc(Gf,s.__scopePopover),n=j.useRef(null),r=lt(e,n),i=j.useRef(!1);return j.useEffect(()=>{const o=n.current;if(o)return HS(o)},[]),a.jsx(Sb,{as:u9,allowPinchZoom:!0,children:a.jsx(UD,{...s,ref:r,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(s.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ve(s.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ve(s.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),f9=j.forwardRef((s,e)=>{const t=dc(Gf,s.__scopePopover),n=j.useRef(!1),r=j.useRef(!1);return a.jsx(UD,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=s.onCloseAutoFocus)==null||o.call(s,i),i.defaultPrevented||(n.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:i=>{var c,d;(c=s.onInteractOutside)==null||c.call(s,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&r.current&&i.preventDefault()}})}),UD=j.forwardRef((s,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:h,...f}=s,m=dc(Gf,t),p=Mv(t);return RS(),a.jsx(yb,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:i,children:a.jsx(wv,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:a.jsx(LM,{"data-state":WD(m.open),role:"dialog",id:m.contentId,...p,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HD="PopoverClose",m9=j.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=dc(HD,t);return a.jsx(me.button,{type:"button",...n,ref:e,onClick:ve(s.onClick,()=>r.onOpenChange(!1))})});m9.displayName=HD;var p9="PopoverArrow",g9=j.forwardRef((s,e)=>{const{__scopePopover:t,...n}=s,r=Mv(t);return a.jsx(FM,{...r,...n,ref:e})});g9.displayName=p9;function WD(s){return s?"open":"closed"}var v9=OD,x9=$D,y9=zD,VD=BD;const qx=v9,Kx=x9,dp=j.forwardRef(({className:s,align:e="center",sideOffset:t=4,...n},r)=>a.jsx(y9,{children:a.jsx(VD,{ref:r,align:e,sideOffset:t,className:ne("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));dp.displayName=VD.displayName;const b9=({onClose:s,onSuccess:e})=>{const[t,n]=j.useState([]),[r,i]=j.useState(""),[o,l]=j.useState(new Date().toISOString().split("T")[0]),[c,d]=j.useState(""),[h,f]=j.useState(""),[m,p]=j.useState(""),[x,v]=j.useState(""),[w,g]=j.useState(""),[y,b]=j.useState(!1),[_,S]=j.useState(!1),[A,C]=j.useState(""),{toast:P}=aS();j.useEffect(()=>{T()},[T]);const T=j.useCallback(async()=>{try{const{data:B,error:I}=await se.from("procedures").select(`
          id,
          code,
          title_de,
          procedure_categories!inner(title_de)
        `).eq("active",!0).order("title_de");if(I)throw I;const H=(B==null?void 0:B.map($=>({id:$.id,code:$.code,title_de:$.title_de,category:{title_de:$.procedure_categories.title_de}})))||[];n(H)}catch(B){console.error("Error loading procedures:",B),P({title:"Fehler",description:"Prozeduren konnten nicht geladen werden.",variant:"destructive"})}},[P]),O=async B=>{if(B.preventDefault(),!r||!o||!c){P({title:"Fehler",description:"Bitte füllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}S(!0);try{const{data:{user:I}}=await se.auth.getUser();if(!I)throw new Error("Not authenticated");const{error:H}=await se.from("procedure_logs").insert({user_id:I.id,procedure_id:r,performed_date:o,role_in_surgery:c,hospital:h||null,supervisor:m||null,notes:x||null,case_id:w||null});if(H)throw H;P({title:"Erfolg",description:"Prozedur wurde erfolgreich erfasst."}),e()}catch(I){console.error("Error saving procedure:",I),P({title:"Fehler",description:"Prozedur konnte nicht gespeichert werden.",variant:"destructive"})}finally{S(!1)}},z=t.filter(B=>B.title_de.toLowerCase().includes(A.toLowerCase())||B.code.toLowerCase().includes(A.toLowerCase())||B.category.title_de.toLowerCase().includes(A.toLowerCase())),F=t.find(B=>B.id===r);return a.jsx(Vl,{open:!0,onOpenChange:s,children:a.jsxs(lo,{className:"sm:max-w-[600px]",children:[a.jsx(co,{children:a.jsxs(uo,{className:"flex items-center gap-2",children:[a.jsx(Qf,{className:"w-5 h-5"}),"Prozedur erfassen"]})}),a.jsxs("form",{onSubmit:O,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:"procedure",className:"text-sm font-medium",children:["Prozedur ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs(qx,{open:y,onOpenChange:b,children:[a.jsx(Kx,{asChild:!0,children:a.jsxs(K,{variant:"outline",role:"combobox","aria-expanded":y,className:"w-full justify-between",children:[F?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Y,{variant:"outline",className:"text-xs",children:F.code}),a.jsx("span",{children:F.title_de})]}):"Prozedur auswählen...",a.jsx(i$,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(dp,{className:"w-full p-0",children:a.jsxs(kD,{children:[a.jsx(PD,{placeholder:"Prozedur suchen...",value:A,onValueChange:C}),a.jsx(RD,{children:"Keine Prozedur gefunden."}),a.jsx(TD,{children:a.jsx(MD,{children:z.map(B=>a.jsxs(ID,{value:`${B.code} ${B.title_de}`,onSelect:()=>{i(B.id),b(!1)},children:[a.jsx(UT,{className:ne("mr-2 h-4 w-4",r===B.id?"opacity-100":"opacity-0")}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Y,{variant:"outline",className:"text-xs",children:B.code}),a.jsx("span",{children:B.title_de})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:B.category.title_de})]})]},B.id))})})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:"date",className:"text-sm font-medium",children:["Datum ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Ee,{id:"date",type:"date",value:o,onChange:B=>l(B.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(he,{htmlFor:"role",className:"text-sm font-medium",children:["Rolle ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs(Qt,{value:c,onValueChange:d,required:!0,children:[a.jsx($t,{children:a.jsx(Jt,{placeholder:"Rolle auswählen"})}),a.jsxs(zt,{children:[a.jsx(ye,{value:"responsible",children:"Verantwortlich (1.0x)"}),a.jsx(ye,{value:"instructing",children:"Instruierend (0.75x)"}),a.jsx(ye,{value:"assistant",children:"Assistent (0.5x)"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"hospital",className:"text-sm font-medium",children:"Klinik/Spital"}),a.jsx(Ee,{id:"hospital",value:h,onChange:B=>f(B.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"caseId",className:"text-sm font-medium",children:"Fall-ID"}),a.jsx(Ee,{id:"caseId",value:w,onChange:B=>g(B.target.value),placeholder:"z.B. 2024-001234"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"supervisor",className:"text-sm font-medium",children:"Supervisor"}),a.jsx(Ee,{id:"supervisor",value:m,onChange:B=>p(B.target.value),placeholder:"z.B. Dr. med. Max Mustermann"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"notes",className:"text-sm font-medium",children:"Notizen"}),a.jsx(Gl,{id:"notes",value:x,onChange:B=>v(B.target.value),placeholder:"Besonderheiten, Komplikationen, Lernpunkte...",rows:3})]}),c&&a.jsx("div",{className:"p-3 bg-muted rounded-medical",children:a.jsxs("div",{className:"text-sm",children:[a.jsx("strong",{children:"Gewichtung:"})," "," ",c==="responsible"&&"1.0 Punkte (Vollwertung)",c==="instructing"&&"0.75 Punkte (Instruierend)",c==="assistant"&&"0.5 Punkte (Assistenz)"]})}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(K,{type:"button",variant:"outline",onClick:s,children:"Abbrechen"}),a.jsx(K,{type:"submit",disabled:_,children:_?"Speichern...":"Speichern"})]})]})]})})},w9=Nv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ti=j.forwardRef(({className:s,variant:e,...t},n)=>a.jsx("div",{ref:n,role:"alert",className:ne(w9({variant:e}),s),...t}));ti.displayName="Alert";const j9=j.forwardRef(({className:s,...e},t)=>a.jsx("h5",{ref:t,className:ne("mb-1 font-medium leading-none tracking-tight",s),...e}));j9.displayName="AlertTitle";const si=j.forwardRef(({className:s,...e},t)=>a.jsx("div",{ref:t,className:ne("text-sm [&_p]:leading-relaxed",s),...e}));si.displayName="AlertDescription";const _9=({modules:s,userPgyLevel:e})=>{const[t,n]=j.useState([]),[r,i]=j.useState([]),[o,l]=j.useState(!0),c=j.useCallback(async()=>{var f;try{l(!0);const{data:{user:m}}=await se.auth.getUser();if(!m)return;const p=[];for(const x of s){const{data:v}=await se.from("procedures").select(`
            id,
            code,
            title_de,
            min_required_by_pgy
          `).eq("category_id",x.id).eq("active",!0);for(const w of v||[]){const g=((f=w.min_required_by_pgy)==null?void 0:f[`pgy${e}`])||0;if(g>0){const{data:y}=await se.from("procedure_logs").select("role_in_surgery, weighted_score").eq("procedure_id",w.id).eq("user_id",m.id),b=(y==null?void 0:y.reduce((S,A)=>S+(A.weighted_score||0),0))||0,_=Math.max(0,g-b);if(_>0){const S=b/g*100,A=_*(100-S)/100;p.push({procedure_id:w.id,procedure_title:w.title_de,procedure_code:w.code,module_name:x.title_de,required:g,current_weighted:b,gap:_,priority_score:A})}}}}p.sort((x,v)=>v.priority_score-x.priority_score),n(p.slice(0,10)),await d(m.id)}catch(m){console.error("Error in gap analysis:",m)}finally{l(!1)}},[s,e]);j.useEffect(()=>{c()},[c]);const d=async f=>{try{const m=[],p=new Date;for(let v=7;v>=0;v--){const w=new Date(p);w.setMonth(w.getMonth()-v*3);const g=w.getFullYear(),y=Math.floor(w.getMonth()/3)+1;m.push({year:g,quarter:y,label:`Q${y} ${g}`,startDate:new Date(g,(y-1)*3,1),endDate:new Date(g,y*3,0)})}const x=[];for(const v of m){const{data:w}=await se.from("procedure_logs").select("weighted_score").eq("user_id",f).gte("performed_date",v.startDate.toISOString().split("T")[0]).lte("performed_date",v.endDate.toISOString().split("T")[0]),g=(w==null?void 0:w.reduce((b,_)=>b+(_.weighted_score||0),0))||0,y=(w==null?void 0:w.length)||0;x.push({...v,totalWeighted:g,procedureCount:y,intensity:Math.min(100,y/20*100)})}i(x)}catch(m){console.error("Error loading quarterly progress:",m)}},h=f=>f===0?"bg-gray-100":f<25?"bg-green-100":f<50?"bg-green-200":f<75?"bg-green-300":"bg-green-400";return o?a.jsx(G,{className:"medical-card mb-8",children:a.jsx(ce,{className:"p-8",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs(G,{className:"medical-card",children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(Xi,{className:"w-5 h-5 text-orange-500"}),"Top Ausbildungslücken"]})}),a.jsx(ce,{children:t.length===0?a.jsx(ti,{children:a.jsx(si,{children:"Keine größeren Lücken identifiziert. Alle erforderlichen Prozeduren sind auf gutem Weg!"})}):a.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((f,m)=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Y,{variant:"outline",className:"text-xs",children:["#",m+1]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:f.procedure_title}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.module_name," • ",f.procedure_code]})]})]})}),a.jsxs("div",{className:"text-right min-w-32",children:[a.jsxs("div",{className:"text-sm font-medium",children:[Math.round(f.current_weighted)," / ",f.required]}),a.jsxs("div",{className:"text-xs text-orange-600",children:["Lücke: ",Math.round(f.gap)," Punkte"]}),a.jsx(ql,{value:f.current_weighted/f.required*100,className:"h-2 mt-1 w-20"})]})]},f.procedure_id))})})]}),a.jsxs(G,{className:"medical-card",children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(hs,{className:"w-5 h-5 text-blue-500"}),"Aktivitäts-Heatmap (Quartale)"]})}),a.jsxs(ce,{children:[a.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2",children:r.map(f=>a.jsxs("div",{className:`
                  p-3 rounded-medical border text-center text-xs font-medium
                  ${h(f.intensity)}
                  hover:scale-105 transition-transform cursor-pointer
                `,title:`${f.label}: ${f.procedureCount} Eingriffe (${Math.round(f.totalWeighted)} Punkte)`,children:[a.jsx("div",{children:f.label}),a.jsx("div",{className:"text-xs opacity-75 mt-1",children:f.procedureCount})]},`${f.year}-${f.quarter}`))}),a.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[a.jsx("span",{children:"Weniger Aktivität"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-100 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-200 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-300 rounded"}),a.jsx("div",{className:"w-3 h-3 bg-green-400 rounded"})]}),a.jsx("span",{children:"Mehr Aktivität"})]})]})]}),s.length>0&&a.jsxs(G,{className:"medical-card",children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(y$,{className:"w-5 h-5 text-yellow-500"}),"Rollen-Balance Analyse"]})}),a.jsx(ce,{children:(()=>{const f=s.reduce((x,v)=>{var w;return x+(((w=v.progress)==null?void 0:w.responsible_count)||0)},0),m=s.reduce((x,v)=>{var w,g,y;return x+(((w=v.progress)==null?void 0:w.responsible_count)||0)+(((g=v.progress)==null?void 0:g.instructing_count)||0)+(((y=v.progress)==null?void 0:y.assistant_count)||0)},0),p=m>0?f/m*100:0;return p>=30?a.jsx(ti,{children:a.jsxs(si,{children:["Ihre Rollen-Balance ist ausgezeichnet! ",Math.round(p),"% Ihrer Eingriffe als Verantwortlicher durchgeführt."]})}):a.jsxs(ti,{children:[a.jsx(Xi,{className:"h-4 w-4"}),a.jsxs(si,{children:["Achtung: Nur ",Math.round(p),"% Ihrer Eingriffe als Verantwortlicher. Ziel: ≥30% für optimale FMH-Bewertung. Fokus auf eigenständige Eingriffe empfohlen."]})]})})()})]})]})},N9=({runId:s,summary:e,stagingData:t,onClose:n,onImportComplete:r})=>{const[i,o]=j.useState(!1),[l,c]=j.useState("summary"),d=p=>{switch(p.status){case"matched":return a.jsxs(Y,{variant:"default",className:"bg-success text-success-foreground",children:[a.jsx(Vi,{className:"w-3 h-3 mr-1"}),p.match_method==="exact"?"Exakt":p.match_method==="alias"?"Alias":p.match_method==="fuzzy"?"Ähnlich":"Manuell"]});case"needs_review":return a.jsxs(Y,{variant:"destructive",children:[a.jsx(Xi,{className:"w-3 h-3 mr-1"}),"Prüfung nötig"]});default:return a.jsx(Y,{variant:"secondary",children:"Unbekannt"})}},h=p=>p>=.95?"text-success":p>=.8?"text-warning":"text-destructive",f=async()=>{o(!0);try{console.log("🚀 Starting import commit...");const p=t.filter(g=>g.status==="matched"&&g.matched_proc_id);if(p.length===0){Ie.error("Keine passenden Prozeduren zum Importieren gefunden.");return}const x=[];for(const g of p){const y={procedure_id:g.matched_proc_id,performed_date:e.standDate||new Date().toISOString().split("T")[0],hospital:`Importiert aus ${e.filename}`,notes:`PDF Import ${e.standDate||new Date().toLocaleDateString("de-DE")} - ${g.module_name}`};if(g.responsible>0)for(let b=0;b<g.responsible;b++)x.push({...y,role_in_surgery:"primary",notes:`${y.notes} - Verantwortlich ${b+1}/${g.responsible}`});if(g.instructing>0)for(let b=0;b<g.instructing;b++)x.push({...y,role_in_surgery:"instructing",notes:`${y.notes} - Instruierend ${b+1}/${g.instructing}`});if(g.assistant>0)for(let b=0;b<g.assistant;b++)x.push({...y,role_in_surgery:"assistant",notes:`${y.notes} - Assistent ${b+1}/${g.assistant}`})}console.log(`📝 Creating ${x.length} procedure logs...`);const{error:v}=await se.from("procedure_logs").insert(x);if(v)throw console.error("❌ Insert error:",v),v;const{error:w}=await se.from("import_runs").update({status:"completed",finished_at:new Date().toISOString(),summary_json:{imported:x.length,matched:p.length,modules:e.modules.map(g=>g.name)}}).eq("id",s);if(w)throw console.error("❌ Update error:",w),w;console.log("✅ Import completed successfully!"),Ie.success(`Import erfolgreich! ${x.length} Einträge wurden importiert.`),r()}catch(p){console.error("❌ Import failed:",p),Ie.error(`Import fehlgeschlagen: ${p.message}`)}finally{o(!1)}},m=async()=>{try{await se.from("import_runs").update({status:"cancelled"}).eq("id",s),Ie.info("Import wurde abgebrochen."),n()}catch(p){console.error("Error cancelling import:",p),Ie.error("Fehler beim Abbrechen des Imports.")}};return a.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[a.jsx(G,{children:a.jsxs(Ae,{children:[a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(c$,{className:"w-5 h-5"}),"PDF Import Vorschau"]}),a.jsxs(Qr,{children:["Datei: ",e.filename,e.standDate&&` • Stand: ${new Date(e.standDate).toLocaleDateString("de-DE")}`]})]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(K,{variant:l==="summary"?"default":"outline",onClick:()=>c("summary"),children:"Übersicht"}),a.jsxs(K,{variant:l==="modules"?"default":"outline",onClick:()=>c("modules"),children:["Module (",e.modules.length,")"]}),a.jsxs(K,{variant:l==="procedures"?"default":"outline",onClick:()=>c("procedures"),children:["Prozeduren (",e.totalProcedures,")"]})]}),l==="summary"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(G,{children:[a.jsx(Ae,{className:"pb-2",children:a.jsx(ke,{className:"text-lg",children:"Gesamt"})}),a.jsxs(ce,{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.totalProcedures}),a.jsx("p",{className:"text-muted-foreground",children:"Prozeduren erkannt"})]})]}),a.jsxs(G,{children:[a.jsx(Ae,{className:"pb-2",children:a.jsx(ke,{className:"text-lg text-success",children:"Zugeordnet"})}),a.jsxs(ce,{children:[a.jsx("div",{className:"text-2xl font-bold text-success",children:e.matched}),a.jsx("p",{className:"text-muted-foreground",children:"Automatisch zugeordnet"})]})]}),a.jsxs(G,{children:[a.jsx(Ae,{className:"pb-2",children:a.jsx(ke,{className:"text-lg text-warning",children:"Prüfung nötig"})}),a.jsxs(ce,{children:[a.jsx("div",{className:"text-2xl font-bold text-warning",children:e.needsReview}),a.jsx("p",{className:"text-muted-foreground",children:"Manuelle Prüfung"})]})]})]}),l==="modules"&&a.jsxs(G,{children:[a.jsxs(Ae,{children:[a.jsx(ke,{children:"Erkannte Module"}),a.jsx(Qr,{children:"Übersicht der aus dem PDF extrahierten Module mit Summen"})]}),a.jsx(ce,{children:a.jsxs(su,{children:[a.jsx(nu,{children:a.jsxs(Gn,{children:[a.jsx(Ne,{children:"Modul"}),a.jsx(Ne,{className:"text-right",children:"Minimum"}),a.jsx(Ne,{className:"text-right",children:"Verantwortlich"}),a.jsx(Ne,{className:"text-right",children:"Instruierend"}),a.jsx(Ne,{className:"text-right",children:"Assistent"}),a.jsx(Ne,{className:"text-right",children:"Total"})]})}),a.jsx(ru,{children:e.modules.map((p,x)=>a.jsxs(Gn,{children:[a.jsx(Se,{className:"font-medium",children:p.name}),a.jsx(Se,{className:"text-right",children:p.minimum}),a.jsx(Se,{className:"text-right",children:p.responsible}),a.jsx(Se,{className:"text-right",children:p.instructing}),a.jsx(Se,{className:"text-right",children:p.assistant}),a.jsx(Se,{className:"text-right font-semibold",children:p.total})]},x))})]})})]}),l==="procedures"&&a.jsxs(G,{children:[a.jsxs(Ae,{children:[a.jsx(ke,{children:"Prozeduren Details"}),a.jsx(Qr,{children:"Alle erkannten Prozeduren mit Zuordnungsstatus"})]}),a.jsx(ce,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(su,{children:[a.jsx(nu,{children:a.jsxs(Gn,{children:[a.jsx(Ne,{children:"Prozedur"}),a.jsx(Ne,{children:"Modul"}),a.jsx(Ne,{children:"Status"}),a.jsx(Ne,{children:"Zugeordnet zu"}),a.jsx(Ne,{className:"text-right",children:"V"}),a.jsx(Ne,{className:"text-right",children:"I"}),a.jsx(Ne,{className:"text-right",children:"A"}),a.jsx(Ne,{className:"text-right",children:"Total"})]})}),a.jsx(ru,{children:t.map(p=>{var x;return a.jsxs(Gn,{children:[a.jsx(Se,{className:"font-medium",children:p.proc_name}),a.jsx(Se,{className:"text-sm text-muted-foreground",children:p.module_name}),a.jsx(Se,{children:d(p)}),a.jsx(Se,{children:(x=p.procedures)!=null&&x.title_de?a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:p.procedures.title_de}),p.match_confidence<1&&a.jsxs("div",{className:`text-xs ${h(p.match_confidence)}`,children:[(p.match_confidence*100).toFixed(0),"% Übereinstimmung"]})]}):a.jsx("span",{className:"text-muted-foreground",children:"Keine Zuordnung"})}),a.jsx(Se,{className:"text-right",children:p.responsible}),a.jsx(Se,{className:"text-right",children:p.instructing}),a.jsx(Se,{className:"text-right",children:p.assistant}),a.jsx(Se,{className:"text-right font-semibold",children:p.total})]},p.id)})})]})})})]}),a.jsxs("div",{className:"flex justify-between pt-4",children:[a.jsx(K,{variant:"outline",onClick:m,children:"Abbrechen"}),a.jsxs("div",{className:"flex gap-2",children:[e.needsReview>0&&a.jsxs(K,{variant:"outline",className:"flex items-center gap-2",children:[a.jsx(gS,{className:"w-4 h-4"}),e.needsReview," Prozeduren bearbeiten"]}),a.jsxs(K,{onClick:f,disabled:i||e.matched===0,className:"flex items-center gap-2",children:[a.jsx(cb,{className:"w-4 h-4"}),i?"Importiere...":`${e.matched} Prozeduren importieren`]})]})]})]})},Ks=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Wj=[.001,0,0,.001,0,0],Vw=1.35,zn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Do={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},GD="pdfjs_internal_editor_",be={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},Be={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},S9={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ts={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yx={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ot={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Du={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Rb={ERRORS:0,WARNINGS:1,INFOS:5},uy={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},jx={moveTo:0,lineTo:1,curveTo:2,closePath:3},A9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Mb=Rb.WARNINGS;function E9(s){Number.isInteger(s)&&(Mb=s)}function C9(){return Mb}function Ib(s){Mb>=Rb.INFOS&&console.log(`Info: ${s}`)}function we(s){Mb>=Rb.WARNINGS&&console.log(`Warning: ${s}`)}function nt(s){throw new Error(s)}function Bt(s,e){s||nt(e)}function k9(s){switch(s==null?void 0:s.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qD(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"){if(t.addDefaultProtocol&&s.startsWith("www.")){const r=s.match(/\./g);(r==null?void 0:r.length)>=2&&(s=`http://${s}`)}if(t.tryConvertEncoding)try{s=I9(s)}catch{}}const n=e?URL.parse(s,e):URL.parse(s);return k9(n)?n:null}function KD(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&qD(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Fe(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const pu=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class fk extends pu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Gw extends pu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Vj extends pu{constructor(e){super(e,"InvalidPDFException")}}class hy extends pu{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class P9 extends pu{constructor(e){super(e,"FormatError")}}class Yl extends pu{constructor(e){super(e,"AbortException")}}function YD(s){(typeof s!="object"||(s==null?void 0:s.length)===void 0)&&nt("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=s.subarray(r,i);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function Iv(s){typeof s!="string"&&nt("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function T9(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function R9(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function M9(){try{return new Function(""),!0}catch{return!1}}class Es{static get isLittleEndian(){return Fe(this,"isLittleEndian",R9())}static get isEvalSupported(){return Fe(this,"isEvalSupported",M9())}static get isOffscreenCanvasSupported(){return Fe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Fe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Fe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Fe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const qw=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));var eo,Xx,Gj;class fe{static makeHexColor(e,t,n){return`#${qw[e]}${qw[t]}${qw[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,n=0){const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const r=t[0],i=t[1],o=t[2],l=t[3],c=t[4],d=t[5];for(let h=0;h<6;h+=2){const f=e[n+h],m=e[n+h+1];e[n+h]=f*r+m*o+c,e[n+h+1]=f*i+m*l+d}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],o=t[2],l=t[3],c=t[4],d=t[5],h=e[0],f=e[1],m=e[2],p=e[3];let x=r*h+c,v=x,w=r*m+c,g=w,y=l*f+d,b=y,_=l*p+d,S=_;if(i!==0||o!==0){const A=i*h,C=i*m,P=o*f,T=o*p;x+=P,g+=P,w+=T,v+=T,y+=A,S+=A,_+=C,b+=C}n[0]=Math.min(n[0],x,w,v,g),n[1]=Math.min(n[1],y,_,b,S),n[2]=Math.max(n[2],x,w,v,g),n[3]=Math.max(n[3],y,_,b,S)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],o=e[3],l=n**2+r**2,c=n*i+r*o,d=i**2+o**2,h=(l+d)/2,f=Math.sqrt(h**2-(l*d-c**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[n,i,r,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,o,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],t,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],t,c),k(this,eo,Gj).call(this,e,n,i,l,t,r,o,c,3*(-e+3*(n-i)+l),6*(e-2*n+i),3*(n-e),d),k(this,eo,Gj).call(this,e,n,i,l,t,r,o,c,3*(-t+3*(r-o)+c),6*(t-2*r+o),3*(r-t),d)}}eo=new WeakSet,Xx=function(e,t,n,r,i,o,l,c,d,h){if(d<=0||d>=1)return;const f=1-d,m=d*d,p=m*d,x=f*(f*(f*e+3*d*t)+3*m*n)+p*r,v=f*(f*(f*i+3*d*o)+3*m*l)+p*c;h[0]=Math.min(h[0],x),h[1]=Math.min(h[1],v),h[2]=Math.max(h[2],x),h[3]=Math.max(h[3],v)},Gj=function(e,t,n,r,i,o,l,c,d,h,f,m){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&k(this,eo,Xx).call(this,e,t,n,r,i,o,l,c,-f/h,m);return}const p=h**2-4*f*d;if(p<0)return;const x=Math.sqrt(p),v=2*d;k(this,eo,Xx).call(this,e,t,n,r,i,o,l,c,(-h+x)/v,m),k(this,eo,Xx).call(this,e,t,n,r,i,o,l,c,(-h-x)/v,m)},E(fe,eo);function I9(s){return decodeURIComponent(escape(s))}let Kw=null,mk=null;function D9(s){return Kw||(Kw=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,mk=new Map([["ﬅ","ſt"]])),s.replaceAll(Kw,(e,t,n)=>t?t.normalize("NFKC"):mk.get(n))}function XD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),YD(s)}const tA="pdfjs_internal_id_";function O9(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,r,...i]=t;if(!s(n)&&!Number.isInteger(n)||!e(r))return!1;const o=i.length;let l=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Ys(s,e,t){return Math.min(Math.max(s,e),t)}function QD(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(YD(s))}function L9(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):Iv(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});const ca="http://www.w3.org/2000/svg",Sc=class Sc{};q(Sc,"CSS",96),q(Sc,"PDF",72),q(Sc,"PDF_TO_CSS_UNITS",Sc.CSS/Sc.PDF);let Xl=Sc;async function Dv(s,e="text"){if(Tm(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",s,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Ov{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=i,this.offsetY=o,n*=t;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,f,m,p;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,f=0,m=0,p=1;break;case 90:h=0,f=1,m=1,p=0;break;case 270:h=0,f=-1,m=-1,p=0;break;case 0:h=1,f=0,m=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(m=-m,p=-p);let x,v,w,g;h===0?(x=Math.abs(d-e[1])*n+i,v=Math.abs(c-e[0])*n+o,w=(e[3]-e[1])*n,g=(e[2]-e[0])*n):(x=Math.abs(c-e[0])*n+i,v=Math.abs(d-e[1])*n+o,w=(e[2]-e[0])*n,g=(e[3]-e[1])*n),this.transform=[h*n,f*n,m*n,p*n,x-h*n*c-m*n*d,v-f*n*c-p*n*d],this.width=w,this.height=g}get rawDims(){const e=this.viewBox;return Fe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new Ov({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return fe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];fe.applyTransform(t,this.transform);const n=[e[2],e[3]];return fe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return fe.applyInverseTransform(n,this.transform),n}}class sA extends pu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Db(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function nA(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function F9(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function $9(s,e="document.pdf"){if(typeof s!="string")return e;if(Db(s))return we('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const r=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},i=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(i.test(o))return r(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const d of l)if(i.test(d))return r(d);const c=Array.from(n.searchParams.keys()).reverse();for(const d of c)if(i.test(d))return r(d)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return r(c[0])}return e}class pk{constructor(){q(this,"started",Object.create(null));q(this,"times",[])}time(e){e in this.started&&we(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||we(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-r}ms
`);return e.join("")}}function Tm(s,e){const t=e?URL.parse(s,e):URL.parse(s);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Nr(s){s.preventDefault()}function Lt(s){s.preventDefault(),s.stopPropagation()}function z9(s){console.log("Deprecated API usage: "+s)}var Bp;class fy{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Bp)||N(this,Bp,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Bp).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const d=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,d==="-"?(o+=h,l+=f):d==="+"&&(o-=h,l-=f),new Date(Date.UTC(n,r,i,o,l,c))}}Bp=new WeakMap,E(fy,Bp);function B9(s,{scale:e=1,rotation:t=0}){const{width:n,height:r}=s.attributes.style,i=[0,0,parseInt(n),parseInt(r)];return new Ov({viewBox:i,userUnit:1,scale:e,rotation:t})}function Ob(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(we(`Not a valid color format: "${s}"`),[0,0,0])}function U9(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,Ob(n))}e.remove()}function bt(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform();return[e,t,n,r,i,o]}function hi(s){const{a:e,b:t,c:n,d:r,e:i,f:o}=s.getTransform().invertSelf();return[e,t,n,r,i,o]}function au(s,e,t=!1,n=!0){if(e instanceof Ov){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=s,l=Es.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${i}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(o.width=h,o.height=f):(o.width=f,o.height=h)}n&&s.setAttribute("data-main-rotation",e.rotation)}class ea{constructor(){const{pixelRatio:e}=ea;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r,i=-1){let o=1/0,l=1/0,c=1/0;n=ea.capPixels(n,i),n>0&&(o=Math.sqrt(n/(e*t))),r!==-1&&(l=r/e,c=r/t);const d=Math.min(o,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const qj=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Bo,Uo,ir,xa,Up,_h,Nh,Hp,Sy,JD,Ss,ZD,eO,Ou,Rm;const ma=class ma{constructor(e){E(this,Ss);E(this,Bo,null);E(this,Uo,null);E(this,ir);E(this,xa,null);E(this,Up,null);E(this,_h,null);E(this,Nh,null);N(this,ir,e),u(ma,Hp)||N(ma,Hp,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=N(this,Bo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,ir)._uiManager._signal;e.addEventListener("contextmenu",Nr,{signal:t}),e.addEventListener("pointerdown",k(ma,Sy,JD),{signal:t});const n=N(this,xa,document.createElement("div"));n.className="buttons",e.append(n);const r=u(this,ir).toolbarPosition;if(r){const{style:i}=e,o=u(this,ir)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Bo)}hide(){var e;u(this,Bo).classList.add("hidden"),(e=u(this,Uo))==null||e.hideDropdown()}show(){var e,t;u(this,Bo).classList.remove("hidden"),(e=u(this,Up))==null||e.shown(),(t=u(this,_h))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,ir),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",u(ma,Hp)[e]),k(this,Ss,Ou).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),u(this,xa).append(n)}async addAltText(e){const t=await e.render();k(this,Ss,Ou).call(this,t),u(this,xa).append(t,u(this,Ss,Rm)),N(this,Up,e)}addComment(e){if(u(this,_h))return;const t=e.render();t&&(k(this,Ss,Ou).call(this,t),u(this,xa).prepend(t,u(this,Ss,Rm)),N(this,_h,e),e.toolbar=this)}addColorPicker(e){if(u(this,Uo))return;N(this,Uo,e);const t=e.renderButton();k(this,Ss,Ou).call(this,t),u(this,xa).append(t,u(this,Ss,Rm))}async addEditSignatureButton(e){const t=N(this,Nh,await e.renderEditButton(u(this,ir)));k(this,Ss,Ou).call(this,t),u(this,xa).append(t,u(this,Ss,Rm))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){u(this,Nh)&&(u(this,Nh).title=e)}remove(){var e;u(this,Bo).remove(),(e=u(this,Uo))==null||e.destroy(),N(this,Uo,null)}};Bo=new WeakMap,Uo=new WeakMap,ir=new WeakMap,xa=new WeakMap,Up=new WeakMap,_h=new WeakMap,Nh=new WeakMap,Hp=new WeakMap,Sy=new WeakSet,JD=function(e){e.stopPropagation()},Ss=new WeakSet,ZD=function(e){u(this,ir)._focusEventsAllowed=!1,Lt(e)},eO=function(e){u(this,ir)._focusEventsAllowed=!0,Lt(e)},Ou=function(e){const t=u(this,ir)._uiManager._signal;e.addEventListener("focusin",k(this,Ss,ZD).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",k(this,Ss,eO).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Nr,{signal:t})},Rm=function(){const e=document.createElement("div");return e.className="divider",e},E(ma,Sy),E(ma,Hp,null);let Kj=ma;var Wp,Lc,Fc,Ql,tO,sO,nO;class H9{constructor(e){E(this,Ql);E(this,Wp,null);E(this,Lc,null);E(this,Fc);N(this,Fc,e)}show(e,t,n){const[r,i]=k(this,Ql,sO).call(this,t,n),{style:o}=u(this,Lc)||N(this,Lc,k(this,Ql,tO).call(this));e.append(u(this,Lc)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Lc).remove()}}Wp=new WeakMap,Lc=new WeakMap,Fc=new WeakMap,Ql=new WeakSet,tO=function(){const e=N(this,Lc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Nr,{signal:u(this,Fc)._signal});const t=N(this,Wp,document.createElement("div"));return t.className="buttons",e.append(t),k(this,Ql,nO).call(this),e},sO=function(e,t){let n=0,r=0;for(const i of e){const o=i.y+i.height;if(o<n)continue;const l=i.x+(t?i.width:0);if(o>n){r=l,n=o;continue}t?l>r&&(r=l):l<r&&(r=l)}return[t?1-r:r,n]},nO=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=u(this,Fc)._signal;e.addEventListener("contextmenu",Nr,{signal:n}),e.addEventListener("click",()=>{u(this,Fc).highlightSelection("floating_button")},{signal:n}),u(this,Wp).append(e)};function rO(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}var Ay;class W9{constructor(){E(this,Ay,0)}get id(){return`${GD}${ts(this,Ay)._++}`}}Ay=new WeakMap;var Sh,Vp,Is,Ah,Qx;const _A=class _A{constructor(){E(this,Ah);E(this,Sh,XD());E(this,Vp,0);E(this,Is,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Fe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return k(this,Ah,Qx).call(this,`${t}_${n}_${r}_${i}`,e)}async getFromUrl(e){return k(this,Ah,Qx).call(this,e,e)}async getFromBlob(e,t){const n=await t;return k(this,Ah,Qx).call(this,e,n)}async getFromId(e){u(this,Is)||N(this,Is,new Map);const t=u(this,Is).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,Is)||N(this,Is,new Map);let n=u(this,Is).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${u(this,Sh)}_${ts(this,Vp)._++}`,refCounter:1,isSvg:!1},u(this,Is).set(e,n),u(this,Is).set(n.id,n),n}getSvgUrl(e){const t=u(this,Is).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;u(this,Is)||N(this,Is,new Map);const t=u(this,Is).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Sh)}_`)}};Sh=new WeakMap,Vp=new WeakMap,Is=new WeakMap,Ah=new WeakSet,Qx=async function(e,t){u(this,Is)||N(this,Is,new Map);let n=u(this,Is).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${u(this,Sh)}_${ts(this,Vp)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await Dv(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=_A._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((d,h)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,d()},o.onload=async()=>{const f=n.svgUrl=o.result;l.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=o.onerror=h});o.readAsDataURL(r),await c}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){we(r),n=null}return u(this,Is).set(e,n),n&&u(this,Is).set(n.id,n),n};let Yj=_A;var Pt,Ho,Gp,yt;class V9{constructor(e=128){E(this,Pt,[]);E(this,Ho,!1);E(this,Gp);E(this,yt,-1);N(this,Gp,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(r&&e(),u(this,Ho))return;const c={cmd:e,undo:t,post:n,type:i};if(u(this,yt)===-1){u(this,Pt).length>0&&(u(this,Pt).length=0),N(this,yt,0),u(this,Pt).push(c);return}if(o&&u(this,Pt)[u(this,yt)].type===i){l&&(c.undo=u(this,Pt)[u(this,yt)].undo),u(this,Pt)[u(this,yt)]=c;return}const d=u(this,yt)+1;d===u(this,Gp)?u(this,Pt).splice(0,1):(N(this,yt,d),d<u(this,Pt).length&&u(this,Pt).splice(d)),u(this,Pt).push(c)}undo(){if(u(this,yt)===-1)return;N(this,Ho,!0);const{undo:e,post:t}=u(this,Pt)[u(this,yt)];e(),t==null||t(),N(this,Ho,!1),N(this,yt,u(this,yt)-1)}redo(){if(u(this,yt)<u(this,Pt).length-1){N(this,yt,u(this,yt)+1),N(this,Ho,!0);const{cmd:e,post:t}=u(this,Pt)[u(this,yt)];e(),t==null||t(),N(this,Ho,!1)}}hasSomethingToUndo(){return u(this,yt)!==-1}hasSomethingToRedo(){return u(this,yt)<u(this,Pt).length-1}cleanType(e){if(u(this,yt)!==-1){for(let t=u(this,yt);t>=0;t--)if(u(this,Pt)[t].type!==e){u(this,Pt).splice(t+1,u(this,yt)-t),N(this,yt,t);return}u(this,Pt).length=0,N(this,yt,-1)}}destroy(){N(this,Pt,null)}}Pt=new WeakMap,Ho=new WeakMap,Gp=new WeakMap,yt=new WeakMap;var Ey,iO;class Lv{constructor(e){E(this,Ey);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Es.platform;for(const[n,r,i={}]of e)for(const o of n){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(k(this,Ey,iO).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:l=null}}=n;l&&!l(e,t)||(r.bind(e,...o,t)(),i||Lt(t))}}Ey=new WeakSet,iO=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Cy=class Cy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return U9(e),Fe(this,"_colors",e)}convert(e){const t=Ob(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((i,o)=>i===t[o]))return Cy._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}};q(Cy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Xj=Cy;var Eh,Sn,qt,fs,Ch,ya,kh,ar,$c,Wo,Vo,Ph,zc,bi,Lr,Bc,qp,Kp,Th,Yp,wi,Go,Rh,qo,ji,ky,Ko,Xp,Yo,Uc,Mh,Xo,Qp,ss,Qe,ba,Qo,Jo,Jp,Zp,Zo,_i,wa,eg,tg,or,te,Jx,Qj,aO,oO,Zx,lO,cO,dO,Jj,uO,Zj,e_,hO,Us,da,fO,mO,t_,pO,Mm,s_;const sh=class sh{constructor(e,t,n,r,i,o,l,c,d,h,f,m,p,x,v,w){E(this,te);E(this,Eh,new AbortController);E(this,Sn,null);E(this,qt,new Map);E(this,fs,new Map);E(this,Ch,null);E(this,ya,null);E(this,kh,null);E(this,ar,new V9);E(this,$c,null);E(this,Wo,null);E(this,Vo,null);E(this,Ph,0);E(this,zc,new Set);E(this,bi,null);E(this,Lr,null);E(this,Bc,new Set);q(this,"_editorUndoBar",null);E(this,qp,!1);E(this,Kp,!1);E(this,Th,!1);E(this,Yp,null);E(this,wi,null);E(this,Go,null);E(this,Rh,null);E(this,qo,!1);E(this,ji,null);E(this,ky,new W9);E(this,Ko,!1);E(this,Xp,!1);E(this,Yo,null);E(this,Uc,null);E(this,Mh,null);E(this,Xo,null);E(this,Qp,null);E(this,ss,be.NONE);E(this,Qe,new Set);E(this,ba,null);E(this,Qo,null);E(this,Jo,null);E(this,Jp,null);E(this,Zp,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,Zo,[0,0]);E(this,_i,null);E(this,wa,null);E(this,eg,null);E(this,tg,null);E(this,or,null);const g=this._signal=u(this,Eh).signal;N(this,wa,e),N(this,eg,t),N(this,tg,n),N(this,Ch,r),N(this,$c,i),N(this,Qo,o),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:g}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),l._on("setpreference",this.onSetPreference.bind(this),{signal:g}),l._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:g}),k(this,te,lO).call(this),k(this,te,hO).call(this),k(this,te,Jj).call(this),N(this,ya,c.annotationStorage),N(this,Yp,c.filterFactory),N(this,Jo,d),N(this,Rh,h||null),N(this,qp,f),N(this,Kp,m),N(this,Th,p),N(this,Qp,x||null),this.viewParameters={realScale:Xl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=w!==!1}static get _keyboardManager(){const e=sh.prototype,t=o=>u(o,wa).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Lv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&u(o,wa).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&u(o,wa).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,n,r,i,o,l,c,d;(e=u(this,or))==null||e.resolve(),N(this,or,null),(t=u(this,Eh))==null||t.abort(),N(this,Eh,null),this._signal=null;for(const h of u(this,fs).values())h.destroy();u(this,fs).clear(),u(this,qt).clear(),u(this,Bc).clear(),(n=u(this,Xo))==null||n.clear(),N(this,Sn,null),u(this,Qe).clear(),u(this,ar).destroy(),(r=u(this,Ch))==null||r.destroy(),(i=u(this,$c))==null||i.destroy(),(o=u(this,Qo))==null||o.destroy(),(l=u(this,ji))==null||l.hide(),N(this,ji,null),(c=u(this,Mh))==null||c.destroy(),N(this,Mh,null),u(this,wi)&&(clearTimeout(u(this,wi)),N(this,wi,null)),u(this,_i)&&(clearTimeout(u(this,_i)),N(this,_i,null)),(d=this._editorUndoBar)==null||d.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Qp)}get useNewAltTextFlow(){return u(this,Kp)}get useNewAltTextWhenAddingImage(){return u(this,Th)}get hcmFilter(){return Fe(this,"hcmFilter",u(this,Jo)?u(this,Yp).addHCMFilter(u(this,Jo).foreground,u(this,Jo).background):"none")}get direction(){return Fe(this,"direction",getComputedStyle(u(this,wa)).direction)}get _highlightColors(){return Fe(this,"_highlightColors",u(this,Rh)?new Map(u(this,Rh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Fe(this,"highlightColors",null);const t=new Map,n=!!u(this,Jo);for(const[r,i]of e){const o=r.endsWith("_HCM");if(n&&o){t.set(r.replace("_HCM",""),i);continue}!n&&!o&&t.set(r,i)}return Fe(this,"highlightColors",t)}get highlightColorNames(){return Fe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),N(this,Vo,e)}setMainHighlightColorPicker(e){N(this,Mh,e)}editAltText(e,t=!1){var n;(n=u(this,Ch))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!u(this,$c)}editComment(e,t){var n;(n=u(this,$c))==null||n.open(this,e,t)}getSignature(e){var t;(t=u(this,Qo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Qo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":N(this,Th,t);break}}onPageChanging({pageNumber:e}){N(this,Ph,e-1)}focusMainContainer(){u(this,wa).focus()}findParent(e,t){for(const n of u(this,fs).values()){const{x:r,y:i,width:o,height:l}=n.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+l)return n}return null}disableUserSelect(e=!1){u(this,eg).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Bc).add(e)}removeShouldRescale(e){u(this,Bc).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Xl.PDF_TO_CSS_UNITS;for(const n of u(this,Bc))n.onScaleChanging();(t=u(this,Vo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=t,l=t.toString(),d=k(this,te,Jx).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;t.empty();const f=k(this,te,Qj).call(this,d),m=u(this,ss)===be.NONE,p=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o,text:l}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(be.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&u(this,ya)&&!u(this,ya).has(e.id)&&u(this,ya).setValue(e.id,e)}a11yAlert(e,t=null){const n=u(this,tg);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,qo)&&(N(this,qo,!1),k(this,te,Zx).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Qe))if(t.div.contains(e)){N(this,Uc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Uc))return;const[e,t]=u(this,Uc);N(this,Uc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){k(this,te,Jj).call(this),k(this,te,Zj).call(this)}removeEditListeners(){k(this,te,uO).call(this),k(this,te,e_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of u(this,Lr))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of u(this,Lr))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=u(this,Sn))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of u(this,Qe)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of u(this,Lr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){we(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of n){const d=await r.deserialize(c);if(!d)return;i.push(d)}const o=()=>{for(const c of i)k(this,te,t_).call(this,c);k(this,te,s_).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(i){we(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,ss)!==be.NONE&&!this.isEditorHandlingKeyboard&&sh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,qo)&&(N(this,qo,!1),k(this,te,Zx).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(k(this,te,cO).call(this),k(this,te,Zj).call(this),k(this,te,Us).call(this,{isEditing:u(this,ss)!==be.NONE,isEmpty:k(this,te,Mm).call(this),hasSomethingToUndo:u(this,ar).hasSomethingToUndo(),hasSomethingToRedo:u(this,ar).hasSomethingToRedo(),hasSelectedEditor:!1})):(k(this,te,dO).call(this),k(this,te,e_).call(this),k(this,te,Us).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Lr)){N(this,Lr,e);for(const t of u(this,Lr))k(this,te,da).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,ky).id}get currentLayer(){return u(this,fs).get(u(this,Ph))}getLayer(e){return u(this,fs).get(e)}get currentPageIndex(){return u(this,Ph)}addLayer(e){u(this,fs).set(e.pageIndex,e),u(this,Ko)?e.enable():e.disable()}removeLayer(e){u(this,fs).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,r=!1,i=!1){var o,l,c;if(u(this,ss)!==e&&!(u(this,or)&&(await u(this,or).promise,!u(this,or)))){if(N(this,or,Promise.withResolvers()),(o=u(this,Vo))==null||o.commitOrRemove(),N(this,ss,e),e===be.NONE){this.setEditingState(!1),k(this,te,mO).call(this),(l=this._editorUndoBar)==null||l.hide(),u(this,or).resolve();return}e===be.SIGNATURE&&await((c=u(this,Qo))==null?void 0:c.loadSignatures()),this.setEditingState(!0),await k(this,te,fO).call(this),this.unselectAll();for(const d of u(this,fs).values())d.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),u(this,or).resolve();return}for(const d of u(this,qt).values())d.annotationElementId===t||d.id===t?(this.setSelected(d),i?d.editComment():r&&d.enterInEditMode()):d.unselect();u(this,or).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,ss)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,Lr)){switch(e){case Be.CREATE:this.currentLayer.addNewEditor(t);return;case Be.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,Jp)||N(this,Jp,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of u(this,Qe))n.updateParams(e,t);else for(const n of u(this,Lr))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const o of u(this,qt).values())o.editorType===e&&o.show(t);(((i=u(this,Jp))==null?void 0:i.get(Be.HIGHLIGHT_SHOW_ALL))??!0)!==t&&k(this,te,da).call(this,[[Be.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Xp)!==e){N(this,Xp,e);for(const t of u(this,fs).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of u(this,qt).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return u(this,qt).get(e)}addEditor(e){u(this,qt).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(u(this,wi)&&clearTimeout(u(this,wi)),N(this,wi,setTimeout(()=>{this.focusMainContainer(),N(this,wi,null)},0))),u(this,qt).delete(e.id),e.annotationElementId&&((t=u(this,Xo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,zc).has(e.annotationElementId))&&((n=u(this,ya))==null||n.remove(e.id))}addDeletedAnnotationElement(e){u(this,zc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,zc).has(e)}removeDeletedAnnotationElement(e){u(this,zc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Sn)!==e&&(N(this,Sn,e),e&&k(this,te,da).call(this,e.propertiesToUpdate))}updateUI(e){u(this,te,pO)===e&&k(this,te,da).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){k(this,te,da).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Qe).has(e)){u(this,Qe).delete(e),e.unselect(),k(this,te,Us).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Qe).add(e),e.select(),k(this,te,da).call(this,e.propertiesToUpdate),k(this,te,Us).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=u(this,Vo))==null||t.commitOrRemove();for(const n of u(this,Qe))n!==e&&n.unselect();u(this,Qe).clear(),u(this,Qe).add(e),e.select(),k(this,te,da).call(this,e.propertiesToUpdate),k(this,te,Us).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Qe).has(e)}get firstSelectedEditor(){return u(this,Qe).values().next().value}unselect(e){e.unselect(),u(this,Qe).delete(e),k(this,te,Us).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Qe).size!==0}get isEnterHandled(){return u(this,Qe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,ar).undo(),k(this,te,Us).call(this,{hasSomethingToUndo:u(this,ar).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:k(this,te,Mm).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,ar).redo(),k(this,te,Us).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,ar).hasSomethingToRedo(),isEmpty:k(this,te,Mm).call(this)})}addCommands(e){u(this,ar).add(e),k(this,te,Us).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:k(this,te,Mm).call(this)})}cleanUndoStack(e){u(this,ar).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,Qe)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},r=()=>{for(const o of t)k(this,te,t_).call(this,o)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Sn))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Sn)||this.hasSelection}selectAll(){for(const e of u(this,Qe))e.commit();k(this,te,s_).call(this,u(this,qt).values())}unselectAll(){var e;if(!(u(this,Sn)&&(u(this,Sn).commitOrRemove(),u(this,ss)!==be.NONE))&&!((e=u(this,Vo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,Qe))t.unselect();u(this,Qe).clear(),k(this,te,Us).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;u(this,Zo)[0]+=e,u(this,Zo)[1]+=t;const[r,i]=u(this,Zo),o=[...u(this,Qe)],l=1e3;u(this,_i)&&clearTimeout(u(this,_i)),N(this,_i,setTimeout(()=>{N(this,_i,null),u(this,Zo)[0]=u(this,Zo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)u(this,qt).has(c.id)&&(c.translateInPage(r,i),c.translationDone())},undo:()=>{for(const c of o)u(this,qt).has(c.id)&&(c.translateInPage(-r,-i),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),N(this,bi,new Map);for(const e of u(this,Qe))u(this,bi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,bi))return!1;this.disableUserSelect(!1);const e=u(this,bi);N(this,bi,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},l]of e)l.newX=r,l.newY=i,l.newPageIndex=o,t||(t=r!==l.savedX||i!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const n=(r,i,o,l)=>{if(u(this,qt).has(r.id)){const c=u(this,fs).get(l);c?r._setParentAndPosition(c,i,o):(r.pageIndex=l,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:l}]of e)n(r,i,o,l)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:l}]of e)n(r,i,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,bi))for(const n of u(this,bi).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Qe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Sn)===e}getActive(){return u(this,Sn)}getMode(){return u(this,ss)}get imageManager(){return Fe(this,"imageManager",new Yj)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,h=t.rangeCount;d<h;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,f,m)=>({x:(h-r)/o,y:1-(d+f-n)/i,width:m/o,height:f/i});break;case"180":l=(d,h,f,m)=>({x:1-(d+f-n)/i,y:1-(h+m-r)/o,width:f/i,height:m/o});break;case"270":l=(d,h,f,m)=>({x:1-(h+m-r)/o,y:(d-n)/i,width:m/o,height:f/i});break;default:l=(d,h,f,m)=>({x:(d-n)/i,y:(h-r)/o,width:f/i,height:m/o});break}const c=[];for(let d=0,h=t.rangeCount;d<h;d++){const f=t.getRangeAt(d);if(!f.collapsed)for(const{x:m,y:p,width:x,height:v}of f.getClientRects())x===0||v===0||c.push(l(m,p,x,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,kh)||N(this,kh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,kh))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=u(this,kh))==null?void 0:r.get(e.data.id);if(!t)return;const n=u(this,ya).getRawValue(t);n&&(u(this,ss)===be.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var i;const r=(i=u(this,Xo))==null?void 0:i.get(e);r&&(r.setCanvas(t,n),u(this,Xo).delete(e))}addMissingCanvas(e,t){(u(this,Xo)||N(this,Xo,new Map)).set(e,t)}};Eh=new WeakMap,Sn=new WeakMap,qt=new WeakMap,fs=new WeakMap,Ch=new WeakMap,ya=new WeakMap,kh=new WeakMap,ar=new WeakMap,$c=new WeakMap,Wo=new WeakMap,Vo=new WeakMap,Ph=new WeakMap,zc=new WeakMap,bi=new WeakMap,Lr=new WeakMap,Bc=new WeakMap,qp=new WeakMap,Kp=new WeakMap,Th=new WeakMap,Yp=new WeakMap,wi=new WeakMap,Go=new WeakMap,Rh=new WeakMap,qo=new WeakMap,ji=new WeakMap,ky=new WeakMap,Ko=new WeakMap,Xp=new WeakMap,Yo=new WeakMap,Uc=new WeakMap,Mh=new WeakMap,Xo=new WeakMap,Qp=new WeakMap,ss=new WeakMap,Qe=new WeakMap,ba=new WeakMap,Qo=new WeakMap,Jo=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,Zo=new WeakMap,_i=new WeakMap,wa=new WeakMap,eg=new WeakMap,tg=new WeakMap,or=new WeakMap,te=new WeakSet,Jx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Qj=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of u(this,fs).values())if(n.hasTextLayer(e))return n;return null},aO=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=k(this,te,Jx).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(u(this,ji)||N(this,ji,new H9(this)),u(this,ji).show(n,r,this.direction==="ltr"))},oO=function(){var i,o,l;const e=document.getSelection();if(!e||e.isCollapsed){u(this,ba)&&((i=u(this,ji))==null||i.hide(),N(this,ba,null),k(this,te,Us).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,ba))return;const r=k(this,te,Jx).call(this,e).closest(".textLayer");if(!r){u(this,ba)&&((o=u(this,ji))==null||o.hide(),N(this,ba,null),k(this,te,Us).call(this,{hasSelectedText:!1}));return}if((l=u(this,ji))==null||l.hide(),N(this,ba,t),k(this,te,Us).call(this,{hasSelectedText:!0}),!(u(this,ss)!==be.HIGHLIGHT&&u(this,ss)!==be.NONE)&&(u(this,ss)===be.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),N(this,qo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=u(this,ss)===be.HIGHLIGHT?k(this,te,Qj).call(this,r):null;c==null||c.toggleDrawing();const d=new AbortController,h=this.combinedSignal(d),f=m=>{m.type==="pointerup"&&m.button!==0||(d.abort(),c==null||c.toggleDrawing(!0),m.type==="pointerup"&&k(this,te,Zx).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}},Zx=function(e=""){u(this,ss)===be.HIGHLIGHT?this.highlightSelection(e):u(this,qp)&&k(this,te,aO).call(this)},lO=function(){document.addEventListener("selectionchange",k(this,te,oO).bind(this),{signal:this._signal})},cO=function(){if(u(this,Go))return;N(this,Go,new AbortController);const e=this.combinedSignal(u(this,Go));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},dO=function(){var e;(e=u(this,Go))==null||e.abort(),N(this,Go,null)},Jj=function(){if(u(this,Yo))return;N(this,Yo,new AbortController);const e=this.combinedSignal(u(this,Yo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},uO=function(){var e;(e=u(this,Yo))==null||e.abort(),N(this,Yo,null)},Zj=function(){if(u(this,Wo))return;N(this,Wo,new AbortController);const e=this.combinedSignal(u(this,Wo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},e_=function(){var e;(e=u(this,Wo))==null||e.abort(),N(this,Wo,null)},hO=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Us=function(e){Object.entries(e).some(([n,r])=>u(this,Zp)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,Zp),e)}),u(this,ss)===be.HIGHLIGHT&&e.hasSelectedEditor===!1&&k(this,te,da).call(this,[[Be.HIGHLIGHT_FREE,!0]]))},da=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},fO=async function(){if(!u(this,Ko)){N(this,Ko,!0);const e=[];for(const t of u(this,fs).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,qt).values())t.enable()}},mO=function(){if(this.unselectAll(),u(this,Ko)){N(this,Ko,!1);for(const e of u(this,fs).values())e.disable();for(const e of u(this,qt).values())e.disable()}},t_=function(e){const t=u(this,fs).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},pO=function(){let e=null;for(e of u(this,Qe));return e},Mm=function(){if(u(this,qt).size===0)return!0;if(u(this,qt).size===1)for(const e of u(this,qt).values())return e.isEmpty();return!1},s_=function(e){for(const t of u(this,Qe))t.unselect();u(this,Qe).clear();for(const t of e)t.isEmpty()||(u(this,Qe).add(t),t.select());k(this,te,Us).call(this,{hasSelectedEditor:this.hasSelection})},q(sh,"TRANSLATE_SMALL",1),q(sh,"TRANSLATE_BIG",10);let ou=sh;var ns,Ni,Fr,Ih,Si,An,Dh,Ai,dn,ja,Hc,Ei,el,Jr,Im,e0;const Hs=class Hs{constructor(e){E(this,Jr);E(this,ns,null);E(this,Ni,!1);E(this,Fr,null);E(this,Ih,null);E(this,Si,null);E(this,An,null);E(this,Dh,!1);E(this,Ai,null);E(this,dn,null);E(this,ja,null);E(this,Hc,null);E(this,Ei,!1);N(this,dn,e),N(this,Ei,e._uiManager.useNewAltTextFlow),u(Hs,el)||N(Hs,el,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Hs._l10n??(Hs._l10n=e)}async render(){const e=N(this,Fr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=N(this,Ih,document.createElement("span"));e.append(t),u(this,Ei)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Hs,el).missing),t.setAttribute("data-l10n-id",u(Hs,el)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=u(this,dn)._uiManager._signal;e.addEventListener("contextmenu",Nr,{signal:n}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const r=i=>{i.preventDefault(),u(this,dn)._uiManager.editAltText(u(this,dn)),u(this,Ei)&&u(this,dn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Jr,Im)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(N(this,Dh,!0),r(i))},{signal:n}),await k(this,Jr,e0).call(this),e}finish(){u(this,Fr)&&(u(this,Fr).focus({focusVisible:u(this,Dh)}),N(this,Dh,!1))}isEmpty(){return u(this,Ei)?u(this,ns)===null:!u(this,ns)&&!u(this,Ni)}hasData(){return u(this,Ei)?u(this,ns)!==null||!!u(this,ja):this.isEmpty()}get guessedText(){return u(this,ja)}async setGuessedText(e){u(this,ns)===null&&(N(this,ja,e),N(this,Hc,await Hs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),k(this,Jr,e0).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Ei)||u(this,ns)){(t=u(this,Ai))==null||t.remove(),N(this,Ai,null);return}if(!u(this,Ai)){const n=N(this,Ai,document.createElement("div"));n.className="noAltTextBadge",u(this,dn).div.append(n)}u(this,Ai).classList.toggle("hidden",!e)}serialize(e){let t=u(this,ns);return!e&&u(this,ja)===t&&(t=u(this,Hc)),{altText:t,decorative:u(this,Ni),guessedText:u(this,ja),textWithDisclaimer:u(this,Hc)}}get data(){return{altText:u(this,ns),decorative:u(this,Ni)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:i=!1}){n&&(N(this,ja,n),N(this,Hc,r)),!(u(this,ns)===e&&u(this,Ni)===t)&&(i||(N(this,ns,e),N(this,Ni,t)),k(this,Jr,e0).call(this))}toggle(e=!1){u(this,Fr)&&(!e&&u(this,An)&&(clearTimeout(u(this,An)),N(this,An,null)),u(this,Fr).disabled=!e)}shown(){u(this,dn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Jr,Im)}})}destroy(){var e,t;(e=u(this,Fr))==null||e.remove(),N(this,Fr,null),N(this,Ih,null),N(this,Si,null),(t=u(this,Ai))==null||t.remove(),N(this,Ai,null)}};ns=new WeakMap,Ni=new WeakMap,Fr=new WeakMap,Ih=new WeakMap,Si=new WeakMap,An=new WeakMap,Dh=new WeakMap,Ai=new WeakMap,dn=new WeakMap,ja=new WeakMap,Hc=new WeakMap,Ei=new WeakMap,el=new WeakMap,Jr=new WeakSet,Im=function(){return u(this,ns)&&"added"||u(this,ns)===null&&this.guessedText&&"review"||"missing"},e0=async function(){var r,i,o;const e=u(this,Fr);if(!e)return;if(u(this,Ei)){if(e.classList.toggle("done",!!u(this,ns)),e.setAttribute("data-l10n-id",u(Hs,el)[u(this,Jr,Im)]),(r=u(this,Ih))==null||r.setAttribute("data-l10n-id",u(Hs,el)[`${u(this,Jr,Im)}-label`]),!u(this,ns)){(i=u(this,Si))==null||i.remove();return}}else{if(!u(this,ns)&&!u(this,Ni)){e.classList.remove("done"),(o=u(this,Si))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,Si);if(!t){N(this,Si,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,dn).id}`;const l=100,c=u(this,dn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(u(this,An)),N(this,An,null)},{once:!0}),e.addEventListener("mouseenter",()=>{N(this,An,setTimeout(()=>{N(this,An,null),u(this,Si).classList.add("show"),u(this,dn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var d;u(this,An)&&(clearTimeout(u(this,An)),N(this,An,null)),(d=u(this,Si))==null||d.classList.remove("show")},{signal:c})}u(this,Ni)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,ns)),t.parentNode||e.append(t);const n=u(this,dn).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},E(Hs,el,null),q(Hs,"_l10n",null);let my=Hs;var Ci,Wc,$r,sg,_a,Oh,tl;class _x{constructor(e){E(this,Ci,null);E(this,Wc,!1);E(this,$r,null);E(this,sg,null);E(this,_a,null);E(this,Oh,null);E(this,tl,!1);N(this,$r,e),this.toolbar=null}render(){if(!u(this,$r)._uiManager.hasCommentManager())return null;const e=N(this,Ci,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=u(this,$r)._uiManager._signal;e.addEventListener("contextmenu",Nr,{signal:t}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:t});const n=r=>{r.preventDefault(),this.edit()};return e.addEventListener("click",n,{capture:!0,signal:t}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(N(this,Wc,!0),n(r))},{signal:t}),e}edit(){const{bottom:e,left:t,right:n}=u(this,$r).getClientDimensions(),r={top:e};u(this,$r)._uiManager.direction==="ltr"?r.right=n:r.left=t,u(this,$r)._uiManager.editComment(u(this,$r),r)}finish(){u(this,Ci)&&(u(this,Ci).focus({focusVisible:u(this,Wc)}),N(this,Wc,!1))}isDeleted(){return u(this,tl)||u(this,_a)===""}hasBeenEdited(){return this.isDeleted()||u(this,_a)!==u(this,sg)}serialize(){return this.data}get data(){return{text:u(this,_a),date:u(this,Oh),deleted:u(this,tl)}}set data(e){if(e===null){N(this,_a,""),N(this,tl,!0);return}N(this,_a,e),N(this,Oh,new Date),N(this,tl,!1)}setInitialText(e){N(this,sg,e),this.data=e}toggle(e=!1){u(this,Ci)&&(u(this,Ci).disabled=!e)}shown(){}destroy(){var e;(e=u(this,Ci))==null||e.remove(),N(this,Ci,null),N(this,_a,""),N(this,Oh,null),N(this,$r,null),N(this,Wc,!1),N(this,tl,!1)}}Ci=new WeakMap,Wc=new WeakMap,$r=new WeakMap,sg=new WeakMap,_a=new WeakMap,Oh=new WeakMap,tl=new WeakMap;var Lh,Vc,ng,rg,ig,ag,og,Na,Gc,Sa,qc,Aa,Jl,gO,vO,xO;const NA=class NA{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:l}){E(this,Jl);E(this,Lh);E(this,Vc,!1);E(this,ng,null);E(this,rg);E(this,ig);E(this,ag);E(this,og);E(this,Na,null);E(this,Gc);E(this,Sa,null);E(this,qc);E(this,Aa,null);N(this,Lh,e),N(this,ng,n),N(this,rg,t),N(this,ig,r),N(this,ag,i),N(this,og,o),N(this,qc,new AbortController),N(this,Gc,AbortSignal.any([l,u(this,qc).signal])),e.addEventListener("touchstart",k(this,Jl,gO).bind(this),{passive:!1,signal:u(this,Gc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ea.pixelRatio}destroy(){var e,t;(e=u(this,qc))==null||e.abort(),N(this,qc,null),(t=u(this,Na))==null||t.abort(),N(this,Na,null)}};Lh=new WeakMap,Vc=new WeakMap,ng=new WeakMap,rg=new WeakMap,ig=new WeakMap,ag=new WeakMap,og=new WeakMap,Na=new WeakMap,Gc=new WeakMap,Sa=new WeakMap,qc=new WeakMap,Aa=new WeakMap,Jl=new WeakSet,gO=function(e){var r,i,o;if((r=u(this,rg))!=null&&r.call(this))return;if(e.touches.length===1){if(u(this,Na))return;const l=N(this,Na,new AbortController),c=AbortSignal.any([u(this,Gc),l.signal]),d=u(this,Lh),h={capture:!0,signal:c,passive:!1},f=m=>{var p;m.pointerType==="touch"&&((p=u(this,Na))==null||p.abort(),N(this,Na,null))};d.addEventListener("pointerdown",m=>{m.pointerType==="touch"&&(Lt(m),f(m))},h),d.addEventListener("pointerup",f,h),d.addEventListener("pointercancel",f,h);return}if(!u(this,Aa)){N(this,Aa,new AbortController);const l=AbortSignal.any([u(this,Gc),u(this,Aa).signal]),c=u(this,Lh),d={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",k(this,Jl,vO).bind(this),d);const h=k(this,Jl,xO).bind(this);c.addEventListener("touchend",h,d),c.addEventListener("touchcancel",h,d),d.capture=!0,c.addEventListener("pointerdown",Lt,d),c.addEventListener("pointermove",Lt,d),c.addEventListener("pointercancel",Lt,d),c.addEventListener("pointerup",Lt,d),(i=u(this,ig))==null||i.call(this)}if(Lt(e),e.touches.length!==2||(o=u(this,ng))!=null&&o.call(this)){N(this,Sa,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),N(this,Sa,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},vO=function(e){var _;if(!u(this,Sa)||e.touches.length!==2)return;Lt(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:l}=n,c=u(this,Sa),{touch0X:d,touch0Y:h,touch1X:f,touch1Y:m}=c,p=f-d,x=m-h,v=o-r,w=l-i,g=Math.hypot(v,w)||1,y=Math.hypot(p,x)||1;if(!u(this,Vc)&&Math.abs(y-g)<=NA.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=o,c.touch1Y=l,!u(this,Vc)){N(this,Vc,!0);return}const b=[(r+o)/2,(i+l)/2];(_=u(this,ag))==null||_.call(this,b,y,g)},xO=function(e){var t;e.touches.length>=2||(u(this,Aa)&&(u(this,Aa).abort(),N(this,Aa,null),(t=u(this,og))==null||t.call(this)),u(this,Sa)&&(Lt(e),N(this,Sa,null),N(this,Vc,!1)))};let py=NA;var Kc,zr,pt,ms,Fh,sl,lg,Yc,ps,Xc,Ea,nl,cg,Qc,En,dg,Jc,Ca,ki,$h,zh,lr,Zc,ug,Py,ge,n_,hg,r_,t0,yO,bO,i_,s0,a_,wO,jO,_O,o_,NO,l_,SO,AO,EO,c_,Dm;const De=class De{constructor(e){E(this,ge);E(this,Kc,null);E(this,zr,null);E(this,pt,null);E(this,ms,null);E(this,Fh,!1);E(this,sl,null);E(this,lg,"");E(this,Yc,!1);E(this,ps,null);E(this,Xc,null);E(this,Ea,null);E(this,nl,null);E(this,cg,"");E(this,Qc,!1);E(this,En,null);E(this,dg,!1);E(this,Jc,!1);E(this,Ca,!1);E(this,ki,null);E(this,$h,0);E(this,zh,0);E(this,lr,null);E(this,Zc,null);q(this,"isSelected",!1);q(this,"_isCopy",!1);q(this,"_editToolbar",null);q(this,"_initialOptions",Object.create(null));q(this,"_initialData",null);q(this,"_isVisible",!0);q(this,"_uiManager",null);q(this,"_focusEventsAllowed",!0);E(this,ug,!1);E(this,Py,De._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=De.prototype._resizeWithKeyboard,t=ou.TRANSLATE_SMALL,n=ou.TRANSLATE_BIG;return Fe(this,"_resizerKeyboardManager",new Lv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],De.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Fe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new G9({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(De._l10n??(De._l10n=e),De._l10nResizer||(De._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),De._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);De._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,ug)}set _isDraggable(e){var t;N(this,ug,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Py)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):k(this,ge,Dm).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Qc)?N(this,Qc,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,o]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){k(this,ge,n_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,En)||N(this,En,[this.x,this.y,this.width,this.height]),k(this,ge,n_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,En)||N(this,En,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,d]=this.getBaseTranslation();o+=c,l+=d;const{style:h}=n;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,En)&&(u(this,En)[0]!==this.x||u(this,En)[1]!==this.y)}get _hasBeenResized(){return!!u(this,En)&&(u(this,En)[2]!==this.width||u(this,En)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=De,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:o,width:l,height:c}=this;if(l*=n,c*=r,i*=n,o*=r,this._mustFixPosition)switch(e){case 0:i=Ys(i,0,n-l),o=Ys(o,0,r-c);break;case 90:i=Ys(i,0,n-c),o=Ys(o,l,r);break;case 180:i=Ys(i,l,n),o=Ys(o,c,r);break;case 270:i=Ys(i,c,n),o=Ys(o,0,r-l);break}this.x=i/=n,this.y=o/=r;const[d,h]=this.getBaseTranslation();i+=d,o+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return k(n=De,hg,r_).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return k(n=De,hg,r_).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/n).toFixed(2)}%`,u(this,Yc)||(i.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),i=!u(this,Yc)&&t.endsWith("%");if(r&&i)return;const[o,l]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!u(this,Yc)&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,pt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,Jc))return this._editToolbar;this._editToolbar=new Kj(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=u(this,pt))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,pt)||(my.initialize(De._l10n),N(this,pt,new my(this)),u(this,Kc)&&(u(this,pt).data=u(this,Kc),N(this,Kc,null))),u(this,pt)}get altTextData(){var e;return(e=u(this,pt))==null?void 0:e.data}set altTextData(e){u(this,pt)&&(u(this,pt).data=e)}get guessedAltText(){var e;return(e=u(this,pt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,pt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,pt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,pt)&&!u(this,pt).isEmpty()}hasAltTextData(){var e;return((e=u(this,pt))==null?void 0:e.hasData())??!1}addCommentButton(){return u(this,ms)?u(this,ms):N(this,ms,new _x(this))}get commentColor(){return null}get comment(){const e=u(this,ms);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){u(this,ms)||N(this,ms,new _x(this)),u(this,ms).data=e}setCommentData(e){u(this,ms)||N(this,ms,new _x(this)),u(this,ms).setInitialText(e)}get hasEditedComment(){var e;return(e=u(this,ms))==null?void 0:e.hasBeenEdited()}async editComment(){u(this,ms)||N(this,ms,new _x(this)),u(this,ms).edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Fh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),k(this,ge,l_).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),rO(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,Zc)||N(this,Zc,new py({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:k(this,ge,wO).bind(this),onPinching:k(this,ge,jO).bind(this),onPinchEnd:k(this,ge,_O).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Es.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(N(this,Qc,!0),this._isDraggable){k(this,ge,NO).call(this,e);return}k(this,ge,o_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,ki)&&clearTimeout(u(this,ki)),N(this,ki,setTimeout(()=>{var e;N(this,ki,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/r,h=t/r,f=this.x*i,m=this.y*o,p=this.width*i,x=this.height*o;switch(n){case 0:return[f+d+l,o-m-h-x+c,f+d+p+l,o-m-h+c];case 90:return[f+h+l,o-m+d+c,f+h+x+l,o-m+d+p+c];case 180:return[f-d-p+l,o-m+h+c,f-d+l,o-m+h+x+c];case 270:return[f-h-x+l,o-m-d-p+c,f-h+l,o-m-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,o]=e,l=i-n,c=o-r;switch(this.rotation){case 0:return[n,t-o,l,c];case 90:return[n,t-r,c,l];case 180:return[i,t-r,l,c];case 270:return[i,t-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),N(this,Jc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),N(this,Jc,!1),!0):!1}isInEditMode(){return u(this,Jc)}shouldGetKeyboardEvents(){return u(this,Ca)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&n>0}rebuild(){k(this,ge,l_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){nt("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId});r.rotation=e.rotation,N(r,Kc,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[l,c,d,h]=r.getRectInCurrentCoords(e.rect,o);return r.x=l/i,r.y=c/o,r.width=d/i,r.height=h/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,nl))==null||e.abort(),N(this,nl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,ki)&&(clearTimeout(u(this,ki)),N(this,ki,null)),k(this,ge,Dm).call(this),this.removeEditToolbar(),u(this,lr)){for(const n of u(this,lr).values())clearTimeout(n);N(this,lr,null)}this.parent=null,(t=u(this,Zc))==null||t.destroy(),N(this,Zc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(k(this,ge,yO).call(this),u(this,ps).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),N(this,Ea,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,ps).children;if(!u(this,zr)){N(this,zr,Array.from(t));const o=k(this,ge,SO).bind(this),l=k(this,ge,AO).bind(this),c=this._uiManager._signal;for(const d of u(this,zr)){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",k(this,ge,EO).bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",De._l10nResizer[h])}}const n=u(this,zr)[0];let r=0;for(const o of t){if(o===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,zr).length/4);if(i!==r){if(i<r)for(let l=0;l<r-i;l++)u(this,ps).append(u(this,ps).firstChild);else if(i>r)for(let l=0;l<i-r;l++)u(this,ps).firstChild.before(u(this,ps).lastChild);let o=0;for(const l of t){const d=u(this,zr)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",De._l10nResizer[d])}}k(this,ge,c_).call(this,0),N(this,Ca,!0),u(this,ps).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Ca)&&k(this,ge,a_).call(this,u(this,cg),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){k(this,ge,Dm).call(this),this.div.focus()}select(){var e,t,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(n=u(this,pt))==null||n.toggleAltTextBadge(!1)}}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,(e=u(this,ps))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=u(this,pt))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,dg)}set isEditing(e){N(this,dg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){N(this,Yc,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,lr)||N(this,lr,new Map);const{action:n}=e;let r=u(this,lr).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),u(this,lr).delete(n),u(this,lr).size===0&&N(this,lr,null)},De._telemetryTimeout),u(this,lr).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),N(this,Fh,!1)}disable(){this.div&&(this.div.tabIndex=-1),N(this,Fh,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Kc=new WeakMap,zr=new WeakMap,pt=new WeakMap,ms=new WeakMap,Fh=new WeakMap,sl=new WeakMap,lg=new WeakMap,Yc=new WeakMap,ps=new WeakMap,Xc=new WeakMap,Ea=new WeakMap,nl=new WeakMap,cg=new WeakMap,Qc=new WeakMap,En=new WeakMap,dg=new WeakMap,Jc=new WeakMap,Ca=new WeakMap,ki=new WeakMap,$h=new WeakMap,zh=new WeakMap,lr=new WeakMap,Zc=new WeakMap,ug=new WeakMap,Py=new WeakMap,ge=new WeakSet,n_=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},hg=new WeakSet,r_=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},t0=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},yO=function(){if(u(this,ps))return;N(this,ps,document.createElement("div")),u(this,ps).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");u(this,ps).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",k(this,ge,bO).bind(this,n),{signal:t}),r.addEventListener("contextmenu",Nr,{signal:t}),r.tabIndex=-1}this.div.prepend(u(this,ps))},bO=function(e,t){var h;t.preventDefault();const{isMac:n}=Es.platform;if(t.button!==0||t.ctrlKey&&n)return;(h=u(this,pt))==null||h.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,N(this,Xc,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",k(this,ge,a_).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Lt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Nr,{signal:o}),N(this,Ea,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=u(this,pt))==null||f.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=l,this.div.style.cursor=c,k(this,ge,s0).call(this)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},i_=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[i,o]=this.parentDimensions;this.setDims(i*n,o*r),this.fixAndSetPosition(),this._onResized()},s0=function(){if(!u(this,Ea))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=u(this,Ea);N(this,Ea,null);const i=this.x,o=this.y,l=this.width,c=this.height;i===e&&o===t&&l===n&&c===r||this.addCommands({cmd:k(this,ge,i_).bind(this,i,o,l,c),undo:k(this,ge,i_).bind(this,e,t,n,r),mustExec:!0})},a_=function(e,t){const[n,r]=this.parentDimensions,i=this.x,o=this.y,l=this.width,c=this.height,d=De.MIN_SIZE/n,h=De.MIN_SIZE/r,f=k(this,ge,t0).call(this,this.rotation),m=($,D)=>[f[0]*$+f[2]*D,f[1]*$+f[3]*D],p=k(this,ge,t0).call(this,360-this.rotation),x=($,D)=>[p[0]*$+p[2]*D,p[1]*$+p[3]*D];let v,w,g=!1,y=!1;switch(e){case"topLeft":g=!0,v=($,D)=>[0,0],w=($,D)=>[$,D];break;case"topMiddle":v=($,D)=>[$/2,0],w=($,D)=>[$/2,D];break;case"topRight":g=!0,v=($,D)=>[$,0],w=($,D)=>[0,D];break;case"middleRight":y=!0,v=($,D)=>[$,D/2],w=($,D)=>[0,D/2];break;case"bottomRight":g=!0,v=($,D)=>[$,D],w=($,D)=>[0,0];break;case"bottomMiddle":v=($,D)=>[$/2,D],w=($,D)=>[$/2,0];break;case"bottomLeft":g=!0,v=($,D)=>[0,D],w=($,D)=>[$,0];break;case"middleLeft":y=!0,v=($,D)=>[0,D/2],w=($,D)=>[$,D/2];break}const b=v(l,c),_=w(l,c);let S=m(..._);const A=De._round(i+S[0]),C=De._round(o+S[1]);let P=1,T=1,O,z;if(t.fromKeyboard)({deltaX:O,deltaY:z}=t);else{const{screenX:$,screenY:D}=t,[M,R]=u(this,Xc);[O,z]=this.screenToPageTranslation($-M,D-R),u(this,Xc)[0]=$,u(this,Xc)[1]=D}if([O,z]=x(O/n,z/r),g){const $=Math.hypot(l,c);P=T=Math.max(Math.min(Math.hypot(_[0]-b[0]-O,_[1]-b[1]-z)/$,1/l,1/c),d/l,h/c)}else y?P=Ys(Math.abs(_[0]-b[0]-O),d,1)/l:T=Ys(Math.abs(_[1]-b[1]-z),h,1)/c;const F=De._round(l*P),B=De._round(c*T);S=m(...w(F,B));const I=A-S[0],H=C-S[1];u(this,En)||N(this,En,[this.x,this.y,this.width,this.height]),this.width=F,this.height=B,this.x=I,this.y=H,this.setDims(n*F,r*B),this.fixAndSetPosition(),this._onResizing()},wO=function(){var e;N(this,Ea,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,pt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},jO=function(e,t,n){let i=.7*(n/t)+1-.7;if(i===1)return;const o=k(this,ge,t0).call(this,this.rotation),l=(A,C)=>[o[0]*A+o[2]*C,o[1]*A+o[3]*C],[c,d]=this.parentDimensions,h=this.x,f=this.y,m=this.width,p=this.height,x=De.MIN_SIZE/c,v=De.MIN_SIZE/d;i=Math.max(Math.min(i,1/m,1/p),x/m,v/p);const w=De._round(m*i),g=De._round(p*i);if(w===m&&g===p)return;u(this,En)||N(this,En,[h,f,m,p]);const y=l(m/2,p/2),b=De._round(h+y[0]),_=De._round(f+y[1]),S=l(w/2,g/2);this.x=b-S[0],this.y=_-S[1],this.width=w,this.height=g,this.setDims(c*w,d*g),this.fixAndSetPosition(),this._onResizing()},_O=function(){var e;(e=u(this,pt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),k(this,ge,s0).call(this)},o_=function(e){const{isMac:t}=Es.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},NO=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},l=d=>{r.abort(),N(this,sl,null),N(this,Qc,!1),this._uiManager.endDragSession()||k(this,ge,o_).call(this,d),n&&this._onStopDragging()};t&&(N(this,$h,e.clientX),N(this,zh,e.clientY),N(this,sl,e.pointerId),N(this,lg,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:m}=d;if(m!==u(this,sl)){Lt(d);return}const[p,x]=this.screenToPageTranslation(h-u(this,$h),f-u(this,zh));N(this,$h,h),N(this,zh,f),this._uiManager.dragSelectedEditors(p,x)},o),window.addEventListener("touchmove",Lt,o),window.addEventListener("pointerdown",d=>{d.pointerType===u(this,lg)&&(u(this,Zc)||d.isPrimary)&&l(d),Lt(d)},o));const c=d=>{if(!u(this,sl)||u(this,sl)===d.pointerId){l(d);return}Lt(d)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},l_=function(){if(u(this,nl)||!this.div)return;N(this,nl,new AbortController);const e=this._uiManager.combinedSignal(u(this,nl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},SO=function(e){De._resizerKeyboardManager.exec(this,e)},AO=function(e){var t;u(this,Ca)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,ps)&&k(this,ge,Dm).call(this)},EO=function(e){N(this,cg,u(this,Ca)?e:"")},c_=function(e){if(u(this,zr))for(const t of u(this,zr))t.tabIndex=e},Dm=function(){N(this,Ca,!1),k(this,ge,c_).call(this,-1),k(this,ge,s0).call(this)},E(De,hg),q(De,"_l10n",null),q(De,"_l10nResizer",null),q(De,"_borderLineWidth",-1),q(De,"_colorManager",new Xj),q(De,"_zIndex",1),q(De,"_telemetryTimeout",1e3);let ot=De;class G9 extends ot{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const gk=3285377520,nr=4294901760,fi=65535;class CO{constructor(e){this.h1=e?e&4294967295:gk,this.h2=e?e&4294967295:gk}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let v=0,w=e.length;v<w;v++){const g=e.charCodeAt(v);g<=255?t[n++]=g:(t[n++]=g>>>8,t[n++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,i=n-r*4,o=new Uint32Array(t.buffer,0,r);let l=0,c=0,d=this.h1,h=this.h2;const f=3432918353,m=461845907,p=f&fi,x=m&fi;for(let v=0;v<r;v++)v&1?(l=o[v],l=l*f&nr|l*p&fi,l=l<<15|l>>>17,l=l*m&nr|l*x&fi,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=o[v],c=c*f&nr|c*p&fi,c=c<<15|c>>>17,c=c*m&nr|c*x&fi,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,i){case 3:l^=t[r*4+2]<<16;case 2:l^=t[r*4+1]<<8;case 1:l^=t[r*4],l=l*f&nr|l*p&fi,l=l<<15|l>>>17,l=l*m&nr|l*x&fi,r&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&nr|e*36045&fi,t=t*4283543511&nr|((t<<16|e>>>16)*2950163797&nr)>>>16,e^=t>>>1,e=e*444984403&nr|e*60499&fi,t=t*3301882366&nr|((t<<16|e>>>16)*3120437893&nr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const d_=Object.freeze({map:null,hash:"",transfer:void 0});var ed,td,gs,Ty,kO;class rA{constructor(){E(this,Ty);E(this,ed,!1);E(this,td,null);E(this,gs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=u(this,gs).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return u(this,gs).get(e)}remove(e){if(u(this,gs).delete(e),u(this,gs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of u(this,gs).values())if(t instanceof ot)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=u(this,gs).get(e);let r=!1;if(n!==void 0)for(const[i,o]of Object.entries(t))n[i]!==o&&(r=!0,n[i]=o);else r=!0,u(this,gs).set(e,t);r&&k(this,Ty,kO).call(this),t instanceof ot&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return u(this,gs).has(e)}get size(){return u(this,gs).size}resetModified(){u(this,ed)&&(N(this,ed,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PO(this)}get serializable(){if(u(this,gs).size===0)return d_;const e=new Map,t=new CO,n=[],r=Object.create(null);let i=!1;for(const[o,l]of u(this,gs)){const c=l instanceof ot?l.serialize(!1,r):l;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:d_}get editorStats(){let e=null;const t=new Map;for(const n of u(this,gs).values()){if(!(n instanceof ot))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:i}=r;t.has(i)||t.set(i,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[l,c]of Object.entries(r)){if(l==="type")continue;let d=o.get(l);d||(d=new Map,o.set(l,d));const h=d.get(c)??0;d.set(c,h+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){N(this,td,null)}get modifiedIds(){if(u(this,td))return u(this,td);const e=[];for(const t of u(this,gs).values())!(t instanceof ot)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return N(this,td,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,gs).entries()}}ed=new WeakMap,td=new WeakMap,gs=new WeakMap,Ty=new WeakSet,kO=function(){u(this,ed)||(N(this,ed,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fg;class PO extends rA{constructor(t){super();E(this,fg);const{map:n,hash:r,transfer:i}=t.serializable,o=structuredClone(n,i?{transfer:i}:null);N(this,fg,{map:o,hash:r,transfer:i})}get print(){nt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,fg)}get modifiedIds(){return Fe(this,"modifiedIds",{ids:new Set,hash:""})}}fg=new WeakMap;var Bh;class q9{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){E(this,Bh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Bh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||u(this,Bh).has(e.loadedName))){if(Bt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,l=new FontFace(r,i,o);this.addNativeFontFace(l);try{await l.load(),u(this,Bh).add(r),n==null||n(e)}catch{we(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw we(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Fe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Fe(this,"isSyncFontLoadingSupported",Ks||Es.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Bt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Fe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(_,S){return _.charCodeAt(S)<<24|_.charCodeAt(S+1)<<16|_.charCodeAt(S+2)<<8|_.charCodeAt(S+3)&255}function r(_,S,A,C){const P=_.substring(0,S),T=_.substring(S+A);return P+C+T}let i,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function h(_,S){if(++d>30){we("Load test font never loaded."),S();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){S();return}setTimeout(h.bind(null,_,S))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=r(m,976,f.length,f);const x=16,v=1482184792;let w=n(m,x);for(i=0,o=f.length-3;i<o;i+=4)w=w-v+n(f,i)|0;i<f.length&&(w=w-v+n(f+"XXX",i)|0),m=r(m,x,4,T9(w));const g=`url(data:font/opentype;base64,${btoa(m)});`,y=`@font-face {font-family:"${f}";src:${g}}`;this.insertRule(y);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const _ of[e.loadedName,f]){const S=this._document.createElement("span");S.textContent="Hi",S.style.fontFamily=_,b.append(S)}this._document.body.append(b),h(f,()=>{b.remove(),t.complete()})}}Bh=new WeakMap;class K9{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${QD(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(o){we(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}}function Y9(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(Ks)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function X9(s){if(Ks&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Iv(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s==null?void 0:s.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Nx(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const u_=s=>typeof s=="object"&&Number.isInteger(s==null?void 0:s.num)&&s.num>=0&&Number.isInteger(s==null?void 0:s.gen)&&s.gen>=0,Q9=s=>typeof s=="object"&&typeof(s==null?void 0:s.name)=="string",J9=O9.bind(null,u_,Q9);var ka,Ry;class Z9{constructor(){E(this,ka,new Map);E(this,Ry,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};u(this,Ry).then(()=>{for(const[r]of u(this,ka))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){we("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}u(this,ka).set(t,r)}removeEventListener(e,t){const n=u(this,ka).get(t);n==null||n(),u(this,ka).delete(t)}terminate(){for(const[,e]of u(this,ka))e==null||e();u(this,ka).clear()}}ka=new WeakMap,Ry=new WeakMap;const Sx={DATA:1,ERROR:2},Dt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function vk(){}function ln(s){if(s instanceof Yl||s instanceof Vj||s instanceof fk||s instanceof hy||s instanceof Gw)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Yl(s.message);case"InvalidPDFException":return new Vj(s.message);case"PasswordException":return new fk(s.message,s.code);case"ResponseException":return new hy(s.message,s.status,s.missing);case"UnknownErrorException":return new Gw(s.message,s.details)}return new Gw(s.message,s.toString())}var Uh,yr,TO,RO,MO,n0;class Om{constructor(e,t,n){E(this,yr);E(this,Uh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",k(this,yr,TO).bind(this),{signal:u(this,Uh).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:i,data:t,desiredSize:d.desiredSize},r),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:Dt.PULL,streamId:i,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Bt(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Dt.CANCEL,streamId:i,reason:ln(d)}),h.promise}},n)}destroy(){var e;(e=u(this,Uh))==null||e.abort(),N(this,Uh,null)}}Uh=new WeakMap,yr=new WeakSet,TO=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){k(this,yr,MO).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Sx.DATA)r.resolve(e.data);else if(e.callback===Sx.ERROR)r.reject(ln(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:n,targetName:r,callback:Sx.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:n,targetName:r,callback:Sx.ERROR,callbackId:e.callbackId,reason:ln(o)})});return}if(e.streamId){k(this,yr,RO).call(this,e);return}t(e.data)},RO=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(d,h=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=h,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Dt.ENQUEUE,streamId:t,chunk:d},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Dt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(d){Bt(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Dt.ERROR,streamId:t,reason:ln(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Dt.START_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:Dt.START_COMPLETE,streamId:t,reason:ln(d)})})},MO=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Dt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(ln(e.reason));break;case Dt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(ln(e.reason));break;case Dt.PULL:if(!l){i.postMessage({sourceName:n,targetName:r,stream:Dt.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||vk).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Dt.PULL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:Dt.PULL_COMPLETE,streamId:t,reason:ln(d)})});break;case Dt.ENQUEUE:if(Bt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Dt.CLOSE:if(Bt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),k(this,yr,n0).call(this,o,t);break;case Dt.ERROR:Bt(o,"error should have stream controller"),o.controller.error(ln(e.reason)),k(this,yr,n0).call(this,o,t);break;case Dt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(ln(e.reason)),k(this,yr,n0).call(this,o,t);break;case Dt.CANCEL:if(!l)break;const c=ln(e.reason);Promise.try(l.onCancel||vk,c).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Dt.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){i.postMessage({sourceName:n,targetName:r,stream:Dt.CANCEL_COMPLETE,streamId:t,reason:ln(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},n0=async function(e,t){var n,r,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var mg;class IO{constructor({enableHWA:e=!1}){E(this,mg,!1);N(this,mg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!u(this,mg)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nt("Abstract method `_createCanvas` called.")}}mg=new WeakMap;class eG extends IO{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class DO{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class xk extends DO{async _fetch(e){const t=await Dv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Iv(t)}}class OO{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(e=!1){}}var sd,Hh,Pa,Ta,Ds,nd,rd,re,Rs,Lm,Lu,r0,Fu,LO,h_,$u,Fm,$m,f_,zm;class tG extends OO{constructor({docId:t,ownerDocument:n=globalThis.document}){super();E(this,re);E(this,sd);E(this,Hh);E(this,Pa);E(this,Ta);E(this,Ds);E(this,nd);E(this,rd,0);N(this,Ta,t),N(this,Ds,n)}addFilter(t){if(!t)return"none";let n=u(this,re,Rs).get(t);if(n)return n;const[r,i,o]=k(this,re,r0).call(this,t),l=t.length===1?r:`${r}${i}${o}`;if(n=u(this,re,Rs).get(l),n)return u(this,re,Rs).set(t,n),n;const c=`g_${u(this,Ta)}_transfer_map_${ts(this,rd)._++}`,d=k(this,re,Fu).call(this,c);u(this,re,Rs).set(t,d),u(this,re,Rs).set(l,d);const h=k(this,re,$u).call(this,c);return k(this,re,$m).call(this,r,i,o,h),d}addHCMFilter(t,n){var x;const r=`${t}-${n}`,i="base";let o=u(this,re,Lm).get(i);if((o==null?void 0:o.key)===r||(o?((x=o.filter)==null||x.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},u(this,re,Lm).set(i,o)),!t||!n))return o.url;const l=k(this,re,zm).call(this,t);t=fe.makeHexColor(...l);const c=k(this,re,zm).call(this,n);if(n=fe.makeHexColor(...c),u(this,re,Lu).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let v=0;v<=255;v++){const w=v/255;d[v]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const h=d.join(","),f=`g_${u(this,Ta)}_hcm_filter`,m=o.filter=k(this,re,$u).call(this,f);k(this,re,$m).call(this,h,h,h,m),k(this,re,h_).call(this,m);const p=(v,w)=>{const g=l[v]/255,y=c[v]/255,b=new Array(w+1);for(let _=0;_<=w;_++)b[_]=g+_/w*(y-g);return b.join(",")};return k(this,re,$m).call(this,p(0,5),p(1,5),p(2,5),m),o.url=k(this,re,Fu).call(this,f),o.url}addAlphaFilter(t){let n=u(this,re,Rs).get(t);if(n)return n;const[r]=k(this,re,r0).call(this,[t]),i=`alpha_${r}`;if(n=u(this,re,Rs).get(i),n)return u(this,re,Rs).set(t,n),n;const o=`g_${u(this,Ta)}_alpha_map_${ts(this,rd)._++}`,l=k(this,re,Fu).call(this,o);u(this,re,Rs).set(t,l),u(this,re,Rs).set(i,l);const c=k(this,re,$u).call(this,o);return k(this,re,f_).call(this,r,c),l}addLuminosityFilter(t){let n=u(this,re,Rs).get(t||"luminosity");if(n)return n;let r,i;if(t?([r]=k(this,re,r0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",n=u(this,re,Rs).get(i),n)return u(this,re,Rs).set(t,n),n;const o=`g_${u(this,Ta)}_luminosity_map_${ts(this,rd)._++}`,l=k(this,re,Fu).call(this,o);u(this,re,Rs).set(t,l),u(this,re,Rs).set(i,l);const c=k(this,re,$u).call(this,o);return k(this,re,LO).call(this,c),t&&k(this,re,f_).call(this,r,c),l}addHighlightHCMFilter(t,n,r,i,o){var y;const l=`${n}-${r}-${i}-${o}`;let c=u(this,re,Lm).get(t);if((c==null?void 0:c.key)===l||(c?((y=c.filter)==null||y.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},u(this,re,Lm).set(t,c)),!n||!r))return c.url;const[d,h]=[n,r].map(k(this,re,zm).bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,x]=[i,o].map(k(this,re,zm).bind(this));m<f&&([f,m,p,x]=[m,f,x,p]),u(this,re,Lu).style.color="";const v=(b,_,S)=>{const A=new Array(256),C=(m-f)/S,P=b/255,T=(_-b)/(255*S);let O=0;for(let z=0;z<=S;z++){const F=Math.round(f+z*C),B=P+z*T;for(let I=O;I<=F;I++)A[I]=B;O=F+1}for(let z=O;z<256;z++)A[z]=A[O-1];return A.join(",")},w=`g_${u(this,Ta)}_hcm_${t}_filter`,g=c.filter=k(this,re,$u).call(this,w);return k(this,re,h_).call(this,g),k(this,re,$m).call(this,v(p[0],x[0],5),v(p[1],x[1],5),v(p[2],x[2],5),g),c.url=k(this,re,Fu).call(this,w),c.url}destroy(t=!1){var n,r,i,o;t&&((n=u(this,nd))!=null&&n.size)||((r=u(this,Pa))==null||r.parentNode.parentNode.remove(),N(this,Pa,null),(i=u(this,Hh))==null||i.clear(),N(this,Hh,null),(o=u(this,nd))==null||o.clear(),N(this,nd,null),N(this,rd,0))}}sd=new WeakMap,Hh=new WeakMap,Pa=new WeakMap,Ta=new WeakMap,Ds=new WeakMap,nd=new WeakMap,rd=new WeakMap,re=new WeakSet,Rs=function(){return u(this,Hh)||N(this,Hh,new Map)},Lm=function(){return u(this,nd)||N(this,nd,new Map)},Lu=function(){if(!u(this,Pa)){const t=u(this,Ds).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=u(this,Ds).createElementNS(ca,"svg");r.setAttribute("width",0),r.setAttribute("height",0),N(this,Pa,u(this,Ds).createElementNS(ca,"defs")),t.append(r),r.append(u(this,Pa)),u(this,Ds).body.append(t)}return u(this,Pa)},r0=function(t){if(t.length===1){const d=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const f=h.join(",");return[f,f,f]}const[n,r,i]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,l[d]=r[d]/255,c[d]=i[d]/255;return[o.join(","),l.join(","),c.join(",")]},Fu=function(t){if(u(this,sd)===void 0){N(this,sd,"");const n=u(this,Ds).URL;n!==u(this,Ds).baseURI&&(Db(n)?we('#createUrl: ignore "data:"-URL for performance reasons.'):N(this,sd,KD(n,"")))}return`url(${u(this,sd)}#${t})`},LO=function(t){const n=u(this,Ds).createElementNS(ca,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},h_=function(t){const n=u(this,Ds).createElementNS(ca,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},$u=function(t){const n=u(this,Ds).createElementNS(ca,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),u(this,re,Lu).append(n),n},Fm=function(t,n,r){const i=u(this,Ds).createElementNS(ca,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},$m=function(t,n,r,i){const o=u(this,Ds).createElementNS(ca,"feComponentTransfer");i.append(o),k(this,re,Fm).call(this,o,"feFuncR",t),k(this,re,Fm).call(this,o,"feFuncG",n),k(this,re,Fm).call(this,o,"feFuncB",r)},f_=function(t,n){const r=u(this,Ds).createElementNS(ca,"feComponentTransfer");n.append(r),k(this,re,Fm).call(this,r,"feFuncA",t)},zm=function(t){return u(this,re,Lu).style.color=t,Ob(getComputedStyle(u(this,re,Lu)).getPropertyValue("color"))};class FO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class yk extends FO{async _fetch(e){const t=await Dv(e,"arraybuffer");return new Uint8Array(t)}}class $O{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class bk extends $O{async _fetch(e){const t=await Dv(e,"arraybuffer");return new Uint8Array(t)}}Ks&&we("Please use the `legacy` build in Node.js environments.");async function iA(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class sG extends OO{}class nG extends IO{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class rG extends DO{async _fetch(e){return iA(e)}}class iG extends FO{async _fetch(e){return iA(e)}}class aG extends $O{async _fetch(e){return iA(e)}}const bs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function m_(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),s.clip(r)}class aA{isModifyingCurrentTransform(){return!1}getPattern(){nt("Abstract method `getPattern` called.")}}class oG extends aA{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===bs.STROKE||r===bs.FILL){const o=t.current.getClippedPathBoundingBox(r,bt(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),n=fe.transform(n,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),m_(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(d.canvas,"no-repeat");const f=new DOMMatrix(n);i.setTransform(f)}else m_(e,this._bbox),i=this._createGradient(e);return i}}function Yw(s,e,t,n,r,i,o,l){const c=e.coords,d=e.colors,h=s.data,f=s.width*4;let m;c[t+1]>c[n+1]&&(m=t,t=n,n=m,m=i,i=o,o=m),c[n+1]>c[r+1]&&(m=n,n=r,r=m,m=o,o=l,l=m),c[t+1]>c[n+1]&&(m=t,t=n,n=m,m=i,i=o,o=m);const p=(c[t]+e.offsetX)*e.scaleX,x=(c[t+1]+e.offsetY)*e.scaleY,v=(c[n]+e.offsetX)*e.scaleX,w=(c[n+1]+e.offsetY)*e.scaleY,g=(c[r]+e.offsetX)*e.scaleX,y=(c[r+1]+e.offsetY)*e.scaleY;if(x>=y)return;const b=d[i],_=d[i+1],S=d[i+2],A=d[o],C=d[o+1],P=d[o+2],T=d[l],O=d[l+1],z=d[l+2],F=Math.round(x),B=Math.round(y);let I,H,$,D,M,R,U,Z;for(let L=F;L<=B;L++){if(L<w){const W=L<x?0:(x-L)/(x-w);I=p-(p-v)*W,H=b-(b-A)*W,$=_-(_-C)*W,D=S-(S-P)*W}else{let W;L>y?W=1:w===y?W=0:W=(w-L)/(w-y),I=v-(v-g)*W,H=A-(A-T)*W,$=C-(C-O)*W,D=P-(P-z)*W}let V;L<x?V=0:L>y?V=1:V=(x-L)/(x-y),M=p-(p-g)*V,R=b-(b-T)*V,U=_-(_-O)*V,Z=S-(S-z)*V;const Q=Math.round(Math.min(I,M)),J=Math.round(Math.max(I,M));let le=f*L+Q*4;for(let W=Q;W<=J;W++)V=(I-W)/(I-M),V<0?V=0:V>1&&(V=1),h[le++]=H-(H-R)*V|0,h[le++]=$-($-U)*V|0,h[le++]=D-(D-Z)*V|0,h[le++]=255}}function lG(s,e,t){const n=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,d=l-1;for(i=0;i<c;i++){let h=i*l;for(let f=0;f<d;f++,h++)Yw(s,t,n[h],n[h+1],n[h+l],r[h],r[h+1],r[h+l]),Yw(s,t,n[h+l+1],n[h+1],n[h+l],r[h+l+1],r[h+1],r[h+l])}break;case"triangles":for(i=0,o=n.length;i<o;i+=3)Yw(s,t,n[i],n[i+1],n[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class cG extends aA{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=d/f,x=h/m,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/x},w=f+2*2,g=m+2*2,y=n.getCanvas("mesh",w,g),b=y.context,_=b.createImageData(f,m);if(t){const A=_.data;for(let C=0,P=A.length;C<P;C+=4)A[C]=t[0],A[C+1]=t[1],A[C+2]=t[2],A[C+3]=255}for(const A of this._figures)lG(_,A,v);return b.putImageData(_,2,2),{canvas:y.canvas,offsetX:l-2*p,offsetY:c-2*x,scaleX:p,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){m_(e,this._bbox);const i=new Float32Array(2);if(r===bs.SHADING)fe.singularValueDecompose2dScale(bt(e),i);else if(this.matrix){fe.singularValueDecompose2dScale(this.matrix,i);const[l,c]=i;fe.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=l,i[1]*=c}else fe.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===bs.SHADING?null:this._background,t.cachedCanvases);return r!==bs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class dG extends aA{getPattern(){return"hotpink"}}function uG(s){switch(s[0]){case"RadialAxial":return new oG(s);case"Mesh":return new cG(s);case"Dummy":return new dG}throw new Error(`Unknown IR type: ${s[0]}`)}const wk={COLORED:1,UNCOLORED:2},My=class My{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:i,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),Ib("TilingType: "+i);const h=t[0],f=t[1],m=t[2],p=t[3],x=m-h,v=p-f,w=new Float32Array(2);fe.singularValueDecompose2dScale(this.matrix,w);const[g,y]=w;fe.singularValueDecompose2dScale(this.baseTransform,w);const b=g*w[0],_=y*w[1];let S=x,A=v,C=!1,P=!1;const T=Math.ceil(c*b),O=Math.ceil(d*_),z=Math.ceil(x*b),F=Math.ceil(v*_);T>=z?S=c:C=!0,O>=F?A=d:P=!0;const B=this.getSizeAndScale(S,this.ctx.canvas.width,b),I=this.getSizeAndScale(A,this.ctx.canvas.height,_),H=e.cachedCanvases.getCanvas("pattern",B.size,I.size),$=H.context,D=l.createCanvasGraphics($);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,r,o),$.translate(-B.scale*h,-I.scale*f),D.transform(B.scale,0,0,I.scale,0,0),$.save(),this.clipBbox(D,h,f,m,p),D.baseTransform=bt(D.ctx),D.executeOperatorList(n),D.endDrawing(),$.restore(),C||P){const M=H.canvas;C&&(S=c),P&&(A=d);const R=this.getSizeAndScale(S,this.ctx.canvas.width,b),U=this.getSizeAndScale(A,this.ctx.canvas.height,_),Z=R.size,L=U.size,V=e.cachedCanvases.getCanvas("pattern-workaround",Z,L),Q=V.context,J=C?Math.floor(x/c):0,le=P?Math.floor(v/d):0;for(let W=0;W<=J;W++)for(let pe=0;pe<=le;pe++)Q.drawImage(M,Z*W,L*pe,Z,L,0,0,Z,L);return{canvas:V.canvas,scaleX:R.scale,scaleY:U.scale,offsetX:h,offsetY:f}}return{canvas:H.canvas,scaleX:B.scale,scaleY:I.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,n){const r=Math.max(My.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const o=r-t,l=i-n;e.ctx.rect(t,n,o,l),fe.axialAlignedBoundingBox([t,n,r,i],bt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case wk.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=l;break;case wk.UNCOLORED:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new P9(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r){let i=n;r!==bs.SHADING&&(i=fe.transform(i,t.baseTransform),this.matrix&&(i=fe.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};q(My,"MAX_PATTERN_SIZE",3e3);let p_=My;function hG({src:s,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const l=Es.isLittleEndian?4278190080:255,[c,d]=o?[i,l]:[l,i],h=n>>3,f=n&7,m=s.length;t=new Uint32Array(t.buffer);let p=0;for(let x=0;x<r;x++){for(const w=e+h;e<w;e++){const g=e<m?s[e]:255;t[p++]=g&128?d:c,t[p++]=g&64?d:c,t[p++]=g&32?d:c,t[p++]=g&16?d:c,t[p++]=g&8?d:c,t[p++]=g&4?d:c,t[p++]=g&2?d:c,t[p++]=g&1?d:c}if(f===0)continue;const v=e<m?s[e++]:255;for(let w=0;w<f;w++)t[p++]=v&1<<7-w?d:c}return{srcPos:e,destPos:p}}const jk=16,_k=100,fG=15,Nk=10,mn=16,Xw=new DOMMatrix,Un=new Float32Array(2),th=new Float32Array([1/0,1/0,-1/0,-1/0]);function mG(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,r,i,o,l){e.transform(t,n,r,i,o,l),this.__originalTransform(t,n,r,i,o,l)},s.setTransform=function(t,n,r,i,o,l){e.setTransform(t,n,r,i,o,l),this.__originalSetTransform(t,n,r,i,o,l)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,r,i,o,l){e.bezierCurveTo(t,n,r,i,o,l),this.__originalBezierCurveTo(t,n,r,i,o,l)},s.rect=function(t,n,r,i){e.rect(t,n,r,i),this.__originalRect(t,n,r,i)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class pG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ax(s,e,t,n,r,i,o,l,c,d){const[h,f,m,p,x,v]=bt(s);if(f===0&&m===0){const y=o*h+x,b=Math.round(y),_=l*p+v,S=Math.round(_),A=(o+c)*h+x,C=Math.abs(Math.round(A)-b)||1,P=(l+d)*p+v,T=Math.abs(Math.round(P)-S)||1;return s.setTransform(Math.sign(h),0,0,Math.sign(p),b,S),s.drawImage(e,t,n,r,i,0,0,C,T),s.setTransform(h,f,m,p,x,v),[C,T]}if(h===0&&p===0){const y=l*m+x,b=Math.round(y),_=o*f+v,S=Math.round(_),A=(l+d)*m+x,C=Math.abs(Math.round(A)-b)||1,P=(o+c)*f+v,T=Math.abs(Math.round(P)-S)||1;return s.setTransform(0,Math.sign(f),Math.sign(m),0,b,S),s.drawImage(e,t,n,r,i,0,0,T,C),s.setTransform(h,f,m,p,x,v),[T,C]}s.drawImage(e,t,n,r,i,o,l,c,d);const w=Math.hypot(h,f),g=Math.hypot(m,p);return[w*c,g*d]}class Sk{constructor(e,t){q(this,"alphaIsShape",!1);q(this,"fontSize",0);q(this,"fontSizeScale",1);q(this,"textMatrix",null);q(this,"textMatrixScale",1);q(this,"fontMatrix",Wj);q(this,"leading",0);q(this,"x",0);q(this,"y",0);q(this,"lineX",0);q(this,"lineY",0);q(this,"charSpacing",0);q(this,"wordSpacing",0);q(this,"textHScale",1);q(this,"textRenderingMode",Ts.FILL);q(this,"textRise",0);q(this,"fillColor","#000000");q(this,"strokeColor","#000000");q(this,"patternFill",!1);q(this,"patternStroke",!1);q(this,"fillAlpha",1);q(this,"strokeAlpha",1);q(this,"lineWidth",1);q(this,"activeSMask",null);q(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=th.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=bs.FILL,t=null){const n=this.minMax.slice();if(e===bs.STROKE){t||nt("Stroke bounding box must include transform."),fe.singularValueDecompose2dScale(t,Un);const r=Un[0]*this.lineWidth/2,i=Un[1]*this.lineWidth/2;n[0]-=r,n[1]-=i,n[2]+=r,n[3]+=i}return n}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(th,0)}getClippedPathBoundingBox(e=bs.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Ak(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%mn,i=(t-r)/mn,o=r===0?i:i+1,l=s.createImageData(n,mn);let c=0,d;const h=e.data,f=l.data;let m,p,x,v;if(e.kind===Yx.GRAYSCALE_1BPP){const w=h.byteLength,g=new Uint32Array(f.buffer,0,f.byteLength>>2),y=g.length,b=n+7>>3,_=4294967295,S=Es.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(x=m<i?mn:r,d=0,p=0;p<x;p++){const A=w-c;let C=0;const P=A>b?n:A*8-7,T=P&-8;let O=0,z=0;for(;C<T;C+=8)z=h[c++],g[d++]=z&128?_:S,g[d++]=z&64?_:S,g[d++]=z&32?_:S,g[d++]=z&16?_:S,g[d++]=z&8?_:S,g[d++]=z&4?_:S,g[d++]=z&2?_:S,g[d++]=z&1?_:S;for(;C<P;C++)O===0&&(z=h[c++],O=128),g[d++]=z&O?_:S,O>>=1}for(;d<y;)g[d++]=0;s.putImageData(l,0,m*mn)}}else if(e.kind===Yx.RGBA_32BPP){for(p=0,v=n*mn*4,m=0;m<i;m++)f.set(h.subarray(c,c+v)),c+=v,s.putImageData(l,0,p),p+=mn;m<o&&(v=n*r*4,f.set(h.subarray(c,c+v)),s.putImageData(l,0,p))}else if(e.kind===Yx.RGB_24BPP)for(x=mn,v=n*x,m=0;m<o;m++){for(m>=i&&(x=r,v=n*x),d=0,p=v;p--;)f[d++]=h[c++],f[d++]=h[c++],f[d++]=h[c++],f[d++]=255;s.putImageData(l,0,m*mn)}else throw new Error(`bad image kind: ${e.kind}`)}function Ek(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%mn,i=(t-r)/mn,o=r===0?i:i+1,l=s.createImageData(n,mn);let c=0;const d=e.data,h=l.data;for(let f=0;f<o;f++){const m=f<i?mn:r;({srcPos:c}=hG({src:d,srcPos:c,dest:h,width:n,height:m,nonBlackColor:0})),s.putImageData(l,0,f*mn)}}function bm(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Ex(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function Ck(s,e){if(e)return!0;fe.singularValueDecompose2dScale(s,Un);const t=Math.fround(ea.pixelRatio*Xl.PDF_TO_CSS_UNITS);return Un[0]<=t&&Un[1]<=t}const gG=["butt","round","square"],vG=["miter","round","bevel"],xG={},kk={};var li,g_,v_,x_;const SA=class SA{constructor(e,t,n,r,i,{optionalContentConfig:o,markedContentStack:l=null},c,d){E(this,li);this.ctx=e,this.current=new Sk(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new pG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...bt(this.compositeCtx))}this.ctx.save(),Ex(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=bt(this.ctx)}executeOperatorList(e,t,n,r){const i=e.argsArray,o=e.fnArray;let l=t||0;const c=i.length;if(c===l)return l;const d=c-l>Nk&&typeof n=="function",h=d?Date.now()+fG:0;let f=0;const m=this.commonObjs,p=this.objs;let x;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,n),l;if(x=o[l],x!==uy.dependency)this[x].apply(this,i[l]);else for(const v of i[l]){const w=v.startsWith("g_")?m:p;if(!w.has(v))return w.get(v,n),l}if(l++,l===c)return l;if(d&&++f>Nk){if(Date.now()>h)return n(),l;f=0}}}endDrawing(){k(this,li,g_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),k(this,li,v_).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=r,d="prescale1",h,f;for(;i>2&&l>1||o>2&&c>1;){let m=l,p=c;i>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/m),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(d,m,p),f=h.context,f.clearRect(0,0,m,p),f.drawImage(e,0,0,l,c,0,0,m,p),e=h.canvas,l=m,c=p,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,i=this.current.fillColor,o=this.current.patternFill,l=bt(t);let c,d,h,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),i]),c=this._cachedBitmapsMap.get(T),c||(c=new Map,this._cachedBitmapsMap.set(T,c));const O=c.get(d);if(O&&!o){const z=Math.round(Math.min(l[0],l[2])+l[4]),F=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:O,offsetX:z,offsetY:F}}h=O}h||(f=this.cachedCanvases.getCanvas("maskCanvas",n,r),Ek(f.context,e));let m=fe.transform(l,[1/n,0,0,-1/r,0,0]);m=fe.transform(m,[1,0,0,1,0,-r]);const p=th.slice();fe.axialAlignedBoundingBox([0,0,n,r],m,p);const[x,v,w,g]=p,y=Math.round(w-x)||1,b=Math.round(g-v)||1,_=this.cachedCanvases.getCanvas("fillCanvas",y,b),S=_.context,A=x,C=v;S.translate(-A,-C),S.transform(...m),h||(h=this._scaleImage(f.canvas,hi(S)),h=h.img,c&&o&&c.set(d,h)),S.imageSmoothingEnabled=Ck(bt(S),e.interpolate),Ax(S,h,0,0,h.width,h.height,0,0,n,r),S.globalCompositeOperation="source-in";const P=fe.transform(hi(S),[1,0,0,1,-A,-C]);return S.fillStyle=o?i.getPattern(t,this,P,bs.FILL):i,S.fillRect(0,0,n,r),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,_.canvas)),{canvas:_.canvas,offsetX:Math.round(A),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=gG[e]}setLineJoin(e){this.ctx.lineJoin=vG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=r.context;i.setTransform(this.suspendedCtx.getTransform()),bm(this.suspendedCtx,i),mG(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],o=r[1],l=r[2]-i,c=r[3]-o;l===0||c===0||(this.genericComposeSMask(t.context,n,l,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,o,l,c,d,h,f){let m=e.canvas,p=c-h,x=d-f;if(o)if(p<0||x<0||p+n>m.width||x+r>m.height){const w=this.cachedCanvases.getCanvas("maskExtension",n,r),g=w.context;g.drawImage(m,-p,-x),g.globalCompositeOperation="destination-atop",g.fillStyle=o,g.fillRect(0,0,n,r),g.globalCompositeOperation="source-over",m=w.canvas,p=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(p,x,n,r),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,x,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,d,n,r),t.clip(v),t.globalCompositeOperation="destination-in",t.drawImage(m,p,x,n,r,c,d,n,r),t.restore()}save(){this.inSMaskMode&&bm(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bm(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,r,i,o){this.ctx.transform(e,t,n,r,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let[r]=t;if(!n){r||(r=t[0]=new Path2D),this[e](r);return}if(!(r instanceof Path2D)){const i=t[0]=new Path2D;for(let o=0,l=r.length;o<l;)switch(r[o++]){case jx.moveTo:i.moveTo(r[o++],r[o++]);break;case jx.lineTo:i.lineTo(r[o++],r[o++]);break;case jx.curveTo:i.bezierCurveTo(r[o++],r[o++],r[o++],r[o++],r[o++],r[o++]);break;case jx.closePath:i.closePath();break;default:we(`Unrecognized drawing path operator: ${r[o-1]}`);break}r=i}fe.axialAlignedBoundingBox(n,bt(this.ctx),this.current.minMax),this[e](r)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const n=this.ctx,r=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const i=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=r.getPattern(n,this,hi(n),bs.STROKE),i){const o=new Path2D;o.addPath(e,n.getTransform().invertSelf().multiplySelf(i)),e=o}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(bs.STROKE,bt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const n=this.ctx,r=this.current.fillColor,i=this.current.patternFill;let o=!1;if(i){const c=r.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.fillStyle=r.getPattern(n,this,hi(n),bs.FILL),c){const d=new Path2D;d.addPath(e,n.getTransform().invertSelf().multiplySelf(c)),e=d}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),o&&n.restore(),t&&this.consumePath(e,l)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=xG}eoClip(){this.pendingClip=kk}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:i,x:o,y:l,fontSize:c,path:d}of e)d&&n.addPath(d,new DOMMatrix(i).preMultiplySelf(r).translate(o,l).scale(c,-c));t.clip(n),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||Wj,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&we("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif",o=((h=n.systemFontInfo)==null?void 0:h.css)||`"${i}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let d=t;t<jk?d=jk:t>_k&&(d=_k),this.current.fontSizeScale=t/d,this.ctx.font=`${c} ${l} ${d}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,i){const o=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&Ts.FILL_STROKE_MASK,m=!!(d&Ts.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,x=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||m||p||x)&&!c.missingFile&&(v=c.getPathGenerator(this.commonObjs,e)),v&&(c.disableFontFace||p||x)){o.save(),o.translate(t,n),o.scale(h,-h);let w;if((f===Ts.FILL||f===Ts.FILL_STROKE)&&(r?(w=o.getTransform(),o.setTransform(...r),o.fill(k(this,li,x_).call(this,v,w,r))):o.fill(v)),f===Ts.STROKE||f===Ts.FILL_STROKE)if(i){w||(w=o.getTransform()),o.setTransform(...i);const{a:g,b:y,c:b,d:_}=w,S=fe.inverseTransform(i),A=fe.transform([g,y,b,_,0,0],S);fe.singularValueDecompose2dScale(A,Un),o.lineWidth*=Math.max(Un[0],Un[1])/h,o.stroke(k(this,li,x_).call(this,v,w,i))}else o.lineWidth/=h,o.stroke(v);o.restore()}else(f===Ts.FILL||f===Ts.FILL_STROKE)&&o.fillText(e,t,n),(f===Ts.STROKE||f===Ts.FILL_STROKE)&&o.strokeText(e,t,n);m&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:bt(o),x:t,y:n,fontSize:h,path:v})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return Fe(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const i=this.ctx,o=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,f=e.length,m=n.vertical,p=m?1:-1,x=n.defaultVMetrics,v=r*t.fontMatrix[0],w=t.textRenderingMode===Ts.FILL&&!n.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),d>0?i.scale(h,-1):i.scale(h,1);let g,y;if(t.patternFill){i.save();const C=t.fillColor.getPattern(i,this,hi(i),bs.FILL);g=bt(i),i.restore(),i.fillStyle=C}if(t.patternStroke){i.save();const C=t.strokeColor.getPattern(i,this,hi(i),bs.STROKE);y=bt(i),i.restore(),i.strokeStyle=C}let b=t.lineWidth;const _=t.textMatrixScale;if(_===0||b===0){const C=t.textRenderingMode&Ts.FILL_STROKE_MASK;(C===Ts.STROKE||C===Ts.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=_;if(o!==1&&(i.scale(o,o),b/=o),i.lineWidth=b,n.isInvalidPDFjsFont){const C=[];let P=0;for(const T of e)C.push(T.unicode),P+=T.width;i.fillText(C.join(""),0,0),t.x+=P*v*h,i.restore(),this.compose();return}let S=0,A;for(A=0;A<f;++A){const C=e[A];if(typeof C=="number"){S+=p*C*r/1e3;continue}let P=!1;const T=(C.isSpace?c:0)+l,O=C.fontChar,z=C.accent;let F,B,I=C.width;if(m){const $=C.vmetric||x,D=-(C.vmetric?$[1]:I*.5)*v,M=$[2]*v;I=$?-$[0]:I,F=D/o,B=(S+M)/o}else F=S/o,B=0;if(n.remeasure&&I>0){const $=i.measureText(O).width*1e3/r*o;if(I<$&&this.isFontSubpixelAAEnabled){const D=I/$;P=!0,i.save(),i.scale(D,1),F/=D}else I!==$&&(F+=(I-$)/2e3*r/o)}if(this.contentVisible&&(C.isInFont||n.missingFile)){if(w&&!z)i.fillText(O,F,B);else if(this.paintChar(O,F,B,g,y),z){const $=F+r*z.offset.x/o,D=B-r*z.offset.y/o;this.paintChar(z.fontChar,$,D,g,y)}}const H=m?I*v-T*d:I*v+T*d;S+=H,P&&i.restore()}m?t.y-=S:t.x+=S*h,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,i=n.fontSize,o=n.fontDirection,l=r.vertical?1:-1,c=n.charSpacing,d=n.wordSpacing,h=n.textHScale*o,f=n.fontMatrix||Wj,m=e.length,p=n.textRenderingMode===Ts.INVISIBLE;let x,v,w,g;if(!(p||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),n.textMatrix&&t.transform(...n.textMatrix),t.translate(n.x,n.y+n.textRise),t.scale(h,o),x=0;x<m;++x){if(v=e[x],typeof v=="number"){g=l*v*i/1e3,this.ctx.translate(g,0),n.x+=g*h;continue}const y=(v.isSpace?d:0)+c,b=r.charProcOperatorList[v.operatorListId];b?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(b),this.restore()):we(`Type3 character "${v.operatorListId}" is not available.`);const _=[v.width,0];fe.applyTransform(_,f),w=_[0]*i+y,t.translate(w,0),n.x+=w*h}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,i,o){const l=new Path2D;l.rect(n,r,i-n,o-r),this.ctx.clip(l),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=this.baseTransform||bt(this.ctx),r={createCanvasGraphics:i=>new SA(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new p_(e,this.ctx,r,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=uG(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,hi(t),bs.SHADING);const r=hi(t);if(r){const{width:i,height:o}=t.canvas,l=th.slice();fe.axialAlignedBoundingBox([0,0,i,o],r,l);const[c,d,h,f]=l;this.ctx.fillRect(c,d,h-c,f-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nt("Should not call beginInlineImage")}beginImageData(){nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=bt(this.ctx),t)){fe.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[n,r,i,o]=t,l=new Path2D;l.rect(n,r,i-n,o-r),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ib("TODO: Support non-isolated groups."),e.knockout&&we("Knockout groups not supported.");const n=bt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=th.slice();fe.axialAlignedBoundingBox(e.bbox,bt(t),r);const i=[0,0,t.canvas.width,t.canvas.height];r=fe.intersect(r,i)||[0,0,0,0];const o=Math.floor(r[0]),l=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-o,1),d=Math.max(Math.ceil(r[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,d),m=f.context;m.translate(-o,-l),m.transform(...n);let p=new Path2D;const[x,v,w,g]=e.bbox;if(p.rect(x,v,w-x,g-v),e.matrix){const y=new Path2D;y.addPath(p,new DOMMatrix(e.matrix)),p=y}m.clip(p),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,l),t.save()),bm(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=bt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const i=th.slice();fe.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,n,r,i){if(k(this,li,g_).call(this),Ex(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=l,fe.singularValueDecompose2dScale(bt(this.ctx),Un);const{viewportScale:c}=this,d=Math.ceil(o*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Un[0],0,0,-Un[1],0,l*Un[1]),Ex(this.ctx)}else{Ex(this.ctx),this.endPath();const c=new Path2D;c.rect(t[0],t[1],o,l),this.ctx.clip(c)}}this.current=new Sk(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),k(this,li,v_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this._createMaskCanvas(e),i=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(i,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=bt(l);l.transform(t,n,r,i,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let h=0,f=o.length;h<f;h+=2){const m=fe.transform(c,[t,n,r,i,o[h],o[h+1]]);l.drawImage(d.canvas,m[4],m[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const i of e){const{data:o,width:l,height:c,transform:d}=i,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=h.context;f.save();const m=this.getObject(o,i);Ek(f,m),f.globalCompositeOperation="source-in",f.fillStyle=r?n.getPattern(f,this,hi(t),bs.FILL):n,f.fillRect(0,0,l,c),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),Ax(t,h.canvas,0,0,l,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){we("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){we("Dependent image isn't ready yet");return}const o=i.width,l=i.height,c=[];for(let d=0,h=r.length;d<h;d+=2)c.push({transform:[t,0,0,n,r[d],r[d+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;this.save();const{filter:i}=r;i!=="none"&&i!==""&&(r.filter="none"),r.scale(1/t,-1/n);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Ak(d,e),o=this.applyTransferMapsToCanvas(d)}const l=this._scaleImage(o,hi(r));r.imageSmoothingEnabled=Ck(bt(r),e.interpolate),Ax(r,l.img,0,0,l.paintWidth,l.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const i=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,o).context;Ak(c,e),r=this.applyTransferMapsToCanvas(c)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),Ax(n,r,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const r=this.ctx;this.pendingClip&&(n||(this.pendingClip===kk?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=bt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let o,l;if(n===0&&r===0){const c=Math.abs(t),d=Math.abs(i);if(c===d)if(e===0)o=l=1/c;else{const h=c*e;o=l=h<1?1/h:1}else if(e===0)o=1/c,l=1/d;else{const h=c*e,f=d*e;o=h<1?1/h:1,l=f<1?1/f:1}}else{const c=Math.abs(t*i-n*r),d=Math.hypot(t,n),h=Math.hypot(r,i);if(e===0)o=h/c,l=d/c;else{const f=e*c;o=h>f?h/f:1,l=d>f?d/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){n.lineWidth=(r||1)*i,n.stroke(e);return}const l=n.getLineDash();t&&n.save(),n.scale(i,o),Xw.a=1/i,Xw.d=1/o;const c=new Path2D;if(c.addPath(e,Xw),l.length>0){const d=Math.max(i,o);n.setLineDash(l.map(h=>h/d)),n.lineDashOffset/=d}n.lineWidth=r||1,n.stroke(c),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};li=new WeakSet,g_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},v_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},x_=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let fh=SA;for(const s in uy)fh.prototype[s]!==void 0&&(fh.prototype[uy[s]]=fh.prototype[s]);var pg,gg;class Ui{static get workerPort(){return u(this,pg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");N(this,pg,e)}static get workerSrc(){return u(this,gg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");N(this,gg,e)}}pg=new WeakMap,gg=new WeakMap,E(Ui,pg,null),E(Ui,gg,"");var Wh,vg;class yG{constructor({parsedData:e,rawData:t}){E(this,Wh);E(this,vg);N(this,Wh,e),N(this,vg,t)}getRaw(){return u(this,vg)}get(e){return u(this,Wh).get(e)??null}[Symbol.iterator](){return u(this,Wh).entries()}}Wh=new WeakMap,vg=new WeakMap;const zu=Symbol("INTERNAL");var xg,yg,bg,Vh;class bG{constructor(e,{name:t,intent:n,usage:r,rbGroups:i}){E(this,xg,!1);E(this,yg,!1);E(this,bg,!1);E(this,Vh,!0);N(this,xg,!!(e&zn.DISPLAY)),N(this,yg,!!(e&zn.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=i}get visible(){if(u(this,bg))return u(this,Vh);if(!u(this,Vh))return!1;const{print:e,view:t}=this.usage;return u(this,xg)?(t==null?void 0:t.viewState)!=="OFF":u(this,yg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==zu&&nt("Internal method `_setVisible` called."),N(this,bg,n),N(this,Vh,t)}}xg=new WeakMap,yg=new WeakMap,bg=new WeakMap,Vh=new WeakMap;var rl,tt,Gh,qh,wg,y_;class wG{constructor(e,t=zn.DISPLAY){E(this,wg);E(this,rl,null);E(this,tt,new Map);E(this,Gh,null);E(this,qh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,N(this,qh,e.order);for(const n of e.groups)u(this,tt).set(n.id,new bG(t,n));if(e.baseState==="OFF")for(const n of u(this,tt).values())n._setVisible(zu,!1);for(const n of e.on)u(this,tt).get(n)._setVisible(zu,!0);for(const n of e.off)u(this,tt).get(n)._setVisible(zu,!1);N(this,Gh,this.getHash())}}isVisible(e){if(u(this,tt).size===0)return!0;if(!e)return Ib("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,tt).has(e.id)?u(this,tt).get(e.id).visible:(we(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return k(this,wg,y_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,tt).has(t))return we(`Optional content group not found: ${t}`),!0;if(u(this,tt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,tt).has(t))return we(`Optional content group not found: ${t}`),!0;if(!u(this,tt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,tt).has(t))return we(`Optional content group not found: ${t}`),!0;if(!u(this,tt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,tt).has(t))return we(`Optional content group not found: ${t}`),!0;if(u(this,tt).get(t).visible)return!1}return!0}return we(`Unknown optional content policy ${e.policy}.`),!0}return we(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var i;const r=u(this,tt).get(e);if(!r){we(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const l of o)l!==e&&((i=u(this,tt).get(l))==null||i._setVisible(zu,!1,!0));r._setVisible(zu,!!t,!0),N(this,rl,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const i=u(this,tt).get(r);if(i)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}N(this,rl,null)}get hasInitialVisibility(){return u(this,Gh)===null||this.getHash()===u(this,Gh)}getOrder(){return u(this,tt).size?u(this,qh)?u(this,qh).slice():[...u(this,tt).keys()]:null}getGroup(e){return u(this,tt).get(e)||null}getHash(){if(u(this,rl)!==null)return u(this,rl);const e=new CO;for(const[t,n]of u(this,tt))e.update(`${t}:${n.visible}`);return N(this,rl,e.hexdigest())}[Symbol.iterator](){return u(this,tt).entries()}}rl=new WeakMap,tt=new WeakMap,Gh=new WeakMap,qh=new WeakMap,wg=new WeakSet,y_=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=k(this,wg,y_).call(this,i);else if(u(this,tt).has(i))o=u(this,tt).get(i).visible;else return we(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class jG{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Bt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new _G(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new NG(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class _G{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=nA(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class NG{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function SG(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=d(h),i(h)}if(t=o(s),t){const h=d(t);return i(h)}if(t=n("filename","i").exec(s),t){t=t[1];let h=l(t);return h=d(h),i(h)}function n(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function r(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(h,{fatal:!0}),p=Iv(f);f=m.decode(p),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function o(h){const f=[];let m;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=p.exec(h))!==null;){let[,v,w,g]=m;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[w,g]}const x=[];for(let v=0;v<f.length&&v in f;++v){let[w,g]=f[v];g=l(g),w&&(g=unescape(g),v===0&&(g=c(g))),x.push(g)}return x.join("")}function l(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let m=0;m<f.length;++m){const p=f[m].indexOf('"');p!==-1&&(f[m]=f[m].slice(0,p),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function c(h){const f=h.indexOf("'");if(f===-1)return h;const m=h.slice(0,f),x=h.slice(f+1).replace(/^[^']*'/,"");return r(m,x)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,p,x){if(p==="q"||p==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,w){return String.fromCharCode(parseInt(w,16))}),r(m,x);try{x=atob(x)}catch{}return r(m,x)})}return""}function zO(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function Lb(s){var e;return((e=URL.parse(s))==null?void 0:e.origin)??null}function BO({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(s.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function UO(s){const e=s.get("Content-Disposition");if(e){let t=SG(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(nA(t))return t}return null}function Fv(s,e){return new hy(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function HO(s){return s===200||s===206}function WO(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function VO(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(we(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class AG{constructor(e){q(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=zO(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new EG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new CG(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class EG{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,WO(n,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Lb(i.url),!HO(i.status))throw Fv(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:l,suggestedLength:c}=BO({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=UO(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Yl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:VO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class CG{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${n-1}`);const o=r.url;fetch(o,WO(i,this._withCredentials,this._abortController)).then(l=>{const c=Lb(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!HO(l.status))throw Fv(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:VO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Qw=200,Jw=206;function kG(s){const e=s.response;return typeof e!="string"?e:Iv(e).buffer}class PG{constructor({url:e,httpHeaders:t,withCredentials:n}){q(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=zO(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=Jw):r.expectedStatus=Qw,t.responseType="arraybuffer",Bt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const i=r.status||Qw;if(!(i===Qw&&n.expectedStatus===Jw)&&i!==n.expectedStatus){n.onError(r.status);return}const l=kG(r);if(i===Jw){const c=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?n.onDone({begin:parseInt(d[1],10),chunk:l}):(we('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class TG{constructor(e){this._source=e,this._manager=new PG(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new RG(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new MG(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class RG{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Lb(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=BO({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=UO(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Fv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class MG{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Lb((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Fv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const IG=/^[a-z][a-z0-9\-+.]+:/i;function DG(s){if(IG.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class OG{constructor(e){this.source=e,this.url=DG(e.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new LG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new FG(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class LG{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Fv(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Yl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class FG{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wm=Symbol("INITIAL_DATA");var Cn,jg,b_;class GO{constructor(){E(this,jg);E(this,Cn,Object.create(null))}get(e,t=null){if(t){const r=k(this,jg,b_).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=u(this,Cn)[e];if(!n||n.data===wm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=u(this,Cn)[e];return!!t&&t.data!==wm}delete(e){const t=u(this,Cn)[e];return!t||t.data===wm?!1:(delete u(this,Cn)[e],!0)}resolve(e,t=null){const n=k(this,jg,b_).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in u(this,Cn)){const{data:n}=u(this,Cn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}N(this,Cn,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Cn)){const{data:t}=u(this,Cn)[e];t!==wm&&(yield[e,t])}}}Cn=new WeakMap,jg=new WeakSet,b_=function(e){var t;return(t=u(this,Cn))[e]||(t[e]={...Promise.withResolvers(),data:wm})};const $G=1e5,Pk=30;var Jk,il,un,_g,Ng,id,Ra,Sg,Ag,ad,Kh,Yh,al,Xh,Eg,Qh,od,Cg,kg,Jh,ld,Pg,ol,Zh,ho,qO,KO,w_,Yn,i0,j_,YO,XO;const Vt=class Vt{constructor({textContentSource:e,container:t,viewport:n}){E(this,ho);E(this,il,Promise.withResolvers());E(this,un,null);E(this,_g,!1);E(this,Ng,!!((Jk=globalThis.FontInspector)!=null&&Jk.enabled));E(this,id,null);E(this,Ra,null);E(this,Sg,0);E(this,Ag,0);E(this,ad,null);E(this,Kh,null);E(this,Yh,0);E(this,al,0);E(this,Xh,Object.create(null));E(this,Eg,[]);E(this,Qh,null);E(this,od,[]);E(this,Cg,new WeakMap);E(this,kg,null);var c;if(e instanceof ReadableStream)N(this,Qh,e);else if(typeof e=="object")N(this,Qh,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');N(this,un,N(this,Kh,t)),N(this,al,n.scale*ea.pixelRatio),N(this,Yh,n.rotation),N(this,Ra,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:l}=n.rawDims;N(this,kg,[1,0,0,-1,-o,l+i]),N(this,Ag,r),N(this,Sg,i),k(c=Vt,Yn,YO).call(c),au(t,n),u(this,il).promise.finally(()=>{u(Vt,Zh).delete(this),N(this,Ra,null),N(this,Xh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Es.platform;return Fe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,ad).read().then(({value:t,done:n})=>{if(n){u(this,il).resolve();return}u(this,id)??N(this,id,t.lang),Object.assign(u(this,Xh),t.styles),k(this,ho,qO).call(this,t.items),e()},u(this,il).reject)};return N(this,ad,u(this,Qh).getReader()),u(Vt,Zh).add(this),e(),u(this,il).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*ea.pixelRatio,r=e.rotation;if(r!==u(this,Yh)&&(t==null||t(),N(this,Yh,r),au(u(this,Kh),{rotation:r})),n!==u(this,al)){t==null||t(),N(this,al,n);const o={div:null,properties:null,ctx:k(i=Vt,Yn,i0).call(i,u(this,id))};for(const l of u(this,od))o.properties=u(this,Cg).get(l),o.div=l,k(this,ho,w_).call(this,o)}}cancel(){var t;const e=new Yl("TextLayer task cancelled.");(t=u(this,ad))==null||t.cancel(e).catch(()=>{}),N(this,ad,null),u(this,il).reject(e)}get textDivs(){return u(this,od)}get textContentItemsStr(){return u(this,Eg)}static cleanup(){if(!(u(this,Zh).size>0)){u(this,Jh).clear();for(const{canvas:e}of u(this,ld).values())e.remove();u(this,ld).clear()}}};il=new WeakMap,un=new WeakMap,_g=new WeakMap,Ng=new WeakMap,id=new WeakMap,Ra=new WeakMap,Sg=new WeakMap,Ag=new WeakMap,ad=new WeakMap,Kh=new WeakMap,Yh=new WeakMap,al=new WeakMap,Xh=new WeakMap,Eg=new WeakMap,Qh=new WeakMap,od=new WeakMap,Cg=new WeakMap,kg=new WeakMap,Jh=new WeakMap,ld=new WeakMap,Pg=new WeakMap,ol=new WeakMap,Zh=new WeakMap,ho=new WeakSet,qO=function(e){var r,i;if(u(this,_g))return;(i=u(this,Ra)).ctx??(i.ctx=k(r=Vt,Yn,i0).call(r,u(this,id)));const t=u(this,od),n=u(this,Eg);for(const o of e){if(t.length>$G){we("Ignoring additional textDivs for performance reasons."),N(this,_g,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=u(this,un);N(this,un,document.createElement("span")),u(this,un).classList.add("markedContent"),o.id&&u(this,un).setAttribute("id",`${o.id}`),l.append(u(this,un))}else o.type==="endMarkedContent"&&N(this,un,u(this,un).parentNode);continue}n.push(o.str),k(this,ho,KO).call(this,o)}},KO=function(e){var v;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,od).push(t);const r=fe.transform(u(this,kg),e.transform);let i=Math.atan2(r[1],r[0]);const o=u(this,Xh)[e.fontName];o.vertical&&(i+=Math.PI/2);let l=u(this,Ng)&&o.fontSubstitution||o.fontFamily;l=Vt.fontFamilyMap.get(l)||l;const c=Math.hypot(r[2],r[3]),d=c*k(v=Vt,Yn,XO).call(v,l,o,u(this,id));let h,f;i===0?(h=r[4],f=r[5]-d):(h=r[4]+d*Math.sin(i),f=r[5]-d*Math.cos(i));const m="calc(var(--total-scale-factor) *",p=t.style;u(this,un)===u(this,Kh)?(p.left=`${(100*h/u(this,Ag)).toFixed(2)}%`,p.top=`${(100*f/u(this,Sg)).toFixed(2)}%`):(p.left=`${m}${h.toFixed(2)}px)`,p.top=`${m}${f.toFixed(2)}px)`),p.fontSize=`${m}${(u(Vt,ol)*c).toFixed(2)}px)`,p.fontFamily=l,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,Ng)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);w!==g&&Math.max(w,g)/Math.min(w,g)>1.5&&(x=!0)}if(x&&(n.canvasWidth=o.vertical?e.height:e.width),u(this,Cg).set(t,n),u(this,Ra).div=t,u(this,Ra).properties=n,k(this,ho,w_).call(this,u(this,Ra)),n.hasText&&u(this,un).append(t),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),u(this,un).append(w)}},w_=function(e){var l;const{div:t,properties:n,ctx:r}=e,{style:i}=t;let o="";if(u(Vt,ol)>1&&(o=`scale(${1/u(Vt,ol)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=i,{canvasWidth:d,fontSize:h}=n;k(l=Vt,Yn,j_).call(l,r,h*u(this,al),c);const{width:f}=r.measureText(t.textContent);f>0&&(o=`scaleX(${d*u(this,al)/f}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(i.transform=o)},Yn=new WeakSet,i0=function(e=null){let t=u(this,ld).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,ld).set(e,t),u(this,Pg).set(t,{size:0,family:""})}return t},j_=function(e,t,n){const r=u(this,Pg).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},YO=function(){if(u(this,ol)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),N(this,ol,e.getBoundingClientRect().height),e.remove()},XO=function(e,t,n){const r=u(this,Jh).get(e);if(r)return r;const i=k(this,Yn,i0).call(this,n);i.canvas.width=i.canvas.height=Pk,k(this,Yn,j_).call(this,i,Pk,e);const o=i.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let d=.8;return l?d=l/(l+c):(Es.platform.isFirefox&&we("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),u(this,Jh).set(e,d),d},E(Vt,Yn),E(Vt,Jh,new Map),E(Vt,ld,new Map),E(Vt,Pg,new WeakMap),E(Vt,ol,null),E(Vt,Zh,new Set);let Dp=Vt;class Op{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let o=null;const l=i.name;if(l==="#text")o=i.value;else if(Op.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const d of i.children)r(d)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const zG=100;function QO(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new __,{docId:t}=e,n=s.url?Y9(s.url):null,r=s.data?X9(s.data):null,i=s.httpHeaders||null,o=s.withCredentials===!0,l=s.password??null,c=s.range instanceof JO?s.range:null,d=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let h=s.worker instanceof Lp?s.worker:null;const f=s.verbosity,m=typeof s.docBaseUrl=="string"&&!Db(s.docBaseUrl)?s.docBaseUrl:null,p=Nx(s.cMapUrl),x=s.cMapPacked!==!1,v=s.CMapReaderFactory||(Ks?rG:xk),w=Nx(s.iccUrl),g=Nx(s.standardFontDataUrl),y=s.StandardFontDataFactory||(Ks?iG:yk),b=Nx(s.wasmUrl),_=s.WasmFactory||(Ks?aG:bk),S=s.stopAtErrors!==!0,A=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,C=s.isEvalSupported!==!1,P=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!Ks,T=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!Ks&&(Es.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,z=typeof s.disableFontFace=="boolean"?s.disableFontFace:Ks,F=s.fontExtraProperties===!0,B=s.enableXfa===!0,I=s.ownerDocument||globalThis.document,H=s.disableRange===!0,$=s.disableStream===!0,D=s.disableAutoFetch===!0,M=s.pdfBug===!0,R=s.CanvasFactory||(Ks?nG:eG),U=s.FilterFactory||(Ks?sG:tG),Z=s.enableHWA===!0,L=s.useWasm!==!1,V=c?c.length:s.length??NaN,Q=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!Ks&&!z,J=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(v===xk&&y===yk&&_===bk&&p&&g&&b&&Tm(p,document.baseURI)&&Tm(g,document.baseURI)&&Tm(b,document.baseURI)),le=null;E9(f);const W={canvasFactory:new R({ownerDocument:I,enableHWA:Z}),filterFactory:new U({docId:t,ownerDocument:I}),cMapReaderFactory:J?null:new v({baseUrl:p,isCompressed:x}),standardFontDataFactory:J?null:new y({baseUrl:g}),wasmFactory:J?null:new _({baseUrl:b})};h||(h=Lp.create({verbosity:f,port:Ui.workerPort}),e._worker=h);const pe={docId:t,apiVersion:"5.4.54",data:r,password:l,disableAutoFetch:D,rangeChunkSize:d,length:V,docBaseUrl:m,enableXfa:B,evaluatorOptions:{maxImageSize:A,disableFontFace:z,ignoreErrors:S,isEvalSupported:C,isOffscreenCanvasSupported:P,isImageDecoderSupported:T,canvasMaxAreaInBytes:O,fontExtraProperties:F,useSystemFonts:Q,useWasm:L,useWorkerFetch:J,cMapUrl:p,iccUrl:w,standardFontDataUrl:g,wasmUrl:b}},je={ownerDocument:I,pdfBug:M,styleElement:le,loadingParams:{disableAutoFetch:D,enableXfa:B}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Te=h.messageHandler.sendWithPromise("GetDocRequest",pe,r?[r.buffer]:null);let Re;if(c)Re=new jG(c,{disableRange:H,disableStream:$});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Oe=Tm(n)?AG:Ks?OG:TG;Re=new Oe({url:n,length:V,httpHeaders:i,withCredentials:o,rangeChunkSize:d,disableRange:H,disableStream:$})}return Te.then(Oe=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Nt=new Om(t,Oe,h.port),St=new HG(Nt,e,Re,je,W,Z);e._transport=St,Nt.send("Ready",null)})}).catch(e._capability.reject),e}var Iy;const Dy=class Dy{constructor(){q(this,"_capability",Promise.withResolvers());q(this,"_transport",null);q(this,"_worker",null);q(this,"docId",`d${ts(Dy,Iy)._++}`);q(this,"destroyed",!1);q(this,"onPassword",null);q(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Iy=new WeakMap,E(Dy,Iy,0);let __=Dy;var cd,Tg,Rg,Mg,Ig;class JO{constructor(e,t,n=!1,r=null){E(this,cd,Promise.withResolvers());E(this,Tg,[]);E(this,Rg,[]);E(this,Mg,[]);E(this,Ig,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){u(this,Ig).push(e)}addProgressListener(e){u(this,Mg).push(e)}addProgressiveReadListener(e){u(this,Rg).push(e)}addProgressiveDoneListener(e){u(this,Tg).push(e)}onDataRange(e,t){for(const n of u(this,Ig))n(e,t)}onDataProgress(e,t){u(this,cd).promise.then(()=>{for(const n of u(this,Mg))n(e,t)})}onDataProgressiveRead(e){u(this,cd).promise.then(()=>{for(const t of u(this,Rg))t(e)})}onDataProgressiveDone(){u(this,cd).promise.then(()=>{for(const e of u(this,Tg))e()})}transportReady(){u(this,cd).resolve()}requestDataRange(e,t){nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}cd=new WeakMap,Tg=new WeakMap,Rg=new WeakMap,Mg=new WeakMap,Ig=new WeakMap;class BG{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ma,dd,Bm;class UG{constructor(e,t,n,r=!1){E(this,dd);E(this,Ma,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new pk:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new GO,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}={}){return new Ov({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Fe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:r="display",annotationMode:i=Do.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:m=!1}){var S,A;(S=this._stats)==null||S.time("Overall");const p=this._transport.getRenderingIntent(r,i,f,m),{renderingIntent:x,cacheKey:v}=p;N(this,Ma,!1),c||(c=this._transport.getOptionalContentConfig(x));let w=this._intentStates.get(v);w||(w=Object.create(null),this._intentStates.set(v,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const g=!!(x&zn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(p));const y=C=>{var P;w.renderTasks.delete(b),g&&N(this,Ma,!0),k(this,dd,Bm).call(this),C?(b.capability.reject(C),this._abortOperatorList({intentState:w,reason:C instanceof Error?C:new Error(C)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new N_({callback:y,params:{canvas:t,canvasContext:e,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(w.renderTasks||(w.renderTasks=new Set)).add(b);const _=b.task;return Promise.all([w.displayReadyCapability.promise,c]).then(([C,P])=>{var T;if(this.destroyed){y();return}if((T=this._stats)==null||T.time("Rendering"),!(P.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:C,optionalContentConfig:P}),b.operatorListChanged()}).catch(y),_}getOperatorList({intent:e="display",annotationMode:t=Do.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var d;function i(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,n,r,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Op.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function i(){o.read().then(function({value:c,done:d}){if(d){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},r)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),N(this,Ma,!1),Promise.all(e)}cleanup(e=!1){N(this,Ma,!0);const t=k(this,dd,Bm).call(this);return e&&t&&this._stats&&(this._stats=new pk),t}_startRenderPage(e,t){var r,i;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&k(this,dd,Bm).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:i,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),d=this._intentStates.get(t);d.streamReader=c;const h=()=>{c.read().then(({value:f,done:m})=>{if(m){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,d),h())},f=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const m of d.renderTasks)m.operatorListChanged();k(this,dd,Bm).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(f);else if(d.opListReadCapability)d.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof sA){let r=zG;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Yl(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Ma=new WeakMap,dd=new WeakSet,Bm=function(){if(!u(this,Ma)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),N(this,Ma,!1),!0};var ll,Br,Ia,ud,Oy,hd,fd,Zs,a0,ZO,eL,Um,ef,o0;const mt=class mt{constructor({name:e=null,port:t=null,verbosity:n=C9()}={}){E(this,Zs);E(this,ll,Promise.withResolvers());E(this,Br,null);E(this,Ia,null);E(this,ud,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(u(mt,fd).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(mt,fd).set(t,this),k(this,Zs,ZO).call(this,t)}else k(this,Zs,eL).call(this)}get promise(){return u(this,ll).promise}get port(){return u(this,Ia)}get messageHandler(){return u(this,Br)}destroy(){var e,t;this.destroyed=!0,(e=u(this,ud))==null||e.terminate(),N(this,ud,null),u(mt,fd).delete(u(this,Ia)),N(this,Ia,null),(t=u(this,Br))==null||t.destroy(),N(this,Br,null)}static create(e){const t=u(this,fd).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new mt(e)}static get workerSrc(){if(Ui.workerSrc)return Ui.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Fe(this,"_setupFakeWorkerGlobal",(async()=>u(this,ef,o0)?u(this,ef,o0):(await import(this.workerSrc)).WorkerMessageHandler)())}};ll=new WeakMap,Br=new WeakMap,Ia=new WeakMap,ud=new WeakMap,Oy=new WeakMap,hd=new WeakMap,fd=new WeakMap,Zs=new WeakSet,a0=function(){u(this,ll).resolve(),u(this,Br).send("configure",{verbosity:this.verbosity})},ZO=function(e){N(this,Ia,e),N(this,Br,new Om("main","worker",e)),u(this,Br).on("ready",()=>{}),k(this,Zs,a0).call(this)},eL=function(){if(u(mt,hd)||u(mt,ef,o0)){k(this,Zs,Um).call(this);return}let{workerSrc:e}=mt;try{mt._isSameOrigin(window.location,e)||(e=mt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Om("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?u(this,ll).reject(new Error("Worker was destroyed")):k(this,Zs,Um).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,ud)||r()},{signal:i.signal}),n.on("test",l=>{if(i.abort(),this.destroyed||!l){r();return}N(this,Br,n),N(this,Ia,t),N(this,ud,t),k(this,Zs,a0).call(this)}),n.on("ready",l=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{k(this,Zs,Um).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{Ib("The worker has been disabled.")}k(this,Zs,Um).call(this)},Um=function(){u(mt,hd)||(we("Setting up fake worker."),N(mt,hd,!0)),mt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,ll).reject(new Error("Worker was destroyed"));return}const t=new Z9;N(this,Ia,t);const n=`fake${ts(mt,Oy)._++}`,r=new Om(n+"_worker",n,t);e.setup(r,t),N(this,Br,new Om(n,n+"_worker",t)),k(this,Zs,a0).call(this)}).catch(e=>{u(this,ll).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ef=new WeakSet,o0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},E(mt,ef),E(mt,Oy,0),E(mt,hd,!1),E(mt,fd,new WeakMap),Ks&&(N(mt,hd,!0),Ui.workerSrc||(Ui.workerSrc="./pdf.worker.mjs")),mt._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const r=new URL(t,n);return n.origin===r.origin},mt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},mt.fromPort=e=>{if(z9("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return mt.create(e)};let Lp=mt;var Da,Pi,tf,sf,Oa,md,Hm;class HG{constructor(e,t,n,r,i,o){E(this,md);E(this,Da,new Map);E(this,Pi,new Map);E(this,tf,new Map);E(this,sf,new Map);E(this,Oa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new GO,this.fontLoader=new q9({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Fe(this,"annotationStorage",new rA)}getRenderingIntent(e,t=Do.ENABLE,n=null,r=!1,i=!1){let o=zn.DISPLAY,l=d_;switch(e){case"any":o=zn.ANY;break;case"display":break;case"print":o=zn.PRINT;break;default:we(`getRenderingIntent - invalid intent: ${e}`)}const c=o&zn.PRINT&&n instanceof PO?n:this.annotationStorage;switch(t){case Do.DISABLE:o+=zn.ANNOTATIONS_DISABLE;break;case Do.ENABLE:break;case Do.ENABLE_FORMS:o+=zn.ANNOTATIONS_FORMS;break;case Do.ENABLE_STORAGE:o+=zn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:we(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=zn.IS_EDITING),i&&(o+=zn.OPLIST);const{ids:d,hash:h}=c.modifiedIds,f=[o,l.hash,h];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=u(this,Oa))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of u(this,Pi).values())e.push(r._destroy());u(this,Pi).clear(),u(this,tf).clear(),u(this,sf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Da).clear(),this.filterFactory.destroy(),Dp.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Yl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{Bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Bt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(n,r)=>{Bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:l}){if(l){r.close();return}Bt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new BG(n,this))}),e.on("DocException",n=>{t._capability.reject(ln(n))}),e.on("PasswordRequest",n=>{N(this,Oa,Promise.withResolvers());try{if(!t.onPassword)throw ln(n);const r=i=>{i instanceof Error?u(this,Oa).reject(i):u(this,Oa).resolve({password:i})};t.onPassword(r,n.code)}catch(r){u(this,Oa).reject(r)}return u(this,Oa).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;u(this,Pi).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":if("error"in i){const h=i.error;we(`Error during font loading: ${h}`),this.commonObjs.resolve(n,h);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new K9(i,l);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:d}=i;Bt(d,"The imageRef must be defined.");for(const h of u(this,Pi).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(n,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,i,o])=>{var c;if(this.destroyed)return;const l=u(this,Pi).get(r);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[n.type];if(!r)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&we("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=u(this,tf).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,sf).set(i.refStr,e);const o=new UG(t,i,this,this._params.pdfBug);return u(this,Pi).set(t,o),o});return u(this,tf).set(t,r),r}getPageIndex(e){return u_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return k(this,md,Hm).call(this,"GetFieldObjects")}hasJSActions(){return k(this,md,Hm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return k(this,md,Hm).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return k(this,md,Hm).call(this,"GetOptionalContentConfig").then(t=>new wG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Da).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new yG(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,Da).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Pi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Da).clear(),this.filterFactory.destroy(!0),Dp.cleanup()}}cachedPageNumber(e){if(!u_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,sf).get(t)??null}}Da=new WeakMap,Pi=new WeakMap,tf=new WeakMap,sf=new WeakMap,Oa=new WeakMap,md=new WeakSet,Hm=function(e,t=null){const n=u(this,Da).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return u(this,Da).set(e,r),r};var cl;class WG{constructor(e){E(this,cl,null);q(this,"onContinue",null);q(this,"onError",null);N(this,cl,e)}get promise(){return u(this,cl).capability.promise}cancel(e=0){u(this,cl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,cl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,cl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}cl=new WeakMap;var dl,pd;const Ac=class Ac{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:m=null,enableHWA:p=!1}){E(this,dl,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new WG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(Ac,pd).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Ac,pd).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:r,background:i}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new fh(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n,r,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),u(this,dl)&&(window.cancelAnimationFrame(u(this,dl)),N(this,dl,null)),u(Ac,pd).delete(this._canvas),e||(e=new sA(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?N(this,dl,window.requestAnimationFrame(()=>{N(this,dl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Ac,pd).delete(this._canvas),this.callback())))}};dl=new WeakMap,pd=new WeakMap,E(Ac,pd,new WeakSet);let N_=Ac;const VG="5.4.54",GG="295fb3ec4";var kn,gd,nf,Kt,Dg,rf,La,Og,ul,Ur,Lg,st,S_,A_,E_,bc,tL,Co;const cn=class cn{constructor({editor:e=null,uiManager:t=null}){E(this,st);E(this,kn,null);E(this,gd,null);E(this,nf);E(this,Kt,null);E(this,Dg,!1);E(this,rf,!1);E(this,La,null);E(this,Og);E(this,ul,null);E(this,Ur,null);var n,r;e?(N(this,rf,!1),N(this,La,e)):N(this,rf,!0),N(this,Ur,(e==null?void 0:e._uiManager)||t),N(this,Og,u(this,Ur)._eventBus),N(this,nf,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((r=u(this,Ur))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),u(cn,Lg)||N(cn,Lg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Fe(this,"_keyboardManager",new Lv([[["Escape","mac+Escape"],cn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],cn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],cn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],cn.prototype._moveToPrevious],[["Home","mac+Home"],cn.prototype._moveToBeginning],[["End","mac+End"],cn.prototype._moveToEnd]]))}renderButton(){const e=N(this,kn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,La)&&(e.ariaControls=`${u(this,La).id}_colorpicker_dropdown`);const t=u(this,Ur)._signal;e.addEventListener("click",k(this,st,bc).bind(this),{signal:t}),e.addEventListener("keydown",k(this,st,E_).bind(this),{signal:t});const n=N(this,gd,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=u(this,nf),e.append(n),e}renderMainDropdown(){const e=N(this,Kt,k(this,st,S_).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,kn)){k(this,st,bc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&k(this,st,A_).call(this,t,e)}_moveToNext(e){var t,n;if(!u(this,st,Co)){k(this,st,bc).call(this,e);return}if(e.target===u(this,kn)){(t=u(this,Kt).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=u(this,Kt))==null?void 0:t.firstChild)||e.target===u(this,kn)){u(this,st,Co)&&this._hideDropdownFromKeyboard();return}u(this,st,Co)||k(this,st,bc).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!u(this,st,Co)){k(this,st,bc).call(this,e);return}(t=u(this,Kt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,st,Co)){k(this,st,bc).call(this,e);return}(t=u(this,Kt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,Kt))==null||e.classList.add("hidden"),u(this,kn).ariaExpanded="false",(t=u(this,ul))==null||t.abort(),N(this,ul,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,rf)){if(!u(this,st,Co)){(e=u(this,La))==null||e.unselect();return}this.hideDropdown(),u(this,kn).focus({preventScroll:!0,focusVisible:u(this,Dg)})}}updateColor(e){if(u(this,gd)&&(u(this,gd).style.backgroundColor=e),!u(this,Kt))return;const t=u(this,Ur).highlightColors.values();for(const n of u(this,Kt).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,kn))==null||e.remove(),N(this,kn,null),N(this,gd,null),(t=u(this,Kt))==null||t.remove(),N(this,Kt,null)}};kn=new WeakMap,gd=new WeakMap,nf=new WeakMap,Kt=new WeakMap,Dg=new WeakMap,rf=new WeakMap,La=new WeakMap,Og=new WeakMap,ul=new WeakMap,Ur=new WeakMap,Lg=new WeakMap,st=new WeakSet,S_=function(){const e=document.createElement("div"),t=u(this,Ur)._signal;e.addEventListener("contextmenu",Nr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,La)&&(e.id=`${u(this,La).id}_colorpicker_dropdown`);for(const[n,r]of u(this,Ur).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",u(cn,Lg)[n]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===u(this,nf),i.addEventListener("click",k(this,st,A_).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",k(this,st,E_).bind(this),{signal:t}),e},A_=function(e,t){t.stopPropagation(),u(this,Og).dispatch("switchannotationeditorparams",{source:this,type:Be.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},E_=function(e){cn._keyboardManager.exec(this,e)},bc=function(e){if(u(this,st,Co)){this.hideDropdown();return}if(N(this,Dg,e.detail===0),u(this,ul)||(N(this,ul,new AbortController),window.addEventListener("pointerdown",k(this,st,tL).bind(this),{signal:u(this,Ur).combinedSignal(u(this,ul))})),u(this,kn).ariaExpanded="true",u(this,Kt)){u(this,Kt).classList.remove("hidden");return}const t=N(this,Kt,k(this,st,S_).call(this));u(this,kn).append(t)},tL=function(e){var t;(t=u(this,Kt))!=null&&t.contains(e.target)||this.hideDropdown()},Co=function(){return u(this,Kt)&&!u(this,Kt).classList.contains("hidden")},E(cn,Lg,null);let gy=cn;var Ti,Fg,af,$g;const Ec=class Ec{constructor(e){E(this,Ti,null);E(this,Fg,null);E(this,af,null);N(this,Fg,e),N(this,af,e._uiManager),u(Ec,$g)||N(Ec,$g,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Ti))return u(this,Ti);const{editorType:e,colorType:t,colorValue:n}=u(this,Fg),r=N(this,Ti,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",u(Ec,$g)[e]),r.addEventListener("input",()=>{u(this,af).updateParams(t,r.value)},{signal:u(this,af)._signal}),r}update(e){u(this,Ti)&&(u(this,Ti).value=e)}destroy(){var e;(e=u(this,Ti))==null||e.remove(),N(this,Ti,null)}hideDropdown(){}};Ti=new WeakMap,Fg=new WeakMap,af=new WeakMap,$g=new WeakMap,E(Ec,$g,null);let vy=Ec;function Tk(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function jm(s){return Math.max(0,Math.min(255,255*s))}class Rk{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=jm(e),[e,e,e]}static G_HTML([e]){const t=Tk(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(jm)}static RGB_HTML(e){return`#${e.map(Tk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[jm(1-Math.min(1,e+r)),jm(1-Math.min(1,n+r)),jm(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,i=1-t,o=1-n,l=Math.min(r,i,o);return["CMYK",r,i,o,l]}}class qG{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nt("Abstract method `_createSVG` called.")}}class xy extends qG{_createSVG(e){return document.createElementNS(ca,e)}}class sL{static setupStorage(e,t,n,r,i){const o=r.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{r.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",l=>{r.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:i}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[c,d]of Object.entries(o))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&i.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var f,m;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:n});const l=i!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),l&&Op.shouldBuildText(r.name)&&d.push(p)}return{textDivs:d}}const h=[[r,-1,o]];for(;h.length>0;){const[p,x,v]=h.at(-1);if(x+1===p.children.length){h.pop();continue}const w=p.children[++h.at(-1)[1]];if(w===null)continue;const{name:g}=w;if(g==="#text"){const b=document.createTextNode(w.value);d.push(b),v.append(b);continue}const y=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,g):document.createElement(g);if(v.append(y),w.attributes&&this.setAttributes({html:y,element:w,storage:t,intent:i,linkService:n}),((m=w.children)==null?void 0:m.length)>0)h.push([w,-1,y]);else if(w.value){const b=document.createTextNode(w.value);l&&Op.shouldBuildText(g)&&d.push(b),y.append(b)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const KG=9,lu=new WeakSet,YG=new Date().getTimezoneOffset()*60*1e3;class Mk{static create(e){switch(e.data.annotationType){case Ot.LINK:return new oA(e);case Ot.TEXT:return new XG(e);case Ot.WIDGET:switch(e.data.fieldType){case"Tx":return new QG(e);case"Btn":return e.data.radioButton?new iL(e):e.data.checkBox?new ZG(e):new eq(e);case"Ch":return new tq(e);case"Sig":return new JG(e)}return new gu(e);case Ot.POPUP:return new k_(e);case Ot.FREETEXT:return new dL(e);case Ot.LINE:return new nq(e);case Ot.SQUARE:return new rq(e);case Ot.CIRCLE:return new iq(e);case Ot.POLYLINE:return new uL(e);case Ot.CARET:return new oq(e);case Ot.INK:return new lA(e);case Ot.POLYGON:return new aq(e);case Ot.HIGHLIGHT:return new hL(e);case Ot.UNDERLINE:return new lq(e);case Ot.SQUIGGLY:return new cq(e);case Ot.STRIKEOUT:return new dq(e);case Ot.STAMP:return new fL(e);case Ot.FILEATTACHMENT:return new uq(e);default:return new It(e)}}}var vd,of,Fa,zg,C_;const AA=class AA{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){E(this,zg);E(this,vd,null);E(this,of,!1);E(this,Fa,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return AA._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;e.rect&&(u(this,vd)||N(this,vd,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&k(this,zg,C_).call(this,t);let r=((i=u(this,Fa))==null?void 0:i.popup)||this.popup;!r&&(n!=null&&n.text)&&(this._createPopup(n),r=u(this,Fa).popup),r&&(r.updateEdited(e),n!=null&&n.deleted&&(r.remove(),N(this,Fa,null),this.popup=null))}resetEdited(){var e;u(this,vd)&&(k(this,zg,C_).call(this,u(this,vd).rect),(e=u(this,Fa))==null||e.popup.resetEdited(),N(this,vd,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof gu)&&!(this instanceof oA)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof k_){const{rotation:v}=t;return!t.hasOwnCanvas&&v!==0&&this.setRotation(v,i),i}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const v=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(v>0||w>0){const y=`calc(${v}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof iL){const y=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=y}switch(t.borderStyle.style){case Du.SOLID:o.borderStyle="solid";break;case Du.DASHED:o.borderStyle="dashed";break;case Du.BEVELED:we("Unimplemented border style: beveled");break;case Du.INSET:we("Unimplemented border style: inset");break;case Du.UNDERLINE:o.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(N(this,of,!0),o.borderColor=fe.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):o.borderWidth=0}const d=fe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:h,pageHeight:f,pageX:m,pageY:p}=r.rawDims;o.left=`${100*(d[0]-m)/h}%`,o.top=`${100*(d[1]-p)/f}%`;const{rotation:x}=t;return t.hasOwnCanvas||x===0?(o.width=`${100*l/h}%`,o.height=`${100*c/f}%`):this.setRotation(x,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/n}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const i=r.detail[t],o=i[0],l=i.slice(1);r.target.style[n]=Rk[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:Rk[`${o}_rgb`](l)})};return Fe(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const o=n[r];if(o){const l={detail:{[r]:i},target:e};o(l),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(v=>Math.fround(v));if(e.length===8){const[v,w,g,y]=e.subarray(2,6);if(r===v&&i===w&&t===g&&n===y)return}const{style:o}=this.container;let l;if(u(this,of)){const{borderColor:v,borderWidth:w}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=r-t,d=i-n,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const m=h.createElement("defs");f.append(m);const p=h.createElement("clipPath"),x=`clippath_${this.data.id}`;p.setAttribute("id",x),p.setAttribute("clipPathUnits","objectBoundingBox"),m.append(p);for(let v=2,w=e.length;v<w;v+=8){const g=e[v],y=e[v+1],b=e[v+2],_=e[v+3],S=h.createElement("rect"),A=(b-t)/c,C=(i-y)/d,P=(g-b)/c,T=(y-_)/d;S.setAttribute("x",A),S.setAttribute("y",C),S.setAttribute("width",P),S.setAttribute("height",T),p.append(S),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${C}" width="${P}" height="${T}"/>`)}u(this,of)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const i=N(this,Fa,new k_({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}get hasPopupElement(){return!!(u(this,Fa)||this.popup||this.data.popupRef)}render(){nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:l}of r){if(i===-1||o===t)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!lu.has(d)){we(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:d})}return n}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&lu.has(r)&&n.push({id:o,exportValue:i,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};vd=new WeakMap,of=new WeakMap,Fa=new WeakMap,zg=new WeakSet,C_=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let It=AA;var Wn,wc,nL,rL;class oA extends It{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});E(this,Wn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(k(this,Wn,nL).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(k(this,Wn,rL).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,n,r=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&k(this,Wn,wc).call(this),r&&(t.title=r)}_bindNamedAction(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(t.title=r),k(this,Wn,wc).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const o=r.get(i);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),k(this,Wn,wc).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),k(this,Wn,wc).call(this),!this._fieldObjects){we('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var f;r==null||r();const{fields:i,refs:o,include:l}=n,c=[];if(i.length!==0||o.length!==0){const m=new Set(o);for(const p of i){const x=this._fieldObjects[p]||[];for(const{id:v}of x)m.add(v)}for(const p of Object.values(this._fieldObjects))for(const x of p)m.has(x.id)===l&&c.push(x)}else for(const m of Object.values(this._fieldObjects))c.push(...m);const d=this.annotationStorage,h=[];for(const m of c){const{id:p}=m;switch(h.push(p),m.type){case"text":{const v=m.defaultValue||"";d.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=m.defaultValue===m.exportValues;d.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=m.defaultValue||"";d.setValue(p,{value:v});break}default:continue}const x=document.querySelector(`[data-element-id="${p}"]`);if(x){if(!lu.has(x)){we(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Wn=new WeakSet,wc=function(){this.container.setAttribute("data-internal-link","")},nL=function(t,n,r="",i=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},k(this,Wn,wc).call(this)},rL=function(t,n,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(t.title=r),k(this,Wn,wc).call(this)};class XG extends It{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class gu extends It{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Es.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var l;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,n,r){var i,o,l;for(const[c,d]of n)(d==="Action"||(i=this.data.actions)!=null&&i[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,d,r),d==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||KG,i=e.style;let o;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Vw*r))||1,f=d/h;o=Math.min(r,c(f/Vw))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(r,c(d/Vw))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=fe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class QG extends gu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),i.setValue(o.id,{[r]:n})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let d=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),lu.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:p}=this.data,x=!!m&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(n,"value",w.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",w=>{const g=this.data.defaultFieldValue??"";n.value=h.userValue=g,h.formattedValue=null});let v=w=>{const{formattedValue:g}=h;g!=null&&(w.target.value=g),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{var b;if(h.focused)return;const{target:y}=g;if(x&&(y.type=m,p&&(y.step=p)),h.userValue){const _=h.userValue;if(x)if(m==="time"){const S=new Date(_),A=[S.getHours(),S.getMinutes(),S.getSeconds()];y.value=A.map(C=>C.toString().padStart(2,"0")).join(":")}else y.value=new Date(_-YG).toISOString().split(m==="date"?"T":".",1)[0];else y.value=_}h.lastCommittedValue=y.value,h.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const y={value(b){h.userValue=b.detail.value??"",x||e.setValue(t,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:_}=b.detail;h.formattedValue=_,_!=null&&b.target!==document.activeElement&&(b.target.value=_);const S={formattedValue:_};x&&(S.value=_),e.setValue(t,S)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var C;const{charLimit:_}=b.detail,{target:S}=b;if(_===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",_);let A=h.userValue;!A||A.length<=_||(A=A.slice(0,_),S.value=h.userValue=A,e.setValue(t,{value:A}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(y,g)}),n.addEventListener("keydown",g=>{var _;h.commitKey=1;let y=-1;if(g.key==="Escape"?y=0:g.key==="Enter"&&!this.data.multiLine?y=2:g.key==="Tab"&&(h.commitKey=3),y===-1)return;const{value:b}=g.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:y,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const w=v;v=null,n.addEventListener("blur",g=>{var _,S;if(!h.focused||!g.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(h.focused=!1);const{target:y}=g;let{value:b}=y;if(x){if(b&&m==="time"){const A=b.split(":").map(C=>parseInt(C,10));b=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),y.step=""}else b=new Date(b).valueOf();y.type="text"}h.userValue=b,h.lastCommittedValue!==b&&((S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:h.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),w(g)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",g=>{var T;h.lastCommittedValue=null;const{data:y,target:b}=g,{value:_,selectionStart:S,selectionEnd:A}=b;let C=S,P=A;switch(g.inputType){case"deleteWordBackward":{const O=_.substring(0,S).match(/\w*[^\w]*$/);O&&(C-=O[0].length);break}case"deleteWordForward":{const O=_.substring(S).match(/^[^\w]*\w*/);O&&(P+=O[0].length);break}case"deleteContentBackward":S===A&&(C-=1);break;case"deleteContentForward":S===A&&(P+=1);break}g.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:y||"",willCommit:!1,selStart:C,selEnd:P}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(v&&n.addEventListener("blur",v),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class JG extends gu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class ZG extends gu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return lu.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,n)){const h=c&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(n,{value:c})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class iL extends gu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(lu.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const d of this._getElementsByName(l,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const h=o===d.detail.value;for(const f of this._getElementsByName(d.target.name)){const m=h&&f.id===n;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class eq extends oA{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class tq extends gu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");lu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const m of r.options)m.selected=m.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,n.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),r.append(f)}let o=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),o=()=>{h.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const l=h=>{const f=h?"value":"textContent",{options:m,multiple:p}=r;return p?Array.prototype.filter.call(m,x=>x.selected).map(x=>x[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let c=l(!1);const d=h=>{const f=h.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const f={value(m){o==null||o();const p=m.detail.value,x=new Set(Array.isArray(p)?p:[p]);for(const v of r.options)v.selected=x.has(v.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(m){r.multiple=!0},remove(m){const p=r.options,x=m.detail.remove;p[x].selected=!1,r.remove(x),p.length>0&&Array.prototype.findIndex.call(p,w=>w.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},clear(m){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(m){const{index:p,displayValue:x,exportValue:v}=m.detail.insert,w=r.children[p],g=document.createElement("option");g.textContent=x,g.value=v,w?w.before(g):r.append(g),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},items(m){const{items:p}=m.detail;for(;r.length!==0;)r.remove(0);for(const x of p){const{displayValue:v,exportValue:w}=x,g=document.createElement("option");g.textContent=v,g.value=w,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:l(!0),items:d(m)}),c=l(!1)},indices(m){const p=new Set(m.detail.indices);for(const x of m.target.options)x.selected=p.has(x.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,h)}),r.addEventListener("input",h=>{var p;const f=l(!0),m=l(!1);e.setValue(t,{value:f}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class k_ extends It{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:It._hasPopupData(t)}),this.elements=n,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new sq({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),n=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(r=>`${tA}${r}`).join(",")),this.container}}var lf,Ly,Fy,cf,df,Ct,$a,hl,uf,Bg,hf,Ri,Pn,fl,za,Ug,Ba,ff,xd,ml,Ke,l0,c0,P_,aL,oL,lL,cL,d0,u0,T_;class sq{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:i,contentsObj:o,richText:l,parent:c,rect:d,parentRect:h,open:f}){E(this,Ke);E(this,lf,k(this,Ke,lL).bind(this));E(this,Ly,k(this,Ke,T_).bind(this));E(this,Fy,k(this,Ke,u0).bind(this));E(this,cf,k(this,Ke,d0).bind(this));E(this,df,null);E(this,Ct,null);E(this,$a,null);E(this,hl,null);E(this,uf,null);E(this,Bg,null);E(this,hf,null);E(this,Ri,!1);E(this,Pn,null);E(this,fl,null);E(this,za,null);E(this,Ug,null);E(this,Ba,null);E(this,ff,null);E(this,xd,null);E(this,ml,!1);N(this,Ct,e),N(this,ff,r),N(this,$a,o),N(this,Ba,l),N(this,Bg,c),N(this,df,t),N(this,Ug,d),N(this,hf,h),N(this,uf,n),N(this,hl,fy.toDateObject(i)),this.trigger=n.flatMap(m=>m.getElementsToTriggerPopup()),k(this,Ke,l0).call(this),u(this,Ct).hidden=!0,f&&k(this,Ke,d0).call(this)}render(){var r;if(u(this,Pn))return;const e=N(this,Pn,document.createElement("div"));if(e.className="popup",u(this,df)){const i=e.style.outlineColor=fe.makeHexColor(...u(this,df));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=u(this,ff))!=null&&r.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=u(this,ff)}if(e.append(t),u(this,hl)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,hl).valueOf()})),i.dateTime=u(this,hl).toISOString(),t.append(i)}const n=u(this,Ke,c0);if(n)sL.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(u(this,$a));e.append(i)}u(this,Ct).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let i=0,o=r.length;i<o;++i){const l=r[i];n.append(document.createTextNode(l)),i<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popup:t,deleted:n}){var r;if(n||t!=null&&t.deleted){this.remove();return}k(this,Ke,l0).call(this),u(this,xd)||N(this,xd,{contentsObj:u(this,$a),richText:u(this,Ba)}),e&&N(this,za,null),t&&(N(this,Ba,k(this,Ke,oL).call(this,t.text)),N(this,hl,fy.toDateObject(t.date)),N(this,$a,null)),(r=u(this,Pn))==null||r.remove(),N(this,Pn,null)}resetEdited(){var e;u(this,xd)&&({contentsObj:ts(this,$a)._,richText:ts(this,Ba)._}=u(this,xd),N(this,xd,null),(e=u(this,Pn))==null||e.remove(),N(this,Pn,null),N(this,za,null))}remove(){var e,t;(e=u(this,fl))==null||e.abort(),N(this,fl,null),(t=u(this,Pn))==null||t.remove(),N(this,Pn,null),N(this,ml,!1),N(this,Ri,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){N(this,ml,this.isVisible),u(this,ml)&&(u(this,Ct).hidden=!0)}maybeShow(){k(this,Ke,l0).call(this),u(this,ml)&&(u(this,Pn)||k(this,Ke,u0).call(this),N(this,ml,!1),u(this,Ct).hidden=!1)}get isVisible(){return u(this,Ct).hidden===!1}}lf=new WeakMap,Ly=new WeakMap,Fy=new WeakMap,cf=new WeakMap,df=new WeakMap,Ct=new WeakMap,$a=new WeakMap,hl=new WeakMap,uf=new WeakMap,Bg=new WeakMap,hf=new WeakMap,Ri=new WeakMap,Pn=new WeakMap,fl=new WeakMap,za=new WeakMap,Ug=new WeakMap,Ba=new WeakMap,ff=new WeakMap,xd=new WeakMap,ml=new WeakMap,Ke=new WeakSet,l0=function(){var t;if(u(this,fl))return;N(this,fl,new AbortController);const{signal:e}=u(this,fl);for(const n of this.trigger)n.addEventListener("click",u(this,cf),{signal:e}),n.addEventListener("mouseenter",u(this,Fy),{signal:e}),n.addEventListener("mouseleave",u(this,Ly),{signal:e}),n.classList.add("popupTriggerArea");for(const n of u(this,uf))(t=n.container)==null||t.addEventListener("keydown",u(this,lf),{signal:e})},c0=function(){const e=u(this,Ba),t=u(this,$a);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Ba).html||null},P_=function(){var e,t,n;return((n=(t=(e=u(this,Ke,c0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},aL=function(){var e,t,n;return((n=(t=(e=u(this,Ke,c0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},oL=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:u(this,Ke,aL),fontSize:u(this,Ke,P_)?`calc(${u(this,Ke,P_)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return n},lL=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Ri))&&k(this,Ke,d0).call(this)},cL=function(){if(u(this,za)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=u(this,Bg);let o=!!u(this,hf),l=o?u(this,hf):u(this,Ug);for(const x of u(this,uf))if(!l||fe.intersect(x.data.rect,l)!==null){l=x.data.rect,o=!0;break}const c=fe.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=o?l[2]-l[0]+5:0,f=c[0]+h,m=c[1];N(this,za,[100*(f-r)/t,100*(m-i)/n]);const{style:p}=u(this,Ct);p.left=`${u(this,za)[0]}%`,p.top=`${u(this,za)[1]}%`},d0=function(){N(this,Ri,!u(this,Ri)),u(this,Ri)?(k(this,Ke,u0).call(this),u(this,Ct).addEventListener("click",u(this,cf)),u(this,Ct).addEventListener("keydown",u(this,lf))):(k(this,Ke,T_).call(this),u(this,Ct).removeEventListener("click",u(this,cf)),u(this,Ct).removeEventListener("keydown",u(this,lf)))},u0=function(){u(this,Pn)||this.render(),this.isVisible?u(this,Ri)&&u(this,Ct).classList.add("focused"):(k(this,Ke,cL).call(this),u(this,Ct).hidden=!1,u(this,Ct).style.zIndex=parseInt(u(this,Ct).style.zIndex)+1e3)},T_=function(){u(this,Ct).classList.remove("focused"),!(u(this,Ri)||!this.isVisible)&&(u(this,Ct).hidden=!0,u(this,Ct).style.zIndex=parseInt(u(this,Ct).style.zIndex)-1e3)};class dL extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=be.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Hg;class nq extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Hg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=N(this,Hg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Hg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hg=new WeakMap;var Wg;class rq extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Wg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,l=N(this,Wg,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",r-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Wg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wg=new WeakMap;var Vg;class iq extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Vg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),o=t.borderStyle.width,l=N(this,Vg,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",r/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",r/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Vg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vg=new WeakMap;var Gg;class uL extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Gg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:i},width:o,height:l}=this;if(!n)return this.container;const c=this.svgFactory.create(o,l,!0);let d=[];for(let f=0,m=n.length;f<m;f+=2){const p=n[f]-t[0],x=t[3]-n[f+1];d.push(`${p},${x}`)}d=d.join(" ");const h=N(this,Gg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Gg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gg=new WeakMap;class aq extends uL{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class oq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var qg,yd,Kg,R_;class lA extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});E(this,Kg);E(this,qg,null);E(this,yd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?be.HIGHLIGHT:be.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:l,width:c,height:d}=k(this,Kg,R_).call(this,n,t),h=this.svgFactory.create(c,d,!0),f=N(this,qg,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,p=r.length;m<p;m++){const x=this.svgFactory.createElement(this.svgElementName);u(this,yd).push(x),x.setAttribute("points",r[m].join(",")),f.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:i}=t,o=u(this,qg);if(n>=0&&o.setAttribute("stroke-width",n||1),r)for(let l=0,c=u(this,yd).length;l<c;l++)u(this,yd)[l].setAttribute("points",r[l].join(","));if(i){const{transform:l,width:c,height:d}=k(this,Kg,R_).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return u(this,yd)}addHighlightArea(){this.container.classList.add("highlightArea")}}qg=new WeakMap,yd=new WeakMap,Kg=new WeakSet,R_=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class hL extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=be.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class lq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class cq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class dq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class fL extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=be.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Yg,Xg,M_;class uq extends It{constructor(t){var r;super(t,{isRenderable:!0});E(this,Xg);E(this,Yg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",k(this,Xg,M_).bind(this)),N(this,Yg,r);const{isMac:i}=Es.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&k(this,Xg,M_).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return u(this,Yg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yg=new WeakMap,Xg=new WeakSet,M_=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Qg,bd,pl,Jg,Zl,D_,O_;const EA=class EA{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:l}){E(this,Zl);E(this,Qg,null);E(this,bd,null);E(this,pl,new Map);E(this,Jg,null);this.div=e,N(this,Qg,t),N(this,bd,n),N(this,Jg,l||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return u(this,pl).size>0}async render(e){var o;const{annotations:t}=e,n=this.div;au(n,this.viewport);const r=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new xy,annotationStorage:e.annotationStorage||new rA,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===Ot.POPUP;if(c){const f=r.get(l.id);if(!f)continue;i.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;i.data=l;const d=Mk.create(i);if(!d.isRenderable)continue;if(!c&&l.popupRef){const f=r.get(l.popupRef);f?f.push(d):r.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await k(this,Zl,D_).call(this,h,l.id,i.elements),d._isEditable&&(u(this,pl).set(d.data.id,d),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(d))}k(this,Zl,O_).call(this)}async addLinkAnnotations(e,t){const n={data:null,layer:this.div,linkService:t,svgFactory:new xy,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=EA._defaultBorderStyle),n.data=r;const i=Mk.create(n);if(!i.isRenderable)continue;const o=i.render();await k(this,Zl,D_).call(this,o,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,au(t,{rotation:e.rotation}),k(this,Zl,O_).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,pl).values())}getEditableAnnotation(e){return u(this,pl).get(e)}static get _defaultBorderStyle(){return Fe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Du.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Qg=new WeakMap,bd=new WeakMap,pl=new WeakMap,Jg=new WeakMap,Zl=new WeakSet,D_=async function(e,t,n){var l,c;const r=e.firstChild||e,i=r.id=`${tA}${t}`,o=await((l=u(this,Jg))==null?void 0:l.getAriaAttributes(i));if(o)for(const[d,h]of o)r.setAttribute(d,h);n?n.at(-1).container.after(e):(this.div.append(e),(c=u(this,Qg))==null||c.moveElementInDOM(this.div,e,r,!1))},O_=function(){var t;if(!u(this,bd))return;const e=this.div;for(const[n,r]of u(this,bd)){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const l=u(this,pl).get(n);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,i.id,r),l._hasNoCanvas=!1):l.canvas=r)}u(this,bd).clear()};let I_=EA;const Cx=/\r\n?|\n/g;var cr,Tn,Zg,wd,Rn,Ut,mL,pL,gL,h0,to,f0,m0,vL,F_,xL;const it=class it extends ot{constructor(t){super({...t,name:"freeTextEditor"});E(this,Ut);E(this,cr);E(this,Tn,"");E(this,Zg,`${this.id}-editor`);E(this,wd,null);E(this,Rn);q(this,"_colorPicker",null);N(this,cr,t.color||it._defaultColor||ot._defaultLineColor),N(this,Rn,t.fontSize||it._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=it.prototype,n=o=>o.isEmpty(),r=ou.TRANSLATE_SMALL,i=ou.TRANSLATE_BIG;return Fe(this,"_keyboardManager",new Lv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){ot.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case Be.FREETEXT_SIZE:it._defaultFontSize=n;break;case Be.FREETEXT_COLOR:it._defaultColor=n;break}}updateParams(t,n){switch(t){case Be.FREETEXT_SIZE:k(this,Ut,mL).call(this,n);break;case Be.FREETEXT_COLOR:k(this,Ut,pL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Be.FREETEXT_SIZE,it._defaultFontSize],[Be.FREETEXT_COLOR,it._defaultColor||ot._defaultLineColor]]}get propertiesToUpdate(){return[[Be.FREETEXT_SIZE,u(this,Rn)],[Be.FREETEXT_COLOR,u(this,cr)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new vy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Be.FREETEXT_COLOR}get colorValue(){return u(this,cr)}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-it._internalPadding*t,-(it._internalPadding+u(this,Rn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),N(this,wd,new AbortController);const t=this._uiManager.combinedSignal(u(this,wd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Zg)),this._isDraggable=!0,(t=u(this,wd))==null||t.abort(),N(this,wd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Tn),n=N(this,Tn,k(this,Ut,gL).call(this).trimEnd());if(t===n)return;const r=i=>{if(N(this,Tn,i),!i){this.remove();return}k(this,Ut,m0).call(this),this._uiManager.rebuild(this),k(this,Ut,h0).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),k(this,Ut,h0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){it._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Zg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${u(this,Rn)}px * var(--total-scale-factor))`,r.color=u(this,cr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[m,p]=this.pageTranslation;let x,v;switch(this.rotation){case 0:x=t+(l[0]-m)/h,v=n+this.height-(l[1]-p)/f;break;case 90:x=t+(l[0]-m)/h,v=n-(l[1]-p)/f,[c,d]=[d,-c];break;case 180:x=t-this.width+(l[0]-m)/h,v=n-(l[1]-p)/f,[c,d]=[-c,-d];break;case 270:x=t+(l[0]-m-this.height*f)/h,v=n+(l[1]-p-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(x*i,v*o,c,d)}else this._moveAfterPaste(t,n);k(this,Ut,m0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var x,v,w;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=k(x=it,to,F_).call(x,n.getData("text")||"").replaceAll(Cx,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const g=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Cx,"")),g!==this.editorDiv){let y=h;for(const b of this.editorDiv.childNodes){if(b===g){y=f;continue}y.push(k(v=it,to,f0).call(v,b))}}h.push(c.nodeValue.slice(0,d).replaceAll(Cx,""))}else if(c===this.editorDiv){let g=h,y=0;for(const b of this.editorDiv.childNodes)y++===d&&(g=f),g.push(k(w=it,to,f0).call(w,b))}N(this,Tn,`${h.join(`
`)}${i}${f.join(`
`)}`),k(this,Ut,m0).call(this);const m=new Range;let p=Math.sumPrecise(h.map(g=>g.length));for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const y=g.nodeValue.length;if(p<=y){m.setStart(g,p),m.setEnd(g,p);break}p-=y}o.removeAllRanges(),o.addRange(m)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var l;let i=null;if(t instanceof dL){const{data:{defaultAppearanceData:{fontSize:c,fontColor:d},rect:h,rotation:f,id:m,popupRef:p,contentsObj:x},textContent:v,textPosition:w,parent:{page:{pageNumber:g}}}=t;if(!v||v.length===0)return null;i=t={annotationType:be.FREETEXT,color:Array.from(d),fontSize:c,value:v.join(`
`),position:w,pageIndex:g-1,rect:h.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:p,comment:(x==null?void 0:x.str)||null}}const o=await super.deserialize(t,n,r);return N(o,Rn,t.fontSize),N(o,cr,fe.makeHexColor(...t.color)),N(o,Tn,k(l=it,to,F_).call(l,t.value)),o._initialData=i,t.comment&&o.setCommentData(t.comment),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=it._internalPadding*this.parentScale,r=this.getRect(n,n),i=ot._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,cr)),o={annotationType:be.FREETEXT,color:i,fontSize:u(this,Rn),value:k(this,Ut,vL).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.isCopy=!0,o):this.annotationElementId&&!k(this,Ut,xL).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t),{style:r}=n;r.fontSize=`calc(${u(this,Rn)}px * var(--total-scale-factor))`,r.color=u(this,cr),n.replaceChildren();for(const l of u(this,Tn).split(`
`)){const c=document.createElement("div");c.append(l?document.createTextNode(l):document.createElement("br")),n.append(c)}const i=it._internalPadding*this.parentScale,o={rect:this.getRect(i,i)};return o.popup=this.hasEditedComment?this.comment:{text:u(this,Tn)},t.updateEdited(o),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};cr=new WeakMap,Tn=new WeakMap,Zg=new WeakMap,wd=new WeakMap,Rn=new WeakMap,Ut=new WeakSet,mL=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,Rn))*this.parentScale),N(this,Rn,i),k(this,Ut,h0).call(this)},r=u(this,Rn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},pL=function(t){const n=i=>{var o;N(this,cr,this.editorDiv.style.color=i),(o=this._colorPicker)==null||o.update(i)},r=u(this,cr);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},gL=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(k(r=it,to,f0).call(r,i)),n=i);return t.join(`
`)},h0=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},to=new WeakSet,f0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Cx,"")},m0=function(){if(this.editorDiv.replaceChildren(),!!u(this,Tn))for(const t of u(this,Tn).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},vL=function(){return u(this,Tn).replaceAll(" "," ")},F_=function(t){return t.replaceAll(" "," ")},xL=function(t){const{value:n,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==o},E(it,to),q(it,"_freeTextDefaultContent",""),q(it,"_internalPadding",0),q(it,"_defaultColor",null),q(it,"_defaultFontSize",10),q(it,"_type","freetext"),q(it,"_editorType",be.FREETEXT);let L_=it;class ie{toSVGPath(){nt("Abstract method `toSVGPath` must be implemented.")}get box(){nt("Abstract getter `box` must be implemented.")}serialize(e,t){nt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l]*r,o[l+1]=n+e[l+1]*i;return o}static _rescaleAndSwap(e,t,n,r,i,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l+1]*r,o[l+1]=n+e[l]*i;return o}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,o){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+o)/6,(n+i)/2,(r+o)/2]}}q(ie,"PRECISION",1e-4);var Mn,Hr,mf,pf,Mi,Le,jd,_d,ev,tv,gf,vf,gl,sv,$y,zy,es,Wm,yL,bL,wL,jL,_L,NL;const pa=class pa{constructor({x:e,y:t},n,r,i,o,l=0){E(this,es);E(this,Mn);E(this,Hr,[]);E(this,mf);E(this,pf);E(this,Mi,[]);E(this,Le,new Float32Array(18));E(this,jd);E(this,_d);E(this,ev);E(this,tv);E(this,gf);E(this,vf);E(this,gl,[]);N(this,Mn,n),N(this,vf,i*r),N(this,pf,o),u(this,Le).set([NaN,NaN,NaN,NaN,e,t],6),N(this,mf,l),N(this,tv,u(pa,sv)*r),N(this,ev,u(pa,zy)*r),N(this,gf,r),u(this,gl).push(e,t)}isEmpty(){return isNaN(u(this,Le)[8])}add({x:e,y:t}){var T;N(this,jd,e),N(this,_d,t);const[n,r,i,o]=u(this,Mn);let[l,c,d,h]=u(this,Le).subarray(8,12);const f=e-d,m=t-h,p=Math.hypot(f,m);if(p<u(this,ev))return!1;const x=p-u(this,tv),v=x/p,w=v*f,g=v*m;let y=l,b=c;l=d,c=h,d+=w,h+=g,(T=u(this,gl))==null||T.push(e,t);const _=-g/x,S=w/x,A=_*u(this,vf),C=S*u(this,vf);return u(this,Le).set(u(this,Le).subarray(2,8),0),u(this,Le).set([d+A,h+C],4),u(this,Le).set(u(this,Le).subarray(14,18),12),u(this,Le).set([d-A,h-C],16),isNaN(u(this,Le)[6])?(u(this,Mi).length===0&&(u(this,Le).set([l+A,c+C],2),u(this,Mi).push(NaN,NaN,NaN,NaN,(l+A-n)/i,(c+C-r)/o),u(this,Le).set([l-A,c-C],14),u(this,Hr).push(NaN,NaN,NaN,NaN,(l-A-n)/i,(c-C-r)/o)),u(this,Le).set([y,b,l,c,d,h],6),!this.isEmpty()):(u(this,Le).set([y,b,l,c,d,h],6),Math.abs(Math.atan2(b-c,y-l)-Math.atan2(g,w))<Math.PI/2?([l,c,d,h]=u(this,Le).subarray(2,6),u(this,Mi).push(NaN,NaN,NaN,NaN,((l+d)/2-n)/i,((c+h)/2-r)/o),[l,c,y,b]=u(this,Le).subarray(14,18),u(this,Hr).push(NaN,NaN,NaN,NaN,((y+l)/2-n)/i,((b+c)/2-r)/o),!0):([y,b,l,c,d,h]=u(this,Le).subarray(0,6),u(this,Mi).push(((y+5*l)/6-n)/i,((b+5*c)/6-r)/o,((5*l+d)/6-n)/i,((5*c+h)/6-r)/o,((l+d)/2-n)/i,((c+h)/2-r)/o),[d,h,l,c,y,b]=u(this,Le).subarray(12,18),u(this,Hr).push(((y+5*l)/6-n)/i,((b+5*c)/6-r)/o,((5*l+d)/6-n)/i,((5*c+h)/6-r)/o,((l+d)/2-n)/i,((c+h)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Mi),t=u(this,Hr);if(isNaN(u(this,Le)[6])&&!this.isEmpty())return k(this,es,yL).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);k(this,es,wL).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return k(this,es,bL).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,o){return new SL(e,t,n,r,i,o)}getOutlines(){var f;const e=u(this,Mi),t=u(this,Hr),n=u(this,Le),[r,i,o,l]=u(this,Mn),c=new Float32Array((((f=u(this,gl))==null?void 0:f.length)??0)+2);for(let m=0,p=c.length-2;m<p;m+=2)c[m]=(u(this,gl)[m]-r)/o,c[m+1]=(u(this,gl)[m+1]-i)/l;if(c[c.length-2]=(u(this,jd)-r)/o,c[c.length-1]=(u(this,_d)-i)/l,isNaN(n[6])&&!this.isEmpty())return k(this,es,jL).call(this,c);const d=new Float32Array(u(this,Mi).length+24+u(this,Hr).length);let h=e.length;for(let m=0;m<h;m+=2){if(isNaN(e[m])){d[m]=d[m+1]=NaN;continue}d[m]=e[m],d[m+1]=e[m+1]}h=k(this,es,NL).call(this,d,h);for(let m=t.length-6;m>=6;m-=6)for(let p=0;p<6;p+=2){if(isNaN(t[m+p])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=t[m+p],d[h+1]=t[m+p+1],h+=2}return k(this,es,_L).call(this,d,h),this.newFreeDrawOutline(d,c,u(this,Mn),u(this,gf),u(this,mf),u(this,pf))}};Mn=new WeakMap,Hr=new WeakMap,mf=new WeakMap,pf=new WeakMap,Mi=new WeakMap,Le=new WeakMap,jd=new WeakMap,_d=new WeakMap,ev=new WeakMap,tv=new WeakMap,gf=new WeakMap,vf=new WeakMap,gl=new WeakMap,sv=new WeakMap,$y=new WeakMap,zy=new WeakMap,es=new WeakSet,Wm=function(){const e=u(this,Le).subarray(4,6),t=u(this,Le).subarray(16,18),[n,r,i,o]=u(this,Mn);return[(u(this,jd)+(e[0]-t[0])/2-n)/i,(u(this,_d)+(e[1]-t[1])/2-r)/o,(u(this,jd)+(t[0]-e[0])/2-n)/i,(u(this,_d)+(t[1]-e[1])/2-r)/o]},yL=function(){const[e,t,n,r]=u(this,Mn),[i,o,l,c]=k(this,es,Wm).call(this);return`M${(u(this,Le)[2]-e)/n} ${(u(this,Le)[3]-t)/r} L${(u(this,Le)[4]-e)/n} ${(u(this,Le)[5]-t)/r} L${i} ${o} L${l} ${c} L${(u(this,Le)[16]-e)/n} ${(u(this,Le)[17]-t)/r} L${(u(this,Le)[14]-e)/n} ${(u(this,Le)[15]-t)/r} Z`},bL=function(e){const t=u(this,Hr);e.push(`L${t[4]} ${t[5]} Z`)},wL=function(e){const[t,n,r,i]=u(this,Mn),o=u(this,Le).subarray(4,6),l=u(this,Le).subarray(16,18),[c,d,h,f]=k(this,es,Wm).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-n)/i} L${c} ${d} L${h} ${f} L${(l[0]-t)/r} ${(l[1]-n)/i}`)},jL=function(e){const t=u(this,Le),[n,r,i,o]=u(this,Mn),[l,c,d,h]=k(this,es,Wm).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(f,e,u(this,Mn),u(this,gf),u(this,mf),u(this,pf))},_L=function(e,t){const n=u(this,Hr);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},NL=function(e,t){const n=u(this,Le).subarray(4,6),r=u(this,Le).subarray(16,18),[i,o,l,c]=u(this,Mn),[d,h,f,m]=k(this,es,Wm).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/l,(n[1]-o)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(r[0]-i)/l,(r[1]-o)/c],t),t+=24},E(pa,sv,8),E(pa,$y,2),E(pa,zy,u(pa,sv)+u(pa,$y));let yy=pa;var xf,Nd,Ua,nv,In,rv,Tt,By,AL;class SL extends ie{constructor(t,n,r,i,o,l){super();E(this,By);E(this,xf);E(this,Nd,new Float32Array(4));E(this,Ua);E(this,nv);E(this,In);E(this,rv);E(this,Tt);N(this,Tt,t),N(this,In,n),N(this,xf,r),N(this,rv,i),N(this,Ua,o),N(this,nv,l),this.lastPoint=[NaN,NaN],k(this,By,AL).call(this,l);const[c,d,h,f]=u(this,Nd);for(let m=0,p=t.length;m<p;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-d)/f;for(let m=0,p=n.length;m<p;m+=2)n[m]=(n[m]-c)/h,n[m+1]=(n[m+1]-d)/f}toSVGPath(){const t=[`M${u(this,Tt)[4]} ${u(this,Tt)[5]}`];for(let n=6,r=u(this,Tt).length;n<r;n+=6){if(isNaN(u(this,Tt)[n])){t.push(`L${u(this,Tt)[n+4]} ${u(this,Tt)[n+5]}`);continue}t.push(`C${u(this,Tt)[n]} ${u(this,Tt)[n+1]} ${u(this,Tt)[n+2]} ${u(this,Tt)[n+3]} ${u(this,Tt)[n+4]} ${u(this,Tt)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,i],o){const l=r-t,c=i-n;let d,h;switch(o){case 0:d=ie._rescale(u(this,Tt),t,i,l,-c),h=ie._rescale(u(this,In),t,i,l,-c);break;case 90:d=ie._rescaleAndSwap(u(this,Tt),t,n,l,c),h=ie._rescaleAndSwap(u(this,In),t,n,l,c);break;case 180:d=ie._rescale(u(this,Tt),r,n,-l,c),h=ie._rescale(u(this,In),r,n,-l,c);break;case 270:d=ie._rescaleAndSwap(u(this,Tt),r,i,-l,-c),h=ie._rescaleAndSwap(u(this,In),r,i,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}get box(){return u(this,Nd)}newOutliner(t,n,r,i,o,l=0){return new yy(t,n,r,i,o,l)}getNewOutline(t,n){const[r,i,o,l]=u(this,Nd),[c,d,h,f]=u(this,xf),m=o*h,p=l*f,x=r*h+c,v=i*f+d,w=this.newOutliner({x:u(this,In)[0]*m+x,y:u(this,In)[1]*p+v},u(this,xf),u(this,rv),t,u(this,nv),n??u(this,Ua));for(let g=2;g<u(this,In).length;g+=2)w.add({x:u(this,In)[g]*m+x,y:u(this,In)[g+1]*p+v});return w.getOutlines()}}xf=new WeakMap,Nd=new WeakMap,Ua=new WeakMap,nv=new WeakMap,In=new WeakMap,rv=new WeakMap,Tt=new WeakMap,By=new WeakSet,AL=function(t){const n=u(this,Tt);let r=n[4],i=n[5];const o=[r,i,r,i];let l=r,c=i;const d=t?Math.max:Math.min;for(let f=6,m=n.length;f<m;f+=6){const p=n[f+4],x=n[f+5];if(isNaN(n[f]))fe.pointBoundingBox(p,x,o),c<x?(l=p,c=x):c===x&&(l=d(l,p));else{const v=[1/0,1/0,-1/0,-1/0];fe.bezierBoundingBox(r,i,...n.slice(f,f+6),v),fe.rectBoundingBox(...v,o),c<v[3]?(l=v[2],c=v[3]):c===v[3]&&(l=d(l,v[2]))}r=p,i=x}const h=u(this,Nd);h[0]=o[0]-u(this,Ua),h[1]=o[1]-u(this,Ua),h[2]=o[2]-o[0]+2*u(this,Ua),h[3]=o[3]-o[1]+2*u(this,Ua),this.lastPoint=[l,c]};var iv,av,vl,Wr,nn,EL,p0,CL,kL,z_;class $_{constructor(e,t=0,n=0,r=!0){E(this,nn);E(this,iv);E(this,av);E(this,vl,[]);E(this,Wr,[]);const i=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:v,width:w,height:g}of e){const y=Math.floor((x-t)/l)*l,b=Math.ceil((x+w+t)/l)*l,_=Math.floor((v-t)/l)*l,S=Math.ceil((v+g+t)/l)*l,A=[y,_,S,!0],C=[b,_,S,!1];u(this,vl).push(A,C),fe.rectBoundingBox(y,_,b,S,i)}const c=i[2]-i[0]+2*n,d=i[3]-i[1]+2*n,h=i[0]-n,f=i[1]-n,m=u(this,vl).at(r?-1:-2),p=[m[0],m[2]];for(const x of u(this,vl)){const[v,w,g]=x;x[0]=(v-h)/c,x[1]=(w-f)/d,x[2]=(g-f)/d}N(this,iv,new Float32Array([h,f,c,d])),N(this,av,p)}getOutlines(){u(this,vl).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of u(this,vl))t[3]?(e.push(...k(this,nn,z_).call(this,t)),k(this,nn,CL).call(this,t)):(k(this,nn,kL).call(this,t),e.push(...k(this,nn,z_).call(this,t)));return k(this,nn,EL).call(this,e)}}iv=new WeakMap,av=new WeakMap,vl=new WeakMap,Wr=new WeakMap,nn=new WeakSet,EL=function(e){const t=[],n=new Set;for(const o of e){const[l,c,d]=o;t.push([l,c,o],[l,d,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const c=t[o][2],d=t[o+1][2];c.push(d),d.push(c),n.add(c),n.add(d)}const r=[];let i;for(;n.size>0;){const o=n.values().next().value;let[l,c,d,h,f]=o;n.delete(o);let m=l,p=c;for(i=[l,d],r.push(i);;){let x;if(n.has(h))x=h;else if(n.has(f))x=f;else break;n.delete(x),[l,c,d,h,f]=x,m!==l&&(i.push(m,p,l,p===c?c:d),m=l),p=p===c?d:c}i.push(m,p)}return new hq(r,u(this,iv),u(this,av))},p0=function(e){const t=u(this,Wr);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,o=t[i][0];if(o===e)return i;o<e?n=i+1:r=i-1}return r+1},CL=function([,e,t]){const n=k(this,nn,p0).call(this,e);u(this,Wr).splice(n,0,[e,t])},kL=function([,e,t]){const n=k(this,nn,p0).call(this,e);for(let r=n;r<u(this,Wr).length;r++){const[i,o]=u(this,Wr)[r];if(i!==e)break;if(i===e&&o===t){u(this,Wr).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[i,o]=u(this,Wr)[r];if(i!==e)break;if(i===e&&o===t){u(this,Wr).splice(r,1);return}}},z_=function(e){const[t,n,r]=e,i=[[t,n,r]],o=k(this,nn,p0).call(this,r);for(let l=0;l<o;l++){const[c,d]=u(this,Wr)[l];for(let h=0,f=i.length;h<f;h++){const[,m,p]=i[h];if(!(d<=m||p<=c)){if(m>=c){if(p>d)i[h][1]=d;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=c,p>d&&i.push([t,d,p])}}}return i};var ov,yf;class hq extends ie{constructor(t,n,r){super();E(this,ov);E(this,yf);N(this,yf,t),N(this,ov,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of u(this,yf)){let[r,i]=n;t.push(`M${r} ${i}`);for(let o=2;o<n.length;o+=2){const l=n[o],c=n[o+1];l===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),r=l)}t.push("Z")}return t.join(" ")}serialize([t,n,r,i],o){const l=[],c=r-t,d=i-n;for(const h of u(this,yf)){const f=new Array(h.length);for(let m=0;m<h.length;m+=2)f[m]=t+h[m]*c,f[m+1]=i-h[m+1]*d;l.push(f)}return l}get box(){return u(this,ov)}get classNamesForOutlining(){return["highlightOutline"]}}ov=new WeakMap,yf=new WeakMap;class B_ extends yy{newFreeDrawOutline(e,t,n,r,i,o){return new fq(e,t,n,r,i,o)}}class fq extends SL{newOutliner(e,t,n,r,i,o=0){return new B_(e,t,n,r,i,o)}}var bf,lv,Ha,Sd,cv,hn,dv,uv,Ad,dr,Dn,vs,wf,Wa,Os,jf,ur,hv,Pe,U_,g0,PL,TL,RL,H_,jc,pr,Bu,ML,v0,Vm,IL,DL,OL,LL,FL;const Ye=class Ye extends ot{constructor(t){super({...t,name:"highlightEditor"});E(this,Pe);E(this,bf,null);E(this,lv,0);E(this,Ha);E(this,Sd,null);E(this,cv,null);E(this,hn,null);E(this,dv,null);E(this,uv,0);E(this,Ad,null);E(this,dr,null);E(this,Dn,null);E(this,vs,!1);E(this,wf,null);E(this,Wa);E(this,Os,null);E(this,jf,"");E(this,ur);E(this,hv,"");this.color=t.color||Ye._defaultColor,N(this,ur,t.thickness||Ye._defaultThickness),N(this,Wa,t.opacity||Ye._defaultOpacity),N(this,Ha,t.boxes||null),N(this,hv,t.methodOfCreation||""),N(this,jf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(N(this,vs,!0),k(this,Pe,g0).call(this,t),k(this,Pe,jc).call(this)):u(this,Ha)&&(N(this,bf,t.anchorNode),N(this,lv,t.anchorOffset),N(this,dv,t.focusNode),N(this,uv,t.focusOffset),k(this,Pe,U_).call(this),k(this,Pe,jc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ye.prototype;return Fe(this,"_keyboardManager",new Lv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,vs)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,ur),methodOfCreation:u(this,hv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;ot.initialize(t,n),Ye._defaultColor||(Ye._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case Be.HIGHLIGHT_COLOR:Ye._defaultColor=n;break;case Be.HIGHLIGHT_THICKNESS:Ye._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return u(this,wf)}updateParams(t,n){switch(t){case Be.HIGHLIGHT_COLOR:k(this,Pe,PL).call(this,n);break;case Be.HIGHLIGHT_THICKNESS:k(this,Pe,TL).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Be.HIGHLIGHT_COLOR,Ye._defaultColor],[Be.HIGHLIGHT_THICKNESS,Ye._defaultThickness]]}get propertiesToUpdate(){return[[Be.HIGHLIGHT_COLOR,this.color||Ye._defaultColor],[Be.HIGHLIGHT_THICKNESS,u(this,ur)||Ye._defaultThickness],[Be.HIGHLIGHT_FREE,u(this,vs)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",N(this,cv,new gy({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(k(this,Pe,Vm).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,k(this,Pe,Vm).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){k(this,Pe,H_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Pe,jc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?k(this,Pe,H_).call(this):t&&(k(this,Pe,jc).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,o,l;const{drawLayer:n}=this.parent;let r;u(this,vs)?(t=(t-this.rotation+360)%360,r=k(i=Ye,pr,Bu).call(i,u(this,dr).box,t)):r=k(o=Ye,pr,Bu).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(u(this,Dn),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(u(this,Os),{bbox:k(l=Ye,pr,Bu).call(l,u(this,hn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,jf)&&(t.setAttribute("aria-label",u(this,jf)),t.setAttribute("role","mark")),u(this,vs)?t.classList.add("free"):this.div.addEventListener("keydown",k(this,Pe,ML).bind(this),{signal:this._uiManager._signal});const n=N(this,Ad,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=u(this,Sd);const[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),rO(this,u(this,Ad),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Os),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Os),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:k(this,Pe,v0).call(this,!0);break;case 1:case 3:k(this,Pe,v0).call(this,!1);break}}select(){var t;super.select(),u(this,Os)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Os),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,Os)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Os),{rootClass:{selected:!1}}),u(this,vs)||k(this,Pe,v0).call(this,!1))}get _mustFixPosition(){return!u(this,vs)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Dn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,Os),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:i,y:o}){const{x:l,y:c,width:d,height:h}=r.getBoundingClientRect(),f=new AbortController,m=t.combinedSignal(f),p=x=>{f.abort(),k(this,pr,LL).call(this,t,x)};window.addEventListener("blur",p,{signal:m}),window.addEventListener("pointerup",p,{signal:m}),window.addEventListener("pointerdown",Lt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Nr,{signal:m}),r.addEventListener("pointermove",k(this,pr,OL).bind(this,t),{signal:m}),this._freeHighlight=new B_({x:i,y:o},[l,c,d,h],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var v,w,g,y;let i=null;if(t instanceof hL){const{data:{quadPoints:b,rect:_,rotation:S,id:A,color:C,opacity:P,popupRef:T,contentsObj:O},parent:{page:{pageNumber:z}}}=t;i=t={annotationType:be.HIGHLIGHT,color:Array.from(C),opacity:P,quadPoints:b,boxes:null,pageIndex:z-1,rect:_.slice(0),rotation:S,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(O==null?void 0:O.str)||null}}else if(t instanceof lA){const{data:{inkLists:b,rect:_,rotation:S,id:A,color:C,borderStyle:{rawWidth:P},popupRef:T,contentsObj:O},parent:{page:{pageNumber:z}}}=t;i=t={annotationType:be.HIGHLIGHT,color:Array.from(C),thickness:P,inkLists:b,boxes:null,pageIndex:z-1,rect:_.slice(0),rotation:S,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(O==null?void 0:O.str)||null}}const{color:o,quadPoints:l,inkLists:c,opacity:d}=t,h=await super.deserialize(t,n,r);h.color=fe.makeHexColor(...o),N(h,Wa,d||1),c&&N(h,ur,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t.comment);const[f,m]=h.pageDimensions,[p,x]=h.pageTranslation;if(l){const b=N(h,Ha,[]);for(let _=0;_<l.length;_+=8)b.push({x:(l[_]-p)/f,y:1-(l[_+1]-x)/m,width:(l[_+2]-l[_])/f,height:(l[_+1]-l[_+5])/m});k(v=h,Pe,U_).call(v),k(w=h,Pe,jc).call(w),h.rotate(h.rotation)}else if(c){N(h,vs,!0);const b=c[0],_={x:b[0]-p,y:m-(b[1]-x)},S=new B_(_,[0,0,f,m],1,u(h,ur)/2,!0,.001);for(let P=0,T=b.length;P<T;P+=2)_.x=b[P]-p,_.y=m-(b[P+1]-x),S.add(_);const{id:A,clipPathId:C}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);k(g=h,Pe,g0).call(g,{highlightOutlines:S.getOutlines(),highlightId:A,clipPathId:C}),k(y=h,Pe,jc).call(y),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=ot._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:be.HIGHLIGHT,color:r,opacity:u(this,Wa),thickness:u(this,ur),quadPoints:k(this,Pe,IL).call(this),outlines:k(this,Pe,DL).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:k(this,Pe,Vm).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!k(this,Pe,FL).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const n={rect:this.getRect(0,0)};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}static canCreateNewEmptyEditor(){return!1}};bf=new WeakMap,lv=new WeakMap,Ha=new WeakMap,Sd=new WeakMap,cv=new WeakMap,hn=new WeakMap,dv=new WeakMap,uv=new WeakMap,Ad=new WeakMap,dr=new WeakMap,Dn=new WeakMap,vs=new WeakMap,wf=new WeakMap,Wa=new WeakMap,Os=new WeakMap,jf=new WeakMap,ur=new WeakMap,hv=new WeakMap,Pe=new WeakSet,U_=function(){const t=new $_(u(this,Ha),.001);N(this,dr,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,dr).box;const n=new $_(u(this,Ha),.0025,.001,this._uiManager.direction==="ltr");N(this,hn,n.getOutlines());const{lastPoint:r}=u(this,hn);N(this,wf,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},g0=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var f,m;if(N(this,dr,t),N(this,hn,t.getNewOutline(u(this,ur)/2+1.5,.0025)),n>=0)N(this,Dn,n),N(this,Sd,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),N(this,Os,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,hn).box,path:{d:u(this,hn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Dn),{bbox:k(f=Ye,pr,Bu).call(f,u(this,dr).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Os),{bbox:k(m=Ye,pr,Bu).call(m,u(this,hn).box,p),path:{d:u(this,hn).toSVGPath()}})}const[o,l,c,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[p,x]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*x/p,this.height=d*p/x;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[p,x]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*x/p,this.height=d*p/x;break}}const{lastPoint:h}=u(this,hn);N(this,wf,[(h[0]-o)/c,(h[1]-l)/d])},PL=function(t){const n=(o,l)=>{var c,d;this.color=o,N(this,Wa,l),(c=this.parent)==null||c.drawLayer.updateProperties(u(this,Dn),{root:{fill:o,"fill-opacity":l}}),(d=u(this,cv))==null||d.updateColor(o)},r=this.color,i=u(this,Wa);this.addCommands({cmd:n.bind(this,t,Ye._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},TL=function(t){const n=u(this,ur),r=i=>{N(this,ur,i),k(this,Pe,RL).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},RL=function(t){if(!u(this,vs))return;k(this,Pe,g0).call(this,{highlightOutlines:u(this,dr).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},H_=function(){u(this,Dn)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Dn)),N(this,Dn,null),this.parent.drawLayer.remove(u(this,Os)),N(this,Os,null))},jc=function(t=this.parent){u(this,Dn)===null&&({id:ts(this,Dn)._,clipPathId:ts(this,Sd)._}=t.drawLayer.draw({bbox:u(this,dr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":u(this,Wa)},rootClass:{highlight:!0,free:u(this,vs)},path:{d:u(this,dr).toSVGPath()}},!1,!0),N(this,Os,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,vs)},bbox:u(this,hn).box,path:{d:u(this,hn).toSVGPath()}},u(this,vs))),u(this,Ad)&&(u(this,Ad).style.clipPath=u(this,Sd)))},pr=new WeakSet,Bu=function([t,n,r,i],o){switch(o){case 90:return[1-n-i,t,i,r];case 180:return[1-t-r,1-n-i,r,i];case 270:return[n,1-t-r,i,r]}return[t,n,r,i]},ML=function(t){Ye._keyboardManager.exec(this,t)},v0=function(t){if(!u(this,bf))return;const n=window.getSelection();t?n.setPosition(u(this,bf),u(this,lv)):n.setPosition(u(this,dv),u(this,uv))},Vm=function(){return u(this,vs)?this.rotation:0},IL=function(){if(u(this,vs))return null;const[t,n]=this.pageDimensions,[r,i]=this.pageTranslation,o=u(this,Ha),l=new Float32Array(o.length*8);let c=0;for(const{x:d,y:h,width:f,height:m}of o){const p=d*t+r,x=(1-h)*n+i;l[c]=l[c+4]=p,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=p+f*t,l[c+5]=l[c+7]=x-m*n,c+=8}return l},DL=function(t){return u(this,dr).serialize(t,k(this,Pe,Vm).call(this))},OL=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},LL=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},FL=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==n[i])},E(Ye,pr),q(Ye,"_defaultColor",null),q(Ye,"_defaultOpacity",1),q(Ye,"_defaultThickness",12),q(Ye,"_type","highlight"),q(Ye,"_editorType",be.HIGHLIGHT),q(Ye,"_freeHighlightId",-1),q(Ye,"_freeHighlight",null),q(Ye,"_freeHighlightClipId","");let by=Ye;var Ed;class $L{constructor(){E(this,Ed,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){u(this,Ed)[e]=t}toSVGProperties(){const e=u(this,Ed);return N(this,Ed,Object.create(null)),{root:e}}reset(){N(this,Ed,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){nt("Not implemented")}}Ed=new WeakMap;var On,_f,rs,Cd,kd,xl,yl,bl,Pd,Ve,W_,V_,G_,Gm,zL,x0,qm,Uu;const oe=class oe extends ot{constructor(t){super(t);E(this,Ve);E(this,On,null);E(this,_f);q(this,"_colorPicker",null);q(this,"_drawId",null);N(this,_f,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(k(this,Ve,W_).call(this,t),k(this,Ve,Gm).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(n))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){nt("Not implemented")}static get typesMap(){nt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(u(oe,rs).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,n[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,n[i]]);return t}_updateProperty(t,n,r){const i=this._drawingOptions,o=i[n],l=c=>{var h,f;i.updateProperty(n,c);const d=u(this,On).updateProperty(n,c);d&&k(this,Ve,qm).call(this,d),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&((f=this._colorPicker)==null||f.update(c))};this.addCommands({cmd:l.bind(this,r),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(u(this,On).getPathResizingSVGProperties(k(this,Ve,x0).call(this)),{bbox:k(this,Ve,Uu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(u(this,On).getPathResizedSVGProperties(k(this,Ve,x0).call(this)),{bbox:k(this,Ve,Uu).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:k(this,Ve,Uu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(u(this,On).getPathTranslatedSVGProperties(k(this,Ve,x0).call(this),this.parentDimensions),{bbox:k(this,Ve,Uu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,_f)&&(N(this,_f,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){k(this,Ve,G_).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(k(this,Ve,Gm).call(this),k(this,Ve,qm).call(this,u(this,On).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),k(this,Ve,G_).call(this)):t&&(this._uiManager.addShouldRescale(this),k(this,Ve,Gm).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties({bbox:k(this,Ve,Uu).call(this)},u(this,On).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&k(this,Ve,qm).call(this,u(this,On).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),r}static createDrawerInstance(t,n,r,i,o){nt("Not implemented")}static startDrawing(t,n,r,i){var w;const{target:o,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=i;if(u(oe,yl)&&u(oe,yl)!==h)return;const{viewport:{rotation:f}}=t,{width:m,height:p}=o.getBoundingClientRect(),x=N(oe,Cd,new AbortController),v=t.combinedSignal(x);if(u(oe,xl)||N(oe,xl,d),u(oe,yl)??N(oe,yl,h),window.addEventListener("pointerup",g=>{var y;u(oe,xl)===g.pointerId?this._endDraw(g):(y=u(oe,bl))==null||y.delete(g.pointerId)},{signal:v}),window.addEventListener("pointercancel",g=>{var y;u(oe,xl)===g.pointerId?this._currentParent.endDrawingSession():(y=u(oe,bl))==null||y.delete(g.pointerId)},{signal:v}),window.addEventListener("pointerdown",g=>{u(oe,yl)===g.pointerType&&((u(oe,bl)||N(oe,bl,new Set)).add(g.pointerId),u(oe,rs).isCancellable()&&(u(oe,rs).removeLastElement(),u(oe,rs).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Nr,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",g=>{g.timeStamp===u(oe,Pd)&&Lt(g)},{signal:v}),t.toggleDrawing(),(w=n._editorUndoBar)==null||w.hide(),u(oe,rs)){t.drawLayer.updateProperties(this._currentDrawId,u(oe,rs).startNew(l,c,m,p,f));return}n.updateUIForDefaultProperties(this),N(oe,rs,this.createDrawerInstance(l,c,m,p,f)),N(oe,kd,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(oe,kd).toSVGProperties(),u(oe,rs).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(N(oe,Pd,-1),!u(oe,rs))return;const{offsetX:n,offsetY:r,pointerId:i}=t;if(u(oe,xl)===i){if(((o=u(oe,bl))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(oe,rs).add(n,r)),N(oe,Pd,t.timeStamp),Lt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,N(oe,rs,null),N(oe,kd,null),N(oe,yl,null),N(oe,Pd,NaN)),u(oe,Cd)&&(u(oe,Cd).abort(),N(oe,Cd,null),N(oe,xl,NaN),N(oe,bl,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,u(oe,rs).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=u(oe,rs),i=this._currentDrawId,o=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Be.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Be.DRAW_STEP),!u(oe,rs).isEmpty()){const{pageDimensions:[r,i],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(oe,rs).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:u(oe,kd),mustBeCommitted:!t});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,i,o,l){nt("Not implemented")}static async deserialize(t,n,r){var f,m;const{rawDims:{pageWidth:i,pageHeight:o,pageX:l,pageY:c}}=n.viewport,d=this.deserializeDraw(l,c,i,o,this._INNER_MARGIN,t),h=await super.deserialize(t,n,r);return h.createDrawingOptions(t),k(f=h,Ve,W_).call(f,{drawOutlines:d}),k(m=h,Ve,Gm).call(m),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[n,r]=this.pageTranslation,[i,o]=this.pageDimensions;return u(this,On).serialize([n,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};On=new WeakMap,_f=new WeakMap,rs=new WeakMap,Cd=new WeakMap,kd=new WeakMap,xl=new WeakMap,yl=new WeakMap,bl=new WeakMap,Pd=new WeakMap,Ve=new WeakSet,W_=function({drawOutlines:t,drawId:n,drawingOptions:r}){N(this,On,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=k(this,Ve,V_).call(this,t,this.parent),k(this,Ve,qm).call(this,t.box)},V_=function(t,n){const{id:r}=n.drawLayer.draw(oe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},G_=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Gm=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=k(this,Ve,V_).call(this,u(this,On),t)}},zL=function([t,n,r,i]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[n,1-t,r*(l/o),i*(o/l)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(l/o),i*(o/l)];default:return[t,n,r,i]}},x0=function(){const{x:t,y:n,width:r,height:i,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-n,t,r*(o/l),i*(l/o)];case 180:return[1-t,1-n,r,i];case 270:return[n,1-t,r*(o/l),i*(l/o)];default:return[t,n,r,i]}},qm=function(t){if([this.x,this.y,this.width,this.height]=k(this,Ve,zL).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},Uu=function(){const{x:t,y:n,width:r,height:i,rotation:o,parentRotation:l,parentDimensions:[c,d]}=this;switch((o*4+l)/90){case 1:return[1-n-i,t,i,r];case 2:return[1-t-r,1-n-i,r,i];case 3:return[n,1-t-r,i,r];case 4:return[t,n-r*(c/d),i*(d/c),r*(c/d)];case 5:return[1-n,t,r*(c/d),i*(d/c)];case 6:return[1-t-i*(d/c),1-n,i*(d/c),r*(c/d)];case 7:return[n-r*(c/d),1-t-i*(d/c),r*(c/d),i*(d/c)];case 8:return[t-r,n-i,r,i];case 9:return[1-n,t-r,i,r];case 10:return[1-t,1-n,r,i];case 11:return[n-i,1-t,i,r];case 12:return[t-i*(d/c),n,i*(d/c),r*(c/d)];case 13:return[1-n-r*(c/d),t-i*(d/c),r*(c/d),i*(d/c)];case 14:return[1-t,1-n-r*(c/d),i*(d/c),r*(c/d)];case 15:return[n,1-t,r*(c/d),i*(d/c)];default:return[t,n,r,i]}},q(oe,"_currentDrawId",-1),q(oe,"_currentParent",null),E(oe,rs,null),E(oe,Cd,null),E(oe,kd,null),E(oe,xl,NaN),E(oe,yl,null),E(oe,bl,null),E(oe,Pd,NaN),q(oe,"_INNER_MARGIN",3);let wy=oe;var Ii,is,as,Td,Nf,Vs,xs,hr,Rd,Md,Id,Sf,y0;class mq{constructor(e,t,n,r,i,o){E(this,Sf);E(this,Ii,new Float64Array(6));E(this,is);E(this,as);E(this,Td);E(this,Nf);E(this,Vs);E(this,xs,"");E(this,hr,0);E(this,Rd,new $v);E(this,Md);E(this,Id);N(this,Md,n),N(this,Id,r),N(this,Td,i),N(this,Nf,o),[e,t]=k(this,Sf,y0).call(this,e,t);const l=N(this,is,[NaN,NaN,NaN,NaN,e,t]);N(this,Vs,[e,t]),N(this,as,[{line:l,points:u(this,Vs)}]),u(this,Ii).set(l,0)}updateProperty(e,t){e==="stroke-width"&&N(this,Nf,t)}isEmpty(){return!u(this,as)||u(this,as).length===0}isCancellable(){return u(this,Vs).length<=10}add(e,t){[e,t]=k(this,Sf,y0).call(this,e,t);const[n,r,i,o]=u(this,Ii).subarray(2,6),l=e-i,c=t-o;return Math.hypot(u(this,Md)*l,u(this,Id)*c)<=2?null:(u(this,Vs).push(e,t),isNaN(n)?(u(this,Ii).set([i,o,e,t],2),u(this,is).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,Ii)[0])&&u(this,is).splice(6,6),u(this,Ii).set([n,r,i,o,e,t],0),u(this,is).push(...ie.createBezierPoints(n,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(u(this,Vs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){N(this,Md,n),N(this,Id,r),N(this,Td,i),[e,t]=k(this,Sf,y0).call(this,e,t);const o=N(this,is,[NaN,NaN,NaN,NaN,e,t]);N(this,Vs,[e,t]);const l=u(this,as).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),u(this,as).push({line:o,points:u(this,Vs)}),u(this,Ii).set(o,0),N(this,hr,0),this.toSVGPath(),null}getLastElement(){return u(this,as).at(-1)}setLastElement(e){return u(this,as)?(u(this,as).push(e),N(this,is,e.line),N(this,Vs,e.points),N(this,hr,0),{path:{d:this.toSVGPath()}}):u(this,Rd).setLastElement(e)}removeLastElement(){if(!u(this,as))return u(this,Rd).removeLastElement();u(this,as).pop(),N(this,xs,"");for(let e=0,t=u(this,as).length;e<t;e++){const{line:n,points:r}=u(this,as)[e];N(this,is,n),N(this,Vs,r),N(this,hr,0),this.toSVGPath()}return{path:{d:u(this,xs)}}}toSVGPath(){const e=ie.svgRound(u(this,is)[4]),t=ie.svgRound(u(this,is)[5]);if(u(this,Vs).length===2)return N(this,xs,`${u(this,xs)} M ${e} ${t} Z`),u(this,xs);if(u(this,Vs).length<=6){const r=u(this,xs).lastIndexOf("M");N(this,xs,`${u(this,xs).slice(0,r)} M ${e} ${t}`),N(this,hr,6)}if(u(this,Vs).length===4){const r=ie.svgRound(u(this,is)[10]),i=ie.svgRound(u(this,is)[11]);return N(this,xs,`${u(this,xs)} L ${r} ${i}`),N(this,hr,12),u(this,xs)}const n=[];u(this,hr)===0&&(n.push(`M ${e} ${t}`),N(this,hr,6));for(let r=u(this,hr),i=u(this,is).length;r<i;r+=6){const[o,l,c,d,h,f]=u(this,is).slice(r,r+6).map(ie.svgRound);n.push(`C${o} ${l} ${c} ${d} ${h} ${f}`)}return N(this,xs,u(this,xs)+n.join(" ")),N(this,hr,u(this,is).length),u(this,xs)}getOutlines(e,t,n,r){const i=u(this,as).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,Rd).build(u(this,as),e,t,n,u(this,Td),u(this,Nf),r),N(this,Ii,null),N(this,is,null),N(this,as,null),N(this,xs,null),u(this,Rd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ii=new WeakMap,is=new WeakMap,as=new WeakMap,Td=new WeakMap,Nf=new WeakMap,Vs=new WeakMap,xs=new WeakMap,hr=new WeakMap,Rd=new WeakMap,Md=new WeakMap,Id=new WeakMap,Sf=new WeakSet,y0=function(e,t){return ie._normalizePoint(e,t,u(this,Md),u(this,Id),u(this,Td))};var Gs,fv,mv,Ln,Di,Oi,Af,Ef,Dd,ws,ua,BL,UL,HL;class $v extends ie{constructor(){super(...arguments);E(this,ws);E(this,Gs);E(this,fv,0);E(this,mv);E(this,Ln);E(this,Di);E(this,Oi);E(this,Af);E(this,Ef);E(this,Dd)}build(t,n,r,i,o,l,c){N(this,Di,n),N(this,Oi,r),N(this,Af,i),N(this,Ef,o),N(this,Dd,l),N(this,mv,c??0),N(this,Ln,t),k(this,ws,UL).call(this)}get thickness(){return u(this,Dd)}setLastElement(t){return u(this,Ln).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Ln).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of u(this,Ln)){if(t.push(`M${ie.svgRound(n[4])} ${ie.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${ie.svgRound(n[10])} ${ie.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[o,l,c,d,h,f]=n.subarray(r,r+6).map(ie.svgRound);t.push(`C${o} ${l} ${c} ${d} ${h} ${f}`)}}return t.join("")}serialize([t,n,r,i],o){const l=[],c=[],[d,h,f,m]=k(this,ws,BL).call(this);let p,x,v,w,g,y,b,_,S;switch(u(this,Ef)){case 0:S=ie._rescale,p=t,x=n+i,v=r,w=-i,g=t+d*r,y=n+(1-h-m)*i,b=t+(d+f)*r,_=n+(1-h)*i;break;case 90:S=ie._rescaleAndSwap,p=t,x=n,v=r,w=i,g=t+h*r,y=n+d*i,b=t+(h+m)*r,_=n+(d+f)*i;break;case 180:S=ie._rescale,p=t+r,x=n,v=-r,w=i,g=t+(1-d-f)*r,y=n+h*i,b=t+(1-d)*r,_=n+(h+m)*i;break;case 270:S=ie._rescaleAndSwap,p=t+r,x=n+i,v=-r,w=-i,g=t+(1-h-m)*r,y=n+(1-d-f)*i,b=t+(1-h)*r,_=n+(1-d)*i;break}for(const{line:A,points:C}of u(this,Ln))l.push(S(A,p,x,v,w,o?new Array(A.length):null)),c.push(S(C,p,x,v,w,o?new Array(C.length):null));return{lines:l,points:c,rect:[g,y,b,_]}}static deserialize(t,n,r,i,o,{paths:{lines:l,points:c},rotation:d,thickness:h}){const f=[];let m,p,x,v,w;switch(d){case 0:w=ie._rescale,m=-t/r,p=n/i+1,x=1/r,v=-1/i;break;case 90:w=ie._rescaleAndSwap,m=-n/i,p=-t/r,x=1/i,v=1/r;break;case 180:w=ie._rescale,m=t/r+1,p=-n/i,x=-1/r,v=1/i;break;case 270:w=ie._rescaleAndSwap,m=n/i+1,p=t/r+1,x=-1/i,v=-1/r;break}if(!l){l=[];for(const y of c){const b=y.length;if(b===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(b===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const _=new Float32Array(3*(b-2));l.push(_);let[S,A,C,P]=y.subarray(0,4);_.set([NaN,NaN,NaN,NaN,S,A],0);for(let T=4;T<b;T+=2){const O=y[T],z=y[T+1];_.set(ie.createBezierPoints(S,A,C,P,O,z),(T-2)*3),[S,A,C,P]=[C,P,O,z]}}}for(let y=0,b=l.length;y<b;y++)f.push({line:w(l[y].map(_=>_??NaN),m,p,x,v),points:w(c[y].map(_=>_??NaN),m,p,x,v)});const g=new this.prototype.constructor;return g.build(f,r,i,1,d,h,o),g}get box(){return u(this,Gs)}updateProperty(t,n){return t==="stroke-width"?k(this,ws,HL).call(this,n):null}updateParentDimensions([t,n],r){const[i,o]=k(this,ws,ua).call(this);N(this,Di,t),N(this,Oi,n),N(this,Af,r);const[l,c]=k(this,ws,ua).call(this),d=l-i,h=c-o,f=u(this,Gs);return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(t){return N(this,fv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Gs).map(ie.svgRound).join(" ")}get defaultProperties(){const[t,n]=u(this,Gs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=u(this,Gs);let r=0,i=0,o=0,l=0,c=0,d=0;switch(u(this,fv)){case 90:i=n/t,o=-t/n,c=t;break;case 180:r=-1,l=-1,c=t,d=n;break;case 270:i=-n/t,o=t/n,d=n;break;default:return""}return`matrix(${r} ${i} ${o} ${l} ${ie.svgRound(c)} ${ie.svgRound(d)})`}getPathResizingSVGProperties([t,n,r,i]){const[o,l]=k(this,ws,ua).call(this),[c,d,h,f]=u(this,Gs);if(Math.abs(h-o)<=ie.PRECISION||Math.abs(f-l)<=ie.PRECISION){const w=t+r/2-(c+h/2),g=n+i/2-(d+f/2);return{path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${g})`}}}const m=(r-2*o)/(h-2*o),p=(i-2*l)/(f-2*l),x=h/r,v=f/i;return{path:{"transform-origin":`${ie.svgRound(c)} ${ie.svgRound(d)}`,transform:`${this.rotationTransform} scale(${x} ${v}) translate(${ie.svgRound(o)} ${ie.svgRound(l)}) scale(${m} ${p}) translate(${ie.svgRound(-o)} ${ie.svgRound(-l)})`}}}getPathResizedSVGProperties([t,n,r,i]){const[o,l]=k(this,ws,ua).call(this),c=u(this,Gs),[d,h,f,m]=c;if(c[0]=t,c[1]=n,c[2]=r,c[3]=i,Math.abs(f-o)<=ie.PRECISION||Math.abs(m-l)<=ie.PRECISION){const g=t+r/2-(d+f/2),y=n+i/2-(h+m/2);for(const{line:b,points:_}of u(this,Ln))ie._translate(b,g,y,b),ie._translate(_,g,y,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(r-2*o)/(f-2*o),x=(i-2*l)/(m-2*l),v=-p*(d+o)+t+o,w=-x*(h+l)+n+l;if(p!==1||x!==1||v!==0||w!==0)for(const{line:g,points:y}of u(this,Ln))ie._rescale(g,v,w,p,x,g),ie._rescale(y,v,w,p,x,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[i,o]=r,l=u(this,Gs),c=t-l[0],d=n-l[1];if(u(this,Di)===i&&u(this,Oi)===o)for(const{line:h,points:f}of u(this,Ln))ie._translate(h,c,d,h),ie._translate(f,c,d,f);else{const h=u(this,Di)/i,f=u(this,Oi)/o;N(this,Di,i),N(this,Oi,o);for(const{line:m,points:p}of u(this,Ln))ie._rescale(m,c,d,h,f,m),ie._rescale(p,c,d,h,f,p);l[2]*=h,l[3]*=f}return l[0]=t,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(n)}`}}}get defaultSVGProperties(){const t=u(this,Gs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t[0])} ${ie.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Gs=new WeakMap,fv=new WeakMap,mv=new WeakMap,Ln=new WeakMap,Di=new WeakMap,Oi=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Dd=new WeakMap,ws=new WeakSet,ua=function(t=u(this,Dd)){const n=u(this,mv)+t/2*u(this,Af);return u(this,Ef)%180===0?[n/u(this,Di),n/u(this,Oi)]:[n/u(this,Oi),n/u(this,Di)]},BL=function(){const[t,n,r,i]=u(this,Gs),[o,l]=k(this,ws,ua).call(this,0);return[t+o,n+l,r-2*o,i-2*l]},UL=function(){const t=N(this,Gs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,Ln)){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)fe.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],l=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,m,p,x,v]=i.subarray(c,c+6);fe.bezierBoundingBox(o,l,h,f,m,p,x,v,t),o=x,l=v}}const[n,r]=k(this,ws,ua).call(this);t[0]=Ys(t[0]-n,0,1),t[1]=Ys(t[1]-r,0,1),t[2]=Ys(t[2]+n,0,1),t[3]=Ys(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},HL=function(t){const[n,r]=k(this,ws,ua).call(this);N(this,Dd,t);const[i,o]=k(this,ws,ua).call(this),[l,c]=[i-n,o-r],d=u(this,Gs);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d};class Fb extends $L{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ot._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Fb(this._viewParameters);return e.updateAll(this),e}}var Uy,WL;const nh=class nh extends wy{constructor(t){super({...t,name:"inkEditor"});E(this,Uy);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){ot.initialize(t,n),this._defaultDrawingOptions=new Fb(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Fe(this,"typesMap",new Map([[Be.INK_THICKNESS,"stroke-width"],[Be.INK_COLOR,"stroke"],[Be.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,i,o){return new mq(t,n,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,i,o,l){return $v.deserialize(t,n,r,i,o,l)}static async deserialize(t,n,r){let i=null;if(t instanceof lA){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:f,opacity:m,borderStyle:{rawWidth:p},popupRef:x,contentsObj:v},parent:{page:{pageNumber:w}}}=t;i=t={annotationType:be.INK,color:Array.from(f),thickness:p,opacity:m,paths:{points:l},boxes:null,pageIndex:w-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:x,comment:(v==null?void 0:v.str)||null}}const o=await super.deserialize(t,n,r);return o._initialData=i,t.comment&&o.setCommentData(t.comment),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new vy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Be.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=nh.getDefaultDrawingOptions({stroke:fe.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,d={annotationType:be.INK,color:ot._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(d),t?(d.isCopy=!0,d):this.annotationElementId&&!k(this,Uy,WL).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(t){const{points:n,rect:r}=this.serializeDraw(!1),i={rect:r,thickness:this._drawingOptions["stroke-width"],points:n};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}};Uy=new WeakSet,WL=function(t){const{color:n,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==n[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},q(nh,"_type","ink"),q(nh,"_editorType",be.INK),q(nh,"_defaultDrawingOptions",null);let q_=nh;class K_ extends $v{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const kx=8,_m=3;var Od,Xe,Y_,Vr,VL,GL,X_,b0,qL,KL,YL,Q_,J_,XL;class Xa{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:r},i,o,l,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const f=200,m=h.font=`${n} ${r} ${f}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:x,actualBoundingBoxAscent:v,actualBoundingBoxDescent:w,fontBoundingBoxAscent:g,fontBoundingBoxDescent:y,width:b}=h.measureText(e),_=1.5,S=Math.ceil(Math.max(Math.abs(p)+Math.abs(x)||0,b)*_),A=Math.ceil(Math.max(Math.abs(v)+Math.abs(w)||f,Math.abs(g)+Math.abs(y)||f)*_);d=new OffscreenCanvas(S,A),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=m,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,S,A),h.fillStyle="black",h.fillText(e,S*(_-1)/2,A*(3-_)/2);const C=k(this,Xe,Q_).call(this,h.getImageData(0,0,S,A).data),P=k(this,Xe,YL).call(this,C),T=k(this,Xe,J_).call(this,P),O=k(this,Xe,X_).call(this,C,S,A,T);return this.processDrawnLines({lines:{curves:O,width:S,height:A},pageWidth:i,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[o,l,c]=k(this,Xe,XL).call(this,e),[d,h]=k(this,Xe,KL).call(this,o,l,c,Math.hypot(l,c)*u(this,Od).sigmaSFactor,u(this,Od).sigmaR,u(this,Od).kernelSize),f=k(this,Xe,J_).call(this,h),m=k(this,Xe,X_).call(this,d,l,c,f);return this.processDrawnLines({lines:{curves:m,width:l,height:c},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:o,areContours:l}){r%180!==0&&([t,n]=[n,t]);const{curves:c,width:d,height:h}=e,f=e.thickness??0,m=[],p=Math.min(t/d,n/h),x=p/t,v=p/n,w=[];for(const{points:y}of c){const b=o?k(this,Xe,qL).call(this,y):y;if(!b)continue;w.push(b);const _=b.length,S=new Float32Array(_),A=new Float32Array(3*(_===2?2:_-2));if(m.push({line:A,points:S}),_===2){S[0]=b[0]*x,S[1]=b[1]*v,A.set([NaN,NaN,NaN,NaN,S[0],S[1]],0);continue}let[C,P,T,O]=b;C*=x,P*=v,T*=x,O*=v,S.set([C,P,T,O],0),A.set([NaN,NaN,NaN,NaN,C,P],0);for(let z=4;z<_;z+=2){const F=S[z]=b[z]*x,B=S[z+1]=b[z+1]*v;A.set(ie.createBezierPoints(C,P,T,O,F,B),(z-2)*3),[C,P,T,O]=[T,O,F,B]}}if(m.length===0)return null;const g=l?new K_:new $v;return g.build(m,t,n,1,r,l?0:f,i),{outline:g,newCurves:w,areContours:l,thickness:f,width:d,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:r,height:i}){let o=1/0,l=-1/0,c=0;for(const b of e){c+=b.length;for(let _=2,S=b.length;_<S;_++){const A=b[_]-b[_-2];o=Math.min(o,A),l=Math.max(l,A)}}let d;o>=-128&&l<=127?d=Int8Array:o>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,f=kx+_m*h,m=new Uint32Array(f);let p=0;m[p++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,m[p++]=0,m[p++]=r,m[p++]=i,m[p++]=t?0:1,m[p++]=Math.max(0,Math.floor(n??0)),m[p++]=h,m[p++]=d.BYTES_PER_ELEMENT;for(const b of e)m[p++]=b.length-2,m[p++]=b[0],m[p++]=b[1];const x=new CompressionStream("deflate-raw"),v=x.writable.getWriter();await v.ready,v.write(m);const w=d.prototype.constructor;for(const b of e){const _=new w(b.length-2);for(let S=2,A=b.length;S<A;S++)_[S-2]=b[S]-b[S-2];v.write(_)}v.close();const g=await new Response(x.readable).arrayBuffer(),y=new Uint8Array(g);return QD(y)}static async decompressSignature(e){try{const t=L9(e),{readable:n,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,l=0;for await(const b of n)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,l),l+=b.length;const c=new Uint32Array(o.buffer,0,o.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],f=c[3],m=c[4]===0,p=c[5],x=c[6],v=c[7],w=[],g=(kx+_m*x)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(v){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(o.buffer,g);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(o.buffer,g);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(o.buffer,g);break}l=0;for(let b=0;b<x;b++){const _=c[_m*b+kx],S=new Float32Array(_+2);w.push(S);for(let A=0;A<_m-1;A++)S[A]=c[_m*b+kx+A+1];for(let A=0;A<_;A++)S[A+2]=S[A]+y[l++]}return{areContours:m,thickness:p,outlines:w,width:h,height:f}}catch(t){return we(`decompressSignature: ${t}`),null}}}Od=new WeakMap,Xe=new WeakSet,Y_=function(e,t,n,r){return n-=e,r-=t,n===0?r>0?0:4:n===1?r+6:2-r},Vr=new WeakMap,VL=function(e,t,n,r,i,o,l){const c=k(this,Xe,Y_).call(this,n,r,i,o);for(let d=0;d<8;d++){const h=(-d+c-l+16)%8,f=u(this,Vr)[2*h],m=u(this,Vr)[2*h+1];if(e[(n+f)*t+(r+m)]!==0)return h}return-1},GL=function(e,t,n,r,i,o,l){const c=k(this,Xe,Y_).call(this,n,r,i,o);for(let d=0;d<8;d++){const h=(d+c+l+16)%8,f=u(this,Vr)[2*h],m=u(this,Vr)[2*h+1];if(e[(n+f)*t+(r+m)]!==0)return h}return-1},X_=function(e,t,n,r){const i=e.length,o=new Int32Array(i);for(let h=0;h<i;h++)o[h]=e[h]<=r?1:0;for(let h=1;h<n-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*n-1-h]=0;let l=1,c;const d=[];for(let h=1;h<n-1;h++){c=1;for(let f=1;f<t-1;f++){const m=h*t+f,p=o[m];if(p===0)continue;let x=h,v=f;if(p===1&&o[m-1]===0)l+=1,v-=1;else if(p>=1&&o[m+1]===0)l+=1,v+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const w=[f,h],g=v===f+1,y={isHole:g,points:w,id:l,parent:0};d.push(y);let b;for(const z of d)if(z.id===c){b=z;break}b?b.isHole?y.parent=g?b.parent:c:y.parent=g?c:b.parent:y.parent=g?c:0;const _=k(this,Xe,VL).call(this,o,t,h,f,x,v,0);if(_===-1){o[m]=-l,o[m]!==1&&(c=Math.abs(o[m]));continue}let S=u(this,Vr)[2*_],A=u(this,Vr)[2*_+1];const C=h+S,P=f+A;x=C,v=P;let T=h,O=f;for(;;){const z=k(this,Xe,GL).call(this,o,t,T,O,x,v,1);S=u(this,Vr)[2*z],A=u(this,Vr)[2*z+1];const F=T+S,B=O+A;w.push(B,F);const I=T*t+O;if(o[I+1]===0?o[I]=-l:o[I]===1&&(o[I]=l),F===h&&B===f&&T===C&&O===P){o[m]!==1&&(c=Math.abs(o[m]));break}else x=T,v=O,T=F,O=B}}}return d},b0=function(e,t,n,r){if(n-t<=4){for(let C=t;C<n-2;C+=2)r.push(e[C],e[C+1]);return}const i=e[t],o=e[t+1],l=e[n-4]-i,c=e[n-3]-o,d=Math.hypot(l,c),h=l/d,f=c/d,m=h*o-f*i,p=c/l,x=1/d,v=Math.atan(p),w=Math.cos(v),g=Math.sin(v),y=x*(Math.abs(w)+Math.abs(g)),b=x*(1-y+y**2),_=Math.max(Math.atan(Math.abs(g+w)*b),Math.atan(Math.abs(g-w)*b));let S=0,A=t;for(let C=t+2;C<n-2;C+=2){const P=Math.abs(m-h*e[C+1]+f*e[C]);P>S&&(A=C,S=P)}S>(d*_)**2?(k(this,Xe,b0).call(this,e,t,A+2,r),k(this,Xe,b0).call(this,e,A,n,r)):r.push(i,o)},qL=function(e){const t=[],n=e.length;return k(this,Xe,b0).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},KL=function(e,t,n,r,i,o){const l=new Float32Array(o**2),c=-2*r**2,d=o>>1;for(let v=0;v<o;v++){const w=(v-d)**2;for(let g=0;g<o;g++)l[v*o+g]=Math.exp((w+(g-d)**2)/c)}const h=new Float32Array(256),f=-2*i**2;for(let v=0;v<256;v++)h[v]=Math.exp(v**2/f);const m=e.length,p=new Uint8Array(m),x=new Uint32Array(256);for(let v=0;v<n;v++)for(let w=0;w<t;w++){const g=v*t+w,y=e[g];let b=0,_=0;for(let A=0;A<o;A++){const C=v+A-d;if(!(C<0||C>=n))for(let P=0;P<o;P++){const T=w+P-d;if(T<0||T>=t)continue;const O=e[C*t+T],z=l[A*o+P]*h[Math.abs(O-y)];b+=O*z,_+=z}}const S=p[g]=Math.round(b/_);x[S]++}return[p,x]},YL=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},Q_=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let l=0,c=n.length;l<c;l++){const d=n[l]=e[l<<2];r=Math.max(r,d),i=Math.min(i,d)}const o=255/(r-i);for(let l=0,c=n.length;l<c;l++)n[l]=(n[l]-i)*o;return n},J_=function(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(c=>c!==0);let o=i,l=i;for(t=i;t<256;t++){const c=e[t];c>n&&(t-o>r&&(r=t-o,l=t-1),n=c,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},XL=function(e){const t=e,{width:n,height:r}=e,{maxDim:i}=u(this,Od);let o=n,l=r;if(n>i||r>i){let m=n,p=r,x=Math.log2(Math.max(n,r)/i);const v=Math.floor(x);x=x===v?v-1:v;for(let g=0;g<x;g++){o=Math.ceil(m/2),l=Math.ceil(p/2);const y=new OffscreenCanvas(o,l);y.getContext("2d").drawImage(e,0,0,m,p,0,0,o,l),m=o,p=l,e!==t&&e.close(),e=y.transferToImageBitmap()}const w=Math.min(i/o,i/l);o=Math.round(o*w),l=Math.round(l*w)}const d=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,o,l);const h=d.getImageData(0,0,o,l).data;return[k(this,Xe,Q_).call(this,h),o,l]},E(Xa,Xe),E(Xa,Od,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),E(Xa,Vr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class cA extends $L{constructor(){super(),super.updateProperties({fill:ot._defaultLineColor,"stroke-width":0})}clone(){const e=new cA;return e.updateAll(this),e}}class dA extends Fb{constructor(e){super(e),super.updateProperties({stroke:ot._defaultLineColor,"stroke-width":1})}clone(){const e=new dA(this._viewParameters);return e.updateAll(this),e}}var wl,Li,jl,Ld;const Nn=class Nn extends wy{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});E(this,wl,!1);E(this,Li,null);E(this,jl,null);E(this,Ld,null);this._willKeepAspectRatio=!0,N(this,jl,t.signatureData||null),N(this,Li,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){ot.initialize(t,n),this._defaultDrawingOptions=new cA,this._defaultDrawnSignatureOptions=new dA(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Fe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Li)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(u(this,jl)){const{lines:i,mustSmooth:o,areContours:l,description:c,uuid:d,heightInPage:h}=u(this,jl),{rawDims:{pageWidth:f,pageHeight:m},rotation:p}=this.parent.viewport,x=Xa.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:p,innerMargin:Nn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(x,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Li)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){N(this,Ld,t),this.addEditToolbar()}getUuid(){return u(this,Ld)}get description(){return u(this,Li)}set description(t){N(this,Li,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:r,width:i,height:o}=u(this,jl),l=Math.max(i,o),c=Xa.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:r,width:i,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,r,i){const{x:o,y:l}=this,{outline:c}=N(this,jl,t);N(this,wl,c instanceof K_),this.description=r;let d;u(this,wl)?d=Nn.getDefaultDrawingOptions():(d=Nn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[h,f]=this.parentDimensions,[,m]=this.pageDimensions;let p=n/m;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(h*this.width,f*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return Xa.process(t,n,r,i,Nn._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Xa.extractContoursFromText(t,n,r,i,o,Nn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return Xa.processDrawnLines({lines:t,pageWidth:n,pageHeight:r,rotation:i,innerMargin:Nn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Nn.getDefaultDrawingOptions():(this._drawingOptions=Nn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:be.SIGNATURE,isSignature:!0,areContours:u(this,wl),color:[0,0,0],thickness:u(this,wl)?0:o,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.paths={lines:n,points:r},l.uuid=u(this,Ld),l.isCopy=!0):l.lines=n,u(this,Li)&&(l.accessibilityData={type:"Figure",alt:u(this,Li)}),l}static deserializeDraw(t,n,r,i,o,l){return l.areContours?K_.deserialize(t,n,r,i,o,l):$v.deserialize(t,n,r,i,o,l)}static async deserialize(t,n,r){var o;const i=await super.deserialize(t,n,r);return N(i,wl,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",N(i,Ld,t.uuid),i}};wl=new WeakMap,Li=new WeakMap,jl=new WeakMap,Ld=new WeakMap,q(Nn,"_type","signature"),q(Nn,"_editorType",be.SIGNATURE),q(Nn,"_defaultDrawingOptions",null);let Z_=Nn;var gt,os,_l,Va,Nl,Cf,Ga,Fd,Fi,Fn,kf,Ge,Km,Ym,w0,j0,_0,tN,N0,QL;class eN extends ot{constructor(t){super({...t,name:"stampEditor"});E(this,Ge);E(this,gt,null);E(this,os,null);E(this,_l,null);E(this,Va,null);E(this,Nl,null);E(this,Cf,"");E(this,Ga,null);E(this,Fd,!1);E(this,Fi,null);E(this,Fn,!1);E(this,kf,!1);N(this,Va,t.bitmapUrl),N(this,Nl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){ot.initialize(t,n)}static isHandlingMimeForPasting(t){return qj.includes(t)}static paste(t,n){n.pasteEditor({mode:be.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:o,height:l,channels:i.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;u(this,os)&&(N(this,gt,null),this._uiManager.imageManager.deleteId(u(this,os)),(t=u(this,Ga))==null||t.remove(),N(this,Ga,null),u(this,Fi)&&(clearTimeout(u(this,Fi)),N(this,Fi,null))),super.remove()}rebuild(){if(!this.parent){u(this,os)&&k(this,Ge,w0).call(this);return}super.rebuild(),this.div!==null&&(u(this,os)&&u(this,Ga)===null&&k(this,Ge,w0).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,_l)||u(this,gt)||u(this,Va)||u(this,Nl)||u(this,os)||u(this,Fd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Fd)||(u(this,gt)?k(this,Ge,j0).call(this):k(this,Ge,w0).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(N(this,os,r),i&&N(this,gt,i),N(this,Fd,!1),k(this,Ge,j0).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Fi)!==null&&clearTimeout(u(this,Fi)),N(this,Fi,setTimeout(()=>{N(this,Fi,null),k(this,Ge,tN).call(this)},200))}copyCanvas(t,n,r=!1){var p;t||(t=224);const{width:i,height:o}=u(this,gt),l=new ea;let c=u(this,gt),d=i,h=o,f=null;if(n){if(i>n||o>n){const P=Math.min(n/i,n/o);d=Math.floor(i*P),h=Math.floor(o*P)}f=document.createElement("canvas");const x=f.width=Math.ceil(d*l.sx),v=f.height=Math.ceil(h*l.sy);u(this,Fn)||(c=k(this,Ge,_0).call(this,x,v));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let g="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",y="#42414d");const b=15,_=b*l.sx,S=b*l.sy,A=new OffscreenCanvas(_*2,S*2),C=A.getContext("2d");C.fillStyle=g,C.fillRect(0,0,_*2,S*2),C.fillStyle=y,C.fillRect(0,0,_,S),C.fillRect(_,S,_,S),w.fillStyle=w.createPattern(A,"repeat"),w.fillRect(0,0,x,v),w.drawImage(c,0,0,c.width,c.height,0,0,x,v)}let m=null;if(r){let x,v;if(l.symmetric&&c.width<t&&c.height<t)x=c.width,v=c.height;else if(c=u(this,gt),i>t||o>t){const y=Math.min(t/i,t/o);x=Math.floor(i*y),v=Math.floor(o*y),u(this,Fn)||(c=k(this,Ge,_0).call(this,x,v))}const g=new OffscreenCanvas(x,v).getContext("2d",{willReadFrequently:!0});g.drawImage(c,0,0,c.width,c.height,0,0,x,v),m={width:x,height:v,data:g.getImageData(0,0,x,v).data}}return{canvas:f,width:d,height:h,imageData:m}}static async deserialize(t,n,r){var w;let i=null,o=!1;if(t instanceof fL){const{data:{rect:g,rotation:y,id:b,structParent:_,popupRef:S,contentsObj:A},container:C,parent:{page:{pageNumber:P}},canvas:T}=t;let O,z;T?(delete t.canvas,{id:O,bitmap:z}=r.imageManager.getFromCanvas(C.id,T),T.remove()):(o=!0,t._hasNoCanvas=!0);const F=((w=await n._structTree.getAriaAttributes(`${tA}${b}`))==null?void 0:w.get("aria-label"))||"";i=t={annotationType:be.STAMP,bitmapId:O,bitmap:z,pageIndex:P-1,rect:g.slice(0),rotation:y,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:_,popupRef:S,comment:(A==null?void 0:A.str)||null}}const l=await super.deserialize(t,n,r),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:f,isSvg:m,accessibilityData:p}=t;o?(r.addMissingCanvas(t.id,l),N(l,Fd,!0)):f&&r.imageManager.isValidId(f)?(N(l,os,f),d&&N(l,gt,d)):N(l,Va,h),N(l,Fn,m);const[x,v]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/v,p&&(l.altTextData=p),l._initialData=i,t.comment&&l.setCommentData(t.comment),N(l,kf,!!i),l}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:be.STAMP,bitmapId:u(this,os),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:u(this,Fn),structTreeParentId:this._structTreeParentId};if(this.addComment(r),t)return r.bitmapUrl=k(this,Ge,N0).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=k(this,Ge,QL).call(this,r);if(c.isSame)return null;c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const l=u(this,Fn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(u(this,os)))n.stamps.set(u(this,os),{area:l,serialized:r}),r.bitmap=k(this,Ge,N0).call(this,!1);else if(u(this,Fn)){const c=n.stamps.get(u(this,os));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=k(this,Ge,N0).call(this,!1))}return r}renderAnnotationElement(t){const n={rect:this.getRect(0,0)};return this.hasEditedComment&&(n.popup=this.comment),t.updateEdited(n),null}}gt=new WeakMap,os=new WeakMap,_l=new WeakMap,Va=new WeakMap,Nl=new WeakMap,Cf=new WeakMap,Ga=new WeakMap,Fd=new WeakMap,Fi=new WeakMap,Fn=new WeakMap,kf=new WeakMap,Ge=new WeakSet,Km=function(t,n=!1){if(!t){this.remove();return}N(this,gt,t.bitmap),n||(N(this,os,t.id),N(this,Fn,t.isSvg)),t.file&&N(this,Cf,t.file.name),k(this,Ge,j0).call(this)},Ym=function(){if(N(this,_l,null),this._uiManager.enableWaiting(!1),!!u(this,Ga)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,gt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},w0=function(){if(u(this,os)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,os)).then(r=>k(this,Ge,Km).call(this,r,!0)).finally(()=>k(this,Ge,Ym).call(this));return}if(u(this,Va)){const r=u(this,Va);N(this,Va,null),this._uiManager.enableWaiting(!0),N(this,_l,this._uiManager.imageManager.getFromUrl(r).then(i=>k(this,Ge,Km).call(this,i)).finally(()=>k(this,Ge,Ym).call(this)));return}if(u(this,Nl)){const r=u(this,Nl);N(this,Nl,null),this._uiManager.enableWaiting(!0),N(this,_l,this._uiManager.imageManager.getFromFile(r).then(i=>k(this,Ge,Km).call(this,i)).finally(()=>k(this,Ge,Ym).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=qj.join(",");const n=this._uiManager._signal;N(this,_l,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),k(this,Ge,Km).call(this,i)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>k(this,Ge,Ym).call(this))),t.click()},j0=function(){var f;const{div:t}=this;let{width:n,height:r}=u(this,gt);const[i,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*i,r=this.height*o;else if(n>l*i||r>l*o){const m=Math.min(l*i/n,l*o/r);n*=m,r*=m}const[c,d]=this.parentDimensions;this.setDims(n*c/i,r*d/o),this._uiManager.enableWaiting(!1);const h=N(this,Ga,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/i,this.height=r/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),k(this,Ge,tN).call(this),u(this,kf)||(this.parent.addUndoableEditor(this),N(this,kf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Cf)&&this.div.setAttribute("aria-description",u(this,Cf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},_0=function(t,n){const{width:r,height:i}=u(this,gt);let o=r,l=i,c=u(this,gt);for(;o>2*t||l>2*n;){const d=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(c,0,0,d,h,0,0,o,l),c=f.transferToImageBitmap()}return c},tN=function(){const[t,n]=this.parentDimensions,{width:r,height:i}=this,o=new ea,l=Math.ceil(r*t*o.sx),c=Math.ceil(i*n*o.sy),d=u(this,Ga);if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=u(this,Fn)?u(this,gt):k(this,Ge,_0).call(this,l,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)},N0=function(t){if(t){if(u(this,Fn)){const i=this._uiManager.imageManager.getSvgUrl(u(this,os));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=u(this,gt),n.getContext("2d").drawImage(u(this,gt),0,0),n.toDataURL()}if(u(this,Fn)){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*Xl.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*Xl.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,o);return l.getContext("2d").drawImage(u(this,gt),0,0,u(this,gt).width,u(this,gt).height,0,0,i,o),l.transferToImageBitmap()}return structuredClone(u(this,gt))},QL=function(t){var l;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===n,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},q(eN,"_type","stamp"),q(eN,"_editorType",be.STAMP);var $d,Pf,$i,Sl,qa,$n,Al,Tf,zd,Gr,Ka,ls,Ya,El,Rf,ue,Cl,vt,JL,mi,nN,rN,S0;const Rr=class Rr{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:l,textLayer:c,viewport:d,l10n:h}){E(this,vt);E(this,$d);E(this,Pf,!1);E(this,$i,null);E(this,Sl,null);E(this,qa,null);E(this,$n,new Map);E(this,Al,!1);E(this,Tf,!1);E(this,zd,!1);E(this,Gr,null);E(this,Ka,null);E(this,ls,null);E(this,Ya,null);E(this,El,null);E(this,Rf,-1);E(this,ue);const f=[...u(Rr,Cl).values()];if(!Rr._initialized){Rr._initialized=!0;for(const m of f)m.initialize(h,e)}e.registerEditorTypes(f),N(this,ue,e),this.pageIndex=t,this.div=n,N(this,$d,i),N(this,$i,o),this.viewport=d,N(this,ls,c),this.drawLayer=l,this._structTree=r,u(this,ue).addLayer(this)}get isEmpty(){return u(this,$n).size===0}get isInvisible(){return this.isEmpty&&u(this,ue).getMode()===be.NONE}updateToolbar(e){u(this,ue).updateToolbar(e)}updateMode(e=u(this,ue).getMode()){switch(k(this,vt,S0).call(this),e){case be.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case be.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case be.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of u(Rr,Cl).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,ls))==null?void 0:t.div)}setEditingState(e){u(this,ue).setEditingState(e)}addCommands(e){u(this,ue).addCommands(e)}cleanUndoStack(e){u(this,ue).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,$i))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;N(this,zd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(n=u(this,El))==null||n.abort(),N(this,El,null);const e=new Set;for(const r of u(this,$n).values())r.enableEditing(),r.show(!0),r.annotationElementId&&(u(this,ue).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));if(!u(this,$i)){N(this,zd,!1);return}const t=u(this,$i).getEditableAnnotations();for(const r of t){if(r.hide(),u(this,ue).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}N(this,zd,!1)}disable(){var r;if(N(this,Tf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),u(this,ls)&&!u(this,El)){N(this,El,new AbortController);const i=u(this,ue).combinedSignal(u(this,El));u(this,ls).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:d,timeStamp:h}=o,f=u(this,Rf);if(h-f>500){N(this,Rf,h);return}N(this,Rf,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const p=document.elementsFromPoint(c,d);if(m.toggle("getElements",!1),!this.div.contains(p[0]))return;let x;const v=new RegExp(`^${GD}[0-9]+$`);for(const g of p)if(v.test(g.id)){x=g.id;break}if(!x)return;const w=u(this,$n).get(x);(w==null?void 0:w.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),w.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of u(this,$n).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(r=this.getEditableAnnotation(i.annotationElementId))==null||r.show(),i.remove()}if(u(this,$i)){const i=u(this,$i).getEditableAnnotations();for(const o of i){const{id:l}=o.data;if(u(this,ue).isDeletedAnnotationElement(l)){o.updateEdited({deleted:!0});continue}let c=t.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(l),c&&(u(this,ue).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}k(this,vt,S0).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of u(Rr,Cl).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),N(this,Tf,!1)}getEditableAnnotation(e){var t;return((t=u(this,$i))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ue).getActive()!==e&&u(this,ue).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,ls))!=null&&e.div&&!u(this,Ya)){N(this,Ya,new AbortController);const t=u(this,ue).combinedSignal(u(this,Ya));u(this,ls).div.addEventListener("pointerdown",k(this,vt,JL).bind(this),{signal:t}),u(this,ls).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,ls))!=null&&e.div&&u(this,Ya)&&(u(this,Ya).abort(),N(this,Ya,null),u(this,ls).div.classList.remove("highlighting"))}enableClick(){if(u(this,Sl))return;N(this,Sl,new AbortController);const e=u(this,ue).combinedSignal(u(this,Sl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,Sl))==null||e.abort(),N(this,Sl,null)}attach(e){u(this,$n).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ue).isDeletedAnnotationElement(t)&&u(this,ue).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,$n).delete(e.id),(t=u(this,$d))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,Tf)&&e.annotationElementId&&u(this,ue).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ue).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ue).addDeletedAnnotationElement(e.annotationElementId),ot.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ue).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,zd)),u(this,ue).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,qa)&&(e._focusEventsAllowed=!1,N(this,qa,setTimeout(()=>{N(this,qa,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ue)._signal}),t.focus())},0))),e._structTreeParentId=(n=u(this,$d))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return u(this,ue).getId()}combinedSignal(e){return u(this,ue).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,vt,mi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,ue).updateMode(e.mode);const{offsetX:n,offsetY:r}=k(this,vt,rN).call(this),i=this.getNextId(),o=k(this,vt,nN).call(this,{parent:this,id:i,x:n,y:r,uiManager:u(this,ue),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=u(Rr,Cl).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ue)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),i=k(this,vt,nN).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:u(this,ue),isCentered:t,...n});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(k(this,vt,rN).call(this),!0,e)}setSelected(e){u(this,ue).setSelected(e)}toggleSelected(e){u(this,ue).toggleSelected(e)}unselect(e){u(this,ue).unselect(e)}pointerup(e){var r;const{isMac:t}=Es.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,Al)||(N(this,Al,!1),(r=u(this,vt,mi))!=null&&r.isDrawer&&u(this,vt,mi).supportMultipleDrawings))return;if(!u(this,Pf)){N(this,Pf,!0);return}const n=u(this,ue).getMode();if(n===be.STAMP||n===be.SIGNATURE){u(this,ue).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(u(this,ue).getMode()===be.HIGHLIGHT&&this.enableTextSelection(),u(this,Al)){N(this,Al,!1);return}const{isMac:t}=Es.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(N(this,Al,!0),(r=u(this,vt,mi))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=u(this,ue).getActive();N(this,Pf,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,Gr)){u(this,vt,mi).startDrawing(this,u(this,ue),!1,e);return}u(this,ue).setCurrentDrawingSession(this),N(this,Gr,new AbortController);const t=u(this,ue).combinedSignal(u(this,Gr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(N(this,Ka,null),this.commitOrRemove())},{signal:t}),u(this,vt,mi).startDrawing(this,u(this,ue),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&N(this,Ka,t);return}u(this,Ka)&&setTimeout(()=>{var t;(t=u(this,Ka))==null||t.focus(),N(this,Ka,null)},0)}endDrawingSession(e=!1){return u(this,Gr)?(u(this,ue).setCurrentDrawingSession(null),u(this,Gr).abort(),N(this,Gr,null),N(this,Ka,null),u(this,vt,mi).endDrawing(e)):null}findNewParent(e,t,n){const r=u(this,ue).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return u(this,Gr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,Gr)&&u(this,vt,mi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,ue).getActive())==null?void 0:e.parent)===this&&(u(this,ue).commitOrRemove(),u(this,ue).setActiveEditor(null)),u(this,qa)&&(clearTimeout(u(this,qa)),N(this,qa,null));for(const n of u(this,$n).values())(t=u(this,$d))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,u(this,$n).clear(),u(this,ue).removeLayer(this)}render({viewport:e}){this.viewport=e,au(this.div,e);for(const t of u(this,ue).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ue).commitOrRemove(),k(this,vt,S0).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,au(this.div,{rotation:n}),t!==n)for(const r of u(this,$n).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ue).viewParameters.realScale}};$d=new WeakMap,Pf=new WeakMap,$i=new WeakMap,Sl=new WeakMap,qa=new WeakMap,$n=new WeakMap,Al=new WeakMap,Tf=new WeakMap,zd=new WeakMap,Gr=new WeakMap,Ka=new WeakMap,ls=new WeakMap,Ya=new WeakMap,El=new WeakMap,Rf=new WeakMap,ue=new WeakMap,Cl=new WeakMap,vt=new WeakSet,JL=function(e){u(this,ue).unselectAll();const{target:t}=e;if(t===u(this,ls).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,ls).div.contains(t)){const{isMac:n}=Es.platform;if(e.button!==0||e.ctrlKey&&n)return;u(this,ue).showAllEditors("highlight",!0,!0),u(this,ls).div.classList.add("free"),this.toggleDrawing(),by.startHighlighting(this,u(this,ue).direction==="ltr",{target:u(this,ls).div,x:e.x,y:e.y}),u(this,ls).div.addEventListener("pointerup",()=>{u(this,ls).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,ue)._signal}),e.preventDefault()}},mi=function(){return u(Rr,Cl).get(u(this,ue).getMode())},nN=function(e){const t=u(this,vt,mi);return t?new t.prototype.constructor(e):null},rN=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+r),d=(i+l)/2-e,h=(o+c)/2-t,[f,m]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:f,offsetY:m}},S0=function(){for(const e of u(this,$n).values())e.isEmpty()&&e.remove()},q(Rr,"_initialized",!1),E(Rr,Cl,new Map([L_,q_,eN,by,Z_].map(e=>[e._editorType,e])));let sN=Rr;var qr,qs,Bd,pv,Hy,ZL,sa,aN,e4,oN;const Gt=class Gt{constructor({pageIndex:e}){E(this,sa);E(this,qr,null);E(this,qs,new Map);E(this,Bd,new Map);this.pageIndex=e}setParent(e){if(!u(this,qr)){N(this,qr,e);return}if(u(this,qr)!==e){if(u(this,qs).size>0)for(const t of u(this,qs).values())t.remove(),e.append(t);N(this,qr,e)}}static get _svgFactory(){return Fe(this,"_svgFactory",new xy)}draw(e,t=!1,n=!1){const r=ts(Gt,pv)._++,i=k(this,sa,aN).call(this),o=Gt._svgFactory.createElement("defs");i.append(o);const l=Gt._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Bd).set(r,l);const d=n?k(this,sa,e4).call(this,o,c):null,h=Gt._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(i,e),u(this,qs).set(r,i),{id:r,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=ts(Gt,pv)._++,r=k(this,sa,aN).call(this),i=Gt._svgFactory.createElement("defs");r.append(i);const o=Gt._svgFactory.createElement("path");i.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const f=Gt._svgFactory.createElement("mask");i.append(f),c=`mask_p${this.pageIndex}_${n}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const m=Gt._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const p=Gt._svgFactory.createElement("use");f.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const d=Gt._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return r.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),u(this,qs).set(n,r),n}finalizeDraw(e,t){u(this,Bd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:n,bbox:r,rootClass:i,path:o}=t,l=typeof e=="number"?u(this,qs).get(e):e;if(l){if(n&&k(this,sa,oN).call(this,l,n),r&&k(c=Gt,Hy,ZL).call(c,l,r),i){const{classList:d}=l;for(const[h,f]of Object.entries(i))d.toggle(h,f)}if(o){const h=l.firstChild.firstChild;k(this,sa,oN).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const n=u(this,qs).get(e);n&&(u(t,qr).append(n),u(this,qs).delete(e),u(t,qs).set(e,n))}remove(e){u(this,Bd).delete(e),u(this,qr)!==null&&(u(this,qs).get(e).remove(),u(this,qs).delete(e))}destroy(){N(this,qr,null);for(const e of u(this,qs).values())e.remove();u(this,qs).clear(),u(this,Bd).clear()}};qr=new WeakMap,qs=new WeakMap,Bd=new WeakMap,pv=new WeakMap,Hy=new WeakSet,ZL=function(e,[t,n,r,i]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},sa=new WeakSet,aN=function(){const e=Gt._svgFactory.create(1,1,!0);return u(this,qr).append(e),e.setAttribute("aria-hidden",!0),e},e4=function(e,t){const n=Gt._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=Gt._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},oN=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},E(Gt,Hy),E(Gt,pv,0);let iN=Gt;globalThis._pdfjsTestingUtils={HighlightOutliner:$_};globalThis.pdfjsLib={AbortException:Yl,AnnotationEditorLayer:sN,AnnotationEditorParamsType:Be,AnnotationEditorType:be,AnnotationEditorUIManager:ou,AnnotationLayer:I_,AnnotationMode:Do,AnnotationType:Ot,build:GG,ColorPicker:gy,createValidAbsoluteUrl:qD,DOMSVGFactory:xy,DrawLayer:iN,FeatureTest:Es,fetchData:Dv,getDocument:QO,getFilenameFromUrl:F9,getPdfFilenameFromUrl:$9,getRGB:Ob,getUuid:XD,getXfaPageViewport:B9,GlobalWorkerOptions:Ui,ImageKind:Yx,InvalidPDFException:Vj,isDataScheme:Db,isPdfFile:nA,isValidExplicitDest:J9,MathClamp:Ys,noContextMenu:Nr,normalizeUnicode:D9,OPS:uy,OutputScale:ea,PasswordResponses:A9,PDFDataRangeTransport:JO,PDFDateString:fy,PDFWorker:Lp,PermissionFlag:S9,PixelsPerInch:Xl,RenderingCancelledException:sA,ResponseException:hy,setLayerDimensions:au,shadow:Fe,SignatureExtractor:Xa,stopEvent:Lt,SupportedImageMimeTypes:qj,TextLayer:Dp,TouchManager:py,updateUrlHash:KD,Util:fe,VerbosityLevel:Rb,version:VG,XfaLayer:sL};Ui.workerSrc="";const pq=()=>{const[s,e]=j.useState(!1),t=async o=>{try{const l=await o.arrayBuffer(),d=await QO(l).promise;let h="";for(let f=1;f<=d.numPages;f++){const x=(await(await d.getPage(f)).getTextContent()).items.map(v=>v.str??"").join(" ");h+=x+`
`}return h}catch(l){throw console.error("PDF extraction error:",l),new Error("Failed to extract text from PDF")}},n=o=>{const l=o.split(`
`).map(p=>p.trim()).filter(Boolean),c=[];let d="";const h=p=>/^(Basis|Modul)\s+.+$/i.test(p),f=p=>/^\d+$/.test(p);let m=0;for(;m<l.length;){const p=l[m];if(p.startsWith("Stand:")||/SIWF|Seite\s+\d+|Erfasste Prozeduren/i.test(p)){m++;continue}if(h(p)){d=p,m++;continue}if(d&&!f(p)){const x=p,v=[];let w=m+1;for(;w<l.length&&w<m+10;){const g=l[w];if(f(g)){v.push(parseInt(g)),w++;continue}if(h(g)||!f(g))break;w++}if(v.length>0){const g=v[0]||0,y=v[1]||0,b=v[2]||0,_=v[3]||0,S=v[4]||y+b+_;c.push({proc_name:x,module_name:d,minimum:g,responsible:y,instructing:b,assistant:_,total:S}),m=w;continue}}m++}return c},r=async o=>{const{data:{user:l}}=await se.auth.getUser();if(!l)throw new Error("Not authenticated");const{data:c,error:d}=await se.from("import_runs").insert({user_id:l.id,pdf_filename:o,source:"client_ai_parse",status:"running"}).select().single();if(d)throw d;return c};return{processFile:async o=>{e(!0);try{const l=await t(o),c=n(l),d=await r(o.name),h=c.map(f=>se.from("import_procedure_staging").insert({run_id:d.id,proc_name:f.proc_name,module_name:f.module_name,minimum:f.minimum,responsible:f.responsible,instructing:f.instructing,assistant:f.assistant,total:f.total,status:"pending"}));return await Promise.all(h),{success:!0,runId:d.id,summary:{filename:o.name,totalProcedures:c.length,modules:[],matched:0,needsReview:c.length},stagingData:c}}catch(l){return{success:!1,error:l instanceof Error?l.message:"Processing failed"}}finally{e(!1)}},isProcessing:s}},gq=({open:s,onOpenChange:e,onSuccess:t})=>{const[n,r]=j.useState(!1),[i,o]=j.useState(0),[l,c]=j.useState(null),[d,h]=j.useState(!1),[f,m]=j.useState(!1),{toast:p}=aS(),{processFile:x,isProcessing:v}=pq(),w=P=>{P.preventDefault(),P.stopPropagation(),P.type==="dragenter"||P.type==="dragover"?h(!0):P.type==="dragleave"&&h(!1)},g=P=>{P.preventDefault(),P.stopPropagation(),h(!1),P.dataTransfer.files&&P.dataTransfer.files[0]&&b(P.dataTransfer.files[0])},y=P=>{P.target.files&&P.target.files[0]&&b(P.target.files[0])},b=async P=>{if(P.type!=="application/pdf"){p({title:"Ungültiger Dateityp",description:"Bitte wählen Sie eine PDF-Datei aus.",variant:"destructive"});return}r(!0),o(0),c(null);try{const T=setInterval(()=>{o(z=>z<90?z+15:90)},200),O=await x(P);clearInterval(T),o(100),c(O),O.success&&O.summary?(m(!0),p({title:"PDF erfolgreich analysiert (AI)",description:`${O.summary.totalProcedures} Prozeduren erkannt.`})):p({title:"Fehler beim Verarbeiten",description:O.error||"Unbekannter Fehler",variant:"destructive"})}catch(T){p({title:"Verarbeitung fehlgeschlagen",description:T instanceof Error?T.message:"Unbekannter Fehler",variant:"destructive"})}finally{r(!1)}},_=()=>{o(0),c(null),r(!1),m(!1)},S=()=>{_(),e(!1)},A=()=>{m(!1),_()},C=()=>{t==null||t(),S()};return f&&(l!=null&&l.success)&&l.runId&&l.summary&&l.stagingData?a.jsx(N9,{runId:l.runId,summary:l.summary,stagingData:l.stagingData,onClose:A,onImportComplete:C}):a.jsx(Vl,{open:s,onOpenChange:S,children:a.jsxs(lo,{className:"sm:max-w-md",children:[a.jsx(co,{children:a.jsxs(uo,{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-5 w-5"}),"FMH eLogbuch PDF Upload"]})}),a.jsxs("div",{className:"space-y-4",children:[!l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:`
                  border-2 border-dashed rounded-lg p-8 text-center transition-colors
                  ${d?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}
                  ${n?"pointer-events-none opacity-50":"cursor-pointer"}
                `,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:g,onClick:()=>{var P;n||(P=document.getElementById("pdf-upload"))==null||P.click()},children:[a.jsx(cb,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),a.jsx("p",{className:"text-sm font-medium mb-2",children:"PDF hier ablegen oder klicken zum Auswählen"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützt: FMH eLogbuch PDF-Exporte"}),a.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",className:"hidden",onChange:y,disabled:n})]}),n&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"PDF wird verarbeitet..."}),a.jsxs("span",{children:[i,"%"]})]}),a.jsx(ql,{value:i,className:"w-full"})]})]}),l&&!l.success&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive border border-destructive/20",children:[a.jsx(a$,{className:"h-5 w-5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium",children:"Fehler beim Verarbeiten"}),a.jsx("p",{className:"mt-1 text-sm",children:l.error})]})]}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(K,{variant:"outline",onClick:_,children:"Erneut versuchen"}),a.jsx(K,{onClick:S,children:"Schließen"})]})]})]})]})})},vq=({open:s,onOpenChange:e,onSuccess:t})=>{var S;const{user:n}=ci(),[r,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[h,f]=j.useState(!1),[m,p]=j.useState(!1),[x,v]=j.useState({procedure_id:"",role_in_surgery:"responsible",date_performed:new Date().toISOString().split("T")[0],notes:"",supervisor_name:"",institution:""});j.useEffect(()=>{s&&w()},[s]),j.useEffect(()=>{c&&g(c)},[c]);const w=async()=>{try{f(!0);const{data:A,error:C}=await se.from("procedure_categories").select("id, key, title_de, module_type").not("module_type","is",null).order("sort_index");if(C)throw C;i(A||[])}catch(A){console.error("Error loading categories:",A),Ie.error("Fehler beim Laden der Kategorien")}finally{f(!1)}},g=async A=>{try{f(!0);const{data:C,error:P}=await se.from("procedures").select("id, code, title_de, min_required_by_pgy").eq("category_id",A).eq("active",!0).order("title_de");if(P)throw P;l(C||[])}catch(C){console.error("Error loading procedures:",C),Ie.error("Fehler beim Laden der Prozeduren")}finally{f(!1)}},y=async A=>{if(A.preventDefault(),!!n)try{p(!0);const{error:C}=await se.from("procedure_logs").insert({user_id:n.id,procedure_id:x.procedure_id,role_in_surgery:x.role_in_surgery,date_performed:x.date_performed,notes:x.notes,supervisor_name:x.supervisor_name,institution:x.institution,created_at:new Date().toISOString()});if(C)throw C;Ie.success("Prozedur erfolgreich erfasst!"),t(),e(!1),v({procedure_id:"",role_in_surgery:"responsible",date_performed:new Date().toISOString().split("T")[0],notes:"",supervisor_name:"",institution:""}),d(""),l([])}catch(C){console.error("Error submitting procedure:",C),Ie.error("Fehler beim Erfassen der Prozedur")}finally{p(!1)}},b=o.find(A=>A.id===x.procedure_id),_=((S=b==null?void 0:b.min_required_by_pgy)==null?void 0:S.pgy5)||0;return a.jsx(Vl,{open:s,onOpenChange:e,children:a.jsxs(lo,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx(co,{children:a.jsxs(uo,{className:"flex items-center gap-2",children:[a.jsx(js,{className:"w-5 h-5"}),"Manuelle Prozedur-Eingabe"]})}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"category",children:"FMH Modul"}),a.jsxs(Qt,{value:c,onValueChange:d,children:[a.jsx($t,{children:a.jsx(Jt,{placeholder:"Wählen Sie ein FMH Modul"})}),a.jsx(zt,{children:r.map(A=>a.jsx(ye,{value:A.id,children:A.title_de},A.id))})]})]}),c&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"procedure",children:"Prozedur"}),a.jsxs(Qt,{value:x.procedure_id,onValueChange:A=>v(C=>({...C,procedure_id:A})),children:[a.jsx($t,{children:a.jsx(Jt,{placeholder:"Wählen Sie eine Prozedur"})}),a.jsx(zt,{children:o.map(A=>a.jsx(ye,{value:A.id,children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:A.title_de}),a.jsxs("span",{className:"text-xs text-muted-foreground",children:[A.code," • Min: ",_]})]})},A.id))})]})]}),b&&a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{className:"text-lg",children:b.title_de})}),a.jsx(ce,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(he,{className:"text-sm text-muted-foreground",children:"Code"}),a.jsx("p",{className:"font-mono",children:b.code})]}),a.jsxs("div",{children:[a.jsx(he,{className:"text-sm text-muted-foreground",children:"Mindestanforderung PGY-5"}),a.jsxs("p",{className:"font-semibold",children:[_," Eingriffe"]})]})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"role",children:"Rolle im Eingriff"}),a.jsxs(Qt,{value:x.role_in_surgery,onValueChange:A=>v(C=>({...C,role_in_surgery:A})),children:[a.jsx($t,{children:a.jsx(Jt,{})}),a.jsxs(zt,{children:[a.jsx(ye,{value:"responsible",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:"Verantwortlich (1.0x Gewichtung)"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Hauptverantwortlicher Chirurg"})]})}),a.jsx(ye,{value:"instructing",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:"Instruierend (0.5x Gewichtung)"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Unter Aufsicht"})]})}),a.jsx(ye,{value:"assistant",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:"Assistent (0.25x Gewichtung)"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Assistierend"})]})})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"date",children:"Datum des Eingriffs"}),a.jsx(Ee,{id:"date",type:"date",value:x.date_performed,onChange:A=>v(C=>({...C,date_performed:A.target.value})),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"supervisor",children:"Supervisor/Chefarzt"}),a.jsx(Ee,{id:"supervisor",value:x.supervisor_name,onChange:A=>v(C=>({...C,supervisor_name:A.target.value})),placeholder:"Dr. Max Mustermann"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"institution",children:"Institution"}),a.jsx(Ee,{id:"institution",value:x.institution,onChange:A=>v(C=>({...C,institution:A.target.value})),placeholder:"Universitätsspital Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"notes",children:"Notizen (optional)"}),a.jsx(Gl,{id:"notes",value:x.notes,onChange:A=>v(C=>({...C,notes:A.target.value})),placeholder:"Besondere Umstände, Komplikationen, etc.",rows:3})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:m,children:"Abbrechen"}),a.jsx(K,{type:"submit",disabled:!x.procedure_id||m,className:"gap-2",children:m?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Erfasse..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qf,{className:"w-4 h-4"}),"Prozedur erfassen"]})})]})]})]})})},xq=({open:s,onOpenChange:e,onSuccess:t})=>{const{user:n}=ci(),[r,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState(null),[h,f]=j.useState({}),m=j.useCallback(async()=>{if(n){l(!0);try{const{data:_,error:S}=await se.from("procedure_logs").select(`
          id,
          performed_date,
          procedure_id,
          role_in_surgery,
          weighted_score,
          notes,
          hospital,
          supervisor,
          procedures (
            title_de,
            category_id,
            procedure_categories (
              key,
              title_de
            )
          )
        `).eq("user_id",n.id).order("performed_date",{ascending:!1});if(S)throw S;const A=(_||[]).map(C=>{var P,T,O,z,F;return{id:C.id,performed_date:C.performed_date,procedure_id:C.procedure_id,procedure_title:((P=C.procedures)==null?void 0:P.title_de)||"Unknown Procedure",category_key:((O=(T=C.procedures)==null?void 0:T.procedure_categories)==null?void 0:O.key)||"unknown",category_title:((F=(z=C.procedures)==null?void 0:z.procedure_categories)==null?void 0:F.title_de)||"Unknown Category",role_in_surgery:C.role_in_surgery||"primary",weighted_score:C.weighted_score||1,notes:C.notes,hospital:C.hospital,supervisor:C.supervisor}});i(A)}catch(_){console.error("Error loading procedure logs:",_),Ie.error("Fehler beim Laden der Prozedur-Logs")}finally{l(!1)}}},[n]);j.useEffect(()=>{s&&n&&m()},[s,n,m]);const p=_=>{d(_.id),f({performed_date:_.performed_date,role_in_surgery:_.role_in_surgery,notes:_.notes,hospital:_.hospital,supervisor:_.supervisor})},x=async _=>{try{const{error:S}=await se.from("procedure_logs").update({performed_date:h.performed_date,role_in_surgery:h.role_in_surgery,notes:h.notes,hospital:h.hospital,supervisor:h.supervisor}).eq("id",_);if(S)throw S;d(null),f({}),await m(),Ie.success("Eintrag erfolgreich aktualisiert")}catch(S){console.error("Error updating log:",S),Ie.error("Fehler beim Aktualisieren des Eintrags")}},v=async _=>{if(confirm("Sind Sie sicher, dass Sie diesen Eintrag löschen möchten?"))try{const{error:S}=await se.from("procedure_logs").delete().eq("id",_);if(S)throw S;await m(),Ie.success("Eintrag erfolgreich gelöscht"),t&&t()}catch(S){console.error("Error deleting log:",S),Ie.error("Fehler beim Löschen des Eintrags")}},w=()=>{d(null),f({})},g=r.reduce((_,S)=>{const A=S.category_title;return _[A]||(_[A]=[]),_[A].push(S),_},{}),y=_=>({responsible:"Verantwortlich",instructing:"Instruierend",assistant:"Assistent"})[_]||_,b=_=>({responsible:"default",instructing:"secondary",assistant:"outline"})[_]||"outline";return a.jsx(Vl,{open:s,onOpenChange:e,children:a.jsxs(lo,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsx(co,{children:a.jsx(uo,{children:"Prozedur-Korrekturen"})}),a.jsx("div",{className:"flex-1 overflow-hidden",children:o?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.jsxs(_r,{defaultValue:Object.keys(g)[0],className:"h-full flex flex-col",children:[a.jsx(Jn,{className:"grid w-full grid-cols-5",children:Object.keys(g).map(_=>a.jsxs(Ue,{value:_,className:"text-xs",children:[_.replace("Basis ","").replace("Modul ",""),a.jsx(Y,{variant:"secondary",className:"ml-1",children:g[_].length})]},_))}),Object.entries(g).map(([_,S])=>a.jsx(He,{value:_,className:"flex-1 overflow-hidden",children:a.jsx("div",{className:"overflow-auto h-full",children:a.jsxs(su,{children:[a.jsx(nu,{children:a.jsxs(Gn,{children:[a.jsx(Ne,{children:"Datum"}),a.jsx(Ne,{children:"Prozedur"}),a.jsx(Ne,{children:"Rolle"}),a.jsx(Ne,{children:"Score"}),a.jsx(Ne,{children:"Spital"}),a.jsx(Ne,{children:"Supervisor"}),a.jsx(Ne,{children:"Notizen"}),a.jsx(Ne,{children:"Aktionen"})]})}),a.jsx(ru,{children:S.map(A=>a.jsxs(Gn,{children:[a.jsx(Se,{children:c===A.id?a.jsx(Ee,{type:"date",value:h.performed_date,onChange:C=>f(P=>({...P,performed_date:C.target.value})),className:"w-32"}):new Date(A.performed_date).toLocaleDateString("de-CH")}),a.jsx(Se,{className:"max-w-48",children:a.jsx("div",{className:"truncate",title:A.procedure_title,children:A.procedure_title})}),a.jsx(Se,{children:c===A.id?a.jsxs("select",{value:h.role_in_surgery,onChange:C=>f(P=>({...P,role_in_surgery:C.target.value})),className:"border rounded px-2 py-1",children:[a.jsx("option",{value:"responsible",children:"Verantwortlich"}),a.jsx("option",{value:"instructing",children:"Instruierend"}),a.jsx("option",{value:"assistant",children:"Assistent"})]}):a.jsx(Y,{variant:b(A.role_in_surgery),children:y(A.role_in_surgery)})}),a.jsx(Se,{children:A.weighted_score}),a.jsx(Se,{children:c===A.id?a.jsx(Ee,{value:h.hospital||"",onChange:C=>f(P=>({...P,hospital:C.target.value})),className:"w-24"}):A.hospital||"-"}),a.jsx(Se,{children:c===A.id?a.jsx(Ee,{value:h.supervisor||"",onChange:C=>f(P=>({...P,supervisor:C.target.value})),className:"w-24"}):A.supervisor||"-"}),a.jsx(Se,{children:c===A.id?a.jsx(Ee,{value:h.notes||"",onChange:C=>f(P=>({...P,notes:C.target.value})),className:"w-32"}):a.jsx("div",{className:"max-w-32 truncate",title:A.notes,children:A.notes||"-"})}),a.jsx(Se,{children:a.jsx("div",{className:"flex gap-1",children:c===A.id?a.jsxs(a.Fragment,{children:[a.jsx(K,{size:"sm",onClick:()=>x(A.id),children:a.jsx(fS,{className:"h-3 w-3"})}),a.jsx(K,{size:"sm",variant:"outline",onClick:w,children:a.jsx(ic,{className:"h-3 w-3"})})]}):a.jsxs(a.Fragment,{children:[a.jsx(K,{size:"sm",variant:"outline",onClick:()=>p(A),children:a.jsx(gS,{className:"h-3 w-3"})}),a.jsx(K,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>v(A.id),children:a.jsx(lb,{className:"h-3 w-3"})})]})})})]},A.id))})]})})},_))]})}),a.jsx("div",{className:"border-t pt-4 flex justify-end gap-2",children:a.jsx(K,{variant:"outline",onClick:()=>e(!1),children:"Schließen"})})]})})},yq=()=>{const{user:s}=ci(),[e,t]=j.useState([]),[n,r]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState("all"),[d,h]=j.useState("all"),[f,m]=j.useState("");j.useEffect(()=>{s&&p()},[s]);const p=async()=>{if(s)try{r(!0);const{data:b,error:_}=await se.from("procedure_logs").select(`
          id,
          procedure_id,
          role_in_surgery,
          date_performed,
          notes,
          supervisor_name,
          institution,
          created_at,
          procedure:procedures(
            code,
            title_de,
            category:procedure_categories(
              title_de,
              module_type
            )
          )
        `).eq("user_id",s.id).order("date_performed",{ascending:!1});if(_)throw _;t(b||[])}catch(b){console.error("Error loading procedure logs:",b),Ie.error("Fehler beim Laden der Prozeduren")}finally{r(!1)}},x=async b=>{if(confirm("Sind Sie sicher, dass Sie diese Prozedur löschen möchten?"))try{const{error:_}=await se.from("procedure_logs").delete().eq("id",b);if(_)throw _;Ie.success("Prozedur gelöscht"),p()}catch(_){console.error("Error deleting log:",_),Ie.error("Fehler beim Löschen der Prozedur")}},v=b=>{switch(b){case"responsible":return"default";case"instructing":return"secondary";case"assistant":return"outline";default:return"outline"}},w=b=>{switch(b){case"responsible":return"Verantwortlich";case"instructing":return"Instruierend";case"assistant":return"Assistent";default:return b}},g=e.filter(b=>{const _=b.procedure.title_de.toLowerCase().includes(i.toLowerCase())||b.procedure.code.toLowerCase().includes(i.toLowerCase())||b.supervisor_name.toLowerCase().includes(i.toLowerCase()),S=l==="all"||b.role_in_surgery===l,A=d==="all"||b.procedure.category.module_type===d,C=!f||b.date_performed.startsWith(f);return _&&S&&A&&C}),y=()=>{const b=[["Datum","Prozedur","Code","Rolle","Supervisor","Institution","Notizen"],...g.map(C=>[C.date_performed,C.procedure.title_de,C.procedure.code,w(C.role_in_surgery),C.supervisor_name,C.institution,C.notes])].map(C=>C.join(",")).join(`
`),_=new Blob([b],{type:"text/csv"}),S=window.URL.createObjectURL(_),A=document.createElement("a");A.href=S,A.download=`fmh-procedures-${new Date().toISOString().split("T")[0]}.csv`,A.click(),window.URL.revokeObjectURL(S)};return n?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Prozeduren Tracking"}),a.jsx("p",{className:"text-muted-foreground",children:"Übersicht aller erfassten chirurgischen Eingriffe"})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs(K,{variant:"outline",onClick:y,className:"gap-2",children:[a.jsx(ob,{className:"w-4 h-4"}),"Export CSV"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(G,{children:a.jsx(ce,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"w-4 h-4 text-primary"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gesamt"}),a.jsx("p",{className:"text-2xl font-bold",children:e.length})]})]})})}),a.jsx(G,{children:a.jsx(ce,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ap,{className:"w-4 h-4 text-green-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Verantwortlich"}),a.jsx("p",{className:"text-2xl font-bold",children:e.filter(b=>b.role_in_surgery==="responsible").length})]})]})})}),a.jsx(G,{children:a.jsx(ce,{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ap,{className:"w-4 h-4 text-blue-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Instruierend"}),a.jsx("p",{className:"text-2xl font-bold",children:e.filter(b=>b.role_in_surgery==="instructing").length})]})]})})}),a.jsx(G,{children:a.jsx(ce,{className:"p4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ap,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Assistent"}),a.jsx("p",{className:"text-2xl font-bold",children:e.filter(b=>b.role_in_surgery==="assistant").length})]})]})})})]}),a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{className:"text-lg",children:"Filter & Suche"})}),a.jsx(ce,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Suche"}),a.jsxs("div",{className:"relative",children:[a.jsx(mS,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{placeholder:"Prozedur, Code, Supervisor...",value:i,onChange:b=>o(b.target.value),className:"pl-10"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Rolle"}),a.jsxs(Qt,{value:l,onValueChange:c,children:[a.jsx($t,{children:a.jsx(Jt,{})}),a.jsxs(zt,{children:[a.jsx(ye,{value:"all",children:"Alle Rollen"}),a.jsx(ye,{value:"responsible",children:"Verantwortlich"}),a.jsx(ye,{value:"instructing",children:"Instruierend"}),a.jsx(ye,{value:"assistant",children:"Assistent"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Modul"}),a.jsxs(Qt,{value:d,onValueChange:h,children:[a.jsx($t,{children:a.jsx(Jt,{})}),a.jsxs(zt,{children:[a.jsx(ye,{value:"all",children:"Alle Module"}),a.jsx(ye,{value:"basis",children:"Basis"}),a.jsx(ye,{value:"viszeral",children:"Viszeral"}),a.jsx(ye,{value:"trauma",children:"Trauma"}),a.jsx(ye,{value:"kombi",children:"Kombination"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Datum"}),a.jsx(Ee,{type:"month",value:f,onChange:b=>m(b.target.value)})]})]})})]}),g.length===0?a.jsx(ti,{children:a.jsx(si,{children:e.length===0?'Noch keine Prozeduren erfasst. Verwenden Sie "Prozedur erfassen" um eine neue Prozedur hinzuzufügen.':"Keine Prozeduren entsprechen den aktuellen Filtern."})}):a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsxs(ke,{children:["Prozeduren (",g.length," von ",e.length,")"]})}),a.jsx(ce,{children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs(su,{children:[a.jsx(nu,{children:a.jsxs(Gn,{children:[a.jsx(Ne,{children:"Datum"}),a.jsx(Ne,{children:"Prozedur"}),a.jsx(Ne,{children:"Code"}),a.jsx(Ne,{children:"Rolle"}),a.jsx(Ne,{children:"Supervisor"}),a.jsx(Ne,{children:"Institution"}),a.jsx(Ne,{children:"Aktionen"})]})}),a.jsx(ru,{children:g.map(b=>a.jsxs(Gn,{children:[a.jsx(Se,{children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hs,{className:"w-4 h-4 text-muted-foreground"}),new Date(b.date_performed).toLocaleDateString("de-CH")]})}),a.jsx(Se,{children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:b.procedure.title_de}),a.jsx("p",{className:"text-sm text-muted-foreground",children:b.procedure.category.title_de})]})}),a.jsx(Se,{children:a.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:b.procedure.code})}),a.jsx(Se,{children:a.jsx(Y,{variant:v(b.role_in_surgery),children:w(b.role_in_surgery)})}),a.jsx(Se,{children:b.supervisor_name||"-"}),a.jsx(Se,{children:b.institution||"-"}),a.jsx(Se,{children:a.jsx("div",{className:"flex gap-2",children:a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>x(b.id),className:"text-red-500 hover:text-red-700",children:a.jsx(lb,{className:"w-4 h-4"})})})})]},b.id))})]})})})]})]})},bq=()=>{const{user:s,loading:e}=ci(),t=po(),[n,r]=j.useState([]),[i,o]=j.useState(null),[l,c]=j.useState(!0),[d,h]=j.useState(!1),[f,m]=j.useState(!1),[p,x]=j.useState(!1),[v,w]=j.useState(!1),[g,y]=j.useState(!1),[b,_]=j.useState(!1),[S,A]=j.useState(4);j.useEffect(()=>{if(e)return;if(!s){console.log("🔄 FMH: No user, redirecting to /auth"),t("/auth",{replace:!0});return}if(console.log("🔄 FMHDashboard useEffect triggered for user:",s.id),l){console.log("⏸️ FMH: Already loading, skipping...");return}P();const F=setTimeout(()=>{console.log("⏰ Timeout reached - stopping loading"),h(!0),c(!1)},1e4);return()=>clearTimeout(F)},[s,e]);const C=async(F,B)=>{try{console.log("🔄 Calculating progress manually for module:",B);const{data:I,error:H}=await se.from("procedure_categories").select("id").eq("key",B).single();if(H||!I)return console.error("Error fetching category:",H),null;const{data:$,error:D}=await se.from("procedures").select("id, code, title_de, min_required_by_pgy").eq("category_id",I.id).eq("active",!0);if(D||!$)return console.error("Error fetching procedures:",D),null;const{data:M,error:R}=await se.from("procedure_logs").select("procedure_id, role_in_surgery").eq("user_id",F);if(R)return console.error("Error fetching logs:",R),null;let U=0,Z=0,L=0,V=0,Q=0;$.forEach(le=>{var Nt;const W=(M==null?void 0:M.filter(St=>St.procedure_id===le.id))||[],pe=((Nt=le.min_required_by_pgy)==null?void 0:Nt.pgy5)||0,je=W.filter(St=>["primary","responsible"].includes(St.role_in_surgery)).length,Te=W.filter(St=>St.role_in_surgery==="instructing").length,Re=W.filter(St=>["assistant","assist"].includes(St.role_in_surgery)).length,Oe=je*1+Te*.5+Re*.25;U+=Oe,Z+=pe,L+=je,V+=Te,Q+=Re});const J=Z>0?U/Z*100:0;return[{module_name:B,total_weighted_score:U,total_minimum:Z,progress_percentage:J,responsible_count:L,instructing_count:V,assistant_count:Q}]}catch(I){return console.error("❌ FMH: Critical error in loadModulesAndProgress:",I),console.error("Error in manual calculation:",I),null}},P=async()=>{if(console.log("🚀 FMH: Starting loadModulesAndProgress..."),l){console.log("⏸️ FMH: Already loading, aborting...");return}try{c(!0);const{data:{user:F},error:B}=await se.auth.getUser();if(B&&console.error("getUser error",B),console.log("🔍 FMHDashboard - Loading data for user ID:",F==null?void 0:F.id),F){const{data:D}=await se.from("profiles").select("pgy_level").eq("user_id",F.id).single();D!=null&&D.pgy_level&&A(D.pgy_level)}const{data:I,error:H}=await se.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");if(H)throw H;const $=[];for(const D of I||[])if(F){console.log("📊 FMHDashboard - Getting progress for module:",D.key,"user:",F.id);let M=null;try{console.log("🔄 Starting RPC call for module:",D.key);const U=se.rpc("get_module_progress",{user_id_param:F.id,module_key:D.key}),Z=new Promise((J,le)=>setTimeout(()=>le(new Error("RPC timeout after 3 seconds")),3e3)),L=await Promise.race([U,Z]),{data:V,error:Q}=L;Q?(console.error("❌ RPC error for module",D.key,":",Q),M=await C(F.id,D.key)):(console.log("✅ RPC success for module",D.key,":",V),M=V)}catch(U){console.error("❌ FMH: Critical error in loadModulesAndProgress:",U),console.error("❌ RPC timeout/error for module",D.key,":",U),M=await C(F.id,D.key)}console.log("📈 Progress data for",D.key,":",M),console.log("🔍 Module data:",{key:D.key,title:D.title_de,minimum_required:D.minimum_required,progress_raw:M});let R=null;if(M&&M.length>0){const U=M[0];Array.isArray(U)&&U.length>=7?R={module_name:U[0],total_weighted_score:U[1],total_minimum:U[2],progress_percentage:U[3],responsible_count:U[4],instructing_count:U[5],assistant_count:U[6]}:typeof U=="object"&&U!==null&&(R=U)}$.push({...D,progress:R})}else $.push({...D,progress:null});r($)}catch(F){console.error("❌ FMH: Critical error in loadModulesAndProgress:",F),console.error("Error loading modules:",F),r([{id:"fallback-1",key:"basis_notfallchirurgie",title_de:"Basis Notfallchirurgie",module_type:"basis",minimum_required:85,progress:{module_name:"basis_notfallchirurgie",total_weighted_score:25,total_minimum:85,progress_percentage:30,responsible_count:8,instructing_count:5,assistant_count:12}},{id:"fallback-2",key:"basis_allgemeinchirurgie",title_de:"Basis Allgemeinchirurgie",module_type:"basis",minimum_required:260,progress:{module_name:"basis_allgemeinchirurgie",total_weighted_score:45,total_minimum:260,progress_percentage:17,responsible_count:15,instructing_count:8,assistant_count:22}}])}finally{console.log("✅ FMH: loadModulesAndProgress completed, setting loading to false"),c(!1)}},T=F=>({basis_notfallchirurgie:"coral",basis_allgemeinchirurgie:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[F]||"mint",z=(()=>{const F=n.reduce((H,$)=>{var D;return H+(((D=$.progress)==null?void 0:D.responsible_count)||0)},0),B=n.reduce((H,$)=>{var D,M,R;return H+(((D=$.progress)==null?void 0:D.responsible_count)||0)+(((M=$.progress)==null?void 0:M.instructing_count)||0)+(((R=$.progress)==null?void 0:R.assistant_count)||0)},0),I=B>0?F/B*100:0;return I>=30?{status:"good",color:"bg-green-500"}:I>=20?{status:"warning",color:"bg-yellow-500"}:{status:"critical",color:"bg-red-500"}})();return l?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-medical-title text-card-foreground mb-2",children:"FMH Chirurgie Tracking"}),a.jsxs("p",{className:"text-medical-subtitle",children:["Überwachung Ihres FMH-konformen Ausbildungsfortschritts - PGY ",S]}),s&&a.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Debug: User ID: ",s.id," | Email: ",s.email]})]}),a.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[a.jsxs(K,{variant:"default",size:"sm",className:"gap-2",onClick:()=>_(!0),children:[a.jsx(js,{className:"w-4 h-4"}),"Prozeduren Tracking"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>m(!0),children:[a.jsx(Qf,{className:"w-4 h-4"}),"Prozedur erfassen"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>w(!0),children:[a.jsx(Ns,{className:"w-4 h-4"}),"Manual eingabe"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>x(!0),children:[a.jsx(cb,{className:"w-4 h-4"}),"PDF Upload"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",children:[a.jsx(ob,{className:"w-4 h-4"}),"Export"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>y(!0),children:[a.jsx(Sv,{className:"w-4 h-4"}),"Korrekturen"]})]})]}),a.jsxs("div",{className:"medical-card-elegant p-8 mb-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-2",children:"FMH Module Progress"}),a.jsx("p",{className:"text-text-secondary",children:"Gewichtete Erfüllung der FMH-Mindestanforderungen pro Modul"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:n.map(F=>{var I,H,$,D,M;const B=((I=F.progress)==null?void 0:I.progress_percentage)||0;return a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(kv,{progress:B,variant:T(F.key),size:120,strokeWidth:8,label:F.title_de,showPercentage:!0,onClick:()=>o(F.key),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[a.jsx(sj,{className:"w-4 h-4 text-muted-foreground"}),a.jsxs(Y,{variant:"outline",className:"text-xs",children:[parseInt((((H=F.progress)==null?void 0:H.total_weighted_score)||0).toString()),"/",F.minimum_required||"?"]})]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:["V:",parseInt(((($=F.progress)==null?void 0:$.responsible_count)||0).toString())," I:",parseInt((((D=F.progress)==null?void 0:D.instructing_count)||0).toString())," A:",parseInt((((M=F.progress)==null?void 0:M.assistant_count)||0).toString())]})]})]},F.id)})})]}),i&&a.jsx(D7,{moduleKey:i,onClose:()=>o(null)}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(G,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:a.jsx(Uf,{className:"w-6 h-6 text-activity-mint"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Gesamtfortschritt"}),a.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[n.length>0?parseInt((n.reduce((F,B)=>{var I;return F+(((I=B.progress)==null?void 0:I.progress_percentage)||0)},0)/n.length).toString()):0,"%"]})]})]})}),a.jsx(G,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`p-3 ${z.color}/20 rounded-medical`,children:a.jsx(xr,{className:"w-6 h-6",style:{color:z.color.replace("/20","").replace("bg-","")}})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Rollen-Balance"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground capitalize",children:z.status==="good"?"Gut":z.status==="warning"?"Achtung":"Kritisch"})]})]})}),a.jsx(G,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:a.jsx(sj,{className:"w-6 h-6 text-activity-coral"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Eingriffe Total"}),a.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:parseInt(n.reduce((F,B)=>{var I,H,$;return F+(((I=B.progress)==null?void 0:I.responsible_count)||0)+(((H=B.progress)==null?void 0:H.instructing_count)||0)+((($=B.progress)==null?void 0:$.assistant_count)||0)},0).toString())})]})]})}),a.jsx(G,{className:"medical-card p-6",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:a.jsx(hs,{className:"w-6 h-6 text-activity-amber"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktueller PGY"}),a.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:["PGY-",S]})]})]})})]}),a.jsx(_9,{modules:n,userPgyLevel:S}),f&&a.jsx(b9,{onClose:()=>m(!1),onSuccess:()=>{m(!1),P()}}),a.jsx(vq,{open:v,onOpenChange:w,onSuccess:P}),a.jsx(gq,{open:p,onOpenChange:x,onSuccess:P}),a.jsx(xq,{open:g,onOpenChange:y,onSuccess:P}),b&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-background rounded-lg w-full max-w-7xl h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"FMH Prozeduren Tracking"}),a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>_(!1),children:"✕"})]}),a.jsx("div",{className:"p-6 h-[calc(100%-80px)] overflow-auto",children:a.jsx(yq,{})})]})})]})]})},wq=()=>{const{user:s}=ci(),[e,t]=j.useState([]),[n,r]=j.useState(null),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,h]=j.useState(!0),[f,m]=j.useState(null),[p,x]=j.useState(!1),[v,w]=j.useState(!1),[g,y]=j.useState({team_name:"",department:"",hospital:"",description:""}),[b,_]=j.useState(""),[S,A]=j.useState("");j.useEffect(()=>{s&&C()},[s]);const C=async()=>{try{h(!0),m(null);const{data:I,error:H}=await se.from("supervisor_teams").select(`
          *,
          team_members(count)
        `).eq("supervisor_id",s==null?void 0:s.id).order("created_at",{ascending:!1});if(H){console.error("Error loading teams:",H),m("Fehler beim Laden der Teams");return}const $=(I==null?void 0:I.map(D=>{var M,R;return{...D,member_count:((R=(M=D.team_members)==null?void 0:M[0])==null?void 0:R.count)||0}}))||[];t($)}catch(I){console.error("Error in loadTeams:",I),m("Fehler beim Laden der Team-Daten")}finally{h(!1)}},P=async I=>{try{const{data:H,error:$}=await se.from("team_members").select(`
          *,
          profiles!team_members_resident_id_fkey (
            user_id,
            full_name,
            email,
            pgy_level,
            department,
            hospital
          )
        `).eq("team_id",I).order("joined_at",{ascending:!1});if($){console.error("Error loading team members:",$);return}const D=(H==null?void 0:H.map(M=>{var R,U,Z,L,V;return{id:M.id,resident_id:M.resident_id,resident_name:((R=M.profiles)==null?void 0:R.full_name)||"Unbekannt",resident_email:((U=M.profiles)==null?void 0:U.email)||"",pgy_level:((Z=M.profiles)==null?void 0:Z.pgy_level)||0,department:((L=M.profiles)==null?void 0:L.department)||"",hospital:((V=M.profiles)==null?void 0:V.hospital)||"",joined_at:M.joined_at,status:M.status,notes:M.notes||""}}))||[];o(D)}catch(H){console.error("Error in loadTeamMembers:",H)}},T=async()=>{try{const{data:I,error:H}=await se.from("profiles").select("user_id, full_name, email, pgy_level, department, hospital").eq("role","resident").not("user_id","in","(SELECT resident_id FROM team_members WHERE status = 'active')").order("full_name");if(H){console.error("Error loading available residents:",H);return}c(I||[])}catch(I){console.error("Error in loadAvailableResidents:",I)}},O=async()=>{try{const{data:I,error:H}=await se.from("supervisor_teams").insert({supervisor_id:s==null?void 0:s.id,team_name:g.team_name,department:g.department,hospital:g.hospital,description:g.description}).select().single();if(H)throw H;To({title:"Team erstellt",description:`Das Team "${g.team_name}" wurde erfolgreich erstellt.`}),y({team_name:"",department:"",hospital:"",description:""}),x(!1),C()}catch(I){console.error("Error creating team:",I),To({title:"Fehler",description:"Team konnte nicht erstellt werden.",variant:"destructive"})}},z=async()=>{if(!(!n||!b))try{const{error:I}=await se.from("team_members").insert({team_id:n.id,resident_id:b,notes:S});if(I)throw I;To({title:"Resident hinzugefügt",description:"Der Resident wurde erfolgreich zum Team hinzugefügt."}),_(""),A(""),w(!1),P(n.id),C()}catch(I){console.error("Error adding member:",I),To({title:"Fehler",description:"Resident konnte nicht hinzugefügt werden.",variant:"destructive"})}},F=async I=>{try{const{error:H}=await se.from("team_members").update({status:"inactive"}).eq("id",I);if(H)throw H;To({title:"Resident entfernt",description:"Der Resident wurde aus dem Team entfernt."}),n&&(P(n.id),C())}catch(H){console.error("Error removing member:",H),To({title:"Fehler",description:"Resident konnte nicht entfernt werden.",variant:"destructive"})}},B=I=>{r(I),P(I.id)};return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Lade Teams..."})]})}):f?a.jsxs(ti,{children:[a.jsx(Xi,{className:"h-4 w-4"}),a.jsx(si,{children:f})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Team Management"}),a.jsx("p",{className:"text-gray-600",children:"Verwalten Sie Ihre Teams und Residents"})]}),a.jsxs(Vl,{open:p,onOpenChange:x,children:[a.jsx(zj,{asChild:!0,children:a.jsxs(K,{children:[a.jsx(Qf,{className:"h-4 w-4 mr-2"}),"Neues Team"]})}),a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(uo,{children:"Neues Team erstellen"}),a.jsx(Bj,{children:"Erstellen Sie ein neues Team für Ihre Residents"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"team_name",children:"Team Name"}),a.jsx(Ee,{id:"team_name",value:g.team_name,onChange:I=>y(H=>({...H,team_name:I.target.value})),placeholder:"z.B. Chirurgie Team A"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"department",children:"Abteilung"}),a.jsx(Ee,{id:"department",value:g.department,onChange:I=>y(H=>({...H,department:I.target.value})),placeholder:"z.B. Allgemeinchirurgie"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"hospital",children:"Krankenhaus"}),a.jsx(Ee,{id:"hospital",value:g.hospital,onChange:I=>y(H=>({...H,hospital:I.target.value})),placeholder:"z.B. Universitätsspital Zürich"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"description",children:"Beschreibung"}),a.jsx(Gl,{id:"description",value:g.description,onChange:I=>y(H=>({...H,description:I.target.value})),placeholder:"Beschreibung des Teams..."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(K,{variant:"outline",onClick:()=>x(!1),children:"Abbrechen"}),a.jsx(K,{onClick:O,disabled:!g.team_name.trim(),children:"Team erstellen"})]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(G,{children:[a.jsxs(Ae,{children:[a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(xr,{className:"h-5 w-5"}),"Ihre Teams"]}),a.jsx(Qr,{children:"Wählen Sie ein Team aus, um die Mitglieder zu verwalten"})]}),a.jsx(ce,{children:a.jsxs("div",{className:"space-y-3",children:[e.map(I=>a.jsx(G,{className:`cursor-pointer transition-all hover:shadow-md ${(n==null?void 0:n.id)===I.id?"ring-2 ring-blue-500":""}`,onClick:()=>B(I),children:a.jsxs(ce,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:I.team_name}),a.jsxs(Y,{variant:"outline",children:[I.member_count," Mitglieder"]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(J0,{className:"h-4 w-4"}),I.department]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zf,{className:"h-4 w-4"}),I.hospital]}),I.description&&a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:I.description})]})]})},I.id)),e.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keine Teams vorhanden"}),a.jsx("p",{className:"text-gray-600",children:"Erstellen Sie Ihr erstes Team, um Residents zu verwalten."})]})]})})]}),a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(oj,{className:"h-5 w-5"}),"Team Mitglieder"]}),a.jsx(Qr,{children:n?`Mitglieder von "${n.team_name}"`:"Wählen Sie ein Team aus"})]}),n&&a.jsxs(Vl,{open:v,onOpenChange:w,children:[a.jsx(zj,{asChild:!0,children:a.jsxs(K,{size:"sm",onClick:T,children:[a.jsx(VT,{className:"h-4 w-4 mr-2"}),"Hinzufügen"]})}),a.jsxs(lo,{children:[a.jsxs(co,{children:[a.jsx(uo,{children:"Resident zum Team hinzufügen"}),a.jsxs(Bj,{children:['Fügen Sie einen Resident zu "',n.team_name,'" hinzu']})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"resident",children:"Resident auswählen"}),a.jsxs(Qt,{value:b,onValueChange:_,children:[a.jsx($t,{children:a.jsx(Jt,{placeholder:"Resident auswählen..."})}),a.jsx(zt,{children:l.map(I=>a.jsx(ye,{value:I.user_id,children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:I.full_name}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["PGY ",I.pgy_level," - ",I.department]})]})},I.user_id))})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"notes",children:"Notizen (optional)"}),a.jsx(Gl,{id:"notes",value:S,onChange:I=>A(I.target.value),placeholder:"Notizen zum Resident..."})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(K,{variant:"outline",onClick:()=>w(!1),children:"Abbrechen"}),a.jsx(K,{onClick:z,disabled:!b,children:"Hinzufügen"})]})]})]})]})]})}),a.jsx(ce,{children:n?a.jsxs("div",{className:"space-y-3",children:[i.map(I=>a.jsx(G,{children:a.jsxs(ce,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold",children:I.resident_name}),a.jsx("p",{className:"text-sm text-gray-600",children:I.resident_email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Y,{variant:"outline",children:["PGY ",I.pgy_level]}),a.jsx(K,{size:"sm",variant:"outline",onClick:()=>F(I.id),children:a.jsx(lb,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(J0,{className:"h-4 w-4"}),I.department]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rc,{className:"h-4 w-4"}),"Seit: ",new Date(I.joined_at).toLocaleDateString("de-DE")]}),I.notes&&a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:I.notes})]})]})},I.id)),i.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(oj,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keine Mitglieder"}),a.jsx("p",{className:"text-gray-600",children:"Fügen Sie Residents zu diesem Team hinzu."})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(xr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Team auswählen"}),a.jsx("p",{className:"text-gray-600",children:"Wählen Sie ein Team aus, um die Mitglieder zu sehen."})]})})]})]})]})},jq=()=>{const{user:s}=ci(),[e,t]=j.useState([]),[n,r]=j.useState(null),[i,o]=j.useState([]),[l,c]=j.useState({totalResidents:0,activeResidents:0,totalProcedures:0,averageProgress:0,needsAttention:0}),[d,h]=j.useState(!0),[f,m]=j.useState(null);j.useEffect(()=>{s&&p()},[s]);const p=async()=>{var g;try{h(!0),m(null);const{data:y,error:b}=await se.rpc("get_supervisor_residents",{supervisor_user_id:s==null?void 0:s.id});if(b){console.error("Error loading residents:",b),m("Fehler beim Laden der Residents");return}console.log("Raw residents data:",y);const _=Array.isArray(y)?y:y||[];console.log("Parsed residents:",_),t(_);const S={totalResidents:(_==null?void 0:_.length)||0,activeResidents:((g=_==null?void 0:_.filter(A=>A.last_activity))==null?void 0:g.length)||0,totalProcedures:(_==null?void 0:_.reduce((A,C)=>A+(C.total_procedures||0),0))||0,averageProgress:0,needsAttention:0};c(S)}catch(y){console.error("Error in loadSupervisorData:",y),m("Fehler beim Laden der Supervisor-Daten")}finally{h(!1)}},x=async g=>{try{const{data:y,error:b}=await se.rpc("get_resident_progress_summary",{resident_user_id:g});if(b){console.error("Error loading resident progress:",b);return}o(y||[])}catch(y){console.error("Error in loadResidentProgress:",y)}},v=g=>{r(g),x(g.resident_id)},w=g=>g>=80?"text-green-600":g>=60?"text-yellow-600":"text-red-600";return d?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[a.jsx(Fs,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Lade Supervisor-Dashboard..."})]})})})]}):f?a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[a.jsx(Fs,{}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs(ti,{className:"max-w-2xl mx-auto",children:[a.jsx(Xi,{className:"h-4 w-4"}),a.jsx(si,{children:f})]})})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[a.jsx(Fs,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Supervisor Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Überblick über Ihre Residents und deren Fortschritt"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(xr,{className:"h-5 w-5 text-blue-600"}),"Team Übersicht"]})}),a.jsxs(ce,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Team Größe"}),a.jsx("span",{className:"text-2xl font-bold",children:l.totalResidents})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Aktive Residents"}),a.jsx("span",{className:"text-lg font-semibold text-green-600",children:l.activeResidents})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:"Gesamt Prozeduren"}),a.jsx("span",{className:"text-lg font-semibold text-blue-600",children:l.totalProcedures})]})]})]}),a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(Uf,{className:"h-5 w-5 text-green-600"}),"Fortschritt"]})}),a.jsxs(ce,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Team-Durchschnitt"}),a.jsxs("span",{className:"font-semibold",children:[Math.round(l.averageProgress),"%"]})]}),a.jsx(ql,{value:l.averageProgress,className:"h-2"})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{children:"Benötigt Aufmerksamkeit"}),a.jsx("span",{className:`font-semibold ${l.needsAttention>0?"text-red-600":"text-green-600"}`,children:l.needsAttention})]})]})]}),a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{children:"Schnellaktionen"})}),a.jsxs(ce,{className:"space-y-3",children:[a.jsxs(K,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(VT,{className:"h-4 w-4 mr-2"}),"Resident hinzufügen"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(Ns,{className:"h-4 w-4 mr-2"}),"Bericht exportieren"]}),a.jsxs(K,{variant:"outline",size:"sm",className:"w-full justify-start",children:[a.jsx(Sv,{className:"h-4 w-4 mr-2"}),"Einstellungen"]})]})]})]}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs(G,{children:[a.jsxs(Ae,{children:[a.jsxs(ke,{className:"flex items-center gap-2",children:[a.jsx(hS,{className:"h-5 w-5 text-purple-600"}),"Ihre Residents"]}),a.jsx(Qr,{children:"Klicken Sie auf einen Resident, um detaillierte Milestone-Informationen zu sehen"})]}),a.jsx(ce,{children:a.jsx("div",{className:"space-y-6",children:e.map(g=>{var y;return a.jsx(G,{className:`cursor-pointer transition-all hover:shadow-lg border-l-4 ${(n==null?void 0:n.user_id)===g.user_id?"border-l-blue-500 bg-blue-50/50":"border-l-gray-200"}`,onClick:()=>v(g),children:a.jsx(ce,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:((y=g.full_name)==null?void 0:y.split(" ").map(b=>b[0]).join(""))||"R"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:g.full_name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(Y,{variant:"outline",className:"bg-blue-50 text-blue-700",children:["PGY ",g.pgy_level]}),a.jsx("span",{className:"text-sm text-gray-600",children:g.department})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Prozeduren"}),a.jsx("span",{className:"font-semibold",children:g.total_procedures||0})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Klinik"}),a.jsx("span",{className:"font-semibold",children:g.hospital})]})]})]}),a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(js,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prozeduren"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"Q4 2024"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[20,35,45,50,55,60,65,70,75,78,82,85].map((b,_)=>a.jsx("div",{className:"bg-gradient-to-t from-green-500 to-green-400 rounded-sm flex-1",style:{height:`${b}%`}},_))})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"Jan"}),a.jsx("span",{children:"Jun"}),a.jsx("span",{children:"Dez"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Prüfungen"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"3/4"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((b,_)=>a.jsx("div",{className:`rounded-sm flex-1 ${_<9?"bg-gradient-to-t from-blue-500 to-blue-400":"bg-gray-200"}`,style:{height:_<9?"100%":"20%"}},_))})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"Q1"}),a.jsx("span",{children:"Q2"}),a.jsx("span",{children:"Q3"}),a.jsx("span",{children:"Q4"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tn,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Publikationen"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"2/3"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((b,_)=>a.jsx("div",{className:`rounded-sm flex-1 ${_<8?"bg-gradient-to-t from-purple-500 to-purple-400":"bg-gray-200"}`,style:{height:_<8?"100%":"20%"}},_))})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"h-4 w-4 text-amber-600"}),a.jsx("span",{className:"text-sm font-medium",children:"Awards"})]}),a.jsx(Y,{variant:"outline",className:"text-xs",children:"1/2"})]}),a.jsx("div",{className:"h-16 bg-gray-100 rounded-lg p-2",children:a.jsx("div",{className:"h-full flex items-end gap-1",children:[0,0,0,0,0,0,0,0,0,0,0,0].map((b,_)=>a.jsx("div",{className:`rounded-sm flex-1 ${_<6?"bg-gradient-to-t from-amber-500 to-amber-400":"bg-gray-200"}`,style:{height:_<6?"100%":"20%"}},_))})})]})]})]})]})})},g.user_id)})})})]})})]}),a.jsxs(_r,{defaultValue:"team",className:"space-y-6",children:[a.jsxs(Jn,{children:[a.jsx(Ue,{value:"team",children:"Team Übersicht"}),a.jsx(Ue,{value:"management",children:"Team Management"}),a.jsx(Ue,{value:"progress",children:"Fortschritt Details"}),a.jsx(Ue,{value:"reports",children:"Berichte"})]}),a.jsx(He,{value:"team",className:"space-y-6",children:a.jsxs(G,{children:[a.jsxs(Ae,{children:[a.jsx(ke,{children:"Ihre Residents"}),a.jsx(Qr,{children:"Klicken Sie auf einen Resident, um detaillierte Informationen zu sehen"})]}),a.jsx(ce,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(g=>a.jsx(G,{className:`cursor-pointer transition-all hover:shadow-md ${(n==null?void 0:n.resident_id)===g.resident_id?"ring-2 ring-blue-500":""}`,onClick:()=>v(g),children:a.jsxs(ce,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"font-semibold text-lg",children:g.resident_name}),a.jsxs(Y,{variant:"outline",children:["PGY ",g.pgy_level]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(oj,{className:"h-4 w-4"}),g.total_procedures," Prozeduren"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hs,{className:"h-4 w-4"}),g.last_activity?`Letzte Aktivität: ${new Date(g.last_activity).toLocaleDateString("de-DE")}`:"Keine Aktivität"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rc,{className:"h-4 w-4"}),"Seit: ",new Date(g.joined_at).toLocaleDateString("de-DE")]})]})]})},g.resident_id))})})]})}),a.jsx(He,{value:"management",className:"space-y-6",children:a.jsx(wq,{})}),a.jsx(He,{value:"progress",className:"space-y-6",children:n?a.jsx("div",{className:"space-y-6",children:a.jsxs(G,{children:[a.jsxs(Ae,{children:[a.jsxs(ke,{children:["Fortschritt: ",n.resident_name]}),a.jsx(Qr,{children:"Detaillierte Übersicht über FMH-Module"})]}),a.jsx(ce,{children:a.jsx("div",{className:"space-y-4",children:i.map(g=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"font-semibold",children:g.module_name}),a.jsxs(Y,{className:w(g.progress_percentage),children:[Math.round(g.progress_percentage),"%"]})]}),a.jsx(ql,{value:g.progress_percentage,className:"mb-2"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Verantwortlich:"}),a.jsx("div",{className:"font-semibold",children:g.responsible_count})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Instruierend:"}),a.jsx("div",{className:"font-semibold",children:g.instructing_count})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Assistent:"}),a.jsx("div",{className:"font-semibold",children:g.assistant_count})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600",children:"Minimum:"}),a.jsx("div",{className:"font-semibold",children:g.total_minimum})]})]})]},g.module_key))})})]})}):a.jsx(G,{children:a.jsxs(ce,{className:"p-8 text-center",children:[a.jsx(BT,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Wählen Sie einen Resident"}),a.jsx("p",{className:"text-gray-600",children:"Klicken Sie auf einen Resident in der Team-Übersicht, um dessen Fortschritt zu sehen."})]})})}),a.jsx(He,{value:"reports",className:"space-y-6",children:a.jsxs(G,{children:[a.jsxs(Ae,{children:[a.jsx(ke,{children:"Berichte & Dokumentation"}),a.jsx(Qr,{children:"Erstellen Sie Berichte über den Fortschritt Ihrer Residents"})]}),a.jsx(ce,{children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ns,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Berichte-Funktion"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Diese Funktion wird in der nächsten Version implementiert."}),a.jsx(K,{disabled:!0,children:"Bericht erstellen"})]})})]})})]})]})]})},_q=[{icon:js,title:"FMH-konforme Prozeduren-Tracking",description:"Vollständige Dokumentation aller chirurgischen Eingriffe nach FMH-Standards mit automatischer Kategorisierung und Fortschrittsverfolgung.",benefits:["Automatische Kategorisierung","FMH-Mindestanforderungen","Echtzeit-Fortschritt"],color:"text-activity-mint"},{icon:tn,title:"Intelligentes Kurs-Management",description:"Verwalten Sie Pflichtkurse, Fortbildungen und Examen mit automatischen Erinnerungen und Fortschritts-Tracking.",benefits:["Kurs-Timeline","Automatische Erinnerungen","Zertifikat-Verwaltung"],color:"text-activity-coral"},{icon:Ns,title:"Publikations-Portfolio",description:"Dokumentieren Sie Ihre wissenschaftlichen Arbeiten und verfolgen Sie Ihren akademischen Fortschritt.",benefits:["Google Scholar Integration","Impact-Tracking","Kollaborations-Netzwerk"],color:"text-activity-lavender"},{icon:_s,title:"Awards & Auszeichnungen",description:"Sammeln und präsentieren Sie Ihre Erfolge und Auszeichnungen in einem professionellen Portfolio.",benefits:["Portfolio-Ansicht","Erfolgs-Tracking","Networking-Tools"],color:"text-activity-amber"},{icon:BT,title:"Analytics & Insights",description:"Detaillierte Analysen Ihres Ausbildungsfortschritts mit Gap-Analysen und Empfehlungen.",benefits:["Gap-Analysen","Trend-Vorhersagen","Personalisierte Empfehlungen"],color:"text-blue-500"},{icon:v$,title:"Datenschutz & Sicherheit",description:"Höchste Sicherheitsstandards für Ihre sensiblen medizinischen Daten mit DSGVO-Konformität.",benefits:["End-to-End Verschlüsselung","DSGVO-konform","Sichere Cloud-Speicherung"],color:"text-green-500"}],Nq=[{icon:w$,title:"Echtzeit-Synchronisation",description:"Alle Daten werden in Echtzeit zwischen Geräten synchronisiert."},{icon:u$,title:"Multi-Platform",description:"Funktioniert auf Desktop, Tablet und Smartphone."},{icon:l$,title:"Robuste Datenbank",description:"Supabase-basierte, skalierbare Datenbank-Architektur."},{icon:ij,title:"Sichere Authentifizierung",description:"Moderne OAuth-Integration mit Supabase Auth."}],Sq=[{name:"Resident",price:"Kostenlos",period:"Für Einzelpersonen",features:["Basis Prozeduren-Tracking","Kurs-Management","Einfache Analytics","Community-Support"],popular:!1},{name:"Professional",price:"CHF 29",period:"pro Monat",features:["Alle Resident Features","Erweiterte Analytics","Publikations-Portfolio","Awards-Tracking","Priority Support","API-Zugang"],popular:!0},{name:"Institution",price:"CHF 99",period:"pro Monat",features:["Alle Professional Features","Multi-User Management","Institutionelle Dashboards","Custom Branding","Dedicated Support","On-Premise Option"],popular:!1}],Aq=()=>a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsxs("main",{children:[a.jsx("section",{className:"py-20 bg-gradient-to-br from-primary/5 to-secondary/5",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-card-foreground mb-6",children:"Alle Features auf einen Blick"}),a.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Entdecken Sie die umfassenden Funktionen von ResidentTrack, die Ihre chirurgische Ausbildung revolutionieren."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(K,{size:"lg",className:"bg-gradient-medical",children:["Jetzt starten",a.jsx(nj,{className:"ml-2 h-4 w-4"})]}),a.jsx(K,{size:"lg",variant:"outline",children:"Demo ansehen"})]})]})})}),a.jsx("section",{className:"py-20",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:a.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/trainingimage.png",alt:"Features Hero",className:"w-full h-auto object-cover"})})}),a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Kernfunktionen"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Alles was Sie für eine erfolgreiche chirurgische Ausbildung benötigen"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:_q.map((s,e)=>a.jsx(G,{className:"medical-card p-6 hover:shadow-elegant transition-all duration-300",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 rounded-medical bg-gradient-to-br from-primary/10 to-secondary/10",children:a.jsx(s.icon,{className:`h-6 w-6 ${s.color}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-3",children:s.title}),a.jsx("p",{className:"text-muted-foreground mb-4",children:s.description}),a.jsx("div",{className:"space-y-2",children:s.benefits.map((t,n)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Vi,{className:"h-4 w-4 text-green-500"}),a.jsx("span",{className:"text-sm text-muted-foreground",children:t})]},n))})]})]})},e))})]})}),a.jsx("section",{className:"py-20 bg-muted/30",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("div",{className:"max-w-6xl mx-auto mb-12",children:a.jsx("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/courseresidentsimage.png",alt:"Kurse und Fortbildungen",className:"w-full h-auto object-cover"})})}),a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Technische Highlights"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Moderne Technologie für optimale Performance und Sicherheit"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Nq.map((s,e)=>a.jsxs(G,{className:"medical-card p-6 text-center",children:[a.jsx("div",{className:"p-4 bg-gradient-to-br from-primary/10 to-secondary/10 rounded-medical w-fit mx-auto mb-4",children:a.jsx(s.icon,{className:"h-8 w-8 text-primary"})}),a.jsx("h3",{className:"text-lg font-semibold text-card-foreground mb-2",children:s.title}),a.jsx("p",{className:"text-muted-foreground text-sm",children:s.description})]},e))})]})}),a.jsx("section",{className:"py-20",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Preise"}),a.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Wählen Sie den Plan, der zu Ihren Bedürfnissen passt"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:Sq.map((s,e)=>a.jsxs(G,{className:`medical-card p-8 relative ${s.popular?"ring-2 ring-primary":""}`,children:[s.popular&&a.jsx(Y,{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gradient-medical",children:"Beliebt"}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-card-foreground mb-2",children:s.name}),a.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:s.price}),a.jsx("p",{className:"text-muted-foreground",children:s.period})]}),a.jsx("ul",{className:"space-y-4 mb-8",children:s.features.map((t,n)=>a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(Vi,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),a.jsx("span",{className:"text-muted-foreground",children:t})]},n))}),a.jsx(K,{className:`w-full ${s.popular?"bg-gradient-medical":""}`,variant:s.popular?"default":"outline",children:s.name==="Resident"?"Kostenlos starten":"Plan wählen"})]},e))})]})}),a.jsx("section",{className:"py-20 bg-gradient-to-br from-primary/10 to-secondary/10",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Bereit für den nächsten Schritt?"}),a.jsx("p",{className:"text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Starten Sie noch heute mit ResidentTrack und revolutionieren Sie Ihre chirurgische Ausbildung."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs(K,{size:"lg",className:"bg-gradient-medical",children:["Kostenlos registrieren",a.jsx(nj,{className:"ml-2 h-4 w-4"})]}),a.jsx(K,{size:"lg",variant:"outline",children:"Kontakt aufnehmen"})]})]})})]})]}),Eq=()=>a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsx("main",{className:"container mx-auto px-4 py-12",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs(G,{className:"medical-card",children:[a.jsx(Ae,{children:a.jsx(ke,{className:"text-card-foreground",children:"Kontakt aufnehmen"})}),a.jsxs(ce,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Ee,{placeholder:"Vorname"}),a.jsx(Ee,{placeholder:"Nachname"})]}),a.jsx(Ee,{type:"email",placeholder:"E-Mail"}),a.jsx(Ee,{placeholder:"Betreff"}),a.jsx(Gl,{placeholder:"Ihre Nachricht",className:"min-h-[140px]"}),a.jsx(K,{className:"w-full",children:"Nachricht senden"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(G,{className:"medical-card overflow-hidden",children:[a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/residents-image-2.png",alt:"Kontakt - ResidentTrack",className:"w-full h-56 object-cover"}),a.jsx(ce,{className:"pt-4",children:a.jsx("p",{className:"text-muted-foreground",children:"Wir freuen uns auf Ihre Nachricht. Unser Team meldet sich in der Regel innerhalb von 24 Stunden."})})]}),a.jsxs(G,{className:"medical-card overflow-hidden",children:[a.jsx("img",{src:"https://samiavril-cmyk.github.io/swiss-med-track/awardsresidents2-image.png",alt:"Unser Team",className:"w-full h-56 object-cover"}),a.jsx(ce,{className:"pt-4",children:a.jsx("p",{className:"text-muted-foreground",children:"ResidentTrack – entwickelt von Chirurg:innen für Chirurg:innen."})})]})]})]})})]}),Cq=({currentImageUrl:s,onImageUploaded:e,onImageRemoved:t})=>{const[n,r]=j.useState(!1),[i,o]=j.useState(s||null),l=async d=>{var f;const h=(f=d.target.files)==null?void 0:f[0];if(h){if(!h.type.startsWith("image/")){Ie.error("Bitte wählen Sie eine Bilddatei aus");return}if(h.size>10*1024*1024){Ie.error("Datei ist zu groß. Maximal 10MB erlaubt.");return}r(!0);try{const m=h.name.split(".").pop(),p=`${Date.now()}-${Math.random().toString(36).substring(7)}.${m}`,{data:x,error:v}=await se.storage.from("course-images").upload(p,h,{cacheControl:"3600",upsert:!1});if(v)throw v;const{data:{publicUrl:w}}=se.storage.from("course-images").getPublicUrl(x.path);o(w),e(w),Ie.success("Bild erfolgreich hochgeladen")}catch(m){console.error("Error uploading image:",m),Ie.error("Fehler beim Hochladen des Bildes")}finally{r(!1),d.target.value=""}}},c=()=>{o(null),t()};return a.jsxs("div",{className:"space-y-3",children:[a.jsx(he,{className:"text-foreground",children:"Kursbild"}),i?a.jsxs("div",{className:"relative w-full h-48 bg-muted rounded-lg overflow-hidden border-2 border-dashed border-border",children:[a.jsx("img",{src:i,alt:"Kurs Vorschau",className:"w-full h-full object-cover"}),a.jsx(K,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:c,children:a.jsx(ic,{className:"h-4 w-4"})})]}):a.jsxs("div",{className:"w-full h-48 bg-muted rounded-lg border-2 border-dashed border-border flex flex-col items-center justify-center gap-3",children:[a.jsx(f$,{className:"h-12 w-12 text-muted-foreground"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Kein Bild ausgewählt"}),a.jsx(he,{htmlFor:"image-upload",className:"cursor-pointer",children:a.jsx(K,{type:"button",variant:"outline",disabled:n,asChild:!0,children:a.jsxs("span",{children:[a.jsx(cb,{className:"h-4 w-4 mr-2"}),n?"Hochladen...":"Bild auswählen"]})})})]})]}),a.jsx(Ee,{id:"image-upload",type:"file",accept:"image/*",onChange:l,disabled:n,className:"hidden"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützte Formate: JPG, PNG, WebP, GIF (max. 10MB)"})]})};function qe(s){const e=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&e==="[object Date]"?new s.constructor(+s):typeof s=="number"||e==="[object Number]"||typeof s=="string"||e==="[object String]"?new Date(s):new Date(NaN)}function Zn(s,e){return s instanceof Date?new s.constructor(e):new Date(e)}function Qs(s,e){const t=qe(s);return isNaN(e)?Zn(s,NaN):(e&&t.setDate(t.getDate()+e),t)}function ai(s,e){const t=qe(s);if(isNaN(e))return Zn(s,NaN);if(!e)return t;const n=t.getDate(),r=Zn(s,t.getTime());r.setMonth(t.getMonth()+e+1,0);const i=r.getDate();return n>=i?r:(t.setFullYear(r.getFullYear(),r.getMonth(),n),t)}const uA=6048e5,kq=864e5;let Pq={};function zv(){return Pq}function ta(s,e){var l,c,d,h;const t=zv(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=qe(s),i=r.getDay(),o=(i<n?7:0)+i-n;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function cu(s){return ta(s,{weekStartsOn:1})}function t4(s){const e=qe(s),t=e.getFullYear(),n=Zn(s,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const r=cu(n),i=Zn(s,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const o=cu(i);return e.getTime()>=r.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function qf(s){const e=qe(s);return e.setHours(0,0,0,0),e}function jy(s){const e=qe(s),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+s-+t}function qi(s,e){const t=qf(s),n=qf(e),r=+t-jy(t),i=+n-jy(n);return Math.round((r-i)/kq)}function Tq(s){const e=t4(s),t=Zn(s,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),cu(t)}function lN(s,e){const t=e*7;return Qs(s,t)}function Rq(s,e){return ai(s,e*12)}function Mq(s){let e;return s.forEach(function(t){const n=qe(t);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function Iq(s){let e;return s.forEach(t=>{const n=qe(t);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function xn(s,e){const t=qf(s),n=qf(e);return+t==+n}function hA(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function Dq(s){if(!hA(s)&&typeof s!="number")return!1;const e=qe(s);return!isNaN(Number(e))}function Fp(s,e){const t=qe(s),n=qe(e),r=t.getFullYear()-n.getFullYear(),i=t.getMonth()-n.getMonth();return r*12+i}function Oq(s,e,t){const n=ta(s,t),r=ta(e,t),i=+n-jy(n),o=+r-jy(r);return Math.round((i-o)/uA)}function fA(s){const e=qe(s),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function jn(s){const e=qe(s);return e.setDate(1),e.setHours(0,0,0,0),e}function s4(s){const e=qe(s),t=Zn(s,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function mA(s,e){var l,c,d,h;const t=zv(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,r=qe(s),i=r.getDay(),o=(i<n?-7:0)+6-(i-n);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function n4(s){return mA(s,{weekStartsOn:1})}const Lq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fq=(s,e,t)=>{let n;const r=Lq[s];return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function mh(s){return(e={})=>{const t=e.width?String(e.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const $q={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zq={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Bq={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Uq={date:mh({formats:$q,defaultWidth:"full"}),time:mh({formats:zq,defaultWidth:"full"}),dateTime:mh({formats:Bq,defaultWidth:"full"})},Hq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wq=(s,e,t,n)=>Hq[s];function Hi(s){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let r;if(n==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,l=t!=null&&t.width?String(t.width):o;r=s.formattingValues[l]||s.formattingValues[o]}else{const o=s.defaultWidth,l=t!=null&&t.width?String(t.width):s.defaultWidth;r=s.values[l]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(e):e;return r[i]}}const Vq={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gq={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Kq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Yq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Xq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qq=(s,e)=>{const t=Number(s),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Jq={ordinalNumber:Qq,era:Hi({values:Vq,defaultWidth:"wide"}),quarter:Hi({values:Gq,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Hi({values:qq,defaultWidth:"wide"}),day:Hi({values:Kq,defaultWidth:"wide"}),dayPeriod:Hi({values:Yq,defaultWidth:"wide",formattingValues:Xq,defaultFormattingWidth:"wide"})};function Wi(s){return(e,t={})=>{const n=t.width,r=n&&s.matchPatterns[n]||s.matchPatterns[s.defaultMatchWidth],i=e.match(r);if(!i)return null;const o=i[0],l=n&&s.parsePatterns[n]||s.parsePatterns[s.defaultParseWidth],c=Array.isArray(l)?eK(l,f=>f.test(o)):Zq(l,f=>f.test(o));let d;d=s.valueCallback?s.valueCallback(c):c,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function Zq(s,e){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&e(s[t]))return t}function eK(s,e){for(let t=0;t<s.length;t++)if(e(s[t]))return t}function r4(s){return(e,t={})=>{const n=e.match(s.matchPattern);if(!n)return null;const r=n[0],i=e.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=e.slice(r.length);return{value:o,rest:l}}}const tK=/^(\d+)(th|st|nd|rd)?/i,sK=/\d+/i,nK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rK={any:[/^b/i,/^(a|c)/i]},iK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},aK={any:[/1/i,/2/i,/3/i,/4/i]},oK={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},uK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fK={ordinalNumber:r4({matchPattern:tK,parsePattern:sK,valueCallback:s=>parseInt(s,10)}),era:Wi({matchPatterns:nK,defaultMatchWidth:"wide",parsePatterns:rK,defaultParseWidth:"any"}),quarter:Wi({matchPatterns:iK,defaultMatchWidth:"wide",parsePatterns:aK,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Wi({matchPatterns:oK,defaultMatchWidth:"wide",parsePatterns:lK,defaultParseWidth:"any"}),day:Wi({matchPatterns:cK,defaultMatchWidth:"wide",parsePatterns:dK,defaultParseWidth:"any"}),dayPeriod:Wi({matchPatterns:uK,defaultMatchWidth:"any",parsePatterns:hK,defaultParseWidth:"any"})},i4={code:"en-US",formatDistance:Fq,formatLong:Uq,formatRelative:Wq,localize:Jq,match:fK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mK(s){const e=qe(s);return qi(e,s4(e))+1}function a4(s){const e=qe(s),t=+cu(e)-+Tq(e);return Math.round(t/uA)+1}function o4(s,e){var h,f,m,p;const t=qe(s),n=t.getFullYear(),r=zv(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=Zn(s,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=ta(o,e),c=Zn(s,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=ta(c,e);return t.getTime()>=l.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function pK(s,e){var l,c,d,h;const t=zv(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,r=o4(s,e),i=Zn(s,0);return i.setFullYear(r,0,n),i.setHours(0,0,0,0),ta(i,e)}function l4(s,e){const t=qe(s),n=+ta(t,e)-+pK(t,e);return Math.round(n/uA)+1}function Je(s,e){const t=s<0?"-":"",n=Math.abs(s).toString().padStart(e,"0");return t+n}const No={y(s,e){const t=s.getFullYear(),n=t>0?t:1-t;return Je(e==="yy"?n%100:n,e.length)},M(s,e){const t=s.getMonth();return e==="M"?String(t+1):Je(t+1,2)},d(s,e){return Je(s.getDate(),e.length)},a(s,e){const t=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(s,e){return Je(s.getHours()%12||12,e.length)},H(s,e){return Je(s.getHours(),e.length)},m(s,e){return Je(s.getMinutes(),e.length)},s(s,e){return Je(s.getSeconds(),e.length)},S(s,e){const t=e.length,n=s.getMilliseconds(),r=Math.trunc(n*Math.pow(10,t-3));return Je(r,e.length)}},Pu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ik={G:function(s,e,t){const n=s.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(s,e,t){if(e==="yo"){const n=s.getFullYear(),r=n>0?n:1-n;return t.ordinalNumber(r,{unit:"year"})}return No.y(s,e)},Y:function(s,e,t,n){const r=o4(s,n),i=r>0?r:1-r;if(e==="YY"){const o=i%100;return Je(o,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Je(i,e.length)},R:function(s,e){const t=t4(s);return Je(t,e.length)},u:function(s,e){const t=s.getFullYear();return Je(t,e.length)},Q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Je(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(s,e,t){const n=Math.ceil((s.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Je(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(s,e,t){const n=s.getMonth();switch(e){case"M":case"MM":return No.M(s,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(s,e,t){const n=s.getMonth();switch(e){case"L":return String(n+1);case"LL":return Je(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(s,e,t,n){const r=l4(s,n);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Je(r,e.length)},I:function(s,e,t){const n=a4(s);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Je(n,e.length)},d:function(s,e,t){return e==="do"?t.ordinalNumber(s.getDate(),{unit:"date"}):No.d(s,e)},D:function(s,e,t){const n=mK(s);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Je(n,e.length)},E:function(s,e,t){const n=s.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(s,e,t,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Je(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(s,e,t,n){const r=s.getDay(),i=(r-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Je(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(s,e,t){const n=s.getDay(),r=n===0?7:n;switch(e){case"i":return String(r);case"ii":return Je(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(s,e,t){const r=s.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(s,e,t){const n=s.getHours();let r;switch(n===12?r=Pu.noon:n===0?r=Pu.midnight:r=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(s,e,t){const n=s.getHours();let r;switch(n>=17?r=Pu.evening:n>=12?r=Pu.afternoon:n>=4?r=Pu.morning:r=Pu.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(s,e,t){if(e==="ho"){let n=s.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return No.h(s,e)},H:function(s,e,t){return e==="Ho"?t.ordinalNumber(s.getHours(),{unit:"hour"}):No.H(s,e)},K:function(s,e,t){const n=s.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Je(n,e.length)},k:function(s,e,t){let n=s.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Je(n,e.length)},m:function(s,e,t){return e==="mo"?t.ordinalNumber(s.getMinutes(),{unit:"minute"}):No.m(s,e)},s:function(s,e,t){return e==="so"?t.ordinalNumber(s.getSeconds(),{unit:"second"}):No.s(s,e)},S:function(s,e){return No.S(s,e)},X:function(s,e,t){const n=s.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Ok(n);case"XXXX":case"XX":return _c(n);case"XXXXX":case"XXX":default:return _c(n,":")}},x:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"x":return Ok(n);case"xxxx":case"xx":return _c(n);case"xxxxx":case"xxx":default:return _c(n,":")}},O:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Dk(n,":");case"OOOO":default:return"GMT"+_c(n,":")}},z:function(s,e,t){const n=s.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Dk(n,":");case"zzzz":default:return"GMT"+_c(n,":")}},t:function(s,e,t){const n=Math.trunc(s.getTime()/1e3);return Je(n,e.length)},T:function(s,e,t){const n=s.getTime();return Je(n,e.length)}};function Dk(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),r=Math.trunc(n/60),i=n%60;return i===0?t+String(r):t+String(r)+e+Je(i,2)}function Ok(s,e){return s%60===0?(s>0?"-":"+")+Je(Math.abs(s)/60,2):_c(s,e)}function _c(s,e=""){const t=s>0?"-":"+",n=Math.abs(s),r=Je(Math.trunc(n/60),2),i=Je(n%60,2);return t+r+e+i}const Lk=(s,e)=>{switch(s){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},c4=(s,e)=>{switch(s){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},gK=(s,e)=>{const t=s.match(/(P+)(p+)?/)||[],n=t[1],r=t[2];if(!r)return Lk(s,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Lk(n,e)).replace("{{time}}",c4(r,e))},vK={p:c4,P:gK},xK=/^D+$/,yK=/^Y+$/,bK=["D","DD","YY","YYYY"];function wK(s){return xK.test(s)}function jK(s){return yK.test(s)}function _K(s,e,t){const n=NK(s,e,t);if(console.warn(n),bK.includes(s))throw new RangeError(n)}function NK(s,e,t){const n=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const SK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EK=/^'([^]*?)'?$/,CK=/''/g,kK=/[a-zA-Z]/;function Ji(s,e,t){var h,f,m,p,x,v,w,g;const n=zv(),r=(t==null?void 0:t.locale)??n.locale??i4,i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(m=n.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((v=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((g=(w=n.locale)==null?void 0:w.options)==null?void 0:g.weekStartsOn)??0,l=qe(s);if(!Dq(l))throw new RangeError("Invalid time value");let c=e.match(AK).map(y=>{const b=y[0];if(b==="p"||b==="P"){const _=vK[b];return _(y,r.formatLong)}return y}).join("").match(SK).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:PK(y)};if(Ik[b])return{isToken:!0,value:y};if(b.match(kK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});r.localize.preprocessor&&(c=r.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:r};return c.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&jK(b)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&wK(b))&&_K(b,e,String(s));const _=Ik[b[0]];return _(l,b,r.localize,d)}).join("")}function PK(s){const e=s.match(EK);return e?e[1].replace(CK,"'"):s}function TK(s){const e=qe(s),t=e.getFullYear(),n=e.getMonth(),r=Zn(s,0);return r.setFullYear(t,n+1,0),r.setHours(0,0,0,0),r.getDate()}function RK(s){return Math.trunc(+qe(s)/1e3)}function MK(s){const e=qe(s),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function IK(s,e){return Oq(MK(s),jn(s),e)+1}function cN(s,e){const t=qe(s),n=qe(e);return t.getTime()>n.getTime()}function d4(s,e){const t=qe(s),n=qe(e);return+t<+n}function pA(s,e){const t=qe(s),n=qe(e);return t.getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()}function DK(s,e){const t=qe(s),n=qe(e);return t.getFullYear()===n.getFullYear()}function Zw(s,e){return Qs(s,-e)}function e1(s,e){const t=qe(s),n=t.getFullYear(),r=t.getDate(),i=Zn(s,0);i.setFullYear(n,e,15),i.setHours(0,0,0,0);const o=TK(i);return t.setMonth(e,Math.min(r,o)),t}function Fk(s,e){const t=qe(s);return isNaN(+t)?Zn(s,NaN):(t.setFullYear(e),t)}const $k={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},OK=(s,e,t)=>{let n;const r=t!=null&&t.addSuffix?$k[s].withPreposition:$k[s].standalone;return typeof r=="string"?n=r:e===1?n=r.one:n=r.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:"vor "+n:n},LK={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},FK={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},$K={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},zK={date:mh({formats:LK,defaultWidth:"full"}),time:mh({formats:FK,defaultWidth:"full"}),dateTime:mh({formats:$K,defaultWidth:"full"})},BK={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},UK=(s,e,t,n)=>BK[s],HK={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},WK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},dN={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},VK={narrow:dN.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:dN.wide},GK={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},qK={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},KK={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},YK=s=>Number(s)+".",XK={ordinalNumber:YK,era:Hi({values:HK,defaultWidth:"wide"}),quarter:Hi({values:WK,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Hi({values:dN,formattingValues:VK,defaultWidth:"wide"}),day:Hi({values:GK,defaultWidth:"wide"}),dayPeriod:Hi({values:qK,defaultWidth:"wide",formattingValues:KK,defaultFormattingWidth:"wide"})},QK=/^(\d+)(\.)?/i,JK=/\d+/i,ZK={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},eY={any:[/^v/i,/^n/i]},tY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},sY={any:[/1/i,/2/i,/3/i,/4/i]},nY={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},rY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},iY={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},aY={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},oY={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},lY={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},cY={ordinalNumber:r4({matchPattern:QK,parsePattern:JK,valueCallback:s=>parseInt(s)}),era:Wi({matchPatterns:ZK,defaultMatchWidth:"wide",parsePatterns:eY,defaultParseWidth:"any"}),quarter:Wi({matchPatterns:tY,defaultMatchWidth:"wide",parsePatterns:sY,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Wi({matchPatterns:nY,defaultMatchWidth:"wide",parsePatterns:rY,defaultParseWidth:"any"}),day:Wi({matchPatterns:iY,defaultMatchWidth:"wide",parsePatterns:aY,defaultParseWidth:"any"}),dayPeriod:Wi({matchPatterns:oY,defaultMatchWidth:"wide",parsePatterns:lY,defaultParseWidth:"any"})},t1={code:"de",formatDistance:OK,formatLong:zK,formatRelative:UK,localize:XK,match:cY,options:{weekStartsOn:1,firstWeekContainsDate:4}};var xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},xe.apply(this,arguments)};function dY(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t}function u4(s,e,t){for(var n=0,r=e.length,i;n<r;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return s.concat(i||Array.prototype.slice.call(e))}function Bv(s){return s.mode==="multiple"}function Uv(s){return s.mode==="range"}function $b(s){return s.mode==="single"}var uY={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function hY(s,e){return Ji(s,"LLLL y",e)}function fY(s,e){return Ji(s,"d",e)}function mY(s,e){return Ji(s,"LLLL",e)}function pY(s){return"".concat(s)}function gY(s,e){return Ji(s,"cccccc",e)}function vY(s,e){return Ji(s,"yyyy",e)}var xY=Object.freeze({__proto__:null,formatCaption:hY,formatDay:fY,formatMonthCaption:mY,formatWeekNumber:pY,formatWeekdayName:gY,formatYearCaption:vY}),yY=function(s,e,t){return Ji(s,"do MMMM (EEEE)",t)},bY=function(){return"Month: "},wY=function(){return"Go to next month"},jY=function(){return"Go to previous month"},_Y=function(s,e){return Ji(s,"cccc",e)},NY=function(s){return"Week n. ".concat(s)},SY=function(){return"Year: "},AY=Object.freeze({__proto__:null,labelDay:yY,labelMonthDropdown:bY,labelNext:wY,labelPrevious:jY,labelWeekNumber:NY,labelWeekday:_Y,labelYearDropdown:SY});function EY(){var s="buttons",e=uY,t=i4,n={},r={},i=1,o={},l=new Date;return{captionLayout:s,classNames:e,formatters:xY,labels:AY,locale:t,modifiersClassNames:n,modifiers:r,numberOfMonths:i,styles:o,today:l,mode:"default"}}function CY(s){var e=s.fromYear,t=s.toYear,n=s.fromMonth,r=s.toMonth,i=s.fromDate,o=s.toDate;return n?i=jn(n):e&&(i=new Date(e,0,1)),r?o=fA(r):t&&(o=new Date(t,11,31)),{fromDate:i?qf(i):void 0,toDate:o?qf(o):void 0}}var h4=j.createContext(void 0);function kY(s){var e,t=s.initialProps,n=EY(),r=CY(t),i=r.fromDate,o=r.toDate,l=(e=t.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;($b(t)||Bv(t)||Uv(t))&&(c=t.onSelect);var d=xe(xe(xe({},n),t),{captionLayout:l,classNames:xe(xe({},n.classNames),t.classNames),components:xe({},t.components),formatters:xe(xe({},n.formatters),t.formatters),fromDate:i,labels:xe(xe({},n.labels),t.labels),mode:t.mode||n.mode,modifiers:xe(xe({},n.modifiers),t.modifiers),modifiersClassNames:xe(xe({},n.modifiersClassNames),t.modifiersClassNames),onSelect:c,styles:xe(xe({},n.styles),t.styles),toDate:o});return a.jsx(h4.Provider,{value:d,children:s.children})}function ct(){var s=j.useContext(h4);if(!s)throw new Error("useDayPicker must be used within a DayPickerProvider.");return s}function f4(s){var e=ct(),t=e.locale,n=e.classNames,r=e.styles,i=e.formatters.formatCaption;return a.jsx("div",{className:n.caption_label,style:r.caption_label,"aria-live":"polite",role:"presentation",id:s.id,children:i(s.displayMonth,{locale:t})})}function PY(s){return a.jsx("svg",xe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},s,{children:a.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function m4(s){var e,t,n=s.onChange,r=s.value,i=s.children,o=s.caption,l=s.className,c=s.style,d=ct(),h=(t=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:PY;return a.jsxs("div",{className:l,style:c,children:[a.jsx("span",{className:d.classNames.vhidden,children:s["aria-label"]}),a.jsx("select",{name:s.name,"aria-label":s["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:r,onChange:n,children:i}),a.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,a.jsx(h,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function TY(s){var e,t=ct(),n=t.fromDate,r=t.toDate,i=t.styles,o=t.locale,l=t.formatters.formatMonthCaption,c=t.classNames,d=t.components,h=t.labels.labelMonthDropdown;if(!n)return a.jsx(a.Fragment,{});if(!r)return a.jsx(a.Fragment,{});var f=[];if(DK(n,r))for(var m=jn(n),p=n.getMonth();p<=r.getMonth();p++)f.push(e1(m,p));else for(var m=jn(new Date),p=0;p<=11;p++)f.push(e1(m,p));var x=function(w){var g=Number(w.target.value),y=e1(jn(s.displayMonth),g);s.onChange(y)},v=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:m4;return a.jsx(v,{name:"months","aria-label":h(),className:c.dropdown_month,style:i.dropdown_month,onChange:x,value:s.displayMonth.getMonth(),caption:l(s.displayMonth,{locale:o}),children:f.map(function(w){return a.jsx("option",{value:w.getMonth(),children:l(w,{locale:o})},w.getMonth())})})}function RY(s){var e,t=s.displayMonth,n=ct(),r=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,h=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,m=[];if(!r)return a.jsx(a.Fragment,{});if(!i)return a.jsx(a.Fragment,{});for(var p=r.getFullYear(),x=i.getFullYear(),v=p;v<=x;v++)m.push(Fk(s4(new Date),v));var w=function(y){var b=Fk(jn(t),Number(y.target.value));s.onChange(b)},g=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:m4;return a.jsx(g,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:w,value:t.getFullYear(),caption:h(t,{locale:o}),children:m.map(function(y){return a.jsx("option",{value:y.getFullYear(),children:h(y,{locale:o})},y.getFullYear())})})}function MY(s,e){var t=j.useState(s),n=t[0],r=t[1],i=e===void 0?n:e;return[i,r]}function IY(s){var e=s.month,t=s.defaultMonth,n=s.today,r=e||t||n||new Date,i=s.toDate,o=s.fromDate,l=s.numberOfMonths,c=l===void 0?1:l;if(i&&Fp(i,r)<0){var d=-1*(c-1);r=ai(i,d)}return o&&Fp(r,o)<0&&(r=o),jn(r)}function DY(){var s=ct(),e=IY(s),t=MY(e,s.month),n=t[0],r=t[1],i=function(o){var l;if(!s.disableNavigation){var c=jn(o);r(c),(l=s.onMonthChange)===null||l===void 0||l.call(s,c)}};return[n,i]}function OY(s,e){for(var t=e.reverseMonths,n=e.numberOfMonths,r=jn(s),i=jn(ai(r,n)),o=Fp(i,r),l=[],c=0;c<o;c++){var d=ai(r,c);l.push(d)}return t&&(l=l.reverse()),l}function LY(s,e){if(!e.disableNavigation){var t=e.toDate,n=e.pagedNavigation,r=e.numberOfMonths,i=r===void 0?1:r,o=n?i:1,l=jn(s);if(!t)return ai(l,o);var c=Fp(t,s);if(!(c<i))return ai(l,o)}}function FY(s,e){if(!e.disableNavigation){var t=e.fromDate,n=e.pagedNavigation,r=e.numberOfMonths,i=r===void 0?1:r,o=n?i:1,l=jn(s);if(!t)return ai(l,-o);var c=Fp(l,t);if(!(c<=0))return ai(l,-o)}}var p4=j.createContext(void 0);function $Y(s){var e=ct(),t=DY(),n=t[0],r=t[1],i=OY(n,e),o=LY(n,e),l=FY(n,e),c=function(f){return i.some(function(m){return pA(f,m)})},d=function(f,m){c(f)||(m&&d4(f,m)?r(ai(f,1+e.numberOfMonths*-1)):r(f))},h={currentMonth:n,displayMonths:i,goToMonth:r,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return a.jsx(p4.Provider,{value:h,children:s.children})}function Hv(){var s=j.useContext(p4);if(!s)throw new Error("useNavigation must be used within a NavigationProvider");return s}function zk(s){var e,t=ct(),n=t.classNames,r=t.styles,i=t.components,o=Hv().goToMonth,l=function(h){o(ai(h,s.displayIndex?-s.displayIndex:0))},c=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:f4,d=a.jsx(c,{id:s.id,displayMonth:s.displayMonth});return a.jsxs("div",{className:n.caption_dropdowns,style:r.caption_dropdowns,children:[a.jsx("div",{className:n.vhidden,children:d}),a.jsx(TY,{onChange:l,displayMonth:s.displayMonth}),a.jsx(RY,{onChange:l,displayMonth:s.displayMonth})]})}function zY(s){return a.jsx("svg",xe({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:a.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function BY(s){return a.jsx("svg",xe({width:"16px",height:"16px",viewBox:"0 0 120 120"},s,{children:a.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var _y=j.forwardRef(function(s,e){var t=ct(),n=t.classNames,r=t.styles,i=[n.button_reset,n.button];s.className&&i.push(s.className);var o=i.join(" "),l=xe(xe({},r.button_reset),r.button);return s.style&&Object.assign(l,s.style),a.jsx("button",xe({},s,{ref:e,type:"button",className:o,style:l}))});function UY(s){var e,t,n=ct(),r=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,h=c.labelNext,f=n.components;if(!s.nextMonth&&!s.previousMonth)return a.jsx(a.Fragment,{});var m=d(s.previousMonth,{locale:i}),p=[o.nav_button,o.nav_button_previous].join(" "),x=h(s.nextMonth,{locale:i}),v=[o.nav_button,o.nav_button_next].join(" "),w=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:BY,g=(t=f==null?void 0:f.IconLeft)!==null&&t!==void 0?t:zY;return a.jsxs("div",{className:o.nav,style:l.nav,children:[!s.hidePrevious&&a.jsx(_y,{name:"previous-month","aria-label":m,className:p,style:l.nav_button_previous,disabled:!s.previousMonth,onClick:s.onPreviousClick,children:r==="rtl"?a.jsx(w,{className:o.nav_icon,style:l.nav_icon}):a.jsx(g,{className:o.nav_icon,style:l.nav_icon})}),!s.hideNext&&a.jsx(_y,{name:"next-month","aria-label":x,className:v,style:l.nav_button_next,disabled:!s.nextMonth,onClick:s.onNextClick,children:r==="rtl"?a.jsx(g,{className:o.nav_icon,style:l.nav_icon}):a.jsx(w,{className:o.nav_icon,style:l.nav_icon})})]})}function Bk(s){var e=ct().numberOfMonths,t=Hv(),n=t.previousMonth,r=t.nextMonth,i=t.goToMonth,o=t.displayMonths,l=o.findIndex(function(x){return pA(s.displayMonth,x)}),c=l===0,d=l===o.length-1,h=e>1&&(c||!d),f=e>1&&(d||!c),m=function(){n&&i(n)},p=function(){r&&i(r)};return a.jsx(UY,{displayMonth:s.displayMonth,hideNext:h,hidePrevious:f,nextMonth:r,previousMonth:n,onPreviousClick:m,onNextClick:p})}function HY(s){var e,t=ct(),n=t.classNames,r=t.disableNavigation,i=t.styles,o=t.captionLayout,l=t.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:f4,d;return r?d=a.jsx(c,{id:s.id,displayMonth:s.displayMonth}):o==="dropdown"?d=a.jsx(zk,{displayMonth:s.displayMonth,id:s.id}):o==="dropdown-buttons"?d=a.jsxs(a.Fragment,{children:[a.jsx(zk,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id}),a.jsx(Bk,{displayMonth:s.displayMonth,displayIndex:s.displayIndex,id:s.id})]}):d=a.jsxs(a.Fragment,{children:[a.jsx(c,{id:s.id,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),a.jsx(Bk,{displayMonth:s.displayMonth,id:s.id})]}),a.jsx("div",{className:n.caption,style:i.caption,children:d})}function WY(s){var e=ct(),t=e.footer,n=e.styles,r=e.classNames.tfoot;return t?a.jsx("tfoot",{className:r,style:n.tfoot,children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:t})})}):a.jsx(a.Fragment,{})}function VY(s,e,t){for(var n=t?cu(new Date):ta(new Date,{locale:s,weekStartsOn:e}),r=[],i=0;i<7;i++){var o=Qs(n,i);r.push(o)}return r}function GY(){var s=ct(),e=s.classNames,t=s.styles,n=s.showWeekNumber,r=s.locale,i=s.weekStartsOn,o=s.ISOWeek,l=s.formatters.formatWeekdayName,c=s.labels.labelWeekday,d=VY(r,i,o);return a.jsxs("tr",{style:t.head_row,className:e.head_row,children:[n&&a.jsx("td",{style:t.head_cell,className:e.head_cell}),d.map(function(h,f){return a.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":c(h,{locale:r}),children:l(h,{locale:r})},f)})]})}function qY(){var s,e=ct(),t=e.classNames,n=e.styles,r=e.components,i=(s=r==null?void 0:r.HeadRow)!==null&&s!==void 0?s:GY;return a.jsx("thead",{style:n.head,className:t.head,children:a.jsx(i,{})})}function KY(s){var e=ct(),t=e.locale,n=e.formatters.formatDay;return a.jsx(a.Fragment,{children:n(s.date,{locale:t})})}var gA=j.createContext(void 0);function YY(s){if(!Bv(s.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return a.jsx(gA.Provider,{value:e,children:s.children})}return a.jsx(XY,{initialProps:s.initialProps,children:s.children})}function XY(s){var e=s.initialProps,t=s.children,n=e.selected,r=e.min,i=e.max,o=function(d,h,f){var m,p;(m=e.onDayClick)===null||m===void 0||m.call(e,d,h,f);var x=!!(h.selected&&r&&(n==null?void 0:n.length)===r);if(!x){var v=!!(!h.selected&&i&&(n==null?void 0:n.length)===i);if(!v){var w=n?u4([],n):[];if(h.selected){var g=w.findIndex(function(y){return xn(d,y)});w.splice(g,1)}else w.push(d);(p=e.onSelect)===null||p===void 0||p.call(e,w,d,h,f)}}},l={disabled:[]};n&&l.disabled.push(function(d){var h=i&&n.length>i-1,f=n.some(function(m){return xn(m,d)});return!!(h&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return a.jsx(gA.Provider,{value:c,children:t})}function vA(){var s=j.useContext(gA);if(!s)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return s}function QY(s,e){var t=e||{},n=t.from,r=t.to;return n&&r?xn(r,s)&&xn(n,s)?void 0:xn(r,s)?{from:r,to:void 0}:xn(n,s)?void 0:cN(n,s)?{from:s,to:r}:{from:n,to:s}:r?cN(s,r)?{from:r,to:s}:{from:s,to:r}:n?d4(s,n)?{from:s,to:n}:{from:n,to:s}:{from:s,to:void 0}}var xA=j.createContext(void 0);function JY(s){if(!Uv(s.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return a.jsx(xA.Provider,{value:e,children:s.children})}return a.jsx(ZY,{initialProps:s.initialProps,children:s.children})}function ZY(s){var e=s.initialProps,t=s.children,n=e.selected,r=n||{},i=r.from,o=r.to,l=e.min,c=e.max,d=function(p,x,v){var w,g;(w=e.onDayClick)===null||w===void 0||w.call(e,p,x,v);var y=QY(p,n);(g=e.onSelect)===null||g===void 0||g.call(e,y,p,x,v)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],o?(h.range_end=[o],xn(i,o)||(h.range_middle=[{after:i,before:o}])):h.range_end=[i]):o&&(h.range_start=[o],h.range_end=[o]),l&&(i&&!o&&h.disabled.push({after:Zw(i,l-1),before:Qs(i,l-1)}),i&&o&&h.disabled.push({after:i,before:Qs(i,l-1)}),!i&&o&&h.disabled.push({after:Zw(o,l-1),before:Qs(o,l-1)})),c){if(i&&!o&&(h.disabled.push({before:Qs(i,-c+1)}),h.disabled.push({after:Qs(i,c-1)})),i&&o){var f=qi(o,i)+1,m=c-f;h.disabled.push({before:Zw(i,m)}),h.disabled.push({after:Qs(o,m)})}!i&&o&&(h.disabled.push({before:Qs(o,-c+1)}),h.disabled.push({after:Qs(o,c-1)}))}return a.jsx(xA.Provider,{value:{selected:n,onDayClick:d,modifiers:h},children:t})}function yA(){var s=j.useContext(xA);if(!s)throw new Error("useSelectRange must be used within a SelectRangeProvider");return s}function A0(s){return Array.isArray(s)?u4([],s):s!==void 0?[s]:[]}function eX(s){var e={};return Object.entries(s).forEach(function(t){var n=t[0],r=t[1];e[n]=A0(r)}),e}var oi;(function(s){s.Outside="outside",s.Disabled="disabled",s.Selected="selected",s.Hidden="hidden",s.Today="today",s.RangeStart="range_start",s.RangeEnd="range_end",s.RangeMiddle="range_middle"})(oi||(oi={}));var tX=oi.Selected,aa=oi.Disabled,sX=oi.Hidden,nX=oi.Today,s1=oi.RangeEnd,n1=oi.RangeMiddle,r1=oi.RangeStart,rX=oi.Outside;function iX(s,e,t){var n,r=(n={},n[tX]=A0(s.selected),n[aa]=A0(s.disabled),n[sX]=A0(s.hidden),n[nX]=[s.today],n[s1]=[],n[n1]=[],n[r1]=[],n[rX]=[],n);return s.fromDate&&r[aa].push({before:s.fromDate}),s.toDate&&r[aa].push({after:s.toDate}),Bv(s)?r[aa]=r[aa].concat(e.modifiers[aa]):Uv(s)&&(r[aa]=r[aa].concat(t.modifiers[aa]),r[r1]=t.modifiers[r1],r[n1]=t.modifiers[n1],r[s1]=t.modifiers[s1]),r}var g4=j.createContext(void 0);function aX(s){var e=ct(),t=vA(),n=yA(),r=iX(e,t,n),i=eX(e.modifiers),o=xe(xe({},r),i);return a.jsx(g4.Provider,{value:o,children:s.children})}function v4(){var s=j.useContext(g4);if(!s)throw new Error("useModifiers must be used within a ModifiersProvider");return s}function oX(s){return!!(s&&typeof s=="object"&&"before"in s&&"after"in s)}function lX(s){return!!(s&&typeof s=="object"&&"from"in s)}function cX(s){return!!(s&&typeof s=="object"&&"after"in s)}function dX(s){return!!(s&&typeof s=="object"&&"before"in s)}function uX(s){return!!(s&&typeof s=="object"&&"dayOfWeek"in s)}function hX(s,e){var t,n=e.from,r=e.to;if(n&&r){var i=qi(r,n)<0;i&&(t=[r,n],n=t[0],r=t[1]);var o=qi(s,n)>=0&&qi(r,s)>=0;return o}return r?xn(r,s):n?xn(n,s):!1}function fX(s){return hA(s)}function mX(s){return Array.isArray(s)&&s.every(hA)}function pX(s,e){return e.some(function(t){if(typeof t=="boolean")return t;if(fX(t))return xn(s,t);if(mX(t))return t.includes(s);if(lX(t))return hX(s,t);if(uX(t))return t.dayOfWeek.includes(s.getDay());if(oX(t)){var n=qi(t.before,s),r=qi(t.after,s),i=n>0,o=r<0,l=cN(t.before,t.after);return l?o&&i:i||o}return cX(t)?qi(s,t.after)>0:dX(t)?qi(t.before,s)>0:typeof t=="function"?t(s):!1})}function bA(s,e,t){var n=Object.keys(e).reduce(function(i,o){var l=e[o];return pX(s,l)&&i.push(o),i},[]),r={};return n.forEach(function(i){return r[i]=!0}),t&&!pA(s,t)&&(r.outside=!0),r}function gX(s,e){for(var t=jn(s[0]),n=fA(s[s.length-1]),r,i,o=t;o<=n;){var l=bA(o,e),c=!l.disabled&&!l.hidden;if(!c){o=Qs(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),r||(r=o),o=Qs(o,1)}return i||r}var vX=365;function x4(s,e){var t=e.moveBy,n=e.direction,r=e.context,i=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:s}:o,c=r.weekStartsOn,d=r.fromDate,h=r.toDate,f=r.locale,m={day:Qs,week:lN,month:ai,year:Rq,startOfWeek:function(w){return r.ISOWeek?cu(w):ta(w,{locale:f,weekStartsOn:c})},endOfWeek:function(w){return r.ISOWeek?n4(w):mA(w,{locale:f,weekStartsOn:c})}},p=m[t](s,n==="after"?1:-1);n==="before"&&d?p=Mq([d,p]):n==="after"&&h&&(p=Iq([h,p]));var x=!0;if(i){var v=bA(p,i);x=!v.disabled&&!v.hidden}return x?p:l.count>vX?l.lastFocused:x4(p,{moveBy:t,direction:n,context:r,modifiers:i,retry:xe(xe({},l),{count:l.count+1})})}var y4=j.createContext(void 0);function xX(s){var e=Hv(),t=v4(),n=j.useState(),r=n[0],i=n[1],o=j.useState(),l=o[0],c=o[1],d=gX(e.displayMonths,t),h=r??(l&&e.isDateDisplayed(l))?l:d,f=function(){c(r),i(void 0)},m=function(w){i(w)},p=ct(),x=function(w,g){if(r){var y=x4(r,{moveBy:w,direction:g,context:p,modifiers:t});xn(r,y)||(e.goToDate(y,r),m(y))}},v={focusedDay:r,focusTarget:h,blur:f,focus:m,focusDayAfter:function(){return x("day","after")},focusDayBefore:function(){return x("day","before")},focusWeekAfter:function(){return x("week","after")},focusWeekBefore:function(){return x("week","before")},focusMonthBefore:function(){return x("month","before")},focusMonthAfter:function(){return x("month","after")},focusYearBefore:function(){return x("year","before")},focusYearAfter:function(){return x("year","after")},focusStartOfWeek:function(){return x("startOfWeek","before")},focusEndOfWeek:function(){return x("endOfWeek","after")}};return a.jsx(y4.Provider,{value:v,children:s.children})}function wA(){var s=j.useContext(y4);if(!s)throw new Error("useFocusContext must be used within a FocusProvider");return s}function yX(s,e){var t=v4(),n=bA(s,t,e);return n}var jA=j.createContext(void 0);function bX(s){if(!$b(s.initialProps)){var e={selected:void 0};return a.jsx(jA.Provider,{value:e,children:s.children})}return a.jsx(wX,{initialProps:s.initialProps,children:s.children})}function wX(s){var e=s.initialProps,t=s.children,n=function(i,o,l){var c,d,h;if((c=e.onDayClick)===null||c===void 0||c.call(e,i,o,l),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,i,o,l);return}(h=e.onSelect)===null||h===void 0||h.call(e,i,i,o,l)},r={selected:e.selected,onDayClick:n};return a.jsx(jA.Provider,{value:r,children:t})}function b4(){var s=j.useContext(jA);if(!s)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return s}function jX(s,e){var t=ct(),n=b4(),r=vA(),i=yA(),o=wA(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,h=o.focusWeekBefore,f=o.blur,m=o.focus,p=o.focusMonthBefore,x=o.focusMonthAfter,v=o.focusYearBefore,w=o.focusYearAfter,g=o.focusStartOfWeek,y=o.focusEndOfWeek,b=function(D){var M,R,U,Z;$b(t)?(M=n.onDayClick)===null||M===void 0||M.call(n,s,e,D):Bv(t)?(R=r.onDayClick)===null||R===void 0||R.call(r,s,e,D):Uv(t)?(U=i.onDayClick)===null||U===void 0||U.call(i,s,e,D):(Z=t.onDayClick)===null||Z===void 0||Z.call(t,s,e,D)},_=function(D){var M;m(s),(M=t.onDayFocus)===null||M===void 0||M.call(t,s,e,D)},S=function(D){var M;f(),(M=t.onDayBlur)===null||M===void 0||M.call(t,s,e,D)},A=function(D){var M;(M=t.onDayMouseEnter)===null||M===void 0||M.call(t,s,e,D)},C=function(D){var M;(M=t.onDayMouseLeave)===null||M===void 0||M.call(t,s,e,D)},P=function(D){var M;(M=t.onDayPointerEnter)===null||M===void 0||M.call(t,s,e,D)},T=function(D){var M;(M=t.onDayPointerLeave)===null||M===void 0||M.call(t,s,e,D)},O=function(D){var M;(M=t.onDayTouchCancel)===null||M===void 0||M.call(t,s,e,D)},z=function(D){var M;(M=t.onDayTouchEnd)===null||M===void 0||M.call(t,s,e,D)},F=function(D){var M;(M=t.onDayTouchMove)===null||M===void 0||M.call(t,s,e,D)},B=function(D){var M;(M=t.onDayTouchStart)===null||M===void 0||M.call(t,s,e,D)},I=function(D){var M;(M=t.onDayKeyUp)===null||M===void 0||M.call(t,s,e,D)},H=function(D){var M;switch(D.key){case"ArrowLeft":D.preventDefault(),D.stopPropagation(),t.dir==="rtl"?l():c();break;case"ArrowRight":D.preventDefault(),D.stopPropagation(),t.dir==="rtl"?c():l();break;case"ArrowDown":D.preventDefault(),D.stopPropagation(),d();break;case"ArrowUp":D.preventDefault(),D.stopPropagation(),h();break;case"PageUp":D.preventDefault(),D.stopPropagation(),D.shiftKey?v():p();break;case"PageDown":D.preventDefault(),D.stopPropagation(),D.shiftKey?w():x();break;case"Home":D.preventDefault(),D.stopPropagation(),g();break;case"End":D.preventDefault(),D.stopPropagation(),y();break}(M=t.onDayKeyDown)===null||M===void 0||M.call(t,s,e,D)},$={onClick:b,onFocus:_,onBlur:S,onKeyDown:H,onKeyUp:I,onMouseEnter:A,onMouseLeave:C,onPointerEnter:P,onPointerLeave:T,onTouchCancel:O,onTouchEnd:z,onTouchMove:F,onTouchStart:B};return $}function _X(){var s=ct(),e=b4(),t=vA(),n=yA(),r=$b(s)?e.selected:Bv(s)?t.selected:Uv(s)?n.selected:void 0;return r}function NX(s){return Object.values(oi).includes(s)}function SX(s,e){var t=[s.classNames.day];return Object.keys(e).forEach(function(n){var r=s.modifiersClassNames[n];if(r)t.push(r);else if(NX(n)){var i=s.classNames["day_".concat(n)];i&&t.push(i)}}),t}function AX(s,e){var t=xe({},s.styles.day);return Object.keys(e).forEach(function(n){var r;t=xe(xe({},t),(r=s.modifiersStyles)===null||r===void 0?void 0:r[n])}),t}function EX(s,e,t){var n,r,i,o=ct(),l=wA(),c=yX(s,e),d=jX(s,c),h=_X(),f=!!(o.onDayClick||o.mode!=="default");j.useEffect(function(){var A;c.outside||l.focusedDay&&f&&xn(l.focusedDay,s)&&((A=t.current)===null||A===void 0||A.focus())},[l.focusedDay,s,t,f,c.outside]);var m=SX(o,c).join(" "),p=AX(o,c),x=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(i=(r=o.components)===null||r===void 0?void 0:r.DayContent)!==null&&i!==void 0?i:KY,w=a.jsx(v,{date:s,displayMonth:e,activeModifiers:c}),g={style:p,className:m,children:w,role:"gridcell"},y=l.focusTarget&&xn(l.focusTarget,s)&&!c.outside,b=l.focusedDay&&xn(l.focusedDay,s),_=xe(xe(xe({},g),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=b||y?0:-1,n)),d),S={isButton:f,isHidden:x,activeModifiers:c,selectedDays:h,buttonProps:_,divProps:g};return S}function CX(s){var e=j.useRef(null),t=EX(s.date,s.displayMonth,e);return t.isHidden?a.jsx("div",{role:"gridcell"}):t.isButton?a.jsx(_y,xe({name:"day",ref:e},t.buttonProps)):a.jsx("div",xe({},t.divProps))}function kX(s){var e=s.number,t=s.dates,n=ct(),r=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,h=d(Number(e),{locale:l});if(!r)return a.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:h});var f=c(Number(e),{locale:l}),m=function(p){r(e,t,p)};return a.jsx(_y,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:m,children:h})}function PX(s){var e,t,n=ct(),r=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:CX,d=(t=l==null?void 0:l.WeekNumber)!==null&&t!==void 0?t:kX,h;return o&&(h=a.jsx("td",{className:i.cell,style:r.cell,children:a.jsx(d,{number:s.weekNumber,dates:s.dates})})),a.jsxs("tr",{className:i.row,style:r.row,children:[h,s.dates.map(function(f){return a.jsx("td",{className:i.cell,style:r.cell,role:"presentation",children:a.jsx(c,{displayMonth:s.displayMonth,date:f})},RK(f))})]})}function Uk(s,e,t){for(var n=t!=null&&t.ISOWeek?n4(e):mA(e,t),r=t!=null&&t.ISOWeek?cu(s):ta(s,t),i=qi(n,r),o=[],l=0;l<=i;l++)o.push(Qs(r,l));var c=o.reduce(function(d,h){var f=t!=null&&t.ISOWeek?a4(h):l4(h,t),m=d.find(function(p){return p.weekNumber===f});return m?(m.dates.push(h),d):(d.push({weekNumber:f,dates:[h]}),d)},[]);return c}function TX(s,e){var t=Uk(jn(s),fA(s),e);if(e!=null&&e.useFixedWeeks){var n=IK(s,e);if(n<6){var r=t[t.length-1],i=r.dates[r.dates.length-1],o=lN(i,6-n),l=Uk(lN(i,1),o,e);t.push.apply(t,l)}}return t}function RX(s){var e,t,n,r=ct(),i=r.locale,o=r.classNames,l=r.styles,c=r.hideHead,d=r.fixedWeeks,h=r.components,f=r.weekStartsOn,m=r.firstWeekContainsDate,p=r.ISOWeek,x=TX(s.displayMonth,{useFixedWeeks:!!d,ISOWeek:p,locale:i,weekStartsOn:f,firstWeekContainsDate:m}),v=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:qY,w=(t=h==null?void 0:h.Row)!==null&&t!==void 0?t:PX,g=(n=h==null?void 0:h.Footer)!==null&&n!==void 0?n:WY;return a.jsxs("table",{id:s.id,className:o.table,style:l.table,role:"grid","aria-labelledby":s["aria-labelledby"],children:[!c&&a.jsx(v,{}),a.jsx("tbody",{className:o.tbody,style:l.tbody,children:x.map(function(y){return a.jsx(w,{displayMonth:s.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),a.jsx(g,{displayMonth:s.displayMonth})]})}function MX(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var IX=MX()?j.useLayoutEffect:j.useEffect,i1=!1,DX=0;function Hk(){return"react-day-picker-".concat(++DX)}function OX(s){var e,t=s??(i1?Hk():null),n=j.useState(t),r=n[0],i=n[1];return IX(function(){r===null&&i(Hk())},[]),j.useEffect(function(){i1===!1&&(i1=!0)},[]),(e=s??r)!==null&&e!==void 0?e:void 0}function LX(s){var e,t,n=ct(),r=n.dir,i=n.classNames,o=n.styles,l=n.components,c=Hv().displayMonths,d=OX(n.id?"".concat(n.id,"-").concat(s.displayIndex):void 0),h=n.id?"".concat(n.id,"-grid-").concat(s.displayIndex):void 0,f=[i.month],m=o.month,p=s.displayIndex===0,x=s.displayIndex===c.length-1,v=!p&&!x;r==="rtl"&&(e=[p,x],x=e[0],p=e[1]),p&&(f.push(i.caption_start),m=xe(xe({},m),o.caption_start)),x&&(f.push(i.caption_end),m=xe(xe({},m),o.caption_end)),v&&(f.push(i.caption_between),m=xe(xe({},m),o.caption_between));var w=(t=l==null?void 0:l.Caption)!==null&&t!==void 0?t:HY;return a.jsxs("div",{className:f.join(" "),style:m,children:[a.jsx(w,{id:d,displayMonth:s.displayMonth,displayIndex:s.displayIndex}),a.jsx(RX,{id:h,"aria-labelledby":d,displayMonth:s.displayMonth})]},s.displayIndex)}function FX(s){var e=ct(),t=e.classNames,n=e.styles;return a.jsx("div",{className:t.months,style:n.months,children:s.children})}function $X(s){var e,t,n=s.initialProps,r=ct(),i=wA(),o=Hv(),l=j.useState(!1),c=l[0],d=l[1];j.useEffect(function(){r.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[r.initialFocus,c,i.focus,i.focusTarget,i]);var h=[r.classNames.root,r.className];r.numberOfMonths>1&&h.push(r.classNames.multiple_months),r.showWeekNumber&&h.push(r.classNames.with_weeknumber);var f=xe(xe({},r.styles.root),r.style),m=Object.keys(n).filter(function(x){return x.startsWith("data-")}).reduce(function(x,v){var w;return xe(xe({},x),(w={},w[v]=n[v],w))},{}),p=(t=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:FX;return a.jsx("div",xe({className:h.join(" "),style:f,dir:r.dir,id:r.id,nonce:n.nonce,title:n.title,lang:n.lang},m,{children:a.jsx(p,{children:o.displayMonths.map(function(x,v){return a.jsx(LX,{displayIndex:v,displayMonth:x},v)})})}))}function zX(s){var e=s.children,t=dY(s,["children"]);return a.jsx(kY,{initialProps:t,children:a.jsx($Y,{children:a.jsx(bX,{initialProps:t,children:a.jsx(YY,{initialProps:t,children:a.jsx(JY,{initialProps:t,children:a.jsx(aX,{children:a.jsx(xX,{children:e})})})})})})})}function BX(s){return a.jsx(zX,xe({},s,{children:a.jsx($X,{initialProps:s})}))}function E0({className:s,classNames:e,showOutsideDays:t=!0,...n}){return a.jsx(BX,{showOutsideDays:t,className:ne("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ne(gj({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ne(gj({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...r})=>a.jsx(s$,{className:"h-4 w-4"}),IconRight:({...r})=>a.jsx(n$,{className:"h-4 w-4"})},...n})}E0.displayName="Calendar";const UX=()=>{const{user:s,loading:e}=ci(),t=po(),[n,r]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(!1),[d,h]=j.useState(null),[f,m]=j.useState({}),p=(S,A="CHF")=>S==null?"k.A.":S===0?"Kostenlos":`${S} ${A}`;j.useEffect(()=>{if(!e&&!s){t("/auth");return}s&&x()},[s,e,t,x]);const x=j.useCallback(async()=>{try{const{data:S}=await se.from("profiles").select("role").eq("user_id",s==null?void 0:s.id).single();if((S==null?void 0:S.role)!=="admin"){Ie.error("Zugriff verweigert. Admin-Berechtigung erforderlich."),t("/");return}v()}catch(S){console.error("Error checking admin access:",S),t("/")}},[s==null?void 0:s.id,t]),v=async()=>{try{o(!0);const{data:S,error:A}=await se.from("courses").select("*").order("created_at",{ascending:!1});if(A)throw A;r(S||[])}catch(S){console.error("Error loading courses:",S),Ie.error("Fehler beim Laden der Kurse")}finally{o(!1)}},w=S=>{h(S),m(S),c(!0)},g=()=>{h(null),m({title:"",description:"",venue:"",city:"",country:"",specialty:"",language:"Deutsch",modality:"onsite",price:null,currency:"CHF",difficulty_level:"beginner",tags:[],status:"draft",cover_image_url:null,start_date:null,end_date:null,registration_deadline:null}),c(!0)},y=async()=>{var S;try{if(!s||!f.title||!f.venue){Ie.error("Titel und Veranstalter sind Pflichtfelder");return}const A={title:f.title,provider_id:s.id,description:f.description||"",venue:f.venue,city:f.city||"",country:f.country||"",specialty:f.specialty||null,language:f.language||"Deutsch",modality:f.modality||"onsite",price:f.price,currency:f.currency||"CHF",difficulty_level:f.difficulty_level||"beginner",status:f.status||"draft",cover_image_url:f.cover_image_url||null,start_date:f.start_date||null,end_date:f.end_date||null,registration_deadline:f.registration_deadline||null,tags:Array.isArray(f.tags)?f.tags:((S=f.tags)==null?void 0:S.split(",").map(C=>C.trim()))||[]};if(d){const{error:C}=await se.from("courses").update(A).eq("id",d.id);if(C)throw C;Ie.success("Kurs erfolgreich aktualisiert")}else{const{error:C}=await se.from("courses").insert([A]);if(C)throw C;Ie.success("Kurs erfolgreich erstellt")}c(!1),v()}catch(A){console.error("Error saving course:",A),Ie.error("Fehler beim Speichern des Kurses")}},b=async S=>{if(confirm("Sind Sie sicher, dass Sie diesen Kurs löschen möchten?"))try{const{error:A}=await se.from("courses").delete().eq("id",S);if(A)throw A;Ie.success("Kurs erfolgreich gelöscht"),v()}catch(A){console.error("Error deleting course:",A),Ie.error("Fehler beim Löschen des Kurses")}},_=(S,A)=>{m(C=>({...C,[S]:A}))};return i?a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsxs("main",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"CMS Administration"}),a.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Kurse und Inhalte"})]}),a.jsxs(K,{onClick:g,className:"gap-2",children:[a.jsx(Qf,{className:"h-4 w-4"}),"Neuen Kurs erstellen"]})]}),a.jsxs(_r,{defaultValue:"courses",className:"space-y-6",children:[a.jsxs(Jn,{children:[a.jsxs(Ue,{value:"courses",className:"gap-2",children:[a.jsx(tn,{className:"h-4 w-4"}),"Kurse"]}),a.jsxs(Ue,{value:"users",className:"gap-2",children:[a.jsx(xr,{className:"h-4 w-4"}),"Benutzer"]}),a.jsxs(Ue,{value:"settings",className:"gap-2",children:[a.jsx(Sv,{className:"h-4 w-4"}),"Einstellungen"]})]}),a.jsx(He,{value:"courses",className:"space-y-6",children:a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{children:"Kursverwaltung"})}),a.jsx(ce,{children:a.jsxs(su,{children:[a.jsx(nu,{children:a.jsxs(Gn,{children:[a.jsx(Ne,{children:"Titel"}),a.jsx(Ne,{children:"Veranstalter"}),a.jsx(Ne,{children:"Ort"}),a.jsx(Ne,{children:"Modalität"}),a.jsx(Ne,{children:"Status"}),a.jsx(Ne,{children:"Preis"}),a.jsx(Ne,{children:"Aktionen"})]})}),a.jsx(ru,{children:n.map(S=>a.jsxs(Gn,{children:[a.jsx(Se,{className:"font-medium",children:S.title}),a.jsx(Se,{children:S.venue}),a.jsxs(Se,{children:[S.city,", ",S.country]}),a.jsx(Se,{children:a.jsx(Y,{variant:"outline",children:S.modality})}),a.jsx(Se,{children:a.jsx(Y,{variant:S.status==="published"?"default":"secondary",children:S.status})}),a.jsx(Se,{children:p(S.price,S.currency)}),a.jsx(Se,{children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(K,{variant:"outline",size:"sm",onClick:()=>w(S),children:a.jsx(gS,{className:"h-3 w-3"})}),a.jsx(K,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>b(S.id),children:a.jsx(lb,{className:"h-3 w-3"})})]})})]},S.id))})]})})]})}),a.jsx(He,{value:"users",children:a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{children:"Benutzerverwaltung"})}),a.jsx(ce,{children:a.jsx("p",{className:"text-muted-foreground",children:"Benutzerverwaltung wird in zukünftigen Updates verfügbar sein."})})]})}),a.jsx(He,{value:"settings",children:a.jsxs(G,{children:[a.jsx(Ae,{children:a.jsx(ke,{children:"Systemeinstellungen"})}),a.jsx(ce,{children:a.jsx("p",{className:"text-muted-foreground",children:"Systemeinstellungen werden in zukünftigen Updates verfügbar sein."})})]})})]}),a.jsx(Vl,{open:l,onOpenChange:c,children:a.jsxs(lo,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white text-gray-900 border border-gray-200 shadow-lg",children:[a.jsx(co,{children:a.jsx(uo,{className:"text-gray-900",children:d?"Kurs bearbeiten":"Neuen Kurs erstellen"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Grundinformationen"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"title",className:"text-foreground",children:"Titel *"}),a.jsx(Ee,{id:"title",value:f.title||"",onChange:S=>_("title",S.target.value),placeholder:"Kurstitel eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"venue",className:"text-foreground",children:"Veranstalter *"}),a.jsx(Ee,{id:"venue",value:f.venue||"",onChange:S=>_("venue",S.target.value),placeholder:"Veranstalter eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"city",className:"text-foreground",children:"Stadt"}),a.jsx(Ee,{id:"city",value:f.city||"",onChange:S=>_("city",S.target.value),placeholder:"Stadt eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"country",className:"text-foreground",children:"Land"}),a.jsx(Ee,{id:"country",value:f.country||"",onChange:S=>_("country",S.target.value),placeholder:"Land eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx(he,{htmlFor:"description",className:"text-foreground",children:"Beschreibung"}),a.jsx(Gl,{id:"description",value:f.description||"",onChange:S=>_("description",S.target.value),placeholder:"Kursbeschreibung eingeben",rows:4,className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Kursdetails & Termine"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{className:"text-foreground",children:"Startdatum"}),a.jsxs(qx,{children:[a.jsx(Kx,{asChild:!0,children:a.jsxs(K,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.start_date&&"text-muted-foreground"),children:[a.jsx(hs,{className:"mr-2 h-4 w-4"}),f.start_date?Ji(new Date(f.start_date),"PPP",{locale:t1}):a.jsx("span",{children:"Startdatum wählen"})]})}),a.jsx(dp,{className:"w-auto p-0 bg-background border-border",align:"start",children:a.jsx(E0,{mode:"single",selected:f.start_date?new Date(f.start_date):void 0,onSelect:S=>_("start_date",S==null?void 0:S.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{className:"text-foreground",children:"Enddatum"}),a.jsxs(qx,{children:[a.jsx(Kx,{asChild:!0,children:a.jsxs(K,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.end_date&&"text-muted-foreground"),children:[a.jsx(hs,{className:"mr-2 h-4 w-4"}),f.end_date?Ji(new Date(f.end_date),"PPP",{locale:t1}):a.jsx("span",{children:"Enddatum wählen"})]})}),a.jsx(dp,{className:"w-auto p-0 bg-background border-border",align:"start",children:a.jsx(E0,{mode:"single",selected:f.end_date?new Date(f.end_date):void 0,onSelect:S=>_("end_date",S==null?void 0:S.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{className:"text-foreground",children:"Anmeldeschluss"}),a.jsxs(qx,{children:[a.jsx(Kx,{asChild:!0,children:a.jsxs(K,{variant:"outline",className:ne("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.registration_deadline&&"text-muted-foreground"),children:[a.jsx(hs,{className:"mr-2 h-4 w-4"}),f.registration_deadline?Ji(new Date(f.registration_deadline),"PPP",{locale:t1}):a.jsx("span",{children:"Anmeldeschluss wählen"})]})}),a.jsx(dp,{className:"w-auto p-0 bg-background border-border",align:"start",children:a.jsx(E0,{mode:"single",selected:f.registration_deadline?new Date(f.registration_deadline):void 0,onSelect:S=>_("registration_deadline",S==null?void 0:S.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"specialty",className:"text-foreground",children:"Fachgebiet"}),a.jsx(Ee,{id:"specialty",value:f.specialty||"",onChange:S=>_("specialty",S.target.value),placeholder:"Fachgebiet eingeben",className:"bg-background text-foreground border-input"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"language",className:"text-foreground",children:"Sprache"}),a.jsxs(Qt,{value:f.language||"Deutsch",onValueChange:S=>_("language",S),children:[a.jsx($t,{className:"bg-background text-foreground border-input",children:a.jsx(Jt,{})}),a.jsxs(zt,{className:"bg-background text-foreground border-border",children:[a.jsx(ye,{value:"Deutsch",children:"Deutsch"}),a.jsx(ye,{value:"English",children:"English"}),a.jsx(ye,{value:"Français",children:"Français"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"modality",className:"text-foreground",children:"Modalität"}),a.jsxs(Qt,{value:f.modality||"onsite",onValueChange:S=>_("modality",S),children:[a.jsx($t,{className:"bg-background text-foreground border-input",children:a.jsx(Jt,{})}),a.jsxs(zt,{className:"bg-background text-foreground border-border",children:[a.jsx(ye,{value:"onsite",children:"Vor Ort"}),a.jsx(ye,{value:"online",children:"Online"}),a.jsx(ye,{value:"hybrid",children:"Hybrid"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"difficulty_level",className:"text-foreground",children:"Schwierigkeitsgrad"}),a.jsxs(Qt,{value:f.difficulty_level||"beginner",onValueChange:S=>_("difficulty_level",S),children:[a.jsx($t,{className:"bg-background text-foreground border-input",children:a.jsx(Jt,{})}),a.jsxs(zt,{className:"bg-background text-foreground border-border",children:[a.jsx(ye,{value:"beginner",children:"Anfänger"}),a.jsx(ye,{value:"intermediate",children:"Fortgeschritten"}),a.jsx(ye,{value:"advanced",children:"Experte"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"status",className:"text-foreground",children:"Status"}),a.jsxs(Qt,{value:f.status||"draft",onValueChange:S=>_("status",S),children:[a.jsx($t,{className:"bg-background text-foreground border-input",children:a.jsx(Jt,{})}),a.jsxs(zt,{className:"bg-background text-foreground border-border",children:[a.jsx(ye,{value:"draft",children:"Entwurf"}),a.jsx(ye,{value:"published",children:"Veröffentlicht"}),a.jsx(ye,{value:"archived",children:"Archiviert"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"tags",className:"text-foreground",children:"Tags (kommagetrennt)"}),a.jsx(Ee,{id:"tags",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:S=>_("tags",S.target.value),placeholder:"Tag1, Tag2, Tag3",className:"bg-background text-foreground border-input"})]})]})]}),a.jsx("div",{className:"md:col-span-2 space-y-6 border-t border-border pt-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(Cq,{currentImageUrl:f.cover_image_url||void 0,onImageUploaded:S=>_("cover_image_url",S),onImageRemoved:()=>_("cover_image_url",null)}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"price",className:"text-foreground",children:"Preis"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[a.jsx(K,{type:"button",variant:f.price===0?"default":"outline",onClick:()=>_("price",0),className:"text-xs",children:"Kostenlos"}),a.jsx(K,{type:"button",variant:f.price===null?"default":"outline",onClick:()=>_("price",null),className:"text-xs",children:"k.A."}),a.jsx(K,{type:"button",variant:f.price&&f.price>0?"default":"outline",onClick:()=>_("price",1),className:"text-xs",children:"Kostenpflichtig"})]}),f.price&&f.price>0&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{children:a.jsx(Ee,{type:"number",placeholder:"Preis eingeben",value:f.price||"",onChange:S=>_("price",parseFloat(S.target.value)||1),className:"bg-background text-foreground border-input"})}),a.jsx("div",{children:a.jsxs(Qt,{value:f.currency||"CHF",onValueChange:S=>_("currency",S),children:[a.jsx($t,{className:"bg-background text-foreground border-input",children:a.jsx(Jt,{})}),a.jsxs(zt,{className:"bg-background text-foreground border-border",children:[a.jsx(ye,{value:"CHF",children:"CHF"}),a.jsx(ye,{value:"EUR",children:"EUR"}),a.jsx(ye,{value:"USD",children:"USD"})]})]})})]}),a.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Aktuelle Anzeige: ",a.jsx("span",{className:"font-medium",children:p(f.price,f.currency)})]})]})]})})]}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsxs(K,{variant:"outline",onClick:()=>c(!1),children:[a.jsx(ic,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),a.jsxs(K,{onClick:y,children:[a.jsx(fS,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})]})]})},HX=()=>a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(Fs,{}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-card-foreground mb-4",children:"Publikationen & Forschung"}),a.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Übersicht meiner wissenschaftlichen Publikationen und laufenden Forschungsprojekte in der Ophthalmologie und Chirurgie."})]}),a.jsx(fM,{})]})})]}),WX=()=>{const s=po(),[e,t]=j.useState(!1),[n,r]=j.useState("jose.obermann@hospital.ch"),[i,o]=j.useState("password123"),[l,c]=j.useState(""),[d,h]=j.useState(""),[f,m]=j.useState("1"),[p,x]=j.useState(""),v=async g=>{var y;g.preventDefault(),x(""),t(!0);try{console.log("[SimpleAuth] Attempting sign in with:",n),console.log("[SimpleAuth] Supabase URL:",se.supabaseUrl);const{data:b,error:_}=await se.auth.signInWithPassword({email:n,password:i});if(console.log("[SimpleAuth] Auth response:",{data:b,error:_}),_)throw console.error("[SimpleAuth] Sign in error:",_),_;console.log("[SimpleAuth] Sign in successful, user:",(y=b.user)==null?void 0:y.id),Ie.success("Anmeldung erfolgreich! Willkommen zurück!"),console.log("[SimpleAuth] Navigating to /dashboard"),s("/dashboard",{replace:!0})}catch(b){console.error("[SimpleAuth] Sign in error:",b);const _=b instanceof Error?b.message:"Anmeldung fehlgeschlagen";x(_),Ie.error(_)}finally{t(!1)}},w=async g=>{g.preventDefault(),x(""),t(!0);try{const{data:y,error:b}=await se.auth.signUp({email:n,password:i,options:{data:{full_name:l,institution:d,pgy_level:parseInt(f)}}});if(b)throw b;y.user&&(Ie.success("Registrierung erfolgreich! Bitte überprüfen Sie Ihre E-Mail für die Bestätigung."),y.session&&s("/dashboard",{replace:!0}))}catch(y){console.error("Sign up error:",y);const b=y instanceof Error?y.message:"Registrierung fehlgeschlagen";x(b),Ie.error(b)}finally{t(!1)}};return a.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"FMH Tracking"}),a.jsx("p",{className:"text-muted-foreground",children:"Melden Sie sich an oder erstellen Sie ein Konto"})]}),a.jsxs(G,{className:"medical-card",children:[a.jsx(Ae,{children:a.jsx(ke,{className:"text-center",children:"Authentifizierung"})}),a.jsx(ce,{children:a.jsxs(_r,{defaultValue:"signin",className:"w-full",children:[a.jsxs(Jn,{className:"grid w-full grid-cols-2",children:[a.jsx(Ue,{value:"signin",children:"Anmelden"}),a.jsx(Ue,{value:"signup",children:"Registrieren"})]}),a.jsx(He,{value:"signin",children:a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"signin-email",children:"E-Mail"}),a.jsxs("div",{className:"relative",children:[a.jsx(ZE,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{id:"signin-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:n,onChange:g=>r(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"signin-password",children:"Passwort"}),a.jsxs("div",{className:"relative",children:[a.jsx(ij,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{id:"signin-password",type:"password",placeholder:"Ihr Passwort",value:i,onChange:g=>o(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),p&&a.jsx(ti,{variant:"destructive",children:a.jsx(si,{children:p})}),a.jsxs(K,{type:"submit",className:"w-full",disabled:e,children:[e&&a.jsx(JE,{className:"mr-2 h-4 w-4 animate-spin"}),"Anmelden"]})]})}),a.jsx(He,{value:"signup",children:a.jsxs("form",{onSubmit:w,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"signup-name",children:"Vollständiger Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(ap,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{id:"signup-name",type:"text",placeholder:"Dr. Max Mustermann",value:l,onChange:g=>c(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"signup-email",children:"E-Mail"}),a.jsxs("div",{className:"relative",children:[a.jsx(ZE,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{id:"signup-email",type:"email",placeholder:"ihre.email@beispiel.ch",value:n,onChange:g=>r(g.target.value),className:"pl-10",required:!0,disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"signup-password",children:"Passwort"}),a.jsxs("div",{className:"relative",children:[a.jsx(ij,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{id:"signup-password",type:"password",placeholder:"Mindestens 6 Zeichen",value:i,onChange:g=>o(g.target.value),className:"pl-10",required:!0,disabled:e,minLength:6})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"signup-institution",children:"Institution"}),a.jsxs("div",{className:"relative",children:[a.jsx(J0,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsx(Ee,{id:"signup-institution",type:"text",placeholder:"Universitätsspital Zürich",value:d,onChange:g=>h(g.target.value),className:"pl-10",disabled:e})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(he,{htmlFor:"signup-pgy",children:"PGY Level"}),a.jsxs("div",{className:"relative",children:[a.jsx(hS,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),a.jsxs("select",{id:"signup-pgy",value:f,onChange:g=>m(g.target.value),className:"w-full pl-10 pr-3 py-2 border border-input bg-background rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring",disabled:e,children:[a.jsx("option",{value:"1",children:"PGY-1"}),a.jsx("option",{value:"2",children:"PGY-2"}),a.jsx("option",{value:"3",children:"PGY-3"}),a.jsx("option",{value:"4",children:"PGY-4"}),a.jsx("option",{value:"5",children:"PGY-5"}),a.jsx("option",{value:"6",children:"PGY-6"}),a.jsx("option",{value:"7",children:"PGY-7"})]})]})]}),p&&a.jsx(ti,{variant:"destructive",children:a.jsx(si,{children:p})}),a.jsxs(K,{type:"submit",className:"w-full",disabled:e,children:[e&&a.jsx(JE,{className:"mr-2 h-4 w-4 animate-spin"}),"Registrieren"]})]})})]})})]})]})})};function VX(){const s=po();return j.useEffect(()=>{const e=async()=>{try{const{data:{session:n}}=await se.auth.getSession();n&&(console.log("[AuthNew] User already logged in, navigating to /dashboard"),s("/dashboard",{replace:!0}))}catch{console.log("[AuthNew] Session check failed, showing login form")}},t=setTimeout(()=>{console.log("[AuthNew] Session check timeout - showing login form")},1e3);e().finally(()=>clearTimeout(t))},[s]),a.jsx(WX,{})}const GX=()=>{const s=fu();return j.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};class qX extends j.Component{constructor(t){super(t);q(this,"retryTimeout");q(this,"handleOnline",()=>{console.log("[AuthErrorBoundary] Back online"),this.setState({isOnline:!0}),this.handleRetry()});q(this,"handleOffline",()=>{console.log("[AuthErrorBoundary] Gone offline"),this.setState({isOnline:!1})});q(this,"handleRetry",()=>{this.retryTimeout&&clearTimeout(this.retryTimeout),this.setState(t=>({hasError:!1,error:void 0,errorInfo:void 0,retryCount:t.retryCount+1})),setTimeout(()=>{window.location.reload()},100)});q(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,retryCount:0})});this.state={hasError:!1,retryCount:0,isOnline:navigator.onLine}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("AuthErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}componentDidMount(){window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline)}componentWillUnmount(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),this.retryTimeout&&clearTimeout(this.retryTimeout)}render(){var t,n,r;if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:i,retryCount:o,isOnline:l}=this.state,c=((t=i==null?void 0:i.message)==null?void 0:t.includes("auth"))||((n=i==null?void 0:i.message)==null?void 0:n.includes("session"))||((r=i==null?void 0:i.message)==null?void 0:r.includes("profile"));return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:a.jsxs(G,{className:"w-full max-w-md",children:[a.jsxs(Ae,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-red-100",children:a.jsx(Xi,{className:"h-6 w-6 text-red-600"})}),a.jsx(ke,{className:"text-xl",children:c?"Authentifizierungsfehler":"Anwendungsfehler"})]}),a.jsxs(ce,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l?a.jsx(b$,{className:"h-4 w-4 text-green-500"}):a.jsx(GT,{className:"h-4 w-4 text-red-500"}),a.jsx("span",{className:l?"text-green-600":"text-red-600",children:l?"Online":"Offline"})]}),a.jsx("p",{className:"text-sm text-muted-foreground text-center",children:c?"Es gab ein Problem mit der Anmeldung. Bitte versuchen Sie es erneut.":"Die Anwendung ist auf einen unerwarteten Fehler gestoßen."}),o>0&&a.jsxs(ti,{children:[a.jsx(Xi,{className:"h-4 w-4"}),a.jsxs(si,{children:["Wiederholungsversuch ",o," von 3"]})]}),!1,a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsxs(K,{onClick:this.handleRetry,variant:"outline",disabled:!l,children:[a.jsx(aj,{className:"w-4 h-4 mr-2"}),l?"Erneut versuchen":"Warten auf Verbindung..."]}),a.jsx(K,{onClick:()=>window.location.reload(),children:"Seite neu laden"})]}),o>=3&&a.jsxs(ti,{variant:"destructive",children:[a.jsx(Xi,{className:"h-4 w-4"}),a.jsx(si,{children:"Mehrere Wiederholungsversuche fehlgeschlagen. Bitte überprüfen Sie Ihre Internetverbindung oder kontaktieren Sie den Support."})]})]})]})})}return this.props.children}}const KX=({healthStatus:s,onRefresh:e,onRetry:t,className:n=""})=>{const[r,i]=j.useState(!1),o=()=>s.isOnline?s.isHealthy?s.errorCount>0?a.jsx(Xi,{className:"h-4 w-4 text-yellow-500"}):a.jsx(Vi,{className:"h-4 w-4 text-green-500"}):a.jsx(o$,{className:"h-4 w-4 text-red-500"}):a.jsx(GT,{className:"h-4 w-4 text-red-500"}),l=()=>s.isOnline?s.isHealthy?s.errorCount>0?"Degraded":"Healthy":"Backend Error":"Offline",c=()=>!s.isOnline||!s.isHealthy?"destructive":s.errorCount>0?"secondary":"default",d=f=>f===0?"Nie":new Date(f).toLocaleTimeString("de-DE"),h=f=>f<1e3?`${f}ms`:`${(f/1e3).toFixed(1)}s`;return r?a.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${n}`,children:a.jsxs(G,{className:"w-80",children:[a.jsx(Ae,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ke,{className:"text-sm flex items-center gap-2",children:[a.jsx(sj,{className:"h-4 w-4"}),"Auth Health Monitor"]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(K,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0",children:a.jsx(aj,{className:"h-3 w-3"})}),a.jsx(K,{variant:"ghost",size:"sm",onClick:()=>i(!1),className:"h-6 w-6 p-0",children:"×"})]})]})}),a.jsxs(ce,{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[o(),a.jsx("span",{className:"text-sm font-medium",children:l()})]}),a.jsx(Y,{variant:c(),children:s.isOnline?"Online":"Offline"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Letzte Prüfung:"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(rc,{className:"h-3 w-3"}),d(s.lastCheck)]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted-foreground",children:"Antwortzeit:"}),a.jsx("div",{children:h(s.responseTime)})]})]}),(s.errorCount>0||s.retryCount>0)&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Fehlerstatistiken:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:["Fehler: ",s.errorCount]}),a.jsxs("div",{children:["Wiederholungen: ",s.retryCount]})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Circuit Breaker:"}),a.jsx(Y,{variant:s.circuitBreakerState==="OPEN"?"destructive":s.circuitBreakerState==="HALF_OPEN"?"secondary":"default",className:"text-xs",children:s.circuitBreakerState})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-xs text-muted-foreground",children:"Cache:"}),a.jsxs("div",{className:"text-xs",children:[s.cacheStats.size," Einträge"]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsxs(K,{variant:"outline",size:"sm",onClick:t,disabled:!s.isOnline,className:"flex-1",children:[a.jsx(aj,{className:"h-3 w-3 mr-1"}),"Retry"]}),a.jsx(K,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"flex-1",children:"Reload"})]})]})]})}):a.jsx("div",{className:`fixed bottom-4 right-4 z-50 ${n}`,children:a.jsxs(K,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"flex items-center gap-2",children:[o(),a.jsx("span",{className:"text-xs",children:l()})]})})},YX=new rz({defaultOptions:{queries:{retry:3,retryDelay:s=>Math.min(1e3*2**s,3e4),staleTime:5*60*1e3,cacheTime:10*60*1e3},mutations:{retry:2,retryDelay:s=>Math.min(1e3*2**s,1e4)}}}),XX=()=>{const s=po();return j.useEffect(()=>{const e=window.location.search;if(e.startsWith("?/")){const t=e.slice(2);window.history.replaceState(null,"",t||"/"),s(t||"/")}},[s]),a.jsxs(Xz,{children:[a.jsx(on,{path:"/",element:a.jsx(IU,{})}),a.jsx(on,{path:"/auth",element:a.jsx(VX,{})}),a.jsx(on,{path:"/dashboard",element:a.jsx(tH,{})}),a.jsx(on,{path:"/courses",element:a.jsx(a7,{})}),a.jsx(on,{path:"/courses/:id",element:a.jsx(R7,{})}),a.jsx(on,{path:"/publications",element:a.jsx(HX,{})}),a.jsx(on,{path:"/profile/:handle",element:a.jsx(nH,{})}),a.jsx(on,{path:"/fmh",element:a.jsx(bq,{})}),a.jsx(on,{path:"/supervisor",element:a.jsx(jq,{})}),a.jsx(on,{path:"/features",element:a.jsx(Aq,{})}),a.jsx(on,{path:"/contact",element:a.jsx(Eq,{})}),a.jsx(on,{path:"/admin",element:a.jsx(UX,{})}),a.jsx(on,{path:"*",element:a.jsx(GX,{})})]})},QX=()=>{const{retryAuth:s,refreshProfile:e}=ci(),[t,n]=j.useState({isOnline:navigator.onLine,isHealthy:!0,lastCheck:Date.now(),responseTime:0,errorCount:0,retryCount:0,circuitBreakerState:"CLOSED",cacheStats:{size:0,keys:[]}}),r=async()=>{const o=Date.now();try{await e(),n(l=>({...l,isHealthy:!0,lastCheck:Date.now(),responseTime:Date.now()-o,errorCount:0}))}catch{n(c=>({...c,isHealthy:!1,lastCheck:Date.now(),responseTime:Date.now()-o,errorCount:c.errorCount+1}))}},i=async()=>{n(o=>({...o,retryCount:o.retryCount+1})),await s()};return j.useEffect(()=>{const o=()=>n(c=>({...c,isOnline:!0})),l=()=>n(c=>({...c,isOnline:!1}));return window.addEventListener("online",o),window.addEventListener("offline",l),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",l)}},[]),a.jsx(KX,{healthStatus:t,onRefresh:r,onRetry:i})},JX=()=>a.jsx(az,{client:YX,children:a.jsx(EU,{children:a.jsxs(qX,{children:[a.jsx(n6,{}),a.jsx(D6,{}),a.jsx(rB,{basename:"/swiss-med-track",children:a.jsx(XX,{})}),a.jsx(QX,{})]})})});fT(document.getElementById("root")).render(a.jsx(JX,{}));
