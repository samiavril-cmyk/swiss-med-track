var wO=Object.defineProperty;var QC=n=>{throw TypeError(n)};var bO=(n,e,t)=>e in n?wO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Y=(n,e,t)=>bO(n,typeof e!="symbol"?e+"":e,t),sb=(n,e,t)=>e.has(n)||QC("Cannot "+t);var d=(n,e,t)=>(sb(n,e,"read from private field"),t?t.call(n):e.get(n)),N=(n,e,t)=>e.has(n)?QC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),E=(n,e,t,r)=>(sb(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),P=(n,e,t)=>(sb(n,e,"access private method"),t);var Zt=(n,e,t,r)=>({set _(s){E(n,e,s,t)},get _(){return d(n,e,r)}});function _O(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _P(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function SO(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var SP={exports:{}},sw={},EP={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv=Symbol.for("react.element"),EO=Symbol.for("react.portal"),CO=Symbol.for("react.fragment"),AO=Symbol.for("react.strict_mode"),kO=Symbol.for("react.profiler"),NO=Symbol.for("react.provider"),PO=Symbol.for("react.context"),jO=Symbol.for("react.forward_ref"),TO=Symbol.for("react.suspense"),RO=Symbol.for("react.memo"),MO=Symbol.for("react.lazy"),JC=Symbol.iterator;function IO(n){return n===null||typeof n!="object"?null:(n=JC&&n[JC]||n["@@iterator"],typeof n=="function"?n:null)}var CP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AP=Object.assign,kP={};function Gf(n,e,t){this.props=n,this.context=e,this.refs=kP,this.updater=t||CP}Gf.prototype.isReactComponent={};Gf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Gf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function NP(){}NP.prototype=Gf.prototype;function S2(n,e,t){this.props=n,this.context=e,this.refs=kP,this.updater=t||CP}var E2=S2.prototype=new NP;E2.constructor=S2;AP(E2,Gf.prototype);E2.isPureReactComponent=!0;var ZC=Array.isArray,PP=Object.prototype.hasOwnProperty,C2={current:null},jP={key:!0,ref:!0,__self:!0,__source:!0};function TP(n,e,t){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)PP.call(e,r)&&!jP.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];s.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:bv,type:n,key:i,ref:a,props:s,_owner:C2.current}}function DO(n,e){return{$$typeof:bv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function A2(n){return typeof n=="object"&&n!==null&&n.$$typeof===bv}function LO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var eA=/\/+/g;function ib(n,e){return typeof n=="object"&&n!==null&&n.key!=null?LO(""+n.key):e.toString(36)}function B0(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case bv:case EO:a=!0}}if(a)return a=n,s=s(a),n=r===""?"."+ib(a,0):r,ZC(s)?(t="",n!=null&&(t=n.replace(eA,"$&/")+"/"),B0(s,e,t,"",function(u){return u})):s!=null&&(A2(s)&&(s=DO(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(eA,"$&/")+"/")+n)),e.push(s)),1;if(a=0,r=r===""?".":r+":",ZC(n))for(var o=0;o<n.length;o++){i=n[o];var l=r+ib(i,o);a+=B0(i,e,t,l,s)}else if(l=IO(n),typeof l=="function")for(n=l.call(n),o=0;!(i=n.next()).done;)i=i.value,l=r+ib(i,o++),a+=B0(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function t0(n,e,t){if(n==null)return n;var r=[],s=0;return B0(n,r,"","",function(i){return e.call(t,i,s++)}),r}function OO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Jn={current:null},z0={transition:null},FO={ReactCurrentDispatcher:Jn,ReactCurrentBatchConfig:z0,ReactCurrentOwner:C2};function RP(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:t0,forEach:function(n,e,t){t0(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return t0(n,function(){e++}),e},toArray:function(n){return t0(n,function(e){return e})||[]},only:function(n){if(!A2(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Te.Component=Gf;Te.Fragment=CO;Te.Profiler=kO;Te.PureComponent=S2;Te.StrictMode=AO;Te.Suspense=TO;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FO;Te.act=RP;Te.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=AP({},n.props),s=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=C2.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)PP.call(e,l)&&!jP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:bv,type:n.type,key:s,ref:i,props:r,_owner:a}};Te.createContext=function(n){return n={$$typeof:PO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:NO,_context:n},n.Consumer=n};Te.createElement=TP;Te.createFactory=function(n){var e=TP.bind(null,n);return e.type=n,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(n){return{$$typeof:jO,render:n}};Te.isValidElement=A2;Te.lazy=function(n){return{$$typeof:MO,_payload:{_status:-1,_result:n},_init:OO}};Te.memo=function(n,e){return{$$typeof:RO,type:n,compare:e===void 0?null:e}};Te.startTransition=function(n){var e=z0.transition;z0.transition={};try{n()}finally{z0.transition=e}};Te.unstable_act=RP;Te.useCallback=function(n,e){return Jn.current.useCallback(n,e)};Te.useContext=function(n){return Jn.current.useContext(n)};Te.useDebugValue=function(){};Te.useDeferredValue=function(n){return Jn.current.useDeferredValue(n)};Te.useEffect=function(n,e){return Jn.current.useEffect(n,e)};Te.useId=function(){return Jn.current.useId()};Te.useImperativeHandle=function(n,e,t){return Jn.current.useImperativeHandle(n,e,t)};Te.useInsertionEffect=function(n,e){return Jn.current.useInsertionEffect(n,e)};Te.useLayoutEffect=function(n,e){return Jn.current.useLayoutEffect(n,e)};Te.useMemo=function(n,e){return Jn.current.useMemo(n,e)};Te.useReducer=function(n,e,t){return Jn.current.useReducer(n,e,t)};Te.useRef=function(n){return Jn.current.useRef(n)};Te.useState=function(n){return Jn.current.useState(n)};Te.useSyncExternalStore=function(n,e,t){return Jn.current.useSyncExternalStore(n,e,t)};Te.useTransition=function(){return Jn.current.useTransition()};Te.version="18.3.1";EP.exports=Te;var b=EP.exports;const D=_P(b),k2=_O({__proto__:null,default:D},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $O=b,BO=Symbol.for("react.element"),zO=Symbol.for("react.fragment"),UO=Object.prototype.hasOwnProperty,HO=$O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WO={key:!0,ref:!0,__self:!0,__source:!0};function MP(n,e,t){var r,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)UO.call(e,r)&&!WO.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:BO,type:n,key:i,ref:a,props:s,_owner:HO.current}}sw.Fragment=zO;sw.jsx=MP;sw.jsxs=MP;SP.exports=sw;var c=SP.exports,IP={exports:{}},Vr={},DP={exports:{}},LP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,U){var V=L.length;L.push(U);e:for(;0<V;){var J=V-1>>>1,z=L[J];if(0<s(z,U))L[J]=U,L[V]=z,V=J;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var U=L[0],V=L.pop();if(V!==U){L[0]=V;e:for(var J=0,z=L.length,G=z>>>1;J<G;){var X=2*(J+1)-1,K=L[X],ce=X+1,H=L[ce];if(0>s(K,V))ce<z&&0>s(H,K)?(L[J]=H,L[ce]=V,J=ce):(L[J]=K,L[X]=V,J=X);else if(ce<z&&0>s(H,V))L[J]=H,L[ce]=V,J=ce;else break e}}return U}function s(L,U){var V=L.sortIndex-U.sortIndex;return V!==0?V:L.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,f=null,p=3,m=!1,y=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(L){for(var U=t(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=L)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(u)}}function S(L){if(g=!1,_(L),!y)if(t(l)!==null)y=!0,B(C);else{var U=t(u);U!==null&&F(S,U.startTime-L)}}function C(L,U){y=!1,g&&(g=!1,v(j),j=-1),m=!0;var V=p;try{for(_(U),f=t(l);f!==null&&(!(f.expirationTime>U)||L&&!I());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var z=J(f.expirationTime<=U);U=n.unstable_now(),typeof z=="function"?f.callback=z:f===t(l)&&r(l),_(U)}else r(l);f=t(l)}if(f!==null)var G=!0;else{var X=t(u);X!==null&&F(S,X.startTime-U),G=!1}return G}finally{f=null,p=V,m=!1}}var A=!1,k=null,j=-1,T=5,M=-1;function I(){return!(n.unstable_now()-M<T)}function R(){if(k!==null){var L=n.unstable_now();M=L;var U=!0;try{U=k(!0,L)}finally{U?$():(A=!1,k=null)}}else A=!1}var $;if(typeof w=="function")$=function(){w(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,W=O.port2;O.port1.onmessage=R,$=function(){W.postMessage(null)}}else $=function(){x(R,0)};function B(L){k=L,A||(A=!0,$())}function F(L,U){j=x(function(){L(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,B(C))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var V=p;p=U;try{return L()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,U){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=p;p=L;try{return U()}finally{p=V}},n.unstable_scheduleCallback=function(L,U,V){var J=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,L){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=V+z,L={id:h++,callback:U,priorityLevel:L,startTime:V,expirationTime:z,sortIndex:-1},V>J?(L.sortIndex=V,e(u,L),t(l)===null&&L===t(u)&&(g?(v(j),j=-1):g=!0,F(S,V-J))):(L.sortIndex=z,e(l,L),y||m||(y=!0,B(C))),L},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(L){var U=p;return function(){var V=p;p=U;try{return L.apply(this,arguments)}finally{p=V}}}})(LP);DP.exports=LP;var VO=DP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GO=b,Hr=VO;function q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OP=new Set,mm={};function td(n,e){Pf(n,e),Pf(n+"Capture",e)}function Pf(n,e){for(mm[n]=e,n=0;n<e.length;n++)OP.add(e[n])}var Qa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_1=Object.prototype.hasOwnProperty,qO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tA={},nA={};function YO(n){return _1.call(nA,n)?!0:_1.call(tA,n)?!1:qO.test(n)?nA[n]=!0:(tA[n]=!0,!1)}function KO(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function XO(n,e,t,r){if(e===null||typeof e>"u"||KO(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zn(n,e,t,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var _n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_n[n]=new Zn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];_n[e]=new Zn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){_n[n]=new Zn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_n[n]=new Zn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_n[n]=new Zn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){_n[n]=new Zn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){_n[n]=new Zn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){_n[n]=new Zn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){_n[n]=new Zn(n,5,!1,n.toLowerCase(),null,!1,!1)});var N2=/[\-:]([a-z])/g;function P2(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(N2,P2);_n[e]=new Zn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(N2,P2);_n[e]=new Zn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(N2,P2);_n[e]=new Zn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){_n[n]=new Zn(n,1,!1,n.toLowerCase(),null,!1,!1)});_n.xlinkHref=new Zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){_n[n]=new Zn(n,1,!1,n.toLowerCase(),null,!0,!0)});function j2(n,e,t,r){var s=_n.hasOwnProperty(e)?_n[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XO(e,t,s,r)&&(t=null),r||s===null?YO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ao=GO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,n0=Symbol.for("react.element"),Ld=Symbol.for("react.portal"),Od=Symbol.for("react.fragment"),T2=Symbol.for("react.strict_mode"),S1=Symbol.for("react.profiler"),FP=Symbol.for("react.provider"),$P=Symbol.for("react.context"),R2=Symbol.for("react.forward_ref"),E1=Symbol.for("react.suspense"),C1=Symbol.for("react.suspense_list"),M2=Symbol.for("react.memo"),Eo=Symbol.for("react.lazy"),BP=Symbol.for("react.offscreen"),rA=Symbol.iterator;function cp(n){return n===null||typeof n!="object"?null:(n=rA&&n[rA]||n["@@iterator"],typeof n=="function"?n:null)}var _t=Object.assign,ab;function Ap(n){if(ab===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ab=e&&e[1]||""}return`
`+ab+n}var ob=!1;function lb(n,e){if(!n||ob)return"";ob=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{ob=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ap(n):""}function QO(n){switch(n.tag){case 5:return Ap(n.type);case 16:return Ap("Lazy");case 13:return Ap("Suspense");case 19:return Ap("SuspenseList");case 0:case 2:case 15:return n=lb(n.type,!1),n;case 11:return n=lb(n.type.render,!1),n;case 1:return n=lb(n.type,!0),n;default:return""}}function A1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Od:return"Fragment";case Ld:return"Portal";case S1:return"Profiler";case T2:return"StrictMode";case E1:return"Suspense";case C1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case $P:return(n.displayName||"Context")+".Consumer";case FP:return(n._context.displayName||"Context")+".Provider";case R2:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case M2:return e=n.displayName||null,e!==null?e:A1(n.type)||"Memo";case Eo:e=n._payload,n=n._init;try{return A1(n(e))}catch{}}return null}function JO(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A1(e);case 8:return e===T2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ol(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function zP(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZO(n){var e=zP(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function r0(n){n._valueTracker||(n._valueTracker=ZO(n))}function UP(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=zP(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function zy(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function k1(n,e){var t=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function sA(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ol(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HP(n,e){e=e.checked,e!=null&&j2(n,"checked",e,!1)}function N1(n,e){HP(n,e);var t=Ol(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?P1(n,e.type,t):e.hasOwnProperty("defaultValue")&&P1(n,e.type,Ol(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function iA(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function P1(n,e,t){(e!=="number"||zy(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var kp=Array.isArray;function Jd(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ol(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function j1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function aA(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(q(92));if(kp(t)){if(1<t.length)throw Error(q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ol(t)}}function WP(n,e){var t=Ol(e.value),r=Ol(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function oA(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function VP(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function T1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?VP(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var s0,GP=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(s0=s0||document.createElement("div"),s0.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=s0.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function gm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e5=["Webkit","ms","Moz","O"];Object.keys(Jp).forEach(function(n){e5.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Jp[e]=Jp[n]})});function qP(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Jp.hasOwnProperty(n)&&Jp[n]?(""+e).trim():e+"px"}function YP(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=qP(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var t5=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R1(n,e){if(e){if(t5[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function M1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I1=null;function I2(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var D1=null,Zd=null,eh=null;function lA(n){if(n=Ev(n)){if(typeof D1!="function")throw Error(q(280));var e=n.stateNode;e&&(e=cw(e),D1(n.stateNode,n.type,e))}}function KP(n){Zd?eh?eh.push(n):eh=[n]:Zd=n}function XP(){if(Zd){var n=Zd,e=eh;if(eh=Zd=null,lA(n),e)for(n=0;n<e.length;n++)lA(e[n])}}function QP(n,e){return n(e)}function JP(){}var cb=!1;function ZP(n,e,t){if(cb)return n(e,t);cb=!0;try{return QP(n,e,t)}finally{cb=!1,(Zd!==null||eh!==null)&&(JP(),XP())}}function vm(n,e){var t=n.stateNode;if(t===null)return null;var r=cw(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(q(231,e,typeof t));return t}var L1=!1;if(Qa)try{var up={};Object.defineProperty(up,"passive",{get:function(){L1=!0}}),window.addEventListener("test",up,up),window.removeEventListener("test",up,up)}catch{L1=!1}function n5(n,e,t,r,s,i,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Zp=!1,Uy=null,Hy=!1,O1=null,r5={onError:function(n){Zp=!0,Uy=n}};function s5(n,e,t,r,s,i,a,o,l){Zp=!1,Uy=null,n5.apply(r5,arguments)}function i5(n,e,t,r,s,i,a,o,l){if(s5.apply(this,arguments),Zp){if(Zp){var u=Uy;Zp=!1,Uy=null}else throw Error(q(198));Hy||(Hy=!0,O1=u)}}function nd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ej(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function cA(n){if(nd(n)!==n)throw Error(q(188))}function a5(n){var e=n.alternate;if(!e){if(e=nd(n),e===null)throw Error(q(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return cA(s),n;if(i===r)return cA(s),e;i=i.sibling}throw Error(q(188))}if(t.return!==r.return)t=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a)throw Error(q(189))}}if(t.alternate!==r)throw Error(q(190))}if(t.tag!==3)throw Error(q(188));return t.stateNode.current===t?n:e}function tj(n){return n=a5(n),n!==null?nj(n):null}function nj(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=nj(n);if(e!==null)return e;n=n.sibling}return null}var rj=Hr.unstable_scheduleCallback,uA=Hr.unstable_cancelCallback,o5=Hr.unstable_shouldYield,l5=Hr.unstable_requestPaint,Tt=Hr.unstable_now,c5=Hr.unstable_getCurrentPriorityLevel,D2=Hr.unstable_ImmediatePriority,sj=Hr.unstable_UserBlockingPriority,Wy=Hr.unstable_NormalPriority,u5=Hr.unstable_LowPriority,ij=Hr.unstable_IdlePriority,iw=null,zi=null;function d5(n){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(iw,n,void 0,(n.current.flags&128)===128)}catch{}}var Gs=Math.clz32?Math.clz32:p5,h5=Math.log,f5=Math.LN2;function p5(n){return n>>>=0,n===0?32:31-(h5(n)/f5|0)|0}var i0=64,a0=4194304;function Np(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Vy(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?r=Np(o):(i&=a,i!==0&&(r=Np(i)))}else a=t&~s,a!==0?r=Np(a):i!==0&&(r=Np(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Gs(e),s=1<<t,r|=n[t],e&=~s;return r}function m5(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g5(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-Gs(i),o=1<<a,l=s[a];l===-1?(!(o&t)||o&r)&&(s[a]=m5(o,e)):l<=e&&(n.expiredLanes|=o),i&=~o}}function F1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function aj(){var n=i0;return i0<<=1,!(i0&4194240)&&(i0=64),n}function ub(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function _v(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Gs(e),n[e]=t}function v5(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-Gs(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function L2(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Gs(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Ye=0;function oj(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var lj,O2,cj,uj,dj,$1=!1,o0=[],Al=null,kl=null,Nl=null,ym=new Map,xm=new Map,Ao=[],y5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dA(n,e){switch(n){case"focusin":case"focusout":Al=null;break;case"dragenter":case"dragleave":kl=null;break;case"mouseover":case"mouseout":Nl=null;break;case"pointerover":case"pointerout":ym.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xm.delete(e.pointerId)}}function dp(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ev(e),e!==null&&O2(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function x5(n,e,t,r,s){switch(e){case"focusin":return Al=dp(Al,n,e,t,r,s),!0;case"dragenter":return kl=dp(kl,n,e,t,r,s),!0;case"mouseover":return Nl=dp(Nl,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return ym.set(i,dp(ym.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xm.set(i,dp(xm.get(i)||null,n,e,t,r,s)),!0}return!1}function hj(n){var e=wc(n.target);if(e!==null){var t=nd(e);if(t!==null){if(e=t.tag,e===13){if(e=ej(t),e!==null){n.blockedOn=e,dj(n.priority,function(){cj(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function U0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=B1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);I1=r,t.target.dispatchEvent(r),I1=null}else return e=Ev(t),e!==null&&O2(e),n.blockedOn=t,!1;e.shift()}return!0}function hA(n,e,t){U0(n)&&t.delete(e)}function w5(){$1=!1,Al!==null&&U0(Al)&&(Al=null),kl!==null&&U0(kl)&&(kl=null),Nl!==null&&U0(Nl)&&(Nl=null),ym.forEach(hA),xm.forEach(hA)}function hp(n,e){n.blockedOn===e&&(n.blockedOn=null,$1||($1=!0,Hr.unstable_scheduleCallback(Hr.unstable_NormalPriority,w5)))}function wm(n){function e(s){return hp(s,n)}if(0<o0.length){hp(o0[0],n);for(var t=1;t<o0.length;t++){var r=o0[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Al!==null&&hp(Al,n),kl!==null&&hp(kl,n),Nl!==null&&hp(Nl,n),ym.forEach(e),xm.forEach(e),t=0;t<Ao.length;t++)r=Ao[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ao.length&&(t=Ao[0],t.blockedOn===null);)hj(t),t.blockedOn===null&&Ao.shift()}var th=ao.ReactCurrentBatchConfig,Gy=!0;function b5(n,e,t,r){var s=Ye,i=th.transition;th.transition=null;try{Ye=1,F2(n,e,t,r)}finally{Ye=s,th.transition=i}}function _5(n,e,t,r){var s=Ye,i=th.transition;th.transition=null;try{Ye=4,F2(n,e,t,r)}finally{Ye=s,th.transition=i}}function F2(n,e,t,r){if(Gy){var s=B1(n,e,t,r);if(s===null)wb(n,e,r,qy,t),dA(n,r);else if(x5(s,n,e,t,r))r.stopPropagation();else if(dA(n,r),e&4&&-1<y5.indexOf(n)){for(;s!==null;){var i=Ev(s);if(i!==null&&lj(i),i=B1(n,e,t,r),i===null&&wb(n,e,r,qy,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else wb(n,e,r,null,t)}}var qy=null;function B1(n,e,t,r){if(qy=null,n=I2(r),n=wc(n),n!==null)if(e=nd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ej(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qy=n,null}function fj(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c5()){case D2:return 1;case sj:return 4;case Wy:case u5:return 16;case ij:return 536870912;default:return 16}default:return 16}}var Sl=null,$2=null,H0=null;function pj(){if(H0)return H0;var n,e=$2,t=e.length,r,s="value"in Sl?Sl.value:Sl.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===s[i-r];r++);return H0=s.slice(n,1<r?1-r:void 0)}function W0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function l0(){return!0}function fA(){return!1}function Gr(n){function e(t,r,s,i,a){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?l0:fA,this.isPropagationStopped=fA,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=l0)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=l0)},persist:function(){},isPersistent:l0}),e}var qf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B2=Gr(qf),Sv=_t({},qf,{view:0,detail:0}),S5=Gr(Sv),db,hb,fp,aw=_t({},Sv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:z2,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==fp&&(fp&&n.type==="mousemove"?(db=n.screenX-fp.screenX,hb=n.screenY-fp.screenY):hb=db=0,fp=n),db)},movementY:function(n){return"movementY"in n?n.movementY:hb}}),pA=Gr(aw),E5=_t({},aw,{dataTransfer:0}),C5=Gr(E5),A5=_t({},Sv,{relatedTarget:0}),fb=Gr(A5),k5=_t({},qf,{animationName:0,elapsedTime:0,pseudoElement:0}),N5=Gr(k5),P5=_t({},qf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),j5=Gr(P5),T5=_t({},qf,{data:0}),mA=Gr(T5),R5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D5(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=I5[n])?!!e[n]:!1}function z2(){return D5}var L5=_t({},Sv,{key:function(n){if(n.key){var e=R5[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=W0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?M5[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:z2,charCode:function(n){return n.type==="keypress"?W0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?W0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),O5=Gr(L5),F5=_t({},aw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gA=Gr(F5),$5=_t({},Sv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:z2}),B5=Gr($5),z5=_t({},qf,{propertyName:0,elapsedTime:0,pseudoElement:0}),U5=Gr(z5),H5=_t({},aw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),W5=Gr(H5),V5=[9,13,27,32],U2=Qa&&"CompositionEvent"in window,em=null;Qa&&"documentMode"in document&&(em=document.documentMode);var G5=Qa&&"TextEvent"in window&&!em,mj=Qa&&(!U2||em&&8<em&&11>=em),vA=" ",yA=!1;function gj(n,e){switch(n){case"keyup":return V5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vj(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fd=!1;function q5(n,e){switch(n){case"compositionend":return vj(e);case"keypress":return e.which!==32?null:(yA=!0,vA);case"textInput":return n=e.data,n===vA&&yA?null:n;default:return null}}function Y5(n,e){if(Fd)return n==="compositionend"||!U2&&gj(n,e)?(n=pj(),H0=$2=Sl=null,Fd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mj&&e.locale!=="ko"?null:e.data;default:return null}}var K5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!K5[n.type]:e==="textarea"}function yj(n,e,t,r){KP(r),e=Yy(e,"onChange"),0<e.length&&(t=new B2("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var tm=null,bm=null;function X5(n){Pj(n,0)}function ow(n){var e=zd(n);if(UP(e))return n}function Q5(n,e){if(n==="change")return e}var xj=!1;if(Qa){var pb;if(Qa){var mb="oninput"in document;if(!mb){var wA=document.createElement("div");wA.setAttribute("oninput","return;"),mb=typeof wA.oninput=="function"}pb=mb}else pb=!1;xj=pb&&(!document.documentMode||9<document.documentMode)}function bA(){tm&&(tm.detachEvent("onpropertychange",wj),bm=tm=null)}function wj(n){if(n.propertyName==="value"&&ow(bm)){var e=[];yj(e,bm,n,I2(n)),ZP(X5,e)}}function J5(n,e,t){n==="focusin"?(bA(),tm=e,bm=t,tm.attachEvent("onpropertychange",wj)):n==="focusout"&&bA()}function Z5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ow(bm)}function e6(n,e){if(n==="click")return ow(e)}function t6(n,e){if(n==="input"||n==="change")return ow(e)}function n6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ys=typeof Object.is=="function"?Object.is:n6;function _m(n,e){if(Ys(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!_1.call(e,s)||!Ys(n[s],e[s]))return!1}return!0}function _A(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function SA(n,e){var t=_A(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=_A(t)}}function bj(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?bj(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function _j(){for(var n=window,e=zy();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=zy(n.document)}return e}function H2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function r6(n){var e=_j(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&bj(t.ownerDocument.documentElement,t)){if(r!==null&&H2(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=SA(t,i);var a=SA(t,r);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var s6=Qa&&"documentMode"in document&&11>=document.documentMode,$d=null,z1=null,nm=null,U1=!1;function EA(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;U1||$d==null||$d!==zy(r)||(r=$d,"selectionStart"in r&&H2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nm&&_m(nm,r)||(nm=r,r=Yy(z1,"onSelect"),0<r.length&&(e=new B2("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=$d)))}function c0(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Bd={animationend:c0("Animation","AnimationEnd"),animationiteration:c0("Animation","AnimationIteration"),animationstart:c0("Animation","AnimationStart"),transitionend:c0("Transition","TransitionEnd")},gb={},Sj={};Qa&&(Sj=document.createElement("div").style,"AnimationEvent"in window||(delete Bd.animationend.animation,delete Bd.animationiteration.animation,delete Bd.animationstart.animation),"TransitionEvent"in window||delete Bd.transitionend.transition);function lw(n){if(gb[n])return gb[n];if(!Bd[n])return n;var e=Bd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Sj)return gb[n]=e[t];return n}var Ej=lw("animationend"),Cj=lw("animationiteration"),Aj=lw("animationstart"),kj=lw("transitionend"),Nj=new Map,CA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ql(n,e){Nj.set(n,e),td(e,[n])}for(var vb=0;vb<CA.length;vb++){var yb=CA[vb],i6=yb.toLowerCase(),a6=yb[0].toUpperCase()+yb.slice(1);ql(i6,"on"+a6)}ql(Ej,"onAnimationEnd");ql(Cj,"onAnimationIteration");ql(Aj,"onAnimationStart");ql("dblclick","onDoubleClick");ql("focusin","onFocus");ql("focusout","onBlur");ql(kj,"onTransitionEnd");Pf("onMouseEnter",["mouseout","mouseover"]);Pf("onMouseLeave",["mouseout","mouseover"]);Pf("onPointerEnter",["pointerout","pointerover"]);Pf("onPointerLeave",["pointerout","pointerover"]);td("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));td("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));td("onBeforeInput",["compositionend","keypress","textInput","paste"]);td("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));td("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));td("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pp));function AA(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,i5(r,e,void 0,n),n.currentTarget=null}function Pj(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;AA(s,o,u),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;AA(s,o,u),i=l}}}if(Hy)throw n=O1,Hy=!1,O1=null,n}function at(n,e){var t=e[q1];t===void 0&&(t=e[q1]=new Set);var r=n+"__bubble";t.has(r)||(jj(e,n,2,!1),t.add(r))}function xb(n,e,t){var r=0;e&&(r|=4),jj(t,n,r,e)}var u0="_reactListening"+Math.random().toString(36).slice(2);function Sm(n){if(!n[u0]){n[u0]=!0,OP.forEach(function(t){t!=="selectionchange"&&(o6.has(t)||xb(t,!1,n),xb(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[u0]||(e[u0]=!0,xb("selectionchange",!1,e))}}function jj(n,e,t,r){switch(fj(e)){case 1:var s=b5;break;case 4:s=_5;break;default:s=F2}t=s.bind(null,e,t,n),s=void 0,!L1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function wb(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=wc(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}ZP(function(){var u=i,h=I2(t),f=[];e:{var p=Nj.get(n);if(p!==void 0){var m=B2,y=n;switch(n){case"keypress":if(W0(t)===0)break e;case"keydown":case"keyup":m=O5;break;case"focusin":y="focus",m=fb;break;case"focusout":y="blur",m=fb;break;case"beforeblur":case"afterblur":m=fb;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=pA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=C5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=B5;break;case Ej:case Cj:case Aj:m=N5;break;case kj:m=U5;break;case"scroll":m=S5;break;case"wheel":m=W5;break;case"copy":case"cut":case"paste":m=j5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=gA}var g=(e&4)!==0,x=!g&&n==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var w=u,_;w!==null;){_=w;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,v!==null&&(S=vm(w,v),S!=null&&g.push(Em(w,S,_)))),x)break;w=w.return}0<g.length&&(p=new m(p,y,null,t,h),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==I1&&(y=t.relatedTarget||t.fromElement)&&(wc(y)||y[Ja]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?wc(y):null,y!==null&&(x=nd(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=pA,S="onMouseLeave",v="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(g=gA,S="onPointerLeave",v="onPointerEnter",w="pointer"),x=m==null?p:zd(m),_=y==null?p:zd(y),p=new g(S,w+"leave",m,t,h),p.target=x,p.relatedTarget=_,S=null,wc(h)===u&&(g=new g(v,w+"enter",y,t,h),g.target=_,g.relatedTarget=x,S=g),x=S,m&&y)t:{for(g=m,v=y,w=0,_=g;_;_=fd(_))w++;for(_=0,S=v;S;S=fd(S))_++;for(;0<w-_;)g=fd(g),w--;for(;0<_-w;)v=fd(v),_--;for(;w--;){if(g===v||v!==null&&g===v.alternate)break t;g=fd(g),v=fd(v)}g=null}else g=null;m!==null&&kA(f,p,m,g,!1),y!==null&&x!==null&&kA(f,x,y,g,!0)}}e:{if(p=u?zd(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=Q5;else if(xA(p))if(xj)C=t6;else{C=Z5;var A=J5}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=e6);if(C&&(C=C(n,u))){yj(f,C,t,h);break e}A&&A(n,p,u),n==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&P1(p,"number",p.value)}switch(A=u?zd(u):window,n){case"focusin":(xA(A)||A.contentEditable==="true")&&($d=A,z1=u,nm=null);break;case"focusout":nm=z1=$d=null;break;case"mousedown":U1=!0;break;case"contextmenu":case"mouseup":case"dragend":U1=!1,EA(f,t,h);break;case"selectionchange":if(s6)break;case"keydown":case"keyup":EA(f,t,h)}var k;if(U2)e:{switch(n){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Fd?gj(n,t)&&(j="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(j="onCompositionStart");j&&(mj&&t.locale!=="ko"&&(Fd||j!=="onCompositionStart"?j==="onCompositionEnd"&&Fd&&(k=pj()):(Sl=h,$2="value"in Sl?Sl.value:Sl.textContent,Fd=!0)),A=Yy(u,j),0<A.length&&(j=new mA(j,n,null,t,h),f.push({event:j,listeners:A}),k?j.data=k:(k=vj(t),k!==null&&(j.data=k)))),(k=G5?q5(n,t):Y5(n,t))&&(u=Yy(u,"onBeforeInput"),0<u.length&&(h=new mA("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=k))}Pj(f,e)})}function Em(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Yy(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vm(n,t),i!=null&&r.unshift(Em(n,i,s)),i=vm(n,e),i!=null&&r.push(Em(n,i,s))),n=n.return}return r}function fd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function kA(n,e,t,r,s){for(var i=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,s?(l=vm(t,i),l!=null&&a.unshift(Em(t,l,o))):s||(l=vm(t,i),l!=null&&a.push(Em(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var l6=/\r\n?/g,c6=/\u0000|\uFFFD/g;function NA(n){return(typeof n=="string"?n:""+n).replace(l6,`
`).replace(c6,"")}function d0(n,e,t){if(e=NA(e),NA(n)!==e&&t)throw Error(q(425))}function Ky(){}var H1=null,W1=null;function V1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G1=typeof setTimeout=="function"?setTimeout:void 0,u6=typeof clearTimeout=="function"?clearTimeout:void 0,PA=typeof Promise=="function"?Promise:void 0,d6=typeof queueMicrotask=="function"?queueMicrotask:typeof PA<"u"?function(n){return PA.resolve(null).then(n).catch(h6)}:G1;function h6(n){setTimeout(function(){throw n})}function bb(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),wm(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);wm(e)}function Pl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function jA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Yf=Math.random().toString(36).slice(2),Ri="__reactFiber$"+Yf,Cm="__reactProps$"+Yf,Ja="__reactContainer$"+Yf,q1="__reactEvents$"+Yf,f6="__reactListeners$"+Yf,p6="__reactHandles$"+Yf;function wc(n){var e=n[Ri];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ja]||t[Ri]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=jA(n);n!==null;){if(t=n[Ri])return t;n=jA(n)}return e}n=t,t=n.parentNode}return null}function Ev(n){return n=n[Ri]||n[Ja],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function zd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(q(33))}function cw(n){return n[Cm]||null}var Y1=[],Ud=-1;function Yl(n){return{current:n}}function lt(n){0>Ud||(n.current=Y1[Ud],Y1[Ud]=null,Ud--)}function nt(n,e){Ud++,Y1[Ud]=n.current,n.current=e}var Fl={},Mn=Yl(Fl),hr=Yl(!1),Fu=Fl;function jf(n,e){var t=n.type.contextTypes;if(!t)return Fl;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function fr(n){return n=n.childContextTypes,n!=null}function Xy(){lt(hr),lt(Mn)}function TA(n,e,t){if(Mn.current!==Fl)throw Error(q(168));nt(Mn,e),nt(hr,t)}function Tj(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,JO(n)||"Unknown",s));return _t({},t,r)}function Qy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fl,Fu=Mn.current,nt(Mn,n),nt(hr,hr.current),!0}function RA(n,e,t){var r=n.stateNode;if(!r)throw Error(q(169));t?(n=Tj(n,e,Fu),r.__reactInternalMemoizedMergedChildContext=n,lt(hr),lt(Mn),nt(Mn,n)):lt(hr),nt(hr,t)}var da=null,uw=!1,_b=!1;function Rj(n){da===null?da=[n]:da.push(n)}function m6(n){uw=!0,Rj(n)}function Kl(){if(!_b&&da!==null){_b=!0;var n=0,e=Ye;try{var t=da;for(Ye=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}da=null,uw=!1}catch(s){throw da!==null&&(da=da.slice(n+1)),rj(D2,Kl),s}finally{Ye=e,_b=!1}}return null}var Hd=[],Wd=0,Jy=null,Zy=0,ss=[],is=0,$u=null,Ga=1,qa="";function cc(n,e){Hd[Wd++]=Zy,Hd[Wd++]=Jy,Jy=n,Zy=e}function Mj(n,e,t){ss[is++]=Ga,ss[is++]=qa,ss[is++]=$u,$u=n;var r=Ga;n=qa;var s=32-Gs(r)-1;r&=~(1<<s),t+=1;var i=32-Gs(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ga=1<<32-Gs(e)+s|t<<s|r,qa=i+n}else Ga=1<<i|t<<s|r,qa=n}function W2(n){n.return!==null&&(cc(n,1),Mj(n,1,0))}function V2(n){for(;n===Jy;)Jy=Hd[--Wd],Hd[Wd]=null,Zy=Hd[--Wd],Hd[Wd]=null;for(;n===$u;)$u=ss[--is],ss[is]=null,qa=ss[--is],ss[is]=null,Ga=ss[--is],ss[is]=null}var Br=null,$r=null,pt=!1,zs=null;function Ij(n,e){var t=os(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function MA(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Br=n,$r=Pl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Br=n,$r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=$u!==null?{id:Ga,overflow:qa}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=os(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Br=n,$r=null,!0):!1;default:return!1}}function K1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function X1(n){if(pt){var e=$r;if(e){var t=e;if(!MA(n,e)){if(K1(n))throw Error(q(418));e=Pl(t.nextSibling);var r=Br;e&&MA(n,e)?Ij(r,t):(n.flags=n.flags&-4097|2,pt=!1,Br=n)}}else{if(K1(n))throw Error(q(418));n.flags=n.flags&-4097|2,pt=!1,Br=n}}}function IA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Br=n}function h0(n){if(n!==Br)return!1;if(!pt)return IA(n),pt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!V1(n.type,n.memoizedProps)),e&&(e=$r)){if(K1(n))throw Dj(),Error(q(418));for(;e;)Ij(n,e),e=Pl(e.nextSibling)}if(IA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){$r=Pl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}$r=null}}else $r=Br?Pl(n.stateNode.nextSibling):null;return!0}function Dj(){for(var n=$r;n;)n=Pl(n.nextSibling)}function Tf(){$r=Br=null,pt=!1}function G2(n){zs===null?zs=[n]:zs.push(n)}var g6=ao.ReactCurrentBatchConfig;function pp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(q(309));var r=t.stateNode}if(!r)throw Error(q(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error(q(284));if(!t._owner)throw Error(q(290,n))}return n}function f0(n,e){throw n=Object.prototype.toString.call(e),Error(q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function DA(n){var e=n._init;return e(n._payload)}function Lj(n){function e(v,w){if(n){var _=v.deletions;_===null?(v.deletions=[w],v.flags|=16):_.push(w)}}function t(v,w){if(!n)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Ml(v,w),v.index=0,v.sibling=null,v}function i(v,w,_){return v.index=_,n?(_=v.alternate,_!==null?(_=_.index,_<w?(v.flags|=2,w):_):(v.flags|=2,w)):(v.flags|=1048576,w)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,w,_,S){return w===null||w.tag!==6?(w=Pb(_,v.mode,S),w.return=v,w):(w=s(w,_),w.return=v,w)}function l(v,w,_,S){var C=_.type;return C===Od?h(v,w,_.props.children,S,_.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Eo&&DA(C)===w.type)?(S=s(w,_.props),S.ref=pp(v,w,_),S.return=v,S):(S=Q0(_.type,_.key,_.props,null,v.mode,S),S.ref=pp(v,w,_),S.return=v,S)}function u(v,w,_,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=jb(_,v.mode,S),w.return=v,w):(w=s(w,_.children||[]),w.return=v,w)}function h(v,w,_,S,C){return w===null||w.tag!==7?(w=Lu(_,v.mode,S,C),w.return=v,w):(w=s(w,_),w.return=v,w)}function f(v,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Pb(""+w,v.mode,_),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case n0:return _=Q0(w.type,w.key,w.props,null,v.mode,_),_.ref=pp(v,null,w),_.return=v,_;case Ld:return w=jb(w,v.mode,_),w.return=v,w;case Eo:var S=w._init;return f(v,S(w._payload),_)}if(kp(w)||cp(w))return w=Lu(w,v.mode,_,null),w.return=v,w;f0(v,w)}return null}function p(v,w,_,S){var C=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:o(v,w,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case n0:return _.key===C?l(v,w,_,S):null;case Ld:return _.key===C?u(v,w,_,S):null;case Eo:return C=_._init,p(v,w,C(_._payload),S)}if(kp(_)||cp(_))return C!==null?null:h(v,w,_,S,null);f0(v,_)}return null}function m(v,w,_,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(_)||null,o(w,v,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case n0:return v=v.get(S.key===null?_:S.key)||null,l(w,v,S,C);case Ld:return v=v.get(S.key===null?_:S.key)||null,u(w,v,S,C);case Eo:var A=S._init;return m(v,w,_,A(S._payload),C)}if(kp(S)||cp(S))return v=v.get(_)||null,h(w,v,S,C,null);f0(w,S)}return null}function y(v,w,_,S){for(var C=null,A=null,k=w,j=w=0,T=null;k!==null&&j<_.length;j++){k.index>j?(T=k,k=null):T=k.sibling;var M=p(v,k,_[j],S);if(M===null){k===null&&(k=T);break}n&&k&&M.alternate===null&&e(v,k),w=i(M,w,j),A===null?C=M:A.sibling=M,A=M,k=T}if(j===_.length)return t(v,k),pt&&cc(v,j),C;if(k===null){for(;j<_.length;j++)k=f(v,_[j],S),k!==null&&(w=i(k,w,j),A===null?C=k:A.sibling=k,A=k);return pt&&cc(v,j),C}for(k=r(v,k);j<_.length;j++)T=m(k,v,j,_[j],S),T!==null&&(n&&T.alternate!==null&&k.delete(T.key===null?j:T.key),w=i(T,w,j),A===null?C=T:A.sibling=T,A=T);return n&&k.forEach(function(I){return e(v,I)}),pt&&cc(v,j),C}function g(v,w,_,S){var C=cp(_);if(typeof C!="function")throw Error(q(150));if(_=C.call(_),_==null)throw Error(q(151));for(var A=C=null,k=w,j=w=0,T=null,M=_.next();k!==null&&!M.done;j++,M=_.next()){k.index>j?(T=k,k=null):T=k.sibling;var I=p(v,k,M.value,S);if(I===null){k===null&&(k=T);break}n&&k&&I.alternate===null&&e(v,k),w=i(I,w,j),A===null?C=I:A.sibling=I,A=I,k=T}if(M.done)return t(v,k),pt&&cc(v,j),C;if(k===null){for(;!M.done;j++,M=_.next())M=f(v,M.value,S),M!==null&&(w=i(M,w,j),A===null?C=M:A.sibling=M,A=M);return pt&&cc(v,j),C}for(k=r(v,k);!M.done;j++,M=_.next())M=m(k,v,j,M.value,S),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?j:M.key),w=i(M,w,j),A===null?C=M:A.sibling=M,A=M);return n&&k.forEach(function(R){return e(v,R)}),pt&&cc(v,j),C}function x(v,w,_,S){if(typeof _=="object"&&_!==null&&_.type===Od&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case n0:e:{for(var C=_.key,A=w;A!==null;){if(A.key===C){if(C=_.type,C===Od){if(A.tag===7){t(v,A.sibling),w=s(A,_.props.children),w.return=v,v=w;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Eo&&DA(C)===A.type){t(v,A.sibling),w=s(A,_.props),w.ref=pp(v,A,_),w.return=v,v=w;break e}t(v,A);break}else e(v,A);A=A.sibling}_.type===Od?(w=Lu(_.props.children,v.mode,S,_.key),w.return=v,v=w):(S=Q0(_.type,_.key,_.props,null,v.mode,S),S.ref=pp(v,w,_),S.return=v,v=S)}return a(v);case Ld:e:{for(A=_.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){t(v,w.sibling),w=s(w,_.children||[]),w.return=v,v=w;break e}else{t(v,w);break}else e(v,w);w=w.sibling}w=jb(_,v.mode,S),w.return=v,v=w}return a(v);case Eo:return A=_._init,x(v,w,A(_._payload),S)}if(kp(_))return y(v,w,_,S);if(cp(_))return g(v,w,_,S);f0(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(t(v,w.sibling),w=s(w,_),w.return=v,v=w):(t(v,w),w=Pb(_,v.mode,S),w.return=v,v=w),a(v)):t(v,w)}return x}var Rf=Lj(!0),Oj=Lj(!1),ex=Yl(null),tx=null,Vd=null,q2=null;function Y2(){q2=Vd=tx=null}function K2(n){var e=ex.current;lt(ex),n._currentValue=e}function Q1(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function nh(n,e){tx=n,q2=Vd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ur=!0),n.firstContext=null)}function ds(n){var e=n._currentValue;if(q2!==n)if(n={context:n,memoizedValue:e,next:null},Vd===null){if(tx===null)throw Error(q(308));Vd=n,tx.dependencies={lanes:0,firstContext:n}}else Vd=Vd.next=n;return e}var bc=null;function X2(n){bc===null?bc=[n]:bc.push(n)}function Fj(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,X2(e)):(t.next=s.next,s.next=t),e.interleaved=t,Za(n,r)}function Za(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Co=!1;function Q2(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $j(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ya(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function jl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Za(n,t)}return s=r.interleaved,s===null?(e.next=e,X2(r)):(e.next=s.next,s.next=e),r.interleaved=e,Za(n,t)}function V0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,L2(n,t)}}function LA(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function nx(n,e,t,r){var s=n.updateQueue;Co=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var h=n.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;a=0,h=u=l=null,o=i;do{var p=o.lane,m=o.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=n,g=o;switch(p=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=_t({},f,p);break e;case 2:Co=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=m,l=f):h=h.next=m,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);zu|=a,n.lanes=a,n.memoizedState=f}}function OA(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Cv={},Ui=Yl(Cv),Am=Yl(Cv),km=Yl(Cv);function _c(n){if(n===Cv)throw Error(q(174));return n}function J2(n,e){switch(nt(km,e),nt(Am,n),nt(Ui,Cv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:T1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=T1(e,n)}lt(Ui),nt(Ui,e)}function Mf(){lt(Ui),lt(Am),lt(km)}function Bj(n){_c(km.current);var e=_c(Ui.current),t=T1(e,n.type);e!==t&&(nt(Am,n),nt(Ui,t))}function Z2(n){Am.current===n&&(lt(Ui),lt(Am))}var xt=Yl(0);function rx(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sb=[];function eE(){for(var n=0;n<Sb.length;n++)Sb[n]._workInProgressVersionPrimary=null;Sb.length=0}var G0=ao.ReactCurrentDispatcher,Eb=ao.ReactCurrentBatchConfig,Bu=0,bt=null,Xt=null,ln=null,sx=!1,rm=!1,Nm=0,v6=0;function En(){throw Error(q(321))}function tE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ys(n[t],e[t]))return!1;return!0}function nE(n,e,t,r,s,i){if(Bu=i,bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,G0.current=n===null||n.memoizedState===null?b6:_6,n=t(r,s),rm){i=0;do{if(rm=!1,Nm=0,25<=i)throw Error(q(301));i+=1,ln=Xt=null,e.updateQueue=null,G0.current=S6,n=t(r,s)}while(rm)}if(G0.current=ix,e=Xt!==null&&Xt.next!==null,Bu=0,ln=Xt=bt=null,sx=!1,e)throw Error(q(300));return n}function rE(){var n=Nm!==0;return Nm=0,n}function oi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?bt.memoizedState=ln=n:ln=ln.next=n,ln}function hs(){if(Xt===null){var n=bt.alternate;n=n!==null?n.memoizedState:null}else n=Xt.next;var e=ln===null?bt.memoizedState:ln.next;if(e!==null)ln=e,Xt=n;else{if(n===null)throw Error(q(310));Xt=n,n={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ln===null?bt.memoizedState=ln=n:ln=ln.next=n}return ln}function Pm(n,e){return typeof e=="function"?e(n):e}function Cb(n){var e=hs(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var r=Xt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,u=i;do{var h=u.lane;if((Bu&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=f,a=r):l=l.next=f,bt.lanes|=h,zu|=h}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=o,Ys(r,e.memoizedState)||(ur=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,bt.lanes|=i,zu|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ab(n){var e=hs(),t=e.queue;if(t===null)throw Error(q(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do i=n(i,a.action),a=a.next;while(a!==s);Ys(i,e.memoizedState)||(ur=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function zj(){}function Uj(n,e){var t=bt,r=hs(),s=e(),i=!Ys(r.memoizedState,s);if(i&&(r.memoizedState=s,ur=!0),r=r.queue,sE(Vj.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||ln!==null&&ln.memoizedState.tag&1){if(t.flags|=2048,jm(9,Wj.bind(null,t,r,s,e),void 0,null),cn===null)throw Error(q(349));Bu&30||Hj(t,e,s)}return s}function Hj(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Wj(n,e,t,r){e.value=t,e.getSnapshot=r,Gj(e)&&qj(n)}function Vj(n,e,t){return t(function(){Gj(e)&&qj(n)})}function Gj(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ys(n,t)}catch{return!0}}function qj(n){var e=Za(n,1);e!==null&&qs(e,n,1,-1)}function FA(n){var e=oi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pm,lastRenderedState:n},e.queue=n,n=n.dispatch=w6.bind(null,bt,n),[e.memoizedState,n]}function jm(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=bt.updateQueue,e===null?(e={lastEffect:null,stores:null},bt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Yj(){return hs().memoizedState}function q0(n,e,t,r){var s=oi();bt.flags|=n,s.memoizedState=jm(1|e,t,void 0,r===void 0?null:r)}function dw(n,e,t,r){var s=hs();r=r===void 0?null:r;var i=void 0;if(Xt!==null){var a=Xt.memoizedState;if(i=a.destroy,r!==null&&tE(r,a.deps)){s.memoizedState=jm(e,t,i,r);return}}bt.flags|=n,s.memoizedState=jm(1|e,t,i,r)}function $A(n,e){return q0(8390656,8,n,e)}function sE(n,e){return dw(2048,8,n,e)}function Kj(n,e){return dw(4,2,n,e)}function Xj(n,e){return dw(4,4,n,e)}function Qj(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Jj(n,e,t){return t=t!=null?t.concat([n]):null,dw(4,4,Qj.bind(null,e,n),t)}function iE(){}function Zj(n,e){var t=hs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&tE(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function eT(n,e){var t=hs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&tE(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function tT(n,e,t){return Bu&21?(Ys(t,e)||(t=aj(),bt.lanes|=t,zu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ur=!0),n.memoizedState=t)}function y6(n,e){var t=Ye;Ye=t!==0&&4>t?t:4,n(!0);var r=Eb.transition;Eb.transition={};try{n(!1),e()}finally{Ye=t,Eb.transition=r}}function nT(){return hs().memoizedState}function x6(n,e,t){var r=Rl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rT(n))sT(e,t);else if(t=Fj(n,e,t,r),t!==null){var s=Kn();qs(t,n,r,s),iT(t,e,r)}}function w6(n,e,t){var r=Rl(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rT(n))sT(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,t);if(s.hasEagerState=!0,s.eagerState=o,Ys(o,a)){var l=e.interleaved;l===null?(s.next=s,X2(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=Fj(n,e,s,r),t!==null&&(s=Kn(),qs(t,n,r,s),iT(t,e,r))}}function rT(n){var e=n.alternate;return n===bt||e!==null&&e===bt}function sT(n,e){rm=sx=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function iT(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,L2(n,t)}}var ix={readContext:ds,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},b6={readContext:ds,useCallback:function(n,e){return oi().memoizedState=[n,e===void 0?null:e],n},useContext:ds,useEffect:$A,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,q0(4194308,4,Qj.bind(null,e,n),t)},useLayoutEffect:function(n,e){return q0(4194308,4,n,e)},useInsertionEffect:function(n,e){return q0(4,2,n,e)},useMemo:function(n,e){var t=oi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=oi();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=x6.bind(null,bt,n),[r.memoizedState,n]},useRef:function(n){var e=oi();return n={current:n},e.memoizedState=n},useState:FA,useDebugValue:iE,useDeferredValue:function(n){return oi().memoizedState=n},useTransition:function(){var n=FA(!1),e=n[0];return n=y6.bind(null,n[1]),oi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=bt,s=oi();if(pt){if(t===void 0)throw Error(q(407));t=t()}else{if(t=e(),cn===null)throw Error(q(349));Bu&30||Hj(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,$A(Vj.bind(null,r,i,n),[n]),r.flags|=2048,jm(9,Wj.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=oi(),e=cn.identifierPrefix;if(pt){var t=qa,r=Ga;t=(r&~(1<<32-Gs(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Nm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=v6++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},_6={readContext:ds,useCallback:Zj,useContext:ds,useEffect:sE,useImperativeHandle:Jj,useInsertionEffect:Kj,useLayoutEffect:Xj,useMemo:eT,useReducer:Cb,useRef:Yj,useState:function(){return Cb(Pm)},useDebugValue:iE,useDeferredValue:function(n){var e=hs();return tT(e,Xt.memoizedState,n)},useTransition:function(){var n=Cb(Pm)[0],e=hs().memoizedState;return[n,e]},useMutableSource:zj,useSyncExternalStore:Uj,useId:nT,unstable_isNewReconciler:!1},S6={readContext:ds,useCallback:Zj,useContext:ds,useEffect:sE,useImperativeHandle:Jj,useInsertionEffect:Kj,useLayoutEffect:Xj,useMemo:eT,useReducer:Ab,useRef:Yj,useState:function(){return Ab(Pm)},useDebugValue:iE,useDeferredValue:function(n){var e=hs();return Xt===null?e.memoizedState=n:tT(e,Xt.memoizedState,n)},useTransition:function(){var n=Ab(Pm)[0],e=hs().memoizedState;return[n,e]},useMutableSource:zj,useSyncExternalStore:Uj,useId:nT,unstable_isNewReconciler:!1};function Es(n,e){if(n&&n.defaultProps){e=_t({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function J1(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:_t({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var hw={isMounted:function(n){return(n=n._reactInternals)?nd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Kn(),s=Rl(n),i=Ya(r,s);i.payload=e,t!=null&&(i.callback=t),e=jl(n,i,s),e!==null&&(qs(e,n,s,r),V0(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Kn(),s=Rl(n),i=Ya(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=jl(n,i,s),e!==null&&(qs(e,n,s,r),V0(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Kn(),r=Rl(n),s=Ya(t,r);s.tag=2,e!=null&&(s.callback=e),e=jl(n,s,r),e!==null&&(qs(e,n,r,t),V0(e,n,r))}};function BA(n,e,t,r,s,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!_m(t,r)||!_m(s,i):!0}function aT(n,e,t){var r=!1,s=Fl,i=e.contextType;return typeof i=="object"&&i!==null?i=ds(i):(s=fr(e)?Fu:Mn.current,r=e.contextTypes,i=(r=r!=null)?jf(n,s):Fl),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hw,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function zA(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&hw.enqueueReplaceState(e,e.state,null)}function Z1(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Q2(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ds(i):(i=fr(e)?Fu:Mn.current,s.context=jf(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(J1(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hw.enqueueReplaceState(s,s.state,null),nx(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function If(n,e){try{var t="",r=e;do t+=QO(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function kb(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function e_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var E6=typeof WeakMap=="function"?WeakMap:Map;function oT(n,e,t){t=Ya(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ox||(ox=!0,u_=r),e_(n,e)},t}function lT(n,e,t){t=Ya(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){e_(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){e_(n,e),typeof r!="function"&&(Tl===null?Tl=new Set([this]):Tl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function UA(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new E6;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=F6.bind(null,n,e,t),e.then(n,n))}function HA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function WA(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ya(-1,1),e.tag=2,jl(t,e,1))),t.lanes|=1),n)}var C6=ao.ReactCurrentOwner,ur=!1;function Vn(n,e,t,r){e.child=n===null?Oj(e,null,t,r):Rf(e,n.child,t,r)}function VA(n,e,t,r,s){t=t.render;var i=e.ref;return nh(e,s),r=nE(n,e,t,r,i,s),t=rE(),n!==null&&!ur?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,eo(n,e,s)):(pt&&t&&W2(e),e.flags|=1,Vn(n,e,r,s),e.child)}function GA(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!fE(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,cT(n,e,i,r,s)):(n=Q0(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:_m,t(a,r)&&n.ref===e.ref)return eo(n,e,s)}return e.flags|=1,n=Ml(i,r),n.ref=e.ref,n.return=e,e.child=n}function cT(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(_m(i,r)&&n.ref===e.ref)if(ur=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(ur=!0);else return e.lanes=n.lanes,eo(n,e,s)}return t_(n,e,t,r,s)}function uT(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(qd,Ir),Ir|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,nt(qd,Ir),Ir|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,nt(qd,Ir),Ir|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,nt(qd,Ir),Ir|=r;return Vn(n,e,s,t),e.child}function dT(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function t_(n,e,t,r,s){var i=fr(t)?Fu:Mn.current;return i=jf(e,i),nh(e,s),t=nE(n,e,t,r,i,s),r=rE(),n!==null&&!ur?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,eo(n,e,s)):(pt&&r&&W2(e),e.flags|=1,Vn(n,e,t,s),e.child)}function qA(n,e,t,r,s){if(fr(t)){var i=!0;Qy(e)}else i=!1;if(nh(e,s),e.stateNode===null)Y0(n,e),aT(e,t,r),Z1(e,t,r,s),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=ds(u):(u=fr(t)?Fu:Mn.current,u=jf(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==u)&&zA(e,a,r,u),Co=!1;var p=e.memoizedState;a.state=p,nx(e,r,a,s),l=e.memoizedState,o!==r||p!==l||hr.current||Co?(typeof h=="function"&&(J1(e,t,h,r),l=e.memoizedState),(o=Co||BA(e,t,o,r,p,l,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,$j(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:Es(e.type,o),a.props=u,f=e.pendingProps,p=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=ds(l):(l=fr(t)?Fu:Mn.current,l=jf(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==l)&&zA(e,a,r,l),Co=!1,p=e.memoizedState,a.state=p,nx(e,r,a,s);var y=e.memoizedState;o!==f||p!==y||hr.current||Co?(typeof m=="function"&&(J1(e,t,m,r),y=e.memoizedState),(u=Co||BA(e,t,u,r,p,y,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return n_(n,e,t,r,i,s)}function n_(n,e,t,r,s,i){dT(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&RA(e,t,!1),eo(n,e,i);r=e.stateNode,C6.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=Rf(e,n.child,null,i),e.child=Rf(e,null,o,i)):Vn(n,e,o,i),e.memoizedState=r.state,s&&RA(e,t,!0),e.child}function hT(n){var e=n.stateNode;e.pendingContext?TA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&TA(n,e.context,!1),J2(n,e.containerInfo)}function YA(n,e,t,r,s){return Tf(),G2(s),e.flags|=256,Vn(n,e,t,r),e.child}var r_={dehydrated:null,treeContext:null,retryLane:0};function s_(n){return{baseLanes:n,cachePool:null,transitions:null}}function fT(n,e,t){var r=e.pendingProps,s=xt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),nt(xt,s&1),n===null)return X1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=mw(a,r,0,null),n=Lu(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=s_(t),e.memoizedState=r_,n):aE(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return A6(n,e,a,r,o,s,t);if(i){i=r.fallback,a=e.mode,s=n.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ml(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Ml(o,i):(i=Lu(i,a,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=n.child.memoizedState,a=a===null?s_(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=r_,r}return i=n.child,n=i.sibling,r=Ml(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function aE(n,e){return e=mw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function p0(n,e,t,r){return r!==null&&G2(r),Rf(e,n.child,null,t),n=aE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function A6(n,e,t,r,s,i,a){if(t)return e.flags&256?(e.flags&=-257,r=kb(Error(q(422))),p0(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=mw({mode:"visible",children:r.children},s,0,null),i=Lu(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Rf(e,n.child,null,a),e.child.memoizedState=s_(a),e.memoizedState=r_,i);if(!(e.mode&1))return p0(n,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(q(419)),r=kb(i,r,void 0),p0(n,e,a,r)}if(o=(a&n.childLanes)!==0,ur||o){if(r=cn,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Za(n,s),qs(r,n,s,-1))}return hE(),r=kb(Error(q(421))),p0(n,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=$6.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,$r=Pl(s.nextSibling),Br=e,pt=!0,zs=null,n!==null&&(ss[is++]=Ga,ss[is++]=qa,ss[is++]=$u,Ga=n.id,qa=n.overflow,$u=e),e=aE(e,r.children),e.flags|=4096,e)}function KA(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),Q1(n.return,e,t)}function Nb(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function pT(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Vn(n,e,r.children,t),r=xt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&KA(n,t,e);else if(n.tag===19)KA(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(nt(xt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&rx(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Nb(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&rx(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Nb(e,!0,t,null,i);break;case"together":Nb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Y0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function eo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),zu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(q(153));if(e.child!==null){for(n=e.child,t=Ml(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ml(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function k6(n,e,t){switch(e.tag){case 3:hT(e),Tf();break;case 5:Bj(e);break;case 1:fr(e.type)&&Qy(e);break;case 4:J2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nt(ex,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(xt,xt.current&1),e.flags|=128,null):t&e.child.childLanes?fT(n,e,t):(nt(xt,xt.current&1),n=eo(n,e,t),n!==null?n.sibling:null);nt(xt,xt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return pT(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nt(xt,xt.current),r)break;return null;case 22:case 23:return e.lanes=0,uT(n,e,t)}return eo(n,e,t)}var mT,i_,gT,vT;mT=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};i_=function(){};gT=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,_c(Ui.current);var i=null;switch(t){case"input":s=k1(n,s),r=k1(n,r),i=[];break;case"select":s=_t({},s,{value:void 0}),r=_t({},r,{value:void 0}),i=[];break;case"textarea":s=j1(n,s),r=j1(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Ky)}R1(t,r);var a;t=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(mm.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(i||(i=[]),i.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(mm.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&at("scroll",n),i||o===l||(i=[])):(i=i||[]).push(u,l))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};vT=function(n,e,t,r){t!==r&&(e.flags|=4)};function mp(n,e){if(!pt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Cn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function N6(n,e,t){var r=e.pendingProps;switch(V2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(e),null;case 1:return fr(e.type)&&Xy(),Cn(e),null;case 3:return r=e.stateNode,Mf(),lt(hr),lt(Mn),eE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(h0(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zs!==null&&(f_(zs),zs=null))),i_(n,e),Cn(e),null;case 5:Z2(e);var s=_c(km.current);if(t=e.type,n!==null&&e.stateNode!=null)gT(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return Cn(e),null}if(n=_c(Ui.current),h0(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[Ri]=e,r[Cm]=i,n=(e.mode&1)!==0,t){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(s=0;s<Pp.length;s++)at(Pp[s],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":sA(r,i),at("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},at("invalid",r);break;case"textarea":aA(r,i),at("invalid",r)}R1(t,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&d0(r.textContent,o,n),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&d0(r.textContent,o,n),s=["children",""+o]):mm.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&at("scroll",r)}switch(t){case"input":r0(r),iA(r,i,!0);break;case"textarea":r0(r),oA(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ky)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=VP(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[Ri]=e,n[Cm]=r,mT(n,e,!1,!1),e.stateNode=n;e:{switch(a=M1(t,r),t){case"dialog":at("cancel",n),at("close",n),s=r;break;case"iframe":case"object":case"embed":at("load",n),s=r;break;case"video":case"audio":for(s=0;s<Pp.length;s++)at(Pp[s],n);s=r;break;case"source":at("error",n),s=r;break;case"img":case"image":case"link":at("error",n),at("load",n),s=r;break;case"details":at("toggle",n),s=r;break;case"input":sA(n,r),s=k1(n,r),at("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=_t({},r,{value:void 0}),at("invalid",n);break;case"textarea":aA(n,r),s=j1(n,r),at("invalid",n);break;default:s=r}R1(t,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?YP(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&GP(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&gm(n,l):typeof l=="number"&&gm(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mm.hasOwnProperty(i)?l!=null&&i==="onScroll"&&at("scroll",n):l!=null&&j2(n,i,l,a))}switch(t){case"input":r0(n),iA(n,r,!1);break;case"textarea":r0(n),oA(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ol(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Jd(n,!!r.multiple,i,!1):r.defaultValue!=null&&Jd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Ky)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Cn(e),null;case 6:if(n&&e.stateNode!=null)vT(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(t=_c(km.current),_c(Ui.current),h0(e)){if(r=e.stateNode,t=e.memoizedProps,r[Ri]=e,(i=r.nodeValue!==t)&&(n=Br,n!==null))switch(n.tag){case 3:d0(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&d0(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Ri]=e,e.stateNode=r}return Cn(e),null;case 13:if(lt(xt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(pt&&$r!==null&&e.mode&1&&!(e.flags&128))Dj(),Tf(),e.flags|=98560,i=!1;else if(i=h0(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[Ri]=e}else Tf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Cn(e),i=!1}else zs!==null&&(f_(zs),zs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||xt.current&1?Qt===0&&(Qt=3):hE())),e.updateQueue!==null&&(e.flags|=4),Cn(e),null);case 4:return Mf(),i_(n,e),n===null&&Sm(e.stateNode.containerInfo),Cn(e),null;case 10:return K2(e.type._context),Cn(e),null;case 17:return fr(e.type)&&Xy(),Cn(e),null;case 19:if(lt(xt),i=e.memoizedState,i===null)return Cn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)mp(i,!1);else{if(Qt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=rx(n),a!==null){for(e.flags|=128,mp(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return nt(xt,xt.current&1|2),e.child}n=n.sibling}i.tail!==null&&Tt()>Df&&(e.flags|=128,r=!0,mp(i,!1),e.lanes=4194304)}else{if(!r)if(n=rx(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),mp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!pt)return Cn(e),null}else 2*Tt()-i.renderingStartTime>Df&&t!==1073741824&&(e.flags|=128,r=!0,mp(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Tt(),e.sibling=null,t=xt.current,nt(xt,r?t&1|2:t&1),e):(Cn(e),null);case 22:case 23:return dE(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ir&1073741824&&(Cn(e),e.subtreeFlags&6&&(e.flags|=8192)):Cn(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function P6(n,e){switch(V2(e),e.tag){case 1:return fr(e.type)&&Xy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Mf(),lt(hr),lt(Mn),eE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Z2(e),null;case 13:if(lt(xt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Tf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return lt(xt),null;case 4:return Mf(),null;case 10:return K2(e.type._context),null;case 22:case 23:return dE(),null;case 24:return null;default:return null}}var m0=!1,Rn=!1,j6=typeof WeakSet=="function"?WeakSet:Set,re=null;function Gd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ct(n,e,r)}else t.current=null}function a_(n,e,t){try{t()}catch(r){Ct(n,e,r)}}var XA=!1;function T6(n,e){if(H1=Gy,n=_j(),H2(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||s!==0&&f.nodeType!==3||(o=a+s),f!==i||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++u===s&&(o=a),p===i&&++h===r&&(l=a),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(W1={focusedElem:n,selectionRange:t},Gy=!1,re=e;re!==null;)if(e=re,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,re=n;else for(;re!==null;){e=re;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,x=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Es(e.type,g),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(S){Ct(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}return y=XA,XA=!1,y}function sm(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&a_(e,t,i)}s=s.next}while(s!==r)}}function fw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function o_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function yT(n){var e=n.alternate;e!==null&&(n.alternate=null,yT(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ri],delete e[Cm],delete e[q1],delete e[f6],delete e[p6])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function xT(n){return n.tag===5||n.tag===3||n.tag===4}function QA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xT(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function l_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Ky));else if(r!==4&&(n=n.child,n!==null))for(l_(n,e,t),n=n.sibling;n!==null;)l_(n,e,t),n=n.sibling}function c_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(c_(n,e,t),n=n.sibling;n!==null;)c_(n,e,t),n=n.sibling}var gn=null,$s=!1;function mo(n,e,t){for(t=t.child;t!==null;)wT(n,e,t),t=t.sibling}function wT(n,e,t){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(iw,t)}catch{}switch(t.tag){case 5:Rn||Gd(t,e);case 6:var r=gn,s=$s;gn=null,mo(n,e,t),gn=r,$s=s,gn!==null&&($s?(n=gn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):gn.removeChild(t.stateNode));break;case 18:gn!==null&&($s?(n=gn,t=t.stateNode,n.nodeType===8?bb(n.parentNode,t):n.nodeType===1&&bb(n,t),wm(n)):bb(gn,t.stateNode));break;case 4:r=gn,s=$s,gn=t.stateNode.containerInfo,$s=!0,mo(n,e,t),gn=r,$s=s;break;case 0:case 11:case 14:case 15:if(!Rn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&a_(t,e,a),s=s.next}while(s!==r)}mo(n,e,t);break;case 1:if(!Rn&&(Gd(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Ct(t,e,o)}mo(n,e,t);break;case 21:mo(n,e,t);break;case 22:t.mode&1?(Rn=(r=Rn)||t.memoizedState!==null,mo(n,e,t),Rn=r):mo(n,e,t);break;default:mo(n,e,t)}}function JA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new j6),e.forEach(function(r){var s=B6.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function xs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:gn=o.stateNode,$s=!1;break e;case 3:gn=o.stateNode.containerInfo,$s=!0;break e;case 4:gn=o.stateNode.containerInfo,$s=!0;break e}o=o.return}if(gn===null)throw Error(q(160));wT(i,a,s),gn=null,$s=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ct(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bT(e,n),e=e.sibling}function bT(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(xs(e,n),ni(n),r&4){try{sm(3,n,n.return),fw(3,n)}catch(g){Ct(n,n.return,g)}try{sm(5,n,n.return)}catch(g){Ct(n,n.return,g)}}break;case 1:xs(e,n),ni(n),r&512&&t!==null&&Gd(t,t.return);break;case 5:if(xs(e,n),ni(n),r&512&&t!==null&&Gd(t,t.return),n.flags&32){var s=n.stateNode;try{gm(s,"")}catch(g){Ct(n,n.return,g)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&HP(s,i),M1(o,a);var u=M1(o,i);for(a=0;a<l.length;a+=2){var h=l[a],f=l[a+1];h==="style"?YP(s,f):h==="dangerouslySetInnerHTML"?GP(s,f):h==="children"?gm(s,f):j2(s,h,f,u)}switch(o){case"input":N1(s,i);break;case"textarea":WP(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Jd(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?Jd(s,!!i.multiple,i.defaultValue,!0):Jd(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cm]=i}catch(g){Ct(n,n.return,g)}}break;case 6:if(xs(e,n),ni(n),r&4){if(n.stateNode===null)throw Error(q(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(g){Ct(n,n.return,g)}}break;case 3:if(xs(e,n),ni(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{wm(e.containerInfo)}catch(g){Ct(n,n.return,g)}break;case 4:xs(e,n),ni(n);break;case 13:xs(e,n),ni(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cE=Tt())),r&4&&JA(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Rn=(u=Rn)||h,xs(e,n),Rn=u):xs(e,n),ni(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(re=n,h=n.child;h!==null;){for(f=re=h;re!==null;){switch(p=re,m=p.child,p.tag){case 0:case 11:case 14:case 15:sm(4,p,p.return);break;case 1:Gd(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Ct(r,t,g)}}break;case 5:Gd(p,p.return);break;case 22:if(p.memoizedState!==null){ek(f);continue}}m!==null?(m.return=p,re=m):ek(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=qP("display",a))}catch(g){Ct(n,n.return,g)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ct(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xs(e,n),ni(n),r&4&&JA(n);break;case 21:break;default:xs(e,n),ni(n)}}function ni(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(xT(t)){var r=t;break e}t=t.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gm(s,""),r.flags&=-33);var i=QA(n);c_(n,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=QA(n);l_(n,o,a);break;default:throw Error(q(161))}}catch(l){Ct(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function R6(n,e,t){re=n,_T(n)}function _T(n,e,t){for(var r=(n.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||m0;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Rn;o=m0;var u=Rn;if(m0=a,(Rn=l)&&!u)for(re=s;re!==null;)a=re,l=a.child,a.tag===22&&a.memoizedState!==null?tk(s):l!==null?(l.return=a,re=l):tk(s);for(;i!==null;)re=i,_T(i),i=i.sibling;re=s,m0=o,Rn=u}ZA(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):ZA(n)}}function ZA(n){for(;re!==null;){var e=re;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rn||fw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Es(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&OA(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}OA(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&wm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Rn||e.flags&512&&o_(e)}catch(p){Ct(e,e.return,p)}}if(e===n){re=null;break}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}}function ek(n){for(;re!==null;){var e=re;if(e===n){re=null;break}var t=e.sibling;if(t!==null){t.return=e.return,re=t;break}re=e.return}}function tk(n){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fw(4,e)}catch(l){Ct(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ct(e,s,l)}}var i=e.return;try{o_(e)}catch(l){Ct(e,i,l)}break;case 5:var a=e.return;try{o_(e)}catch(l){Ct(e,a,l)}}}catch(l){Ct(e,e.return,l)}if(e===n){re=null;break}var o=e.sibling;if(o!==null){o.return=e.return,re=o;break}re=e.return}}var M6=Math.ceil,ax=ao.ReactCurrentDispatcher,oE=ao.ReactCurrentOwner,ls=ao.ReactCurrentBatchConfig,Oe=0,cn=null,Ft=null,wn=0,Ir=0,qd=Yl(0),Qt=0,Tm=null,zu=0,pw=0,lE=0,im=null,lr=null,cE=0,Df=1/0,oa=null,ox=!1,u_=null,Tl=null,g0=!1,El=null,lx=0,am=0,d_=null,K0=-1,X0=0;function Kn(){return Oe&6?Tt():K0!==-1?K0:K0=Tt()}function Rl(n){return n.mode&1?Oe&2&&wn!==0?wn&-wn:g6.transition!==null?(X0===0&&(X0=aj()),X0):(n=Ye,n!==0||(n=window.event,n=n===void 0?16:fj(n.type)),n):1}function qs(n,e,t,r){if(50<am)throw am=0,d_=null,Error(q(185));_v(n,t,r),(!(Oe&2)||n!==cn)&&(n===cn&&(!(Oe&2)&&(pw|=t),Qt===4&&ko(n,wn)),pr(n,r),t===1&&Oe===0&&!(e.mode&1)&&(Df=Tt()+500,uw&&Kl()))}function pr(n,e){var t=n.callbackNode;g5(n,e);var r=Vy(n,n===cn?wn:0);if(r===0)t!==null&&uA(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&uA(t),e===1)n.tag===0?m6(nk.bind(null,n)):Rj(nk.bind(null,n)),d6(function(){!(Oe&6)&&Kl()}),t=null;else{switch(oj(r)){case 1:t=D2;break;case 4:t=sj;break;case 16:t=Wy;break;case 536870912:t=ij;break;default:t=Wy}t=jT(t,ST.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function ST(n,e){if(K0=-1,X0=0,Oe&6)throw Error(q(327));var t=n.callbackNode;if(rh()&&n.callbackNode!==t)return null;var r=Vy(n,n===cn?wn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=cx(n,r);else{e=r;var s=Oe;Oe|=2;var i=CT();(cn!==n||wn!==e)&&(oa=null,Df=Tt()+500,Du(n,e));do try{L6();break}catch(o){ET(n,o)}while(!0);Y2(),ax.current=i,Oe=s,Ft!==null?e=0:(cn=null,wn=0,e=Qt)}if(e!==0){if(e===2&&(s=F1(n),s!==0&&(r=s,e=h_(n,s))),e===1)throw t=Tm,Du(n,0),ko(n,r),pr(n,Tt()),t;if(e===6)ko(n,r);else{if(s=n.current.alternate,!(r&30)&&!I6(s)&&(e=cx(n,r),e===2&&(i=F1(n),i!==0&&(r=i,e=h_(n,i))),e===1))throw t=Tm,Du(n,0),ko(n,r),pr(n,Tt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:uc(n,lr,oa);break;case 3:if(ko(n,r),(r&130023424)===r&&(e=cE+500-Tt(),10<e)){if(Vy(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){Kn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=G1(uc.bind(null,n,lr,oa),e);break}uc(n,lr,oa);break;case 4:if(ko(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var a=31-Gs(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*M6(r/1960))-r,10<r){n.timeoutHandle=G1(uc.bind(null,n,lr,oa),r);break}uc(n,lr,oa);break;case 5:uc(n,lr,oa);break;default:throw Error(q(329))}}}return pr(n,Tt()),n.callbackNode===t?ST.bind(null,n):null}function h_(n,e){var t=im;return n.current.memoizedState.isDehydrated&&(Du(n,e).flags|=256),n=cx(n,e),n!==2&&(e=lr,lr=t,e!==null&&f_(e)),n}function f_(n){lr===null?lr=n:lr.push.apply(lr,n)}function I6(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!Ys(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ko(n,e){for(e&=~lE,e&=~pw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Gs(e),r=1<<t;n[t]=-1,e&=~r}}function nk(n){if(Oe&6)throw Error(q(327));rh();var e=Vy(n,0);if(!(e&1))return pr(n,Tt()),null;var t=cx(n,e);if(n.tag!==0&&t===2){var r=F1(n);r!==0&&(e=r,t=h_(n,r))}if(t===1)throw t=Tm,Du(n,0),ko(n,e),pr(n,Tt()),t;if(t===6)throw Error(q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,uc(n,lr,oa),pr(n,Tt()),null}function uE(n,e){var t=Oe;Oe|=1;try{return n(e)}finally{Oe=t,Oe===0&&(Df=Tt()+500,uw&&Kl())}}function Uu(n){El!==null&&El.tag===0&&!(Oe&6)&&rh();var e=Oe;Oe|=1;var t=ls.transition,r=Ye;try{if(ls.transition=null,Ye=1,n)return n()}finally{Ye=r,ls.transition=t,Oe=e,!(Oe&6)&&Kl()}}function dE(){Ir=qd.current,lt(qd)}function Du(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,u6(t)),Ft!==null)for(t=Ft.return;t!==null;){var r=t;switch(V2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xy();break;case 3:Mf(),lt(hr),lt(Mn),eE();break;case 5:Z2(r);break;case 4:Mf();break;case 13:lt(xt);break;case 19:lt(xt);break;case 10:K2(r.type._context);break;case 22:case 23:dE()}t=t.return}if(cn=n,Ft=n=Ml(n.current,null),wn=Ir=e,Qt=0,Tm=null,lE=pw=zu=0,lr=im=null,bc!==null){for(e=0;e<bc.length;e++)if(t=bc[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}t.pending=r}bc=null}return n}function ET(n,e){do{var t=Ft;try{if(Y2(),G0.current=ix,sx){for(var r=bt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sx=!1}if(Bu=0,ln=Xt=bt=null,rm=!1,Nm=0,oE.current=null,t===null||t.return===null){Qt=1,Tm=e,Ft=null;break}e:{var i=n,a=t.return,o=t,l=e;if(e=wn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=o,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=HA(a);if(m!==null){m.flags&=-257,WA(m,a,o,i,e),m.mode&1&&UA(i,u,e),e=m,l=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){UA(i,u,e),hE();break e}l=Error(q(426))}}else if(pt&&o.mode&1){var x=HA(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),WA(x,a,o,i,e),G2(If(l,o));break e}}i=l=If(l,o),Qt!==4&&(Qt=2),im===null?im=[i]:im.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=oT(i,l,e);LA(i,v);break e;case 1:o=l;var w=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Tl===null||!Tl.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=lT(i,o,e);LA(i,S);break e}}i=i.return}while(i!==null)}kT(t)}catch(C){e=C,Ft===t&&t!==null&&(Ft=t=t.return);continue}break}while(!0)}function CT(){var n=ax.current;return ax.current=ix,n===null?ix:n}function hE(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),cn===null||!(zu&268435455)&&!(pw&268435455)||ko(cn,wn)}function cx(n,e){var t=Oe;Oe|=2;var r=CT();(cn!==n||wn!==e)&&(oa=null,Du(n,e));do try{D6();break}catch(s){ET(n,s)}while(!0);if(Y2(),Oe=t,ax.current=r,Ft!==null)throw Error(q(261));return cn=null,wn=0,Qt}function D6(){for(;Ft!==null;)AT(Ft)}function L6(){for(;Ft!==null&&!o5();)AT(Ft)}function AT(n){var e=PT(n.alternate,n,Ir);n.memoizedProps=n.pendingProps,e===null?kT(n):Ft=e,oE.current=null}function kT(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=P6(t,e),t!==null){t.flags&=32767,Ft=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Qt=6,Ft=null;return}}else if(t=N6(t,e,Ir),t!==null){Ft=t;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=n}while(e!==null);Qt===0&&(Qt=5)}function uc(n,e,t){var r=Ye,s=ls.transition;try{ls.transition=null,Ye=1,O6(n,e,t,r)}finally{ls.transition=s,Ye=r}return null}function O6(n,e,t,r){do rh();while(El!==null);if(Oe&6)throw Error(q(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(q(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(v5(n,i),n===cn&&(Ft=cn=null,wn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||g0||(g0=!0,jT(Wy,function(){return rh(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=ls.transition,ls.transition=null;var a=Ye;Ye=1;var o=Oe;Oe|=4,oE.current=null,T6(n,t),bT(t,n),r6(W1),Gy=!!H1,W1=H1=null,n.current=t,R6(t),l5(),Oe=o,Ye=a,ls.transition=i}else n.current=t;if(g0&&(g0=!1,El=n,lx=s),i=n.pendingLanes,i===0&&(Tl=null),d5(t.stateNode),pr(n,Tt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(ox)throw ox=!1,n=u_,u_=null,n;return lx&1&&n.tag!==0&&rh(),i=n.pendingLanes,i&1?n===d_?am++:(am=0,d_=n):am=0,Kl(),null}function rh(){if(El!==null){var n=oj(lx),e=ls.transition,t=Ye;try{if(ls.transition=null,Ye=16>n?16:n,El===null)var r=!1;else{if(n=El,El=null,lx=0,Oe&6)throw Error(q(331));var s=Oe;for(Oe|=4,re=n.current;re!==null;){var i=re,a=i.child;if(re.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(re=u;re!==null;){var h=re;switch(h.tag){case 0:case 11:case 15:sm(8,h,i)}var f=h.child;if(f!==null)f.return=h,re=f;else for(;re!==null;){h=re;var p=h.sibling,m=h.return;if(yT(h),h===u){re=null;break}if(p!==null){p.return=m,re=p;break}re=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}re=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,re=a;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sm(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,re=v;break e}re=i.return}}var w=n.current;for(re=w;re!==null;){a=re;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,re=_;else e:for(a=w;re!==null;){if(o=re,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fw(9,o)}}catch(C){Ct(o,o.return,C)}if(o===a){re=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,re=S;break e}re=o.return}}if(Oe=s,Kl(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(iw,n)}catch{}r=!0}return r}finally{Ye=t,ls.transition=e}}return!1}function rk(n,e,t){e=If(t,e),e=oT(n,e,1),n=jl(n,e,1),e=Kn(),n!==null&&(_v(n,1,e),pr(n,e))}function Ct(n,e,t){if(n.tag===3)rk(n,n,t);else for(;e!==null;){if(e.tag===3){rk(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tl===null||!Tl.has(r))){n=If(t,n),n=lT(e,n,1),e=jl(e,n,1),n=Kn(),e!==null&&(_v(e,1,n),pr(e,n));break}}e=e.return}}function F6(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Kn(),n.pingedLanes|=n.suspendedLanes&t,cn===n&&(wn&t)===t&&(Qt===4||Qt===3&&(wn&130023424)===wn&&500>Tt()-cE?Du(n,0):lE|=t),pr(n,e)}function NT(n,e){e===0&&(n.mode&1?(e=a0,a0<<=1,!(a0&130023424)&&(a0=4194304)):e=1);var t=Kn();n=Za(n,e),n!==null&&(_v(n,e,t),pr(n,t))}function $6(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),NT(n,t)}function B6(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),NT(n,t)}var PT;PT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||hr.current)ur=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ur=!1,k6(n,e,t);ur=!!(n.flags&131072)}else ur=!1,pt&&e.flags&1048576&&Mj(e,Zy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Y0(n,e),n=e.pendingProps;var s=jf(e,Mn.current);nh(e,t),s=nE(null,e,r,n,s,t);var i=rE();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(r)?(i=!0,Qy(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Q2(e),s.updater=hw,e.stateNode=s,s._reactInternals=e,Z1(e,r,n,t),e=n_(null,e,r,!0,i,t)):(e.tag=0,pt&&i&&W2(e),Vn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Y0(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=U6(r),n=Es(r,n),s){case 0:e=t_(null,e,r,n,t);break e;case 1:e=qA(null,e,r,n,t);break e;case 11:e=VA(null,e,r,n,t);break e;case 14:e=GA(null,e,r,Es(r.type,n),t);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Es(r,s),t_(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Es(r,s),qA(n,e,r,s,t);case 3:e:{if(hT(e),n===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,$j(n,e),nx(e,r,null,t);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=If(Error(q(423)),e),e=YA(n,e,r,t,s);break e}else if(r!==s){s=If(Error(q(424)),e),e=YA(n,e,r,t,s);break e}else for($r=Pl(e.stateNode.containerInfo.firstChild),Br=e,pt=!0,zs=null,t=Oj(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Tf(),r===s){e=eo(n,e,t);break e}Vn(n,e,r,t)}e=e.child}return e;case 5:return Bj(e),n===null&&X1(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,a=s.children,V1(r,s)?a=null:i!==null&&V1(r,i)&&(e.flags|=32),dT(n,e),Vn(n,e,a,t),e.child;case 6:return n===null&&X1(e),null;case 13:return fT(n,e,t);case 4:return J2(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Rf(e,null,r,t):Vn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Es(r,s),VA(n,e,r,s,t);case 7:return Vn(n,e,e.pendingProps,t),e.child;case 8:return Vn(n,e,e.pendingProps.children,t),e.child;case 12:return Vn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,nt(ex,r._currentValue),r._currentValue=a,i!==null)if(Ys(i.value,a)){if(i.children===s.children&&!hr.current){e=eo(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ya(-1,t&-t),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),Q1(i.return,t,e),o.lanes|=t;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Q1(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Vn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,nh(e,t),s=ds(s),r=r(s),e.flags|=1,Vn(n,e,r,t),e.child;case 14:return r=e.type,s=Es(r,e.pendingProps),s=Es(r.type,s),GA(n,e,r,s,t);case 15:return cT(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Es(r,s),Y0(n,e),e.tag=1,fr(r)?(n=!0,Qy(e)):n=!1,nh(e,t),aT(e,r,s),Z1(e,r,s,t),n_(null,e,r,!0,n,t);case 19:return pT(n,e,t);case 22:return uT(n,e,t)}throw Error(q(156,e.tag))};function jT(n,e){return rj(n,e)}function z6(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(n,e,t,r){return new z6(n,e,t,r)}function fE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function U6(n){if(typeof n=="function")return fE(n)?1:0;if(n!=null){if(n=n.$$typeof,n===R2)return 11;if(n===M2)return 14}return 2}function Ml(n,e){var t=n.alternate;return t===null?(t=os(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Q0(n,e,t,r,s,i){var a=2;if(r=n,typeof n=="function")fE(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Od:return Lu(t.children,s,i,e);case T2:a=8,s|=8;break;case S1:return n=os(12,t,e,s|2),n.elementType=S1,n.lanes=i,n;case E1:return n=os(13,t,e,s),n.elementType=E1,n.lanes=i,n;case C1:return n=os(19,t,e,s),n.elementType=C1,n.lanes=i,n;case BP:return mw(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case FP:a=10;break e;case $P:a=9;break e;case R2:a=11;break e;case M2:a=14;break e;case Eo:a=16,r=null;break e}throw Error(q(130,n==null?n:typeof n,""))}return e=os(a,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function Lu(n,e,t,r){return n=os(7,n,r,e),n.lanes=t,n}function mw(n,e,t,r){return n=os(22,n,r,e),n.elementType=BP,n.lanes=t,n.stateNode={isHidden:!1},n}function Pb(n,e,t){return n=os(6,n,null,e),n.lanes=t,n}function jb(n,e,t){return e=os(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function H6(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ub(0),this.expirationTimes=ub(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ub(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pE(n,e,t,r,s,i,a,o,l){return n=new H6(n,e,t,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=os(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q2(i),n}function W6(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ld,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function TT(n){if(!n)return Fl;n=n._reactInternals;e:{if(nd(n)!==n||n.tag!==1)throw Error(q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(n.tag===1){var t=n.type;if(fr(t))return Tj(n,t,e)}return e}function RT(n,e,t,r,s,i,a,o,l){return n=pE(t,r,!0,n,s,i,a,o,l),n.context=TT(null),t=n.current,r=Kn(),s=Rl(t),i=Ya(r,s),i.callback=e??null,jl(t,i,s),n.current.lanes=s,_v(n,s,r),pr(n,r),n}function gw(n,e,t,r){var s=e.current,i=Kn(),a=Rl(s);return t=TT(t),e.context===null?e.context=t:e.pendingContext=t,e=Ya(i,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=jl(s,e,a),n!==null&&(qs(n,s,a,i),V0(n,s,a)),a}function ux(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function sk(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function mE(n,e){sk(n,e),(n=n.alternate)&&sk(n,e)}function V6(){return null}var MT=typeof reportError=="function"?reportError:function(n){console.error(n)};function gE(n){this._internalRoot=n}vw.prototype.render=gE.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(q(409));gw(n,e,null,null)};vw.prototype.unmount=gE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Uu(function(){gw(null,n,null,null)}),e[Ja]=null}};function vw(n){this._internalRoot=n}vw.prototype.unstable_scheduleHydration=function(n){if(n){var e=uj();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ao.length&&e!==0&&e<Ao[t].priority;t++);Ao.splice(t,0,n),t===0&&hj(n)}};function vE(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ik(){}function G6(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ux(a);i.call(u)}}var a=RT(e,r,n,0,null,!1,!1,"",ik);return n._reactRootContainer=a,n[Ja]=a.current,Sm(n.nodeType===8?n.parentNode:n),Uu(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=ux(l);o.call(u)}}var l=pE(n,0,!1,null,null,!1,!1,"",ik);return n._reactRootContainer=l,n[Ja]=l.current,Sm(n.nodeType===8?n.parentNode:n),Uu(function(){gw(e,l,t,r)}),l}function xw(n,e,t,r,s){var i=t._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=ux(a);o.call(l)}}gw(e,a,n,s)}else a=G6(t,e,n,s,r);return ux(a)}lj=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Np(e.pendingLanes);t!==0&&(L2(e,t|1),pr(e,Tt()),!(Oe&6)&&(Df=Tt()+500,Kl()))}break;case 13:Uu(function(){var r=Za(n,1);if(r!==null){var s=Kn();qs(r,n,1,s)}}),mE(n,1)}};O2=function(n){if(n.tag===13){var e=Za(n,134217728);if(e!==null){var t=Kn();qs(e,n,134217728,t)}mE(n,134217728)}};cj=function(n){if(n.tag===13){var e=Rl(n),t=Za(n,e);if(t!==null){var r=Kn();qs(t,n,e,r)}mE(n,e)}};uj=function(){return Ye};dj=function(n,e){var t=Ye;try{return Ye=n,e()}finally{Ye=t}};D1=function(n,e,t){switch(e){case"input":if(N1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=cw(r);if(!s)throw Error(q(90));UP(r),N1(r,s)}}}break;case"textarea":WP(n,t);break;case"select":e=t.value,e!=null&&Jd(n,!!t.multiple,e,!1)}};QP=uE;JP=Uu;var q6={usingClientEntryPoint:!1,Events:[Ev,zd,cw,KP,XP,uE]},gp={findFiberByHostInstance:wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y6={bundleType:gp.bundleType,version:gp.version,rendererPackageName:gp.rendererPackageName,rendererConfig:gp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=tj(n),n===null?null:n.stateNode},findFiberByHostInstance:gp.findFiberByHostInstance||V6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var v0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!v0.isDisabled&&v0.supportsFiber)try{iw=v0.inject(Y6),zi=v0}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q6;Vr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vE(e))throw Error(q(200));return W6(n,e,null,t)};Vr.createRoot=function(n,e){if(!vE(n))throw Error(q(299));var t=!1,r="",s=MT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=pE(n,1,!1,null,null,t,!1,r,s),n[Ja]=e.current,Sm(n.nodeType===8?n.parentNode:n),new gE(e)};Vr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(q(188)):(n=Object.keys(n).join(","),Error(q(268,n)));return n=tj(e),n=n===null?null:n.stateNode,n};Vr.flushSync=function(n){return Uu(n)};Vr.hydrate=function(n,e,t){if(!yw(e))throw Error(q(200));return xw(null,n,e,!0,t)};Vr.hydrateRoot=function(n,e,t){if(!vE(n))throw Error(q(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",a=MT;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=RT(e,null,n,1,t??null,s,!1,i,a),n[Ja]=e.current,Sm(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new vw(e)};Vr.render=function(n,e,t){if(!yw(e))throw Error(q(200));return xw(null,n,e,!1,t)};Vr.unmountComponentAtNode=function(n){if(!yw(n))throw Error(q(40));return n._reactRootContainer?(Uu(function(){xw(null,null,n,!1,function(){n._reactRootContainer=null,n[Ja]=null})}),!0):!1};Vr.unstable_batchedUpdates=uE;Vr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!yw(t))throw Error(q(200));if(n==null||n._reactInternals===void 0)throw Error(q(38));return xw(n,e,t,!1,r)};Vr.version="18.3.1-next-f1338f8080-20240426";function IT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IT)}catch(n){console.error(n)}}IT(),IP.exports=Vr;var rd=IP.exports;const DT=_P(rd);var LT,ak=rd;LT=ak.createRoot,ak.hydrateRoot;const K6=1,X6=1e6;let Tb=0;function Q6(){return Tb=(Tb+1)%Number.MAX_SAFE_INTEGER,Tb.toString()}const Rb=new Map,ok=n=>{if(Rb.has(n))return;const e=setTimeout(()=>{Rb.delete(n),om({type:"REMOVE_TOAST",toastId:n})},X6);Rb.set(n,e)},J6=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,K6)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?ok(t):n.toasts.forEach(r=>{ok(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},J0=[];let Z0={toasts:[]};function om(n){Z0=J6(Z0,n),J0.forEach(e=>{e(Z0)})}function OT({...n}){const e=Q6(),t=s=>om({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>om({type:"DISMISS_TOAST",toastId:e});return om({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function yE(){const[n,e]=b.useState(Z0);return b.useEffect(()=>(J0.push(e),()=>{const t=J0.indexOf(e);t>-1&&J0.splice(t,1)}),[n]),{...n,toast:OT,dismiss:t=>om({type:"DISMISS_TOAST",toastId:t})}}function he(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function lk(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Hu(...n){return e=>{let t=!1;const r=n.map(s=>{const i=lk(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():lk(n[s],null)}}}}function He(...n){return b.useCallback(Hu(...n),n)}function Z6(n,e){const t=b.createContext(e),r=i=>{const{children:a,...o}=i,l=b.useMemo(()=>o,Object.values(o));return c.jsx(t.Provider,{value:l,children:a})};r.displayName=n+"Provider";function s(i){const a=b.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function ei(n,e=[]){let t=[];function r(i,a){const o=b.createContext(a),l=t.length;t=[...t,a];const u=f=>{var v;const{scope:p,children:m,...y}=f,g=((v=p==null?void 0:p[n])==null?void 0:v[l])||o,x=b.useMemo(()=>y,Object.values(y));return c.jsx(g.Provider,{value:x,children:m})};u.displayName=i+"Provider";function h(f,p){var g;const m=((g=p==null?void 0:p[n])==null?void 0:g[l])||o,y=b.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=t.map(a=>b.createContext(a));return function(o){const l=(o==null?void 0:o[n])||i;return b.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return s.scopeName=n,[r,eF(s,...e)]}function eF(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((o,{useScope:l,scopeName:u})=>{const f=l(i)[`__scope${u}`];return{...o,...f}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Wu(n){const e=nF(n),t=b.forwardRef((r,s)=>{const{children:i,...a}=r,o=b.Children.toArray(i),l=o.find(sF);if(l){const u=l.props.children,h=o.map(f=>f===l?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...a,ref:s,children:b.isValidElement(u)?b.cloneElement(u,void 0,h):null})}return c.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var tF=Wu("Slot");function nF(n){const e=b.forwardRef((t,r)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const a=aF(s),o=iF(i,s.props);return s.type!==b.Fragment&&(o.ref=r?Hu(r,a):a),b.cloneElement(s,o)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var rF=Symbol("radix.slottable");function sF(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===rF}function iF(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...o)=>{const l=i(...o);return s(...o),l}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function aF(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function xE(n){const e=n+"CollectionProvider",[t,r]=ei(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:x,children:v}=g,w=D.useRef(null),_=D.useRef(new Map).current;return c.jsx(s,{scope:x,itemMap:_,collectionRef:w,children:v})};a.displayName=e;const o=n+"CollectionSlot",l=Wu(o),u=D.forwardRef((g,x)=>{const{scope:v,children:w}=g,_=i(o,v),S=He(x,_.collectionRef);return c.jsx(l,{ref:S,children:w})});u.displayName=o;const h=n+"CollectionItemSlot",f="data-radix-collection-item",p=Wu(h),m=D.forwardRef((g,x)=>{const{scope:v,children:w,..._}=g,S=D.useRef(null),C=He(x,S),A=i(h,v);return D.useEffect(()=>(A.itemMap.set(S,{ref:S,..._}),()=>void A.itemMap.delete(S))),c.jsx(p,{[f]:"",ref:C,children:w})});m.displayName=h;function y(g){const x=i(n+"CollectionConsumer",g);return D.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const _=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((A,k)=>_.indexOf(A.ref.current)-_.indexOf(k.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:u,ItemSlot:m},y,r]}var oF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],le=oF.reduce((n,e)=>{const t=Wu(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function FT(n,e){n&&rd.flushSync(()=>n.dispatchEvent(e))}function $t(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function lF(n,e=globalThis==null?void 0:globalThis.document){const t=$t(n);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var cF="DismissableLayer",p_="dismissableLayer.update",uF="dismissableLayer.pointerDownOutside",dF="dismissableLayer.focusOutside",ck,$T=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Av=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...l}=n,u=b.useContext($T),[h,f]=b.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),y=He(e,k=>f(k)),g=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(x),w=h?g.indexOf(h):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,S=w>=v,C=fF(k=>{const j=k.target,T=[...u.branches].some(M=>M.contains(j));!S||T||(s==null||s(k),a==null||a(k),k.defaultPrevented||o==null||o())},p),A=pF(k=>{const j=k.target;[...u.branches].some(M=>M.contains(j))||(i==null||i(k),a==null||a(k),k.defaultPrevented||o==null||o())},p);return lF(k=>{w===u.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&o&&(k.preventDefault(),o()))},p),b.useEffect(()=>{if(h)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ck=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),uk(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=ck)}},[h,p,t,u]),b.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),uk())},[h,u]),b.useEffect(()=>{const k=()=>m({});return document.addEventListener(p_,k),()=>document.removeEventListener(p_,k)},[]),c.jsx(le.div,{...l,ref:y,style:{pointerEvents:_?S?"auto":"none":void 0,...n.style},onFocusCapture:he(n.onFocusCapture,A.onFocusCapture),onBlurCapture:he(n.onBlurCapture,A.onBlurCapture),onPointerDownCapture:he(n.onPointerDownCapture,C.onPointerDownCapture)})});Av.displayName=cF;var hF="DismissableLayerBranch",BT=b.forwardRef((n,e)=>{const t=b.useContext($T),r=b.useRef(null),s=He(e,r);return b.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),c.jsx(le.div,{...n,ref:s})});BT.displayName=hF;function fF(n,e=globalThis==null?void 0:globalThis.document){const t=$t(n),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){zT(uF,t,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function pF(n,e=globalThis==null?void 0:globalThis.document){const t=$t(n),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&zT(dF,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function uk(){const n=new CustomEvent(p_);document.dispatchEvent(n)}function zT(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?FT(s,i):s.dispatchEvent(i)}var mF=Av,gF=BT,Mt=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},vF="Portal",kv=b.forwardRef((n,e)=>{var o;const{container:t,...r}=n,[s,i]=b.useState(!1);Mt(()=>i(!0),[]);const a=t||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?DT.createPortal(c.jsx(le.div,{...r,ref:e}),a):null});kv.displayName=vF;function yF(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var ps=n=>{const{present:e,children:t}=n,r=xF(e),s=typeof t=="function"?t({present:r.isPresent}):b.Children.only(t),i=He(r.ref,wF(s));return typeof t=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};ps.displayName="Presence";function xF(n){const[e,t]=b.useState(),r=b.useRef(null),s=b.useRef(n),i=b.useRef("none"),a=n?"mounted":"unmounted",[o,l]=yF(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=y0(r.current);i.current=o==="mounted"?u:"none"},[o]),Mt(()=>{const u=r.current,h=s.current;if(h!==n){const p=i.current,m=y0(u);n?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),Mt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=m=>{const g=y0(r.current).includes(m.animationName);if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},p=m=>{m.target===e&&(i.current=y0(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:b.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function y0(n){return(n==null?void 0:n.animationName)||"none"}function wF(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var bF=k2[" useInsertionEffect ".trim().toString()]||Mt;function Vu({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,a]=_F({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:s;{const h=b.useRef(n!==void 0);b.useEffect(()=>{const f=h.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=o},[o,r])}const u=b.useCallback(h=>{var f;if(o){const p=SF(h)?h(n):h;p!==n&&((f=a.current)==null||f.call(a,p))}else i(h)},[o,n,i,a]);return[l,u]}function _F({defaultProp:n,onChange:e}){const[t,r]=b.useState(n),s=b.useRef(t),i=b.useRef(e);return bF(()=>{i.current=e},[e]),b.useEffect(()=>{var a;s.current!==t&&((a=i.current)==null||a.call(i,t),s.current=t)},[t,s]),[t,r,i]}function SF(n){return typeof n=="function"}var UT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),EF="VisuallyHidden",wE=b.forwardRef((n,e)=>c.jsx(le.span,{...n,ref:e,style:{...UT,...n.style}}));wE.displayName=EF;var bE="ToastProvider",[_E,CF,AF]=xE("Toast"),[HT,GJ]=ei("Toast",[AF]),[kF,ww]=HT(bE),WT=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=n,[o,l]=b.useState(null),[u,h]=b.useState(0),f=b.useRef(!1),p=b.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${bE}\`. Expected non-empty \`string\`.`),c.jsx(_E.Provider,{scope:e,children:c.jsx(kF,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:o,onViewportChange:l,onToastAdd:b.useCallback(()=>h(m=>m+1),[]),onToastRemove:b.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};WT.displayName=bE;var VT="ToastViewport",NF=["F8"],m_="toast.viewportPause",g_="toast.viewportResume",GT=b.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=NF,label:s="Notifications ({hotkey})",...i}=n,a=ww(VT,t),o=CF(t),l=b.useRef(null),u=b.useRef(null),h=b.useRef(null),f=b.useRef(null),p=He(e,f,a.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;b.useEffect(()=>{const x=v=>{var _;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),b.useEffect(()=>{const x=l.current,v=f.current;if(y&&x&&v){const w=()=>{if(!a.isClosePausedRef.current){const A=new CustomEvent(m_);v.dispatchEvent(A),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const A=new CustomEvent(g_);v.dispatchEvent(A),a.isClosePausedRef.current=!1}},S=A=>{!x.contains(A.relatedTarget)&&_()},C=()=>{x.contains(document.activeElement)||_()};return x.addEventListener("focusin",w),x.addEventListener("focusout",S),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",C),window.addEventListener("blur",w),window.addEventListener("focus",_),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",S),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",C),window.removeEventListener("blur",w),window.removeEventListener("focus",_)}}},[y,a.isClosePausedRef]);const g=b.useCallback(({tabbingDirection:x})=>{const w=o().map(_=>{const S=_.ref.current,C=[S,...zF(S)];return x==="forwards"?C:C.reverse()});return(x==="forwards"?w.reverse():w).flat()},[o]);return b.useEffect(()=>{const x=f.current;if(x){const v=w=>{var C,A,k;const _=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!_){const j=document.activeElement,T=w.shiftKey;if(w.target===x&&T){(C=u.current)==null||C.focus();return}const R=g({tabbingDirection:T?"backwards":"forwards"}),$=R.findIndex(O=>O===j);Mb(R.slice($+1))?w.preventDefault():T?(A=u.current)==null||A.focus():(k=h.current)==null||k.focus()}};return x.addEventListener("keydown",v),()=>x.removeEventListener("keydown",v)}},[o,g]),c.jsxs(gF,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&c.jsx(v_,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});Mb(x)}}),c.jsx(_E.Slot,{scope:t,children:c.jsx(le.ol,{tabIndex:-1,...i,ref:p})}),y&&c.jsx(v_,{ref:h,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});Mb(x)}})]})});GT.displayName=VT;var qT="ToastFocusProxy",v_=b.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=ww(qT,t);return c.jsx(wE,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const o=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(o))&&r()}})});v_.displayName=qT;var Nv="Toast",PF="toast.swipeStart",jF="toast.swipeMove",TF="toast.swipeCancel",RF="toast.swipeEnd",YT=b.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...a}=n,[o,l]=Vu({prop:r,defaultProp:s??!0,onChange:i,caller:Nv});return c.jsx(ps,{present:t||o,children:c.jsx(DF,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:$t(n.onPause),onResume:$t(n.onResume),onSwipeStart:he(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:he(n.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:he(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:he(n.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});YT.displayName=Nv;var[MF,IF]=HT(Nv,{onClose(){}}),DF=b.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...y}=n,g=ww(Nv,t),[x,v]=b.useState(null),w=He(e,O=>v(O)),_=b.useRef(null),S=b.useRef(null),C=s||g.duration,A=b.useRef(0),k=b.useRef(C),j=b.useRef(0),{onToastAdd:T,onToastRemove:M}=g,I=$t(()=>{var W;(x==null?void 0:x.contains(document.activeElement))&&((W=g.viewport)==null||W.focus()),a()}),R=b.useCallback(O=>{!O||O===1/0||(window.clearTimeout(j.current),A.current=new Date().getTime(),j.current=window.setTimeout(I,O))},[I]);b.useEffect(()=>{const O=g.viewport;if(O){const W=()=>{R(k.current),u==null||u()},B=()=>{const F=new Date().getTime()-A.current;k.current=k.current-F,window.clearTimeout(j.current),l==null||l()};return O.addEventListener(m_,B),O.addEventListener(g_,W),()=>{O.removeEventListener(m_,B),O.removeEventListener(g_,W)}}},[g.viewport,C,l,u,R]),b.useEffect(()=>{i&&!g.isClosePausedRef.current&&R(C)},[i,C,g.isClosePausedRef,R]),b.useEffect(()=>(T(),()=>M()),[T,M]);const $=b.useMemo(()=>x?tR(x):null,[x]);return g.viewport?c.jsxs(c.Fragment,{children:[$&&c.jsx(LF,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),c.jsx(MF,{scope:t,onClose:I,children:rd.createPortal(c.jsx(_E.ItemSlot,{scope:t,children:c.jsx(mF,{asChild:!0,onEscapeKeyDown:he(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:w,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:he(n.onKeyDown,O=>{O.key==="Escape"&&(o==null||o(O.nativeEvent),O.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:he(n.onPointerDown,O=>{O.button===0&&(_.current={x:O.clientX,y:O.clientY})}),onPointerMove:he(n.onPointerMove,O=>{if(!_.current)return;const W=O.clientX-_.current.x,B=O.clientY-_.current.y,F=!!S.current,L=["left","right"].includes(g.swipeDirection),U=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,V=L?U(0,W):0,J=L?0:U(0,B),z=O.pointerType==="touch"?10:2,G={x:V,y:J},X={originalEvent:O,delta:G};F?(S.current=G,x0(jF,f,X,{discrete:!1})):dk(G,g.swipeDirection,z)?(S.current=G,x0(PF,h,X,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(W)>z||Math.abs(B)>z)&&(_.current=null)}),onPointerUp:he(n.onPointerUp,O=>{const W=S.current,B=O.target;if(B.hasPointerCapture(O.pointerId)&&B.releasePointerCapture(O.pointerId),S.current=null,_.current=null,W){const F=O.currentTarget,L={originalEvent:O,delta:W};dk(W,g.swipeDirection,g.swipeThreshold)?x0(RF,m,L,{discrete:!0}):x0(TF,p,L,{discrete:!0}),F.addEventListener("click",U=>U.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),LF=n=>{const{__scopeToast:e,children:t,...r}=n,s=ww(Nv,e),[i,a]=b.useState(!1),[o,l]=b.useState(!1);return $F(()=>a(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:c.jsx(kv,{asChild:!0,children:c.jsx(wE,{...r,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",t]})})})},OF="ToastTitle",KT=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return c.jsx(le.div,{...r,ref:e})});KT.displayName=OF;var FF="ToastDescription",XT=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return c.jsx(le.div,{...r,ref:e})});XT.displayName=FF;var QT="ToastAction",JT=b.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?c.jsx(eR,{altText:t,asChild:!0,children:c.jsx(SE,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${QT}\`. Expected non-empty \`string\`.`),null)});JT.displayName=QT;var ZT="ToastClose",SE=b.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=IF(ZT,t);return c.jsx(eR,{asChild:!0,children:c.jsx(le.button,{type:"button",...r,ref:e,onClick:he(n.onClick,s.onClose)})})});SE.displayName=ZT;var eR=b.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return c.jsx(le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function tR(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),BF(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...tR(r))}}),e}function x0(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?FT(s,i):s.dispatchEvent(i)}var dk=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function $F(n=()=>{}){const e=$t(n);Mt(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function BF(n){return n.nodeType===n.ELEMENT_NODE}function zF(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Mb(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var UF=WT,nR=GT,rR=YT,sR=KT,iR=XT,aR=JT,oR=SE;function lR(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=lR(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function cR(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=lR(n))&&(r&&(r+=" "),r+=e);return r}const hk=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,fk=cR,Pv=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return fk(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const h=t==null?void 0:t[u],f=i==null?void 0:i[u];if(h===null)return null;const p=hk(h)||hk(f);return s[u][p]}),o=t&&Object.entries(t).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...m}=h;return Object.entries(m).every(y=>{let[g,x]=y;return Array.isArray(x)?x.includes({...i,...o}[g]):{...i,...o}[g]===x})?[...u,f,p]:u},[]);return fk(n,a,l,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uR=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...o},l)=>b.createElement("svg",{ref:l,...WF,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:uR("lucide",s),...o},[...a.map(([u,h])=>b.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(n,e)=>{const t=b.forwardRef(({className:r,...s},i)=>b.createElement(VF,{ref:i,iconNode:e,className:uR(`lucide-${HF(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=ve("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=ve("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=ve("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=ve("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=ve("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=ve("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=ve("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=ve("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=ve("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=ve("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=ve("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=ve("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=ve("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=ve("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=ve("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=ve("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=ve("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=ve("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),PE="-",o8=n=>{const e=c8(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:a=>{const o=a.split(PE);return o[0]===""&&o.length!==1&&o.shift(),xR(o,e)||l8(a)},getConflictingClassGroupIds:(a,o)=>{const l=t[a]||[];return o&&r[a]?[...l,...r[a]]:l}}},xR=(n,e)=>{var a;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?xR(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(PE);return(a=e.validators.find(({validator:o})=>o(i)))==null?void 0:a.classGroupId},yk=/^\[(.+)\]$/,l8=n=>{if(yk.test(n)){const e=yk.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},c8=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return d8(Object.entries(n.classGroups),t).forEach(([i,a])=>{w_(a,r,i,e)}),r},w_=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:xk(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(u8(s)){w_(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{w_(a,xk(e,i),t,r)})})},xk=(n,e)=>{let t=n;return e.split(PE).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},u8=n=>n.isThemeGetter,d8=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,o])=>[e+a,o])):i);return[t,s]}):n,h8=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,a)=>{t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},wR="!",f8=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,a=o=>{const l=[];let u=0,h=0,f;for(let x=0;x<o.length;x++){let v=o[x];if(u===0){if(v===s&&(r||o.slice(x,x+i)===e)){l.push(o.slice(h,x)),h=x+i;continue}if(v==="/"){f=x;continue}}v==="["?u++:v==="]"&&u--}const p=l.length===0?o:o.substring(h),m=p.startsWith(wR),y=m?p.substring(1):p,g=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return t?o=>t({className:o,parseClassName:a}):a},p8=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},m8=n=>({cache:h8(n.cacheSize),parseClassName:f8(n),...o8(n)}),g8=/\s+/,v8=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=n.trim().split(g8);let o="";for(let l=a.length-1;l>=0;l-=1){const u=a[l],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(u);let y=!!m,g=r(y?p.substring(0,m):p);if(!g){if(!y){o=u+(o.length>0?" "+o:o);continue}if(g=r(p),!g){o=u+(o.length>0?" "+o:o);continue}y=!1}const x=p8(h).join(":"),v=f?x+wR:x,w=v+g;if(i.includes(w))continue;i.push(w);const _=s(g,y);for(let S=0;S<_.length;++S){const C=_[S];i.push(v+C)}o=u+(o.length>0?" "+o:o)}return o};function y8(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=bR(e))&&(r&&(r+=" "),r+=t);return r}const bR=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=bR(n[r]))&&(t&&(t+=" "),t+=e);return t};function x8(n,...e){let t,r,s,i=a;function a(l){const u=e.reduce((h,f)=>f(h),n());return t=m8(u),r=t.cache.get,s=t.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const h=v8(l,t);return s(l,h),h}return function(){return i(y8.apply(null,arguments))}}const it=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},_R=/^\[(?:([a-z-]+):)?(.+)\]$/i,w8=/^\d+\/\d+$/,b8=new Set(["px","full","screen"]),_8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E8=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C8=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,A8=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ea=n=>ah(n)||b8.has(n)||w8.test(n),go=n=>Xf(n,"length",I8),ah=n=>!!n&&!Number.isNaN(Number(n)),Db=n=>Xf(n,"number",ah),vp=n=>!!n&&Number.isInteger(Number(n)),k8=n=>n.endsWith("%")&&ah(n.slice(0,-1)),Se=n=>_R.test(n),vo=n=>_8.test(n),N8=new Set(["length","size","percentage"]),P8=n=>Xf(n,N8,SR),j8=n=>Xf(n,"position",SR),T8=new Set(["image","url"]),R8=n=>Xf(n,T8,L8),M8=n=>Xf(n,"",D8),yp=()=>!0,Xf=(n,e,t)=>{const r=_R.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},I8=n=>S8.test(n)&&!E8.test(n),SR=()=>!1,D8=n=>C8.test(n),L8=n=>A8.test(n),O8=()=>{const n=it("colors"),e=it("spacing"),t=it("blur"),r=it("brightness"),s=it("borderColor"),i=it("borderRadius"),a=it("borderSpacing"),o=it("borderWidth"),l=it("contrast"),u=it("grayscale"),h=it("hueRotate"),f=it("invert"),p=it("gap"),m=it("gradientColorStops"),y=it("gradientColorStopPositions"),g=it("inset"),x=it("margin"),v=it("opacity"),w=it("padding"),_=it("saturate"),S=it("scale"),C=it("sepia"),A=it("skew"),k=it("space"),j=it("translate"),T=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Se,e],R=()=>[Se,e],$=()=>["",ea,go],O=()=>["auto",ah,Se],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],U=()=>["","0",Se],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],J=()=>[ah,Se];return{cacheSize:500,separator:":",theme:{colors:[yp],spacing:[ea,go],blur:["none","",vo,Se],brightness:J(),borderColor:[n],borderRadius:["none","","full",vo,Se],borderSpacing:R(),borderWidth:$(),contrast:J(),grayscale:U(),hueRotate:J(),invert:U(),gap:R(),gradientColorStops:[n],gradientColorStopPositions:[k8,go],inset:I(),margin:I(),opacity:J(),padding:R(),saturate:J(),scale:J(),sepia:U(),skew:J(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[vo]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),Se]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vp,Se]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:U()}],shrink:[{shrink:U()}],order:[{order:["first","last","none",vp,Se]}],"grid-cols":[{"grid-cols":[yp]}],"col-start-end":[{col:["auto",{span:["full",vp,Se]},Se]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[yp]}],"row-start-end":[{row:["auto",{span:[vp,Se]},Se]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Se,e]}],"min-w":[{"min-w":[Se,e,"min","max","fit"]}],"max-w":[{"max-w":[Se,e,"none","full","min","max","fit","prose",{screen:[vo]},vo]}],h:[{h:[Se,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Se,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Se,e,"auto","min","max","fit"]}],"font-size":[{text:["base",vo,go]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Db]}],"font-family":[{font:[yp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",ah,Db]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ea,Se]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ea,go]}],"underline-offset":[{"underline-offset":["auto",ea,Se]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),j8]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",P8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},R8]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[ea,Se]}],"outline-w":[{outline:[ea,go]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ea,go]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",vo,M8]}],"shadow-color":[{shadow:[yp]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",vo,Se]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:J()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:J()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[vp,Se]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ea,go,Db]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},F8=x8(O8);function ee(...n){return F8(cR(n))}const $8=UF,ER=b.forwardRef(({className:n,...e},t)=>c.jsx(nR,{ref:t,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));ER.displayName=nR.displayName;const B8=Pv("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),CR=b.forwardRef(({className:n,variant:e,...t},r)=>c.jsx(rR,{ref:r,className:ee(B8({variant:e}),n),...t}));CR.displayName=rR.displayName;const z8=b.forwardRef(({className:n,...e},t)=>c.jsx(aR,{ref:t,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));z8.displayName=aR.displayName;const AR=b.forwardRef(({className:n,...e},t)=>c.jsx(oR,{ref:t,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:c.jsx(Xl,{className:"h-4 w-4"})}));AR.displayName=oR.displayName;const kR=b.forwardRef(({className:n,...e},t)=>c.jsx(sR,{ref:t,className:ee("text-sm font-semibold",n),...e}));kR.displayName=sR.displayName;const NR=b.forwardRef(({className:n,...e},t)=>c.jsx(iR,{ref:t,className:ee("text-sm opacity-90",n),...e}));NR.displayName=iR.displayName;function U8(){const{toasts:n}=yE();return c.jsxs($8,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return c.jsxs(CR,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[t&&c.jsx(kR,{children:t}),r&&c.jsx(NR,{children:r})]}),s,c.jsx(AR,{})]},e)}),c.jsx(ER,{})]})}var wk=["light","dark"],H8="(prefers-color-scheme: dark)",W8=b.createContext(void 0),V8={setTheme:n=>{},themes:[]},G8=()=>{var n;return(n=b.useContext(W8))!=null?n:V8};b.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:a,attrs:o,nonce:l})=>{let u=i==="system",h=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,f=s?wk.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(y,g=!1,x=!0)=>{let v=a?a[y]:y,w=g?y+"|| ''":`'${v}'`,_="";return s&&x&&!g&&wk.includes(y)&&(_+=`d.style.colorScheme = '${y}';`),t==="class"?g||v?_+=`c.add(${w})`:_+="null":v&&(_+=`d[s](n,${w})`),_},m=n?`!function(){${h}${p(n)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${H8}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}${u?"":"else{"+p(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}else{${p(i,!1,!1)};}${f}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})});var q8=n=>{switch(n){case"success":return X8;case"info":return J8;case"warning":return Q8;case"error":return Z8;default:return null}},Y8=Array(12).fill(0),K8=({visible:n,className:e})=>D.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},D.createElement("div",{className:"sonner-spinner"},Y8.map((t,r)=>D.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),X8=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Q8=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),J8=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Z8=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},D.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),e$=D.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},D.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),D.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),t$=()=>{let[n,e]=D.useState(document.hidden);return D.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},b_=1,n$=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:b_++,i=this.toasts.find(o=>o.id===s),a=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(o=>o.id===s?(this.publish({...o,...n,id:s,title:t}),{...o,...n,id:s,dismissible:a,title:t}):o):this.addToast({title:t,...r,dismissible:a,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),s=t!==void 0,i,a=r.then(async l=>{if(i=["resolve",l],D.isValidElement(l))s=!1,this.create({id:t,type:"default",message:l});else if(s$(l)&&!l.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:t,type:"error",message:u,description:h})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(l):e.success,h=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"success",message:u,description:h})}}).catch(async l=>{if(i=["reject",l],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(l):e.error,h=typeof e.description=="function"?await e.description(l):e.description;this.create({id:t,type:"error",message:u,description:h})}}).finally(()=>{var l;s&&(this.dismiss(t),t=void 0),(l=e.finally)==null||l.call(e)}),o=()=>new Promise((l,u)=>a.then(()=>i[0]==="reject"?u(i[1]):l(i[1])).catch(u));return typeof t!="string"&&typeof t!="number"?{unwrap:o}:Object.assign(t,{unwrap:o})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||b_++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ar=new n$,r$=(n,e)=>{let t=(e==null?void 0:e.id)||b_++;return ar.addToast({title:n,...e,id:t}),t},s$=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",i$=r$,a$=()=>ar.toasts,o$=()=>ar.getActiveToasts(),Le=Object.assign(i$,{success:ar.success,info:ar.info,warning:ar.warning,error:ar.error,custom:ar.custom,message:ar.message,promise:ar.promise,dismiss:ar.dismiss,loading:ar.loading},{getHistory:a$,getToasts:o$});function l$(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}l$(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function w0(n){return n.label!==void 0}var c$=3,u$="32px",d$="16px",bk=4e3,h$=356,f$=14,p$=20,m$=200;function ws(...n){return n.filter(Boolean).join(" ")}function g$(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var v$=n=>{var e,t,r,s,i,a,o,l,u,h,f;let{invert:p,toast:m,unstyled:y,interacting:g,setHeights:x,visibleToasts:v,heights:w,index:_,toasts:S,expanded:C,removeToast:A,defaultRichColors:k,closeButton:j,style:T,cancelButtonStyle:M,actionButtonStyle:I,className:R="",descriptionClassName:$="",duration:O,position:W,gap:B,loadingIcon:F,expandByDefault:L,classNames:U,icons:V,closeButtonAriaLabel:J="Close toast",pauseWhenPageIsHidden:z}=n,[G,X]=D.useState(null),[K,ce]=D.useState(null),[H,pe]=D.useState(!1),[Ee,Ae]=D.useState(!1),[ke,Re]=D.useState(!1),[Ht,er]=D.useState(!1),[rc,uo]=D.useState(!1),[sc,op]=D.useState(0),[cd,VC]=D.useState(0),lp=D.useRef(m.duration||O||bk),GC=D.useRef(null),ic=D.useRef(null),dO=_===0,hO=_+1<=v,qr=m.type,ud=m.dismissible!==!1,fO=m.className||"",pO=m.descriptionClassName||"",e0=D.useMemo(()=>w.findIndex(we=>we.toastId===m.id)||0,[w,m.id]),mO=D.useMemo(()=>{var we;return(we=m.closeButton)!=null?we:j},[m.closeButton,j]),qC=D.useMemo(()=>m.duration||O||bk,[m.duration,O]),nb=D.useRef(0),dd=D.useRef(0),YC=D.useRef(0),hd=D.useRef(null),[gO,vO]=W.split("-"),KC=D.useMemo(()=>w.reduce((we,Ke,ct)=>ct>=e0?we:we+Ke.height,0),[w,e0]),XC=t$(),yO=m.invert||p,rb=qr==="loading";dd.current=D.useMemo(()=>e0*B+KC,[e0,KC]),D.useEffect(()=>{lp.current=qC},[qC]),D.useEffect(()=>{pe(!0)},[]),D.useEffect(()=>{let we=ic.current;if(we){let Ke=we.getBoundingClientRect().height;return VC(Ke),x(ct=>[{toastId:m.id,height:Ke,position:m.position},...ct]),()=>x(ct=>ct.filter(gs=>gs.toastId!==m.id))}},[x,m.id]),D.useLayoutEffect(()=>{if(!H)return;let we=ic.current,Ke=we.style.height;we.style.height="auto";let ct=we.getBoundingClientRect().height;we.style.height=Ke,VC(ct),x(gs=>gs.find(vs=>vs.toastId===m.id)?gs.map(vs=>vs.toastId===m.id?{...vs,height:ct}:vs):[{toastId:m.id,height:ct,position:m.position},...gs])},[H,m.title,m.description,x,m.id]);let ho=D.useCallback(()=>{Ae(!0),op(dd.current),x(we=>we.filter(Ke=>Ke.toastId!==m.id)),setTimeout(()=>{A(m)},m$)},[m,A,x,dd]);D.useEffect(()=>{if(m.promise&&qr==="loading"||m.duration===1/0||m.type==="loading")return;let we;return C||g||z&&XC?(()=>{if(YC.current<nb.current){let Ke=new Date().getTime()-nb.current;lp.current=lp.current-Ke}YC.current=new Date().getTime()})():lp.current!==1/0&&(nb.current=new Date().getTime(),we=setTimeout(()=>{var Ke;(Ke=m.onAutoClose)==null||Ke.call(m,m),ho()},lp.current)),()=>clearTimeout(we)},[C,g,m,qr,z,XC,ho]),D.useEffect(()=>{m.delete&&ho()},[ho,m.delete]);function xO(){var we,Ke,ct;return V!=null&&V.loading?D.createElement("div",{className:ws(U==null?void 0:U.loader,(we=m==null?void 0:m.classNames)==null?void 0:we.loader,"sonner-loader"),"data-visible":qr==="loading"},V.loading):F?D.createElement("div",{className:ws(U==null?void 0:U.loader,(Ke=m==null?void 0:m.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":qr==="loading"},F):D.createElement(K8,{className:ws(U==null?void 0:U.loader,(ct=m==null?void 0:m.classNames)==null?void 0:ct.loader),visible:qr==="loading"})}return D.createElement("li",{tabIndex:0,ref:ic,className:ws(R,fO,U==null?void 0:U.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,U==null?void 0:U.default,U==null?void 0:U[qr],(t=m==null?void 0:m.classNames)==null?void 0:t[qr]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:k,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":H,"data-promise":!!m.promise,"data-swiped":rc,"data-removed":Ee,"data-visible":hO,"data-y-position":gO,"data-x-position":vO,"data-index":_,"data-front":dO,"data-swiping":ke,"data-dismissible":ud,"data-type":qr,"data-invert":yO,"data-swipe-out":Ht,"data-swipe-direction":K,"data-expanded":!!(C||L&&H),style:{"--index":_,"--toasts-before":_,"--z-index":S.length-_,"--offset":`${Ee?sc:dd.current}px`,"--initial-height":L?"auto":`${cd}px`,...T,...m.style},onDragEnd:()=>{Re(!1),X(null),hd.current=null},onPointerDown:we=>{rb||!ud||(GC.current=new Date,op(dd.current),we.target.setPointerCapture(we.pointerId),we.target.tagName!=="BUTTON"&&(Re(!0),hd.current={x:we.clientX,y:we.clientY}))},onPointerUp:()=>{var we,Ke,ct,gs;if(Ht||!ud)return;hd.current=null;let vs=Number(((we=ic.current)==null?void 0:we.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),fo=Number(((Ke=ic.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ac=new Date().getTime()-((ct=GC.current)==null?void 0:ct.getTime()),ys=G==="x"?vs:fo,po=Math.abs(ys)/ac;if(Math.abs(ys)>=p$||po>.11){op(dd.current),(gs=m.onDismiss)==null||gs.call(m,m),ce(G==="x"?vs>0?"right":"left":fo>0?"down":"up"),ho(),er(!0),uo(!1);return}Re(!1),X(null)},onPointerMove:we=>{var Ke,ct,gs,vs;if(!hd.current||!ud||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;let fo=we.clientY-hd.current.y,ac=we.clientX-hd.current.x,ys=(ct=n.swipeDirections)!=null?ct:g$(W);!G&&(Math.abs(ac)>1||Math.abs(fo)>1)&&X(Math.abs(ac)>Math.abs(fo)?"x":"y");let po={x:0,y:0};G==="y"?(ys.includes("top")||ys.includes("bottom"))&&(ys.includes("top")&&fo<0||ys.includes("bottom")&&fo>0)&&(po.y=fo):G==="x"&&(ys.includes("left")||ys.includes("right"))&&(ys.includes("left")&&ac<0||ys.includes("right")&&ac>0)&&(po.x=ac),(Math.abs(po.x)>0||Math.abs(po.y)>0)&&uo(!0),(gs=ic.current)==null||gs.style.setProperty("--swipe-amount-x",`${po.x}px`),(vs=ic.current)==null||vs.style.setProperty("--swipe-amount-y",`${po.y}px`)}},mO&&!m.jsx?D.createElement("button",{"aria-label":J,"data-disabled":rb,"data-close-button":!0,onClick:rb||!ud?()=>{}:()=>{var we;ho(),(we=m.onDismiss)==null||we.call(m,m)},className:ws(U==null?void 0:U.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(i=V==null?void 0:V.close)!=null?i:e$):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:D.createElement(D.Fragment,null,qr||m.icon||m.promise?D.createElement("div",{"data-icon":"",className:ws(U==null?void 0:U.icon,(a=m==null?void 0:m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||xO():null,m.type!=="loading"?m.icon||(V==null?void 0:V[qr])||q8(qr):null):null,D.createElement("div",{"data-content":"",className:ws(U==null?void 0:U.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},D.createElement("div",{"data-title":"",className:ws(U==null?void 0:U.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?D.createElement("div",{"data-description":"",className:ws($,pO,U==null?void 0:U.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&w0(m.cancel)?D.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||M,onClick:we=>{var Ke,ct;w0(m.cancel)&&ud&&((ct=(Ke=m.cancel).onClick)==null||ct.call(Ke,we),ho())},className:ws(U==null?void 0:U.cancelButton,(h=m==null?void 0:m.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&w0(m.action)?D.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||I,onClick:we=>{var Ke,ct;w0(m.action)&&((ct=(Ke=m.action).onClick)==null||ct.call(Ke,we),!we.defaultPrevented&&ho())},className:ws(U==null?void 0:U.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function _k(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function y$(n,e){let t={};return[n,e].forEach((r,s)=>{let i=s===1,a=i?"--mobile-offset":"--offset",o=i?d$:u$;function l(u){["top","right","bottom","left"].forEach(h=>{t[`${a}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?t[`${a}-${u}`]=o:t[`${a}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),t}var x$=b.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:a,className:o,offset:l,mobileOffset:u,theme:h="light",richColors:f,duration:p,style:m,visibleToasts:y=c$,toastOptions:g,dir:x=_k(),gap:v=f$,loadingIcon:w,icons:_,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:C}=n,[A,k]=D.useState([]),j=D.useMemo(()=>Array.from(new Set([r].concat(A.filter(z=>z.position).map(z=>z.position)))),[A,r]),[T,M]=D.useState([]),[I,R]=D.useState(!1),[$,O]=D.useState(!1),[W,B]=D.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=D.useRef(null),L=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),U=D.useRef(null),V=D.useRef(!1),J=D.useCallback(z=>{k(G=>{var X;return(X=G.find(K=>K.id===z.id))!=null&&X.delete||ar.dismiss(z.id),G.filter(({id:K})=>K!==z.id)})},[]);return D.useEffect(()=>ar.subscribe(z=>{if(z.dismiss){k(G=>G.map(X=>X.id===z.id?{...X,delete:!0}:X));return}setTimeout(()=>{DT.flushSync(()=>{k(G=>{let X=G.findIndex(K=>K.id===z.id);return X!==-1?[...G.slice(0,X),{...G[X],...z},...G.slice(X+1)]:[z,...G]})})})}),[]),D.useEffect(()=>{if(h!=="system"){B(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:G})=>{B(G?"dark":"light")})}catch{z.addListener(({matches:X})=>{try{B(X?"dark":"light")}catch(K){console.error(K)}})}},[h]),D.useEffect(()=>{A.length<=1&&R(!1)},[A]),D.useEffect(()=>{let z=G=>{var X,K;s.every(ce=>G[ce]||G.code===ce)&&(R(!0),(X=F.current)==null||X.focus()),G.code==="Escape"&&(document.activeElement===F.current||(K=F.current)!=null&&K.contains(document.activeElement))&&R(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[s]),D.useEffect(()=>{if(F.current)return()=>{U.current&&(U.current.focus({preventScroll:!0}),U.current=null,V.current=!1)}},[F.current]),D.createElement("section",{ref:e,"aria-label":`${S} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((z,G)=>{var X;let[K,ce]=z.split("-");return A.length?D.createElement("ol",{key:z,dir:x==="auto"?_k():x,tabIndex:-1,ref:F,className:o,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":K,"data-lifted":I&&A.length>1&&!i,"data-x-position":ce,style:{"--front-toast-height":`${((X=T[0])==null?void 0:X.height)||0}px`,"--width":`${h$}px`,"--gap":`${v}px`,...m,...y$(l,u)},onBlur:H=>{V.current&&!H.currentTarget.contains(H.relatedTarget)&&(V.current=!1,U.current&&(U.current.focus({preventScroll:!0}),U.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||V.current||(V.current=!0,U.current=H.relatedTarget)},onMouseEnter:()=>R(!0),onMouseMove:()=>R(!0),onMouseLeave:()=>{$||R(!1)},onDragEnd:()=>R(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},A.filter(H=>!H.position&&G===0||H.position===z).map((H,pe)=>{var Ee,Ae;return D.createElement(v$,{key:H.id,icons:_,index:pe,toast:H,defaultRichColors:f,duration:(Ee=g==null?void 0:g.duration)!=null?Ee:p,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:y,closeButton:(Ae=g==null?void 0:g.closeButton)!=null?Ae:a,interacting:$,position:z,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:J,toasts:A.filter(ke=>ke.position==H.position),heights:T.filter(ke=>ke.position==H.position),setHeights:M,expandByDefault:i,gap:v,loadingIcon:w,expanded:I,pauseWhenPageIsHidden:C,swipeDirections:n.swipeDirections})})):null}))});const w$=({...n})=>{const{theme:e="system"}=G8();return c.jsx(x$,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};var _w=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sw=typeof window>"u"||"Deno"in globalThis;function Cs(){}function b$(n,e){return typeof n=="function"?n(e):n}function _$(n){return typeof n=="number"&&n>=0&&n!==1/0}function S$(n,e){return Math.max(n+(e||0)-Date.now(),0)}function __(n,e){return typeof n=="function"?n(e):n}function E$(n,e){return typeof n=="function"?n(e):n}function Sk(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:o}=n;if(a){if(r){if(e.queryHash!==jE(a,e.options))return!1}else if(!Im(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||s&&s!==e.state.fetchStatus||i&&!i(e))}function Ek(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Mm(e.options.mutationKey)!==Mm(i))return!1}else if(!Im(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function jE(n,e){return((e==null?void 0:e.queryKeyHashFn)||Mm)(n)}function Mm(n){return JSON.stringify(n,(e,t)=>S_(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Im(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Im(n[t],e[t])):!1}function PR(n,e){if(n===e)return n;const t=Ck(n)&&Ck(e);if(t||S_(n)&&S_(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),a=i.length,o=t?[]:{},l=new Set(r);let u=0;for(let h=0;h<a;h++){const f=t?h:i[h];(!t&&l.has(f)||t)&&n[f]===void 0&&e[f]===void 0?(o[f]=void 0,u++):(o[f]=PR(n[f],e[f]),o[f]===n[f]&&n[f]!==void 0&&u++)}return s===a&&u===s?n:o}return e}function Ck(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function S_(n){if(!Ak(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!Ak(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function Ak(n){return Object.prototype.toString.call(n)==="[object Object]"}function C$(n){return new Promise(e=>{setTimeout(e,n)})}function A$(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?PR(n,e):e}function k$(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function N$(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var TE=Symbol();function jR(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===TE?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ec,jo,dh,fP,P$=(fP=class extends _w{constructor(){super();N(this,Ec);N(this,jo);N(this,dh);E(this,dh,e=>{if(!Sw&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){d(this,jo)||this.setEventListener(d(this,dh))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,jo))==null||e.call(this),E(this,jo,void 0))}setEventListener(e){var t;E(this,dh,e),(t=d(this,jo))==null||t.call(this),E(this,jo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){d(this,Ec)!==e&&(E(this,Ec,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof d(this,Ec)=="boolean"?d(this,Ec):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ec=new WeakMap,jo=new WeakMap,dh=new WeakMap,fP),TR=new P$,hh,To,fh,pP,j$=(pP=class extends _w{constructor(){super();N(this,hh,!0);N(this,To);N(this,fh);E(this,fh,e=>{if(!Sw&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){d(this,To)||this.setEventListener(d(this,fh))}onUnsubscribe(){var e;this.hasListeners()||((e=d(this,To))==null||e.call(this),E(this,To,void 0))}setEventListener(e){var t;E(this,fh,e),(t=d(this,To))==null||t.call(this),E(this,To,e(this.setOnline.bind(this)))}setOnline(e){d(this,hh)!==e&&(E(this,hh,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return d(this,hh)}},hh=new WeakMap,To=new WeakMap,fh=new WeakMap,pP),hx=new j$;function T$(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function R$(n){return Math.min(1e3*2**n,3e4)}function RR(n){return(n??"online")==="online"?hx.isOnline():!0}var MR=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Lb(n){return n instanceof MR}function IR(n){let e=!1,t=0,r=!1,s;const i=T$(),a=g=>{var x;r||(p(new MR(g)),(x=n.abort)==null||x.call(n))},o=()=>{e=!0},l=()=>{e=!1},u=()=>TR.isFocused()&&(n.networkMode==="always"||hx.isOnline())&&n.canRun(),h=()=>RR(n.networkMode)&&n.canRun(),f=g=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,g),s==null||s(),i.resolve(g))},p=g=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,g),s==null||s(),i.reject(g))},m=()=>new Promise(g=>{var x;s=v=>{(r||u())&&g(v)},(x=n.onPause)==null||x.call(n)}).then(()=>{var g;s=void 0,r||(g=n.onContinue)==null||g.call(n)}),y=()=>{if(r)return;let g;const x=t===0?n.initialPromise:void 0;try{g=x??n.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(f).catch(v=>{var A;if(r)return;const w=n.retry??(Sw?0:3),_=n.retryDelay??R$,S=typeof _=="function"?_(t,v):_,C=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,v);if(e||!C){p(v);return}t++,(A=n.onFail)==null||A.call(n,t,v),C$(S).then(()=>u()?void 0:m()).then(()=>{e?p(v):y()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:o,continueRetry:l,canStart:h,start:()=>(h()?y():m().then(y),i)}}var M$=n=>setTimeout(n,0);function I$(){let n=[],e=0,t=o=>{o()},r=o=>{o()},s=M$;const i=o=>{e?n.push(o):s(()=>{t(o)})},a=()=>{const o=n;n=[],o.length&&s(()=>{r(()=>{o.forEach(l=>{t(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{s=o}}}var qn=I$(),Cc,mP,DR=(mP=class{constructor(){N(this,Cc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_$(this.gcTime)&&E(this,Cc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Sw?1/0:5*60*1e3))}clearGcTimeout(){d(this,Cc)&&(clearTimeout(d(this,Cc)),E(this,Cc,void 0))}},Cc=new WeakMap,mP),ph,Ac,Kr,kc,Nn,Wm,Nc,As,na,gP,D$=(gP=class extends DR{constructor(e){super();N(this,As);N(this,ph);N(this,Ac);N(this,Kr);N(this,kc);N(this,Nn);N(this,Wm);N(this,Nc);E(this,Nc,!1),E(this,Wm,e.defaultOptions),this.setOptions(e.options),this.observers=[],E(this,kc,e.client),E(this,Kr,d(this,kc).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,E(this,ph,O$(this.options)),this.state=e.state??d(this,ph),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=d(this,Nn))==null?void 0:e.promise}setOptions(e){this.options={...d(this,Wm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,Kr).remove(this)}setData(e,t){const r=A$(this.state.data,e,this.options);return P(this,As,na).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){P(this,As,na).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=d(this,Nn))==null?void 0:r.promise;return(s=d(this,Nn))==null||s.cancel(e),t?t.then(Cs).catch(Cs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,ph))}isActive(){return this.observers.some(e=>E$(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===TE||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>__(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!S$(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,Nn))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=d(this,Nn))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),d(this,Kr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(d(this,Nn)&&(d(this,Nc)?d(this,Nn).cancel({revert:!0}):d(this,Nn).cancelRetry()),this.scheduleGc()),d(this,Kr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||P(this,As,na).call(this,{type:"invalidate"})}fetch(e,t){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(d(this,Nn))return d(this,Nn).continueRetry(),d(this,Nn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,s=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(E(this,Nc,!0),r.signal)})},i=()=>{const p=jR(this.options,t),y=(()=>{const g={client:d(this,kc),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return E(this,Nc,!1),this.options.persister?this.options.persister(p,y,this):p(y)},o=(()=>{const p={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:d(this,kc),state:this.state,fetchFn:i};return s(p),p})();(u=this.options.behavior)==null||u.onFetch(o,this),E(this,Ac,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&P(this,As,na).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const l=p=>{var m,y,g,x;Lb(p)&&p.silent||P(this,As,na).call(this,{type:"error",error:p}),Lb(p)||((y=(m=d(this,Kr).config).onError)==null||y.call(m,p,this),(x=(g=d(this,Kr).config).onSettled)==null||x.call(g,this.state.data,p,this)),this.scheduleGc()};return E(this,Nn,IR({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,y,g,x;if(p===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(v){l(v);return}(y=(m=d(this,Kr).config).onSuccess)==null||y.call(m,p,this),(x=(g=d(this,Kr).config).onSettled)==null||x.call(g,p,this.state.error,this),this.scheduleGc()},onError:l,onFail:(p,m)=>{P(this,As,na).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{P(this,As,na).call(this,{type:"pause"})},onContinue:()=>{P(this,As,na).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),d(this,Nn).start()}},ph=new WeakMap,Ac=new WeakMap,Kr=new WeakMap,kc=new WeakMap,Nn=new WeakMap,Wm=new WeakMap,Nc=new WeakMap,As=new WeakSet,na=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...L$(r.data,this.options),fetchMeta:e.meta??null};case"success":return E(this,Ac,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Lb(s)&&s.revert&&d(this,Ac)?{...d(this,Ac),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),qn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),d(this,Kr).notify({query:this,type:"updated",action:e})})},gP);function L$(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:RR(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function O$(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ci,vP,F$=(vP=class extends _w{constructor(e={}){super();N(this,ci);this.config=e,E(this,ci,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??jE(s,t);let a=this.get(i);return a||(a=new D$({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){d(this,ci).has(e.queryHash)||(d(this,ci).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=d(this,ci).get(e.queryHash);t&&(e.destroy(),t===e&&d(this,ci).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return d(this,ci).get(e)}getAll(){return[...d(this,ci).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Sk(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>Sk(e,r)):t}notify(e){qn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){qn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ci=new WeakMap,vP),ui,$n,Pc,di,wo,yP,$$=(yP=class extends DR{constructor(e){super();N(this,di);N(this,ui);N(this,$n);N(this,Pc);this.mutationId=e.mutationId,E(this,$n,e.mutationCache),E(this,ui,[]),this.state=e.state||B$(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){d(this,ui).includes(e)||(d(this,ui).push(e),this.clearGcTimeout(),d(this,$n).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){E(this,ui,d(this,ui).filter(t=>t!==e)),this.scheduleGc(),d(this,$n).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){d(this,ui).length||(this.state.status==="pending"?this.scheduleGc():d(this,$n).remove(this))}continue(){var e;return((e=d(this,Pc))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,o,l,u,h,f,p,m,y,g,x,v,w,_,S,C,A,k,j;const t=()=>{P(this,di,wo).call(this,{type:"continue"})};E(this,Pc,IR({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(T,M)=>{P(this,di,wo).call(this,{type:"failed",failureCount:T,error:M})},onPause:()=>{P(this,di,wo).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,$n).canRun(this)}));const r=this.state.status==="pending",s=!d(this,Pc).canStart();try{if(r)t();else{P(this,di,wo).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(i=d(this,$n).config).onMutate)==null?void 0:a.call(i,e,this));const M=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));M!==this.state.context&&P(this,di,wo).call(this,{type:"pending",context:M,variables:e,isPaused:s})}const T=await d(this,Pc).start();return await((h=(u=d(this,$n).config).onSuccess)==null?void 0:h.call(u,T,e,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,e,this.state.context)),await((y=(m=d(this,$n).config).onSettled)==null?void 0:y.call(m,T,null,this.state.variables,this.state.context,this)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,T,null,e,this.state.context)),P(this,di,wo).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(v=d(this,$n).config).onError)==null?void 0:w.call(v,T,e,this.state.context,this)),await((S=(_=this.options).onError)==null?void 0:S.call(_,T,e,this.state.context)),await((A=(C=d(this,$n).config).onSettled)==null?void 0:A.call(C,void 0,T,this.state.variables,this.state.context,this)),await((j=(k=this.options).onSettled)==null?void 0:j.call(k,void 0,T,e,this.state.context)),T}finally{P(this,di,wo).call(this,{type:"error",error:T})}}finally{d(this,$n).runNext(this)}}},ui=new WeakMap,$n=new WeakMap,Pc=new WeakMap,di=new WeakSet,wo=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),qn.batch(()=>{d(this,ui).forEach(r=>{r.onMutationUpdate(e)}),d(this,$n).notify({mutation:this,type:"updated",action:e})})},yP);function B$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ha,ks,Vm,xP,z$=(xP=class extends _w{constructor(e={}){super();N(this,ha);N(this,ks);N(this,Vm);this.config=e,E(this,ha,new Set),E(this,ks,new Map),E(this,Vm,0)}build(e,t,r){const s=new $$({mutationCache:this,mutationId:++Zt(this,Vm)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){d(this,ha).add(e);const t=b0(e);if(typeof t=="string"){const r=d(this,ks).get(t);r?r.push(e):d(this,ks).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(d(this,ha).delete(e)){const t=b0(e);if(typeof t=="string"){const r=d(this,ks).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&d(this,ks).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=b0(e);if(typeof t=="string"){const r=d(this,ks).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=b0(e);if(typeof t=="string"){const s=(r=d(this,ks).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){qn.batch(()=>{d(this,ha).forEach(e=>{this.notify({type:"removed",mutation:e})}),d(this,ha).clear(),d(this,ks).clear()})}getAll(){return Array.from(d(this,ha))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>Ek(t,r))}findAll(e={}){return this.getAll().filter(t=>Ek(e,t))}notify(e){qn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return qn.batch(()=>Promise.all(e.map(t=>t.continue().catch(Cs))))}},ha=new WeakMap,ks=new WeakMap,Vm=new WeakMap,xP);function b0(n){var e;return(e=n.options.scope)==null?void 0:e.id}function kk(n){return{onFetch:(e,t)=>{var h,f,p,m,y;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((m=e.state.data)==null?void 0:m.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let g=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},v=jR(e.options,e.fetchOptions),w=async(_,S,C)=>{if(g)return Promise.reject();if(S==null&&_.pages.length)return Promise.resolve(_);const k=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:S,direction:C?"backward":"forward",meta:e.options.meta};return x(I),I})(),j=await v(k),{maxPages:T}=e.options,M=C?N$:k$;return{pages:M(_.pages,j,T),pageParams:M(_.pageParams,S,T)}};if(s&&i.length){const _=s==="backward",S=_?U$:Nk,C={pages:i,pageParams:a},A=S(r,C);o=await w(C,A,_)}else{const _=n??i.length;do{const S=l===0?a[0]??r.initialPageParam:Nk(r,o);if(l>0&&S==null)break;o=await w(o,S),l++}while(l<_)}return o};e.options.persister?e.fetchFn=()=>{var g,x;return(x=(g=e.options).persister)==null?void 0:x.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function Nk(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function U$(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var St,Ro,Mo,mh,gh,Io,vh,yh,wP,H$=(wP=class{constructor(n={}){N(this,St);N(this,Ro);N(this,Mo);N(this,mh);N(this,gh);N(this,Io);N(this,vh);N(this,yh);E(this,St,n.queryCache||new F$),E(this,Ro,n.mutationCache||new z$),E(this,Mo,n.defaultOptions||{}),E(this,mh,new Map),E(this,gh,new Map),E(this,Io,0)}mount(){Zt(this,Io)._++,d(this,Io)===1&&(E(this,vh,TR.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,St).onFocus())})),E(this,yh,hx.subscribe(async n=>{n&&(await this.resumePausedMutations(),d(this,St).onOnline())})))}unmount(){var n,e;Zt(this,Io)._--,d(this,Io)===0&&((n=d(this,vh))==null||n.call(this),E(this,vh,void 0),(e=d(this,yh))==null||e.call(this),E(this,yh,void 0))}isFetching(n){return d(this,St).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return d(this,Ro).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,St).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=d(this,St).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(__(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return d(this,St).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=d(this,St).get(r.queryHash),i=s==null?void 0:s.state.data,a=b$(e,i);if(a!==void 0)return d(this,St).build(this,r).setData(a,{...t,manual:!0})}setQueriesData(n,e,t){return qn.batch(()=>d(this,St).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=d(this,St).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=d(this,St);qn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=d(this,St);return qn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=qn.batch(()=>d(this,St).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then(Cs).catch(Cs)}invalidateQueries(n,e={}){return qn.batch(()=>(d(this,St).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=qn.batch(()=>d(this,St).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(Cs)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Cs)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=d(this,St).build(this,e);return t.isStaleByTime(__(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Cs).catch(Cs)}fetchInfiniteQuery(n){return n.behavior=kk(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Cs).catch(Cs)}ensureInfiniteQueryData(n){return n.behavior=kk(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return hx.isOnline()?d(this,Ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,St)}getMutationCache(){return d(this,Ro)}getDefaultOptions(){return d(this,Mo)}setDefaultOptions(n){E(this,Mo,n)}setQueryDefaults(n,e){d(this,mh).set(Mm(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...d(this,mh).values()],t={};return e.forEach(r=>{Im(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){d(this,gh).set(Mm(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...d(this,gh).values()],t={};return e.forEach(r=>{Im(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...d(this,Mo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=jE(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===TE&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...d(this,Mo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){d(this,St).clear(),d(this,Ro).clear()}},St=new WeakMap,Ro=new WeakMap,Mo=new WeakMap,mh=new WeakMap,gh=new WeakMap,Io=new WeakMap,vh=new WeakMap,yh=new WeakMap,wP),W$=b.createContext(void 0),V$=({client:n,children:e})=>(b.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),c.jsx(W$.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dm(){return Dm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dm.apply(this,arguments)}var Cl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Cl||(Cl={}));const Pk="popstate";function G$(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:a,hash:o}=r.location;return E_("",{pathname:i,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:fx(s)}return Y$(e,t,null,n)}function Rt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function LR(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q$(){return Math.random().toString(36).substr(2,8)}function jk(n,e){return{usr:n.state,key:n.key,idx:e}}function E_(n,e,t,r){return t===void 0&&(t=null),Dm({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Qf(e):e,{state:t,key:e&&e.key||r||q$()})}function fx(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Y$(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,o=Cl.Pop,l=null,u=h();u==null&&(u=0,a.replaceState(Dm({},a.state,{idx:u}),""));function h(){return(a.state||{idx:null}).idx}function f(){o=Cl.Pop;let x=h(),v=x==null?null:x-u;u=x,l&&l({action:o,location:g.location,delta:v})}function p(x,v){o=Cl.Push;let w=E_(g.location,x,v);u=h()+1;let _=jk(w,u),S=g.createHref(w);try{a.pushState(_,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(S)}i&&l&&l({action:o,location:g.location,delta:1})}function m(x,v){o=Cl.Replace;let w=E_(g.location,x,v);u=h();let _=jk(w,u),S=g.createHref(w);a.replaceState(_,"",S),i&&l&&l({action:o,location:g.location,delta:0})}function y(x){let v=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof x=="string"?x:fx(x);return w=w.replace(/ $/,"%20"),Rt(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let g={get action(){return o},get location(){return n(s,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Pk,f),l=x,()=>{s.removeEventListener(Pk,f),l=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return a.go(x)}};return g}var Tk;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Tk||(Tk={}));function K$(n,e,t){return t===void 0&&(t="/"),X$(n,e,t,!1)}function X$(n,e,t,r){let s=typeof e=="string"?Qf(e):e,i=RE(s.pathname||"/",t);if(i==null)return null;let a=OR(n);Q$(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=l9(i);o=a9(a[l],u,r)}return o}function OR(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,a,o)=>{let l={relativePath:o===void 0?i.path||"":o,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};l.relativePath.startsWith("/")&&(Rt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Il([r,l.relativePath]),h=t.concat(l);i.children&&i.children.length>0&&(Rt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),OR(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:s9(u,i.index),routesMeta:h})};return n.forEach((i,a)=>{var o;if(i.path===""||!((o=i.path)!=null&&o.includes("?")))s(i,a);else for(let l of FR(i.path))s(i,a,l)}),e}function FR(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=FR(r.join("/")),o=[];return o.push(...a.map(l=>l===""?i:[i,l].join("/"))),s&&o.push(...a),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function Q$(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:i9(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const J$=/^:[\w-]+$/,Z$=3,e9=2,t9=1,n9=10,r9=-2,Rk=n=>n==="*";function s9(n,e){let t=n.split("/"),r=t.length;return t.some(Rk)&&(r+=r9),e&&(r+=e9),t.filter(s=>!Rk(s)).reduce((s,i)=>s+(J$.test(i)?Z$:i===""?t9:n9),r)}function i9(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function a9(n,e,t){let{routesMeta:r}=n,s={},i="/",a=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Mk({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=Mk({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Il([i,f.pathname]),pathnameBase:h9(Il([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=Il([i,f.pathnameBase]))}return a}function Mk(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=o9(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let g=o[f]||"";a=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=o[f];return m&&!y?u[p]=void 0:u[p]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:n}}function o9(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),LR(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function l9(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return LR(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function RE(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function c9(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Qf(n):n;return{pathname:t?t.startsWith("/")?t:u9(t,e):e,search:f9(r),hash:p9(s)}}function u9(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ob(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d9(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ME(n,e){let t=d9(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function IE(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Qf(n):(s=Dm({},n),Rt(!s.pathname||!s.pathname.includes("?"),Ob("?","pathname","search",s)),Rt(!s.pathname||!s.pathname.includes("#"),Ob("#","pathname","hash",s)),Rt(!s.search||!s.search.includes("#"),Ob("#","search","hash",s)));let i=n===""||s.pathname==="",a=i?"/":s.pathname,o;if(a==null)o=t;else{let f=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}o=f>=0?e[f]:"/"}let l=c9(s,o),u=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Il=n=>n.join("/").replace(/\/\/+/g,"/"),h9=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),f9=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,p9=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function m9(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const $R=["post","put","patch","delete"];new Set($R);const g9=["get",...$R];new Set(g9);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lm(){return Lm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lm.apply(this,arguments)}const DE=b.createContext(null),v9=b.createContext(null),Ql=b.createContext(null),Ew=b.createContext(null),oo=b.createContext({outlet:null,matches:[],isDataRoute:!1}),BR=b.createContext(null);function y9(n,e){let{relative:t}=e===void 0?{}:e;Jf()||Rt(!1);let{basename:r,navigator:s}=b.useContext(Ql),{hash:i,pathname:a,search:o}=HR(n,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:Il([r,a])),s.createHref({pathname:l,search:o,hash:i})}function Jf(){return b.useContext(Ew)!=null}function sd(){return Jf()||Rt(!1),b.useContext(Ew).location}function zR(n){b.useContext(Ql).static||b.useLayoutEffect(n)}function Zf(){let{isDataRoute:n}=b.useContext(oo);return n?T9():x9()}function x9(){Jf()||Rt(!1);let n=b.useContext(DE),{basename:e,future:t,navigator:r}=b.useContext(Ql),{matches:s}=b.useContext(oo),{pathname:i}=sd(),a=JSON.stringify(ME(s,t.v7_relativeSplatPath)),o=b.useRef(!1);return zR(()=>{o.current=!0}),b.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let f=IE(u,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Il([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,a,i,n])}function UR(){let{matches:n}=b.useContext(oo),e=n[n.length-1];return e?e.params:{}}function HR(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=b.useContext(Ql),{matches:s}=b.useContext(oo),{pathname:i}=sd(),a=JSON.stringify(ME(s,r.v7_relativeSplatPath));return b.useMemo(()=>IE(n,JSON.parse(a),i,t==="path"),[n,a,i,t])}function w9(n,e){return b9(n,e)}function b9(n,e,t,r){Jf()||Rt(!1);let{navigator:s}=b.useContext(Ql),{matches:i}=b.useContext(oo),a=i[i.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=sd(),h;if(e){var f;let x=typeof e=="string"?Qf(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||Rt(!1),h=x}else h=u;let p=h.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=K$(n,{pathname:m}),g=A9(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Il([l,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Il([l,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,t,r);return e&&g?b.createElement(Ew.Provider,{value:{location:Lm({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Cl.Pop}},g):g}function _9(){let n=j9(),e=m9(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),t?b.createElement("pre",{style:s},t):null,null)}const S9=b.createElement(_9,null);class E9 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?b.createElement(oo.Provider,{value:this.props.routeContext},b.createElement(BR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function C9(n){let{routeContext:e,match:t,children:r}=n,s=b.useContext(DE);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),b.createElement(oo.Provider,{value:e},r)}function A9(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=(s=t)==null?void 0:s.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);h>=0||Rt(!1),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:m}=t,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((h,f,p)=>{let m,y=!1,g=null,x=null;t&&(m=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||S9,l&&(u<0&&p===0?(y=!0,x=null):u===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,p+1)),w=()=>{let _;return m?_=g:y?_=x:f.route.Component?_=b.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,b.createElement(C9,{match:f,routeContext:{outlet:h,matches:v,isDataRoute:t!=null},children:_})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?b.createElement(E9,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var WR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(WR||{}),px=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(px||{});function k9(n){let e=b.useContext(DE);return e||Rt(!1),e}function N9(n){let e=b.useContext(v9);return e||Rt(!1),e}function P9(n){let e=b.useContext(oo);return e||Rt(!1),e}function VR(n){let e=P9(),t=e.matches[e.matches.length-1];return t.route.id||Rt(!1),t.route.id}function j9(){var n;let e=b.useContext(BR),t=N9(px.UseRouteError),r=VR(px.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function T9(){let{router:n}=k9(WR.UseNavigateStable),e=VR(px.UseNavigateStable),t=b.useRef(!1);return zR(()=>{t.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Lm({fromRouteId:e},i)))},[n,e])}function R9(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function M9(n){let{to:e,replace:t,state:r,relative:s}=n;Jf()||Rt(!1);let{future:i,static:a}=b.useContext(Ql),{matches:o}=b.useContext(oo),{pathname:l}=sd(),u=Zf(),h=IE(e,ME(o,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(h);return b.useEffect(()=>u(JSON.parse(f),{replace:t,state:r,relative:s}),[u,f,s,t,r]),null}function ii(n){Rt(!1)}function I9(n){let{basename:e="/",children:t=null,location:r,navigationType:s=Cl.Pop,navigator:i,static:a=!1,future:o}=n;Jf()&&Rt(!1);let l=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:l,navigator:i,static:a,future:Lm({v7_relativeSplatPath:!1},o)}),[l,o,i,a]);typeof r=="string"&&(r=Qf(r));let{pathname:h="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,g=b.useMemo(()=>{let x=RE(h,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:y},navigationType:s}},[l,h,f,p,m,y,s]);return g==null?null:b.createElement(Ql.Provider,{value:u},b.createElement(Ew.Provider,{children:t,value:g}))}function D9(n){let{children:e,location:t}=n;return w9(C_(e),t)}new Promise(()=>{});function C_(n,e){e===void 0&&(e=[]);let t=[];return b.Children.forEach(n,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){t.push.apply(t,C_(r.props.children,i));return}r.type!==ii&&Rt(!1),!r.props.index||!r.props.children||Rt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=C_(r.props.children,i)),t.push(a)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function A_(){return A_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},A_.apply(this,arguments)}function L9(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function O9(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function F9(n,e){return n.button===0&&(!e||e==="_self")&&!O9(n)}function k_(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(s=>[t,s]):[[t,r]])},[]))}function $9(n,e){let t=k_(n);return e&&e.forEach((r,s)=>{t.has(s)||e.getAll(s).forEach(i=>{t.append(s,i)})}),t}const B9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],z9="6";try{window.__reactRouterVersion=z9}catch{}const U9="startTransition",Ik=k2[U9];function H9(n){let{basename:e,children:t,future:r,window:s}=n,i=b.useRef();i.current==null&&(i.current=G$({window:s,v5Compat:!0}));let a=i.current,[o,l]=b.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},h=b.useCallback(f=>{u&&Ik?Ik(()=>l(f)):l(f)},[l,u]);return b.useLayoutEffect(()=>a.listen(h),[a,h]),b.useEffect(()=>R9(r),[r]),b.createElement(I9,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:r})}const W9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dr=b.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:o,target:l,to:u,preventScrollReset:h,viewTransition:f}=e,p=L9(e,B9),{basename:m}=b.useContext(Ql),y,g=!1;if(typeof u=="string"&&V9.test(u)&&(y=u,W9))try{let _=new URL(window.location.href),S=u.startsWith("//")?new URL(_.protocol+u):new URL(u),C=RE(S.pathname,m);S.origin===_.origin&&C!=null?u=C+S.search+S.hash:g=!0}catch{}let x=y9(u,{relative:s}),v=G9(u,{replace:a,state:o,target:l,preventScrollReset:h,relative:s,viewTransition:f});function w(_){r&&r(_),_.defaultPrevented||v(_)}return b.createElement("a",A_({},p,{href:y||x,onClick:g||i?r:w,ref:t,target:l}))});var Dk;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Dk||(Dk={}));var Lk;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Lk||(Lk={}));function G9(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:o}=e===void 0?{}:e,l=Zf(),u=sd(),h=HR(n,{relative:a});return b.useCallback(f=>{if(F9(f,t)){f.preventDefault();let p=r!==void 0?r:fx(u)===fx(h);l(n,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[u,l,h,r,s,t,n,i,a,o])}function q9(n){let e=b.useRef(k_(n)),t=b.useRef(!1),r=sd(),s=b.useMemo(()=>$9(r.search,t.current?null:e.current),[r.search]),i=Zf(),a=b.useCallback((o,l)=>{const u=k_(typeof o=="function"?o(s):o);t.current=!0,i("?"+u,l)},[i,s]);return[s,a]}const N_=Pv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-medical text-sm font-medium transition-smooth focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-hover shadow-card hover:shadow-card-hover",medical:"bg-gradient-medical text-white hover:shadow-elegant hover:scale-[1.02] shadow-card",secondary:"bg-transparent border border-primary text-primary hover:bg-secondary hover:text-secondary-foreground hover:border-secondary",outline:"border border-card-border bg-card hover:bg-muted hover:text-card-foreground",ghost:"hover:bg-muted hover:text-card-foreground",link:"text-primary hover:text-primary-hover underline-offset-4 hover:underline",success:"bg-success text-white hover:opacity-90 shadow-card",warning:"bg-warning text-white hover:opacity-90 shadow-card",error:"bg-error text-white hover:opacity-90 shadow-card"},size:{default:"h-10 px-6 py-2",sm:"h-8 rounded-md px-4 text-xs",lg:"h-12 rounded-medical px-8 text-base",xl:"h-14 rounded-medical px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Z=b.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?tF:"button";return c.jsx(a,{className:ee(N_({variant:e,size:t,className:n})),ref:i,...s})});Z.displayName="Button";const Y9="modulepreload",K9=function(n){return"/swiss-med-track/"+n},Ok={},Tv=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(l=>{if(l=K9(l),l in Ok)return;Ok[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Y9,u||(f.as="script"),f.crossOrigin="",f.href=l,o&&f.setAttribute("nonce",o),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},X9=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Tv(async()=>{const{default:r}=await Promise.resolve().then(()=>ep);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class LE extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class Q9 extends LE{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Fk extends LE{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $k extends LE{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var P_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(P_||(P_={}));var J9=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class Z9{constructor(e,{headers:t={},customFetch:r,region:s=P_.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=X9(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return J9(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(o["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let h;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",h=a):typeof a=="string"?(o["Content-Type"]="text/plain",h=a):typeof FormData<"u"&&a instanceof FormData?h=a:(o["Content-Type"]="application/json",h=JSON.stringify(a)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:h}).catch(g=>{throw new Q9(g)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new Fk(f);if(!f.ok)throw new $k(f);let m=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield f.json():m==="application/octet-stream"?y=yield f.blob():m==="text/event-stream"?y=f:m==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(s){return{data:null,error:s,response:s instanceof $k||s instanceof Fk?s.context:void 0}}})}}var cr={},OE={},Cw={},Rv={},Aw={},kw={},e7=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Lf=e7();const t7=Lf.fetch,GR=Lf.fetch.bind(Lf),qR=Lf.Headers,n7=Lf.Request,r7=Lf.Response,ep=Object.freeze(Object.defineProperty({__proto__:null,Headers:qR,Request:n7,Response:r7,default:GR,fetch:t7},Symbol.toStringTag,{value:"Module"})),s7=SO(ep);var Nw={};Object.defineProperty(Nw,"__esModule",{value:!0});let i7=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Nw.default=i7;var YR=us&&us.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kw,"__esModule",{value:!0});const a7=YR(s7),o7=YR(Nw);let l7=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=a7.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l,u;let h=null,f=null,p=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=w:f=JSON.parse(w))}const x=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const x=await i.text();try{h=JSON.parse(x),Array.isArray(h)&&i.status===404&&(f=[],h=null,m=200,y="OK")}catch{i.status===404&&x===""?(m=204,y="No Content"):h={message:x}}if(h&&this.isMaybeSingle&&(!((u=h==null?void 0:h.details)===null||u===void 0)&&u.includes("0 rows"))&&(h=null,m=200,y="OK"),h&&this.shouldThrowOnError)throw new o7.default(h)}return{error:h,data:f,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};kw.default=l7;var c7=us&&us.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Aw,"__esModule",{value:!0});const u7=c7(kw);let d7=class extends u7.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Aw.default=d7;var h7=us&&us.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rv,"__esModule",{value:!0});const f7=h7(Aw);let p7=class extends f7.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Rv.default=p7;var m7=us&&us.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cw,"__esModule",{value:!0});const xp=m7(Rv);let g7=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new xp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new xp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new xp.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new xp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new xp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Cw.default=g7;var KR=us&&us.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(OE,"__esModule",{value:!0});const v7=KR(Cw),y7=KR(Rv);let x7=class XR{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new v7.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new XR(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let u;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(o="POST",u=t);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new y7.default({method:o,url:l,headers:h,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};OE.default=x7;var tp=us&&us.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(cr,"__esModule",{value:!0});cr.PostgrestError=cr.PostgrestBuilder=cr.PostgrestTransformBuilder=cr.PostgrestFilterBuilder=cr.PostgrestQueryBuilder=cr.PostgrestClient=void 0;const QR=tp(OE);cr.PostgrestClient=QR.default;const JR=tp(Cw);cr.PostgrestQueryBuilder=JR.default;const ZR=tp(Rv);cr.PostgrestFilterBuilder=ZR.default;const eM=tp(Aw);cr.PostgrestTransformBuilder=eM.default;const tM=tp(kw);cr.PostgrestBuilder=tM.default;const nM=tp(Nw);cr.PostgrestError=nM.default;var w7=cr.default={PostgrestClient:QR.default,PostgrestQueryBuilder:JR.default,PostgrestFilterBuilder:ZR.default,PostgrestTransformBuilder:eM.default,PostgrestBuilder:tM.default,PostgrestError:nM.default};const{PostgrestClient:b7,PostgrestQueryBuilder:JJ,PostgrestFilterBuilder:ZJ,PostgrestTransformBuilder:eZ,PostgrestBuilder:tZ,PostgrestError:nZ}=w7;class _7{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const S7="2.15.1",E7=`realtime-js/${S7}`,C7="1.0.0",j_=1e4,A7=1e3,k7=100;var cm;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(cm||(cm={}));var Wt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Wt||(Wt={}));var Bs;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Bs||(Bs={}));var T_;(function(n){n.websocket="websocket"})(T_||(T_={}));var gc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(gc||(gc={}));class N7{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class rM{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(et||(et={}));const Bk=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=P7(a,n,e,s),i),{})},P7=(n,e,t,r)=>{const s=e.find(o=>o.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?sM(i,a):R_(a)},sM=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return M7(e,t)}switch(n){case et.bool:return j7(e);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return T7(e);case et.json:case et.jsonb:return R7(e);case et.timestamp:return I7(e);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return R_(e);default:return R_(e)}},R_=n=>n,j7=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},T7=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},R7=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},M7=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>sM(e,o))}return n},I7=n=>typeof n=="string"?n.replace(" ","T"):n,iM=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Fb{constructor(e,t,r={},s=j_){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zk;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(zk||(zk={}));class um{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=um.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=um.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=um.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,h)=>{a[u]||(l[u]=h)}),this.map(a,(u,h)=>{const f=i[u];if(f){const p=h.map(x=>x.presence_ref),m=f.map(x=>x.presence_ref),y=h.filter(x=>m.indexOf(x.presence_ref)<0),g=f.filter(x=>p.indexOf(x.presence_ref)<0);y.length>0&&(o[u]=y),g.length>0&&(l[u]=g)}else o[u]=h}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const h=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),h.length>0){const f=e[o].map(m=>m.presence_ref),p=h.filter(m=>f.indexOf(m.presence_ref)<0);e[o].unshift(...p)}r(o,h,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const h=l.map(f=>f.presence_ref);u=u.filter(f=>h.indexOf(f.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uk;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Uk||(Uk={}));var dm;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(dm||(dm={}));var la;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(la||(la={}));class FE{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Fb(this,Bs.join,this.params,this.timeout),this.rejoinTimer=new rM(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bs.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new um(this),this.broadcastEndpointURL=iM(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:i,presence:a,private:o}}=this.params,l=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[dm.PRESENCE]&&this.bindings[dm.PRESENCE].length>0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(la.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(la.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(la.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,g=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,x=[];for(let v=0;v<g;v++){const w=y[v],{filter:{event:_,schema:S,table:C,filter:A}}=w,k=p&&p[v];if(k&&k.event===_&&k.schema===S&&k.table===C&&k.filter===A)x.push(Object.assign(Object.assign({},w),{id:k.id}));else{this.unsubscribe(),this.state=Wt.errored,e==null||e(la.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(la.SUBSCRIBED);return}}).receive("error",p=>{this.state=Wt.errored,e==null||e(la.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(la.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Wt.joined&&e===dm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Fb(this,Bs.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fb(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>k7){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:h}=Bs;if(r&&[o,l,u,h].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,g,x;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((x=(g=m.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(m=>m.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var y,g,x,v,w,_;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const S=m.id,C=(y=m.filter)===null||y===void 0?void 0:y.event;return S&&((g=t.ids)===null||g===void 0?void 0:g.includes(S))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const S=(w=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return S==="*"||S===((_=t==null?void 0:t.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:x,commit_timestamp:v,type:w,errors:_}=y;p=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:v,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(y))}m.callback(p,r)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&FE.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bs.close,{},e)}_onError(e){this._on(Bs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Bk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Bk(e.columns,e.old_record)),t}}const Hk=()=>{},_0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},D7=[1e3,2e3,5e3,1e4],L7=1e4,O7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class F7{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=j_,this.transport=null,this.heartbeatIntervalMs=_0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hk,this.ref=0,this.reconnectTimer=null,this.logger=Hk,this.conn=null,this.sendBuffer=[],this.serializer=new N7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>Tv(async()=>{const{default:o}=await Promise.resolve().then(()=>ep);return{default:o}},void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${T_.websocket}`,this.httpEndpoint=iM(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_7.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:C7}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case cm.connecting:return gc.Connecting;case cm.open:return gc.Open;case cm.closing:return gc.Closing;default:return gc.Closed}}isConnected(){return this.connectionState()===gc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new FE(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(A7,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},_0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=t,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([O7],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:E7};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Bs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new rM(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,a,o,l,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:j_,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:_0.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(o=e==null?void 0:e.reconnectAfterMs)!==null&&o!==void 0?o:h=>D7[h-1]||L7,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(h,f)=>f(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $E extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Kt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class $7 extends $E{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class M_ extends $E{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var B7=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const aM=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Tv(async()=>{const{default:r}=await Promise.resolve().then(()=>ep);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},z7=()=>B7(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Tv(()=>Promise.resolve().then(()=>ep),void 0)).Response:Response}),I_=n=>{if(Array.isArray(n))return n.map(t=>I_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=I_(r)}),e},U7=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var id=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const $b=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),H7=(n,e,t)=>id(void 0,void 0,void 0,function*(){const r=yield z7();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new $7($b(s),i,a))}).catch(s=>{e(new M_($b(s),s))}):e(new M_($b(n),n))}),W7=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(U7(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Mv(n,e,t,r,s,i){return id(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,W7(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>H7(l,o,r))})})}function mx(n,e,t,r){return id(this,void 0,void 0,function*(){return Mv(n,"GET",e,t,r)})}function li(n,e,t,r,s){return id(this,void 0,void 0,function*(){return Mv(n,"POST",e,r,s,t)})}function D_(n,e,t,r,s){return id(this,void 0,void 0,function*(){return Mv(n,"PUT",e,r,s,t)})}function V7(n,e,t,r){return id(this,void 0,void 0,function*(){return Mv(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function oM(n,e,t,r,s){return id(this,void 0,void 0,function*(){return Mv(n,"DELETE",e,r,s,t)})}var In=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const G7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class q7{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=aM(s)}uploadOrUpdate(e,t,r,s){return In(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Wk),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),f=yield(e=="PUT"?D_:li)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(Kt(i))return{data:null,error:i};throw i}})}upload(e,t,r){return In(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return In(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:Wk.upsert},s),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const f=yield D_(this.fetch,o.toString(),l,{headers:h});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(Kt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return In(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield li(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new $E("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}update(e,t,r){return In(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return In(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return In(this,void 0,void 0,function*(){try{return{data:{path:(yield li(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return In(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield li(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return In(this,void 0,void 0,function*(){try{const s=yield li(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}download(e,t){return In(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield mx(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Kt(o))return{data:null,error:o};throw o}})}info(e){return In(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield mx(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:I_(r),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}exists(e){return In(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield V7(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Kt(r)&&r instanceof M_){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return In(this,void 0,void 0,function*(){try{return{data:yield oM(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}list(e,t,r){return In(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},G7),t),{prefix:e||""});return{data:yield li(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Kt(s))return{data:null,error:s};throw s}})}listV2(e,t){return In(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield li(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Y7="2.11.0",K7={"X-Client-Info":`storage-js/${Y7}`};var pd=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class X7{constructor(e,t={},r,s){const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},K7),t),this.fetch=aM(r)}listBuckets(){return pd(this,void 0,void 0,function*(){try{return{data:yield mx(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Kt(e))return{data:null,error:e};throw e}})}getBucket(e){return pd(this,void 0,void 0,function*(){try{return{data:yield mx(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return pd(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return pd(this,void 0,void 0,function*(){try{return{data:yield D_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Kt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return pd(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return pd(this,void 0,void 0,function*(){try{return{data:yield oM(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Kt(t))return{data:null,error:t};throw t}})}}class Q7 extends X7{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new q7(this.url,this.headers,e,this.fetch)}}const J7="2.56.0";let jp="";typeof Deno<"u"?jp="deno":typeof document<"u"?jp="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jp="react-native":jp="node";const Z7={"X-Client-Info":`supabase-js-${jp}/${J7}`},eB={headers:Z7},tB={schema:"public"},nB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rB={};var sB=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const iB=n=>{let e;return n?e=n:typeof fetch>"u"?e=GR:e=fetch,(...t)=>e(...t)},aB=()=>typeof Headers>"u"?qR:Headers,oB=(n,e,t)=>{const r=iB(t),s=aB();return(i,a)=>sB(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var lB=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};function cB(n){return n.endsWith("/")?n:n+"/"}function uB(n,e){var t,r;const{db:s,auth:i,realtime:a,global:o}=n,{db:l,auth:u,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},f),o),{headers:Object.assign(Object.assign({},(t=f==null?void 0:f.headers)!==null&&t!==void 0?t:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>lB(this,void 0,void 0,function*(){return""})};return n.accessToken?p.accessToken=n.accessToken:delete p.accessToken,p}const lM="2.71.1",Ed=30*1e3,L_=3,Bb=L_*Ed,dB="http://localhost:9999",hB="supabase.auth.token",fB={"X-Client-Info":`gotrue-js/${lM}`},O_="X-Supabase-Api-Version",cM={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mB=10*60*1e3;class BE extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function be(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class gB extends BE{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function vB(n){return be(n)&&n.name==="AuthApiError"}class uM extends BE{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Jl extends BE{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class bo extends Jl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yB(n){return be(n)&&n.name==="AuthSessionMissingError"}class S0 extends Jl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class E0 extends Jl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class C0 extends Jl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xB(n){return be(n)&&n.name==="AuthImplicitGrantRedirectError"}class Vk extends Jl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class F_ extends Jl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function zb(n){return be(n)&&n.name==="AuthRetryableFetchError"}class Gk extends Jl{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class $_ extends Jl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const gx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qk=` 	
\r=`.split(""),wB=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<qk.length;e+=1)n[qk[e].charCodeAt(0)]=-2;for(let e=0;e<gx.length;e+=1)n[gx[e].charCodeAt(0)]=e;return n})();function Yk(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(gx[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(gx[r]),e.queuedBits-=6}}function dM(n,e,t){const r=wB[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Kk(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{SB(a,r,t)};for(let a=0;a<n.length;a+=1)dM(n.charCodeAt(a),s,i);return e.join("")}function bB(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function _B(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}bB(r,e)}}function SB(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function EB(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)dM(n.charCodeAt(s),t,r);return new Uint8Array(e)}function CB(n){const e=[];return _B(n,t=>e.push(t)),new Uint8Array(e)}function AB(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>Yk(s,t,r)),Yk(null,t,r),e.join("")}function kB(n){return Math.round(Date.now()/1e3)+n}function NB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const bs=()=>typeof window<"u"&&typeof document<"u",oc={tested:!1,writable:!1},hM=()=>{if(!bs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(oc.tested)return oc.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),oc.tested=!0,oc.writable=!0}catch{oc.tested=!0,oc.writable=!1}return oc.writable};function PB(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const fM=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Tv(async()=>{const{default:r}=await Promise.resolve().then(()=>ep);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},jB=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Cd=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},lc=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},yo=async(n,e)=>{await n.removeItem(e)};class Pw{constructor(){this.promise=new Pw.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Pw.promiseConstructor=Promise;function Ub(n){const e=n.split(".");if(e.length!==3)throw new $_("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!pB.test(e[r]))throw new $_("JWT not in base64url format");return{header:JSON.parse(Kk(e[0])),payload:JSON.parse(Kk(e[1])),signature:EB(e[2]),raw:{header:e[0],payload:e[1]}}}async function TB(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function RB(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function MB(n){return("0"+n.toString(16)).substr(-2)}function IB(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,MB).join("")}async function DB(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function LB(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await DB(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function md(n,e,t=!1){const r=IB();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Cd(n,`${e}-code-verifier`,s);const i=await LB(r);return[i,r===i?"plain":"s256"]}const OB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function FB(n){const e=n.headers.get(O_);if(!e||!e.match(OB))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function $B(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function BB(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function gd(n){if(!zB.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hb(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xk(n){return JSON.parse(JSON.stringify(n))}var UB=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const dc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),HB=[502,503,504];async function Qk(n){var e;if(!jB(n))throw new F_(dc(n),0);if(HB.includes(n.status))throw new F_(dc(n),n.status);let t;try{t=await n.json()}catch(i){throw new uM(dc(i),i)}let r;const s=FB(n);if(s&&s.getTime()>=cM["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Gk(dc(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new bo}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Gk(dc(t),n.status,t.weak_password.reasons);throw new gB(dc(t),n.status||500,r)}const WB=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function je(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[O_]||(i[O_]=cM["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await VB(n,e,t+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function VB(n,e,t,r,s,i){const a=WB(e,r,s,i);let o;try{o=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new F_(dc(l),0)}if(o.ok||await Qk(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await Qk(l)}}function ra(n){var e;let t=null;KB(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=kB(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Jk(n){const e=ra(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function No(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function GB(n){return{data:n,error:null}}function qB(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=UB(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function YB(n){return n}function KB(n){return n.access_token&&n.refresh_token&&n.expires_in}const Wb=["global","local","others"];var XB=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class QB{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=fM(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Wb[0]){if(Wb.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wb.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:No})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=XB(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:qB,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(be(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:No})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},h=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:YB});if(h.error)throw h.error;const f=await h.json(),p=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(y.split(";")[1].split("=")[1]);u[`${x}Page`]=g}),u.total=parseInt(p)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(be(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){gd(e);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:No})}catch(t){if(be(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){gd(e);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:No})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){gd(e);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:No})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){gd(e.userId);try{const{data:t,error:r}=await je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(be(t))return{data:null,error:t};throw t}}async _deleteFactor(e){gd(e.userId),gd(e.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}}function Zk(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function JB(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vd={debug:!!(globalThis&&hM()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class pM extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ZB extends pM{}async function ez(n,e,t){vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),vd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw vd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new ZB(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(vd.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}JB();const tz={url:dB,storageKey:hB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function eN(n,e,t){return await t()}const yd={};class Om{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Om.nextInstanceID,Om.nextInstanceID+=1,this.instanceID>0&&bs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},tz),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new QB({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=fM(s.fetch),this.lock=s.lock||eN,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:bs()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=ez:this.lock=eN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:hM()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Zk(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Zk(this.memoryStorage)),bs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=yd[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=yd[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yd[this.storageKey]=Object.assign(Object.assign({},yd[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lM}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=PB(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),bs()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),xB(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return be(t)?{error:t}:{error:new uM("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ra}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(be(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:h,password:f,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await md(this.storage,this.storageKey)),i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:ra})}else if("phone"in e){const{phone:h,password:f,options:p}=e;i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:ra})}else throw new E0("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(be(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Jk})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Jk})}else throw new E0("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new S0}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,a,o,l,u,h,f,p,m;let y,g;if("message"in e)y=e.message,g=e.signature;else{const{chain:x,wallet:v,statement:w,options:_}=e;let S;if(bs())if(typeof v=="object")S=v;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))S=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const C=new URL((t=_==null?void 0:_.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in S&&S.signIn){const A=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),w?{statement:w}:null));let k;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")k=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)k=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${C.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=_==null?void 0:_.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(h=_==null?void 0:_.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const A=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=A}}try{const{data:x,error:v}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:AB(g)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ra});if(v)throw v;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new S0}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:v})}catch(x){if(be(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const t=await lc(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ra});if(await yo(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new S0}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(be(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,o=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ra}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new S0}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await md(this.storage,this.storageKey));const{error:f}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new E0("You must provide either an email or phone number.")}catch(o){if(be(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ra});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await md(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:GB})}catch(i){if(be(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new bo;const{error:s}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await je(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await je(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new E0("You must provide either an email or phone number and a type")}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await lc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Bb:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await lc(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Hb()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,h)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,h))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:No}):await this._useSession(async t=>{var r,s,i;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bo}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:No})})}catch(t){if(be(t))return yB(t)&&(await this._removeSession(),await yo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new bo;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await md(this.storage,this.storageKey));const{data:u,error:h}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:No});if(h)throw h;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bo;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=Ub(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(be(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new bo;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(be(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!bs())throw new C0("No browser detected.");if(e.error||e.error_description||e.error_code)throw new C0(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Vk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new C0("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vk("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new C0("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(o);let p=h+f;l&&(p=parseInt(l));const m=p-h;m*1e3<=Ed&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=p-f;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,h);const{data:g,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:p,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:e.type},error:null}}catch(r){if(be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await lc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(vB(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await yo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=NB(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await md(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(be(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(be(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,h;const{data:f,error:p}=i;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return bs()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(be(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await RB(async s=>(s>0&&await TB(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ra})),(s,i)=>{const a=200*Math.pow(2,s);return i&&zb(i)&&Date.now()+a-r<Ed})}catch(r){if(this._debug(t,"error",r),be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),bs()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await lc(this.storage,this.storageKey);if(s&&this.userStorage){let a=await lc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Cd(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Hb()}else if(s&&!s.user&&!s.user){const a=await lc(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await yo(this.storage,this.storageKey+"-user"),await Cd(this.storage,this.storageKey,s)):s.user=Hb()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Bb;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Bb}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),zb(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new bo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Pw;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new bo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),be(i)){const a={session:null,error:i};return zb(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Cd(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=Xk(s);await Cd(this.storage,this.storageKey,i)}else{const s=Xk(t);await Cd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await yo(this.storage,this.storageKey),await yo(this.storage,this.storageKey+"-code-verifier"),await yo(this.storage,this.storageKey+"-user"),this.userStorage&&await yo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ed);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ed);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ed}ms, refresh threshold is ${L_} ticks`),s<=L_&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof pM)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await md(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await je(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(be(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(be(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Ub(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(o=>o.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+mB>s)return r;const{data:i,error:a}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(o=>o.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};r=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=Ub(r);t!=null&&t.allowExpired||$B(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const h=BB(s.alg),f=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,a,CB(`${o}.${l}`)))throw new $_("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}}Om.nextInstanceID=0;const nz=Om;class rz extends nz{constructor(e){super(e)}}var sz=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(h){try{u(r.next(h))}catch(f){a(f)}}function l(h){try{u(r.throw(h))}catch(f){a(f)}}function u(h){h.done?i(h.value):s(h.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class iz{constructor(e,t,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=cB(e),l=new URL(o);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:tB,realtime:rB,auth:Object.assign(Object.assign({},nB),{storageKey:u}),global:eB},f=uB(r??{},h);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=f.auth)!==null&&a!==void 0?a:{},this.headers,f.global.fetch),this.fetch=oB(t,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new b7(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Q7(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Z9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return sz(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rz({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new F7(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const az=(n,e,t)=>new iz(n,e,t);function oz(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}oz()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lz="https://azthgtmchlqhtzlgwolw.supabase.co",cz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6dGhndG1jaGxxaHR6bGd3b2x3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzMjQ5ODksImV4cCI6MjA3MDkwMDk4OX0.h5Cl_qJHDWlnGArMe8pQCn0rwhYUYBcdaviIvpxryAo",oe=az(lz,cz,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});b.createContext({user:null,session:null,loading:!0,signOut:async()=>{}});const hm=()=>c.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-card-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:c.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[c.jsxs(Dr,{to:"/",className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-medical rounded-medical flex items-center justify-center",children:c.jsx(EE,{className:"w-6 h-6 text-primary-foreground"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-card-foreground",children:"ResidentTrack"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"FMH Medical Training"})]})]}),c.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[c.jsx("a",{href:"#features",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Features"}),c.jsx(Dr,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),c.jsx("a",{href:"#contact",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Kontakt"})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx(Dr,{to:"/auth",children:c.jsxs(Z,{variant:"default",size:"sm",children:[c.jsx(a8,{className:"h-4 w-4 mr-2"}),"Anmelden"]})})})]})}),ae=b.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));ae.displayName="Card";const mt=b.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("flex flex-col space-y-1.5 p-6",n),...e}));mt.displayName="CardHeader";const wt=b.forwardRef(({className:n,...e},t)=>c.jsx("h3",{ref:t,className:ee("text-2xl font-semibold leading-none tracking-tight",n),...e}));wt.displayName="CardTitle";const fm=b.forwardRef(({className:n,...e},t)=>c.jsx("p",{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));fm.displayName="CardDescription";const ze=b.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("p-6 pt-0",n),...e}));ze.displayName="CardContent";const mM=b.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("flex items-center p-6 pt-0",n),...e}));mM.displayName="CardFooter";const uz=Pv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ge({className:n,variant:e,...t}){return c.jsx("div",{className:ee(uz({variant:e}),n),...t})}const B_=({progress:n,label:e,showPercentage:t=!0,variant:r="default",className:s})=>{const i=Math.min(Math.max(n,0),100),a=u=>u>=80?"bg-progress-complete":u>=50?"bg-progress-partial":"bg-progress-pending",l=(()=>{switch(r){case"medical":return{container:"h-3 bg-swiss-gray rounded-full overflow-hidden shadow-progress",bar:"h-full transition-progress rounded-full bg-gradient-progress"};case"compact":return{container:"h-2 bg-swiss-gray rounded-full overflow-hidden",bar:"h-full transition-progress rounded-full"};default:return{container:"h-4 bg-swiss-gray rounded-full overflow-hidden shadow-card",bar:"h-full transition-progress rounded-full"}}})();return c.jsxs("div",{className:ee("w-full",s),children:[(e||t)&&c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e&&c.jsx("span",{className:"text-sm font-medium text-card-foreground",children:e}),t&&c.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[i,"%"]})]}),c.jsx("div",{className:l.container,children:c.jsx("div",{className:ee(l.bar,a(i)),style:{width:`${i}%`}})})]})},dz=({progress:n,size:e=120,strokeWidth:t=8,label:r,showPercentage:s=!0,variant:i="default",className:a})=>{const o=Math.min(Math.max(n,0),100),l=(e-t)/2,u=l*2*Math.PI,h=u-o/100*u,f=y=>y>=80?"stroke-progress-complete":y>=50?"stroke-progress-partial":"stroke-progress-pending",m=(()=>{switch(i){case"medical":return{size:140,strokeWidth:10};case"large":return{size:160,strokeWidth:12};default:return{size:e,strokeWidth:t}}})();return c.jsxs("div",{className:ee("flex flex-col items-center",a),children:[c.jsxs("div",{className:"relative",children:[c.jsxs("svg",{width:m.size,height:m.size,className:"progress-ring",children:[c.jsx("circle",{cx:m.size/2,cy:m.size/2,r:l,stroke:"hsl(var(--swiss-gray))",strokeWidth:m.strokeWidth,fill:"transparent"}),c.jsx("circle",{cx:m.size/2,cy:m.size/2,r:l,stroke:"url(#progressGradient)",strokeWidth:m.strokeWidth,fill:"transparent",strokeDasharray:`${u} ${u}`,strokeDashoffset:h,strokeLinecap:"round",className:ee("transition-progress",f(o))}),c.jsx("defs",{children:c.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"hsl(var(--progress-complete))"}}),c.jsx("stop",{offset:"100%",style:{stopColor:"hsl(var(--medical-primary))"}})]})})]}),s&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-xl font-bold text-card-foreground",children:[Math.round(o),"%"]})})]}),r&&c.jsx("span",{className:"mt-2 text-sm font-medium text-center text-muted-foreground",children:r})]})},A0=[{level:1,title:"PGY1 - Foundation",procedures:45,required:60,courses:3,cmePoints:25},{level:2,title:"PGY2 - Core Skills",procedures:85,required:120,courses:5,cmePoints:40},{level:3,title:"PGY3 - Specialization",procedures:140,required:180,courses:4,cmePoints:35},{level:4,title:"PGY4 - Advanced",procedures:200,required:250,courses:6,cmePoints:50},{level:5,title:"PGY5 - Expert",procedures:180,required:200,courses:3,cmePoints:30},{level:6,title:"PGY6 - Senior",procedures:95,required:100,courses:2,cmePoints:20}],gM=()=>{var f;const[n,e]=b.useState(null),[t,r]=b.useState(0),[s,i]=b.useState(!1);b.useEffect(()=>{if(s){const p=setInterval(()=>{r(m=>m>=100?(i(!1),100):m+2)},50);return()=>clearInterval(p)}},[s]);const a=()=>{r(0),i(!0),e(null)},o=()=>{r(0),i(!1),e(null)},l=()=>{const p=A0.reduce((y,g)=>y+Math.min(g.procedures,g.required),0),m=A0.reduce((y,g)=>y+g.required,0);return Math.round(p/m*100)},u=p=>Math.round(p.procedures/p.required*100),h=p=>p>=90?"default":p>=70?"secondary":"outline";return c.jsxs("div",{className:"w-full max-w-6xl mx-auto p-6",children:[c.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[c.jsxs(Z,{onClick:a,variant:"default",size:"lg",className:"gap-2",disabled:s,children:[c.jsx(mR,{className:"w-4 h-4"}),s?"Demo läuft...":"Demo starten"]}),c.jsxs(Z,{onClick:o,variant:"outline",size:"lg",className:"gap-2",children:[c.jsx(s8,{className:"w-4 h-4"}),"Zurücksetzen"]})]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h3",{className:"text-2xl font-bold mb-4 text-card-foreground",children:"FMH Ausbildungsfortschritt - Gesamtübersicht"}),c.jsx("div",{className:"flex justify-center",children:c.jsx(dz,{progress:s?Math.min(t,l()):l(),variant:"large",label:"Gesamtfortschritt",className:"mb-6"})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:A0.map((p,m)=>{const y=u(p),g=s?Math.min(t*.8+m*5,y):y;return c.jsxs(ae,{className:`medical-card p-6 cursor-pointer transition-all duration-300 ${n===p.level?"ring-2 ring-primary shadow-card-hover scale-105":"hover:shadow-card"}`,onClick:()=>e(n===p.level?null:p.level),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs(ge,{variant:h(y),className:"text-sm font-semibold",children:["PGY",p.level]}),c.jsxs("span",{className:"text-2xl font-bold text-primary",children:[Math.round(g),"%"]})]}),c.jsx("h4",{className:"font-semibold text-card-foreground mb-3",children:p.title}),c.jsx(B_,{progress:g,variant:"medical",className:"mb-4"}),c.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Prozeduren:"}),c.jsxs("span",{className:"font-medium",children:[p.procedures,"/",p.required]})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Kurse:"}),c.jsx("span",{className:"font-medium",children:p.courses})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"CME Punkte:"}),c.jsx("span",{className:"font-medium",children:p.cmePoints})]})]})]},p.level)})}),n&&c.jsx(ae,{className:"medical-card p-6 hero-gradient",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("h4",{className:"text-xl font-bold mb-4 text-card-foreground",children:[(f=A0.find(p=>p.level===n))==null?void 0:f.title," - Detailansicht"]}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Hier würden detaillierte Informationen zu spezifischen Prozeduren, absolvierten Kursen und fehlenden Anforderungen angezeigt."}),c.jsxs("div",{className:"flex justify-center gap-4",children:[c.jsx(Z,{variant:"default",size:"sm",children:"Prozeduren anzeigen"}),c.jsx(Z,{variant:"secondary",size:"sm",children:"Passende Kurse finden"})]})]})})]})},hz=[{icon:lm,title:"FMH-konforme Dokumentation",description:"Vollständige Prozeduren-Tracking nach FMH-Standards"},{icon:jv,title:"Europaweite Kurssuche",description:"Zugang zu Kursen in CH, DE, AT, FR, IT und mehr"},{icon:to,title:"Digitales Logbuch",description:"Automatische Portfolio-Erstellung und PDF-Export"},{icon:sh,title:"Zertifikat-Management",description:"CME-Punkte tracking und Zertifikat-Verwaltung"}],fz=()=>c.jsxs("section",{className:"relative overflow-hidden",children:[c.jsx("div",{className:"hero-gradient",children:c.jsx("div",{className:"container mx-auto px-4 py-20",children:c.jsxs("div",{className:"text-center max-w-4xl mx-auto mb-16",children:[c.jsx(ge,{variant:"secondary",className:"mb-6 text-sm px-4 py-2",children:"🇨🇭 FMH-konforme Ausbildung für die Schweiz & Europa"}),c.jsxs("h1",{className:"text-medical-title text-card-foreground mb-6",children:["Ihre chirurgische Ausbildung",c.jsx("span",{className:"bg-gradient-medical bg-clip-text text-transparent",children:" digital verwalten"})]}),c.jsx("p",{className:"text-medical-subtitle mb-8 max-w-2xl mx-auto",children:"ResidentTrack ist die führende Plattform für Assistenzärzt:innen zur FMH-konformen Dokumentation ihres Ausbildungsfortschritts und zur europäischen Kurssuche."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-12",children:[c.jsxs(Z,{variant:"default",size:"lg",className:"gap-2 shadow-card-hover",children:["Als Resident starten",c.jsx(GF,{className:"w-5 h-5"})]}),c.jsxs(Z,{variant:"secondary",size:"lg",className:"gap-2",children:[c.jsx(to,{className:"w-5 h-5"}),"Demo ansehen"]}),c.jsx(Z,{variant:"outline",size:"lg",children:"Kurs anbieten"})]}),c.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(lm,{className:"w-4 h-4 text-activity-mint"}),c.jsx("span",{children:"FMH optimiert"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(lm,{className:"w-4 h-4 text-activity-mint"}),c.jsx("span",{children:"DSGVO-konform"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(lm,{className:"w-4 h-4 text-activity-mint"}),c.jsx("span",{children:"500+ Residents"})]})]})]})})}),c.jsx("div",{className:"bg-background",children:c.jsxs("div",{className:"container mx-auto px-4 py-16",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx(ge,{variant:"outline",className:"mb-4",children:"Live Demo"}),c.jsx("h2",{className:"text-3xl font-bold text-card-foreground mb-4",children:"Fortschritt in Echtzeit verfolgen"}),c.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Erleben Sie selbst, wie ResidentTrack Ihren Ausbildungsfortschritt von PGY1 bis PGY6 visualisiert und Ihre FMH-Anforderungen überwacht."})]}),c.jsx(gM,{})]})}),c.jsx("div",{className:"bg-muted/30",children:c.jsx("div",{className:"container mx-auto px-4 py-16",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:hz.map((n,e)=>c.jsxs(ae,{className:"medical-card p-6 text-center",children:[c.jsx("div",{className:"w-12 h-12 bg-primary rounded-medical flex items-center justify-center mx-auto mb-4",children:c.jsx(n.icon,{className:"w-6 h-6 text-primary-foreground"})}),c.jsx("h3",{className:"font-semibold text-card-foreground mb-2",children:n.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]},e))})})})]});class pz extends D.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Index Error Boundary caught an error:",e,t)}render(){var e;return this.state.hasError?c.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Fehler beim Laden der Seite"}),c.jsx("p",{className:"text-red-600 mb-4",children:"Ein unerwarteter Fehler ist aufgetreten."}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Seite neu laden"}),c.jsxs("details",{className:"mt-4 text-left",children:[c.jsx("summary",{className:"cursor-pointer text-red-700",children:"Fehlerdetails"}),c.jsx("pre",{className:"mt-2 text-xs text-red-600 bg-red-100 p-2 rounded overflow-auto",children:(e=this.state.error)==null?void 0:e.toString()})]})]})}):this.props.children}}const mz=()=>{console.log("Index: Rendering main content - NO AUTH DEPENDENCIES");try{return c.jsx(pz,{children:c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(hm,{}),c.jsxs("main",{children:[c.jsx(fz,{}),c.jsx(gM,{})]})]})})}catch(n){return console.error("Index render error:",n),c.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"Render-Fehler"}),c.jsx("p",{className:"text-red-600",children:String(n)})]})})}},vM=b.createContext({user:null,session:null,loading:!0,signOut:async()=>{}}),Iv=()=>{const n=b.useContext(vM);if(!n)throw new Error("useAuthSimple must be used within an AuthProvider");return n},gz=({children:n})=>{const[e,t]=b.useState(null),[r,s]=b.useState(null),[i,a]=b.useState(!0);b.useEffect(()=>{const{data:{subscription:l}}=oe.auth.onAuthStateChange((u,h)=>{var f;console.log("Auth state change:",u,(f=h==null?void 0:h.user)==null?void 0:f.id),s(h),t((h==null?void 0:h.user)??null),a(!1)});return oe.auth.getSession().then(({data:{session:u}})=>{s(u),t((u==null?void 0:u.user)??null),a(!1)}),()=>l.unsubscribe()},[]);const o=async()=>{await oe.auth.signOut(),window.location.href="/swiss-med-track/"};return c.jsx(vM.Provider,{value:{user:e,session:r,loading:i,signOut:o},children:n})},zE=()=>{const{user:n,signOut:e}=Iv(),t=async()=>{await e()};return c.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-card-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:c.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[c.jsxs(Dr,{to:"/",className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-medical rounded-medical flex items-center justify-center",children:c.jsx(EE,{className:"w-6 h-6 text-primary-foreground"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-bold text-card-foreground",children:"ResidentTrack"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"FMH Medical Training"})]})]}),c.jsx("nav",{className:"hidden md:flex items-center gap-6",children:n?c.jsxs(c.Fragment,{children:[c.jsx(Dr,{to:"/fmh",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"FMH Tracking"}),c.jsx(Dr,{to:"/dashboard",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Dashboard"}),c.jsx(Dr,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"})]}):c.jsxs(c.Fragment,{children:[c.jsx("a",{href:"#features",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Features"}),c.jsx(Dr,{to:"/courses",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Courses"}),c.jsx("a",{href:"#contact",className:"text-sm font-medium text-muted-foreground hover:text-card-foreground transition-colors",children:"Kontakt"})]})}),c.jsx("div",{className:"flex items-center gap-3",children:n?c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"text-sm text-muted-foreground",children:"Willkommen zurück!"}),c.jsxs(Z,{variant:"ghost",size:"sm",onClick:t,children:[c.jsx(r8,{className:"h-4 w-4 mr-2"}),"Abmelden"]})]}):c.jsxs(c.Fragment,{children:[c.jsx(Dr,{to:"/auth",children:c.jsx(Z,{variant:"ghost",size:"sm",className:"hidden md:inline-flex",children:"Anmelden"})}),c.jsx(Dr,{to:"/auth",children:c.jsx(Z,{variant:"medical",size:"sm",children:"Kostenlos testen"})})]})})]})})},Dv=({progress:n,size:e=80,strokeWidth:t=6,color:r,backgroundColor:s="hsl(var(--swiss-gray))",label:i,showPercentage:a=!1,className:o,onClick:l,variant:u="mint"})=>{const h=Math.min(Math.max(n,0),100),f=(e-t)/2,p=f*2*Math.PI,m=p-h/100*p,y=()=>{if(r)return r;switch(u){case"mint":return"hsl(var(--activity-mint))";case"coral":return"hsl(var(--activity-coral))";case"lavender":return"hsl(var(--activity-lavender))";case"amber":return"hsl(var(--activity-amber))";default:return"hsl(var(--activity-mint))"}};return c.jsxs("div",{className:ee("flex flex-col items-center cursor-pointer transition-transform hover:scale-105",o),onClick:l,children:[c.jsxs("div",{className:"relative",children:[c.jsxs("svg",{width:e,height:e,className:"progress-ring -rotate-90",children:[c.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:s,strokeWidth:t,fill:"transparent",opacity:.2}),c.jsx("circle",{cx:e/2,cy:e/2,r:f,stroke:y(),strokeWidth:t,fill:"transparent",strokeDasharray:`${p} ${p}`,strokeDashoffset:m,strokeLinecap:"round",className:"transition-all duration-1000 ease-out",style:{transformOrigin:"center"}})]}),a&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-sm font-bold text-card-foreground",children:[Math.round(h),"%"]})})]}),i&&c.jsx("span",{className:"mt-1 text-xs font-medium text-center text-muted-foreground max-w-20",children:i})]})};var vz=k2[" useId ".trim().toString()]||(()=>{}),yz=0;function Xn(n){const[e,t]=b.useState(vz());return Mt(()=>{n||t(r=>r??String(yz++))},[n]),n||(e?`radix-${e}`:"")}var xz=b.createContext(void 0);function jw(n){const e=b.useContext(xz);return n||e||"ltr"}var Vb="rovingFocusGroup.onEntryFocus",wz={bubbles:!1,cancelable:!0},Lv="RovingFocusGroup",[z_,yM,bz]=xE(Lv),[_z,xM]=ei(Lv,[bz]),[Sz,Ez]=_z(Lv),wM=b.forwardRef((n,e)=>c.jsx(z_.Provider,{scope:n.__scopeRovingFocusGroup,children:c.jsx(z_.Slot,{scope:n.__scopeRovingFocusGroup,children:c.jsx(Cz,{...n,ref:e})})}));wM.displayName=Lv;var Cz=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=n,p=b.useRef(null),m=He(e,p),y=jw(i),[g,x]=Vu({prop:a,defaultProp:o??null,onChange:l,caller:Lv}),[v,w]=b.useState(!1),_=$t(u),S=yM(t),C=b.useRef(!1),[A,k]=b.useState(0);return b.useEffect(()=>{const j=p.current;if(j)return j.addEventListener(Vb,_),()=>j.removeEventListener(Vb,_)},[_]),c.jsx(Sz,{scope:t,orientation:r,dir:y,loop:s,currentTabStopId:g,onItemFocus:b.useCallback(j=>x(j),[x]),onItemShiftTab:b.useCallback(()=>w(!0),[]),onFocusableItemAdd:b.useCallback(()=>k(j=>j+1),[]),onFocusableItemRemove:b.useCallback(()=>k(j=>j-1),[]),children:c.jsx(le.div,{tabIndex:v||A===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...n.style},onMouseDown:he(n.onMouseDown,()=>{C.current=!0}),onFocus:he(n.onFocus,j=>{const T=!C.current;if(j.target===j.currentTarget&&T&&!v){const M=new CustomEvent(Vb,wz);if(j.currentTarget.dispatchEvent(M),!M.defaultPrevented){const I=S().filter(B=>B.focusable),R=I.find(B=>B.active),$=I.find(B=>B.id===g),W=[R,$,...I].filter(Boolean).map(B=>B.ref.current);SM(W,h)}}C.current=!1}),onBlur:he(n.onBlur,()=>w(!1))})})}),bM="RovingFocusGroupItem",_M=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:a,...o}=n,l=Xn(),u=i||l,h=Ez(bM,t),f=h.currentTabStopId===u,p=yM(t),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=h;return b.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),c.jsx(z_.ItemSlot,{scope:t,id:u,focusable:r,active:s,children:c.jsx(le.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...o,ref:e,onMouseDown:he(n.onMouseDown,x=>{r?h.onItemFocus(u):x.preventDefault()}),onFocus:he(n.onFocus,()=>h.onItemFocus(u)),onKeyDown:he(n.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){h.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=Nz(x,h.orientation,h.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=p().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const S=_.indexOf(x.currentTarget);_=h.loop?Pz(_,S+1):_.slice(S+1)}setTimeout(()=>SM(_))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:g!=null}):a})})});_M.displayName=bM;var Az={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kz(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function Nz(n,e,t){const r=kz(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Az[r]}function SM(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function Pz(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var jz=wM,Tz=_M,Tw="Tabs",[Rz,rZ]=ei(Tw,[xM]),EM=xM(),[Mz,UE]=Rz(Tw),CM=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:o,activationMode:l="automatic",...u}=n,h=jw(o),[f,p]=Vu({prop:r,onChange:s,defaultProp:i??"",caller:Tw});return c.jsx(Mz,{scope:t,baseId:Xn(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:l,children:c.jsx(le.div,{dir:h,"data-orientation":a,...u,ref:e})})});CM.displayName=Tw;var AM="TabsList",kM=b.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...s}=n,i=UE(AM,t),a=EM(t);return c.jsx(jz,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:c.jsx(le.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});kM.displayName=AM;var NM="TabsTrigger",PM=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:s=!1,...i}=n,a=UE(NM,t),o=EM(t),l=RM(a.baseId,r),u=MM(a.baseId,r),h=r===a.value;return c.jsx(Tz,{asChild:!0,...o,focusable:!s,active:h,children:c.jsx(le.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:he(n.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:he(n.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:he(n.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});PM.displayName=NM;var jM="TabsContent",TM=b.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:s,children:i,...a}=n,o=UE(jM,t),l=RM(o.baseId,r),u=MM(o.baseId,r),h=r===o.value,f=b.useRef(h);return b.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),c.jsx(ps,{present:s||h,children:({present:p})=>c.jsx(le.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...n.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});TM.displayName=jM;function RM(n,e){return`${n}-trigger-${e}`}function MM(n,e){return`${n}-content-${e}`}var Iz=CM,IM=kM,DM=PM,LM=TM;const Zl=Iz,lo=b.forwardRef(({className:n,...e},t)=>c.jsx(IM,{ref:t,className:ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n),...e}));lo.displayName=IM.displayName;const At=b.forwardRef(({className:n,...e},t)=>c.jsx(DM,{ref:t,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",n),...e}));At.displayName=DM.displayName;const zt=b.forwardRef(({className:n,...e},t)=>c.jsx(LM,{ref:t,className:ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...e}));zt.displayName=LM.displayName;const Dz=({activityId:n,data:e,onClose:t})=>{const s=(p=>{const m={courses:{title:"Kurse & Fortbildungen",icon:to,variant:"coral",color:"hsl(var(--activity-coral))"},mandatory:{title:"Pflichtkurse",icon:to,variant:"lavender",color:"hsl(var(--activity-lavender))"},procedures:{title:"OP-Prozeduren",icon:Rm,variant:"mint",color:"hsl(var(--activity-mint))"},publications:{title:"Publikationen",icon:Kf,variant:"lavender",color:"hsl(var(--activity-lavender))"},awards:{title:"Awards & Auszeichnungen",icon:sh,variant:"amber",color:"hsl(var(--activity-amber))"}};return m[p]||m.courses})(n),i=s.icon,a=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Abgeschlossen"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target-e.completed}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Verbleibend"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.points}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["2021","2022","2023","2024"].map((p,m)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsx("span",{className:"font-medium",children:p}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(B_,{progress:Math.min((m+1)*25,100),variant:"compact",className:"w-24"}),c.jsxs(ge,{variant:"outline",children:[(m+1)*7," Kurse"]})]})]},p))})]})]}),o=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.completed}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Durchgeführt"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.target}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"FMH-Ziel"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[Math.round(e.completed/e.target*100),"%"]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Fortschritt"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Jahresverlauf"}),c.jsx("div",{className:"space-y-3",children:Object.entries(e.byYear||{}).map(([p,m])=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsx("span",{className:"font-medium",children:p}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(B_,{progress:Math.min(m/200*100,100),variant:"compact",className:"w-32"}),c.jsxs(ge,{variant:"outline",children:[String(m)," Prozeduren"]})]})]},p))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Häufigste Prozeduren"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{name:"Laparoskopische Cholezystektomie",count:45},{name:"Appendektomie",count:38},{name:"Hernienreparatur",count:32},{name:"Endoskopie",count:28}].map(p=>c.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-medical",children:[c.jsx("span",{className:"text-sm font-medium",children:p.name}),c.jsxs(ge,{variant:"secondary",children:[p.count,"x"]})]},p.name))})]})]}),l=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Publikationen"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"4"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Peer-reviewed"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2.4"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø Impact Factor"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Publikationen"}),c.jsx("div",{className:"space-y-3",children:e.articles.map((p,m)=>c.jsxs("div",{className:"p-4 border border-card-border rounded-medical",children:[c.jsx("h5",{className:"font-medium text-card-foreground mb-2",children:p.title}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:p.journal}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ge,{variant:"outline",children:p.date}),p.doi&&c.jsx(Z,{variant:"ghost",size:"sm",className:"text-xs",children:"DOI"})]})]})]},m))})]})]}),u=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:e.count}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Auszeichnungen"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"2"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"National"})]})}),c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"1"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"International"})]})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-card-foreground",children:"Alle Auszeichnungen"}),c.jsx("div",{className:"space-y-3",children:e.items.map((p,m)=>c.jsx("div",{className:"p-4 border border-card-border rounded-medical",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:p.icon}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h5",{className:"font-medium text-card-foreground",children:p.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:p.organization})]}),c.jsx(ge,{variant:"outline",children:p.date})]})},m))})]})]}),h=()=>{switch(n){case"courses":case"mandatory":return a();case"procedures":return o();case"publications":return l();case"awards":return u();default:return a()}},f=n==="procedures"||n==="courses"||n==="mandatory"?e.completed/e.target*100:Math.min(e.count/5*100,100);return c.jsxs(ae,{className:"medical-card p-6 mb-8 animate-fade-in",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 rounded-medical",style:{backgroundColor:`${s.color}20`},children:c.jsx(i,{className:"w-6 h-6",style:{color:s.color}})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-card-foreground",children:s.title}),c.jsx("p",{className:"text-muted-foreground",children:"Detailierte Ansicht und Jahresverlauf"})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Dv,{progress:f,variant:s.variant,size:80,strokeWidth:6,showPercentage:!0}),c.jsx(Z,{variant:"ghost",size:"sm",onClick:t,children:c.jsx(Xl,{className:"w-4 h-4"})})]})]}),c.jsxs(Zl,{defaultValue:"overview",className:"w-full",children:[c.jsxs(lo,{className:"grid w-full grid-cols-3",children:[c.jsx(At,{value:"overview",children:"Übersicht"}),c.jsx(At,{value:"yearly",children:"Jahresverlauf"}),c.jsx(At,{value:"trends",children:"Trends"})]}),c.jsx(zt,{value:"overview",className:"mt-6",children:h()}),c.jsx(zt,{value:"yearly",className:"mt-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(Hi,{className:"w-4 h-4"}),c.jsx("span",{children:"Fortschrittsverlauf nach Jahren"})]}),h()]})}),c.jsx(zt,{value:"trends",className:"mt-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[c.jsx(yR,{className:"w-4 h-4"}),c.jsx("span",{children:"Analyse und Prognosen"})]}),c.jsxs(ae,{className:"p-6",children:[c.jsx("h4",{className:"font-semibold text-card-foreground mb-4",children:"Trend-Analyse"}),c.jsx("p",{className:"text-muted-foreground",children:"Basierend auf Ihrem aktuellen Fortschritt werden Sie Ihr FMH-Ziel voraussichtlich in 18 Monaten erreichen. Ihr Lernfortschritt ist konstant und liegt über dem Durchschnitt."})]})]})})]})]})},Dn={courses:{completed:28,target:35,points:142},mandatoryCourses:{completed:8,target:12,points:64},procedures:{completed:485,target:600,byYear:{2021:45,2022:120,2023:180,2024:140}},publications:{count:6,articles:[{title:"Minimally Invasive Cardiac Surgery",journal:"Heart Surgery Today",date:"2024-03-15"},{title:"Patient Outcomes in Emergency Medicine",journal:"Emergency Care Journal",date:"2023-11-20"}]},awards:{count:3,items:[{title:"Young Surgeon Award",organization:"Swiss Medical Society",date:"2024-01-15",icon:"🏆"},{title:"Research Excellence",organization:"University Hospital",date:"2023-09-10",icon:"🎖️"}]}},Lz=()=>{var a;const[n,e]=b.useState(null),[t,r]=b.useState(0);b.useEffect(()=>{const o=setTimeout(()=>{r(100)},300);return()=>clearTimeout(o)},[]);const i=[{id:"courses",label:"Kurse",progress:Dn.courses.completed/Dn.courses.target*100,variant:"coral",icon:to,data:Dn.courses},{id:"mandatory",label:"Pflichtkurse",progress:Dn.mandatoryCourses.completed/Dn.mandatoryCourses.target*100,variant:"lavender",icon:EE,data:Dn.mandatoryCourses},{id:"procedures",label:"Prozeduren",progress:Dn.procedures.completed/Dn.procedures.target*100,variant:"mint",icon:Rm,data:Dn.procedures},{id:"publications",label:"Publikationen",progress:Math.min(Dn.publications.count/5*100,100),variant:"lavender",icon:Kf,data:Dn.publications},{id:"awards",label:"Awards",progress:Math.min(Dn.awards.count/3*100,100),variant:"amber",icon:vk,data:Dn.awards}];return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(zE,{}),c.jsxs("main",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"Ihr Ausbildungsdashboard"}),c.jsx("p",{className:"text-muted-foreground",children:"Verfolgen Sie Ihren FMH-konformen Fortschritt in Echtzeit"})]}),c.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[c.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(kE,{className:"w-4 h-4"}),"Profil teilen"]}),c.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(Hi,{className:"w-4 h-4"}),"Kurse suchen"]}),c.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(AE,{className:"w-4 h-4"}),"Einstellungen"]})]})]}),c.jsxs(ae,{className:"medical-card p-8 mb-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-4",children:"Ihr Aktivitätsfortschritt"}),c.jsx("p",{className:"text-muted-foreground",children:"Apple Activity-inspirierte Darstellung Ihrer medizinischen Ausbildung"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:i.map(o=>{const l=t>0?Math.min(t*(o.progress/100),o.progress):o.progress;return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(Dv,{progress:l,variant:o.variant,size:120,strokeWidth:8,label:o.label,showPercentage:!0,onClick:()=>e(o.id),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[c.jsx(o.icon,{className:"w-4 h-4 text-muted-foreground"}),c.jsx(ge,{variant:"outline",className:"text-xs",children:o.id==="procedures"?`${o.data.completed}/${o.data.target}`:o.id==="courses"||o.id==="mandatory"?`${o.data.completed}/${o.data.target}`:`${o.data.count||o.data.completed||0}`})]})})]},o.id)})})]}),n&&c.jsx(Dz,{activityId:n,data:(a=i.find(o=>o.id===n))==null?void 0:a.data,onClose:()=>e(null)}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:c.jsx(Rm,{className:"w-6 h-6 text-activity-mint"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktuelle PGY"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"PGY-4"})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:c.jsx(to,{className:"w-6 h-6 text-activity-coral"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Punkte gesamt"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"206"})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:c.jsx(vk,{className:"w-6 h-6 text-activity-amber"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Bis FMH-Ziel"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:"24 Mon."})]})]})})]}),c.jsxs(ae,{className:"medical-card p-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-card-foreground mb-4",children:"Letzte Aktivitäten"}),c.jsxs(Zl,{defaultValue:"procedures",className:"w-full",children:[c.jsxs(lo,{className:"grid w-full grid-cols-4",children:[c.jsx(At,{value:"procedures",children:"Prozeduren"}),c.jsx(At,{value:"courses",children:"Kurse"}),c.jsx(At,{value:"publications",children:"Publikationen"}),c.jsx(At,{value:"awards",children:"Awards"})]}),c.jsx(zt,{value:"procedures",className:"mt-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:"Laparoskopische Cholezystektomie"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"15. Januar 2024"})]}),c.jsx(ge,{variant:"default",children:"Chirurgie"})]}),c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:"Appendektomie"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"12. Januar 2024"})]}),c.jsx(ge,{variant:"default",children:"Chirurgie"})]})]})}),c.jsx(zt,{value:"courses",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:"Advanced Laparoscopy Workshop"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"8 CME Punkte • Zürich"})]}),c.jsx(ge,{variant:"secondary",children:"Abgeschlossen"})]})})}),c.jsx(zt,{value:"publications",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:Dn.publications.articles.map((o,l)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:o.title}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.journal," • ",o.date]})]}),c.jsx(ge,{variant:"outline",children:"Artikel"})]},l))})}),c.jsx(zt,{value:"awards",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:Dn.awards.items.map((o,l)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-2xl",children:o.icon}),c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-card-foreground",children:o.title}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[o.organization," • ",o.date]})]})]}),c.jsx(ge,{variant:"default",children:"Auszeichnung"})]},l))})})]})]})]})]})},Oz=({profile:n,activityData:e,className:t})=>{const[r,s]=b.useState(null),i=()=>{const l=[];return n.public_fields.courses&&(l.push({id:"courses",label:"Kurse",progress:e.courses.total>0?e.courses.completed/e.courses.total*100:0,variant:"coral",icon:to}),l.push({id:"mandatory",label:"Pflicht",progress:e.courses.mandatory_total>0?e.courses.mandatory_completed/e.courses.mandatory_total*100:0,variant:"lavender",icon:to})),n.public_fields.procedures&&l.push({id:"procedures",label:"OPs",progress:e.procedures.required>0?e.procedures.completed/e.procedures.required*100:0,variant:"mint",icon:Rm}),n.public_fields.publications&&l.push({id:"publications",label:"Papers",progress:Math.min(e.publications.count*20,100),variant:"amber",icon:Kf}),l},a=async()=>{navigator.share?await navigator.share({title:`${n.full_name} - Medizinisches Profil`,text:`Schauen Sie sich das medizinische Profil von ${n.full_name} an`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},o=i();return c.jsxs("div",{className:ee("max-w-4xl mx-auto space-y-6",t),children:[c.jsx(ae,{className:"overflow-hidden",children:c.jsx("div",{className:"bg-gradient-medical p-6 text-white",children:c.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[n.avatar_url&&c.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 overflow-hidden",children:c.jsx("img",{src:n.avatar_url,alt:n.full_name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-2xl font-bold mb-2",children:n.full_name}),c.jsxs("div",{className:"flex flex-wrap gap-2 text-sm opacity-90",children:[n.pgy_level&&c.jsxs(ge,{variant:"secondary",className:"bg-white/20 text-white border-white/20",children:["PGY-",n.pgy_level]}),n.specialty&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Rm,{className:"w-4 h-4"}),n.specialty]}),n.institution&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(qF,{className:"w-4 h-4"}),n.institution]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Z,{variant:"ghost",size:"sm",onClick:a,className:"text-white hover:bg-white/20",children:c.jsx(kE,{className:"w-4 h-4"})}),n.linkedin_url&&c.jsx(Z,{variant:"ghost",size:"sm",asChild:!0,className:"text-white hover:bg-white/20",children:c.jsx("a",{href:n.linkedin_url,target:"_blank",rel:"noopener noreferrer",children:c.jsx(gk,{className:"w-4 h-4"})})})]})]})})}),c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(sh,{className:"w-5 h-5 text-medical-primary"}),"Fortschritt ",new Date().getFullYear()]})}),c.jsx(ze,{children:c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 justify-items-center",children:o.map(l=>c.jsx(Dv,{progress:l.progress,variant:l.variant,label:l.label,showPercentage:!0,onClick:()=>s(r===l.id?null:l.id),className:r===l.id?"ring-2 ring-medical-primary rounded-lg p-2":""},l.id))})})]}),r&&c.jsx(ae,{children:c.jsxs(ze,{className:"pt-6",children:[r==="courses"&&n.public_fields.courses&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Absolvierte Kurse"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-lg bg-activity-coral/10 border border-activity-coral/20",children:[c.jsx("div",{className:"text-2xl font-bold text-activity-coral",children:e.courses.completed}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.total," Kursen"]})]}),c.jsxs("div",{className:"p-4 rounded-lg bg-activity-lavender/10 border border-activity-lavender/20",children:[c.jsx("div",{className:"text-2xl font-bold text-activity-lavender",children:e.courses.mandatory_completed}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.courses.mandatory_total," Pflichtkursen"]})]})]})]}),r==="procedures"&&n.public_fields.procedures&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Chirurgische Eingriffe"}),c.jsxs("div",{className:"p-4 rounded-lg bg-activity-mint/10 border border-activity-mint/20",children:[c.jsx("div",{className:"text-2xl font-bold text-activity-mint",children:e.procedures.completed}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["von ",e.procedures.required," erforderlichen Eingriffen"]})]})]}),r==="publications"&&n.public_fields.publications&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Publikationen"}),c.jsx("div",{className:"space-y-3",children:e.publications.recent.map((l,u)=>c.jsxs("div",{className:"p-4 rounded-lg bg-activity-amber/10 border border-activity-amber/20",children:[c.jsx("h4",{className:"font-medium text-activity-amber",children:l.title}),c.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[l.journal&&c.jsx("span",{children:l.journal}),l.publication_date&&c.jsxs("span",{className:"ml-2",children:[c.jsx(Hi,{className:"w-3 h-3 inline mr-1"}),new Date(l.publication_date).toLocaleDateString("de-DE")]})]}),(l.doi||l.link)&&c.jsxs("div",{className:"mt-2",children:[l.link&&c.jsx(Z,{variant:"ghost",size:"sm",asChild:!0,children:c.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",children:[c.jsx(gk,{className:"w-3 h-3 mr-1"}),"Ansehen"]})}),l.doi&&c.jsx(Z,{variant:"ghost",size:"sm",asChild:!0,children:c.jsxs("a",{href:`https://doi.org/${l.doi}`,target:"_blank",rel:"noopener noreferrer",children:["DOI: ",l.doi]})})]})]},u))})]})]})}),n.public_fields.awards&&e.awards.length>0&&c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(sh,{className:"w-5 h-5 text-progress-complete"}),"Auszeichnungen"]})}),c.jsx(ze,{children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.awards.map((l,u)=>c.jsx("div",{className:"p-4 rounded-lg bg-gradient-to-r from-activity-amber/20 to-activity-coral/10 border border-activity-amber/30",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(sh,{className:"w-5 h-5 text-activity-amber mt-0.5"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium",children:l.title}),l.organization&&c.jsx("p",{className:"text-sm text-muted-foreground",children:l.organization}),l.awarded_date&&c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:new Date(l.awarded_date).toLocaleDateString("de-DE")})]})]})},u))})})]})]})},Fz=()=>{const{handle:n}=UR(),[e,t]=b.useState(null),[r,s]=b.useState(null),[i,a]=b.useState(!0),[o,l]=b.useState(!1);return b.useEffect(()=>{(async()=>{if(!n){l(!0),a(!1);return}try{const{data:h,error:f}=await oe.from("profiles").select("*").eq("handle",n).eq("is_public",!0).single();if(f||!h){l(!0),a(!1);return}t({...h,public_fields:h.public_fields||{courses:!0,awards:!0,publications:!0,procedures:!1}});const p=new Date().getFullYear(),{data:m}=await oe.from("course_enrollments").select(`
            status,
            courses (
              is_mandatory
            )
          `).eq("user_id",h.user_id),y=(m==null?void 0:m.length)||0,g=(m==null?void 0:m.filter(k=>k.status==="completed").length)||0,x=(m==null?void 0:m.filter(k=>{var j;return(j=k.courses)==null?void 0:j.is_mandatory}).length)||0,v=(m==null?void 0:m.filter(k=>{var j;return k.status==="completed"&&((j=k.courses)==null?void 0:j.is_mandatory)}).length)||0,{data:w}=await oe.from("procedure_logs").select("*").eq("user_id",h.user_id).gte("performed_date",`${p}-01-01`).lte("performed_date",`${p}-12-31`),{data:_}=await oe.from("procedures").select("min_required_by_pgy").eq("active",!0);let S=0;_&&h.pgy_level&&_.forEach(k=>{var T;const j=(T=k.min_required_by_pgy)==null?void 0:T[h.pgy_level.toString()];j&&(S+=j)});const{data:C}=await oe.from("publications").select("*").eq("user_id",h.user_id).order("publication_date",{ascending:!1}).limit(5),{data:A}=await oe.from("awards").select("*").eq("user_id",h.user_id).order("awarded_date",{ascending:!1});s({courses:{completed:g,total:y,mandatory_completed:v,mandatory_total:x},procedures:{completed:(w==null?void 0:w.length)||0,required:S},publications:{count:(C==null?void 0:C.length)||0,recent:C||[]},awards:A||[]})}catch(h){console.error("Error fetching profile:",h),OT({title:"Fehler",description:"Profil konnte nicht geladen werden.",variant:"destructive"}),l(!0)}finally{a(!1)}})()},[n]),i?c.jsx("div",{className:"min-h-screen bg-background",children:c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsx("div",{className:"h-32 bg-muted rounded-lg"}),c.jsx("div",{className:"h-64 bg-muted rounded-lg"}),c.jsx("div",{className:"h-48 bg-muted rounded-lg"})]})})})}):o||!e||!r?c.jsx(M9,{to:"/404",replace:!0}):c.jsx("div",{className:"min-h-screen bg-background",children:c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsx(Oz,{profile:e,activityData:r})})})},Pt=b.forwardRef(({className:n,type:e,...t},r)=>c.jsx("input",{type:e,className:ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Pt.displayName="Input";function U_(n,[e,t]){return Math.min(t,Math.max(e,n))}var Gb=0;function HE(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??tN()),document.body.insertAdjacentElement("beforeend",n[1]??tN()),Gb++,()=>{Gb===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gb--}},[])}function tN(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var qb="focusScope.autoFocusOnMount",Yb="focusScope.autoFocusOnUnmount",nN={bubbles:!1,cancelable:!0},$z="FocusScope",Rw=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=n,[o,l]=b.useState(null),u=$t(s),h=$t(i),f=b.useRef(null),p=He(e,g=>l(g)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let g=function(_){if(m.paused||!o)return;const S=_.target;o.contains(S)?f.current=S:_o(f.current,{select:!0})},x=function(_){if(m.paused||!o)return;const S=_.relatedTarget;S!==null&&(o.contains(S)||_o(f.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&_o(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const w=new MutationObserver(v);return o&&w.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),w.disconnect()}}},[r,o,m.paused]),b.useEffect(()=>{if(o){sN.add(m);const g=document.activeElement;if(!o.contains(g)){const v=new CustomEvent(qb,nN);o.addEventListener(qb,u),o.dispatchEvent(v),v.defaultPrevented||(Bz(Vz(OM(o)),{select:!0}),document.activeElement===g&&_o(o))}return()=>{o.removeEventListener(qb,u),setTimeout(()=>{const v=new CustomEvent(Yb,nN);o.addEventListener(Yb,h),o.dispatchEvent(v),v.defaultPrevented||_o(g??document.body,{select:!0}),o.removeEventListener(Yb,h),sN.remove(m)},0)}}},[o,u,h,m]);const y=b.useCallback(g=>{if(!t&&!r||m.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(x&&v){const w=g.currentTarget,[_,S]=zz(w);_&&S?!g.shiftKey&&v===S?(g.preventDefault(),t&&_o(_,{select:!0})):g.shiftKey&&v===_&&(g.preventDefault(),t&&_o(S,{select:!0})):v===w&&g.preventDefault()}},[t,r,m.paused]);return c.jsx(le.div,{tabIndex:-1,...a,ref:p,onKeyDown:y})});Rw.displayName=$z;function Bz(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(_o(r,{select:e}),document.activeElement!==t)return}function zz(n){const e=OM(n),t=rN(e,n),r=rN(e.reverse(),n);return[t,r]}function OM(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function rN(n,e){for(const t of n)if(!Uz(t,{upTo:e}))return t}function Uz(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Hz(n){return n instanceof HTMLInputElement&&"select"in n}function _o(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Hz(n)&&e&&n.select()}}var sN=Wz();function Wz(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=iN(n,e),n.unshift(e)},remove(e){var t;n=iN(n,e),(t=n[0])==null||t.resume()}}}function iN(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function Vz(n){return n.filter(e=>e.tagName!=="A")}const Gz=["top","right","bottom","left"],$l=Math.min,Or=Math.max,vx=Math.round,k0=Math.floor,Wi=n=>({x:n,y:n}),qz={left:"right",right:"left",bottom:"top",top:"bottom"},Yz={start:"end",end:"start"};function H_(n,e,t){return Or(n,$l(e,t))}function no(n,e){return typeof n=="function"?n(e):n}function ro(n){return n.split("-")[0]}function np(n){return n.split("-")[1]}function WE(n){return n==="x"?"y":"x"}function VE(n){return n==="y"?"height":"width"}const Kz=new Set(["top","bottom"]);function $i(n){return Kz.has(ro(n))?"y":"x"}function GE(n){return WE($i(n))}function Xz(n,e,t){t===void 0&&(t=!1);const r=np(n),s=GE(n),i=VE(s);let a=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=yx(a)),[a,yx(a)]}function Qz(n){const e=yx(n);return[W_(n),e,W_(e)]}function W_(n){return n.replace(/start|end/g,e=>Yz[e])}const aN=["left","right"],oN=["right","left"],Jz=["top","bottom"],Zz=["bottom","top"];function eU(n,e,t){switch(n){case"top":case"bottom":return t?e?oN:aN:e?aN:oN;case"left":case"right":return e?Jz:Zz;default:return[]}}function tU(n,e,t,r){const s=np(n);let i=eU(ro(n),t==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(W_)))),i}function yx(n){return n.replace(/left|right|bottom|top/g,e=>qz[e])}function nU(n){return{top:0,right:0,bottom:0,left:0,...n}}function FM(n){return typeof n!="number"?nU(n):{top:n,right:n,bottom:n,left:n}}function xx(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function lN(n,e,t){let{reference:r,floating:s}=n;const i=$i(e),a=GE(e),o=VE(a),l=ro(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[o]/2-s[o]/2;let m;switch(l){case"top":m={x:h,y:r.y-s.height};break;case"bottom":m={x:h,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-s.width,y:f};break;default:m={x:r.x,y:r.y}}switch(np(e)){case"start":m[a]-=p*(t&&u?-1:1);break;case"end":m[a]+=p*(t&&u?-1:1);break}return m}const rU=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=t,o=i.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:s}),{x:h,y:f}=lN(u,r,l),p=r,m={},y=0;for(let g=0;g<o.length;g++){const{name:x,fn:v}=o[g],{x:w,y:_,data:S,reset:C}=await v({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:u,platform:a,elements:{reference:n,floating:e}});h=w??h,f=_??f,m={...m,[x]:{...m[x],...S}},C&&y<=50&&(y++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:s}):C.rects),{x:h,y:f}=lN(u,p,l)),g=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:m}};async function Fm(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:m=0}=no(e,n),y=FM(m),x=o[p?f==="floating"?"reference":"floating":f],v=xx(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(x)))==null||t?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:h,strategy:l})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),S=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},C=xx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:w,offsetParent:_,strategy:l}):w);return{top:(v.top-C.top+y.top)/S.y,bottom:(C.bottom-v.bottom+y.bottom)/S.y,left:(v.left-C.left+y.left)/S.x,right:(C.right-v.right+y.right)/S.x}}const sU=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:h=0}=no(n,e)||{};if(u==null)return{};const f=FM(h),p={x:t,y:r},m=GE(s),y=VE(m),g=await a.getDimensions(u),x=m==="y",v=x?"top":"left",w=x?"bottom":"right",_=x?"clientHeight":"clientWidth",S=i.reference[y]+i.reference[m]-p[m]-i.floating[y],C=p[m]-i.reference[m],A=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let k=A?A[_]:0;(!k||!await(a.isElement==null?void 0:a.isElement(A)))&&(k=o.floating[_]||i.floating[y]);const j=S/2-C/2,T=k/2-g[y]/2-1,M=$l(f[v],T),I=$l(f[w],T),R=M,$=k-g[y]-I,O=k/2-g[y]/2+j,W=H_(R,O,$),B=!l.arrow&&np(s)!=null&&O!==W&&i.reference[y]/2-(O<R?M:I)-g[y]/2<0,F=B?O<R?O-R:O-$:0;return{[m]:p[m]+F,data:{[m]:W,centerOffset:O-W-F,...B&&{alignmentOffset:F}},reset:B}}}),iU=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...x}=no(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const v=ro(s),w=$i(o),_=ro(o)===o,S=await(l.isRTL==null?void 0:l.isRTL(u.floating)),C=p||(_||!g?[yx(o)]:Qz(o)),A=y!=="none";!p&&A&&C.push(...tU(o,g,y,S));const k=[o,...C],j=await Fm(e,x),T=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(j[v]),f){const O=Xz(s,a,S);T.push(j[O[0]],j[O[1]])}if(M=[...M,{placement:s,overflows:T}],!T.every(O=>O<=0)){var I,R;const O=(((I=i.flip)==null?void 0:I.index)||0)+1,W=k[O];if(W&&(!(f==="alignment"?w!==$i(W):!1)||M.every(L=>L.overflows[0]>0&&$i(L.placement)===w)))return{data:{index:O,overflows:M},reset:{placement:W}};let B=(R=M.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!B)switch(m){case"bestFit":{var $;const F=($=M.filter(L=>{if(A){const U=$i(L.placement);return U===w||U==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(U=>U>0).reduce((U,V)=>U+V,0)]).sort((L,U)=>L[1]-U[1])[0])==null?void 0:$[0];F&&(B=F);break}case"initialPlacement":B=o;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function cN(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function uN(n){return Gz.some(e=>n[e]>=0)}const aU=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=no(n,e);switch(r){case"referenceHidden":{const i=await Fm(e,{...s,elementContext:"reference"}),a=cN(i,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:uN(a)}}}case"escaped":{const i=await Fm(e,{...s,altBoundary:!0}),a=cN(i,t.floating);return{data:{escapedOffsets:a,escaped:uN(a)}}}default:return{}}}}},$M=new Set(["left","top"]);async function oU(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=ro(t),o=np(t),l=$i(t)==="y",u=$M.has(a)?-1:1,h=i&&l?-1:1,f=no(e,n);let{mainAxis:p,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),l?{x:m*h,y:p*u}:{x:p*u,y:m*h}}const lU=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:a,middlewareData:o}=e,l=await oU(e,n);return a===((t=o.offset)==null?void 0:t.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:a}}}}},cU=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:o={fn:x=>{let{x:v,y:w}=x;return{x:v,y:w}}},...l}=no(n,e),u={x:t,y:r},h=await Fm(e,l),f=$i(ro(s)),p=WE(f);let m=u[p],y=u[f];if(i){const x=p==="y"?"top":"left",v=p==="y"?"bottom":"right",w=m+h[x],_=m-h[v];m=H_(w,m,_)}if(a){const x=f==="y"?"top":"left",v=f==="y"?"bottom":"right",w=y+h[x],_=y-h[v];y=H_(w,y,_)}const g=o.fn({...e,[p]:m,[f]:y});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[p]:i,[f]:a}}}}}},uU=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=no(n,e),h={x:t,y:r},f=$i(s),p=WE(f);let m=h[p],y=h[f];const g=no(o,e),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=p==="y"?"height":"width",S=i.reference[p]-i.floating[_]+x.mainAxis,C=i.reference[p]+i.reference[_]-x.mainAxis;m<S?m=S:m>C&&(m=C)}if(u){var v,w;const _=p==="y"?"width":"height",S=$M.has(ro(s)),C=i.reference[f]-i.floating[_]+(S&&((v=a.offset)==null?void 0:v[f])||0)+(S?0:x.crossAxis),A=i.reference[f]+i.reference[_]+(S?0:((w=a.offset)==null?void 0:w[f])||0)-(S?x.crossAxis:0);y<C?y=C:y>A&&(y=A)}return{[p]:m,[f]:y}}}},dU=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:a,elements:o}=e,{apply:l=()=>{},...u}=no(n,e),h=await Fm(e,u),f=ro(s),p=np(s),m=$i(s)==="y",{width:y,height:g}=i.floating;let x,v;f==="top"||f==="bottom"?(x=f,v=p===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=f,x=p==="end"?"top":"bottom");const w=g-h.top-h.bottom,_=y-h.left-h.right,S=$l(g-h[x],w),C=$l(y-h[v],_),A=!e.middlewareData.shift;let k=S,j=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(j=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=w),A&&!p){const M=Or(h.left,0),I=Or(h.right,0),R=Or(h.top,0),$=Or(h.bottom,0);m?j=y-2*(M!==0||I!==0?M+I:Or(h.left,h.right)):k=g-2*(R!==0||$!==0?R+$:Or(h.top,h.bottom))}await l({...e,availableWidth:j,availableHeight:k});const T=await a.getDimensions(o.floating);return y!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function Mw(){return typeof window<"u"}function rp(n){return BM(n)?(n.nodeName||"").toLowerCase():"#document"}function zr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ji(n){var e;return(e=(BM(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function BM(n){return Mw()?n instanceof Node||n instanceof zr(n).Node:!1}function Ks(n){return Mw()?n instanceof Element||n instanceof zr(n).Element:!1}function qi(n){return Mw()?n instanceof HTMLElement||n instanceof zr(n).HTMLElement:!1}function dN(n){return!Mw()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof zr(n).ShadowRoot}const hU=new Set(["inline","contents"]);function Ov(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=Xs(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!hU.has(s)}const fU=new Set(["table","td","th"]);function pU(n){return fU.has(rp(n))}const mU=[":popover-open",":modal"];function Iw(n){return mU.some(e=>{try{return n.matches(e)}catch{return!1}})}const gU=["transform","translate","scale","rotate","perspective"],vU=["transform","translate","scale","rotate","perspective","filter"],yU=["paint","layout","strict","content"];function qE(n){const e=YE(),t=Ks(n)?Xs(n):n;return gU.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||vU.some(r=>(t.willChange||"").includes(r))||yU.some(r=>(t.contain||"").includes(r))}function xU(n){let e=Bl(n);for(;qi(e)&&!Of(e);){if(qE(e))return e;if(Iw(e))return null;e=Bl(e)}return null}function YE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wU=new Set(["html","body","#document"]);function Of(n){return wU.has(rp(n))}function Xs(n){return zr(n).getComputedStyle(n)}function Dw(n){return Ks(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Bl(n){if(rp(n)==="html")return n;const e=n.assignedSlot||n.parentNode||dN(n)&&n.host||Ji(n);return dN(e)?e.host:e}function zM(n){const e=Bl(n);return Of(e)?n.ownerDocument?n.ownerDocument.body:n.body:qi(e)&&Ov(e)?e:zM(e)}function $m(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=zM(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),a=zr(s);if(i){const o=V_(a);return e.concat(a,a.visualViewport||[],Ov(s)?s:[],o&&t?$m(o):[])}return e.concat(s,$m(s,[],t))}function V_(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function UM(n){const e=Xs(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=qi(n),i=s?n.offsetWidth:t,a=s?n.offsetHeight:r,o=vx(t)!==i||vx(r)!==a;return o&&(t=i,r=a),{width:t,height:r,$:o}}function KE(n){return Ks(n)?n:n.contextElement}function oh(n){const e=KE(n);if(!qi(e))return Wi(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=UM(e);let a=(i?vx(t.width):t.width)/r,o=(i?vx(t.height):t.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const bU=Wi(0);function HM(n){const e=zr(n);return!YE()||!e.visualViewport?bU:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _U(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==zr(n)?!1:e}function Gu(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=KE(n);let a=Wi(1);e&&(r?Ks(r)&&(a=oh(r)):a=oh(n));const o=_U(i,t,r)?HM(i):Wi(0);let l=(s.left+o.x)/a.x,u=(s.top+o.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=zr(i),m=r&&Ks(r)?zr(r):r;let y=p,g=V_(y);for(;g&&r&&m!==y;){const x=oh(g),v=g.getBoundingClientRect(),w=Xs(g),_=v.left+(g.clientLeft+parseFloat(w.paddingLeft))*x.x,S=v.top+(g.clientTop+parseFloat(w.paddingTop))*x.y;l*=x.x,u*=x.y,h*=x.x,f*=x.y,l+=_,u+=S,y=zr(g),g=V_(y)}}return xx({width:h,height:f,x:l,y:u})}function XE(n,e){const t=Dw(n).scrollLeft;return e?e.left+t:Gu(Ji(n)).left+t}function WM(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:XE(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function SU(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",a=Ji(r),o=e?Iw(e.floating):!1;if(r===a||o&&i)return t;let l={scrollLeft:0,scrollTop:0},u=Wi(1);const h=Wi(0),f=qi(r);if((f||!f&&!i)&&((rp(r)!=="body"||Ov(a))&&(l=Dw(r)),qi(r))){const m=Gu(r);u=oh(r),h.x=m.x+r.clientLeft,h.y=m.y+r.clientTop}const p=a&&!f&&!i?WM(a,l,!0):Wi(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+h.x+p.x,y:t.y*u.y-l.scrollTop*u.y+h.y+p.y}}function EU(n){return Array.from(n.getClientRects())}function CU(n){const e=Ji(n),t=Dw(n),r=n.ownerDocument.body,s=Or(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Or(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-t.scrollLeft+XE(n);const o=-t.scrollTop;return Xs(r).direction==="rtl"&&(a+=Or(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:o}}function AU(n,e){const t=zr(n),r=Ji(n),s=t.visualViewport;let i=r.clientWidth,a=r.clientHeight,o=0,l=0;if(s){i=s.width,a=s.height;const u=YE();(!u||u&&e==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:i,height:a,x:o,y:l}}const kU=new Set(["absolute","fixed"]);function NU(n,e){const t=Gu(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=qi(n)?oh(n):Wi(1),a=n.clientWidth*i.x,o=n.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:a,height:o,x:l,y:u}}function hN(n,e,t){let r;if(e==="viewport")r=AU(n,t);else if(e==="document")r=CU(Ji(n));else if(Ks(e))r=NU(e,t);else{const s=HM(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return xx(r)}function VM(n,e){const t=Bl(n);return t===e||!Ks(t)||Of(t)?!1:Xs(t).position==="fixed"||VM(t,e)}function PU(n,e){const t=e.get(n);if(t)return t;let r=$m(n,[],!1).filter(o=>Ks(o)&&rp(o)!=="body"),s=null;const i=Xs(n).position==="fixed";let a=i?Bl(n):n;for(;Ks(a)&&!Of(a);){const o=Xs(a),l=qE(a);!l&&o.position==="fixed"&&(s=null),(i?!l&&!s:!l&&o.position==="static"&&!!s&&kU.has(s.position)||Ov(a)&&!l&&VM(n,a))?r=r.filter(h=>h!==a):s=o,a=Bl(a)}return e.set(n,r),r}function jU(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const a=[...t==="clippingAncestors"?Iw(e)?[]:PU(e,this._c):[].concat(t),r],o=a[0],l=a.reduce((u,h)=>{const f=hN(e,h,s);return u.top=Or(f.top,u.top),u.right=$l(f.right,u.right),u.bottom=$l(f.bottom,u.bottom),u.left=Or(f.left,u.left),u},hN(e,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function TU(n){const{width:e,height:t}=UM(n);return{width:e,height:t}}function RU(n,e,t){const r=qi(e),s=Ji(e),i=t==="fixed",a=Gu(n,!0,i,e);let o={scrollLeft:0,scrollTop:0};const l=Wi(0);function u(){l.x=XE(s)}if(r||!r&&!i)if((rp(e)!=="body"||Ov(s))&&(o=Dw(e)),r){const m=Gu(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&u();i&&!r&&s&&u();const h=s&&!r&&!i?WM(s,o):Wi(0),f=a.left+o.scrollLeft-l.x-h.x,p=a.top+o.scrollTop-l.y-h.y;return{x:f,y:p,width:a.width,height:a.height}}function Kb(n){return Xs(n).position==="static"}function fN(n,e){if(!qi(n)||Xs(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ji(n)===t&&(t=t.ownerDocument.body),t}function GM(n,e){const t=zr(n);if(Iw(n))return t;if(!qi(n)){let s=Bl(n);for(;s&&!Of(s);){if(Ks(s)&&!Kb(s))return s;s=Bl(s)}return t}let r=fN(n,e);for(;r&&pU(r)&&Kb(r);)r=fN(r,e);return r&&Of(r)&&Kb(r)&&!qE(r)?t:r||xU(n)||t}const MU=async function(n){const e=this.getOffsetParent||GM,t=this.getDimensions,r=await t(n.floating);return{reference:RU(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function IU(n){return Xs(n).direction==="rtl"}const DU={convertOffsetParentRelativeRectToViewportRelativeRect:SU,getDocumentElement:Ji,getClippingRect:jU,getOffsetParent:GM,getElementRects:MU,getClientRects:EU,getDimensions:TU,getScale:oh,isElement:Ks,isRTL:IU};function qM(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function LU(n,e){let t=null,r;const s=Ji(n);function i(){var o;clearTimeout(r),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=n.getBoundingClientRect(),{left:h,top:f,width:p,height:m}=u;if(o||e(),!p||!m)return;const y=k0(f),g=k0(s.clientWidth-(h+p)),x=k0(s.clientHeight-(f+m)),v=k0(h),_={rootMargin:-y+"px "+-g+"px "+-x+"px "+-v+"px",threshold:Or(0,$l(1,l))||1};let S=!0;function C(A){const k=A[0].intersectionRatio;if(k!==l){if(!S)return a();k?a(!1,k):r=setTimeout(()=>{a(!1,1e-7)},1e3)}k===1&&!qM(u,n.getBoundingClientRect())&&a(),S=!1}try{t=new IntersectionObserver(C,{..._,root:s.ownerDocument})}catch{t=new IntersectionObserver(C,_)}t.observe(n)}return a(!0),i}function OU(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=KE(n),h=s||i?[...u?$m(u):[],...$m(e)]:[];h.forEach(v=>{s&&v.addEventListener("scroll",t,{passive:!0}),i&&v.addEventListener("resize",t)});const f=u&&o?LU(u,t):null;let p=-1,m=null;a&&(m=new ResizeObserver(v=>{let[w]=v;w&&w.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(e)})),t()}),u&&!l&&m.observe(u),m.observe(e));let y,g=l?Gu(n):null;l&&x();function x(){const v=Gu(n);g&&!qM(g,v)&&t(),g=v,y=requestAnimationFrame(x)}return t(),()=>{var v;h.forEach(w=>{s&&w.removeEventListener("scroll",t),i&&w.removeEventListener("resize",t)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,l&&cancelAnimationFrame(y)}}const FU=lU,$U=cU,BU=iU,zU=dU,UU=aU,pN=sU,HU=uU,WU=(n,e,t)=>{const r=new Map,s={platform:DU,...t},i={...s.platform,_c:r};return rU(n,e,{...s,platform:i})};var VU=typeof document<"u",GU=function(){},ey=VU?b.useLayoutEffect:GU;function wx(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!wx(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!wx(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function YM(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function mN(n,e){const t=YM(n);return Math.round(e*t)/t}function Xb(n){const e=b.useRef(n);return ey(()=>{e.current=n}),e}function qU(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:o=!0,whileElementsMounted:l,open:u}=n,[h,f]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=b.useState(r);wx(p,r)||m(r);const[y,g]=b.useState(null),[x,v]=b.useState(null),w=b.useCallback(L=>{L!==A.current&&(A.current=L,g(L))},[]),_=b.useCallback(L=>{L!==k.current&&(k.current=L,v(L))},[]),S=i||y,C=a||x,A=b.useRef(null),k=b.useRef(null),j=b.useRef(h),T=l!=null,M=Xb(l),I=Xb(s),R=Xb(u),$=b.useCallback(()=>{if(!A.current||!k.current)return;const L={placement:e,strategy:t,middleware:p};I.current&&(L.platform=I.current),WU(A.current,k.current,L).then(U=>{const V={...U,isPositioned:R.current!==!1};O.current&&!wx(j.current,V)&&(j.current=V,rd.flushSync(()=>{f(V)}))})},[p,e,t,I,R]);ey(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[u]);const O=b.useRef(!1);ey(()=>(O.current=!0,()=>{O.current=!1}),[]),ey(()=>{if(S&&(A.current=S),C&&(k.current=C),S&&C){if(M.current)return M.current(S,C,$);$()}},[S,C,$,M,T]);const W=b.useMemo(()=>({reference:A,floating:k,setReference:w,setFloating:_}),[w,_]),B=b.useMemo(()=>({reference:S,floating:C}),[S,C]),F=b.useMemo(()=>{const L={position:t,left:0,top:0};if(!B.floating)return L;const U=mN(B.floating,h.x),V=mN(B.floating,h.y);return o?{...L,transform:"translate("+U+"px, "+V+"px)",...YM(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:U,top:V}},[t,o,B.floating,h.x,h.y]);return b.useMemo(()=>({...h,update:$,refs:W,elements:B,floatingStyles:F}),[h,$,W,B,F])}const YU=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?pN({element:r.current,padding:s}).fn(t):{}:r?pN({element:r,padding:s}).fn(t):{}}}},KU=(n,e)=>({...FU(n),options:[n,e]}),XU=(n,e)=>({...$U(n),options:[n,e]}),QU=(n,e)=>({...HU(n),options:[n,e]}),JU=(n,e)=>({...BU(n),options:[n,e]}),ZU=(n,e)=>({...zU(n),options:[n,e]}),eH=(n,e)=>({...UU(n),options:[n,e]}),tH=(n,e)=>({...YU(n),options:[n,e]});var nH="Arrow",KM=b.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return c.jsx(le.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});KM.displayName=nH;var rH=KM;function sH(n){const[e,t]=b.useState(void 0);return Mt(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;a=u.inlineSize,o=u.blockSize}else a=n.offsetWidth,o=n.offsetHeight;t({width:a,height:o})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var QE="Popper",[XM,Lw]=ei(QE),[iH,QM]=XM(QE),JM=n=>{const{__scopePopper:e,children:t}=n,[r,s]=b.useState(null);return c.jsx(iH,{scope:e,anchor:r,onAnchorChange:s,children:t})};JM.displayName=QE;var ZM="PopperAnchor",e3=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=QM(ZM,t),a=b.useRef(null),o=He(e,a);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:c.jsx(le.div,{...s,ref:o})});e3.displayName=ZM;var JE="PopperContent",[aH,oH]=XM(JE),t3=b.forwardRef((n,e)=>{var H,pe,Ee,Ae,ke,Re;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=n,x=QM(JE,t),[v,w]=b.useState(null),_=He(e,Ht=>w(Ht)),[S,C]=b.useState(null),A=sH(S),k=(A==null?void 0:A.width)??0,j=(A==null?void 0:A.height)??0,T=r+(i!=="center"?"-"+i:""),M=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(u)?u:[u],R=I.length>0,$={padding:M,boundary:I.filter(cH),altBoundary:R},{refs:O,floatingStyles:W,placement:B,isPositioned:F,middlewareData:L}=qU({strategy:"fixed",placement:T,whileElementsMounted:(...Ht)=>OU(...Ht,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[KU({mainAxis:s+j,alignmentAxis:a}),l&&XU({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?QU():void 0,...$}),l&&JU({...$}),ZU({...$,apply:({elements:Ht,rects:er,availableWidth:rc,availableHeight:uo})=>{const{width:sc,height:op}=er.reference,cd=Ht.floating.style;cd.setProperty("--radix-popper-available-width",`${rc}px`),cd.setProperty("--radix-popper-available-height",`${uo}px`),cd.setProperty("--radix-popper-anchor-width",`${sc}px`),cd.setProperty("--radix-popper-anchor-height",`${op}px`)}}),S&&tH({element:S,padding:o}),uH({arrowWidth:k,arrowHeight:j}),p&&eH({strategy:"referenceHidden",...$})]}),[U,V]=s3(B),J=$t(y);Mt(()=>{F&&(J==null||J())},[F,J]);const z=(H=L.arrow)==null?void 0:H.x,G=(pe=L.arrow)==null?void 0:pe.y,X=((Ee=L.arrow)==null?void 0:Ee.centerOffset)!==0,[K,ce]=b.useState();return Mt(()=>{v&&ce(window.getComputedStyle(v).zIndex)},[v]),c.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:F?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(Ae=L.transformOrigin)==null?void 0:Ae.x,(ke=L.transformOrigin)==null?void 0:ke.y].join(" "),...((Re=L.hide)==null?void 0:Re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:c.jsx(aH,{scope:t,placedSide:U,onArrowChange:C,arrowX:z,arrowY:G,shouldHideArrow:X,children:c.jsx(le.div,{"data-side":U,"data-align":V,...g,ref:_,style:{...g.style,animation:F?void 0:"none"}})})})});t3.displayName=JE;var n3="PopperArrow",lH={top:"bottom",right:"left",bottom:"top",left:"right"},r3=b.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=oH(n3,r),a=lH[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(rH,{...s,ref:t,style:{...s.style,display:"block"}})})});r3.displayName=n3;function cH(n){return n!==null}var uH=n=>({name:"transformOrigin",options:n,fn(e){var x,v,w;const{placement:t,rects:r,middlewareData:s}=e,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,o=a?0:n.arrowWidth,l=a?0:n.arrowHeight,[u,h]=s3(t),f={start:"0%",center:"50%",end:"100%"}[h],p=(((v=s.arrow)==null?void 0:v.x)??0)+o/2,m=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let y="",g="";return u==="bottom"?(y=a?f:`${p}px`,g=`${-l}px`):u==="top"?(y=a?f:`${p}px`,g=`${r.floating.height+l}px`):u==="right"?(y=`${-l}px`,g=a?f:`${m}px`):u==="left"&&(y=`${r.floating.width+l}px`,g=a?f:`${m}px`),{data:{x:y,y:g}}}});function s3(n){const[e,t="center"]=n.split("-");return[e,t]}var i3=JM,ZE=e3,a3=t3,o3=r3;function dH(n){const e=b.useRef({value:n,previous:n});return b.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var hH=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},xd=new WeakMap,N0=new WeakMap,P0={},Qb=0,l3=function(n){return n&&(n.host||l3(n.parentNode))},fH=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=l3(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},pH=function(n,e,t,r){var s=fH(e,Array.isArray(n)?n:[n]);P0[t]||(P0[t]=new WeakMap);var i=P0[t],a=[],o=new Set,l=new Set(s),u=function(f){!f||o.has(f)||(o.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(o.has(p))h(p);else try{var m=p.getAttribute(r),y=m!==null&&m!=="false",g=(xd.get(p)||0)+1,x=(i.get(p)||0)+1;xd.set(p,g),i.set(p,x),a.push(p),g===1&&y&&N0.set(p,!0),x===1&&p.setAttribute(t,"true"),y||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return h(e),o.clear(),Qb++,function(){a.forEach(function(f){var p=xd.get(f)-1,m=i.get(f)-1;xd.set(f,p),i.set(f,m),p||(N0.has(f)||f.removeAttribute(r),N0.delete(f)),m||f.removeAttribute(t)}),Qb--,Qb||(xd=new WeakMap,xd=new WeakMap,N0=new WeakMap,P0={})}},eC=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=hH(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),pH(r,s,t,"aria-hidden")):function(){return null}},Mi=function(){return Mi=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Mi.apply(this,arguments)};function c3(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function mH(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var ty="right-scroll-bar-position",ny="width-before-scroll-bar",gH="with-scroll-bars-hidden",vH="--removed-body-scroll-bar-size";function Jb(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function yH(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var xH=typeof window<"u"?b.useLayoutEffect:b.useEffect,gN=new WeakMap;function wH(n,e){var t=yH(null,function(r){return n.forEach(function(s){return Jb(s,r)})});return xH(function(){var r=gN.get(t);if(r){var s=new Set(r),i=new Set(n),a=t.current;s.forEach(function(o){i.has(o)||Jb(o,null)}),i.forEach(function(o){s.has(o)||Jb(o,a)})}gN.set(t,n)},[n]),t}function bH(n){return n}function _H(n,e){e===void 0&&(e=bH);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var a=e(i,r);return t.push(a),function(){t=t.filter(function(o){return o!==a})}},assignSyncMedium:function(i){for(r=!0;t.length;){var a=t;t=[],a.forEach(i)}t={push:function(o){return i(o)},filter:function(){return t}}},assignMedium:function(i){r=!0;var a=[];if(t.length){var o=t;t=[],o.forEach(i),a=t}var l=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),t={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),t}}}};return s}function SH(n){n===void 0&&(n={});var e=_H(null);return e.options=Mi({async:!0,ssr:!1},n),e}var u3=function(n){var e=n.sideCar,t=c3(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Mi({},t))};u3.isSideCarExport=!0;function EH(n,e){return n.useMedium(e),u3}var d3=SH(),Zb=function(){},Ow=b.forwardRef(function(n,e){var t=b.useRef(null),r=b.useState({onScrollCapture:Zb,onWheelCapture:Zb,onTouchMoveCapture:Zb}),s=r[0],i=r[1],a=n.forwardProps,o=n.children,l=n.className,u=n.removeScrollBar,h=n.enabled,f=n.shards,p=n.sideCar,m=n.noRelative,y=n.noIsolation,g=n.inert,x=n.allowPinchZoom,v=n.as,w=v===void 0?"div":v,_=n.gapMode,S=c3(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,A=wH([t,e]),k=Mi(Mi({},S),s);return b.createElement(b.Fragment,null,h&&b.createElement(C,{sideCar:d3,removeScrollBar:u,shards:f,noRelative:m,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:t,gapMode:_}),a?b.cloneElement(b.Children.only(o),Mi(Mi({},k),{ref:A})):b.createElement(w,Mi({},k,{className:l,ref:A}),o))});Ow.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ow.classNames={fullWidth:ny,zeroRight:ty};var CH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AH(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=CH();return e&&n.setAttribute("nonce",e),n}function kH(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function NH(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var PH=function(){var n=0,e=null;return{add:function(t){n==0&&(e=AH())&&(kH(e,t),NH(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},jH=function(){var n=PH();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},h3=function(){var n=jH(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},TH={left:0,top:0,right:0,gap:0},e1=function(n){return parseInt(n||"",10)||0},RH=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[e1(t),e1(r),e1(s)]},MH=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return TH;var e=RH(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},IH=h3(),lh="data-scroll-locked",DH=function(n,e,t,r){var s=n.left,i=n.top,a=n.right,o=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(gH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(lh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ty,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(ny,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(ty," .").concat(ty,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ny," .").concat(ny,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lh,`] {
    `).concat(vH,": ").concat(o,`px;
  }
`)},vN=function(){var n=parseInt(document.body.getAttribute(lh)||"0",10);return isFinite(n)?n:0},LH=function(){b.useEffect(function(){return document.body.setAttribute(lh,(vN()+1).toString()),function(){var n=vN()-1;n<=0?document.body.removeAttribute(lh):document.body.setAttribute(lh,n.toString())}},[])},OH=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;LH();var i=b.useMemo(function(){return MH(s)},[s]);return b.createElement(IH,{styles:DH(i,!e,s,t?"":"!important")})},G_=!1;if(typeof window<"u")try{var j0=Object.defineProperty({},"passive",{get:function(){return G_=!0,!0}});window.addEventListener("test",j0,j0),window.removeEventListener("test",j0,j0)}catch{G_=!1}var wd=G_?{passive:!1}:!1,FH=function(n){return n.tagName==="TEXTAREA"},f3=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!FH(n)&&t[e]==="visible")},$H=function(n){return f3(n,"overflowY")},BH=function(n){return f3(n,"overflowX")},yN=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=p3(n,r);if(s){var i=m3(n,r),a=i[1],o=i[2];if(a>o)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},zH=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},UH=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},p3=function(n,e){return n==="v"?$H(e):BH(e)},m3=function(n,e){return n==="v"?zH(e):UH(e)},HH=function(n,e){return n==="h"&&e==="rtl"?-1:1},WH=function(n,e,t,r,s){var i=HH(n,window.getComputedStyle(e).direction),a=i*r,o=t.target,l=e.contains(o),u=!1,h=a>0,f=0,p=0;do{if(!o)break;var m=m3(n,o),y=m[0],g=m[1],x=m[2],v=g-x-i*y;(y||v)&&p3(n,o)&&(f+=v,p+=y);var w=o.parentNode;o=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},T0=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},xN=function(n){return[n.deltaX,n.deltaY]},wN=function(n){return n&&"current"in n?n.current:n},VH=function(n,e){return n[0]===e[0]&&n[1]===e[1]},GH=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},qH=0,bd=[];function YH(n){var e=b.useRef([]),t=b.useRef([0,0]),r=b.useRef(),s=b.useState(qH++)[0],i=b.useState(h3)[0],a=b.useRef(n);b.useEffect(function(){a.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var g=mH([n.lockRef.current],(n.shards||[]).map(wN),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var o=b.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var v=T0(g),w=t.current,_="deltaX"in g?g.deltaX:w[0]-v[0],S="deltaY"in g?g.deltaY:w[1]-v[1],C,A=g.target,k=Math.abs(_)>Math.abs(S)?"h":"v";if("touches"in g&&k==="h"&&A.type==="range")return!1;var j=yN(k,A);if(!j)return!0;if(j?C=k:(C=k==="v"?"h":"v",j=yN(k,A)),!j)return!1;if(!r.current&&"changedTouches"in g&&(_||S)&&(r.current=C),!C)return!0;var T=r.current||C;return WH(T,x,g,T==="h"?_:S,!0)},[]),l=b.useCallback(function(g){var x=g;if(!(!bd.length||bd[bd.length-1]!==i)){var v="deltaY"in x?xN(x):T0(x),w=e.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&VH(C.delta,v)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var _=(a.current.shards||[]).map(wN).filter(Boolean).filter(function(C){return C.contains(x.target)}),S=_.length>0?o(x,_[0]):!a.current.noIsolation;S&&x.cancelable&&x.preventDefault()}}},[]),u=b.useCallback(function(g,x,v,w){var _={name:g,delta:x,target:v,should:w,shadowParent:KH(v)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(S){return S!==_})},1)},[]),h=b.useCallback(function(g){t.current=T0(g),r.current=void 0},[]),f=b.useCallback(function(g){u(g.type,xN(g),g.target,o(g,n.lockRef.current))},[]),p=b.useCallback(function(g){u(g.type,T0(g),g.target,o(g,n.lockRef.current))},[]);b.useEffect(function(){return bd.push(i),n.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,wd),document.addEventListener("touchmove",l,wd),document.addEventListener("touchstart",h,wd),function(){bd=bd.filter(function(g){return g!==i}),document.removeEventListener("wheel",l,wd),document.removeEventListener("touchmove",l,wd),document.removeEventListener("touchstart",h,wd)}},[]);var m=n.removeScrollBar,y=n.inert;return b.createElement(b.Fragment,null,y?b.createElement(i,{styles:GH(s)}):null,m?b.createElement(OH,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function KH(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const XH=EH(d3,YH);var Fw=b.forwardRef(function(n,e){return b.createElement(Ow,Mi({},n,{ref:e,sideCar:XH}))});Fw.classNames=Ow.classNames;var QH=[" ","Enter","ArrowUp","ArrowDown"],JH=[" ","Enter"],qu="Select",[$w,Bw,ZH]=xE(qu),[sp,sZ]=ei(qu,[ZH,Lw]),zw=Lw(),[eW,ec]=sp(qu),[tW,nW]=sp(qu),g3=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:o,onValueChange:l,dir:u,name:h,autoComplete:f,disabled:p,required:m,form:y}=n,g=zw(e),[x,v]=b.useState(null),[w,_]=b.useState(null),[S,C]=b.useState(!1),A=jw(u),[k,j]=Vu({prop:r,defaultProp:s??!1,onChange:i,caller:qu}),[T,M]=Vu({prop:a,defaultProp:o,onChange:l,caller:qu}),I=b.useRef(null),R=x?y||!!x.closest("form"):!0,[$,O]=b.useState(new Set),W=Array.from($).map(B=>B.props.value).join(";");return c.jsx(i3,{...g,children:c.jsxs(eW,{required:m,scope:e,trigger:x,onTriggerChange:v,valueNode:w,onValueNodeChange:_,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:Xn(),value:T,onValueChange:M,open:k,onOpenChange:j,dir:A,triggerPointerDownPosRef:I,disabled:p,children:[c.jsx($w.Provider,{scope:e,children:c.jsx(tW,{scope:n.__scopeSelect,onNativeOptionAdd:b.useCallback(B=>{O(F=>new Set(F).add(B))},[]),onNativeOptionRemove:b.useCallback(B=>{O(F=>{const L=new Set(F);return L.delete(B),L})},[]),children:t})}),R?c.jsxs(B3,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:B=>M(B.target.value),disabled:p,form:y,children:[T===void 0?c.jsx("option",{value:""}):null,Array.from($)]},W):null]})})};g3.displayName=qu;var v3="SelectTrigger",y3=b.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...s}=n,i=zw(t),a=ec(v3,t),o=a.disabled||r,l=He(e,a.onTriggerChange),u=Bw(t),h=b.useRef("touch"),[f,p,m]=U3(g=>{const x=u().filter(_=>!_.disabled),v=x.find(_=>_.value===a.value),w=H3(x,g,v);w!==void 0&&a.onValueChange(w.value)}),y=g=>{o||(a.onOpenChange(!0),m()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return c.jsx(ZE,{asChild:!0,...i,children:c.jsx(le.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":z3(a.value)?"":void 0,...s,ref:l,onClick:he(s.onClick,g=>{g.currentTarget.focus(),h.current!=="mouse"&&y(g)}),onPointerDown:he(s.onPointerDown,g=>{h.current=g.pointerType;const x=g.target;x.hasPointerCapture(g.pointerId)&&x.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:he(s.onKeyDown,g=>{const x=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&p(g.key),!(x&&g.key===" ")&&QH.includes(g.key)&&(y(),g.preventDefault())})})})});y3.displayName=v3;var x3="SelectValue",w3=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,children:i,placeholder:a="",...o}=n,l=ec(x3,t),{onValueNodeHasChildrenChange:u}=l,h=i!==void 0,f=He(e,l.onValueNodeChange);return Mt(()=>{u(h)},[u,h]),c.jsx(le.span,{...o,ref:f,style:{pointerEvents:"none"},children:z3(l.value)?c.jsx(c.Fragment,{children:a}):i})});w3.displayName=x3;var rW="SelectIcon",b3=b.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...s}=n;return c.jsx(le.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});b3.displayName=rW;var sW="SelectPortal",_3=n=>c.jsx(kv,{asChild:!0,...n});_3.displayName=sW;var Yu="SelectContent",S3=b.forwardRef((n,e)=>{const t=ec(Yu,n.__scopeSelect),[r,s]=b.useState();if(Mt(()=>{s(new DocumentFragment)},[]),!t.open){const i=r;return i?rd.createPortal(c.jsx(E3,{scope:n.__scopeSelect,children:c.jsx($w.Slot,{scope:n.__scopeSelect,children:c.jsx("div",{children:n.children})})}),i):null}return c.jsx(C3,{...n,ref:e})});S3.displayName=Yu;var _s=10,[E3,tc]=sp(Yu),iW="SelectContentImpl",aW=Wu("SelectContent.RemoveScroll"),C3=b.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:o,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:x,...v}=n,w=ec(Yu,t),[_,S]=b.useState(null),[C,A]=b.useState(null),k=He(e,H=>S(H)),[j,T]=b.useState(null),[M,I]=b.useState(null),R=Bw(t),[$,O]=b.useState(!1),W=b.useRef(!1);b.useEffect(()=>{if(_)return eC(_)},[_]),HE();const B=b.useCallback(H=>{const[pe,...Ee]=R().map(Re=>Re.ref.current),[Ae]=Ee.slice(-1),ke=document.activeElement;for(const Re of H)if(Re===ke||(Re==null||Re.scrollIntoView({block:"nearest"}),Re===pe&&C&&(C.scrollTop=0),Re===Ae&&C&&(C.scrollTop=C.scrollHeight),Re==null||Re.focus(),document.activeElement!==ke))return},[R,C]),F=b.useCallback(()=>B([j,_]),[B,j,_]);b.useEffect(()=>{$&&F()},[$,F]);const{onOpenChange:L,triggerPointerDownPosRef:U}=w;b.useEffect(()=>{if(_){let H={x:0,y:0};const pe=Ae=>{var ke,Re;H={x:Math.abs(Math.round(Ae.pageX)-(((ke=U.current)==null?void 0:ke.x)??0)),y:Math.abs(Math.round(Ae.pageY)-(((Re=U.current)==null?void 0:Re.y)??0))}},Ee=Ae=>{H.x<=10&&H.y<=10?Ae.preventDefault():_.contains(Ae.target)||L(!1),document.removeEventListener("pointermove",pe),U.current=null};return U.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[_,L,U]),b.useEffect(()=>{const H=()=>L(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[L]);const[V,J]=U3(H=>{const pe=R().filter(ke=>!ke.disabled),Ee=pe.find(ke=>ke.ref.current===document.activeElement),Ae=H3(pe,H,Ee);Ae&&setTimeout(()=>Ae.ref.current.focus())}),z=b.useCallback((H,pe,Ee)=>{const Ae=!W.current&&!Ee;(w.value!==void 0&&w.value===pe||Ae)&&(T(H),Ae&&(W.current=!0))},[w.value]),G=b.useCallback(()=>_==null?void 0:_.focus(),[_]),X=b.useCallback((H,pe,Ee)=>{const Ae=!W.current&&!Ee;(w.value!==void 0&&w.value===pe||Ae)&&I(H)},[w.value]),K=r==="popper"?q_:A3,ce=K===q_?{side:o,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:x}:{};return c.jsx(E3,{scope:t,content:_,viewport:C,onViewportChange:A,itemRefCallback:z,selectedItem:j,onItemLeave:G,itemTextRefCallback:X,focusSelectedItem:F,selectedItemText:M,position:r,isPositioned:$,searchRef:V,children:c.jsx(Fw,{as:aW,allowPinchZoom:!0,children:c.jsx(Rw,{asChild:!0,trapped:w.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:he(s,H=>{var pe;(pe=w.trigger)==null||pe.focus({preventScroll:!0}),H.preventDefault()}),children:c.jsx(Av,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:c.jsx(K,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:H=>H.preventDefault(),...v,...ce,onPlaced:()=>O(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:he(v.onKeyDown,H=>{const pe=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!pe&&H.key.length===1&&J(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let Ae=R().filter(ke=>!ke.disabled).map(ke=>ke.ref.current);if(["ArrowUp","End"].includes(H.key)&&(Ae=Ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const ke=H.target,Re=Ae.indexOf(ke);Ae=Ae.slice(Re+1)}setTimeout(()=>B(Ae)),H.preventDefault()}})})})})})})});C3.displayName=iW;var oW="SelectItemAlignedPosition",A3=b.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...s}=n,i=ec(Yu,t),a=tc(Yu,t),[o,l]=b.useState(null),[u,h]=b.useState(null),f=He(e,k=>h(k)),p=Bw(t),m=b.useRef(!1),y=b.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:v,focusSelectedItem:w}=a,_=b.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&g&&x&&v){const k=i.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),M=v.getBoundingClientRect();if(i.dir!=="rtl"){const ke=M.left-j.left,Re=T.left-ke,Ht=k.left-Re,er=k.width+Ht,rc=Math.max(er,j.width),uo=window.innerWidth-_s,sc=U_(Re,[_s,Math.max(_s,uo-rc)]);o.style.minWidth=er+"px",o.style.left=sc+"px"}else{const ke=j.right-M.right,Re=window.innerWidth-T.right-ke,Ht=window.innerWidth-k.right-Re,er=k.width+Ht,rc=Math.max(er,j.width),uo=window.innerWidth-_s,sc=U_(Re,[_s,Math.max(_s,uo-rc)]);o.style.minWidth=er+"px",o.style.right=sc+"px"}const I=p(),R=window.innerHeight-_s*2,$=g.scrollHeight,O=window.getComputedStyle(u),W=parseInt(O.borderTopWidth,10),B=parseInt(O.paddingTop,10),F=parseInt(O.borderBottomWidth,10),L=parseInt(O.paddingBottom,10),U=W+B+$+L+F,V=Math.min(x.offsetHeight*5,U),J=window.getComputedStyle(g),z=parseInt(J.paddingTop,10),G=parseInt(J.paddingBottom,10),X=k.top+k.height/2-_s,K=R-X,ce=x.offsetHeight/2,H=x.offsetTop+ce,pe=W+B+H,Ee=U-pe;if(pe<=X){const ke=I.length>0&&x===I[I.length-1].ref.current;o.style.bottom="0px";const Re=u.clientHeight-g.offsetTop-g.offsetHeight,Ht=Math.max(K,ce+(ke?G:0)+Re+F),er=pe+Ht;o.style.height=er+"px"}else{const ke=I.length>0&&x===I[0].ref.current;o.style.top="0px";const Ht=Math.max(X,W+g.offsetTop+(ke?z:0)+ce)+Ee;o.style.height=Ht+"px",g.scrollTop=pe-X+g.offsetTop}o.style.margin=`${_s}px 0`,o.style.minHeight=V+"px",o.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,i.trigger,i.valueNode,o,u,g,x,v,i.dir,r]);Mt(()=>_(),[_]);const[S,C]=b.useState();Mt(()=>{u&&C(window.getComputedStyle(u).zIndex)},[u]);const A=b.useCallback(k=>{k&&y.current===!0&&(_(),w==null||w(),y.current=!1)},[_,w]);return c.jsx(cW,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:A,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:c.jsx(le.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});A3.displayName=oW;var lW="SelectPopperPosition",q_=b.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:s=_s,...i}=n,a=zw(t);return c.jsx(a3,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});q_.displayName=lW;var[cW,tC]=sp(Yu,{}),Y_="SelectViewport",k3=b.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...s}=n,i=tc(Y_,t),a=tC(Y_,t),o=He(e,i.onViewportChange),l=b.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx($w.Slot,{scope:t,children:c.jsx(le.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:he(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const m=Math.abs(l.current-h.scrollTop);if(m>0){const y=window.innerHeight-_s*2,g=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),v=Math.max(g,x);if(v<y){const w=v+m,_=Math.min(y,w),S=w-_;f.style.height=_+"px",f.style.bottom==="0px"&&(h.scrollTop=S>0?S:0,f.style.justifyContent="flex-end")}}}l.current=h.scrollTop})})})]})});k3.displayName=Y_;var N3="SelectGroup",[uW,dW]=sp(N3),hW=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=Xn();return c.jsx(uW,{scope:t,id:s,children:c.jsx(le.div,{role:"group","aria-labelledby":s,...r,ref:e})})});hW.displayName=N3;var P3="SelectLabel",j3=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=dW(P3,t);return c.jsx(le.div,{id:s.id,...r,ref:e})});j3.displayName=P3;var bx="SelectItem",[fW,T3]=sp(bx),R3=b.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:s=!1,textValue:i,...a}=n,o=ec(bx,t),l=tc(bx,t),u=o.value===r,[h,f]=b.useState(i??""),[p,m]=b.useState(!1),y=He(e,w=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,w,r,s)}),g=Xn(),x=b.useRef("touch"),v=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(fW,{scope:t,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:b.useCallback(w=>{f(_=>_||((w==null?void 0:w.textContent)??"").trim())},[]),children:c.jsx($w.ItemSlot,{scope:t,value:r,disabled:s,textValue:h,children:c.jsx(le.div,{role:"option","aria-labelledby":g,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:y,onFocus:he(a.onFocus,()=>m(!0)),onBlur:he(a.onBlur,()=>m(!1)),onClick:he(a.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:he(a.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:he(a.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:he(a.onPointerMove,w=>{var _;x.current=w.pointerType,s?(_=l.onItemLeave)==null||_.call(l):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:he(a.onPointerLeave,w=>{var _;w.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:he(a.onKeyDown,w=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(JH.includes(w.key)&&v(),w.key===" "&&w.preventDefault())})})})})});R3.displayName=bx;var Tp="SelectItemText",M3=b.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:s,...i}=n,a=ec(Tp,t),o=tc(Tp,t),l=T3(Tp,t),u=nW(Tp,t),[h,f]=b.useState(null),p=He(e,v=>f(v),l.onItemTextChange,v=>{var w;return(w=o.itemTextRefCallback)==null?void 0:w.call(o,v,l.value,l.disabled)}),m=h==null?void 0:h.textContent,y=b.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=u;return Mt(()=>(g(y),()=>x(y)),[g,x,y]),c.jsxs(c.Fragment,{children:[c.jsx(le.span,{id:l.textId,...i,ref:p}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?rd.createPortal(i.children,a.valueNode):null]})});M3.displayName=Tp;var I3="SelectItemIndicator",D3=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return T3(I3,t).isSelected?c.jsx(le.span,{"aria-hidden":!0,...r,ref:e}):null});D3.displayName=I3;var K_="SelectScrollUpButton",L3=b.forwardRef((n,e)=>{const t=tc(K_,n.__scopeSelect),r=tC(K_,n.__scopeSelect),[s,i]=b.useState(!1),a=He(e,r.onScrollButtonChange);return Mt(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),s?c.jsx(F3,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});L3.displayName=K_;var X_="SelectScrollDownButton",O3=b.forwardRef((n,e)=>{const t=tc(X_,n.__scopeSelect),r=tC(X_,n.__scopeSelect),[s,i]=b.useState(!1),a=He(e,r.onScrollButtonChange);return Mt(()=>{if(t.viewport&&t.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,h=Math.ceil(l.scrollTop)<u;i(h)};const l=t.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[t.viewport,t.isPositioned]),s?c.jsx(F3,{...n,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});O3.displayName=X_;var F3=b.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...s}=n,i=tc("SelectScrollButton",t),a=b.useRef(null),o=Bw(t),l=b.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),Mt(()=>{var h;const u=o().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[o]),c.jsx(le.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:he(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:he(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:he(s.onPointerLeave,()=>{l()})})}),pW="SelectSeparator",$3=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return c.jsx(le.div,{"aria-hidden":!0,...r,ref:e})});$3.displayName=pW;var Q_="SelectArrow",mW=b.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,s=zw(t),i=ec(Q_,t),a=tc(Q_,t);return i.open&&a.position==="popper"?c.jsx(o3,{...s,...r,ref:e}):null});mW.displayName=Q_;var gW="SelectBubbleInput",B3=b.forwardRef(({__scopeSelect:n,value:e,...t},r)=>{const s=b.useRef(null),i=He(r,s),a=dH(e);return b.useEffect(()=>{const o=s.current;if(!o)return;const l=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&h){const f=new Event("change",{bubbles:!0});h.call(o,e),o.dispatchEvent(f)}},[a,e]),c.jsx(le.select,{...t,style:{...UT,...t.style},ref:i,defaultValue:e})});B3.displayName=gW;function z3(n){return n===""||n===void 0}function U3(n){const e=$t(n),t=b.useRef(""),r=b.useRef(0),s=b.useCallback(a=>{const o=t.current+a;e(o),function l(u){t.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),i=b.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,s,i]}function H3(n,e,t){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let a=vW(n,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==t));const l=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==t?l:void 0}function vW(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var yW=g3,W3=y3,xW=w3,wW=b3,bW=_3,V3=S3,_W=k3,G3=j3,q3=R3,SW=M3,EW=D3,Y3=L3,K3=O3,X3=$3;const Ii=yW,Di=xW,Us=b.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(W3,{ref:r,className:ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,c.jsx(wW,{asChild:!0,children:c.jsx(hR,{className:"h-4 w-4 opacity-50"})})]}));Us.displayName=W3.displayName;const Q3=b.forwardRef(({className:n,...e},t)=>c.jsx(Y3,{ref:t,className:ee("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(XF,{className:"h-4 w-4"})}));Q3.displayName=Y3.displayName;const J3=b.forwardRef(({className:n,...e},t)=>c.jsx(K3,{ref:t,className:ee("flex cursor-default items-center justify-center py-1",n),...e,children:c.jsx(hR,{className:"h-4 w-4"})}));J3.displayName=K3.displayName;const Hs=b.forwardRef(({className:n,children:e,position:t="popper",...r},s)=>c.jsx(bW,{children:c.jsxs(V3,{ref:s,className:ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[c.jsx(Q3,{}),c.jsx(_W,{className:ee("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(J3,{})]})}));Hs.displayName=V3.displayName;const CW=b.forwardRef(({className:n,...e},t)=>c.jsx(G3,{ref:t,className:ee("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));CW.displayName=G3.displayName;const yt=b.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(q3,{ref:r,className:ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(EW,{children:c.jsx(dR,{className:"h-4 w-4"})})}),c.jsx(SW,{children:e})]}));yt.displayName=q3.displayName;const AW=b.forwardRef(({className:n,...e},t)=>c.jsx(X3,{ref:t,className:ee("-mx-1 my-1 h-px bg-muted",n),...e}));AW.displayName=X3.displayName;function kW(){const[n,e]=q9(),[t,r]=b.useState([]),[s,i]=b.useState(!0),[a,o]=b.useState(n.get("search")||""),[l,u]=b.useState(n.get("country")||""),[h,f]=b.useState(n.get("specialty")||""),[p,m]=b.useState(n.get("modality")||""),[y,g]=b.useState(n.get("price")||""),[x,v]=b.useState("grid"),w=["Switzerland","Germany","Austria","France","Italy"],_=["Cardiology","Surgery","Neurology","Radiology","Emergency Medicine","Internal Medicine"],S=["Online","In-Person","Hybrid"],C=[{label:"Free",value:"0"},{label:"Under 100 CHF",value:"0-100"},{label:"100-500 CHF",value:"100-500"},{label:"500-1000 CHF",value:"500-1000"},{label:"Over 1000 CHF",value:"1000+"}];b.useEffect(()=>{A()},[A]);const A=b.useCallback(async()=>{i(!0);try{let R=oe.from("courses").select("*").eq("status","published").order("is_featured",{ascending:!1}).order("created_at",{ascending:!1});if(a&&(R=R.or(`title.ilike.%${a}%,description.ilike.%${a}%`)),l&&(R=R.eq("country",l)),h&&(R=R.eq("specialty",h)),p&&(R=R.eq("modality",p)),y)if(y==="0")R=R.eq("price",0);else if(y.includes("-")){const[W,B]=y.split("-").map(Number);R=R.gte("price",W).lte("price",B)}else y==="1000+"&&(R=R.gte("price",1e3));const{data:$,error:O}=await R;if(O)throw O;r($||[])}catch(R){console.error("Error fetching courses:",R)}finally{i(!1)}},[a,l,h,p,y]),k=(R,$)=>{const O=new URLSearchParams(n);$?O.set(R,$):O.delete(R),e(O)},j=()=>{o(""),u(""),f(""),m(""),g(""),e({})},T=(R,$)=>R===0?"Free":`${R} ${$}`,M=R=>Array.from({length:5},($,O)=>c.jsx(x_,{className:`h-4 w-4 ${O<Math.floor(R)?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`},O)),I=({course:R})=>c.jsxs(ae,{className:"group hover:shadow-lg transition-all duration-200 border-accent/20",children:[R.is_featured&&c.jsx("div",{className:"bg-gradient-to-r from-medical-primary to-swiss-blue text-white text-xs px-2 py-1 rounded-t-md font-medium",children:"Featured Course"}),c.jsxs("div",{className:"relative overflow-hidden rounded-t-md",children:[R.cover_image_url?c.jsx("img",{src:R.cover_image_url,alt:R.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-200"}):c.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 flex items-center justify-center",children:c.jsx("div",{className:"text-6xl text-medical-primary opacity-30",children:"📚"})}),R.modality&&c.jsx(ge,{variant:"secondary",className:"absolute top-2 left-2 bg-background/90 backdrop-blur-sm",children:R.modality})]}),c.jsxs(mt,{className:"pb-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx(wt,{className:"text-lg font-semibold group-hover:text-medical-primary transition-colors line-clamp-2",children:R.title}),R.has_certificate&&c.jsx(ge,{variant:"outline",className:"shrink-0 text-xs",children:"Certificate"})]}),c.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[M(R.average_rating),c.jsxs("span",{className:"text-sm text-muted-foreground ml-1",children:["(",R.total_reviews," reviews)"]})]})]}),c.jsxs(ze,{className:"pb-2",children:[c.jsx(fm,{className:"line-clamp-2 mb-3",children:R.description}),c.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[R.city&&R.country&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(y_,{className:"h-4 w-4"}),c.jsxs("span",{children:[R.city,", ",R.country]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[R.cme_points>0&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(fR,{className:"h-4 w-4"}),c.jsxs("span",{children:[R.cme_points," CME"]})]}),R.capacity&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(jv,{className:"h-4 w-4"}),c.jsxs("span",{children:["Max ",R.capacity]})]})]})]}),R.tags&&R.tags.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[R.tags.slice(0,3).map(($,O)=>c.jsx(ge,{variant:"outline",className:"text-xs",children:$},O)),R.tags.length>3&&c.jsxs(ge,{variant:"outline",className:"text-xs",children:["+",R.tags.length-3]})]})]}),c.jsx(mM,{className:"pt-0",children:c.jsxs("div",{className:"flex items-center justify-between w-full",children:[c.jsx("div",{className:"text-2xl font-bold text-medical-primary",children:T(R.price,R.currency)}),c.jsx(Dr,{to:`/courses/${R.id}`,children:c.jsx(Z,{variant:"medical",size:"sm",children:"View Details"})})]})})]});return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(hm,{}),c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 mb-6",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(gR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),c.jsx(Pt,{placeholder:"Search courses...",value:a,onChange:R=>{o(R.target.value),k("search",R.target.value)},className:"pl-10"})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs(Ii,{value:l,onValueChange:R=>{u(R),k("country",R)},children:[c.jsx(Us,{className:"w-[150px]",children:c.jsx(Di,{placeholder:"Country"})}),c.jsx(Hs,{children:w.map(R=>c.jsx(yt,{value:R,children:R},R))})]}),c.jsxs(Ii,{value:h,onValueChange:R=>{f(R),k("specialty",R)},children:[c.jsx(Us,{className:"w-[150px]",children:c.jsx(Di,{placeholder:"Specialty"})}),c.jsx(Hs,{children:_.map(R=>c.jsx(yt,{value:R,children:R},R))})]}),c.jsxs(Ii,{value:p,onValueChange:R=>{m(R),k("modality",R)},children:[c.jsx(Us,{className:"w-[120px]",children:c.jsx(Di,{placeholder:"Format"})}),c.jsx(Hs,{children:S.map(R=>c.jsx(yt,{value:R,children:R},R))})]}),c.jsxs(Ii,{value:y,onValueChange:R=>{g(R),k("price",R)},children:[c.jsx(Us,{className:"w-[140px]",children:c.jsx(Di,{placeholder:"Price Range"})}),c.jsx(Hs,{children:C.map(R=>c.jsx(yt,{value:R.value,children:R.label},R.value))})]}),(a||l||h||p||y)&&c.jsx(Z,{variant:"outline",onClick:j,size:"sm",children:"Clear Filters"})]})]})}),c.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[c.jsxs("h1",{className:"text-2xl font-bold text-foreground",children:["Course Marketplace",!s&&c.jsxs("span",{className:"text-muted-foreground ml-2",children:["(",t.length," courses)"]})]}),c.jsx(Zl,{value:x,onValueChange:R=>v(R),children:c.jsxs(lo,{children:[c.jsx(At,{value:"grid",children:"Grid"}),c.jsx(At,{value:"list",children:"List"})]})})]}),s?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((R,$)=>c.jsxs(ae,{className:"animate-pulse",children:[c.jsx("div",{className:"h-48 bg-muted rounded-t-md"}),c.jsxs(mt,{children:[c.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),c.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),c.jsx(ze,{children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-3 bg-muted rounded"}),c.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},$))}):t.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📚"}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No courses found"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or clear filters to see more results."}),c.jsx(Z,{onClick:j,variant:"outline",children:"Clear All Filters"})]}):c.jsx("div",{className:x==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:t.map(R=>c.jsx(I,{course:R},R.id))})]})]})}var NW="Separator",bN="horizontal",PW=["horizontal","vertical"],Z3=b.forwardRef((n,e)=>{const{decorative:t,orientation:r=bN,...s}=n,i=jW(r)?r:bN,o=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c.jsx(le.div,{"data-orientation":i,...o,...s,ref:e})});Z3.displayName=NW;function jW(n){return PW.includes(n)}var e4=Z3;const t4=b.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!0,...r},s)=>c.jsx(e4,{ref:s,decorative:t,orientation:e,className:ee("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...r}));t4.displayName=e4.displayName;var n4={exports:{}},r4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff=b;function TW(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var RW=typeof Object.is=="function"?Object.is:TW,MW=Ff.useState,IW=Ff.useEffect,DW=Ff.useLayoutEffect,LW=Ff.useDebugValue;function OW(n,e){var t=e(),r=MW({inst:{value:t,getSnapshot:e}}),s=r[0].inst,i=r[1];return DW(function(){s.value=t,s.getSnapshot=e,t1(s)&&i({inst:s})},[n,t,e]),IW(function(){return t1(s)&&i({inst:s}),n(function(){t1(s)&&i({inst:s})})},[n]),LW(t),t}function t1(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!RW(n,t)}catch{return!0}}function FW(n,e){return e()}var $W=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?FW:OW;r4.useSyncExternalStore=Ff.useSyncExternalStore!==void 0?Ff.useSyncExternalStore:$W;n4.exports=r4;var BW=n4.exports;function zW(){return BW.useSyncExternalStore(UW,()=>!0,()=>!1)}function UW(){return()=>{}}var nC="Avatar",[HW,iZ]=ei(nC),[WW,s4]=HW(nC),i4=b.forwardRef((n,e)=>{const{__scopeAvatar:t,...r}=n,[s,i]=b.useState("idle");return c.jsx(WW,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:c.jsx(le.span,{...r,ref:e})})});i4.displayName=nC;var a4="AvatarImage",o4=b.forwardRef((n,e)=>{const{__scopeAvatar:t,src:r,onLoadingStatusChange:s=()=>{},...i}=n,a=s4(a4,t),o=VW(r,i),l=$t(u=>{s(u),a.onImageLoadingStatusChange(u)});return Mt(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?c.jsx(le.img,{...i,ref:e,src:r}):null});o4.displayName=a4;var l4="AvatarFallback",c4=b.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:r,...s}=n,i=s4(l4,t),[a,o]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(l)}},[r]),a&&i.imageLoadingStatus!=="loaded"?c.jsx(le.span,{...s,ref:e}):null});c4.displayName=l4;function _N(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function VW(n,{referrerPolicy:e,crossOrigin:t}){const r=zW(),s=b.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,o]=b.useState(()=>_N(i,n));return Mt(()=>{o(_N(i,n))},[i,n]),Mt(()=>{const l=f=>()=>{o(f)};if(!i)return;const u=l("loaded"),h=l("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof t=="string"&&(i.crossOrigin=t),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,t,e]),a}var u4=i4,d4=o4,h4=c4;const f4=b.forwardRef(({className:n,...e},t)=>c.jsx(u4,{ref:t,className:ee("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...e}));f4.displayName=u4.displayName;const p4=b.forwardRef(({className:n,...e},t)=>c.jsx(d4,{ref:t,className:ee("aspect-square h-full w-full",n),...e}));p4.displayName=d4.displayName;const m4=b.forwardRef(({className:n,...e},t)=>c.jsx(h4,{ref:t,className:ee("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...e}));m4.displayName=h4.displayName;var rC="Progress",sC=100,[GW,aZ]=ei(rC),[qW,YW]=GW(rC),g4=b.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:i=KW,...a}=n;(s||s===0)&&!SN(s)&&console.error(XW(`${s}`,"Progress"));const o=SN(s)?s:sC;r!==null&&!EN(r,o)&&console.error(QW(`${r}`,"Progress"));const l=EN(r,o)?r:null,u=_x(l)?i(l,o):void 0;return c.jsx(qW,{scope:t,value:l,max:o,children:c.jsx(le.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":_x(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":x4(l,o),"data-value":l??void 0,"data-max":o,...a,ref:e})})});g4.displayName=rC;var v4="ProgressIndicator",y4=b.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=YW(v4,t);return c.jsx(le.div,{"data-state":x4(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});y4.displayName=v4;function KW(n,e){return`${Math.round(n/e*100)}%`}function x4(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function _x(n){return typeof n=="number"}function SN(n){return _x(n)&&!isNaN(n)&&n>0}function EN(n,e){return _x(n)&&!isNaN(n)&&n<=e&&n>=0}function XW(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${sC}\`.`}function QW(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${sC} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var w4=g4,JW=y4;const $f=b.forwardRef(({className:n,value:e,...t},r)=>c.jsx(w4,{ref:r,className:ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:c.jsx(JW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));$f.displayName=w4.displayName;function ZW(){const{id:n}=UR(),[e,t]=b.useState(null),[r,s]=b.useState([]),[i,a]=b.useState([]),[o,l]=b.useState([]),[u,h]=b.useState([]),[f,p]=b.useState(!0),[m,y]=b.useState(!1),[g,x]=b.useState("");b.useState({rating:5,comment:""});const[v,w]=b.useState(!1);b.useEffect(()=>{n&&_()},[n,_]);const _=b.useCallback(async()=>{if(n){p(!0);try{const{data:T,error:M}=await oe.from("courses").select("*").eq("id",n).eq("status","published").single();if(M)throw M;t(T);const{data:I}=await oe.from("course_sessions").select("*").eq("course_id",n).order("start_date",{ascending:!0});s(I||[]);const{data:R}=await oe.from("course_videos").select(`
          *,
          videos (
            title,
            description,
            duration,
            thumbnail_url
          )
        `).eq("course_id",n).order("order_index",{ascending:!0});a(R||[]);const{data:$}=await oe.from("course_materials").select("*").eq("course_id",n);l($||[]);const{data:O}=await oe.from("course_reviews").select("*").eq("course_id",n).order("created_at",{ascending:!1}),W=(O||[]).map(F=>({...F,profiles:{full_name:"Course Participant",avatar_url:""}}));h(W);const{data:{user:B}}=await oe.auth.getUser();if(B){const{data:F}=await oe.from("course_enrollments").select("status").eq("course_id",n).eq("user_id",B.id).single();w(!!F)}}catch(T){console.error("Error fetching course details:",T),Le.error("Failed to load course details")}finally{p(!1)}}},[n]),S=async()=>{if(!e||!g){Le.error("Please select a session");return}y(!0);try{const{data:{user:T}}=await oe.auth.getUser();if(!T){Le.error("Please log in to enroll");return}const{error:M}=await oe.from("course_enrollments").insert({course_id:e.id,user_id:T.id,status:"enrolled"});if(M)throw M;const{error:I}=await oe.from("payments").insert({user_id:T.id,course_id:e.id,session_id:g,amount:e.price,currency:e.currency,status:"pending"});if(I)throw I;Le.success("Successfully enrolled! Payment processing..."),w(!0)}catch(T){console.error("Enrollment error:",T),Le.error("Failed to enroll in course")}finally{y(!1)}},C=(T,M)=>T===0?"Free":`${T} ${M}`,A=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),k=T=>{if(T===0)return"0 Bytes";const M=1024,I=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(T)/Math.log(M));return parseFloat((T/Math.pow(M,R)).toFixed(2))+" "+I[R]},j=(T,M=!1,I)=>Array.from({length:5},(R,$)=>c.jsx(x_,{className:`h-4 w-4 cursor-pointer ${$<T?"fill-amber text-amber":"fill-muted stroke-muted-foreground"}`,onClick:()=>M&&I&&I($+1)},$));return f?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(hm,{}),c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsx("div",{className:"h-8 bg-muted rounded w-1/4"}),c.jsx("div",{className:"h-64 bg-muted rounded"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[c.jsx("div",{className:"h-6 bg-muted rounded"}),c.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),c.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}),c.jsx("div",{className:"h-96 bg-muted rounded"})]})]})})]}):e?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(hm,{}),c.jsxs("div",{className:"container mx-auto px-4 py-8",children:[c.jsx("div",{className:"mb-6",children:c.jsxs(Dr,{to:"/courses",className:"inline-flex items-center text-muted-foreground hover:text-foreground",children:[c.jsx(mk,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"relative",children:[e.cover_image_url?c.jsx("img",{src:e.cover_image_url,alt:e.title,className:"w-full h-64 object-cover rounded-lg"}):c.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-medical-primary/20 to-swiss-blue/20 rounded-lg flex items-center justify-center",children:c.jsx("div",{className:"text-8xl text-medical-primary opacity-30",children:"📚"})}),c.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[c.jsx(Z,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:c.jsx(e8,{className:"h-4 w-4"})}),c.jsx(Z,{size:"sm",variant:"secondary",className:"bg-background/90 backdrop-blur-sm",children:c.jsx(kE,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-start justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:e.title}),c.jsxs("div",{className:"flex items-center gap-4 text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[j(e.average_rating),c.jsxs("span",{className:"ml-1",children:["(",e.total_reviews," reviews)"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(y_,{className:"h-4 w-4"}),c.jsxs("span",{children:[e.city,", ",e.country]})]})]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.modality&&c.jsx(ge,{variant:"secondary",children:e.modality}),e.difficulty_level&&c.jsx(ge,{variant:"outline",children:e.difficulty_level}),e.has_certificate&&c.jsxs(ge,{variant:"outline",children:[c.jsx(sh,{className:"h-3 w-3 mr-1"}),"Certificate"]})]})]}),c.jsx("p",{className:"text-muted-foreground mb-6",children:e.description}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(fR,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsxs("div",{className:"font-semibold",children:[e.cme_points," CME"]}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Points"})]}),c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(jv,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsx("div",{className:"font-semibold",children:e.capacity||"Unlimited"}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Capacity"})]}),c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(Hi,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsx("div",{className:"font-semibold",children:r.length}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Sessions"})]}),c.jsxs("div",{className:"text-center p-4 bg-accent/50 rounded-lg",children:[c.jsx(x_,{className:"h-6 w-6 mx-auto mb-2 text-medical-primary"}),c.jsx("div",{className:"font-semibold",children:e.average_rating.toFixed(1)}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Rating"})]})]})]}),c.jsxs(Zl,{defaultValue:"overview",className:"w-full",children:[c.jsxs(lo,{className:"grid w-full grid-cols-4",children:[c.jsx(At,{value:"overview",children:"Overview"}),c.jsx(At,{value:"content",children:"Content"}),c.jsx(At,{value:"materials",children:"Materials"}),c.jsx(At,{value:"reviews",children:"Reviews"})]}),c.jsxs(zt,{value:"overview",className:"space-y-6",children:[c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsx(wt,{children:"Course Requirements"})}),c.jsx(ze,{children:c.jsx("p",{children:e.requirements||"No specific requirements"})})]}),e.tags&&e.tags.length>0&&c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsx(wt,{children:"Topics Covered"})}),c.jsx(ze,{children:c.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map((T,M)=>c.jsx(ge,{variant:"outline",children:T},M))})})]})]}),c.jsx(zt,{value:"content",className:"space-y-4",children:i.length>0?i.map((T,M)=>c.jsx(ae,{children:c.jsx(ze,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:T.videos.thumbnail_url||"/placeholder.svg",alt:T.videos.title,className:"w-24 h-16 object-cover rounded"}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx(mR,{className:"h-6 w-6 text-white drop-shadow-lg"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold",children:T.videos.title}),c.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.videos.description}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[c.jsxs("span",{children:[Math.floor(T.videos.duration/60)," min"]}),c.jsx(ge,{variant:T.is_preview?"secondary":"outline",className:"text-xs",children:T.is_preview?"Free Preview":"Premium"})]})]})]})})},T.id)):c.jsx(ae,{children:c.jsxs(ze,{className:"p-8 text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"🎥"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No video content available"}),c.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include video lessons."})]})})}),c.jsx(zt,{value:"materials",className:"space-y-4",children:o.length>0?o.map(T=>c.jsx(ae,{children:c.jsx(ze,{className:"p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(pR,{className:"h-5 w-5 text-medical-primary"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:T.title}),c.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.description," • ",k(T.file_size)," • ",T.file_type.toUpperCase()]})]})]}),c.jsx(ge,{variant:T.is_preview?"secondary":"outline",children:T.is_preview?"Free":"Premium"})]})})},T.id)):c.jsx(ae,{children:c.jsxs(ze,{className:"p-8 text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"📄"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No materials available"}),c.jsx("p",{className:"text-muted-foreground",children:"This course doesn't include downloadable materials."})]})})}),c.jsx(zt,{value:"reviews",className:"space-y-4",children:u.length>0?u.map(T=>c.jsx(ae,{children:c.jsx(ze,{className:"p-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs(f4,{children:[c.jsx(p4,{src:T.profiles.avatar_url}),c.jsx(m4,{children:T.profiles.full_name.charAt(0)})]}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"font-semibold",children:T.profiles.full_name}),c.jsx("div",{className:"flex items-center",children:j(T.rating)}),c.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(T.created_at).toLocaleDateString()})]}),c.jsx("p",{className:"text-muted-foreground",children:T.comment})]})]})})},T.id)):c.jsx(ae,{children:c.jsxs(ze,{className:"p-8 text-center",children:[c.jsx("div",{className:"text-4xl mb-4",children:"⭐"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No reviews yet"}),c.jsx("p",{className:"text-muted-foreground",children:"Be the first to review this course!"})]})})})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsxs(wt,{className:"flex items-center justify-between",children:[c.jsx("span",{children:"Enroll Now"}),c.jsx("span",{className:"text-2xl font-bold text-medical-primary",children:C(e.price,e.currency)})]})}),c.jsxs(ze,{className:"space-y-4",children:[v?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-green-600 font-semibold mb-2",children:"✓ Already Enrolled"}),c.jsx(Z,{variant:"outline",className:"w-full",children:"Go to Course"})]}):c.jsxs(c.Fragment,{children:[r.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Select Session:"}),c.jsxs("select",{className:"w-full p-2 border rounded-md",value:g,onChange:T=>x(T.target.value),children:[c.jsx("option",{value:"",children:"Choose a session"}),r.map(T=>c.jsxs("option",{value:T.id,children:[A(T.start_date),T.location&&` - ${T.location}`]},T.id))]})]}),c.jsx(Z,{className:"w-full",variant:"medical",onClick:S,disabled:m||r.length>0&&!g,children:m?"Processing...":"Enroll Now"})]}),c.jsx(t4,{}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Language:"}),c.jsx("span",{className:"font-medium",children:e.language})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Specialty:"}),c.jsx("span",{className:"font-medium",children:e.specialty})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Level:"}),c.jsx("span",{className:"font-medium capitalize",children:e.difficulty_level})]})]})]})]}),r.length>0&&c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsx(wt,{children:"Upcoming Sessions"})}),c.jsx(ze,{className:"space-y-3",children:r.slice(0,3).map(T=>c.jsxs("div",{className:"p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx(Hi,{className:"h-4 w-4 text-medical-primary"}),c.jsx("span",{className:"font-medium text-sm",children:A(T.start_date)})]}),T.location&&c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx(y_,{className:"h-3 w-3"}),c.jsx("span",{children:T.location})]}),c.jsxs("div",{className:"mt-2",children:[c.jsx($f,{value:T.current_participants/T.max_participants*100,className:"h-2"}),c.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[T.current_participants,"/",T.max_participants," enrolled"]})]})]},T.id))})]})]})]})]})]}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(hm,{}),c.jsx("div",{className:"container mx-auto px-4 py-8",children:c.jsxs("div",{className:"text-center py-12",children:[c.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Course not found"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"The course you're looking for doesn't exist or has been removed."}),c.jsx(Dr,{to:"/courses",children:c.jsxs(Z,{variant:"outline",children:[c.jsx(mk,{className:"h-4 w-4 mr-2"}),"Back to Courses"]})})]})})]})}const Bf=b.forwardRef(({className:n,...e},t)=>c.jsx("div",{className:"relative w-full overflow-auto",children:c.jsx("table",{ref:t,className:ee("w-full caption-bottom text-sm",n),...e})}));Bf.displayName="Table";const zf=b.forwardRef(({className:n,...e},t)=>c.jsx("thead",{ref:t,className:ee("[&_tr]:border-b",n),...e}));zf.displayName="TableHeader";const Uf=b.forwardRef(({className:n,...e},t)=>c.jsx("tbody",{ref:t,className:ee("[&_tr:last-child]:border-0",n),...e}));Uf.displayName="TableBody";const eV=b.forwardRef(({className:n,...e},t)=>c.jsx("tfoot",{ref:t,className:ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...e}));eV.displayName="TableFooter";const Ws=b.forwardRef(({className:n,...e},t)=>c.jsx("tr",{ref:t,className:ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...e}));Ws.displayName="TableRow";const Me=b.forwardRef(({className:n,...e},t)=>c.jsx("th",{ref:t,className:ee("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...e}));Me.displayName="TableHead";const Ie=b.forwardRef(({className:n,...e},t)=>c.jsx("td",{ref:t,className:ee("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...e}));Ie.displayName="TableCell";const tV=b.forwardRef(({className:n,...e},t)=>c.jsx("caption",{ref:t,className:ee("mt-4 text-sm text-muted-foreground",n),...e}));tV.displayName="TableCaption";const nV=({moduleKey:n,onClose:e})=>{const[t,r]=b.useState(null),[s,i]=b.useState([]),[a,o]=b.useState(!0),[l,u]=b.useState(4),h=b.useCallback(async()=>{try{o(!0);const{data:{user:v}}=await oe.auth.getUser();if(!v)return;const{data:w}=await oe.from("profiles").select("pgy_level").eq("user_id",v.id).single();w!=null&&w.pgy_level&&u(w.pgy_level);const{data:_}=await oe.from("procedure_categories").select("*").eq("key",n).single();_&&r({id:_.id,title_de:_.title_de,minimum_required:_.minimum_required});const{data:S}=await oe.rpc("get_module_progress",{user_id_param:v.id,module_key:n}),{data:C}=await oe.from("procedures").select(`
          id,
          code,
          title_de,
          min_required_by_pgy
        `).eq("category_id",_==null?void 0:_.id).eq("active",!0),A=[];for(const k of C||[]){const{data:j}=await oe.from("procedure_logs").select("*").eq("procedure_id",k.id).eq("user_id",v.id).order("performed_date",{ascending:!1}),T=(j==null?void 0:j.filter($=>$.role_in_surgery==="responsible").length)||0,M=(j==null?void 0:j.filter($=>$.role_in_surgery==="instructing").length)||0,I=(j==null?void 0:j.filter($=>$.role_in_surgery==="assistant").length)||0,R=T*1+M*.75+I*.5;A.push({...k,responsible_count:T,instructing_count:M,assistant_count:I,weighted_score:R,logs:j||[]})}i(A)}catch(v){console.error("Error loading module details:",v)}finally{o(!1)}},[n]);b.useEffect(()=>{h()},[h]);const f=v=>({basis_notfall:"coral",basis_allgemein:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[v]||"mint",p=v=>{var w;return((w=v.min_required_by_pgy)==null?void 0:w[`pgy${l}`])??0},m=v=>{const w=p(v);return w===0?0:Math.min(100,v.weighted_score/w*100)},y=s.reduce((v,w)=>v+w.weighted_score,0),g=(t==null?void 0:t.minimum_required)||0,x=g>0?Math.min(100,y/g*100):0;return a?c.jsx(ae,{className:"medical-card mb-8",children:c.jsx(ze,{className:"p-8",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):c.jsxs(ae,{className:"medical-card mb-8",children:[c.jsxs(mt,{className:"flex flex-row items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Dv,{progress:x,variant:f(n),size:80,strokeWidth:6,showPercentage:!0}),c.jsxs("div",{children:[c.jsx(wt,{className:"text-xl text-card-foreground",children:t==null?void 0:t.title_de}),c.jsxs("p",{className:"text-muted-foreground",children:[y.toFixed(1)," / ",g," Punkte (gewichtet)"]})]})]}),c.jsx(Z,{variant:"ghost",size:"sm",onClick:e,children:c.jsx(Xl,{className:"w-4 h-4"})})]}),c.jsx(ze,{children:c.jsxs(Zl,{defaultValue:"overview",className:"w-full",children:[c.jsxs(lo,{className:"grid w-full grid-cols-3",children:[c.jsx(At,{value:"overview",children:"Übersicht"}),c.jsx(At,{value:"procedures",children:"Prozeduren"}),c.jsx(At,{value:"timeline",children:"Verlauf"})]}),c.jsx(zt,{value:"overview",className:"mt-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs(ae,{className:"p-4",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Rollenverteilung"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm",children:"Verantwortlich:"}),c.jsx(ge,{variant:"default",children:s.reduce((v,w)=>v+w.responsible_count,0)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm",children:"Instruierend:"}),c.jsx(ge,{variant:"secondary",children:s.reduce((v,w)=>v+w.instructing_count,0)})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm",children:"Assistent:"}),c.jsx(ge,{variant:"outline",children:s.reduce((v,w)=>v+w.assistant_count,0)})]})]})]}),c.jsxs(ae,{className:"p-4",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Modulfortschritt"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[c.jsx("span",{children:"Erfüllung"}),c.jsxs("span",{children:[x.toFixed(1),"%"]})]}),c.jsx($f,{value:x,className:"h-2"})]}),c.jsx("div",{className:"text-xs text-muted-foreground",children:"Gewichtung: V=1.0, I=0.75, A=0.5"})]})]}),c.jsxs(ae,{className:"p-4",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Statistiken"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Prozeduren:"}),c.jsx("span",{children:s.length})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Eingriffe total:"}),c.jsx("span",{children:s.reduce((v,w)=>v+w.responsible_count+w.instructing_count+w.assistant_count,0)})]}),c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Punkte total:"}),c.jsx("span",{children:y.toFixed(1)})]})]})]})]})}),c.jsx(zt,{value:"procedures",className:"mt-6",children:c.jsxs(Bf,{children:[c.jsx(zf,{children:c.jsxs(Ws,{children:[c.jsx(Me,{children:"Prozedur"}),c.jsxs(Me,{className:"text-center",children:["Soll PGY-",l]}),c.jsx(Me,{className:"text-center",children:"Ist (gewichtet)"}),c.jsx(Me,{className:"text-center",children:"V/I/A"}),c.jsx(Me,{className:"text-center",children:"Fortschritt"}),c.jsx(Me,{className:"text-center",children:"Status"})]})}),c.jsx(Uf,{children:s.map(v=>{const w=p(v),_=m(v),S=w>0&&v.weighted_score<w;return c.jsxs(Ws,{children:[c.jsx(Ie,{className:"font-medium",children:c.jsxs("div",{children:[c.jsx("div",{children:v.title_de}),c.jsx("div",{className:"text-xs text-muted-foreground",children:v.code})]})}),c.jsx(Ie,{className:"text-center",children:w||"-"}),c.jsx(Ie,{className:"text-center",children:v.weighted_score.toFixed(1)}),c.jsx(Ie,{className:"text-center",children:c.jsxs("div",{className:"flex gap-1 justify-center",children:[c.jsx(ge,{variant:"default",className:"text-xs",children:v.responsible_count}),c.jsx(ge,{variant:"secondary",className:"text-xs",children:v.instructing_count}),c.jsx(ge,{variant:"outline",className:"text-xs",children:v.assistant_count})]})}),c.jsx(Ie,{className:"text-center",children:w>0?c.jsxs("div",{className:"w-16 mx-auto",children:[c.jsx($f,{value:_,className:"h-2"}),c.jsxs("div",{className:"text-xs mt-1",children:[_.toFixed(0),"%"]})]}):"-"}),c.jsxs(Ie,{className:"text-center",children:[S&&c.jsx(dx,{className:"w-4 h-4 text-orange-500 mx-auto"}),w>0&&v.weighted_score>=w&&c.jsx(ge,{variant:"default",className:"bg-green-500",children:"✓"})]})]},v.id)})})]})}),c.jsx(zt,{value:"timeline",className:"mt-6",children:c.jsx("div",{className:"space-y-4",children:s.filter(v=>v.logs.length>0).flatMap(v=>v.logs.map(w=>({...w,procedure_title:v.title_de}))).sort((v,w)=>new Date(w.performed_date).getTime()-new Date(v.performed_date).getTime()).slice(0,20).map(v=>c.jsx(ae,{className:"p-4",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:v.procedure_title}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[new Date(v.performed_date).toLocaleDateString("de-DE")," • ",v.hospital]}),v.supervisor&&c.jsxs("div",{className:"text-xs text-muted-foreground",children:["Supervisor: ",v.supervisor]})]}),c.jsx(ge,{variant:v.role_in_surgery==="responsible"?"default":v.role_in_surgery==="instructing"?"secondary":"outline",children:v.role_in_surgery==="responsible"?"Verantwortlich":v.role_in_surgery==="instructing"?"Instruierend":"Assistent"})]})},v.id))})})]})})]})};var Uw="Dialog",[b4,oZ]=ei(Uw),[rV,ti]=b4(Uw),_4=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=n,o=b.useRef(null),l=b.useRef(null),[u,h]=Vu({prop:r,defaultProp:s??!1,onChange:i,caller:Uw});return c.jsx(rV,{scope:e,triggerRef:o,contentRef:l,contentId:Xn(),titleId:Xn(),descriptionId:Xn(),open:u,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(f=>!f),[h]),modal:a,children:t})};_4.displayName=Uw;var S4="DialogTrigger",sV=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ti(S4,t),i=He(e,s.triggerRef);return c.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":oC(s.open),...r,ref:i,onClick:he(n.onClick,s.onOpenToggle)})});sV.displayName=S4;var iC="DialogPortal",[iV,E4]=b4(iC,{forceMount:void 0}),C4=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=ti(iC,e);return c.jsx(iV,{scope:e,forceMount:t,children:b.Children.map(r,a=>c.jsx(ps,{present:t||i.open,children:c.jsx(kv,{asChild:!0,container:s,children:a})}))})};C4.displayName=iC;var Sx="DialogOverlay",A4=b.forwardRef((n,e)=>{const t=E4(Sx,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=ti(Sx,n.__scopeDialog);return i.modal?c.jsx(ps,{present:r||i.open,children:c.jsx(oV,{...s,ref:e})}):null});A4.displayName=Sx;var aV=Wu("DialogOverlay.RemoveScroll"),oV=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ti(Sx,t);return c.jsx(Fw,{as:aV,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(le.div,{"data-state":oC(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ku="DialogContent",k4=b.forwardRef((n,e)=>{const t=E4(Ku,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=ti(Ku,n.__scopeDialog);return c.jsx(ps,{present:r||i.open,children:i.modal?c.jsx(lV,{...s,ref:e}):c.jsx(cV,{...s,ref:e})})});k4.displayName=Ku;var lV=b.forwardRef((n,e)=>{const t=ti(Ku,n.__scopeDialog),r=b.useRef(null),s=He(e,t.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return eC(i)},[]),c.jsx(N4,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(n.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=t.triggerRef.current)==null||a.focus()}),onPointerDownOutside:he(n.onPointerDownOutside,i=>{const a=i.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&i.preventDefault()}),onFocusOutside:he(n.onFocusOutside,i=>i.preventDefault())})}),cV=b.forwardRef((n,e)=>{const t=ti(Ku,n.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return c.jsx(N4,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(r.current||(o=t.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),N4=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=n,o=ti(Ku,t),l=b.useRef(null),u=He(e,l);return HE(),c.jsxs(c.Fragment,{children:[c.jsx(Rw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(Av,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":oC(o.open),...a,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(uV,{titleId:o.titleId}),c.jsx(hV,{contentRef:l,descriptionId:o.descriptionId})]})]})}),aC="DialogTitle",P4=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ti(aC,t);return c.jsx(le.h2,{id:s.titleId,...r,ref:e})});P4.displayName=aC;var j4="DialogDescription",T4=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ti(j4,t);return c.jsx(le.p,{id:s.descriptionId,...r,ref:e})});T4.displayName=j4;var R4="DialogClose",M4=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ti(R4,t);return c.jsx(le.button,{type:"button",...r,ref:e,onClick:he(n.onClick,()=>s.onOpenChange(!1))})});M4.displayName=R4;function oC(n){return n?"open":"closed"}var I4="DialogTitleWarning",[lZ,D4]=Z6(I4,{contentName:Ku,titleName:aC,docsSlug:"dialog"}),uV=({titleId:n})=>{const e=D4(I4),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},dV="DialogDescriptionWarning",hV=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${D4(dV).contentName}}.`;return b.useEffect(()=>{var i;const s=(i=n.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},L4=_4,O4=C4,lC=A4,cC=k4,F4=P4,$4=T4,fV=M4;const Hw=L4,pV=O4,B4=b.forwardRef(({className:n,...e},t)=>c.jsx(lC,{ref:t,className:ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e}));B4.displayName=lC.displayName;const Fv=b.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(pV,{children:[c.jsx(B4,{}),c.jsxs(cC,{ref:r,className:ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t,children:[e,c.jsxs(fV,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(Xl,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fv.displayName=cC.displayName;const $v=({className:n,...e})=>c.jsx("div",{className:ee("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});$v.displayName="DialogHeader";const Bv=b.forwardRef(({className:n,...e},t)=>c.jsx(F4,{ref:t,className:ee("text-lg font-semibold leading-none tracking-tight",n),...e}));Bv.displayName=F4.displayName;const mV=b.forwardRef(({className:n,...e},t)=>c.jsx($4,{ref:t,className:ee("text-sm text-muted-foreground",n),...e}));mV.displayName=$4.displayName;var gV="Label",z4=b.forwardRef((n,e)=>c.jsx(le.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));z4.displayName=gV;var U4=z4;const vV=Pv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ot=b.forwardRef(({className:n,...e},t)=>c.jsx(U4,{ref:t,className:ee(vV(),n),...e}));ot.displayName=U4.displayName;const uC=b.forwardRef(({className:n,...e},t)=>c.jsx("textarea",{className:ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));uC.displayName="Textarea";var CN=1,yV=.9,xV=.8,wV=.17,n1=.1,r1=.999,bV=.9999,_V=.99,SV=/[\\\/_+.#"@\[\(\{&]/,EV=/[\\\/_+.#"@\[\(\{&]/g,CV=/[\s-]/,H4=/[\s-]/g;function J_(n,e,t,r,s,i,a){if(i===e.length)return s===n.length?CN:_V;var o=`${s},${i}`;if(a[o]!==void 0)return a[o];for(var l=r.charAt(i),u=t.indexOf(l,s),h=0,f,p,m,y;u>=0;)f=J_(n,e,t,r,u+1,i+1,a),f>h&&(u===s?f*=CN:SV.test(n.charAt(u-1))?(f*=xV,m=n.slice(s,u-1).match(EV),m&&s>0&&(f*=Math.pow(r1,m.length))):CV.test(n.charAt(u-1))?(f*=yV,y=n.slice(s,u-1).match(H4),y&&s>0&&(f*=Math.pow(r1,y.length))):(f*=wV,s>0&&(f*=Math.pow(r1,u-s))),n.charAt(u)!==e.charAt(i)&&(f*=bV)),(f<n1&&t.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&t.charAt(u-1)!==r.charAt(i))&&(p=J_(n,e,t,r,u+1,i+2,a),p*n1>f&&(f=p*n1)),f>h&&(h=f),u=t.indexOf(l,u+1);return a[o]=h,h}function AN(n){return n.toLowerCase().replace(H4," ")}function AV(n,e,t){return n=t&&t.length>0?`${n+" "+t.join(" ")}`:n,J_(n,e,AN(n),AN(e),0,0,{})}var wp='[cmdk-group=""]',s1='[cmdk-group-items=""]',kV='[cmdk-group-heading=""]',W4='[cmdk-item=""]',kN=`${W4}:not([aria-disabled="true"])`,Z_="cmdk-item-select",Ad="data-value",NV=(n,e,t)=>AV(n,e,t),V4=b.createContext(void 0),zv=()=>b.useContext(V4),G4=b.createContext(void 0),dC=()=>b.useContext(G4),q4=b.createContext(void 0),Y4=b.forwardRef((n,e)=>{let t=kd(()=>{var z,G;return{search:"",value:(G=(z=n.value)!=null?z:n.defaultValue)!=null?G:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=kd(()=>new Set),s=kd(()=>new Map),i=kd(()=>new Map),a=kd(()=>new Set),o=K4(n),{label:l,children:u,value:h,onValueChange:f,filter:p,shouldFilter:m,loop:y,disablePointerSelection:g=!1,vimBindings:x=!0,...v}=n,w=Xn(),_=Xn(),S=Xn(),C=b.useRef(null),A=$V();Xu(()=>{if(h!==void 0){let z=h.trim();t.current.value=z,k.emit()}},[h]),Xu(()=>{A(6,$)},[]);let k=b.useMemo(()=>({subscribe:z=>(a.current.add(z),()=>a.current.delete(z)),snapshot:()=>t.current,setState:(z,G,X)=>{var K,ce,H,pe;if(!Object.is(t.current[z],G)){if(t.current[z]=G,z==="search")R(),M(),A(1,I);else if(z==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ee=document.getElementById(S);Ee?Ee.focus():(K=document.getElementById(w))==null||K.focus()}if(A(7,()=>{var Ee;t.current.selectedItemId=(Ee=O())==null?void 0:Ee.id,k.emit()}),X||A(5,$),((ce=o.current)==null?void 0:ce.value)!==void 0){let Ee=G??"";(pe=(H=o.current).onValueChange)==null||pe.call(H,Ee);return}}k.emit()}},emit:()=>{a.current.forEach(z=>z())}}),[]),j=b.useMemo(()=>({value:(z,G,X)=>{var K;G!==((K=i.current.get(z))==null?void 0:K.value)&&(i.current.set(z,{value:G,keywords:X}),t.current.filtered.items.set(z,T(G,X)),A(2,()=>{M(),k.emit()}))},item:(z,G)=>(r.current.add(z),G&&(s.current.has(G)?s.current.get(G).add(z):s.current.set(G,new Set([z]))),A(3,()=>{R(),M(),t.current.value||I(),k.emit()}),()=>{i.current.delete(z),r.current.delete(z),t.current.filtered.items.delete(z);let X=O();A(4,()=>{R(),(X==null?void 0:X.getAttribute("id"))===z&&I(),k.emit()})}),group:z=>(s.current.has(z)||s.current.set(z,new Set),()=>{i.current.delete(z),s.current.delete(z)}),filter:()=>o.current.shouldFilter,label:l||n["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:w,inputId:S,labelId:_,listInnerRef:C}),[]);function T(z,G){var X,K;let ce=(K=(X=o.current)==null?void 0:X.filter)!=null?K:NV;return z?ce(z,t.current.search,G):0}function M(){if(!t.current.search||o.current.shouldFilter===!1)return;let z=t.current.filtered.items,G=[];t.current.filtered.groups.forEach(K=>{let ce=s.current.get(K),H=0;ce.forEach(pe=>{let Ee=z.get(pe);H=Math.max(Ee,H)}),G.push([K,H])});let X=C.current;W().sort((K,ce)=>{var H,pe;let Ee=K.getAttribute("id"),Ae=ce.getAttribute("id");return((H=z.get(Ae))!=null?H:0)-((pe=z.get(Ee))!=null?pe:0)}).forEach(K=>{let ce=K.closest(s1);ce?ce.appendChild(K.parentElement===ce?K:K.closest(`${s1} > *`)):X.appendChild(K.parentElement===X?K:K.closest(`${s1} > *`))}),G.sort((K,ce)=>ce[1]-K[1]).forEach(K=>{var ce;let H=(ce=C.current)==null?void 0:ce.querySelector(`${wp}[${Ad}="${encodeURIComponent(K[0])}"]`);H==null||H.parentElement.appendChild(H)})}function I(){let z=W().find(X=>X.getAttribute("aria-disabled")!=="true"),G=z==null?void 0:z.getAttribute(Ad);k.setState("value",G||void 0)}function R(){var z,G,X,K;if(!t.current.search||o.current.shouldFilter===!1){t.current.filtered.count=r.current.size;return}t.current.filtered.groups=new Set;let ce=0;for(let H of r.current){let pe=(G=(z=i.current.get(H))==null?void 0:z.value)!=null?G:"",Ee=(K=(X=i.current.get(H))==null?void 0:X.keywords)!=null?K:[],Ae=T(pe,Ee);t.current.filtered.items.set(H,Ae),Ae>0&&ce++}for(let[H,pe]of s.current)for(let Ee of pe)if(t.current.filtered.items.get(Ee)>0){t.current.filtered.groups.add(H);break}t.current.filtered.count=ce}function $(){var z,G,X;let K=O();K&&(((z=K.parentElement)==null?void 0:z.firstChild)===K&&((X=(G=K.closest(wp))==null?void 0:G.querySelector(kV))==null||X.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function O(){var z;return(z=C.current)==null?void 0:z.querySelector(`${W4}[aria-selected="true"]`)}function W(){var z;return Array.from(((z=C.current)==null?void 0:z.querySelectorAll(kN))||[])}function B(z){let G=W()[z];G&&k.setState("value",G.getAttribute(Ad))}function F(z){var G;let X=O(),K=W(),ce=K.findIndex(pe=>pe===X),H=K[ce+z];(G=o.current)!=null&&G.loop&&(H=ce+z<0?K[K.length-1]:ce+z===K.length?K[0]:K[ce+z]),H&&k.setState("value",H.getAttribute(Ad))}function L(z){let G=O(),X=G==null?void 0:G.closest(wp),K;for(;X&&!K;)X=z>0?OV(X,wp):FV(X,wp),K=X==null?void 0:X.querySelector(kN);K?k.setState("value",K.getAttribute(Ad)):F(z)}let U=()=>B(W().length-1),V=z=>{z.preventDefault(),z.metaKey?U():z.altKey?L(1):F(1)},J=z=>{z.preventDefault(),z.metaKey?B(0):z.altKey?L(-1):F(-1)};return b.createElement(le.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:z=>{var G;(G=v.onKeyDown)==null||G.call(v,z);let X=z.nativeEvent.isComposing||z.keyCode===229;if(!(z.defaultPrevented||X))switch(z.key){case"n":case"j":{x&&z.ctrlKey&&V(z);break}case"ArrowDown":{V(z);break}case"p":case"k":{x&&z.ctrlKey&&J(z);break}case"ArrowUp":{J(z);break}case"Home":{z.preventDefault(),B(0);break}case"End":{z.preventDefault(),U();break}case"Enter":{z.preventDefault();let K=O();if(K){let ce=new Event(Z_);K.dispatchEvent(ce)}}}}},b.createElement("label",{"cmdk-label":"",htmlFor:j.inputId,id:j.labelId,style:zV},l),Ww(n,z=>b.createElement(G4.Provider,{value:k},b.createElement(V4.Provider,{value:j},z))))}),PV=b.forwardRef((n,e)=>{var t,r;let s=Xn(),i=b.useRef(null),a=b.useContext(q4),o=zv(),l=K4(n),u=(r=(t=l.current)==null?void 0:t.forceMount)!=null?r:a==null?void 0:a.forceMount;Xu(()=>{if(!u)return o.item(s,a==null?void 0:a.id)},[u]);let h=X4(s,i,[n.value,n.children,i],n.keywords),f=dC(),p=zl(A=>A.value&&A.value===h.current),m=zl(A=>u||o.filter()===!1?!0:A.search?A.filtered.items.get(s)>0:!0);b.useEffect(()=>{let A=i.current;if(!(!A||n.disabled))return A.addEventListener(Z_,y),()=>A.removeEventListener(Z_,y)},[m,n.onSelect,n.disabled]);function y(){var A,k;g(),(k=(A=l.current).onSelect)==null||k.call(A,h.current)}function g(){f.setState("value",h.current,!0)}if(!m)return null;let{disabled:x,value:v,onSelect:w,forceMount:_,keywords:S,...C}=n;return b.createElement(le.div,{ref:Hu(i,e),...C,id:s,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!p,"data-disabled":!!x,"data-selected":!!p,onPointerMove:x||o.getDisablePointerSelection()?void 0:g,onClick:x?void 0:y},n.children)}),jV=b.forwardRef((n,e)=>{let{heading:t,children:r,forceMount:s,...i}=n,a=Xn(),o=b.useRef(null),l=b.useRef(null),u=Xn(),h=zv(),f=zl(m=>s||h.filter()===!1?!0:m.search?m.filtered.groups.has(a):!0);Xu(()=>h.group(a),[]),X4(a,o,[n.value,n.heading,l]);let p=b.useMemo(()=>({id:a,forceMount:s}),[s]);return b.createElement(le.div,{ref:Hu(o,e),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},t&&b.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},t),Ww(n,m=>b.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?u:void 0},b.createElement(q4.Provider,{value:p},m))))}),TV=b.forwardRef((n,e)=>{let{alwaysRender:t,...r}=n,s=b.useRef(null),i=zl(a=>!a.search);return!t&&!i?null:b.createElement(le.div,{ref:Hu(s,e),...r,"cmdk-separator":"",role:"separator"})}),RV=b.forwardRef((n,e)=>{let{onValueChange:t,...r}=n,s=n.value!=null,i=dC(),a=zl(u=>u.search),o=zl(u=>u.selectedItemId),l=zv();return b.useEffect(()=>{n.value!=null&&i.setState("search",n.value)},[n.value]),b.createElement(le.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:s?n.value:a,onChange:u=>{s||i.setState("search",u.target.value),t==null||t(u.target.value)}})}),MV=b.forwardRef((n,e)=>{let{children:t,label:r="Suggestions",...s}=n,i=b.useRef(null),a=b.useRef(null),o=zl(u=>u.selectedItemId),l=zv();return b.useEffect(()=>{if(a.current&&i.current){let u=a.current,h=i.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=u.offsetHeight;h.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(f),p.unobserve(u)}}},[]),b.createElement(le.div,{ref:Hu(i,e),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},Ww(n,u=>b.createElement("div",{ref:Hu(a,l.listInnerRef),"cmdk-list-sizer":""},u)))}),IV=b.forwardRef((n,e)=>{let{open:t,onOpenChange:r,overlayClassName:s,contentClassName:i,container:a,...o}=n;return b.createElement(L4,{open:t,onOpenChange:r},b.createElement(O4,{container:a},b.createElement(lC,{"cmdk-overlay":"",className:s}),b.createElement(cC,{"aria-label":n.label,"cmdk-dialog":"",className:i},b.createElement(Y4,{ref:e,...o}))))}),DV=b.forwardRef((n,e)=>zl(t=>t.filtered.count===0)?b.createElement(le.div,{ref:e,...n,"cmdk-empty":"",role:"presentation"}):null),LV=b.forwardRef((n,e)=>{let{progress:t,children:r,label:s="Loading...",...i}=n;return b.createElement(le.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},Ww(n,a=>b.createElement("div",{"aria-hidden":!0},a)))}),gr=Object.assign(Y4,{List:MV,Item:PV,Input:RV,Group:jV,Separator:TV,Dialog:IV,Empty:DV,Loading:LV});function OV(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function FV(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function K4(n){let e=b.useRef(n);return Xu(()=>{e.current=n}),e}var Xu=typeof window>"u"?b.useEffect:b.useLayoutEffect;function kd(n){let e=b.useRef();return e.current===void 0&&(e.current=n()),e}function zl(n){let e=dC(),t=()=>n(e.snapshot());return b.useSyncExternalStore(e.subscribe,t,t)}function X4(n,e,t,r=[]){let s=b.useRef(),i=zv();return Xu(()=>{var a;let o=(()=>{var u;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(u=h.current.textContent)==null?void 0:u.trim():s.current}})(),l=r.map(u=>u.trim());i.value(n,o,l),(a=e.current)==null||a.setAttribute(Ad,o),s.current=o}),s}var $V=()=>{let[n,e]=b.useState(),t=kd(()=>new Map);return Xu(()=>{t.current.forEach(r=>r()),t.current=new Map},[n]),(r,s)=>{t.current.set(r,s),e({})}};function BV(n){let e=n.type;return typeof e=="function"?e(n.props):"render"in e?e.render(n.props):n}function Ww({asChild:n,children:e},t){return n&&b.isValidElement(e)?b.cloneElement(BV(e),{ref:e.ref},t(e.props.children)):t(e)}var zV={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Q4=b.forwardRef(({className:n,...e},t)=>c.jsx(gr,{ref:t,className:ee("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...e}));Q4.displayName=gr.displayName;const J4=b.forwardRef(({className:n,...e},t)=>c.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[c.jsx(gR,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),c.jsx(gr.Input,{ref:t,className:ee("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...e})]}));J4.displayName=gr.Input.displayName;const Z4=b.forwardRef(({className:n,...e},t)=>c.jsx(gr.List,{ref:t,className:ee("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...e}));Z4.displayName=gr.List.displayName;const eI=b.forwardRef((n,e)=>c.jsx(gr.Empty,{ref:e,className:"py-6 text-center text-sm",...n}));eI.displayName=gr.Empty.displayName;const tI=b.forwardRef(({className:n,...e},t)=>c.jsx(gr.Group,{ref:t,className:ee("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...e}));tI.displayName=gr.Group.displayName;const UV=b.forwardRef(({className:n,...e},t)=>c.jsx(gr.Separator,{ref:t,className:ee("-mx-1 h-px bg-border",n),...e}));UV.displayName=gr.Separator.displayName;const nI=b.forwardRef(({className:n,...e},t)=>c.jsx(gr.Item,{ref:t,className:ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",n),...e}));nI.displayName=gr.Item.displayName;var Vw="Popover",[rI,cZ]=ei(Vw,[Lw]),Uv=Lw(),[HV,nc]=rI(Vw),sI=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=n,o=Uv(e),l=b.useRef(null),[u,h]=b.useState(!1),[f,p]=Vu({prop:r,defaultProp:s??!1,onChange:i,caller:Vw});return c.jsx(i3,{...o,children:c.jsx(HV,{scope:e,contentId:Xn(),triggerRef:l,open:f,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:u,onCustomAnchorAdd:b.useCallback(()=>h(!0),[]),onCustomAnchorRemove:b.useCallback(()=>h(!1),[]),modal:a,children:t})})};sI.displayName=Vw;var iI="PopoverAnchor",WV=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=nc(iI,t),i=Uv(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:o}=s;return b.useEffect(()=>(a(),()=>o()),[a,o]),c.jsx(ZE,{...i,...r,ref:e})});WV.displayName=iI;var aI="PopoverTrigger",oI=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=nc(aI,t),i=Uv(t),a=He(e,s.triggerRef),o=c.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":hI(s.open),...r,ref:a,onClick:he(n.onClick,s.onOpenToggle)});return s.hasCustomAnchor?o:c.jsx(ZE,{asChild:!0,...i,children:o})});oI.displayName=aI;var hC="PopoverPortal",[VV,GV]=rI(hC,{forceMount:void 0}),lI=n=>{const{__scopePopover:e,forceMount:t,children:r,container:s}=n,i=nc(hC,e);return c.jsx(VV,{scope:e,forceMount:t,children:c.jsx(ps,{present:t||i.open,children:c.jsx(kv,{asChild:!0,container:s,children:r})})})};lI.displayName=hC;var Hf="PopoverContent",cI=b.forwardRef((n,e)=>{const t=GV(Hf,n.__scopePopover),{forceMount:r=t.forceMount,...s}=n,i=nc(Hf,n.__scopePopover);return c.jsx(ps,{present:r||i.open,children:i.modal?c.jsx(YV,{...s,ref:e}):c.jsx(KV,{...s,ref:e})})});cI.displayName=Hf;var qV=Wu("PopoverContent.RemoveScroll"),YV=b.forwardRef((n,e)=>{const t=nc(Hf,n.__scopePopover),r=b.useRef(null),s=He(e,r),i=b.useRef(!1);return b.useEffect(()=>{const a=r.current;if(a)return eC(a)},[]),c.jsx(Fw,{as:qV,allowPinchZoom:!0,children:c.jsx(uI,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:he(n.onCloseAutoFocus,a=>{var o;a.preventDefault(),i.current||(o=t.triggerRef.current)==null||o.focus()}),onPointerDownOutside:he(n.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:he(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),KV=b.forwardRef((n,e)=>{const t=nc(Hf,n.__scopePopover),r=b.useRef(!1),s=b.useRef(!1);return c.jsx(uI,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,o;(a=n.onCloseAutoFocus)==null||a.call(n,i),i.defaultPrevented||(r.current||(o=t.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=n.onInteractOutside)==null||l.call(n,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),uI=b.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:h,...f}=n,p=nc(Hf,t),m=Uv(t);return HE(),c.jsx(Rw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(Av,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:c.jsx(a3,{"data-state":hI(p.open),role:"dialog",id:p.contentId,...m,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),dI="PopoverClose",XV=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=nc(dI,t);return c.jsx(le.button,{type:"button",...r,ref:e,onClick:he(n.onClick,()=>s.onOpenChange(!1))})});XV.displayName=dI;var QV="PopoverArrow",JV=b.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,s=Uv(t);return c.jsx(o3,{...s,...r,ref:e})});JV.displayName=QV;function hI(n){return n?"open":"closed"}var ZV=sI,eG=oI,tG=lI,fI=cI;const ry=ZV,sy=eG,pm=b.forwardRef(({className:n,align:e="center",sideOffset:t=4,...r},s)=>c.jsx(tG,{children:c.jsx(fI,{ref:s,align:e,sideOffset:t,className:ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}));pm.displayName=fI.displayName;const nG=({onClose:n,onSuccess:e})=>{const[t,r]=b.useState([]),[s,i]=b.useState(""),[a,o]=b.useState(new Date().toISOString().split("T")[0]),[l,u]=b.useState(""),[h,f]=b.useState(""),[p,m]=b.useState(""),[y,g]=b.useState(""),[x,v]=b.useState(""),[w,_]=b.useState(!1),[S,C]=b.useState(!1),[A,k]=b.useState(""),{toast:j}=yE();b.useEffect(()=>{T()},[T]);const T=b.useCallback(async()=>{try{const{data:$,error:O}=await oe.from("procedures").select(`
          id,
          code,
          title_de,
          procedure_categories!inner(title_de)
        `).eq("active",!0).order("title_de");if(O)throw O;const W=($==null?void 0:$.map(B=>({id:B.id,code:B.code,title_de:B.title_de,category:{title_de:B.procedure_categories.title_de}})))||[];r(W)}catch($){console.error("Error loading procedures:",$),j({title:"Fehler",description:"Prozeduren konnten nicht geladen werden.",variant:"destructive"})}},[j]),M=async $=>{if($.preventDefault(),!s||!a||!l){j({title:"Fehler",description:"Bitte füllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}C(!0);try{const{data:{user:O}}=await oe.auth.getUser();if(!O)throw new Error("Not authenticated");const{error:W}=await oe.from("procedure_logs").insert({user_id:O.id,procedure_id:s,performed_date:a,role_in_surgery:l,hospital:h||null,supervisor:p||null,notes:y||null,case_id:x||null});if(W)throw W;j({title:"Erfolg",description:"Prozedur wurde erfolgreich erfasst."}),e()}catch(O){console.error("Error saving procedure:",O),j({title:"Fehler",description:"Prozedur konnte nicht gespeichert werden.",variant:"destructive"})}finally{C(!1)}},I=t.filter($=>$.title_de.toLowerCase().includes(A.toLowerCase())||$.code.toLowerCase().includes(A.toLowerCase())||$.category.title_de.toLowerCase().includes(A.toLowerCase())),R=t.find($=>$.id===s);return c.jsx(Hw,{open:!0,onOpenChange:n,children:c.jsxs(Fv,{className:"sm:max-w-[600px]",children:[c.jsx($v,{children:c.jsxs(Bv,{className:"flex items-center gap-2",children:[c.jsx(ih,{className:"w-5 h-5"}),"Prozedur erfassen"]})}),c.jsxs("form",{onSubmit:M,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(ot,{htmlFor:"procedure",className:"text-sm font-medium",children:["Prozedur ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs(ry,{open:w,onOpenChange:_,children:[c.jsx(sy,{asChild:!0,children:c.jsxs(Z,{variant:"outline",role:"combobox","aria-expanded":w,className:"w-full justify-between",children:[R?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ge,{variant:"outline",className:"text-xs",children:R.code}),c.jsx("span",{children:R.title_de})]}):"Prozedur auswählen...",c.jsx(QF,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),c.jsx(pm,{className:"w-full p-0",children:c.jsxs(Q4,{children:[c.jsx(J4,{placeholder:"Prozedur suchen...",value:A,onValueChange:k}),c.jsx(eI,{children:"Keine Prozedur gefunden."}),c.jsx(Z4,{children:c.jsx(tI,{children:I.map($=>c.jsxs(nI,{value:`${$.code} ${$.title_de}`,onSelect:()=>{i($.id),_(!1)},children:[c.jsx(dR,{className:ee("mr-2 h-4 w-4",s===$.id?"opacity-100":"opacity-0")}),c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ge,{variant:"outline",className:"text-xs",children:$.code}),c.jsx("span",{children:$.title_de})]}),c.jsx("span",{className:"text-xs text-muted-foreground",children:$.category.title_de})]})]},$.id))})})]})})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs(ot,{htmlFor:"date",className:"text-sm font-medium",children:["Datum ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx(Pt,{id:"date",type:"date",value:a,onChange:$=>o($.target.value),required:!0})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(ot,{htmlFor:"role",className:"text-sm font-medium",children:["Rolle ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsxs(Ii,{value:l,onValueChange:u,required:!0,children:[c.jsx(Us,{children:c.jsx(Di,{placeholder:"Rolle auswählen"})}),c.jsxs(Hs,{children:[c.jsx(yt,{value:"responsible",children:"Verantwortlich (1.0x)"}),c.jsx(yt,{value:"instructing",children:"Instruierend (0.75x)"}),c.jsx(yt,{value:"assistant",children:"Assistent (0.5x)"})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"hospital",className:"text-sm font-medium",children:"Klinik/Spital"}),c.jsx(Pt,{id:"hospital",value:h,onChange:$=>f($.target.value),placeholder:"z.B. Universitätsspital Zürich"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"caseId",className:"text-sm font-medium",children:"Fall-ID"}),c.jsx(Pt,{id:"caseId",value:x,onChange:$=>v($.target.value),placeholder:"z.B. 2024-001234"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"supervisor",className:"text-sm font-medium",children:"Supervisor"}),c.jsx(Pt,{id:"supervisor",value:p,onChange:$=>m($.target.value),placeholder:"z.B. Dr. med. Max Mustermann"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"notes",className:"text-sm font-medium",children:"Notizen"}),c.jsx(uC,{id:"notes",value:y,onChange:$=>g($.target.value),placeholder:"Besonderheiten, Komplikationen, Lernpunkte...",rows:3})]}),l&&c.jsx("div",{className:"p-3 bg-muted rounded-medical",children:c.jsxs("div",{className:"text-sm",children:[c.jsx("strong",{children:"Gewichtung:"})," "," ",l==="responsible"&&"1.0 Punkte (Vollwertung)",l==="instructing"&&"0.75 Punkte (Instruierend)",l==="assistant"&&"0.5 Punkte (Assistenz)"]})}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(Z,{type:"button",variant:"outline",onClick:n,children:"Abbrechen"}),c.jsx(Z,{type:"submit",disabled:S,children:S?"Speichern...":"Speichern"})]})]})]})})},rG=Pv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),iy=b.forwardRef(({className:n,variant:e,...t},r)=>c.jsx("div",{ref:r,role:"alert",className:ee(rG({variant:e}),n),...t}));iy.displayName="Alert";const sG=b.forwardRef(({className:n,...e},t)=>c.jsx("h5",{ref:t,className:ee("mb-1 font-medium leading-none tracking-tight",n),...e}));sG.displayName="AlertTitle";const ay=b.forwardRef(({className:n,...e},t)=>c.jsx("div",{ref:t,className:ee("text-sm [&_p]:leading-relaxed",n),...e}));ay.displayName="AlertDescription";const iG=({modules:n,userPgyLevel:e})=>{const[t,r]=b.useState([]),[s,i]=b.useState([]),[a,o]=b.useState(!0),l=b.useCallback(async()=>{var f;try{o(!0);const{data:{user:p}}=await oe.auth.getUser();if(!p)return;const m=[];for(const y of n){const{data:g}=await oe.from("procedures").select(`
            id,
            code,
            title_de,
            min_required_by_pgy
          `).eq("category_id",y.id).eq("active",!0);for(const x of g||[]){const v=((f=x.min_required_by_pgy)==null?void 0:f[`pgy${e}`])||0;if(v>0){const{data:w}=await oe.from("procedure_logs").select("role_in_surgery, weighted_score").eq("procedure_id",x.id).eq("user_id",p.id),_=(w==null?void 0:w.reduce((C,A)=>C+(A.weighted_score||0),0))||0,S=Math.max(0,v-_);if(S>0){const C=_/v*100,A=S*(100-C)/100;m.push({procedure_id:x.id,procedure_title:x.title_de,procedure_code:x.code,module_name:y.title_de,required:v,current_weighted:_,gap:S,priority_score:A})}}}}m.sort((y,g)=>g.priority_score-y.priority_score),r(m.slice(0,10)),await u(p.id)}catch(p){console.error("Error in gap analysis:",p)}finally{o(!1)}},[n,e]);b.useEffect(()=>{l()},[l]);const u=async f=>{try{const p=[],m=new Date;for(let g=7;g>=0;g--){const x=new Date(m);x.setMonth(x.getMonth()-g*3);const v=x.getFullYear(),w=Math.floor(x.getMonth()/3)+1;p.push({year:v,quarter:w,label:`Q${w} ${v}`,startDate:new Date(v,(w-1)*3,1),endDate:new Date(v,w*3,0)})}const y=[];for(const g of p){const{data:x}=await oe.from("procedure_logs").select("weighted_score").eq("user_id",f).gte("performed_date",g.startDate.toISOString().split("T")[0]).lte("performed_date",g.endDate.toISOString().split("T")[0]),v=(x==null?void 0:x.reduce((_,S)=>_+(S.weighted_score||0),0))||0,w=(x==null?void 0:x.length)||0;y.push({...g,totalWeighted:v,procedureCount:w,intensity:Math.min(100,w/20*100)})}i(y)}catch(p){console.error("Error loading quarterly progress:",p)}},h=f=>f===0?"bg-gray-100":f<25?"bg-green-100":f<50?"bg-green-200":f<75?"bg-green-300":"bg-green-400";return a?c.jsx(ae,{className:"medical-card mb-8",children:c.jsx(ze,{className:"p-8",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ae,{className:"medical-card",children:[c.jsx(mt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(dx,{className:"w-5 h-5 text-orange-500"}),"Top Ausbildungslücken"]})}),c.jsx(ze,{children:t.length===0?c.jsx(iy,{children:c.jsx(ay,{children:"Keine größeren Lücken identifiziert. Alle erforderlichen Prozeduren sind auf gutem Weg!"})}):c.jsx("div",{className:"space-y-4",children:t.slice(0,5).map((f,p)=>c.jsxs("div",{className:"flex items-center justify-between p-4 border border-card-border rounded-medical",children:[c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs(ge,{variant:"outline",className:"text-xs",children:["#",p+1]}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:f.procedure_title}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.module_name," • ",f.procedure_code]})]})]})}),c.jsxs("div",{className:"text-right min-w-32",children:[c.jsxs("div",{className:"text-sm font-medium",children:[f.current_weighted.toFixed(1)," / ",f.required]}),c.jsxs("div",{className:"text-xs text-orange-600",children:["Lücke: ",f.gap.toFixed(1)," Punkte"]}),c.jsx($f,{value:f.current_weighted/f.required*100,className:"h-2 mt-1 w-20"})]})]},f.procedure_id))})})]}),c.jsxs(ae,{className:"medical-card",children:[c.jsx(mt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(Hi,{className:"w-5 h-5 text-blue-500"}),"Aktivitäts-Heatmap (Quartale)"]})}),c.jsxs(ze,{children:[c.jsx("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-2",children:s.map(f=>c.jsxs("div",{className:`
                  p-3 rounded-medical border text-center text-xs font-medium
                  ${h(f.intensity)}
                  hover:scale-105 transition-transform cursor-pointer
                `,title:`${f.label}: ${f.procedureCount} Eingriffe (${f.totalWeighted.toFixed(1)} Punkte)`,children:[c.jsx("div",{children:f.label}),c.jsx("div",{className:"text-xs opacity-75 mt-1",children:f.procedureCount})]},`${f.year}-${f.quarter}`))}),c.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[c.jsx("span",{children:"Weniger Aktivität"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-100 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-200 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-300 rounded"}),c.jsx("div",{className:"w-3 h-3 bg-green-400 rounded"})]}),c.jsx("span",{children:"Mehr Aktivität"})]})]})]}),n.length>0&&c.jsxs(ae,{className:"medical-card",children:[c.jsx(mt,{children:c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(i8,{className:"w-5 h-5 text-yellow-500"}),"Rollen-Balance Analyse"]})}),c.jsx(ze,{children:(()=>{const f=n.reduce((y,g)=>{var x;return y+(((x=g.progress)==null?void 0:x.responsible_count)||0)},0),p=n.reduce((y,g)=>{var x,v,w;return y+(((x=g.progress)==null?void 0:x.responsible_count)||0)+(((v=g.progress)==null?void 0:v.instructing_count)||0)+(((w=g.progress)==null?void 0:w.assistant_count)||0)},0),m=p>0?f/p*100:0;return m>=30?c.jsx(iy,{children:c.jsxs(ay,{children:["Ihre Rollen-Balance ist ausgezeichnet! ",m.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher durchgeführt."]})}):c.jsxs(iy,{children:[c.jsx(dx,{className:"h-4 w-4"}),c.jsxs(ay,{children:["Achtung: Nur ",m.toFixed(1),"% Ihrer Eingriffe als Verantwortlicher. Ziel: ≥30% für optimale FMH-Bewertung. Fokus auf eigenständige Eingriffe empfohlen."]})]})})()})]})]})},aG=({runId:n,summary:e,stagingData:t,onClose:r,onImportComplete:s})=>{const[i,a]=b.useState(!1),[o,l]=b.useState("summary"),u=m=>{switch(m.status){case"matched":return c.jsxs(ge,{variant:"default",className:"bg-success text-success-foreground",children:[c.jsx(lm,{className:"w-3 h-3 mr-1"}),m.match_method==="exact"?"Exakt":m.match_method==="alias"?"Alias":m.match_method==="fuzzy"?"Ähnlich":"Manuell"]});case"needs_review":return c.jsxs(ge,{variant:"destructive",children:[c.jsx(dx,{className:"w-3 h-3 mr-1"}),"Prüfung nötig"]});default:return c.jsx(ge,{variant:"secondary",children:"Unbekannt"})}},h=m=>m>=.95?"text-success":m>=.8?"text-warning":"text-destructive",f=async()=>{a(!0);try{console.log("🚀 Starting import commit...");const m=t.filter(v=>v.status==="matched"&&v.matched_proc_id);if(m.length===0){Le.error("Keine passenden Prozeduren zum Importieren gefunden.");return}const y=[];for(const v of m){const w={procedure_id:v.matched_proc_id,performed_date:e.standDate||new Date().toISOString().split("T")[0],hospital:`Importiert aus ${e.filename}`,notes:`PDF Import ${e.standDate||new Date().toLocaleDateString("de-DE")} - ${v.module_name}`};if(v.responsible>0)for(let _=0;_<v.responsible;_++)y.push({...w,role_in_surgery:"responsible",notes:`${w.notes} - Verantwortlich ${_+1}/${v.responsible}`});if(v.instructing>0)for(let _=0;_<v.instructing;_++)y.push({...w,role_in_surgery:"instructing",notes:`${w.notes} - Instruierend ${_+1}/${v.instructing}`});if(v.assistant>0)for(let _=0;_<v.assistant;_++)y.push({...w,role_in_surgery:"assistant",notes:`${w.notes} - Assistent ${_+1}/${v.assistant}`})}console.log(`📝 Creating ${y.length} procedure logs...`);const{error:g}=await oe.from("procedure_logs").insert(y);if(g)throw console.error("❌ Insert error:",g),g;const{error:x}=await oe.from("import_runs").update({status:"completed",finished_at:new Date().toISOString(),summary_json:{imported:y.length,matched:m.length,modules:e.modules.map(v=>v.name)}}).eq("id",n);if(x)throw console.error("❌ Update error:",x),x;console.log("✅ Import completed successfully!"),Le.success(`Import erfolgreich! ${y.length} Einträge wurden importiert.`),s()}catch(m){console.error("❌ Import failed:",m),Le.error(`Import fehlgeschlagen: ${m.message}`)}finally{a(!1)}},p=async()=>{try{await oe.from("import_runs").update({status:"cancelled"}).eq("id",n),Le.info("Import wurde abgebrochen."),r()}catch(m){console.error("Error cancelling import:",m),Le.error("Fehler beim Abbrechen des Imports.")}};return c.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[c.jsx(ae,{children:c.jsxs(mt,{children:[c.jsxs(wt,{className:"flex items-center gap-2",children:[c.jsx(ZF,{className:"w-5 h-5"}),"PDF Import Vorschau"]}),c.jsxs(fm,{children:["Datei: ",e.filename,e.standDate&&` • Stand: ${new Date(e.standDate).toLocaleDateString("de-DE")}`]})]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Z,{variant:o==="summary"?"default":"outline",onClick:()=>l("summary"),children:"Übersicht"}),c.jsxs(Z,{variant:o==="modules"?"default":"outline",onClick:()=>l("modules"),children:["Module (",e.modules.length,")"]}),c.jsxs(Z,{variant:o==="procedures"?"default":"outline",onClick:()=>l("procedures"),children:["Prozeduren (",e.totalProcedures,")"]})]}),o==="summary"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs(ae,{children:[c.jsx(mt,{className:"pb-2",children:c.jsx(wt,{className:"text-lg",children:"Gesamt"})}),c.jsxs(ze,{children:[c.jsx("div",{className:"text-2xl font-bold",children:e.totalProcedures}),c.jsx("p",{className:"text-muted-foreground",children:"Prozeduren erkannt"})]})]}),c.jsxs(ae,{children:[c.jsx(mt,{className:"pb-2",children:c.jsx(wt,{className:"text-lg text-success",children:"Zugeordnet"})}),c.jsxs(ze,{children:[c.jsx("div",{className:"text-2xl font-bold text-success",children:e.matched}),c.jsx("p",{className:"text-muted-foreground",children:"Automatisch zugeordnet"})]})]}),c.jsxs(ae,{children:[c.jsx(mt,{className:"pb-2",children:c.jsx(wt,{className:"text-lg text-warning",children:"Prüfung nötig"})}),c.jsxs(ze,{children:[c.jsx("div",{className:"text-2xl font-bold text-warning",children:e.needsReview}),c.jsx("p",{className:"text-muted-foreground",children:"Manuelle Prüfung"})]})]})]}),o==="modules"&&c.jsxs(ae,{children:[c.jsxs(mt,{children:[c.jsx(wt,{children:"Erkannte Module"}),c.jsx(fm,{children:"Übersicht der aus dem PDF extrahierten Module mit Summen"})]}),c.jsx(ze,{children:c.jsxs(Bf,{children:[c.jsx(zf,{children:c.jsxs(Ws,{children:[c.jsx(Me,{children:"Modul"}),c.jsx(Me,{className:"text-right",children:"Minimum"}),c.jsx(Me,{className:"text-right",children:"Verantwortlich"}),c.jsx(Me,{className:"text-right",children:"Instruierend"}),c.jsx(Me,{className:"text-right",children:"Assistent"}),c.jsx(Me,{className:"text-right",children:"Total"})]})}),c.jsx(Uf,{children:e.modules.map((m,y)=>c.jsxs(Ws,{children:[c.jsx(Ie,{className:"font-medium",children:m.name}),c.jsx(Ie,{className:"text-right",children:m.minimum}),c.jsx(Ie,{className:"text-right",children:m.responsible}),c.jsx(Ie,{className:"text-right",children:m.instructing}),c.jsx(Ie,{className:"text-right",children:m.assistant}),c.jsx(Ie,{className:"text-right font-semibold",children:m.total})]},y))})]})})]}),o==="procedures"&&c.jsxs(ae,{children:[c.jsxs(mt,{children:[c.jsx(wt,{children:"Prozeduren Details"}),c.jsx(fm,{children:"Alle erkannten Prozeduren mit Zuordnungsstatus"})]}),c.jsx(ze,{children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs(Bf,{children:[c.jsx(zf,{children:c.jsxs(Ws,{children:[c.jsx(Me,{children:"Prozedur"}),c.jsx(Me,{children:"Modul"}),c.jsx(Me,{children:"Status"}),c.jsx(Me,{children:"Zugeordnet zu"}),c.jsx(Me,{className:"text-right",children:"V"}),c.jsx(Me,{className:"text-right",children:"I"}),c.jsx(Me,{className:"text-right",children:"A"}),c.jsx(Me,{className:"text-right",children:"Total"})]})}),c.jsx(Uf,{children:t.map(m=>{var y;return c.jsxs(Ws,{children:[c.jsx(Ie,{className:"font-medium",children:m.proc_name}),c.jsx(Ie,{className:"text-sm text-muted-foreground",children:m.module_name}),c.jsx(Ie,{children:u(m)}),c.jsx(Ie,{children:(y=m.procedures)!=null&&y.title_de?c.jsxs("div",{children:[c.jsx("div",{className:"font-medium",children:m.procedures.title_de}),m.match_confidence<1&&c.jsxs("div",{className:`text-xs ${h(m.match_confidence)}`,children:[(m.match_confidence*100).toFixed(0),"% Übereinstimmung"]})]}):c.jsx("span",{className:"text-muted-foreground",children:"Keine Zuordnung"})}),c.jsx(Ie,{className:"text-right",children:m.responsible}),c.jsx(Ie,{className:"text-right",children:m.instructing}),c.jsx(Ie,{className:"text-right",children:m.assistant}),c.jsx(Ie,{className:"text-right font-semibold",children:m.total})]},m.id)})})]})})})]}),c.jsxs("div",{className:"flex justify-between pt-4",children:[c.jsx(Z,{variant:"outline",onClick:p,children:"Abbrechen"}),c.jsxs("div",{className:"flex gap-2",children:[e.needsReview>0&&c.jsxs(Z,{variant:"outline",className:"flex items-center gap-2",children:[c.jsx(NE,{className:"w-4 h-4"}),e.needsReview," Prozeduren bearbeiten"]}),c.jsxs(Z,{onClick:f,disabled:i||e.matched===0,className:"flex items-center gap-2",children:[c.jsx(bw,{className:"w-4 h-4"}),i?"Importiere...":`${e.matched} Prozeduren importieren`]})]})]})]})},Hn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),eS=[.001,0,0,.001,0,0],i1=1.35,Mr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Po={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pI="pdfjs_internal_editor_",ye={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},De={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},oG={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},An={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},oy={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Lt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Nd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Gw={ERRORS:0,WARNINGS:1,INFOS:5},Ex={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},R0={moveTo:0,lineTo:1,curveTo:2,closePath:3},lG={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let qw=Gw.WARNINGS;function cG(n){Number.isInteger(n)&&(qw=n)}function uG(){return qw}function Yw(n){qw>=Gw.INFOS&&console.log(`Info: ${n}`)}function xe(n){qw>=Gw.WARNINGS&&console.log(`Warning: ${n}`)}function Ze(n){throw new Error(n)}function Bt(n,e){n||Ze(e)}function dG(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function mI(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=gG(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return dG(r)?r:null}function gI(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&mI(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Pe(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const ad=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class NN extends ad{constructor(e,t){super(e,"PasswordException"),this.code=t}}class a1 extends ad{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class tS extends ad{constructor(e){super(e,"InvalidPDFException")}}class Cx extends ad{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class hG extends ad{constructor(e){super(e,"FormatError")}}class Ul extends ad{constructor(e){super(e,"AbortException")}}function vI(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Ze("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function Hv(n){typeof n!="string"&&Ze("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function fG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function pG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function mG(){try{return new Function(""),!0}catch{return!1}}class bn{static get isLittleEndian(){return Pe(this,"isLittleEndian",pG())}static get isEvalSupported(){return Pe(this,"isEvalSupported",mG())}static get isOffscreenCanvasSupported(){return Pe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Pe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Pe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Pe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const o1=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Ka,ly,nS;class de{static makeHexColor(e,t,r){return`#${o1[e]}${o1[t]}${o1[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5];for(let h=0;h<6;h+=2){const f=e[r+h],p=e[r+h+1];e[r+h]=f*s+p*a+l,e[r+h+1]=f*i+p*o+u}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],a=t[2],o=t[3],l=t[4],u=t[5],h=e[0],f=e[1],p=e[2],m=e[3];let y=s*h+l,g=y,x=s*p+l,v=x,w=o*f+u,_=w,S=o*m+u,C=S;if(i!==0||a!==0){const A=i*h,k=i*p,j=a*f,T=a*m;y+=j,v+=j,x+=T,g+=T,w+=A,C+=A,S+=k,_+=k}r[0]=Math.min(r[0],y,x,g,v),r[1]=Math.min(r[1],w,S,_,C),r[2]=Math.max(r[2],y,x,g,v),r[3]=Math.max(r[3],w,S,_,C)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],a=e[3],o=r**2+s**2,l=r*i+s*a,u=i**2+a**2,h=(o+u)/2,f=Math.sqrt(h**2-(o*u-l**2));t[0]=Math.sqrt(h+f||1),t[1]=Math.sqrt(h-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,a,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l),P(this,Ka,nS).call(this,e,r,i,o,t,s,a,l,3*(-e+3*(r-i)+o),6*(e-2*r+i),3*(r-e),u),P(this,Ka,nS).call(this,e,r,i,o,t,s,a,l,3*(-t+3*(s-a)+l),6*(t-2*s+a),3*(s-t),u)}}Ka=new WeakSet,ly=function(e,t,r,s,i,a,o,l,u,h){if(u<=0||u>=1)return;const f=1-u,p=u*u,m=p*u,y=f*(f*(f*e+3*u*t)+3*p*r)+m*s,g=f*(f*(f*i+3*u*a)+3*p*o)+m*l;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],g),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],g)},nS=function(e,t,r,s,i,a,o,l,u,h,f,p){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&P(this,Ka,ly).call(this,e,t,r,s,i,a,o,l,-f/h,p);return}const m=h**2-4*f*u;if(m<0)return;const y=Math.sqrt(m),g=2*u;P(this,Ka,ly).call(this,e,t,r,s,i,a,o,l,(-h+y)/g,p),P(this,Ka,ly).call(this,e,t,r,s,i,a,o,l,(-h-y)/g,p)},N(de,Ka);function gG(n){return decodeURIComponent(escape(n))}let l1=null,PN=null;function vG(n){return l1||(l1=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,PN=new Map([["ﬅ","ſt"]])),n.replaceAll(l1,(e,t,r)=>t?t.normalize("NFKC"):PN.get(r))}function yI(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),vI(n)}const fC="pdfjs_internal_id_";function yG(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const a=i.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function Wn(n,e,t){return Math.min(Math.max(n,e),t)}function xI(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(vI(n))}function xG(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Hv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const sa="http://www.w3.org/2000/svg",vc=class vc{};Y(vc,"CSS",96),Y(vc,"PDF",72),Y(vc,"PDF_TO_CSS_UNITS",vc.CSS/vc.PDF);let Hl=vc;async function Wv(n,e="text"){if(Rp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Vv{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=a,r*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,f,p,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,f=0,p=0,m=1;break;case 90:h=0,f=1,p=1,m=0;break;case 270:h=0,f=-1,p=-1,m=0;break;case 0:h=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let y,g,x,v;h===0?(y=Math.abs(u-e[1])*r+i,g=Math.abs(l-e[0])*r+a,x=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(y=Math.abs(l-e[0])*r+i,g=Math.abs(u-e[1])*r+a,x=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[h*r,f*r,p*r,m*r,y-h*r*l-p*r*u,g-f*r*l-m*r*u],this.width=x,this.height=v}get rawDims(){const e=this.viewBox;return Pe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Vv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return de.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];de.applyTransform(t,this.transform);const r=[e[2],e[3]];return de.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return de.applyInverseTransform(r,this.transform),r}}class pC extends ad{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Kw(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function mC(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function wG(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function bG(n,e="document.pdf"){if(typeof n!="string")return e;if(Kw(n))return xe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},i=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(i.test(a))return s(a);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const u of o)if(i.test(u))return s(u);const l=Array.from(r.searchParams.keys()).reverse();for(const u of l)if(i.test(u))return s(u)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return s(l[0])}return e}class jN{constructor(){Y(this,"started",Object.create(null));Y(this,"times",[])}time(e){e in this.started&&xe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||xe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Rp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function fs(n){n.preventDefault()}function Ot(n){n.preventDefault(),n.stopPropagation()}function _G(n){console.log("Deprecated API usage: "+n)}var Gm;class Ax{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;d(this,Gm)||E(this,Gm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=d(this,Gm).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,u==="-"?(a+=h,o+=f):u==="+"&&(a-=h,o-=f),new Date(Date.UTC(r,s,i,a,o,l))}}Gm=new WeakMap,N(Ax,Gm);function SG(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Vv({viewBox:i,userUnit:1,scale:e,rotation:t})}function Xw(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(xe(`Not a valid color format: "${n}"`),[0,0,0])}function EG(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Xw(r))}e.remove()}function vt(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function ri(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function Qu(n,e,t=!1,r=!0){if(e instanceof Vv){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,o=bn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${i}px`,h=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=h,a.height=f):(a.width=f,a.height=h)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Yi{constructor(){const{pixelRatio:e}=Yi;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let a=1/0,o=1/0,l=1/0;r=Yi.capPixels(r,i),r>0&&(a=Math.sqrt(r/(e*t))),s!==-1&&(o=s/e,l=s/t);const u=Math.min(a,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const rS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Do,Lo,Xr,fa,qm,xh,wh,Ym,$x,wI,xn,bI,_I,Pd,Mp;const ca=class ca{constructor(e){N(this,xn);N(this,Do,null);N(this,Lo,null);N(this,Xr);N(this,fa,null);N(this,qm,null);N(this,xh,null);N(this,wh,null);E(this,Xr,e),d(ca,Ym)||E(ca,Ym,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=E(this,Do,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=d(this,Xr)._uiManager._signal;e.addEventListener("contextmenu",fs,{signal:t}),e.addEventListener("pointerdown",P(ca,$x,wI),{signal:t});const r=E(this,fa,document.createElement("div"));r.className="buttons",e.append(r);const s=d(this,Xr).toolbarPosition;if(s){const{style:i}=e,a=d(this,Xr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return d(this,Do)}hide(){var e;d(this,Do).classList.add("hidden"),(e=d(this,Lo))==null||e.hideDropdown()}show(){var e,t;d(this,Do).classList.remove("hidden"),(e=d(this,qm))==null||e.shown(),(t=d(this,xh))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=d(this,Xr),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",d(ca,Ym)[e]),P(this,xn,Pd).call(this,r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),d(this,fa).append(r)}async addAltText(e){const t=await e.render();P(this,xn,Pd).call(this,t),d(this,fa).append(t,d(this,xn,Mp)),E(this,qm,e)}addComment(e){if(d(this,xh))return;const t=e.render();t&&(P(this,xn,Pd).call(this,t),d(this,fa).prepend(t,d(this,xn,Mp)),E(this,xh,e),e.toolbar=this)}addColorPicker(e){if(d(this,Lo))return;E(this,Lo,e);const t=e.renderButton();P(this,xn,Pd).call(this,t),d(this,fa).append(t,d(this,xn,Mp))}async addEditSignatureButton(e){const t=E(this,wh,await e.renderEditButton(d(this,Xr)));P(this,xn,Pd).call(this,t),d(this,fa).append(t,d(this,xn,Mp))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}updateEditSignatureButton(e){d(this,wh)&&(d(this,wh).title=e)}remove(){var e;d(this,Do).remove(),(e=d(this,Lo))==null||e.destroy(),E(this,Lo,null)}};Do=new WeakMap,Lo=new WeakMap,Xr=new WeakMap,fa=new WeakMap,qm=new WeakMap,xh=new WeakMap,wh=new WeakMap,Ym=new WeakMap,$x=new WeakSet,wI=function(e){e.stopPropagation()},xn=new WeakSet,bI=function(e){d(this,Xr)._focusEventsAllowed=!1,Ot(e)},_I=function(e){d(this,Xr)._focusEventsAllowed=!0,Ot(e)},Pd=function(e){const t=d(this,Xr)._uiManager._signal;e.addEventListener("focusin",P(this,xn,bI).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",P(this,xn,_I).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",fs,{signal:t})},Mp=function(){const e=document.createElement("div");return e.className="divider",e},N(ca,$x),N(ca,Ym,null);let sS=ca;var Km,jc,Tc,Wl,SI,EI,CI;class CG{constructor(e){N(this,Wl);N(this,Km,null);N(this,jc,null);N(this,Tc);E(this,Tc,e)}show(e,t,r){const[s,i]=P(this,Wl,EI).call(this,t,r),{style:a}=d(this,jc)||E(this,jc,P(this,Wl,SI).call(this));e.append(d(this,jc)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,jc).remove()}}Km=new WeakMap,jc=new WeakMap,Tc=new WeakMap,Wl=new WeakSet,SI=function(){const e=E(this,jc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",fs,{signal:d(this,Tc)._signal});const t=E(this,Km,document.createElement("div"));return t.className="buttons",e.append(t),P(this,Wl,CI).call(this),e},EI=function(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const o=i.x+(t?i.width:0);if(a>r){s=o,r=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,r]},CI=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=d(this,Tc)._signal;e.addEventListener("contextmenu",fs,{signal:r}),e.addEventListener("click",()=>{d(this,Tc).highlightSelection("floating_button")},{signal:r}),d(this,Km).append(e)};function AI(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var Bx;class AG{constructor(){N(this,Bx,0)}get id(){return`${pI}${Zt(this,Bx)._++}`}}Bx=new WeakMap;var bh,Xm,Pn,_h,cy;const BC=class BC{constructor(){N(this,_h);N(this,bh,yI());N(this,Xm,0);N(this,Pn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Pe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return P(this,_h,cy).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return P(this,_h,cy).call(this,e,e)}async getFromBlob(e,t){const r=await t;return P(this,_h,cy).call(this,e,r)}async getFromId(e){d(this,Pn)||E(this,Pn,new Map);const t=d(this,Pn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){d(this,Pn)||E(this,Pn,new Map);let r=d(this,Pn).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${d(this,bh)}_${Zt(this,Xm)._++}`,refCounter:1,isSvg:!1},d(this,Pn).set(e,r),d(this,Pn).set(r.id,r),r}getSvgUrl(e){const t=d(this,Pn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;d(this,Pn)||E(this,Pn,new Map);const t=d(this,Pn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${d(this,bh)}_`)}};bh=new WeakMap,Xm=new WeakMap,Pn=new WeakMap,_h=new WeakSet,cy=async function(e,t){d(this,Pn)||E(this,Pn,new Map);let r=d(this,Pn).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${d(this,bh)}_${Zt(this,Xm)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await Wv(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=BC._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,h)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,u()},a.onload=async()=>{const f=r.svgUrl=a.result;o.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=a.onerror=h});a.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){xe(s),r=null}return d(this,Pn).set(e,r),r&&d(this,Pn).set(r.id,r),r};let iS=BC;var kt,Oo,Qm,gt;class kG{constructor(e=128){N(this,kt,[]);N(this,Oo,!1);N(this,Qm);N(this,gt,-1);E(this,Qm,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),d(this,Oo))return;const l={cmd:e,undo:t,post:r,type:i};if(d(this,gt)===-1){d(this,kt).length>0&&(d(this,kt).length=0),E(this,gt,0),d(this,kt).push(l);return}if(a&&d(this,kt)[d(this,gt)].type===i){o&&(l.undo=d(this,kt)[d(this,gt)].undo),d(this,kt)[d(this,gt)]=l;return}const u=d(this,gt)+1;u===d(this,Qm)?d(this,kt).splice(0,1):(E(this,gt,u),u<d(this,kt).length&&d(this,kt).splice(u)),d(this,kt).push(l)}undo(){if(d(this,gt)===-1)return;E(this,Oo,!0);const{undo:e,post:t}=d(this,kt)[d(this,gt)];e(),t==null||t(),E(this,Oo,!1),E(this,gt,d(this,gt)-1)}redo(){if(d(this,gt)<d(this,kt).length-1){E(this,gt,d(this,gt)+1),E(this,Oo,!0);const{cmd:e,post:t}=d(this,kt)[d(this,gt)];e(),t==null||t(),E(this,Oo,!1)}}hasSomethingToUndo(){return d(this,gt)!==-1}hasSomethingToRedo(){return d(this,gt)<d(this,kt).length-1}cleanType(e){if(d(this,gt)!==-1){for(let t=d(this,gt);t>=0;t--)if(d(this,kt)[t].type!==e){d(this,kt).splice(t+1,d(this,gt)-t),E(this,gt,t);return}d(this,kt).length=0,E(this,gt,-1)}}destroy(){E(this,kt,null)}}kt=new WeakMap,Oo=new WeakMap,Qm=new WeakMap,gt=new WeakMap;var zx,kI;class Gv{constructor(e){N(this,zx);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=bn.platform;for(const[r,s,i={}]of e)for(const a of r){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(P(this,zx,kI).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=r;o&&!o(e,t)||(s.bind(e,...a,t)(),i||Ot(t))}}zx=new WeakSet,kI=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ux=class Ux{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return EG(e),Pe(this,"_colors",e)}convert(e){const t=Xw(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return Ux._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?de.makeHexColor(...t):e}};Y(Ux,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let aS=Ux;var Sh,yr,qt,un,Eh,pa,Ch,Qr,Rc,Fo,$o,Ah,Mc,hi,Ns,Ic,Jm,Zm,kh,eg,fi,Bo,Nh,zo,pi,Hx,Uo,tg,Ho,Dc,Ph,Wo,ng,en,Ge,ma,Vo,Go,rg,sg,qo,mi,ga,ig,ag,Jr,Q,uy,oS,NI,PI,dy,jI,TI,RI,lS,MI,cS,uS,II,On,ia,DI,LI,dS,OI,Ip,hS;const Xd=class Xd{constructor(e,t,r,s,i,a,o,l,u,h,f,p,m,y,g,x){N(this,Q);N(this,Sh,new AbortController);N(this,yr,null);N(this,qt,new Map);N(this,un,new Map);N(this,Eh,null);N(this,pa,null);N(this,Ch,null);N(this,Qr,new kG);N(this,Rc,null);N(this,Fo,null);N(this,$o,null);N(this,Ah,0);N(this,Mc,new Set);N(this,hi,null);N(this,Ns,null);N(this,Ic,new Set);Y(this,"_editorUndoBar",null);N(this,Jm,!1);N(this,Zm,!1);N(this,kh,!1);N(this,eg,null);N(this,fi,null);N(this,Bo,null);N(this,Nh,null);N(this,zo,!1);N(this,pi,null);N(this,Hx,new AG);N(this,Uo,!1);N(this,tg,!1);N(this,Ho,null);N(this,Dc,null);N(this,Ph,null);N(this,Wo,null);N(this,ng,null);N(this,en,ye.NONE);N(this,Ge,new Set);N(this,ma,null);N(this,Vo,null);N(this,Go,null);N(this,rg,null);N(this,sg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});N(this,qo,[0,0]);N(this,mi,null);N(this,ga,null);N(this,ig,null);N(this,ag,null);N(this,Jr,null);const v=this._signal=d(this,Sh).signal;E(this,ga,e),E(this,ig,t),E(this,ag,r),E(this,Eh,s),E(this,Rc,i),E(this,Vo,a),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:v}),P(this,Q,jI).call(this),P(this,Q,II).call(this),P(this,Q,lS).call(this),E(this,pa,l.annotationStorage),E(this,eg,l.filterFactory),E(this,Go,u),E(this,Nh,h||null),E(this,Jm,f),E(this,Zm,p),E(this,kh,m),E(this,ng,y||null),this.viewParameters={realScale:Hl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=x!==!1}static get _keyboardManager(){const e=Xd.prototype,t=a=>d(a,ga).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new Gv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,ga).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&d(a,ga).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,a,o,l,u;(e=d(this,Jr))==null||e.resolve(),E(this,Jr,null),(t=d(this,Sh))==null||t.abort(),E(this,Sh,null),this._signal=null;for(const h of d(this,un).values())h.destroy();d(this,un).clear(),d(this,qt).clear(),d(this,Ic).clear(),(r=d(this,Wo))==null||r.clear(),E(this,yr,null),d(this,Ge).clear(),d(this,Qr).destroy(),(s=d(this,Eh))==null||s.destroy(),(i=d(this,Rc))==null||i.destroy(),(a=d(this,Vo))==null||a.destroy(),(o=d(this,pi))==null||o.hide(),E(this,pi,null),(l=d(this,Ph))==null||l.destroy(),E(this,Ph,null),d(this,fi)&&(clearTimeout(d(this,fi)),E(this,fi,null)),d(this,mi)&&(clearTimeout(d(this,mi)),E(this,mi,null)),(u=this._editorUndoBar)==null||u.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return d(this,ng)}get useNewAltTextFlow(){return d(this,Zm)}get useNewAltTextWhenAddingImage(){return d(this,kh)}get hcmFilter(){return Pe(this,"hcmFilter",d(this,Go)?d(this,eg).addHCMFilter(d(this,Go).foreground,d(this,Go).background):"none")}get direction(){return Pe(this,"direction",getComputedStyle(d(this,ga)).direction)}get _highlightColors(){return Pe(this,"_highlightColors",d(this,Nh)?new Map(d(this,Nh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Pe(this,"highlightColors",null);const t=new Map,r=!!d(this,Go);for(const[s,i]of e){const a=s.endsWith("_HCM");if(r&&a){t.set(s.replace("_HCM",""),i);continue}!r&&!a&&t.set(s,i)}return Pe(this,"highlightColors",t)}get highlightColorNames(){return Pe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),E(this,$o,e)}setMainHighlightColorPicker(e){E(this,Ph,e)}editAltText(e,t=!1){var r;(r=d(this,Eh))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!d(this,Rc)}editComment(e,t){var r;(r=d(this,Rc))==null||r.open(this,e,t)}getSignature(e){var t;(t=d(this,Vo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return d(this,Vo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":E(this,kh,t);break}}onPageChanging({pageNumber:e}){E(this,Ah,e-1)}focusMainContainer(){d(this,ga).focus()}findParent(e,t){for(const r of d(this,un).values()){const{x:s,y:i,width:a,height:o}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return r}return null}disableUserSelect(e=!1){d(this,ig).classList.toggle("noUserSelect",e)}addShouldRescale(e){d(this,Ic).add(e)}removeShouldRescale(e){d(this,Ic).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Hl.PDF_TO_CSS_UNITS;for(const r of d(this,Ic))r.onScaleChanging();(t=d(this,$o))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a}=t,o=t.toString(),u=P(this,Q,uy).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const f=P(this,Q,oS).call(this,u),p=d(this,en)===ye.NONE,m=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:a,text:o}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(ye.HIGHLIGHT,m);return}m()}addToAnnotationStorage(e){!e.isEmpty()&&d(this,pa)&&!d(this,pa).has(e.id)&&d(this,pa).setValue(e.id,e)}a11yAlert(e,t=null){const r=d(this,ag);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,zo)&&(E(this,zo,!1),P(this,Q,dy).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of d(this,Ge))if(t.div.contains(e)){E(this,Dc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!d(this,Dc))return;const[e,t]=d(this,Dc);E(this,Dc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){P(this,Q,lS).call(this),P(this,Q,cS).call(this)}removeEditListeners(){P(this,Q,MI).call(this),P(this,Q,uS).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of d(this,Ns))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of d(this,Ns))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=d(this,yr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of d(this,Ge)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of d(this,Ns))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){xe(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const u=await s.deserialize(l);if(!u)return;i.push(u)}const a=()=>{for(const l of i)P(this,Q,dS).call(this,l);P(this,Q,hS).call(this,i)},o=()=>{for(const l of i)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){xe(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,en)!==ye.NONE&&!this.isEditorHandlingKeyboard&&Xd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,zo)&&(E(this,zo,!1),P(this,Q,dy).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(P(this,Q,TI).call(this),P(this,Q,cS).call(this),P(this,Q,On).call(this,{isEditing:d(this,en)!==ye.NONE,isEmpty:P(this,Q,Ip).call(this),hasSomethingToUndo:d(this,Qr).hasSomethingToUndo(),hasSomethingToRedo:d(this,Qr).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,Q,RI).call(this),P(this,Q,uS).call(this),P(this,Q,On).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!d(this,Ns)){E(this,Ns,e);for(const t of d(this,Ns))P(this,Q,ia).call(this,t.defaultPropertiesToUpdate)}}getId(){return d(this,Hx).id}get currentLayer(){return d(this,un).get(d(this,Ah))}getLayer(e){return d(this,un).get(e)}get currentPageIndex(){return d(this,Ah)}addLayer(e){d(this,un).set(e.pageIndex,e),d(this,Uo)?e.enable():e.disable()}removeLayer(e){d(this,un).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){var a,o,l;if(d(this,en)!==e&&!(d(this,Jr)&&(await d(this,Jr).promise,!d(this,Jr)))){if(E(this,Jr,Promise.withResolvers()),(a=d(this,$o))==null||a.commitOrRemove(),E(this,en,e),e===ye.NONE){this.setEditingState(!1),P(this,Q,LI).call(this),(o=this._editorUndoBar)==null||o.hide(),d(this,Jr).resolve();return}e===ye.SIGNATURE&&await((l=d(this,Vo))==null?void 0:l.loadSignatures()),this.setEditingState(!0),await P(this,Q,DI).call(this),this.unselectAll();for(const u of d(this,un).values())u.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),d(this,Jr).resolve();return}for(const u of d(this,qt).values())u.annotationElementId===t||u.id===t?(this.setSelected(u),i?u.editComment():s&&u.enterInEditMode()):u.unselect();d(this,Jr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==d(this,en)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(d(this,Ns)){switch(e){case De.CREATE:this.currentLayer.addNewEditor(t);return;case De.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,rg)||E(this,rg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of d(this,Ge))r.updateParams(e,t);else for(const r of d(this,Ns))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const a of d(this,qt).values())a.editorType===e&&a.show(t);(((i=d(this,rg))==null?void 0:i.get(De.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,Q,ia).call(this,[[De.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(d(this,tg)!==e){E(this,tg,e);for(const t of d(this,un).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of d(this,qt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return d(this,qt).get(e)}addEditor(e){d(this,qt).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(d(this,fi)&&clearTimeout(d(this,fi)),E(this,fi,setTimeout(()=>{this.focusMainContainer(),E(this,fi,null)},0))),d(this,qt).delete(e.id),e.annotationElementId&&((t=d(this,Wo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!d(this,Mc).has(e.annotationElementId))&&((r=d(this,pa))==null||r.remove(e.id))}addDeletedAnnotationElement(e){d(this,Mc).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return d(this,Mc).has(e)}removeDeletedAnnotationElement(e){d(this,Mc).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){d(this,yr)!==e&&(E(this,yr,e),e&&P(this,Q,ia).call(this,e.propertiesToUpdate))}updateUI(e){d(this,Q,OI)===e&&P(this,Q,ia).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){P(this,Q,ia).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(d(this,Ge).has(e)){d(this,Ge).delete(e),e.unselect(),P(this,Q,On).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,Ge).add(e),e.select(),P(this,Q,ia).call(this,e.propertiesToUpdate),P(this,Q,On).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=d(this,$o))==null||t.commitOrRemove();for(const r of d(this,Ge))r!==e&&r.unselect();d(this,Ge).clear(),d(this,Ge).add(e),e.select(),P(this,Q,ia).call(this,e.propertiesToUpdate),P(this,Q,On).call(this,{hasSelectedEditor:!0})}isSelected(e){return d(this,Ge).has(e)}get firstSelectedEditor(){return d(this,Ge).values().next().value}unselect(e){e.unselect(),d(this,Ge).delete(e),P(this,Q,On).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,Ge).size!==0}get isEnterHandled(){return d(this,Ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;d(this,Qr).undo(),P(this,Q,On).call(this,{hasSomethingToUndo:d(this,Qr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,Q,Ip).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){d(this,Qr).redo(),P(this,Q,On).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,Qr).hasSomethingToRedo(),isEmpty:P(this,Q,Ip).call(this)})}addCommands(e){d(this,Qr).add(e),P(this,Q,On).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,Q,Ip).call(this)})}cleanUndoStack(e){d(this,Qr).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...d(this,Ge)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const a of t)P(this,Q,dS).call(this,a)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=d(this,yr))==null||e.commitOrRemove()}hasSomethingToControl(){return d(this,yr)||this.hasSelection}selectAll(){for(const e of d(this,Ge))e.commit();P(this,Q,hS).call(this,d(this,qt).values())}unselectAll(){var e;if(!(d(this,yr)&&(d(this,yr).commitOrRemove(),d(this,en)!==ye.NONE))&&!((e=d(this,$o))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of d(this,Ge))t.unselect();d(this,Ge).clear(),P(this,Q,On).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;d(this,qo)[0]+=e,d(this,qo)[1]+=t;const[s,i]=d(this,qo),a=[...d(this,Ge)],o=1e3;d(this,mi)&&clearTimeout(d(this,mi)),E(this,mi,setTimeout(()=>{E(this,mi,null),d(this,qo)[0]=d(this,qo)[1]=0,this.addCommands({cmd:()=>{for(const l of a)d(this,qt).has(l.id)&&(l.translateInPage(s,i),l.translationDone())},undo:()=>{for(const l of a)d(this,qt).has(l.id)&&(l.translateInPage(-s,-i),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),E(this,hi,new Map);for(const e of d(this,Ge))d(this,hi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,hi))return!1;this.disableUserSelect(!1);const e=d(this,hi);E(this,hi,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const r=(s,i,a,o)=>{if(d(this,qt).has(s.id)){const l=d(this,un).get(o);l?s._setParentAndPosition(l,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)r(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)r(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(d(this,hi))for(const r of d(this,hi).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||d(this,Ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return d(this,yr)===e}getActive(){return d(this,yr)}getMode(){return d(this,en)}get imageManager(){return Pe(this,"imageManager",new iS)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,f,p)=>({x:(h-s)/a,y:1-(u+f-r)/i,width:p/a,height:f/i});break;case"180":o=(u,h,f,p)=>({x:1-(u+f-r)/i,y:1-(h+p-s)/a,width:f/i,height:p/a});break;case"270":o=(u,h,f,p)=>({x:1-(h+p-s)/a,y:(u-r)/i,width:p/a,height:f/i});break;default:o=(u,h,f,p)=>({x:(u-r)/i,y:(h-s)/a,width:f/i,height:p/a});break}const l=[];for(let u=0,h=t.rangeCount;u<h;u++){const f=t.getRangeAt(u);if(!f.collapsed)for(const{x:p,y:m,width:y,height:g}of f.getClientRects())y===0||g===0||l.push(o(p,m,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(d(this,Ch)||E(this,Ch,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=d(this,Ch))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=d(this,Ch))==null?void 0:s.get(e.data.id);if(!t)return;const r=d(this,pa).getRawValue(t);r&&(d(this,en)===ye.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=d(this,Wo))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),d(this,Wo).delete(e))}addMissingCanvas(e,t){(d(this,Wo)||E(this,Wo,new Map)).set(e,t)}};Sh=new WeakMap,yr=new WeakMap,qt=new WeakMap,un=new WeakMap,Eh=new WeakMap,pa=new WeakMap,Ch=new WeakMap,Qr=new WeakMap,Rc=new WeakMap,Fo=new WeakMap,$o=new WeakMap,Ah=new WeakMap,Mc=new WeakMap,hi=new WeakMap,Ns=new WeakMap,Ic=new WeakMap,Jm=new WeakMap,Zm=new WeakMap,kh=new WeakMap,eg=new WeakMap,fi=new WeakMap,Bo=new WeakMap,Nh=new WeakMap,zo=new WeakMap,pi=new WeakMap,Hx=new WeakMap,Uo=new WeakMap,tg=new WeakMap,Ho=new WeakMap,Dc=new WeakMap,Ph=new WeakMap,Wo=new WeakMap,ng=new WeakMap,en=new WeakMap,Ge=new WeakMap,ma=new WeakMap,Vo=new WeakMap,Go=new WeakMap,rg=new WeakMap,sg=new WeakMap,qo=new WeakMap,mi=new WeakMap,ga=new WeakMap,ig=new WeakMap,ag=new WeakMap,Jr=new WeakMap,Q=new WeakSet,uy=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},oS=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of d(this,un).values())if(r.hasTextLayer(e))return r;return null},NI=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=P(this,Q,uy).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(d(this,pi)||E(this,pi,new CG(this)),d(this,pi).show(r,s,this.direction==="ltr"))},PI=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){d(this,ma)&&((i=d(this,pi))==null||i.hide(),E(this,ma,null),P(this,Q,On).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===d(this,ma))return;const s=P(this,Q,uy).call(this,e).closest(".textLayer");if(!s){d(this,ma)&&((a=d(this,pi))==null||a.hide(),E(this,ma,null),P(this,Q,On).call(this,{hasSelectedText:!1}));return}if((o=d(this,pi))==null||o.hide(),E(this,ma,t),P(this,Q,On).call(this,{hasSelectedText:!0}),!(d(this,en)!==ye.HIGHLIGHT&&d(this,en)!==ye.NONE)&&(d(this,en)===ye.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),E(this,zo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,en)===ye.HIGHLIGHT?P(this,Q,oS).call(this,s):null;l==null||l.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),f=p=>{p.type==="pointerup"&&p.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),p.type==="pointerup"&&P(this,Q,dy).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:h}),window.addEventListener("blur",f,{signal:h})}},dy=function(e=""){d(this,en)===ye.HIGHLIGHT?this.highlightSelection(e):d(this,Jm)&&P(this,Q,NI).call(this)},jI=function(){document.addEventListener("selectionchange",P(this,Q,PI).bind(this),{signal:this._signal})},TI=function(){if(d(this,Bo))return;E(this,Bo,new AbortController);const e=this.combinedSignal(d(this,Bo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},RI=function(){var e;(e=d(this,Bo))==null||e.abort(),E(this,Bo,null)},lS=function(){if(d(this,Ho))return;E(this,Ho,new AbortController);const e=this.combinedSignal(d(this,Ho));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},MI=function(){var e;(e=d(this,Ho))==null||e.abort(),E(this,Ho,null)},cS=function(){if(d(this,Fo))return;E(this,Fo,new AbortController);const e=this.combinedSignal(d(this,Fo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},uS=function(){var e;(e=d(this,Fo))==null||e.abort(),E(this,Fo,null)},II=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},On=function(e){Object.entries(e).some(([r,s])=>d(this,sg)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,sg),e)}),d(this,en)===ye.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,Q,ia).call(this,[[De.HIGHLIGHT_FREE,!0]]))},ia=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},DI=async function(){if(!d(this,Uo)){E(this,Uo,!0);const e=[];for(const t of d(this,un).values())e.push(t.enable());await Promise.all(e);for(const t of d(this,qt).values())t.enable()}},LI=function(){if(this.unselectAll(),d(this,Uo)){E(this,Uo,!1);for(const e of d(this,un).values())e.disable();for(const e of d(this,qt).values())e.disable()}},dS=function(e){const t=d(this,un).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},OI=function(){let e=null;for(e of d(this,Ge));return e},Ip=function(){if(d(this,qt).size===0)return!0;if(d(this,qt).size===1)for(const e of d(this,qt).values())return e.isEmpty();return!1},hS=function(e){for(const t of d(this,Ge))t.unselect();d(this,Ge).clear();for(const t of e)t.isEmpty()||(d(this,Ge).add(t),t.select());P(this,Q,On).call(this,{hasSelectedEditor:this.hasSelection})},Y(Xd,"TRANSLATE_SMALL",1),Y(Xd,"TRANSLATE_BIG",10);let Ju=Xd;var tn,gi,Ps,jh,vi,xr,Th,yi,rr,va,Lc,xi,Yo,Vs,Dp,hy;const Fn=class Fn{constructor(e){N(this,Vs);N(this,tn,null);N(this,gi,!1);N(this,Ps,null);N(this,jh,null);N(this,vi,null);N(this,xr,null);N(this,Th,!1);N(this,yi,null);N(this,rr,null);N(this,va,null);N(this,Lc,null);N(this,xi,!1);E(this,rr,e),E(this,xi,e._uiManager.useNewAltTextFlow),d(Fn,Yo)||E(Fn,Yo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Fn._l10n??(Fn._l10n=e)}async render(){const e=E(this,Ps,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=E(this,jh,document.createElement("span"));e.append(t),d(this,xi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",d(Fn,Yo).missing),t.setAttribute("data-l10n-id",d(Fn,Yo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=d(this,rr)._uiManager._signal;e.addEventListener("contextmenu",fs,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),d(this,rr)._uiManager.editAltText(d(this,rr)),d(this,xi)&&d(this,rr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Vs,Dp)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(E(this,Th,!0),s(i))},{signal:r}),await P(this,Vs,hy).call(this),e}finish(){d(this,Ps)&&(d(this,Ps).focus({focusVisible:d(this,Th)}),E(this,Th,!1))}isEmpty(){return d(this,xi)?d(this,tn)===null:!d(this,tn)&&!d(this,gi)}hasData(){return d(this,xi)?d(this,tn)!==null||!!d(this,va):this.isEmpty()}get guessedText(){return d(this,va)}async setGuessedText(e){d(this,tn)===null&&(E(this,va,e),E(this,Lc,await Fn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),P(this,Vs,hy).call(this))}toggleAltTextBadge(e=!1){var t;if(!d(this,xi)||d(this,tn)){(t=d(this,yi))==null||t.remove(),E(this,yi,null);return}if(!d(this,yi)){const r=E(this,yi,document.createElement("div"));r.className="noAltTextBadge",d(this,rr).div.append(r)}d(this,yi).classList.toggle("hidden",!e)}serialize(e){let t=d(this,tn);return!e&&d(this,va)===t&&(t=d(this,Lc)),{altText:t,decorative:d(this,gi),guessedText:d(this,va),textWithDisclaimer:d(this,Lc)}}get data(){return{altText:d(this,tn),decorative:d(this,gi)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(E(this,va,r),E(this,Lc,s)),!(d(this,tn)===e&&d(this,gi)===t)&&(i||(E(this,tn,e),E(this,gi,t)),P(this,Vs,hy).call(this))}toggle(e=!1){d(this,Ps)&&(!e&&d(this,xr)&&(clearTimeout(d(this,xr)),E(this,xr,null)),d(this,Ps).disabled=!e)}shown(){d(this,rr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Vs,Dp)}})}destroy(){var e,t;(e=d(this,Ps))==null||e.remove(),E(this,Ps,null),E(this,jh,null),E(this,vi,null),(t=d(this,yi))==null||t.remove(),E(this,yi,null)}};tn=new WeakMap,gi=new WeakMap,Ps=new WeakMap,jh=new WeakMap,vi=new WeakMap,xr=new WeakMap,Th=new WeakMap,yi=new WeakMap,rr=new WeakMap,va=new WeakMap,Lc=new WeakMap,xi=new WeakMap,Yo=new WeakMap,Vs=new WeakSet,Dp=function(){return d(this,tn)&&"added"||d(this,tn)===null&&this.guessedText&&"review"||"missing"},hy=async function(){var s,i,a;const e=d(this,Ps);if(!e)return;if(d(this,xi)){if(e.classList.toggle("done",!!d(this,tn)),e.setAttribute("data-l10n-id",d(Fn,Yo)[d(this,Vs,Dp)]),(s=d(this,jh))==null||s.setAttribute("data-l10n-id",d(Fn,Yo)[`${d(this,Vs,Dp)}-label`]),!d(this,tn)){(i=d(this,vi))==null||i.remove();return}}else{if(!d(this,tn)&&!d(this,gi)){e.classList.remove("done"),(a=d(this,vi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=d(this,vi);if(!t){E(this,vi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${d(this,rr).id}`;const o=100,l=d(this,rr)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,xr)),E(this,xr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{E(this,xr,setTimeout(()=>{E(this,xr,null),d(this,vi).classList.add("show"),d(this,rr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;d(this,xr)&&(clearTimeout(d(this,xr)),E(this,xr,null)),(u=d(this,vi))==null||u.classList.remove("show")},{signal:l})}d(this,gi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=d(this,tn)),t.parentNode||e.append(t);const r=d(this,rr).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},N(Fn,Yo,null),Y(Fn,"_l10n",null);let kx=Fn;var wi,Oc,js,og,ya,Rh,Ko;class M0{constructor(e){N(this,wi,null);N(this,Oc,!1);N(this,js,null);N(this,og,null);N(this,ya,null);N(this,Rh,null);N(this,Ko,!1);E(this,js,e),this.toolbar=null}render(){if(!d(this,js)._uiManager.hasCommentManager())return null;const e=E(this,wi,document.createElement("button"));e.className="comment",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const t=d(this,js)._uiManager._signal;e.addEventListener("contextmenu",fs,{signal:t}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:t});const r=s=>{s.preventDefault(),this.edit()};return e.addEventListener("click",r,{capture:!0,signal:t}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(E(this,Oc,!0),r(s))},{signal:t}),e}edit(){const{bottom:e,left:t,right:r}=d(this,js).getClientDimensions(),s={top:e};d(this,js)._uiManager.direction==="ltr"?s.right=r:s.left=t,d(this,js)._uiManager.editComment(d(this,js),s)}finish(){d(this,wi)&&(d(this,wi).focus({focusVisible:d(this,Oc)}),E(this,Oc,!1))}isDeleted(){return d(this,Ko)||d(this,ya)===""}hasBeenEdited(){return this.isDeleted()||d(this,ya)!==d(this,og)}serialize(){return this.data}get data(){return{text:d(this,ya),date:d(this,Rh),deleted:d(this,Ko)}}set data(e){if(e===null){E(this,ya,""),E(this,Ko,!0);return}E(this,ya,e),E(this,Rh,new Date),E(this,Ko,!1)}setInitialText(e){E(this,og,e),this.data=e}toggle(e=!1){d(this,wi)&&(d(this,wi).disabled=!e)}shown(){}destroy(){var e;(e=d(this,wi))==null||e.remove(),E(this,wi,null),E(this,ya,""),E(this,Rh,null),E(this,js,null),E(this,Oc,!1),E(this,Ko,!1)}}wi=new WeakMap,Oc=new WeakMap,js=new WeakMap,og=new WeakMap,ya=new WeakMap,Rh=new WeakMap,Ko=new WeakMap;var Mh,Fc,lg,cg,ug,dg,hg,xa,$c,wa,Bc,ba,Vl,FI,$I,BI;const zC=class zC{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:a=null,signal:o}){N(this,Vl);N(this,Mh);N(this,Fc,!1);N(this,lg,null);N(this,cg);N(this,ug);N(this,dg);N(this,hg);N(this,xa,null);N(this,$c);N(this,wa,null);N(this,Bc);N(this,ba,null);E(this,Mh,e),E(this,lg,r),E(this,cg,t),E(this,ug,s),E(this,dg,i),E(this,hg,a),E(this,Bc,new AbortController),E(this,$c,AbortSignal.any([o,d(this,Bc).signal])),e.addEventListener("touchstart",P(this,Vl,FI).bind(this),{passive:!1,signal:d(this,$c)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Yi.pixelRatio}destroy(){var e,t;(e=d(this,Bc))==null||e.abort(),E(this,Bc,null),(t=d(this,xa))==null||t.abort(),E(this,xa,null)}};Mh=new WeakMap,Fc=new WeakMap,lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,dg=new WeakMap,hg=new WeakMap,xa=new WeakMap,$c=new WeakMap,wa=new WeakMap,Bc=new WeakMap,ba=new WeakMap,Vl=new WeakSet,FI=function(e){var s,i,a;if((s=d(this,cg))!=null&&s.call(this))return;if(e.touches.length===1){if(d(this,xa))return;const o=E(this,xa,new AbortController),l=AbortSignal.any([d(this,$c),o.signal]),u=d(this,Mh),h={capture:!0,signal:l,passive:!1},f=p=>{var m;p.pointerType==="touch"&&((m=d(this,xa))==null||m.abort(),E(this,xa,null))};u.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Ot(p),f(p))},h),u.addEventListener("pointerup",f,h),u.addEventListener("pointercancel",f,h);return}if(!d(this,ba)){E(this,ba,new AbortController);const o=AbortSignal.any([d(this,$c),d(this,ba).signal]),l=d(this,Mh),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",P(this,Vl,$I).bind(this),u);const h=P(this,Vl,BI).bind(this);l.addEventListener("touchend",h,u),l.addEventListener("touchcancel",h,u),u.capture=!0,l.addEventListener("pointerdown",Ot,u),l.addEventListener("pointermove",Ot,u),l.addEventListener("pointercancel",Ot,u),l.addEventListener("pointerup",Ot,u),(i=d(this,ug))==null||i.call(this)}if(Ot(e),e.touches.length!==2||(a=d(this,lg))!=null&&a.call(this)){E(this,wa,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),E(this,wa,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},$I=function(e){var S;if(!d(this,wa)||e.touches.length!==2)return;Ot(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:a,screenY:o}=r,l=d(this,wa),{touch0X:u,touch0Y:h,touch1X:f,touch1Y:p}=l,m=f-u,y=p-h,g=a-s,x=o-i,v=Math.hypot(g,x)||1,w=Math.hypot(m,y)||1;if(!d(this,Fc)&&Math.abs(w-v)<=zC.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=i,l.touch1X=a,l.touch1Y=o,!d(this,Fc)){E(this,Fc,!0);return}const _=[(s+a)/2,(i+o)/2];(S=d(this,dg))==null||S.call(this,_,w,v)},BI=function(e){var t;e.touches.length>=2||(d(this,ba)&&(d(this,ba).abort(),E(this,ba,null),(t=d(this,hg))==null||t.call(this)),d(this,wa)&&(Ot(e),E(this,wa,null),E(this,Fc,!1)))};let Nx=zC;var zc,Ts,dt,dn,Ih,Xo,fg,Uc,hn,Hc,_a,Qo,pg,Wc,wr,mg,Vc,Sa,bi,Dh,Lh,Zr,Gc,gg,Wx,fe,fS,vg,pS,fy,zI,UI,mS,py,gS,HI,WI,VI,vS,GI,yS,qI,YI,KI,xS,Lp;const Ce=class Ce{constructor(e){N(this,fe);N(this,zc,null);N(this,Ts,null);N(this,dt,null);N(this,dn,null);N(this,Ih,!1);N(this,Xo,null);N(this,fg,"");N(this,Uc,!1);N(this,hn,null);N(this,Hc,null);N(this,_a,null);N(this,Qo,null);N(this,pg,"");N(this,Wc,!1);N(this,wr,null);N(this,mg,!1);N(this,Vc,!1);N(this,Sa,!1);N(this,bi,null);N(this,Dh,0);N(this,Lh,0);N(this,Zr,null);N(this,Gc,null);Y(this,"isSelected",!1);Y(this,"_isCopy",!1);Y(this,"_editToolbar",null);Y(this,"_initialOptions",Object.create(null));Y(this,"_initialData",null);Y(this,"_isVisible",!0);Y(this,"_uiManager",null);Y(this,"_focusEventsAllowed",!0);N(this,gg,!1);N(this,Wx,Ce._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ce.prototype._resizeWithKeyboard,t=Ju.TRANSLATE_SMALL,r=Ju.TRANSLATE_BIG;return Pe(this,"_resizerKeyboardManager",new Gv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Ce.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Pe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new NG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ce._l10n??(Ce._l10n=e),Ce._l10nResizer||(Ce._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ce._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Ce._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,gg)}set _isDraggable(e){var t;E(this,gg,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,Wx)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):P(this,fe,Lp).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(d(this,Wc)?E(this,Wc,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){P(this,fe,fS).call(this,this.parentDimensions,e,t)}translateInPage(e,t){d(this,wr)||E(this,wr,[this.x,this.y,this.width,this.height]),P(this,fe,fS).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){d(this,wr)||E(this,wr,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:h}=r;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!d(this,wr)&&(d(this,wr)[0]!==this.x||d(this,wr)[1]!==this.y)}get _hasBeenResized(){return!!d(this,wr)&&(d(this,wr)[2]!==this.width||d(this,wr)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=Ce,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:a,width:o,height:l}=this;if(o*=r,l*=s,i*=r,a*=s,this._mustFixPosition)switch(e){case 0:i=Wn(i,0,r-o),a=Wn(a,0,s-l);break;case 90:i=Wn(i,0,r-l),a=Wn(a,o,s);break;case 180:i=Wn(i,o,r),a=Wn(a,l,s);break;case 270:i=Wn(i,l,r),a=Wn(a,0,s-o);break}this.x=i/=r,this.y=a/=s;const[u,h]=this.getBaseTranslation();i+=u,a+=h,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return P(r=Ce,vg,pS).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return P(r=Ce,vg,pS).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,d(this,Uc)||(i.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!d(this,Uc)&&t.endsWith("%");if(s&&i)return;const[a,o]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/a).toFixed(2)}%`),!d(this,Uc)&&!i&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=d(this,dt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,Vc))return this._editToolbar;this._editToolbar=new sS(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=d(this,dt))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,dt)||(kx.initialize(Ce._l10n),E(this,dt,new kx(this)),d(this,zc)&&(d(this,dt).data=d(this,zc),E(this,zc,null))),d(this,dt)}get altTextData(){var e;return(e=d(this,dt))==null?void 0:e.data}set altTextData(e){d(this,dt)&&(d(this,dt).data=e)}get guessedAltText(){var e;return(e=d(this,dt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=d(this,dt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=d(this,dt))==null?void 0:t.serialize(e)}hasAltText(){return!!d(this,dt)&&!d(this,dt).isEmpty()}hasAltTextData(){var e;return((e=d(this,dt))==null?void 0:e.hasData())??!1}addCommentButton(){return d(this,dn)?d(this,dn):E(this,dn,new M0(this))}get commentColor(){return null}get comment(){const e=d(this,dn);return{text:e.data.text,date:e.data.date,deleted:e.isDeleted(),color:this.commentColor}}set comment(e){d(this,dn)||E(this,dn,new M0(this)),d(this,dn).data=e}setCommentData(e){d(this,dn)||E(this,dn,new M0(this)),d(this,dn).setInitialText(e)}get hasEditedComment(){var e;return(e=d(this,dn))==null?void 0:e.hasBeenEdited()}async editComment(){d(this,dn)||E(this,dn,new M0(this)),d(this,dn).edit()}addComment(e){this.hasEditedComment&&(e.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=d(this,Ih)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),P(this,fe,yS).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),AI(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,Gc)||E(this,Gc,new Nx({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:P(this,fe,HI).bind(this),onPinching:P(this,fe,WI).bind(this),onPinchEnd:P(this,fe,VI).bind(this),signal:this._uiManager._signal}))),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(E(this,Wc,!0),this._isDraggable){P(this,fe,GI).call(this,e);return}P(this,fe,vS).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,bi)&&clearTimeout(d(this,bi)),E(this,bi,setTimeout(()=>{var e;E(this,bi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/s,h=t/s,f=this.x*i,p=this.y*a,m=this.width*i,y=this.height*a;switch(r){case 0:return[f+u+o,a-p-h-y+l,f+u+m+o,a-p-h+l];case 90:return[f+h+o,a-p+u+l,f+h+y+o,a-p+u+m+l];case 180:return[f-u-m+o,a-p+h+l,f-u+o,a-p+h+y+l];case 270:return[f-h-y+o,a-p-u-m+l,f-h+o,a-p-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,o=i-r,l=a-s;switch(this.rotation){case 0:return[r,t-a,o,l];case 90:return[r,t-s,l,o];case 180:return[i,t-s,o,l];case 270:return[i,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),E(this,Vc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),E(this,Vc,!1),!0):!1}isInEditMode(){return d(this,Vc)}shouldGetKeyboardEvents(){return d(this,Sa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&s>0&&e<i&&r>0}rebuild(){P(this,fe,yS).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Ze("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});s.rotation=e.rotation,E(s,zc,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,a]=s.pageDimensions,[o,l,u,h]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=l/a,s.width=u/i,s.height=h/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=d(this,Qo))==null||e.abort(),E(this,Qo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,bi)&&(clearTimeout(d(this,bi)),E(this,bi,null)),P(this,fe,Lp).call(this),this.removeEditToolbar(),d(this,Zr)){for(const r of d(this,Zr).values())clearTimeout(r);E(this,Zr,null)}this.parent=null,(t=d(this,Gc))==null||t.destroy(),E(this,Gc,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,fe,zI).call(this),d(this,hn).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),E(this,_a,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=d(this,hn).children;if(!d(this,Ts)){E(this,Ts,Array.from(t));const a=P(this,fe,qI).bind(this),o=P(this,fe,YI).bind(this),l=this._uiManager._signal;for(const u of d(this,Ts)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",P(this,fe,KI).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",Ce._l10nResizer[h])}}const r=d(this,Ts)[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(d(this,Ts).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)d(this,hn).append(d(this,hn).firstChild);else if(i>s)for(let o=0;o<i-s;o++)d(this,hn).firstChild.before(d(this,hn).lastChild);let a=0;for(const o of t){const u=d(this,Ts)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ce._l10nResizer[u])}}P(this,fe,xS).call(this,0),E(this,Sa,!0),d(this,hn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){d(this,Sa)&&P(this,fe,gS).call(this,d(this,pg),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){P(this,fe,Lp).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=d(this,dt))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=d(this,hn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=d(this,dt))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,mg)}set isEditing(e){E(this,mg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){E(this,Uc,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){d(this,Zr)||E(this,Zr,new Map);const{action:r}=e;let s=d(this,Zr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),d(this,Zr).delete(r),d(this,Zr).size===0&&E(this,Zr,null)},Ce._telemetryTimeout),d(this,Zr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),E(this,Ih,!1)}disable(){this.div&&(this.div.tabIndex=-1),E(this,Ih,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};zc=new WeakMap,Ts=new WeakMap,dt=new WeakMap,dn=new WeakMap,Ih=new WeakMap,Xo=new WeakMap,fg=new WeakMap,Uc=new WeakMap,hn=new WeakMap,Hc=new WeakMap,_a=new WeakMap,Qo=new WeakMap,pg=new WeakMap,Wc=new WeakMap,wr=new WeakMap,mg=new WeakMap,Vc=new WeakMap,Sa=new WeakMap,bi=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,Zr=new WeakMap,Gc=new WeakMap,gg=new WeakMap,Wx=new WeakMap,fe=new WeakSet,fS=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},vg=new WeakSet,pS=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},fy=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},zI=function(){if(d(this,hn))return;E(this,hn,document.createElement("div")),d(this,hn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");d(this,hn).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",P(this,fe,UI).bind(this,r),{signal:t}),s.addEventListener("contextmenu",fs,{signal:t}),s.tabIndex=-1}this.div.prepend(d(this,hn))},UI=function(e,t){var h;t.preventDefault();const{isMac:r}=bn.platform;if(t.button!==0||t.ctrlKey&&r)return;(h=d(this,dt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,E(this,Hc,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",P(this,fe,gS).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ot,{passive:!1,signal:a}),window.addEventListener("contextmenu",fs,{signal:a}),E(this,_a,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=d(this,dt))==null||f.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,P(this,fe,py).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},mS=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t;const[i,a]=this.parentDimensions;this.setDims(i*r,a*s),this.fixAndSetPosition(),this._onResized()},py=function(){if(!d(this,_a))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=d(this,_a);E(this,_a,null);const i=this.x,a=this.y,o=this.width,l=this.height;i===e&&a===t&&o===r&&l===s||this.addCommands({cmd:P(this,fe,mS).bind(this,i,a,o,l),undo:P(this,fe,mS).bind(this,e,t,r,s),mustExec:!0})},gS=function(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,l=this.height,u=Ce.MIN_SIZE/r,h=Ce.MIN_SIZE/s,f=P(this,fe,fy).call(this,this.rotation),p=(B,F)=>[f[0]*B+f[2]*F,f[1]*B+f[3]*F],m=P(this,fe,fy).call(this,360-this.rotation),y=(B,F)=>[m[0]*B+m[2]*F,m[1]*B+m[3]*F];let g,x,v=!1,w=!1;switch(e){case"topLeft":v=!0,g=(B,F)=>[0,0],x=(B,F)=>[B,F];break;case"topMiddle":g=(B,F)=>[B/2,0],x=(B,F)=>[B/2,F];break;case"topRight":v=!0,g=(B,F)=>[B,0],x=(B,F)=>[0,F];break;case"middleRight":w=!0,g=(B,F)=>[B,F/2],x=(B,F)=>[0,F/2];break;case"bottomRight":v=!0,g=(B,F)=>[B,F],x=(B,F)=>[0,0];break;case"bottomMiddle":g=(B,F)=>[B/2,F],x=(B,F)=>[B/2,0];break;case"bottomLeft":v=!0,g=(B,F)=>[0,F],x=(B,F)=>[B,0];break;case"middleLeft":w=!0,g=(B,F)=>[0,F/2],x=(B,F)=>[B,F/2];break}const _=g(o,l),S=x(o,l);let C=p(...S);const A=Ce._round(i+C[0]),k=Ce._round(a+C[1]);let j=1,T=1,M,I;if(t.fromKeyboard)({deltaX:M,deltaY:I}=t);else{const{screenX:B,screenY:F}=t,[L,U]=d(this,Hc);[M,I]=this.screenToPageTranslation(B-L,F-U),d(this,Hc)[0]=B,d(this,Hc)[1]=F}if([M,I]=y(M/r,I/s),v){const B=Math.hypot(o,l);j=T=Math.max(Math.min(Math.hypot(S[0]-_[0]-M,S[1]-_[1]-I)/B,1/o,1/l),u/o,h/l)}else w?j=Wn(Math.abs(S[0]-_[0]-M),u,1)/o:T=Wn(Math.abs(S[1]-_[1]-I),h,1)/l;const R=Ce._round(o*j),$=Ce._round(l*T);C=p(...x(R,$));const O=A-C[0],W=k-C[1];d(this,wr)||E(this,wr,[this.x,this.y,this.width,this.height]),this.width=R,this.height=$,this.x=O,this.y=W,this.setDims(r*R,s*$),this.fixAndSetPosition(),this._onResizing()},HI=function(){var e;E(this,_a,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=d(this,dt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},WI=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const a=P(this,fe,fy).call(this,this.rotation),o=(A,k)=>[a[0]*A+a[2]*k,a[1]*A+a[3]*k],[l,u]=this.parentDimensions,h=this.x,f=this.y,p=this.width,m=this.height,y=Ce.MIN_SIZE/l,g=Ce.MIN_SIZE/u;i=Math.max(Math.min(i,1/p,1/m),y/p,g/m);const x=Ce._round(p*i),v=Ce._round(m*i);if(x===p&&v===m)return;d(this,wr)||E(this,wr,[h,f,p,m]);const w=o(p/2,m/2),_=Ce._round(h+w[0]),S=Ce._round(f+w[1]),C=o(x/2,v/2);this.x=_-C[0],this.y=S-C[1],this.width=x,this.height=v,this.setDims(l*x,u*v),this.fixAndSetPosition(),this._onResizing()},VI=function(){var e;(e=d(this,dt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),P(this,fe,py).call(this)},vS=function(e){const{isMac:t}=bn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},GI=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:i},o=u=>{s.abort(),E(this,Xo,null),E(this,Wc,!1),this._uiManager.endDragSession()||P(this,fe,vS).call(this,u),r&&this._onStopDragging()};t&&(E(this,Dh,e.clientX),E(this,Lh,e.clientY),E(this,Xo,e.pointerId),E(this,fg,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._onStartDragging());const{clientX:h,clientY:f,pointerId:p}=u;if(p!==d(this,Xo)){Ot(u);return}const[m,y]=this.screenToPageTranslation(h-d(this,Dh),f-d(this,Lh));E(this,Dh,h),E(this,Lh,f),this._uiManager.dragSelectedEditors(m,y)},a),window.addEventListener("touchmove",Ot,a),window.addEventListener("pointerdown",u=>{u.pointerType===d(this,fg)&&(d(this,Gc)||u.isPrimary)&&o(u),Ot(u)},a));const l=u=>{if(!d(this,Xo)||d(this,Xo)===u.pointerId){o(u);return}Ot(u)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},yS=function(){if(d(this,Qo)||!this.div)return;E(this,Qo,new AbortController);const e=this._uiManager.combinedSignal(d(this,Qo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},qI=function(e){Ce._resizerKeyboardManager.exec(this,e)},YI=function(e){var t;d(this,Sa)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==d(this,hn)&&P(this,fe,Lp).call(this)},KI=function(e){E(this,pg,d(this,Sa)?e:"")},xS=function(e){if(d(this,Ts))for(const t of d(this,Ts))t.tabIndex=e},Lp=function(){E(this,Sa,!1),P(this,fe,xS).call(this,-1),P(this,fe,py).call(this)},N(Ce,vg),Y(Ce,"_l10n",null),Y(Ce,"_l10nResizer",null),Y(Ce,"_borderLineWidth",-1),Y(Ce,"_colorManager",new aS),Y(Ce,"_zIndex",1),Y(Ce,"_telemetryTimeout",1e3);let rt=Ce;class NG extends rt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const TN=3285377520,Yr=4294901760,si=65535;class XI{constructor(e){this.h1=e?e&4294967295:TN,this.h2=e?e&4294967295:TN}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,x=e.length;g<x;g++){const v=e.charCodeAt(g);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,l=0,u=this.h1,h=this.h2;const f=3432918353,p=461845907,m=f&si,y=p&si;for(let g=0;g<s;g++)g&1?(o=a[g],o=o*f&Yr|o*m&si,o=o<<15|o>>>17,o=o*p&Yr|o*y&si,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[g],l=l*f&Yr|l*m&si,l=l<<15|l>>>17,l=l*p&Yr|l*y&si,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*f&Yr|o*m&si,o=o<<15|o>>>17,o=o*p&Yr|o*y&si,s&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Yr|e*36045&si,t=t*4283543511&Yr|((t<<16|e>>>16)*2950163797&Yr)>>>16,e^=t>>>1,e=e*444984403&Yr|e*60499&si,t=t*3301882366&Yr|((t<<16|e>>>16)*3120437893&Yr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const wS=Object.freeze({map:null,hash:"",transfer:void 0});var qc,Yc,fn,Vx,QI;class gC{constructor(){N(this,Vx);N(this,qc,!1);N(this,Yc,null);N(this,fn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=d(this,fn).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return d(this,fn).get(e)}remove(e){if(d(this,fn).delete(e),d(this,fn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of d(this,fn).values())if(t instanceof rt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=d(this,fn).get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,d(this,fn).set(e,t);s&&P(this,Vx,QI).call(this),t instanceof rt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return d(this,fn).has(e)}get size(){return d(this,fn).size}resetModified(){d(this,qc)&&(E(this,qc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new JI(this)}get serializable(){if(d(this,fn).size===0)return wS;const e=new Map,t=new XI,r=[],s=Object.create(null);let i=!1;for(const[a,o]of d(this,fn)){const l=o instanceof rt?o.serialize(!1,s):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:wS}get editorStats(){let e=null;const t=new Map;for(const r of d(this,fn).values()){if(!(r instanceof rt))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[o,l]of Object.entries(s)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){E(this,Yc,null)}get modifiedIds(){if(d(this,Yc))return d(this,Yc);const e=[];for(const t of d(this,fn).values())!(t instanceof rt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return E(this,Yc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return d(this,fn).entries()}}qc=new WeakMap,Yc=new WeakMap,fn=new WeakMap,Vx=new WeakSet,QI=function(){d(this,qc)||(E(this,qc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yg;class JI extends gC{constructor(t){super();N(this,yg);const{map:r,hash:s,transfer:i}=t.serializable,a=structuredClone(r,i?{transfer:i}:null);E(this,yg,{map:a,hash:s,transfer:i})}get print(){Ze("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,yg)}get modifiedIds(){return Pe(this,"modifiedIds",{ids:new Set,hash:""})}}yg=new WeakMap;var Oh;class PG{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){N(this,Oh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),d(this,Oh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||d(this,Oh).has(e.loadedName))){if(Bt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:a}=e,o=new FontFace(s,i,a);this.addNativeFontFace(o);try{await o.load(),d(this,Oh).add(s),r==null||r(e)}catch{xe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw xe(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Pe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Pe(this,"isSyncFontLoadingSupported",Hn||bn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Bt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Pe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(S,C){return S.charCodeAt(C)<<24|S.charCodeAt(C+1)<<16|S.charCodeAt(C+2)<<8|S.charCodeAt(C+3)&255}function s(S,C,A,k){const j=S.substring(0,C),T=S.substring(C+A);return j+k+T}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function h(S,C){if(++u>30){xe("Load test font never loaded."),C();return}if(l.font="30px "+S,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,S,C))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const y=16,g=1482184792;let x=r(p,y);for(i=0,a=f.length-3;i<a;i+=4)x=x-g+r(f,i)|0;i<f.length&&(x=x-g+r(f+"XXX",i)|0),p=s(p,y,4,fG(x));const v=`url(data:font/opentype;base64,${btoa(p)});`,w=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(w);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const S of[e.loadedName,f]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=S,_.append(C)}this._document.body.append(_),h(f,()=>{_.remove(),t.complete()})}}Oh=new WeakMap;class jG{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${xI(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(a){xe(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}function TG(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Hn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function RG(n){if(Hn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Hv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function I0(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const bS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,MG=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",IG=yG.bind(null,bS,MG);var Ea,Gx;class DG{constructor(){N(this,Ea,new Map);N(this,Gx,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};d(this,Gx).then(()=>{for(const[s]of d(this,Ea))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){xe("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}d(this,Ea).set(t,s)}removeEventListener(e,t){const r=d(this,Ea).get(t);r==null||r(),d(this,Ea).delete(t)}terminate(){for(const[,e]of d(this,Ea))e==null||e();d(this,Ea).clear()}}Ea=new WeakMap,Gx=new WeakMap;const D0={DATA:1,ERROR:2},Dt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function RN(){}function tr(n){if(n instanceof Ul||n instanceof tS||n instanceof NN||n instanceof Cx||n instanceof a1)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Ul(n.message);case"InvalidPDFException":return new tS(n.message);case"PasswordException":return new NN(n.message,n.code);case"ResponseException":return new Cx(n.message,n.status,n.missing);case"UnknownErrorException":return new a1(n.message,n.details)}return new a1(n.message,n.toString())}var Fh,cs,ZI,eD,tD,my;class Op{constructor(e,t,r){N(this,cs);N(this,Fh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",P(this,cs,ZI).bind(this),{signal:d(this,Fh).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[i].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:Dt.PULL,streamId:i,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Bt(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[i].cancelCall=h,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Dt.CANCEL,streamId:i,reason:tr(u)}),h.promise}},r)}destroy(){var e;(e=d(this,Fh))==null||e.abort(),E(this,Fh,null)}}Fh=new WeakMap,cs=new WeakSet,ZI=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){P(this,cs,tD).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===D0.DATA)s.resolve(e.data);else if(e.callback===D0.ERROR)s.reject(tr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:D0.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:D0.ERROR,callbackId:e.callbackId,reason:tr(a)})});return}if(e.streamId){P(this,cs,eD).call(this,e);return}t(e.data)},eD=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,h=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=h,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:Dt.ENQUEUE,streamId:t,chunk:u},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Dt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){Bt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:Dt.ERROR,streamId:t,reason:tr(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Dt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:Dt.START_COMPLETE,streamId:t,reason:tr(u)})})},tD=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case Dt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(tr(e.reason));break;case Dt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(tr(e.reason));break;case Dt.PULL:if(!o){i.postMessage({sourceName:r,targetName:s,stream:Dt.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||RN).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Dt.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:Dt.PULL_COMPLETE,streamId:t,reason:tr(u)})});break;case Dt.ENQUEUE:if(Bt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Dt.CLOSE:if(Bt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),P(this,cs,my).call(this,a,t);break;case Dt.ERROR:Bt(a,"error should have stream controller"),a.controller.error(tr(e.reason)),P(this,cs,my).call(this,a,t);break;case Dt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(tr(e.reason)),P(this,cs,my).call(this,a,t);break;case Dt.CANCEL:if(!o)break;const l=tr(e.reason);Promise.try(o.onCancel||RN,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:Dt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:Dt.CANCEL_COMPLETE,streamId:t,reason:tr(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},my=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var xg;class nD{constructor({enableHWA:e=!1}){N(this,xg,!1);E(this,xg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!d(this,xg)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ze("Abstract method `_createCanvas` called.")}}xg=new WeakMap;class LG extends nD{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class rD{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ze("Abstract method `_fetch` called.")}}class MN extends rD{async _fetch(e){const t=await Wv(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Hv(t)}}class sD{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var Kc,$h,Ca,Aa,jn,Xc,Qc,te,kn,Fp,jd,gy,Td,iD,_S,Rd,$p,Bp,SS,zp;class OG extends sD{constructor({docId:t,ownerDocument:r=globalThis.document}){super();N(this,te);N(this,Kc);N(this,$h);N(this,Ca);N(this,Aa);N(this,jn);N(this,Xc);N(this,Qc,0);E(this,Aa,t),E(this,jn,r)}addFilter(t){if(!t)return"none";let r=d(this,te,kn).get(t);if(r)return r;const[s,i,a]=P(this,te,gy).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(r=d(this,te,kn).get(o),r)return d(this,te,kn).set(t,r),r;const l=`g_${d(this,Aa)}_transfer_map_${Zt(this,Qc)._++}`,u=P(this,te,Td).call(this,l);d(this,te,kn).set(t,u),d(this,te,kn).set(o,u);const h=P(this,te,Rd).call(this,l);return P(this,te,Bp).call(this,s,i,a,h),u}addHCMFilter(t,r){var y;const s=`${t}-${r}`,i="base";let a=d(this,te,Fp).get(i);if((a==null?void 0:a.key)===s||(a?((y=a.filter)==null||y.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},d(this,te,Fp).set(i,a)),!t||!r))return a.url;const o=P(this,te,zp).call(this,t);t=de.makeHexColor(...o);const l=P(this,te,zp).call(this,r);if(r=de.makeHexColor(...l),d(this,te,jd).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return a.url;const u=new Array(256);for(let g=0;g<=255;g++){const x=g/255;u[g]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const h=u.join(","),f=`g_${d(this,Aa)}_hcm_filter`,p=a.filter=P(this,te,Rd).call(this,f);P(this,te,Bp).call(this,h,h,h,p),P(this,te,_S).call(this,p);const m=(g,x)=>{const v=o[g]/255,w=l[g]/255,_=new Array(x+1);for(let S=0;S<=x;S++)_[S]=v+S/x*(w-v);return _.join(",")};return P(this,te,Bp).call(this,m(0,5),m(1,5),m(2,5),p),a.url=P(this,te,Td).call(this,f),a.url}addAlphaFilter(t){let r=d(this,te,kn).get(t);if(r)return r;const[s]=P(this,te,gy).call(this,[t]),i=`alpha_${s}`;if(r=d(this,te,kn).get(i),r)return d(this,te,kn).set(t,r),r;const a=`g_${d(this,Aa)}_alpha_map_${Zt(this,Qc)._++}`,o=P(this,te,Td).call(this,a);d(this,te,kn).set(t,o),d(this,te,kn).set(i,o);const l=P(this,te,Rd).call(this,a);return P(this,te,SS).call(this,s,l),o}addLuminosityFilter(t){let r=d(this,te,kn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=P(this,te,gy).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=d(this,te,kn).get(i),r)return d(this,te,kn).set(t,r),r;const a=`g_${d(this,Aa)}_luminosity_map_${Zt(this,Qc)._++}`,o=P(this,te,Td).call(this,a);d(this,te,kn).set(t,o),d(this,te,kn).set(i,o);const l=P(this,te,Rd).call(this,a);return P(this,te,iD).call(this,l),t&&P(this,te,SS).call(this,s,l),o}addHighlightHCMFilter(t,r,s,i,a){var w;const o=`${r}-${s}-${i}-${a}`;let l=d(this,te,Fp).get(t);if((l==null?void 0:l.key)===o||(l?((w=l.filter)==null||w.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},d(this,te,Fp).set(t,l)),!r||!s))return l.url;const[u,h]=[r,s].map(P(this,te,zp).bind(this));let f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[i,a].map(P(this,te,zp).bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),d(this,te,jd).style.color="";const g=(_,S,C)=>{const A=new Array(256),k=(p-f)/C,j=_/255,T=(S-_)/(255*C);let M=0;for(let I=0;I<=C;I++){const R=Math.round(f+I*k),$=j+I*T;for(let O=M;O<=R;O++)A[O]=$;M=R+1}for(let I=M;I<256;I++)A[I]=A[M-1];return A.join(",")},x=`g_${d(this,Aa)}_hcm_${t}_filter`,v=l.filter=P(this,te,Rd).call(this,x);return P(this,te,_S).call(this,v),P(this,te,Bp).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),l.url=P(this,te,Td).call(this,x),l.url}destroy(t=!1){var r,s,i,a;t&&((r=d(this,Xc))!=null&&r.size)||((s=d(this,Ca))==null||s.parentNode.parentNode.remove(),E(this,Ca,null),(i=d(this,$h))==null||i.clear(),E(this,$h,null),(a=d(this,Xc))==null||a.clear(),E(this,Xc,null),E(this,Qc,0))}}Kc=new WeakMap,$h=new WeakMap,Ca=new WeakMap,Aa=new WeakMap,jn=new WeakMap,Xc=new WeakMap,Qc=new WeakMap,te=new WeakSet,kn=function(){return d(this,$h)||E(this,$h,new Map)},Fp=function(){return d(this,Xc)||E(this,Xc,new Map)},jd=function(){if(!d(this,Ca)){const t=d(this,jn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=d(this,jn).createElementNS(sa,"svg");s.setAttribute("width",0),s.setAttribute("height",0),E(this,Ca,d(this,jn).createElementNS(sa,"defs")),t.append(s),s.append(d(this,Ca)),d(this,jn).body.append(t)}return d(this,Ca)},gy=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=u[p]/255;const f=h.join(",");return[f,f,f]}const[r,s,i]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=r[u]/255,o[u]=s[u]/255,l[u]=i[u]/255;return[a.join(","),o.join(","),l.join(",")]},Td=function(t){if(d(this,Kc)===void 0){E(this,Kc,"");const r=d(this,jn).URL;r!==d(this,jn).baseURI&&(Kw(r)?xe('#createUrl: ignore "data:"-URL for performance reasons.'):E(this,Kc,gI(r,"")))}return`url(${d(this,Kc)}#${t})`},iD=function(t){const r=d(this,jn).createElementNS(sa,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},_S=function(t){const r=d(this,jn).createElementNS(sa,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Rd=function(t){const r=d(this,jn).createElementNS(sa,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),d(this,te,jd).append(r),r},$p=function(t,r,s){const i=d(this,jn).createElementNS(sa,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Bp=function(t,r,s,i){const a=d(this,jn).createElementNS(sa,"feComponentTransfer");i.append(a),P(this,te,$p).call(this,a,"feFuncR",t),P(this,te,$p).call(this,a,"feFuncG",r),P(this,te,$p).call(this,a,"feFuncB",s)},SS=function(t,r){const s=d(this,jn).createElementNS(sa,"feComponentTransfer");r.append(s),P(this,te,$p).call(this,s,"feFuncA",t)},zp=function(t){return d(this,te,jd).style.color=t,Xw(getComputedStyle(d(this,te,jd)).getPropertyValue("color"))};class aD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ze("Abstract method `_fetch` called.")}}class IN extends aD{async _fetch(e){const t=await Wv(e,"arraybuffer");return new Uint8Array(t)}}class oD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Ze("Abstract method `_fetch` called.")}}class DN extends oD{async _fetch(e){const t=await Wv(e,"arraybuffer");return new Uint8Array(t)}}Hn&&xe("Please use the `legacy` build in Node.js environments.");async function vC(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class FG extends sD{}class $G extends nD{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class BG extends rD{async _fetch(e){return vC(e)}}class zG extends aD{async _fetch(e){return vC(e)}}class UG extends oD{async _fetch(e){return vC(e)}}const vn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ES(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class yC{isModifyingCurrentTransform(){return!1}getPattern(){Ze("Abstract method `getPattern` called.")}}class HG extends yC{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===vn.STROKE||s===vn.FILL){const a=t.current.getClippedPathBoundingBox(s,vt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),r=de.transform(r,[1,0,0,1,a[0],a[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),ES(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),i=e.createPattern(u.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else ES(e,this._bbox),i=this._createGradient(e);return i}}function c1(n,e,t,r,s,i,a,o){const l=e.coords,u=e.colors,h=n.data,f=n.width*4;let p;l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p),l[r+1]>l[s+1]&&(p=r,r=s,s=p,p=a,a=o,o=p),l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p);const m=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,x=(l[r+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,w=(l[s+1]+e.offsetY)*e.scaleY;if(y>=w)return;const _=u[i],S=u[i+1],C=u[i+2],A=u[a],k=u[a+1],j=u[a+2],T=u[o],M=u[o+1],I=u[o+2],R=Math.round(y),$=Math.round(w);let O,W,B,F,L,U,V,J;for(let z=R;z<=$;z++){if(z<x){const H=z<y?0:(y-z)/(y-x);O=m-(m-g)*H,W=_-(_-A)*H,B=S-(S-k)*H,F=C-(C-j)*H}else{let H;z>w?H=1:x===w?H=0:H=(x-z)/(x-w),O=g-(g-v)*H,W=A-(A-T)*H,B=k-(k-M)*H,F=j-(j-I)*H}let G;z<y?G=0:z>w?G=1:G=(y-z)/(y-w),L=m-(m-v)*G,U=_-(_-T)*G,V=S-(S-M)*G,J=C-(C-I)*G;const X=Math.round(Math.min(O,L)),K=Math.round(Math.max(O,L));let ce=f*z+X*4;for(let H=X;H<=K;H++)G=(O-H)/(O-L),G<0?G=0:G>1&&(G=1),h[ce++]=W-(W-U)*G|0,h[ce++]=B-(B-V)*G|0,h[ce++]=F-(F-J)*G|0,h[ce++]=255}}function WG(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,u=o-1;for(i=0;i<l;i++){let h=i*o;for(let f=0;f<u;f++,h++)c1(n,t,r[h],r[h+1],r[h+o],s[h],s[h+1],s[h+o]),c1(n,t,r[h+o+1],r[h+1],r[h+o],s[h+o+1],s[h+1],s[h+o])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)c1(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class VG extends yC{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=u/f,y=h/p,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/m,scaleY:1/y},x=f+2*2,v=p+2*2,w=r.getCanvas("mesh",x,v),_=w.context,S=_.createImageData(f,p);if(t){const A=S.data;for(let k=0,j=A.length;k<j;k+=4)A[k]=t[0],A[k+1]=t[1],A[k+2]=t[2],A[k+3]=255}for(const A of this._figures)WG(S,A,g);return _.putImageData(S,2,2),{canvas:w.canvas,offsetX:o-2*m,offsetY:l-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){ES(e,this._bbox);const i=new Float32Array(2);if(s===vn.SHADING)de.singularValueDecompose2dScale(vt(e),i);else if(this.matrix){de.singularValueDecompose2dScale(this.matrix,i);const[o,l]=i;de.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=o,i[1]*=l}else de.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,s===vn.SHADING?null:this._background,t.cachedCanvases);return s!==vn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class GG extends yC{getPattern(){return"hotpink"}}function qG(n){switch(n[0]){case"RadialAxial":return new HG(n);case"Mesh":return new VG(n);case"Dummy":return new GG}throw new Error(`Unknown IR type: ${n[0]}`)}const LN={COLORED:1,UNCOLORED:2},qx=class qx{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),Yw("TilingType: "+i);const h=t[0],f=t[1],p=t[2],m=t[3],y=p-h,g=m-f,x=new Float32Array(2);de.singularValueDecompose2dScale(this.matrix,x);const[v,w]=x;de.singularValueDecompose2dScale(this.baseTransform,x);const _=v*x[0],S=w*x[1];let C=y,A=g,k=!1,j=!1;const T=Math.ceil(l*_),M=Math.ceil(u*S),I=Math.ceil(y*_),R=Math.ceil(g*S);T>=I?C=l:k=!0,M>=R?A=u:j=!0;const $=this.getSizeAndScale(C,this.ctx.canvas.width,_),O=this.getSizeAndScale(A,this.ctx.canvas.height,S),W=e.cachedCanvases.getCanvas("pattern",$.size,O.size),B=W.context,F=o.createCanvasGraphics(B);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,s,a),B.translate(-$.scale*h,-O.scale*f),F.transform($.scale,0,0,O.scale,0,0),B.save(),this.clipBbox(F,h,f,p,m),F.baseTransform=vt(F.ctx),F.executeOperatorList(r),F.endDrawing(),B.restore(),k||j){const L=W.canvas;k&&(C=l),j&&(A=u);const U=this.getSizeAndScale(C,this.ctx.canvas.width,_),V=this.getSizeAndScale(A,this.ctx.canvas.height,S),J=U.size,z=V.size,G=e.cachedCanvases.getCanvas("pattern-workaround",J,z),X=G.context,K=k?Math.floor(y/l):0,ce=j?Math.floor(g/u):0;for(let H=0;H<=K;H++)for(let pe=0;pe<=ce;pe++)X.drawImage(L,J*H,z*pe,J,z,0,0,J,z);return{canvas:G.canvas,scaleX:U.scale,scaleY:V.scale,offsetX:h,offsetY:f}}return{canvas:W.canvas,scaleX:$.scale,scaleY:O.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const s=Math.max(qx.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,o=i-r;e.ctx.rect(t,r,a,o),de.axialAlignedBoundingBox([t,r,s,i],vt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case LN.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;s.fillStyle=i.fillColor=a,s.strokeStyle=i.strokeColor=o;break;case LN.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new hG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s){let i=r;s!==vn.SHADING&&(i=de.transform(i,t.baseTransform),this.matrix&&(i=de.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(i);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};Y(qx,"MAX_PATTERN_SIZE",3e3);let CS=qx;function YG({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=bn.isLittleEndian?4278190080:255,[l,u]=a?[i,o]:[o,i],h=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<s;y++){for(const x=e+h;e<x;e++){const v=e<p?n[e]:255;t[m++]=v&128?u:l,t[m++]=v&64?u:l,t[m++]=v&32?u:l,t[m++]=v&16?u:l,t[m++]=v&8?u:l,t[m++]=v&4?u:l,t[m++]=v&2?u:l,t[m++]=v&1?u:l}if(f===0)continue;const g=e<p?n[e++]:255;for(let x=0;x<f;x++)t[m++]=g&1<<7-x?u:l}return{srcPos:e,destPos:m}}const ON=16,FN=100,KG=15,$N=10,or=16,u1=new DOMMatrix,Lr=new Float32Array(2),Yd=new Float32Array([1/0,1/0,-1/0,-1/0]);function XG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,a,o){e.transform(t,r,s,i,a,o),this.__originalTransform(t,r,s,i,a,o)},n.setTransform=function(t,r,s,i,a,o){e.setTransform(t,r,s,i,a,o),this.__originalSetTransform(t,r,s,i,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,o){e.bezierCurveTo(t,r,s,i,a,o),this.__originalBezierCurveTo(t,r,s,i,a,o)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class QG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function L0(n,e,t,r,s,i,a,o,l,u){const[h,f,p,m,y,g]=vt(n);if(f===0&&p===0){const w=a*h+y,_=Math.round(w),S=o*m+g,C=Math.round(S),A=(a+l)*h+y,k=Math.abs(Math.round(A)-_)||1,j=(o+u)*m+g,T=Math.abs(Math.round(j)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),_,C),n.drawImage(e,t,r,s,i,0,0,k,T),n.setTransform(h,f,p,m,y,g),[k,T]}if(h===0&&m===0){const w=o*p+y,_=Math.round(w),S=a*f+g,C=Math.round(S),A=(o+u)*p+y,k=Math.abs(Math.round(A)-_)||1,j=(a+l)*f+g,T=Math.abs(Math.round(j)-C)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,_,C),n.drawImage(e,t,r,s,i,0,0,T,k),n.setTransform(h,f,p,m,y,g),[T,k]}n.drawImage(e,t,r,s,i,a,o,l,u);const x=Math.hypot(h,f),v=Math.hypot(p,m);return[x*l,v*u]}class BN{constructor(e,t){Y(this,"alphaIsShape",!1);Y(this,"fontSize",0);Y(this,"fontSizeScale",1);Y(this,"textMatrix",null);Y(this,"textMatrixScale",1);Y(this,"fontMatrix",eS);Y(this,"leading",0);Y(this,"x",0);Y(this,"y",0);Y(this,"lineX",0);Y(this,"lineY",0);Y(this,"charSpacing",0);Y(this,"wordSpacing",0);Y(this,"textHScale",1);Y(this,"textRenderingMode",An.FILL);Y(this,"textRise",0);Y(this,"fillColor","#000000");Y(this,"strokeColor","#000000");Y(this,"patternFill",!1);Y(this,"patternStroke",!1);Y(this,"fillAlpha",1);Y(this,"strokeAlpha",1);Y(this,"lineWidth",1);Y(this,"activeSMask",null);Y(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Yd.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=vn.FILL,t=null){const r=this.minMax.slice();if(e===vn.STROKE){t||Ze("Stroke bounding box must include transform."),de.singularValueDecompose2dScale(t,Lr);const s=Lr[0]*this.lineWidth/2,i=Lr[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=de.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Yd,0)}getClippedPathBoundingBox(e=vn.FILL,t=null){return de.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function zN(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%or,i=(t-s)/or,a=s===0?i:i+1,o=n.createImageData(r,or);let l=0,u;const h=e.data,f=o.data;let p,m,y,g;if(e.kind===oy.GRAYSCALE_1BPP){const x=h.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),w=v.length,_=r+7>>3,S=4294967295,C=bn.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(y=p<i?or:s,u=0,m=0;m<y;m++){const A=x-l;let k=0;const j=A>_?r:A*8-7,T=j&-8;let M=0,I=0;for(;k<T;k+=8)I=h[l++],v[u++]=I&128?S:C,v[u++]=I&64?S:C,v[u++]=I&32?S:C,v[u++]=I&16?S:C,v[u++]=I&8?S:C,v[u++]=I&4?S:C,v[u++]=I&2?S:C,v[u++]=I&1?S:C;for(;k<j;k++)M===0&&(I=h[l++],M=128),v[u++]=I&M?S:C,M>>=1}for(;u<w;)v[u++]=0;n.putImageData(o,0,p*or)}}else if(e.kind===oy.RGBA_32BPP){for(m=0,g=r*or*4,p=0;p<i;p++)f.set(h.subarray(l,l+g)),l+=g,n.putImageData(o,0,m),m+=or;p<a&&(g=r*s*4,f.set(h.subarray(l,l+g)),n.putImageData(o,0,m))}else if(e.kind===oy.RGB_24BPP)for(y=or,g=r*y,p=0;p<a;p++){for(p>=i&&(y=s,g=r*y),u=0,m=g;m--;)f[u++]=h[l++],f[u++]=h[l++],f[u++]=h[l++],f[u++]=255;n.putImageData(o,0,p*or)}else throw new Error(`bad image kind: ${e.kind}`)}function UN(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%or,i=(t-s)/or,a=s===0?i:i+1,o=n.createImageData(r,or);let l=0;const u=e.data,h=o.data;for(let f=0;f<a;f++){const p=f<i?or:s;({srcPos:l}=YG({src:u,srcPos:l,dest:h,width:r,height:p,nonBlackColor:0})),n.putImageData(o,0,f*or)}}function bp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function O0(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function HN(n,e){if(e)return!0;de.singularValueDecompose2dScale(n,Lr);const t=Math.fround(Yi.pixelRatio*Hl.PDF_TO_CSS_UNITS);return Lr[0]<=t&&Lr[1]<=t}const JG=["butt","round","square"],ZG=["miter","round","bevel"],eq={},WN={};var Zs,AS,kS,NS;const UC=class UC{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:o=null},l,u){N(this,Zs);this.ctx=e,this.current=new BN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new QG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...vt(this.compositeCtx))}this.ctx.save(),O0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=vt(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,a=e.fnArray;let o=t||0;const l=i.length;if(l===o)return o;const u=l-o>$N&&typeof r=="function",h=u?Date.now()+KG:0;let f=0;const p=this.commonObjs,m=this.objs;let y;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,r),o;if(y=a[o],y!==Ex.dependency)this[y].apply(this,i[o]);else for(const g of i[o]){const x=g.startsWith("g_")?p:m;if(!x.has(g))return x.get(g,r),o}if(o++,o===l)return o;if(u&&++f>$N){if(Date.now()>h)return r(),o;f=0}}}endDrawing(){P(this,Zs,AS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,Zs,kS).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=r,l=s,u="prescale1",h,f;for(;i>2&&o>1||a>2&&l>1;){let p=o,m=l;i>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/p),a>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/m),h=this.cachedCanvases.getCanvas(u,p,m),f=h.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,o,l,0,0,p,m),e=h.canvas,o=p,l=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,o=vt(t);let l,u,h,f;if((e.bitmap||e.data)&&e.count>1){const T=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),i]),l=this._cachedBitmapsMap.get(T),l||(l=new Map,this._cachedBitmapsMap.set(T,l));const M=l.get(u);if(M&&!a){const I=Math.round(Math.min(o[0],o[2])+o[4]),R=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:M,offsetX:I,offsetY:R}}h=M}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,s),UN(f.context,e));let p=de.transform(o,[1/r,0,0,-1/s,0,0]);p=de.transform(p,[1,0,0,1,0,-s]);const m=Yd.slice();de.axialAlignedBoundingBox([0,0,r,s],p,m);const[y,g,x,v]=m,w=Math.round(x-y)||1,_=Math.round(v-g)||1,S=this.cachedCanvases.getCanvas("fillCanvas",w,_),C=S.context,A=y,k=g;C.translate(-A,-k),C.transform(...p),h||(h=this._scaleImage(f.canvas,ri(C)),h=h.img,l&&a&&l.set(u,h)),C.imageSmoothingEnabled=HN(vt(C),e.interpolate),L0(C,h,0,0,h.width,h.height,0,0,r,s),C.globalCompositeOperation="source-in";const j=de.transform(ri(C),[1,0,0,1,-A,-k]);return C.fillStyle=a?i.getPattern(t,this,j,vn.FILL):i,C.fillRect(0,0,r,s),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,S.canvas)),{canvas:S.canvas,offsetX:Math.round(A),offsetY:Math.round(k)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=JG[e]}setLineJoin(e){this.ctx.lineJoin=ZG[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=s.context;i.setTransform(this.suspendedCtx.getTransform()),bp(this.suspendedCtx,i),XG(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),bp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],o=s[2]-i,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,r,o,l,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,o,l,u,h,f){let p=e.canvas,m=l-h,y=u-f;if(a)if(m<0||y<0||m+r>p.width||y+s>p.height){const x=this.cachedCanvases.getCanvas("maskExtension",r,s),v=x.context;v.drawImage(p,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,r,s),v.globalCompositeOperation="source-over",p=x.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(m,y,r,s),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,y,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,u,r,s),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(p,m,y,r,s,l,u,r,s),t.restore()}save(){this.inSMaskMode&&bp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&bp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,a){this.ctx.transform(e,t,r,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let[s]=t;if(!r){s||(s=t[0]=new Path2D),this[e](s);return}if(!(s instanceof Path2D)){const i=t[0]=new Path2D;for(let a=0,o=s.length;a<o;)switch(s[a++]){case R0.moveTo:i.moveTo(s[a++],s[a++]);break;case R0.lineTo:i.lineTo(s[a++],s[a++]);break;case R0.curveTo:i.bezierCurveTo(s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case R0.closePath:i.closePath();break;default:xe(`Unrecognized drawing path operator: ${s[a-1]}`);break}s=i}de.axialAlignedBoundingBox(r,vt(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const i=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,ri(r),vn.STROKE),i){const a=new Path2D;a.addPath(e,r.getTransform().invertSelf().multiplySelf(i)),e=a}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(vn.STROKE,vt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let a=!1;if(i){const l=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=s.getPattern(r,this,ri(r),vn.FILL),l){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(l)),e=u}a=!0}const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),a&&r.restore(),t&&this.consumePath(e,o)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=eq}eoClip(){this.pendingClip=WN}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const r=new Path2D,s=t.getTransform().invertSelf();for(const{transform:i,x:a,y:o,fontSize:l,path:u}of e)u&&r.addPath(u,new DOMMatrix(i).preMultiplySelf(s).translate(a,o).scale(l,-l));t.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||eS,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&xe("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",a=((h=r.systemFontInfo)==null?void 0:h.css)||`"${i}", ${r.fallbackName}`;let o="normal";r.black?o="900":r.bold&&(o="bold");const l=r.italic?"italic":"normal";let u=t;t<ON?u=ON:t>FN&&(u=FN),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s,i){const a=this.ctx,o=this.current,l=o.font,u=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,f=u&An.FILL_STROKE_MASK,p=!!(u&An.ADD_TO_PATH_FLAG),m=o.patternFill&&!l.missingFile,y=o.patternStroke&&!l.missingFile;let g;if((l.disableFontFace||p||m||y)&&!l.missingFile&&(g=l.getPathGenerator(this.commonObjs,e)),g&&(l.disableFontFace||m||y)){a.save(),a.translate(t,r),a.scale(h,-h);let x;if((f===An.FILL||f===An.FILL_STROKE)&&(s?(x=a.getTransform(),a.setTransform(...s),a.fill(P(this,Zs,NS).call(this,g,x,s))):a.fill(g)),f===An.STROKE||f===An.FILL_STROKE)if(i){x||(x=a.getTransform()),a.setTransform(...i);const{a:v,b:w,c:_,d:S}=x,C=de.inverseTransform(i),A=de.transform([v,w,_,S,0,0],C);de.singularValueDecompose2dScale(A,Lr),a.lineWidth*=Math.max(Lr[0],Lr[1])/h,a.stroke(P(this,Zs,NS).call(this,g,x,i))}else a.lineWidth/=h,a.stroke(g);a.restore()}else(f===An.FILL||f===An.FILL_STROKE)&&a.fillText(e,t,r),(f===An.STROKE||f===An.FILL_STROKE)&&a.strokeText(e,t,r);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:vt(a),x:t,y:r,fontSize:h,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return Pe(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,f=e.length,p=r.vertical,m=p?1:-1,y=r.defaultVMetrics,g=s*t.fontMatrix[0],x=t.textRenderingMode===An.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),u>0?i.scale(h,-1):i.scale(h,1);let v,w;if(t.patternFill){i.save();const k=t.fillColor.getPattern(i,this,ri(i),vn.FILL);v=vt(i),i.restore(),i.fillStyle=k}if(t.patternStroke){i.save();const k=t.strokeColor.getPattern(i,this,ri(i),vn.STROKE);w=vt(i),i.restore(),i.strokeStyle=k}let _=t.lineWidth;const S=t.textMatrixScale;if(S===0||_===0){const k=t.textRenderingMode&An.FILL_STROKE_MASK;(k===An.STROKE||k===An.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=S;if(a!==1&&(i.scale(a,a),_/=a),i.lineWidth=_,r.isInvalidPDFjsFont){const k=[];let j=0;for(const T of e)k.push(T.unicode),j+=T.width;i.fillText(k.join(""),0,0),t.x+=j*g*h,i.restore(),this.compose();return}let C=0,A;for(A=0;A<f;++A){const k=e[A];if(typeof k=="number"){C+=m*k*s/1e3;continue}let j=!1;const T=(k.isSpace?l:0)+o,M=k.fontChar,I=k.accent;let R,$,O=k.width;if(p){const B=k.vmetric||y,F=-(k.vmetric?B[1]:O*.5)*g,L=B[2]*g;O=B?-B[0]:O,R=F/a,$=(C+L)/a}else R=C/a,$=0;if(r.remeasure&&O>0){const B=i.measureText(M).width*1e3/s*a;if(O<B&&this.isFontSubpixelAAEnabled){const F=O/B;j=!0,i.save(),i.scale(F,1),R/=F}else O!==B&&(R+=(O-B)/2e3*s/a)}if(this.contentVisible&&(k.isInFont||r.missingFile)){if(x&&!I)i.fillText(M,R,$);else if(this.paintChar(M,R,$,v,w),I){const B=R+s*I.offset.x/a,F=$-s*I.offset.y/a;this.paintChar(I.fontChar,B,F,v,w)}}const W=p?O*g-T*u:O*g+T*u;C+=W,j&&i.restore()}p?t.y-=C:t.x+=C*h,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,a=r.fontDirection,o=s.vertical?1:-1,l=r.charSpacing,u=r.wordSpacing,h=r.textHScale*a,f=r.fontMatrix||eS,p=e.length,m=r.textRenderingMode===An.INVISIBLE;let y,g,x,v;if(!(m||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),r.textMatrix&&t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(h,a),y=0;y<p;++y){if(g=e[y],typeof g=="number"){v=o*g*i/1e3,this.ctx.translate(v,0),r.x+=v*h;continue}const w=(g.isSpace?u:0)+l,_=s.charProcOperatorList[g.operatorListId];_?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...f),this.executeOperatorList(_),this.restore()):xe(`Type3 character "${g.operatorListId}" is not available.`);const S=[g.width,0];de.applyTransform(S,f),x=S[0]*i+w,t.translate(x,0),r.x+=x*h}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,a){const o=new Path2D;o.rect(r,s,i-r,a-s),this.ctx.clip(o),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=this.baseTransform||vt(this.ctx),s={createCanvasGraphics:i=>new UC(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new CS(e,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=qG(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,ri(t),vn.SHADING);const s=ri(t);if(s){const{width:i,height:a}=t.canvas,o=Yd.slice();de.axialAlignedBoundingBox([0,0,i,a],s,o);const[l,u,h,f]=o;this.ctx.fillRect(l,u,h-l,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ze("Should not call beginInlineImage")}beginImageData(){Ze("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=vt(this.ctx),t)){de.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[r,s,i,a]=t,o=new Path2D;o.rect(r,s,i-r,a-s),this.ctx.clip(o),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Yw("TODO: Support non-isolated groups."),e.knockout&&xe("Knockout groups not supported.");const r=vt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Yd.slice();de.axialAlignedBoundingBox(e.bbox,vt(t),s);const i=[0,0,t.canvas.width,t.canvas.height];s=de.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,l,u),p=f.context;p.translate(-a,-o),p.transform(...r);let m=new Path2D;const[y,g,x,v]=e.bbox;if(m.rect(y,g,x-y,v-g),e.matrix){const w=new Path2D;w.addPath(m,new DOMMatrix(e.matrix)),m=w}p.clip(m),e.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),bp(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=vt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=Yd.slice();de.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(P(this,Zs,AS).call(this),O0(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o,de.singularValueDecompose2dScale(vt(this.ctx),Lr);const{viewportScale:l}=this,u=Math.ceil(a*this.outputScaleX*l),h=Math.ceil(o*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(u,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Lr[0],0,0,-Lr[1],0,o*Lr[1]),O0(this.ctx)}else{O0(this.ctx),this.endPath();const l=new Path2D;l.rect(t[0],t[1],a,o),this.ctx.clip(l)}}this.current=new BN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),P(this,Zs,kS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this._createMaskCanvas(e),i=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(i,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=vt(o);o.transform(t,r,s,i,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,f=a.length;h<f;h+=2){const p=de.transform(l,[t,r,s,i,a[h],a[h+1]]);o.drawImage(u.canvas,p[4],p[5])}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:o,height:l,transform:u}=i,h=this.cachedCanvases.getCanvas("maskCanvas",o,l),f=h.context;f.save();const p=this.getObject(a,i);UN(f,p),f.globalCompositeOperation="source-in",f.fillStyle=s?r.getPattern(f,this,ri(t),vn.FILL):r,f.fillRect(0,0,o,l),f.restore(),t.save(),t.transform(...u),t.scale(1,-1),L0(t,h.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){xe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){xe("Dependent image isn't ready yet");return}const a=i.width,o=i.height,l=[];for(let u=0,h=s.length;u<h;u+=2)l.push({transform:[t,0,0,r,s[u],s[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(i,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;this.save();const{filter:i}=s;i!=="none"&&i!==""&&(s.filter="none"),s.scale(1/t,-1/r);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,r).context;zN(u,e),a=this.applyTransferMapsToCanvas(u)}const o=this._scaleImage(a,ri(s));s.imageSmoothingEnabled=HN(vt(s),e.interpolate),L0(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",i,a).context;zN(l,e),s=this.applyTransferMapsToCanvas(l)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),L0(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(r||(this.pendingClip===WN?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=vt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,o;if(r===0&&s===0){const l=Math.abs(t),u=Math.abs(i);if(l===u)if(e===0)a=o=1/l;else{const h=l*e;a=o=h<1?1/h:1}else if(e===0)a=1/l,o=1/u;else{const h=l*e,f=u*e;a=h<1?1/h:1,o=f<1?1/f:1}}else{const l=Math.abs(t*i-r*s),u=Math.hypot(t,r),h=Math.hypot(s,i);if(e===0)a=h/l,o=u/l;else{const f=e*l;a=h>f?h/f:1,o=u>f?u/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,a]=this.getScaleForStroking();if(i===a){r.lineWidth=(s||1)*i,r.stroke(e);return}const o=r.getLineDash();t&&r.save(),r.scale(i,a),u1.a=1/i,u1.d=1/a;const l=new Path2D;if(l.addPath(e,u1),o.length>0){const u=Math.max(i,a);r.setLineDash(o.map(h=>h/u)),r.lineDashOffset/=u}r.lineWidth=s||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Zs=new WeakSet,AS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},kS=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},NS=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let ch=UC;for(const n in Ex)ch.prototype[n]!==void 0&&(ch.prototype[Ex[n]]=ch.prototype[n]);var wg,bg;class Li{static get workerPort(){return d(this,wg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");E(this,wg,e)}static get workerSrc(){return d(this,bg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");E(this,bg,e)}}wg=new WeakMap,bg=new WeakMap,N(Li,wg,null),N(Li,bg,"");var Bh,_g;class tq{constructor({parsedData:e,rawData:t}){N(this,Bh);N(this,_g);E(this,Bh,e),E(this,_g,t)}getRaw(){return d(this,_g)}get(e){return d(this,Bh).get(e)??null}[Symbol.iterator](){return d(this,Bh).entries()}}Bh=new WeakMap,_g=new WeakMap;const Md=Symbol("INTERNAL");var Sg,Eg,Cg,zh;class nq{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){N(this,Sg,!1);N(this,Eg,!1);N(this,Cg,!1);N(this,zh,!0);E(this,Sg,!!(e&Mr.DISPLAY)),E(this,Eg,!!(e&Mr.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(d(this,Cg))return d(this,zh);if(!d(this,zh))return!1;const{print:e,view:t}=this.usage;return d(this,Sg)?(t==null?void 0:t.viewState)!=="OFF":d(this,Eg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Md&&Ze("Internal method `_setVisible` called."),E(this,Cg,r),E(this,zh,t)}}Sg=new WeakMap,Eg=new WeakMap,Cg=new WeakMap,zh=new WeakMap;var Jo,Qe,Uh,Hh,Ag,PS;class rq{constructor(e,t=Mr.DISPLAY){N(this,Ag);N(this,Jo,null);N(this,Qe,new Map);N(this,Uh,null);N(this,Hh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,E(this,Hh,e.order);for(const r of e.groups)d(this,Qe).set(r.id,new nq(t,r));if(e.baseState==="OFF")for(const r of d(this,Qe).values())r._setVisible(Md,!1);for(const r of e.on)d(this,Qe).get(r)._setVisible(Md,!0);for(const r of e.off)d(this,Qe).get(r)._setVisible(Md,!1);E(this,Uh,this.getHash())}}isVisible(e){if(d(this,Qe).size===0)return!0;if(!e)return Yw("Optional content group not defined."),!0;if(e.type==="OCG")return d(this,Qe).has(e.id)?d(this,Qe).get(e.id).visible:(xe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,Ag,PS).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!d(this,Qe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(d(this,Qe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!d(this,Qe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(!d(this,Qe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!d(this,Qe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(!d(this,Qe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!d(this,Qe).has(t))return xe(`Optional content group not found: ${t}`),!0;if(d(this,Qe).get(t).visible)return!1}return!0}return xe(`Unknown optional content policy ${e.policy}.`),!0}return xe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=d(this,Qe).get(e);if(!s){xe(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((i=d(this,Qe).get(o))==null||i._setVisible(Md,!1,!0));s._setVisible(Md,!!t,!0),E(this,Jo,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=d(this,Qe).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}E(this,Jo,null)}get hasInitialVisibility(){return d(this,Uh)===null||this.getHash()===d(this,Uh)}getOrder(){return d(this,Qe).size?d(this,Hh)?d(this,Hh).slice():[...d(this,Qe).keys()]:null}getGroup(e){return d(this,Qe).get(e)||null}getHash(){if(d(this,Jo)!==null)return d(this,Jo);const e=new XI;for(const[t,r]of d(this,Qe))e.update(`${t}:${r.visible}`);return E(this,Jo,e.hexdigest())}[Symbol.iterator](){return d(this,Qe).entries()}}Jo=new WeakMap,Qe=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,Ag=new WeakSet,PS=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=P(this,Ag,PS).call(this,i);else if(d(this,Qe).has(i))a=d(this,Qe).get(i).visible;else return xe(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class sq{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Bt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Bt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new iq(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new aq(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class iq{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=mC(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class aq{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function oq(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let h=o(t);return h=unescape(h),h=l(h),h=u(h),i(h)}if(t=a(n),t){const h=u(t);return i(h)}if(t=r("filename","i").exec(n),t){t=t[1];let h=o(t);return h=u(h),i(h)}function r(h,f){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(h,f){if(h){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(h,{fatal:!0}),m=Hv(f);f=p.decode(m),e=!1}catch{}}return f}function i(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function a(h){const f=[];let p;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(h))!==null;){let[,g,x,v]=p;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[x,v]}const y=[];for(let g=0;g<f.length&&g in f;++g){let[x,v]=f[g];v=o(v),x&&(v=unescape(v),g===0&&(v=l(v))),y.push(v)}return y.join("")}function o(h){if(h.startsWith('"')){const f=h.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}h=f.join('"')}return h}function l(h){const f=h.indexOf("'");if(f===-1)return h;const p=h.slice(0,f),y=h.slice(f+1).replace(/^[^']*'/,"");return s(p,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,x){return String.fromCharCode(parseInt(x,16))}),s(p,y);try{y=atob(y)}catch{}return s(p,y)})}return""}function lD(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function Qw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function cD({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function uD(n){const e=n.get("Content-Disposition");if(e){let t=oq(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(mC(t))return t}return null}function qv(n,e){return new Cx(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function dD(n){return n===200||n===206}function hD(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function fD(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(xe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class lq{constructor(e){Y(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=lD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new cq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new uq(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class cq{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,hD(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=Qw(i.url),!dD(i.status))throw qv(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:o,suggestedLength:l}=cD({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=uD(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ul("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class uq{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,hD(i,this._withCredentials,this._abortController)).then(o=>{const l=Qw(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!dD(o.status))throw qv(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:fD(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const d1=200,h1=206;function dq(n){const e=n.response;return typeof e!="string"?e:Hv(e).buffer}class hq{constructor({url:e,httpHeaders:t,withCredentials:r}){Y(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=lD(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=h1):s.expectedStatus=d1,t.responseType="arraybuffer",Bt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||d1;if(!(i===d1&&r.expectedStatus===h1)&&i!==r.expectedStatus){r.onError(s.status);return}const o=dq(s);if(i===h1){const l=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?r.onDone({begin:parseInt(u[1],10),chunk:o}):(xe('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class fq{constructor(e){this._source=e,this._manager=new hq(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new pq(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new mq(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class pq{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Qw(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=cD({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=uD(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=qv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mq{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Qw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=qv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const gq=/^[a-z][a-z0-9\-+.]+:/i;function vq(n){if(gq.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class yq{constructor(e){this.source=e,this.url=vq(e.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new xq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new wq(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class xq{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=qv(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ul("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class wq{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const _p=Symbol("INITIAL_DATA");var br,kg,jS;class pD{constructor(){N(this,kg);N(this,br,Object.create(null))}get(e,t=null){if(t){const s=P(this,kg,jS).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=d(this,br)[e];if(!r||r.data===_p)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=d(this,br)[e];return!!t&&t.data!==_p}delete(e){const t=d(this,br)[e];return!t||t.data===_p?!1:(delete d(this,br)[e],!0)}resolve(e,t=null){const r=P(this,kg,jS).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in d(this,br)){const{data:r}=d(this,br)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}E(this,br,Object.create(null))}*[Symbol.iterator](){for(const e in d(this,br)){const{data:t}=d(this,br)[e];t!==_p&&(yield[e,t])}}}br=new WeakMap,kg=new WeakSet,jS=function(e){var t;return(t=d(this,br))[e]||(t[e]={...Promise.withResolvers(),data:_p})};const bq=1e5,VN=30;var bP,Zo,sr,Ng,Pg,Jc,ka,jg,Tg,Zc,Wh,Vh,el,Gh,Rg,qh,eu,Mg,Ig,Yh,tu,Dg,tl,Kh,io,mD,gD,TS,Ur,vy,RS,vD,yD;const Vt=class Vt{constructor({textContentSource:e,container:t,viewport:r}){N(this,io);N(this,Zo,Promise.withResolvers());N(this,sr,null);N(this,Ng,!1);N(this,Pg,!!((bP=globalThis.FontInspector)!=null&&bP.enabled));N(this,Jc,null);N(this,ka,null);N(this,jg,0);N(this,Tg,0);N(this,Zc,null);N(this,Wh,null);N(this,Vh,0);N(this,el,0);N(this,Gh,Object.create(null));N(this,Rg,[]);N(this,qh,null);N(this,eu,[]);N(this,Mg,new WeakMap);N(this,Ig,null);var l;if(e instanceof ReadableStream)E(this,qh,e);else if(typeof e=="object")E(this,qh,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');E(this,sr,E(this,Wh,t)),E(this,el,r.scale*Yi.pixelRatio),E(this,Vh,r.rotation),E(this,ka,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=r.rawDims;E(this,Ig,[1,0,0,-1,-a,o+i]),E(this,Tg,s),E(this,jg,i),P(l=Vt,Ur,vD).call(l),Qu(t,r),d(this,Zo).promise.finally(()=>{d(Vt,Kh).delete(this),E(this,ka,null),E(this,Gh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=bn.platform;return Pe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{d(this,Zc).read().then(({value:t,done:r})=>{if(r){d(this,Zo).resolve();return}d(this,Jc)??E(this,Jc,t.lang),Object.assign(d(this,Gh),t.styles),P(this,io,mD).call(this,t.items),e()},d(this,Zo).reject)};return E(this,Zc,d(this,qh).getReader()),d(Vt,Kh).add(this),e(),d(this,Zo).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*Yi.pixelRatio,s=e.rotation;if(s!==d(this,Vh)&&(t==null||t(),E(this,Vh,s),Qu(d(this,Wh),{rotation:s})),r!==d(this,el)){t==null||t(),E(this,el,r);const a={div:null,properties:null,ctx:P(i=Vt,Ur,vy).call(i,d(this,Jc))};for(const o of d(this,eu))a.properties=d(this,Mg).get(o),a.div=o,P(this,io,TS).call(this,a)}}cancel(){var t;const e=new Ul("TextLayer task cancelled.");(t=d(this,Zc))==null||t.cancel(e).catch(()=>{}),E(this,Zc,null),d(this,Zo).reject(e)}get textDivs(){return d(this,eu)}get textContentItemsStr(){return d(this,Rg)}static cleanup(){if(!(d(this,Kh).size>0)){d(this,Yh).clear();for(const{canvas:e}of d(this,tu).values())e.remove();d(this,tu).clear()}}};Zo=new WeakMap,sr=new WeakMap,Ng=new WeakMap,Pg=new WeakMap,Jc=new WeakMap,ka=new WeakMap,jg=new WeakMap,Tg=new WeakMap,Zc=new WeakMap,Wh=new WeakMap,Vh=new WeakMap,el=new WeakMap,Gh=new WeakMap,Rg=new WeakMap,qh=new WeakMap,eu=new WeakMap,Mg=new WeakMap,Ig=new WeakMap,Yh=new WeakMap,tu=new WeakMap,Dg=new WeakMap,tl=new WeakMap,Kh=new WeakMap,io=new WeakSet,mD=function(e){var s,i;if(d(this,Ng))return;(i=d(this,ka)).ctx??(i.ctx=P(s=Vt,Ur,vy).call(s,d(this,Jc)));const t=d(this,eu),r=d(this,Rg);for(const a of e){if(t.length>bq){xe("Ignoring additional textDivs for performance reasons."),E(this,Ng,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=d(this,sr);E(this,sr,document.createElement("span")),d(this,sr).classList.add("markedContent"),a.id&&d(this,sr).setAttribute("id",`${a.id}`),o.append(d(this,sr))}else a.type==="endMarkedContent"&&E(this,sr,d(this,sr).parentNode);continue}r.push(a.str),P(this,io,gD).call(this,a)}},gD=function(e){var g;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};d(this,eu).push(t);const s=de.transform(d(this,Ig),e.transform);let i=Math.atan2(s[1],s[0]);const a=d(this,Gh)[e.fontName];a.vertical&&(i+=Math.PI/2);let o=d(this,Pg)&&a.fontSubstitution||a.fontFamily;o=Vt.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),u=l*P(g=Vt,Ur,yD).call(g,o,a,d(this,Jc));let h,f;i===0?(h=s[4],f=s[5]-u):(h=s[4]+u*Math.sin(i),f=s[5]-u*Math.cos(i));const p="calc(var(--total-scale-factor) *",m=t.style;d(this,sr)===d(this,Wh)?(m.left=`${(100*h/d(this,Tg)).toFixed(2)}%`,m.top=`${(100*f/d(this,jg)).toFixed(2)}%`):(m.left=`${p}${h.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(d(Vt,tl)*l).toFixed(2)}px)`,m.fontFamily=o,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,d(this,Pg)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);x!==v&&Math.max(x,v)/Math.min(x,v)>1.5&&(y=!0)}if(y&&(r.canvasWidth=a.vertical?e.height:e.width),d(this,Mg).set(t,r),d(this,ka).div=t,d(this,ka).properties=r,P(this,io,TS).call(this,d(this,ka)),r.hasText&&d(this,sr).append(t),r.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),d(this,sr).append(x)}},TS=function(e){var o;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(d(Vt,tl)>1&&(a=`scale(${1/d(Vt,tl)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=i,{canvasWidth:u,fontSize:h}=r;P(o=Vt,Ur,RS).call(o,s,h*d(this,el),l);const{width:f}=s.measureText(t.textContent);f>0&&(a=`scaleX(${u*d(this,el)/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Ur=new WeakSet,vy=function(e=null){let t=d(this,tu).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,tu).set(e,t),d(this,Dg).set(t,{size:0,family:""})}return t},RS=function(e,t,r){const s=d(this,Dg).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},vD=function(){if(d(this,tl)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),E(this,tl,e.getBoundingClientRect().height),e.remove()},yD=function(e,t,r){const s=d(this,Yh).get(e);if(s)return s;const i=P(this,Ur,vy).call(this,r);i.canvas.width=i.canvas.height=VN,P(this,Ur,RS).call(this,i,VN,e);const a=i.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return o?u=o/(o+l):(bn.platform.isFirefox&&xe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),d(this,Yh).set(e,u),u},N(Vt,Ur),N(Vt,Yh,new Map),N(Vt,tu,new Map),N(Vt,Dg,new WeakMap),N(Vt,tl,null),N(Vt,Kh,new Set);let Bm=Vt;class zm{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(zm.shouldBuildText(o))(l=i==null?void 0:i.attributes)!=null&&l.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const u of i.children)s(u)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const _q=100;function xD(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new MS,{docId:t}=e,r=n.url?TG(n.url):null,s=n.data?RG(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof wD?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Um?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!Kw(n.docBaseUrl)?n.docBaseUrl:null,m=I0(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(Hn?BG:MN),x=I0(n.iccUrl),v=I0(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Hn?zG:IN),_=I0(n.wasmUrl),S=n.WasmFactory||(Hn?UG:DN),C=n.stopAtErrors!==!0,A=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,j=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Hn,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Hn&&(bn.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:Hn,R=n.fontExtraProperties===!0,$=n.enableXfa===!0,O=n.ownerDocument||globalThis.document,W=n.disableRange===!0,B=n.disableStream===!0,F=n.disableAutoFetch===!0,L=n.pdfBug===!0,U=n.CanvasFactory||(Hn?$G:LG),V=n.FilterFactory||(Hn?FG:OG),J=n.enableHWA===!0,z=n.useWasm!==!1,G=l?l.length:n.length??NaN,X=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Hn&&!I,K=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===MN&&w===IN&&S===DN&&m&&v&&_&&Rp(m,document.baseURI)&&Rp(v,document.baseURI)&&Rp(_,document.baseURI)),ce=null;cG(f);const H={canvasFactory:new U({ownerDocument:O,enableHWA:J}),filterFactory:new V({docId:t,ownerDocument:O}),cMapReaderFactory:K?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:K?null:new w({baseUrl:v}),wasmFactory:K?null:new S({baseUrl:_})};h||(h=Um.create({verbosity:f,port:Li.workerPort}),e._worker=h);const pe={docId:t,apiVersion:"5.4.54",data:s,password:o,disableAutoFetch:F,rangeChunkSize:u,length:G,docBaseUrl:p,enableXfa:$,evaluatorOptions:{maxImageSize:A,disableFontFace:I,ignoreErrors:C,isEvalSupported:k,isOffscreenCanvasSupported:j,isImageDecoderSupported:T,canvasMaxAreaInBytes:M,fontExtraProperties:R,useSystemFonts:X,useWasm:z,useWorkerFetch:K,cMapUrl:m,iccUrl:x,standardFontDataUrl:v,wasmUrl:_}},Ee={ownerDocument:O,pdfBug:L,styleElement:ce,loadingParams:{disableAutoFetch:F,enableXfa:$}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ae=h.messageHandler.sendWithPromise("GetDocRequest",pe,s?[s.buffer]:null);let ke;if(l)ke=new sq(l,{disableRange:W,disableStream:B});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Re=Rp(r)?lq:Hn?yq:fq;ke=new Re({url:r,length:G,httpHeaders:i,withCredentials:a,rangeChunkSize:u,disableRange:W,disableStream:B})}return Ae.then(Re=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Ht=new Op(t,Re,h.port),er=new Cq(Ht,e,ke,Ee,H,J);e._transport=er,Ht.send("Ready",null)})}).catch(e._capability.reject),e}var Yx;const Kx=class Kx{constructor(){Y(this,"_capability",Promise.withResolvers());Y(this,"_transport",null);Y(this,"_worker",null);Y(this,"docId",`d${Zt(Kx,Yx)._++}`);Y(this,"destroyed",!1);Y(this,"onPassword",null);Y(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Yx=new WeakMap,N(Kx,Yx,0);let MS=Kx;var nu,Lg,Og,Fg,$g;class wD{constructor(e,t,r=!1,s=null){N(this,nu,Promise.withResolvers());N(this,Lg,[]);N(this,Og,[]);N(this,Fg,[]);N(this,$g,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){d(this,$g).push(e)}addProgressListener(e){d(this,Fg).push(e)}addProgressiveReadListener(e){d(this,Og).push(e)}addProgressiveDoneListener(e){d(this,Lg).push(e)}onDataRange(e,t){for(const r of d(this,$g))r(e,t)}onDataProgress(e,t){d(this,nu).promise.then(()=>{for(const r of d(this,Fg))r(e,t)})}onDataProgressiveRead(e){d(this,nu).promise.then(()=>{for(const t of d(this,Og))t(e)})}onDataProgressiveDone(){d(this,nu).promise.then(()=>{for(const e of d(this,Lg))e()})}transportReady(){d(this,nu).resolve()}requestDataRange(e,t){Ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}nu=new WeakMap,Lg=new WeakMap,Og=new WeakMap,Fg=new WeakMap,$g=new WeakMap;class Sq{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Na,ru,Up;class Eq{constructor(e,t,r,s=!1){N(this,ru);N(this,Na,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new jN:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new pD,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Vv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Pe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=Po.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:f=null,isEditing:p=!1}){var C,A;(C=this._stats)==null||C.time("Overall");const m=this._transport.getRenderingIntent(s,i,f,p),{renderingIntent:y,cacheKey:g}=m;E(this,Na,!1),l||(l=this._transport.getOptionalContentConfig(y));let x=this._intentStates.get(g);x||(x=Object.create(null),this._intentStates.set(g,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const v=!!(y&Mr.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(A=this._stats)==null||A.time("Page Request"),this._pumpOperatorList(m));const w=k=>{var j;x.renderTasks.delete(_),v&&E(this,Na,!0),P(this,ru,Up).call(this),k?(_.capability.reject(k),this._abortOperatorList({intentState:x,reason:k instanceof Error?k:new Error(k)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new IS({callback:w,params:{canvas:t,canvasContext:e,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(x.renderTasks||(x.renderTasks=new Set)).add(_);const S=_.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([k,j])=>{var T;if(this.destroyed){w();return}if((T=this._stats)==null||T.time("Rendering"),!(j.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:k,optionalContentConfig:j}),_.operatorListChanged()}).catch(w),S}getOperatorList({intent:e="display",annotationMode:t=Po.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var u;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>zm.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:l,done:u}){if(u){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),E(this,Na,!1),Promise.all(e)}cleanup(e=!1){E(this,Na,!0);const t=P(this,ru,Up).call(this);return e&&t&&this._stats&&(this._stats=new jN),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&P(this,ru,Up).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const h=()=>{l.read().then(({value:f,done:p})=>{if(p){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,u),h())},f=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const p of u.renderTasks)p.operatorListChanged();P(this,ru,Up).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(f);else if(u.opListReadCapability)u.opListReadCapability.reject(f);else throw f}})};h()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof pC){let s=_q;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Ul(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Na=new WeakMap,ru=new WeakSet,Up=function(){if(!d(this,Na)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),E(this,Na,!1),!0};var nl,Rs,Pa,su,Xx,iu,au,Yn,yy,bD,_D,Hp,Xh,xy;const ut=class ut{constructor({name:e=null,port:t=null,verbosity:r=uG()}={}){N(this,Yn);N(this,nl,Promise.withResolvers());N(this,Rs,null);N(this,Pa,null);N(this,su,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(d(ut,au).has(t))throw new Error("Cannot use more than one PDFWorker per port.");d(ut,au).set(t,this),P(this,Yn,bD).call(this,t)}else P(this,Yn,_D).call(this)}get promise(){return d(this,nl).promise}get port(){return d(this,Pa)}get messageHandler(){return d(this,Rs)}destroy(){var e,t;this.destroyed=!0,(e=d(this,su))==null||e.terminate(),E(this,su,null),d(ut,au).delete(d(this,Pa)),E(this,Pa,null),(t=d(this,Rs))==null||t.destroy(),E(this,Rs,null)}static create(e){const t=d(this,au).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ut(e)}static get workerSrc(){if(Li.workerSrc)return Li.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Pe(this,"_setupFakeWorkerGlobal",(async()=>d(this,Xh,xy)?d(this,Xh,xy):(await import(this.workerSrc)).WorkerMessageHandler)())}};nl=new WeakMap,Rs=new WeakMap,Pa=new WeakMap,su=new WeakMap,Xx=new WeakMap,iu=new WeakMap,au=new WeakMap,Yn=new WeakSet,yy=function(){d(this,nl).resolve(),d(this,Rs).send("configure",{verbosity:this.verbosity})},bD=function(e){E(this,Pa,e),E(this,Rs,new Op("main","worker",e)),d(this,Rs).on("ready",()=>{}),P(this,Yn,yy).call(this)},_D=function(){if(d(ut,iu)||d(ut,Xh,xy)){P(this,Yn,Hp).call(this);return}let{workerSrc:e}=ut;try{ut._isSameOrigin(window.location,e)||(e=ut._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Op("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?d(this,nl).reject(new Error("Worker was destroyed")):P(this,Yn,Hp).call(this)},i=new AbortController;t.addEventListener("error",()=>{d(this,su)||s()},{signal:i.signal}),r.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}E(this,Rs,r),E(this,Pa,t),E(this,su,t),P(this,Yn,yy).call(this)}),r.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{P(this,Yn,Hp).call(this)}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{Yw("The worker has been disabled.")}P(this,Yn,Hp).call(this)},Hp=function(){d(ut,iu)||(xe("Setting up fake worker."),E(ut,iu,!0)),ut._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){d(this,nl).reject(new Error("Worker was destroyed"));return}const t=new DG;E(this,Pa,t);const r=`fake${Zt(ut,Xx)._++}`,s=new Op(r+"_worker",r,t);e.setup(s,t),E(this,Rs,new Op(r,r+"_worker",t)),P(this,Yn,yy).call(this)}).catch(e=>{d(this,nl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Xh=new WeakSet,xy=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},N(ut,Xh),N(ut,Xx,0),N(ut,iu,!1),N(ut,au,new WeakMap),Hn&&(E(ut,iu,!0),Li.workerSrc||(Li.workerSrc="./pdf.worker.mjs")),ut._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},ut._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ut.fromPort=e=>{if(_G("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ut.create(e)};let Um=ut;var ja,_i,Qh,Jh,Ta,ou,Wp;class Cq{constructor(e,t,r,s,i,a){N(this,ou);N(this,ja,new Map);N(this,_i,new Map);N(this,Qh,new Map);N(this,Jh,new Map);N(this,Ta,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new pD,this.fontLoader=new PG({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Pe(this,"annotationStorage",new gC)}getRenderingIntent(e,t=Po.ENABLE,r=null,s=!1,i=!1){let a=Mr.DISPLAY,o=wS;switch(e){case"any":a=Mr.ANY;break;case"display":break;case"print":a=Mr.PRINT;break;default:xe(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Mr.PRINT&&r instanceof JI?r:this.annotationStorage;switch(t){case Po.DISABLE:a+=Mr.ANNOTATIONS_DISABLE;break;case Po.ENABLE:break;case Po.ENABLE_FORMS:a+=Mr.ANNOTATIONS_FORMS;break;case Po.ENABLE_STORAGE:a+=Mr.ANNOTATIONS_STORAGE,o=l.serializable;break;default:xe(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=Mr.IS_EDITING),i&&(a+=Mr.OPLIST);const{ids:u,hash:h}=l.modifiedIds,f=[a,o.hash,h];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=d(this,Ta))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of d(this,_i).values())e.push(s._destroy());d(this,_i).clear(),d(this,Qh).clear(),d(this,Jh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),d(this,ja).clear(),this.filterFactory.destroy(),Bm.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Ul("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Bt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{Bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}Bt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Sq(r,this))}),e.on("DocException",r=>{t._capability.reject(tr(r))}),e.on("PasswordRequest",r=>{E(this,Ta,Promise.withResolvers());try{if(!t.onPassword)throw tr(r);const s=i=>{i instanceof Error?d(this,Ta).reject(i):d(this,Ta).resolve({password:i})};t.onPassword(s,r.code)}catch(s){d(this,Ta).reject(s)}return d(this,Ta).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;d(this,_i).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const h=i.error;xe(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const o=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,l=new jG(i,o);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(r,l)});break;case"CopyLocalImage":const{imageRef:u}=i;Bt(u,"The imageRef must be defined.");for(const h of d(this,_i).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===u)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{var l;if(this.destroyed)return;const o=d(this,_i).get(s);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&xe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=d(this,Qh).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&d(this,Jh).set(i.refStr,e);const a=new Eq(t,i,this,this._params.pdfBug);return d(this,_i).set(t,a),a});return d(this,Qh).set(t,s),s}getPageIndex(e){return bS(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return P(this,ou,Wp).call(this,"GetFieldObjects")}hasJSActions(){return P(this,ou,Wp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return P(this,ou,Wp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,ou,Wp).call(this,"GetOptionalContentConfig").then(t=>new rq(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=d(this,ja).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new tq(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return d(this,ja).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of d(this,_i).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),d(this,ja).clear(),this.filterFactory.destroy(!0),Bm.cleanup()}}cachedPageNumber(e){if(!bS(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return d(this,Jh).get(t)??null}}ja=new WeakMap,_i=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Ta=new WeakMap,ou=new WeakSet,Wp=function(e,t=null){const r=d(this,ja).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return d(this,ja).set(e,s),s};var rl;class Aq{constructor(e){N(this,rl,null);Y(this,"onContinue",null);Y(this,"onError",null);E(this,rl,e)}get promise(){return d(this,rl).capability.promise}cancel(e=0){d(this,rl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=d(this,rl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=d(this,rl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}rl=new WeakMap;var sl,lu;const yc=class yc{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:f=!1,pageColors:p=null,enableHWA:m=!1}){N(this,sl,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Aq(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(d(yc,lu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(yc,lu).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ch(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),d(this,sl)&&(window.cancelAnimationFrame(d(this,sl)),E(this,sl,null)),d(yc,lu).delete(this._canvas),e||(e=new pC(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?E(this,sl,window.requestAnimationFrame(()=>{E(this,sl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(yc,lu).delete(this._canvas),this.callback())))}};sl=new WeakMap,lu=new WeakMap,N(yc,lu,new WeakSet);let IS=yc;const kq="5.4.54",Nq="295fb3ec4";var _r,cu,Zh,Yt,Bg,ef,Ra,zg,il,Ms,Ug,Je,DS,LS,OS,hc,SD,So;const nr=class nr{constructor({editor:e=null,uiManager:t=null}){N(this,Je);N(this,_r,null);N(this,cu,null);N(this,Zh);N(this,Yt,null);N(this,Bg,!1);N(this,ef,!1);N(this,Ra,null);N(this,zg);N(this,il,null);N(this,Ms,null);var r,s;e?(E(this,ef,!1),E(this,Ra,e)):E(this,ef,!0),E(this,Ms,(e==null?void 0:e._uiManager)||t),E(this,zg,d(this,Ms)._eventBus),E(this,Zh,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=d(this,Ms))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),d(nr,Ug)||E(nr,Ug,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Pe(this,"_keyboardManager",new Gv([[["Escape","mac+Escape"],nr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],nr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],nr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],nr.prototype._moveToPrevious],[["Home","mac+Home"],nr.prototype._moveToBeginning],[["End","mac+End"],nr.prototype._moveToEnd]]))}renderButton(){const e=E(this,_r,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",d(this,Ra)&&(e.ariaControls=`${d(this,Ra).id}_colorpicker_dropdown`);const t=d(this,Ms)._signal;e.addEventListener("click",P(this,Je,hc).bind(this),{signal:t}),e.addEventListener("keydown",P(this,Je,OS).bind(this),{signal:t});const r=E(this,cu,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=d(this,Zh),e.append(r),e}renderMainDropdown(){const e=E(this,Yt,P(this,Je,DS).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===d(this,_r)){P(this,Je,hc).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,Je,LS).call(this,t,e)}_moveToNext(e){var t,r;if(!d(this,Je,So)){P(this,Je,hc).call(this,e);return}if(e.target===d(this,_r)){(t=d(this,Yt).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=d(this,Yt))==null?void 0:t.firstChild)||e.target===d(this,_r)){d(this,Je,So)&&this._hideDropdownFromKeyboard();return}d(this,Je,So)||P(this,Je,hc).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!d(this,Je,So)){P(this,Je,hc).call(this,e);return}(t=d(this,Yt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!d(this,Je,So)){P(this,Je,hc).call(this,e);return}(t=d(this,Yt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=d(this,Yt))==null||e.classList.add("hidden"),d(this,_r).ariaExpanded="false",(t=d(this,il))==null||t.abort(),E(this,il,null)}_hideDropdownFromKeyboard(){var e;if(!d(this,ef)){if(!d(this,Je,So)){(e=d(this,Ra))==null||e.unselect();return}this.hideDropdown(),d(this,_r).focus({preventScroll:!0,focusVisible:d(this,Bg)})}}updateColor(e){if(d(this,cu)&&(d(this,cu).style.backgroundColor=e),!d(this,Yt))return;const t=d(this,Ms).highlightColors.values();for(const r of d(this,Yt).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=d(this,_r))==null||e.remove(),E(this,_r,null),E(this,cu,null),(t=d(this,Yt))==null||t.remove(),E(this,Yt,null)}};_r=new WeakMap,cu=new WeakMap,Zh=new WeakMap,Yt=new WeakMap,Bg=new WeakMap,ef=new WeakMap,Ra=new WeakMap,zg=new WeakMap,il=new WeakMap,Ms=new WeakMap,Ug=new WeakMap,Je=new WeakSet,DS=function(){const e=document.createElement("div"),t=d(this,Ms)._signal;e.addEventListener("contextmenu",fs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,Ra)&&(e.id=`${d(this,Ra).id}_colorpicker_dropdown`);for(const[r,s]of d(this,Ms).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",d(nr,Ug)[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.ariaSelected=s===d(this,Zh),i.addEventListener("click",P(this,Je,LS).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",P(this,Je,OS).bind(this),{signal:t}),e},LS=function(e,t){t.stopPropagation(),d(this,zg).dispatch("switchannotationeditorparams",{source:this,type:De.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},OS=function(e){nr._keyboardManager.exec(this,e)},hc=function(e){if(d(this,Je,So)){this.hideDropdown();return}if(E(this,Bg,e.detail===0),d(this,il)||(E(this,il,new AbortController),window.addEventListener("pointerdown",P(this,Je,SD).bind(this),{signal:d(this,Ms).combinedSignal(d(this,il))})),d(this,_r).ariaExpanded="true",d(this,Yt)){d(this,Yt).classList.remove("hidden");return}const t=E(this,Yt,P(this,Je,DS).call(this));d(this,_r).append(t)},SD=function(e){var t;(t=d(this,Yt))!=null&&t.contains(e.target)||this.hideDropdown()},So=function(){return d(this,Yt)&&!d(this,Yt).classList.contains("hidden")},N(nr,Ug,null);let Px=nr;var Si,Hg,tf,Wg;const xc=class xc{constructor(e){N(this,Si,null);N(this,Hg,null);N(this,tf,null);E(this,Hg,e),E(this,tf,e._uiManager),d(xc,Wg)||E(xc,Wg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(d(this,Si))return d(this,Si);const{editorType:e,colorType:t,colorValue:r}=d(this,Hg),s=E(this,Si,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",d(xc,Wg)[e]),s.addEventListener("input",()=>{d(this,tf).updateParams(t,s.value)},{signal:d(this,tf)._signal}),s}update(e){d(this,Si)&&(d(this,Si).value=e)}destroy(){var e;(e=d(this,Si))==null||e.remove(),E(this,Si,null)}hideDropdown(){}};Si=new WeakMap,Hg=new WeakMap,tf=new WeakMap,Wg=new WeakMap,N(xc,Wg,null);let jx=xc;function GN(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Sp(n){return Math.max(0,Math.min(255,255*n))}class qN{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Sp(e),[e,e,e]}static G_HTML([e]){const t=GN(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Sp)}static RGB_HTML(e){return`#${e.map(GN).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[Sp(1-Math.min(1,e+s)),Sp(1-Math.min(1,r+s)),Sp(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class Pq{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ze("Abstract method `_createSVG` called.")}}class Tx extends Pq{_createSVG(e){return document.createElementNS(sa,e)}}class ED{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const o=i!=="richText",l=e.div;if(l.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);a.append(m),o&&zm.shouldBuildText(s.name)&&u.push(m)}return{textDivs:u}}const h=[[s,-1,a]];for(;h.length>0;){const[m,y,g]=h.at(-1);if(y+1===m.children.length){h.pop();continue}const x=m.children[++h.at(-1)[1]];if(x===null)continue;const{name:v}=x;if(v==="#text"){const _=document.createTextNode(x.value);u.push(_),g.append(_);continue}const w=(f=x==null?void 0:x.attributes)!=null&&f.xmlns?document.createElementNS(x.attributes.xmlns,v):document.createElement(v);if(g.append(w),x.attributes&&this.setAttributes({html:w,element:x,storage:t,intent:i,linkService:r}),((p=x.children)==null?void 0:p.length)>0)h.push([x,-1,w]);else if(x.value){const _=document.createTextNode(x.value);o&&zm.shouldBuildText(v)&&u.push(_),w.append(_)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const jq=9,Zu=new WeakSet,Tq=new Date().getTimezoneOffset()*60*1e3;class YN{static create(e){switch(e.data.annotationType){case Lt.LINK:return new xC(e);case Lt.TEXT:return new Rq(e);case Lt.WIDGET:switch(e.data.fieldType){case"Tx":return new Mq(e);case"Btn":return e.data.radioButton?new kD(e):e.data.checkBox?new Dq(e):new Lq(e);case"Ch":return new Oq(e);case"Sig":return new Iq(e)}return new od(e);case Lt.POPUP:return new $S(e);case Lt.FREETEXT:return new RD(e);case Lt.LINE:return new $q(e);case Lt.SQUARE:return new Bq(e);case Lt.CIRCLE:return new zq(e);case Lt.POLYLINE:return new MD(e);case Lt.CARET:return new Hq(e);case Lt.INK:return new wC(e);case Lt.POLYGON:return new Uq(e);case Lt.HIGHLIGHT:return new ID(e);case Lt.UNDERLINE:return new Wq(e);case Lt.SQUIGGLY:return new Vq(e);case Lt.STRIKEOUT:return new Gq(e);case Lt.STAMP:return new DD(e);case Lt.FILEATTACHMENT:return new qq(e);default:return new It(e)}}}var uu,nf,Ma,Vg,FS;const HC=class HC{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){N(this,Vg);N(this,uu,null);N(this,nf,!1);N(this,Ma,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return HC._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;e.rect&&(d(this,uu)||E(this,uu,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&P(this,Vg,FS).call(this,t);let s=((i=d(this,Ma))==null?void 0:i.popup)||this.popup;!s&&(r!=null&&r.text)&&(this._createPopup(r),s=d(this,Ma).popup),s&&(s.updateEdited(e),r!=null&&r.deleted&&(s.remove(),E(this,Ma,null),this.popup=null))}resetEdited(){var e;d(this,uu)&&(P(this,Vg,FS).call(this,d(this,uu).rect),(e=d(this,Ma))==null||e.popup.resetEdited(),E(this,uu,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof od)&&!(this instanceof xC)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof $S){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(g>0||x>0){const w=`calc(${g}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;a.borderRadius=w}else if(this instanceof kD){const w=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=w}switch(t.borderStyle.style){case Nd.SOLID:a.borderStyle="solid";break;case Nd.DASHED:a.borderStyle="dashed";break;case Nd.BEVELED:xe("Unimplemented border style: beveled");break;case Nd.INSET:xe("Unimplemented border style: inset");break;case Nd.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(E(this,nf,!0),a.borderColor=de.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const u=de.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:f,pageX:p,pageY:m}=s.rawDims;a.left=`${100*(u[0]-p)/h}%`,a.top=`${100*(u[1]-m)/f}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(a.width=`${100*o/h}%`,a.height=`${100*l/f}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*a/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[r]=qN[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:qN[`${a}_rgb`](o)})};return Pe(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,x,v,w]=e.subarray(2,6);if(s===g&&i===x&&t===v&&r===w)return}const{style:a}=this.container;let o;if(d(this,nf)){const{borderColor:g,borderWidth:x}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const l=s-t,u=i-r,{svgFactory:h}=this,f=h.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const p=h.createElement("defs");f.append(p);const m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let g=2,x=e.length;g<x;g+=8){const v=e[g],w=e[g+1],_=e[g+2],S=e[g+3],C=h.createElement("rect"),A=(_-t)/l,k=(i-w)/u,j=(v-_)/l,T=(w-S)/u;C.setAttribute("x",A),C.setAttribute("y",k),C.setAttribute("width",j),C.setAttribute("height",T),m.append(C),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${A}" y="${k}" width="${j}" height="${T}"/>`)}d(this,nf)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate);const i=E(this,Ma,new $S({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(i.render())}get hasPopupElement(){return!!(d(this,Ma)||this.popup||this.data.popupRef)}render(){Ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Zu.has(u)){xe(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:u})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&Zu.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};uu=new WeakMap,nf=new WeakMap,Ma=new WeakMap,Vg=new WeakSet,FS=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+l)/a}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(s)};let It=HC;var Fr,fc,CD,AD;class xC extends It{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});N(this,Fr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(P(this,Fr,CD).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(P(this,Fr,AD).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r,s=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&P(this,Fr,fc).call(this),s&&(t.title=s)}_bindNamedAction(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),s&&(t.title=s),P(this,Fr,fc).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),P(this,Fr,fc).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),P(this,Fr,fc).call(this),!this._fieldObjects){xe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:a,include:o}=r,l=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:g}of y)p.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===o&&l.push(y)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const u=this.annotationStorage,h=[];for(const p of l){const{id:m}=p;switch(h.push(m),p.type){case"text":{const g=p.defaultValue||"";u.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=p.defaultValue===p.exportValues;u.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=p.defaultValue||"";u.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Zu.has(y)){xe(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Fr=new WeakSet,fc=function(){this.container.setAttribute("data-internal-link","")},CD=function(t,r,s="",i=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:s&&(t.title=s),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,i),!1},P(this,Fr,fc).call(this)},AD=function(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),s&&(t.title=s),P(this,Fr,fc).call(this)};class Rq extends It{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class od extends It{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return bn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,r,s){var i,a,o;for(const[l,u]of r)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,s),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":de.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||jq,i=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(i1*s))||1,f=u/h;a=Math.min(s,l(f/i1))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(u/i1))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=de.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Mq extends od{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Zu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;f&&(r.title=f),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(r,"value",x.target.value,"value"),h.formattedValue=null}),r.addEventListener("resetform",x=>{const v=this.data.defaultFieldValue??"";r.value=h.userValue=v,h.formattedValue=null});let g=x=>{const{formattedValue:v}=h;v!=null&&(x.target.value=v),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var _;if(h.focused)return;const{target:w}=v;if(y&&(w.type=p,m&&(w.step=m)),h.userValue){const S=h.userValue;if(y)if(p==="time"){const C=new Date(S),A=[C.getHours(),C.getMinutes(),C.getSeconds()];w.value=A.map(k=>k.toString().padStart(2,"0")).join(":")}else w.value=new Date(S-Tq).toISOString().split(p==="date"?"T":".",1)[0];else w.value=S}h.lastCommittedValue=w.value,h.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(h.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const w={value(_){h.userValue=_.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:S}=_.detail;h.formattedValue=S,S!=null&&_.target!==document.activeElement&&(_.target.value=S);const C={formattedValue:S};y&&(C.value=S),e.setValue(t,C)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var k;const{charLimit:S}=_.detail,{target:C}=_;if(S===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",S);let A=h.userValue;!A||A.length<=S||(A=A.slice(0,S),C.value=h.userValue=A,e.setValue(t,{value:A}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(w,v)}),r.addEventListener("keydown",v=>{var S;h.commitKey=1;let w=-1;if(v.key==="Escape"?w=0:v.key==="Enter"&&!this.data.multiLine?w=2:v.key==="Tab"&&(h.commitKey=3),w===-1)return;const{value:_}=v.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:w,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const x=g;g=null,r.addEventListener("blur",v=>{var S,C;if(!h.focused||!v.relatedTarget)return;(S=this.data.actions)!=null&&S.Blur||(h.focused=!1);const{target:w}=v;let{value:_}=w;if(y){if(_&&p==="time"){const A=_.split(":").map(k=>parseInt(k,10));_=new Date(2e3,0,1,A[0],A[1],A[2]||0).valueOf(),w.step=""}else _=new Date(_).valueOf();w.type="text"}h.userValue=_,h.lastCommittedValue!==_&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),x(v)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",v=>{var T;h.lastCommittedValue=null;const{data:w,target:_}=v,{value:S,selectionStart:C,selectionEnd:A}=_;let k=C,j=A;switch(v.inputType){case"deleteWordBackward":{const M=S.substring(0,C).match(/\w*[^\w]*$/);M&&(k-=M[0].length);break}case"deleteWordForward":{const M=S.substring(C).match(/^[^\w]*\w*/);M&&(j+=M[0].length);break}case"deleteContentBackward":C===A&&(k-=1);break;case"deleteContentForward":C===A&&(j+=1);break}v.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,change:w||"",willCommit:!1,selStart:k,selEnd:j}})}),this._setEventListeners(r,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&r.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Iq extends od{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Dq extends od{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Zu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,r)){const h=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class kD extends od{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Zu.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const h=a===u.detail.value;for(const f of this._getElementsByName(u.target.name)){const p=h&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Lq extends xC{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Oq extends od{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Zu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const h of this.data.options){const f=document.createElement("option");f.textContent=h.displayValue,f.value=h.exportValue,r.value.includes(h.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let a=null;if(i){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),a=()=>{h.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=h=>{const f=h?"value":"textContent",{options:p,multiple:m}=s;return m?Array.prototype.filter.call(p,y=>y.selected).map(y=>y[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=o(!1);const u=h=>{const f=h.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const f={value(p){a==null||a();const m=p.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of s.options)g.selected=y.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(p){s.multiple=!0},remove(p){const m=s.options,y=p.detail.remove;m[y].selected=!1,s.remove(y),m.length>0&&Array.prototype.findIndex.call(m,x=>x.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},clear(p){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(p){const{index:m,displayValue:y,exportValue:g}=p.detail.insert,x=s.children[m],v=document.createElement("option");v.textContent=y,v.value=g,x?x.before(v):s.append(v),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},items(p){const{items:m}=p.detail;for(;s.length!==0;)s.remove(0);for(const y of m){const{displayValue:g,exportValue:x}=y,v=document.createElement("option");v.textContent=g,v.value=x,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},indices(p){const m=new Set(p.detail.indices);for(const y of p.target.options)y.selected=m.has(y.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,h)}),s.addEventListener("input",h=>{var m;const f=o(!0),p=o(!1);e.setValue(t,{value:f}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $S extends It{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:It._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new Fq({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${fC}${s}`).join(",")),this.container}}var rf,Qx,Jx,sf,af,Et,Ia,al,of,Gg,lf,Ei,Sr,ol,Da,qg,La,cf,du,ll,Ue,wy,by,BS,ND,PD,jD,TD,_y,Sy,zS;class Fq{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:l,rect:u,parentRect:h,open:f}){N(this,Ue);N(this,rf,P(this,Ue,jD).bind(this));N(this,Qx,P(this,Ue,zS).bind(this));N(this,Jx,P(this,Ue,Sy).bind(this));N(this,sf,P(this,Ue,_y).bind(this));N(this,af,null);N(this,Et,null);N(this,Ia,null);N(this,al,null);N(this,of,null);N(this,Gg,null);N(this,lf,null);N(this,Ei,!1);N(this,Sr,null);N(this,ol,null);N(this,Da,null);N(this,qg,null);N(this,La,null);N(this,cf,null);N(this,du,null);N(this,ll,!1);E(this,Et,e),E(this,cf,s),E(this,Ia,a),E(this,La,o),E(this,Gg,l),E(this,af,t),E(this,qg,u),E(this,lf,h),E(this,of,r),E(this,al,Ax.toDateObject(i)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup()),P(this,Ue,wy).call(this),d(this,Et).hidden=!0,f&&P(this,Ue,_y).call(this)}render(){var s;if(d(this,Sr))return;const e=E(this,Sr,document.createElement("div"));if(e.className="popup",d(this,af)){const i=e.style.outlineColor=de.makeHexColor(...d(this,af));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=d(this,cf))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=d(this,cf)}if(e.append(t),d(this,al)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,al).valueOf()})),i.dateTime=d(this,al).toISOString(),t.append(i)}const r=d(this,Ue,by);if(r)ED.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(d(this,Ia));e.append(i)}d(this,Et).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const o=s[i];r.append(document.createTextNode(o)),i<a-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popup:t,deleted:r}){var s;if(r||t!=null&&t.deleted){this.remove();return}P(this,Ue,wy).call(this),d(this,du)||E(this,du,{contentsObj:d(this,Ia),richText:d(this,La)}),e&&E(this,Da,null),t&&(E(this,La,P(this,Ue,PD).call(this,t.text)),E(this,al,Ax.toDateObject(t.date)),E(this,Ia,null)),(s=d(this,Sr))==null||s.remove(),E(this,Sr,null)}resetEdited(){var e;d(this,du)&&({contentsObj:Zt(this,Ia)._,richText:Zt(this,La)._}=d(this,du),E(this,du,null),(e=d(this,Sr))==null||e.remove(),E(this,Sr,null),E(this,Da,null))}remove(){var e,t;(e=d(this,ol))==null||e.abort(),E(this,ol,null),(t=d(this,Sr))==null||t.remove(),E(this,Sr,null),E(this,ll,!1),E(this,Ei,!1);for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){E(this,ll,this.isVisible),d(this,ll)&&(d(this,Et).hidden=!0)}maybeShow(){P(this,Ue,wy).call(this),d(this,ll)&&(d(this,Sr)||P(this,Ue,Sy).call(this),E(this,ll,!1),d(this,Et).hidden=!1)}get isVisible(){return d(this,Et).hidden===!1}}rf=new WeakMap,Qx=new WeakMap,Jx=new WeakMap,sf=new WeakMap,af=new WeakMap,Et=new WeakMap,Ia=new WeakMap,al=new WeakMap,of=new WeakMap,Gg=new WeakMap,lf=new WeakMap,Ei=new WeakMap,Sr=new WeakMap,ol=new WeakMap,Da=new WeakMap,qg=new WeakMap,La=new WeakMap,cf=new WeakMap,du=new WeakMap,ll=new WeakMap,Ue=new WeakSet,wy=function(){var t;if(d(this,ol))return;E(this,ol,new AbortController);const{signal:e}=d(this,ol);for(const r of this.trigger)r.addEventListener("click",d(this,sf),{signal:e}),r.addEventListener("mouseenter",d(this,Jx),{signal:e}),r.addEventListener("mouseleave",d(this,Qx),{signal:e}),r.classList.add("popupTriggerArea");for(const r of d(this,of))(t=r.container)==null||t.addEventListener("keydown",d(this,rf),{signal:e})},by=function(){const e=d(this,La),t=d(this,Ia);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&d(this,La).html||null},BS=function(){var e,t,r;return((r=(t=(e=d(this,Ue,by))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},ND=function(){var e,t,r;return((r=(t=(e=d(this,Ue,by))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},PD=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:d(this,Ue,ND),fontSize:d(this,Ue,BS)?`calc(${d(this,Ue,BS)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},jD=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&d(this,Ei))&&P(this,Ue,_y).call(this)},TD=function(){if(d(this,Da)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=d(this,Gg);let a=!!d(this,lf),o=a?d(this,lf):d(this,qg);for(const y of d(this,of))if(!o||de.intersect(y.data.rect,o)!==null){o=y.data.rect,a=!0;break}const l=de.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,f=l[0]+h,p=l[1];E(this,Da,[100*(f-s)/t,100*(p-i)/r]);const{style:m}=d(this,Et);m.left=`${d(this,Da)[0]}%`,m.top=`${d(this,Da)[1]}%`},_y=function(){E(this,Ei,!d(this,Ei)),d(this,Ei)?(P(this,Ue,Sy).call(this),d(this,Et).addEventListener("click",d(this,sf)),d(this,Et).addEventListener("keydown",d(this,rf))):(P(this,Ue,zS).call(this),d(this,Et).removeEventListener("click",d(this,sf)),d(this,Et).removeEventListener("keydown",d(this,rf)))},Sy=function(){d(this,Sr)||this.render(),this.isVisible?d(this,Ei)&&d(this,Et).classList.add("focused"):(P(this,Ue,TD).call(this),d(this,Et).hidden=!1,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)+1e3)},zS=function(){d(this,Et).classList.remove("focused"),!(d(this,Ei)||!this.isVisible)&&(d(this,Et).hidden=!0,d(this,Et).style.zIndex=parseInt(d(this,Et).style.zIndex)-1e3)};class RD extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ye.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Yg;class $q extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Yg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=E(this,Yg,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Yg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yg=new WeakMap;var Kg;class Bq extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Kg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=E(this,Kg,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kg=new WeakMap;var Xg;class zq extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Xg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=E(this,Xg,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",s/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Xg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xg=new WeakMap;var Qg;class MD extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Qg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let u=[];for(let f=0,p=r.length;f<p;f+=2){const m=r[f]-t[0],y=t[3]-r[f+1];u.push(`${m},${y}`)}u=u.join(" ");const h=E(this,Qg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,Qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qg=new WeakMap;class Uq extends MD{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Hq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Jg,hu,Zg,US;class wC extends It{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});N(this,Zg);N(this,Jg,null);N(this,hu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ye.HIGHLIGHT:ye.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:l,height:u}=P(this,Zg,US).call(this,r,t),h=this.svgFactory.create(l,u,!0),f=E(this,Jg,this.svgFactory.createElement("svg:g"));h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let p=0,m=s.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);d(this,hu).push(y),y.setAttribute("points",s[p].join(",")),f.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,a=d(this,Jg);if(r>=0&&a.setAttribute("stroke-width",r||1),s)for(let o=0,l=d(this,hu).length;o<l;o++)d(this,hu)[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:l,height:u}=P(this,Zg,US).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return d(this,hu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jg=new WeakMap,hu=new WeakMap,Zg=new WeakSet,US=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class ID extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ye.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Wq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Vq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Gq extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class DD extends It{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ye.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ev,tv,HS;class qq extends It{constructor(t){var s;super(t,{isRenderable:!0});N(this,tv);N(this,ev,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",P(this,tv,HS).bind(this)),E(this,ev,s);const{isMac:i}=bn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&P(this,tv,HS).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return d(this,ev)}addHighlightArea(){this.container.classList.add("highlightArea")}}ev=new WeakMap,tv=new WeakSet,HS=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var nv,fu,cl,rv,Gl,VS,GS;const WC=class WC{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:o}){N(this,Gl);N(this,nv,null);N(this,fu,null);N(this,cl,new Map);N(this,rv,null);this.div=e,E(this,nv,t),E(this,fu,r),E(this,rv,o||null),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return d(this,cl).size>0}async render(e){var a;const{annotations:t}=e,r=this.div;Qu(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Tx,annotationStorage:e.annotationStorage||new gC,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===Lt.POPUP;if(l){const f=s.get(o.id);if(!f)continue;i.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;i.data=o;const u=YN.create(i);if(!u.isRenderable)continue;if(!l&&o.popupRef){const f=s.get(o.popupRef);f?f.push(u):s.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),await P(this,Gl,VS).call(this,h,o.id,i.elements),u._isEditable&&(d(this,cl).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}P(this,Gl,GS).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new Tx,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=WC._defaultBorderStyle),r.data=s;const i=YN.create(r);if(!i.isRenderable)continue;const a=i.render();await P(this,Gl,VS).call(this,a,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Qu(t,{rotation:e.rotation}),P(this,Gl,GS).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(d(this,cl).values())}getEditableAnnotation(e){return d(this,cl).get(e)}static get _defaultBorderStyle(){return Pe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Nd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};nv=new WeakMap,fu=new WeakMap,cl=new WeakMap,rv=new WeakMap,Gl=new WeakSet,VS=async function(e,t,r){var o,l;const s=e.firstChild||e,i=s.id=`${fC}${t}`,a=await((o=d(this,rv))==null?void 0:o.getAriaAttributes(i));if(a)for(const[u,h]of a)s.setAttribute(u,h);r?r.at(-1).container.after(e):(this.div.append(e),(l=d(this,nv))==null||l.moveElementInDOM(this.div,e,s,!1))},GS=function(){var t;if(!d(this,fu))return;const e=this.div;for(const[r,s]of d(this,fu)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=d(this,cl).get(r);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}d(this,fu).clear()};let WS=WC;const F0=/\r\n?|\n/g;var es,Er,sv,pu,Cr,Ut,LD,OD,FD,Ey,Xa,Cy,Ay,$D,YS,BD;const tt=class tt extends rt{constructor(t){super({...t,name:"freeTextEditor"});N(this,Ut);N(this,es);N(this,Er,"");N(this,sv,`${this.id}-editor`);N(this,pu,null);N(this,Cr);Y(this,"_colorPicker",null);E(this,es,t.color||tt._defaultColor||rt._defaultLineColor),E(this,Cr,t.fontSize||tt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=tt.prototype,r=a=>a.isEmpty(),s=Ju.TRANSLATE_SMALL,i=Ju.TRANSLATE_BIG;return Pe(this,"_keyboardManager",new Gv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){rt.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case De.FREETEXT_SIZE:tt._defaultFontSize=r;break;case De.FREETEXT_COLOR:tt._defaultColor=r;break}}updateParams(t,r){switch(t){case De.FREETEXT_SIZE:P(this,Ut,LD).call(this,r);break;case De.FREETEXT_COLOR:P(this,Ut,OD).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[De.FREETEXT_SIZE,tt._defaultFontSize],[De.FREETEXT_COLOR,tt._defaultColor||rt._defaultLineColor]]}get propertiesToUpdate(){return[[De.FREETEXT_SIZE,d(this,Cr)],[De.FREETEXT_COLOR,d(this,es)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new jx(this)),[["colorPicker",this._colorPicker]]}get colorType(){return De.FREETEXT_COLOR}get colorValue(){return d(this,es)}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-tt._internalPadding*t,-(tt._internalPadding+d(this,Cr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),E(this,pu,new AbortController);const t=this._uiManager.combinedSignal(d(this,pu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,sv)),this._isDraggable=!0,(t=d(this,pu))==null||t.abort(),E(this,pu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=d(this,Er),r=E(this,Er,P(this,Ut,FD).call(this).trimEnd());if(t===r)return;const s=i=>{if(E(this,Er,i),!i){this.remove();return}P(this,Ut,Ay).call(this),this._uiManager.rebuild(this),P(this,Ut,Ey).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),P(this,Ut,Ey).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){tt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,sv)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${d(this,Cr)}px * var(--total-scale-factor))`,s.color=d(this,es),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(o[0]-p)/h,g=r+this.height-(o[1]-m)/f;break;case 90:y=t+(o[0]-p)/h,g=r-(o[1]-m)/f,[l,u]=[u,-l];break;case 180:y=t-this.width+(o[0]-p)/h,g=r-(o[1]-m)/f,[l,u]=[-l,-u];break;case 270:y=t+(o[0]-p-this.height*f)/h,g=r+(o[1]-m-this.width*h)/f,[l,u]=[-u,l];break}this.setAt(y*i,g*a,l,u)}else this._moveAfterPaste(t,r);P(this,Ut,Ay).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,x;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=P(y=tt,Xa,YS).call(y,r.getData("text")||"").replaceAll(F0,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,h=[],f=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(f.push(l.nodeValue.slice(u).replaceAll(F0,"")),v!==this.editorDiv){let w=h;for(const _ of this.editorDiv.childNodes){if(_===v){w=f;continue}w.push(P(g=tt,Xa,Cy).call(g,_))}}h.push(l.nodeValue.slice(0,u).replaceAll(F0,""))}else if(l===this.editorDiv){let v=h,w=0;for(const _ of this.editorDiv.childNodes)w++===u&&(v=f),v.push(P(x=tt,Xa,Cy).call(x,_))}E(this,Er,`${h.join(`
`)}${i}${f.join(`
`)}`),P(this,Ut,Ay).call(this);const p=new Range;let m=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const w=v.nodeValue.length;if(m<=w){p.setStart(v,m),p.setEnd(v,m);break}m-=w}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,s){var o;let i=null;if(t instanceof RD){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:f,id:p,popupRef:m,contentsObj:y},textContent:g,textPosition:x,parent:{page:{pageNumber:v}}}=t;if(!g||g.length===0)return null;i=t={annotationType:ye.FREETEXT,color:Array.from(u),fontSize:l,value:g.join(`
`),position:x,pageIndex:v-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:(y==null?void 0:y.str)||null}}const a=await super.deserialize(t,r,s);return E(a,Cr,t.fontSize),E(a,es,de.makeHexColor(...t.color)),E(a,Er,P(o=tt,Xa,YS).call(o,t.value)),a._initialData=i,t.comment&&a.setCommentData(t.comment),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=tt._internalPadding*this.parentScale,s=this.getRect(r,r),i=rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,es)),a={annotationType:ye.FREETEXT,color:i,fontSize:d(this,Cr),value:P(this,Ut,$D).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),t?(a.isCopy=!0,a):this.annotationElementId&&!P(this,Ut,BD).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t),{style:s}=r;s.fontSize=`calc(${d(this,Cr)}px * var(--total-scale-factor))`,s.color=d(this,es),r.replaceChildren();for(const o of d(this,Er).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),r.append(l)}const i=tt._internalPadding*this.parentScale,a={rect:this.getRect(i,i)};return a.popup=this.hasEditedComment?this.comment:{text:d(this,Er)},t.updateEdited(a),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};es=new WeakMap,Er=new WeakMap,sv=new WeakMap,pu=new WeakMap,Cr=new WeakMap,Ut=new WeakSet,LD=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-d(this,Cr))*this.parentScale),E(this,Cr,i),P(this,Ut,Ey).call(this)},s=d(this,Cr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},OD=function(t){const r=i=>{var a;E(this,es,this.editorDiv.style.color=i),(a=this._colorPicker)==null||a.update(i)},s=d(this,es);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},FD=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(P(s=tt,Xa,Cy).call(s,i)),r=i);return t.join(`
`)},Ey=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Xa=new WeakSet,Cy=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(F0,"")},Ay=function(){if(this.editorDiv.replaceChildren(),!!d(this,Er))for(const t of d(this,Er).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},$D=function(){return d(this,Er).replaceAll(" "," ")},YS=function(t){return t.replaceAll(" "," ")},BD=function(t){const{value:r,fontSize:s,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((o,l)=>o!==i[l])||t.pageIndex!==a},N(tt,Xa),Y(tt,"_freeTextDefaultContent",""),Y(tt,"_internalPadding",0),Y(tt,"_defaultColor",null),Y(tt,"_defaultFontSize",10),Y(tt,"_type","freetext"),Y(tt,"_editorType",ye.FREETEXT);let qS=tt;class ne{toSVGPath(){Ze("Abstract method `toSVGPath` must be implemented.")}get box(){Ze("Abstract getter `box` must be implemented.")}serialize(e,t){Ze("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*s,a[o+1]=r+e[o+1]*i;return a}static _rescaleAndSwap(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*s,a[o+1]=r+e[o]*i;return a}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,a){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+a)/6,(r+i)/2,(s+a)/2]}}Y(ne,"PRECISION",1e-4);var Ar,Is,uf,df,Ci,Ne,mu,gu,iv,av,hf,ff,ul,ov,Zx,ew,Jt,Vp,zD,UD,HD,WD,VD,GD;const ua=class ua{constructor({x:e,y:t},r,s,i,a,o=0){N(this,Jt);N(this,Ar);N(this,Is,[]);N(this,uf);N(this,df);N(this,Ci,[]);N(this,Ne,new Float32Array(18));N(this,mu);N(this,gu);N(this,iv);N(this,av);N(this,hf);N(this,ff);N(this,ul,[]);E(this,Ar,r),E(this,ff,i*s),E(this,df,a),d(this,Ne).set([NaN,NaN,NaN,NaN,e,t],6),E(this,uf,o),E(this,av,d(ua,ov)*s),E(this,iv,d(ua,ew)*s),E(this,hf,s),d(this,ul).push(e,t)}isEmpty(){return isNaN(d(this,Ne)[8])}add({x:e,y:t}){var T;E(this,mu,e),E(this,gu,t);const[r,s,i,a]=d(this,Ar);let[o,l,u,h]=d(this,Ne).subarray(8,12);const f=e-u,p=t-h,m=Math.hypot(f,p);if(m<d(this,iv))return!1;const y=m-d(this,av),g=y/m,x=g*f,v=g*p;let w=o,_=l;o=u,l=h,u+=x,h+=v,(T=d(this,ul))==null||T.push(e,t);const S=-v/y,C=x/y,A=S*d(this,ff),k=C*d(this,ff);return d(this,Ne).set(d(this,Ne).subarray(2,8),0),d(this,Ne).set([u+A,h+k],4),d(this,Ne).set(d(this,Ne).subarray(14,18),12),d(this,Ne).set([u-A,h-k],16),isNaN(d(this,Ne)[6])?(d(this,Ci).length===0&&(d(this,Ne).set([o+A,l+k],2),d(this,Ci).push(NaN,NaN,NaN,NaN,(o+A-r)/i,(l+k-s)/a),d(this,Ne).set([o-A,l-k],14),d(this,Is).push(NaN,NaN,NaN,NaN,(o-A-r)/i,(l-k-s)/a)),d(this,Ne).set([w,_,o,l,u,h],6),!this.isEmpty()):(d(this,Ne).set([w,_,o,l,u,h],6),Math.abs(Math.atan2(_-l,w-o)-Math.atan2(v,x))<Math.PI/2?([o,l,u,h]=d(this,Ne).subarray(2,6),d(this,Ci).push(NaN,NaN,NaN,NaN,((o+u)/2-r)/i,((l+h)/2-s)/a),[o,l,w,_]=d(this,Ne).subarray(14,18),d(this,Is).push(NaN,NaN,NaN,NaN,((w+o)/2-r)/i,((_+l)/2-s)/a),!0):([w,_,o,l,u,h]=d(this,Ne).subarray(0,6),d(this,Ci).push(((w+5*o)/6-r)/i,((_+5*l)/6-s)/a,((5*o+u)/6-r)/i,((5*l+h)/6-s)/a,((o+u)/2-r)/i,((l+h)/2-s)/a),[u,h,o,l,w,_]=d(this,Ne).subarray(12,18),d(this,Is).push(((w+5*o)/6-r)/i,((_+5*l)/6-s)/a,((5*o+u)/6-r)/i,((5*l+h)/6-s)/a,((o+u)/2-r)/i,((l+h)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=d(this,Ci),t=d(this,Is);if(isNaN(d(this,Ne)[6])&&!this.isEmpty())return P(this,Jt,zD).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);P(this,Jt,HD).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return P(this,Jt,UD).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,a){return new qD(e,t,r,s,i,a)}getOutlines(){var f;const e=d(this,Ci),t=d(this,Is),r=d(this,Ne),[s,i,a,o]=d(this,Ar),l=new Float32Array((((f=d(this,ul))==null?void 0:f.length)??0)+2);for(let p=0,m=l.length-2;p<m;p+=2)l[p]=(d(this,ul)[p]-s)/a,l[p+1]=(d(this,ul)[p+1]-i)/o;if(l[l.length-2]=(d(this,mu)-s)/a,l[l.length-1]=(d(this,gu)-i)/o,isNaN(r[6])&&!this.isEmpty())return P(this,Jt,WD).call(this,l);const u=new Float32Array(d(this,Ci).length+24+d(this,Is).length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){u[p]=u[p+1]=NaN;continue}u[p]=e[p],u[p+1]=e[p+1]}h=P(this,Jt,GD).call(this,u,h);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[p+m],u[h+1]=t[p+m+1],h+=2}return P(this,Jt,VD).call(this,u,h),this.newFreeDrawOutline(u,l,d(this,Ar),d(this,hf),d(this,uf),d(this,df))}};Ar=new WeakMap,Is=new WeakMap,uf=new WeakMap,df=new WeakMap,Ci=new WeakMap,Ne=new WeakMap,mu=new WeakMap,gu=new WeakMap,iv=new WeakMap,av=new WeakMap,hf=new WeakMap,ff=new WeakMap,ul=new WeakMap,ov=new WeakMap,Zx=new WeakMap,ew=new WeakMap,Jt=new WeakSet,Vp=function(){const e=d(this,Ne).subarray(4,6),t=d(this,Ne).subarray(16,18),[r,s,i,a]=d(this,Ar);return[(d(this,mu)+(e[0]-t[0])/2-r)/i,(d(this,gu)+(e[1]-t[1])/2-s)/a,(d(this,mu)+(t[0]-e[0])/2-r)/i,(d(this,gu)+(t[1]-e[1])/2-s)/a]},zD=function(){const[e,t,r,s]=d(this,Ar),[i,a,o,l]=P(this,Jt,Vp).call(this);return`M${(d(this,Ne)[2]-e)/r} ${(d(this,Ne)[3]-t)/s} L${(d(this,Ne)[4]-e)/r} ${(d(this,Ne)[5]-t)/s} L${i} ${a} L${o} ${l} L${(d(this,Ne)[16]-e)/r} ${(d(this,Ne)[17]-t)/s} L${(d(this,Ne)[14]-e)/r} ${(d(this,Ne)[15]-t)/s} Z`},UD=function(e){const t=d(this,Is);e.push(`L${t[4]} ${t[5]} Z`)},HD=function(e){const[t,r,s,i]=d(this,Ar),a=d(this,Ne).subarray(4,6),o=d(this,Ne).subarray(16,18),[l,u,h,f]=P(this,Jt,Vp).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${l} ${u} L${h} ${f} L${(o[0]-t)/s} ${(o[1]-r)/i}`)},WD=function(e){const t=d(this,Ne),[r,s,i,a]=d(this,Ar),[o,l,u,h]=P(this,Jt,Vp).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(f,e,d(this,Ar),d(this,hf),d(this,uf),d(this,df))},VD=function(e,t){const r=d(this,Is);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},GD=function(e,t){const r=d(this,Ne).subarray(4,6),s=d(this,Ne).subarray(16,18),[i,a,o,l]=d(this,Ar),[u,h,f,p]=P(this,Jt,Vp).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/l],t),t+=24},N(ua,ov,8),N(ua,Zx,2),N(ua,ew,d(ua,ov)+d(ua,Zx));let Rx=ua;var pf,vu,Oa,lv,kr,cv,Nt,tw,YD;class qD extends ne{constructor(t,r,s,i,a,o){super();N(this,tw);N(this,pf);N(this,vu,new Float32Array(4));N(this,Oa);N(this,lv);N(this,kr);N(this,cv);N(this,Nt);E(this,Nt,t),E(this,kr,r),E(this,pf,s),E(this,cv,i),E(this,Oa,a),E(this,lv,o),this.lastPoint=[NaN,NaN],P(this,tw,YD).call(this,o);const[l,u,h,f]=d(this,vu);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-l)/h,t[p+1]=(t[p+1]-u)/f;for(let p=0,m=r.length;p<m;p+=2)r[p]=(r[p]-l)/h,r[p+1]=(r[p+1]-u)/f}toSVGPath(){const t=[`M${d(this,Nt)[4]} ${d(this,Nt)[5]}`];for(let r=6,s=d(this,Nt).length;r<s;r+=6){if(isNaN(d(this,Nt)[r])){t.push(`L${d(this,Nt)[r+4]} ${d(this,Nt)[r+5]}`);continue}t.push(`C${d(this,Nt)[r]} ${d(this,Nt)[r+1]} ${d(this,Nt)[r+2]} ${d(this,Nt)[r+3]} ${d(this,Nt)[r+4]} ${d(this,Nt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],a){const o=s-t,l=i-r;let u,h;switch(a){case 0:u=ne._rescale(d(this,Nt),t,i,o,-l),h=ne._rescale(d(this,kr),t,i,o,-l);break;case 90:u=ne._rescaleAndSwap(d(this,Nt),t,r,o,l),h=ne._rescaleAndSwap(d(this,kr),t,r,o,l);break;case 180:u=ne._rescale(d(this,Nt),s,r,-o,l),h=ne._rescale(d(this,kr),s,r,-o,l);break;case 270:u=ne._rescaleAndSwap(d(this,Nt),s,i,-o,-l),h=ne._rescaleAndSwap(d(this,kr),s,i,-o,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return d(this,vu)}newOutliner(t,r,s,i,a,o=0){return new Rx(t,r,s,i,a,o)}getNewOutline(t,r){const[s,i,a,o]=d(this,vu),[l,u,h,f]=d(this,pf),p=a*h,m=o*f,y=s*h+l,g=i*f+u,x=this.newOutliner({x:d(this,kr)[0]*p+y,y:d(this,kr)[1]*m+g},d(this,pf),d(this,cv),t,d(this,lv),r??d(this,Oa));for(let v=2;v<d(this,kr).length;v+=2)x.add({x:d(this,kr)[v]*p+y,y:d(this,kr)[v+1]*m+g});return x.getOutlines()}}pf=new WeakMap,vu=new WeakMap,Oa=new WeakMap,lv=new WeakMap,kr=new WeakMap,cv=new WeakMap,Nt=new WeakMap,tw=new WeakSet,YD=function(t){const r=d(this,Nt);let s=r[4],i=r[5];const a=[s,i,s,i];let o=s,l=i;const u=t?Math.max:Math.min;for(let f=6,p=r.length;f<p;f+=6){const m=r[f+4],y=r[f+5];if(isNaN(r[f]))de.pointBoundingBox(m,y,a),l<y?(o=m,l=y):l===y&&(o=u(o,m));else{const g=[1/0,1/0,-1/0,-1/0];de.bezierBoundingBox(s,i,...r.slice(f,f+6),g),de.rectBoundingBox(...g,a),l<g[3]?(o=g[2],l=g[3]):l===g[3]&&(o=u(o,g[2]))}s=m,i=y}const h=d(this,vu);h[0]=a[0]-d(this,Oa),h[1]=a[1]-d(this,Oa),h[2]=a[2]-a[0]+2*d(this,Oa),h[3]=a[3]-a[1]+2*d(this,Oa),this.lastPoint=[o,l]};var uv,dv,dl,Ds,Qn,KD,ky,XD,QD,XS;class KS{constructor(e,t=0,r=0,s=!0){N(this,Qn);N(this,uv);N(this,dv);N(this,dl,[]);N(this,Ds,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:y,y:g,width:x,height:v}of e){const w=Math.floor((y-t)/o)*o,_=Math.ceil((y+x+t)/o)*o,S=Math.floor((g-t)/o)*o,C=Math.ceil((g+v+t)/o)*o,A=[w,S,C,!0],k=[_,S,C,!1];d(this,dl).push(A,k),de.rectBoundingBox(w,S,_,C,i)}const l=i[2]-i[0]+2*r,u=i[3]-i[1]+2*r,h=i[0]-r,f=i[1]-r,p=d(this,dl).at(s?-1:-2),m=[p[0],p[2]];for(const y of d(this,dl)){const[g,x,v]=y;y[0]=(g-h)/l,y[1]=(x-f)/u,y[2]=(v-f)/u}E(this,uv,new Float32Array([h,f,l,u])),E(this,dv,m)}getOutlines(){d(this,dl).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of d(this,dl))t[3]?(e.push(...P(this,Qn,XS).call(this,t)),P(this,Qn,XD).call(this,t)):(P(this,Qn,QD).call(this,t),e.push(...P(this,Qn,XS).call(this,t)));return P(this,Qn,KD).call(this,e)}}uv=new WeakMap,dv=new WeakMap,dl=new WeakMap,Ds=new WeakMap,Qn=new WeakSet,KD=function(e){const t=[],r=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),r.add(l),r.add(u)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[o,l,u,h,f]=a;r.delete(a);let p=o,m=l;for(i=[o,u],s.push(i);;){let y;if(r.has(h))y=h;else if(r.has(f))y=f;else break;r.delete(y),[o,l,u,h,f]=y,p!==o&&(i.push(p,m,o,m===l?l:u),p=o),m=m===l?u:l}i.push(p,m)}return new Yq(s,d(this,uv),d(this,dv))},ky=function(e){const t=d(this,Ds);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1},XD=function([,e,t]){const r=P(this,Qn,ky).call(this,e);d(this,Ds).splice(r,0,[e,t])},QD=function([,e,t]){const r=P(this,Qn,ky).call(this,e);for(let s=r;s<d(this,Ds).length;s++){const[i,a]=d(this,Ds)[s];if(i!==e)break;if(i===e&&a===t){d(this,Ds).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=d(this,Ds)[s];if(i!==e)break;if(i===e&&a===t){d(this,Ds).splice(s,1);return}}},XS=function(e){const[t,r,s]=e,i=[[t,r,s]],a=P(this,Qn,ky).call(this,s);for(let o=0;o<a;o++){const[l,u]=d(this,Ds)[o];for(let h=0,f=i.length;h<f;h++){const[,p,m]=i[h];if(!(u<=p||m<=l)){if(p>=l){if(m>u)i[h][1]=u;else{if(f===1)return[];i.splice(h,1),h--,f--}continue}i[h][2]=l,m>u&&i.push([t,u,m])}}}return i};var hv,mf;class Yq extends ne{constructor(t,r,s){super();N(this,hv);N(this,mf);E(this,mf,t),E(this,hv,r),this.lastPoint=s}toSVGPath(){const t=[];for(const r of d(this,mf)){let[s,i]=r;t.push(`M${s} ${i}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],a){const o=[],l=s-t,u=i-r;for(const h of d(this,mf)){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=t+h[p]*l,f[p+1]=i-h[p+1]*u;o.push(f)}return o}get box(){return d(this,hv)}get classNamesForOutlining(){return["highlightOutline"]}}hv=new WeakMap,mf=new WeakMap;class QS extends Rx{newFreeDrawOutline(e,t,r,s,i,a){return new Kq(e,t,r,s,i,a)}}class Kq extends qD{newOutliner(e,t,r,s,i,a=0){return new QS(e,t,r,s,i,a)}}var gf,fv,Fa,yu,pv,ir,mv,gv,xu,ts,Nr,pn,vf,$a,Tn,yf,ns,vv,_e,JS,Ny,JD,ZD,eL,ZS,pc,as,Id,tL,Py,Gp,nL,rL,sL,iL,aL;const We=class We extends rt{constructor(t){super({...t,name:"highlightEditor"});N(this,_e);N(this,gf,null);N(this,fv,0);N(this,Fa);N(this,yu,null);N(this,pv,null);N(this,ir,null);N(this,mv,null);N(this,gv,0);N(this,xu,null);N(this,ts,null);N(this,Nr,null);N(this,pn,!1);N(this,vf,null);N(this,$a);N(this,Tn,null);N(this,yf,"");N(this,ns);N(this,vv,"");this.color=t.color||We._defaultColor,E(this,ns,t.thickness||We._defaultThickness),E(this,$a,t.opacity||We._defaultOpacity),E(this,Fa,t.boxes||null),E(this,vv,t.methodOfCreation||""),E(this,yf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(E(this,pn,!0),P(this,_e,Ny).call(this,t),P(this,_e,pc).call(this)):d(this,Fa)&&(E(this,gf,t.anchorNode),E(this,fv,t.anchorOffset),E(this,mv,t.focusNode),E(this,gv,t.focusOffset),P(this,_e,JS).call(this),P(this,_e,pc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=We.prototype;return Pe(this,"_keyboardManager",new Gv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,pn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:d(this,ns),methodOfCreation:d(this,vv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;rt.initialize(t,r),We._defaultColor||(We._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case De.HIGHLIGHT_COLOR:We._defaultColor=r;break;case De.HIGHLIGHT_THICKNESS:We._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return d(this,vf)}updateParams(t,r){switch(t){case De.HIGHLIGHT_COLOR:P(this,_e,JD).call(this,r);break;case De.HIGHLIGHT_THICKNESS:P(this,_e,ZD).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[De.HIGHLIGHT_COLOR,We._defaultColor],[De.HIGHLIGHT_THICKNESS,We._defaultThickness]]}get propertiesToUpdate(){return[[De.HIGHLIGHT_COLOR,this.color||We._defaultColor],[De.HIGHLIGHT_THICKNESS,d(this,ns)||We._defaultThickness],[De.HIGHLIGHT_FREE,d(this,pn)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",E(this,pv,new Px({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,_e,Gp).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,P(this,_e,Gp).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){P(this,_e,ZS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,_e,pc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?P(this,_e,ZS).call(this):t&&(P(this,_e,pc).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,a,o;const{drawLayer:r}=this.parent;let s;d(this,pn)?(t=(t-this.rotation+360)%360,s=P(i=We,as,Id).call(i,d(this,ts).box,t)):s=P(a=We,as,Id).call(a,[this.x,this.y,this.width,this.height],t),r.updateProperties(d(this,Nr),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(d(this,Tn),{bbox:P(o=We,as,Id).call(o,d(this,ir).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();d(this,yf)&&(t.setAttribute("aria-label",d(this,yf)),t.setAttribute("role","mark")),d(this,pn)?t.classList.add("free"):this.div.addEventListener("keydown",P(this,_e,tL).bind(this),{signal:this._uiManager._signal});const r=E(this,xu,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=d(this,yu);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),AI(this,d(this,xu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,Tn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(d(this,Tn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,_e,Py).call(this,!0);break;case 1:case 3:P(this,_e,Py).call(this,!1);break}}select(){var t;super.select(),d(this,Tn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,Tn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),d(this,Tn)&&((t=this.parent)==null||t.drawLayer.updateProperties(d(this,Tn),{rootClass:{selected:!1}}),d(this,pn)||P(this,_e,Py).call(this,!1))}get _mustFixPosition(){return!d(this,pn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(d(this,Nr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(d(this,Tn),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:a}){const{x:o,y:l,width:u,height:h}=s.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),P(this,as,iL).call(this,t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",Ot,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",fs,{signal:p}),s.addEventListener("pointermove",P(this,as,sL).bind(this,t),{signal:p}),this._freeHighlight=new QS({x:i,y:a},[o,l,u,h],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var g,x,v,w;let i=null;if(t instanceof ID){const{data:{quadPoints:_,rect:S,rotation:C,id:A,color:k,opacity:j,popupRef:T,contentsObj:M},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ye.HIGHLIGHT,color:Array.from(k),opacity:j,quadPoints:_,boxes:null,pageIndex:I-1,rect:S.slice(0),rotation:C,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(M==null?void 0:M.str)||null}}else if(t instanceof wC){const{data:{inkLists:_,rect:S,rotation:C,id:A,color:k,borderStyle:{rawWidth:j},popupRef:T,contentsObj:M},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ye.HIGHLIGHT,color:Array.from(k),thickness:j,inkLists:_,boxes:null,pageIndex:I-1,rect:S.slice(0),rotation:C,annotationElementId:A,id:A,deleted:!1,popupRef:T,comment:(M==null?void 0:M.str)||null}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,h=await super.deserialize(t,r,s);h.color=de.makeHexColor(...a),E(h,$a,u||1),l&&E(h,ns,t.thickness),h._initialData=i,t.comment&&h.setCommentData(t.comment);const[f,p]=h.pageDimensions,[m,y]=h.pageTranslation;if(o){const _=E(h,Fa,[]);for(let S=0;S<o.length;S+=8)_.push({x:(o[S]-m)/f,y:1-(o[S+1]-y)/p,width:(o[S+2]-o[S])/f,height:(o[S+1]-o[S+5])/p});P(g=h,_e,JS).call(g),P(x=h,_e,pc).call(x),h.rotate(h.rotation)}else if(l){E(h,pn,!0);const _=l[0],S={x:_[0]-m,y:p-(_[1]-y)},C=new QS(S,[0,0,f,p],1,d(h,ns)/2,!0,.001);for(let j=0,T=_.length;j<T;j+=2)S.x=_[j]-m,S.y=p-(_[j+1]-y),C.add(S);const{id:A,clipPathId:k}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);P(v=h,_e,Ny).call(v,{highlightOutlines:C.getOutlines(),highlightId:A,clipPathId:k}),P(w=h,_e,pc).call(w),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),s=rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:ye.HIGHLIGHT,color:s,opacity:d(this,$a),thickness:d(this,ns),quadPoints:P(this,_e,nL).call(this),outlines:P(this,_e,rL).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:P(this,_e,Gp).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!P(this,_e,aL).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}static canCreateNewEmptyEditor(){return!1}};gf=new WeakMap,fv=new WeakMap,Fa=new WeakMap,yu=new WeakMap,pv=new WeakMap,ir=new WeakMap,mv=new WeakMap,gv=new WeakMap,xu=new WeakMap,ts=new WeakMap,Nr=new WeakMap,pn=new WeakMap,vf=new WeakMap,$a=new WeakMap,Tn=new WeakMap,yf=new WeakMap,ns=new WeakMap,vv=new WeakMap,_e=new WeakSet,JS=function(){const t=new KS(d(this,Fa),.001);E(this,ts,t.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,ts).box;const r=new KS(d(this,Fa),.0025,.001,this._uiManager.direction==="ltr");E(this,ir,r.getOutlines());const{lastPoint:s}=d(this,ir);E(this,vf,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Ny=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var f,p;if(E(this,ts,t),E(this,ir,t.getNewOutline(d(this,ns)/2+1.5,.0025)),r>=0)E(this,Nr,r),E(this,yu,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),E(this,Tn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,ir).box,path:{d:d(this,ir).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,Nr),{bbox:P(f=We,as,Id).call(f,d(this,ts).box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,Tn),{bbox:P(p=We,as,Id).call(p,d(this,ir).box,m),path:{d:d(this,ir).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[m,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*y/m,this.height=u*m/y;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*y/m,this.height=u*m/y;break}}const{lastPoint:h}=d(this,ir);E(this,vf,[(h[0]-a)/l,(h[1]-o)/u])},JD=function(t){const r=(a,o)=>{var l,u;this.color=a,E(this,$a,o),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,Nr),{root:{fill:a,"fill-opacity":o}}),(u=d(this,pv))==null||u.updateColor(a)},s=this.color,i=d(this,$a);this.addCommands({cmd:r.bind(this,t,We._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},ZD=function(t){const r=d(this,ns),s=i=>{E(this,ns,i),P(this,_e,eL).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:De.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},eL=function(t){if(!d(this,pn))return;P(this,_e,Ny).call(this,{highlightOutlines:d(this,ts).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},ZS=function(){d(this,Nr)===null||!this.parent||(this.parent.drawLayer.remove(d(this,Nr)),E(this,Nr,null),this.parent.drawLayer.remove(d(this,Tn)),E(this,Tn,null))},pc=function(t=this.parent){d(this,Nr)===null&&({id:Zt(this,Nr)._,clipPathId:Zt(this,yu)._}=t.drawLayer.draw({bbox:d(this,ts).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,$a)},rootClass:{highlight:!0,free:d(this,pn)},path:{d:d(this,ts).toSVGPath()}},!1,!0),E(this,Tn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,pn)},bbox:d(this,ir).box,path:{d:d(this,ir).toSVGPath()}},d(this,pn))),d(this,xu)&&(d(this,xu).style.clipPath=d(this,yu)))},as=new WeakSet,Id=function([t,r,s,i],a){switch(a){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},tL=function(t){We._keyboardManager.exec(this,t)},Py=function(t){if(!d(this,gf))return;const r=window.getSelection();t?r.setPosition(d(this,gf),d(this,fv)):r.setPosition(d(this,mv),d(this,gv))},Gp=function(){return d(this,pn)?this.rotation:0},nL=function(){if(d(this,pn))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,a=d(this,Fa),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:h,width:f,height:p}of a){const m=u*t+s,y=(1-h)*r+i;o[l]=o[l+4]=m,o[l+1]=o[l+3]=y,o[l+2]=o[l+6]=m+f*t,o[l+5]=o[l+7]=y-p*r,l+=8}return o},rL=function(t){return d(this,ts).serialize(t,P(this,_e,Gp).call(this))},sL=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},iL=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},aL=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==r[i])},N(We,as),Y(We,"_defaultColor",null),Y(We,"_defaultOpacity",1),Y(We,"_defaultThickness",12),Y(We,"_type","highlight"),Y(We,"_editorType",ye.HIGHLIGHT),Y(We,"_freeHighlightId",-1),Y(We,"_freeHighlight",null),Y(We,"_freeHighlightClipId","");let Mx=We;var wu;class oL{constructor(){N(this,wu,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){d(this,wu)[e]=t}toSVGProperties(){const e=d(this,wu);return E(this,wu,Object.create(null)),{root:e}}reset(){E(this,wu,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Ze("Not implemented")}}wu=new WeakMap;var Pr,xf,nn,bu,_u,hl,fl,pl,Su,Fe,e2,t2,n2,qp,lL,jy,Yp,Dd;const ie=class ie extends rt{constructor(t){super(t);N(this,Fe);N(this,Pr,null);N(this,xf);Y(this,"_colorPicker",null);Y(this,"_drawId",null);E(this,xf,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(P(this,Fe,e2).call(this,t),P(this,Fe,qp).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,a]of Object.entries(r))s.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){Ze("Not implemented")}static get typesMap(){Ze("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(d(ie,nn).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,a=i[r],o=l=>{var h,f;i.updateProperty(r,l);const u=d(this,Pr).updateProperty(r,l);u&&P(this,Fe,Yp).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&((f=this._colorPicker)==null||f.update(l))};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,Pr).getPathResizingSVGProperties(P(this,Fe,jy).call(this)),{bbox:P(this,Fe,Dd).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,Pr).getPathResizedSVGProperties(P(this,Fe,jy).call(this)),{bbox:P(this,Fe,Dd).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:P(this,Fe,Dd).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties(d(this,Pr).getPathTranslatedSVGProperties(P(this,Fe,jy).call(this),this.parentDimensions),{bbox:P(this,Fe,Dd).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,xf)&&(E(this,xf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){P(this,Fe,n2).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,Fe,qp).call(this),P(this,Fe,Yp).call(this,d(this,Pr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),P(this,Fe,n2).call(this)):t&&(this._uiManager.addShouldRescale(this),P(this,Fe,qp).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ie._mergeSVGProperties({bbox:P(this,Fe,Dd).call(this)},d(this,Pr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&P(this,Fe,Yp).call(this,d(this,Pr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,o]=this.parentDimensions;return this.setDims(this.width*a,this.height*o),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,a){Ze("Not implemented")}static startDrawing(t,r,s,i){var x;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:h}=i;if(d(ie,fl)&&d(ie,fl)!==h)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=a.getBoundingClientRect(),y=E(ie,bu,new AbortController),g=t.combinedSignal(y);if(d(ie,hl)||E(ie,hl,u),d(ie,fl)??E(ie,fl,h),window.addEventListener("pointerup",v=>{var w;d(ie,hl)===v.pointerId?this._endDraw(v):(w=d(ie,pl))==null||w.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var w;d(ie,hl)===v.pointerId?this._currentParent.endDrawingSession():(w=d(ie,pl))==null||w.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{d(ie,fl)===v.pointerType&&((d(ie,pl)||E(ie,pl,new Set)).add(v.pointerId),d(ie,nn).isCancellable()&&(d(ie,nn).removeLastElement(),d(ie,nn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",fs,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{v.timeStamp===d(ie,Su)&&Ot(v)},{signal:g}),t.toggleDrawing(),(x=r._editorUndoBar)==null||x.hide(),d(ie,nn)){t.drawLayer.updateProperties(this._currentDrawId,d(ie,nn).startNew(o,l,p,m,f));return}r.updateUIForDefaultProperties(this),E(ie,nn,this.createDrawerInstance(o,l,p,m,f)),E(ie,_u,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(d(ie,_u).toSVGProperties(),d(ie,nn).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(E(ie,Su,-1),!d(ie,nn))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(d(ie,hl)===i){if(((a=d(ie,pl))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(ie,nn).add(r,s)),E(ie,Su,t.timeStamp),Ot(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,E(ie,nn,null),E(ie,_u,null),E(ie,fl,null),E(ie,Su,NaN)),d(ie,bu)&&(d(ie,bu).abort(),E(ie,bu,null),E(ie,hl,NaN),E(ie,pl,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,d(ie,nn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=d(ie,nn),i=this._currentDrawId,a=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:De.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(De.DRAW_STEP),!d(ie,nn).isEmpty()){const{pageDimensions:[s,i],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(ie,nn).getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:d(ie,_u),mustBeCommitted:!t});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,a,o){Ze("Not implemented")}static async deserialize(t,r,s){var f,p;const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=r.viewport,u=this.deserializeDraw(o,l,i,a,this._INNER_MARGIN,t),h=await super.deserialize(t,r,s);return h.createDrawingOptions(t),P(f=h,Fe,e2).call(f,{drawOutlines:u}),P(p=h,Fe,qp).call(p),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[r,s]=this.pageTranslation,[i,a]=this.pageDimensions;return d(this,Pr).serialize([r,s,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Pr=new WeakMap,xf=new WeakMap,nn=new WeakMap,bu=new WeakMap,_u=new WeakMap,hl=new WeakMap,fl=new WeakMap,pl=new WeakMap,Su=new WeakMap,Fe=new WeakSet,e2=function({drawOutlines:t,drawId:r,drawingOptions:s}){E(this,Pr,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=P(this,Fe,t2).call(this,t,this.parent),P(this,Fe,Yp).call(this,t.box)},t2=function(t,r){const{id:s}=r.drawLayer.draw(ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},n2=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},qp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=P(this,Fe,t2).call(this,d(this,Pr),t)}},lL=function([t,r,s,i]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},jy=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},Yp=function(t){if([this.x,this.y,this.width,this.height]=P(this,Fe,lL).call(this,t),this.div){this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}this._onResized()},Dd=function(){const{x:t,y:r,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(l/u),i*(u/l),s*(l/u)];case 5:return[1-r,t,s*(l/u),i*(u/l)];case 6:return[1-t-i*(u/l),1-r,i*(u/l),s*(l/u)];case 7:return[r-s*(l/u),1-t-i*(u/l),s*(l/u),i*(u/l)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(u/l),r,i*(u/l),s*(l/u)];case 13:return[1-r-s*(l/u),t-i*(u/l),s*(l/u),i*(u/l)];case 14:return[1-t,1-r-s*(l/u),i*(u/l),s*(l/u)];case 15:return[r,1-t,s*(l/u),i*(u/l)];default:return[t,r,s,i]}},Y(ie,"_currentDrawId",-1),Y(ie,"_currentParent",null),N(ie,nn,null),N(ie,bu,null),N(ie,_u,null),N(ie,hl,NaN),N(ie,fl,null),N(ie,pl,null),N(ie,Su,NaN),Y(ie,"_INNER_MARGIN",3);let Ix=ie;var Ai,rn,sn,Eu,wf,Bn,mn,rs,Cu,Au,ku,bf,Ty;class Xq{constructor(e,t,r,s,i,a){N(this,bf);N(this,Ai,new Float64Array(6));N(this,rn);N(this,sn);N(this,Eu);N(this,wf);N(this,Bn);N(this,mn,"");N(this,rs,0);N(this,Cu,new Yv);N(this,Au);N(this,ku);E(this,Au,r),E(this,ku,s),E(this,Eu,i),E(this,wf,a),[e,t]=P(this,bf,Ty).call(this,e,t);const o=E(this,rn,[NaN,NaN,NaN,NaN,e,t]);E(this,Bn,[e,t]),E(this,sn,[{line:o,points:d(this,Bn)}]),d(this,Ai).set(o,0)}updateProperty(e,t){e==="stroke-width"&&E(this,wf,t)}isEmpty(){return!d(this,sn)||d(this,sn).length===0}isCancellable(){return d(this,Bn).length<=10}add(e,t){[e,t]=P(this,bf,Ty).call(this,e,t);const[r,s,i,a]=d(this,Ai).subarray(2,6),o=e-i,l=t-a;return Math.hypot(d(this,Au)*o,d(this,ku)*l)<=2?null:(d(this,Bn).push(e,t),isNaN(r)?(d(this,Ai).set([i,a,e,t],2),d(this,rn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(d(this,Ai)[0])&&d(this,rn).splice(6,6),d(this,Ai).set([r,s,i,a,e,t],0),d(this,rn).push(...ne.createBezierPoints(r,s,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(d(this,Bn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){E(this,Au,r),E(this,ku,s),E(this,Eu,i),[e,t]=P(this,bf,Ty).call(this,e,t);const a=E(this,rn,[NaN,NaN,NaN,NaN,e,t]);E(this,Bn,[e,t]);const o=d(this,sn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),d(this,sn).push({line:a,points:d(this,Bn)}),d(this,Ai).set(a,0),E(this,rs,0),this.toSVGPath(),null}getLastElement(){return d(this,sn).at(-1)}setLastElement(e){return d(this,sn)?(d(this,sn).push(e),E(this,rn,e.line),E(this,Bn,e.points),E(this,rs,0),{path:{d:this.toSVGPath()}}):d(this,Cu).setLastElement(e)}removeLastElement(){if(!d(this,sn))return d(this,Cu).removeLastElement();d(this,sn).pop(),E(this,mn,"");for(let e=0,t=d(this,sn).length;e<t;e++){const{line:r,points:s}=d(this,sn)[e];E(this,rn,r),E(this,Bn,s),E(this,rs,0),this.toSVGPath()}return{path:{d:d(this,mn)}}}toSVGPath(){const e=ne.svgRound(d(this,rn)[4]),t=ne.svgRound(d(this,rn)[5]);if(d(this,Bn).length===2)return E(this,mn,`${d(this,mn)} M ${e} ${t} Z`),d(this,mn);if(d(this,Bn).length<=6){const s=d(this,mn).lastIndexOf("M");E(this,mn,`${d(this,mn).slice(0,s)} M ${e} ${t}`),E(this,rs,6)}if(d(this,Bn).length===4){const s=ne.svgRound(d(this,rn)[10]),i=ne.svgRound(d(this,rn)[11]);return E(this,mn,`${d(this,mn)} L ${s} ${i}`),E(this,rs,12),d(this,mn)}const r=[];d(this,rs)===0&&(r.push(`M ${e} ${t}`),E(this,rs,6));for(let s=d(this,rs),i=d(this,rn).length;s<i;s+=6){const[a,o,l,u,h,f]=d(this,rn).slice(s,s+6).map(ne.svgRound);r.push(`C${a} ${o} ${l} ${u} ${h} ${f}`)}return E(this,mn,d(this,mn)+r.join(" ")),E(this,rs,d(this,rn).length),d(this,mn)}getOutlines(e,t,r,s){const i=d(this,sn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),d(this,Cu).build(d(this,sn),e,t,r,d(this,Eu),d(this,wf),s),E(this,Ai,null),E(this,rn,null),E(this,sn,null),E(this,mn,null),d(this,Cu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ai=new WeakMap,rn=new WeakMap,sn=new WeakMap,Eu=new WeakMap,wf=new WeakMap,Bn=new WeakMap,mn=new WeakMap,rs=new WeakMap,Cu=new WeakMap,Au=new WeakMap,ku=new WeakMap,bf=new WeakSet,Ty=function(e,t){return ne._normalizePoint(e,t,d(this,Au),d(this,ku),d(this,Eu))};var zn,yv,xv,jr,ki,Ni,_f,Sf,Nu,yn,aa,cL,uL,dL;class Yv extends ne{constructor(){super(...arguments);N(this,yn);N(this,zn);N(this,yv,0);N(this,xv);N(this,jr);N(this,ki);N(this,Ni);N(this,_f);N(this,Sf);N(this,Nu)}build(t,r,s,i,a,o,l){E(this,ki,r),E(this,Ni,s),E(this,_f,i),E(this,Sf,a),E(this,Nu,o),E(this,xv,l??0),E(this,jr,t),P(this,yn,uL).call(this)}get thickness(){return d(this,Nu)}setLastElement(t){return d(this,jr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,jr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of d(this,jr)){if(t.push(`M${ne.svgRound(r[4])} ${ne.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${ne.svgRound(r[10])} ${ne.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[a,o,l,u,h,f]=r.subarray(s,s+6).map(ne.svgRound);t.push(`C${a} ${o} ${l} ${u} ${h} ${f}`)}}return t.join("")}serialize([t,r,s,i],a){const o=[],l=[],[u,h,f,p]=P(this,yn,cL).call(this);let m,y,g,x,v,w,_,S,C;switch(d(this,Sf)){case 0:C=ne._rescale,m=t,y=r+i,g=s,x=-i,v=t+u*s,w=r+(1-h-p)*i,_=t+(u+f)*s,S=r+(1-h)*i;break;case 90:C=ne._rescaleAndSwap,m=t,y=r,g=s,x=i,v=t+h*s,w=r+u*i,_=t+(h+p)*s,S=r+(u+f)*i;break;case 180:C=ne._rescale,m=t+s,y=r,g=-s,x=i,v=t+(1-u-f)*s,w=r+h*i,_=t+(1-u)*s,S=r+(h+p)*i;break;case 270:C=ne._rescaleAndSwap,m=t+s,y=r+i,g=-s,x=-i,v=t+(1-h-p)*s,w=r+(1-u-f)*i,_=t+(1-h)*s,S=r+(1-u)*i;break}for(const{line:A,points:k}of d(this,jr))o.push(C(A,m,y,g,x,a?new Array(A.length):null)),l.push(C(k,m,y,g,x,a?new Array(k.length):null));return{lines:o,points:l,rect:[v,w,_,S]}}static deserialize(t,r,s,i,a,{paths:{lines:o,points:l},rotation:u,thickness:h}){const f=[];let p,m,y,g,x;switch(u){case 0:x=ne._rescale,p=-t/s,m=r/i+1,y=1/s,g=-1/i;break;case 90:x=ne._rescaleAndSwap,p=-r/i,m=-t/s,y=1/i,g=1/s;break;case 180:x=ne._rescale,p=t/s+1,m=-r/i,y=-1/s,g=1/i;break;case 270:x=ne._rescaleAndSwap,p=r/i+1,m=t/s+1,y=-1/i,g=-1/s;break}if(!o){o=[];for(const w of l){const _=w.length;if(_===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(_===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const S=new Float32Array(3*(_-2));o.push(S);let[C,A,k,j]=w.subarray(0,4);S.set([NaN,NaN,NaN,NaN,C,A],0);for(let T=4;T<_;T+=2){const M=w[T],I=w[T+1];S.set(ne.createBezierPoints(C,A,k,j,M,I),(T-2)*3),[C,A,k,j]=[k,j,M,I]}}}for(let w=0,_=o.length;w<_;w++)f.push({line:x(o[w].map(S=>S??NaN),p,m,y,g),points:x(l[w].map(S=>S??NaN),p,m,y,g)});const v=new this.prototype.constructor;return v.build(f,s,i,1,u,h,a),v}get box(){return d(this,zn)}updateProperty(t,r){return t==="stroke-width"?P(this,yn,dL).call(this,r):null}updateParentDimensions([t,r],s){const[i,a]=P(this,yn,aa).call(this);E(this,ki,t),E(this,Ni,r),E(this,_f,s);const[o,l]=P(this,yn,aa).call(this),u=o-i,h=l-a,f=d(this,zn);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f}updateRotation(t){return E(this,yv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,zn).map(ne.svgRound).join(" ")}get defaultProperties(){const[t,r]=d(this,zn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=d(this,zn);let s=0,i=0,a=0,o=0,l=0,u=0;switch(d(this,yv)){case 90:i=r/t,a=-t/r,l=t;break;case 180:s=-1,o=-1,l=t,u=r;break;case 270:i=-r/t,a=t/r,u=r;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${ne.svgRound(l)} ${ne.svgRound(u)})`}getPathResizingSVGProperties([t,r,s,i]){const[a,o]=P(this,yn,aa).call(this),[l,u,h,f]=d(this,zn);if(Math.abs(h-a)<=ne.PRECISION||Math.abs(f-o)<=ne.PRECISION){const x=t+s/2-(l+h/2),v=r+i/2-(u+f/2);return{path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`,transform:`${this.rotationTransform} translate(${x} ${v})`}}}const p=(s-2*a)/(h-2*a),m=(i-2*o)/(f-2*o),y=h/s,g=f/i;return{path:{"transform-origin":`${ne.svgRound(l)} ${ne.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${ne.svgRound(a)} ${ne.svgRound(o)}) scale(${p} ${m}) translate(${ne.svgRound(-a)} ${ne.svgRound(-o)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[a,o]=P(this,yn,aa).call(this),l=d(this,zn),[u,h,f,p]=l;if(l[0]=t,l[1]=r,l[2]=s,l[3]=i,Math.abs(f-a)<=ne.PRECISION||Math.abs(p-o)<=ne.PRECISION){const v=t+s/2-(u+f/2),w=r+i/2-(h+p/2);for(const{line:_,points:S}of d(this,jr))ne._translate(_,v,w,_),ne._translate(S,v,w,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(s-2*a)/(f-2*a),y=(i-2*o)/(p-2*o),g=-m*(u+a)+t+a,x=-y*(h+o)+r+o;if(m!==1||y!==1||g!==0||x!==0)for(const{line:v,points:w}of d(this,jr))ne._rescale(v,g,x,m,y,v),ne._rescale(w,g,x,m,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,a]=s,o=d(this,zn),l=t-o[0],u=r-o[1];if(d(this,ki)===i&&d(this,Ni)===a)for(const{line:h,points:f}of d(this,jr))ne._translate(h,l,u,h),ne._translate(f,l,u,f);else{const h=d(this,ki)/i,f=d(this,Ni)/a;E(this,ki,i),E(this,Ni,a);for(const{line:p,points:m}of d(this,jr))ne._rescale(p,l,u,h,f,p),ne._rescale(m,l,u,h,f,m);o[2]*=h,o[3]*=f}return o[0]=t,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(t)} ${ne.svgRound(r)}`}}}get defaultSVGProperties(){const t=d(this,zn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(t[0])} ${ne.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}zn=new WeakMap,yv=new WeakMap,xv=new WeakMap,jr=new WeakMap,ki=new WeakMap,Ni=new WeakMap,_f=new WeakMap,Sf=new WeakMap,Nu=new WeakMap,yn=new WeakSet,aa=function(t=d(this,Nu)){const r=d(this,xv)+t/2*d(this,_f);return d(this,Sf)%180===0?[r/d(this,ki),r/d(this,Ni)]:[r/d(this,Ni),r/d(this,ki)]},cL=function(){const[t,r,s,i]=d(this,zn),[a,o]=P(this,yn,aa).call(this,0);return[t+a,r+o,s-2*a,i-2*o]},uL=function(){const t=E(this,zn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of d(this,jr)){if(i.length<=12){for(let l=4,u=i.length;l<u;l+=6)de.pointBoundingBox(i[l],i[l+1],t);continue}let a=i[4],o=i[5];for(let l=6,u=i.length;l<u;l+=6){const[h,f,p,m,y,g]=i.subarray(l,l+6);de.bezierBoundingBox(a,o,h,f,p,m,y,g,t),a=y,o=g}}const[r,s]=P(this,yn,aa).call(this);t[0]=Wn(t[0]-r,0,1),t[1]=Wn(t[1]-s,0,1),t[2]=Wn(t[2]+r,0,1),t[3]=Wn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},dL=function(t){const[r,s]=P(this,yn,aa).call(this);E(this,Nu,t);const[i,a]=P(this,yn,aa).call(this),[o,l]=[i-r,a-s],u=d(this,zn);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class Jw extends oL{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Jw(this._viewParameters);return e.updateAll(this),e}}var nw,hL;const Qd=class Qd extends Ix{constructor(t){super({...t,name:"inkEditor"});N(this,nw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){rt.initialize(t,r),this._defaultDrawingOptions=new Jw(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Pe(this,"typesMap",new Map([[De.INK_THICKNESS,"stroke-width"],[De.INK_COLOR,"stroke"],[De.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,a){return new Xq(t,r,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,a,o){return Yv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){let i=null;if(t instanceof wC){const{data:{inkLists:o,rect:l,rotation:u,id:h,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,contentsObj:g},parent:{page:{pageNumber:x}}}=t;i=t={annotationType:ye.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:o},boxes:null,pageIndex:x-1,rect:l.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,comment:(g==null?void 0:g.str)||null}}const a=await super.deserialize(t,r,s);return a._initialData=i,t.comment&&a.setCommentData(t.comment),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new jx(this)),[["colorPicker",this._colorPicker]]}get colorType(){return De.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Qd.getDefaultDrawingOptions({stroke:de.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u={annotationType:ye.INK,color:rt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:r,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!P(this,nw,hL).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:r,rect:s}=this.serializeDraw(!1),i={rect:s,thickness:this._drawingOptions["stroke-width"],points:r};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}};nw=new WeakSet,hL=function(t){const{color:r,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==r[l])||t.thickness!==s||t.opacity!==i||t.pageIndex!==a},Y(Qd,"_type","ink"),Y(Qd,"_editorType",ye.INK),Y(Qd,"_defaultDrawingOptions",null);let r2=Qd;class s2 extends Yv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const $0=8,Ep=3;var Pu,Ve,i2,Ls,fL,pL,a2,Ry,mL,gL,vL,o2,l2,yL;class Va{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,a,o,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const f=200,p=h.font=`${r} ${s} ${f}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:x,fontBoundingBoxAscent:v,fontBoundingBoxDescent:w,width:_}=h.measureText(e),S=1.5,C=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,_)*S),A=Math.ceil(Math.max(Math.abs(g)+Math.abs(x)||f,Math.abs(v)+Math.abs(w)||f)*S);u=new OffscreenCanvas(C,A),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=p,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,C,A),h.fillStyle="black",h.fillText(e,C*(S-1)/2,A*(3-S)/2);const k=P(this,Ve,o2).call(this,h.getImageData(0,0,C,A).data),j=P(this,Ve,vL).call(this,k),T=P(this,Ve,l2).call(this,j),M=P(this,Ve,a2).call(this,k,C,A,T);return this.processDrawnLines({lines:{curves:M,width:C,height:A},pageWidth:i,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[a,o,l]=P(this,Ve,yL).call(this,e),[u,h]=P(this,Ve,gL).call(this,a,o,l,Math.hypot(o,l)*d(this,Pu).sigmaSFactor,d(this,Pu).sigmaR,d(this,Pu).kernelSize),f=P(this,Ve,l2).call(this,h),p=P(this,Ve,a2).call(this,u,o,l,f);return this.processDrawnLines({lines:{curves:p,width:o,height:l},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:a,areContours:o}){s%180!==0&&([t,r]=[r,t]);const{curves:l,width:u,height:h}=e,f=e.thickness??0,p=[],m=Math.min(t/u,r/h),y=m/t,g=m/r,x=[];for(const{points:w}of l){const _=a?P(this,Ve,mL).call(this,w):w;if(!_)continue;x.push(_);const S=_.length,C=new Float32Array(S),A=new Float32Array(3*(S===2?2:S-2));if(p.push({line:A,points:C}),S===2){C[0]=_[0]*y,C[1]=_[1]*g,A.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[k,j,T,M]=_;k*=y,j*=g,T*=y,M*=g,C.set([k,j,T,M],0),A.set([NaN,NaN,NaN,NaN,k,j],0);for(let I=4;I<S;I+=2){const R=C[I]=_[I]*y,$=C[I+1]=_[I+1]*g;A.set(ne.createBezierPoints(k,j,T,M,R,$),(I-2)*3),[k,j,T,M]=[T,M,R,$]}}if(p.length===0)return null;const v=o?new s2:new Yv;return v.build(p,t,r,1,s,o?0:f,i),{outline:v,newCurves:x,areContours:o,thickness:f,width:u,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let a=1/0,o=-1/0,l=0;for(const _ of e){l+=_.length;for(let S=2,C=_.length;S<C;S++){const A=_[S]-_[S-2];a=Math.min(a,A),o=Math.max(o,A)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const h=e.length,f=$0+Ep*h,p=new Uint32Array(f);let m=0;p[m++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,p[m++]=0,p[m++]=s,p[m++]=i,p[m++]=t?0:1,p[m++]=Math.max(0,Math.floor(r??0)),p[m++]=h,p[m++]=u.BYTES_PER_ELEMENT;for(const _ of e)p[m++]=_.length-2,p[m++]=_[0],p[m++]=_[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(p);const x=u.prototype.constructor;for(const _ of e){const S=new x(_.length-2);for(let C=2,A=_.length;C<A;C++)S[C-2]=_[C]-_[C-2];g.write(S)}g.close();const v=await new Response(y.readable).arrayBuffer(),w=new Uint8Array(v);return xI(w)}static async decompressSignature(e){try{const t=xG(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,o=0;for await(const _ of r)a||(a=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),a.set(_,o),o+=_.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],f=l[3],p=l[4]===0,m=l[5],y=l[6],g=l[7],x=[],v=($0+Ep*y)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(g){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(a.buffer,v);break}o=0;for(let _=0;_<y;_++){const S=l[Ep*_+$0],C=new Float32Array(S+2);x.push(C);for(let A=0;A<Ep-1;A++)C[A]=l[Ep*_+$0+A+1];for(let A=0;A<S;A++)C[A+2]=C[A]+w[o++]}return{areContours:p,thickness:m,outlines:x,width:h,height:f}}catch(t){return xe(`decompressSignature: ${t}`),null}}}Pu=new WeakMap,Ve=new WeakSet,i2=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},Ls=new WeakMap,fL=function(e,t,r,s,i,a,o){const l=P(this,Ve,i2).call(this,r,s,i,a);for(let u=0;u<8;u++){const h=(-u+l-o+16)%8,f=d(this,Ls)[2*h],p=d(this,Ls)[2*h+1];if(e[(r+f)*t+(s+p)]!==0)return h}return-1},pL=function(e,t,r,s,i,a,o){const l=P(this,Ve,i2).call(this,r,s,i,a);for(let u=0;u<8;u++){const h=(u+l+o+16)%8,f=d(this,Ls)[2*h],p=d(this,Ls)[2*h+1];if(e[(r+f)*t+(s+p)]!==0)return h}return-1},a2=function(e,t,r,s){const i=e.length,a=new Int32Array(i);for(let h=0;h<i;h++)a[h]=e[h]<=s?1:0;for(let h=1;h<r-1;h++)a[h*t]=a[h*t+t-1]=0;for(let h=0;h<t;h++)a[h]=a[t*r-1-h]=0;let o=1,l;const u=[];for(let h=1;h<r-1;h++){l=1;for(let f=1;f<t-1;f++){const p=h*t+f,m=a[p];if(m===0)continue;let y=h,g=f;if(m===1&&a[p-1]===0)o+=1,g-=1;else if(m>=1&&a[p+1]===0)o+=1,g+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const x=[f,h],v=g===f+1,w={isHole:v,points:x,id:o,parent:0};u.push(w);let _;for(const I of u)if(I.id===l){_=I;break}_?_.isHole?w.parent=v?_.parent:l:w.parent=v?l:_.parent:w.parent=v?l:0;const S=P(this,Ve,fL).call(this,a,t,h,f,y,g,0);if(S===-1){a[p]=-o,a[p]!==1&&(l=Math.abs(a[p]));continue}let C=d(this,Ls)[2*S],A=d(this,Ls)[2*S+1];const k=h+C,j=f+A;y=k,g=j;let T=h,M=f;for(;;){const I=P(this,Ve,pL).call(this,a,t,T,M,y,g,1);C=d(this,Ls)[2*I],A=d(this,Ls)[2*I+1];const R=T+C,$=M+A;x.push($,R);const O=T*t+M;if(a[O+1]===0?a[O]=-o:a[O]===1&&(a[O]=o),R===h&&$===f&&T===k&&M===j){a[p]!==1&&(l=Math.abs(a[p]));break}else y=T,g=M,T=R,M=$}}}return u},Ry=function(e,t,r,s){if(r-t<=4){for(let k=t;k<r-2;k+=2)s.push(e[k],e[k+1]);return}const i=e[t],a=e[t+1],o=e[r-4]-i,l=e[r-3]-a,u=Math.hypot(o,l),h=o/u,f=l/u,p=h*a-f*i,m=l/o,y=1/u,g=Math.atan(m),x=Math.cos(g),v=Math.sin(g),w=y*(Math.abs(x)+Math.abs(v)),_=y*(1-w+w**2),S=Math.max(Math.atan(Math.abs(v+x)*_),Math.atan(Math.abs(v-x)*_));let C=0,A=t;for(let k=t+2;k<r-2;k+=2){const j=Math.abs(p-h*e[k+1]+f*e[k]);j>C&&(A=k,C=j)}C>(u*S)**2?(P(this,Ve,Ry).call(this,e,t,A+2,s),P(this,Ve,Ry).call(this,e,A,r,s)):s.push(i,a)},mL=function(e){const t=[],r=e.length;return P(this,Ve,Ry).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},gL=function(e,t,r,s,i,a){const o=new Float32Array(a**2),l=-2*s**2,u=a>>1;for(let g=0;g<a;g++){const x=(g-u)**2;for(let v=0;v<a;v++)o[g*a+v]=Math.exp((x+(v-u)**2)/l)}const h=new Float32Array(256),f=-2*i**2;for(let g=0;g<256;g++)h[g]=Math.exp(g**2/f);const p=e.length,m=new Uint8Array(p),y=new Uint32Array(256);for(let g=0;g<r;g++)for(let x=0;x<t;x++){const v=g*t+x,w=e[v];let _=0,S=0;for(let A=0;A<a;A++){const k=g+A-u;if(!(k<0||k>=r))for(let j=0;j<a;j++){const T=x+j-u;if(T<0||T>=t)continue;const M=e[k*t+T],I=o[A*a+j]*h[Math.abs(M-w)];_+=M*I,S+=I}}const C=m[v]=Math.round(_/S);y[C]++}return[m,y]},vL=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},o2=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let o=0,l=r.length;o<l;o++){const u=r[o]=e[o<<2];s=Math.max(s,u),i=Math.min(i,u)}const a=255/(s-i);for(let o=0,l=r.length;o<l;o++)r[o]=(r[o]-i)*a;return r},l2=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(l=>l!==0);let a=i,o=i;for(t=i;t<256;t++){const l=e[t];l>r&&(t-a>s&&(s=t-a,o=t-1),r=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},yL=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=d(this,Pu);let a=r,o=s;if(r>i||s>i){let p=r,m=s,y=Math.log2(Math.max(r,s)/i);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){a=Math.ceil(p/2),o=Math.ceil(m/2);const w=new OffscreenCanvas(a,o);w.getContext("2d").drawImage(e,0,0,p,m,0,0,a,o),p=a,m=o,e!==t&&e.close(),e=w.transferToImageBitmap()}const x=Math.min(i/a,i/o);a=Math.round(a*x),o=Math.round(o*x)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,o);const h=u.getImageData(0,0,a,o).data;return[P(this,Ve,o2).call(this,h),a,o]},N(Va,Ve),N(Va,Pu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),N(Va,Ls,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class bC extends oL{constructor(){super(),super.updateProperties({fill:rt._defaultLineColor,"stroke-width":0})}clone(){const e=new bC;return e.updateAll(this),e}}class _C extends Jw{constructor(e){super(e),super.updateProperties({stroke:rt._defaultLineColor,"stroke-width":1})}clone(){const e=new _C(this._viewParameters);return e.updateAll(this),e}}var ml,Pi,gl,ju;const vr=class vr extends Ix{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});N(this,ml,!1);N(this,Pi,null);N(this,gl,null);N(this,ju,null);this._willKeepAspectRatio=!0,E(this,gl,t.signatureData||null),E(this,Pi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){rt.initialize(t,r),this._defaultDrawingOptions=new bC,this._defaultDrawnSignatureOptions=new _C(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Pe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,Pi)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(d(this,gl)){const{lines:i,mustSmooth:a,areContours:o,description:l,uuid:u,heightInPage:h}=d(this,gl),{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=Va.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:m,innerMargin:vr._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(y,h,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:d(this,Pi)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){E(this,ju,t),this.addEditToolbar()}getUuid(){return d(this,ju)}get description(){return d(this,Pi)}set description(t){E(this,Pi,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:a}=d(this,gl),o=Math.max(i,a),l=Va.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:a,y:o}=this,{outline:l}=E(this,gl,t);E(this,ml,l instanceof s2),this.description=s;let u;d(this,ml)?u=vr.getDefaultDrawingOptions():(u=vr._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[h,f]=this.parentDimensions,[,p]=this.pageDimensions;let m=r/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(h*this.width,f*this.height),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Va.process(t,r,s,i,vr._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return Va.extractContoursFromText(t,r,s,i,a,vr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Va.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:vr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=vr.getDefaultDrawingOptions():(this._drawingOptions=vr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o={annotationType:ye.SIGNATURE,isSignature:!0,areContours:d(this,ml),color:[0,0,0],thickness:d(this,ml)?0:a,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.paths={lines:r,points:s},o.uuid=d(this,ju),o.isCopy=!0):o.lines=r,d(this,Pi)&&(o.accessibilityData={type:"Figure",alt:d(this,Pi)}),o}static deserializeDraw(t,r,s,i,a,o){return o.areContours?s2.deserialize(t,r,s,i,a,o):Yv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){var a;const i=await super.deserialize(t,r,s);return E(i,ml,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",E(i,ju,t.uuid),i}};ml=new WeakMap,Pi=new WeakMap,gl=new WeakMap,ju=new WeakMap,Y(vr,"_type","signature"),Y(vr,"_editorType",ye.SIGNATURE),Y(vr,"_defaultDrawingOptions",null);let c2=vr;var ht,an,vl,Ba,yl,Ef,za,Tu,ji,Tr,Cf,$e,Kp,Xp,My,Iy,Dy,d2,Ly,xL;class u2 extends rt{constructor(t){super({...t,name:"stampEditor"});N(this,$e);N(this,ht,null);N(this,an,null);N(this,vl,null);N(this,Ba,null);N(this,yl,null);N(this,Ef,"");N(this,za,null);N(this,Tu,!1);N(this,ji,null);N(this,Tr,!1);N(this,Cf,!1);E(this,Ba,t.bitmapUrl),E(this,yl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){rt.initialize(t,r)}static isHandlingMimeForPasting(t){return rS.includes(t)}static paste(t,r){r.pasteEditor({mode:ye.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;d(this,an)&&(E(this,ht,null),this._uiManager.imageManager.deleteId(d(this,an)),(t=d(this,za))==null||t.remove(),E(this,za,null),d(this,ji)&&(clearTimeout(d(this,ji)),E(this,ji,null))),super.remove()}rebuild(){if(!this.parent){d(this,an)&&P(this,$e,My).call(this);return}super.rebuild(),this.div!==null&&(d(this,an)&&d(this,za)===null&&P(this,$e,My).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(d(this,vl)||d(this,ht)||d(this,Ba)||d(this,yl)||d(this,an)||d(this,Tu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,Tu)||(d(this,ht)?P(this,$e,Iy).call(this):P(this,$e,My).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(E(this,an,s),i&&E(this,ht,i),E(this,Tu,!1),P(this,$e,Iy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,ji)!==null&&clearTimeout(d(this,ji)),E(this,ji,setTimeout(()=>{E(this,ji,null),P(this,$e,d2).call(this)},200))}copyCanvas(t,r,s=!1){var m;t||(t=224);const{width:i,height:a}=d(this,ht),o=new Yi;let l=d(this,ht),u=i,h=a,f=null;if(r){if(i>r||a>r){const j=Math.min(r/i,r/a);u=Math.floor(i*j),h=Math.floor(a*j)}f=document.createElement("canvas");const y=f.width=Math.ceil(u*o.sx),g=f.height=Math.ceil(h*o.sy);d(this,Tr)||(l=P(this,$e,Dy).call(this,y,g));const x=f.getContext("2d");x.filter=this._uiManager.hcmFilter;let v="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(v="#8f8f9d",w="#42414d");const _=15,S=_*o.sx,C=_*o.sy,A=new OffscreenCanvas(S*2,C*2),k=A.getContext("2d");k.fillStyle=v,k.fillRect(0,0,S*2,C*2),k.fillStyle=w,k.fillRect(0,0,S,C),k.fillRect(S,C,S,C),x.fillStyle=x.createPattern(A,"repeat"),x.fillRect(0,0,y,g),x.drawImage(l,0,0,l.width,l.height,0,0,y,g)}let p=null;if(s){let y,g;if(o.symmetric&&l.width<t&&l.height<t)y=l.width,g=l.height;else if(l=d(this,ht),i>t||a>t){const w=Math.min(t/i,t/a);y=Math.floor(i*w),g=Math.floor(a*w),d(this,Tr)||(l=P(this,$e,Dy).call(this,y,g))}const v=new OffscreenCanvas(y,g).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,y,g),p={width:y,height:g,data:v.getImageData(0,0,y,g).data}}return{canvas:f,width:u,height:h,imageData:p}}static async deserialize(t,r,s){var x;let i=null,a=!1;if(t instanceof DD){const{data:{rect:v,rotation:w,id:_,structParent:S,popupRef:C,contentsObj:A},container:k,parent:{page:{pageNumber:j}},canvas:T}=t;let M,I;T?(delete t.canvas,{id:M,bitmap:I}=s.imageManager.getFromCanvas(k.id,T),T.remove()):(a=!0,t._hasNoCanvas=!0);const R=((x=await r._structTree.getAriaAttributes(`${fC}${_}`))==null?void 0:x.get("aria-label"))||"";i=t={annotationType:ye.STAMP,bitmapId:M,bitmap:I,pageIndex:j-1,rect:v.slice(0),rotation:w,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:R},isSvg:!1,structParent:S,popupRef:C,comment:(A==null?void 0:A.str)||null}}const o=await super.deserialize(t,r,s),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:m}=t;a?(s.addMissingCanvas(t.id,o),E(o,Tu,!0)):f&&s.imageManager.isValidId(f)?(E(o,an,f),u&&E(o,ht,u)):E(o,Ba,h),E(o,Tr,p);const[y,g]=o.pageDimensions;return o.width=(l[2]-l[0])/y,o.height=(l[3]-l[1])/g,m&&(o.altTextData=m),o._initialData=i,t.comment&&o.setCommentData(t.comment),E(o,Cf,!!i),o}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:ye.STAMP,bitmapId:d(this,an),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Tr),structTreeParentId:this._structTreeParentId};if(this.addComment(s),t)return s.bitmapUrl=P(this,$e,Ly).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=P(this,$e,xL).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,r===null)return s;r.stamps||(r.stamps=new Map);const o=d(this,Tr)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(d(this,an)))r.stamps.set(d(this,an),{area:o,serialized:s}),s.bitmap=P(this,$e,Ly).call(this,!1);else if(d(this,Tr)){const l=r.stamps.get(d(this,an));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=P(this,$e,Ly).call(this,!1))}return s}renderAnnotationElement(t){const r={rect:this.getRect(0,0)};return this.hasEditedComment&&(r.popup=this.comment),t.updateEdited(r),null}}ht=new WeakMap,an=new WeakMap,vl=new WeakMap,Ba=new WeakMap,yl=new WeakMap,Ef=new WeakMap,za=new WeakMap,Tu=new WeakMap,ji=new WeakMap,Tr=new WeakMap,Cf=new WeakMap,$e=new WeakSet,Kp=function(t,r=!1){if(!t){this.remove();return}E(this,ht,t.bitmap),r||(E(this,an,t.id),E(this,Tr,t.isSvg)),t.file&&E(this,Ef,t.file.name),P(this,$e,Iy).call(this)},Xp=function(){if(E(this,vl,null),this._uiManager.enableWaiting(!1),!!d(this,za)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ht)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,ht)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},My=function(){if(d(this,an)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,an)).then(s=>P(this,$e,Kp).call(this,s,!0)).finally(()=>P(this,$e,Xp).call(this));return}if(d(this,Ba)){const s=d(this,Ba);E(this,Ba,null),this._uiManager.enableWaiting(!0),E(this,vl,this._uiManager.imageManager.getFromUrl(s).then(i=>P(this,$e,Kp).call(this,i)).finally(()=>P(this,$e,Xp).call(this)));return}if(d(this,yl)){const s=d(this,yl);E(this,yl,null),this._uiManager.enableWaiting(!0),E(this,vl,this._uiManager.imageManager.getFromFile(s).then(i=>P(this,$e,Kp).call(this,i)).finally(()=>P(this,$e,Xp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=rS.join(",");const r=this._uiManager._signal;E(this,vl,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),P(this,$e,Kp).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>P(this,$e,Xp).call(this))),t.click()},Iy=function(){var f;const{div:t}=this;let{width:r,height:s}=d(this,ht);const[i,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*i,s=this.height*a;else if(r>o*i||s>o*a){const p=Math.min(o*i/r,o*a/s);r*=p,s*=p}const[l,u]=this.parentDimensions;this.setDims(r*l/i,s*u/a),this._uiManager.enableWaiting(!1);const h=E(this,za,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=r/i,this.height=s/a,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),P(this,$e,d2).call(this),d(this,Cf)||(this.parent.addUndoableEditor(this),E(this,Cf,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,Ef)&&this.div.setAttribute("aria-description",d(this,Ef)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Dy=function(t,r){const{width:s,height:i}=d(this,ht);let a=s,o=i,l=d(this,ht);for(;a>2*t||o>2*r;){const u=a,h=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(a,o);f.getContext("2d").drawImage(l,0,0,u,h,0,0,a,o),l=f.transferToImageBitmap()}return l},d2=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,a=new Yi,o=Math.ceil(s*t*a.sx),l=Math.ceil(i*r*a.sy),u=d(this,za);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const h=d(this,Tr)?d(this,ht):P(this,$e,Dy).call(this,o,l),f=u.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,o,l)},Ly=function(t){if(t){if(d(this,Tr)){const i=this._uiManager.imageManager.getSvgUrl(d(this,an));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=d(this,ht),r.getContext("2d").drawImage(d(this,ht),0,0),r.toDataURL()}if(d(this,Tr)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Hl.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Hl.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(d(this,ht),0,0,d(this,ht).width,d(this,ht).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(d(this,ht))},xL=function(t){var o;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},Y(u2,"_type","stamp"),Y(u2,"_editorType",ye.STAMP);var Ru,Af,Ti,xl,Ua,Rr,wl,kf,Mu,Os,Ha,on,Wa,bl,Nf,ue,_l,ft,wL,ai,f2,p2,Oy;const Ss=class Ss{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:h}){N(this,ft);N(this,Ru);N(this,Af,!1);N(this,Ti,null);N(this,xl,null);N(this,Ua,null);N(this,Rr,new Map);N(this,wl,!1);N(this,kf,!1);N(this,Mu,!1);N(this,Os,null);N(this,Ha,null);N(this,on,null);N(this,Wa,null);N(this,bl,null);N(this,Nf,-1);N(this,ue);const f=[...d(Ss,_l).values()];if(!Ss._initialized){Ss._initialized=!0;for(const p of f)p.initialize(h,e)}e.registerEditorTypes(f),E(this,ue,e),this.pageIndex=t,this.div=r,E(this,Ru,i),E(this,Ti,a),this.viewport=u,E(this,on,l),this.drawLayer=o,this._structTree=s,d(this,ue).addLayer(this)}get isEmpty(){return d(this,Rr).size===0}get isInvisible(){return this.isEmpty&&d(this,ue).getMode()===ye.NONE}updateToolbar(e){d(this,ue).updateToolbar(e)}updateMode(e=d(this,ue).getMode()){switch(P(this,ft,Oy).call(this),e){case ye.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ye.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ye.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of d(Ss,_l).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=d(this,on))==null?void 0:t.div)}setEditingState(e){d(this,ue).setEditingState(e)}addCommands(e){d(this,ue).addCommands(e)}cleanUndoStack(e){d(this,ue).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=d(this,Ti))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;E(this,Mu,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=d(this,bl))==null||r.abort(),E(this,bl,null);const e=new Set;for(const s of d(this,Rr).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(d(this,ue).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!d(this,Ti)){E(this,Mu,!1);return}const t=d(this,Ti).getEditableAnnotations();for(const s of t){if(s.hide(),d(this,ue).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}E(this,Mu,!1)}disable(){var s;if(E(this,kf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,on)&&!d(this,bl)){E(this,bl,new AbortController);const i=d(this,ue).combinedSignal(d(this,bl));d(this,on).div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:h}=a,f=d(this,Nf);if(h-f>500){E(this,Nf,h);return}E(this,Nf,-1);const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(l,u);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const g=new RegExp(`^${pI}[0-9]+$`);for(const v of m)if(g.test(v.id)){y=v.id;break}if(!y)return;const x=d(this,Rr).get(y);(x==null?void 0:x.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),x.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of d(this,Rr).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(d(this,Ti)){const i=d(this,Ti).getEditableAnnotations();for(const a of i){const{id:o}=a.data;if(d(this,ue).isDeletedAnnotationElement(o)){a.updateEdited({deleted:!0});continue}let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(d(this,ue).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}P(this,ft,Oy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of d(Ss,_l).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),E(this,kf,!1)}getEditableAnnotation(e){var t;return((t=d(this,Ti))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){d(this,ue).getActive()!==e&&d(this,ue).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=d(this,on))!=null&&e.div&&!d(this,Wa)){E(this,Wa,new AbortController);const t=d(this,ue).combinedSignal(d(this,Wa));d(this,on).div.addEventListener("pointerdown",P(this,ft,wL).bind(this),{signal:t}),d(this,on).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=d(this,on))!=null&&e.div&&d(this,Wa)&&(d(this,Wa).abort(),E(this,Wa,null),d(this,on).div.classList.remove("highlighting"))}enableClick(){if(d(this,xl))return;E(this,xl,new AbortController);const e=d(this,ue).combinedSignal(d(this,xl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=d(this,xl))==null||e.abort(),E(this,xl,null)}attach(e){d(this,Rr).set(e.id,e);const{annotationElementId:t}=e;t&&d(this,ue).isDeletedAnnotationElement(t)&&d(this,ue).removeDeletedAnnotationElement(e)}detach(e){var t;d(this,Rr).delete(e.id),(t=d(this,Ru))==null||t.removePointerInTextLayer(e.contentDiv),!d(this,kf)&&e.annotationElementId&&d(this,ue).addDeletedAnnotationElement(e)}remove(e){this.detach(e),d(this,ue).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(d(this,ue).addDeletedAnnotationElement(e.annotationElementId),rt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),d(this,ue).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!d(this,Mu)),d(this,ue).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!d(this,Ua)&&(e._focusEventsAllowed=!1,E(this,Ua,setTimeout(()=>{E(this,Ua,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:d(this,ue)._signal}),t.focus())},0))),e._structTreeParentId=(r=d(this,Ru))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return d(this,ue).getId()}combinedSignal(e){return d(this,ue).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=d(this,ft,ai))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await d(this,ue).updateMode(e.mode);const{offsetX:r,offsetY:s}=P(this,ft,p2).call(this),i=this.getNextId(),a=P(this,ft,f2).call(this,{parent:this,id:i,x:r,y:s,uiManager:d(this,ue),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=d(Ss,_l).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,d(this,ue)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=P(this,ft,f2).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:d(this,ue),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(P(this,ft,p2).call(this),!0,e)}setSelected(e){d(this,ue).setSelected(e)}toggleSelected(e){d(this,ue).toggleSelected(e)}unselect(e){d(this,ue).unselect(e)}pointerup(e){var s;const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!d(this,wl)||(E(this,wl,!1),(s=d(this,ft,ai))!=null&&s.isDrawer&&d(this,ft,ai).supportMultipleDrawings))return;if(!d(this,Af)){E(this,Af,!0);return}const r=d(this,ue).getMode();if(r===ye.STAMP||r===ye.SIGNATURE){d(this,ue).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(d(this,ue).getMode()===ye.HIGHLIGHT&&this.enableTextSelection(),d(this,wl)){E(this,wl,!1);return}const{isMac:t}=bn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(E(this,wl,!0),(s=d(this,ft,ai))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=d(this,ue).getActive();E(this,Af,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),d(this,Os)){d(this,ft,ai).startDrawing(this,d(this,ue),!1,e);return}d(this,ue).setCurrentDrawingSession(this),E(this,Os,new AbortController);const t=d(this,ue).combinedSignal(d(this,Os));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(E(this,Ha,null),this.commitOrRemove())},{signal:t}),d(this,ft,ai).startDrawing(this,d(this,ue),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&E(this,Ha,t);return}d(this,Ha)&&setTimeout(()=>{var t;(t=d(this,Ha))==null||t.focus(),E(this,Ha,null)},0)}endDrawingSession(e=!1){return d(this,Os)?(d(this,ue).setCurrentDrawingSession(null),d(this,Os).abort(),E(this,Os,null),E(this,Ha,null),d(this,ft,ai).endDrawing(e)):null}findNewParent(e,t,r){const s=d(this,ue).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return d(this,Os)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Os)&&d(this,ft,ai).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=d(this,ue).getActive())==null?void 0:e.parent)===this&&(d(this,ue).commitOrRemove(),d(this,ue).setActiveEditor(null)),d(this,Ua)&&(clearTimeout(d(this,Ua)),E(this,Ua,null));for(const r of d(this,Rr).values())(t=d(this,Ru))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,d(this,Rr).clear(),d(this,ue).removeLayer(this)}render({viewport:e}){this.viewport=e,Qu(this.div,e);for(const t of d(this,ue).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){d(this,ue).commitOrRemove(),P(this,ft,Oy).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Qu(this.div,{rotation:r}),t!==r)for(const s of d(this,Rr).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return d(this,ue).viewParameters.realScale}};Ru=new WeakMap,Af=new WeakMap,Ti=new WeakMap,xl=new WeakMap,Ua=new WeakMap,Rr=new WeakMap,wl=new WeakMap,kf=new WeakMap,Mu=new WeakMap,Os=new WeakMap,Ha=new WeakMap,on=new WeakMap,Wa=new WeakMap,bl=new WeakMap,Nf=new WeakMap,ue=new WeakMap,_l=new WeakMap,ft=new WeakSet,wL=function(e){d(this,ue).unselectAll();const{target:t}=e;if(t===d(this,on).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&d(this,on).div.contains(t)){const{isMac:r}=bn.platform;if(e.button!==0||e.ctrlKey&&r)return;d(this,ue).showAllEditors("highlight",!0,!0),d(this,on).div.classList.add("free"),this.toggleDrawing(),Mx.startHighlighting(this,d(this,ue).direction==="ltr",{target:d(this,on).div,x:e.x,y:e.y}),d(this,on).div.addEventListener("pointerup",()=>{d(this,on).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,ue)._signal}),e.preventDefault()}},ai=function(){return d(Ss,_l).get(d(this,ue).getMode())},f2=function(e){const t=d(this,ft,ai);return t?new t.prototype.constructor(e):null},p2=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),u=(i+o)/2-e,h=(a+l)/2-t,[f,p]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:f,offsetY:p}},Oy=function(){for(const e of d(this,Rr).values())e.isEmpty()&&e.remove()},Y(Ss,"_initialized",!1),N(Ss,_l,new Map([qS,r2,u2,Mx,c2].map(e=>[e._editorType,e])));let h2=Ss;var Fs,Un,Iu,wv,rw,bL,Qi,g2,_L,v2;const Gt=class Gt{constructor({pageIndex:e}){N(this,Qi);N(this,Fs,null);N(this,Un,new Map);N(this,Iu,new Map);this.pageIndex=e}setParent(e){if(!d(this,Fs)){E(this,Fs,e);return}if(d(this,Fs)!==e){if(d(this,Un).size>0)for(const t of d(this,Un).values())t.remove(),e.append(t);E(this,Fs,e)}}static get _svgFactory(){return Pe(this,"_svgFactory",new Tx)}draw(e,t=!1,r=!1){const s=Zt(Gt,wv)._++,i=P(this,Qi,g2).call(this),a=Gt._svgFactory.createElement("defs");i.append(a);const o=Gt._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&d(this,Iu).set(s,o);const u=r?P(this,Qi,_L).call(this,a,l):null,h=Gt._svgFactory.createElement("use");return i.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(i,e),d(this,Un).set(s,i),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=Zt(Gt,wv)._++,s=P(this,Qi,g2).call(this),i=Gt._svgFactory.createElement("defs");s.append(i);const a=Gt._svgFactory.createElement("path");i.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=Gt._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${r}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const p=Gt._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=Gt._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=Gt._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),d(this,Un).set(r,s),r}finalizeDraw(e,t){d(this,Iu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:s,rootClass:i,path:a}=t,o=typeof e=="number"?d(this,Un).get(e):e;if(o){if(r&&P(this,Qi,v2).call(this,o,r),s&&P(l=Gt,rw,bL).call(l,o,s),i){const{classList:u}=o;for(const[h,f]of Object.entries(i))u.toggle(h,f)}if(a){const h=o.firstChild.firstChild;P(this,Qi,v2).call(this,h,a)}}}updateParent(e,t){if(t===this)return;const r=d(this,Un).get(e);r&&(d(t,Fs).append(r),d(this,Un).delete(e),d(t,Un).set(e,r))}remove(e){d(this,Iu).delete(e),d(this,Fs)!==null&&(d(this,Un).get(e).remove(),d(this,Un).delete(e))}destroy(){E(this,Fs,null);for(const e of d(this,Un).values())e.remove();d(this,Un).clear(),d(this,Iu).clear()}};Fs=new WeakMap,Un=new WeakMap,Iu=new WeakMap,wv=new WeakMap,rw=new WeakSet,bL=function(e,[t,r,s,i]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},Qi=new WeakSet,g2=function(){const e=Gt._svgFactory.create(1,1,!0);return d(this,Fs).append(e),e.setAttribute("aria-hidden",!0),e},_L=function(e,t){const r=Gt._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=Gt._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},v2=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},N(Gt,rw),N(Gt,wv,0);let m2=Gt;globalThis._pdfjsTestingUtils={HighlightOutliner:KS};globalThis.pdfjsLib={AbortException:Ul,AnnotationEditorLayer:h2,AnnotationEditorParamsType:De,AnnotationEditorType:ye,AnnotationEditorUIManager:Ju,AnnotationLayer:WS,AnnotationMode:Po,AnnotationType:Lt,build:Nq,ColorPicker:Px,createValidAbsoluteUrl:mI,DOMSVGFactory:Tx,DrawLayer:m2,FeatureTest:bn,fetchData:Wv,getDocument:xD,getFilenameFromUrl:wG,getPdfFilenameFromUrl:bG,getRGB:Xw,getUuid:yI,getXfaPageViewport:SG,GlobalWorkerOptions:Li,ImageKind:oy,InvalidPDFException:tS,isDataScheme:Kw,isPdfFile:mC,isValidExplicitDest:IG,MathClamp:Wn,noContextMenu:fs,normalizeUnicode:vG,OPS:Ex,OutputScale:Yi,PasswordResponses:lG,PDFDataRangeTransport:wD,PDFDateString:Ax,PDFWorker:Um,PermissionFlag:oG,PixelsPerInch:Hl,RenderingCancelledException:pC,ResponseException:Cx,setLayerDimensions:Qu,shadow:Pe,SignatureExtractor:Va,stopEvent:Ot,SupportedImageMimeTypes:rS,TextLayer:Bm,TouchManager:Nx,updateUrlHash:gI,Util:de,VerbosityLevel:Gw,version:kq,XfaLayer:ED};Li.workerSrc="";const Qq=()=>{const[n,e]=b.useState(!1),t=async a=>{try{const o=await a.arrayBuffer(),u=await xD(o).promise;let h="";for(let f=1;f<=u.numPages;f++){const y=(await(await u.getPage(f)).getTextContent()).items.map(g=>g.str??"").join(" ");h+=y+`
`}return h}catch(o){throw console.error("PDF extraction error:",o),new Error("Failed to extract text from PDF")}},r=a=>{const o=a.split(`
`).map(m=>m.trim()).filter(Boolean),l=[];let u="";const h=m=>/^(Basis|Modul)\s+.+$/i.test(m),f=m=>/^\d+$/.test(m);let p=0;for(;p<o.length;){const m=o[p];if(m.startsWith("Stand:")||/SIWF|Seite\s+\d+|Erfasste Prozeduren/i.test(m)){p++;continue}if(h(m)){u=m,p++;continue}if(u&&!f(m)){const y=m,g=[];let x=p+1;for(;x<o.length&&x<p+10;){const v=o[x];if(f(v)){g.push(parseInt(v)),x++;continue}if(h(v)||!f(v))break;x++}if(g.length>0){const v=g[0]||0,w=g[1]||0,_=g[2]||0,S=g[3]||0,C=g[4]||w+_+S;l.push({proc_name:y,module_name:u,minimum:v,responsible:w,instructing:_,assistant:S,total:C}),p=x;continue}}p++}return l},s=async a=>{const{data:{user:o}}=await oe.auth.getUser();if(!o)throw new Error("Not authenticated");const{data:l,error:u}=await oe.from("import_runs").insert({user_id:o.id,pdf_filename:a,source:"client_ai_parse",status:"running"}).select().single();if(u)throw u;return l};return{processFile:async a=>{e(!0);try{const o=await t(a),l=r(o),u=await s(a.name),h=l.map(f=>oe.from("import_procedure_staging").insert({run_id:u.id,proc_name:f.proc_name,module_name:f.module_name,minimum:f.minimum,responsible:f.responsible,instructing:f.instructing,assistant:f.assistant,total:f.total,status:"pending"}));return await Promise.all(h),{success:!0,runId:u.id,summary:{filename:a.name,totalProcedures:l.length,modules:[],matched:0,needsReview:l.length},stagingData:l}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Processing failed"}}finally{e(!1)}},isProcessing:n}},Jq=({open:n,onOpenChange:e,onSuccess:t})=>{const[r,s]=b.useState(!1),[i,a]=b.useState(0),[o,l]=b.useState(null),[u,h]=b.useState(!1),[f,p]=b.useState(!1),{toast:m}=yE(),{processFile:y,isProcessing:g}=Qq(),x=j=>{j.preventDefault(),j.stopPropagation(),j.type==="dragenter"||j.type==="dragover"?h(!0):j.type==="dragleave"&&h(!1)},v=j=>{j.preventDefault(),j.stopPropagation(),h(!1),j.dataTransfer.files&&j.dataTransfer.files[0]&&_(j.dataTransfer.files[0])},w=j=>{j.target.files&&j.target.files[0]&&_(j.target.files[0])},_=async j=>{if(j.type!=="application/pdf"){m({title:"Ungültiger Dateityp",description:"Bitte wählen Sie eine PDF-Datei aus.",variant:"destructive"});return}s(!0),a(0),l(null);try{const T=setInterval(()=>{a(I=>I<90?I+15:90)},200),M=await y(j);clearInterval(T),a(100),l(M),M.success&&M.summary?(p(!0),m({title:"PDF erfolgreich analysiert (AI)",description:`${M.summary.totalProcedures} Prozeduren erkannt.`})):m({title:"Fehler beim Verarbeiten",description:M.error||"Unbekannter Fehler",variant:"destructive"})}catch(T){m({title:"Verarbeitung fehlgeschlagen",description:T instanceof Error?T.message:"Unbekannter Fehler",variant:"destructive"})}finally{s(!1)}},S=()=>{a(0),l(null),s(!1),p(!1)},C=()=>{S(),e(!1)},A=()=>{p(!1),S()},k=()=>{t==null||t(),C()};return f&&(o!=null&&o.success)&&o.runId&&o.summary&&o.stagingData?c.jsx(aG,{runId:o.runId,summary:o.summary,stagingData:o.stagingData,onClose:A,onImportComplete:k}):c.jsx(Hw,{open:n,onOpenChange:C,children:c.jsxs(Fv,{className:"sm:max-w-md",children:[c.jsx($v,{children:c.jsxs(Bv,{className:"flex items-center gap-2",children:[c.jsx(Kf,{className:"h-5 w-5"}),"FMH eLogbuch PDF Upload"]})}),c.jsxs("div",{className:"space-y-4",children:[!o&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:`
                  border-2 border-dashed rounded-lg p-8 text-center transition-colors
                  ${u?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}
                  ${r?"pointer-events-none opacity-50":"cursor-pointer"}
                `,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:v,onClick:()=>{var j;r||(j=document.getElementById("pdf-upload"))==null||j.click()},children:[c.jsx(bw,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),c.jsx("p",{className:"text-sm font-medium mb-2",children:"PDF hier ablegen oder klicken zum Auswählen"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützt: FMH eLogbuch PDF-Exporte"}),c.jsx("input",{id:"pdf-upload",type:"file",accept:".pdf",className:"hidden",onChange:w,disabled:r})]}),r&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"PDF wird verarbeitet..."}),c.jsxs("span",{children:[i,"%"]})]}),c.jsx($f,{value:i,className:"w-full"})]})]}),o&&!o.success&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-destructive/10 text-destructive border border-destructive/20",children:[c.jsx(JF,{className:"h-5 w-5"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium",children:"Fehler beim Verarbeiten"}),c.jsx("p",{className:"mt-1 text-sm",children:o.error})]})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx(Z,{variant:"outline",onClick:S,children:"Erneut versuchen"}),c.jsx(Z,{onClick:C,children:"Schließen"})]})]})]})]})})};function Zq(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var SC="ScrollArea",[SL,uZ]=ei(SC),[eY,ms]=SL(SC),EL=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=n,[o,l]=b.useState(null),[u,h]=b.useState(null),[f,p]=b.useState(null),[m,y]=b.useState(null),[g,x]=b.useState(null),[v,w]=b.useState(0),[_,S]=b.useState(0),[C,A]=b.useState(!1),[k,j]=b.useState(!1),T=He(e,I=>l(I)),M=jw(s);return c.jsx(eY,{scope:t,type:r,dir:M,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:h,content:f,onContentChange:p,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:C,onScrollbarXEnabledChange:A,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:k,onScrollbarYEnabledChange:j,onCornerWidthChange:w,onCornerHeightChange:S,children:c.jsx(le.div,{dir:M,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...n.style}})})});EL.displayName=SC;var CL="ScrollAreaViewport",AL=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,a=ms(CL,t),o=b.useRef(null),l=He(e,o,a.onViewportChange);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),c.jsx(le.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:c.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});AL.displayName=CL;var Zi="ScrollAreaScrollbar",EC=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ms(Zi,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,o=n.orientation==="horizontal";return b.useEffect(()=>(o?i(!0):a(!0),()=>{o?i(!1):a(!1)}),[o,i,a]),s.type==="hover"?c.jsx(tY,{...r,ref:e,forceMount:t}):s.type==="scroll"?c.jsx(nY,{...r,ref:e,forceMount:t}):s.type==="auto"?c.jsx(kL,{...r,ref:e,forceMount:t}):s.type==="always"?c.jsx(CC,{...r,ref:e}):null});EC.displayName=Zi;var tY=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ms(Zi,n.__scopeScrollArea),[i,a]=b.useState(!1);return b.useEffect(()=>{const o=s.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),a(!0)},h=()=>{l=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",h),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),c.jsx(ps,{present:t||i,children:c.jsx(kL,{"data-state":i?"visible":"hidden",...r,ref:e})})}),nY=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ms(Zi,n.__scopeScrollArea),i=n.orientation==="horizontal",a=eb(()=>l("SCROLL_END"),100),[o,l]=Zq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,s.scrollHideDelay,l]),b.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const p=()=>{const m=u[h];f!==m&&(l("SCROLL"),a()),f=m};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,l,a]),c.jsx(ps,{present:t||o!=="hidden",children:c.jsx(CC,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:he(n.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:he(n.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),kL=b.forwardRef((n,e)=>{const t=ms(Zi,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,a]=b.useState(!1),o=n.orientation==="horizontal",l=eb(()=>{if(t.viewport){const u=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;a(o?u:h)}},10);return Wf(t.viewport,l),Wf(t.content,l),c.jsx(ps,{present:r||i,children:c.jsx(CC,{"data-state":i?"visible":"hidden",...s,ref:e})})}),CC=b.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=ms(Zi,n.__scopeScrollArea),i=b.useRef(null),a=b.useRef(0),[o,l]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=RL(o.viewport,o.content),h={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function f(p,m){return lY(p,a.current,o,m)}return t==="horizontal"?c.jsx(rY,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,m=KN(p,o,s.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):t==="vertical"?c.jsx(sY,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,m=KN(p,o);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),rY=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=ms(Zi,n.__scopeScrollArea),[a,o]=b.useState(),l=b.useRef(null),u=He(e,l,i.onScrollbarXChange);return b.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(PL,{"data-orientation":"horizontal",...s,ref:u,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Zw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.x),onDragScroll:h=>n.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;n.onWheelScroll(p),IL(p,f)&&h.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Lx(a.paddingLeft),paddingEnd:Lx(a.paddingRight)}})}})}),sY=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=ms(Zi,n.__scopeScrollArea),[a,o]=b.useState(),l=b.useRef(null),u=He(e,l,i.onScrollbarYChange);return b.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),c.jsx(PL,{"data-orientation":"vertical",...s,ref:u,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Zw(t)+"px",...n.style},onThumbPointerDown:h=>n.onThumbPointerDown(h.y),onDragScroll:h=>n.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;n.onWheelScroll(p),IL(p,f)&&h.preventDefault()}},onResize:()=>{l.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Lx(a.paddingTop),paddingEnd:Lx(a.paddingBottom)}})}})}),[iY,NL]=SL(Zi),PL=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:h,onResize:f,...p}=n,m=ms(Zi,t),[y,g]=b.useState(null),x=He(e,T=>g(T)),v=b.useRef(null),w=b.useRef(""),_=m.viewport,S=r.content-r.viewport,C=$t(h),A=$t(l),k=eb(f,10);function j(T){if(v.current){const M=T.clientX-v.current.left,I=T.clientY-v.current.top;u({x:M,y:I})}}return b.useEffect(()=>{const T=M=>{const I=M.target;(y==null?void 0:y.contains(I))&&C(M,S)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[_,y,S,C]),b.useEffect(A,[r,A]),Wf(y,k),Wf(m.content,k),c.jsx(iY,{scope:t,scrollbar:y,hasThumb:s,onThumbChange:$t(i),onThumbPointerUp:$t(a),onThumbPositionChange:A,onThumbPointerDown:$t(o),children:c.jsx(le.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:he(n.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),v.current=y.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),j(T))}),onPointerMove:he(n.onPointerMove,j),onPointerUp:he(n.onPointerUp,T=>{const M=T.target;M.hasPointerCapture(T.pointerId)&&M.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),Dx="ScrollAreaThumb",jL=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=NL(Dx,n.__scopeScrollArea);return c.jsx(ps,{present:t||s.hasThumb,children:c.jsx(aY,{ref:e,...r})})}),aY=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=ms(Dx,t),a=NL(Dx,t),{onThumbPositionChange:o}=a,l=He(e,f=>a.onThumbChange(f)),u=b.useRef(void 0),h=eb(()=>{u.current&&(u.current(),u.current=void 0)},100);return b.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(h(),!u.current){const m=cY(f,o);u.current=m,o()}};return o(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,h,o]),c.jsx(le.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:he(n.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),y=f.clientX-m.left,g=f.clientY-m.top;a.onThumbPointerDown({x:y,y:g})}),onPointerUp:he(n.onPointerUp,a.onThumbPointerUp)})});jL.displayName=Dx;var AC="ScrollAreaCorner",TL=b.forwardRef((n,e)=>{const t=ms(AC,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?c.jsx(oY,{...n,ref:e}):null});TL.displayName=AC;var oY=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=ms(AC,t),[i,a]=b.useState(0),[o,l]=b.useState(0),u=!!(i&&o);return Wf(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),l(h)}),Wf(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),u?c.jsx(le.div,{...r,ref:e,style:{width:i,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function Lx(n){return n?parseInt(n,10):0}function RL(n,e){const t=n/e;return isNaN(t)?0:t}function Zw(n){const e=RL(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function lY(n,e,t,r="ltr"){const s=Zw(t),i=s/2,a=e||i,o=s-a,l=t.scrollbar.paddingStart+a,u=t.scrollbar.size-t.scrollbar.paddingEnd-o,h=t.content-t.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return ML([l,u],f)(n)}function KN(n,e,t="ltr"){const r=Zw(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,o=i-r,l=t==="ltr"?[0,a]:[a*-1,0],u=U_(n,l);return ML([0,a],[0,o])(u)}function ML(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function IL(n,e){return n>0&&n<e}var cY=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},a=t.left!==i.left,o=t.top!==i.top;(a||o)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function eb(n,e){const t=$t(n),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Wf(n,e){const t=$t(e);Mt(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var DL=EL,uY=AL,dY=TL;const LL=b.forwardRef(({className:n,children:e,...t},r)=>c.jsxs(DL,{ref:r,className:ee("relative overflow-hidden",n),...t,children:[c.jsx(uY,{className:"h-full w-full rounded-[inherit]",children:e}),c.jsx(OL,{}),c.jsx(dY,{})]}));LL.displayName=DL.displayName;const OL=b.forwardRef(({className:n,orientation:e="vertical",...t},r)=>c.jsx(EC,{ref:r,orientation:e,className:ee("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:c.jsx(jL,{className:"relative flex-1 rounded-full bg-border"})}));OL.displayName=EC.displayName;const hY=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:r}=Iv(),[s,i]=b.useState({}),[a,o]=b.useState({});b.useState(new Date().toLocaleDateString("de-CH"));const[l,u]=b.useState({name:"Sami Zacharia Hosari",id:"175214",institution:"USZ"}),[h,f]=b.useState(!1),[p,m]=b.useState(!1),[y,g]=b.useState([]),[x,v]=b.useState(5),w=b.useCallback(async()=>{m(!0);try{if(r){const{data:I}=await oe.from("profiles").select("pgy_level").eq("user_id",r.id).single();I!=null&&I.pgy_level&&v(I.pgy_level)}const{data:A,error:k}=await oe.from("procedure_categories").select("*").in("key",["basis_notfallchirurgie","basis_allgemeinchirurgie","viszeralchirurgie","traumatologie","kombination"]).order("sort_index"),{data:j,error:T}=await oe.from("procedures").select("*").eq("active",!0).order("code");if(T){console.error("Error loading procedures:",T),Le.error("Fehler beim Laden der Prozeduren");return}g(j||[]);const M={};A==null||A.forEach(I=>{const R=(j==null?void 0:j.filter($=>$.category_id===I.id))||[];M[I.key]={id:I.id,key:I.key,title:I.title_de,totalMinimum:I.minimum_required||0,totalCount:0,procedures:R.map($=>{var O;return{id:$.id,name:$.title_de,minimum:((O=$.min_required_by_pgy)==null?void 0:O[`pgy${x}`])||0,verantwortlich:0,instruierend:0,assistent:0,total:0}})}}),i(M),o(M),r&&await _(M)}catch(A){console.error("Error loading modules and procedures:",A),Le.error("Fehler beim Laden der Daten")}finally{m(!1)}},[r,x,_]);b.useEffect(()=>{n&&w()},[n,w]),b.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[n]),b.useEffect(()=>{if(r){const{user_metadata:A}=r;A!=null&&A.full_name&&u(k=>({...k,name:A.full_name,institution:A.institution||"USZ"}))}},[r]);const _=b.useCallback(async A=>{if(r)try{console.log("🔍 FMHManualEntry - Loading data for user ID:",r.id);const{data:k,error:j}=await oe.from("procedure_logs").select(`
          id,
          procedure_id,
          role_in_surgery,
          performed_date
        `).eq("user_id",r.id).gte("performed_date",new Date(Date.now()-365*24*60*60*1e3).toISOString().split("T")[0]);if(j){console.error("Error loading existing data:",j);return}console.log("📊 FMHManualEntry - Loaded",(k==null?void 0:k.length)||0,"procedure logs for user",r.id);const T={};k==null||k.forEach(R=>{T[R.procedure_id]||(T[R.procedure_id]={verantwortlich:0,instruierend:0,assistent:0}),R.role_in_surgery==="responsible"?T[R.procedure_id].verantwortlich++:R.role_in_surgery==="instructing"?T[R.procedure_id].instruierend++:R.role_in_surgery==="assistant"&&T[R.procedure_id].assistent++});const M={...A},I={...A};Object.keys(M).forEach(R=>{M[R].procedures.forEach(($,O)=>{const W=T[$.id];if(W){const B={...$,verantwortlich:W.verantwortlich,instruierend:W.instruierend,assistent:W.assistent,total:W.verantwortlich+W.instruierend+W.assistent};M[R].procedures[O]=B,I[R].procedures[O]={...B},console.log(`✅ Loaded counts for "${$.name}" - V:${W.verantwortlich} I:${W.instruierend} A:${W.assistent}`)}}),M[R].totalCount=M[R].procedures.reduce(($,O)=>$+O.total,0),I[R].totalCount=I[R].procedures.reduce(($,O)=>$+O.total,0)}),o(M),i(I),console.log("✅ Form initialized with existing data")}catch(k){console.error("Error loading existing procedure data:",k)}},[r]),S=(A,k,j,T)=>{i(M=>{const I={...M},R={...I[A].procedures[k]};return R[j]=Math.max(0,T),R.total=R.verantwortlich+R.instruierend+R.assistent,I[A]={...I[A],procedures:[...I[A].procedures.slice(0,k),R,...I[A].procedures.slice(k+1)]},I[A].totalCount=I[A].procedures.reduce(($,O)=>$+O.total,0),I})},C=async()=>{if(!r){Le.error("Sie müssen angemeldet sein um Daten zu speichern");return}f(!0),console.log("🚀 Starting procedure save process..."),console.log("💾 FMHManualEntry - Saving data for user ID:",r.id);try{const A=[],k=[],j=[],T=[];for(const[I,R]of Object.entries(s)){console.log(`📋 Processing module: ${R.title}`);for(let $=0;$<R.procedures.length;$++){const O=R.procedures[$],W=a[I].procedures[$],B=O.verantwortlich-W.verantwortlich,F=O.instruierend-W.instruierend,L=O.assistent-W.assistent;if(B===0&&F===0&&L===0)continue;console.log(`📝 Processing procedure: "${O.name}" (Changes: V:${B} I:${F} A:${L})`);const U=O.id;if(!U){console.warn(`❌ No procedure ID for: ${O.name}`),j.push(O.name);continue}if(T.push(O.name),B>0)for(let V=0;V<B;V++)A.push({user_id:r.id,procedure_id:U,role_in_surgery:"responsible",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${R.title}`});if(F>0)for(let V=0;V<F;V++)A.push({user_id:r.id,procedure_id:U,role_in_surgery:"instructing",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${R.title}`});if(L>0)for(let V=0;V<L;V++)A.push({user_id:r.id,procedure_id:U,role_in_surgery:"assistant",performed_date:new Date().toISOString().split("T")[0],notes:`Manuelle Eingabe - ${R.title}`});if(B<0){const{data:V}=await oe.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",U).eq("role_in_surgery","responsible").order("created_at",{ascending:!1}).limit(Math.abs(B));V&&k.push(...V.map(J=>J.id))}if(F<0){const{data:V}=await oe.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",U).eq("role_in_surgery","instructing").order("created_at",{ascending:!1}).limit(Math.abs(F));V&&k.push(...V.map(J=>J.id))}if(L<0){const{data:V}=await oe.from("procedure_logs").select("id").eq("user_id",r.id).eq("procedure_id",U).eq("role_in_surgery","assistant").order("created_at",{ascending:!1}).limit(Math.abs(L));V&&k.push(...V.map(J=>J.id))}}}console.log(`📊 Summary: ${A.length} logs to insert, ${k.length} logs to delete`),console.log(`✅ Successful procedures: ${T.length}`,T),j.length>0&&console.log(`❌ Failed procedures: ${j.length}`,j);let M=0;if(A.length>0){console.log("💾 Inserting procedure logs into database...");const{error:I}=await oe.from("procedure_logs").insert(A);if(I)throw console.error("❌ Database insertion error:",I),I;M+=A.length,console.log(`✅ Successfully inserted ${A.length} procedure logs`)}if(k.length>0){console.log("🗑️ Deleting procedure logs from database...");const{error:I}=await oe.from("procedure_logs").delete().in("id",k);if(I)throw console.error("❌ Database deletion error:",I),I;M+=k.length,console.log(`✅ Successfully deleted ${k.length} procedure logs`)}if(M>0){let I=`${M} Änderungen erfolgreich gespeichert`;j.length>0&&(I+=`. ${j.length} Prozeduren konnten nicht verarbeitet werden.`),Le.success(I),o({...s}),console.log("🔄 Refreshing FMH progress..."),t==null||t(),e(!1)}else console.log("⚠️ No changes to save"),Le.warning("Keine Änderungen zum Speichern gefunden")}catch(A){console.error("❌ Error saving procedures:",A);const k=(A==null?void 0:A.message)||(A==null?void 0:A.toString())||"Unbekannter Fehler";Le.error(`Fehler beim Speichern der Prozeduren: ${k}`)}finally{f(!1),console.log("🏁 Save process completed")}};return n?c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Kf,{className:"h-6 w-6 text-blue-600"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"FMH Operationsstatistik"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Manuelle Eingabe der Operationen"})]})]}),c.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>e(!1),className:"h-8 w-8 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:c.jsx(Xl,{className:"h-4 w-4"})})]}),p?c.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(n8,{className:"h-5 w-5 animate-spin text-blue-600"}),c.jsx("span",{className:"text-gray-700",children:"Module und Prozeduren werden geladen..."})]})}):Object.keys(s).length===0?c.jsx("div",{className:"flex-1 flex items-center justify-center bg-white",children:c.jsx("p",{className:"text-gray-600",children:"Keine Module gefunden"})}):c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[c.jsx("div",{className:"flex-1 flex flex-col p-6 overflow-hidden bg-white",children:c.jsxs(Zl,{defaultValue:Object.keys(s)[0],className:"flex-1 flex flex-col",children:[c.jsx(lo,{className:"flex w-full mb-6 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:Object.entries(s).map(([A,k])=>c.jsx(At,{value:A,className:"flex-shrink-0 whitespace-nowrap px-4 py-2 data-[state=active]:bg-white data-[state=active]:text-gray-900 text-gray-600 hover:text-gray-900 text-sm",children:k.title},A))}),Object.entries(s).map(([A,k])=>c.jsx(zt,{value:A,className:"flex-1 flex flex-col mt-0 overflow-hidden",children:c.jsxs(ae,{className:"flex-1 flex flex-col bg-white border border-gray-200 shadow-sm overflow-hidden",children:[c.jsx(mt,{className:"flex-shrink-0 bg-gray-50 border-b border-gray-200 p-4",children:c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[c.jsx(wt,{className:"text-lg text-gray-900",children:k.title}),c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs(ge,{variant:"secondary",className:"bg-blue-100 text-blue-800 border-blue-200",children:["Minimum: ",k.totalMinimum]}),c.jsxs(ge,{variant:k.totalCount>=k.totalMinimum?"default":"outline",className:"bg-green-100 text-green-800 border-green-200",children:["Total: ",k.totalCount]})]})]})}),c.jsx(ze,{className:"flex-1 p-0 bg-white overflow-hidden",children:c.jsx(LL,{className:"h-[400px]",children:c.jsxs("table",{className:"w-full min-w-[800px]",children:[c.jsx("thead",{className:"sticky top-0 border-b border-gray-200 bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left p-3 font-medium text-gray-700 min-w-[250px]",children:"Prozedur"}),c.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Min"}),c.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Verantwortlich"}),c.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Instruierend"}),c.jsx("th",{className:"text-center p-3 font-medium w-28 text-gray-700",children:"Assistent"}),c.jsx("th",{className:"text-center p-3 font-medium w-20 text-gray-700",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white",children:k.procedures.map((j,T)=>{var M,I;return c.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[c.jsxs("td",{className:"p-3",children:[c.jsx("div",{className:"font-medium text-gray-900 text-sm",children:j.name}),((I=(M=a[A])==null?void 0:M.procedures[T])==null?void 0:I.total)>0&&c.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Gespeichert: V:",a[A].procedures[T].verantwortlich," I:",a[A].procedures[T].instruierend," A:",a[A].procedures[T].assistent]})]}),c.jsx("td",{className:"text-center p-3",children:c.jsx(ge,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200 text-xs",children:j.minimum})}),c.jsx("td",{className:"text-center p-3",children:c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>S(A,T,"verantwortlich",j.verantwortlich-1),children:c.jsx(Ib,{className:"w-3 h-3"})}),c.jsx(Pt,{type:"number",min:"0",value:j.verantwortlich,onChange:R=>S(A,T,"verantwortlich",parseInt(R.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),c.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>S(A,T,"verantwortlich",j.verantwortlich+1),children:c.jsx(ih,{className:"w-3 h-3"})})]})}),c.jsx("td",{className:"text-center p-3",children:c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>S(A,T,"instruierend",j.instruierend-1),children:c.jsx(Ib,{className:"w-3 h-3"})}),c.jsx(Pt,{type:"number",min:"0",value:j.instruierend,onChange:R=>S(A,T,"instruierend",parseInt(R.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),c.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>S(A,T,"instruierend",j.instruierend+1),children:c.jsx(ih,{className:"w-3 h-3"})})]})}),c.jsx("td",{className:"text-center p-3",children:c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>S(A,T,"assistent",j.assistent-1),children:c.jsx(Ib,{className:"w-3 h-3"})}),c.jsx(Pt,{type:"number",min:"0",value:j.assistent,onChange:R=>S(A,T,"assistent",parseInt(R.target.value)||0),className:"w-14 h-8 text-center text-sm bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"}),c.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 text-gray-600 hover:text-gray-900 hover:bg-gray-100",onClick:()=>S(A,T,"assistent",j.assistent+1),children:c.jsx(ih,{className:"w-3 h-3"})})]})}),c.jsx("td",{className:"text-center p-3",children:c.jsx(ge,{variant:j.total>=j.minimum?"default":"secondary",className:"font-medium text-xs bg-green-100 text-green-800 border-green-200",children:j.total})})]},j.id)})})]})})})]})},A))]})}),c.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4 bg-gray-50",children:c.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[c.jsxs("div",{className:"text-sm text-gray-600",children:["Gesamtanzahl Eingriffe: ",Object.values(s).reduce((A,k)=>A+k.totalCount,0)]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(Z,{variant:"outline",onClick:()=>e(!1),disabled:h,className:"bg-white border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400",children:"Abbrechen"}),c.jsxs(Z,{onClick:C,disabled:h||Object.values(s).every(A=>A.totalCount===0),className:"gap-2 bg-blue-600 text-white hover:bg-blue-700 disabled:bg-gray-400",children:[c.jsx(CE,{className:"w-4 h-4"}),h?"Speichere...":"Prozeduren speichern"]})]})]})})]})]})}):null},fY=({open:n,onOpenChange:e,onSuccess:t})=>{const{user:r}=Iv(),[s,i]=b.useState([]),[a,o]=b.useState(!1),[l,u]=b.useState(null),[h,f]=b.useState({}),p=b.useCallback(async()=>{if(r){o(!0);try{const{data:S,error:C}=await oe.from("procedure_logs").select(`
          id,
          performed_date,
          procedure_id,
          role_in_surgery,
          weighted_score,
          notes,
          hospital,
          supervisor,
          procedures (
            title_de,
            category_id,
            procedure_categories (
              key,
              title_de
            )
          )
        `).eq("user_id",r.id).order("performed_date",{ascending:!1});if(C)throw C;const A=(S||[]).map(k=>{var j,T,M,I,R;return{id:k.id,performed_date:k.performed_date,procedure_id:k.procedure_id,procedure_title:((j=k.procedures)==null?void 0:j.title_de)||"Unknown Procedure",category_key:((M=(T=k.procedures)==null?void 0:T.procedure_categories)==null?void 0:M.key)||"unknown",category_title:((R=(I=k.procedures)==null?void 0:I.procedure_categories)==null?void 0:R.title_de)||"Unknown Category",role_in_surgery:k.role_in_surgery||"responsible",weighted_score:k.weighted_score||1,notes:k.notes,hospital:k.hospital,supervisor:k.supervisor}});i(A)}catch(S){console.error("Error loading procedure logs:",S),Le.error("Fehler beim Laden der Prozedur-Logs")}finally{o(!1)}}},[r]);b.useEffect(()=>{n&&r&&p()},[n,r,p]);const m=S=>{u(S.id),f({performed_date:S.performed_date,role_in_surgery:S.role_in_surgery,notes:S.notes,hospital:S.hospital,supervisor:S.supervisor})},y=async S=>{try{const{error:C}=await oe.from("procedure_logs").update({performed_date:h.performed_date,role_in_surgery:h.role_in_surgery,notes:h.notes,hospital:h.hospital,supervisor:h.supervisor}).eq("id",S);if(C)throw C;u(null),f({}),await p(),Le.success("Eintrag erfolgreich aktualisiert")}catch(C){console.error("Error updating log:",C),Le.error("Fehler beim Aktualisieren des Eintrags")}},g=async S=>{if(confirm("Sind Sie sicher, dass Sie diesen Eintrag löschen möchten?"))try{const{error:C}=await oe.from("procedure_logs").delete().eq("id",S);if(C)throw C;await p(),Le.success("Eintrag erfolgreich gelöscht"),t&&t()}catch(C){console.error("Error deleting log:",C),Le.error("Fehler beim Löschen des Eintrags")}},x=()=>{u(null),f({})},v=s.reduce((S,C)=>{const A=C.category_title;return S[A]||(S[A]=[]),S[A].push(C),S},{}),w=S=>({responsible:"Verantwortlich",instructing:"Instruierend",assistant:"Assistent"})[S]||S,_=S=>({responsible:"default",instructing:"secondary",assistant:"outline"})[S]||"outline";return c.jsx(Hw,{open:n,onOpenChange:e,children:c.jsxs(Fv,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[c.jsx($v,{children:c.jsx(Bv,{children:"Prozedur-Korrekturen"})}),c.jsx("div",{className:"flex-1 overflow-hidden",children:a?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):c.jsxs(Zl,{defaultValue:Object.keys(v)[0],className:"h-full flex flex-col",children:[c.jsx(lo,{className:"grid w-full grid-cols-5",children:Object.keys(v).map(S=>c.jsxs(At,{value:S,className:"text-xs",children:[S.replace("Basis ","").replace("Modul ",""),c.jsx(ge,{variant:"secondary",className:"ml-1",children:v[S].length})]},S))}),Object.entries(v).map(([S,C])=>c.jsx(zt,{value:S,className:"flex-1 overflow-hidden",children:c.jsx("div",{className:"overflow-auto h-full",children:c.jsxs(Bf,{children:[c.jsx(zf,{children:c.jsxs(Ws,{children:[c.jsx(Me,{children:"Datum"}),c.jsx(Me,{children:"Prozedur"}),c.jsx(Me,{children:"Rolle"}),c.jsx(Me,{children:"Score"}),c.jsx(Me,{children:"Spital"}),c.jsx(Me,{children:"Supervisor"}),c.jsx(Me,{children:"Notizen"}),c.jsx(Me,{children:"Aktionen"})]})}),c.jsx(Uf,{children:C.map(A=>c.jsxs(Ws,{children:[c.jsx(Ie,{children:l===A.id?c.jsx(Pt,{type:"date",value:h.performed_date,onChange:k=>f(j=>({...j,performed_date:k.target.value})),className:"w-32"}):new Date(A.performed_date).toLocaleDateString("de-CH")}),c.jsx(Ie,{className:"max-w-48",children:c.jsx("div",{className:"truncate",title:A.procedure_title,children:A.procedure_title})}),c.jsx(Ie,{children:l===A.id?c.jsxs("select",{value:h.role_in_surgery,onChange:k=>f(j=>({...j,role_in_surgery:k.target.value})),className:"border rounded px-2 py-1",children:[c.jsx("option",{value:"responsible",children:"Verantwortlich"}),c.jsx("option",{value:"instructing",children:"Instruierend"}),c.jsx("option",{value:"assistant",children:"Assistent"})]}):c.jsx(ge,{variant:_(A.role_in_surgery),children:w(A.role_in_surgery)})}),c.jsx(Ie,{children:A.weighted_score}),c.jsx(Ie,{children:l===A.id?c.jsx(Pt,{value:h.hospital||"",onChange:k=>f(j=>({...j,hospital:k.target.value})),className:"w-24"}):A.hospital||"-"}),c.jsx(Ie,{children:l===A.id?c.jsx(Pt,{value:h.supervisor||"",onChange:k=>f(j=>({...j,supervisor:k.target.value})),className:"w-24"}):A.supervisor||"-"}),c.jsx(Ie,{children:l===A.id?c.jsx(Pt,{value:h.notes||"",onChange:k=>f(j=>({...j,notes:k.target.value})),className:"w-32"}):c.jsx("div",{className:"max-w-32 truncate",title:A.notes,children:A.notes||"-"})}),c.jsx(Ie,{children:c.jsx("div",{className:"flex gap-1",children:l===A.id?c.jsxs(c.Fragment,{children:[c.jsx(Z,{size:"sm",onClick:()=>y(A.id),children:c.jsx(CE,{className:"h-3 w-3"})}),c.jsx(Z,{size:"sm",variant:"outline",onClick:x,children:c.jsx(Xl,{className:"h-3 w-3"})})]}):c.jsxs(c.Fragment,{children:[c.jsx(Z,{size:"sm",variant:"outline",onClick:()=>m(A),children:c.jsx(NE,{className:"h-3 w-3"})}),c.jsx(Z,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>g(A.id),children:c.jsx(vR,{className:"h-3 w-3"})})]})})})]},A.id))})]})})},S))]})}),c.jsx("div",{className:"border-t pt-4 flex justify-end gap-2",children:c.jsx(Z,{variant:"outline",onClick:()=>e(!1),children:"Schließen"})})]})})},pY=()=>{const{user:n,loading:e}=Iv(),t=Zf(),[r,s]=b.useState([]),[i,a]=b.useState(null),[o,l]=b.useState(!0),[u,h]=b.useState(!1),[f,p]=b.useState(!1),[m,y]=b.useState(!1),[g,x]=b.useState(!1),[v,w]=b.useState(4);b.useEffect(()=>{if(!e&&!n){t("/auth");return}n&&_()},[n,e,t]);const _=async()=>{try{l(!0);const{data:{user:k}}=await oe.auth.getUser();if(console.log("🔍 FMHDashboard - Loading data for user ID:",k==null?void 0:k.id),k){const{data:I}=await oe.from("profiles").select("pgy_level").eq("user_id",k.id).single();I!=null&&I.pgy_level&&w(I.pgy_level)}const{data:j,error:T}=await oe.from("procedure_categories").select("*").not("module_type","is",null).order("sort_index");if(T)throw T;const M=[];for(const I of j||[])if(k){console.log("📊 FMHDashboard - Getting progress for module:",I.key,"user:",k.id);const{data:R}=await oe.rpc("get_module_progress",{user_id_param:k.id,module_key:I.key});console.log("📈 Progress data for",I.key,":",R),console.log("🔍 Module data:",{key:I.key,title:I.title_de,minimum_required:I.minimum_required,progress_raw:R});let $=null;if(R&&R.length>0){const O=R[0];Array.isArray(O)&&O.length>=7?$={module_name:O[0],total_weighted_score:O[1],total_minimum:O[2],progress_percentage:O[3],responsible_count:O[4],instructing_count:O[5],assistant_count:O[6]}:typeof O=="object"&&O!==null&&($=O)}M.push({...I,progress:$})}else M.push({...I,progress:null});s(M)}catch(k){console.error("Error loading modules:",k)}finally{l(!1)}},S=k=>({basis_notfallchirurgie:"coral",basis_allgemeinchirurgie:"mint",viszeralchirurgie:"lavender",traumatologie:"amber",kombination:"coral"})[k]||"mint",A=(()=>{const k=r.reduce((M,I)=>{var R;return M+(((R=I.progress)==null?void 0:R.responsible_count)||0)},0),j=r.reduce((M,I)=>{var R,$,O;return M+(((R=I.progress)==null?void 0:R.responsible_count)||0)+((($=I.progress)==null?void 0:$.instructing_count)||0)+(((O=I.progress)==null?void 0:O.assistant_count)||0)},0),T=j>0?k/j*100:0;return T>=30?{status:"good",color:"bg-green-500"}:T>=20?{status:"warning",color:"bg-yellow-500"}:{status:"critical",color:"bg-red-500"}})();return o?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(zE,{}),c.jsx("main",{className:"container mx-auto px-4 py-8",children:c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(AuthenticatedHeader,{}),c.jsxs("main",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-medical-title text-card-foreground mb-2",children:"FMH Chirurgie Tracking"}),c.jsxs("p",{className:"text-medical-subtitle",children:["Überwachung Ihres FMH-konformen Ausbildungsfortschritts - PGY ",v]}),n&&c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Debug: User ID: ",n.id," | Email: ",n.email]})]}),c.jsxs("div",{className:"flex gap-3 mt-4 md:mt-0",children:[c.jsxs(Z,{variant:"default",size:"sm",className:"gap-2",onClick:()=>h(!0),children:[c.jsx(ih,{className:"w-4 h-4"}),"Prozedur erfassen"]}),c.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>y(!0),children:[c.jsx(Kf,{className:"w-4 h-4"}),"Manual eingabe"]}),c.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>p(!0),children:[c.jsx(bw,{className:"w-4 h-4"}),"PDF Upload"]}),c.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",children:[c.jsx(pR,{className:"w-4 h-4"}),"Export"]}),c.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>x(!0),children:[c.jsx(AE,{className:"w-4 h-4"}),"Korrekturen"]})]})]}),c.jsxs("div",{className:"medical-card-elegant p-8 mb-8",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-card-foreground mb-2",children:"FMH Module Progress"}),c.jsx("p",{className:"text-text-secondary",children:"Gewichtete Erfüllung der FMH-Mindestanforderungen pro Modul"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 justify-items-center",children:r.map(k=>{var T,M,I,R,$;const j=((T=k.progress)==null?void 0:T.progress_percentage)||0;return c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx(Dv,{progress:j,variant:S(k.key),size:120,strokeWidth:8,label:k.title_de,showPercentage:!0,onClick:()=>a(k.key),className:"mb-3 transform transition-all duration-300 hover:scale-110 cursor-pointer"}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[c.jsx(pk,{className:"w-4 h-4 text-muted-foreground"}),c.jsxs(ge,{variant:"outline",className:"text-xs",children:[parseInt((((M=k.progress)==null?void 0:M.total_weighted_score)||0).toString()),"/",k.minimum_required||"?"]})]}),c.jsxs("div",{className:"text-xs text-muted-foreground",children:["V:",parseInt((((I=k.progress)==null?void 0:I.responsible_count)||0).toString())," I:",parseInt((((R=k.progress)==null?void 0:R.instructing_count)||0).toString())," A:",parseInt(((($=k.progress)==null?void 0:$.assistant_count)||0).toString())]})]})]},k.id)})})]}),i&&c.jsx(nV,{moduleKey:i,onClose:()=>a(null)}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-mint/20 rounded-medical",children:c.jsx(yR,{className:"w-6 h-6 text-activity-mint"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Gesamtfortschritt"}),c.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:[r.length>0?parseInt((r.reduce((k,j)=>{var T;return k+(((T=j.progress)==null?void 0:T.progress_percentage)||0)},0)/r.length).toString()):0,"%"]})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`p-3 ${A.color}/20 rounded-medical`,children:c.jsx(jv,{className:"w-6 h-6",style:{color:A.color.replace("/20","").replace("bg-","")}})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Rollen-Balance"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground capitalize",children:A.status==="good"?"Gut":A.status==="warning"?"Achtung":"Kritisch"})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-coral/20 rounded-medical",children:c.jsx(pk,{className:"w-6 h-6 text-activity-coral"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Eingriffe Total"}),c.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:parseInt(r.reduce((k,j)=>{var T,M,I;return k+(((T=j.progress)==null?void 0:T.responsible_count)||0)+(((M=j.progress)==null?void 0:M.instructing_count)||0)+(((I=j.progress)==null?void 0:I.assistant_count)||0)},0).toString())})]})]})}),c.jsx(ae,{className:"medical-card p-6",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"p-3 bg-activity-amber/20 rounded-medical",children:c.jsx(Hi,{className:"w-6 h-6 text-activity-amber"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktueller PGY"}),c.jsxs("p",{className:"text-2xl font-bold text-card-foreground",children:["PGY-",v]})]})]})})]}),c.jsx(iG,{modules:r,userPgyLevel:v}),u&&c.jsx(nG,{onClose:()=>h(!1),onSuccess:()=>{h(!1),_()}}),c.jsx(hY,{open:m,onOpenChange:y,onSuccess:_}),c.jsx(Jq,{open:f,onOpenChange:p,onSuccess:_}),c.jsx(fY,{open:g,onOpenChange:x,onSuccess:_})]})]})},mY=({currentImageUrl:n,onImageUploaded:e,onImageRemoved:t})=>{const[r,s]=b.useState(!1),[i,a]=b.useState(n||null),o=async u=>{var f;const h=(f=u.target.files)==null?void 0:f[0];if(h){if(!h.type.startsWith("image/")){Le.error("Bitte wählen Sie eine Bilddatei aus");return}if(h.size>10*1024*1024){Le.error("Datei ist zu groß. Maximal 10MB erlaubt.");return}s(!0);try{const p=h.name.split(".").pop(),m=`${Date.now()}-${Math.random().toString(36).substring(7)}.${p}`,{data:y,error:g}=await oe.storage.from("course-images").upload(m,h,{cacheControl:"3600",upsert:!1});if(g)throw g;const{data:{publicUrl:x}}=oe.storage.from("course-images").getPublicUrl(y.path);a(x),e(x),Le.success("Bild erfolgreich hochgeladen")}catch(p){console.error("Error uploading image:",p),Le.error("Fehler beim Hochladen des Bildes")}finally{s(!1),u.target.value=""}}},l=()=>{a(null),t()};return c.jsxs("div",{className:"space-y-3",children:[c.jsx(ot,{className:"text-foreground",children:"Kursbild"}),i?c.jsxs("div",{className:"relative w-full h-48 bg-muted rounded-lg overflow-hidden border-2 border-dashed border-border",children:[c.jsx("img",{src:i,alt:"Kurs Vorschau",className:"w-full h-full object-cover"}),c.jsx(Z,{type:"button",variant:"outline",size:"sm",className:"absolute top-2 right-2 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:l,children:c.jsx(Xl,{className:"h-4 w-4"})})]}):c.jsxs("div",{className:"w-full h-48 bg-muted rounded-lg border-2 border-dashed border-border flex flex-col items-center justify-center gap-3",children:[c.jsx(t8,{className:"h-12 w-12 text-muted-foreground"}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Kein Bild ausgewählt"}),c.jsx(ot,{htmlFor:"image-upload",className:"cursor-pointer",children:c.jsx(Z,{type:"button",variant:"outline",disabled:r,asChild:!0,children:c.jsxs("span",{children:[c.jsx(bw,{className:"h-4 w-4 mr-2"}),r?"Hochladen...":"Bild auswählen"]})})})]})]}),c.jsx(Pt,{id:"image-upload",type:"file",accept:"image/*",onChange:o,disabled:r,className:"hidden"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Unterstützte Formate: JPG, PNG, WebP, GIF (max. 10MB)"})]})};function Be(n){const e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Wr(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Gn(n,e){const t=Be(n);return isNaN(e)?Wr(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function Qs(n,e){const t=Be(n);if(isNaN(e))return Wr(n,NaN);if(!e)return t;const r=t.getDate(),s=Wr(n,t.getTime());s.setMonth(t.getMonth()+e+1,0);const i=s.getDate();return r>=i?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}const kC=6048e5,gY=864e5;let vY={};function Kv(){return vY}function Ki(n,e){var o,l,u,h;const t=Kv(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=Be(n),i=s.getDay(),a=(i<r?7:0)+i-r;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function ed(n){return Ki(n,{weekStartsOn:1})}function FL(n){const e=Be(n),t=e.getFullYear(),r=Wr(n,0);r.setFullYear(t+1,0,4),r.setHours(0,0,0,0);const s=ed(r),i=Wr(n,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=ed(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Vf(n){const e=Be(n);return e.setHours(0,0,0,0),e}function Ox(n){const e=Be(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Bi(n,e){const t=Vf(n),r=Vf(e),s=+t-Ox(t),i=+r-Ox(r);return Math.round((s-i)/gY)}function yY(n){const e=FL(n),t=Wr(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ed(t)}function y2(n,e){const t=e*7;return Gn(n,t)}function xY(n,e){return Qs(n,e*12)}function wY(n){let e;return n.forEach(function(t){const r=Be(t);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function bY(n){let e;return n.forEach(t=>{const r=Be(t);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function dr(n,e){const t=Vf(n),r=Vf(e);return+t==+r}function NC(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function _Y(n){if(!NC(n)&&typeof n!="number")return!1;const e=Be(n);return!isNaN(Number(e))}function Hm(n,e){const t=Be(n),r=Be(e),s=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return s*12+i}function SY(n,e,t){const r=Ki(n,t),s=Ki(e,t),i=+r-Ox(r),a=+s-Ox(s);return Math.round((i-a)/kC)}function PC(n){const e=Be(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function mr(n){const e=Be(n);return e.setDate(1),e.setHours(0,0,0,0),e}function $L(n){const e=Be(n),t=Wr(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function jC(n,e){var o,l,u,h;const t=Kv(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,s=Be(n),i=s.getDay(),a=(i<r?-7:0)+6-(i-r);return s.setDate(s.getDate()+a),s.setHours(23,59,59,999),s}function BL(n){return jC(n,{weekStartsOn:1})}const EY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},CY=(n,e,t)=>{let r;const s=EY[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function uh(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const AY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},NY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},PY={date:uh({formats:AY,defaultWidth:"full"}),time:uh({formats:kY,defaultWidth:"full"}),dateTime:uh({formats:NY,defaultWidth:"full"})},jY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},TY=(n,e,t,r)=>jY[n];function Oi(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const a=n.defaultFormattingWidth||n.defaultWidth,o=t!=null&&t.width?String(t.width):a;s=n.formattingValues[o]||n.formattingValues[a]}else{const a=n.defaultWidth,o=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[o]||n.values[a]}const i=n.argumentCallback?n.argumentCallback(e):e;return s[i]}}const RY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},MY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},IY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},OY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},FY=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},$Y={ordinalNumber:FY,era:Oi({values:RY,defaultWidth:"wide"}),quarter:Oi({values:MY,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Oi({values:IY,defaultWidth:"wide"}),day:Oi({values:DY,defaultWidth:"wide"}),dayPeriod:Oi({values:LY,defaultWidth:"wide",formattingValues:OY,defaultFormattingWidth:"wide"})};function Fi(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?zY(o,f=>f.test(a)):BY(o,f=>f.test(a));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}function BY(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function zY(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function zL(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],i=e.match(n.parsePattern);if(!i)return null;let a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const UY=/^(\d+)(th|st|nd|rd)?/i,HY=/\d+/i,WY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},VY={any:[/^b/i,/^(a|c)/i]},GY={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qY={any:[/1/i,/2/i,/3/i,/4/i]},YY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},KY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},XY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},QY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},JY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ZY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eK={ordinalNumber:zL({matchPattern:UY,parsePattern:HY,valueCallback:n=>parseInt(n,10)}),era:Fi({matchPatterns:WY,defaultMatchWidth:"wide",parsePatterns:VY,defaultParseWidth:"any"}),quarter:Fi({matchPatterns:GY,defaultMatchWidth:"wide",parsePatterns:qY,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fi({matchPatterns:YY,defaultMatchWidth:"wide",parsePatterns:KY,defaultParseWidth:"any"}),day:Fi({matchPatterns:XY,defaultMatchWidth:"wide",parsePatterns:QY,defaultParseWidth:"any"}),dayPeriod:Fi({matchPatterns:JY,defaultMatchWidth:"any",parsePatterns:ZY,defaultParseWidth:"any"})},UL={code:"en-US",formatDistance:CY,formatLong:PY,formatRelative:TY,localize:$Y,match:eK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tK(n){const e=Be(n);return Bi(e,$L(e))+1}function HL(n){const e=Be(n),t=+ed(e)-+yY(e);return Math.round(t/kC)+1}function WL(n,e){var h,f,p,m;const t=Be(n),r=t.getFullYear(),s=Kv(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(p=s.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=Wr(n,0);a.setFullYear(r+1,0,i),a.setHours(0,0,0,0);const o=Ki(a,e),l=Wr(n,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Ki(l,e);return t.getTime()>=o.getTime()?r+1:t.getTime()>=u.getTime()?r:r-1}function nK(n,e){var o,l,u,h;const t=Kv(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,s=WL(n,e),i=Wr(n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ki(i,e)}function VL(n,e){const t=Be(n),r=+Ki(t,e)-+nK(t,e);return Math.round(r/kC)+1}function qe(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const xo={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return qe(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):qe(t+1,2)},d(n,e){return qe(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return qe(n.getHours()%12||12,e.length)},H(n,e){return qe(n.getHours(),e.length)},m(n,e){return qe(n.getMinutes(),e.length)},s(n,e){return qe(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return qe(s,e.length)}},_d={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XN={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return xo.y(n,e)},Y:function(n,e,t,r){const s=WL(n,r),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return qe(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):qe(i,e.length)},R:function(n,e){const t=FL(n);return qe(t,e.length)},u:function(n,e){const t=n.getFullYear();return qe(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return qe(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return qe(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return xo.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return qe(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const s=VL(n,r);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):qe(s,e.length)},I:function(n,e,t){const r=HL(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):qe(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):xo.d(n,e)},D:function(n,e,t){const r=tK(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):qe(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return qe(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return qe(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return qe(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const s=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let s;switch(r===12?s=_d.noon:r===0?s=_d.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let s;switch(r>=17?s=_d.evening:r>=12?s=_d.afternoon:r>=4?s=_d.morning:s=_d.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return xo.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):xo.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):qe(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):xo.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):xo.s(n,e)},S:function(n,e){return xo.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return JN(r);case"XXXX":case"XX":return mc(r);case"XXXXX":case"XXX":default:return mc(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return JN(r);case"xxxx":case"xx":return mc(r);case"xxxxx":case"xxx":default:return mc(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+QN(r,":");case"OOOO":default:return"GMT"+mc(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+QN(r,":");case"zzzz":default:return"GMT"+mc(r,":")}},t:function(n,e,t){const r=Math.trunc(n.getTime()/1e3);return qe(r,e.length)},T:function(n,e,t){const r=n.getTime();return qe(r,e.length)}};function QN(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+e+qe(i,2)}function JN(n,e){return n%60===0?(n>0?"-":"+")+qe(Math.abs(n)/60,2):mc(n,e)}function mc(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),s=qe(Math.trunc(r/60),2),i=qe(r%60,2);return t+s+e+i}const ZN=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GL=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},rK=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return ZN(n,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",ZN(r,e)).replace("{{time}}",GL(s,e))},sK={p:GL,P:rK},iK=/^D+$/,aK=/^Y+$/,oK=["D","DD","YY","YYYY"];function lK(n){return iK.test(n)}function cK(n){return aK.test(n)}function uK(n,e,t){const r=dK(n,e,t);if(console.warn(r),oK.includes(n))throw new RangeError(r)}function dK(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pK=/^'([^]*?)'?$/,mK=/''/g,gK=/[a-zA-Z]/;function Vi(n,e,t){var h,f,p,m,y,g,x,v;const r=Kv(),s=(t==null?void 0:t.locale)??r.locale??UL,i=(t==null?void 0:t.firstWeekContainsDate)??((f=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,a=(t==null?void 0:t.weekStartsOn)??((g=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(x=r.locale)==null?void 0:x.options)==null?void 0:v.weekStartsOn)??0,o=Be(n);if(!_Y(o))throw new RangeError("Invalid time value");let l=e.match(fK).map(w=>{const _=w[0];if(_==="p"||_==="P"){const S=sK[_];return S(w,s.formatLong)}return w}).join("").match(hK).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const _=w[0];if(_==="'")return{isToken:!1,value:vK(w)};if(XN[_])return{isToken:!0,value:w};if(_.match(gK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(w=>{if(!w.isToken)return w.value;const _=w.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&cK(_)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&lK(_))&&uK(_,e,String(n));const S=XN[_[0]];return S(o,_,s.localize,u)}).join("")}function vK(n){const e=n.match(pK);return e?e[1].replace(mK,"'"):n}function yK(n){const e=Be(n),t=e.getFullYear(),r=e.getMonth(),s=Wr(n,0);return s.setFullYear(t,r+1,0),s.setHours(0,0,0,0),s.getDate()}function xK(n){return Math.trunc(+Be(n)/1e3)}function wK(n){const e=Be(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(0,0,0,0),e}function bK(n,e){return SY(wK(n),mr(n),e)+1}function x2(n,e){const t=Be(n),r=Be(e);return t.getTime()>r.getTime()}function qL(n,e){const t=Be(n),r=Be(e);return+t<+r}function TC(n,e){const t=Be(n),r=Be(e);return t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()}function _K(n,e){const t=Be(n),r=Be(e);return t.getFullYear()===r.getFullYear()}function f1(n,e){return Gn(n,-e)}function p1(n,e){const t=Be(n),r=t.getFullYear(),s=t.getDate(),i=Wr(n,0);i.setFullYear(r,e,15),i.setHours(0,0,0,0);const a=yK(i);return t.setMonth(e,Math.min(s,a)),t}function eP(n,e){const t=Be(n);return isNaN(+t)?Wr(n,NaN):(t.setFullYear(e),t)}const tP={lessThanXSeconds:{standalone:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"},withPreposition:{one:"weniger als 1 Sekunde",other:"weniger als {{count}} Sekunden"}},xSeconds:{standalone:{one:"1 Sekunde",other:"{{count}} Sekunden"},withPreposition:{one:"1 Sekunde",other:"{{count}} Sekunden"}},halfAMinute:{standalone:"eine halbe Minute",withPreposition:"einer halben Minute"},lessThanXMinutes:{standalone:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"},withPreposition:{one:"weniger als 1 Minute",other:"weniger als {{count}} Minuten"}},xMinutes:{standalone:{one:"1 Minute",other:"{{count}} Minuten"},withPreposition:{one:"1 Minute",other:"{{count}} Minuten"}},aboutXHours:{standalone:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"},withPreposition:{one:"etwa 1 Stunde",other:"etwa {{count}} Stunden"}},xHours:{standalone:{one:"1 Stunde",other:"{{count}} Stunden"},withPreposition:{one:"1 Stunde",other:"{{count}} Stunden"}},xDays:{standalone:{one:"1 Tag",other:"{{count}} Tage"},withPreposition:{one:"1 Tag",other:"{{count}} Tagen"}},aboutXWeeks:{standalone:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"},withPreposition:{one:"etwa 1 Woche",other:"etwa {{count}} Wochen"}},xWeeks:{standalone:{one:"1 Woche",other:"{{count}} Wochen"},withPreposition:{one:"1 Woche",other:"{{count}} Wochen"}},aboutXMonths:{standalone:{one:"etwa 1 Monat",other:"etwa {{count}} Monate"},withPreposition:{one:"etwa 1 Monat",other:"etwa {{count}} Monaten"}},xMonths:{standalone:{one:"1 Monat",other:"{{count}} Monate"},withPreposition:{one:"1 Monat",other:"{{count}} Monaten"}},aboutXYears:{standalone:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahre"},withPreposition:{one:"etwa 1 Jahr",other:"etwa {{count}} Jahren"}},xYears:{standalone:{one:"1 Jahr",other:"{{count}} Jahre"},withPreposition:{one:"1 Jahr",other:"{{count}} Jahren"}},overXYears:{standalone:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahre"},withPreposition:{one:"mehr als 1 Jahr",other:"mehr als {{count}} Jahren"}},almostXYears:{standalone:{one:"fast 1 Jahr",other:"fast {{count}} Jahre"},withPreposition:{one:"fast 1 Jahr",other:"fast {{count}} Jahren"}}},SK=(n,e,t)=>{let r;const s=t!=null&&t.addSuffix?tP[n].withPreposition:tP[n].standalone;return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",String(e)),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:"vor "+r:r},EK={full:"EEEE, do MMMM y",long:"do MMMM y",medium:"do MMM y",short:"dd.MM.y"},CK={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},AK={full:"{{date}} 'um' {{time}}",long:"{{date}} 'um' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},kK={date:uh({formats:EK,defaultWidth:"full"}),time:uh({formats:CK,defaultWidth:"full"}),dateTime:uh({formats:AK,defaultWidth:"full"})},NK={lastWeek:"'letzten' eeee 'um' p",yesterday:"'gestern um' p",today:"'heute um' p",tomorrow:"'morgen um' p",nextWeek:"eeee 'um' p",other:"P"},PK=(n,e,t,r)=>NK[n],jK={narrow:["v.Chr.","n.Chr."],abbreviated:["v.Chr.","n.Chr."],wide:["vor Christus","nach Christus"]},TK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. Quartal","2. Quartal","3. Quartal","4. Quartal"]},w2={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],wide:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]},RK={narrow:w2.narrow,abbreviated:["Jan.","Feb.","März","Apr.","Mai","Juni","Juli","Aug.","Sep.","Okt.","Nov.","Dez."],wide:w2.wide},MK={narrow:["S","M","D","M","D","F","S"],short:["So","Mo","Di","Mi","Do","Fr","Sa"],abbreviated:["So.","Mo.","Di.","Mi.","Do.","Fr.","Sa."],wide:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]},IK={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachm.",evening:"Abend",night:"Nacht"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"Morgen",afternoon:"Nachmittag",evening:"Abend",night:"Nacht"}},DK={narrow:{am:"vm.",pm:"nm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachm.",evening:"abends",night:"nachts"},abbreviated:{am:"vorm.",pm:"nachm.",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"},wide:{am:"vormittags",pm:"nachmittags",midnight:"Mitternacht",noon:"Mittag",morning:"morgens",afternoon:"nachmittags",evening:"abends",night:"nachts"}},LK=n=>Number(n)+".",OK={ordinalNumber:LK,era:Oi({values:jK,defaultWidth:"wide"}),quarter:Oi({values:TK,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Oi({values:w2,formattingValues:RK,defaultWidth:"wide"}),day:Oi({values:MK,defaultWidth:"wide"}),dayPeriod:Oi({values:IK,defaultWidth:"wide",formattingValues:DK,defaultFormattingWidth:"wide"})},FK=/^(\d+)(\.)?/i,$K=/\d+/i,BK={narrow:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,abbreviated:/^(v\.? ?Chr\.?|n\.? ?Chr\.?)/i,wide:/^(vor Christus|vor unserer Zeitrechnung|nach Christus|unserer Zeitrechnung)/i},zK={any:[/^v/i,/^n/i]},UK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](\.)? Quartal/i},HK={any:[/1/i,/2/i,/3/i,/4/i]},WK={narrow:/^[jfmasond]/i,abbreviated:/^(j[aä]n|feb|mär[z]?|apr|mai|jun[i]?|jul[i]?|aug|sep|okt|nov|dez)\.?/i,wide:/^(januar|februar|märz|april|mai|juni|juli|august|september|oktober|november|dezember)/i},VK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^j[aä]/i,/^f/i,/^mär/i,/^ap/i,/^mai/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},GK={narrow:/^[smdmf]/i,short:/^(so|mo|di|mi|do|fr|sa)/i,abbreviated:/^(son?|mon?|die?|mit?|don?|fre?|sam?)\.?/i,wide:/^(sonntag|montag|dienstag|mittwoch|donnerstag|freitag|samstag)/i},qK={any:[/^so/i,/^mo/i,/^di/i,/^mi/i,/^do/i,/^f/i,/^sa/i]},YK={narrow:/^(vm\.?|nm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,abbreviated:/^(vorm\.?|nachm\.?|Mitternacht|Mittag|morgens|nachm\.?|abends|nachts)/i,wide:/^(vormittags|nachmittags|Mitternacht|Mittag|morgens|nachmittags|abends|nachts)/i},KK={any:{am:/^v/i,pm:/^n/i,midnight:/^Mitte/i,noon:/^Mitta/i,morning:/morgens/i,afternoon:/nachmittags/i,evening:/abends/i,night:/nachts/i}},XK={ordinalNumber:zL({matchPattern:FK,parsePattern:$K,valueCallback:n=>parseInt(n)}),era:Fi({matchPatterns:BK,defaultMatchWidth:"wide",parsePatterns:zK,defaultParseWidth:"any"}),quarter:Fi({matchPatterns:UK,defaultMatchWidth:"wide",parsePatterns:HK,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Fi({matchPatterns:WK,defaultMatchWidth:"wide",parsePatterns:VK,defaultParseWidth:"any"}),day:Fi({matchPatterns:GK,defaultMatchWidth:"wide",parsePatterns:qK,defaultParseWidth:"any"}),dayPeriod:Fi({matchPatterns:YK,defaultMatchWidth:"wide",parsePatterns:KK,defaultParseWidth:"any"})},m1={code:"de",formatDistance:SK,formatLong:kK,formatRelative:PK,localize:OK,match:XK,options:{weekStartsOn:1,firstWeekContainsDate:4}};var me=function(){return me=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},me.apply(this,arguments)};function QK(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function YL(n,e,t){for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}function Xv(n){return n.mode==="multiple"}function Qv(n){return n.mode==="range"}function tb(n){return n.mode==="single"}var JK={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function ZK(n,e){return Vi(n,"LLLL y",e)}function eX(n,e){return Vi(n,"d",e)}function tX(n,e){return Vi(n,"LLLL",e)}function nX(n){return"".concat(n)}function rX(n,e){return Vi(n,"cccccc",e)}function sX(n,e){return Vi(n,"yyyy",e)}var iX=Object.freeze({__proto__:null,formatCaption:ZK,formatDay:eX,formatMonthCaption:tX,formatWeekNumber:nX,formatWeekdayName:rX,formatYearCaption:sX}),aX=function(n,e,t){return Vi(n,"do MMMM (EEEE)",t)},oX=function(){return"Month: "},lX=function(){return"Go to next month"},cX=function(){return"Go to previous month"},uX=function(n,e){return Vi(n,"cccc",e)},dX=function(n){return"Week n. ".concat(n)},hX=function(){return"Year: "},fX=Object.freeze({__proto__:null,labelDay:aX,labelMonthDropdown:oX,labelNext:lX,labelPrevious:cX,labelWeekNumber:dX,labelWeekday:uX,labelYearDropdown:hX});function pX(){var n="buttons",e=JK,t=UL,r={},s={},i=1,a={},o=new Date;return{captionLayout:n,classNames:e,formatters:iX,labels:fX,locale:t,modifiersClassNames:r,modifiers:s,numberOfMonths:i,styles:a,today:o,mode:"default"}}function mX(n){var e=n.fromYear,t=n.toYear,r=n.fromMonth,s=n.toMonth,i=n.fromDate,a=n.toDate;return r?i=mr(r):e&&(i=new Date(e,0,1)),s?a=PC(s):t&&(a=new Date(t,11,31)),{fromDate:i?Vf(i):void 0,toDate:a?Vf(a):void 0}}var KL=b.createContext(void 0);function gX(n){var e,t=n.initialProps,r=pX(),s=mX(t),i=s.fromDate,a=s.toDate,o=(e=t.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!i||!a)&&(o="buttons");var l;(tb(t)||Xv(t)||Qv(t))&&(l=t.onSelect);var u=me(me(me({},r),t),{captionLayout:o,classNames:me(me({},r.classNames),t.classNames),components:me({},t.components),formatters:me(me({},r.formatters),t.formatters),fromDate:i,labels:me(me({},r.labels),t.labels),mode:t.mode||r.mode,modifiers:me(me({},r.modifiers),t.modifiers),modifiersClassNames:me(me({},r.modifiersClassNames),t.modifiersClassNames),onSelect:l,styles:me(me({},r.styles),t.styles),toDate:a});return c.jsx(KL.Provider,{value:u,children:n.children})}function st(){var n=b.useContext(KL);if(!n)throw new Error("useDayPicker must be used within a DayPickerProvider.");return n}function XL(n){var e=st(),t=e.locale,r=e.classNames,s=e.styles,i=e.formatters.formatCaption;return c.jsx("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:n.id,children:i(n.displayMonth,{locale:t})})}function vX(n){return c.jsx("svg",me({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},n,{children:c.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function QL(n){var e,t,r=n.onChange,s=n.value,i=n.children,a=n.caption,o=n.className,l=n.style,u=st(),h=(t=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&t!==void 0?t:vX;return c.jsxs("div",{className:o,style:l,children:[c.jsx("span",{className:u.classNames.vhidden,children:n["aria-label"]}),c.jsx("select",{name:n.name,"aria-label":n["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r,children:i}),c.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[a,c.jsx(h,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function yX(n){var e,t=st(),r=t.fromDate,s=t.toDate,i=t.styles,a=t.locale,o=t.formatters.formatMonthCaption,l=t.classNames,u=t.components,h=t.labels.labelMonthDropdown;if(!r)return c.jsx(c.Fragment,{});if(!s)return c.jsx(c.Fragment,{});var f=[];if(_K(r,s))for(var p=mr(r),m=r.getMonth();m<=s.getMonth();m++)f.push(p1(p,m));else for(var p=mr(new Date),m=0;m<=11;m++)f.push(p1(p,m));var y=function(x){var v=Number(x.target.value),w=p1(mr(n.displayMonth),v);n.onChange(w)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:QL;return c.jsx(g,{name:"months","aria-label":h(),className:l.dropdown_month,style:i.dropdown_month,onChange:y,value:n.displayMonth.getMonth(),caption:o(n.displayMonth,{locale:a}),children:f.map(function(x){return c.jsx("option",{value:x.getMonth(),children:o(x,{locale:a})},x.getMonth())})})}function xX(n){var e,t=n.displayMonth,r=st(),s=r.fromDate,i=r.toDate,a=r.locale,o=r.styles,l=r.classNames,u=r.components,h=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,p=[];if(!s)return c.jsx(c.Fragment,{});if(!i)return c.jsx(c.Fragment,{});for(var m=s.getFullYear(),y=i.getFullYear(),g=m;g<=y;g++)p.push(eP($L(new Date),g));var x=function(w){var _=eP(mr(t),Number(w.target.value));n.onChange(_)},v=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:QL;return c.jsx(v,{name:"years","aria-label":f(),className:l.dropdown_year,style:o.dropdown_year,onChange:x,value:t.getFullYear(),caption:h(t,{locale:a}),children:p.map(function(w){return c.jsx("option",{value:w.getFullYear(),children:h(w,{locale:a})},w.getFullYear())})})}function wX(n,e){var t=b.useState(n),r=t[0],s=t[1],i=e===void 0?r:e;return[i,s]}function bX(n){var e=n.month,t=n.defaultMonth,r=n.today,s=e||t||r||new Date,i=n.toDate,a=n.fromDate,o=n.numberOfMonths,l=o===void 0?1:o;if(i&&Hm(i,s)<0){var u=-1*(l-1);s=Qs(i,u)}return a&&Hm(s,a)<0&&(s=a),mr(s)}function _X(){var n=st(),e=bX(n),t=wX(e,n.month),r=t[0],s=t[1],i=function(a){var o;if(!n.disableNavigation){var l=mr(a);s(l),(o=n.onMonthChange)===null||o===void 0||o.call(n,l)}};return[r,i]}function SX(n,e){for(var t=e.reverseMonths,r=e.numberOfMonths,s=mr(n),i=mr(Qs(s,r)),a=Hm(i,s),o=[],l=0;l<a;l++){var u=Qs(s,l);o.push(u)}return t&&(o=o.reverse()),o}function EX(n,e){if(!e.disableNavigation){var t=e.toDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,o=mr(n);if(!t)return Qs(o,a);var l=Hm(t,n);if(!(l<i))return Qs(o,a)}}function CX(n,e){if(!e.disableNavigation){var t=e.fromDate,r=e.pagedNavigation,s=e.numberOfMonths,i=s===void 0?1:s,a=r?i:1,o=mr(n);if(!t)return Qs(o,-a);var l=Hm(o,t);if(!(l<=0))return Qs(o,-a)}}var JL=b.createContext(void 0);function AX(n){var e=st(),t=_X(),r=t[0],s=t[1],i=SX(r,e),a=EX(r,e),o=CX(r,e),l=function(f){return i.some(function(p){return TC(f,p)})},u=function(f,p){l(f)||(p&&qL(f,p)?s(Qs(f,1+e.numberOfMonths*-1)):s(f))},h={currentMonth:r,displayMonths:i,goToMonth:s,goToDate:u,previousMonth:o,nextMonth:a,isDateDisplayed:l};return c.jsx(JL.Provider,{value:h,children:n.children})}function Jv(){var n=b.useContext(JL);if(!n)throw new Error("useNavigation must be used within a NavigationProvider");return n}function nP(n){var e,t=st(),r=t.classNames,s=t.styles,i=t.components,a=Jv().goToMonth,o=function(h){a(Qs(h,n.displayIndex?-n.displayIndex:0))},l=(e=i==null?void 0:i.CaptionLabel)!==null&&e!==void 0?e:XL,u=c.jsx(l,{id:n.id,displayMonth:n.displayMonth});return c.jsxs("div",{className:r.caption_dropdowns,style:s.caption_dropdowns,children:[c.jsx("div",{className:r.vhidden,children:u}),c.jsx(yX,{onChange:o,displayMonth:n.displayMonth}),c.jsx(xX,{onChange:o,displayMonth:n.displayMonth})]})}function kX(n){return c.jsx("svg",me({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:c.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function NX(n){return c.jsx("svg",me({width:"16px",height:"16px",viewBox:"0 0 120 120"},n,{children:c.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Fx=b.forwardRef(function(n,e){var t=st(),r=t.classNames,s=t.styles,i=[r.button_reset,r.button];n.className&&i.push(n.className);var a=i.join(" "),o=me(me({},s.button_reset),s.button);return n.style&&Object.assign(o,n.style),c.jsx("button",me({},n,{ref:e,type:"button",className:a,style:o}))});function PX(n){var e,t,r=st(),s=r.dir,i=r.locale,a=r.classNames,o=r.styles,l=r.labels,u=l.labelPrevious,h=l.labelNext,f=r.components;if(!n.nextMonth&&!n.previousMonth)return c.jsx(c.Fragment,{});var p=u(n.previousMonth,{locale:i}),m=[a.nav_button,a.nav_button_previous].join(" "),y=h(n.nextMonth,{locale:i}),g=[a.nav_button,a.nav_button_next].join(" "),x=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:NX,v=(t=f==null?void 0:f.IconLeft)!==null&&t!==void 0?t:kX;return c.jsxs("div",{className:a.nav,style:o.nav,children:[!n.hidePrevious&&c.jsx(Fx,{name:"previous-month","aria-label":p,className:m,style:o.nav_button_previous,disabled:!n.previousMonth,onClick:n.onPreviousClick,children:s==="rtl"?c.jsx(x,{className:a.nav_icon,style:o.nav_icon}):c.jsx(v,{className:a.nav_icon,style:o.nav_icon})}),!n.hideNext&&c.jsx(Fx,{name:"next-month","aria-label":y,className:g,style:o.nav_button_next,disabled:!n.nextMonth,onClick:n.onNextClick,children:s==="rtl"?c.jsx(v,{className:a.nav_icon,style:o.nav_icon}):c.jsx(x,{className:a.nav_icon,style:o.nav_icon})})]})}function rP(n){var e=st().numberOfMonths,t=Jv(),r=t.previousMonth,s=t.nextMonth,i=t.goToMonth,a=t.displayMonths,o=a.findIndex(function(y){return TC(n.displayMonth,y)}),l=o===0,u=o===a.length-1,h=e>1&&(l||!u),f=e>1&&(u||!l),p=function(){r&&i(r)},m=function(){s&&i(s)};return c.jsx(PX,{displayMonth:n.displayMonth,hideNext:h,hidePrevious:f,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:m})}function jX(n){var e,t=st(),r=t.classNames,s=t.disableNavigation,i=t.styles,a=t.captionLayout,o=t.components,l=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:XL,u;return s?u=c.jsx(l,{id:n.id,displayMonth:n.displayMonth}):a==="dropdown"?u=c.jsx(nP,{displayMonth:n.displayMonth,id:n.id}):a==="dropdown-buttons"?u=c.jsxs(c.Fragment,{children:[c.jsx(nP,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id}),c.jsx(rP,{displayMonth:n.displayMonth,displayIndex:n.displayIndex,id:n.id})]}):u=c.jsxs(c.Fragment,{children:[c.jsx(l,{id:n.id,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),c.jsx(rP,{displayMonth:n.displayMonth,id:n.id})]}),c.jsx("div",{className:r.caption,style:i.caption,children:u})}function TX(n){var e=st(),t=e.footer,r=e.styles,s=e.classNames.tfoot;return t?c.jsx("tfoot",{className:s,style:r.tfoot,children:c.jsx("tr",{children:c.jsx("td",{colSpan:8,children:t})})}):c.jsx(c.Fragment,{})}function RX(n,e,t){for(var r=t?ed(new Date):Ki(new Date,{locale:n,weekStartsOn:e}),s=[],i=0;i<7;i++){var a=Gn(r,i);s.push(a)}return s}function MX(){var n=st(),e=n.classNames,t=n.styles,r=n.showWeekNumber,s=n.locale,i=n.weekStartsOn,a=n.ISOWeek,o=n.formatters.formatWeekdayName,l=n.labels.labelWeekday,u=RX(s,i,a);return c.jsxs("tr",{style:t.head_row,className:e.head_row,children:[r&&c.jsx("td",{style:t.head_cell,className:e.head_cell}),u.map(function(h,f){return c.jsx("th",{scope:"col",className:e.head_cell,style:t.head_cell,"aria-label":l(h,{locale:s}),children:o(h,{locale:s})},f)})]})}function IX(){var n,e=st(),t=e.classNames,r=e.styles,s=e.components,i=(n=s==null?void 0:s.HeadRow)!==null&&n!==void 0?n:MX;return c.jsx("thead",{style:r.head,className:t.head,children:c.jsx(i,{})})}function DX(n){var e=st(),t=e.locale,r=e.formatters.formatDay;return c.jsx(c.Fragment,{children:r(n.date,{locale:t})})}var RC=b.createContext(void 0);function LX(n){if(!Xv(n.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return c.jsx(RC.Provider,{value:e,children:n.children})}return c.jsx(OX,{initialProps:n.initialProps,children:n.children})}function OX(n){var e=n.initialProps,t=n.children,r=e.selected,s=e.min,i=e.max,a=function(u,h,f){var p,m;(p=e.onDayClick)===null||p===void 0||p.call(e,u,h,f);var y=!!(h.selected&&s&&(r==null?void 0:r.length)===s);if(!y){var g=!!(!h.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var x=r?YL([],r):[];if(h.selected){var v=x.findIndex(function(w){return dr(u,w)});x.splice(v,1)}else x.push(u);(m=e.onSelect)===null||m===void 0||m.call(e,x,u,h,f)}}},o={disabled:[]};r&&o.disabled.push(function(u){var h=i&&r.length>i-1,f=r.some(function(p){return dr(p,u)});return!!(h&&!f)});var l={selected:r,onDayClick:a,modifiers:o};return c.jsx(RC.Provider,{value:l,children:t})}function MC(){var n=b.useContext(RC);if(!n)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return n}function FX(n,e){var t=e||{},r=t.from,s=t.to;return r&&s?dr(s,n)&&dr(r,n)?void 0:dr(s,n)?{from:s,to:void 0}:dr(r,n)?void 0:x2(r,n)?{from:n,to:s}:{from:r,to:n}:s?x2(n,s)?{from:s,to:n}:{from:n,to:s}:r?qL(n,r)?{from:n,to:r}:{from:r,to:n}:{from:n,to:void 0}}var IC=b.createContext(void 0);function $X(n){if(!Qv(n.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return c.jsx(IC.Provider,{value:e,children:n.children})}return c.jsx(BX,{initialProps:n.initialProps,children:n.children})}function BX(n){var e=n.initialProps,t=n.children,r=e.selected,s=r||{},i=s.from,a=s.to,o=e.min,l=e.max,u=function(m,y,g){var x,v;(x=e.onDayClick)===null||x===void 0||x.call(e,m,y,g);var w=FX(m,r);(v=e.onSelect)===null||v===void 0||v.call(e,w,m,y,g)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],a?(h.range_end=[a],dr(i,a)||(h.range_middle=[{after:i,before:a}])):h.range_end=[i]):a&&(h.range_start=[a],h.range_end=[a]),o&&(i&&!a&&h.disabled.push({after:f1(i,o-1),before:Gn(i,o-1)}),i&&a&&h.disabled.push({after:i,before:Gn(i,o-1)}),!i&&a&&h.disabled.push({after:f1(a,o-1),before:Gn(a,o-1)})),l){if(i&&!a&&(h.disabled.push({before:Gn(i,-l+1)}),h.disabled.push({after:Gn(i,l-1)})),i&&a){var f=Bi(a,i)+1,p=l-f;h.disabled.push({before:f1(i,p)}),h.disabled.push({after:Gn(a,p)})}!i&&a&&(h.disabled.push({before:Gn(a,-l+1)}),h.disabled.push({after:Gn(a,l-1)}))}return c.jsx(IC.Provider,{value:{selected:r,onDayClick:u,modifiers:h},children:t})}function DC(){var n=b.useContext(IC);if(!n)throw new Error("useSelectRange must be used within a SelectRangeProvider");return n}function Fy(n){return Array.isArray(n)?YL([],n):n!==void 0?[n]:[]}function zX(n){var e={};return Object.entries(n).forEach(function(t){var r=t[0],s=t[1];e[r]=Fy(s)}),e}var Js;(function(n){n.Outside="outside",n.Disabled="disabled",n.Selected="selected",n.Hidden="hidden",n.Today="today",n.RangeStart="range_start",n.RangeEnd="range_end",n.RangeMiddle="range_middle"})(Js||(Js={}));var UX=Js.Selected,ta=Js.Disabled,HX=Js.Hidden,WX=Js.Today,g1=Js.RangeEnd,v1=Js.RangeMiddle,y1=Js.RangeStart,VX=Js.Outside;function GX(n,e,t){var r,s=(r={},r[UX]=Fy(n.selected),r[ta]=Fy(n.disabled),r[HX]=Fy(n.hidden),r[WX]=[n.today],r[g1]=[],r[v1]=[],r[y1]=[],r[VX]=[],r);return n.fromDate&&s[ta].push({before:n.fromDate}),n.toDate&&s[ta].push({after:n.toDate}),Xv(n)?s[ta]=s[ta].concat(e.modifiers[ta]):Qv(n)&&(s[ta]=s[ta].concat(t.modifiers[ta]),s[y1]=t.modifiers[y1],s[v1]=t.modifiers[v1],s[g1]=t.modifiers[g1]),s}var ZL=b.createContext(void 0);function qX(n){var e=st(),t=MC(),r=DC(),s=GX(e,t,r),i=zX(e.modifiers),a=me(me({},s),i);return c.jsx(ZL.Provider,{value:a,children:n.children})}function eO(){var n=b.useContext(ZL);if(!n)throw new Error("useModifiers must be used within a ModifiersProvider");return n}function YX(n){return!!(n&&typeof n=="object"&&"before"in n&&"after"in n)}function KX(n){return!!(n&&typeof n=="object"&&"from"in n)}function XX(n){return!!(n&&typeof n=="object"&&"after"in n)}function QX(n){return!!(n&&typeof n=="object"&&"before"in n)}function JX(n){return!!(n&&typeof n=="object"&&"dayOfWeek"in n)}function ZX(n,e){var t,r=e.from,s=e.to;if(r&&s){var i=Bi(s,r)<0;i&&(t=[s,r],r=t[0],s=t[1]);var a=Bi(n,r)>=0&&Bi(s,n)>=0;return a}return s?dr(s,n):r?dr(r,n):!1}function eQ(n){return NC(n)}function tQ(n){return Array.isArray(n)&&n.every(NC)}function nQ(n,e){return e.some(function(t){if(typeof t=="boolean")return t;if(eQ(t))return dr(n,t);if(tQ(t))return t.includes(n);if(KX(t))return ZX(n,t);if(JX(t))return t.dayOfWeek.includes(n.getDay());if(YX(t)){var r=Bi(t.before,n),s=Bi(t.after,n),i=r>0,a=s<0,o=x2(t.before,t.after);return o?a&&i:i||a}return XX(t)?Bi(n,t.after)>0:QX(t)?Bi(t.before,n)>0:typeof t=="function"?t(n):!1})}function LC(n,e,t){var r=Object.keys(e).reduce(function(i,a){var o=e[a];return nQ(n,o)&&i.push(a),i},[]),s={};return r.forEach(function(i){return s[i]=!0}),t&&!TC(n,t)&&(s.outside=!0),s}function rQ(n,e){for(var t=mr(n[0]),r=PC(n[n.length-1]),s,i,a=t;a<=r;){var o=LC(a,e),l=!o.disabled&&!o.hidden;if(!l){a=Gn(a,1);continue}if(o.selected)return a;o.today&&!i&&(i=a),s||(s=a),a=Gn(a,1)}return i||s}var sQ=365;function tO(n,e){var t=e.moveBy,r=e.direction,s=e.context,i=e.modifiers,a=e.retry,o=a===void 0?{count:0,lastFocused:n}:a,l=s.weekStartsOn,u=s.fromDate,h=s.toDate,f=s.locale,p={day:Gn,week:y2,month:Qs,year:xY,startOfWeek:function(x){return s.ISOWeek?ed(x):Ki(x,{locale:f,weekStartsOn:l})},endOfWeek:function(x){return s.ISOWeek?BL(x):jC(x,{locale:f,weekStartsOn:l})}},m=p[t](n,r==="after"?1:-1);r==="before"&&u?m=wY([u,m]):r==="after"&&h&&(m=bY([h,m]));var y=!0;if(i){var g=LC(m,i);y=!g.disabled&&!g.hidden}return y?m:o.count>sQ?o.lastFocused:tO(m,{moveBy:t,direction:r,context:s,modifiers:i,retry:me(me({},o),{count:o.count+1})})}var nO=b.createContext(void 0);function iQ(n){var e=Jv(),t=eO(),r=b.useState(),s=r[0],i=r[1],a=b.useState(),o=a[0],l=a[1],u=rQ(e.displayMonths,t),h=s??(o&&e.isDateDisplayed(o))?o:u,f=function(){l(s),i(void 0)},p=function(x){i(x)},m=st(),y=function(x,v){if(s){var w=tO(s,{moveBy:x,direction:v,context:m,modifiers:t});dr(s,w)||(e.goToDate(w,s),p(w))}},g={focusedDay:s,focusTarget:h,blur:f,focus:p,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return c.jsx(nO.Provider,{value:g,children:n.children})}function OC(){var n=b.useContext(nO);if(!n)throw new Error("useFocusContext must be used within a FocusProvider");return n}function aQ(n,e){var t=eO(),r=LC(n,t,e);return r}var FC=b.createContext(void 0);function oQ(n){if(!tb(n.initialProps)){var e={selected:void 0};return c.jsx(FC.Provider,{value:e,children:n.children})}return c.jsx(lQ,{initialProps:n.initialProps,children:n.children})}function lQ(n){var e=n.initialProps,t=n.children,r=function(i,a,o){var l,u,h;if((l=e.onDayClick)===null||l===void 0||l.call(e,i,a,o),a.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,i,a,o);return}(h=e.onSelect)===null||h===void 0||h.call(e,i,i,a,o)},s={selected:e.selected,onDayClick:r};return c.jsx(FC.Provider,{value:s,children:t})}function rO(){var n=b.useContext(FC);if(!n)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return n}function cQ(n,e){var t=st(),r=rO(),s=MC(),i=DC(),a=OC(),o=a.focusDayAfter,l=a.focusDayBefore,u=a.focusWeekAfter,h=a.focusWeekBefore,f=a.blur,p=a.focus,m=a.focusMonthBefore,y=a.focusMonthAfter,g=a.focusYearBefore,x=a.focusYearAfter,v=a.focusStartOfWeek,w=a.focusEndOfWeek,_=function(F){var L,U,V,J;tb(t)?(L=r.onDayClick)===null||L===void 0||L.call(r,n,e,F):Xv(t)?(U=s.onDayClick)===null||U===void 0||U.call(s,n,e,F):Qv(t)?(V=i.onDayClick)===null||V===void 0||V.call(i,n,e,F):(J=t.onDayClick)===null||J===void 0||J.call(t,n,e,F)},S=function(F){var L;p(n),(L=t.onDayFocus)===null||L===void 0||L.call(t,n,e,F)},C=function(F){var L;f(),(L=t.onDayBlur)===null||L===void 0||L.call(t,n,e,F)},A=function(F){var L;(L=t.onDayMouseEnter)===null||L===void 0||L.call(t,n,e,F)},k=function(F){var L;(L=t.onDayMouseLeave)===null||L===void 0||L.call(t,n,e,F)},j=function(F){var L;(L=t.onDayPointerEnter)===null||L===void 0||L.call(t,n,e,F)},T=function(F){var L;(L=t.onDayPointerLeave)===null||L===void 0||L.call(t,n,e,F)},M=function(F){var L;(L=t.onDayTouchCancel)===null||L===void 0||L.call(t,n,e,F)},I=function(F){var L;(L=t.onDayTouchEnd)===null||L===void 0||L.call(t,n,e,F)},R=function(F){var L;(L=t.onDayTouchMove)===null||L===void 0||L.call(t,n,e,F)},$=function(F){var L;(L=t.onDayTouchStart)===null||L===void 0||L.call(t,n,e,F)},O=function(F){var L;(L=t.onDayKeyUp)===null||L===void 0||L.call(t,n,e,F)},W=function(F){var L;switch(F.key){case"ArrowLeft":F.preventDefault(),F.stopPropagation(),t.dir==="rtl"?o():l();break;case"ArrowRight":F.preventDefault(),F.stopPropagation(),t.dir==="rtl"?l():o();break;case"ArrowDown":F.preventDefault(),F.stopPropagation(),u();break;case"ArrowUp":F.preventDefault(),F.stopPropagation(),h();break;case"PageUp":F.preventDefault(),F.stopPropagation(),F.shiftKey?g():m();break;case"PageDown":F.preventDefault(),F.stopPropagation(),F.shiftKey?x():y();break;case"Home":F.preventDefault(),F.stopPropagation(),v();break;case"End":F.preventDefault(),F.stopPropagation(),w();break}(L=t.onDayKeyDown)===null||L===void 0||L.call(t,n,e,F)},B={onClick:_,onFocus:S,onBlur:C,onKeyDown:W,onKeyUp:O,onMouseEnter:A,onMouseLeave:k,onPointerEnter:j,onPointerLeave:T,onTouchCancel:M,onTouchEnd:I,onTouchMove:R,onTouchStart:$};return B}function uQ(){var n=st(),e=rO(),t=MC(),r=DC(),s=tb(n)?e.selected:Xv(n)?t.selected:Qv(n)?r.selected:void 0;return s}function dQ(n){return Object.values(Js).includes(n)}function hQ(n,e){var t=[n.classNames.day];return Object.keys(e).forEach(function(r){var s=n.modifiersClassNames[r];if(s)t.push(s);else if(dQ(r)){var i=n.classNames["day_".concat(r)];i&&t.push(i)}}),t}function fQ(n,e){var t=me({},n.styles.day);return Object.keys(e).forEach(function(r){var s;t=me(me({},t),(s=n.modifiersStyles)===null||s===void 0?void 0:s[r])}),t}function pQ(n,e,t){var r,s,i,a=st(),o=OC(),l=aQ(n,e),u=cQ(n,l),h=uQ(),f=!!(a.onDayClick||a.mode!=="default");b.useEffect(function(){var A;l.outside||o.focusedDay&&f&&dr(o.focusedDay,n)&&((A=t.current)===null||A===void 0||A.focus())},[o.focusedDay,n,t,f,l.outside]);var p=hQ(a,l).join(" "),m=fQ(a,l),y=!!(l.outside&&!a.showOutsideDays||l.hidden),g=(i=(s=a.components)===null||s===void 0?void 0:s.DayContent)!==null&&i!==void 0?i:DX,x=c.jsx(g,{date:n,displayMonth:e,activeModifiers:l}),v={style:m,className:p,children:x,role:"gridcell"},w=o.focusTarget&&dr(o.focusTarget,n)&&!l.outside,_=o.focusedDay&&dr(o.focusedDay,n),S=me(me(me({},v),(r={disabled:l.disabled,role:"gridcell"},r["aria-selected"]=l.selected,r.tabIndex=_||w?0:-1,r)),u),C={isButton:f,isHidden:y,activeModifiers:l,selectedDays:h,buttonProps:S,divProps:v};return C}function mQ(n){var e=b.useRef(null),t=pQ(n.date,n.displayMonth,e);return t.isHidden?c.jsx("div",{role:"gridcell"}):t.isButton?c.jsx(Fx,me({name:"day",ref:e},t.buttonProps)):c.jsx("div",me({},t.divProps))}function gQ(n){var e=n.number,t=n.dates,r=st(),s=r.onWeekNumberClick,i=r.styles,a=r.classNames,o=r.locale,l=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,h=u(Number(e),{locale:o});if(!s)return c.jsx("span",{className:a.weeknumber,style:i.weeknumber,children:h});var f=l(Number(e),{locale:o}),p=function(m){s(e,t,m)};return c.jsx(Fx,{name:"week-number","aria-label":f,className:a.weeknumber,style:i.weeknumber,onClick:p,children:h})}function vQ(n){var e,t,r=st(),s=r.styles,i=r.classNames,a=r.showWeekNumber,o=r.components,l=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:mQ,u=(t=o==null?void 0:o.WeekNumber)!==null&&t!==void 0?t:gQ,h;return a&&(h=c.jsx("td",{className:i.cell,style:s.cell,children:c.jsx(u,{number:n.weekNumber,dates:n.dates})})),c.jsxs("tr",{className:i.row,style:s.row,children:[h,n.dates.map(function(f){return c.jsx("td",{className:i.cell,style:s.cell,role:"presentation",children:c.jsx(l,{displayMonth:n.displayMonth,date:f})},xK(f))})]})}function sP(n,e,t){for(var r=t!=null&&t.ISOWeek?BL(e):jC(e,t),s=t!=null&&t.ISOWeek?ed(n):Ki(n,t),i=Bi(r,s),a=[],o=0;o<=i;o++)a.push(Gn(s,o));var l=a.reduce(function(u,h){var f=t!=null&&t.ISOWeek?HL(h):VL(h,t),p=u.find(function(m){return m.weekNumber===f});return p?(p.dates.push(h),u):(u.push({weekNumber:f,dates:[h]}),u)},[]);return l}function yQ(n,e){var t=sP(mr(n),PC(n),e);if(e!=null&&e.useFixedWeeks){var r=bK(n,e);if(r<6){var s=t[t.length-1],i=s.dates[s.dates.length-1],a=y2(i,6-r),o=sP(y2(i,1),a,e);t.push.apply(t,o)}}return t}function xQ(n){var e,t,r,s=st(),i=s.locale,a=s.classNames,o=s.styles,l=s.hideHead,u=s.fixedWeeks,h=s.components,f=s.weekStartsOn,p=s.firstWeekContainsDate,m=s.ISOWeek,y=yQ(n.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:p}),g=(e=h==null?void 0:h.Head)!==null&&e!==void 0?e:IX,x=(t=h==null?void 0:h.Row)!==null&&t!==void 0?t:vQ,v=(r=h==null?void 0:h.Footer)!==null&&r!==void 0?r:TX;return c.jsxs("table",{id:n.id,className:a.table,style:o.table,role:"grid","aria-labelledby":n["aria-labelledby"],children:[!l&&c.jsx(g,{}),c.jsx("tbody",{className:a.tbody,style:o.tbody,children:y.map(function(w){return c.jsx(x,{displayMonth:n.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),c.jsx(v,{displayMonth:n.displayMonth})]})}function wQ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var bQ=wQ()?b.useLayoutEffect:b.useEffect,x1=!1,_Q=0;function iP(){return"react-day-picker-".concat(++_Q)}function SQ(n){var e,t=n??(x1?iP():null),r=b.useState(t),s=r[0],i=r[1];return bQ(function(){s===null&&i(iP())},[]),b.useEffect(function(){x1===!1&&(x1=!0)},[]),(e=n??s)!==null&&e!==void 0?e:void 0}function EQ(n){var e,t,r=st(),s=r.dir,i=r.classNames,a=r.styles,o=r.components,l=Jv().displayMonths,u=SQ(r.id?"".concat(r.id,"-").concat(n.displayIndex):void 0),h=r.id?"".concat(r.id,"-grid-").concat(n.displayIndex):void 0,f=[i.month],p=a.month,m=n.displayIndex===0,y=n.displayIndex===l.length-1,g=!m&&!y;s==="rtl"&&(e=[m,y],y=e[0],m=e[1]),m&&(f.push(i.caption_start),p=me(me({},p),a.caption_start)),y&&(f.push(i.caption_end),p=me(me({},p),a.caption_end)),g&&(f.push(i.caption_between),p=me(me({},p),a.caption_between));var x=(t=o==null?void 0:o.Caption)!==null&&t!==void 0?t:jX;return c.jsxs("div",{className:f.join(" "),style:p,children:[c.jsx(x,{id:u,displayMonth:n.displayMonth,displayIndex:n.displayIndex}),c.jsx(xQ,{id:h,"aria-labelledby":u,displayMonth:n.displayMonth})]},n.displayIndex)}function CQ(n){var e=st(),t=e.classNames,r=e.styles;return c.jsx("div",{className:t.months,style:r.months,children:n.children})}function AQ(n){var e,t,r=n.initialProps,s=st(),i=OC(),a=Jv(),o=b.useState(!1),l=o[0],u=o[1];b.useEffect(function(){s.initialFocus&&i.focusTarget&&(l||(i.focus(i.focusTarget),u(!0)))},[s.initialFocus,l,i.focus,i.focusTarget,i]);var h=[s.classNames.root,s.className];s.numberOfMonths>1&&h.push(s.classNames.multiple_months),s.showWeekNumber&&h.push(s.classNames.with_weeknumber);var f=me(me({},s.styles.root),s.style),p=Object.keys(r).filter(function(y){return y.startsWith("data-")}).reduce(function(y,g){var x;return me(me({},y),(x={},x[g]=r[g],x))},{}),m=(t=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&t!==void 0?t:CQ;return c.jsx("div",me({className:h.join(" "),style:f,dir:s.dir,id:s.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:c.jsx(m,{children:a.displayMonths.map(function(y,g){return c.jsx(EQ,{displayIndex:g,displayMonth:y},g)})})}))}function kQ(n){var e=n.children,t=QK(n,["children"]);return c.jsx(gX,{initialProps:t,children:c.jsx(AX,{children:c.jsx(oQ,{initialProps:t,children:c.jsx(LX,{initialProps:t,children:c.jsx($X,{initialProps:t,children:c.jsx(qX,{children:c.jsx(iQ,{children:e})})})})})})})}function NQ(n){return c.jsx(kQ,me({},n,{children:c.jsx(AQ,{initialProps:n})}))}function $y({className:n,classNames:e,showOutsideDays:t=!0,...r}){return c.jsx(NQ,{showOutsideDays:t,className:ee("p-3",n),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ee(N_({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ee(N_({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...s})=>c.jsx(YF,{className:"h-4 w-4"}),IconRight:({...s})=>c.jsx(KF,{className:"h-4 w-4"})},...r})}$y.displayName="Calendar";const PQ=()=>{const{user:n,loading:e}=Iv(),t=Zf(),[r,s]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(!1),[u,h]=b.useState(null),[f,p]=b.useState({}),m=(C,A="CHF")=>C==null?"k.A.":C===0?"Kostenlos":`${C} ${A}`;b.useEffect(()=>{if(!e&&!n){t("/auth");return}n&&y()},[n,e,t,y]);const y=b.useCallback(async()=>{try{const{data:C}=await oe.from("profiles").select("role").eq("user_id",n==null?void 0:n.id).single();if((C==null?void 0:C.role)!=="admin"){Le.error("Zugriff verweigert. Admin-Berechtigung erforderlich."),t("/");return}g()}catch(C){console.error("Error checking admin access:",C),t("/")}},[n==null?void 0:n.id,t]),g=async()=>{try{a(!0);const{data:C,error:A}=await oe.from("courses").select("*").order("created_at",{ascending:!1});if(A)throw A;s(C||[])}catch(C){console.error("Error loading courses:",C),Le.error("Fehler beim Laden der Kurse")}finally{a(!1)}},x=C=>{h(C),p(C),l(!0)},v=()=>{h(null),p({title:"",description:"",venue:"",city:"",country:"",specialty:"",language:"Deutsch",modality:"onsite",price:null,currency:"CHF",difficulty_level:"beginner",tags:[],status:"draft",cover_image_url:null,start_date:null,end_date:null,registration_deadline:null}),l(!0)},w=async()=>{var C;try{if(!n||!f.title||!f.venue){Le.error("Titel und Veranstalter sind Pflichtfelder");return}const A={title:f.title,provider_id:n.id,description:f.description||"",venue:f.venue,city:f.city||"",country:f.country||"",specialty:f.specialty||null,language:f.language||"Deutsch",modality:f.modality||"onsite",price:f.price,currency:f.currency||"CHF",difficulty_level:f.difficulty_level||"beginner",status:f.status||"draft",cover_image_url:f.cover_image_url||null,start_date:f.start_date||null,end_date:f.end_date||null,registration_deadline:f.registration_deadline||null,tags:Array.isArray(f.tags)?f.tags:((C=f.tags)==null?void 0:C.split(",").map(k=>k.trim()))||[]};if(u){const{error:k}=await oe.from("courses").update(A).eq("id",u.id);if(k)throw k;Le.success("Kurs erfolgreich aktualisiert")}else{const{error:k}=await oe.from("courses").insert([A]);if(k)throw k;Le.success("Kurs erfolgreich erstellt")}l(!1),g()}catch(A){console.error("Error saving course:",A),Le.error("Fehler beim Speichern des Kurses")}},_=async C=>{if(confirm("Sind Sie sicher, dass Sie diesen Kurs löschen möchten?"))try{const{error:A}=await oe.from("courses").delete().eq("id",C);if(A)throw A;Le.success("Kurs erfolgreich gelöscht"),g()}catch(A){console.error("Error deleting course:",A),Le.error("Fehler beim Löschen des Kurses")}},S=(C,A)=>{p(k=>({...k,[C]:A}))};return i?c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(zE,{}),c.jsx("main",{className:"container mx-auto px-4 py-8",children:c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(Header,{}),c.jsxs("main",{className:"container mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"CMS Administration"}),c.jsx("p",{className:"text-muted-foreground",children:"Verwalten Sie Kurse und Inhalte"})]}),c.jsxs(Z,{onClick:v,className:"gap-2",children:[c.jsx(ih,{className:"h-4 w-4"}),"Neuen Kurs erstellen"]})]}),c.jsxs(Zl,{defaultValue:"courses",className:"space-y-6",children:[c.jsxs(lo,{children:[c.jsxs(At,{value:"courses",className:"gap-2",children:[c.jsx(to,{className:"h-4 w-4"}),"Kurse"]}),c.jsxs(At,{value:"users",className:"gap-2",children:[c.jsx(jv,{className:"h-4 w-4"}),"Benutzer"]}),c.jsxs(At,{value:"settings",className:"gap-2",children:[c.jsx(AE,{className:"h-4 w-4"}),"Einstellungen"]})]}),c.jsx(zt,{value:"courses",className:"space-y-6",children:c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsx(wt,{children:"Kursverwaltung"})}),c.jsx(ze,{children:c.jsxs(Bf,{children:[c.jsx(zf,{children:c.jsxs(Ws,{children:[c.jsx(Me,{children:"Titel"}),c.jsx(Me,{children:"Veranstalter"}),c.jsx(Me,{children:"Ort"}),c.jsx(Me,{children:"Modalität"}),c.jsx(Me,{children:"Status"}),c.jsx(Me,{children:"Preis"}),c.jsx(Me,{children:"Aktionen"})]})}),c.jsx(Uf,{children:r.map(C=>c.jsxs(Ws,{children:[c.jsx(Ie,{className:"font-medium",children:C.title}),c.jsx(Ie,{children:C.venue}),c.jsxs(Ie,{children:[C.city,", ",C.country]}),c.jsx(Ie,{children:c.jsx(ge,{variant:"outline",children:C.modality})}),c.jsx(Ie,{children:c.jsx(ge,{variant:C.status==="published"?"default":"secondary",children:C.status})}),c.jsx(Ie,{children:m(C.price,C.currency)}),c.jsx(Ie,{children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(Z,{variant:"outline",size:"sm",onClick:()=>x(C),children:c.jsx(NE,{className:"h-3 w-3"})}),c.jsx(Z,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>_(C.id),children:c.jsx(vR,{className:"h-3 w-3"})})]})})]},C.id))})]})})]})}),c.jsx(zt,{value:"users",children:c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsx(wt,{children:"Benutzerverwaltung"})}),c.jsx(ze,{children:c.jsx("p",{className:"text-muted-foreground",children:"Benutzerverwaltung wird in zukünftigen Updates verfügbar sein."})})]})}),c.jsx(zt,{value:"settings",children:c.jsxs(ae,{children:[c.jsx(mt,{children:c.jsx(wt,{children:"Systemeinstellungen"})}),c.jsx(ze,{children:c.jsx("p",{className:"text-muted-foreground",children:"Systemeinstellungen werden in zukünftigen Updates verfügbar sein."})})]})})]}),c.jsx(Hw,{open:o,onOpenChange:l,children:c.jsxs(Fv,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-white text-gray-900 border border-gray-200 shadow-lg",children:[c.jsx($v,{children:c.jsx(Bv,{className:"text-gray-900",children:u?"Kurs bearbeiten":"Neuen Kurs erstellen"})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-4",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Grundinformationen"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"title",className:"text-foreground",children:"Titel *"}),c.jsx(Pt,{id:"title",value:f.title||"",onChange:C=>S("title",C.target.value),placeholder:"Kurstitel eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"venue",className:"text-foreground",children:"Veranstalter *"}),c.jsx(Pt,{id:"venue",value:f.venue||"",onChange:C=>S("venue",C.target.value),placeholder:"Veranstalter eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"city",className:"text-foreground",children:"Stadt"}),c.jsx(Pt,{id:"city",value:f.city||"",onChange:C=>S("city",C.target.value),placeholder:"Stadt eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"country",className:"text-foreground",children:"Land"}),c.jsx(Pt,{id:"country",value:f.country||"",onChange:C=>S("country",C.target.value),placeholder:"Land eingeben",className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),c.jsxs("div",{className:"space-y-2 md:col-span-2",children:[c.jsx(ot,{htmlFor:"description",className:"text-foreground",children:"Beschreibung"}),c.jsx(uC,{id:"description",value:f.description||"",onChange:C=>S("description",C.target.value),placeholder:"Kursbeschreibung eingeben",rows:4,className:"bg-white text-gray-900 border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Kursdetails & Termine"}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{className:"text-foreground",children:"Startdatum"}),c.jsxs(ry,{children:[c.jsx(sy,{asChild:!0,children:c.jsxs(Z,{variant:"outline",className:ee("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.start_date&&"text-muted-foreground"),children:[c.jsx(Hi,{className:"mr-2 h-4 w-4"}),f.start_date?Vi(new Date(f.start_date),"PPP",{locale:m1}):c.jsx("span",{children:"Startdatum wählen"})]})}),c.jsx(pm,{className:"w-auto p-0 bg-background border-border",align:"start",children:c.jsx($y,{mode:"single",selected:f.start_date?new Date(f.start_date):void 0,onSelect:C=>S("start_date",C==null?void 0:C.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{className:"text-foreground",children:"Enddatum"}),c.jsxs(ry,{children:[c.jsx(sy,{asChild:!0,children:c.jsxs(Z,{variant:"outline",className:ee("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.end_date&&"text-muted-foreground"),children:[c.jsx(Hi,{className:"mr-2 h-4 w-4"}),f.end_date?Vi(new Date(f.end_date),"PPP",{locale:m1}):c.jsx("span",{children:"Enddatum wählen"})]})}),c.jsx(pm,{className:"w-auto p-0 bg-background border-border",align:"start",children:c.jsx($y,{mode:"single",selected:f.end_date?new Date(f.end_date):void 0,onSelect:C=>S("end_date",C==null?void 0:C.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{className:"text-foreground",children:"Anmeldeschluss"}),c.jsxs(ry,{children:[c.jsx(sy,{asChild:!0,children:c.jsxs(Z,{variant:"outline",className:ee("w-full justify-start text-left font-normal bg-background text-foreground border-input",!f.registration_deadline&&"text-muted-foreground"),children:[c.jsx(Hi,{className:"mr-2 h-4 w-4"}),f.registration_deadline?Vi(new Date(f.registration_deadline),"PPP",{locale:m1}):c.jsx("span",{children:"Anmeldeschluss wählen"})]})}),c.jsx(pm,{className:"w-auto p-0 bg-background border-border",align:"start",children:c.jsx($y,{mode:"single",selected:f.registration_deadline?new Date(f.registration_deadline):void 0,onSelect:C=>S("registration_deadline",C==null?void 0:C.toISOString()),initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"specialty",className:"text-foreground",children:"Fachgebiet"}),c.jsx(Pt,{id:"specialty",value:f.specialty||"",onChange:C=>S("specialty",C.target.value),placeholder:"Fachgebiet eingeben",className:"bg-background text-foreground border-input"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"language",className:"text-foreground",children:"Sprache"}),c.jsxs(Ii,{value:f.language||"Deutsch",onValueChange:C=>S("language",C),children:[c.jsx(Us,{className:"bg-background text-foreground border-input",children:c.jsx(Di,{})}),c.jsxs(Hs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"Deutsch",children:"Deutsch"}),c.jsx(yt,{value:"English",children:"English"}),c.jsx(yt,{value:"Français",children:"Français"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"modality",className:"text-foreground",children:"Modalität"}),c.jsxs(Ii,{value:f.modality||"onsite",onValueChange:C=>S("modality",C),children:[c.jsx(Us,{className:"bg-background text-foreground border-input",children:c.jsx(Di,{})}),c.jsxs(Hs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"onsite",children:"Vor Ort"}),c.jsx(yt,{value:"online",children:"Online"}),c.jsx(yt,{value:"hybrid",children:"Hybrid"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"difficulty_level",className:"text-foreground",children:"Schwierigkeitsgrad"}),c.jsxs(Ii,{value:f.difficulty_level||"beginner",onValueChange:C=>S("difficulty_level",C),children:[c.jsx(Us,{className:"bg-background text-foreground border-input",children:c.jsx(Di,{})}),c.jsxs(Hs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"beginner",children:"Anfänger"}),c.jsx(yt,{value:"intermediate",children:"Fortgeschritten"}),c.jsx(yt,{value:"advanced",children:"Experte"})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"status",className:"text-foreground",children:"Status"}),c.jsxs(Ii,{value:f.status||"draft",onValueChange:C=>S("status",C),children:[c.jsx(Us,{className:"bg-background text-foreground border-input",children:c.jsx(Di,{})}),c.jsxs(Hs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"draft",children:"Entwurf"}),c.jsx(yt,{value:"published",children:"Veröffentlicht"}),c.jsx(yt,{value:"archived",children:"Archiviert"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"tags",className:"text-foreground",children:"Tags (kommagetrennt)"}),c.jsx(Pt,{id:"tags",value:Array.isArray(f.tags)?f.tags.join(", "):f.tags||"",onChange:C=>S("tags",C.target.value),placeholder:"Tag1, Tag2, Tag3",className:"bg-background text-foreground border-input"})]})]})]}),c.jsx("div",{className:"md:col-span-2 space-y-6 border-t border-border pt-6",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsx(mY,{currentImageUrl:f.cover_image_url||void 0,onImageUploaded:C=>S("cover_image_url",C),onImageRemoved:()=>S("cover_image_url",null)}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(ot,{htmlFor:"price",className:"text-foreground",children:"Preis"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[c.jsx(Z,{type:"button",variant:f.price===0?"default":"outline",onClick:()=>S("price",0),className:"text-xs",children:"Kostenlos"}),c.jsx(Z,{type:"button",variant:f.price===null?"default":"outline",onClick:()=>S("price",null),className:"text-xs",children:"k.A."}),c.jsx(Z,{type:"button",variant:f.price&&f.price>0?"default":"outline",onClick:()=>S("price",1),className:"text-xs",children:"Kostenpflichtig"})]}),f.price&&f.price>0&&c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("div",{children:c.jsx(Pt,{type:"number",placeholder:"Preis eingeben",value:f.price||"",onChange:C=>S("price",parseFloat(C.target.value)||1),className:"bg-background text-foreground border-input"})}),c.jsx("div",{children:c.jsxs(Ii,{value:f.currency||"CHF",onValueChange:C=>S("currency",C),children:[c.jsx(Us,{className:"bg-background text-foreground border-input",children:c.jsx(Di,{})}),c.jsxs(Hs,{className:"bg-background text-foreground border-border",children:[c.jsx(yt,{value:"CHF",children:"CHF"}),c.jsx(yt,{value:"EUR",children:"EUR"}),c.jsx(yt,{value:"USD",children:"USD"})]})]})})]}),c.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["Aktuelle Anzeige: ",c.jsx("span",{className:"font-medium",children:m(f.price,f.currency)})]})]})]})})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[c.jsxs(Z,{variant:"outline",onClick:()=>l(!1),children:[c.jsx(Xl,{className:"h-4 w-4 mr-2"}),"Abbrechen"]}),c.jsxs(Z,{onClick:w,children:[c.jsx(CE,{className:"h-4 w-4 mr-2"}),"Speichern"]})]})]})})]})]})};var aP,Xe="colors",Ln="sizes",se="space",jQ={gap:se,gridGap:se,columnGap:se,gridColumnGap:se,rowGap:se,gridRowGap:se,inset:se,insetBlock:se,insetBlockEnd:se,insetBlockStart:se,insetInline:se,insetInlineEnd:se,insetInlineStart:se,margin:se,marginTop:se,marginRight:se,marginBottom:se,marginLeft:se,marginBlock:se,marginBlockEnd:se,marginBlockStart:se,marginInline:se,marginInlineEnd:se,marginInlineStart:se,padding:se,paddingTop:se,paddingRight:se,paddingBottom:se,paddingLeft:se,paddingBlock:se,paddingBlockEnd:se,paddingBlockStart:se,paddingInline:se,paddingInlineEnd:se,paddingInlineStart:se,top:se,right:se,bottom:se,left:se,scrollMargin:se,scrollMarginTop:se,scrollMarginRight:se,scrollMarginBottom:se,scrollMarginLeft:se,scrollMarginX:se,scrollMarginY:se,scrollMarginBlock:se,scrollMarginBlockEnd:se,scrollMarginBlockStart:se,scrollMarginInline:se,scrollMarginInlineEnd:se,scrollMarginInlineStart:se,scrollPadding:se,scrollPaddingTop:se,scrollPaddingRight:se,scrollPaddingBottom:se,scrollPaddingLeft:se,scrollPaddingX:se,scrollPaddingY:se,scrollPaddingBlock:se,scrollPaddingBlockEnd:se,scrollPaddingBlockStart:se,scrollPaddingInline:se,scrollPaddingInlineEnd:se,scrollPaddingInlineStart:se,fontSize:"fontSizes",background:Xe,backgroundColor:Xe,backgroundImage:Xe,borderImage:Xe,border:Xe,borderBlock:Xe,borderBlockEnd:Xe,borderBlockStart:Xe,borderBottom:Xe,borderBottomColor:Xe,borderColor:Xe,borderInline:Xe,borderInlineEnd:Xe,borderInlineStart:Xe,borderLeft:Xe,borderLeftColor:Xe,borderRight:Xe,borderRightColor:Xe,borderTop:Xe,borderTopColor:Xe,caretColor:Xe,color:Xe,columnRuleColor:Xe,fill:Xe,outline:Xe,outlineColor:Xe,stroke:Xe,textDecorationColor:Xe,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Ln,minBlockSize:Ln,maxBlockSize:Ln,inlineSize:Ln,minInlineSize:Ln,maxInlineSize:Ln,width:Ln,minWidth:Ln,maxWidth:Ln,height:Ln,minHeight:Ln,maxHeight:Ln,flexBasis:Ln,gridTemplateColumns:Ln,gridTemplateRows:Ln,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},TQ=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Zv=()=>{const n=Object.create(null);return(e,t,...r)=>{const s=(i=>JSON.stringify(i,TQ))(e);return s in n?n[s]:n[s]=t(e,...r)}},By=Symbol.for("sxs.internal"),$C=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),oP=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:RQ}=Object.prototype,b2=n=>n.includes("-")?n:n.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),MQ=/\s+(?![^()]*\))/,Sd=n=>e=>n(...typeof e=="string"?String(e).split(MQ):[e]),lP={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Sd((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n})),marginInline:Sd((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n})),maxSize:Sd((n,e)=>({maxBlockSize:n,maxInlineSize:e||n})),minSize:Sd((n,e)=>({minBlockSize:n,minInlineSize:e||n})),paddingBlock:Sd((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n})),paddingInline:Sd((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n}))},w1=/([\d.]+)([^]*)/,IQ=(n,e)=>n.length?n.reduce((t,r)=>(t.push(...e.map(s=>s.includes("&")?s.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(s)?`:is(${r})`:r):r+" "+s)),t),[]):e,DQ=(n,e)=>n in LQ&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(t,r,s,i)=>r+(s==="stretch"?`-moz-available${i};${b2(n)}:${r}-webkit-fill-available`:`-moz-fit-content${i};${b2(n)}:${r}fit-content`)+i):String(e),LQ={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},so=n=>n?n+"-":"",sO=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,s,i,a,o)=>a=="$"==!!i?r:(s||a=="--"?"calc(":"")+"var(--"+(a==="$"?so(e)+(o.includes("$")?"":so(t))+o.replace(/\$/g,"-"):o)+")"+(s||a=="--"?"*"+(s||"")+(i||"1")+")":"")),OQ=/\s*,\s*(?![^()]*\))/,FQ=Object.prototype.toString,Kd=(n,e,t,r,s)=>{let i,a,o;const l=(u,h,f)=>{let p,m;const y=g=>{for(p in g){const w=p.charCodeAt(0)===64,_=w&&Array.isArray(g[p])?g[p]:[g[p]];for(m of _){const S=/[A-Z]/.test(v=p)?v:v.replace(/-[^]/g,A=>A[1].toUpperCase()),C=typeof m=="object"&&m&&m.toString===FQ&&(!r.utils[S]||!h.length);if(S in r.utils&&!C){const A=r.utils[S];if(A!==a){a=A,y(A(m)),a=null;continue}}else if(S in lP){const A=lP[S];if(A!==o){o=A,y(A(m)),o=null;continue}}if(w&&(x=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=x.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(A,k,j,T,M,I)=>{const R=w1.test(k),$=.0625*(R?-1:1),[O,W]=R?[T,k]:[k,T];return"("+(j[0]==="="?"":j[0]===">"===R?"max-":"min-")+O+":"+(j[0]!=="="&&j.length===1?W.replace(w1,(B,F,L)=>Number(F)+$*(j===">"?1:-1)+L):W)+(M?") and ("+(M[0]===">"?"min-":"max-")+O+":"+(M.length===1?I.replace(w1,(B,F,L)=>Number(F)+$*(M===">"?-1:1)+L):I):"")+")"})),C){const A=w?f.concat(p):[...f],k=w?[...h]:IQ(h,p.split(OQ));i!==void 0&&s(cP(...i)),i=void 0,l(m,k,A)}else i===void 0&&(i=[[],h,f]),p=w||p.charCodeAt(0)!==36?p:`--${so(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,m=C?m:typeof m=="number"?m&&S in $Q?String(m)+"px":String(m):sO(DQ(S,m??""),r.prefix,r.themeMap[S]),i[0].push(`${w?`${p} `:`${b2(p)}:`}${m}`)}}var x,v};y(u),i!==void 0&&s(cP(...i)),i=void 0};l(n,e,t)},cP=(n,e,t)=>`${t.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,$Q={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},uP=n=>String.fromCharCode(n+(n>25?39:97)),Ou=n=>(e=>{let t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=uP(t%52)+r;return uP(t%52)+r})(((e,t)=>{let r=t.length;for(;r;)e=33*e^t.charCodeAt(--r);return e})(5381,JSON.stringify(n))>>>0),Qp=["themed","global","styled","onevar","resonevar","allvar","inline"],BQ=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},zQ=n=>{let e;const t=()=>{const{cssRules:s}=e.sheet;return[].map.call(s,(i,a)=>{const{cssText:o}=i;let l="";if(o.startsWith("--sxs"))return"";if(s[a-1]&&(l=s[a-1].cssText).startsWith("--sxs")){if(!i.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===i)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${o}`;return i.cssRules.length?`${l}${o}`:""}return o}).join("")},r=()=>{if(e){const{rules:o,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in o)delete o[u]}const s=Object(n).styleSheets||[];for(const o of s)if(BQ(o)){for(let l=0,u=o.cssRules;u[l];++l){const h=Object(u[l]);if(h.type!==1)continue;const f=Object(u[l+1]);if(f.type!==4)continue;++l;const{cssText:p}=h;if(!p.startsWith("--sxs"))continue;const m=p.slice(14,-3).trim().split(/\s+/),y=Qp[m[0]];y&&(e||(e={sheet:o,reset:r,rules:{},toString:t}),e.rules[y]={group:f,index:l,cache:new Set(m)})}if(e)break}if(!e){const o=(l,u)=>({type:u,cssRules:[],insertRule(h,f){this.cssRules.splice(f,0,o(h,{import:3,undefined:1}[(h.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,h=>h.cssText).join("")}}`:l}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:o("","text/css"),rules:{},reset:r,toString:t}}const{sheet:i,rules:a}=e;for(let o=Qp.length-1;o>=0;--o){const l=Qp[o];if(!a[l]){const u=Qp[o+1],h=a[u]?a[u].index:i.cssRules.length;i.insertRule("@media{}",h),i.insertRule(`--sxs{--sxs:${o}}`,h),a[l]={group:i.cssRules[h+1],index:h,cache:new Set([o])}}UQ(a[l])}};return r(),e},UQ=n=>{const e=n.group;let t=e.cssRules.length;n.apply=r=>{try{e.insertRule(r,t),++t}catch{}}},Cp=Symbol(),HQ=Zv(),WQ=(n,e)=>HQ(n,()=>(...t)=>{let r={type:null,composers:new Set};for(const s of t)if(s!=null)if(s[By]){r.type==null&&(r.type=s[By].type);for(const i of s[By].composers)r.composers.add(i)}else s.constructor!==Object||s.$$typeof?r.type==null&&(r.type=s):r.composers.add(VQ(s,n));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),GQ(n,r,e)}),VQ=({variants:n,compoundVariants:e,defaultVariants:t,...r},s)=>{const i=`${so(s.prefix)}c-${Ou(r)}`,a=[],o=[],l=Object.create(null),u=[];for(const p in t)l[p]=String(t[p]);if(typeof n=="object"&&n)for(const p in n){h=l,f=p,RQ.call(h,f)||(l[p]="undefined");const m=n[p];for(const y in m){const g={[p]:String(y)};String(y)==="undefined"&&u.push(p);const x=m[y],v=[g,x,!oP(x)];a.push(v)}}var h,f;if(typeof e=="object"&&e)for(const p of e){let{css:m,...y}=p;m=typeof m=="object"&&m||{};for(const x in y)y[x]=String(y[x]);const g=[y,m,!oP(m)];o.push(g)}return[i,r,a,o,l,u]},GQ=(n,e,t)=>{const[r,s,i,a]=qQ(e.composers),o=typeof e.type=="function"||e.type.$$typeof?(f=>{function p(){for(let m=0;m<p[Cp].length;m++){const[y,g]=p[Cp][m];f.rules[y].apply(g)}return p[Cp]=[],null}return p[Cp]=[],p.rules={},Qp.forEach(m=>p.rules[m]={apply:y=>p[Cp].push([m,y])}),p})(t):null,l=(o||t).rules,u=`.${r}${s.length>1?`:where(.${s.slice(1).join(".")})`:""}`,h=f=>{f=typeof f=="object"&&f||YQ;const{css:p,...m}=f,y={};for(const v in i)if(delete m[v],v in f){let w=f[v];typeof w=="object"&&w?y[v]={"@initial":i[v],...w}:(w=String(w),y[v]=w!=="undefined"||a.has(v)?w:i[v])}else y[v]=i[v];const g=new Set([...s]);for(const[v,w,_,S]of e.composers){t.rules.styled.cache.has(v)||(t.rules.styled.cache.add(v),Kd(w,[`.${v}`],[],n,k=>{l.styled.apply(k)}));const C=dP(_,y,n.media),A=dP(S,y,n.media,!0);for(const k of C)if(k!==void 0)for(const[j,T,M]of k){const I=`${v}-${Ou(T)}-${j}`;g.add(I);const R=(M?t.rules.resonevar:t.rules.onevar).cache,$=M?l.resonevar:l.onevar;R.has(I)||(R.add(I),Kd(T,[`.${I}`],[],n,O=>{$.apply(O)}))}for(const k of A)if(k!==void 0)for(const[j,T]of k){const M=`${v}-${Ou(T)}-${j}`;g.add(M),t.rules.allvar.cache.has(M)||(t.rules.allvar.cache.add(M),Kd(T,[`.${M}`],[],n,I=>{l.allvar.apply(I)}))}}if(typeof p=="object"&&p){const v=`${r}-i${Ou(p)}-css`;g.add(v),t.rules.inline.cache.has(v)||(t.rules.inline.cache.add(v),Kd(p,[`.${v}`],[],n,w=>{l.inline.apply(w)}))}for(const v of String(f.className||"").trim().split(/\s+/))v&&g.add(v);const x=m.className=[...g].join(" ");return{type:e.type,className:x,selector:u,props:m,toString:()=>x,deferredInjector:o}};return $C(h,{className:r,selector:u,[By]:e,toString:()=>(t.rules.styled.cache.has(r)||h(),r)})},qQ=n=>{let e="";const t=[],r={},s=[];for(const[i,,,,a,o]of n){e===""&&(e=i),t.push(i),s.push(...o);for(const l in a){const u=a[l];(r[l]===void 0||u!=="undefined"||o.includes(u))&&(r[l]=u)}}return[e,t,r,new Set(s)]},dP=(n,e,t,r)=>{const s=[];e:for(let[i,a,o]of n){if(o)continue;let l,u=0,h=!1;for(l in i){const f=i[l];let p=e[l];if(p!==f){if(typeof p!="object"||!p)continue e;{let m,y,g=0;for(const x in p){if(f===String(p[x])){if(x!=="@initial"){const v=x.slice(1);(y=y||[]).push(v in t?t[v]:x.replace(/^@media ?/,"")),h=!0}u+=g,m=!0}++g}if(y&&y.length&&(a={["@media "+y.join(", ")]:a}),!m)continue e}}}(s[u]=s[u]||[]).push([r?"cv":`${l}-${i[l]}`,a,h])}return s},YQ={},KQ=Zv(),XQ=(n,e)=>KQ(n,()=>(...t)=>{const r=()=>{for(let s of t){s=typeof s=="object"&&s||{};let i=Ou(s);if(!e.rules.global.cache.has(i)){if(e.rules.global.cache.add(i),"@import"in s){let a=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let o of[].concat(s["@import"]))o=o.includes('"')||o.includes("'")?o:`"${o}"`,e.sheet.insertRule(`@import ${o};`,a++);delete s["@import"]}Kd(s,[],[],n,a=>{e.rules.global.apply(a)})}}return""};return $C(r,{toString:r})}),QQ=Zv(),JQ=(n,e)=>QQ(n,()=>t=>{const r=`${so(n.prefix)}k-${Ou(t)}`,s=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const i=[];Kd(t,[],[],n,o=>i.push(o));const a=`@keyframes ${r}{${i.join("")}}`;e.rules.global.apply(a)}return r};return $C(s,{get name(){return s()},toString:s})}),ZQ=class{constructor(e,t,r,s){this.token=e==null?"":String(e),this.value=t==null?"":String(t),this.scale=r==null?"":String(r),this.prefix=s==null?"":String(s)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+so(this.prefix)+so(this.scale)+this.token}toString(){return this.computedValue}},eJ=Zv(),tJ=(n,e)=>eJ(n,()=>(t,r)=>{r=typeof t=="object"&&t||Object(r);const s=`.${t=(t=typeof t=="string"?t:"")||`${so(n.prefix)}t-${Ou(r)}`}`,i={},a=[];for(const l in r){i[l]={};for(const u in r[l]){const h=`--${so(n.prefix)}${l}-${u}`,f=sO(String(r[l][u]),n.prefix,l);i[l][u]=new ZQ(u,f,l,n.prefix),a.push(`${h}:${f}`)}}const o=()=>{if(a.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const l=`${r===n.theme?":root,":""}.${t}{${a.join(";")}}`;e.rules.themed.apply(l)}return t};return{...i,get className(){return o()},selector:s,toString:o}}),nJ=Zv(),iO=n=>{let e=!1;const t=nJ(n,r=>{e=!0;const s="prefix"in(r=typeof r=="object"&&r||{})?String(r.prefix):"",i=typeof r.media=="object"&&r.media||{},a=typeof r.root=="object"?r.root||null:globalThis.document||null,o=typeof r.theme=="object"&&r.theme||{},l={prefix:s,media:i,theme:o,themeMap:typeof r.themeMap=="object"&&r.themeMap||{...jQ},utils:typeof r.utils=="object"&&r.utils||{}},u=zQ(a),h={css:WQ(l,u),globalCss:XQ(l,u),keyframes:JQ(l,u),createTheme:tJ(l,u),reset(){u.reset(),h.theme.toString()},theme:{},sheet:u,config:l,prefix:s,getCssText:u.toString,toString:u.toString};return String(h.theme=h.createTheme(o)),h});return e||t.reset(),t},aO=()=>aP||(aP=iO()),rJ=(...n)=>aO().createTheme(...n),co=(...n)=>aO().css(...n),sJ={default:{colors:{brand:"hsl(153 60.0% 53.0%)",brandAccent:"hsl(154 54.8% 45.1%)",brandButtonText:"white",defaultButtonBackground:"white",defaultButtonBackgroundHover:"#eaeaea",defaultButtonBorder:"lightgray",defaultButtonText:"gray",dividerBackground:"#eaeaea",inputBackground:"transparent",inputBorder:"lightgray",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"black",inputLabelText:"gray",inputPlaceholder:"darkgray",messageText:"#2b805a",messageBackground:"#e7fcf1",messageBorder:"#d0f3e1",messageTextDanger:"#ff6369",messageBackgroundDanger:"#fff8f8",messageBorderDanger:"#822025",anchorTextColor:"gray",anchorTextHoverColor:"darkgray"},space:{spaceSmall:"4px",spaceMedium:"8px",spaceLarge:"16px",labelBottomMargin:"8px",anchorBottomMargin:"4px",emailInputSpacing:"4px",socialAuthSpacing:"4px",buttonPadding:"10px 15px",inputPadding:"10px 15px"},fontSizes:{baseBodySize:"13px",baseInputSize:"14px",baseLabelSize:"14px",baseButtonSize:"14px"},fonts:{bodyFontFamily:"ui-sans-serif, sans-serif",buttonFontFamily:"ui-sans-serif, sans-serif",inputFontFamily:"ui-sans-serif, sans-serif",labelFontFamily:"ui-sans-serif, sans-serif"},borderWidths:{buttonBorderWidth:"1px",inputBorderWidth:"1px"},radii:{borderRadiusButton:"4px",buttonBorderRadius:"4px",inputBorderRadius:"4px"}},dark:{colors:{brandButtonText:"white",defaultButtonBackground:"#2e2e2e",defaultButtonBackgroundHover:"#3e3e3e",defaultButtonBorder:"#3e3e3e",defaultButtonText:"white",dividerBackground:"#2e2e2e",inputBackground:"#1e1e1e",inputBorder:"#3e3e3e",inputBorderHover:"gray",inputBorderFocus:"gray",inputText:"white",inputPlaceholder:"darkgray",messageText:"#85e0b7",messageBackground:"#072719",messageBorder:"#2b805a",messageBackgroundDanger:"#1f1315"}}},jt={SIGN_IN:"sign_in",SIGN_UP:"sign_up",FORGOTTEN_PASSWORD:"forgotten_password",MAGIC_LINK:"magic_link",UPDATE_PASSWORD:"update_password",VERIFY_OTP:"verify_otp"},iJ="supabase-auth-ui",aJ={ROOT:"root",SIGN_IN:jt.SIGN_IN,SIGN_UP:jt.SIGN_UP,FORGOTTEN_PASSWORD:jt.FORGOTTEN_PASSWORD,MAGIC_LINK:jt.MAGIC_LINK,UPDATE_PASSWORD:jt.UPDATE_PASSWORD,anchor:"ui-anchor",button:"ui-button",container:"ui-container",divider:"ui-divider",input:"ui-input",label:"ui-label",loader:"ui-loader",message:"ui-message"};function ld(n,e,t){var r,s;const i=[],a=aJ[n];return i.push(t!=null&&t.prependedClassName?(t==null?void 0:t.prependedClassName)+"_"+a:iJ+"_"+a),(r=t==null?void 0:t.className)!=null&&r[n]&&i.push((s=t==null?void 0:t.className)==null?void 0:s[n]),((t==null?void 0:t.extend)===void 0||(t==null?void 0:t.extend)===!0)&&i.push(e),i}function _2(n,e){let t;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(Array.isArray(e))for(t=0;t<e.length;t++)n[t]=_2(n[t],e[t]);else for(t in e)n[t]=_2(n[t],e[t]);return n}return e}function b1(n,...e){let t=e.length;for(let r=0;r<t;r++)n=_2(n,e[r]);return n}function oJ(n,e){return n.replace(/{{(\w+)}}/g,(t,r)=>e.hasOwnProperty(r)?e[r]:t)}var lJ={sign_up:{email_label:"Email address",password_label:"Create a Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign up",loading_button_label:"Signing up ...",social_provider_text:"Sign in with {{provider}}",link_text:"Don't have an account? Sign up",confirmation_text:"Check your email for the confirmation link"},sign_in:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",password_input_placeholder:"Your password",button_label:"Sign in",loading_button_label:"Signing in ...",social_provider_text:"Sign in with {{provider}}",link_text:"Already have an account? Sign in"},magic_link:{email_input_label:"Email address",email_input_placeholder:"Your email address",button_label:"Send Magic Link",loading_button_label:"Sending Magic Link ...",link_text:"Send a magic link email",confirmation_text:"Check your email for the magic link"},forgotten_password:{email_label:"Email address",password_label:"Your Password",email_input_placeholder:"Your email address",button_label:"Send reset password instructions",loading_button_label:"Sending reset instructions ...",link_text:"Forgot your password?",confirmation_text:"Check your email for the password reset link"},update_password:{password_label:"New password",password_input_placeholder:"Your new password",button_label:"Update password",loading_button_label:"Updating password ...",confirmation_text:"Your password has been updated"},verify_otp:{email_input_label:"Email address",email_input_placeholder:"Your email address",phone_input_label:"Phone number",phone_input_placeholder:"Your phone number",token_input_label:"Token",token_input_placeholder:"Your Otp token",button_label:"Verify token",loading_button_label:"Signing in ..."}};const cJ=co({fontFamily:"$bodyFontFamily",fontSize:"$baseBodySize",marginBottom:"$anchorBottomMargin",color:"$anchorTextColor",display:"block",textAlign:"center",textDecoration:"underline","&:hover":{color:"$anchorTextHoverColor"}}),Sc=({children:n,appearance:e,...t})=>{var r;const s=ld("anchor",cJ(),e);return D.createElement("a",{...t,style:(r=e==null?void 0:e.style)==null?void 0:r.anchor,className:s.join(" ")},n)},uJ=co({fontFamily:"$buttonFontFamily",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",borderRadius:"$borderRadiusButton",fontSize:"$baseButtonSize",padding:"$buttonPadding",cursor:"pointer",borderWidth:"$buttonBorderWidth",borderStyle:"solid",width:"100%",transitionProperty:"background-color",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"100ms","&:disabled":{opacity:.7,cursor:"unset"},variants:{color:{default:{backgroundColor:"$defaultButtonBackground",color:"$defaultButtonText",borderColor:"$defaultButtonBorder","&:hover:not(:disabled)":{backgroundColor:"$defaultButtonBackgroundHover"}},primary:{backgroundColor:"$brand",color:"$brandButtonText",borderColor:"$brandAccent","&:hover:not(:disabled)":{backgroundColor:"$brandAccent"}}}}}),ip=({children:n,color:e="default",appearance:t,icon:r,loading:s=!1,...i})=>{var a;const o=ld("button",uJ({color:e}),t);return D.createElement("button",{...i,style:(a=t==null?void 0:t.style)==null?void 0:a.button,className:o.join(" "),disabled:s},r,n)},dJ=co({display:"flex",gap:"4px",variants:{direction:{horizontal:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(48px, 1fr))"},vertical:{flexDirection:"column",margin:"8px 0"}},gap:{small:{gap:"4px"},medium:{gap:"8px"},large:{gap:"16px"}}}}),Gi=({children:n,appearance:e,...t})=>{var r;const s=ld("container",dJ({direction:t.direction,gap:t.gap}),e);return D.createElement("div",{...t,style:(r=e==null?void 0:e.style)==null?void 0:r.container,className:s.join(" ")},n)},hJ=co({background:"$dividerBackground",display:"block",margin:"16px 0",height:"1px",width:"100%"}),fJ=({children:n,appearance:e,...t})=>{var r;const s=ld("divider",hJ(),e);return D.createElement("div",{...t,style:(r=e==null?void 0:e.style)==null?void 0:r.divider,className:s.join(" ")})},pJ=co({fontFamily:"$inputFontFamily",background:"$inputBackground",borderRadius:"$inputBorderRadius",padding:"$inputPadding",cursor:"text",borderWidth:"$inputBorderWidth",borderColor:"$inputBorder",borderStyle:"solid",fontSize:"$baseInputSize",width:"100%",color:"$inputText",boxSizing:"border-box","&:hover":{borderColor:"$inputBorderHover",outline:"none"},"&:focus":{borderColor:"$inputBorderFocus",outline:"none"},"&::placeholder":{color:"$inputPlaceholder",letterSpacing:"initial"},transitionProperty:"background-color, border",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"100ms",variants:{type:{default:{letterSpacing:"0px"},password:{letterSpacing:"0px"}}}}),Dl=({children:n,appearance:e,...t})=>{var r;const s=ld("input",pJ({type:t.type==="password"?"password":"default"}),e);return D.createElement("input",{...t,style:(r=e==null?void 0:e.style)==null?void 0:r.input,className:s.join(" ")},n)},mJ=co({fontFamily:"$labelFontFamily",fontSize:"$baseLabelSize",marginBottom:"$labelBottomMargin",color:"$inputLabelText",display:"block"}),Ll=({children:n,appearance:e,...t})=>{var r;const s=ld("label",mJ(),e);return D.createElement("label",{...t,style:(r=e==null?void 0:e.style)==null?void 0:r.label,className:s.join(" ")},n)},gJ=co({fontFamily:"$bodyFontFamily",fontSize:"$baseInputSize",marginBottom:"$labelBottomMargin",display:"block",textAlign:"center",borderRadius:"0.375rem",padding:"1.5rem 1rem",lineHeight:"1rem",color:"$messageText",backgroundColor:"$messageBackground",border:"1px solid $messageBorder",variants:{color:{danger:{color:"$messageTextDanger",backgroundColor:"$messageBackgroundDanger",border:"1px solid $messageBorderDanger"}}}}),Xi=({children:n,appearance:e,...t})=>{var r;const s=ld("message",gJ({color:t.color}),e);return D.createElement("span",{...t,style:(r=e==null?void 0:e.style)==null?void 0:r.message,className:s.join(" ")},n)};function oO({setAuthView:n=()=>{},supabaseClient:e,redirectTo:t,i18n:r,appearance:s,showLinks:i=!1}){var a;const[o,l]=b.useState(""),[u,h]=b.useState(""),[f,p]=b.useState(""),[m,y]=b.useState(!1),g=async v=>{var w,_;if(v.preventDefault(),h(""),p(""),y(!0),o.length===0){h((w=r==null?void 0:r.magic_link)==null?void 0:w.empty_email_address),y(!1);return}const{error:S}=await e.auth.signInWithOtp({email:o,options:{emailRedirectTo:t}});S?h(S.message):p((_=r==null?void 0:r.magic_link)==null?void 0:_.confirmation_text),y(!1)},x=r==null?void 0:r.magic_link;return D.createElement("form",{id:"auth-magic-link",onSubmit:g},D.createElement(Gi,{gap:"large",direction:"vertical",appearance:s},D.createElement("div",null,D.createElement(Ll,{htmlFor:"email",appearance:s},x==null?void 0:x.email_input_label),D.createElement(Dl,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:x==null?void 0:x.email_input_placeholder,onChange:v=>{h&&h(""),l(v.target.value)},appearance:s})),D.createElement(ip,{color:"primary",type:"submit",loading:m,appearance:s},m?x==null?void 0:x.loading_button_label:x==null?void 0:x.button_label),i&&D.createElement(Sc,{href:"#auth-sign-in",onClick:v=>{v.preventDefault(),n(jt.SIGN_IN)},appearance:s},(a=r==null?void 0:r.sign_in)==null?void 0:a.link_text),f&&D.createElement(Xi,{appearance:s},f),u&&D.createElement(Xi,{color:"danger",appearance:s},u)))}const Sn=co({width:"21px",height:"21px"}),vJ=({provider:n})=>n=="google"?yJ():n=="facebook"?xJ():n=="twitter"?wJ():n=="apple"?bJ():n=="github"?_J():n=="gitlab"?SJ():n=="bitbucket"?EJ():n=="discord"?CJ():n=="azure"?AJ():n=="keycloak"?kJ():n=="linkedin"?NJ():n=="notion"?PJ():n=="slack"?jJ():n=="spotify"?TJ():n=="twitch"?RJ():n=="workos"?MJ():n=="kakao"?IJ():null,yJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),D.createElement("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),D.createElement("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),D.createElement("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})),xJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("path",{fill:"#039be5",d:"M24 5A19 19 0 1 0 24 43A19 19 0 1 0 24 5Z"}),D.createElement("path",{fill:"#fff",d:"M26.572,29.036h4.917l0.772-4.995h-5.69v-2.73c0-2.075,0.678-3.915,2.619-3.915h3.119v-4.359c-0.548-0.074-1.707-0.236-3.897-0.236c-4.573,0-7.254,2.415-7.254,7.917v3.323h-4.701v4.995h4.701v13.729C22.089,42.905,23.032,43,24,43c0.875,0,1.729-0.08,2.572-0.194V29.036z"})),wJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("path",{fill:"#03A9F4",d:"M42,12.429c-1.323,0.586-2.746,0.977-4.247,1.162c1.526-0.906,2.7-2.351,3.251-4.058c-1.428,0.837-3.01,1.452-4.693,1.776C34.967,9.884,33.05,9,30.926,9c-4.08,0-7.387,3.278-7.387,7.32c0,0.572,0.067,1.129,0.193,1.67c-6.138-0.308-11.582-3.226-15.224-7.654c-0.64,1.082-1,2.349-1,3.686c0,2.541,1.301,4.778,3.285,6.096c-1.211-0.037-2.351-0.374-3.349-0.914c0,0.022,0,0.055,0,0.086c0,3.551,2.547,6.508,5.923,7.181c-0.617,0.169-1.269,0.263-1.941,0.263c-0.477,0-0.942-0.054-1.392-0.135c0.94,2.902,3.667,5.023,6.898,5.086c-2.528,1.96-5.712,3.134-9.174,3.134c-0.598,0-1.183-0.034-1.761-0.104C9.268,36.786,13.152,38,17.321,38c13.585,0,21.017-11.156,21.017-20.834c0-0.317-0.01-0.633-0.025-0.945C39.763,15.197,41.013,13.905,42,12.429"})),bJ=()=>D.createElement("svg",{className:Sn(),fill:"gray",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"21px",height:"21px"}," ",D.createElement("path",{d:"M 15.904297 1.078125 C 15.843359 1.06875 15.774219 1.0746094 15.699219 1.0996094 C 14.699219 1.2996094 13.600391 1.8996094 12.900391 2.5996094 C 12.300391 3.1996094 11.800781 4.1996094 11.800781 5.0996094 C 11.800781 5.2996094 11.999219 5.5 12.199219 5.5 C 13.299219 5.4 14.399609 4.7996094 15.099609 4.0996094 C 15.699609 3.2996094 16.199219 2.4 16.199219 1.5 C 16.199219 1.275 16.087109 1.10625 15.904297 1.078125 z M 16.199219 5.4003906 C 14.399219 5.4003906 13.600391 6.5 12.400391 6.5 C 11.100391 6.5 9.9003906 5.5 8.4003906 5.5 C 6.3003906 5.5 3.0996094 7.4996094 3.0996094 12.099609 C 2.9996094 16.299609 6.8 21 9 21 C 10.3 21 10.600391 20.199219 12.400391 20.199219 C 14.200391 20.199219 14.600391 21 15.900391 21 C 17.400391 21 18.500391 19.399609 19.400391 18.099609 C 19.800391 17.399609 20.100391 17.000391 20.400391 16.400391 C 20.600391 16.000391 20.4 15.600391 20 15.400391 C 17.4 14.100391 16.900781 9.9003906 19.800781 8.4003906 C 20.300781 8.1003906 20.4 7.4992188 20 7.1992188 C 18.9 6.1992187 17.299219 5.4003906 16.199219 5.4003906 z"})),_J=()=>D.createElement("svg",{className:Sn(),fill:"gray",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"21px",height:"21px"}," ",D.createElement("path",{d:"M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"})),SJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("path",{fill:"#e53935",d:"M24 43L16 20 32 20z"}),D.createElement("path",{fill:"#ff7043",d:"M24 43L42 20 32 20z"}),D.createElement("path",{fill:"#e53935",d:"M37 5L42 20 32 20z"}),D.createElement("path",{fill:"#ffa726",d:"M24 43L42 20 45 28z"}),D.createElement("path",{fill:"#ff7043",d:"M24 43L6 20 16 20z"}),D.createElement("path",{fill:"#e53935",d:"M11 5L6 20 16 20z"}),D.createElement("path",{fill:"#ffa726",d:"M24 43L6 20 3 28z"})),EJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 62.42 62.42"},D.createElement("defs",null,D.createElement("linearGradient",{id:"New_Gradient_Swatch_1",x1:"64.01",y1:"30.27",x2:"32.99",y2:"54.48",gradientUnits:"userSpaceOnUse"},D.createElement("stop",{offset:"0.18",stopColor:"#0052cc"}),D.createElement("stop",{offset:"1",stopColor:"#2684ff"}))),D.createElement("title",null,"Bitbucket-blue"),D.createElement("g",{id:"Layer_2","data-name":"Layer 2"},D.createElement("g",{id:"Blue",transform:"translate(0 -3.13)"},D.createElement("path",{d:"M2,6.26A2,2,0,0,0,0,8.58L8.49,60.12a2.72,2.72,0,0,0,2.66,2.27H51.88a2,2,0,0,0,2-1.68L62.37,8.59a2,2,0,0,0-2-2.32ZM37.75,43.51h-13L21.23,25.12H40.9Z",fill:"#2684ff"}),D.createElement("path",{d:"M59.67,25.12H40.9L37.75,43.51h-13L9.4,61.73a2.71,2.71,0,0,0,1.75.66H51.89a2,2,0,0,0,2-1.68Z",fill:"url(#New_Gradient_Swatch_1)"})))),CJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("path",{fill:"#536dfe",d:"M39.248,10.177c-2.804-1.287-5.812-2.235-8.956-2.778c-0.057-0.01-0.114,0.016-0.144,0.068	c-0.387,0.688-0.815,1.585-1.115,2.291c-3.382-0.506-6.747-0.506-10.059,0c-0.3-0.721-0.744-1.603-1.133-2.291	c-0.03-0.051-0.087-0.077-0.144-0.068c-3.143,0.541-6.15,1.489-8.956,2.778c-0.024,0.01-0.045,0.028-0.059,0.051	c-5.704,8.522-7.267,16.835-6.5,25.044c0.003,0.04,0.026,0.079,0.057,0.103c3.763,2.764,7.409,4.442,10.987,5.554	c0.057,0.017,0.118-0.003,0.154-0.051c0.846-1.156,1.601-2.374,2.248-3.656c0.038-0.075,0.002-0.164-0.076-0.194	c-1.197-0.454-2.336-1.007-3.432-1.636c-0.087-0.051-0.094-0.175-0.014-0.234c0.231-0.173,0.461-0.353,0.682-0.534	c0.04-0.033,0.095-0.04,0.142-0.019c7.201,3.288,14.997,3.288,22.113,0c0.047-0.023,0.102-0.016,0.144,0.017	c0.22,0.182,0.451,0.363,0.683,0.536c0.08,0.059,0.075,0.183-0.012,0.234c-1.096,0.641-2.236,1.182-3.434,1.634	c-0.078,0.03-0.113,0.12-0.075,0.196c0.661,1.28,1.415,2.498,2.246,3.654c0.035,0.049,0.097,0.07,0.154,0.052	c3.595-1.112,7.241-2.79,11.004-5.554c0.033-0.024,0.054-0.061,0.057-0.101c0.917-9.491-1.537-17.735-6.505-25.044	C39.293,10.205,39.272,10.187,39.248,10.177z M16.703,30.273c-2.168,0-3.954-1.99-3.954-4.435s1.752-4.435,3.954-4.435	c2.22,0,3.989,2.008,3.954,4.435C20.658,28.282,18.906,30.273,16.703,30.273z M31.324,30.273c-2.168,0-3.954-1.99-3.954-4.435	s1.752-4.435,3.954-4.435c2.22,0,3.989,2.008,3.954,4.435C35.278,28.282,33.544,30.273,31.324,30.273z"})),AJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6a",x1:"-1254.397",x2:"-1261.911",y1:"877.268",y2:"899.466",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},D.createElement("stop",{offset:"0",stopColor:"#114a8b"}),D.createElement("stop",{offset:"1",stopColor:"#0669bc"})),D.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6a)",d:"M17.634,6h11.305L17.203,40.773c-0.247,0.733-0.934,1.226-1.708,1.226H6.697 c-0.994,0-1.8-0.806-1.8-1.8c0-0.196,0.032-0.39,0.094-0.576L15.926,7.227C16.173,6.494,16.86,6,17.634,6L17.634,6z"}),D.createElement("path",{fill:"#0078d4",d:"M34.062,29.324H16.135c-0.458-0.001-0.83,0.371-0.831,0.829c0,0.231,0.095,0.451,0.264,0.608 l11.52,10.752C27.423,41.826,27.865,42,28.324,42h10.151L34.062,29.324z"}),D.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6b",x1:"-1252.05",x2:"-1253.788",y1:"887.612",y2:"888.2",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},D.createElement("stop",{offset:"0",stopOpacity:".3"}),D.createElement("stop",{offset:".071",stopOpacity:".2"}),D.createElement("stop",{offset:".321",stopOpacity:".1"}),D.createElement("stop",{offset:".623",stopOpacity:".05"}),D.createElement("stop",{offset:"1",stopOpacity:"0"})),D.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6b)",d:"M17.634,6c-0.783-0.003-1.476,0.504-1.712,1.25L5.005,39.595 c-0.335,0.934,0.151,1.964,1.085,2.299C6.286,41.964,6.493,42,6.702,42h9.026c0.684-0.122,1.25-0.603,1.481-1.259l2.177-6.416 l7.776,7.253c0.326,0.27,0.735,0.419,1.158,0.422h10.114l-4.436-12.676l-12.931,0.003L28.98,6H17.634z"}),D.createElement("linearGradient",{id:"k8yl7~hDat~FaoWq8WjN6c",x1:"-1252.952",x2:"-1244.704",y1:"876.6",y2:"898.575",gradientTransform:"translate(1981.75 -1362.063) scale(1.5625)",gradientUnits:"userSpaceOnUse"},D.createElement("stop",{offset:"0",stopColor:"#3ccbf4"}),D.createElement("stop",{offset:"1",stopColor:"#2892df"})),D.createElement("path",{fill:"url(#k8yl7~hDat~FaoWq8WjN6c)",d:"M32.074,7.225C31.827,6.493,31.141,6,30.368,6h-12.6c0.772,0,1.459,0.493,1.705,1.224 l10.935,32.399c0.318,0.942-0.188,1.963-1.13,2.281C29.093,41.968,28.899,42,28.703,42h12.6c0.994,0,1.8-0.806,1.8-1.801 c0-0.196-0.032-0.39-0.095-0.575L32.074,7.225z"})),kJ=()=>D.createElement("svg",{className:Sn(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D.createElement("path",{d:"M472.136 163.959H408.584C407.401 163.959 406.218 163.327 405.666 162.3L354.651 73.6591C354.02 72.632 352.916 72 351.654 72H143.492C142.309 72 141.126 72.632 140.574 73.6591L87.5084 165.618L36.414 254.259C35.862 255.286 35.862 256.55 36.414 257.656L87.5084 346.297L140.495 438.335C141.047 439.362 142.23 440.073 143.413 439.994H351.654C352.837 439.994 354.02 439.362 354.651 438.335L405.745 349.694C406.297 348.667 407.48 347.956 408.663 348.035H472.215C474.344 348.035 476 346.297 476 344.243V167.83C475.921 165.697 474.186 163.959 472.136 163.959ZM228.728 349.694L212.721 377.345C212.485 377.74 212.091 378.135 211.696 378.372C211.223 378.609 210.75 378.767 210.198 378.767H178.422C177.318 378.767 176.293 378.214 175.82 377.187L128.431 294.787L123.779 286.65L106.748 257.498C106.511 257.103 106.353 256.629 106.432 256.076C106.432 255.602 106.59 255.049 106.827 254.654L123.937 224.949L175.899 134.886C176.451 133.938 177.476 133.306 178.501 133.306H210.198C210.75 133.306 211.302 133.464 211.854 133.701C212.248 133.938 212.643 134.254 212.879 134.728L228.886 162.537C229.359 163.485 229.28 164.67 228.728 165.539L177.397 254.654C177.16 255.049 177.081 255.523 177.081 255.918C177.081 256.392 177.239 256.787 177.397 257.182L228.728 346.218C229.438 347.403 229.359 348.667 228.728 349.694V349.694ZM388.083 257.498L371.051 286.65L366.399 294.787L319.011 377.187C318.459 378.135 317.512 378.767 316.409 378.767H284.632C284.08 378.767 283.607 378.609 283.134 378.372C282.74 378.135 282.346 377.819 282.109 377.345L266.103 349.694C265.393 348.667 265.393 347.403 266.024 346.376L317.355 257.34C317.591 256.945 317.67 256.471 317.67 256.076C317.67 255.602 317.513 255.207 317.355 254.812L266.024 165.697C265.472 164.749 265.393 163.643 265.866 162.695L281.873 134.886C282.109 134.491 282.503 134.096 282.898 133.859C283.371 133.543 283.923 133.464 284.553 133.464H316.409C317.512 133.464 318.538 134.017 319.011 135.044L370.972 225.107L388.083 254.812C388.319 255.286 388.477 255.76 388.477 256.234C388.477 256.55 388.319 257.024 388.083 257.498V257.498Z",fill:"#008AAA"})),NJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("path",{fill:"#0288D1",d:"M42,37c0,2.762-2.238,5-5,5H11c-2.761,0-5-2.238-5-5V11c0-2.762,2.239-5,5-5h26c2.762,0,5,2.238,5,5V37z"}),D.createElement("path",{fill:"#FFF",d:"M12 19H17V36H12zM14.485 17h-.028C12.965 17 12 15.888 12 14.499 12 13.08 12.995 12 14.514 12c1.521 0 2.458 1.08 2.486 2.499C17 15.887 16.035 17 14.485 17zM36 36h-5v-9.099c0-2.198-1.225-3.698-3.192-3.698-1.501 0-2.313 1.012-2.707 1.99C24.957 25.543 25 26.511 25 27v9h-5V19h5v2.616C25.721 20.5 26.85 19 29.738 19c3.578 0 6.261 2.25 6.261 7.274L36 36 36 36z"})),PJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px",fillRule:"evenodd",clipRule:"evenodd"},D.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.553,11.099c1.232,1.001,1.694,0.925,4.008,0.77 l21.812-1.31c0.463,0,0.078-0.461-0.076-0.538l-3.622-2.619c-0.694-0.539-1.619-1.156-3.391-1.002l-21.12,1.54 c-0.77,0.076-0.924,0.461-0.617,0.77L11.553,11.099z",clipRule:"evenodd"}),D.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M12.862,16.182v22.95c0,1.233,0.616,1.695,2.004,1.619 l23.971-1.387c1.388-0.076,1.543-0.925,1.543-1.927V14.641c0-1-0.385-1.54-1.234-1.463l-25.05,1.463 C13.171,14.718,12.862,15.181,12.862,16.182L12.862,16.182z",clipRule:"evenodd"}),D.createElement("path",{fill:"#424242",fillRule:"evenodd",d:"M11.553,11.099c1.232,1.001,1.694,0.925,4.008,0.77 l21.812-1.31c0.463,0,0.078-0.461-0.076-0.538l-3.622-2.619c-0.694-0.539-1.619-1.156-3.391-1.002l-21.12,1.54 c-0.77,0.076-0.924,0.461-0.617,0.77L11.553,11.099z M12.862,16.182v22.95c0,1.233,0.616,1.695,2.004,1.619l23.971-1.387 c1.388-0.076,1.543-0.925,1.543-1.927V14.641c0-1-0.385-1.54-1.234-1.463l-25.05,1.463C13.171,14.718,12.862,15.181,12.862,16.182 L12.862,16.182z M36.526,17.413c0.154,0.694,0,1.387-0.695,1.465l-1.155,0.23v16.943c-1.003,0.539-1.928,0.847-2.698,0.847 c-1.234,0-1.543-0.385-2.467-1.54l-7.555-11.86v11.475l2.391,0.539c0,0,0,1.386-1.929,1.386l-5.317,0.308 c-0.154-0.308,0-1.078,0.539-1.232l1.388-0.385V20.418l-1.927-0.154c-0.155-0.694,0.23-1.694,1.31-1.772l5.704-0.385l7.862,12.015 V19.493l-2.005-0.23c-0.154-0.848,0.462-1.464,1.233-1.54L36.526,17.413z M7.389,5.862l21.968-1.618 c2.698-0.231,3.392-0.076,5.087,1.155l7.013,4.929C42.614,11.176,43,11.407,43,12.33v27.032c0,1.694-0.617,2.696-2.775,2.849 l-25.512,1.541c-1.62,0.077-2.391-0.154-3.239-1.232l-5.164-6.7C5.385,34.587,5,33.664,5,32.585V8.556 C5,7.171,5.617,6.015,7.389,5.862z",clipRule:"evenodd"})),jJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"21px",height:"21px"},D.createElement("path",{fill:"#33d375",d:"M33,8c0-2.209-1.791-4-4-4s-4,1.791-4,4c0,1.254,0,9.741,0,11c0,2.209,1.791,4,4,4s4-1.791,4-4	C33,17.741,33,9.254,33,8z"}),D.createElement("path",{fill:"#33d375",d:"M43,19c0,2.209-1.791,4-4,4c-1.195,0-4,0-4,0s0-2.986,0-4c0-2.209,1.791-4,4-4S43,16.791,43,19z"}),D.createElement("path",{fill:"#40c4ff",d:"M8,14c-2.209,0-4,1.791-4,4s1.791,4,4,4c1.254,0,9.741,0,11,0c2.209,0,4-1.791,4-4s-1.791-4-4-4	C17.741,14,9.254,14,8,14z"}),D.createElement("path",{fill:"#40c4ff",d:"M19,4c2.209,0,4,1.791,4,4c0,1.195,0,4,0,4s-2.986,0-4,0c-2.209,0-4-1.791-4-4S16.791,4,19,4z"}),D.createElement("path",{fill:"#e91e63",d:"M14,39.006C14,41.212,15.791,43,18,43s4-1.788,4-3.994c0-1.252,0-9.727,0-10.984	c0-2.206-1.791-3.994-4-3.994s-4,1.788-4,3.994C14,29.279,14,37.754,14,39.006z"}),D.createElement("path",{fill:"#e91e63",d:"M4,28.022c0-2.206,1.791-3.994,4-3.994c1.195,0,4,0,4,0s0,2.981,0,3.994c0,2.206-1.791,3.994-4,3.994	S4,30.228,4,28.022z"}),D.createElement("path",{fill:"#ffc107",d:"M39,33c2.209,0,4-1.791,4-4s-1.791-4-4-4c-1.254,0-9.741,0-11,0c-2.209,0-4,1.791-4,4s1.791,4,4,4	C29.258,33,37.746,33,39,33z"}),D.createElement("path",{fill:"#ffc107",d:"M28,43c-2.209,0-4-1.791-4-4c0-1.195,0-4,0-4s2.986,0,4,0c2.209,0,4,1.791,4,4S30.209,43,28,43z"})),TJ=()=>D.createElement("svg",{className:Sn(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D.createElement("path",{d:"M255.498 31.0034C131.513 31.0034 31 131.515 31 255.502C31 379.492 131.513 480 255.498 480C379.497 480 480 379.495 480 255.502C480 131.522 379.497 31.0135 255.495 31.0135L255.498 31V31.0034ZM358.453 354.798C354.432 361.391 345.801 363.486 339.204 359.435C286.496 327.237 220.139 319.947 141.993 337.801C134.463 339.516 126.957 334.798 125.24 327.264C123.516 319.731 128.217 312.225 135.767 310.511C221.284 290.972 294.639 299.384 353.816 335.549C360.413 339.596 362.504 348.2 358.453 354.798ZM385.932 293.67C380.864 301.903 370.088 304.503 361.858 299.438C301.512 262.345 209.528 251.602 138.151 273.272C128.893 276.067 119.118 270.851 116.309 261.61C113.521 252.353 118.74 242.597 127.981 239.782C209.512 215.044 310.87 227.026 380.17 269.612C388.4 274.68 391 285.456 385.935 293.676V293.673L385.932 293.67ZM388.293 230.016C315.935 187.039 196.56 183.089 127.479 204.055C116.387 207.42 104.654 201.159 101.293 190.063C97.9326 178.964 104.189 167.241 115.289 163.87C194.59 139.796 326.418 144.446 409.723 193.902C419.722 199.826 422.995 212.71 417.068 222.675C411.168 232.653 398.247 235.943 388.303 230.016H388.293V230.016Z",fill:"#1ED760"})),RJ=()=>D.createElement("svg",{className:Sn(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D.createElement("path",{d:"M416 240L352 304H288L232 360V304H160V64H416V240Z",fill:"white"}),D.createElement("path",{d:"M144 32L64 112V400H160V480L240 400H304L448 256V32H144ZM416 240L352 304H288L232 360V304H160V64H416V240Z",fill:"#9146FF"}),D.createElement("path",{d:"M368 120H336V216H368V120Z",fill:"#9146FF"}),D.createElement("path",{d:"M280 120H248V216H280V120Z",fill:"#9146FF"})),MJ=()=>D.createElement("svg",{className:Sn(),width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},D.createElement("path",{d:"M33 256.043C33 264.556 35.3159 273.069 39.4845 280.202L117.993 415.493C126.098 429.298 138.373 440.572 153.657 445.634C183.764 455.528 214.797 442.873 229.618 417.333L248.609 384.661L173.806 256.043L252.777 119.831L271.768 87.1591C277.557 77.2654 284.968 69.4424 294 63H285.894H172.185C150.878 63 131.193 74.2742 120.54 92.6812L39.7161 231.884C35.3159 239.016 33 247.53 33 256.043Z",fill:"#6363F1"}),D.createElement("path",{d:"M480 256.058C480 247.539 477.684 239.021 473.516 231.883L393.849 94.6596C379.028 69.3331 347.995 56.4396 317.888 66.34C302.603 71.4053 290.329 82.6871 282.224 96.5015L264.391 127.354L339.194 256.058L260.223 392.131L241.232 424.825C235.443 434.495 228.032 442.553 219 449H227.106H340.815C362.122 449 381.807 437.718 392.46 419.299L473.284 280.003C477.684 272.866 480 264.577 480 256.058Z",fill:"#6363F1"})),IJ=()=>D.createElement("svg",{className:Sn(),xmlns:"http://www.w3.org/2000/svg",width:"2500",height:"2500",viewBox:"0 0 256 256"},D.createElement("path",{fill:"#FFE812",d:"M256 236c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20V20C0 8.954 8.954 0 20 0h216c11.046 0 20 8.954 20 20v216z"}),D.createElement("path",{d:"M128 36C70.562 36 24 72.713 24 118c0 29.279 19.466 54.97 48.748 69.477-1.593 5.494-10.237 35.344-10.581 37.689 0 0-.207 1.762.934 2.434s2.483.15 2.483.15c3.272-.457 37.943-24.811 43.944-29.04 5.995.849 12.168 1.29 18.472 1.29 57.438 0 104-36.712 104-82 0-45.287-46.562-82-104-82z"}),D.createElement("path",{fill:"#FFE812",d:"M70.5 146.625c-3.309 0-6-2.57-6-5.73V105.25h-9.362c-3.247 0-5.888-2.636-5.888-5.875s2.642-5.875 5.888-5.875h30.724c3.247 0 5.888 2.636 5.888 5.875s-2.642 5.875-5.888 5.875H76.5v35.645c0 3.16-2.691 5.73-6 5.73zM123.112 146.547c-2.502 0-4.416-1.016-4.993-2.65l-2.971-7.778-18.296-.001-2.973 7.783c-.575 1.631-2.488 2.646-4.99 2.646a9.155 9.155 0 0 1-3.814-.828c-1.654-.763-3.244-2.861-1.422-8.52l14.352-37.776c1.011-2.873 4.082-5.833 7.99-5.922 3.919.088 6.99 3.049 8.003 5.928l14.346 37.759c1.826 5.672.236 7.771-1.418 8.532a9.176 9.176 0 0 1-3.814.827c-.001 0 0 0 0 0zm-11.119-21.056L106 108.466l-5.993 17.025h11.986zM138 145.75c-3.171 0-5.75-2.468-5.75-5.5V99.5c0-3.309 2.748-6 6.125-6s6.125 2.691 6.125 6v35.25h12.75c3.171 0 5.75 2.468 5.75 5.5s-2.579 5.5-5.75 5.5H138zM171.334 146.547c-3.309 0-6-2.691-6-6V99.5c0-3.309 2.691-6 6-6s6 2.691 6 6v12.896l16.74-16.74c.861-.861 2.044-1.335 3.328-1.335 1.498 0 3.002.646 4.129 1.772 1.051 1.05 1.678 2.401 1.764 3.804.087 1.415-.384 2.712-1.324 3.653l-13.673 13.671 14.769 19.566a5.951 5.951 0 0 1 1.152 4.445 5.956 5.956 0 0 1-2.328 3.957 5.94 5.94 0 0 1-3.609 1.211 5.953 5.953 0 0 1-4.793-2.385l-14.071-18.644-2.082 2.082v13.091a6.01 6.01 0 0 1-6.002 6.003z"}));function DJ({supabaseClient:n,socialLayout:e="vertical",providers:t=["github","google","azure"],providerScopes:r,queryParams:s,redirectTo:i,onlyThirdPartyProviders:a=!0,view:o="sign_in",i18n:l,appearance:u}){const[h,f]=b.useState(!1),[p,m]=b.useState(""),y=e==="vertical",g=o==="magic_link"?"sign_in":o,x=async w=>{f(!0);const{error:_}=await n.auth.signInWithOAuth({provider:w,options:{redirectTo:i,scopes:r==null?void 0:r[w],queryParams:s}});_&&m(_.message),f(!1)};function v(w){const _=w.toLowerCase();return w.charAt(0).toUpperCase()+_.slice(1)}return D.createElement(D.Fragment,null,t&&t.length>0&&D.createElement(D.Fragment,null,D.createElement(Gi,{gap:"large",direction:"vertical",appearance:u},D.createElement(Gi,{direction:y?"vertical":"horizontal",gap:y?"small":"medium",appearance:u},t.map(w=>{var _;return D.createElement(ip,{key:w,color:"default",loading:h,onClick:()=>x(w),appearance:u},D.createElement(vJ,{provider:w}),y&&oJ((_=l==null?void 0:l[g])==null?void 0:_.social_provider_text,{provider:v(w)}))}))),!a&&D.createElement(fJ,{appearance:u})))}function hP({authView:n="sign_in",defaultEmail:e="",defaultPassword:t="",setAuthView:r=()=>{},setDefaultEmail:s=y=>{},setDefaultPassword:i=y=>{},supabaseClient:a,showLinks:o=!1,redirectTo:l,additionalData:u,magicLink:h,i18n:f,appearance:p,children:m}){var y,g,x,v;const w=b.useRef(!0),[_,S]=b.useState(e),[C,A]=b.useState(t),[k,j]=b.useState(""),[T,M]=b.useState(!1),[I,R]=b.useState("");b.useEffect(()=>(w.current=!0,S(e),A(t),()=>{w.current=!1}),[n]);const $=async B=>{var F;switch(B.preventDefault(),j(""),M(!0),n){case"sign_in":const{error:L}=await a.auth.signInWithPassword({email:_,password:C});L&&j(L.message);break;case"sign_up":let U={emailRedirectTo:l};u&&(U.data=u);const{data:{user:V,session:J},error:z}=await a.auth.signUp({email:_,password:C,options:U});z?j(z.message):V&&!J&&R((F=f==null?void 0:f.sign_up)==null?void 0:F.confirmation_text);break}w.current&&M(!1)},O=B=>{s(_),i(C),r(B)},W=f==null?void 0:f[n];return D.createElement("form",{id:n==="sign_in"?"auth-sign-in":"auth-sign-up",onSubmit:$,autoComplete:"on",style:{width:"100%"}},D.createElement(Gi,{direction:"vertical",gap:"large",appearance:p},D.createElement(Gi,{direction:"vertical",gap:"large",appearance:p},D.createElement("div",null,D.createElement(Ll,{htmlFor:"email",appearance:p},W==null?void 0:W.email_label),D.createElement(Dl,{id:"email",type:"email",name:"email",placeholder:W==null?void 0:W.email_input_placeholder,defaultValue:_,onChange:B=>S(B.target.value),autoComplete:"email",appearance:p})),D.createElement("div",null,D.createElement(Ll,{htmlFor:"password",appearance:p},W==null?void 0:W.password_label),D.createElement(Dl,{id:"password",type:"password",name:"password",placeholder:W==null?void 0:W.password_input_placeholder,defaultValue:C,onChange:B=>A(B.target.value),autoComplete:n==="sign_in"?"current-password":"new-password",appearance:p})),m),D.createElement(ip,{type:"submit",color:"primary",loading:T,appearance:p},T?W==null?void 0:W.loading_button_label:W==null?void 0:W.button_label),o&&D.createElement(Gi,{direction:"vertical",gap:"small",appearance:p},n===jt.SIGN_IN&&h&&D.createElement(Sc,{href:"#auth-magic-link",onClick:B=>{B.preventDefault(),r(jt.MAGIC_LINK)},appearance:p},(y=f==null?void 0:f.magic_link)==null?void 0:y.link_text),n===jt.SIGN_IN&&D.createElement(Sc,{href:"#auth-forgot-password",onClick:B=>{B.preventDefault(),r(jt.FORGOTTEN_PASSWORD)},appearance:p},(g=f==null?void 0:f.forgotten_password)==null?void 0:g.link_text),n===jt.SIGN_IN?D.createElement(Sc,{href:"#auth-sign-up",onClick:B=>{B.preventDefault(),O(jt.SIGN_UP)},appearance:p},(x=f==null?void 0:f.sign_up)==null?void 0:x.link_text):D.createElement(Sc,{href:"#auth-sign-in",onClick:B=>{B.preventDefault(),O(jt.SIGN_IN)},appearance:p},(v=f==null?void 0:f.sign_in)==null?void 0:v.link_text))),I&&D.createElement(Xi,{appearance:p},I),k&&D.createElement(Xi,{color:"danger",appearance:p},k))}function lO({setAuthView:n=()=>{},supabaseClient:e,redirectTo:t,i18n:r,appearance:s,showLinks:i=!1}){var a;const[o,l]=b.useState(""),[u,h]=b.useState(""),[f,p]=b.useState(""),[m,y]=b.useState(!1),g=async v=>{var w;v.preventDefault(),h(""),p(""),y(!0);const{error:_}=await e.auth.resetPasswordForEmail(o,{redirectTo:t});_?h(_.message):p((w=r==null?void 0:r.forgotten_password)==null?void 0:w.confirmation_text),y(!1)},x=r==null?void 0:r.forgotten_password;return D.createElement("form",{id:"auth-forgot-password",onSubmit:g},D.createElement(Gi,{direction:"vertical",gap:"large",appearance:s},D.createElement(Gi,{gap:"large",direction:"vertical",appearance:s},D.createElement("div",null,D.createElement(Ll,{htmlFor:"email",appearance:s},x==null?void 0:x.email_label),D.createElement(Dl,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:x==null?void 0:x.email_input_placeholder,onChange:v=>l(v.target.value),appearance:s})),D.createElement(ip,{type:"submit",color:"primary",loading:m,appearance:s},m?x==null?void 0:x.loading_button_label:x==null?void 0:x.button_label),i&&D.createElement(Sc,{href:"#auth-sign-in",onClick:v=>{v.preventDefault(),n(jt.SIGN_IN)},appearance:s},(a=r==null?void 0:r.sign_in)==null?void 0:a.link_text),f&&D.createElement(Xi,{appearance:s},f),u&&D.createElement(Xi,{color:"danger",appearance:s},u))))}function cO({supabaseClient:n,i18n:e,appearance:t}){const[r,s]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[u,h]=b.useState(!1),f=async m=>{var y;m.preventDefault(),a(""),l(""),h(!0);const{error:g}=await n.auth.updateUser({password:r});g?a(g.message):l((y=e==null?void 0:e.update_password)==null?void 0:y.confirmation_text),h(!1)},p=e==null?void 0:e.update_password;return D.createElement("form",{id:"auth-update-password",onSubmit:f},D.createElement(Gi,{gap:"large",direction:"vertical",appearance:t},D.createElement("div",null,D.createElement(Ll,{htmlFor:"password",appearance:t},p==null?void 0:p.password_label),D.createElement(Dl,{id:"password",name:"password",placeholder:p==null?void 0:p.password_input_placeholder,type:"password",autoFocus:!0,onChange:m=>s(m.target.value),appearance:t})),D.createElement(ip,{type:"submit",color:"primary",loading:u,appearance:t},u?p==null?void 0:p.loading_button_label:p==null?void 0:p.button_label),o&&D.createElement(Xi,{appearance:t},o),i&&D.createElement(Xi,{color:"danger",appearance:t},i)))}function LJ({setAuthView:n=()=>{},supabaseClient:e,otpType:t="email",i18n:r,appearance:s,showLinks:i=!1}){var a;const[o,l]=b.useState(""),[u,h]=b.useState(""),[f,p]=b.useState(""),[m,y]=b.useState(""),[g,x]=b.useState(""),[v,w]=b.useState(!1),_=async C=>{C.preventDefault(),y(""),x(""),w(!0);let A={email:o,token:f,type:t};["sms","phone_change"].includes(t)&&(A={phone:u,token:f,type:t});const{error:k}=await e.auth.verifyOtp(A);k&&y(k.message),w(!1)},S=r==null?void 0:r.verify_otp;return D.createElement("form",{id:"auth-magic-link",onSubmit:_},D.createElement(Gi,{gap:"large",direction:"vertical",appearance:s},["sms","phone_change"].includes(t)?D.createElement("div",null,D.createElement(Ll,{htmlFor:"phone",appearance:s},S==null?void 0:S.phone_input_label),D.createElement(Dl,{id:"phone",name:"phone",type:"text",autoFocus:!0,placeholder:S==null?void 0:S.phone_input_placeholder,onChange:C=>h(C.target.value),appearance:s})):D.createElement("div",null,D.createElement(Ll,{htmlFor:"email",appearance:s},S==null?void 0:S.email_input_label),D.createElement(Dl,{id:"email",name:"email",type:"email",autoFocus:!0,placeholder:S==null?void 0:S.email_input_placeholder,onChange:C=>l(C.target.value),appearance:s})),D.createElement("div",null,D.createElement(Ll,{htmlFor:"token",appearance:s},S==null?void 0:S.token_input_label),D.createElement(Dl,{id:"token",name:"token",type:"text",placeholder:S==null?void 0:S.token_input_placeholder,onChange:C=>p(C.target.value),appearance:s})),D.createElement(ip,{color:"primary",type:"submit",loading:v,appearance:s},v?S==null?void 0:S.loading_button_label:S==null?void 0:S.button_label),i&&D.createElement(Sc,{href:"#auth-sign-in",onClick:C=>{C.preventDefault(),n(jt.SIGN_IN)},appearance:s},(a=r==null?void 0:r.sign_in)==null?void 0:a.link_text),g&&D.createElement(Xi,{appearance:s},g),m&&D.createElement(Xi,{color:"danger",appearance:s},m)))}const uO=b.createContext({user:null,session:null}),OJ=n=>{const{supabaseClient:e}=n,[t,r]=b.useState(null),[s,i]=b.useState((t==null?void 0:t.user)??null);b.useEffect(()=>{(async()=>{var l;const{data:u}=await e.auth.getSession();r(u.session),i(((l=u.session)==null?void 0:l.user)??null)})();const{data:o}=e.auth.onAuthStateChange(async(l,u)=>{r(u),i((u==null?void 0:u.user)??null)});return()=>{o==null||o.subscription.unsubscribe()}},[]);const a={session:t,user:s};return D.createElement(uO.Provider,{value:a,...n})},FJ=()=>{const n=b.useContext(uO);if(n===void 0)throw new Error("useUser must be used within a UserContextProvider.");return n};function ap({supabaseClient:n,socialLayout:e="vertical",providers:t,providerScopes:r,queryParams:s,view:i="sign_in",redirectTo:a,onlyThirdPartyProviders:o=!1,magicLink:l=!1,showLinks:u=!0,appearance:h,theme:f="default",localization:p={variables:{}},otpType:m="email",additionalData:y,children:g}){const x=b1(lJ,p.variables??{}),[v,w]=b.useState(i),[_,S]=b.useState(""),[C,A]=b.useState(""),k=v==="sign_in"||v==="sign_up"||v==="magic_link";b.useEffect(()=>{var M,I;iO({theme:b1(((M=h==null?void 0:h.theme)==null?void 0:M.default)??{},((I=h==null?void 0:h.variables)==null?void 0:I.default)??{})})},[h]);const j=({children:M})=>{var I;return D.createElement("div",{className:f!=="default"?rJ(b1(h==null?void 0:h.theme[f],((I=h==null?void 0:h.variables)==null?void 0:I[f])??{})):""},k&&D.createElement(DJ,{appearance:h,supabaseClient:n,providers:t,providerScopes:r,queryParams:s,socialLayout:e,redirectTo:a,onlyThirdPartyProviders:o,i18n:x,view:v}),!o&&M)};b.useEffect(()=>{const{data:M}=n.auth.onAuthStateChange(I=>{I==="PASSWORD_RECOVERY"?w("update_password"):I==="USER_UPDATED"&&w("sign_in")});return w(i),()=>M.subscription.unsubscribe()},[i]);const T={supabaseClient:n,setAuthView:w,defaultEmail:_,defaultPassword:C,setDefaultEmail:S,setDefaultPassword:A,redirectTo:a,magicLink:l,showLinks:u,i18n:x,appearance:h};switch(v){case jt.SIGN_IN:return D.createElement(j,null,D.createElement(hP,{...T,authView:"sign_in"}));case jt.SIGN_UP:return D.createElement(j,null,D.createElement(hP,{appearance:h,supabaseClient:n,authView:"sign_up",setAuthView:w,defaultEmail:_,defaultPassword:C,setDefaultEmail:S,setDefaultPassword:A,redirectTo:a,magicLink:l,showLinks:u,i18n:x,additionalData:y,children:g}));case jt.FORGOTTEN_PASSWORD:return D.createElement(j,null,D.createElement(lO,{appearance:h,supabaseClient:n,setAuthView:w,redirectTo:a,showLinks:u,i18n:x}));case jt.MAGIC_LINK:return D.createElement(j,null,D.createElement(oO,{appearance:h,supabaseClient:n,setAuthView:w,redirectTo:a,showLinks:u,i18n:x}));case jt.UPDATE_PASSWORD:return D.createElement(cO,{appearance:h,supabaseClient:n,i18n:x});case jt.VERIFY_OTP:return D.createElement(LJ,{appearance:h,supabaseClient:n,otpType:m,i18n:x});default:return null}}ap.ForgottenPassword=lO;ap.UpdatePassword=cO;ap.MagicLink=oO;ap.UserContextProvider=OJ;ap.useUser=FJ;co({borderRadius:"12px",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",width:"360px",padding:"28px 32px"});const $J=()=>c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-card-foreground mb-2",children:"FMH Tracking"}),c.jsx("p",{className:"text-muted-foreground",children:"Melden Sie sich an oder erstellen Sie ein Konto"})]}),c.jsxs(ae,{className:"medical-card",children:[c.jsx(mt,{children:c.jsx(wt,{className:"text-center",children:"Authentifizierung"})}),c.jsx(ze,{children:c.jsx(ap,{supabaseClient:oe,appearance:{theme:sJ,variables:{default:{colors:{brand:"hsl(var(--primary))",brandAccent:"hsl(var(--primary-foreground))"}}}},providers:[],redirectTo:`${window.location.origin}/swiss-med-track/fmh`,onlyThirdPartyProviders:!1,view:"sign_in",showLinks:!0})})]})]})});function BJ(){return b.useEffect(()=>{(async()=>{const{data:{session:e}}=await oe.auth.getSession();e&&(window.location.href="/swiss-med-track/fmh")})()},[]),c.jsx($J,{})}const zJ=()=>{const n=sd();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),c.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),c.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},UJ=new H$,HJ=()=>{const n=Zf();return b.useEffect(()=>{const e=sessionStorage.getItem("intendedRoute");e&&(sessionStorage.removeItem("intendedRoute"),n(e))},[n]),c.jsxs(D9,{children:[c.jsx(ii,{path:"/",element:c.jsx(mz,{})}),c.jsx(ii,{path:"/auth",element:c.jsx(BJ,{})}),c.jsx(ii,{path:"/dashboard",element:c.jsx(Lz,{})}),c.jsx(ii,{path:"/courses",element:c.jsx(kW,{})}),c.jsx(ii,{path:"/courses/:id",element:c.jsx(ZW,{})}),c.jsx(ii,{path:"/profile/:handle",element:c.jsx(Fz,{})}),c.jsx(ii,{path:"/fmh",element:c.jsx(pY,{})}),c.jsx(ii,{path:"/admin",element:c.jsx(PQ,{})}),c.jsx(ii,{path:"*",element:c.jsx(zJ,{})})]})},WJ=()=>c.jsx(V$,{client:UJ,children:c.jsxs(gz,{children:[c.jsx(U8,{}),c.jsx(w$,{}),c.jsx(H9,{basename:"/swiss-med-track",children:c.jsx(HJ,{})})]})});LT(document.getElementById("root")).render(c.jsx(WJ,{}));
